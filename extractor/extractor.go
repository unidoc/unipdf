//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package extractor is used for quickly extracting PDF content through a simple interface.
// Currently offers functionality for extracting textual content.
package extractor ;import (_ag "bytes";_cg "errors";_da "fmt";_ga "github.com/unidoc/unipdf/v4/common";_fdd "github.com/unidoc/unipdf/v4/contentstream";_agg "github.com/unidoc/unipdf/v4/core";_cgd "github.com/unidoc/unipdf/v4/internal/license";_e "github.com/unidoc/unipdf/v4/internal/textencoding";
_daa "github.com/unidoc/unipdf/v4/internal/transform";_bd "github.com/unidoc/unipdf/v4/model";_gg "golang.org/x/image/draw";_b "golang.org/x/text/unicode/norm";_dc "image";_fd "image/color";_g "io";_fbg "math";_c "reflect";_ab "regexp";_gf "sort";_d "strings";
_fb "unicode";_f "unicode/utf8";);func _adee (_gbae *_bd .StructTreeRoot ,_cbab map[int ][]*textLine ,_ggadd _agg .PdfObject )[]*list {if _gbae ==nil {_ga .Log .Debug ("\u0062\u0075\u0069\u006c\u0064\u004c\u0069\u0073\u0074\u003a\u0020t\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0069\u0073 \u006e\u0069\u006c");
return nil ;};_acaa :=[]*_bd .KValue {};var _ecfe func (_eeegf *_bd .KValue );_ecfe =func (_acace *_bd .KValue ){if _cbfe :=_acace .GetKDict ();_cbfe !=nil {if _cbfe .S .String ()=="\u004c"{_acaa =append (_acaa ,_acace );}else {for _ ,_gcdd :=range _cbfe .GetChildren (){_ecfe (_gcdd );
};};};};for _ ,_dgfc :=range _gbae .K {_gcde :=_bd .NewKValue ();_gcde .SetKDict (_dgfc );_ecfe (_gcde );};_fggac :=_cdff (_acaa ,_cbab ,_ggadd );var _fefc []*list ;for _ ,_fae :=range _fggac {_fcfb :=_feged (_fae );_fefc =append (_fefc ,_fcfb ...);};return _fefc ;
};func (_ccffg *wordBag )blocked (_ggab *textWord )bool {if _ggab .Urx < _ccffg .Llx {_aagb :=_egge (_ggab .PdfRectangle );_efgbg :=_cgbag (_ccffg .PdfRectangle );if _ccffg ._ffabd .blocks (_aagb ,_efgbg ){if _gcaf {_ga .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0078\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_ggab ,_ccffg );
};return true ;};}else if _ccffg .Urx < _ggab .Llx {_cdbe :=_egge (_ccffg .PdfRectangle );_fceb :=_cgbag (_ggab .PdfRectangle );if _ccffg ._ffabd .blocks (_cdbe ,_fceb ){if _gcaf {_ga .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0078\u2192\u0020:\u0020\u0025\u0073\u0020%s",_ggab ,_ccffg );
};return true ;};};if _ggab .Ury < _ccffg .Lly {_feeb :=_ceab (_ggab .PdfRectangle );_gdeaf :=_fgecd (_ccffg .PdfRectangle );if _ccffg ._eddge .blocks (_feeb ,_gdeaf ){if _gcaf {_ga .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0079\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_ggab ,_ccffg );
};return true ;};}else if _ccffg .Ury < _ggab .Lly {_ddfd :=_ceab (_ccffg .PdfRectangle );_edgc :=_fgecd (_ggab .PdfRectangle );if _ccffg ._eddge .blocks (_ddfd ,_edgc ){if _gcaf {_ga .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0079\u2192\u0020:\u0020\u0025\u0073\u0020%s",_ggab ,_ccffg );
};return true ;};};return false ;};func (_bcfd rulingList )snapToGroupsDirection ()rulingList {_bcfd .sortStrict ();_dgdff :=make (map[*ruling ]rulingList ,len (_bcfd ));_eadfa :=_bcfd [0];_cgac :=func (_geag *ruling ){_eadfa =_geag ;_dgdff [_eadfa ]=rulingList {_geag }};
_cgac (_bcfd [0]);for _ ,_cafac :=range _bcfd [1:]{if _cafac ._bbac < _eadfa ._bbac -_fagd {_ga .Log .Error ("\u0073\u006e\u0061\u0070T\u006f\u0047\u0072\u006f\u0075\u0070\u0073\u0044\u0069r\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0057\u0072\u006f\u006e\u0067\u0020\u0070\u0072\u0069\u006da\u0072\u0079\u0020\u006f\u0072d\u0065\u0072\u002e\u000a\u0009\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0020\u0076\u003d\u0025\u0073",_eadfa ,_cafac );
};if _cafac ._bbac > _eadfa ._bbac +_dffe {_cgac (_cafac );}else {_dgdff [_eadfa ]=append (_dgdff [_eadfa ],_cafac );};};_ebedc :=make (map[*ruling ]float64 ,len (_dgdff ));_fcgeb :=make (map[*ruling ]*ruling ,len (_bcfd ));for _aeaaf ,_feaba :=range _dgdff {_ebedc [_aeaaf ]=_feaba .mergePrimary ();
for _ ,_adeef :=range _feaba {_fcgeb [_adeef ]=_aeaaf ;};};for _ ,_ddggc :=range _bcfd {_ddggc ._bbac =_ebedc [_fcgeb [_ddggc ]];};_cgafd :=make (rulingList ,0,len (_bcfd ));for _ ,_bbgdf :=range _dgdff {_daeaa :=_bbgdf .splitSec ();for _debfd ,_ggeeb :=range _daeaa {_cgbd :=_ggeeb .merge ();
if len (_cgafd )> 0{_gddfb :=_cgafd [len (_cgafd )-1];if _gddfb .alignsPrimary (_cgbd )&&_gddfb .alignsSec (_cgbd ){_ga .Log .Error ("\u0073\u006e\u0061\u0070\u0054\u006fG\u0072\u006f\u0075\u0070\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0044\u0075\u0070\u006ci\u0063\u0061\u0074\u0065\u0020\u0069\u003d\u0025\u0064\u000a\u0009\u0077\u003d\u0025s\u000a\t\u0076\u003d\u0025\u0073",_debfd ,_gddfb ,_cgbd );
continue ;};};_cgafd =append (_cgafd ,_cgbd );};};_cgafd .sortStrict ();return _cgafd ;};func (_dfeab paraList )llyOrdering ()[]int {_dedb :=make ([]int ,len (_dfeab ));for _cfcfg :=range _dfeab {_dedb [_cfcfg ]=_cfcfg ;};_gf .SliceStable (_dedb ,func (_aged ,_dfee int )bool {_febcf ,_afea :=_dedb [_aged ],_dedb [_dfee ];
return _dfeab [_febcf ].Lly < _dfeab [_afea ].Lly ;});return _dedb ;};

// ExtractPageText returns the text contents of `e` (an Extractor for a page) as a PageText.
// TODO(peterwilliams97): The stats complicate this function signature and aren't very useful.
//
//	Replace with a function like Extract() (*PageText, error)
func (_ggge *Extractor )ExtractPageText ()(*PageText ,int ,int ,error ){_age ,_gbde ,_dffb ,_cgff :=_ggge .extractPageText (_ggge ._eee ,_ggge ._deb ,_daa .IdentityMatrix (),0,false );if _cgff !=nil &&_cgff !=_bd .ErrColorOutOfRange {return nil ,0,0,_cgff ;
};if _ggge ._gbc !=nil {_age ._baccf ._bbgb =_ggge ._gbc .ExtractionMode ;};_age .computeViews ();_cgff =_baaea (_age );if _cgff !=nil {return nil ,0,0,_cgff ;};if _ggge ._gbc !=nil {if _ggge ._gbc .ApplyCropBox &&_ggge ._adg !=nil {_age .ApplyArea (*_ggge ._adg );
};_age ._baccf ._bfdf =_ggge ._gbc .DisableDocumentTags ;};return _age ,_gbde ,_dffb ,nil ;};func (_eaef paraList )sortReadingOrder (){_ga .Log .Trace ("\u0073\u006fr\u0074\u0052\u0065\u0061\u0064i\u006e\u0067\u004f\u0072\u0064e\u0072\u003a\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_eaef ));
if len (_eaef )<=1{return ;};_eaef .computeEBBoxes ();_gf .Slice (_eaef ,func (_ebecb ,_fbdbf int )bool {return _ggcea (_eaef [_ebecb ],_eaef [_fbdbf ])<=0});};func (_bgfg *textObject )moveLP (_dccd ,_fegf float64 ){_bgfg ._egfd .Concat (_daa .NewMatrix (1,0,0,1,_dccd ,_fegf ));
_bgfg ._dgga =_bgfg ._egfd ;};func _abegg (_bbef *list ,_cfeaa *_d .Builder ,_cfee *string ){_deaeb :=_agba (_bbef ,_cfee );_cfeaa .WriteString (_deaeb );for _ ,_ffcg :=range _bbef ._aece {_abfbd :=*_cfee +"\u0020\u0020\u0020";_abegg (_ffcg ,_cfeaa ,&_abfbd );
};};

// ToText returns the page text as a single string.
// Deprecated: This function is deprecated and will be removed in a future major version. Please use
// Text() instead.
func (_bdcc PageText )ToText ()string {return _bdcc .Text ()};func (_debdb *imageExtractContext )extractInlineImage (_ccf *_fdd .ContentStreamInlineImage ,_efg _fdd .GraphicsState ,_gbe *_bd .PdfPageResources )error {_agcdg ,_eaa :=_ccf .ToImage (_gbe );
if _eaa !=nil {return _eaa ;};_edf ,_eaa :=_ccf .GetColorSpace (_gbe );if _eaa !=nil {return _eaa ;};if _edf ==nil {_edf =_bd .NewPdfColorspaceDeviceGray ();};_gfg ,_eaa :=_edf .ImageToRGB (*_agcdg );if _eaa !=nil {return _eaa ;};_gbeb :=ImageMark {Image :&_gfg ,Width :_efg .CTM .ScalingFactorX (),Height :_efg .CTM .ScalingFactorY (),Angle :_efg .CTM .Angle ()};
_gbeb .X ,_gbeb .Y =_efg .CTM .Translation ();_debdb ._fgd =append (_debdb ._fgd ,_gbeb );_debdb ._cbf ++;return nil ;};func (_gbba *wordBag )makeRemovals ()map[int ]map[*textWord ]struct{}{_ebaga :=make (map[int ]map[*textWord ]struct{},len (_gbba ._defc ));
for _ggaf :=range _gbba ._defc {_ebaga [_ggaf ]=make (map[*textWord ]struct{});};return _ebaga ;};

// Text returns the extracted page text.
func (_eeea PageText )Text ()string {return _eeea ._aega };func (_ebfab rulingList )isActualGrid ()(rulingList ,bool ){_gagae ,_eebac :=_ebfab .augmentGrid ();if !(len (_gagae )>=_bebeb +1&&len (_eebac )>=_gfeaa +1){if _ddcaf {_ga .Log .Info ("\u0069s\u0041\u0063t\u0075\u0061\u006c\u0047r\u0069\u0064\u003a \u004e\u006f\u0074\u0020\u0061\u006c\u0069\u0067\u006eed\u002e\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u003c\u0020\u0025d\u0020\u0078 \u0025\u0064",len (_gagae ),len (_eebac ),_bebeb +1,_gfeaa +1);
};return nil ,false ;};if _ddcaf {_ga .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075a\u006c\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0073\u0020\u003a\u0020\u0025t\u0020\u0026\u0020\u0025\u0074\u0020\u2192 \u0025\u0074",_ebfab ,len (_gagae )>=2,len (_eebac )>=2,len (_gagae )>=2&&len (_eebac )>=2);
for _agfgb ,_faedg :=range _ebfab {_da .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0076\u000a",_agfgb ,_faedg );};};if _dgda {_efaed ,_bgcbd :=_gagae [0],_gagae [len (_gagae )-1];_ggegg ,_aacaf :=_eebac [0],_eebac [len (_eebac )-1];if !(_faeg (_efaed ._bbac -_ggegg ._gccd )&&_faeg (_bgcbd ._bbac -_ggegg ._ggadf )&&_faeg (_ggegg ._bbac -_efaed ._ggadf )&&_faeg (_aacaf ._bbac -_efaed ._gccd )){if _ddcaf {_ga .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069d\u003a\u0020\u0020N\u006f\u0074 \u0061\u006c\u0069\u0067\u006e\u0065d\u002e\n\t\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0076\u0031\u003d\u0025\u0073\u000a\u0009\u0068\u0030\u003d\u0025\u0073\u000a\u0009\u0068\u0031\u003d\u0025\u0073",_efaed ,_bgcbd ,_ggegg ,_aacaf );
};return nil ,false ;};}else {if !_gagae .aligned (){if _gfbd {_ga .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0076\u0065\u0072\u0074\u0073\u002e\u0020%\u0064",len (_gagae ));
};return nil ,false ;};if !_eebac .aligned (){if _ddcaf {_ga .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0068\u006f\u0072\u007a\u0073\u002e\u0020%\u0064",len (_eebac ));
};return nil ,false ;};};_eeefg :=append (_gagae ,_eebac ...);return _eeefg ,true ;};func (_fgac *wordBag )depthIndexes ()[]int {if len (_fgac ._defc )==0{return nil ;};_cfcg :=make ([]int ,len (_fgac ._defc ));_bgfc :=0;for _eaaf :=range _fgac ._defc {_cfcg [_bgfc ]=_eaaf ;
_bgfc ++;};_gf .Ints (_cfcg );return _cfcg ;};func _fgdaa (_efdf ,_eddd int )int {if _efdf > _eddd {return _efdf ;};return _eddd ;};func _fcfef (_abedg bounded )float64 {return -_abedg .bbox ().Lly };func _fee (_ae string ,_fc bool ,_fgg bool )BidiText {_agga :="\u006c\u0074\u0072";
if _fgg {_agga ="\u0074\u0074\u0062";}else if !_fc {_agga ="\u0072\u0074\u006c";};return BidiText {_gc :_ae ,_aa :_agga };};func (_edbc *stateStack )pop ()*textState {if _edbc .empty (){return nil ;};_gacb :=*(*_edbc )[len (*_edbc )-1];*_edbc =(*_edbc )[:len (*_edbc )-1];
return &_gacb ;};func (_addf compositeCell )String ()string {_gfdce :="";if len (_addf .paraList )> 0{_gfdce =_cgeg (_addf .paraList .merge ().text (),50);};return _da .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0070\u0061\u0072a\u0073\u0020\u0025\u0071",_addf .PdfRectangle ,len (_addf .paraList ),_gfdce );
};func (_cggf *textObject )getCurrentFont ()*_bd .PdfFont {_gege :=_cggf ._ebd ._ecgfd ;if _gege ==nil {_ga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020U\u0073\u0069\u006e\u0067\u0020d\u0065\u0066a\u0075\u006c\u0074\u002e");
return _bd .DefaultFont ();};return _gege ;};

// NewFromContents creates a new extractor from contents and page resources.
func NewFromContents (contents string ,resources *_bd .PdfPageResources )(*Extractor ,error ){const _ggbg ="\u0065x\u0074\u0072\u0061\u0063t\u006f\u0072\u002e\u004e\u0065w\u0046r\u006fm\u0043\u006f\u006e\u0074\u0065\u006e\u0074s";_dae :=&Extractor {_eee :contents ,_deb :resources ,_ada :map[string ]fontEntry {},_cac :map[string ]textResult {}};
_cgd .TrackUse (_ggbg );return _dae ,nil ;};func _gfea (_ebb ,_dagd _bd .PdfRectangle )bool {return _ebb .Llx <=_dagd .Llx &&_dagd .Urx <=_ebb .Urx &&_ebb .Lly <=_dagd .Lly &&_dagd .Ury <=_ebb .Ury ;};func _deff (_gcca *list )[]*textLine {for _ ,_ddee :=range _gcca ._aece {switch _ddee ._egfbb {case "\u004c\u0042\u006fd\u0079":if len (_ddee ._eaafd )!=0{return _ddee ._eaafd ;
};return _deff (_ddee );case "\u0053\u0070\u0061\u006e":return _ddee ._eaafd ;case "I\u006e\u006c\u0069\u006e\u0065\u0053\u0068\u0061\u0070\u0065":return _ddee ._eaafd ;};};return nil ;};

// Marks returns the TextMark collection for a page. It represents all the text on the page.
func (_dceb PageText )Marks ()*TextMarkArray {return &TextMarkArray {_aagc :_dceb ._bcc }};func (_cfeb *TextMarkArray )getTextMarkAtOffset (_dfbc int )*TextMark {for _ ,_bged :=range _cfeb ._aagc {if _bged .Offset ==_dfbc {return &_bged ;};};return nil ;
};func (_ggbgb gridTile )numBorders ()int {_gdabf :=0;if _ggbgb ._afddd {_gdabf ++;};if _ggbgb ._gbcc {_gdabf ++;};if _ggbgb ._febea {_gdabf ++;};if _ggbgb ._gdbbff {_gdabf ++;};return _gdabf ;};type textResult struct{_cfgg PageText ;_fgdgd int ;_gecc int ;
};func (_efc *wordBag )scanBand (_fbeac string ,_gggf *wordBag ,_gddf func (_cbfg *wordBag ,_edcc *textWord )bool ,_bdgf ,_befa ,_adeg float64 ,_gbdf ,_gbbag bool )int {_cfeba :=_gggf ._cfbb ;var _bfgc map[int ]map[*textWord ]struct{};if !_gbdf {_bfgc =_efc .makeRemovals ();
};_fbbd :=_bdee *_cfeba ;_gafc :=0;for _ ,_gcgb :=range _efc .depthBand (_bdgf -_fbbd ,_befa +_fbbd ){if len (_efc ._defc [_gcgb ])==0{continue ;};for _ ,_gggd :=range _efc ._defc [_gcgb ]{if !(_bdgf -_fbbd <=_gggd ._bfbd &&_gggd ._bfbd <=_befa +_fbbd ){continue ;
};if !_gddf (_gggf ,_gggd ){continue ;};_ebage :=2.0*_fbg .Abs (_gggd ._babfe -_gggf ._cfbb )/(_gggd ._babfe +_gggf ._cfbb );_fcafd :=_fbg .Max (_gggd ._babfe /_gggf ._cfbb ,_gggf ._cfbb /_gggd ._babfe );_dgeg :=_fbg .Min (_ebage ,_fcafd );if _adeg > 0&&_dgeg > _adeg {continue ;
};if _gggf .blocked (_gggd ){continue ;};if !_gbdf {_gggf .pullWord (_gggd ,_gcgb ,_bfgc );};_gafc ++;if !_gbbag {if _gggd ._bfbd < _bdgf {_bdgf =_gggd ._bfbd ;};if _gggd ._bfbd > _befa {_befa =_gggd ._bfbd ;};};if _gbdf {break ;};};};if !_gbdf {_efc .applyRemovals (_bfgc );
};return _gafc ;};func (_afbdg *shapesState )stroke (_fbgg *[]pathSection ){_dbca :=pathSection {_cbcg :_afbdg ._baccb ,Color :_afbdg ._becc .getStrokeColor ()};*_fbgg =append (*_fbgg ,_dbca );if _ddcaf {_da .Printf ("\u0020 \u0020\u0020S\u0054\u0052\u004fK\u0045\u003a\u0020\u0025\u0064\u0020\u0073t\u0072\u006f\u006b\u0065\u0073\u0020s\u0073\u003d\u0025\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d%\u002b\u0076\u0020\u0025\u0036\u002e\u0032\u0066\u000a",len (*_fbgg ),_afbdg ,_afbdg ._becc .getStrokeColor (),_dbca .bbox ());
if _fbfc {for _egcf ,_edcff :=range _afbdg ._baccb {_da .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_egcf ,_edcff );if _egcf ==10{break ;};};};};};func (_gagg *textPara )taken ()bool {return _gagg ==nil ||_gagg ._effb };

// String returns a human readable description of `path`.
func (_eggd *subpath )String ()string {_agd :=_eggd ._eacf ;_fccf :=len (_agd );if _fccf <=5{return _da .Sprintf ("\u0025d\u003a\u0020\u0025\u0036\u002e\u0032f",_fccf ,_agd );};return _da .Sprintf ("\u0025d\u003a\u0020\u0025\u0036.\u0032\u0066\u0020\u0025\u0036.\u0032f\u0020.\u002e\u002e\u0020\u0025\u0036\u002e\u0032f",_fccf ,_agd [0],_agd [1],_agd [_fccf -1]);
};func (_dfafa *subpath )makeRectRuling (_gedeb _fd .Color )(*ruling ,bool ){if _bedb {_ga .Log .Info ("\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0070\u0061\u0074\u0068\u003d\u0025\u0076",_dfafa );};_gfab :=_dfafa ._eacf [:4];
_afgf :=make (map[int ]rulingKind ,len (_gfab ));for _bbeaae ,_ebggcd :=range _gfab {_edba :=_dfafa ._eacf [(_bbeaae +1)%4];_afgf [_bbeaae ]=_abcc (_ebggcd ,_edba );if _bedb {_da .Printf ("\u0025\u0034\u0064: \u0025\u0073\u0020\u003d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066",_bbeaae ,_afgf [_bbeaae ],_ebggcd ,_edba );
};};if _bedb {_da .Printf ("\u0020\u0020\u0020\u006b\u0069\u006e\u0064\u0073\u003d\u0025\u002b\u0076\u000a",_afgf );};var _ffabdg ,_gagb []int ;for _ffca ,_dedf :=range _afgf {switch _dedf {case _gcff :_gagb =append (_gagb ,_ffca );case _gdbe :_ffabdg =append (_ffabdg ,_ffca );
};};if _bedb {_da .Printf ("\u0020\u0020 \u0068\u006f\u0072z\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_gagb ),_gagb );_da .Printf ("\u0020\u0020 \u0076\u0065\u0072t\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_ffabdg ),_ffabdg );
};_dddfb :=(len (_gagb )==2&&len (_ffabdg )==2)||(len (_gagb )==2&&len (_ffabdg )==0&&_eeebb (_gfab [_gagb [0]],_gfab [_gagb [1]]))||(len (_ffabdg )==2&&len (_gagb )==0&&_eacag (_gfab [_ffabdg [0]],_gfab [_ffabdg [1]]));if _bedb {_da .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_gagb ),len (_ffabdg ),_dddfb );
};if !_dddfb {if _bedb {_ga .Log .Error ("\u0021!\u006d\u0061\u006b\u0065R\u0065\u0063\u0074\u0052\u0075l\u0069n\u0067:\u0020\u0070\u0061\u0074\u0068\u003d\u0025v",_dfafa );_da .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_gagb ),len (_ffabdg ),_dddfb );
};return &ruling {},false ;};if len (_ffabdg )==0{for _ggeac ,_fcfbf :=range _afgf {if _fcfbf !=_gcff {_ffabdg =append (_ffabdg ,_ggeac );};};};if len (_gagb )==0{for _ecab ,_gdfg :=range _afgf {if _gdfg !=_gdbe {_gagb =append (_gagb ,_ecab );};};};if _bedb {_ga .Log .Info ("\u006da\u006b\u0065R\u0065\u0063\u0074\u0052u\u006c\u0069\u006eg\u003a\u0020\u0068\u006f\u0072\u007a\u0073\u003d\u0025d \u0076\u0065\u0072t\u0073\u003d%\u0064\u0020\u0070\u006f\u0069\u006et\u0073\u003d%\u0064\u000a"+"\u0009\u0020\u0068o\u0072\u007a\u0073\u003d\u0025\u002b\u0076\u000a"+"\u0009\u0020\u0076e\u0072\u0074\u0073\u003d\u0025\u002b\u0076\u000a"+"\t\u0070\u006f\u0069\u006e\u0074\u0073\u003d\u0025\u002b\u0076",len (_gagb ),len (_ffabdg ),len (_gfab ),_gagb ,_ffabdg ,_gfab );
};var _feaef ,_acea ,_ggga ,_ceae _daa .Point ;if _gfab [_gagb [0]].Y > _gfab [_gagb [1]].Y {_ggga ,_ceae =_gfab [_gagb [0]],_gfab [_gagb [1]];}else {_ggga ,_ceae =_gfab [_gagb [1]],_gfab [_gagb [0]];};if _gfab [_ffabdg [0]].X > _gfab [_ffabdg [1]].X {_feaef ,_acea =_gfab [_ffabdg [0]],_gfab [_ffabdg [1]];
}else {_feaef ,_acea =_gfab [_ffabdg [1]],_gfab [_ffabdg [0]];};_ggbfb :=_bd .PdfRectangle {Llx :_feaef .X ,Urx :_acea .X ,Lly :_ceae .Y ,Ury :_ggga .Y };if _ggbfb .Llx > _ggbfb .Urx {_ggbfb .Llx ,_ggbfb .Urx =_ggbfb .Urx ,_ggbfb .Llx ;};if _ggbfb .Lly > _ggbfb .Ury {_ggbfb .Lly ,_ggbfb .Ury =_ggbfb .Ury ,_ggbfb .Lly ;
};_eedb :=rectRuling {PdfRectangle :_ggbfb ,_efffg :_gfcf (_ggbfb ),Color :_gedeb };if _eedb ._efffg ==_feee {if _bedb {_ga .Log .Error ("\u006da\u006b\u0065\u0052\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006eg\u003a\u0020\u006b\u0069\u006e\u0064\u003d\u006e\u0069\u006c");
};return nil ,false ;};_bebgf ,_ecabg :=_eedb .asRuling ();if !_ecabg {if _bedb {_ga .Log .Error ("\u006da\u006b\u0065\u0052\u0065c\u0074\u0052\u0075\u006c\u0069n\u0067:\u0020!\u0069\u0073\u0052\u0075\u006c\u0069\u006eg");};return nil ,false ;};if _ddcaf {_da .Printf ("\u0020\u0020\u0020\u0072\u003d\u0025\u0073\u000a",_bebgf .String ());
};return _bebgf ,true ;};var (_ffbcd =map[rune ]string {0x0060:"\u0300",0x02CB:"\u0300",0x0027:"\u0301",0x00B4:"\u0301",0x02B9:"\u0301",0x02CA:"\u0301",0x005E:"\u0302",0x02C6:"\u0302",0x007E:"\u0303",0x02DC:"\u0303",0x00AF:"\u0304",0x02C9:"\u0304",0x02D8:"\u0306",0x02D9:"\u0307",0x00A8:"\u0308",0x00B0:"\u030a",0x02DA:"\u030a",0x02BA:"\u030b",0x02DD:"\u030b",0x02C7:"\u030c",0x02C8:"\u030d",0x0022:"\u030e",0x02BB:"\u0312",0x02BC:"\u0313",0x0486:"\u0313",0x055A:"\u0313",0x02BD:"\u0314",0x0485:"\u0314",0x0559:"\u0314",0x02D4:"\u031d",0x02D5:"\u031e",0x02D6:"\u031f",0x02D7:"\u0320",0x02B2:"\u0321",0x00B8:"\u0327",0x02CC:"\u0329",0x02B7:"\u032b",0x02CD:"\u0331",0x005F:"\u0332",0x204E:"\u0359"};
);func (_eaffe *textWord )appendMark (_aeabf *textMark ,_ddba _bd .PdfRectangle ){_eaffe ._dcgd =append (_eaffe ._dcgd ,_aeabf );_eaffe .PdfRectangle =_fcee (_eaffe .PdfRectangle ,_aeabf .PdfRectangle );if _aeabf ._bafcb > _eaffe ._babfe {_eaffe ._babfe =_aeabf ._bafcb ;
};_eaffe ._bfbd =_ddba .Ury -_eaffe .Lly ;};func _aade (_ceddc *paraList )map[int ][]*textLine {_feacb :=map[int ][]*textLine {};for _ ,_bgfgc :=range *_ceddc {for _ ,_bacd :=range _bgfgc ._dbed {if !_ccda (_bacd ){_ga .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_dcag :=_bacd ._bbgge [0]._dcgd [0]._daef ;_feacb [_dcag ]=append (_feacb [_dcag ],_bacd );};if _bgfgc ._deed !=nil {_gdacc :=_bgfgc ._deed ._aegad ;for _ ,_cbgg :=range _gdacc {for _ ,_dbab :=range _cbgg ._dbed {if !_ccda (_dbab ){_ga .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_geca :=_dbab ._bbgge [0]._dcgd [0]._daef ;_feacb [_geca ]=append (_feacb [_geca ],_dbab );};};};};return _feacb ;};func (_dcbc *PageText )getParagraphs ()paraList {var _bcgd rulingList ;if _ebab {_dbcg :=_ebagb (_dcbc ._ggd );_bcgd =append (_bcgd ,_dbcg ...);
};if _fgfa {_geccb :=_edec (_dcbc ._ecdg );_bcgd =append (_bcgd ,_geccb ...);};_bcgd ,_fafb :=_bcgd .toTilings ();var _egb paraList ;_adaa :=len (_dcbc ._cgaf );for _fcfd :=0;_fcfd < 360&&_adaa > 0;_fcfd +=90{_dcdg :=make ([]*textMark ,0,len (_dcbc ._cgaf )-_adaa );
for _ ,_eeeag :=range _dcbc ._cgaf {if _eeeag ._bfa ==_fcfd {_dcdg =append (_dcdg ,_eeeag );};};if len (_dcdg )> 0{_gebfe :=_fbdbg (_dcdg ,_dcbc ._gecb ,_bcgd ,_fafb ,_dcbc ._baccf ._bbgb ==ExtractionModeLayoutNoBreaks );_egb =append (_egb ,_gebfe ...);
_adaa -=len (_dcdg );};};return _egb ;};func (_cdgfb paraList )sortTopoOrder (){_gdebf :=_cdgfb .topoOrder ();_cdgfb .reorder (_gdebf )};func _faeg (_beba float64 )bool {return _fbg .Abs (_beba )< _dffe };type textPara struct{_bd .PdfRectangle ;_gacea _bd .PdfRectangle ;
_dbed []*textLine ;_deed *textTable ;_effb bool ;_cebf bool ;_gdbc *textPara ;_fcaa *textPara ;_ccfgf *textPara ;_abcd *textPara ;_faed []list ;};const (RenderModeStroke RenderMode =1<<iota ;RenderModeFill ;RenderModeClip ;);func _fffe (_dgaba []*textWord ,_daaa float64 ,_caae ,_cdbda rulingList )*wordBag {_fgfb :=_ebga (_dgaba [0],_daaa ,_caae ,_cdbda );
for _ ,_bccb :=range _dgaba [1:]{_cbdg :=_ebac (_bccb ._bfbd );_fgfb ._defc [_cbdg ]=append (_fgfb ._defc [_cbdg ],_bccb );_fgfb .PdfRectangle =_fcee (_fgfb .PdfRectangle ,_bccb .PdfRectangle );};_fgfb .sort ();return _fgfb ;};func (_fcge *shapesState )moveTo (_fbegg ,_ceba float64 ){_fcge ._abbb =true ;
_fcge ._cfcc =_fcge .devicePoint (_fbegg ,_ceba );if _bfdd {_ga .Log .Info ("\u006d\u006fv\u0065\u0054\u006f\u003a\u0020\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0064\u0065\u0076\u0069\u0063\u0065\u003d%.\u0032\u0066",_fbegg ,_ceba ,_fcge ._cfcc );
};};

// ExtractTextWithStats works like ExtractText but returns the number of characters in the output
// (`numChars`) and the number of characters that were not decoded (`numMisses`).
func (_gcb *Extractor )ExtractTextWithStats ()(_gee string ,_bfgb int ,_dbgb int ,_ebgga error ){_cfgdf ,_bfgb ,_dbgb ,_ebgga :=_gcb .ExtractPageText ();if _ebgga !=nil {return "",_bfgb ,_dbgb ,_ebgga ;};return _cfgdf .Text (),_bfgb ,_dbgb ,nil ;};

// StrokePath is a stroked path.
type StrokePath struct{Points []_daa .Point ;_fd .Color ;};func (_dacb gridTiling )log (_fgggb string ){if !_accd {return ;};_ga .Log .Info ("\u0074i\u006ci\u006e\u0067\u003a\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0071",len (_dacb ._aecge ),len (_dacb ._bfefe ),_fgggb );
_da .Printf ("\u0020\u0020\u0020l\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a",_dacb ._aecge );_da .Printf ("\u0020\u0020\u0020l\u006c\u0079\u003d\u0025\u002e\u0032\u0066\u000a",_dacb ._bfefe );for _ccae ,_fdgfg :=range _dacb ._bfefe {_geabg ,_dffag :=_dacb ._daaee [_fdgfg ];
if !_dffag {continue ;};_da .Printf ("%\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_ccae ,_fdgfg );for _dcga ,_fedc :=range _dacb ._aecge {_gbbad ,_bfde :=_geabg [_fedc ];if !_bfde {continue ;};_da .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_dcga ,_gbbad .String ());
};};};func (_ddca *subpath )close (){if !_egeag (_ddca ._eacf [0],_ddca .last ()){_ddca .add (_ddca ._eacf [0]);};_ddca ._cdfbd =true ;_ddca .removeDuplicates ();};

// ExtractionMode defines different types of extraction mode.
type ExtractionMode int ;func _gacce (_bafgg []*textMark ,_bggbe _bd .PdfRectangle )*textWord {_ccgeb :=_bafgg [0].PdfRectangle ;_baeg :=_bafgg [0]._bafcb ;for _ ,_bfgd :=range _bafgg [1:]{_ccgeb =_fcee (_ccgeb ,_bfgd .PdfRectangle );if _bfgd ._bafcb > _baeg {_baeg =_bfgd ._bafcb ;
};};return &textWord {PdfRectangle :_ccgeb ,_dcgd :_bafgg ,_bfbd :_bggbe .Ury -_ccgeb .Lly ,_babfe :_baeg };};func (_daab rulingList )mergePrimary ()float64 {_ddcc :=_daab [0]._bbac ;for _ ,_ggead :=range _daab [1:]{_ddcc +=_ggead ._bbac ;};return _ddcc /float64 (len (_daab ));
};func (_afed *textTable )isExportable ()bool {if _afed ._dbdag {return true ;};_fbgbe :=func (_adbc int )bool {_eceeg :=_afed .get (0,_adbc );if _eceeg ==nil {return false ;};_ccbga :=_eceeg .text ();_eacc :=_f .RuneCountInString (_ccbga );_ebeaa :=_fgca .MatchString (_ccbga );
return _eacc <=1||_ebeaa ;};for _degf :=0;_degf < _afed ._bgfd ;_degf ++{if !_fbgbe (_degf ){return true ;};};return false ;};func (_bbfe *textWord )toTextMarks (_acabc *int )[]TextMark {var _cgedb []TextMark ;for _ ,_agcbe :=range _bbfe ._dcgd {_cgedb =_cffd (_cgedb ,_acabc ,_agcbe .ToTextMark ());
};return _cgedb ;};func (_fbbeg *textObject )setFont (_fabe string ,_decc float64 )error {if _fbbeg ==nil {return nil ;};_fbbeg ._ebd ._abgb =_decc ;_fef ,_dfa :=_fbbeg .getFont (_fabe );if _dfa !=nil {return _dfa ;};_fbbeg ._ebd ._ecgfd =_fef ;return nil ;
};func _egge (_gecab _bd .PdfRectangle )*ruling {return &ruling {_decfc :_gdbe ,_bbac :_gecab .Urx ,_gccd :_gecab .Lly ,_ggadf :_gecab .Ury };};func (_efaea *textPara )text ()string {_cffb :=new (_ag .Buffer );_efaea .writeText (_cffb );return _cffb .String ();
};func (_eeaa *wordBag )applyRemovals (_afdb map[int ]map[*textWord ]struct{}){for _cbcga ,_dba :=range _afdb {if len (_dba )==0{continue ;};_ebgdb :=_eeaa ._defc [_cbcga ];_gacg :=len (_ebgdb )-len (_dba );if _gacg ==0{delete (_eeaa ._defc ,_cbcga );continue ;
};_fabb :=make ([]*textWord ,_gacg );_aeeb :=0;for _ ,_fdeg :=range _ebgdb {if _ ,_ffba :=_dba [_fdeg ];!_ffba {_fabb [_aeeb ]=_fdeg ;_aeeb ++;};};_eeaa ._defc [_cbcga ]=_fabb ;};};

// PageText represents the layout of text on a device page.
type PageText struct{_cgaf []*textMark ;_aega string ;_bcc []TextMark ;_abc []TextTable ;_gecb _bd .PdfRectangle ;_ggd []pathSection ;_ecdg []pathSection ;_egaa *_bd .StructTreeRoot ;_fga _agg .PdfObject ;_dcab *_fdd .ContentStreamOperations ;_baccf PageTextOptions ;
};func (_fgefe *wordBag )arrangeText (_bgegg bool )*textPara {_fgefe .sort ();if _fafef {_fgefe .removeDuplicates ();};var _bbgga []*textLine ;for _ ,_accef :=range _fgefe .depthIndexes (){for !_fgefe .empty (_accef ){_accc :=_fgefe .firstReadingIndex (_accef );
_cefc :=_fgefe .firstWord (_accc );_bgdb :=_gfdag (_fgefe ,_accc );_agef :=_cefc ._babfe ;if _agef < _dfcfa {_agef =_dfcfa ;};_gfbfd :=_cefc ._bfbd -_bdee *_agef ;_bgac :=_cefc ._bfbd +_bdee *_agef ;_efgbe :=_afaf *_agef ;_bdeea :=_accb *_agef ;_gfcae :for {var _febe *textWord ;
_dbdfa :=0;for _ ,_ceege :=range _fgefe .depthBand (_gfbfd ,_bgac ){_cgba :=_fgefe .highestWord (_ceege ,_gfbfd ,_bgac );if _cgba ==nil {continue ;};_bfc :=_cccc (_cgba ,_bgdb ._bbgge [len (_bgdb ._bbgge )-1]);if _bfc < -_bdeea {break _gfcae ;};if !_bgegg &&_bfc > _efgbe {continue ;
};if _febe !=nil &&_efe (_cgba ,_febe )>=0{continue ;};_febe =_cgba ;_dbdfa =_ceege ;};if _febe ==nil {break ;};_bgdb .pullWord (_fgefe ,_febe ,_dbdfa );};_bgdb .markWordBoundaries ();_bbgga =append (_bbgga ,_bgdb );};};if len (_bbgga )==0{return nil ;
};_gf .Slice (_bbgga ,func (_ffbg ,_cbad int )bool {return _ggcea (_bbgga [_ffbg ],_bbgga [_cbad ])< 0});_ffcd :=_eadg (_fgefe .PdfRectangle ,_bbgga );if _ebagc {_ga .Log .Info ("\u0061\u0072\u0072an\u0067\u0065\u0054\u0065\u0078\u0074\u0020\u0021\u0021\u0021\u0020\u0070\u0061\u0072\u0061\u003d\u0025\u0073",_ffcd .String ());
if _ceda {for _gbfa ,_fegedc :=range _ffcd ._dbed {_da .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gbfa ,_fegedc .String ());if _geed {for _fcfff ,_bafg :=range _fegedc ._bbgge {_da .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_fcfff ,_bafg .String ());
for _cedg ,_aegbd :=range _bafg ._dcgd {_da .Printf ("\u00251\u0032\u0064\u003a\u0020\u0025\u0073\n",_cedg ,_aegbd .String ());};};};};};};return _ffcd ;};func (_afcef *wordBag )minDepth ()float64 {return _afcef ._ffff -(_afcef .Ury -_afcef ._cfbb )};func (_eebaa *textTable )putComposite (_ffgcd ,_cdgab int ,_ffec paraList ,_cffab _bd .PdfRectangle ){if len (_ffec )==0{_ga .Log .Error ("\u0074\u0065xt\u0054\u0061\u0062l\u0065\u0029\u0020\u0070utC\u006fmp\u006f\u0073\u0069\u0074\u0065\u003a\u0020em\u0070\u0074\u0079\u0020\u0070\u0061\u0072a\u0073");
return ;};_bfce :=compositeCell {PdfRectangle :_cffab ,paraList :_ffec };if _bbae {_da .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0075\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u003c\u002d\u0025\u0073\u000a",_ffgcd ,_cdgab ,_bfce .String ());
};_bfce .updateBBox ();_eebaa ._fcbc [_adebf (_ffgcd ,_cdgab )]=_bfce ;};func _cccc (_acae ,_dgdg bounded )float64 {return _acae .bbox ().Llx -_dgdg .bbox ().Urx };func _feab (_bed _bd .PdfRectangle )textState {return textState {_acbe :100,_gggeg :RenderModeFill ,_adca :_bed };
};func (_afegc *textPara )writeCellText (_dbgefd _g .Writer ){for _fdeff ,_bggcf :=range _afegc ._dbed {_ddfef :=_bggcf .text ();_bccde :=_bggad &&_bggcf .endsInHyphen ()&&_fdeff !=len (_afegc ._dbed )-1;if _bccde {_ddfef =_afddf (_ddfef );};_dbgefd .Write ([]byte (_ddfef ));
if !(_bccde ||_fdeff ==len (_afegc ._dbed )-1){_dbgefd .Write ([]byte (_bdgfd (_bggcf ._gcdcg ,_afegc ._dbed [_fdeff +1]._gcdcg )));};};};const _bbdc =20;func (_cffa *textTable )toTextTable ()TextTable {if _bbae {_ga .Log .Info ("t\u006fT\u0065\u0078\u0074\u0054\u0061\u0062\u006c\u0065:\u0020\u0025\u0064\u0020x \u0025\u0064",_cffa ._eceag ,_cffa ._bgfd );
};_gfcec :=make ([][]TableCell ,_cffa ._bgfd );for _gdfaea :=0;_gdfaea < _cffa ._bgfd ;_gdfaea ++{_gfcec [_gdfaea ]=make ([]TableCell ,_cffa ._eceag );for _edabf :=0;_edabf < _cffa ._eceag ;_edabf ++{_efcg :=_cffa .get (_edabf ,_gdfaea );if _efcg ==nil {continue ;
};_ggaff (_efcg ._dbed );if _bbae {_da .Printf ("\u0025\u0034\u0064 \u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_edabf ,_gdfaea ,_efcg );};_gfcec [_gdfaea ][_edabf ].Text =_efcg .text ();_bdff :=0;_gfcec [_gdfaea ][_edabf ].Marks ._aagc =_efcg .toTextMarks (&_bdff );
};};_dcbbe :=TextTable {W :_cffa ._eceag ,H :_cffa ._bgfd ,Cells :_gfcec };_dcbbe .PdfRectangle =_cffa .bbox ();return _dcbbe ;};func _ffdd (_dfdg *wordBag ,_feabg float64 ,_cebg ,_bdfde rulingList ,_fgcd bool )[]*wordBag {var _bbee []*wordBag ;for _ ,_ggcbb :=range _dfdg .depthIndexes (){_cdfbdd :=false ;
for !_dfdg .empty (_ggcbb ){_dfec :=_dfdg .firstReadingIndex (_ggcbb );_gcccc :=_dfdg .firstWord (_dfec );_dgae :=_ebga (_gcccc ,_feabg ,_cebg ,_bdfde );_dfdg .removeWord (_gcccc ,_dfec );if _acgc {_ga .Log .Info ("\u0066\u0069\u0072\u0073\u0074\u0057\u006f\u0072\u0064\u0020\u005e\u005e^\u005e\u0020\u0025\u0073",_gcccc .String ());
};for _bdfc :=true ;_bdfc ;_bdfc =_cdfbdd {_cdfbdd =false ;_ccfb :=_bggc *_dgae ._cfbb ;_efab :=_gebb *_dgae ._cfbb ;if _fgcd {_efab =_fbg .MaxFloat64 ;};_afde :=_fbcc *_dgae ._cfbb ;if _acgc {_ga .Log .Info ("\u0070a\u0072a\u0057\u006f\u0072\u0064\u0073\u0020\u0064\u0065\u0070\u0074\u0068 \u0025\u002e\u0032\u0066 \u002d\u0020\u0025\u002e\u0032f\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061\u0044\u0065\u0070\u0074\u0068\u0047\u0061\u0070\u003d\u0025\u002e\u0032\u0066\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061R\u0065\u0061\u0064\u0069\u006e\u0067\u0047\u0061p\u003d\u0025\u002e\u0032\u0066",_dgae .minDepth (),_dgae .maxDepth (),_afde ,_efab );
};if _dfdg .scanBand ("\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c",_dgae ,_feac (_bdbe ,0),_dgae .minDepth ()-_afde ,_dgae .maxDepth ()+_afde ,_dcbf ,false ,false )> 0{_cdfbdd =true ;};if _dfdg .scanBand ("\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_dgae ,_feac (_bdbe ,_efab ),_dgae .minDepth (),_dgae .maxDepth (),_cbddf ,false ,false )> 0{_cdfbdd =true ;
};if _cdfbdd {continue ;};_eaace :=_dfdg .scanBand ("",_dgae ,_feac (_edda ,_ccfb ),_dgae .minDepth (),_dgae .maxDepth (),_dfbdb ,true ,false );if _eaace > 0{_aegbf :=(_dgae .maxDepth ()-_dgae .minDepth ())/_dgae ._cfbb ;if (_eaace > 1&&float64 (_eaace )> 0.3*_aegbf )||_eaace <=10{if _dfdg .scanBand ("\u006f\u0074\u0068e\u0072",_dgae ,_feac (_edda ,_ccfb ),_dgae .minDepth (),_dgae .maxDepth (),_dfbdb ,false ,true )> 0{_cdfbdd =true ;
};};};};_bbee =append (_bbee ,_dgae );};};return _bbee ;};type textMark struct{_bd .PdfRectangle ;_bfa int ;_aaba string ;_cbgcc string ;_dadb *_bd .PdfFont ;_bafcb float64 ;_fbfb float64 ;_ddffc _daa .Matrix ;_ccdde _daa .Point ;_ecgb _bd .PdfRectangle ;
_fbdb _fd .Color ;_gfgf _fd .Color ;_eebc _agg .PdfObject ;_ddefb []string ;Tw float64 ;Th float64 ;_daef int ;_acgce int ;};func (_fgef *textMark )bbox ()_bd .PdfRectangle {return _fgef .PdfRectangle };func (_gcdc *shapesState )fill (_cfcbc *[]pathSection ){_cbbea :=pathSection {_cbcg :_gcdc ._baccb ,Color :_gcdc ._becc .getFillColor ()};
*_cfcbc =append (*_cfcbc ,_cbbea );if _ddcaf {_dbeb :=_cbbea .bbox ();_da .Printf ("\u0020 \u0020\u0020\u0046\u0049\u004c\u004c\u003a %\u0032\u0064\u0020\u0066\u0069\u006c\u006c\u0073\u0020\u0028\u0025\u0064\u0020\u006ee\u0077\u0029 \u0073\u0073\u003d%\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d\u0025\u0033\u0076\u0020\u0025\u0036\u002e\u0032f\u003d\u00256.\u0032\u0066\u0078%\u0036\u002e\u0032\u0066\u000a",len (*_cfcbc ),len (_cbbea ._cbcg ),_gcdc ,_cbbea .Color ,_dbeb ,_dbeb .Width (),_dbeb .Height ());
if _fbfc {for _cbd ,_ebggf :=range _cbbea ._cbcg {_da .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_cbd ,_ebggf );if _cbd ==10{break ;};};};};};func (_debfe *textLine )appendWord (_dege *textWord ){_debfe ._bbgge =append (_debfe ._bbgge ,_dege );
_debfe .PdfRectangle =_fcee (_debfe .PdfRectangle ,_dege .PdfRectangle );if _dege ._babfe > _debfe ._ddec {_debfe ._ddec =_dege ._babfe ;};if _dege ._bfbd > _debfe ._gcdcg {_debfe ._gcdcg =_dege ._bfbd ;};};func (_dbeg paraList )writeText (_degg _g .Writer ){for _bbaa ,_deee :=range _dbeg {if _deee ._cebf {continue ;
};_deee .writeText (_degg );if _bbaa !=len (_dbeg )-1{if _fdfd (_deee ,_dbeg [_bbaa +1]){_degg .Write ([]byte ("\u0020"));}else {_degg .Write ([]byte ("\u000a"));_degg .Write ([]byte ("\u000a"));};};};_degg .Write ([]byte ("\u000a"));_degg .Write ([]byte ("\u000a"));
};func (_cgfb intSet )del (_gcac int ){delete (_cgfb ,_gcac )};func (_ggac *textObject )renderText (_degb _agg .PdfObject ,_dffbf []byte ,_ccfcb int ,_faf string )error {if _ggac ._gbfgb {_ga .Log .Debug ("\u0072\u0065\u006e\u0064\u0065r\u0054\u0065\u0078\u0074\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069\u0064 \u0066\u006f\u006e\u0074\u002e\u0020\u004e\u006f\u0074\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u002e");
return nil ;};_aaec :=_ggac .getCurrentFont ();_gfde :=_aaec .BytesToCharcodes (_dffbf );var (_bdgc []string ;_gde int ;_eabd int ;);if _faf !=""{_bdgc =[]string {_agg .MakeString (_faf ).Decoded ()};_gde =1;}else {_bdgc ,_gde ,_eabd =_aaec .CharcodesToStrings (_gfde ,"");
if _eabd > 0{_ga .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_gde ,_eabd );};};_ggac ._ebd ._ecea +=_gde ;_ggac ._ebd ._abged +=_eabd ;
_fcef :=_ggac ._ebd ;_ecdd :=_fcef ._abgb ;_ggfc :=_fcef ._acbe /100.0;_fegcf :=_cbec ;if _aaec .Subtype ()=="\u0054\u0079\u0070e\u0033"{_fegcf =1;};_efa ,_ebad :=_aaec .GetRuneMetrics (' ');if !_ebad {_efa ,_ebad =_aaec .GetCharMetrics (32);};if !_ebad {_efa ,_ =_bd .DefaultFont ().GetRuneMetrics (' ');
};_acba :=_efa .Wx *_fegcf ;_ga .Log .Trace ("\u0073p\u0061\u0063e\u0057\u0069\u0064t\u0068\u003d\u0025\u002e\u0032\u0066\u0020t\u0065\u0078\u0074\u003d\u0025\u0071 \u0066\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0066\u006f\u006et\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",_acba ,_bdgc ,_aaec ,_ecdd );
_cffc :=_daa .NewMatrix (_ecdd *_ggfc ,0,0,_ecdd ,0,_fcef ._ecgfg );if _fcdg {_ga .Log .Info ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0074\u0065\u0078t\u0073\u003d\u0025\u0071",len (_gfde ),_gfde ,_bdgc );
};_ga .Log .Trace ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0072\u0075\u006ee\u0073\u003d\u0025\u0071",len (_gfde ),_gfde ,len (_bdgc ));_gfade :=_ggac .getFillColor ();
_cgcee :=_ggac .getStrokeColor ();for _eddf ,_ebee :=range _bdgc {_gegg :=[]rune (_ebee );if len (_gegg )==1&&_gegg [0]=='\x00'{continue ;};_eag :=_gfde [_eddf ];_efff :=_ggac ._bgbd .CTM .Mult (_ggac ._dgga ).Mult (_cffc );_ccbb :=0.0;if len (_gegg )==1&&_gegg [0]==32{_ccbb =_fcef ._edaa ;
};_adac ,_bge :=_aaec .GetCharMetrics (_eag );if !_bge {_ga .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u004e\u006f \u006d\u0065\u0074r\u0069\u0063\u0020\u0066\u006f\u0072\u0020\u0063\u006fde\u003d\u0025\u0064 \u0072\u003d0\u0078\u0025\u0030\u0034\u0078\u003d%\u002b\u0071 \u0025\u0073",_eag ,_gegg ,_gegg ,_aaec );
return _da .Errorf ("\u006e\u006f\u0020\u0063\u0068\u0061\u0072\u0020\u006d\u0065\u0074\u0072\u0069\u0063\u0073:\u0020f\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0063\u006f\u0064\u0065\u003d\u0025\u0064",_aaec .String (),_eag );};_eaeg :=_daa .Point {X :_adac .Wx *_fegcf ,Y :_adac .Wy *_fegcf };
_caafb :=_daa .Point {X :(_eaeg .X *_ecdd +_ccbb )*_ggfc };_dee :=_daa .Point {X :(_eaeg .X *_ecdd +_fcef ._aebd +_ccbb )*_ggfc };if _fcdg {_ga .Log .Info ("\u0074\u0066\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0063\u003d\u0025\u002e\u0032f\u0020t\u0077\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_ecdd ,_fcef ._aebd ,_fcef ._edaa ,_ggfc );
_ga .Log .Info ("\u0064x\u002c\u0064\u0079\u003d%\u002e\u0033\u0066\u0020\u00740\u003d%\u002e3\u0066\u0020\u0074\u003d\u0025\u002e\u0033f",_eaeg ,_caafb ,_dee );};_cdab :=_adeb (_caafb );_dbec :=_adeb (_dee );_bggd :=_ggac ._bgbd .CTM .Mult (_ggac ._dgga ).Mult (_cdab );
if _gdeb {_ga .Log .Info ("e\u006e\u0064\u003a\u000a\tC\u0054M\u003d\u0025\u0073\u000a\u0009 \u0074\u006d\u003d\u0025\u0073\u000a"+"\u0009\u0020t\u0064\u003d\u0025s\u0020\u0078\u006c\u0061\u0074\u003d\u0025\u0073\u000a"+"\u0009t\u0064\u0030\u003d\u0025s\u000a\u0009\u0020\u0020\u2192 \u0025s\u0020x\u006c\u0061\u0074\u003d\u0025\u0073",_ggac ._bgbd .CTM ,_ggac ._dgga ,_dbec ,_afba (_ggac ._bgbd .CTM .Mult (_ggac ._dgga ).Mult (_dbec )),_cdab ,_bggd ,_afba (_bggd ));
};_gdfa ,_bgcf :=_ggac .newTextMark (_e .ExpandLigatures (_gegg ),_efff ,_afba (_bggd ),_fbg .Abs (_acba *_efff .ScalingFactorX ()),_aaec ,_ggac ._ebd ._aebd ,_gfade ,_cgcee ,_degb ,_bdgc ,_eddf ,_ccfcb );if !_bgcf {_ga .Log .Debug ("\u0054\u0065\u0078\u0074\u0020\u006d\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069d\u0065 \u0070\u0061\u0067\u0065\u002e\u0020\u0053\u006b\u0069\u0070\u0070\u0069\u006e\u0067");
continue ;};if _aaec ==nil {_ga .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u002e");}else if _aaec .Encoder ()==nil {_ga .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020N\u006f\u0020\u0065\u006e\u0063\u006f\u0064\u0069\u006eg\u002e\u0020\u0066o\u006et\u003d\u0025\u0073",_aaec );
}else {if _bbaf ,_eebf :=_aaec .Encoder ().CharcodeToRune (_eag );_eebf {_gdfa ._cbgcc =string (_bbaf );};};_ga .Log .Trace ("i\u003d\u0025\u0064\u0020\u0063\u006fd\u0065\u003d\u0025\u0064\u0020\u006d\u0061\u0072\u006b=\u0025\u0073\u0020t\u0072m\u003d\u0025\u0073",_eddf ,_eag ,_gdfa ,_efff );
_ggac ._ccgd =append (_ggac ._ccgd ,&_gdfa );_ggac ._dgga .Concat (_dbec );};return nil ;};

// NewEditor returns a new Editor object
func NewEditor (reader *_bd .PdfReader )*Editor {return &Editor {_ffg :reader }};func (_bgfb *subpath )last ()_daa .Point {return _bgfb ._eacf [len (_bgfb ._eacf )-1]};func _eccae (_cdgd ,_gdgde _daa .Point )rulingKind {_bcbb :=_fbg .Abs (_cdgd .X -_gdgde .X );
_bdga :=_fbg .Abs (_cdgd .Y -_gdgde .Y );return _fgfe (_bcbb ,_bdga ,_aafb );};func _ffag (_dgdef int ,_dceg func (int ,int )bool )[]int {_ebbc :=make ([]int ,_dgdef );for _fbad :=range _ebbc {_ebbc [_fbad ]=_fbad ;};_gf .Slice (_ebbc ,func (_ggbdf ,_eaga int )bool {return _dceg (_ebbc [_ggbdf ],_ebbc [_eaga ])});
return _ebbc ;};func (_cbdeca rulingList )snapToGroups ()rulingList {_cegf ,_dfcc :=_cbdeca .vertsHorzs ();if len (_cegf )> 0{_cegf =_cegf .snapToGroupsDirection ();};if len (_dfcc )> 0{_dfcc =_dfcc .snapToGroupsDirection ();};_fbgdb :=append (_cegf ,_dfcc ...);
_fbgdb .log ("\u0073\u006e\u0061p\u0054\u006f\u0047\u0072\u006f\u0075\u0070\u0073");return _fbgdb ;};func (_ebeg *textObject )setTextRenderMode (_fbdfa int ){if _ebeg ==nil {return ;};_ebeg ._ebd ._gggeg =RenderMode (_fbdfa );};type compositeCell struct{_bd .PdfRectangle ;
paraList ;};func (_bbggg pathSection )bbox ()_bd .PdfRectangle {_fbce :=_bbggg ._cbcg [0]._eacf [0];_bbfb :=_bd .PdfRectangle {Llx :_fbce .X ,Urx :_fbce .X ,Lly :_fbce .Y ,Ury :_fbce .Y };_edacg :=func (_dfbgd _daa .Point ){if _dfbgd .X < _bbfb .Llx {_bbfb .Llx =_dfbgd .X ;
}else if _dfbgd .X > _bbfb .Urx {_bbfb .Urx =_dfbgd .X ;};if _dfbgd .Y < _bbfb .Lly {_bbfb .Lly =_dfbgd .Y ;}else if _dfbgd .Y > _bbfb .Ury {_bbfb .Ury =_dfbgd .Y ;};};for _ ,_dbgef :=range _bbggg ._cbcg [0]._eacf [1:]{_edacg (_dbgef );};for _ ,_dgde :=range _bbggg ._cbcg [1:]{for _ ,_fegd :=range _dgde ._eacf {_edacg (_fegd );
};};return _bbfb ;};func (_bcddb *wordBag )firstWord (_eaae int )*textWord {return _bcddb ._defc [_eaae ][0]};func _cgc (_dde *TextMarkArray ,_dbg *string ,_afc *int ,_egeg string )error {var _cbc TextMark ;for _ ,_ggf :=range _dde .Elements (){_bgbc :=_ggf .Text ;
_ecga :=_ggf .Font ;_geg :="";_gccg :=*_dbg ;if len (_gccg )> *_afc {_geg =_gccg [*_afc :*_afc +len (_bgbc )];}else if *_afc ==len (_egeg )-1&&len (_gccg )> *_afc {_geg =_gccg [*_afc :];};_dbd :=_ggf .DirectObject ;if _dbd ==nil &&_ggf .Text =="\u0020"{_egcg :=_cbc .ObjString ;
_ffac :=_egcg [len (_egcg )-1];if _ffac !=_ggf .Text {_dbd =_cbc .DirectObject ;_ecga =_cbc .Font ;_cacg ,_aafd :=_agg .GetString (_dbd );if !_aafd {return _da .Errorf ("\u0075n\u0061\u0062l\u0065\u0020\u0074\u006f \u0067\u0065\u0074 \u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0042\u0079te\u0073\u0020\u0066r\u006f\u006d \u0064\u0069\u0072\u0065\u0063\u0074O\u0062\u006ae\u0063\u0074");
};_eec ,_aafd :=_agg .GetStringBytes (_dbd );if !_aafd {return _agg .ErrTypeError ;};_fca :=_gbbcd (_eec ,_ecga );_geg =_fca +_geg ;_gcd (_cacg ,_geg ,_ecga );*_afc +=len (_bgbc );continue ;};};_dff ,_dac :=_agg .GetString (_dbd );if !_dac {return _da .Errorf ("\u0075n\u0061\u0062l\u0065\u0020\u0074\u006f \u0067\u0065\u0074 \u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0042\u0079te\u0073\u0020\u0066r\u006f\u006d \u0064\u0069\u0072\u0065\u0063\u0074O\u0062\u006ae\u0063\u0074");
};_fbbe :="";_gbda ,_dac :=_agg .GetStringBytes (_dbd );if !_dac {return _agg .ErrTypeError ;};_gbfc :=_gbbcd (_gbda ,_ecga );_fbbe =_d .Replace (_gbfc ,_bgbc ,_geg ,1);_gcd (_dff ,_fbbe ,_ecga );*_afc +=len (_bgbc );_cbc =_ggf ;};return nil ;};func (_dcdga paraList )llyRange (_abcg []int ,_dcbe ,_addc float64 )[]int {_afcg :=len (_dcdga );
if _addc < _dcdga [_abcg [0]].Lly ||_dcbe > _dcdga [_abcg [_afcg -1]].Lly {return nil ;};_cdfa :=_gf .Search (_afcg ,func (_bdgb int )bool {return _dcdga [_abcg [_bdgb ]].Lly >=_dcbe });_caefb :=_gf .Search (_afcg ,func (_adcd int )bool {return _dcdga [_abcg [_adcd ]].Lly > _addc });
return _abcg [_cdfa :_caefb ];};func _ddbgb (_gbgdf []rulingList )(rulingList ,rulingList ){var _debe rulingList ;for _ ,_ebdbg :=range _gbgdf {_debe =append (_debe ,_ebdbg ...);};return _debe .vertsHorzs ();};func (_fagg *PageText )computeViews (){if _fagg ._baccf ._bbgb ==ExtractionModePlain {_fagg ._aega =_fagg .getText ();
return ;};_gdbba :=_fagg .getParagraphs ();_cdbd :=new (_ag .Buffer );_gdbba .writeText (_cdbd );_fagg ._aega =_cdbd .String ();_fagg ._bcc =_gdbba .toTextMarks ();_fagg ._abc =_gdbba .tables ();if _bbae {_ga .Log .Info ("\u0063\u006f\u006dpu\u0074\u0065\u0056\u0069\u0065\u0077\u0073\u003a\u0020\u0074\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064",len (_fagg ._abc ));
};};func _bdbgb (_dbgf _daa .Point )*subpath {return &subpath {_eacf :[]_daa .Point {_dbgf }}};func _gffd (_adad ,_abda bounded )float64 {_fgfc :=_efe (_adad ,_abda );if !_gaebc (_fgfc ){return _fgfc ;};return _ccaa (_adad ,_abda );};func (_egag *textObject )setCharSpacing (_deg float64 ){if _egag ==nil {return ;
};_egag ._ebd ._aebd =_deg ;if _fcdg {_ga .Log .Info ("\u0073\u0065t\u0043\u0068\u0061\u0072\u0053\u0070\u0061\u0063\u0069\u006e\u0067\u003a\u0020\u0025\u002e\u0032\u0066\u0020\u0073\u0074\u0061\u0074e=\u0025\u0073",_deg ,_egag ._ebd .String ());};};func (_bgedd *textObject )getFontDict (_gbdc string )(_adge _agg .PdfObject ,_gfcg error ){_eabca :=_bgedd ._ccfc ;
if _eabca ==nil {_ga .Log .Debug ("g\u0065\u0074\u0046\u006f\u006e\u0074D\u0069\u0063\u0074\u002e\u0020\u004eo\u0020\u0072\u0065\u0073\u006f\u0075\u0072c\u0065\u0073\u002e\u0020\u006e\u0061\u006d\u0065\u003d\u0025#\u0071",_gbdc );return nil ,nil ;};_adge ,_afeg :=_eabca .GetFontByName (_agg .PdfObjectName (_gbdc ));
if !_afeg {_ga .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0067\u0065t\u0046\u006f\u006et\u0044\u0069\u0063\u0074\u003a\u0020\u0046\u006f\u006et \u006e\u006f\u0074 \u0066\u006fu\u006e\u0064\u003a\u0020\u006e\u0061m\u0065\u003d%\u0023\u0071",_gbdc );
return nil ,_cg .New ("f\u006f\u006e\u0074\u0020no\u0074 \u0069\u006e\u0020\u0072\u0065s\u006f\u0075\u0072\u0063\u0065\u0073");};return _adge ,nil ;};var _acfa *_ab .Regexp =_ab .MustCompile (_eeef +"\u007c"+_eeba );func (_bafdd *shapesState )establishSubpath ()*subpath {_agfd ,_dega :=_bafdd .lastpointEstablished ();
if !_dega {_bafdd ._baccb =append (_bafdd ._baccb ,_bdbgb (_agfd ));};if len (_bafdd ._baccb )==0{return nil ;};_bafdd ._abbb =false ;return _bafdd ._baccb [len (_bafdd ._baccb )-1];};var _gbf =false ;func (_dbdgb rulingList )aligned ()bool {if len (_dbdgb )< 2{return false ;
};_deagd :=make (map[*ruling ]int );_deagd [_dbdgb [0]]=0;for _ ,_gbgd :=range _dbdgb [1:]{_dcbg :=false ;for _fbfgg :=range _deagd {if _gbgd .gridIntersecting (_fbfgg ){_deagd [_fbfgg ]++;_dcbg =true ;break ;};};if !_dcbg {_deagd [_gbgd ]=0;};};_fcga :=0;
for _ ,_fgeab :=range _deagd {if _fgeab ==0{_fcga ++;};};_fbcg :=float64 (_fcga )/float64 (len (_dbdgb ));_agaa :=_fbcg <=1.0-_becfe ;if _ddcaf {_ga .Log .Info ("\u0061\u006c\u0069\u0067\u006e\u0065\u0064\u003d\u0025\u0074\u0020\u0075\u006em\u0061\u0074\u0063\u0068\u0065\u0064=\u0025\u002e\u0032\u0066\u003d\u0025\u0064\u002f\u0025\u0064\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_agaa ,_fbcg ,_fcga ,len (_dbdgb ),_dbdgb .String ());
};return _agaa ;};func _eaba (_cce []*wordBag )[]*wordBag {if len (_cce )<=1{return _cce ;};if _ebagc {_ga .Log .Info ("\u006d\u0065\u0072\u0067\u0065\u0057\u006f\u0072\u0064B\u0061\u0067\u0073\u003a");};_gf .Slice (_cce ,func (_eceac ,_cdefe int )bool {_caffe ,_gdeafg :=_cce [_eceac ],_cce [_cdefe ];
_dgfg :=_caffe .Width ()*_caffe .Height ();_eged :=_gdeafg .Width ()*_gdeafg .Height ();if _dgfg !=_eged {return _dgfg > _eged ;};if _caffe .Height ()!=_gdeafg .Height (){return _caffe .Height ()> _gdeafg .Height ();};return _eceac < _cdefe ;});var _bgaa []*wordBag ;
_ebdd :=make (intSet );for _afced :=0;_afced < len (_cce );_afced ++{if _ebdd .has (_afced ){continue ;};_fgcb :=_cce [_afced ];for _deddb :=_afced +1;_deddb < len (_cce );_deddb ++{if _ebdd .has (_afced ){continue ;};_gfbb :=_cce [_deddb ];_cafa :=_fgcb .PdfRectangle ;
_cafa .Llx -=_fgcb ._cfbb ;if _gfea (_cafa ,_gfbb .PdfRectangle ){_fgcb .absorb (_gfbb );_ebdd .add (_deddb );};};_bgaa =append (_bgaa ,_fgcb );};if len (_cce )!=len (_bgaa )+len (_ebdd ){_ga .Log .Error ("\u006d\u0065\u0072ge\u0057\u006f\u0072\u0064\u0042\u0061\u0067\u0073\u003a \u0025d\u2192%\u0064 \u0061\u0062\u0073\u006f\u0072\u0062\u0065\u0064\u003d\u0025\u0064",len (_cce ),len (_bgaa ),len (_ebdd ));
};return _bgaa ;};func (_dcff *textObject )moveTextSetLeading (_ebag ,_cbcc float64 ){_dcff ._ebd ._bbec =-_cbcc ;_dcff .moveLP (_ebag ,_cbcc );};func (_ggfcb *textObject )getFont (_ffae string )(*_bd .PdfFont ,error ){if _ggfcb ._fggde ._ada !=nil {_cgfcg ,_ddbe :=_ggfcb .getFontDict (_ffae );
if _ddbe !=nil {_ga .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0067\u0065\u0074\u0046\u006f\u006e\u0074:\u0020n\u0061m\u0065=\u0025\u0073\u002c\u0020\u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0073",_ffae ,_ddbe .Error ());return nil ,_ddbe ;
};_ggfcb ._fggde ._add ++;_eegd ,_cddf :=_ggfcb ._fggde ._ada [_cgfcg .String ()];if _cddf {_eegd ._fface =_ggfcb ._fggde ._add ;return _eegd ._bbcd ,nil ;};};_fgag ,_cefd :=_ggfcb .getFontDict (_ffae );if _cefd !=nil {return nil ,_cefd ;};_affe ,_cefd :=_ggfcb .getFontDirect (_ffae );
if _cefd !=nil {return nil ,_cefd ;};if _ggfcb ._fggde ._ada !=nil {_dccdf :=fontEntry {_affe ,_ggfcb ._fggde ._add };if len (_ggfcb ._fggde ._ada )>=_bbdg {var _gbcfe []string ;for _fcg :=range _ggfcb ._fggde ._ada {_gbcfe =append (_gbcfe ,_fcg );};_gf .Slice (_gbcfe ,func (_dbfg ,_efae int )bool {return _ggfcb ._fggde ._ada [_gbcfe [_dbfg ]]._fface < _ggfcb ._fggde ._ada [_gbcfe [_efae ]]._fface ;
});delete (_ggfcb ._fggde ._ada ,_gbcfe [0]);};_ggfcb ._fggde ._ada [_fgag .String ()]=_dccdf ;};return _affe ,nil ;};type lists []*list ;func (_fgaeb *textLine )bbox ()_bd .PdfRectangle {return _fgaeb .PdfRectangle };func _cbde (_fbgef []*textLine )[]*textLine {_fbfce :=[]*textLine {};
for _ ,_fbbg :=range _fbgef {_efeg :=_fbbg .text ();_ebggg :=_acfa .Find ([]byte (_efeg ));if _ebggg !=nil {_fbfce =append (_fbfce ,_fbbg );};};return _fbfce ;};func _ggaff (_deeff []*textLine ){_gf .Slice (_deeff ,func (_dbcgc ,_gaea int )bool {_afae ,_baba :=_deeff [_dbcgc ],_deeff [_gaea ];
return _afae ._gcdcg < _baba ._gcdcg ;});};func (_cade *PageText )getText ()string {_bcfgc :="";_fbbc :=len (_cade ._cgaf );for _efgb :=0;_efgb < 360&&_fbbc > 0;_efgb +=90{_dfgb :=make ([]*textMark ,0,len (_cade ._cgaf )-_fbbc );for _ ,_eeg :=range _cade ._cgaf {if _eeg ._bfa ==_efgb {_dfgb =append (_dfgb ,_eeg );
};};if len (_dfgb )> 0{_bcfgc +=_cge (_dfgb ,_cade ._gecb );_fbbc -=len (_dfgb );};};return _bcfgc ;};func _fcdaa (_fafbd ,_cfeg *textPara )bool {return _acce (_fafbd ._gacea ,_cfeg ._gacea )};

// Text returns the text content of the `bulletLists`.
func (_addac *lists )Text ()string {_ddfga :=&_d .Builder {};for _ ,_cadc :=range *_addac {_adbf :=_cadc .Text ();_ddfga .WriteString (_adbf );};return _ddfga .String ();};

// TextTable represents a table.
// Cells are ordered top-to-bottom, left-to-right.
// Cells[y] is the (0-offset) y'th row in the table.
// Cells[y][x] is the (0-offset) x'th column in the table.
type TextTable struct{_bd .PdfRectangle ;W ,H int ;Cells [][]TableCell ;};func (_dcde *wordBag )sort (){for _ ,_dgbd :=range _dcde ._defc {_gf .Slice (_dgbd ,func (_cbge ,_fcd int )bool {return _efe (_dgbd [_cbge ],_dgbd [_fcd ])< 0});};};func _eef (_dgag []*textLine ,_gdbbf string ,_egcc []*list )*list {return &list {_eaafd :_dgag ,_egfbb :_gdbbf ,_aece :_egcc };
};func (_ccdfe *textTable )markCells (){for _cbba :=0;_cbba < _ccdfe ._bgfd ;_cbba ++{for _gddc :=0;_gddc < _ccdfe ._eceag ;_gddc ++{_cfaa :=_ccdfe .get (_gddc ,_cbba );if _cfaa !=nil {_cfaa ._effb =true ;};};};};func (_bbecc *shapesState )newSubPath (){_bbecc .clearPath ();
if _bfdd {_ga .Log .Info ("\u006e\u0065\u0077\u0053\u0075\u0062\u0050\u0061\u0074h\u003a\u0020\u0025\u0073",_bbecc );};};func (_ebaae rulingList )toTilings ()(rulingList ,[]gridTiling ){_ebaae .log ("\u0074o\u0054\u0069\u006c\u0069\u006e\u0067s");if len (_ebaae )==0{return nil ,nil ;
};_ebaae =_ebaae .tidied ("\u0061\u006c\u006c");_ebaae .log ("\u0074\u0069\u0064\u0069\u0065\u0064");_bgbb :=_ebaae .toGrids ();_ageeb :=make ([]gridTiling ,len (_bgbb ));for _fafeb ,_efffd :=range _bgbb {_ageeb [_fafeb ]=_efffd .asTiling ();};return _ebaae ,_ageeb ;
};func (_bagc *textTable )getRight ()paraList {_cddc :=make (paraList ,_bagc ._bgfd );for _bbace :=0;_bbace < _bagc ._bgfd ;_bbace ++{_gefa :=_bagc .get (_bagc ._eceag -1,_bbace )._fcaa ;if _gefa .taken (){return nil ;};_cddc [_bbace ]=_gefa ;};for _egfa :=0;
_egfa < _bagc ._bgfd -1;_egfa ++{if _cddc [_egfa ]._abcd !=_cddc [_egfa +1]{return nil ;};};return _cddc ;};func _cbce (_ggedb ,_fdgb _bd .PdfRectangle )(_bd .PdfRectangle ,bool ){if !_fcdd (_ggedb ,_fdgb ){return _bd .PdfRectangle {},false ;};return _bd .PdfRectangle {Llx :_fbg .Max (_ggedb .Llx ,_fdgb .Llx ),Urx :_fbg .Min (_ggedb .Urx ,_fdgb .Urx ),Lly :_fbg .Max (_ggedb .Lly ,_fdgb .Lly ),Ury :_fbg .Min (_ggedb .Ury ,_fdgb .Ury )},true ;
};

// String returns a human readable description of `ss`.
func (_ebec *shapesState )String ()string {return _da .Sprintf ("\u007b\u0025\u0064\u0020su\u0062\u0070\u0061\u0074\u0068\u0073\u0020\u0066\u0072\u0065\u0073\u0068\u003d\u0025t\u007d",len (_ebec ._baccb ),_ebec ._abbb );};func _gbaf (_cbade []compositeCell )[]float64 {var _gdbf []*textLine ;
_cgcdb :=0;for _ ,_egfec :=range _cbade {_cgcdb +=len (_egfec .paraList );_gdbf =append (_gdbf ,_egfec .lines ()...);};_gf .Slice (_gdbf ,func (_eggde ,_cefcc int )bool {_deccd ,_ecgdd :=_gdbf [_eggde ],_gdbf [_cefcc ];_geea ,_beggd :=_deccd ._gcdcg ,_ecgdd ._gcdcg ;
if !_gaebc (_geea -_beggd ){return _geea < _beggd ;};return _deccd .Llx < _ecgdd .Llx ;});if _bbae {_da .Printf ("\u0020\u0020\u0020 r\u006f\u0077\u0042\u006f\u0072\u0064\u0065\u0072\u0073:\u0020%\u0064 \u0070a\u0072\u0061\u0073\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",_cgcdb ,len (_gdbf ));
for _abaf ,_agabe :=range _gdbf {_da .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_abaf ,_agabe );};};var _cfbda []float64 ;_eedf :=_gdbf [0];var _ecdda [][]*textLine ;_acage :=[]*textLine {_eedf };for _efde ,_gebe :=range _gdbf [1:]{if _gebe .Ury < _eedf .Lly {_gddfbe :=0.5*(_gebe .Ury +_eedf .Lly );
if _bbae {_da .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u003c\u0020\u0025\u0036.\u0032f\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u003d\u0025\u0036\u002e\u0032\u0066\u000a"+"\u0009\u0020\u0071\u003d\u0025\u0073\u000a\u0009\u0020p\u003d\u0025\u0073\u000a",_efde ,_gebe .Ury ,_eedf .Lly ,_gddfbe ,_eedf ,_gebe );
};_cfbda =append (_cfbda ,_gddfbe );_ecdda =append (_ecdda ,_acage );_acage =nil ;};_acage =append (_acage ,_gebe );if _gebe .Lly < _eedf .Lly {_eedf =_gebe ;};};if len (_acage )> 0{_ecdda =append (_ecdda ,_acage );};if _bbae {_da .Printf (" \u0020\u0020\u0020\u0020\u0020\u0020 \u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073\u003d%\u0036.\u0032\u0066\u000a",_cfbda );
};if _bbae {_ga .Log .Info ("\u0072\u006f\u0077\u003d\u0025\u0064",len (_cbade ));for _bgcae ,_cbcbd :=range _cbade {_da .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bgcae ,_cbcbd );};_ga .Log .Info ("\u0067r\u006f\u0075\u0070\u0073\u003d\u0025d",len (_ecdda ));
for _adfd ,_acceff :=range _ecdda {_da .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0064\u000a",_adfd ,len (_acceff ));for _eccda ,_ccgdg :=range _acceff {_da .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_eccda ,_ccgdg );};};};_begeb :=true ;
for _dfad ,_fdaf :=range _ecdda {_defab :=true ;for _gafcf ,_efcge :=range _cbade {if _bbae {_da .Printf ("\u0020\u0020\u0020\u007e\u007e\u007e\u0067\u0072\u006f\u0075\u0070\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0020\u0063\u0065\u006cl\u0020\u0025\u0064\u0020\u006ff\u0020\u0025d\u0020\u0025\u0073\u000a",_dfad ,len (_ecdda ),_gafcf ,len (_cbade ),_efcge );
};if !_efcge .hasLines (_fdaf ){if _bbae {_da .Printf ("\u0020\u0020\u0020\u0021\u0021\u0021\u0067\u0072\u006f\u0075\u0070\u0020\u0025d\u0020\u006f\u0066\u0020\u0025\u0064 \u0063\u0065\u006c\u006c\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064 \u004f\u0055\u0054\u000a",_dfad ,len (_ecdda ),_gafcf ,len (_cbade ));
};_defab =false ;break ;};};if !_defab {_begeb =false ;break ;};};if !_begeb {if _bbae {_ga .Log .Info ("\u0072\u006f\u0077\u0020\u0063o\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u0020\u0064\u006f\u006e\u0027\u0074 \u0073\u0070\u0061\u006e\u0020\u0061\u006c\u006c\u0020\u0063\u0065\u006c\u006c\u0073\u0020\u0069\u006e\u0020\u0072\u006f\u0077\u002e\u0020\u0069\u0067\u006e\u006f\u0072\u0069\u006eg");
};_cfbda =nil ;};if _bbae &&_cfbda !=nil {_da .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u002a\u002a*\u0072\u006f\u0077\u0043\u006f\u0072\u0072i\u0064\u006f\u0072\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u000a",_cfbda );};return _cfbda ;
};func (_ebece rulingList )primMinMax ()(float64 ,float64 ){_cacac ,_gfag :=_ebece [0]._bbac ,_ebece [0]._bbac ;for _ ,_edbd :=range _ebece [1:]{if _edbd ._bbac < _cacac {_cacac =_edbd ._bbac ;}else if _edbd ._bbac > _gfag {_gfag =_edbd ._bbac ;};};return _cacac ,_gfag ;
};func (_eagb *subpath )add (_ebfb ..._daa .Point ){_eagb ._eacf =append (_eagb ._eacf ,_ebfb ...)};

// Append appends `mark` to the mark array.
func (_gged *TextMarkArray )Append (mark TextMark ){_gged ._aagc =append (_gged ._aagc ,mark )};

// String returns a description of `tm`.
func (_gcgd *textMark )String ()string {return _da .Sprintf ("\u0025\u002e\u0032f \u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\u0022\u0025\u0073\u0022",_gcgd .PdfRectangle ,_gcgd ._bafcb ,_gcgd ._aaba );};func _baaea (_dgdab *PageText )error {_cacbd :=_cgd .GetLicenseKey ();
if _cacbd !=nil &&_cacbd .IsLicensed ()||_gbf {return nil ;};_da .Printf ("\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064\u0020c\u006f\u0070\u0079\u0020\u006f\u0066\u0020\u0055\u006e\u0069P\u0044\u0046\u000a");_da .Println ("-\u0020\u0047\u0065\u0074\u0020\u0061\u0020\u0066\u0072e\u0065\u0020\u0074\u0072\u0069\u0061\u006c l\u0069\u0063\u0065\u006es\u0065\u0020\u006f\u006e\u0020\u0068\u0074\u0074\u0070s:\u002f\u002fu\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f");
return _cg .New ("\u0075\u006e\u0069\u0070d\u0066\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020c\u006fd\u0065\u0020\u0072\u0065\u0071\u0075\u0069r\u0065\u0064");};func _aecg (_befaf *textLine ,_cbdec []*textLine )float64 {var _acgad float64 =-1;
for _ ,_egea :=range _cbdec {if _egea ._gcdcg > _befaf ._gcdcg {if _fbg .Round (_egea .Llx )>=_fbg .Round (_befaf .Llx ){_acgad =_egea ._gcdcg ;}else {break ;};};};return _acgad ;};func (_gaaa *stateStack )size ()int {return len (*_gaaa )};func (_bdbg *shapesState )closePath (){if _bdbg ._abbb {_bdbg ._baccb =append (_bdbg ._baccb ,_bdbgb (_bdbg ._cfcc ));
_bdbg ._abbb =false ;}else if len (_bdbg ._baccb )==0{if _bfdd {_ga .Log .Debug ("\u0063\u006c\u006f\u0073eP\u0061\u0074\u0068\u0020\u0077\u0069\u0074\u0068\u0020\u006e\u006f\u0020\u0070\u0061t\u0068");};_bdbg ._abbb =false ;return ;};_bdbg ._baccb [len (_bdbg ._baccb )-1].close ();
if _bfdd {_ga .Log .Info ("\u0063\u006c\u006f\u0073\u0065\u0050\u0061\u0074\u0068\u003a\u0020\u0025\u0073",_bdbg );};};func (_fcged *textWord )bbox ()_bd .PdfRectangle {return _fcged .PdfRectangle };func _cefg (_ddfaa []*textLine )map[float64 ][]*textLine {_gf .Slice (_ddfaa ,func (_bgbdf ,_eead int )bool {return _ddfaa [_bgbdf ]._gcdcg < _ddfaa [_eead ]._gcdcg });
_eadcc :=map[float64 ][]*textLine {};for _ ,_ecec :=range _ddfaa {_befd :=_ecba (_ecec );_befd =_fbg .Round (_befd );_eadcc [_befd ]=append (_eadcc [_befd ],_ecec );};return _eadcc ;};func (_ddfac *textTable )get (_cadce ,_eadbf int )*textPara {return _ddfac ._aegad [_adebf (_cadce ,_eadbf )];
};type paraList []*textPara ;func _adebf (_gbgb ,_degbb int )uint64 {return uint64 (_gbgb )*0x1000000+uint64 (_degbb )};func (_ecca *shapesState )cubicTo (_ceeg ,_bbea ,_ccfce ,_baaa ,_cefa ,_ccfg float64 ){if _bfdd {_ga .Log .Info ("\u0063\u0075\u0062\u0069\u0063\u0054\u006f\u003a");
};_ecca .addPoint (_cefa ,_ccfg );};func (_egg *stateStack )top ()*textState {if _egg .empty (){return nil ;};return (*_egg )[_egg .size ()-1];};

// ImageMark represents an image drawn on a page and its position in device coordinates.
// All coordinates are in device coordinates.
type ImageMark struct{Image *_bd .Image ;

// Dimensions of the image as displayed in the PDF.
Width float64 ;Height float64 ;

// Position of the image in PDF coordinates (lower left corner).
X float64 ;Y float64 ;

// Angle in degrees, if rotated.
Angle float64 ;};func (_ggde *textPara )bbox ()_bd .PdfRectangle {return _ggde .PdfRectangle };func (_faac *wordBag )depthRange (_dbbb ,_ddeg int )[]int {var _cbdd []int ;for _ddff :=range _faac ._defc {if _dbbb <=_ddff &&_ddff <=_ddeg {_cbdd =append (_cbdd ,_ddff );
};};if len (_cbdd )==0{return nil ;};_gf .Ints (_cbdd );return _cbdd ;};type rulingKind int ;type gridTile struct{_bd .PdfRectangle ;_gdbbff ,_afddd ,_febea ,_gbcc bool ;};func _afba (_fed _daa .Matrix )_daa .Point {_bgdd ,_gcce :=_fed .Translation ();
return _daa .Point {X :_bgdd ,Y :_gcce };};func (_ddfb rulingList )findPrimSec (_fdfdc ,_dcaa float64 )*ruling {for _ ,_dfda :=range _ddfb {if _gaebc (_dfda ._bbac -_fdfdc )&&_dfda ._gccd -_dfea <=_dcaa &&_dcaa <=_dfda ._ggadf +_dfea {return _dfda ;};};
return nil ;};func (_ffdc compositeCell )parasBBox ()(paraList ,_bd .PdfRectangle ){return _ffdc .paraList ,_ffdc .PdfRectangle ;};

// Text gets the extracted text contained in `l`.
func (_decg *list )Text ()string {_fage :=&_d .Builder {};_caeb :="";_abegg (_decg ,_fage ,&_caeb );return _fage .String ();};func _bdgfd (_cabbb ,_gcbb float64 )string {_fegcd :=!_gaebc (_cabbb -_gcbb );if _fegcd {return "\u000a";};return "\u0020";};func _fcdd (_ddgb ,_begg _bd .PdfRectangle )bool {return _acce (_ddgb ,_begg )&&_fcda (_ddgb ,_begg )};


// TextMarkArray is a collection of TextMarks.
type TextMarkArray struct{_aagc []TextMark };func (_ggegd rulingList )sortStrict (){_gf .Slice (_ggegd ,func (_afdcb ,_acgee int )bool {_beaab ,_gabd :=_ggegd [_afdcb ],_ggegd [_acgee ];_dbdaf ,_cfdb :=_beaab ._decfc ,_gabd ._decfc ;if _dbdaf !=_cfdb {return _dbdaf > _cfdb ;
};_dbgc ,_aacf :=_beaab ._bbac ,_gabd ._bbac ;if !_gaebc (_dbgc -_aacf ){return _dbgc < _aacf ;};_dbgc ,_aacf =_beaab ._gccd ,_gabd ._gccd ;if _dbgc !=_aacf {return _dbgc < _aacf ;};return _beaab ._ggadf < _gabd ._ggadf ;});};func (_dcfd *textTable )getDown ()paraList {_ggaba :=make (paraList ,_dcfd ._eceag );
for _gbcbc :=0;_gbcbc < _dcfd ._eceag ;_gbcbc ++{_gbccg :=_dcfd .get (_gbcbc ,_dcfd ._bgfd -1)._abcd ;if _gbccg .taken (){return nil ;};_ggaba [_gbcbc ]=_gbccg ;};for _abbf :=0;_abbf < _dcfd ._eceag -1;_abbf ++{if _ggaba [_abbf ]._fcaa !=_ggaba [_abbf +1]{return nil ;
};};return _ggaba ;};func _fbfgcc (_cbbee *_bd .Image ,_dgcdb _fd .Color )_dc .Image {_daeea ,_fgbee :=int (_cbbee .Width ),int (_cbbee .Height );_fegdd :=_dc .NewRGBA (_dc .Rect (0,0,_daeea ,_fgbee ));for _bfcb :=0;_bfcb < _fgbee ;_bfcb ++{for _dcfed :=0;
_dcfed < _daeea ;_dcfed ++{_eegab ,_dbbg :=_cbbee .ColorAt (_dcfed ,_bfcb );if _dbbg !=nil {_ga .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_dcfed ,_bfcb );
continue ;};_dcca ,_bgddgb ,_gceg ,_ :=_eegab .RGBA ();var _baed _fd .Color ;if _dcca +_bgddgb +_gceg ==0{_baed =_dgcdb ;}else {_baed =_fd .Transparent ;};_fegdd .Set (_dcfed ,_bfcb ,_baed );};};return _fegdd ;};func (_fcgf *textLine )markWordBoundaries (){_cafb :=_ceaf *_fcgf ._ddec ;
for _bggb ,_gaee :=range _fcgf ._bbgge [1:]{if _cccc (_gaee ,_fcgf ._bbgge [_bggb ])>=_cafb {_gaee ._fgeb =true ;};};};func (_gefgg paraList )extractTables (_dggcc []gridTiling )paraList {if _bbae {_ga .Log .Debug ("\u0065\u0078\u0074r\u0061\u0063\u0074\u0054\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_gefgg ));
};if len (_gefgg )< _gbadc {return _gefgg ;};_afacg :=_gefgg .findTables (_dggcc );if _bbae {_ga .Log .Info ("c\u006f\u006d\u0062\u0069\u006e\u0065d\u0020\u0074\u0061\u0062\u006c\u0065s\u0020\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_afacg ));
for _gaad ,_bfeba :=range _afacg {_bfeba .log (_da .Sprintf ("c\u006f\u006d\u0062\u0069\u006e\u0065\u0064\u0020\u0025\u0064",_gaad ));};};return _gefgg .applyTables (_afacg );};

// String returns a human readable description of `vecs`.
func (_bgcbe rulingList )String ()string {if len (_bgcbe )==0{return "\u007b \u0045\u004d\u0050\u0054\u0059\u0020}";};_fcdaf ,_aaaba :=_bgcbe .vertsHorzs ();_bcga :=len (_fcdaf );_abgf :=len (_aaaba );if _bcga ==0||_abgf ==0{return _da .Sprintf ("\u007b%\u0064\u0020\u0078\u0020\u0025\u0064}",_bcga ,_abgf );
};_gafd :=_bd .PdfRectangle {Llx :_fcdaf [0]._bbac ,Urx :_fcdaf [_bcga -1]._bbac ,Lly :_aaaba [_abgf -1]._bbac ,Ury :_aaaba [0]._bbac };return _da .Sprintf ("\u007b\u0025d\u0020\u0078\u0020%\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u007d",_bcga ,_abgf ,_gafd );
};

// GetContentStreamOps returns the contentStreamOps field of `pt`.
func (_cbbe *PageText )GetContentStreamOps ()*_fdd .ContentStreamOperations {return _cbbe ._dcab };func (_debf *textObject )getFillColor ()_fd .Color {return _dcac (_debf ._bgbd .ColorspaceNonStroking ,_debf ._bgbd .ColorNonStroking );};func (_fgea *textPara )depth ()float64 {if _fgea ._cebf {return -1.0;
};if len (_fgea ._dbed )> 0{return _fgea ._dbed [0]._gcdcg ;};return _fgea ._deed .depth ();};

// ExtractText processes and extracts all text data in content streams and returns as a string.
// It takes into account character encodings in the PDF file, which are decoded by
// CharcodeBytesToUnicode.
// Characters that can't be decoded are replaced with MissingCodeRune ('\ufffd' = ).
func (_egda *Extractor )ExtractText ()(string ,error ){_beee ,_ ,_ ,_fegc :=_egda .ExtractTextWithStats ();return _beee ,_fegc ;};

// Editor represents a document editor object
type Editor struct{_ffg *_bd .PdfReader };func (_ddea *textLine )endsInHyphen ()bool {_gada :=_ddea ._bbgge [len (_ddea ._bbgge )-1];_gbed :=_gada ._egcfd ;_bgcfd ,_cbda :=_f .DecodeLastRuneInString (_gbed );if _cbda <=0||!_fb .Is (_fb .Hyphen ,_bgcfd ){return false ;
};if _gada ._fgeb &&_deda (_gbed ){return true ;};return _deda (_ddea .text ());};func (_edfeb paraList )readBefore (_efgd []int ,_caef ,_gccgg int )bool {_fbaf ,_gfbbc :=_edfeb [_caef ],_edfeb [_gccgg ];if _fcdaa (_fbaf ,_gfbbc )&&_fbaf .Lly > _gfbbc .Lly {return true ;
};if !(_fbaf ._gacea .Urx < _gfbbc ._gacea .Llx ){return false ;};_ceef ,_dcgg :=_fbaf .Lly ,_gfbbc .Lly ;if _ceef > _dcgg {_dcgg ,_ceef =_ceef ,_dcgg ;};_fadf :=_fbg .Max (_fbaf ._gacea .Llx ,_gfbbc ._gacea .Llx );_cacb :=_fbg .Min (_fbaf ._gacea .Urx ,_gfbbc ._gacea .Urx );
_caded :=_edfeb .llyRange (_efgd ,_ceef ,_dcgg );for _ ,_bdfe :=range _caded {if _bdfe ==_caef ||_bdfe ==_gccgg {continue ;};_eeaad :=_edfeb [_bdfe ];if _eeaad ._gacea .Llx <=_cacb &&_fadf <=_eeaad ._gacea .Urx {return false ;};};return true ;};func _bebeg (_gfba []*textLine ,_aceg map[float64 ][]*textLine ,_adede []float64 ,_facg int ,_ffaa ,_bbb float64 )[]*list {_dbggg :=[]*list {};
_dcage :=_facg ;_facg =_facg +1;_adegg :=_adede [_dcage ];_agcdgf :=_aceg [_adegg ];_deec :=_egcbd (_agcdgf ,_bbb ,_ffaa );for _ddbed ,_dbdb :=range _deec {var _egedb float64 ;_adaeb :=[]*list {};_fbbb :=_dbdb ._gcdcg ;_gfeab :=_bbb ;if _ddbed < len (_deec )-1{_gfeab =_deec [_ddbed +1]._gcdcg ;
};if _facg < len (_adede ){_adaeb =_bebeg (_gfba ,_aceg ,_adede ,_facg ,_fbbb ,_gfeab );};_egedb =_gfeab ;if len (_adaeb )> 0{_gbbb :=_adaeb [0];if len (_gbbb ._eaafd )> 0{_egedb =_gbbb ._eaafd [0]._gcdcg ;};};_adeee :=[]*textLine {_dbdb };_eggf :=_agab (_dbdb ,_gfba ,_fbbb ,_egedb );
_adeee =append (_adeee ,_eggf ...);_ddfgf :=_eef (_adeee ,"\u0062\u0075\u006c\u006c\u0065\u0074",_adaeb );_ddfgf ._ffc =_ceeb (_adeee ,"");_dbggg =append (_dbggg ,_ddfgf );};return _dbggg ;};type markKind int ;func (_gbgdg *ruling )intersects (_fcca *ruling )bool {_bgdbe :=(_gbgdg ._decfc ==_gdbe &&_fcca ._decfc ==_gcff )||(_fcca ._decfc ==_gdbe &&_gbgdg ._decfc ==_gcff );
_daaf :=func (_daae ,_ddeb *ruling )bool {return _daae ._gccd -_dfea <=_ddeb ._bbac &&_ddeb ._bbac <=_daae ._ggadf +_dfea ;};_gcgad :=_daaf (_gbgdg ,_fcca );_edef :=_daaf (_fcca ,_gbgdg );if _ddcaf {_da .Printf ("\u0020\u0020\u0020\u0020\u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003a\u0020\u0020\u006fr\u0074\u0068\u006f\u0067\u006f\u006e\u0061l\u003d\u0025\u0074\u0020\u006f\u0031\u003d\u0025\u0074\u0020\u006f2\u003d\u0025\u0074\u0020\u2192\u0020\u0025\u0074\u000a"+"\u0020\u0020\u0020 \u0020\u0020\u0020\u0076\u003d\u0025\u0073\u000a"+" \u0020\u0020\u0020\u0020\u0020\u0077\u003d\u0025\u0073\u000a",_bgdbe ,_gcgad ,_edef ,_bgdbe &&_gcgad &&_edef ,_gbgdg ,_fcca );
};return _bgdbe &&_gcgad &&_edef ;};func (_gbeg *ruling )equals (_egccf *ruling )bool {return _gbeg ._decfc ==_egccf ._decfc &&_edae (_gbeg ._bbac ,_egccf ._bbac )&&_edae (_gbeg ._gccd ,_egccf ._gccd )&&_edae (_gbeg ._ggadf ,_egccf ._ggadf );};func (_cggb rulingList )asTiling ()gridTiling {if _accd {_ga .Log .Info ("r\u0075\u006ci\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0063s\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u002b\u002b\u002b\u0020\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_cggb ));
};for _bbeb ,_dafdf :=range _cggb [1:]{_caddg :=_cggb [_bbeb ];if _caddg .alignsPrimary (_dafdf )&&_caddg .alignsSec (_dafdf ){_ga .Log .Error ("a\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0044\u0075\u0070\u006c\u0069\u0063\u0061\u0074\u0065 \u0072\u0075\u006c\u0069\u006e\u0067\u0073\u002e\u000a\u0009v=\u0025\u0073\u000a\t\u0077=\u0025\u0073",_dafdf ,_caddg );
};};_cggb .sortStrict ();_cggb .log ("\u0073n\u0061\u0070\u0070\u0065\u0064");_beafe ,_eccee :=_cggb .vertsHorzs ();_fabc :=_beafe .primaries ();_dagae :=_eccee .primaries ();_geba :=len (_fabc )-1;_gedec :=len (_dagae )-1;if _geba ==0||_gedec ==0{return gridTiling {};
};_ecgd :=_bd .PdfRectangle {Llx :_fabc [0],Urx :_fabc [_geba ],Lly :_dagae [0],Ury :_dagae [_gedec ]};if _accd {_ga .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0072\u0074s=\u0025\u0064",len (_beafe ));
for _aafbf ,_ecbg :=range _beafe {_da .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_aafbf ,_ecbg );};_ga .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0068\u006f\u0072\u007as=\u0025\u0064",len (_eccee ));
for _aecd ,_dcgf :=range _eccee {_da .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_aecd ,_dcgf );};_ga .Log .Info ("\u0072\u0075\u006c\u0069\u006eg\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067:\u0020\u0020\u0077\u0078\u0068\u003d\u0025\u0064\u0078\u0025\u0064\u000a\u0009\u006c\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a\u0009\u006c\u006c\u0079\u003d\u0025\u002e\u0032f",_geba ,_gedec ,_fabc ,_dagae );
};_ggcbf :=make ([]gridTile ,_geba *_gedec );for _gacge :=_gedec -1;_gacge >=0;_gacge --{_eeac :=_dagae [_gacge ];_dedg :=_dagae [_gacge +1];for _ebfeb :=0;_ebfeb < _geba ;_ebfeb ++{_ccbg :=_fabc [_ebfeb ];_eddfb :=_fabc [_ebfeb +1];_bage :=_beafe .findPrimSec (_ccbg ,_eeac );
_gcdbb :=_beafe .findPrimSec (_eddfb ,_eeac );_fabea :=_eccee .findPrimSec (_eeac ,_ccbg );_fabge :=_eccee .findPrimSec (_dedg ,_ccbg );_deaf :=_bd .PdfRectangle {Llx :_ccbg ,Urx :_eddfb ,Lly :_eeac ,Ury :_dedg };_efbd :=_gcdeb (_deaf ,_bage ,_gcdbb ,_fabea ,_fabge );
_ggcbf [_gacge *_geba +_ebfeb ]=_efbd ;if _accd {_da .Printf ("\u0020\u0020\u0078\u003d\u0025\u0032\u0064\u0020\u0079\u003d\u0025\u0032\u0064\u003a\u0020%\u0073 \u0025\u0036\u002e\u0032\u0066\u0020\u0078\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_ebfeb ,_gacge ,_efbd .String (),_efbd .Width (),_efbd .Height ());
};};};if _accd {_ga .Log .Info ("r\u0075\u006c\u0069\u006e\u0067\u004c\u0069\u0073\u0074.\u0061\u0073\u0054\u0069\u006c\u0069\u006eg:\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0020\u0068\u006f\u0072\u0069zo\u006e\u0074a\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_ecgd );
};_eeab :=make ([]map[float64 ]gridTile ,_gedec );for _bbbd :=_gedec -1;_bbbd >=0;_bbbd --{if _accd {_da .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_bbbd );};_eeab [_bbbd ]=make (map[float64 ]gridTile ,_geba );for _caaef :=0;_caaef < _geba ;
_caaef ++{_cfecg :=_ggcbf [_bbbd *_geba +_caaef ];if _accd {_da .Printf ("\u0020\u0020\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_caaef ,_cfecg );};if !_cfecg ._afddd {continue ;};_acbf :=_caaef ;for _ggfd :=_caaef +1;!_cfecg ._gbcc &&_ggfd < _geba ;
_ggfd ++{_ccgdd :=_ggcbf [_bbbd *_geba +_ggfd ];_cfecg .Urx =_ccgdd .Urx ;_cfecg ._gdbbff =_cfecg ._gdbbff ||_ccgdd ._gdbbff ;_cfecg ._febea =_cfecg ._febea ||_ccgdd ._febea ;_cfecg ._gbcc =_ccgdd ._gbcc ;if _accd {_da .Printf ("\u0020 \u0020%\u0034\u0064\u003a\u0020\u0025s\u0020\u2192 \u0025\u0073\u000a",_ggfd ,_ccgdd ,_cfecg );
};_acbf =_ggfd ;};if _accd {_da .Printf (" \u0020 \u0025\u0032\u0064\u0020\u002d\u0020\u0025\u0032d\u0020\u2192\u0020\u0025s\n",_caaef ,_acbf ,_cfecg );};_caaef =_acbf ;_eeab [_bbbd ][_cfecg .Llx ]=_cfecg ;};};_cdga :=make (map[float64 ]map[float64 ]gridTile ,_gedec );
_gbeaa :=make (map[float64 ]map[float64 ]struct{},_gedec );for _edeb :=_gedec -1;_edeb >=0;_edeb --{_fbege :=_ggcbf [_edeb *_geba ].Lly ;_cdga [_fbege ]=make (map[float64 ]gridTile ,_geba );_gbeaa [_fbege ]=make (map[float64 ]struct{},_geba );};if _accd {_ga .Log .Info ("\u0072u\u006c\u0069n\u0067\u004c\u0069s\u0074\u002e\u0061\u0073\u0054\u0069\u006ci\u006e\u0067\u003a\u0020\u0063\u006fa\u006c\u0065\u0073\u0063\u0065\u0020\u0076\u0065\u0072\u0074\u0069c\u0061\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_ecgd );
};for _cfggg :=_gedec -1;_cfggg >=0;_cfggg --{_cbcda :=_ggcbf [_cfggg *_geba ].Lly ;_fegeb :=_eeab [_cfggg ];if _accd {_da .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_cfggg );};for _ ,_affd :=range _dfagg (_fegeb ){if _ ,_deced :=_gbeaa [_cbcda ][_affd ];
_deced {continue ;};_fceed :=_fegeb [_affd ];if _accd {_da .Printf (" \u0020\u0020\u0020\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_fceed .String ());};for _afeb :=_cfggg -1;_afeb >=0;_afeb --{if _fceed ._febea {break ;};_cega :=_eeab [_afeb ];_caebb ,_effga :=_cega [_affd ];
if !_effga {break ;};if _caebb .Urx !=_fceed .Urx {break ;};_fceed ._febea =_caebb ._febea ;_fceed .Lly =_caebb .Lly ;if _accd {_da .Printf ("\u0020\u0020\u0020\u0020  \u0020\u0020\u0076\u003d\u0025\u0073\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_caebb .String (),_fceed .String ());
};_gbeaa [_caebb .Lly ][_caebb .Llx ]=struct{}{};};if _cfggg ==0{_fceed ._febea =true ;};if _fceed .complete (){_cdga [_cbcda ][_affd ]=_fceed ;};};};_fcdb :=gridTiling {PdfRectangle :_ecgd ,_aecge :_afgd (_cdga ),_bfefe :_abee (_cdga ),_daaee :_cdga };
_fcdb .log ("\u0043r\u0065\u0061\u0074\u0065\u0064");return _fcdb ;};func _cgdag (_dcedg map[int ][]float64 )string {_edgdg :=_fdefff (_dcedg );_becgg :=make ([]string ,len (_dcedg ));for _ebfbea ,_dfbdbc :=range _edgdg {_becgg [_ebfbea ]=_da .Sprintf ("\u0025\u0064\u003a\u0020\u0025\u002e\u0032\u0066",_dfbdbc ,_dcedg [_dfbdbc ]);
};return _da .Sprintf ("\u007b\u0025\u0073\u007d",_d .Join (_becgg ,"\u002c\u0020"));};

// PageTextOptions holds various options available in extraction process.
type PageTextOptions struct{_bfdf bool ;_bbgb ExtractionMode ;};func _abb (_aec []Font ,_db string )bool {for _ ,_gggcf :=range _aec {if _gggcf .FontName ==_db {return true ;};};return false ;};

// ExtractPageImages returns the image contents of the page extractor, including data
// and position, size information for each image.
// A set of options to control page image extraction can be passed in. The options
// parameter can be nil for the default options. By default, inline stencil masks
// are not extracted.
func (_acd *Extractor )ExtractPageImages (options *ImageExtractOptions )(*PageImages ,error ){_agc :=&imageExtractContext {_fdgf :options };_gad :=_agc .extractContentStreamImages (_acd ._eee ,_acd ._deb );if _gad !=nil {return nil ,_gad ;};return &PageImages {Images :_agc ._fgd },nil ;
};func (_efbb paraList )findTextTables ()[]*textTable {var _dgbc []*textTable ;for _ ,_bfda :=range _efbb {if _bfda .taken ()||_bfda .Width ()==0{continue ;};_fgbe :=_bfda .isAtom ();if _fgbe ==nil {continue ;};_fgbe .growTable ();if _fgbe ._eceag *_fgbe ._bgfd < _gbadc {continue ;
};_fgbe .markCells ();_fgbe .log ("\u0067\u0072\u006fw\u006e");_dgbc =append (_dgbc ,_fgbe );};return _dgbc ;};func (_gaeb *textPara )getListLines ()[]*textLine {var _cgcba []*textLine ;_efbe :=_cbde (_gaeb ._dbed );for _ ,_edge :=range _gaeb ._dbed {_eagc :=_edge ._bbgge [0]._egcfd [0];
if _ebdg (_eagc ){_cgcba =append (_cgcba ,_edge );};};_cgcba =append (_cgcba ,_efbe ...);return _cgcba ;};func _bdbe (_gede *wordBag ,_befb *textWord ,_gfdc float64 )bool {return _befb .Llx < _gede .Urx +_gfdc &&_gede .Llx -_gfdc < _befb .Urx ;};func (_cabe paraList )computeEBBoxes (){if _bgdf {_ga .Log .Info ("\u0063o\u006dp\u0075\u0074\u0065\u0045\u0042\u0042\u006f\u0078\u0065\u0073\u003a");
};for _ ,_ceg :=range _cabe {_ceg ._gacea =_ceg .PdfRectangle ;};_ebfa :=_cabe .yNeighbours (0);for _cacbc ,_cbeg :=range _cabe {_afaa :=_cbeg ._gacea ;_ecegba ,_fcce :=-1.0e9,+1.0e9;for _ ,_afdd :=range _ebfa [_cbeg ]{_bgbcd :=_cabe [_afdd ]._gacea ;if _bgbcd .Urx < _afaa .Llx {_ecegba =_fbg .Max (_ecegba ,_bgbcd .Urx );
}else if _afaa .Urx < _bgbcd .Llx {_fcce =_fbg .Min (_fcce ,_bgbcd .Llx );};};for _aaacf ,_ggeab :=range _cabe {_edfg :=_ggeab ._gacea ;if _cacbc ==_aaacf ||_edfg .Ury > _afaa .Lly {continue ;};if _ecegba <=_edfg .Llx &&_edfg .Llx < _afaa .Llx {_afaa .Llx =_edfg .Llx ;
}else if _edfg .Urx <=_fcce &&_afaa .Urx < _edfg .Urx {_afaa .Urx =_edfg .Urx ;};};if _bgdf {_da .Printf ("\u0025\u0034\u0064\u003a %\u0036\u002e\u0032\u0066\u2192\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0071\u000a",_cacbc ,_cbeg ._gacea ,_afaa ,_cgeg (_cbeg .text (),50));
};_cbeg ._gacea =_afaa ;};if _agge {for _ ,_eecbf :=range _cabe {_eecbf .PdfRectangle =_eecbf ._gacea ;};};};func _feac (_cbgef func (*wordBag ,*textWord ,float64 )bool ,_edbg float64 )func (*wordBag ,*textWord )bool {return func (_fgdc *wordBag ,_abae *textWord )bool {return _cbgef (_fgdc ,_abae ,_edbg )};
};

// ExtractStrokePaths processes and extracts all stroke paths in content streams.
func (_bbgg *Extractor )ExtractStrokePaths ()([]StrokePath ,error ){_ccfe ,_ ,_ ,_fab :=_bbgg .ExtractPageText ();if _fab !=nil {return nil ,_fab ;};_fdggd :=[]StrokePath {};for _ ,_fag :=range _ccfe ._ggd {_beae :=StrokePath {Color :_fag .Color ,Points :[]_daa .Point {}};
for _ ,_cgce :=range _fag ._cbcg {_beae .Points =append (_beae .Points ,_cgce ._eacf ...);};_fdggd =append (_fdggd ,_beae );};return _fdggd ,nil ;};var _eeef string ="\u0028\u003f\u0069\u0029\u005e\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028?\u003a\u0044\u007cM\u0029\u007c\u0044\u003f\u0043{\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028\u003f\u003a\u004c\u007c\u0043\u0029\u007cL\u003f\u0058\u007b\u0030\u002c\u0033}\u0029\u0028\u0049\u0028\u003f\u003a\u0056\u007c\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u005c\u0029\u007c\u005c\u002e\u0029\u007c\u005e\u005c\u0028\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028\u003f\u003aD\u007cM\u0029\u007c\u0044\u003f\u0043\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028?\u003a\u004c\u007c\u0043\u0029\u007c\u004c?\u0058\u007b0\u002c\u0033\u007d\u0029(\u0049\u0028\u003f\u003a\u0056|\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u005c\u0029";
func _gcd (_cecc *_agg .PdfObjectString ,_dbf string ,_cgfc *_bd .PdfFont ){_fcb ,_dadg :=_cgfc .StringToCharcodeBytes (_dbf );if _dadg !=0{_ga .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0073\u006fm\u0065\u0020\u0072un\u0065\u0073\u0020\u0063\u006f\u0075l\u0064\u0020\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u0065\u006e\u0063\u006f\u0064\u0065d\u002e\u000a\u0009\u0025\u0073\u0020\u002d\u003e \u0025\u0076",_dbf ,_fcb );
};_bacb :=_agg .MakeStringFromBytes (_fcb );*_cecc =*_bacb ;};type textWord struct{_bd .PdfRectangle ;_bfbd float64 ;_egcfd string ;_dcgd []*textMark ;_babfe float64 ;_fgeb bool ;};func _bgaf (_gfbg _agg .PdfObject ,_gfebf _fd .Color )(_dc .Image ,error ){_cgfea ,_gedg :=_agg .GetStream (_gfbg );
if !_gedg {return nil ,nil ;};_feaf ,_fbbgfb :=_bd .NewXObjectImageFromStream (_cgfea );if _fbbgfb !=nil {return nil ,_fbbgfb ;};_bgccd ,_fbbgfb :=_feaf .ToImage ();if _fbbgfb !=nil {return nil ,_fbbgfb ;};return _fbfgcc (_bgccd ,_gfebf ),nil ;};func (_acegd *textObject )newTextMark (_cafc string ,_aege _daa .Matrix ,_dbda _daa .Point ,_egccb float64 ,_aeeda *_bd .PdfFont ,_dbfcg float64 ,_bcba ,_eadd _fd .Color ,_gdfae _agg .PdfObject ,_ffeg []string ,_ccdae int ,_cfgge int )(textMark ,bool ){_gafg :=_aege .Angle ();
_ecfdb :=_adebc (_gafg ,_cgcbd );var _bedf float64 ;if _ecfdb %180!=90{_bedf =_aege .ScalingFactorY ();}else {_bedf =_aege .ScalingFactorX ();};_bfgbd :=_afba (_aege );_ddbf :=_bd .PdfRectangle {Llx :_bfgbd .X ,Lly :_bfgbd .Y ,Urx :_dbda .X ,Ury :_dbda .Y };
switch _ecfdb %360{case 90:_ddbf .Urx -=_bedf ;case 180:_ddbf .Ury -=_bedf ;case 270:_ddbf .Urx +=_bedf ;case 0:_ddbf .Ury +=_bedf ;default:_ecfdb =0;_ddbf .Ury +=_bedf ;};if _ddbf .Llx > _ddbf .Urx {_ddbf .Llx ,_ddbf .Urx =_ddbf .Urx ,_ddbf .Llx ;};if _ddbf .Lly > _ddbf .Ury {_ddbf .Lly ,_ddbf .Ury =_ddbf .Ury ,_ddbf .Lly ;
};_edab :=true ;if _acegd ._fggde ._cdb .Width ()> 0{_fbcca ,_efbg :=_cbce (_ddbf ,_acegd ._fggde ._cdb );if !_efbg {_edab =false ;_ga .Log .Debug ("\u0054\u0065\u0078\u0074\u0020m\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069\u0064\u0065\u0020\u0070a\u0067\u0065\u002e\u0020\u0062\u0062\u006f\u0078\u003d\u0025\u0067\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u003d\u0025\u0067\u0020\u0074\u0065\u0078\u0074\u003d\u0025q",_ddbf ,_acegd ._fggde ._cdb ,_cafc );
};_ddbf =_fbcca ;};_efag :=_ddbf ;_fcfbg :=_acegd ._fggde ._cdb ;switch _ecfdb %360{case 90:_fcfbg .Urx ,_fcfbg .Ury =_fcfbg .Ury ,_fcfbg .Urx ;_efag =_bd .PdfRectangle {Llx :_fcfbg .Urx -_ddbf .Ury ,Urx :_fcfbg .Urx -_ddbf .Lly ,Lly :_ddbf .Llx ,Ury :_ddbf .Urx };
case 180:_efag =_bd .PdfRectangle {Llx :_fcfbg .Urx -_ddbf .Llx ,Urx :_fcfbg .Urx -_ddbf .Urx ,Lly :_fcfbg .Ury -_ddbf .Lly ,Ury :_fcfbg .Ury -_ddbf .Ury };case 270:_fcfbg .Urx ,_fcfbg .Ury =_fcfbg .Ury ,_fcfbg .Urx ;_efag =_bd .PdfRectangle {Llx :_ddbf .Ury ,Urx :_ddbf .Lly ,Lly :_fcfbg .Ury -_ddbf .Llx ,Ury :_fcfbg .Ury -_ddbf .Urx };
};if _efag .Llx > _efag .Urx {_efag .Llx ,_efag .Urx =_efag .Urx ,_efag .Llx ;};if _efag .Lly > _efag .Ury {_efag .Lly ,_efag .Ury =_efag .Ury ,_efag .Lly ;};_aggac :=textMark {_aaba :_cafc ,PdfRectangle :_efag ,_ecgb :_ddbf ,_dadb :_aeeda ,_bafcb :_bedf ,_fbfb :_dbfcg ,_ddffc :_aege ,_ccdde :_dbda ,_bfa :_ecfdb ,_fbdb :_bcba ,_gfgf :_eadd ,_eebc :_gdfae ,_ddefb :_ffeg ,Th :_acegd ._ebd ._acbe ,Tw :_acegd ._ebd ._edaa ,_daef :_cfgge ,_acgce :_ccdae };
if _adab {_ga .Log .Info ("n\u0065\u0077\u0054\u0065\u0078\u0074M\u0061\u0072\u006b\u003a\u0020\u0073t\u0061\u0072\u0074\u003d\u0025\u002e\u0032f\u0020\u0065\u006e\u0064\u003d\u0025\u002e\u0032\u0066\u0020%\u0073",_bfgbd ,_dbda ,_aggac .String ());};return _aggac ,_edab ;
};func (_bgae rulingList )log (_gecbc string ){if !_ddcaf {return ;};_ga .Log .Info ("\u0023\u0023\u0023\u0020\u0025\u0031\u0030\u0073\u003a\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_gecbc ,_bgae .String ());for _baaf ,_caee :=range _bgae {_da .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_baaf ,_caee .String ());
};};

// String returns a description of `l`.
func (_cfcgd *textLine )String ()string {return _da .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_cfcgd ._gcdcg ,_cfcgd .PdfRectangle ,_cfcgd ._ddec ,_cfcgd .text ());
};func (_gfc *imageExtractContext )extractContentStreamImages (_dddb string ,_gbd *_bd .PdfPageResources )error {_afbd :=_fdd .NewContentStreamParser (_dddb );_agcd ,_fgdg :=_afbd .Parse ();if _fgdg !=nil {return _fgdg ;};if _gfc ._aadf ==nil {_gfc ._aadf =map[*_agg .PdfObjectStream ]*cachedImage {};
};if _gfc ._fdgf ==nil {_gfc ._fdgf =&ImageExtractOptions {};};_ecg :=_fdd .NewContentStreamProcessor (*_agcd );_ecg .AddHandler (_fdd .HandlerConditionEnumAllOperands ,"",_gfc .processOperand );return _ecg .Process (_gbd );};type list struct{_eaafd []*textLine ;
_egfbb string ;_aece []*list ;_ffc string ;};var (_afb =_cg .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");_dcf =_cg .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072");
);func (_cgdbc paraList )findGridTables (_dbcga []gridTiling )[]*textTable {if _bbae {_ga .Log .Info ("\u0066i\u006e\u0064\u0047\u0072\u0069\u0064\u0054\u0061\u0062\u006c\u0065s\u003a\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073",len (_cgdbc ));
for _aebf ,_aaed :=range _cgdbc {_da .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_aebf ,_aaed );};};var _aced []*textTable ;for _bdge ,_bbgac :=range _dbcga {_ddad ,_fedgf :=_cgdbc .findTableGrid (_bbgac );if _ddad !=nil {_ddad .log (_da .Sprintf ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0057\u0069\u0074\u0068\u0047\u0072\u0069\u0064\u0073\u003a\u0020%\u0064",_bdge ));
_aced =append (_aced ,_ddad );_ddad .markCells ();};for _dgddd :=range _fedgf {_dgddd ._effb =true ;};};if _bbae {_ga .Log .Info ("\u0066i\u006e\u0064\u0047\u0072i\u0064\u0054\u0061\u0062\u006ce\u0073:\u0020%\u0064\u0020\u0074\u0061\u0062\u006c\u0065s",len (_aced ));
};return _aced ;};func _fdfd (_dada ,_feagf *textPara )bool {if _dada ._cebf ||_feagf ._cebf {return true ;};return _gaebc (_dada .depth ()-_feagf .depth ());};type textObject struct{_fggde *Extractor ;_ccfc *_bd .PdfPageResources ;_bgbd _fdd .GraphicsState ;
_ebd *textState ;_fccc *stateStack ;_dgga _daa .Matrix ;_egfd _daa .Matrix ;_ccgd []*textMark ;_gbfgb bool ;};func (_aaad *wordBag )firstReadingIndex (_acec int )int {_efb :=_aaad .firstWord (_acec )._babfe ;_aeed :=float64 (_acec +1)*_eace ;_eadb :=_aeed +_bcdf *_efb ;
_fdeb :=_acec ;for _ ,_afcf :=range _aaad .depthBand (_aeed ,_eadb ){if _efe (_aaad .firstWord (_afcf ),_aaad .firstWord (_fdeb ))< 0{_fdeb =_afcf ;};};return _fdeb ;};

// String returns a description of `v`.
func (_cfbdg *ruling )String ()string {if _cfbdg ._decfc ==_feee {return "\u004e\u004f\u0054\u0020\u0052\u0055\u004c\u0049\u004e\u0047";};_dbagb ,_bgcaf :="\u0078","\u0079";if _cfbdg ._decfc ==_gcff {_dbagb ,_bgcaf ="\u0079","\u0078";};_dfdga :="";if _cfbdg ._dgee !=0.0{_dfdga =_da .Sprintf (" \u0077\u0069\u0064\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_cfbdg ._dgee );
};return _da .Sprintf ("\u0025\u00310\u0073\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0020\u0025\u0076\u0025\u0073",_cfbdg ._decfc ,_dbagb ,_cfbdg ._bbac ,_bgcaf ,_cfbdg ._gccd ,_cfbdg ._ggadf ,_cfbdg ._ggadf -_cfbdg ._gccd ,_cfbdg ._cfec ,_cfbdg .Color ,_dfdga );
};type subpath struct{_eacf []_daa .Point ;_cdfbd bool ;};

// List returns all the list objects detected on the page.
// It detects all the bullet point Lists from a given pdf page and builds a slice of bullet list objects.
// A given bullet list object has a tree structure.
// Each bullet point list is extracted with the text content it contains and all the sub lists found under it as children in the tree.
// The rest content of the pdf is ignored and only text in the bullet point lists are extracted.
// The list extraction is done in two ways.
// 1. If the document is tagged then the lists are extracted using the tags provided in the document.
// 2. Otherwise the bullet lists are extracted from the raw text using regex matching.
// By default the document tag is used if available.
// However this can be disabled using `DisableDocumentTags` in the `Options` object.
// Sometimes disabling document tags option might give a better bullet list extraction if the document was tagged incorrectly.
//
//	    options := &Options{
//		     DisableDocumentTags: false, // this means use document tag if available
//	    }
//	    ex, err := NewWithOptions(page, options)
//	    // handle error
//	    pageText, _, _, err := ex.ExtractPageText()
//	    // handle error
//	    lists := pageText.List()
//	    txt := lists.Text()
func (_afgg PageText )List ()lists {_fdef :=!_afgg ._baccf ._bfdf ;_ddag :=_afgg .getParagraphs ();_affa :=_ddag .list ();if _afgg ._egaa !=nil &&_fdef {_ebggb :=_aade (&_ddag );if len (_afgg ._egaa .K )==0{_ga .Log .Debug ("\u004c\u0069\u0073\u0074\u003a\u0020\u0073t\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e'\u0074\u0020\u0068\u0061\u0076e\u0020\u0061\u006e\u0079\u0020\u0063\u006f\u006e\u0074e\u006e\u0074\u002c\u0020\u0075\u0073\u0069\u006e\u0067\u0020\u0074\u0065\u0078\u0074\u0020\u006d\u0061\u0074\u0063\u0068\u0069\u006e\u0067\u0020\u006d\u0065\u0074\u0068\u006f\u0064\u0020\u0069\u006e\u0073\u0074\u0065\u0061\u0064\u002e");
return _affa ;};_affa =_adee (_afgg ._egaa ,_ebggb ,_afgg ._fga );};return _affa ;};func (_efbgg rulingList )tidied (_dadbd string )rulingList {_cfbe :=_efbgg .removeDuplicates ();_cfbe .log ("\u0075n\u0069\u0071\u0075\u0065\u0073");_edbcd :=_cfbe .snapToGroups ();
if _edbcd ==nil {return nil ;};_edbcd .sort ();if _ddcaf {_ga .Log .Info ("\u0074\u0069\u0064i\u0065\u0064\u003a\u0020\u0025\u0071\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u0075\u006e\u0069\u0071\u0075\u0065\u0073\u003d\u0025\u0064\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0064\u003d\u0025\u0064",_dadbd ,len (_efbgg ),len (_cfbe ),len (_edbcd ));
};_edbcd .log ("\u0063o\u0061\u006c\u0065\u0073\u0063\u0065d");return _edbcd ;};func _dag (_bace []*TextMarkArray ,_fgbg ,_bcgb string )(string ,error ){_cde :=0;for _ ,_fda :=range _bace {_acff :=_fda ._aagc [0].DirectObject ;if _acff ==nil {continue ;
};_deae :=_acff .String ();if len (_deae )> 1{_ecee :=_cef (_fda ,&_fgbg ,&_cde ,_bcgb );if _ecee !=nil {return _fgbg ,_ecee ;};}else if len (_deae )==1{_bdg :=_cgc (_fda ,&_fgbg ,&_cde ,_bcgb );if _bdg !=nil {return _fgbg ,_bdg ;};};};return _fgbg ,nil ;
};func (_adgeg *wordBag )absorb (_bede *wordBag ){_gbgf :=_bede .makeRemovals ();for _ddde ,_ebaa :=range _bede ._defc {for _ ,_affg :=range _ebaa {_adgeg .pullWord (_affg ,_ddde ,_gbgf );};};_bede .applyRemovals (_gbgf );};

// String returns a description of `k`.
func (_gfee markKind )String ()string {_aeaf ,_cfdd :=_gaaaf [_gfee ];if !_cfdd {return _da .Sprintf ("\u004e\u006f\u0074\u0020\u0061\u0020\u006d\u0061\u0072k\u003a\u0020\u0025\u0064",_gfee );};return _aeaf ;};func (_baaceb paraList )yNeighbours (_fefed float64 )map[*textPara ][]int {_ffce :=make ([]event ,2*len (_baaceb ));
if _fefed ==0{for _facc ,_agcb :=range _baaceb {_ffce [2*_facc ]=event {_agcb .Lly ,true ,_facc };_ffce [2*_facc +1]=event {_agcb .Ury ,false ,_facc };};}else {for _gacgd ,_acebf :=range _baaceb {_ffce [2*_gacgd ]=event {_acebf .Lly -_fefed *_acebf .fontsize (),true ,_gacgd };
_ffce [2*_gacgd +1]=event {_acebf .Ury +_fefed *_acebf .fontsize (),false ,_gacgd };};};return _baaceb .eventNeighbours (_ffce );};func (_fbed *subpath )removeDuplicates (){if len (_fbed ._eacf )==0{return ;};_dcbd :=[]_daa .Point {_fbed ._eacf [0]};for _ ,_egdaf :=range _fbed ._eacf [1:]{if !_egeag (_egdaf ,_dcbd [len (_dcbd )-1]){_dcbd =append (_dcbd ,_egdaf );
};};_fbed ._eacf =_dcbd ;};func _ccaa (_bgdec ,_fddg bounded )float64 {return _fcfef (_bgdec )-_fcfef (_fddg )};

// Elements returns the TextMarks in `ma`.
func (_aaac *TextMarkArray )Elements ()[]TextMark {return _aaac ._aagc };func _cef (_beg *TextMarkArray ,_fdec *string ,_aggd *int ,_egd string )error {_bcdd :=_beg .Elements ()[0].DirectObject ;_ddb ,_ffd :=_agg .GetString (_bcdd );if !_ffd {return _da .Errorf ("\u0075n\u0061\u0062l\u0065\u0020\u0074\u006f \u0067\u0065\u0074 \u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0042\u0079te\u0073\u0020\u0066r\u006f\u006d \u0064\u0069\u0072\u0065\u0063\u0074O\u0062\u006ae\u0063\u0074");
};_ebgd :=_afg (_beg );_fgbc ,_ffd :=_agg .GetStringBytes (_bcdd );if !_ffd {return _agg .ErrTypeError ;};_gce :=_beg .Elements ()[0].Font ;_bga :=_gbbcd (_fgbc ,_gce );_bcge :="";_dgab :=*_fdec ;if len (_dgab )> *_aggd {_bcge =_dgab [*_aggd :*_aggd +len (_ebgd )];
}else if *_aggd ==len (_egd )-1&&len (_dgab )> *_aggd {_bcge =_dgab [*_aggd :];};_fgda :="";_adcf :=_d .Split (_bga ,"\u0020");_fbgb :=_adcf [len (_adcf )-1];if _fbgb ==_ebgd &&*_aggd ==0{_fgec :=_d .LastIndex (_bga ,_ebgd );_fgda =_dbgg (_bga ,_fgec ,len (_ebgd )+_fgec ,_bcge );
}else if *_aggd ==len (_egd )-1&&len (_dgab )> *_aggd {_fgda =_d .ReplaceAll (_bga ,_ebgd ,_dgab [*_aggd :]);}else {_fgda =_d .Replace (_bga ,_ebgd ,_bcge ,1);};_gcd (_ddb ,_fgda ,_gce );*_aggd +=len (_ebgd );return nil ;};func _ccg (_ebge []int ,_cga *TextMarkArray ,_cfgd string )(*TextMarkArray ,Box ,error ){_fbea :=Box {};
_gfdd :=_ebge [0];_fea :=_ebge [1];_cfde :=len (_cfgd )-len (_d .TrimLeft (_cfgd ,"\u0020"));_afce :=len (_cfgd )-len (_d .TrimRight (_cfgd ,"\u0020\u000a"));_gfdd =_gfdd +_cfde ;_fea =_fea -_afce ;_feeg ,_fbeg :=_cga .RangeOffset (_gfdd ,_fea );if _fbeg !=nil {return nil ,_fbea ,_fbeg ;
};_dgd ,_cace :=_feeg .BBox ();if !_cace {return nil ,_fbea ,_da .Errorf ("\u0073\u0070\u0061\u006e\u004d\u0061\u0072\u006bs\u002e\u0042\u0042ox\u0020\u0068\u0061\u0073\u0020\u006eo\u0020\u0062\u006f\u0075\u006e\u0064\u0069\u006e\u0067\u0020\u0062\u006f\u0078\u002e\u0020s\u0070\u0061\u006e\u004d\u0061\u0072\u006b\u0073=\u0025\u0073",_feeg );
};_fbea =Box {BBox :_dgd };return _feeg ,_fbea ,nil ;};func (_cdaf *shapesState )addPoint (_gdgd ,_afac float64 ){_ddfg :=_cdaf .establishSubpath ();_adccf :=_cdaf .devicePoint (_gdgd ,_afac );if _ddfg ==nil {_cdaf ._abbb =true ;_cdaf ._cfcc =_adccf ;}else {_ddfg .add (_adccf );
};};func (_fega *textObject )showTextAdjusted (_adda *_agg .PdfObjectArray ,_ebefe int ,_ced string )error {_ggced :=false ;for _ ,_dgcd :=range _adda .Elements (){switch _dgcd .(type ){case *_agg .PdfObjectFloat ,*_agg .PdfObjectInteger :_aebe ,_geeg :=_agg .GetNumberAsFloat (_dgcd );
if _geeg !=nil {_ga .Log .Debug ("\u0045\u0052\u0052\u004fR\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078t\u0041\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0042\u0061\u0064\u0020\u006e\u0075\u006d\u0065r\u0069\u0063\u0061\u006c\u0020a\u0072\u0067\u002e\u0020\u006f\u003d\u0025\u0073\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_dgcd ,_adda );
return _geeg ;};_cacc ,_bfe :=-_aebe *0.001*_fega ._ebd ._abgb ,0.0;if _ggced {_bfe ,_cacc =_cacc ,_bfe ;};_cfaf :=_adeb (_daa .Point {X :_cacc ,Y :_bfe });_fega ._dgga .Concat (_cfaf );case *_agg .PdfObjectString :_daga :=_agg .TraceToDirectObject (_dgcd );
_ddce ,_feega :=_agg .GetStringBytes (_daga );if !_feega {_ga .Log .Trace ("s\u0068\u006f\u0077\u0054\u0065\u0078\u0074\u0041\u0064j\u0075\u0073\u0074\u0065\u0064\u003a\u0020Ba\u0064\u0020\u0073\u0074r\u0069\u006e\u0067\u0020\u0061\u0072\u0067\u002e\u0020o=\u0025\u0073 \u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_dgcd ,_adda );
return _agg .ErrTypeError ;};_fega .renderText (_daga ,_ddce ,_ebefe ,_ced );default:_ga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078\u0074A\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0055\u006e\u0065\u0078p\u0065\u0063\u0074\u0065\u0064\u0020\u0074\u0079\u0070\u0065\u0020\u0028%T\u0029\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_dgcd ,_adda );
return _agg .ErrTypeError ;};};return nil ;};const (_bggad =true ;_fafef =true ;_geda =true ;_agge =false ;_fcbb =true ;_dabe =true ;_ebab =true ;_fgfa =true ;_dgda =false ;);

// ToTextMark returns the public view of `tm`.
func (_dggg *textMark )ToTextMark ()TextMark {return TextMark {Text :_dggg ._aaba ,Original :_dggg ._cbgcc ,BBox :_dggg ._ecgb ,Font :_dggg ._dadb ,FontSize :_dggg ._bafcb ,FillColor :_dggg ._fbdb ,StrokeColor :_dggg ._gfgf ,Orientation :_dggg ._bfa ,DirectObject :_dggg ._eebc ,ObjString :_dggg ._ddefb ,Tw :_dggg .Tw ,Th :_dggg .Th ,Tc :_dggg ._fbfb ,Index :_dggg ._acgce };
};func (_dafcg *textTable )put (_feffg ,_ccfea int ,_afbf *textPara ){_dafcg ._aegad [_adebf (_feffg ,_ccfea )]=_afbf ;};func (_fcde paraList )toTextMarks ()[]TextMark {_aead :=0;var _faeb []TextMark ;for _fgad ,_accdb :=range _fcde {if _accdb ._cebf {continue ;
};_aecc :=_accdb .toTextMarks (&_aead );_faeb =append (_faeb ,_aecc ...);if _fgad !=len (_fcde )-1{if _fdfd (_accdb ,_fcde [_fgad +1]){_faeb =_gfbe (_faeb ,&_aead ,"\u0020");}else {_faeb =_gfbe (_faeb ,&_aead ,"\u000a");_faeb =_gfbe (_faeb ,&_aead ,"\u000a");
};};};_faeb =_gfbe (_faeb ,&_aead ,"\u000a");_faeb =_gfbe (_faeb ,&_aead ,"\u000a");return _faeb ;};var _fgca =_ab .MustCompile ("\u005e\u005c\u0073\u002a\u0028\u005c\u0064\u002b\u005c\u002e\u003f|\u005b\u0049\u0069\u0076\u005d\u002b\u0029\u005c\u0073\u002a\\\u0029\u003f\u0024");
func (_daaad *textTable )compositeColCorridors ()map[int ][]float64 {_bdec :=make (map[int ][]float64 ,_daaad ._eceag );if _bbae {_ga .Log .Info ("\u0063\u006f\u006d\u0070o\u0073\u0069\u0074\u0065\u0043\u006f\u006c\u0043\u006f\u0072r\u0069d\u006f\u0072\u0073\u003a\u0020\u0077\u003d%\u0064\u0020",_daaad ._eceag );
};for _gacfc :=0;_gacfc < _daaad ._eceag ;_gacfc ++{_bdec [_gacfc ]=nil ;};return _bdec ;};func (_ffggg rulingList )merge ()*ruling {_dgbaf :=_ffggg [0]._bbac ;_agcc :=_ffggg [0]._gccd ;_dgcfa :=_ffggg [0]._ggadf ;for _ ,_ggca :=range _ffggg [1:]{_dgbaf +=_ggca ._bbac ;
if _ggca ._gccd < _agcc {_agcc =_ggca ._gccd ;};if _ggca ._ggadf > _dgcfa {_dgcfa =_ggca ._ggadf ;};};_addfc :=&ruling {_decfc :_ffggg [0]._decfc ,_cfec :_ffggg [0]._cfec ,Color :_ffggg [0].Color ,_bbac :_dgbaf /float64 (len (_ffggg )),_gccd :_agcc ,_ggadf :_dgcfa };
if _gfbd {_ga .Log .Info ("\u006de\u0072g\u0065\u003a\u0020\u0025\u0032d\u0020\u0076e\u0063\u0073\u0020\u0025\u0073",len (_ffggg ),_addfc );for _edcaf ,_eefgd :=range _ffggg {_da .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_edcaf ,_eefgd );
};};return _addfc ;};func _ebagb (_bfag []pathSection )rulingList {_caeef (_bfag );if _ddcaf {_ga .Log .Info ("\u006d\u0061k\u0065\u0053\u0074\u0072\u006f\u006b\u0065\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0064\u0020\u0073\u0074\u0072ok\u0065\u0073",len (_bfag ));
};var _egdc rulingList ;for _ ,_ebfbc :=range _bfag {for _ ,_bdbc :=range _ebfbc ._cbcg {if len (_bdbc ._eacf )< 2{continue ;};_dbccg :=_bdbc ._eacf [0];for _ ,_cbdb :=range _bdbc ._eacf [1:]{if _bgge ,_cdeg :=_aaab (_dbccg ,_cbdb ,_ebfbc .Color );_cdeg {_egdc =append (_egdc ,_bgge );
};_dbccg =_cbdb ;};};};if _ddcaf {_ga .Log .Info ("m\u0061\u006b\u0065\u0053tr\u006fk\u0065\u0052\u0075\u006c\u0069n\u0067\u0073\u003a\u0020\u0025\u0073",_egdc );};return _egdc ;};

// NewWithOptions an Extractor instance for extracting content from the input PDF page with options.
func NewWithOptions (page *_bd .PdfPage ,options *Options )(*Extractor ,error ){const _eg ="\u0065x\u0074\u0072\u0061\u0063\u0074\u006f\u0072\u002e\u004e\u0065\u0077W\u0069\u0074\u0068\u004f\u0070\u0074\u0069\u006f\u006e\u0073";_dec ,_aea :=page .GetAllContentStreams ();
if _aea !=nil {return nil ,_aea ;};var _dgb *_bd .StructTreeRoot ;_ec ,_ege :=page .GetStructTreeRoot ();if !_ege {_ga .Log .Debug ("T\u0068\u0065\u0020\u0070\u0064\u0066\u0020\u0064\u006f\u0063\u0075\u006d\u0065\u006e\u0074\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0074\u0061\u0067g\u0065d\u002e\u0020\u0053\u0074r\u0075\u0063t\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e\u0027\u0074\u0020\u0065\u0078\u0069\u0073\u0074\u002e");
}else {_dgb ,_aea =_bd .NewStructTreeRootFromPdfObject (*_ec );if _aea !=nil {return nil ,_da .Errorf ("\u0065\u0072\u0072or\u0020\u006c\u006f\u0061\u0064\u0069\u006e\u0067\u0020s\u0074r\u0075c\u0074 \u0074\u0072\u0065\u0065\u0020\u0072\u006f\u006f\u0074\u003a\u0020\u0025\u0076",_aea );
};};_cgg :=page .GetContainingPdfObject ();_aad ,_aea :=page .GetMediaBox ();if _aea !=nil {return nil ,_da .Errorf ("\u0065\u0078\u0074r\u0061\u0063\u0074\u006fr\u0020\u0072\u0065\u0071\u0075\u0069\u0072e\u0073\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u002e\u0020\u0025\u0076",_aea );
};_ddg :=&Extractor {_eee :_dec ,_deb :page .Resources ,_cdb :*_aad ,_adg :page .CropBox ,_gac :page .GetStructParentsKey (),_ada :map[string ]fontEntry {},_cac :map[string ]textResult {},_cfc :map[string ]textResult {},_gbc :options ,_caaf :_dgb ,_cfcf :_cgg };
if _ddg ._cdb .Llx > _ddg ._cdb .Urx {_ga .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0058\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_ddg ._cdb );
_ddg ._cdb .Llx ,_ddg ._cdb .Urx =_ddg ._cdb .Urx ,_ddg ._cdb .Llx ;};if _ddg ._cdb .Lly > _ddg ._cdb .Ury {_ga .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0059\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_ddg ._cdb );
_ddg ._cdb .Lly ,_ddg ._cdb .Ury =_ddg ._cdb .Ury ,_ddg ._cdb .Lly ;};if _ddg ._gbc !=nil {if _ddg ._gbc .IncludeAnnotations {_ddg ._ebf ,_aea =page .GetAnnotations ();if _aea !=nil {_ga .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0067\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0061\u006e\u006e\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0073: \u0025\u0076",_aea );
};};};_cgd .TrackUse (_eg );return _ddg ,nil ;};func (_gaec *ruling )alignsPrimary (_dcfe *ruling )bool {return _gaec ._decfc ==_dcfe ._decfc &&_fbg .Abs (_gaec ._bbac -_dcfe ._bbac )< _dffe *0.5;};func (_abbc paraList )log (_efce string ){if !_aada {return ;
};_ga .Log .Info ("%\u0038\u0073\u003a\u0020\u0025\u0064 \u0070\u0061\u0072\u0061\u0073\u0020=\u003d\u003d\u003d\u003d\u003d\u003d\u002d-\u002d\u002d\u002d\u002d\u002d\u003d\u003d\u003d\u003d\u003d=\u003d",_efce ,len (_abbc ));for _bbeaa ,_fbgc :=range _abbc {if _fbgc ==nil {continue ;
};_gfffd :=_fbgc .text ();_geab :="\u0020\u0020";if _fbgc ._deed !=nil {_geab =_da .Sprintf ("\u005b%\u0064\u0078\u0025\u0064\u005d",_fbgc ._deed ._eceag ,_fbgc ._deed ._bgfd );};_da .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0025s\u0020\u0025\u0071\u000a",_bbeaa ,_fbgc .PdfRectangle ,_geab ,_cgeg (_gfffd ,50));
};};func (_fddc *wordBag )empty (_abfd int )bool {_ ,_edgbd :=_fddc ._defc [_abfd ];return !_edgbd };

// BidiText represents a bidi text organized in its visual order
// with base direction of the text.
type BidiText struct{_gc string ;_aa string ;};func _dfagg (_fgege map[float64 ]gridTile )[]float64 {_afgc :=make ([]float64 ,0,len (_fgege ));for _aadae :=range _fgege {_afgc =append (_afgc ,_aadae );};_gf .Float64s (_afgc );return _afgc ;};func _afgd (_dgfa map[float64 ]map[float64 ]gridTile )[]float64 {_dfae :=make ([]float64 ,0,len (_dgfa ));
_dcfae :=make (map[float64 ]struct{},len (_dgfa ));for _ ,_eede :=range _dgfa {for _gfdec :=range _eede {if _ ,_egaf :=_dcfae [_gfdec ];_egaf {continue ;};_dfae =append (_dfae ,_gfdec );_dcfae [_gfdec ]=struct{}{};};};_gf .Float64s (_dfae );return _dfae ;
};func (_ggeb *textTable )log (_addb string ){if !_bbae {return ;};_ga .Log .Info ("~\u007e\u007e\u0020\u0025\u0073\u003a \u0025\u0064\u0020\u0078\u0020\u0025d\u0020\u0067\u0072\u0069\u0064\u003d\u0025t\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0025\u0036\u002e2\u0066",_addb ,_ggeb ._eceag ,_ggeb ._bgfd ,_ggeb ._dbdag ,_ggeb .PdfRectangle );
for _ffcfe :=0;_ffcfe < _ggeb ._bgfd ;_ffcfe ++{for _bdfcg :=0;_bdfcg < _ggeb ._eceag ;_bdfcg ++{_ddfda :=_ggeb .get (_bdfcg ,_ffcfe );if _ddfda ==nil {continue ;};_da .Printf ("%\u0034\u0064\u0020\u00252d\u003a \u0025\u0036\u002e\u0032\u0066 \u0025\u0071\u0020\u0025\u0064\u000a",_bdfcg ,_ffcfe ,_ddfda .PdfRectangle ,_cgeg (_ddfda .text (),50),_f .RuneCountInString (_ddfda .text ()));
};};};func (_bcfgb rulingList )bbox ()_bd .PdfRectangle {var _gdcad _bd .PdfRectangle ;if len (_bcfgb )==0{_ga .Log .Error ("r\u0075\u006c\u0069\u006e\u0067\u004ci\u0073\u0074\u002e\u0062\u0062\u006f\u0078\u003a\u0020n\u006f\u0020\u0072u\u006ci\u006e\u0067\u0073");
return _bd .PdfRectangle {};};if _bcfgb [0]._decfc ==_gcff {_gdcad .Llx ,_gdcad .Urx =_bcfgb .secMinMax ();_gdcad .Lly ,_gdcad .Ury =_bcfgb .primMinMax ();}else {_gdcad .Llx ,_gdcad .Urx =_bcfgb .primMinMax ();_gdcad .Lly ,_gdcad .Ury =_bcfgb .secMinMax ();
};return _gdcad ;};func (_gabc *textTable )depth ()float64 {_gagaec :=1e10;for _bcfed :=0;_bcfed < _gabc ._eceag ;_bcfed ++{_gcgag :=_gabc .get (_bcfed ,0);if _gcgag ==nil ||_gcgag ._cebf {continue ;};_gagaec =_fbg .Min (_gagaec ,_gcgag .depth ());};return _gagaec ;
};func (_begb *textObject )moveText (_bdb ,_eed float64 ){_begb .moveLP (_bdb ,_eed )};func (_fcab *textLine )toTextMarks (_dedc *int )[]TextMark {var _edcfb []TextMark ;for _ ,_gcaa :=range _fcab ._bbgge {if _gcaa ._fgeb {_edcfb =_gfbe (_edcfb ,_dedc ,"\u0020");
};_fded :=_gcaa .toTextMarks (_dedc );_edcfb =append (_edcfb ,_fded ...);};return _edcfb ;};

// PageImages represents extracted images on a PDF page with spatial information:
// display position and size.
type PageImages struct{Images []ImageMark ;};var _eb =[]string {"\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u004f\u004e","\u004f\u004e","\u0041\u004c","\u0045\u0054","\u0045\u0054","\u0041\u004c","\u0043\u0053","\u0041\u004c","\u004f\u004e","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0045\u0054","\u0041\u004e","\u0041\u004e","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004e","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c"};
func _gfbe (_bcaf []TextMark ,_cdag *int ,_eecf string )[]TextMark {_cbcef :=_deab ;_cbcef .Text =_eecf ;return _cffd (_bcaf ,_cdag ,_cbcef );};

// String returns a description of `k`.
func (_ddbbb rulingKind )String ()string {_ddcg ,_bbfc :=_defd [_ddbbb ];if !_bbfc {return _da .Sprintf ("\u004e\u006ft\u0020\u0061\u0020r\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_ddbbb );};return _ddcg ;};func _fecb (_eacde []*textMark ,_bcbf _bd .PdfRectangle ,_degad bool )[]*textWord {var _egdbg []*textWord ;
var _dgbfd *textWord ;if _adab {_ga .Log .Info ("\u006d\u0061\u006beT\u0065\u0078\u0074\u0057\u006f\u0072\u0064\u0073\u003a\u0020\u0025\u0064\u0020\u006d\u0061\u0072\u006b\u0073",len (_eacde ));};_fgbeg :=func (){if _dgbfd !=nil {_dbccc :=_dgbfd .computeText ();
if !_eabcac (_dbccc ){_dgbfd ._egcfd =_dbccc ;_egdbg =append (_egdbg ,_dgbfd );if _adab {_ga .Log .Info ("\u0061\u0064\u0064Ne\u0077\u0057\u006f\u0072\u0064\u003a\u0020\u0025\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",len (_egdbg )-1,_dgbfd .String ());
for _fafgb ,_ccef :=range _dgbfd ._dcgd {_da .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fafgb ,_ccef .String ());};};};_dgbfd =nil ;};};for _ ,_eeadg :=range _eacde {if _geda &&_dgbfd !=nil &&len (_dgbfd ._dcgd )> 0{_eaage :=_dgbfd ._dcgd [len (_dgbfd ._dcgd )-1];
_acefd ,_gccccd :=_fgbb (_eeadg ._aaba );_gffg ,_gded :=_fgbb (_eaage ._aaba );if _gccccd &&!_gded &&_eaage .inDiacriticArea (_eeadg ){_dgbfd .addDiacritic (_acefd );continue ;};if _gded &&!_gccccd &&_eeadg .inDiacriticArea (_eaage ){_dgbfd ._dcgd =_dgbfd ._dcgd [:len (_dgbfd ._dcgd )-1];
_dgbfd .appendMark (_eeadg ,_bcbf );_dgbfd .addDiacritic (_gffg );continue ;};};_gadc :=_eabcac (_eeadg ._aaba );if _gadc {_fgbeg ();continue ;};if _dgbfd ==nil &&!_gadc {_dgbfd =_gacce ([]*textMark {_eeadg },_bcbf );continue ;};_edfea :=_dgbfd ._babfe ;
_dbecd :=_fbg .Abs (_cdbga (_bcbf ,_eeadg )-_dgbfd ._bfbd )/_edfea ;_bcfege :=_cccc (_eeadg ,_dgbfd )/_edfea ;_addfa :=_dgbfd .Width ()+_eeadg .Width ();if _degad &&_eeadg ._ddffc .Angle ()!=0.0{_fbga :=_fbg .Abs (_addfa *_fbg .Tan (_eeadg ._ddffc .Angle ())/_edfea );
if _dbecd > _fbga {_dbecd -=_fbga ;}else {_dbecd =0.0;};};if _bcfege >=_bcfb ||!(-_ffgb <=_bcfege &&_dbecd <=_egdd ){_fgbeg ();_dgbfd =_gacce ([]*textMark {_eeadg },_bcbf );continue ;};_dgbfd .appendMark (_eeadg ,_bcbf );};_fgbeg ();return _egdbg ;};func (_egfe *textObject )getStrokeColor ()_fd .Color {return _dcac (_egfe ._bgbd .ColorspaceStroking ,_egfe ._bgbd .ColorStroking );
};func (_egcee gridTile )complete ()bool {return _egcee .numBorders ()==4};func _fdefff (_cagbd map[int ][]float64 )[]int {_cfdc :=make ([]int ,len (_cagbd ));_dbce :=0;for _facgb :=range _cagbd {_cfdc [_dbce ]=_facgb ;_dbce ++;};_gf .Ints (_cfdc );return _cfdc ;
};type textState struct{_aebd float64 ;_edaa float64 ;_acbe float64 ;_bbec float64 ;_abgb float64 ;_gggeg RenderMode ;_ecgfg float64 ;_ecgfd *_bd .PdfFont ;_adca _bd .PdfRectangle ;_ecea int ;_abged int ;};func _eadg (_bgab _bd .PdfRectangle ,_gefg []*textLine )*textPara {return &textPara {PdfRectangle :_bgab ,_dbed :_gefg };
};func _cdcg (_bfdc []*textLine ,_ceag map[float64 ][]*textLine )[]*list {_dfgbb :=_bccd (_ceag );_dddag :=[]*list {};if len (_dfgbb )==0{return _dddag ;};_gcdb :=_dfgbb [0];_caca :=1;_fdce :=_ceag [_gcdb ];for _dfag ,_gceb :=range _fdce {var _cfafg float64 ;
_daca :=[]*list {};_eaad :=_gceb ._gcdcg ;_egdb :=-1.0;if _dfag < len (_fdce )-1{_egdb =_fdce [_dfag +1]._gcdcg ;};if _caca < len (_dfgbb ){_daca =_bebeg (_bfdc ,_ceag ,_dfgbb ,_caca ,_eaad ,_egdb );};_cfafg =_egdb ;if len (_daca )> 0{_gaddf :=_daca [0];
if len (_gaddf ._eaafd )> 0{_cfafg =_gaddf ._eaafd [0]._gcdcg ;};};_bddad :=[]*textLine {_gceb };_ageca :=_agab (_gceb ,_bfdc ,_eaad ,_cfafg );_bddad =append (_bddad ,_ageca ...);_bbff :=_eef (_bddad ,"\u0062\u0075\u006c\u006c\u0065\u0074",_daca );_bbff ._ffc =_ceeb (_bddad ,"");
_dddag =append (_dddag ,_bbff );};return _dddag ;};func _ecfd (_edac *Extractor ,_fbcb *_bd .PdfPageResources ,_eae _fdd .GraphicsState ,_ceca *textState ,_gbcf *stateStack )*textObject {return &textObject {_fggde :_edac ,_ccfc :_fbcb ,_bgbd :_eae ,_fccc :_gbcf ,_ebd :_ceca ,_dgga :_daa .IdentityMatrix (),_egfd :_daa .IdentityMatrix ()};
};func _cdbga (_eebe _bd .PdfRectangle ,_agff bounded )float64 {return _eebe .Ury -_agff .bbox ().Lly };const (_ddf ="\u0045\u0052R\u004f\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u002c\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";
_cb ="\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0043a\u006e\u0027\u0074 g\u0065\u0074\u0020\u0066\u006f\u006et\u0020\u0070\u0072\u006f\u0070\u0065\u0072\u0074\u0069\u0065\u0073\u002c\u0020\u0066\u006fn\u0074\u0020\u006e\u006f\u0074\u0020\u0066\u006fu\u006e\u0064";
_ac ="\u0045\u0052\u0052O\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0067\u0065\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0074\u0072\u0065\u0061\u006d\u002c\u0020\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";_gag ="E\u0052R\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066o\u006e\u0074\u0020\u0066ou\u006e\u0064";
);func (_fcdee rulingList )toGrids ()[]rulingList {if _ddcaf {_ga .Log .Info ("t\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0025\u0073",_fcdee );};_dcbb :=_fcdee .intersections ();if _ddcaf {_ga .Log .Info ("\u0074\u006f\u0047r\u0069\u0064\u0073\u003a \u0076\u0065\u0063\u0073\u003d\u0025\u0064 \u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003d\u0025\u0064\u0020",len (_fcdee ),len (_dcbb ));
for _ ,_gdeag :=range _fgaf (_dcbb ){_da .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_gdeag ,_dcbb [_gdeag ]);};};_abcba :=make (map[int ]intSet ,len (_fcdee ));for _fgcef :=range _fcdee {_dfeg :=_fcdee .connections (_dcbb ,_fgcef );if len (_dfeg )> 0{_abcba [_fgcef ]=_dfeg ;
};};if _ddcaf {_ga .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0063\u006fn\u006e\u0065\u0063\u0074s=\u0025\u0064",len (_abcba ));for _ ,_dcdd :=range _fgaf (_abcba ){_da .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_dcdd ,_abcba [_dcdd ]);
};};_ddaf :=_ffag (len (_fcdee ),func (_ecfa ,_abgc int )bool {_egbd ,_dfdde :=len (_abcba [_ecfa ]),len (_abcba [_abgc ]);if _egbd !=_dfdde {return _egbd > _dfdde ;};return _fcdee .comp (_ecfa ,_abgc );});if _ddcaf {_ga .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u006f\u0072d\u0065\u0072\u0069\u006eg=\u0025\u0076",_ddaf );
};_ebdb :=[][]int {{_ddaf [0]}};_efaf :for _ ,_faca :=range _ddaf [1:]{for _efea ,_dbagg :=range _ebdb {for _ ,_efef :=range _dbagg {if _abcba [_efef ].has (_faca ){_ebdb [_efea ]=append (_dbagg ,_faca );continue _efaf ;};};};_ebdb =append (_ebdb ,[]int {_faca });
};if _ddcaf {_ga .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020i\u0067\u0072i\u0064\u0073\u003d\u0025\u0076",_ebdb );};_gf .SliceStable (_ebdb ,func (_bggbd ,_bgddd int )bool {return len (_ebdb [_bggbd ])> len (_ebdb [_bgddd ])});for _ ,_cegb :=range _ebdb {_gf .Slice (_cegb ,func (_afbdc ,_gcdf int )bool {return _fcdee .comp (_cegb [_afbdc ],_cegb [_gcdf ])});
};_cdage :=make ([]rulingList ,len (_ebdb ));for _fdbac ,_cbgd :=range _ebdb {_edde :=make (rulingList ,len (_cbgd ));for _gaccf ,_ggbb :=range _cbgd {_edde [_gaccf ]=_fcdee [_ggbb ];};_cdage [_fdbac ]=_edde ;};if _ddcaf {_ga .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020g\u0072\u0069d\u0073\u003d\u0025\u002b\u0076",_cdage );
};var _cgfa []rulingList ;for _ ,_eeeb :=range _cdage {if _faag ,_agdg :=_eeeb .isActualGrid ();_agdg {_eeeb =_faag ;_eeeb =_eeeb .snapToGroups ();_cgfa =append (_cgfa ,_eeeb );};};if _ddcaf {_bced ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0061\u0063t\u0075\u0061\u006c\u0047ri\u0064\u0073",_cgfa );
_ga .Log .Info ("\u0074\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0067\u0072\u0069\u0064\u0073\u003d%\u0064 \u0061\u0063\u0074\u0075\u0061\u006c\u0047\u0072\u0069\u0064\u0073\u003d\u0025\u0064",len (_cdage ),len (_cgfa ));};return _cgfa ;};func (_fgcc *subpath )clear (){*_fgcc =subpath {}};
func _ccda (_acac *textLine )bool {_ddgd :=true ;_gfdage :=-1;for _ ,_fbdc :=range _acac ._bbgge {for _ ,_cgcc :=range _fbdc ._dcgd {_bcb :=_cgcc ._daef ;if _gfdage ==-1{_gfdage =_bcb ;}else {if _gfdage !=_bcb {_ddgd =false ;break ;};};};};return _ddgd ;
};

// TableInfo gets table information of the textmark `tm`.
func (_bggg *TextMark )TableInfo ()(*TextTable ,[][]int ){if !_bggg ._fgae {return nil ,nil ;};_bagg :=_bggg ._fegb ;_eaca :=_bagg .getCellInfo (*_bggg );return _bagg ,_eaca ;};func (_eafe *textTable )emptyCompositeColumn (_adbfa int )bool {for _dfgba :=0;
_dfgba < _eafe ._bgfd ;_dfgba ++{if _gefab ,_cdbc :=_eafe ._fcbc [_adebf (_adbfa ,_dfgba )];_cdbc {if len (_gefab .paraList )> 0{return false ;};};};return true ;};func (_ggeg TextTable )getCellInfo (_dced TextMark )[][]int {for _eaac ,_dfdd :=range _ggeg .Cells {for _afag :=range _dfdd {_dged :=&_dfdd [_afag ].Marks ;
if _dged .exists (_dced ){return [][]int {{_eaac },{_afag }};};};};return nil ;};func (_cegg *textPara )fontsize ()float64 {return _cegg ._dbed [0]._ddec };func (_efbbb paraList )xNeighbours (_ffbaf float64 )map[*textPara ][]int {_dfbb :=make ([]event ,2*len (_efbbb ));
if _ffbaf ==0{for _eebea ,_ecdbd :=range _efbbb {_dfbb [2*_eebea ]=event {_ecdbd .Llx ,true ,_eebea };_dfbb [2*_eebea +1]=event {_ecdbd .Urx ,false ,_eebea };};}else {for _acfb ,_fdddc :=range _efbbb {_dfbb [2*_acfb ]=event {_fdddc .Llx -_ffbaf *_fdddc .fontsize (),true ,_acfb };
_dfbb [2*_acfb +1]=event {_fdddc .Urx +_ffbaf *_fdddc .fontsize (),false ,_acfb };};};return _efbbb .eventNeighbours (_dfbb );};func (_ffaea *textPara )isAtom ()*textTable {_ddfbc :=_ffaea ;_dfge :=_ffaea ._fcaa ;_bgdbb :=_ffaea ._abcd ;if _dfge .taken ()||_bgdbb .taken (){return nil ;
};_dfbe :=_dfge ._abcd ;if _dfbe .taken ()||_dfbe !=_bgdbb ._fcaa {return nil ;};return _dffed (_ddfbc ,_dfge ,_bgdbb ,_dfbe );};func (_debd *PageFonts )extractPageResourcesToFont (_eea *_bd .PdfPageResources )error {if _eea .Font ==nil {return _cg .New (_gag );
};_beaa ,_egef :=_agg .GetDict (_eea .Font );if !_egef {return _cg .New (_ddf );};for _ ,_ggee :=range _beaa .Keys (){var (_gcc =true ;_abgg []byte ;_bce string ;);_ddc ,_gggc :=_eea .GetFontByName (_ggee );if !_gggc {return _cg .New (_cb );};_bbf ,_cfg :=_bd .NewPdfFontFromPdfObject (_ddc );
if _cfg !=nil {return _cfg ;};_bag :=_bbf .FontDescriptor ();_cfcb :=_bbf .FontDescriptor ().FontName .String ();_dafg :=_bbf .Subtype ();if _abb (_debd .Fonts ,_cfcb ){continue ;};if len (_bbf .ToUnicode ())==0{_gcc =false ;};if _bag .FontFile !=nil {if _egc ,_feg :=_agg .GetStream (_bag .FontFile );
_feg {_abgg ,_cfg =_agg .DecodeStream (_egc );if _cfg !=nil {return _cfg ;};_bce =_cfcb +"\u002e\u0070\u0066\u0062";};}else if _bag .FontFile2 !=nil {if _bg ,_gacc :=_agg .GetStream (_bag .FontFile2 );_gacc {_abgg ,_cfg =_agg .DecodeStream (_bg );if _cfg !=nil {return _cfg ;
};_bce =_cfcb +"\u002e\u0074\u0074\u0066";};}else if _bag .FontFile3 !=nil {if _abe ,_bgd :=_agg .GetStream (_bag .FontFile3 );_bgd {_abgg ,_cfg =_agg .DecodeStream (_abe );if _cfg !=nil {return _cfg ;};_bce =_cfcb +"\u002e\u0063\u0066\u0066";};};if len (_bce )< 1{_ga .Log .Debug (_ac );
};_feec :=Font {FontName :_cfcb ,PdfFont :_bbf ,IsCID :_bbf .IsCID (),IsSimple :_bbf .IsSimple (),ToUnicode :_gcc ,FontType :_dafg ,FontData :_abgg ,FontFileName :_bce ,FontDescriptor :_bag };_debd .Fonts =append (_debd .Fonts ,_feec );};return nil ;};
type cachedImage struct{_agcf *_bd .Image ;_ffed _bd .PdfColorspace ;};func (_eecg *textObject )setTextMatrix (_afcd []float64 ){if len (_afcd )!=6{_ga .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u006c\u0065\u006e\u0028\u0066\u0029\u0020\u0021\u003d\u0020\u0036\u0020\u0028\u0025\u0064\u0029",len (_afcd ));
return ;};_dbcf ,_agec ,_gfda ,_gbfe ,_gbfb ,_dfbg :=_afcd [0],_afcd [1],_afcd [2],_afcd [3],_afcd [4],_afcd [5];_eecg ._dgga =_daa .NewMatrix (_dbcf ,_agec ,_gfda ,_gbfe ,_gbfb ,_dfbg );_eecg ._egfd =_eecg ._dgga ;};func (_cdcb rulingList )vertsHorzs ()(rulingList ,rulingList ){var _ageeg ,_dacd rulingList ;
for _ ,_efbc :=range _cdcb {switch _efbc ._decfc {case _gdbe :_ageeg =append (_ageeg ,_efbc );case _gcff :_dacd =append (_dacd ,_efbc );};};return _ageeg ,_dacd ;};var _deab =TextMark {Text :"\u005b\u0058\u005d",Original :"\u0020",Meta :true ,FillColor :_fd .White ,StrokeColor :_fd .White };
func (_fceeg rulingList )removeDuplicates ()rulingList {if len (_fceeg )==0{return nil ;};_fceeg .sort ();_gaab :=rulingList {_fceeg [0]};for _ ,_gcae :=range _fceeg [1:]{if _gcae .equals (_gaab [len (_gaab )-1]){continue ;};_gaab =append (_gaab ,_gcae );
};return _gaab ;};type pathSection struct{_cbcg []*subpath ;_fd .Color ;};func _abcc (_eaee ,_eeccg _daa .Point )rulingKind {_daeg :=_fbg .Abs (_eaee .X -_eeccg .X );_acge :=_fbg .Abs (_eaee .Y -_eeccg .Y );return _fgfe (_daeg ,_acge ,_cgb );};func (_aegc *textTable )emptyCompositeRow (_ecbaa int )bool {for _gcfd :=0;
_gcfd < _aegc ._eceag ;_gcfd ++{if _gggce ,_fbccd :=_aegc ._fcbc [_adebf (_gcfd ,_ecbaa )];_fbccd {if len (_gggce .paraList )> 0{return false ;};};};return true ;};func (_bddeb *textTable )subdivide ()*textTable {_bddeb .logComposite ("\u0073u\u0062\u0064\u0069\u0076\u0069\u0064e");
_ggbfe :=_bddeb .compositeRowCorridors ();_beeb :=_bddeb .compositeColCorridors ();if _bbae {_ga .Log .Info ("\u0073u\u0062\u0064i\u0076\u0069\u0064\u0065:\u000a\u0009\u0072o\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s=\u0025\u0073\u000a\t\u0063\u006fl\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073=\u0025\u0073",_cgdag (_ggbfe ),_cgdag (_beeb ));
};if len (_ggbfe )==0||len (_beeb )==0{return _bddeb ;};_ffaca (_ggbfe );_ffaca (_beeb );if _bbae {_ga .Log .Info ("\u0073\u0075\u0062\u0064\u0069\u0076\u0069\u0064\u0065\u0020\u0066\u0069\u0078\u0065\u0064\u003a\u000a\u0009r\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073\u003d\u0025\u0073\u000a\u0009\u0063\u006f\u006cC\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d\u0025\u0073",_cgdag (_ggbfe ),_cgdag (_beeb ));
};_egdaa ,_fbag :=_adgga (_bddeb ._bgfd ,_ggbfe );_cadaf ,_ceddcb :=_adgga (_bddeb ._eceag ,_beeb );_daee :=make (map[uint64 ]*textPara ,_ceddcb *_fbag );_cdba :=&textTable {PdfRectangle :_bddeb .PdfRectangle ,_dbdag :_bddeb ._dbdag ,_bgfd :_fbag ,_eceag :_ceddcb ,_aegad :_daee };
if _bbae {_ga .Log .Info ("\u0073\u0075b\u0064\u0069\u0076\u0069\u0064\u0065\u003a\u0020\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0063\u0065\u006c\u006c\u0073\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0079\u004f\u0066\u0066\u0073\u0065\u0074\u0073=\u0025\u002b\u0076\u000a"+"\u0009\u0078\u004f\u0066\u0066\u0073\u0065\u0074\u0073\u003d\u0025\u002b\u0076",_bddeb ._eceag ,_bddeb ._bgfd ,_ceddcb ,_fbag ,_cgdag (_ggbfe ),_cgdag (_beeb ),_egdaa ,_cadaf );
};for _bccg :=0;_bccg < _bddeb ._bgfd ;_bccg ++{_eadde :=_egdaa [_bccg ];for _edcad :=0;_edcad < _bddeb ._eceag ;_edcad ++{_eeabb :=_cadaf [_edcad ];if _bbae {_da .Printf ("\u0025\u0036\u0064\u002c %\u0032\u0064\u003a\u0020\u0078\u0030\u003d\u0025\u0064\u0020\u0079\u0030\u003d\u0025d\u000a",_edcad ,_bccg ,_eeabb ,_eadde );
};_ggbdb ,_fbagd :=_bddeb ._fcbc [_adebf (_edcad ,_bccg )];if !_fbagd {continue ;};_fggbd :=_ggbdb .split (_ggbfe [_bccg ],_beeb [_edcad ]);for _dcdeg :=0;_dcdeg < _fggbd ._bgfd ;_dcdeg ++{for _aagd :=0;_aagd < _fggbd ._eceag ;_aagd ++{_cfgc :=_fggbd .get (_aagd ,_dcdeg );
_cdba .put (_eeabb +_aagd ,_eadde +_dcdeg ,_cfgc );if _bbae {_da .Printf ("\u0025\u0038\u0064\u002c\u0020\u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_eeabb +_aagd ,_eadde +_dcdeg ,_cfgc );};};};};};return _cdba ;};var _eeba string ="\u005e\u005b\u0061\u002d\u007a\u0041\u002dZ\u005d\u0028\u005c)\u007c\u005c\u002e)\u007c\u005e[\u005c\u0064\u005d\u002b\u0028\u005c)\u007c\\.\u0029\u007c\u005e\u005c\u0028\u005b\u0061\u002d\u007a\u0041\u002d\u005a\u005d\u005c\u0029\u007c\u005e\u005c\u0028\u005b\u005c\u0064\u005d\u002b\u005c\u0029";
func (_cefgd paraList )addNeighbours (){_fdfdd :=func (_cefag []int ,_acfg *textPara )([]*textPara ,[]*textPara ){_gcbgc :=make ([]*textPara ,0,len (_cefag )-1);_gcgda :=make ([]*textPara ,0,len (_cefag )-1);for _ ,_gabg :=range _cefag {_accbb :=_cefgd [_gabg ];
if _accbb .Urx <=_acfg .Llx {_gcbgc =append (_gcbgc ,_accbb );}else if _accbb .Llx >=_acfg .Urx {_gcgda =append (_gcgda ,_accbb );};};return _gcbgc ,_gcgda ;};_bddea :=func (_ageec []int ,_gaeg *textPara )([]*textPara ,[]*textPara ){_aacce :=make ([]*textPara ,0,len (_ageec )-1);
_cddff :=make ([]*textPara ,0,len (_ageec )-1);for _ ,_dbbcd :=range _ageec {_fdbb :=_cefgd [_dbbcd ];if _fdbb .Ury <=_gaeg .Lly {_cddff =append (_cddff ,_fdbb );}else if _fdbb .Lly >=_gaeg .Ury {_aacce =append (_aacce ,_fdbb );};};return _aacce ,_cddff ;
};_abab :=_cefgd .yNeighbours (_gdab );for _ ,_deeg :=range _cefgd {_abgba :=_abab [_deeg ];if len (_abgba )==0{continue ;};_aaaeg ,_abgeb :=_fdfdd (_abgba ,_deeg );if len (_aaaeg )==0&&len (_abgeb )==0{continue ;};if len (_aaaeg )> 0{_dcad :=_aaaeg [0];
for _ ,_agcfe :=range _aaaeg [1:]{if _agcfe .Urx >=_dcad .Urx {_dcad =_agcfe ;};};for _ ,_caffc :=range _aaaeg {if _caffc !=_dcad &&_caffc .Urx > _dcad .Llx {_dcad =nil ;break ;};};if _dcad !=nil &&_fcda (_deeg .PdfRectangle ,_dcad .PdfRectangle ){_deeg ._gdbc =_dcad ;
};};if len (_abgeb )> 0{_aecee :=_abgeb [0];for _ ,_abefe :=range _abgeb [1:]{if _abefe .Llx <=_aecee .Llx {_aecee =_abefe ;};};for _ ,_edgcg :=range _abgeb {if _edgcg !=_aecee &&_edgcg .Llx < _aecee .Urx {_aecee =nil ;break ;};};if _aecee !=nil &&_fcda (_deeg .PdfRectangle ,_aecee .PdfRectangle ){_deeg ._fcaa =_aecee ;
};};};_abab =_cefgd .xNeighbours (_dagaf );for _ ,_eaccf :=range _cefgd {_eggfb :=_abab [_eaccf ];if len (_eggfb )==0{continue ;};_dbaaf ,_agaf :=_bddea (_eggfb ,_eaccf );if len (_dbaaf )==0&&len (_agaf )==0{continue ;};if len (_agaf )> 0{_dfgfc :=_agaf [0];
for _ ,_dgbab :=range _agaf [1:]{if _dgbab .Ury >=_dfgfc .Ury {_dfgfc =_dgbab ;};};for _ ,_adcde :=range _agaf {if _adcde !=_dfgfc &&_adcde .Ury > _dfgfc .Lly {_dfgfc =nil ;break ;};};if _dfgfc !=nil &&_acce (_eaccf .PdfRectangle ,_dfgfc .PdfRectangle ){_eaccf ._abcd =_dfgfc ;
};};if len (_dbaaf )> 0{_fddf :=_dbaaf [0];for _ ,_ebefa :=range _dbaaf [1:]{if _ebefa .Lly <=_fddf .Lly {_fddf =_ebefa ;};};for _ ,_egcde :=range _dbaaf {if _egcde !=_fddf &&_egcde .Lly < _fddf .Ury {_fddf =nil ;break ;};};if _fddf !=nil &&_acce (_eaccf .PdfRectangle ,_fddf .PdfRectangle ){_eaccf ._ccfgf =_fddf ;
};};};for _ ,_adaf :=range _cefgd {if _adaf ._gdbc !=nil &&_adaf ._gdbc ._fcaa !=_adaf {_adaf ._gdbc =nil ;};if _adaf ._ccfgf !=nil &&_adaf ._ccfgf ._abcd !=_adaf {_adaf ._ccfgf =nil ;};if _adaf ._fcaa !=nil &&_adaf ._fcaa ._gdbc !=_adaf {_adaf ._fcaa =nil ;
};if _adaf ._abcd !=nil &&_adaf ._abcd ._ccfgf !=_adaf {_adaf ._abcd =nil ;};};};

// Search searches the pages specified by `pages`.
func (_aacc *Editor )Search (pattern string ,pages []int )(map[int ]Match ,error ){_bgf ,_ ,_cdbge :=_aacc .getMatches (pattern ,pages );return _bgf ,_cdbge ;};func _dcac (_aafge _bd .PdfColorspace ,_fdad _bd .PdfColor )_fd .Color {if _aafge ==nil ||_fdad ==nil {return _fd .Black ;
};_gcgab ,_cgfgb :=_aafge .ColorToRGB (_fdad );if _cgfgb !=nil {_ga .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006fu\u006c\u0064\u0020no\u0074\u0020\u0063\u006f\u006e\u0076e\u0072\u0074\u0020\u0063\u006f\u006c\u006f\u0072\u0020\u0025\u0076\u0020\u0028\u0025\u0076)\u0020\u0074\u006f\u0020\u0052\u0047\u0042\u003a \u0025\u0073",_fdad ,_aafge ,_cgfgb );
return _fd .Black ;};_beda ,_ddbfa :=_gcgab .(*_bd .PdfColorDeviceRGB );if !_ddbfa {_ga .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0065\u0064 \u0063\u006f\u006c\u006f\u0072\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020i\u006e\u0020\u0074\u0068\u0065\u0020\u0052\u0047\u0042\u0020\u0063\u006flo\u0072\u0073\u0070\u0061\u0063\u0065\u003a\u0020\u0025\u0076",_gcgab );
return _fd .Black ;};return _fd .NRGBA {R :uint8 (_beda .R ()*255),G :uint8 (_beda .G ()*255),B :uint8 (_beda .B ()*255),A :uint8 (255)};};func (_dgce *textObject )setHorizScaling (_dbcd float64 ){if _dgce ==nil {return ;};_dgce ._ebd ._acbe =_dbcd ;};
func _cge (_bdgff []*textMark ,_efad _bd .PdfRectangle )string {_ga .Log .Trace ("\u006d\u0061\u006b\u0065\u0053i\u006d\u0070\u006c\u0065\u0054\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020e\u006c\u0065\u006d\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",len (_bdgff ),_efad );
_dcfa :="";if len (_bdgff )==0{return _dcfa ;};_beab :=_fecb (_bdgff ,_efad ,true );if len (_beab )==0{return _dcfa ;};_cgee :=0.0;_cagg :=true ;_debb :="";for _ ,_gfbce :=range _beab {_dbaa :=_gfbce ._babfe ;if _dbaa > _dfcfa {_dbaa =_dfcfa ;};if (_gfbce ._bfbd -_cgee > _bdee *_dbaa &&_cgee !=0.0)||(_cgee -_gfbce ._bfbd > _dbaa *10){_effg :=_cd ([]rune (_debb ));
_debb =_effg ._gc ;_debb +="\u000a";_dcfa +=_debb ;_debb ="";}else {if !_cagg {_debb +="\u0020";};};_debb +=_gfbce ._egcfd ;_cagg =false ;_cgee =_gfbce ._bfbd ;};if _debb !=""{_afega :=_cd ([]rune (_debb ));_debb =_afega ._gc ;_debb +="\u000a";_dcfa +=_debb ;
};return _dcfa ;};func _ceeb (_bgba []*textLine ,_dbdd string )string {var _cfff _d .Builder ;_beeg :=0.0;for _gdad ,_gcab :=range _bgba {_gbeba :=_gcab .text ();_eadc :=_gcab ._gcdcg ;if _gdad < len (_bgba )-1{_beeg =_bgba [_gdad +1]._gcdcg ;}else {_beeg =0.0;
};_cfff .WriteString (_dbdd );_cfff .WriteString (_gbeba );if _beeg !=_eadc {_cfff .WriteString ("\u000a");}else {_cfff .WriteString ("\u0020");};};return _cfff .String ();};func (_gdc *shapesState )lastpointEstablished ()(_daa .Point ,bool ){if _gdc ._abbb {return _gdc ._cfcc ,false ;
};_aaae :=len (_gdc ._baccb );if _aaae > 0&&_gdc ._baccb [_aaae -1]._cdfbd {return _gdc ._baccb [_aaae -1].last (),false ;};return _daa .Point {},true ;};const (_bbed markKind =iota ;_afeae ;_adgf ;_aacad ;);func (_cba *TextMarkArray )exists (_addeg TextMark )bool {for _ ,_bgeg :=range _cba .Elements (){if _c .DeepEqual (_addeg .DirectObject ,_bgeg .DirectObject )&&_c .DeepEqual (_addeg .BBox ,_bgeg .BBox )&&_bgeg .Text ==_addeg .Text {return true ;
};};return false ;};func _fgecd (_afda _bd .PdfRectangle )*ruling {return &ruling {_decfc :_gcff ,_bbac :_afda .Lly ,_gccd :_afda .Llx ,_ggadf :_afda .Urx };};

// ApplyArea processes the page text only within the specified area `bbox`.
// Each time ApplyArea is called, it updates the result set in `pt`.
// Can be called multiple times in a row with different bounding boxes.
func (_cggeg *PageText )ApplyArea (bbox _bd .PdfRectangle ){_gda :=make ([]*textMark ,0,len (_cggeg ._cgaf ));for _ ,_bedg :=range _cggeg ._cgaf {if _fcdd (_bedg .bbox (),bbox ){_gda =append (_gda ,_bedg );};};var _fafc paraList ;_faab :="";_aeae :=len (_gda );
for _cbcd :=0;_cbcd < 360&&_aeae > 0;_cbcd +=90{_efdc :=make ([]*textMark ,0,len (_gda )-_aeae );for _ ,_gccc :=range _gda {if _gccc ._bfa ==_cbcd {_efdc =append (_efdc ,_gccc );};};if len (_efdc )> 0{if _cggeg ._baccf ._bbgb ==ExtractionModePlain {_faab +=_cge (_efdc ,_cggeg ._gecb );
}else {_gea :=_fbdbg (_efdc ,_cggeg ._gecb ,nil ,nil ,_cggeg ._baccf ._bbgb ==ExtractionModeLayoutNoBreaks );_fafc =append (_fafc ,_gea ...);};_aeae -=len (_efdc );};};if _cggeg ._baccf ._bbgb ==ExtractionModePlain {_cggeg ._aega =_faab ;}else {_aeab :=new (_ag .Buffer );
_fafc .writeText (_aeab );_cggeg ._aega =_aeab .String ();_cggeg ._bcc =_fafc .toTextMarks ();_cggeg ._abc =_fafc .tables ();};};func (_fegfc *compositeCell )updateBBox (){for _ ,_fged :=range _fegfc .paraList {_fegfc .PdfRectangle =_fcee (_fegfc .PdfRectangle ,_fged .PdfRectangle );
};};

// ImageExtractOptions contains options for controlling image extraction from
// PDF pages.
type ImageExtractOptions struct{IncludeInlineStencilMasks bool ;};func _ecba (_daba *textLine )float64 {return _daba ._bbgge [0].Llx };var _bcfgcg =[]string {"\u2756","\u27a2","\u2713","\u2022","\uf0a7","\u25a1","\u2212","\u25a0","\u25aa","\u006f"};func _afddf (_bbga string )string {_bdeb :=[]rune (_bbga );
return string (_bdeb [:len (_bdeb )-1])};func (_dcb *imageExtractContext )extractXObjectImage (_ecfb *_agg .PdfObjectName ,_ggeag _fdd .GraphicsState ,_gfa *_bd .PdfPageResources )error {_ega ,_ :=_gfa .GetXObjectByName (*_ecfb );if _ega ==nil {return nil ;
};_aadfa ,_dga :=_dcb ._aadf [_ega ];if !_dga {_fgc ,_edc :=_gfa .GetXObjectImageByName (*_ecfb );if _edc !=nil {return _edc ;};if _fgc ==nil {return nil ;};_dea ,_edc :=_fgc .ToImage ();if _edc !=nil {return _edc ;};var _ggce _dc .Image ;if _fgc .Mask !=nil {if _ggce ,_edc =_bgaf (_fgc .Mask ,_fd .Opaque );
_edc !=nil {_ga .Log .Debug ("\u0057\u0041\u0052\u004e\u003a \u0063\u006f\u0075\u006c\u0064 \u006eo\u0074\u0020\u0067\u0065\u0074\u0020\u0065\u0078\u0070\u006c\u0069\u0063\u0069\u0074\u0020\u0069\u006d\u0061\u0067e\u0020\u006d\u0061\u0073\u006b\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e");
};}else if _fgc .SMask !=nil {_ggce ,_edc =_ccad (_fgc .SMask ,_fd .Opaque );if _edc !=nil {_ga .Log .Debug ("W\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0067\u0065\u0074\u0020\u0073\u006f\u0066\u0074\u0020\u0069\u006da\u0067e\u0020\u006d\u0061\u0073k\u002e\u0020O\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u002e");
};};if _ggce !=nil {_adde ,_bbc :=_dea .ToGoImage ();if _bbc !=nil {return _bbc ;};_adde =_dfce (_adde ,_ggce );switch _fgc .ColorSpace .String (){case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0049n\u0064\u0065\u0078\u0065\u0064":_dea ,_bbc =_bd .ImageHandling .NewGrayImageFromGoImage (_adde );
if _bbc !=nil {return _bbc ;};default:_dea ,_bbc =_bd .ImageHandling .NewImageFromGoImage (_adde );if _bbc !=nil {return _bbc ;};};};_aadfa =&cachedImage {_agcf :_dea ,_ffed :_fgc .ColorSpace };_dcb ._aadf [_ega ]=_aadfa ;};_aca :=_aadfa ._agcf ;_abfe :=_aadfa ._ffed ;
_gab ,_acag :=_abfe .ImageToRGB (*_aca );if _acag !=nil {return _acag ;};_ga .Log .Debug ("@\u0044\u006f\u0020\u0043\u0054\u004d\u003a\u0020\u0025\u0073",_ggeag .CTM .String ());_agbe :=ImageMark {Image :&_gab ,Width :_ggeag .CTM .ScalingFactorX (),Height :_ggeag .CTM .ScalingFactorY (),Angle :_ggeag .CTM .Angle ()};
_agbe .X ,_agbe .Y =_ggeag .CTM .Translation ();_dcb ._fgd =append (_dcb ._fgd ,_agbe );_dcb ._bca ++;return nil ;};const (ExtractionModeLayout =iota ;ExtractionModePlain ;ExtractionModeLayoutNoBreaks ;);type shapesState struct{_cecg _daa .Matrix ;_bdea _daa .Matrix ;
_baccb []*subpath ;_abbb bool ;_cfcc _daa .Point ;_becc *textObject ;};func (_dbef *shapesState )quadraticTo (_abce ,_fcfdf ,_cadb ,_ecb float64 ){if _bfdd {_ga .Log .Info ("\u0071\u0075\u0061d\u0072\u0061\u0074\u0069\u0063\u0054\u006f\u003a");};_dbef .addPoint (_cadb ,_ecb );
};func _edec (_fdcb []pathSection )rulingList {_caeef (_fdcb );if _ddcaf {_ga .Log .Info ("\u006da\u006b\u0065\u0046\u0069l\u006c\u0052\u0075\u006c\u0069n\u0067s\u003a \u0025\u0064\u0020\u0066\u0069\u006c\u006cs",len (_fdcb ));};var _feeeb rulingList ;
for _ ,_bbbc :=range _fdcb {for _ ,_ffgg :=range _bbbc ._cbcg {if !_ffgg .isQuadrilateral (){if _ddcaf {_ga .Log .Error ("!\u0069s\u0051\u0075\u0061\u0064\u0072\u0069\u006c\u0061t\u0065\u0072\u0061\u006c: \u0025\u0073",_ffgg );};continue ;};if _egcbf ,_ecag :=_ffgg .makeRectRuling (_bbbc .Color );
_ecag {_feeeb =append (_feeeb ,_egcbf );}else {if _bedb {_ga .Log .Error ("\u0021\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0073",_ffgg );};};};};if _ddcaf {_ga .Log .Info ("\u006d\u0061\u006b\u0065Fi\u006c\u006c\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0073",_feeeb .String ());
};return _feeeb ;};

// String returns a description of `p`.
func (_dbcge *textPara )String ()string {if _dbcge ._cebf {return _da .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u005b\u0045\u004d\u0050\u0054\u0059\u005d",_dbcge .PdfRectangle );};_acad :="";if _dbcge ._deed !=nil {_acad =_da .Sprintf ("\u005b\u0025\u0064\u0078\u0025\u0064\u005d\u0020",_dbcge ._deed ._eceag ,_dbcge ._deed ._bgfd );
};return _da .Sprintf ("\u0025\u0036\u002e\u0032f \u0025\u0073\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u0020\u0025\u0071",_dbcge .PdfRectangle ,_acad ,len (_dbcge ._dbed ),_cgeg (_dbcge .text (),50));};var _defd =map[rulingKind ]string {_feee :"\u006e\u006f\u006e\u0065",_gcff :"\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_gdbe :"\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c"};
type imageExtractContext struct{_fgd []ImageMark ;_cbf int ;_bca int ;_fad int ;_aadf map[*_agg .PdfObjectStream ]*cachedImage ;_fdgf *ImageExtractOptions ;_ge bool ;};func (_edb *textObject )showText (_bdgd _agg .PdfObject ,_added []byte ,_aefc int ,_edfe string )error {return _edb .renderText (_bdgd ,_added ,_aefc ,_edfe );
};func _ffaca (_dgge map[int ][]float64 ){if len (_dgge )<=1{return ;};_fbccg :=_fdefff (_dgge );if _bbae {_ga .Log .Info ("\u0066i\u0078C\u0065\u006c\u006c\u0073\u003a \u006b\u0065y\u0073\u003d\u0025\u002b\u0076",_fbccg );};var _bdab ,_aefgb int ;for _bdab ,_aefgb =range _fbccg {if _dgge [_aefgb ]!=nil {break ;
};};for _ddfbg ,_fdgee :=range _fbccg [_bdab :]{_cfebc :=_dgge [_fdgee ];if _cfebc ==nil {continue ;};if _bbae {_da .Printf ("\u0025\u0034\u0064\u003a\u0020\u006b\u0030\u003d\u0025\u0064\u0020\u006b1\u003d\u0025\u0064\u000a",_bdab +_ddfbg ,_aefgb ,_fdgee );
};_dbdc :=_dgge [_fdgee ];if _dbdc [len (_dbdc )-1]> _cfebc [0]{_dbdc [len (_dbdc )-1]=_cfebc [0];_dgge [_aefgb ]=_dbdc ;};_aefgb =_fdgee ;};};const (_feee rulingKind =iota ;_gcff ;_gdbe ;);func (_bgbg paraList )eventNeighbours (_gega []event )map[*textPara ][]int {_gf .Slice (_gega ,func (_eedbba ,_gfcee int )bool {_gdgdb ,_acgcb :=_gega [_eedbba ],_gega [_gfcee ];
_fcdeef ,_bagef :=_gdgdb ._agac ,_acgcb ._agac ;if _fcdeef !=_bagef {return _fcdeef < _bagef ;};if _gdgdb ._fdde !=_acgcb ._fdde {return _gdgdb ._fdde ;};return _eedbba < _gfcee ;});_egde :=make (map[int ]intSet );_aeeg :=make (intSet );for _ ,_acbga :=range _gega {if _acbga ._fdde {_egde [_acbga ._gdde ]=make (intSet );
for _fffec :=range _aeeg {if _fffec !=_acbga ._gdde {_egde [_acbga ._gdde ].add (_fffec );_egde [_fffec ].add (_acbga ._gdde );};};_aeeg .add (_acbga ._gdde );}else {_aeeg .del (_acbga ._gdde );};};_ffaee :=map[*textPara ][]int {};for _cecee ,_gddaa :=range _egde {_eagac :=_bgbg [_cecee ];
if len (_gddaa )==0{_ffaee [_eagac ]=nil ;continue ;};_caddf :=make ([]int ,len (_gddaa ));_cbcbe :=0;for _geeaa :=range _gddaa {_caddf [_cbcbe ]=_geeaa ;_cbcbe ++;};_ffaee [_eagac ]=_caddf ;};return _ffaee ;};func _bgddg (_ddaef []_agg .PdfObject )(_fgedc ,_fbaaa float64 ,_gbdcb error ){if len (_ddaef )!=2{return 0,0,_da .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020o\u0066 \u0070\u0061\u0072\u0061\u006d\u0073\u003a \u0025\u0064",len (_ddaef ));
};_effa ,_gbdcb :=_agg .GetNumbersAsFloat (_ddaef );if _gbdcb !=nil {return 0,0,_gbdcb ;};return _effa [0],_effa [1],nil ;};func _afg (_bdf *TextMarkArray )string {_ceb :="";for _ ,_bcfc :=range _bdf .Elements (){_ceb +=_bcfc .Text ;};return _ceb ;};type lineRuling struct{_ggaa rulingKind ;
_fgdac markKind ;_fd .Color ;_baceg ,_egce _daa .Point ;};func _gcdeb (_eccf _bd .PdfRectangle ,_face ,_fdda ,_cadba ,_gfadef *ruling )gridTile {_gefb :=_eccf .Llx ;_ddcef :=_eccf .Urx ;_cbea :=_eccf .Lly ;_gbcb :=_eccf .Ury ;return gridTile {PdfRectangle :_eccf ,_afddd :_face !=nil &&_face .encloses (_cbea ,_gbcb ),_gbcc :_fdda !=nil &&_fdda .encloses (_cbea ,_gbcb ),_febea :_cadba !=nil &&_cadba .encloses (_gefb ,_ddcef ),_gdbbff :_gfadef !=nil &&_gfadef .encloses (_gefb ,_ddcef )};
};func (_gebcb rectRuling )checkWidth (_ffbc ,_fcad float64 )(float64 ,bool ){_abcb :=_fcad -_ffbc ;_bda :=_abcb <=_dffe ;return _abcb ,_bda ;};func _dfab (_gagda []int )[]int {_ceaga :=make ([]int ,len (_gagda ));for _ddfdf ,_geegc :=range _gagda {_ceaga [len (_gagda )-1-_ddfdf ]=_geegc ;
};return _ceaga ;};func (_ddffcc *textWord )addDiacritic (_ddaa string ){_cfedg :=_ddffcc ._dcgd [len (_ddffcc ._dcgd )-1];_cfedg ._aaba +=_ddaa ;_cfedg ._aaba =_b .NFKC .String (_cfedg ._aaba );};func (_dafc *shapesState )clearPath (){_dafc ._baccb =nil ;
_dafc ._abbb =false ;if _bfdd {_ga .Log .Info ("\u0043\u004c\u0045A\u0052\u003a\u0020\u0073\u0073\u003d\u0025\u0073",_dafc );};};func (_ffgf *wordBag )removeDuplicates (){if _gfff {_ga .Log .Info ("r\u0065m\u006f\u0076\u0065\u0044\u0075\u0070\u006c\u0069c\u0061\u0074\u0065\u0073: \u0025\u0071",_ffgf .text ());
};for _ ,_egfc :=range _ffgf .depthIndexes (){if len (_ffgf ._defc [_egfc ])==0{continue ;};_ddbbg :=_ffgf ._defc [_egfc ][0];_edbb :=_aaee *_ddbbg ._babfe ;_bebebe :=_ddbbg ._bfbd ;for _ ,_gdacd :=range _ffgf .depthBand (_bebebe ,_bebebe +_edbb ){_feacdb :=map[*textWord ]struct{}{};
_fdab :=_ffgf ._defc [_gdacd ];for _ ,_ebbb :=range _fdab {if _ ,_cdaa :=_feacdb [_ebbb ];_cdaa {continue ;};for _ ,_fbca :=range _fdab {if _ ,_babdb :=_feacdb [_fbca ];_babdb {continue ;};if _fbca !=_ebbb &&_fbca ._egcfd ==_ebbb ._egcfd &&_fbg .Abs (_fbca .Llx -_ebbb .Llx )< _edbb &&_fbg .Abs (_fbca .Urx -_ebbb .Urx )< _edbb &&_fbg .Abs (_fbca .Lly -_ebbb .Lly )< _edbb &&_fbg .Abs (_fbca .Ury -_ebbb .Ury )< _edbb {_feacdb [_fbca ]=struct{}{};
};};};if len (_feacdb )> 0{_acdba :=0;for _ ,_baffa :=range _fdab {if _ ,_bdbge :=_feacdb [_baffa ];!_bdbge {_fdab [_acdba ]=_baffa ;_acdba ++;};};_ffgf ._defc [_gdacd ]=_fdab [:len (_fdab )-len (_feacdb )];if len (_ffgf ._defc [_gdacd ])==0{delete (_ffgf ._defc ,_gdacd );
};};};};};func _dffed (_aace ,_ecfbd ,_dagb ,_ddbfdd *textPara )*textTable {_fbgfe :=&textTable {_eceag :2,_bgfd :2,_aegad :make (map[uint64 ]*textPara ,4)};_fbgfe .put (0,0,_aace );_fbgfe .put (1,0,_ecfbd );_fbgfe .put (0,1,_dagb );_fbgfe .put (1,1,_ddbfdd );
return _fbgfe ;};type ruling struct{_decfc rulingKind ;_cfec markKind ;_fd .Color ;_bbac float64 ;_gccd float64 ;_ggadf float64 ;_dgee float64 ;};

// Extractor stores and offers functionality for extracting content from PDF pages.
type Extractor struct{_eee string ;_deb *_bd .PdfPageResources ;_cdb _bd .PdfRectangle ;_adg *_bd .PdfRectangle ;_gac int ;_ada map[string ]fontEntry ;_cac map[string ]textResult ;_cfc map[string ]textResult ;_add int64 ;_gbc *Options ;_caaf *_bd .StructTreeRoot ;
_cfcf _agg .PdfObject ;_ebf []*_bd .PdfAnnotation ;};type rectRuling struct{_efffg rulingKind ;_eabe markKind ;_fd .Color ;_bd .PdfRectangle ;};func (_bfgf *Extractor )extractPageText (_dfb string ,_cfca *_bd .PdfPageResources ,_fba _daa .Matrix ,_dddg int ,_gdbg bool )(*PageText ,int ,int ,error ){_ga .Log .Trace ("\u0065x\u0074\u0072\u0061\u0063t\u0050\u0061\u0067\u0065\u0054e\u0078t\u003a \u006c\u0065\u0076\u0065\u006c\u003d\u0025d",_dddg );
_bebe :=&PageText {_gecb :_bfgf ._cdb ,_egaa :_bfgf ._caaf ,_fga :_bfgf ._cfcf };_dce :=_feab (_bfgf ._cdb );var _bbgd stateStack ;_gbcd :=_ecfd (_bfgf ,_cfca ,_fdd .GraphicsState {},&_dce ,&_bbgd );_ddge :=shapesState {_bdea :_fba ,_cecg :_daa .IdentityMatrix (),_becc :_gbcd };
var _aadg bool ;_cda :=-1;_dgg :="";if _dddg > _bbdc {_baee :=_cg .New ("\u0066\u006f\u0072\u006d s\u0074\u0061\u0063\u006b\u0020\u006f\u0076\u0065\u0072\u0066\u006c\u006f\u0077");_ga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0065\u0078\u0074\u0072\u0061\u0063\u0074\u0050\u0061\u0067\u0065\u0054\u0065\u0078\u0074\u002e\u0020\u0072\u0065\u0063u\u0072\u0073\u0069\u006f\u006e\u0020\u006c\u0065\u0076\u0065\u006c\u003d\u0025\u0064 \u0065r\u0072\u003d\u0025\u0076",_dddg ,_baee );
return _bebe ,_dce ._ecea ,_dce ._abged ,_baee ;};_gff :=_fdd .NewContentStreamParser (_dfb );_caff ,_gbce :=_gff .Parse ();if _gbce !=nil {_ga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020e\u0078\u0074\u0072a\u0063\u0074\u0050\u0061g\u0065\u0054\u0065\u0078\u0074\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gbce );
return _bebe ,_dce ._ecea ,_dce ._abged ,_gbce ;};_bebe ._dcab =_caff ;_adgg :=_fdd .NewContentStreamProcessor (*_caff );if _bfgf ._gbc !=nil {_adgg .SetRelaxedMode (_bfgf ._gbc .RelaxedMode );};_adgg .AddHandler (_fdd .HandlerConditionEnumAllOperands ,"",func (_gfac *_fdd .ContentStreamOperation ,_baff _fdd .GraphicsState ,_cadf *_bd .PdfPageResources )error {_ggcb :=_gfac .Operand ;
if _afegg {_ga .Log .Info ("\u0026&\u0026\u0020\u006f\u0070\u003d\u0025s",_gfac );};switch _ggcb {case "\u0071":if _bfdd {_ga .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_ddge ._cecg );};_bbgd .push (&_dce );case "\u0051":if !_bbgd .empty (){_dce =*_bbgd .pop ();
};_ddge ._cecg =_baff .CTM ;if _bfdd {_ga .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_ddge ._cecg );};case "\u0042\u0044\u0043":_bbfa ,_ceed :=_agg .GetDict (_gfac .Params [1]);if !_ceed {_ga .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0042D\u0043\u0020\u006f\u0070\u003d\u0025\u0073 \u0047\u0065\u0074\u0044\u0069\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_gfac );
return _gbce ;};_aedf :=_bbfa .Get ("\u004d\u0043\u0049\u0044");if _aedf !=nil {_ggbf ,_agf :=_agg .GetIntVal (_aedf );if !_agf {_ga .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0042\u0044C\u0020\u006f\u0070=\u0025\u0073\u002e\u0020\u0042\u0061\u0064\u0020\u006eum\u0065\u0072\u0069c\u0061\u006c \u006f\u0062\u006a\u0065\u0063\u0074.\u0020\u006f=\u0025\u0073",_gfac ,_aedf );
};_cda =_ggbf ;}else {_cda =-1;};if _bfgf ._caaf !=nil &&_cda !=-1&&_bfgf ._gac !=-1&&_bfgf ._caaf .ParentTree !=nil {_fgce :=_bfgf ._gac ;var _fgga func (_effc []*_bd .KValue )bool ;_fgga =func (_baad []*_bd .KValue )bool {for _ ,_fec :=range _baad {if _bcfg :=_fec .GetKDict ();
_bcfg !=nil {_fcaf :=_bcfg .GetChildren ();if len (_fcaf )==1&&_fcaf [0].GetMCID ()!=nil {if *_fcaf [0].GetMCID ()==_cda {if _bcfg .ActualText !=nil {_dgg =_d .TrimSpace (_bcfg .ActualText .Str ());return true ;};return false ;};}else {return _fgga (_fcaf );
};};};return false ;};if _cdf :=_bfgf ._caaf .ParentTree .Get ("\u004e\u0075\u006d\u0073");_cdf !=nil {_cfbd ,_gfe :=_agg .GetArray (_cdf );if !_gfe {_ga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0042\u0044\u0043\u0020\u006f\u0070\u003d\u0025\u0073\u002e\u0020\u0042\u0061\u0064\u0020\u004e\u0075m\u0073\u0020\u0061\u0072\u0072a\u0079\u002e \u006f\u003d\u0025\u0073",_gfac ,_cdf );
}else {for _eceg :=0;_eceg < _cfbd .Len ();_eceg +=2{if _eeb ,_cacf :=_agg .GetInt (_cfbd .Get (_eceg ));_cacf {if int (*_eeb )==_fgce {if _aga :=_cfbd .Get (_eceg +1);_aga !=nil {if _cfe ,_cgcd :=_agg .GetArray (_aga );_cgcd {for _ ,_acb :=range _cfe .Elements (){_aee ,_ccb :=_bd .NewKDictFromPdfObject (_acb );
if _ccb !=nil {_ga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0042\u0044\u0043\u0020\u006f\u0070\u003d\u0025\u0073\u002e\u0020\u0042\u0061d\u0020\u004b\u0044\u0069\u0063\u0074\u002e \u006f\u003d\u0025\u0073",_gfac ,_acb );continue ;};_bfb :=_aee .GetChildren ();
if len (_bfb )==1&&_bfb [0].GetMCID ()!=nil {if *_bfb [0].GetMCID ()==_cda {if _aee .ActualText !=nil {_dgg =_d .TrimSpace (_aee .ActualText .Str ());};break ;}else if _fgga (_bfb ){break ;};};};};};};};};};};};if _dgg ==""{_fdc :=_bbfa .Get ("\u0041\u0063\u0074\u0075\u0061\u006c\u0054\u0065\u0078\u0074");
if _fdc !=nil {_dgg =_d .TrimSpace (_fdc .String ());};};case "\u0045\u004d\u0043":_cda =-1;_dgg ="";case "\u0042\u0054":if _aadg {_ga .Log .Debug ("\u0042\u0054\u0020\u0063\u0061\u006c\u006c\u0065\u0064\u0020\u0077\u0068\u0069\u006c\u0065 \u0069n\u0020\u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
_bebe ._cgaf =append (_bebe ._cgaf ,_gbcd ._ccgd ...);};_aadg =true ;_gfbf :=_baff ;if _gdbg {_gfbf =_fdd .GraphicsState {};_gfbf .CTM =_ddge ._cecg ;};_gfbf .CTM =_fba .Mult (_gfbf .CTM );_gbcd =_ecfd (_bfgf ,_cadf ,_gfbf ,&_dce ,&_bbgd );_ddge ._becc =_gbcd ;
case "\u0045\u0054":if !_aadg {_ga .Log .Debug ("\u0045\u0054\u0020ca\u006c\u006c\u0065\u0064\u0020\u006f\u0075\u0074\u0073i\u0064e\u0020o\u0066 \u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");};_aadg =false ;_bebe ._cgaf =append (_bebe ._cgaf ,_gbcd ._ccgd ...);
_gbcd .reset ();case "\u0054\u002a":_gbcd .nextLine ();case "\u0054\u0064":if _bgcb ,_ded :=_gbcd .checkOp (_gfac ,2,true );!_bgcb {_ga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ded );return _ded ;};
_gdd ,_gbcg ,_ecdf :=_bgddg (_gfac .Params );if _ecdf !=nil {return _ecdf ;};_gbcd .moveText (_gdd ,_gbcg );case "\u0054\u0044":if _cfa ,_dbc :=_gbcd .checkOp (_gfac ,2,true );!_cfa {_ga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dbc );
return _dbc ;};_bbfd ,_bab ,_aaca :=_bgddg (_gfac .Params );if _aaca !=nil {_ga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_aaca );return _aaca ;};_gbcd .moveTextSetLeading (_bbfd ,_bab );case "\u0054\u006a":if _fce ,_fggd :=_gbcd .checkOp (_gfac ,1,true );
!_fce {_ga .Log .Debug ("\u0045\u0052\u0052\u004fR:\u0020\u0054\u006a\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0065\u0072\u0072\u003d%\u0076",_gfac ,_fggd );return _fggd ;};_gec :=_agg .TraceToDirectObject (_gfac .Params [0]);_agfa ,_cag :=_agg .GetStringBytes (_gec );
if !_cag {_ga .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020T\u006a\u0020o\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074S\u0074\u0072\u0069\u006e\u0067\u0042\u0079\u0074\u0065\u0073\u0020\u0066a\u0069\u006c\u0065\u0064",_gfac );return _agg .ErrTypeError ;
};return _gbcd .showText (_gec ,_agfa ,_cda ,_dgg );case "\u0054\u004a":if _egdf ,_def :=_gbcd .checkOp (_gfac ,1,true );!_egdf {_ga .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_def );return _def ;
};_cdfb ,_fbdg :=_agg .GetArray (_gfac .Params [0]);if !_fbdg {_ga .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_gfac );
return _gbce ;};return _gbcd .showTextAdjusted (_cdfb ,_cda ,_dgg );case "\u0027":if _dbee ,_aefb :=_gbcd .checkOp (_gfac ,1,true );!_dbee {_ga .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0027\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_aefb );return _aefb ;
};_fcc :=_agg .TraceToDirectObject (_gfac .Params [0]);_abge ,_aadb :=_agg .GetStringBytes (_fcc );if !_aadb {_ga .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020'\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_gfac );
return _agg .ErrTypeError ;};_gbcd .nextLine ();return _gbcd .showText (_fcc ,_abge ,_cda ,_dgg );case "\u0022":if _agbc ,_dedd :=_gbcd .checkOp (_gfac ,3,true );!_agbc {_ga .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0022\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dedd );
return _dedd ;};_cfgb ,_gfgb ,_bcdg :=_bgddg (_gfac .Params [:2]);if _bcdg !=nil {return _bcdg ;};_bfbc :=_agg .TraceToDirectObject (_gfac .Params [2]);_fgf ,_ebed :=_agg .GetStringBytes (_bfbc );if !_ebed {_ga .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020\"\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_gfac );
return _agg .ErrTypeError ;};_gbcd .setCharSpacing (_cfgb );_gbcd .setWordSpacing (_gfgb );_gbcd .nextLine ();return _gbcd .showText (_bfbc ,_fgf ,_cda ,_dgg );case "\u0054\u004c":_cbgc ,_ecegb :=_fbc (_gfac );if _ecegb !=nil {_ga .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004c\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ecegb );
return _ecegb ;};_gbcd .setTextLeading (_cbgc );case "\u0054\u0063":_dbge ,_aadd :=_fbc (_gfac );if _aadd !=nil {_ga .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0063\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_aadd );return _aadd ;};_gbcd .setCharSpacing (_dbge );
case "\u0054\u0066":if _edfb ,_cea :=_gbcd .checkOp (_gfac ,2,true );!_edfb {_ga .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0066\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cea );return _cea ;};_aag ,_ecgf :=_agg .GetNameVal (_gfac .Params [0]);
if !_ecgf {_ga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u004ea\u006d\u0065\u0056\u0061\u006c\u0020\u0066a\u0069\u006c\u0065\u0064",_gfac );return _agg .ErrTypeError ;};_gfbc ,_edcf :=_agg .GetNumberAsFloat (_gfac .Params [1]);
if !_ecgf {_ga .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u0046\u006c\u006f\u0061\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065d\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gfac ,_edcf );
return _edcf ;};_edcf =_gbcd .setFont (_aag ,_gfbc );_gbcd ._gbfgb =_cg .Is (_edcf ,_agg .ErrNotSupported );if _edcf !=nil &&!_gbcd ._gbfgb {return _edcf ;};case "\u0054\u006d":if _eacg ,_caac :=_gbcd .checkOp (_gfac ,6,true );!_eacg {_ga .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u006d\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_caac );
return _caac ;};_adae ,_dffa :=_agg .GetNumbersAsFloat (_gfac .Params );if _dffa !=nil {_ga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dffa );return _dffa ;};_gbcd .setTextMatrix (_adae );case "\u0054\u0072":if _abeg ,_feaa :=_gbcd .checkOp (_gfac ,1,true );
!_abeg {_ga .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0072\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_feaa );return _feaa ;};_aaff ,_afff :=_agg .GetIntVal (_gfac .Params [0]);if !_afff {_ga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0072\u0020\u006f\u0070\u003d\u0025\u0073 \u0047e\u0074\u0049\u006e\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_gfac );
return _agg .ErrTypeError ;};_gbcd .setTextRenderMode (_aaff );case "\u0054\u0073":if _cdea ,_fbdf :=_gbcd .checkOp (_gfac ,1,true );!_cdea {_ga .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0073\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fbdf );
return _fbdf ;};_gebf ,_dda :=_agg .GetNumberAsFloat (_gfac .Params [0]);if _dda !=nil {_ga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dda );return _dda ;};_gbcd .setTextRise (_gebf );case "\u0054\u0077":if _fbfg ,_abfb :=_gbcd .checkOp (_gfac ,1,true );
!_fbfg {_ga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_abfb );return _abfb ;};_dfdb ,_fcf :=_agg .GetNumberAsFloat (_gfac .Params [0]);if _fcf !=nil {_ga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fcf );
return _fcf ;};_gbcd .setWordSpacing (_dfdb );case "\u0054\u007a":if _effea ,_ead :=_gbcd .checkOp (_gfac ,1,true );!_effea {_ga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ead );return _ead ;};_dfbd ,_bfbg :=_agg .GetNumberAsFloat (_gfac .Params [0]);
if _bfbg !=nil {_ga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bfbg );return _bfbg ;};_gbcd .setHorizScaling (_dfbd );case "\u0063\u006d":if !_gdbg {_ddge ._cecg =_baff .CTM ;};if _ddge ._cecg .Singular (){_gaag :=_daa .IdentityMatrix ().Translate (_ddge ._cecg .Translation ());
_ga .Log .Debug ("S\u0069n\u0067\u0075\u006c\u0061\u0072\u0020\u0063\u0074m\u003d\u0025\u0073\u2192%s",_ddge ._cecg ,_gaag );_ddge ._cecg =_gaag ;};if _bfdd {_ga .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_ddge ._cecg );};case "\u006d":if len (_gfac .Params )!=2{_ga .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_dcf );
return nil ;};_abed ,_bddd :=_agg .GetNumbersAsFloat (_gfac .Params );if _bddd !=nil {return _bddd ;};_ddge .moveTo (_abed [0],_abed [1]);case "\u006c":if len (_gfac .Params )!=2{_ga .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_dcf );
return nil ;};_bege ,_ebgde :=_agg .GetNumbersAsFloat (_gfac .Params );if _ebgde !=nil {return _ebgde ;};_ddge .lineTo (_bege [0],_bege [1]);case "\u0063":if len (_gfac .Params )!=6{return _dcf ;};_afga ,_gbad :=_agg .GetNumbersAsFloat (_gfac .Params );
if _gbad !=nil {return _gbad ;};_ga .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_afga );_ddge .cubicTo (_afga [0],_afga [1],_afga [2],_afga [3],_afga [4],_afga [5]);
case "\u0076","\u0079":if len (_gfac .Params )!=4{return _dcf ;};_ccdg ,_aabe :=_agg .GetNumbersAsFloat (_gfac .Params );if _aabe !=nil {return _aabe ;};_ga .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_ccdg );
_ddge .quadraticTo (_ccdg [0],_ccdg [1],_ccdg [2],_ccdg [3]);case "\u0068":_ddge .closePath ();case "\u0072\u0065":if len (_gfac .Params )!=4{return _dcf ;};_bgff ,_gfca :=_agg .GetNumbersAsFloat (_gfac .Params );if _gfca !=nil {return _gfca ;};_ddge .drawRectangle (_bgff [0],_bgff [1],_bgff [2],_bgff [3]);
_ddge .closePath ();case "\u0053":_ddge .stroke (&_bebe ._ggd );_ddge .clearPath ();case "\u0073":_ddge .closePath ();_ddge .stroke (&_bebe ._ggd );_ddge .clearPath ();case "\u0046":_ddge .fill (&_bebe ._ecdg );_ddge .clearPath ();case "\u0066","\u0066\u002a":_ddge .closePath ();
_ddge .fill (&_bebe ._ecdg );_ddge .clearPath ();case "\u0042","\u0042\u002a":_ddge .fill (&_bebe ._ecdg );_ddge .stroke (&_bebe ._ggd );_ddge .clearPath ();case "\u0062","\u0062\u002a":_ddge .closePath ();_ddge .fill (&_bebe ._ecdg );_ddge .stroke (&_bebe ._ggd );
_ddge .clearPath ();case "\u006e":_ddge .clearPath ();case "\u0044\u006f":if len (_gfac .Params )==0{_ga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0058\u004fbj\u0065c\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006f\u0070\u0065\u0072\u0061n\u0064\u0020\u0066\u006f\u0072\u0020\u0044\u006f\u0020\u006f\u0070\u0065\u0072\u0061\u0074\u006f\u0072.\u0020\u0047\u006f\u0074\u0020\u0025\u002b\u0076\u002e",_gfac .Params );
return _agg .ErrRangeError ;};_bgga ,_aeef :=_agg .GetName (_gfac .Params [0]);if !_aeef {_ga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0044\u006f\u0020\u006f\u0070e\u0072a\u0074\u006f\u0072\u0020\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006fp\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u002b\u0076\u002e",_gfac .Params [0]);
return _agg .ErrTypeError ;};_ ,_eaf :=_cadf .GetXObjectByName (*_bgga );if _eaf !=_bd .XObjectTypeForm {break ;};_eafb ,_aeef :=_bfgf ._cac [_bgga .String ()];if !_aeef {_ddef ,_dfde :=_cadf .GetXObjectFormByName (*_bgga );if _dfde !=nil {_ga .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_dfde );
return _dfde ;};_bafd ,_dfde :=_ddef .GetContentStream ();if _dfde !=nil {_ga .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_dfde );return _dfde ;};_gagf :=_ddef .Resources ;if _gagf ==nil {_gagf =_cadf ;};_aegd :=_baff .CTM ;if _acef ,_aeee :=_agg .GetArray (_ddef .Matrix );
_aeee {_eafa ,_gcg :=_acef .GetAsFloat64Slice ();if _gcg !=nil {return _gcg ;};if len (_eafa )!=6{return _dcf ;};_bffe :=_daa .NewMatrix (_eafa [0],_eafa [1],_eafa [2],_eafa [3],_eafa [4],_eafa [5]);_aegd =_baff .CTM .Mult (_bffe );};_fbgd ,_cdad ,_dgbe ,_dfde :=_bfgf .extractPageText (string (_bafd ),_gagf ,_fba .Mult (_aegd ),_dddg +1,false );
if _dfde !=nil {_ga .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_dfde );return _dfde ;};_eafb =textResult {*_fbgd ,_cdad ,_dgbe };_bfgf ._cac [_bgga .String ()]=_eafb ;};_ddge ._cecg =_baff .CTM ;if _bfdd {_ga .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_ddge ._cecg );
};_bebe ._cgaf =append (_bebe ._cgaf ,_eafb ._cfgg ._cgaf ...);_bebe ._ggd =append (_bebe ._ggd ,_eafb ._cfgg ._ggd ...);_bebe ._ecdg =append (_bebe ._ecdg ,_eafb ._cfgg ._ecdg ...);_dce ._ecea +=_eafb ._fgdgd ;_dce ._abged +=_eafb ._gecc ;case "\u0072\u0067","\u0067","\u006b","\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_gbcd ._bgbd .ColorspaceNonStroking =_baff .ColorspaceNonStroking ;
_gbcd ._bgbd .ColorNonStroking =_baff .ColorNonStroking ;case "\u0052\u0047","\u0047","\u004b","\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_gbcd ._bgbd .ColorspaceStroking =_baff .ColorspaceStroking ;_gbcd ._bgbd .ColorStroking =_baff .ColorStroking ;
};return nil ;});_gbce =_adgg .Process (_cfca );if _bfgf ._gbc !=nil &&_bfgf ._gbc .IncludeAnnotations &&!_gdbg {for _ ,_ebef :=range _bfgf ._ebf {_fbeae ,_fcfe :=_agg .GetDict (_ebef .AP );if !_fcfe {continue ;};_feae ,_fcfe :=_fbeae .Get ("\u004e").(*_agg .PdfObjectStream );
if !_fcfe {continue ;};_gdbb ,_ccff :=_agg .DecodeStream (_feae );if _ccff !=nil {_ga .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u006f\u006e\u0020\u0064\u0065c\u006f\u0064\u0065\u0020\u0073\u0074\u0072\u0065\u0061\u006d:\u0020\u0025\u0076",_ccff );
continue ;};_aadbb :=_feae .PdfObjectDictionary .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s");_faa ,_ccff :=_bd .NewPdfPageResourcesFromDict (_aadbb .(*_agg .PdfObjectDictionary ));if _ccff !=nil {_ga .Log .Debug ("\u0045\u0072\u0072\u006f\u0072 \u006f\u006e\u0020\u0067\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0061\u006en\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0020\u0072\u0065\u0073\u006f\u0075\u0072\u0063\u0065\u0073\u003a\u0020\u0025\u0076",_ccff );
continue ;};_ddfa :=_daa .IdentityMatrix ();_cdgf ,_fcfe :=_feae .PdfObjectDictionary .Get ("\u004d\u0061\u0074\u0072\u0069\u0078").(*_agg .PdfObjectArray );if _fcfe {_ccdd ,_cgde :=_cdgf .GetAsFloat64Slice ();if _cgde !=nil {_ga .Log .Debug ("\u0045\u0072\u0072or\u0020\u006f\u006e\u0020\u0067\u0065\u0074\u0074\u0069n\u0067 \u0066l\u006fa\u0074\u0036\u0034\u0020\u0073\u006c\u0069\u0063\u0065\u003a\u0020\u0025\u0076",_cgde );
continue ;};if len (_ccdd )!=6{_ga .Log .Debug ("I\u006e\u0076\u0061\u006c\u0069\u0064 \u006d\u0061\u0074\u0072\u0069\u0078\u0020\u0073\u006ci\u0063\u0065\u0020l\u0065n\u0067\u0074\u0068");continue ;};_ddfa =_daa .NewMatrix (_ccdd [0],_ccdd [1],_ccdd [2],_ccdd [3],_ccdd [4],_ccdd [5]);
};_efdg ,_fcfe :=_bfgf ._cfc [_feae .String ()];if !_fcfe {_cfae ,_faga ,_bebg ,_aeec :=_bfgf .extractPageText (string (_gdbb ),_faa ,_ddfa ,_dddg +1,true );if _aeec !=nil {_ga .Log .Debug ("\u0045\u0052R\u004f\u0052\u0020\u0065x\u0074\u0072a\u0063\u0074\u0069\u006e\u0067\u0020\u0061\u006en\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0020\u0074\u0065\u0078\u0074s\u003a\u0020\u0025\u0076",_aeec );
continue ;};_efdg =textResult {*_cfae ,_faga ,_bebg };_bfgf ._cfc [_feae .String ()]=_efdg ;};_bebe ._cgaf =append (_bebe ._cgaf ,_efdg ._cfgg ._cgaf ...);_bebe ._ggd =append (_bebe ._ggd ,_efdg ._cfgg ._ggd ...);_bebe ._ecdg =append (_bebe ._ecdg ,_efdg ._cfgg ._ecdg ...);
_dce ._ecea +=_efdg ._fgdgd ;_dce ._abged +=_efdg ._gecc ;};};return _bebe ,_dce ._ecea ,_dce ._abged ,_gbce ;};func (_acbg *textLine )text ()string {var _febg []string ;for _ ,_fegdf :=range _acbg ._bbgge {if _fegdf ._fgeb {_febg =append (_febg ,"\u0020");
};_febg =append (_febg ,_fegdf ._egcfd );};_cfea :=_d .Join (_febg ,"");_ddfc :=_cd ([]rune (_cfea ));return _ddfc ._gc ;};func _eeebb (_dgeef ,_fdfba _daa .Point )bool {_eefga :=_fbg .Abs (_dgeef .X -_fdfba .X );_gafa :=_fbg .Abs (_dgeef .Y -_fdfba .Y );
return _bacbg (_gafa ,_eefga );};type rulingList []*ruling ;func _afggf (_geae []TextMark ,_dddga *int )[]TextMark {_eacab :=_geae [len (_geae )-1];_egfbf :=[]rune (_eacab .Text );if len (_egfbf )==1{_geae =_geae [:len (_geae )-1];_afgaa :=_geae [len (_geae )-1];
*_dddga =_afgaa .Offset +len (_afgaa .Text );}else {_adf :=_afddf (_eacab .Text );*_dddga +=len (_adf )-len (_eacab .Text );_eacab .Text =_adf ;};return _geae ;};func _agab (_bebd *textLine ,_dddgg []*textLine ,_agae ,_effef float64 )[]*textLine {_adadf :=[]*textLine {};
for _ ,_efdgg :=range _dddgg {if _efdgg ._gcdcg >=_agae {if _effef !=-1&&_efdgg ._gcdcg < _effef {if _efdgg .text ()!=_bebd .text (){if _fbg .Round (_efdgg .Llx )< _fbg .Round (_bebd .Llx ){break ;};_adadf =append (_adadf ,_efdgg );};}else if _effef ==-1{if _efdgg ._gcdcg ==_bebd ._gcdcg {if _efdgg .text ()!=_bebd .text (){_adadf =append (_adadf ,_efdgg );
};continue ;};_fbedg :=_aecg (_bebd ,_dddgg );if _fbedg !=-1&&_efdgg ._gcdcg <=_fbedg {_adadf =append (_adadf ,_efdgg );};};};};return _adadf ;};func (_acdg paraList )list ()[]*list {var _eecb []*textLine ;var _bbfbb []*textLine ;for _ ,_acded :=range _acdg {_cgda :=_acded .getListLines ();
_eecb =append (_eecb ,_cgda ...);_bbfbb =append (_bbfbb ,_acded ._dbed ...);};_befe :=_cefg (_eecb );_afdeg :=_cdcg (_bbfbb ,_befe );return _afdeg ;};func _ca (_cf []string ,_agb int ,_fg int ){for _caa ,_bdd :=_agb ,_fg -1;_caa < _bdd ;_caa ,_bdd =_caa +1,_bdd -1{_df :=_cf [_caa ];
_cf [_caa ]=_cf [_bdd ];_cf [_bdd ]=_df ;};};type textTable struct{_bd .PdfRectangle ;_eceag ,_bgfd int ;_dbdag bool ;_aegad map[uint64 ]*textPara ;_fcbc map[uint64 ]compositeCell ;};

// RangeOffset returns the TextMarks in `ma` that overlap text[start:end] in the extracted text.
// These are tm: `start` <= tm.Offset + len(tm.Text) && tm.Offset < `end` where
// `start` and `end` are offsets in the extracted text.
// NOTE: TextMarks can contain multiple characters. e.g. "ffi" for the  ligature so the first and
// last elements of the returned TextMarkArray may only partially overlap text[start:end].
func (_eafd *TextMarkArray )RangeOffset (start ,end int )(*TextMarkArray ,error ){if _eafd ==nil {return nil ,_cg .New ("\u006da\u003d\u003d\u006e\u0069\u006c");};if end < start {return nil ,_da .Errorf ("\u0065\u006e\u0064\u0020\u003c\u0020\u0073\u0074\u0061\u0072\u0074\u002e\u0020\u0052\u0061n\u0067\u0065\u004f\u0066\u0066\u0073\u0065\u0074\u0020\u006e\u006f\u0074\u0020d\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020\u0073\u0074\u0061\u0072t=\u0025\u0064\u0020\u0065\u006e\u0064\u003d\u0025\u0064\u0020",start ,end );
};_dbb :=len (_eafd ._aagc );if _dbb ==0{return _eafd ,nil ;};if start < _eafd ._aagc [0].Offset {start =_eafd ._aagc [0].Offset ;};if end > _eafd ._aagc [_dbb -1].Offset +1{end =_eafd ._aagc [_dbb -1].Offset +1;};_becd :=_gf .Search (_dbb ,func (_cece int )bool {return _eafd ._aagc [_cece ].Offset +len (_eafd ._aagc [_cece ].Text )-1>=start });
if !(0<=_becd &&_becd < _dbb ){_dddc :=_da .Errorf ("\u006f\u0075\u0074\u0020\u006f\u0066\u0020\u0072\u0061\u006e\u0067\u0065\u002e\u0020\u0073\u0074\u0061\u0072\u0074\u003d%\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009 \u006c\u0061\u0073\u0074\u003d%\u0076",start ,_becd ,_dbb ,_eafd ._aagc [0],_eafd ._aagc [_dbb -1]);
return nil ,_dddc ;};_deef :=_gf .Search (_dbb ,func (_egdg int )bool {return _eafd ._aagc [_egdg ].Offset > end -1});if !(0<=_deef &&_deef < _dbb ){_dgdf :=_da .Errorf ("\u006f\u0075\u0074\u0020\u006f\u0066\u0020r\u0061\u006e\u0067e\u002e\u0020\u0065n\u0064\u003d%\u0064\u0020\u0069\u0045\u006e\u0064=\u0025d \u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d\u0025\u0076",end ,_deef ,_dbb ,_eafd ._aagc [0],_eafd ._aagc [_dbb -1]);
return nil ,_dgdf ;};if _deef <=_becd {return nil ,_da .Errorf ("\u0069\u0045\u006e\u0064\u0020\u003c=\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003a\u0020\u0073\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u0065\u006ed\u003d\u0025\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020i\u0045n\u0064\u003d\u0025\u0064",start ,end ,_becd ,_deef );
};return &TextMarkArray {_aagc :_eafd ._aagc [_becd :_deef ]},nil ;};

// BBox returns the smallest axis-aligned rectangle that encloses all the TextMarks in `ma`.
func (_ged *TextMarkArray )BBox ()(_bd .PdfRectangle ,bool ){var _dfc _bd .PdfRectangle ;_afd :=false ;for _ ,_fafe :=range _ged ._aagc {if _fafe .Meta ||_eabcac (_fafe .Text ){continue ;};if _afd {_dfc =_fcee (_dfc ,_fafe .BBox );}else {_dfc =_fafe .BBox ;
_afd =true ;};};return _dfc ,_afd ;};func (_facgd paraList )findTableGrid (_gagdd gridTiling )(*textTable ,map[*textPara ]struct{}){_edebe :=len (_gagdd ._aecge );_afceff :=len (_gagdd ._bfefe );_edfd :=textTable {_dbdag :true ,_eceag :_edebe ,_bgfd :_afceff ,_aegad :make (map[uint64 ]*textPara ,_edebe *_afceff ),_fcbc :make (map[uint64 ]compositeCell ,_edebe *_afceff )};
_edfd .PdfRectangle =_gagdd .PdfRectangle ;_fbef :=make (map[*textPara ]struct{});_bafe :=int ((1.0-_fccff )*float64 (_edebe *_afceff ));_caceb :=0;if _accd {_ga .Log .Info ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0064\u0020\u0078\u0020%\u0064",_edebe ,_afceff );
};for _gcgff ,_deagb :=range _gagdd ._bfefe {_eeadf ,_cgccb :=_gagdd ._daaee [_deagb ];if !_cgccb {continue ;};for _gafaf ,_bgbe :=range _gagdd ._aecge {_befef ,_gafde :=_eeadf [_bgbe ];if !_gafde {continue ;};_gdae :=_facgd .inTile (_befef );if len (_gdae )==0{_caceb ++;
if _caceb > _bafe {if _accd {_ga .Log .Info ("\u0021\u006e\u0075m\u0045\u006d\u0070\u0074\u0079\u003d\u0025\u0064",_caceb );};return nil ,nil ;};}else {_edfd .putComposite (_gafaf ,_gcgff ,_gdae ,_befef .PdfRectangle );for _ ,_cfce :=range _gdae {_fbef [_cfce ]=struct{}{};
};};};};_fagca :=0;for _cdfcb :=0;_cdfcb < _edebe ;_cdfcb ++{_afdgc :=_edfd .get (_cdfcb ,0);if _afdgc ==nil ||!_afdgc ._cebf {_fagca ++;};};if _fagca ==0{if _accd {_ga .Log .Info ("\u0021\u006e\u0075m\u0048\u0065\u0061\u0064\u0065\u0072\u003d\u0030");
};return nil ,nil ;};_cgffd :=_edfd .reduceTiling (_gagdd ,_gagd );_cgffd =_cgffd .subdivide ();return _cgffd ,_fbef ;};func _cgbag (_egbe _bd .PdfRectangle )*ruling {return &ruling {_decfc :_gdbe ,_bbac :_egbe .Llx ,_gccd :_egbe .Lly ,_ggadf :_egbe .Ury };
};func (_beb *imageExtractContext )extractFormImages (_aef *_agg .PdfObjectName ,_egab _fdd .GraphicsState ,_bde *_bd .PdfPageResources )error {_dcd ,_bgc :=_bde .GetXObjectFormByName (*_aef );if _bgc !=nil {return _bgc ;};if _dcd ==nil {return nil ;};
_bagf ,_bgc :=_dcd .GetContentStream ();if _bgc !=nil {return _bgc ;};_bbde :=_dcd .Resources ;if _bbde ==nil {_bbde =_bde ;};_bgc =_beb .extractContentStreamImages (string (_bagf ),_bbde );if _bgc !=nil {return _bgc ;};_beb ._fad ++;return nil ;};func (_agfg *shapesState )devicePoint (_ffab ,_ffga float64 )_daa .Point {_gadd :=_agfg ._bdea .Mult (_agfg ._cecg );
_ffab ,_ffga =_gadd .Transform (_ffab ,_ffga );return _daa .NewPoint (_ffab ,_ffga );};func (_ebedb *wordBag )text ()string {_fbbda :=_ebedb .allWords ();_fbgf :=make ([]string ,len (_fbbda ));for _dgded ,_ecgfe :=range _fbbda {_fbgf [_dgded ]=_ecgfe ._egcfd ;
};return _d .Join (_fbgf ,"\u0020");};func (_ecdfc lineRuling )yMean ()float64 {return 0.5*(_ecdfc ._baceg .Y +_ecdfc ._egce .Y )};func _edae (_ebfe ,_acab float64 )bool {return _fbg .Abs (_ebfe -_acab )<=_dfea };func (_aba *shapesState )drawRectangle (_faabc ,_cabf ,_fgeg ,_ggfg float64 ){if _bfdd {_ffgc :=_aba .devicePoint (_faabc ,_cabf );
_abbbd :=_aba .devicePoint (_faabc +_fgeg ,_cabf +_ggfg );_febc :=_bd .PdfRectangle {Llx :_ffgc .X ,Lly :_ffgc .Y ,Urx :_abbbd .X ,Ury :_abbbd .Y };_ga .Log .Info ("d\u0072a\u0077\u0052\u0065\u0063\u0074\u0061\u006e\u0067l\u0065\u003a\u0020\u00256.\u0032\u0066",_febc );
};_aba .newSubPath ();_aba .moveTo (_faabc ,_cabf );_aba .lineTo (_faabc +_fgeg ,_cabf );_aba .lineTo (_faabc +_fgeg ,_cabf +_ggfg );_aba .lineTo (_faabc ,_cabf +_ggfg );_aba .closePath ();};func _fgaf (_bfbgg map[int ]intSet )[]int {_acbd :=make ([]int ,0,len (_bfbgg ));
for _eeae :=range _bfbgg {_acbd =append (_acbd ,_eeae );};_gf .Ints (_acbd );return _acbd ;};func (_afdg compositeCell )hasLines (_bgcbf []*textLine )bool {for _eebfe ,_eccc :=range _bgcbf {_egddc :=_fcdd (_afdg .PdfRectangle ,_eccc .PdfRectangle );if _bbae {_da .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u005e\u005e\u005e\u0069\u006e\u0074\u0065\u0072\u0073e\u0063t\u0073\u003d\u0025\u0074\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u000a",_egddc ,_eebfe ,len (_bgcbf ));
_da .Printf ("\u0020\u0020\u0020\u0020  \u005e\u005e\u005e\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025s\u000a",_afdg );_da .Printf ("\u0020 \u0020 \u0020\u0020\u0020\u006c\u0069\u006e\u0065\u003d\u0025\u0073\u000a",_eccc );};if _egddc {return true ;
};};return false ;};func _deda (_dggb string )bool {if _f .RuneCountInString (_dggb )< _bfgfa {return false ;};_cdcf ,_ebbd :=_f .DecodeLastRuneInString (_dggb );if _ebbd <=0||!_fb .Is (_fb .Hyphen ,_cdcf ){return false ;};_cdcf ,_ebbd =_f .DecodeLastRuneInString (_dggb [:len (_dggb )-_ebbd ]);
return _ebbd > 0&&!_fb .IsSpace (_cdcf );};func _dbgg (_dabb string ,_becf ,_gfb int ,_dcaf string )string {if _gfb > len (_dabb )-1{return _dabb [:_becf ]+_dcaf ;};return _dabb [:_becf ]+_dcaf +_dabb [_gfb :];};

// String returns a string descibing `i`.
func (_dgdd gridTile )String ()string {_cacce :=func (_eggc bool ,_cfdfg string )string {if _eggc {return _cfdfg ;};return "\u005f";};return _da .Sprintf ("\u00256\u002e2\u0066\u0020\u0025\u0031\u0073%\u0031\u0073%\u0031\u0073\u0025\u0031\u0073",_dgdd .PdfRectangle ,_cacce (_dgdd ._afddd ,"\u004c"),_cacce (_dgdd ._gbcc ,"\u0052"),_cacce (_dgdd ._febea ,"\u0042"),_cacce (_dgdd ._gdbbff ,"\u0054"));
};func (_eggg rulingList )intersections ()map[int ]intSet {var _bceg ,_bdac []int ;for _dafd ,_gcceb :=range _eggg {switch _gcceb ._decfc {case _gdbe :_bceg =append (_bceg ,_dafd );case _gcff :_bdac =append (_bdac ,_dafd );};};if len (_bceg )< _bebeb +1||len (_bdac )< _gfeaa +1{return nil ;
};if len (_bceg )+len (_bdac )> _bcaa {_ga .Log .Debug ("\u0069\u006e\u0074\u0065\u0072\u0073e\u0063\u0074\u0069\u006f\u006e\u0073\u003a\u0020\u0054\u004f\u004f\u0020\u004d\u0041\u004e\u0059\u0020\u0072\u0075\u006ci\u006e\u0067\u0073\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u003d\u0020%\u0064 \u0078\u0020\u0025\u0064",len (_eggg ),len (_bceg ),len (_bdac ));
return nil ;};_fedg :=make (map[int ]intSet ,len (_bceg )+len (_bdac ));for _ ,_accdf :=range _bceg {for _ ,_cege :=range _bdac {if _eggg [_accdf ].intersects (_eggg [_cege ]){if _ ,_cagb :=_fedg [_accdf ];!_cagb {_fedg [_accdf ]=make (intSet );};if _ ,_edeca :=_fedg [_cege ];
!_edeca {_fedg [_cege ]=make (intSet );};_fedg [_accdf ].add (_cege );_fedg [_cege ].add (_accdf );};};};return _fedg ;};func _efe (_adaaf ,_ecce bounded )float64 {return _adaaf .bbox ().Llx -_ecce .bbox ().Llx };

// RenderMode specifies the text rendering mode (Tmode), which determines whether showing text shall cause
// glyph outlines to be  stroked, filled, used as a clipping boundary, or some combination of the three.
// Stroking, filling, and clipping shall have the same effects for a text object as they do for a path object
// (see 8.5.3, "Path-Painting Operators" and 8.5.4, "Clipping Path Operators").
type RenderMode int ;func _edgb (_abff string ,_gga string )([][]int ,error ){_fdb ,_aed :=_ab .Compile (_abff );if _aed !=nil {return nil ,_da .Errorf ("\u0065\u0072\u0072\u006f\u0072\u0020c\u006f\u006d\u0070\u0069\u006c\u0069\u006e\u0067\u0020\u0072\u0065\u0067\u0065x\u0020\u0070\u0061\u0074\u0074\u0065\u0072n\u003a\u0020\u0025\u0077",_aed );
};_cbed :=_fdb .FindAllStringIndex (_gga ,-1);return _cbed ,nil ;};func (_dbcad rulingList )sort (){_gf .Slice (_dbcad ,_dbcad .comp )};

// String returns a human readable description of `s`.
func (_efac intSet )String ()string {var _degca []int ;for _gdec :=range _efac {if _efac .has (_gdec ){_degca =append (_degca ,_gdec );};};_gf .Ints (_degca );return _da .Sprintf ("\u0025\u002b\u0076",_degca );};func _beec (_egfaa []*textWord ,_addg int )[]*textWord {_eedca :=len (_egfaa );
copy (_egfaa [_addg :],_egfaa [_addg +1:]);return _egfaa [:_eedca -1];};func (_cbbg intSet )has (_efee int )bool {_ ,_gdgc :=_cbbg [_efee ];return _gdgc };

// Replace takes a pattern and replaces all the texts that much the pattern with `replacement`.
func (_cabb *Editor )Replace (pattern string ,replacement string ,pages []int )error {_cfb :=map[int ]Match {};for _ ,_ddda :=range pages {_bgcg ,_ebgg :=_cabb ._ffg .GetPage (_ddda );if _ebgg !=nil {return _ebgg ;};_abdf ,_ebgg :=New (_bgcg );if _ebgg !=nil {return _ebgg ;
};_ebgb ,_ ,_ ,_ebgg :=_abdf .ExtractPageText ();if _ebgg !=nil {return _ebgg ;};_ddga :="";_ffa :=_ebgb .Text ();_dfd ,_ebgg :=_edgb (pattern ,_ffa );if _ebgg !=nil {return _ebgg ;};_acc :=_ebgb .Marks ();_ebe :=[]Box {};for _ ,_ece :=range _dfd {_bcde ,_cfcd ,_aedd :=_ccg (_ece ,_acc ,pattern );
if _aedd !=nil {return _aedd ;};_ebggc :=_gdb (_bcde );_ebe =append (_ebe ,_cfcd );replacement ,_aedd =_dag (_ebggc ,replacement ,pattern );if _aedd !=nil {return _aedd ;};};_ddga =_ebgb .GetContentStreamOps ().String ();_cee :=Match {Pattern :pattern ,Indexes :_dfd ,Locations :_ebe };
_bgcg .SetContentStreams ([]string {_ddga },_agg .NewFlateEncoder ());_cfb [_ddda ]=_cee ;};return nil ;};func (_cfcde *textObject )setWordSpacing (_bacce float64 ){if _cfcde ==nil {return ;};_cfcde ._ebd ._edaa =_bacce ;};

// Box represents the bounding box of a given textMark on pdf page.
// This might be used for different kinds of high lighting after doing the search
type Box struct{BBox _bd .PdfRectangle ;};func _bacbg (_gbgca ,_faad float64 )bool {return _gbgca /_fbg .Max (_afee ,_faad )< _cgb };var _gaaaf =map[markKind ]string {_afeae :"\u0073\u0074\u0072\u006f\u006b\u0065",_adgf :"\u0066\u0069\u006c\u006c",_aacad :"\u0061u\u0067\u006d\u0065\u006e\u0074"};
func _eabcac (_acegf string )bool {for _ ,_dbbe :=range _acegf {if !_fb .IsSpace (_dbbe ){return false ;};};return true ;};

// TableCell is a cell in a TextTable.
type TableCell struct{_bd .PdfRectangle ;

// Text is the extracted text.
Text string ;

// Marks returns the TextMarks corresponding to the text in Text.
Marks TextMarkArray ;};

// String returns a string describing `ma`.
func (_gdaf TextMarkArray )String ()string {_ebfc :=len (_gdaf ._aagc );if _ebfc ==0{return "\u0045\u004d\u0050T\u0059";};_bef :=_gdaf ._aagc [0];_cdfg :=_gdaf ._aagc [_ebfc -1];return _da .Sprintf ("\u007b\u0054\u0045\u0058\u0054\u004d\u0041\u0052K\u0041\u0052\u0052AY\u003a\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025s\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d%\u0073\u007d",_ebfc ,_bef ,_cdfg );
};func (_cgfd paraList )merge ()*textPara {_ga .Log .Trace ("\u006d\u0065\u0072\u0067\u0065:\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_cgfd ));
if len (_cgfd )==0{return nil ;};_cgfd .sortReadingOrder ();_eedg :=_cgfd [0].PdfRectangle ;_dfdbg :=_cgfd [0]._dbed ;for _ ,_fdee :=range _cgfd [1:]{_eedg =_fcee (_eedg ,_fdee .PdfRectangle );_dfdbg =append (_dfdbg ,_fdee ._dbed ...);};return _eadg (_eedg ,_dfdbg );
};func (_eddg *textObject )setTextRise (_eabc float64 ){if _eddg ==nil {return ;};_eddg ._ebd ._ecgfg =_eabc ;};func (_dafa *textPara )writeText (_eaff _g .Writer ){if _dafa ._deed ==nil {_dafa .writeCellText (_eaff );return ;};for _efaga :=0;_efaga < _dafa ._deed ._bgfd ;
_efaga ++{for _dfacd :=0;_dfacd < _dafa ._deed ._eceag ;_dfacd ++{_cabea :=_dafa ._deed .get (_dfacd ,_efaga );if _cabea ==nil {_eaff .Write ([]byte ("\u0009"));}else {_ggaff (_cabea ._dbed );_cabea .writeCellText (_eaff );};_eaff .Write ([]byte ("\u0020"));
};if _efaga < _dafa ._deed ._bgfd -1{_eaff .Write ([]byte ("\u000a"));};};};func _ceab (_afge _bd .PdfRectangle )*ruling {return &ruling {_decfc :_gcff ,_bbac :_afge .Ury ,_gccd :_afge .Llx ,_ggadf :_afge .Urx };};func _ef (_cc int )bool {return (_cc &1)!=0};
func _gdb (_gfad *TextMarkArray )[]*TextMarkArray {_feb :=_gfad .Elements ();_gbfg :=len (_feb );var _bcg _agg .PdfObject ;_ddfe :=[]*TextMarkArray {};_cbg :=&TextMarkArray {};_cad :=-1;for _cff ,_eff :=range _feb {_edg :=_eff .DirectObject ;_cad =_eff .Index ;
if _edg ==nil {_bec :=_afe (_gfad ,_cff );if _bcg !=nil {if _bec ==-1||_bec > _cff {_ddfe =append (_ddfe ,_cbg );_cbg =&TextMarkArray {};};};}else if _bcg ==nil {if _cad ==0&&_cff > 0{_ddfe =append (_ddfe ,_cbg );_cbg =&TextMarkArray {};};}else {if _edg !=_bcg {_ddfe =append (_ddfe ,_cbg );
_cbg =&TextMarkArray {};};};_bcg =_edg ;_cbg .Append (_eff );if _cff ==(_gbfg -1){_ddfe =append (_ddfe ,_cbg );};};return _ddfe ;};func _fcda (_ebea ,_daea _bd .PdfRectangle )bool {return _ebea .Lly <=_daea .Ury &&_daea .Lly <=_ebea .Ury ;};func (_fggb paraList )applyTables (_gcdef []*textTable )paraList {var _debgd paraList ;
for _ ,_fdac :=range _gcdef {_debgd =append (_debgd ,_fdac .newTablePara ());};for _ ,_bcff :=range _fggb {if _bcff ._effb {continue ;};_debgd =append (_debgd ,_bcff );};return _debgd ;};func (_bgb *imageExtractContext )processOperand (_fde *_fdd .ContentStreamOperation ,_abd _fdd .GraphicsState ,_ebfg *_bd .PdfPageResources )error {if _fde .Operand =="\u0042\u0049"&&len (_fde .Params )==1{_gfcc ,_bagb :=_fde .Params [0].(*_fdd .ContentStreamInlineImage );
if !_bagb {return nil ;};if _ecf ,_dbe :=_agg .GetBoolVal (_gfcc .ImageMask );_dbe {if _ecf &&!_bgb ._fdgf .IncludeInlineStencilMasks {return nil ;};};return _bgb .extractInlineImage (_gfcc ,_abd ,_ebfg );}else if _fde .Operand =="\u0044\u006f"&&len (_fde .Params )==1{_egcb ,_fff :=_agg .GetName (_fde .Params [0]);
if !_fff {_ga .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");return _afb ;};_ ,_cbe :=_ebfg .GetXObjectByName (*_egcb );switch _cbe {case _bd .XObjectTypeImage :return _bgb .extractXObjectImage (_egcb ,_abd ,_ebfg );case _bd .XObjectTypeForm :return _bgb .extractFormImages (_egcb ,_abd ,_ebfg );
};}else if _bgb ._ge &&(_fde .Operand =="\u0073\u0063\u006e"||_fde .Operand =="\u0053\u0043\u004e")&&len (_fde .Params )==1{_bfg ,_fac :=_agg .GetName (_fde .Params [0]);if !_fac {_ga .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");
return _afb ;};_ce ,_fac :=_ebfg .GetPatternByName (*_bfg );if !_fac {_ga .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0050\u0061\u0074\u0074\u0065\u0072n\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");return nil ;};if _ce .IsTiling (){_aac :=_ce .GetAsTilingPattern ();
_cgdb ,_gbbc :=_aac .GetContentStream ();if _gbbc !=nil {return _gbbc ;};_gbbc =_bgb .extractContentStreamImages (string (_cgdb ),_aac .Resources );if _gbbc !=nil {return _gbbc ;};};}else if (_fde .Operand =="\u0063\u0073"||_fde .Operand =="\u0043\u0053")&&len (_fde .Params )>=1{_bgb ._ge =_fde .Params [0].String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e";
};return nil ;};func (_ccfge *textPara )toTextMarks (_gdade *int )[]TextMark {if _ccfge ._deed ==nil {return _ccfge .toCellTextMarks (_gdade );};var _bfge []TextMark ;for _cfaeg :=0;_cfaeg < _ccfge ._deed ._bgfd ;_cfaeg ++{for _ecbag :=0;_ecbag < _ccfge ._deed ._eceag ;
_ecbag ++{_gdag :=_ccfge ._deed .get (_ecbag ,_cfaeg );if _gdag ==nil {_bfge =_gfbe (_bfge ,_gdade ,"\u0009");}else {_eagf :=_gdag .toCellTextMarks (_gdade );_bfge =append (_bfge ,_eagf ...);};_bfge =_gfbe (_bfge ,_gdade ,"\u0020");};if _cfaeg < _ccfge ._deed ._bgfd -1{_bfge =_gfbe (_bfge ,_gdade ,"\u000a");
};};_cbffg :=_ccfge ._deed ;if _cbffg .isExportable (){_gdbbc :=_cbffg .toTextTable ();_bfge =_dfgc (_bfge ,&_gdbbc );};return _bfge ;};func _gfdag (_gdcc *wordBag ,_cfbbb int )*textLine {_abffa :=_gdcc .firstWord (_cfbbb );_fdba :=textLine {PdfRectangle :_abffa .PdfRectangle ,_ddec :_abffa ._babfe ,_gcdcg :_abffa ._bfbd };
_fdba .pullWord (_gdcc ,_abffa ,_cfbbb );return &_fdba ;};func _adebc (_gegge float64 ,_feacd int )int {if _feacd ==0{_feacd =1;};_eaed :=float64 (_feacd );return int (_fbg .Round (_gegge /_eaed )*_eaed );};func (_ccde *textPara )toCellTextMarks (_fbaa *int )[]TextMark {var _dddf []TextMark ;
for _decf ,_aebc :=range _ccde ._dbed {_baaaa :=_aebc .toTextMarks (_fbaa );_acaf :=_bggad &&_aebc .endsInHyphen ()&&_decf !=len (_ccde ._dbed )-1;if _acaf {_baaaa =_afggf (_baaaa ,_fbaa );};_dddf =append (_dddf ,_baaaa ...);if !(_acaf ||_decf ==len (_ccde ._dbed )-1){_dddf =_gfbe (_dddf ,_fbaa ,_bdgfd (_aebc ._gcdcg ,_ccde ._dbed [_decf +1]._gcdcg ));
};};return _dddf ;};

// String returns a string describing `pt`.
func (_gecd PageText )String ()string {_bcfcb :=_da .Sprintf ("P\u0061\u0067\u0065\u0054ex\u0074:\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073",len (_gecd ._cgaf ));_cgge :=[]string {"\u002d"+_bcfcb };for _ ,_gaf :=range _gecd ._cgaf {_cgge =append (_cgge ,_gaf .String ());
};_cgge =append (_cgge ,"\u002b"+_bcfcb );return _d .Join (_cgge ,"\u000a");};type gridTiling struct{_bd .PdfRectangle ;_aecge []float64 ;_bfefe []float64 ;_daaee map[float64 ]map[float64 ]gridTile ;};func (_cebfe *ruling )gridIntersecting (_ceafd *ruling )bool {return _edae (_cebfe ._gccd ,_ceafd ._gccd )&&_edae (_cebfe ._ggadf ,_ceafd ._ggadf );
};func _ccad (_bfea _agg .PdfObject ,_adagg _fd .Color )(_dc .Image ,error ){_ddfcd ,_dfdc :=_agg .GetStream (_bfea );if !_dfdc {return nil ,nil ;};_ecabd ,_cbacf :=_bd .NewXObjectImageFromStream (_ddfcd );if _cbacf !=nil {return nil ,_cbacf ;};_edcca ,_cbacf :=_ecabd .ToImage ();
if _cbacf !=nil {return nil ,_cbacf ;};return _efdcd (_edcca ,_adagg ),nil ;};

// String returns a description of `state`.
func (_gbadd *textState )String ()string {_defg :="\u005bN\u004f\u0054\u0020\u0053\u0045\u0054]";if _gbadd ._ecgfd !=nil {_defg =_gbadd ._ecgfd .BaseFont ();};return _da .Sprintf ("\u0074\u0063\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0077\u003d\u0025\u002e\u0032\u0066 \u0074f\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u003d\u0025\u0071",_gbadd ._aebd ,_gbadd ._edaa ,_gbadd ._abgb ,_defg );
};func _agba (_ggcf *list ,_aegb *string )string {_aeddf :=_d .Split (_ggcf ._ffc ,"\u000a");_cbcb :=&_d .Builder {};for _ ,_fdfe :=range _aeddf {if _fdfe !=""{_cbcb .WriteString (*_aegb );_cbcb .WriteString (_fdfe );_cbcb .WriteString ("\u000a");};};return _cbcb .String ();
};func (_bddgc rulingList )comp (_gbgg ,_dbecf int )bool {_aefg ,_bdbea :=_bddgc [_gbgg ],_bddgc [_dbecf ];_egcd ,_bgcbc :=_aefg ._decfc ,_bdbea ._decfc ;if _egcd !=_bgcbc {return _egcd > _bgcbc ;};if _egcd ==_feee {return false ;};_fbbdf :=func (_dgaga bool )bool {if _egcd ==_gcff {return _dgaga ;
};return !_dgaga ;};_agad ,_gfbfg :=_aefg ._bbac ,_bdbea ._bbac ;if _agad !=_gfbfg {return _fbbdf (_agad > _gfbfg );};_agad ,_gfbfg =_aefg ._gccd ,_bdbea ._gccd ;if _agad !=_gfbfg {return _fbbdf (_agad < _gfbfg );};return _fbbdf (_aefg ._ggadf < _bdbea ._ggadf );
};func (_acga *wordBag )allWords ()[]*textWord {var _cadd []*textWord ;for _ ,_abcf :=range _acga ._defc {_cadd =append (_cadd ,_abcf ...);};return _cadd ;};

// String returns a string describing `tm`.
func (_gdea TextMark )String ()string {_cdef :=_gdea .BBox ;var _fabg string ;if _gdea .Font !=nil {_fabg =_gdea .Font .String ();if len (_fabg )> 50{_fabg =_fabg [:50]+"\u002e\u002e\u002e";};};var _fggdd string ;if _gdea .Meta {_fggdd ="\u0020\u002a\u004d\u002a";
};return _da .Sprintf ("\u007b\u0054\u0065\u0078t\u004d\u0061\u0072\u006b\u003a\u0020\u0025\u0064\u0020%\u0071\u003d\u0025\u0030\u0032\u0078\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e2\u0066\u0029\u0020\u0028\u00256\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0025\u0073\u007d",_gdea .Offset ,_gdea .Text ,[]rune (_gdea .Text ),_cdef .Llx ,_cdef .Lly ,_cdef .Urx ,_cdef .Ury ,_fabg ,_fggdd );
};func (_edebb paraList )findTables (_dedfd []gridTiling )[]*textTable {_edebb .addNeighbours ();_gf .Slice (_edebb ,func (_gabdd ,_bedeg int )bool {return _gffd (_edebb [_gabdd ],_edebb [_bedeg ])< 0});var _ccge []*textTable ;if _fcbb {_cfge :=_edebb .findGridTables (_dedfd );
_ccge =append (_ccge ,_cfge ...);};if _dabe {_eegb :=_edebb .findTextTables ();_ccge =append (_ccge ,_eegb ...);};return _ccge ;};func _efdcd (_afgff *_bd .Image ,_eeaf _fd .Color )_dc .Image {_gbcdf ,_bgcgf :=int (_afgff .Width ),int (_afgff .Height );
_eefbf :=_dc .NewRGBA (_dc .Rect (0,0,_gbcdf ,_bgcgf ));for _dfdee :=0;_dfdee < _bgcgf ;_dfdee ++{for _fbegc :=0;_fbegc < _gbcdf ;_fbegc ++{_edbbf ,_bfff :=_afgff .ColorAt (_fbegc ,_dfdee );if _bfff !=nil {_ga .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_fbegc ,_dfdee );
continue ;};_gcebb ,_ecdgb ,_gafdc ,_ :=_edbbf .RGBA ();var _abfdd _fd .Color ;if _gcebb +_ecdgb +_gafdc ==0{_abfdd =_fd .Transparent ;}else {_abfdd =_eeaf ;};_eefbf .Set (_fbegc ,_dfdee ,_abfdd );};};return _eefbf ;};func (_dbac compositeCell )split (_cgcbdd ,_ecfdg []float64 )*textTable {_ccdaef :=len (_cgcbdd )+1;
_ffbff :=len (_ecfdg )+1;if _bbae {_ga .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0043\u0065l\u006c\u002e\u0073\u0070l\u0069\u0074\u003a\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a\u0009\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025\u0073\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073=\u0025\u0036\u002e\u0032\u0066\u000a\t\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d%\u0036\u002e\u0032\u0066",_ffbff ,_ccdaef ,_dbac ,_cgcbdd ,_ecfdg );
_da .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073\u000a",len (_dbac .paraList ));for _caba ,_eacd :=range _dbac .paraList {_da .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_caba ,_eacd .String ());};_da .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",len (_dbac .lines ()));
for _afegb ,_eade :=range _dbac .lines (){_da .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_afegb ,_eade );};};_cgcbdd =_begbg (_cgcbdd ,_dbac .Ury ,_dbac .Lly );_ecfdg =_begbg (_ecfdg ,_dbac .Llx ,_dbac .Urx );_ffaab :=make (map[uint64 ]*textPara ,_ffbff *_ccdaef );
_gfaf :=textTable {_eceag :_ffbff ,_bgfd :_ccdaef ,_aegad :_ffaab };_bcdee :=_dbac .paraList ;_gf .Slice (_bcdee ,func (_ecfeb ,_aedg int )bool {_ddgg ,_dbfgg :=_bcdee [_ecfeb ],_bcdee [_aedg ];_fcebc ,_edgd :=_ddgg .Lly ,_dbfgg .Lly ;if _fcebc !=_edgd {return _fcebc < _edgd ;
};return _ddgg .Llx < _dbfgg .Llx ;});_gfce :=make (map[uint64 ]_bd .PdfRectangle ,_ffbff *_ccdaef );for _dfed ,_cbccg :=range _cgcbdd [1:]{_eeegg :=_cgcbdd [_dfed ];for _gggcc ,_afef :=range _ecfdg [1:]{_bcdc :=_ecfdg [_gggcc ];_gfce [_adebf (_gggcc ,_dfed )]=_bd .PdfRectangle {Llx :_bcdc ,Urx :_afef ,Lly :_cbccg ,Ury :_eeegg };
};};if _bbae {_ga .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0043\u0065l\u006c\u002e\u0073\u0070\u006c\u0069\u0074\u003a\u0020\u0072e\u0063\u0074\u0073");_da .Printf ("\u0020\u0020\u0020\u0020");for _feff :=0;_feff < _ffbff ;_feff ++{_da .Printf ("\u0025\u0033\u0030\u0064\u002c\u0020",_feff );
};_da .Println ();for _eeecg :=0;_eeecg < _ccdaef ;_eeecg ++{_da .Printf ("\u0020\u0020\u0025\u0032\u0064\u003a",_eeecg );for _ggfcf :=0;_ggfcf < _ffbff ;_ggfcf ++{_da .Printf ("\u00256\u002e\u0032\u0066\u002c\u0020",_gfce [_adebf (_ggfcf ,_eeecg )]);};
_da .Println ();};};_ddggd :=func (_eacea *textLine )(int ,int ){for _eca :=0;_eca < _ccdaef ;_eca ++{for _cbgf :=0;_cbgf < _ffbff ;_cbgf ++{if _gfea (_gfce [_adebf (_cbgf ,_eca )],_eacea .PdfRectangle ){return _cbgf ,_eca ;};};};return -1,-1;};_efaa :=make (map[uint64 ][]*textLine ,_ffbff *_ccdaef );
for _ ,_aafg :=range _bcdee .lines (){_cdaab ,_gadf :=_ddggd (_aafg );if _cdaab < 0{continue ;};_efaa [_adebf (_cdaab ,_gadf )]=append (_efaa [_adebf (_cdaab ,_gadf )],_aafg );};for _dcec :=0;_dcec < len (_cgcbdd )-1;_dcec ++{_cfdf :=_cgcbdd [_dcec ];_aeaa :=_cgcbdd [_dcec +1];
for _bffd :=0;_bffd < len (_ecfdg )-1;_bffd ++{_fdga :=_ecfdg [_bffd ];_fdbe :=_ecfdg [_bffd +1];_bedc :=_bd .PdfRectangle {Llx :_fdga ,Urx :_fdbe ,Lly :_aeaa ,Ury :_cfdf };_gebc :=_efaa [_adebf (_bffd ,_dcec )];if len (_gebc )==0{continue ;};_ccdf :=_eadg (_bedc ,_gebc );
_gfaf .put (_bffd ,_dcec ,_ccdf );};};return &_gfaf ;};func (_adefb *textTable )bbox ()_bd .PdfRectangle {return _adefb .PdfRectangle };func (_gefd *wordBag )pullWord (_babd *textWord ,_babg int ,_baac map[int ]map[*textWord ]struct{}){_gefd .PdfRectangle =_fcee (_gefd .PdfRectangle ,_babd .PdfRectangle );
if _babd ._babfe > _gefd ._cfbb {_gefd ._cfbb =_babd ._babfe ;};_gefd ._defc [_babg ]=append (_gefd ._defc [_babg ],_babd );_baac [_babg ][_babd ]=struct{}{};};func (_debbb gridTile )contains (_bbba _bd .PdfRectangle )bool {if _debbb .numBorders ()< 3{return false ;
};if _debbb ._afddd &&_bbba .Llx < _debbb .Llx -_efed {return false ;};if _debbb ._gbcc &&_bbba .Urx > _debbb .Urx +_efed {return false ;};if _debbb ._febea &&_bbba .Lly < _debbb .Lly -_efed {return false ;};if _debbb ._gdbbff &&_bbba .Ury > _debbb .Ury +_efed {return false ;
};return true ;};func (_cafg *wordBag )highestWord (_fagc int ,_fbbee ,_bgcc float64 )*textWord {for _ ,_gbea :=range _cafg ._defc [_fagc ]{if _fbbee <=_gbea ._bfbd &&_gbea ._bfbd <=_bgcc {return _gbea ;};};return nil ;};func (_efdb *textTable )getComposite (_cacab ,_fcbe int )(paraList ,_bd .PdfRectangle ){_gdgfb ,_eedge :=_efdb ._fcbc [_adebf (_cacab ,_fcbe )];
if _bbae {_da .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0067\u0065\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u002d\u003e\u0025\u0073\u000a",_cacab ,_fcbe ,_gdgfb .String ());};if !_eedge {return nil ,_bd .PdfRectangle {};
};return _gdgfb .parasBBox ();};func (_febd rulingList )blocks (_cgfg ,_eecd *ruling )bool {if _cgfg ._gccd > _eecd ._ggadf ||_eecd ._gccd > _cgfg ._ggadf {return false ;};_gbbf :=_fbg .Max (_cgfg ._gccd ,_eecd ._gccd );_cfcca :=_fbg .Min (_cgfg ._ggadf ,_eecd ._ggadf );
if _cgfg ._bbac > _eecd ._bbac {_cgfg ,_eecd =_eecd ,_cgfg ;};for _ ,_fegab :=range _febd {if _cgfg ._bbac <=_fegab ._bbac +_dffe &&_fegab ._bbac <=_eecd ._bbac +_dffe &&_fegab ._gccd <=_cfcca &&_gbbf <=_fegab ._ggadf {return true ;};};return false ;};
func (_egec rulingList )splitSec ()[]rulingList {_gf .Slice (_egec ,func (_becg ,_ffcf int )bool {_fegcc ,_bbeaf :=_egec [_becg ],_egec [_ffcf ];if _fegcc ._gccd !=_bbeaf ._gccd {return _fegcc ._gccd < _bbeaf ._gccd ;};return _fegcc ._ggadf < _bbeaf ._ggadf ;
});_eafbf :=make (map[*ruling ]struct{},len (_egec ));_cbeac :=func (_cabbd *ruling )rulingList {_fbdd :=rulingList {_cabbd };_eafbf [_cabbd ]=struct{}{};for _ ,_fagf :=range _egec {if _ ,_egga :=_eafbf [_fagf ];_egga {continue ;};for _ ,_aeeca :=range _fbdd {if _fagf .alignsSec (_aeeca ){_fbdd =append (_fbdd ,_fagf );
_eafbf [_fagf ]=struct{}{};break ;};};};return _fbdd ;};_gbgff :=[]rulingList {_cbeac (_egec [0])};for _ ,_ecdfa :=range _egec [1:]{if _ ,_egdab :=_eafbf [_ecdfa ];_egdab {continue ;};_gbgff =append (_gbgff ,_cbeac (_ecdfa ));};return _gbgff ;};func _edda (_gffe *wordBag ,_cbee *textWord ,_aded float64 )bool {return _gffe .Urx <=_cbee .Llx &&_cbee .Llx < _gffe .Urx +_aded ;
};

// WriteToFile writes the edited content to `outputPath`.
func (_bff *Editor )WriteToFile (outputPath string )error {_effe ,_eda :=_bff ._ffg .ToWriter (nil );if _eda !=nil {return _da .Errorf ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0074\u006f\u0020c\u006f\u006e\u0076\u0065\u0072\u0074\u0020t\u006f\u0020\u0077\u0072\u0069\u0074\u0065\u0072\u0020\u0025\u0076",_eda );
};_effe .WriteToFile (outputPath );return nil ;};func (_cada *textObject )nextLine (){_cada .moveLP (0,-_cada ._ebd ._bbec )};func (_gcf *textObject )setTextLeading (_dbfb float64 ){if _gcf ==nil {return ;};_gcf ._ebd ._bbec =_dbfb ;};func (_cfab paraList )tables ()[]TextTable {var _gdabe []TextTable ;
if _bbae {_ga .Log .Info ("\u0070\u0061\u0072\u0061\u0073\u002e\u0074\u0061\u0062\u006c\u0065\u0073\u003a");};for _ ,_aceb :=range _cfab {_ageg :=_aceb ._deed ;if _ageg !=nil &&_ageg .isExportable (){_gdabe =append (_gdabe ,_ageg .toTextTable ());};};return _gdabe ;
};const (_fagd =1.0e-6;_acde =1.0e-4;_cgcbd =10;_eace =6;_bdee =0.5;_bcfb =0.12;_ffgb =0.19;_egdd =0.04;_fbcc =1.0;_dcbf =0.04;_dfcfa =12;_gebb =0.4;_cbddf =0.7;_bggc =1.0;_dfbdb =0.1;_afaf =1.4;_accb =0.46;_ceaf =0.02;_aaee =0.2;_gcdcf =0.5;_bfgfa =4;
_bcdf =4.0;_gbadc =6;_fccff =0.3;_dagaf =0.01;_gdab =0.02;_bebeb =2;_gfeaa =2;_bcaa =500;_aafb =4.0;_cgb =0.05;_afee =0.1;_dfea =2.0;_dffe =2.0;_efed =1.5;_gagd =3.0;_becfe =0.25;);func _begbg (_beedc []float64 ,_fbcd ,_ffaef float64 )[]float64 {_ebfac ,_abdba :=_fbcd ,_ffaef ;
if _abdba < _ebfac {_ebfac ,_abdba =_abdba ,_ebfac ;};_adabba :=make ([]float64 ,0,len (_beedc )+2);_adabba =append (_adabba ,_fbcd );for _ ,_gcded :=range _beedc {if _gcded <=_ebfac {continue ;}else if _gcded >=_abdba {break ;};_adabba =append (_adabba ,_gcded );
};_adabba =append (_adabba ,_ffaef );return _adabba ;};

// String returns a description of `w`.
func (_dbagbe *textWord )String ()string {return _da .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_dbagbe ._bfbd ,_dbagbe .PdfRectangle ,_dbagbe ._babfe ,_dbagbe ._egcfd );
};func (_eedbd intSet )add (_gbbg int ){_eedbd [_gbbg ]=struct{}{}};func _fgbb (_efdea string )(string ,bool ){_cbfc :=[]rune (_efdea );if len (_cbfc )!=1{return "",false ;};_cacfde ,_deeeg :=_ffbcd [_cbfc [0]];return _cacfde ,_deeeg ;};func _afe (_cgf *TextMarkArray ,_edd int )int {_bba :=_cgf .Elements ();
_aeg :=_edd -1;_edca :=_edd +1;_ebc :=-1;if _aeg >=0{_fadb :=_bba [_aeg ];_eab :=_fadb .ObjString ;_bdc :=len (_eab );_gaa :=_fadb .Index ;if _gaa +1< _bdc {return _aeg ;};};if _edca < len (_bba ){_fge :=_bba [_edca ];_cab :=_fge .ObjString ;if _cab [0]!=_fge .Text {return _edca ;
};};if _ebc ==-1&&_bba [_edd ].Text =="\u0020"{return _aeg ;};return _ebc ;};type stateStack []*textState ;func _cgeg (_acgf string ,_geede int )string {if len (_acgf )< _geede {return _acgf ;};return _acgf [:_geede ];};func (_eeed *textObject )checkOp (_aedb *_fdd .ContentStreamOperation ,_eccb int ,_adcc bool )(_dffd bool ,_cbb error ){if _eeed ==nil {var _cae []_agg .PdfObject ;
if _eccb > 0{_cae =_aedb .Params ;if len (_cae )> _eccb {_cae =_cae [:_eccb ];};};_ga .Log .Debug ("\u0025\u0023q \u006f\u0070\u0065r\u0061\u006e\u0064\u0020out\u0073id\u0065\u0020\u0074\u0065\u0078\u0074\u002e p\u0061\u0072\u0061\u006d\u0073\u003d\u0025+\u0076",_aedb .Operand ,_cae );
};if _eccb >=0{if len (_aedb .Params )!=_eccb {if _adcc {_cbb =_cg .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");};_ga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_aedb .Operand ,_eccb ,len (_aedb .Params ),_aedb .Params );
return false ,_cbb ;};};return true ,nil ;};func (_fdgbg paraList )topoOrder ()[]int {if _aada {_ga .Log .Info ("\u0074\u006f\u0070\u006f\u004f\u0072\u0064\u0065\u0072\u003a");};_eefg :=len (_fdgbg );_gdfd :=make ([]bool ,_eefg );_abef :=make ([]int ,0,_eefg );
_agbcg :=_fdgbg .llyOrdering ();var _bcfa func (_dfaf int );_bcfa =func (_ecfde int ){_gdfd [_ecfde ]=true ;for _ddbfd :=0;_ddbfd < _eefg ;_ddbfd ++{if !_gdfd [_ddbfd ]{if _fdgbg .readBefore (_agbcg ,_ecfde ,_ddbfd ){_bcfa (_ddbfd );};};};_abef =append (_abef ,_ecfde );
};for _bddg :=0;_bddg < _eefg ;_bddg ++{if !_gdfd [_bddg ]{_bcfa (_bddg );};};return _dfab (_abef );};

// Options extractor options.
type Options struct{

// DisableDocumentTags specifies whether to use the document tags during list extraction.
DisableDocumentTags bool ;

// ApplyCropBox will extract page text based on page cropbox if set to `true`.
ApplyCropBox bool ;

// Text extraction mode, default is ExtractionModeLayout.
ExtractionMode ExtractionMode ;

// IncludeAnnotations specifies whether to include annotations in the extraction process, default value is `false`.
IncludeAnnotations bool ;

// RelaxedMode specifies whether to use relaxed mode for processing the objects,
// If enabled UniPDF will automatically try to fix invalid parameters length and value.
// Default is `false`.
RelaxedMode bool ;};type wordBag struct{_bd .PdfRectangle ;_cfbb float64 ;_ffabd ,_eddge rulingList ;_ffff float64 ;_defc map[int ][]*textWord ;};func (_ccce rulingList )augmentGrid ()(rulingList ,rulingList ){_ecgaf ,_gcdbf :=_ccce .vertsHorzs ();if len (_ecgaf )==0||len (_gcdbf )==0{return _ecgaf ,_gcdbf ;
};_eagbf ,_adcab :=_ecgaf ,_gcdbf ;_bcbc :=_ecgaf .bbox ();_eedbb :=_gcdbf .bbox ();if _ddcaf {_ga .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0056\u003d\u0025\u0036\u002e\u0032\u0066",_bcbc );
_ga .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0048\u003d\u0025\u0036\u002e\u0032\u0066",_eedbb );};var _fafcc ,_bddb ,_bfbcc ,_baace *ruling ;if _eedbb .Llx < _bcbc .Llx -_dfea {_fafcc =&ruling {_cfec :_aacad ,_decfc :_gdbe ,_bbac :_eedbb .Llx ,_gccd :_bcbc .Lly ,_ggadf :_bcbc .Ury };
_ecgaf =append (rulingList {_fafcc },_ecgaf ...);};if _eedbb .Urx > _bcbc .Urx +_dfea {_bddb =&ruling {_cfec :_aacad ,_decfc :_gdbe ,_bbac :_eedbb .Urx ,_gccd :_bcbc .Lly ,_ggadf :_bcbc .Ury };_ecgaf =append (_ecgaf ,_bddb );};if _bcbc .Lly < _eedbb .Lly -_dfea {_bfbcc =&ruling {_cfec :_aacad ,_decfc :_gcff ,_bbac :_bcbc .Lly ,_gccd :_eedbb .Llx ,_ggadf :_eedbb .Urx };
_gcdbf =append (rulingList {_bfbcc },_gcdbf ...);};if _bcbc .Ury > _eedbb .Ury +_dfea {_baace =&ruling {_cfec :_aacad ,_decfc :_gcff ,_bbac :_bcbc .Ury ,_gccd :_eedbb .Llx ,_ggadf :_eedbb .Urx };_gcdbf =append (_gcdbf ,_baace );};if len (_ecgaf )+len (_gcdbf )==len (_ccce ){return _eagbf ,_adcab ;
};_ebgc :=append (_ecgaf ,_gcdbf ...);_ccce .log ("u\u006e\u0061\u0075\u0067\u006d\u0065\u006e\u0074\u0065\u0064");_ebgc .log ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0065d");return _ecgaf ,_gcdbf ;};func _egcbd (_fbeacd []*textLine ,_fccg ,_efca float64 )[]*textLine {var _eeegfb []*textLine ;
for _ ,_caaa :=range _fbeacd {if _fccg ==-1{if _caaa ._gcdcg > _efca {_eeegfb =append (_eeegfb ,_caaa );};}else {if _caaa ._gcdcg > _efca &&_caaa ._gcdcg < _fccg {_eeegfb =append (_eeegfb ,_caaa );};};};return _eeegfb ;};func _dfce (_babgc ,_aaeb _dc .Image )_dc .Image {_aaebb ,_agacd :=_aaeb .Bounds ().Size (),_babgc .Bounds ().Size ();
_agdga ,_abga :=_aaebb .X ,_aaebb .Y ;if _agacd .X > _agdga {_agdga =_agacd .X ;};if _agacd .Y > _abga {_abga =_agacd .Y ;};_fbefa :=_dc .Rect (0,0,_agdga ,_abga );if _aaebb .X !=_agdga ||_aaebb .Y !=_abga {_aeac :=_dc .NewRGBA (_fbefa );_gg .BiLinear .Scale (_aeac ,_fbefa ,_babgc ,_aaeb .Bounds (),_gg .Over ,nil );
_aaeb =_aeac ;};if _agacd .X !=_agdga ||_agacd .Y !=_abga {_eddbb :=_dc .NewRGBA (_fbefa );_gg .BiLinear .Scale (_eddbb ,_fbefa ,_babgc ,_babgc .Bounds (),_gg .Over ,nil );_babgc =_eddbb ;};_gcfe :=_dc .NewRGBA (_fbefa );_gg .DrawMask (_gcfe ,_fbefa ,_babgc ,_dc .Point {},_aaeb ,_dc .Point {},_gg .Over );
return _gcfe ;};type event struct{_agac float64 ;_fdde bool ;_gdde int ;};func _adgga (_egbdcc int ,_facd map[int ][]float64 )([]int ,int ){_bfaf :=make ([]int ,_egbdcc );_abfee :=0;for _cdggc :=0;_cdggc < _egbdcc ;_cdggc ++{_bfaf [_cdggc ]=_abfee ;_abfee +=len (_facd [_cdggc ])+1;
};return _bfaf ,_abfee ;};

// PageFonts represents extracted fonts on a PDF page.
type PageFonts struct{Fonts []Font ;};func (_afad *textTable )logComposite (_eccbg string ){if !_bbae {return ;};_ga .Log .Info ("\u007e~\u007eP\u0061\u0072\u0061\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_afad ._eceag ,_afad ._bgfd ,_eccbg );
_da .Printf ("\u0025\u0035\u0073 \u007c","");for _gcgf :=0;_gcgf < _afad ._eceag ;_gcgf ++{_da .Printf ("\u0025\u0033\u0064 \u007c",_gcgf );};_da .Println ("");_da .Printf ("\u0025\u0035\u0073 \u002b","");for _ebegg :=0;_ebegg < _afad ._eceag ;_ebegg ++{_da .Printf ("\u0025\u0033\u0073 \u002b","\u002d\u002d\u002d");
};_da .Println ("");for _cgbf :=0;_cgbf < _afad ._bgfd ;_cgbf ++{_da .Printf ("\u0025\u0035\u0064 \u007c",_cgbf );for _dgedf :=0;_dgedf < _afad ._eceag ;_dgedf ++{_bdgeg ,_ :=_afad ._fcbc [_adebf (_dgedf ,_cgbf )].parasBBox ();_da .Printf ("\u0025\u0033\u0064 \u007c",len (_bdgeg ));
};_da .Println ("");};_ga .Log .Info ("\u007e~\u007eT\u0065\u0078\u0074\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_afad ._eceag ,_afad ._bgfd ,_eccbg );_da .Printf ("\u0025\u0035\u0073 \u007c","");for _dacde :=0;_dacde < _afad ._eceag ;_dacde ++{_da .Printf ("\u0025\u0031\u0032\u0064\u0020\u007c",_dacde );
};_da .Println ("");_da .Printf ("\u0025\u0035\u0073 \u002b","");for _cbcecc :=0;_cbcecc < _afad ._eceag ;_cbcecc ++{_da .Print ("\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d-\u002d\u002d\u002d\u002b");};_da .Println ("");for _bded :=0;_bded < _afad ._bgfd ;
_bded ++{_da .Printf ("\u0025\u0035\u0064 \u007c",_bded );for _ggedc :=0;_ggedc < _afad ._eceag ;_ggedc ++{_eaafe ,_ :=_afad ._fcbc [_adebf (_ggedc ,_bded )].parasBBox ();_gcbc :="";_effd :=_eaafe .merge ();if _effd !=nil {_gcbc =_effd .text ();};_gcbc =_da .Sprintf ("\u0025\u0071",_cgeg (_gcbc ,12));
_gcbc =_gcbc [1:len (_gcbc )-1];_da .Printf ("\u0025\u0031\u0032\u0073\u0020\u007c",_gcbc );};_da .Println ("");};};func _befbf (_gdacf float64 )float64 {return _acde *_fbg .Round (_gdacf /_acde )};func _fbdbg (_cdfff []*textMark ,_bagga _bd .PdfRectangle ,_fafgd rulingList ,_eaddg []gridTiling ,_ecgc bool )paraList {_ga .Log .Trace ("\u006d\u0061\u006b\u0065\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065\u003a \u0025\u0064\u0020\u0065\u006c\u0065m\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065=\u0025\u002e\u0032\u0066",len (_cdfff ),_bagga );
if len (_cdfff )==0{return nil ;};_cbdaa :=_fecb (_cdfff ,_bagga ,false );if len (_cbdaa )==0{return nil ;};_fafgd .log ("\u006d\u0061\u006be\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065");_bdgdc ,_eagca :=_fafgd .vertsHorzs ();_eggb :=_fffe (_cbdaa ,_bagga .Ury ,_bdgdc ,_eagca );
_bdcb :=_ffdd (_eggb ,_bagga .Ury ,_bdgdc ,_eagca ,_ecgc );_bdcb =_eaba (_bdcb );_bdccc :=make (paraList ,0,len (_bdcb ));for _ ,_fbbgf :=range _bdcb {_fade :=_fbbgf .arrangeText (_ecgc );if _fade !=nil {_bdccc =append (_bdccc ,_fade );};};if len (_bdccc )>=_gbadc {_bdccc =_bdccc .extractTables (_eaddg );
};_bdccc .sortReadingOrder ();_bdccc .sortTopoOrder ();_bdccc .log ("\u0073\u006f\u0072te\u0064\u0020\u0069\u006e\u0020\u0072\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u006f\u0072\u0064\u0065\u0072");return _bdccc ;};func _cdff (_fbcf []*_bd .KValue ,_afdc map[int ][]*textLine ,_bgca _agg .PdfObject )[]*list {_fafg :=[]*list {};
for _ ,_ccfgg :=range _fbcf {_gbdfb :=_ccfgg .GetKDict ();_feag :=_gbdfb .GetChildren ();_fcff :=[]*textLine {};_bdcd :=[]*list {};_caad :=_gbdfb .S .(*_agg .PdfObjectName ).String ();_dbdf :=_feag [0];_gbdd :=_dbdf .GetMCID ();if len (_feag )==1&&_gbdd !=nil &&*_gbdd !=-1{if _gbdfb .Pg ==_bgca {_fcff =_afdc [*_gbdd ];
};}else {_bdcd =_cdff (_feag ,_afdc ,_bgca );};_gcdcd :=_eef (_fcff ,_caad ,_bdcd );_fafg =append (_fafg ,_gcdcd );};return _fafg ;};func (_adcg *textTable )growTable (){_bccc :=func (_gggb paraList ){_adcg ._bgfd ++;for _eecdf :=0;_eecdf < _adcg ._eceag ;
_eecdf ++{_fbfgc :=_gggb [_eecdf ];_adcg .put (_eecdf ,_adcg ._bgfd -1,_fbfgc );};};_fagfe :=func (_feded paraList ){_adcg ._eceag ++;for _fefff :=0;_fefff < _adcg ._bgfd ;_fefff ++{_cfef :=_feded [_fefff ];_adcg .put (_adcg ._eceag -1,_fefff ,_cfef );
};};if _cbbb {_adcg .log ("\u0067r\u006f\u0077\u0054\u0061\u0062\u006ce");};for _gedc :=0;;_gedc ++{_cabcc :=false ;_fdgc :=_adcg .getDown ();_affed :=_adcg .getRight ();if _cbbb {_da .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gedc ,_adcg );
_da .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0020\u0064\u006f\u0077\u006e\u003d\u0025\u0073\u000a",_fdgc );_da .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0072\u0069\u0067\u0068\u0074\u003d\u0025\u0073\u000a",_affed );};if _fdgc !=nil &&_affed !=nil {_bbaeg :=_fdgc [len (_fdgc )-1];
if !_bbaeg .taken ()&&_bbaeg ==_affed [len (_affed )-1]{_bccc (_fdgc );if _affed =_adcg .getRight ();_affed !=nil {_fagfe (_affed );_adcg .put (_adcg ._eceag -1,_adcg ._bgfd -1,_bbaeg );};_cabcc =true ;};};if !_cabcc &&_fdgc !=nil {_bccc (_fdgc );_cabcc =true ;
};if !_cabcc &&_affed !=nil {_fagfe (_affed );_cabcc =true ;};if !_cabcc {break ;};};};func (_bcbe rectRuling )asRuling ()(*ruling ,bool ){_edfa :=ruling {_decfc :_bcbe ._efffg ,Color :_bcbe .Color ,_cfec :_adgf };switch _bcbe ._efffg {case _gdbe :_edfa ._bbac =0.5*(_bcbe .Llx +_bcbe .Urx );
_edfa ._gccd =_bcbe .Lly ;_edfa ._ggadf =_bcbe .Ury ;_ebfbe ,_gcddc :=_bcbe .checkWidth (_bcbe .Llx ,_bcbe .Urx );if !_gcddc {if _bedb {_ga .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067V\u0065\u0072\u0074\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_bcbe );
};return nil ,false ;};_edfa ._dgee =_ebfbe ;case _gcff :_edfa ._bbac =0.5*(_bcbe .Lly +_bcbe .Ury );_edfa ._gccd =_bcbe .Llx ;_edfa ._ggadf =_bcbe .Urx ;_dfgf ,_fabf :=_bcbe .checkWidth (_bcbe .Lly ,_bcbe .Ury );if !_fabf {if _bedb {_ga .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067H\u006f\u0072\u007a\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_bcbe );
};return nil ,false ;};_edfa ._dgee =_dfgf ;default:_ga .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_bcbe ._efffg );return nil ,false ;};return &_edfa ,true ;};func (_gdgdg *textWord )computeText ()string {_geaa :=make ([]string ,len (_gdgdg ._dcgd ));
for _bccdf ,_bgbcc :=range _gdgdg ._dcgd {_geaa [_bccdf ]=_bgbcc ._aaba ;};return _d .Join (_geaa ,"");};func (_acbaf *wordBag )depthBand (_ddbb ,_gef float64 )[]int {if len (_acbaf ._defc )==0{return nil ;};return _acbaf .depthRange (_acbaf .getDepthIdx (_ddbb ),_acbaf .getDepthIdx (_gef ));
};func (_fbgba *textTable )compositeRowCorridors ()map[int ][]float64 {_bcfaf :=make (map[int ][]float64 ,_fbgba ._bgfd );if _bbae {_ga .Log .Info ("c\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0052\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073:\u0020h\u003d\u0025\u0064",_fbgba ._bgfd );
};for _ffdf :=1;_ffdf < _fbgba ._bgfd ;_ffdf ++{var _dgbb []compositeCell ;for _caaca :=0;_caaca < _fbgba ._eceag ;_caaca ++{if _cfebe ,_fcdc :=_fbgba ._fcbc [_adebf (_caaca ,_ffdf )];_fcdc {_dgbb =append (_dgbb ,_cfebe );};};if len (_dgbb )==0{continue ;
};_geafb :=_gbaf (_dgbb );_bcfaf [_ffdf ]=_geafb ;if _bbae {_da .Printf ("\u0020\u0020\u0020\u0025\u0032\u0064\u003a\u0020\u00256\u002e\u0032\u0066\u000a",_ffdf ,_geafb );};};return _bcfaf ;};

// String returns a description of `t`.
func (_gdgg *textTable )String ()string {return _da .Sprintf ("\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0025\u0074",_gdgg ._eceag ,_gdgg ._bgfd ,_gdgg ._dbdag );};func (_dgfe *textTable )reduce ()*textTable {_cafbd :=make ([]int ,0,_dgfe ._bgfd );
_bgad :=make ([]int ,0,_dgfe ._eceag );for _dbgff :=0;_dbgff < _dgfe ._bgfd ;_dbgff ++{if !_dgfe .emptyCompositeRow (_dbgff ){_cafbd =append (_cafbd ,_dbgff );};};for _bbfbd :=0;_bbfbd < _dgfe ._eceag ;_bbfbd ++{if !_dgfe .emptyCompositeColumn (_bbfbd ){_bgad =append (_bgad ,_bbfbd );
};};if len (_cafbd )==_dgfe ._bgfd &&len (_bgad )==_dgfe ._eceag {return _dgfe ;};_edaaf :=textTable {_dbdag :_dgfe ._dbdag ,_eceag :len (_bgad ),_bgfd :len (_cafbd ),_aegad :make (map[uint64 ]*textPara ,len (_bgad )*len (_cafbd ))};if _bbae {_ga .Log .Info ("\u0072\u0065\u0064\u0075ce\u003a\u0020\u0025\u0064\u0078\u0025\u0064\u0020\u002d\u003e\u0020\u0025\u0064\u0078%\u0064",_dgfe ._eceag ,_dgfe ._bgfd ,len (_bgad ),len (_cafbd ));
_ga .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_bgad );_ga .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_cafbd );};for _aebea ,_gcagd :=range _cafbd {for _cefaa ,_bcfeg :=range _bgad {_gbgce ,_fcfda :=_dgfe .getComposite (_bcfeg ,_gcagd );
if _gbgce ==nil {continue ;};if _bbae {_da .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_cefaa ,_aebea ,_bcfeg ,_gcagd ,_cgeg (_gbgce .merge ().text (),50));};_edaaf .putComposite (_cefaa ,_aebea ,_gbgce ,_fcfda );
};};return &_edaaf ;};type fontEntry struct{_bbcd *_bd .PdfFont ;_fface int64 ;};func _ebdg (_dbag byte )bool {for _ ,_dfcg :=range _bcfgcg {if []byte (_dfcg )[0]==_dbag {return true ;};};return false ;};func _fgfe (_egceb ,_cacfd ,_aafa float64 )rulingKind {if _egceb >=_aafa &&_bacbg (_cacfd ,_egceb ){return _gcff ;
};if _cacfd >=_aafa &&_bacbg (_egceb ,_cacfd ){return _gdbe ;};return _feee ;};func (_becb paraList )reorder (_cabc []int ){_gcabd :=make (paraList ,len (_becb ));for _cdca ,_cgca :=range _cabc {_gcabd [_cdca ]=_becb [_cgca ];};copy (_becb ,_gcabd );};
const (_bgdf =false ;_adab =false ;_afegg =false ;_gdeb =false ;_bfdd =false ;_fcdg =false ;_acgc =false ;_aada =false ;_ebagc =false ;_ceda =_ebagc &&true ;_geed =_ceda &&false ;_gfff =_ebagc &&true ;_bbae =false ;_cbbb =_bbae &&false ;_acdb =_bbae &&true ;
_ddcaf =false ;_fbfc =_ddcaf &&false ;_gfbd =_ddcaf &&false ;_accd =_ddcaf &&true ;_bedb =_ddcaf &&false ;_gcaf =_ddcaf &&false ;);func _gfcf (_cfga _bd .PdfRectangle )rulingKind {_bfef :=_cfga .Width ();_fdgeg :=_cfga .Height ();if _bfef > _fdgeg {if _bfef >=_aafb {return _gcff ;
};}else {if _fdgeg >=_aafb {return _gdbe ;};};return _feee ;};func (_cbbd *shapesState )lineTo (_gdac ,_dcg float64 ){if _bfdd {_ga .Log .Info ("\u006c\u0069\u006eeT\u006f\u0028\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0070\u003d\u0025\u002e\u0032\u0066",_gdac ,_dcg ,_cbbd .devicePoint (_gdac ,_dcg ));
};_cbbd .addPoint (_gdac ,_dcg );};func (_aggb lineRuling )asRuling ()(*ruling ,bool ){_gdda :=ruling {_decfc :_aggb ._ggaa ,Color :_aggb .Color ,_cfec :_afeae };switch _aggb ._ggaa {case _gdbe :_gdda ._bbac =_aggb .xMean ();_gdda ._gccd =_fbg .Min (_aggb ._baceg .Y ,_aggb ._egce .Y );
_gdda ._ggadf =_fbg .Max (_aggb ._baceg .Y ,_aggb ._egce .Y );case _gcff :_gdda ._bbac =_aggb .yMean ();_gdda ._gccd =_fbg .Min (_aggb ._baceg .X ,_aggb ._egce .X );_gdda ._ggadf =_fbg .Max (_aggb ._baceg .X ,_aggb ._egce .X );default:_ga .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_aggb ._ggaa );
return nil ,false ;};return &_gdda ,true ;};func _abee (_abde map[float64 ]map[float64 ]gridTile )[]float64 {_edag :=make ([]float64 ,0,len (_abde ));for _aagg :=range _abde {_edag =append (_edag ,_aagg );};_gf .Float64s (_edag );_cged :=len (_edag );for _abgfc :=0;
_abgfc < _cged /2;_abgfc ++{_edag [_abgfc ],_edag [_cged -1-_abgfc ]=_edag [_cged -1-_abgfc ],_edag [_abgfc ];};return _edag ;};func (_faec rulingList )primaries ()[]float64 {_gfdb :=make (map[float64 ]struct{},len (_faec ));for _ ,_bbbf :=range _faec {_gfdb [_bbbf ._bbac ]=struct{}{};
};_adbg :=make ([]float64 ,len (_gfdb ));_ddae :=0;for _gfef :=range _gfdb {_adbg [_ddae ]=_gfef ;_ddae ++;};_gf .Float64s (_adbg );return _adbg ;};func (_abgbe paraList )inTile (_gefdg gridTile )paraList {var _bbbb paraList ;for _ ,_edfgf :=range _abgbe {if _gefdg .contains (_edfgf .PdfRectangle ){_bbbb =append (_bbbb ,_edfgf );
};};if _bbae {_da .Printf ("\u0020 \u0020\u0069\u006e\u0054i\u006c\u0065\u003a\u0020\u0020%\u0073 \u0069n\u0073\u0069\u0064\u0065\u003d\u0025\u0064\n",_gefdg ,len (_bbbb ));for _faaeg ,_babb :=range _bbbb {_da .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_faaeg ,_babb );
};_da .Println ("");};return _bbbb ;};func (_adabb *ruling )encloses (_bcfeb ,_fceef float64 )bool {return _adabb ._gccd -_dfea <=_bcfeb &&_fceef <=_adabb ._ggadf +_dfea ;};func (_baae *textTable )newTablePara ()*textPara {_dggab :=_baae .computeBbox ();
_ceeda :=&textPara {PdfRectangle :_dggab ,_gacea :_dggab ,_deed :_baae };if _bbae {_ga .Log .Info ("\u006e\u0065w\u0054\u0061\u0062l\u0065\u0050\u0061\u0072\u0061\u003a\u0020\u0025\u0073",_ceeda );};return _ceeda ;};func (_degc *textMark )inDiacriticArea (_eadf *textMark )bool {_bgea :=_degc .Llx -_eadf .Llx ;
_ffbf :=_degc .Urx -_eadf .Urx ;_eccd :=_degc .Lly -_eadf .Lly ;return _fbg .Abs (_bgea +_ffbf )< _degc .Width ()*_gcdcf &&_fbg .Abs (_eccd )< _degc .Height ()*_gcdcf ;};func (_fede *wordBag )removeWord (_acffa *textWord ,_edea int ){_ggacb :=_fede ._defc [_edea ];
_ggacb =_bfdcf (_ggacb ,_acffa );if len (_ggacb )==0{delete (_fede ._defc ,_edea );}else {_fede ._defc [_edea ]=_ggacb ;};};type intSet map[int ]struct{};func (_cccf *textTable )reduceTiling (_ecgbc gridTiling ,_gebg float64 )*textTable {_ccee :=make ([]int ,0,_cccf ._bgfd );
_abbab :=make ([]int ,0,_cccf ._eceag );_gfeb :=_ecgbc ._aecge ;_feecb :=_ecgbc ._bfefe ;for _fbeb :=0;_fbeb < _cccf ._bgfd ;_fbeb ++{_aaaf :=_fbeb > 0&&_fbg .Abs (_feecb [_fbeb -1]-_feecb [_fbeb ])< _gebg &&_cccf .emptyCompositeRow (_fbeb );if !_aaaf {_ccee =append (_ccee ,_fbeb );
};};for _gedb :=0;_gedb < _cccf ._eceag ;_gedb ++{_gdebfa :=_gedb < _cccf ._eceag -1&&_fbg .Abs (_gfeb [_gedb +1]-_gfeb [_gedb ])< _gebg &&_cccf .emptyCompositeColumn (_gedb );if !_gdebfa {_abbab =append (_abbab ,_gedb );};};if len (_ccee )==_cccf ._bgfd &&len (_abbab )==_cccf ._eceag {return _cccf ;
};_eega :=textTable {_dbdag :_cccf ._dbdag ,_eceag :len (_abbab ),_bgfd :len (_ccee ),_fcbc :make (map[uint64 ]compositeCell ,len (_abbab )*len (_ccee ))};if _bbae {_ga .Log .Info ("\u0072\u0065\u0064\u0075c\u0065\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0025d\u0078%\u0064\u0020\u002d\u003e\u0020\u0025\u0064x\u0025\u0064",_cccf ._eceag ,_cccf ._bgfd ,len (_abbab ),len (_ccee ));
_ga .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_abbab );_ga .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_ccee );};for _eegbd ,_fcgfa :=range _ccee {for _cfed ,_dafgc :=range _abbab {_ebdf ,_cdadc :=_cccf .getComposite (_dafgc ,_fcgfa );
if len (_ebdf )==0{continue ;};if _bbae {_da .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_cfed ,_eegbd ,_dafgc ,_fcgfa ,_cgeg (_ebdf .merge ().text (),50));};_eega .putComposite (_cfed ,_eegbd ,_ebdf ,_cdadc );
};};return &_eega ;};func _fbc (_afgab *_fdd .ContentStreamOperation )(float64 ,error ){if len (_afgab .Params )!=1{_gbfcc :=_cg .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");
_ga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_afgab .Operand ,1,len (_afgab .Params ),_afgab .Params );
return 0.0,_gbfcc ;};return _agg .GetNumberAsFloat (_afgab .Params [0]);};func _egeag (_dbga ,_dbbd _daa .Point )bool {return _dbga .X ==_dbbd .X &&_dbga .Y ==_dbbd .Y };func (_aafc *Editor )getMatches (_gace string ,_dgf []int )(map[int ]Match ,map[int ][]*TextMarkArray ,error ){_baa :=map[int ]Match {};
_bcf :=map[int ][]*TextMarkArray {};for _ ,_bcd :=range _dgf {_bbg ,_fdgg :=_aafc ._ffg .GetPage (_bcd );if _fdgg !=nil {return nil ,nil ,_fdgg ;};_eac ,_fdgg :=New (_bbg );if _fdgg !=nil {return nil ,nil ,_fdgg ;};_gdg ,_ ,_ ,_fdgg :=_eac .ExtractPageText ();
if _fdgg !=nil {return nil ,nil ,_fdgg ;};_cfd :=_gdg .Text ();_ecc ,_fdgg :=_edgb (_gace ,_cfd );if _fdgg !=nil {return nil ,nil ,_fdgg ;};if len (_ecc )==0{_ga .Log .Info ("\u004e\u006f\u0020\u006d\u0061\u0074\u0063\u0068\u0020\u0066\u006f\u0075\u006e\u0064\u0020f\u006fr\u0020\u0025\u0073\u0020\u006f\u006e\u0020\u0070\u0061\u0067\u0065\u0020\u0025\u0064",_gace ,_bcd );
};_fdf :=_gdg .Marks ();_efd :=[]Box {};for _ ,_gca :=range _ecc {_ ,_abba ,_bacc :=_ccg (_gca ,_fdf ,_gace );if _bacc !=nil {return nil ,nil ,_bacc ;};_efd =append (_efd ,_abba );};_fbb :=Match {Pattern :_gace ,Indexes :_ecc ,Locations :_efd };_baa [_bcd ]=_fbb ;
};return _baa ,_bcf ,nil ;};func _gaebc (_cgfe float64 )bool {return _fbg .Abs (_cgfe )< _fagd };func _ggcea (_gfdf ,_eeec bounded )float64 {_bgddc :=_ccaa (_gfdf ,_eeec );if !_gaebc (_bgddc ){return _bgddc ;};return _efe (_gfdf ,_eeec );};

// New returns an Extractor instance for extracting content from the input PDF page.
func New (page *_bd .PdfPage )(*Extractor ,error ){return NewWithOptions (page ,nil )};func _adeb (_beed _daa .Point )_daa .Matrix {return _daa .TranslationMatrix (_beed .X ,_beed .Y )};

// String returns a string describing the current state of the textState stack.
func (_fggg *stateStack )String ()string {_gegc :=[]string {_da .Sprintf ("\u002d\u002d\u002d\u002d f\u006f\u006e\u0074\u0020\u0073\u0074\u0061\u0063\u006b\u003a\u0020\u0025\u0064",len (*_fggg ))};for _bcae ,_eecc :=range *_fggg {_eccg :="\u003c\u006e\u0069l\u003e";
if _eecc !=nil {_eccg =_eecc .String ();};_gegc =append (_gegc ,_da .Sprintf ("\u0009\u0025\u0032\u0064\u003a\u0020\u0025\u0073",_bcae ,_eccg ));};return _d .Join (_gegc ,"\u000a");};const _bbdg =10;type textLine struct{_bd .PdfRectangle ;_gcdcg float64 ;
_bbgge []*textWord ;_ddec float64 ;};func (_eebd *ruling )alignsSec (_egbdc *ruling )bool {const _ffaed =_dffe +1.0;return _eebd ._gccd -_ffaed <=_egbdc ._ggadf &&_egbdc ._gccd -_ffaed <=_eebd ._ggadf ;};func _cd (_cdg []rune )BidiText {_afa :=-1;_ggb :=false ;
_bbd :=true ;_daf :=len (_cdg );_ccc :=make ([]string ,_daf );_be :=make ([]string ,_daf );if _daf ==0||_ggb {return _fee (string (_cdg ),_bbd ,_ggb );};_ggg :=0;for _bee ,_fbd :=range _cdg {_ccc [_bee ]=string (_fbd );_caf :="\u004c";if _fbd <=0x00ff{_caf =_dg [_fbd ];
}else if 0x0590<=_fbd &&_fbd <=0x05f4{_caf ="\u0052";}else if 0x0600<=_fbd &&_fbd <=0x06ff{_abf :=_fbd &0xff;if int (_abf )>=len (_eb ){_ga .Log .Debug ("\u0042\u0069\u0064\u0069\u003a\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0055n\u0069c\u006f\u0064\u0065\u0020\u0063\u0068\u0061\u0072\u0061\u0063\u0074\u0065\u0072\u0020"+string (_fbd ));
};_caf =_eb [_fbd &0xff];}else if (0x0700<=_fbd &&_fbd <=0x08ac)||(0xfb50<=_fbd &&_fbd <=0xfdff)||(0xfe70<=_fbd &&_fbd <=0xfeff){_caf ="\u0041\u004c";};if _caf =="\u0052"||_caf =="\u0041\u004c"||_caf =="\u0041\u004e"{_ggg ++;};_be [_bee ]=_caf ;};if _ggg ==0{_bbd =true ;
return _fee (string (_cdg ),_bbd ,false );};if _afa ==-1{if float64 (_ggg )/float64 (_daf )< 0.3&&_daf > 4{_bbd =true ;_afa =0;}else {_bbd =false ;_afa =1;};};var _dad []int ;for range _cdg {_dad =append (_dad ,_afa );};_bbe :="\u004c";if _ef (_afa ){_bbe ="\u0052";
};_de :=_bbe ;_aeb :=_de ;_cca :=_de ;for _bea :=range _cdg {if _be [_bea ]=="\u004e\u0053\u004d"{_be [_bea ]=_cca ;}else {_cca =_be [_bea ];};};_cca =_de ;var _bf string ;for _fbf :=range _cdg {_bf =_be [_fbf ];switch _bf {case "\u0045\u004e":if _cca =="\u0041\u004c"{_be [_fbf ]="\u0041\u004e";
}else {_be [_fbf ]="\u0045\u004e";};case "\u0052","\u004c","\u0041\u004c":_cca =_bf ;};};for _dabg :=range _cdg {_fgb :=_be [_dabg ];if _fgb =="\u0041\u004c"{_be [_dabg ]="\u0052";};};for _dge :=1;_dge < (len (_cdg )-1);_dge ++{if _be [_dge ]=="\u0045\u0053"&&_be [_dge -1]=="\u0045\u004e"&&_be [_dge +1]=="\u0045\u004e"{_be [_dge ]="\u0045\u004e";
};if _be [_dge ]=="\u0043\u0053"&&(_be [_dge -1]=="\u0045\u004e"||_be [_dge -1]=="\u0041\u004e")&&_be [_dge +1]==_be [_dge -1]{_be [_dge ]=_be [_dge -1];};};for _adc :=range _cdg {if _be [_adc ]=="\u0045\u004e"{for _ccd :=_adc -1;_ccd >=0;_ccd --{if _be [_ccd ]!="\u0045\u0054"{break ;
};_be [_ccd ]="\u0045\u004e";};for _bc :=_adc +1;_bc < _daf ;_bc ++{if _be [_bc ]!="\u0045\u0054"{break ;};_be [_bc ]="\u0045\u004e";};};};for _gbg :=range _cdg {_aff :=_be [_gbg ];if _aff =="\u0057\u0053"||_aff =="\u0045\u0053"||_aff =="\u0045\u0054"||_aff =="\u0043\u0053"{_be [_gbg ]="\u004f\u004e";
};};_cca ="\u0073\u006f\u0072";for _fdg :=range _cdg {_aab :=_be [_fdg ];switch _aab {case "\u0045\u004e":if _cca =="\u004c"{_be [_fdg ]="\u004c";}else {_be [_fdg ]="\u0045\u004e";};case "\u0052","\u004c":_cca =_aab ;};};for _ff :=0;_ff < len (_cdg );_ff ++{if _be [_ff ]=="\u004f\u004e"{_ggea :=_dab (_be ,_ff +1,"\u004f\u004e");
_aaa :=_aeb ;if _ff > 0{_aaa =_be [_ff -1];};_gae :=_aeb ;if _ggea +1< _daf {_gae =_be [_ggea +1];};if _aaa !="\u004c"{_aaa ="\u0052";};if _gae !="\u004c"{_gae ="\u0052";};if _aaa ==_gae {_dgc (_be ,_ff ,_ggea ,_aaa );};_ff =_ggea -1;};};for _fa :=range _cdg {if _be [_fa ]=="\u004f\u004e"{_be [_fa ]=_bbe ;
};};for _abg :=range _cdg {_ebg :=_be [_abg ];if _fbe (_dad [_abg ]){switch _ebg {case "\u0052":_dad [_abg ]++;case "\u0041\u004e","\u0045\u004e":_dad [_abg ]+=2;};}else if _ebg =="\u004c"||_ebg =="\u0041\u004e"||_ebg =="\u0045\u004e"{_dad [_abg ]++;};
};_dd :=-1;_ggc :=99;var _ddd int ;for _gd :=0;_gd < len (_dad );_gd ++{_ddd =_dad [_gd ];if _dd < _ddd {_dd =_ddd ;};if _ggc > _ddd &&_ef (_ddd ){_ggc =_ddd ;};};for _fbge :=_dd ;_fbge >=_ggc ;_fbge --{_gbb :=-1;for _dcc :=0;_dcc < len (_dad );_dcc ++{if _dad [_dcc ]< _fbge {if _gbb >=0{_ca (_ccc ,_gbb ,_dcc );
_gbb =-1;};}else if _gbb < 0{_gbb =_dcc ;};};if _gbb >=0{_ca (_ccc ,_gbb ,len (_dad ));};};for _beea :=0;_beea < len (_ccc );_beea ++{_bae :=_ccc [_beea ];if _bae =="\u003c"||_bae =="\u003e"{_ccc [_beea ]="";};};return _fee (_d .Join (_ccc ,""),_bbd ,false );
};

// Len returns the number of TextMarks in `ma`.
func (_fgfd *TextMarkArray )Len ()int {if _fgfd ==nil {return 0;};return len (_fgfd ._aagc );};func (_baadc *subpath )isQuadrilateral ()bool {if len (_baadc ._eacf )< 4||len (_baadc ._eacf )> 5{return false ;};if len (_baadc ._eacf )==5{_fbbbe :=_baadc ._eacf [0];
_cdffg :=_baadc ._eacf [4];if _fbbbe .X !=_cdffg .X ||_fbbbe .Y !=_cdffg .Y {return false ;};};return true ;};

// Match defines the structure for each match, including pattern, indexes, and locations.
type Match struct{Pattern string ;Indexes [][]int ;Locations []Box ;};func _ebac (_fagad float64 )int {var _ffee int ;if _fagad >=0{_ffee =int (_fagad /_eace );}else {_ffee =int (_fagad /_eace )-1;};return _ffee ;};func _dcecf (_cacad ,_dfgca int )int {if _cacad < _dfgca {return _cacad ;
};return _dfgca ;};func (_gaabb rulingList )secMinMax ()(float64 ,float64 ){_dgbf ,_febga :=_gaabb [0]._gccd ,_gaabb [0]._ggadf ;for _ ,_cfac :=range _gaabb [1:]{if _cfac ._gccd < _dgbf {_dgbf =_cfac ._gccd ;};if _cfac ._ggadf > _febga {_febga =_cfac ._ggadf ;
};};return _dgbf ,_febga ;};

// TextMark represents extracted text on a page with information regarding both textual content,
// formatting (font and size) and positioning.
// It is the smallest unit of text on a PDF page, typically a single character.
//
// getBBox() in test_text.go shows how to compute bounding boxes of substrings of extracted text.
// The following code extracts the text on PDF page `page` into `text` then finds the bounding box
// `bbox` of substring `term` in `text`.
//
//	ex, _ := New(page)
//	// handle errors
//	pageText, _, _, err := ex.ExtractPageText()
//	// handle errors
//	text := pageText.Text()
//	textMarks := pageText.Marks()
//
//		start := strings.Index(text, term)
//	 end := start + len(term)
//	 spanMarks, err := textMarks.RangeOffset(start, end)
//	 // handle errors
//	 bbox, ok := spanMarks.BBox()
//	 // handle errors
type TextMark struct{

// Text is the extracted text.
Text string ;

// Original is the text in the PDF. It has not been decoded like `Text`.
Original string ;

// BBox is the bounding box of the text.
BBox _bd .PdfRectangle ;

// Font is the font the text was drawn with.
Font *_bd .PdfFont ;

// FontSize is the font size the text was drawn with.
FontSize float64 ;

// Offset is the offset of the start of TextMark.Text in the extracted text. If you do this
//   text, textMarks := pageText.Text(), pageText.Marks()
//   marks := textMarks.Elements()
// then marks[i].Offset is the offset of marks[i].Text in text.
Offset int ;

// Meta is set true for spaces and line breaks that we insert in the extracted text. We insert
// spaces (line breaks) when we see characters that are over a threshold horizontal (vertical)
//  distance  apart. See wordJoiner (lineJoiner) in PageText.computeViews().
Meta bool ;

// FillColor is the fill color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
FillColor _fd .Color ;

// StrokeColor is the stroke color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
StrokeColor _fd .Color ;

// Orientation is the text orientation
Orientation int ;

// DirectObject is the underlying PdfObject (Text Object) that represents the visible texts. This is introduced to get
// a simple access to the TextObject in case editing or replacment of some text is needed. E.g during redaction.
DirectObject _agg .PdfObject ;

// ObjString is a decoded string operand of a text-showing operator. It has the same value as `Text` attribute except
// when many glyphs are represented with the same Text Object that contains multiple length string operand in which case
// ObjString spans more than one character string that falls in different TextMark objects.
ObjString []string ;Tw float64 ;Th float64 ;Tc float64 ;Index int ;_fgae bool ;_fegb *TextTable ;};

// ExtractFonts returns all font information from the page extractor, including
// font name, font type, the raw data of the embedded font file (if embedded), font descriptor and more.
//
// The argument `previousPageFonts` is used when trying to build a complete font catalog for multiple pages or the entire document.
// The entries from `previousPageFonts` are added to the returned result unless already included in the page, i.e. no duplicate entries.
//
// NOTE: If previousPageFonts is nil, all fonts from the page will be returned. Use it when building up a full list of fonts for a document or page range.
func (_gfd *Extractor )ExtractFonts (previousPageFonts *PageFonts )(*PageFonts ,error ){_cdd :=PageFonts {};_egf :=_cdd .extractPageResourcesToFont (_gfd ._deb );if _egf !=nil {return nil ,_egf ;};if previousPageFonts !=nil {for _ ,_ed :=range previousPageFonts .Fonts {if !_abb (_cdd .Fonts ,_ed .FontName ){_cdd .Fonts =append (_cdd .Fonts ,_ed );
};};};return &PageFonts {Fonts :_cdd .Fonts },nil ;};func _bfdcf (_edecd []*textWord ,_fgefd *textWord )[]*textWord {for _faega ,_ccccc :=range _edecd {if _ccccc ==_fgefd {return _beec (_edecd ,_faega );};};_ga .Log .Error ("\u0072\u0065\u006d\u006f\u0076e\u0057\u006f\u0072\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u0073\u0020\u0064o\u0065\u0073\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",_fgefd );
return nil ;};var _dg =[]string {"\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0053","\u0042","\u0053","\u0057\u0053","\u0042","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042","\u0042","\u0042","\u0053","\u0057\u0053","\u004f\u004e","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0045\u0053","\u0043\u0053","\u0045\u0053","\u0043\u0053","\u0043\u0053","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0043\u0053","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0043\u0053","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u0042\u004e","\u004f\u004e","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u004e","\u0045\u004e","\u004f\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0045\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c"};
func _dfgc (_cggg []TextMark ,_abdb *TextTable )[]TextMark {var _gdccd []TextMark ;for _ ,_dgbed :=range _cggg {_dgbed ._fgae =true ;_dgbed ._fegb =_abdb ;_gdccd =append (_gdccd ,_dgbed );};return _gdccd ;};func _cffd (_cfcaa []TextMark ,_fefe *int ,_geaf TextMark )[]TextMark {_geaf .Offset =*_fefe ;
_cfcaa =append (_cfcaa ,_geaf );*_fefe +=len (_geaf .Text );return _cfcaa ;};func (_cedd *wordBag )getDepthIdx (_gfaa float64 )int {_fgde :=_cedd .depthIndexes ();_fcac :=_ebac (_gfaa );if _fcac < _fgde [0]{return _fgde [0];};if _fcac > _fgde [len (_fgde )-1]{return _fgde [len (_fgde )-1];
};return _fcac ;};func _acce (_dccc ,_fgdga _bd .PdfRectangle )bool {return _fgdga .Llx <=_dccc .Urx &&_dccc .Llx <=_fgdga .Urx ;};func (_adbb *textLine )pullWord (_defaa *wordBag ,_gccgf *textWord ,_gbgc int ){_adbb .appendWord (_gccgf );_defaa .removeWord (_gccgf ,_gbgc );
};func (_adcb lineRuling )xMean ()float64 {return 0.5*(_adcb ._baceg .X +_adcb ._egce .X )};func _caeef (_eaaec []pathSection ){if _acde < 0.0{return ;};if _ddcaf {_ga .Log .Info ("\u0067\u0072\u0061\u006e\u0075\u006c\u0061\u0072\u0069\u007a\u0065\u003a\u0020\u0025\u0064 \u0073u\u0062\u0070\u0061\u0074\u0068\u0020\u0073\u0065\u0063\u0074\u0069\u006f\u006e\u0073",len (_eaaec ));
};for _gecf ,_agecb :=range _eaaec {for _dgdc ,_cfega :=range _agecb ._cbcg {for _fddd ,_bgffg :=range _cfega ._eacf {_cfega ._eacf [_fddd ]=_daa .Point {X :_befbf (_bgffg .X ),Y :_befbf (_bgffg .Y )};if _ddcaf {_dabbd :=_cfega ._eacf [_fddd ];if !_egeag (_bgffg ,_dabbd ){_geccd :=_daa .Point {X :_dabbd .X -_bgffg .X ,Y :_dabbd .Y -_bgffg .Y };
_da .Printf ("\u0025\u0034d \u002d\u0020\u00254\u0064\u0020\u002d\u0020%4d\u003a %\u002e\u0032\u0066\u0020\u2192\u0020\u0025.2\u0066\u0020\u0028\u0025\u0067\u0029\u000a",_gecf ,_dgdc ,_fddd ,_bgffg ,_dabbd ,_geccd );};};};};};};const _cbec =1.0/1000.0;
func _feged (_dadc *list )[]*list {var _ffaf []*list ;for _ ,_deccf :=range _dadc ._aece {switch _deccf ._egfbb {case "\u004c\u0049":_dgba :=_deff (_deccf );_ddfge :=_feged (_deccf );_ebaf :=_eef (_dgba ,"\u0062\u0075\u006c\u006c\u0065\u0074",_ddfge );
_bdfd :=_ceeb (_dgba ,"");_ebaf ._ffc =_bdfd ;_ffaf =append (_ffaf ,_ebaf );case "\u004c\u0042\u006fd\u0079":return _feged (_deccf );case "\u004c":_cebd :=_feged (_deccf );_ffaf =append (_ffaf ,_cebd ...);return _ffaf ;};};return _ffaf ;};

// Tables returns the tables extracted from the page.
func (_cafd PageText )Tables ()[]TextTable {if _bbae {_ga .Log .Info ("\u0054\u0061\u0062\u006c\u0065\u0073\u003a\u0020\u0025\u0064",len (_cafd ._abc ));};return _cafd ._abc ;};func _bccd (_fbfd map[float64 ][]*textLine )[]float64 {_aaea :=[]float64 {};
for _fcfea :=range _fbfd {_aaea =append (_aaea ,_fcfea );};_gf .Float64s (_aaea );return _aaea ;};func (_bffc *wordBag )maxDepth ()float64 {return _bffc ._ffff -_bffc .Lly };func _bced (_ggceaf string ,_acfe []rulingList ){_ga .Log .Info ("\u0024\u0024 \u0025\u0064\u0020g\u0072\u0069\u0064\u0073\u0020\u002d\u0020\u0025\u0073",len (_acfe ),_ggceaf );
for _ddafg ,_dbedb :=range _acfe {_da .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ddafg ,_dbedb .String ());};};func _aaab (_fegg ,_abad _daa .Point ,_ccfd _fd .Color )(*ruling ,bool ){_bgffa :=lineRuling {_baceg :_fegg ,_egce :_abad ,_ggaa :_eccae (_fegg ,_abad ),Color :_ccfd };
if _bgffa ._ggaa ==_feee {return nil ,false ;};return _bgffa .asRuling ();};func (_addedb *stateStack )push (_baab *textState ){_gdga :=*_baab ;*_addedb =append (*_addedb ,&_gdga );};func _eacag (_fegbf ,_bagd _daa .Point )bool {_fgge :=_fbg .Abs (_fegbf .X -_bagd .X );
_ebggfe :=_fbg .Abs (_fegbf .Y -_bagd .Y );return _bacbg (_fgge ,_ebggfe );};

// String returns a description of `b`.
func (_ede *wordBag )String ()string {var _fadc []string ;for _ ,_agbb :=range _ede .depthIndexes (){_ceceb :=_ede ._defc [_agbb ];for _ ,_gcga :=range _ceceb {_fadc =append (_fadc ,_gcga ._egcfd );};};return _da .Sprintf ("\u0025.\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065=\u0025\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0025\u0071",_ede .PdfRectangle ,_ede ._cfbb ,len (_fadc ),_fadc );
};func _fcee (_fdebf ,_gcag _bd .PdfRectangle )_bd .PdfRectangle {return _bd .PdfRectangle {Llx :_fbg .Min (_fdebf .Llx ,_gcag .Llx ),Lly :_fbg .Min (_fdebf .Lly ,_gcag .Lly ),Urx :_fbg .Max (_fdebf .Urx ,_gcag .Urx ),Ury :_fbg .Max (_fdebf .Ury ,_gcag .Ury )};
};func _dab (_ee []string ,_bb int ,_gb string )int {_ba :=_bb ;for ;_ba < len (_ee );_ba ++{if _ee [_ba ]!=_gb {return _ba ;};};return _ba ;};func (_ecgbb gridTiling )complete ()bool {for _ ,_dbbf :=range _ecgbb ._daaee {for _ ,_afeaa :=range _dbbf {if !_afeaa .complete (){return false ;
};};};return true ;};

// Font represents the font properties on a PDF page.
type Font struct{PdfFont *_bd .PdfFont ;

// FontName represents Font Name from font properties.
FontName string ;

// FontType represents Font Subtype entry in the font dictionary inside page resources.
// Examples : type0, Type1, MMType1, Type3, TrueType, CIDFont.
FontType string ;

// ToUnicode is true if font provides a `ToUnicode` mapping.
ToUnicode bool ;

// IsCID is true if underlying font is a composite font.
// Composite font is represented by a font dictionary whose Subtype is `Type0`
IsCID bool ;

// IsSimple is true if font is simple font.
// A simple font is limited to only 8 bit (255) character codes.
IsSimple bool ;

// FontData represents the raw data of the embedded font file.
// It can have format TrueType (TTF), PostScript Font (PFB) or Compact Font Format (CCF).
// FontData value can be indicates from `FontFile`, `FontFile2` or `FontFile3` inside Font Descriptor.
// At most, only one of `FontFile`, `FontFile2` or `FontFile3` will be FontData value.
FontData []byte ;

// FontFileName is a name representing the font. it has format:
// (Font Name) + (Font Type Extension), example: helvetica.ttf.
FontFileName string ;

// FontDescriptor represents metrics and other attributes inside font properties from PDF Structure (Font Descriptor).
FontDescriptor *_bd .PdfFontDescriptor ;};func _gbbcd (_gaaf []byte ,_gba *_bd .PdfFont )string {_afgb :=_gba .BytesToCharcodes (_gaaf );_baf ,_gaga ,_gdf :=_gba .CharcodesToStrings (_afgb ,"");if _gdf > 0{_ga .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_gaga ,_gdf );
};_bfd :=_d .Join (_baf ,"");return _bfd ;};func _fbe (_gge int )bool {return (_gge &1)==0};func _dgc (_af []string ,_bad int ,_ad int ,_fe string ){for _aaf :=_bad ;_aaf < _ad ;_aaf ++{_af [_aaf ]=_fe ;};};func (_aafe paraList )lines ()[]*textLine {var _gdca []*textLine ;
for _ ,_gbdef :=range _aafe {_gdca =append (_gdca ,_gbdef ._dbed ...);};return _gdca ;};func (_ggbgd *textTable )computeBbox ()_bd .PdfRectangle {var _afgec _bd .PdfRectangle ;_fgefee :=false ;for _caec :=0;_caec < _ggbgd ._bgfd ;_caec ++{for _abfc :=0;
_abfc < _ggbgd ._eceag ;_abfc ++{_cgcbag :=_ggbgd .get (_abfc ,_caec );if _cgcbag ==nil {continue ;};if !_fgefee {_afgec =_cgcbag .PdfRectangle ;_fgefee =true ;}else {_afgec =_fcee (_afgec ,_cgcbag .PdfRectangle );};};};return _afgec ;};func (_cdc *stateStack )empty ()bool {return len (*_cdc )==0};
func (_fdge *textObject )reset (){_fdge ._dgga =_daa .IdentityMatrix ();_fdge ._egfd =_daa .IdentityMatrix ();_fdge ._ccgd =nil ;};func (_adag rulingList )connections (_bedca map[int ]intSet ,_fceg int )intSet {_eefb :=make (intSet );_gcaab :=make (intSet );
var _fgdf func (int );_fgdf =func (_afged int ){if !_gcaab .has (_afged ){_gcaab .add (_afged );for _bgeb :=range _adag {if _bedca [_bgeb ].has (_afged ){_eefb .add (_bgeb );};};for _ggbd :=range _adag {if _eefb .has (_ggbd ){_fgdf (_ggbd );};};};};_fgdf (_fceg );
return _eefb ;};type bounded interface{bbox ()_bd .PdfRectangle };func (_cfda *textObject )getFontDirect (_ggeec string )(*_bd .PdfFont ,error ){_aeddd ,_acefg :=_cfda .getFontDict (_ggeec );if _acefg !=nil {return nil ,_acefg ;};_dgabd ,_acefg :=_bd .NewPdfFontFromPdfObject (_aeddd );
if _acefg !=nil {_ga .Log .Debug ("\u0067\u0065\u0074\u0046\u006f\u006e\u0074\u0044\u0069\u0072\u0065\u0063\u0074\u003a\u0020\u004e\u0065\u0077Pd\u0066F\u006f\u006e\u0074\u0046\u0072\u006f\u006d\u0050\u0064\u0066\u004f\u0062j\u0065\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u006e\u0061\u006d\u0065\u003d%\u0023\u0071\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ggeec ,_acefg );
};return _dgabd ,_acefg ;};func _ebga (_bgcfa *textWord ,_aeeeb float64 ,_gdef ,_eedc rulingList )*wordBag {_acg :=_ebac (_bgcfa ._bfbd );_agee :=[]*textWord {_bgcfa };_defa :=wordBag {_defc :map[int ][]*textWord {_acg :_agee },PdfRectangle :_bgcfa .PdfRectangle ,_cfbb :_bgcfa ._babfe ,_ffff :_aeeeb ,_ffabd :_gdef ,_eddge :_eedc };
return &_defa ;};