//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

//
// Package extractor is used for quickly extracting PDF content through a simple interface.
// Currently offers functionality for extracting textual content.
//
package extractor ;import (_eg "bytes";_g "errors";_ded "fmt";_ae "github.com/unidoc/unipdf/v3/common";_aef "github.com/unidoc/unipdf/v3/contentstream";_cb "github.com/unidoc/unipdf/v3/core";_cbf "github.com/unidoc/unipdf/v3/internal/license";_ag "github.com/unidoc/unipdf/v3/internal/textencoding";
_ge "github.com/unidoc/unipdf/v3/internal/transform";_fa "github.com/unidoc/unipdf/v3/model";_b "golang.org/x/text/unicode/norm";_dd "golang.org/x/xerrors";_c "image/color";_f "io";_de "math";_d "regexp";_ff "sort";_db "strings";_gc "unicode";_e "unicode/utf8";
);func (_egac *textLine )toTextMarks (_afde *int )[]TextMark {var _egab []TextMark ;for _ ,_afdbf :=range _egac ._afbd {if _afdbf ._aegg {_egab =_fffb (_egab ,_afde ,"\u0020");};_afbbe :=_afdbf .toTextMarks (_afde );_egab =append (_egab ,_afbbe ...);};
return _egab ;};const (_dfcad =false ;_added =false ;_bbbd =false ;_adaa =false ;_fdef =false ;_adag =false ;_bfaag =false ;_fdcd =false ;_eaga =false ;_cgdd =_eaga &&true ;_gded =_cgdd &&false ;_decd =_eaga &&true ;_dcfc =false ;_gcea =_dcfc &&false ;
_dgcg =_dcfc &&true ;_cddgc =false ;_bgbe =_cddgc &&false ;_eeff =_cddgc &&false ;_gedb =_cddgc &&true ;_aggg =_cddgc &&false ;_abgg =_cddgc &&false ;);func (_cefe *wordBag )applyRemovals (_ecdab map[int ]map[*textWord ]struct{}){for _bdee ,_bgcc :=range _ecdab {if len (_bgcc )==0{continue ;
};_cdcg :=_cefe ._cfe [_bdee ];_cgab :=len (_cdcg )-len (_bgcc );if _cgab ==0{delete (_cefe ._cfe ,_bdee );continue ;};_daeag :=make ([]*textWord ,_cgab );_cadc :=0;for _ ,_gacc :=range _cdcg {if _ ,_gdfb :=_bgcc [_gacc ];!_gdfb {_daeag [_cadc ]=_gacc ;
_cadc ++;};};_cefe ._cfe [_bdee ]=_daeag ;};};func _eddg (_dfffd ,_gfda bounded )float64 {return _dfffd .bbox ().Llx -_gfda .bbox ().Llx };var _gbde =TextMark {Text :"\u005b\u0058\u005d",Original :"\u0020",Meta :true ,FillColor :_c .White ,StrokeColor :_c .White };


// TextTable represents a table.
// Cells are ordered top-to-bottom, left-to-right.
// Cells[y] is the (0-offset) y'th row in the table.
// Cells[y][x] is the (0-offset) x'th column in the table.
type TextTable struct{W ,H int ;Cells [][]TableCell ;};func _afegg (_ddcab []*textMark ,_eebg _fa .PdfRectangle )[]*textWord {var _fbfeb []*textWord ;var _adae *textWord ;if _added {_ae .Log .Info ("\u006d\u0061\u006beT\u0065\u0078\u0074\u0057\u006f\u0072\u0064\u0073\u003a\u0020\u0025\u0064\u0020\u006d\u0061\u0072\u006b\u0073",len (_ddcab ));
};_fgfb :=func (){if _adae !=nil {_bgbc :=_adae .computeText ();if !_cdcfc (_bgbc ){_adae ._gcead =_bgbc ;_fbfeb =append (_fbfeb ,_adae );if _added {_ae .Log .Info ("\u0061\u0064\u0064Ne\u0077\u0057\u006f\u0072\u0064\u003a\u0020\u0025\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",len (_fbfeb )-1,_adae .String ());
for _abfgd ,_abccd :=range _adae ._dded {_ded .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_abfgd ,_abccd .String ());};};};_adae =nil ;};};for _ ,_efdf :=range _ddcab {if _ebcbe &&_adae !=nil &&len (_adae ._dded )> 0{_ggfdf :=_adae ._dded [len (_adae ._dded )-1];
_gceb ,_bddc :=_fagfc (_efdf ._ebed );_bcde ,_bfd :=_fagfc (_ggfdf ._ebed );if _bddc &&!_bfd &&_ggfdf .inDiacriticArea (_efdf ){_adae .addDiacritic (_gceb );continue ;};if _bfd &&!_bddc &&_efdf .inDiacriticArea (_ggfdf ){_adae ._dded =_adae ._dded [:len (_adae ._dded )-1];
_adae .appendMark (_efdf ,_eebg );_adae .addDiacritic (_bcde );continue ;};};_gebef :=_cdcfc (_efdf ._ebed );if _gebef {_fgfb ();continue ;};if _adae ==nil &&!_gebef {_adae =_geaag ([]*textMark {_efdf },_eebg );continue ;};_afgf :=_adae ._ddffg ;_bdgd :=_de .Abs (_aafg (_eebg ,_efdf )-_adae ._ecdaa )/_afgf ;
_cgbd :=_edda (_efdf ,_adae )/_afgf ;if _cgbd >=_bgeb ||!(-_gfbg <=_cgbd &&_bdgd <=_dgaa ){_fgfb ();_adae =_geaag ([]*textMark {_efdf },_eebg );continue ;};_adae .appendMark (_efdf ,_eebg );};_fgfb ();return _fbfeb ;};func (_cag *textObject )reset (){_cag ._abd =_ge .IdentityMatrix ();
_cag ._ceff =_ge .IdentityMatrix ();_cag ._adg =nil ;};func (_gbfa *imageExtractContext )extractXObjectImage (_cgg *_cb .PdfObjectName ,_efb _aef .GraphicsState ,_ebf *_fa .PdfPageResources )error {_abf ,_ :=_ebf .GetXObjectByName (*_cgg );if _abf ==nil {return nil ;
};_be ,_bdf :=_gbfa ._cf [_abf ];if !_bdf {_ccf ,_fbc :=_ebf .GetXObjectImageByName (*_cgg );if _fbc !=nil {return _fbc ;};if _ccf ==nil {return nil ;};_dec ,_fbc :=_ccf .ToImage ();if _fbc !=nil {return _fbc ;};_be =&cachedImage {_fb :_dec ,_cg :_ccf .ColorSpace };
_gbfa ._cf [_abf ]=_be ;};_ddf :=_be ._fb ;_cbde :=_be ._cg ;_fcfc ,_dea :=_cbde .ImageToRGB (*_ddf );if _dea !=nil {return _dea ;};_ae .Log .Debug ("@\u0044\u006f\u0020\u0043\u0054\u004d\u003a\u0020\u0025\u0073",_efb .CTM .String ());_fdf :=ImageMark {Image :&_fcfc ,Width :_efb .CTM .ScalingFactorX (),Height :_efb .CTM .ScalingFactorY (),Angle :_efb .CTM .Angle ()};
_fdf .X ,_fdf .Y =_efb .CTM .Translation ();_gbfa ._bfa =append (_gbfa ._bfa ,_fdf );_gbfa ._bag ++;return nil ;};func _agcf (_ddfdc ,_cgfe _ge .Point )bool {_ffgd :=_de .Abs (_ddfdc .X -_cgfe .X );_gdabf :=_de .Abs (_ddfdc .Y -_cgfe .Y );return _cgde (_ffgd ,_gdabf );
};func _ggfa (_cdaef *PageText )error {_cfgbb :=_cbf .GetLicenseKey ();if _cfgbb !=nil &&_cfgbb .IsLicensed ()||_fd {return nil ;};_ded .Printf ("\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064\u0020c\u006f\u0070\u0079\u0020\u006f\u0066\u0020\u0055\u006e\u0069P\u0044\u0046\u000a");
_ded .Println ("-\u0020\u0047\u0065\u0074\u0020\u0061\u0020\u0066\u0072e\u0065\u0020\u0074\u0072\u0069\u0061\u006c l\u0069\u0063\u0065\u006es\u0065\u0020\u006f\u006e\u0020\u0068\u0074\u0074\u0070s:\u002f\u002fu\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f");
return _g .New ("\u0075\u006e\u0069\u0070d\u0066\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020c\u006fd\u0065\u0020\u0072\u0065\u0071\u0075\u0069r\u0065\u0064");};func (_baab rulingList )blocks (_deaaf ,_dedd *ruling )bool {if _deaaf ._bggda > _dedd ._aed ||_dedd ._bggda > _deaaf ._aed {return false ;
};_fbbf :=_de .Max (_deaaf ._bggda ,_dedd ._bggda );_bfefb :=_de .Min (_deaaf ._aed ,_dedd ._aed );if _deaaf ._dade > _dedd ._dade {_deaaf ,_dedd =_dedd ,_deaaf ;};for _ ,_afgc :=range _baab {if _deaaf ._dade <=_afgc ._dade +_afaba &&_afgc ._dade <=_dedd ._dade +_afaba &&_afgc ._bggda <=_bfefb &&_fbbf <=_afgc ._aed {return true ;
};};return false ;};func (_adfb *shapesState )clearPath (){_adfb ._bab =nil ;_adfb ._efc =false ;if _fdef {_ae .Log .Info ("\u0043\u004c\u0045A\u0052\u003a\u0020\u0073\u0073\u003d\u0025\u0073",_adfb );};};type compositeCell struct{_fa .PdfRectangle ;paraList ;
};func (_bggc *shapesState )lineTo (_fbe ,_dcf float64 ){if _fdef {_ae .Log .Info ("\u006c\u0069\u006eeT\u006f\u0028\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0070\u003d\u0025\u002e\u0032\u0066",_fbe ,_dcf ,_bggc .devicePoint (_fbe ,_dcf ));
};_bggc .addPoint (_fbe ,_dcf );};

// String returns a description of `k`.
func (_gfgd markKind )String ()string {_cbcb ,_bagec :=_ageag [_gfgd ];if !_bagec {return _ded .Sprintf ("\u004e\u006f\u0074\u0020\u0061\u0020\u006d\u0061\u0072k\u003a\u0020\u0025\u0064",_gfgd );};return _cbcb ;};const _gae =20;type rectRuling struct{_acga rulingKind ;
_dgad markKind ;_c .Color ;_fa .PdfRectangle ;};func (_gfgc rulingList )snapToGroups ()rulingList {_gbcc ,_defcc :=_gfgc .vertsHorzs ();if len (_gbcc )> 0{_gbcc =_gbcc .snapToGroupsDirection ();};if len (_defcc )> 0{_defcc =_defcc .snapToGroupsDirection ();
};_gcae :=append (_gbcc ,_defcc ...);_gcae .log ("\u0073\u006e\u0061p\u0054\u006f\u0047\u0072\u006f\u0075\u0070\u0073");return _gcae ;};

// TextMark represents extracted text on a page with information regarding both textual content,
// formatting (font and size) and positioning.
// It is the smallest unit of text on a PDF page, typically a single character.
//
// getBBox() in test_text.go shows how to compute bounding boxes of substrings of extracted text.
// The following code extracts the text on PDF page `page` into `text` then finds the bounding box
// `bbox` of substring `term` in `text`.
//
//     ex, _ := New(page)
//     // handle errors
//     pageText, _, _, err := ex.ExtractPageText()
//     // handle errors
//     text := pageText.Text()
//     textMarks := pageText.Marks()
//
//     	start := strings.Index(text, term)
//      end := start + len(term)
//      spanMarks, err := textMarks.RangeOffset(start, end)
//      // handle errors
//      bbox, ok := spanMarks.BBox()
//      // handle errors
type TextMark struct{

// Text is the extracted text.
Text string ;

// Original is the text in the PDF. It has not been decoded like `Text`.
Original string ;

// BBox is the bounding box of the text.
BBox _fa .PdfRectangle ;

// Font is the font the text was drawn with.
Font *_fa .PdfFont ;

// FontSize is the font size the text was drawn with.
FontSize float64 ;

// Offset is the offset of the start of TextMark.Text in the extracted text. If you do this
//   text, textMarks := pageText.Text(), pageText.Marks()
//   marks := textMarks.Elements()
// then marks[i].Offset is the offset of marks[i].Text in text.
Offset int ;

// Meta is set true for spaces and line breaks that we insert in the extracted text. We insert
// spaces (line breaks) when we see characters that are over a threshold horizontal (vertical)
//  distance  apart. See wordJoiner (lineJoiner) in PageText.computeViews().
Meta bool ;

// FillColor is the fill color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
FillColor _c .Color ;

// StrokeColor is the stroke color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
StrokeColor _c .Color ;

// Orientation is the text orientation
Orientation int ;

// DirectObject is the underlying PdfObject (Text Object) that represents the visible texts. This is introduced to get
// a simple access to the TextObject in case editing or replacment of some text is needed. E.g during redaction.
DirectObject _cb .PdfObject ;

// ObjString is a decoded string operand of a text-showing operator. It has the same value as `Text` attribute except
// when many glyphs are represented with the same Text Object that contains multiple length string operand in which case
// ObjString spans more than one character string that falls in different TextMark objects.
ObjString []string ;Tw float64 ;Th float64 ;Tc float64 ;Index int ;};type subpath struct{_afdb []_ge .Point ;_agd bool ;};func (_dgbe *wordBag )maxDepth ()float64 {return _dgbe ._agee -_dgbe .Lly };func (_eecd pathSection )bbox ()_fa .PdfRectangle {_aceg :=_eecd ._dadd [0]._afdb [0];
_bgga :=_fa .PdfRectangle {Llx :_aceg .X ,Urx :_aceg .X ,Lly :_aceg .Y ,Ury :_aceg .Y };_caa :=func (_bcdg _ge .Point ){if _bcdg .X < _bgga .Llx {_bgga .Llx =_bcdg .X ;}else if _bcdg .X > _bgga .Urx {_bgga .Urx =_bcdg .X ;};if _bcdg .Y < _bgga .Lly {_bgga .Lly =_bcdg .Y ;
}else if _bcdg .Y > _bgga .Ury {_bgga .Ury =_bcdg .Y ;};};for _ ,_fea :=range _eecd ._dadd [0]._afdb [1:]{_caa (_fea );};for _ ,_fece :=range _eecd ._dadd [1:]{for _ ,_cfdb :=range _fece ._afdb {_caa (_cfdb );};};return _bgga ;};const (_ggdc rulingKind =iota ;
_fbde ;_bggg ;);func (_bcg *imageExtractContext )extractInlineImage (_aba *_aef .ContentStreamInlineImage ,_ace _aef .GraphicsState ,_dfa *_fa .PdfPageResources )error {_ea ,_fab :=_aba .ToImage (_dfa );if _fab !=nil {return _fab ;};_bgg ,_fab :=_aba .GetColorSpace (_dfa );
if _fab !=nil {return _fab ;};if _bgg ==nil {_bgg =_fa .NewPdfColorspaceDeviceGray ();};_fbd ,_fab :=_bgg .ImageToRGB (*_ea );if _fab !=nil {return _fab ;};_agb :=ImageMark {Image :&_fbd ,Width :_ace .CTM .ScalingFactorX (),Height :_ace .CTM .ScalingFactorY (),Angle :_ace .CTM .Angle ()};
_agb .X ,_agb .Y =_ace .CTM .Translation ();_bcg ._bfa =append (_bcg ._bfa ,_agb );_bcg ._cegf ++;return nil ;};func _fade (_cgec ,_cdaf _fa .PdfRectangle )(_fa .PdfRectangle ,bool ){if !_fdea (_cgec ,_cdaf ){return _fa .PdfRectangle {},false ;};return _fa .PdfRectangle {Llx :_de .Max (_cgec .Llx ,_cdaf .Llx ),Urx :_de .Min (_cgec .Urx ,_cdaf .Urx ),Lly :_de .Max (_cgec .Lly ,_cdaf .Lly ),Ury :_de .Min (_cgec .Ury ,_cdaf .Ury )},true ;
};func _cgac (_eefc []pathSection )rulingList {_dbca (_eefc );if _cddgc {_ae .Log .Info ("\u006d\u0061k\u0065\u0053\u0074\u0072\u006f\u006b\u0065\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0064\u0020\u0073\u0074\u0072ok\u0065\u0073",len (_eefc ));
};var _beeg rulingList ;for _ ,_cfgb :=range _eefc {for _ ,_bedcg :=range _cfgb ._dadd {if len (_bedcg ._afdb )< 2{continue ;};_abab :=_bedcg ._afdb [0];for _ ,_bbef :=range _bedcg ._afdb [1:]{if _fbge ,_faaa :=_caga (_abab ,_bbef ,_cfgb .Color );_faaa {_beeg =append (_beeg ,_fbge );
};_abab =_bbef ;};};};if _cddgc {_ae .Log .Info ("m\u0061\u006b\u0065\u0053tr\u006fk\u0065\u0052\u0075\u006c\u0069n\u0067\u0073\u003a\u0020\u0025\u0073",_beeg );};return _beeg ;};func (_acbf *shapesState )lastpointEstablished ()(_ge .Point ,bool ){if _acbf ._efc {return _acbf ._cfdd ,false ;
};_bfaa :=len (_acbf ._bab );if _bfaa > 0&&_acbf ._bab [_bfaa -1]._agd {return _acbf ._bab [_bfaa -1].last (),false ;};return _ge .Point {},true ;};func _bggba (_caab float64 )bool {return _de .Abs (_caab )< _dddb };func (_bad *textObject )setWordSpacing (_cddb float64 ){if _bad ==nil {return ;
};_bad ._ddc ._dge =_cddb ;};func _efac (_cgee string ,_bgaf int )string {if len (_cgee )< _bgaf {return _cgee ;};return _cgee [:_bgaf ];};type stateStack []*textState ;func _dbca (_aeeae []pathSection ){if _ccabb < 0.0{return ;};if _cddgc {_ae .Log .Info ("\u0067\u0072\u0061\u006e\u0075\u006c\u0061\u0072\u0069\u007a\u0065\u003a\u0020\u0025\u0064 \u0073u\u0062\u0070\u0061\u0074\u0068\u0020\u0073\u0065\u0063\u0074\u0069\u006f\u006e\u0073",len (_aeeae ));
};for _babc ,_adagf :=range _aeeae {for _ceefb ,_abac :=range _adagf ._dadd {for _aegf ,_abgc :=range _abac ._afdb {_abac ._afdb [_aegf ]=_ge .Point {X :_aedbf (_abgc .X ),Y :_aedbf (_abgc .Y )};if _cddgc {_bbca :=_abac ._afdb [_aegf ];if !_bcbc (_abgc ,_bbca ){_eacd :=_ge .Point {X :_bbca .X -_abgc .X ,Y :_bbca .Y -_abgc .Y };
_ded .Printf ("\u0025\u0034d \u002d\u0020\u00254\u0064\u0020\u002d\u0020%4d\u003a %\u002e\u0032\u0066\u0020\u2192\u0020\u0025.2\u0066\u0020\u0028\u0025\u0067\u0029\u000a",_babc ,_ceefb ,_aegf ,_abgc ,_bbca ,_eacd );};};};};};};func (_caf *shapesState )establishSubpath ()*subpath {_gba ,_ebaf :=_caf .lastpointEstablished ();
if !_ebaf {_caf ._bab =append (_caf ._bab ,_ega (_gba ));};if len (_caf ._bab )==0{return nil ;};_caf ._efc =false ;return _caf ._bab [len (_caf ._bab )-1];};func _bffg (_fcef _fa .PdfRectangle ,_eaff []*textLine )*textPara {return &textPara {PdfRectangle :_fcef ,_dfcfe :_eaff };
};func (_caed *subpath )makeRectRuling (_afea _c .Color )(*ruling ,bool ){if _aggg {_ae .Log .Info ("\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0070\u0061\u0074\u0068\u003d\u0025\u0076",_caed );};_gagbd :=_caed ._afdb [:4];
_cfca :=make (map[int ]rulingKind ,len (_gagbd ));for _bcaee ,_ecgc :=range _gagbd {_ecae :=_caed ._afdb [(_bcaee +1)%4];_cfca [_bcaee ]=_ccda (_ecgc ,_ecae );if _aggg {_ded .Printf ("\u0025\u0034\u0064: \u0025\u0073\u0020\u003d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066",_bcaee ,_cfca [_bcaee ],_ecgc ,_ecae );
};};if _aggg {_ded .Printf ("\u0020\u0020\u0020\u006b\u0069\u006e\u0064\u0073\u003d\u0025\u002b\u0076\u000a",_cfca );};var _dgbd ,_afgd []int ;for _cadgd ,_bege :=range _cfca {switch _bege {case _fbde :_afgd =append (_afgd ,_cadgd );case _bggg :_dgbd =append (_dgbd ,_cadgd );
};};if _aggg {_ded .Printf ("\u0020\u0020 \u0068\u006f\u0072z\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_afgd ),_afgd );_ded .Printf ("\u0020\u0020 \u0076\u0065\u0072t\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_dgbd ),_dgbd );
};_ddeg :=(len (_afgd )==2&&len (_dgbd )==2)||(len (_afgd )==2&&len (_dgbd )==0&&_bcgd (_gagbd [_afgd [0]],_gagbd [_afgd [1]]))||(len (_dgbd )==2&&len (_afgd )==0&&_agcf (_gagbd [_dgbd [0]],_gagbd [_dgbd [1]]));if _aggg {_ded .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_afgd ),len (_dgbd ),_ddeg );
};if !_ddeg {if _aggg {_ae .Log .Error ("\u0021!\u006d\u0061\u006b\u0065R\u0065\u0063\u0074\u0052\u0075l\u0069n\u0067:\u0020\u0070\u0061\u0074\u0068\u003d\u0025v",_caed );_ded .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_afgd ),len (_dgbd ),_ddeg );
};return &ruling {},false ;};if len (_dgbd )==0{for _dgff ,_edgbb :=range _cfca {if _edgbb !=_fbde {_dgbd =append (_dgbd ,_dgff );};};};if len (_afgd )==0{for _cdbd ,_bfff :=range _cfca {if _bfff !=_bggg {_afgd =append (_afgd ,_cdbd );};};};if _aggg {_ae .Log .Info ("\u006da\u006b\u0065R\u0065\u0063\u0074\u0052u\u006c\u0069\u006eg\u003a\u0020\u0068\u006f\u0072\u007a\u0073\u003d\u0025d \u0076\u0065\u0072t\u0073\u003d%\u0064\u0020\u0070\u006f\u0069\u006et\u0073\u003d%\u0064\u000a"+"\u0009\u0020\u0068o\u0072\u007a\u0073\u003d\u0025\u002b\u0076\u000a"+"\u0009\u0020\u0076e\u0072\u0074\u0073\u003d\u0025\u002b\u0076\u000a"+"\t\u0070\u006f\u0069\u006e\u0074\u0073\u003d\u0025\u002b\u0076",len (_afgd ),len (_dgbd ),len (_gagbd ),_afgd ,_dgbd ,_gagbd );
};var _ddffc ,_acgc ,_aeff ,_aeadb _ge .Point ;if _gagbd [_afgd [0]].Y > _gagbd [_afgd [1]].Y {_aeff ,_aeadb =_gagbd [_afgd [0]],_gagbd [_afgd [1]];}else {_aeff ,_aeadb =_gagbd [_afgd [1]],_gagbd [_afgd [0]];};if _gagbd [_dgbd [0]].X > _gagbd [_dgbd [1]].X {_ddffc ,_acgc =_gagbd [_dgbd [0]],_gagbd [_dgbd [1]];
}else {_ddffc ,_acgc =_gagbd [_dgbd [1]],_gagbd [_dgbd [0]];};_dagf :=_fa .PdfRectangle {Llx :_ddffc .X ,Urx :_acgc .X ,Lly :_aeadb .Y ,Ury :_aeff .Y };if _dagf .Llx > _dagf .Urx {_dagf .Llx ,_dagf .Urx =_dagf .Urx ,_dagf .Llx ;};if _dagf .Lly > _dagf .Ury {_dagf .Lly ,_dagf .Ury =_dagf .Ury ,_dagf .Lly ;
};_accg :=rectRuling {PdfRectangle :_dagf ,_acga :_cffd (_dagf ),Color :_afea };if _accg ._acga ==_ggdc {if _aggg {_ae .Log .Error ("\u006da\u006b\u0065\u0052\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006eg\u003a\u0020\u006b\u0069\u006e\u0064\u003d\u006e\u0069\u006c");
};return nil ,false ;};_gacfg ,_bgef :=_accg .asRuling ();if !_bgef {if _aggg {_ae .Log .Error ("\u006da\u006b\u0065\u0052\u0065c\u0074\u0052\u0075\u006c\u0069n\u0067:\u0020!\u0069\u0073\u0052\u0075\u006c\u0069\u006eg");};return nil ,false ;};if _cddgc {_ded .Printf ("\u0020\u0020\u0020\u0072\u003d\u0025\u0073\u000a",_gacfg .String ());
};return _gacfg ,true ;};func (_abbd *stateStack )push (_ceaa *textState ){_edg :=*_ceaa ;*_abbd =append (*_abbd ,&_edg )};func (_gcbb *textObject )setTextRenderMode (_ccg int ){if _gcbb ==nil {return ;};_gcbb ._ddc ._dbgb =RenderMode (_ccg );};func (_eefcf rulingList )intersections ()map[int ]intSet {var _eagc ,_gfcf []int ;
for _dadab ,_cbcf :=range _eefcf {switch _cbcf ._gagfc {case _bggg :_eagc =append (_eagc ,_dadab );case _fbde :_gfcf =append (_gfcf ,_dadab );};};if len (_eagc )< _geca +1||len (_gfcf )< _baaaf +1{return nil ;};if len (_eagc )+len (_gfcf )> _cgaba {_ae .Log .Debug ("\u0069\u006e\u0074\u0065\u0072\u0073e\u0063\u0074\u0069\u006f\u006e\u0073\u003a\u0020\u0054\u004f\u004f\u0020\u004d\u0041\u004e\u0059\u0020\u0072\u0075\u006ci\u006e\u0067\u0073\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u003d\u0020%\u0064 \u0078\u0020\u0025\u0064",len (_eefcf ),len (_eagc ),len (_gfcf ));
return nil ;};_adade :=make (map[int ]intSet ,len (_eagc )+len (_gfcf ));for _ ,_agfba :=range _eagc {for _ ,_dbdg :=range _gfcf {if _eefcf [_agfba ].intersects (_eefcf [_dbdg ]){if _ ,_daba :=_adade [_agfba ];!_daba {_adade [_agfba ]=make (intSet );};
if _ ,_cdfce :=_adade [_dbdg ];!_cdfce {_adade [_dbdg ]=make (intSet );};_adade [_agfba ].add (_dbdg );_adade [_dbdg ].add (_agfba );};};};return _adade ;};

// String returns a human readable description of `ss`.
func (_ddda *shapesState )String ()string {return _ded .Sprintf ("\u007b\u0025\u0064\u0020su\u0062\u0070\u0061\u0074\u0068\u0073\u0020\u0066\u0072\u0065\u0073\u0068\u003d\u0025t\u007d",len (_ddda ._bab ),_ddda ._efc );};func _cdae (_bbcd ,_aecg int )int {if _bbcd < _aecg {return _bbcd ;
};return _aecg ;};func (_agcac *textPara )isAtom ()*textTable {_fbeg :=_agcac ;_gefab :=_agcac ._gfdg ;_fgca :=_agcac ._ddce ;if _gefab .taken ()||_fgca .taken (){return nil ;};_fefba :=_gefab ._ddce ;if _fefba .taken ()||_fefba !=_fgca ._gfdg {return nil ;
};return _gcadg (_fbeg ,_gefab ,_fgca ,_fefba );};func _adbg (_bafc ,_bgdf float64 )string {_aaff :=!_bggba (_bafc -_bgdf );if _aaff {return "\u000a";};return "\u0020";};func (_cdcgc *textLine )bbox ()_fa .PdfRectangle {return _cdcgc .PdfRectangle };func (_gacf *textPara )toCellTextMarks (_fgdg *int )[]TextMark {var _cfgg []TextMark ;
for _dagg ,_beff :=range _gacf ._dfcfe {_fbdf :=_beff .toTextMarks (_fgdg );_gdegb :=_dcdd &&_beff .endsInHyphen ()&&_dagg !=len (_gacf ._dfcfe )-1;if _gdegb {_fbdf =_gbce (_fbdf ,_fgdg );};_cfgg =append (_cfgg ,_fbdf ...);if !(_gdegb ||_dagg ==len (_gacf ._dfcfe )-1){_cfgg =_fffb (_cfgg ,_fgdg ,_adbg (_beff ._ccca ,_gacf ._dfcfe [_dagg +1]._ccca ));
};};return _cfgg ;};func _dfgc (_edgb *wordBag ,_bdea *textWord ,_ecdd float64 )bool {return _edgb .Urx <=_bdea .Llx &&_bdea .Llx < _edgb .Urx +_ecdd ;};func (_gged *shapesState )stroke (_dgfg *[]pathSection ){_ead :=pathSection {_dadd :_gged ._bab ,Color :_gged ._edfa .getStrokeColor ()};
*_dgfg =append (*_dgfg ,_ead );if _cddgc {_ded .Printf ("\u0020 \u0020\u0020S\u0054\u0052\u004fK\u0045\u003a\u0020\u0025\u0064\u0020\u0073t\u0072\u006f\u006b\u0065\u0073\u0020s\u0073\u003d\u0025\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d%\u002b\u0076\u0020\u0025\u0036\u002e\u0032\u0066\u000a",len (*_dgfg ),_gged ,_gged ._edfa .getStrokeColor (),_ead .bbox ());
if _bgbe {for _afda ,_dega :=range _gged ._bab {_ded .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_afda ,_dega );if _afda ==10{break ;};};};};};func (_ceee lineRuling )asRuling ()(*ruling ,bool ){_cgfd :=ruling {_gagfc :_ceee ._gcada ,Color :_ceee .Color ,_eeab :_ceaf };
switch _ceee ._gcada {case _bggg :_cgfd ._dade =_ceee .xMean ();_cgfd ._bggda =_de .Min (_ceee ._afag .Y ,_ceee ._deeb .Y );_cgfd ._aed =_de .Max (_ceee ._afag .Y ,_ceee ._deeb .Y );case _fbde :_cgfd ._dade =_ceee .yMean ();_cgfd ._bggda =_de .Min (_ceee ._afag .X ,_ceee ._deeb .X );
_cgfd ._aed =_de .Max (_ceee ._afag .X ,_ceee ._deeb .X );default:_ae .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_ceee ._gcada );return nil ,false ;};return &_cgfd ,true ;};type textPara struct{_fa .PdfRectangle ;
_bceg _fa .PdfRectangle ;_dfcfe []*textLine ;_cbaaf *textTable ;_efff bool ;_fdbaa bool ;_efda *textPara ;_gfdg *textPara ;_begg *textPara ;_ddce *textPara ;};func (_dfg *stateStack )pop ()*textState {if _dfg .empty (){return nil ;};_gdg :=*(*_dfg )[len (*_dfg )-1];
*_dfg =(*_dfg )[:len (*_dfg )-1];return &_gdg ;};func (_agef *imageExtractContext )extractContentStreamImages (_cbg string ,_bda *_fa .PdfPageResources )error {_bagg :=_aef .NewContentStreamParser (_cbg );_bb ,_bgb :=_bagg .Parse ();if _bgb !=nil {return _bgb ;
};if _agef ._cf ==nil {_agef ._cf =map[*_cb .PdfObjectStream ]*cachedImage {};};if _agef ._deda ==nil {_agef ._deda =&ImageExtractOptions {};};_da :=_aef .NewContentStreamProcessor (*_bb );_da .AddHandler (_aef .HandlerConditionEnumAllOperands ,"",_agef .processOperand );
return _da .Process (_bda );};func (_eefce intSet )del (_bada int ){delete (_eefce ,_bada )};func (_gagae *textPara )depth ()float64 {if _gagae ._fdbaa {return -1.0;};if len (_gagae ._dfcfe )> 0{return _gagae ._dfcfe [0]._ccca ;};return _gagae ._cbaaf .depth ();
};func _gadcb (_abfd _fa .PdfRectangle )textState {return textState {_gaf :100,_dbgb :RenderModeFill ,_dfae :_abfd };};func (_cceg paraList )sortReadingOrder (){_ae .Log .Trace ("\u0073\u006fr\u0074\u0052\u0065\u0061\u0064i\u006e\u0067\u004f\u0072\u0064e\u0072\u003a\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_cceg ));
if len (_cceg )<=1{return ;};_cceg .computeEBBoxes ();_ff .Slice (_cceg ,func (_bdfd ,_gfed int )bool {return _dcbb (_cceg [_bdfd ],_cceg [_gfed ])<=0});_cdcf :=_cceg .topoOrder ();_cceg .reorder (_cdcf );};func (_gccbe gridTile )numBorders ()int {_gaegd :=0;
if _gccbe ._acef {_gaegd ++;};if _gccbe ._cade {_gaegd ++;};if _gccbe ._cgff {_gaegd ++;};if _gccbe ._ggcd {_gaegd ++;};return _gaegd ;};const _gdab =10;func (_aacc *subpath )last ()_ge .Point {return _aacc ._afdb [len (_aacc ._afdb )-1]};func (_gcb *imageExtractContext )extractFormImages (_cge *_cb .PdfObjectName ,_gad _aef .GraphicsState ,_fec *_fa .PdfPageResources )error {_egf ,_fbda :=_fec .GetXObjectFormByName (*_cge );
if _fbda !=nil {return _fbda ;};if _egf ==nil {return nil ;};_abag ,_fbda :=_egf .GetContentStream ();if _fbda !=nil {return _fbda ;};_dcb :=_egf .Resources ;if _dcb ==nil {_dcb =_fec ;};_fbda =_gcb .extractContentStreamImages (string (_abag ),_dcb );if _fbda !=nil {return _fbda ;
};_gcb ._cee ++;return nil ;};func (_cbded *textTable )put (_gefac ,_ggcbe int ,_fgac *textPara ){_cbded ._bbbb [_babg (_gefac ,_ggcbe )]=_fgac ;};func _ebg (_fcdb []*textMark ,_cdafa _fa .PdfRectangle ,_gcbec rulingList ,_dgca []gridTiling )paraList {_ae .Log .Trace ("\u006d\u0061\u006b\u0065\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065\u003a \u0025\u0064\u0020\u0065\u006c\u0065m\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065=\u0025\u002e\u0032\u0066",len (_fcdb ),_cdafa );
if len (_fcdb )==0{return nil ;};_fdfe :=_afegg (_fcdb ,_cdafa );if len (_fdfe )==0{return nil ;};_gcbec .log ("\u006d\u0061\u006be\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065");_dceb ,_bcdgb :=_gcbec .vertsHorzs ();_egef :=_gafg (_fdfe ,_cdafa .Ury ,_dceb ,_bcdgb );
_adgd :=_bcad (_egef ,_cdafa .Ury ,_dceb ,_bcdgb );_adgd =_fbb (_adgd );_cggeg :=make (paraList ,0,len (_adgd ));for _ ,_efcea :=range _adgd {_cddd :=_efcea .arrangeText ();if _cddd !=nil {_cggeg =append (_cggeg ,_cddd );};};if len (_cggeg )>=_fgbd {_cggeg =_cggeg .extractTables (_dgca );
};_cggeg .sortReadingOrder ();_cggeg .log ("\u0073\u006f\u0072te\u0064\u0020\u0069\u006e\u0020\u0072\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u006f\u0072\u0064\u0065\u0072");return _cggeg ;};func (_ceecg *subpath )clear (){*_ceecg =subpath {}};type rulingKind int ;
func (_bebe *textWord )computeText ()string {_feae :=make ([]string ,len (_bebe ._dded ));for _feffe ,_ebbeg :=range _bebe ._dded {_feae [_feffe ]=_ebbeg ._ebed ;};return _db .Join (_feae ,"");};func (_gcd *textObject )renderText (_ceag _cb .PdfObject ,_fcfca []byte )error {if _gcd ._beba {_ae .Log .Debug ("\u0072\u0065\u006e\u0064\u0065r\u0054\u0065\u0078\u0074\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069\u0064 \u0066\u006f\u006e\u0074\u002e\u0020\u004e\u006f\u0074\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u002e");
return nil ;};_afg :=_gcd .getCurrentFont ();_bbfgf :=_afg .BytesToCharcodes (_fcfca );_gdc ,_bfef ,_fdgcc :=_afg .CharcodesToStrings (_bbfgf );if _fdgcc > 0{_ae .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_bfef ,_fdgcc );
};_gcd ._ddc ._abea +=_bfef ;_gcd ._ddc ._fcc +=_fdgcc ;_bagfe :=_gcd ._ddc ;_dace :=_bagfe ._fdc ;_bace :=_bagfe ._gaf /100.0;_add :=_cca ;if _afg .Subtype ()=="\u0054\u0079\u0070e\u0033"{_add =1;};_ecfb ,_gaee :=_afg .GetRuneMetrics (' ');if !_gaee {_ecfb ,_gaee =_afg .GetCharMetrics (32);
};if !_gaee {_ecfb ,_ =_fa .DefaultFont ().GetRuneMetrics (' ');};_fbaa :=_ecfb .Wx *_add ;_ae .Log .Trace ("\u0073p\u0061\u0063e\u0057\u0069\u0064t\u0068\u003d\u0025\u002e\u0032\u0066\u0020t\u0065\u0078\u0074\u003d\u0025\u0071 \u0066\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0066\u006f\u006et\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",_fbaa ,_gdc ,_afg ,_dace );
_dffcc :=_ge .NewMatrix (_dace *_bace ,0,0,_dace ,0,_bagfe ._baed );if _adag {_ae .Log .Info ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0074\u0065\u0078t\u0073\u003d\u0025\u0071",len (_bbfgf ),_bbfgf ,_gdc );
};_ae .Log .Trace ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0072\u0075\u006ee\u0073\u003d\u0025\u0071",len (_bbfgf ),_bbfgf ,len (_gdc ));_gaa :=_gcd .getFillColor ();
_abeb :=_gcd .getStrokeColor ();for _afe ,_fcfg :=range _gdc {_dceg :=[]rune (_fcfg );if len (_dceg )==1&&_dceg [0]=='\x00'{continue ;};_ecc :=_bbfgf [_afe ];_gfe :=_gcd ._bbfd .CTM .Mult (_gcd ._abd ).Mult (_dffcc );_fgdd :=0.0;if len (_dceg )==1&&_dceg [0]==32{_fgdd =_bagfe ._dge ;
};_dcg ,_eef :=_afg .GetCharMetrics (_ecc );if !_eef {_ae .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u004e\u006f \u006d\u0065\u0074r\u0069\u0063\u0020\u0066\u006f\u0072\u0020\u0063\u006fde\u003d\u0025\u0064 \u0072\u003d0\u0078\u0025\u0030\u0034\u0078\u003d%\u002b\u0071 \u0025\u0073",_ecc ,_dceg ,_dceg ,_afg );
return _ded .Errorf ("\u006e\u006f\u0020\u0063\u0068\u0061\u0072\u0020\u006d\u0065\u0074\u0072\u0069\u0063\u0073:\u0020f\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0063\u006f\u0064\u0065\u003d\u0025\u0064",_afg .String (),_ecc );};_dfb :=_ge .Point {X :_dcg .Wx *_add ,Y :_dcg .Wy *_add };
_abae :=_ge .Point {X :(_dfb .X *_dace +_fgdd )*_bace };_adbe :=_ge .Point {X :(_dfb .X *_dace +_bagfe ._gfaad +_fgdd )*_bace };if _adag {_ae .Log .Info ("\u0074\u0066\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0063\u003d\u0025\u002e\u0032f\u0020t\u0077\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_dace ,_bagfe ._gfaad ,_bagfe ._dge ,_bace );
_ae .Log .Info ("\u0064x\u002c\u0064\u0079\u003d%\u002e\u0033\u0066\u0020\u00740\u003d%\u002e3\u0066\u0020\u0074\u003d\u0025\u002e\u0033f",_dfb ,_abae ,_adbe );};_eac :=_cegg (_abae );_bgbf :=_cegg (_adbe );_dgd :=_gcd ._bbfd .CTM .Mult (_gcd ._abd ).Mult (_eac );
if _adaa {_ae .Log .Info ("e\u006e\u0064\u003a\u000a\tC\u0054M\u003d\u0025\u0073\u000a\u0009 \u0074\u006d\u003d\u0025\u0073\u000a"+"\u0009\u0020t\u0064\u003d\u0025s\u0020\u0078\u006c\u0061\u0074\u003d\u0025\u0073\u000a"+"\u0009t\u0064\u0030\u003d\u0025s\u000a\u0009\u0020\u0020\u2192 \u0025s\u0020x\u006c\u0061\u0074\u003d\u0025\u0073",_gcd ._bbfd .CTM ,_gcd ._abd ,_bgbf ,_cad (_gcd ._bbfd .CTM .Mult (_gcd ._abd ).Mult (_bgbf )),_eac ,_dgd ,_cad (_dgd ));
};_aeea ,_bbaa :=_gcd .newTextMark (_ag .ExpandLigatures (_dceg ),_gfe ,_cad (_dgd ),_de .Abs (_fbaa *_gfe .ScalingFactorX ()),_afg ,_gcd ._ddc ._gfaad ,_gaa ,_abeb ,_ceag ,_gdc ,_afe );if !_bbaa {_ae .Log .Debug ("\u0054\u0065\u0078\u0074\u0020\u006d\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069d\u0065 \u0070\u0061\u0067\u0065\u002e\u0020\u0053\u006b\u0069\u0070\u0070\u0069\u006e\u0067");
continue ;};if _afg ==nil {_ae .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u002e");}else if _afg .Encoder ()==nil {_ae .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020N\u006f\u0020\u0065\u006e\u0063\u006f\u0064\u0069\u006eg\u002e\u0020\u0066o\u006et\u003d\u0025\u0073",_afg );
}else {if _ceagb ,_ggbg :=_afg .Encoder ().CharcodeToRune (_ecc );_ggbg {_aeea ._eagb =string (_ceagb );};};_ae .Log .Trace ("i\u003d\u0025\u0064\u0020\u0063\u006fd\u0065\u003d\u0025\u0064\u0020\u006d\u0061\u0072\u006b=\u0025\u0073\u0020t\u0072m\u003d\u0025\u0073",_afe ,_ecc ,_aeea ,_gfe );
_gcd ._adg =append (_gcd ._adg ,&_aeea );_gcd ._abd .Concat (_bgbf );};return nil ;};func _caga (_febe ,_cffga _ge .Point ,_cgcf _c .Color )(*ruling ,bool ){_cdbf :=lineRuling {_afag :_febe ,_deeb :_cffga ,_gcada :_ageg (_febe ,_cffga ),Color :_cgcf };
if _cdbf ._gcada ==_ggdc {return nil ,false ;};return _cdbf .asRuling ();};

// ExtractPageText returns the text contents of `e` (an Extractor for a page) as a PageText.
// TODO(peterwilliams97): The stats complicate this function signature and aren't very useful.
//                        Replace with a function like Extract() (*PageText, error)
func (_fcec *Extractor )ExtractPageText ()(*PageText ,int ,int ,error ){_bbd ,_bagf ,_cgc ,_edf :=_fcec .extractPageText (_fcec ._fc ,_fcec ._dedg ,_ge .IdentityMatrix (),0);if _edf !=nil &&_edf !=_fa .ErrColorOutOfRange {return nil ,0,0,_edf ;};_bbd .computeViews ();
_edf =_ggfa (_bbd );if _edf !=nil {return nil ,0,0,_edf ;};if _fcec ._ab !=nil {if _fcec ._ab .ApplyCropBox &&_fcec ._gee !=nil {_bbd .ApplyArea (*_fcec ._gee );};};return _bbd ,_bagf ,_cgc ,nil ;};type textTable struct{_fa .PdfRectangle ;_aecda ,_egcge int ;
_eecbc bool ;_bbbb map[uint64 ]*textPara ;_agdc map[uint64 ]compositeCell ;};func (_bcdf rulingList )comp (_deaad ,_aagdd int )bool {_fcegb ,_eccb :=_bcdf [_deaad ],_bcdf [_aagdd ];_ddcd ,_bced :=_fcegb ._gagfc ,_eccb ._gagfc ;if _ddcd !=_bced {return _ddcd > _bced ;
};if _ddcd ==_ggdc {return false ;};_daec :=func (_fccd bool )bool {if _ddcd ==_fbde {return _fccd ;};return !_fccd ;};_ecea ,_dcddc :=_fcegb ._dade ,_eccb ._dade ;if _ecea !=_dcddc {return _daec (_ecea > _dcddc );};_ecea ,_dcddc =_fcegb ._bggda ,_eccb ._bggda ;
if _ecea !=_dcddc {return _daec (_ecea < _dcddc );};return _daec (_fcegb ._aed < _eccb ._aed );};func _bbbe (_aecb ,_bdef _fa .PdfRectangle )bool {return _bdef .Llx <=_aecb .Urx &&_aecb .Llx <=_bdef .Urx ;};func (_bgdg *textTable )putComposite (_caea ,_bgged int ,_bbeb paraList ,_ddad _fa .PdfRectangle ){if len (_bbeb )==0{_ae .Log .Error ("\u0074\u0065xt\u0054\u0061\u0062l\u0065\u0029\u0020\u0070utC\u006fmp\u006f\u0073\u0069\u0074\u0065\u003a\u0020em\u0070\u0074\u0079\u0020\u0070\u0061\u0072a\u0073");
return ;};_gaec :=compositeCell {PdfRectangle :_ddad ,paraList :_bbeb };if _dcfc {_ded .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0075\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u003c\u002d\u0025\u0073\u000a",_caea ,_bgged ,_gaec .String ());
};_gaec .updateBBox ();_bgdg ._agdc [_babg (_caea ,_bgged )]=_gaec ;};func (_edfeg paraList )yNeighbours (_cdgf float64 )map[*textPara ][]int {_faff :=make ([]event ,2*len (_edfeg ));if _cdgf ==0{for _dafd ,_dbce :=range _edfeg {_faff [2*_dafd ]=event {_dbce .Lly ,true ,_dafd };
_faff [2*_dafd +1]=event {_dbce .Ury ,false ,_dafd };};}else {for _dgaed ,_cfddg :=range _edfeg {_faff [2*_dgaed ]=event {_cfddg .Lly -_cdgf *_cfddg .fontsize (),true ,_dgaed };_faff [2*_dgaed +1]=event {_cfddg .Ury +_cdgf *_cfddg .fontsize (),false ,_dgaed };
};};return _edfeg .eventNeighbours (_faff );};

// RenderMode specifies the text rendering mode (Tmode), which determines whether showing text shall cause
// glyph outlines to be  stroked, filled, used as a clipping boundary, or some combination of the three.
// Stroking, filling, and clipping shall have the same effects for a text object as they do for a path object
// (see 8.5.3, "Path-Painting Operators" and 8.5.4, "Clipping Path Operators").
type RenderMode int ;func (_gbga lineRuling )yMean ()float64 {return 0.5*(_gbga ._afag .Y +_gbga ._deeb .Y )};

// ExtractTextWithStats works like ExtractText but returns the number of characters in the output
// (`numChars`) and the number of characters that were not decoded (`numMisses`).
func (_gcc *Extractor )ExtractTextWithStats ()(_bggd string ,_bga int ,_cgb int ,_feb error ){_dad ,_bga ,_cgb ,_feb :=_gcc .ExtractPageText ();if _feb !=nil {return "",_bga ,_cgb ,_feb ;};return _dad .Text (),_bga ,_cgb ,nil ;};func (_cgdda *textTable )markCells (){for _gacg :=0;
_gacg < _cgdda ._egcge ;_gacg ++{for _fcba :=0;_fcba < _cgdda ._aecda ;_fcba ++{_eagcf :=_cgdda .get (_fcba ,_gacg );if _eagcf !=nil {_eagcf ._efff =true ;};};};};func _agbd (_ebge map[int ][]float64 ){if len (_ebge )<=1{return ;};_bedde :=_eeagd (_ebge );
if _dcfc {_ae .Log .Info ("\u0066i\u0078C\u0065\u006c\u006c\u0073\u003a \u006b\u0065y\u0073\u003d\u0025\u002b\u0076",_bedde );};var _eaec ,_dbbc int ;for _eaec ,_dbbc =range _bedde {if _ebge [_dbbc ]!=nil {break ;};};for _cafd ,_dbbfc :=range _bedde [_eaec :]{_dafg :=_ebge [_dbbfc ];
if _dafg ==nil {continue ;};if _dcfc {_ded .Printf ("\u0025\u0034\u0064\u003a\u0020\u006b\u0030\u003d\u0025\u0064\u0020\u006b1\u003d\u0025\u0064\u000a",_eaec +_cafd ,_dbbc ,_dbbfc );};_afecc :=_ebge [_dbbfc ];if _afecc [len (_afecc )-1]> _dafg [0]{_afecc [len (_afecc )-1]=_dafg [0];
_ebge [_dbbc ]=_afecc ;};_dbbc =_dbbfc ;};};func (_badee rulingList )log (_fbbg string ){if !_cddgc {return ;};_ae .Log .Info ("\u0023\u0023\u0023\u0020\u0025\u0031\u0030\u0073\u003a\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_fbbg ,_badee .String ());
for _egde ,_cccfg :=range _badee {_ded .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_egde ,_cccfg .String ());};};func (_cedg *wordBag )firstWord (_ecfe int )*textWord {return _cedg ._cfe [_ecfe ][0]};func (_fgba rulingList )isActualGrid ()(rulingList ,bool ){_dgfca ,_cgfdf :=_fgba .augmentGrid ();
if !(len (_dgfca )>=_geca +1&&len (_cgfdf )>=_baaaf +1){if _cddgc {_ae .Log .Info ("\u0069s\u0041\u0063t\u0075\u0061\u006c\u0047r\u0069\u0064\u003a \u004e\u006f\u0074\u0020\u0061\u006c\u0069\u0067\u006eed\u002e\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u003c\u0020\u0025d\u0020\u0078 \u0025\u0064",len (_dgfca ),len (_cgfdf ),_geca +1,_baaaf +1);
};return nil ,false ;};if _cddgc {_ae .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075a\u006c\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0073\u0020\u003a\u0020\u0025t\u0020\u0026\u0020\u0025\u0074\u0020\u2192 \u0025\u0074",_fgba ,len (_dgfca )>=2,len (_cgfdf )>=2,len (_dgfca )>=2&&len (_cgfdf )>=2);
for _cdeg ,_bdedd :=range _fgba {_ded .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0076\u000a",_cdeg ,_bdedd );};};if _aafa {_edfaa ,_bbgfe :=_dgfca [0],_dgfca [len (_dgfca )-1];_acdf ,_baad :=_cgfdf [0],_cgfdf [len (_cgfdf )-1];if !(_gfdaa (_edfaa ._dade -_acdf ._bggda )&&_gfdaa (_bbgfe ._dade -_acdf ._aed )&&_gfdaa (_acdf ._dade -_edfaa ._aed )&&_gfdaa (_baad ._dade -_edfaa ._bggda )){if _cddgc {_ae .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069d\u003a\u0020\u0020N\u006f\u0074 \u0061\u006c\u0069\u0067\u006e\u0065d\u002e\n\t\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0076\u0031\u003d\u0025\u0073\u000a\u0009\u0068\u0030\u003d\u0025\u0073\u000a\u0009\u0068\u0031\u003d\u0025\u0073",_edfaa ,_bbgfe ,_acdf ,_baad );
};return nil ,false ;};}else {if !_dgfca .aligned (){if _eeff {_ae .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0076\u0065\u0072\u0074\u0073\u002e\u0020%\u0064",len (_dgfca ));
};return nil ,false ;};if !_cgfdf .aligned (){if _cddgc {_ae .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0068\u006f\u0072\u007a\u0073\u002e\u0020%\u0064",len (_cgfdf ));
};return nil ,false ;};};_bgbfa :=append (_dgfca ,_cgfdf ...);return _bgbfa ,true ;};type gridTiling struct{_fa .PdfRectangle ;_ddfbg []float64 ;_dffe []float64 ;_ddba map[float64 ]map[float64 ]gridTile ;};func (_cecdd paraList )writeText (_ffed _f .Writer ){for _dgce ,_dagb :=range _cecdd {if _dagb ._fdbaa {continue ;
};_dagb .writeText (_ffed );if _dgce !=len (_cecdd )-1{if _cgfc (_dagb ,_cecdd [_dgce +1]){_ffed .Write ([]byte ("\u0020"));}else {_ffed .Write ([]byte ("\u000a"));_ffed .Write ([]byte ("\u000a"));};};};_ffed .Write ([]byte ("\u000a"));_ffed .Write ([]byte ("\u000a"));
};func (_caad paraList )findGridTables (_degd []gridTiling )[]*textTable {if _dcfc {_ae .Log .Info ("\u0066i\u006e\u0064\u0047\u0072\u0069\u0064\u0054\u0061\u0062\u006c\u0065s\u003a\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073",len (_caad ));for _bgbb ,_efaaf :=range _caad {_ded .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bgbb ,_efaaf );
};};var _eafa []*textTable ;for _dcdc ,_becc :=range _degd {_fgfc ,_abagg :=_caad .findTableGrid (_becc );if _fgfc !=nil {_fgfc .log (_ded .Sprintf ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0057\u0069\u0074\u0068\u0047\u0072\u0069\u0064\u0073\u003a\u0020%\u0064",_dcdc ));
_eafa =append (_eafa ,_fgfc );_fgfc .markCells ();};for _gdde :=range _abagg {_gdde ._efff =true ;};};if _dcfc {_ae .Log .Info ("\u0066i\u006e\u0064\u0047\u0072i\u0064\u0054\u0061\u0062\u006ce\u0073:\u0020%\u0064\u0020\u0074\u0061\u0062\u006c\u0065s",len (_eafa ));
};return _eafa ;};func (_aagd rulingList )toTilings ()(rulingList ,[]gridTiling ){_aagd .log ("\u0074o\u0054\u0069\u006c\u0069\u006e\u0067s");if len (_aagd )==0{return nil ,nil ;};_aagd =_aagd .tidied ("\u0061\u006c\u006c");_aagd .log ("\u0074\u0069\u0064\u0069\u0065\u0064");
_dgfe :=_aagd .toGrids ();_gafa :=make ([]gridTiling ,len (_dgfe ));for _eeac ,_bggde :=range _dgfe {_gafa [_eeac ]=_bggde .asTiling ();};return _aagd ,_gafa ;};type gridTile struct{_fa .PdfRectangle ;_ggcd ,_acef ,_cgff ,_cade bool ;};func (_eaca rulingList )connections (_baegdf map[int ]intSet ,_egebb int )intSet {_gbbdg :=make (intSet );
_fbea :=make (intSet );var _bacf func (int );_bacf =func (_ebeg int ){if !_fbea .has (_ebeg ){_fbea .add (_ebeg );for _ffag :=range _eaca {if _baegdf [_ffag ].has (_ebeg ){_gbbdg .add (_ffag );};};for _cfddd :=range _eaca {if _gbbdg .has (_cfddd ){_bacf (_cfddd );
};};};};_bacf (_egebb );return _gbbdg ;};func _gdad (_cdecc map[float64 ]map[float64 ]gridTile )[]float64 {_dgcga :=make ([]float64 ,0,len (_cdecc ));_faefb :=make (map[float64 ]struct{},len (_cdecc ));for _ ,_geae :=range _cdecc {for _afeg :=range _geae {if _ ,_fefb :=_faefb [_afeg ];
_fefb {continue ;};_dgcga =append (_dgcga ,_afeg );_faefb [_afeg ]=struct{}{};};};_ff .Float64s (_dgcga );return _dgcga ;};func (_aabc *shapesState )closePath (){if _aabc ._efc {_aabc ._bab =append (_aabc ._bab ,_ega (_aabc ._cfdd ));_aabc ._efc =false ;
}else if len (_aabc ._bab )==0{if _fdef {_ae .Log .Debug ("\u0063\u006c\u006f\u0073eP\u0061\u0074\u0068\u0020\u0077\u0069\u0074\u0068\u0020\u006e\u006f\u0020\u0070\u0061t\u0068");};_aabc ._efc =false ;return ;};_aabc ._bab [len (_aabc ._bab )-1].close ();
if _fdef {_ae .Log .Info ("\u0063\u006c\u006f\u0073\u0065\u0050\u0061\u0074\u0068\u003a\u0020\u0025\u0073",_aabc );};};

// Extractor stores and offers functionality for extracting content from PDF pages.
type Extractor struct{_fc string ;_dedg *_fa .PdfPageResources ;_ed _fa .PdfRectangle ;_gee *_fa .PdfRectangle ;_aa map[string ]fontEntry ;_ec map[string ]textResult ;_ceb int64 ;_dbf int ;_ab *Options ;};func (_acfa *textObject )setTextMatrix (_ddd []float64 ){if len (_ddd )!=6{_ae .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u006c\u0065\u006e\u0028\u0066\u0029\u0020\u0021\u003d\u0020\u0036\u0020\u0028\u0025\u0064\u0029",len (_ddd ));
return ;};_bded ,_ddfb ,_cda ,_dgbb ,_deg ,_ddbgb :=_ddd [0],_ddd [1],_ddd [2],_ddd [3],_ddd [4],_ddd [5];_acfa ._abd =_ge .NewMatrix (_bded ,_ddfb ,_cda ,_dgbb ,_deg ,_ddbgb );_acfa ._ceff =_acfa ._abd ;};const (RenderModeStroke RenderMode =1<<iota ;RenderModeFill ;
RenderModeClip ;);

// PageText represents the layout of text on a device page.
type PageText struct{_fde []*textMark ;_adc string ;_gdgd []TextMark ;_geab []TextTable ;_abfb _fa .PdfRectangle ;_edff []pathSection ;_ebeb []pathSection ;_adca *_aef .ContentStreamOperations ;};type intSet map[int ]struct{};func (_bdaba *textWord )appendMark (_egabgf *textMark ,_ffda _fa .PdfRectangle ){_bdaba ._dded =append (_bdaba ._dded ,_egabgf );
_bdaba .PdfRectangle =_deab (_bdaba .PdfRectangle ,_egabgf .PdfRectangle );if _egabgf ._eafd > _bdaba ._ddffg {_bdaba ._ddffg =_egabgf ._eafd ;};_bdaba ._ecdaa =_ffda .Ury -_bdaba .PdfRectangle .Lly ;};func (_gefca compositeCell )split (_cccga ,_dbeg []float64 )*textTable {_acag :=len (_cccga )+1;
_cfag :=len (_dbeg )+1;if _dcfc {_ae .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0043\u0065l\u006c\u002e\u0073\u0070l\u0069\u0074\u003a\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a\u0009\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025\u0073\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073=\u0025\u0036\u002e\u0032\u0066\u000a\t\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d%\u0036\u002e\u0032\u0066",_cfag ,_acag ,_gefca ,_cccga ,_dbeg );
_ded .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073\u000a",len (_gefca .paraList ));for _ccbd ,_fgge :=range _gefca .paraList {_ded .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ccbd ,_fgge .String ());
};_ded .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",len (_gefca .lines ()));for _fffbb ,_bagd :=range _gefca .lines (){_ded .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fffbb ,_bagd );};};_cccga =_gdbab (_cccga ,_gefca .Ury ,_gefca .Lly );
_dbeg =_gdbab (_dbeg ,_gefca .Llx ,_gefca .Urx );_dadda :=make (map[uint64 ]*textPara ,_cfag *_acag );_bedcf :=textTable {_aecda :_cfag ,_egcge :_acag ,_bbbb :_dadda };_edec :=_gefca .paraList ;_ff .Slice (_edec ,func (_dfge ,_fefe int )bool {_gbgg ,_bfaf :=_edec [_dfge ],_edec [_fefe ];
_fddfc ,_gefcd :=_gbgg .Lly ,_bfaf .Lly ;if _fddfc !=_gefcd {return _fddfc < _gefcd ;};return _gbgg .Llx < _bfaf .Llx ;});_gfede :=make (map[uint64 ]_fa .PdfRectangle ,_cfag *_acag );for _gecaf ,_eafb :=range _cccga [1:]{_acc :=_cccga [_gecaf ];for _bffcb ,_aaaf :=range _dbeg [1:]{_abcfb :=_dbeg [_bffcb ];
_gfede [_babg (_bffcb ,_gecaf )]=_fa .PdfRectangle {Llx :_abcfb ,Urx :_aaaf ,Lly :_eafb ,Ury :_acc };};};if _dcfc {_ae .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0043\u0065l\u006c\u002e\u0073\u0070\u006c\u0069\u0074\u003a\u0020\u0072e\u0063\u0074\u0073");
_ded .Printf ("\u0020\u0020\u0020\u0020");for _bbcc :=0;_bbcc < _cfag ;_bbcc ++{_ded .Printf ("\u0025\u0033\u0030\u0064\u002c\u0020",_bbcc );};_ded .Println ();for _gfbc :=0;_gfbc < _acag ;_gfbc ++{_ded .Printf ("\u0020\u0020\u0025\u0032\u0064\u003a",_gfbc );
for _cdfc :=0;_cdfc < _cfag ;_cdfc ++{_ded .Printf ("\u00256\u002e\u0032\u0066\u002c\u0020",_gfede [_babg (_cdfc ,_gfbc )]);};_ded .Println ();};};_cdfec :=func (_ecbac *textLine )(int ,int ){for _geeb :=0;_geeb < _acag ;_geeb ++{for _gagd :=0;_gagd < _cfag ;
_gagd ++{if _deee (_gfede [_babg (_gagd ,_geeb )],_ecbac .PdfRectangle ){return _gagd ,_geeb ;};};};return -1,-1;};_gdbd :=make (map[uint64 ][]*textLine ,_cfag *_acag );for _ ,_ggeg :=range _edec .lines (){_abbg ,_bdba :=_cdfec (_ggeg );if _abbg < 0{continue ;
};_gdbd [_babg (_abbg ,_bdba )]=append (_gdbd [_babg (_abbg ,_bdba )],_ggeg );};for _fdeb :=0;_fdeb < len (_cccga )-1;_fdeb ++{_bgf :=_cccga [_fdeb ];_fccf :=_cccga [_fdeb +1];for _cbbg :=0;_cbbg < len (_dbeg )-1;_cbbg ++{_feeb :=_dbeg [_cbbg ];_ddaf :=_dbeg [_cbbg +1];
_adac :=_fa .PdfRectangle {Llx :_feeb ,Urx :_ddaf ,Lly :_fccf ,Ury :_bgf };_dggc :=_gdbd [_babg (_cbbg ,_fdeb )];if len (_dggc )==0{continue ;};_cggd :=_bffg (_adac ,_dggc );_bedcf .put (_cbbg ,_fdeb ,_cggd );};};return &_bedcf ;};func (_cadg *wordBag )firstReadingIndex (_eeaf int )int {_dedb :=_cadg .firstWord (_eeaf )._ddffg ;
_cadcg :=float64 (_eeaf +1)*_bcef ;_gafd :=_cadcg +_bggad *_dedb ;_cbe :=_eeaf ;for _ ,_aaa :=range _cadg .depthBand (_cadcg ,_gafd ){if _eddg (_cadg .firstWord (_aaa ),_cadg .firstWord (_cbe ))< 0{_cbe =_aaa ;};};return _cbe ;};func (_aedg rulingList )merge ()*ruling {_gcdeb :=_aedg [0]._dade ;
_gcfb :=_aedg [0]._bggda ;_ecfba :=_aedg [0]._aed ;for _ ,_acbc :=range _aedg [1:]{_gcdeb +=_acbc ._dade ;if _acbc ._bggda < _gcfb {_gcfb =_acbc ._bggda ;};if _acbc ._aed > _ecfba {_ecfba =_acbc ._aed ;};};_eabg :=&ruling {_gagfc :_aedg [0]._gagfc ,_eeab :_aedg [0]._eeab ,Color :_aedg [0].Color ,_dade :_gcdeb /float64 (len (_aedg )),_bggda :_gcfb ,_aed :_ecfba };
if _eeff {_ae .Log .Info ("\u006de\u0072g\u0065\u003a\u0020\u0025\u0032d\u0020\u0076e\u0063\u0073\u0020\u0025\u0073",len (_aedg ),_eabg );for _gfecc ,_eegg :=range _aedg {_ded .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gfecc ,_eegg );
};};return _eabg ;};func (_cbae *wordBag )minDepth ()float64 {return _cbae ._agee -(_cbae .Ury -_cbae ._dca )};func (_gbfb *textTable )emptyCompositeRow (_adcac int )bool {for _gadd :=0;_gadd < _gbfb ._aecda ;_gadd ++{if _deaeg ,_bfae :=_gbfb ._agdc [_babg (_gadd ,_adcac )];
_bfae {if len (_deaeg .paraList )> 0{return false ;};};};return true ;};func _gfec (_ggce string )string {_fedc :=[]rune (_ggce );return string (_fedc [:len (_fedc )-1])};func _gccbb (_efcc ,_cdgd ,_fadec float64 )rulingKind {if _efcc >=_fadec &&_cgde (_cdgd ,_efcc ){return _fbde ;
};if _cdgd >=_fadec &&_cgde (_efcc ,_cdgd ){return _bggg ;};return _ggdc ;};func (_daad paraList )tables ()[]TextTable {var _fddf []TextTable ;if _dcfc {_ae .Log .Info ("\u0070\u0061\u0072\u0061\u0073\u002e\u0074\u0061\u0062\u006c\u0065\u0073\u003a");};
for _ ,_bbe :=range _daad {_bcabf :=_bbe ._cbaaf ;if _bcabf !=nil &&_bcabf .isExportable (){_fddf =append (_fddf ,_bcabf .toTextTable ());};};return _fddf ;};type textLine struct{_fa .PdfRectangle ;_ccca float64 ;_afbd []*textWord ;_afca float64 ;};func (_aca *textObject )checkOp (_edb *_aef .ContentStreamOperation ,_gfgf int ,_dgfc bool )(_bgge bool ,_efg error ){if _aca ==nil {var _ageb []_cb .PdfObject ;
if _gfgf > 0{_ageb =_edb .Params ;if len (_ageb )> _gfgf {_ageb =_ageb [:_gfgf ];};};_ae .Log .Debug ("\u0025\u0023q \u006f\u0070\u0065r\u0061\u006e\u0064\u0020out\u0073id\u0065\u0020\u0074\u0065\u0078\u0074\u002e p\u0061\u0072\u0061\u006d\u0073\u003d\u0025+\u0076",_edb .Operand ,_ageb );
};if _gfgf >=0{if len (_edb .Params )!=_gfgf {if _dgfc {_efg =_g .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");};_ae .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_edb .Operand ,_gfgf ,len (_edb .Params ),_edb .Params );
return false ,_efg ;};};return true ,nil ;};func (_caeb *textLine )pullWord (_egeb *wordBag ,_aege *textWord ,_babe int ){_caeb .appendWord (_aege );_egeb .removeWord (_aege ,_babe );};func (_eegf *shapesState )moveTo (_dgag ,_faea float64 ){_eegf ._efc =true ;
_eegf ._cfdd =_eegf .devicePoint (_dgag ,_faea );if _fdef {_ae .Log .Info ("\u006d\u006fv\u0065\u0054\u006f\u003a\u0020\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0064\u0065\u0076\u0069\u0063\u0065\u003d%.\u0032\u0066",_dgag ,_faea ,_eegf ._cfdd );
};};type pathSection struct{_dadd []*subpath ;_c .Color ;};func _cbee (_ecdf *wordBag ,_gfge *textWord ,_degc float64 )bool {return _gfge .Llx < _ecdf .Urx +_degc &&_ecdf .Llx -_degc < _gfge .Urx ;};func _gcga (_abce float64 )int {var _gcad int ;if _abce >=0{_gcad =int (_abce /_bcef );
}else {_gcad =int (_abce /_bcef )-1;};return _gcad ;};const (_dcdd =true ;_cfa =true ;_ebcbe =true ;_gdfbd =false ;_deff =false ;_ddgb =6;_efef =3.0;_gbbd =200;_dafc =true ;_fbab =true ;_affb =true ;_eacc =true ;_aafa =false ;);type shapesState struct{_afef _ge .Matrix ;
_dbbf _ge .Matrix ;_bab []*subpath ;_efc bool ;_cfdd _ge .Point ;_edfa *textObject ;};func _gdbab (_ebbca []float64 ,_ebbe ,_febeg float64 )[]float64 {_cffe ,_defa :=_ebbe ,_febeg ;if _defa < _cffe {_cffe ,_defa =_defa ,_cffe ;};_adbbcb :=make ([]float64 ,0,len (_ebbca )+2);
_adbbcb =append (_adbbcb ,_ebbe );for _ ,_ebcebc :=range _ebbca {if _ebcebc <=_cffe {continue ;}else if _ebcebc >=_defa {break ;};_adbbcb =append (_adbbcb ,_ebcebc );};_adbbcb =append (_adbbcb ,_febeg );return _adbbcb ;};func (_dfbgf paraList )readBefore (_geaa []int ,_faag ,_gcgb int )bool {_cebge ,_ceda :=_dfbgf [_faag ],_dfbgf [_gcgb ];
if _ggcc (_cebge ,_ceda )&&_cebge .Lly > _ceda .Lly {return true ;};if !(_cebge ._bceg .Urx < _ceda ._bceg .Llx ){return false ;};_ceagc ,_cgdga :=_cebge .Lly ,_ceda .Lly ;if _ceagc > _cgdga {_cgdga ,_ceagc =_ceagc ,_cgdga ;};_dfdc :=_de .Max (_cebge ._bceg .Llx ,_ceda ._bceg .Llx );
_bdfc :=_de .Min (_cebge ._bceg .Urx ,_ceda ._bceg .Urx );_dbfg :=_dfbgf .llyRange (_geaa ,_ceagc ,_cgdga );for _ ,_edfb :=range _dbfg {if _edfb ==_faag ||_edfb ==_gcgb {continue ;};_bbbg :=_dfbgf [_edfb ];if _bbbg ._bceg .Llx <=_bdfc &&_dfdc <=_bbbg ._bceg .Urx {return false ;
};};return true ;};func (_gebf *wordBag )removeDuplicates (){if _decd {_ae .Log .Info ("r\u0065m\u006f\u0076\u0065\u0044\u0075\u0070\u006c\u0069c\u0061\u0074\u0065\u0073: \u0025\u0071",_gebf .text ());};for _ ,_afec :=range _gebf .depthIndexes (){if len (_gebf ._cfe [_afec ])==0{continue ;
};_facb :=_gebf ._cfe [_afec ][0];_egba :=_eaa *_facb ._ddffg ;_bfgf :=_facb ._ecdaa ;for _ ,_ecdg :=range _gebf .depthBand (_bfgf ,_bfgf +_egba ){_dege :=map[*textWord ]struct{}{};_ddea :=_gebf ._cfe [_ecdg ];for _ ,_cbfb :=range _ddea {if _ ,_bggadg :=_dege [_cbfb ];
_bggadg {continue ;};for _ ,_bdd :=range _ddea {if _ ,_adbaf :=_dege [_bdd ];_adbaf {continue ;};if _bdd !=_cbfb &&_bdd ._gcead ==_cbfb ._gcead &&_de .Abs (_bdd .Llx -_cbfb .Llx )< _egba &&_de .Abs (_bdd .Urx -_cbfb .Urx )< _egba &&_de .Abs (_bdd .Lly -_cbfb .Lly )< _egba &&_de .Abs (_bdd .Ury -_cbfb .Ury )< _egba {_dege [_bdd ]=struct{}{};
};};};if len (_dege )> 0{_cded :=0;for _ ,_dfba :=range _ddea {if _ ,_bedf :=_dege [_dfba ];!_bedf {_ddea [_cded ]=_dfba ;_cded ++;};};_gebf ._cfe [_ecdg ]=_ddea [:len (_ddea )-len (_dege )];if len (_gebf ._cfe [_ecdg ])==0{delete (_gebf ._cfe ,_ecdg );
};};};};};func (_adfc rulingList )secMinMax ()(float64 ,float64 ){_edbb ,_abcd :=_adfc [0]._bggda ,_adfc [0]._aed ;for _ ,_adacg :=range _adfc [1:]{if _adacg ._bggda < _edbb {_edbb =_adacg ._bggda ;};if _adacg ._aed > _abcd {_abcd =_adacg ._aed ;};};return _edbb ,_abcd ;
};func (_ceeb paraList )lines ()[]*textLine {var _aefcg []*textLine ;for _ ,_bccg :=range _ceeb {_aefcg =append (_aefcg ,_bccg ._dfcfe ...);};return _aefcg ;};

// Append appends `mark` to the mark array.
func (_dgg *TextMarkArray )Append (mark TextMark ){_dgg ._dfgf =append (_dgg ._dfgf ,mark )};const (_dddb =1.0e-6;_ccabb =1.0e-4;_ebdb =10;_bcef =6;_fgda =0.5;_bgeb =0.12;_gfbg =0.19;_dgaa =0.04;_dgdc =0.04;_ebef =1.0;_beeb =0.04;_gdeg =0.4;_fcfae =0.7;
_gfdb =1.0;_feac =0.1;_dbfc =1.4;_facd =0.46;_adfbf =0.02;_eaa =0.2;_bcab =0.5;_geeg =4;_bggad =4.0;_fgbd =6;_abbf =0.3;_defca =0.01;_gcdc =0.02;_geca =2;_baaaf =2;_cgaba =500;_egccb =4.0;_gecfg =4.0;_ffdb =0.05;_egb =0.1;_gecg =2.0;_afaba =2.0;_beef =1.5;
_gbag =3.0;_dbad =0.25;);func (_gcfd *textTable )get (_bfba ,_dbddf int )*textPara {return _gcfd ._bbbb [_babg (_bfba ,_dbddf )]};func _bcad (_dab *wordBag ,_cfeg float64 ,_caae ,_dbed rulingList )[]*wordBag {var _bdeb []*wordBag ;for _ ,_gdbg :=range _dab .depthIndexes (){_dcdb :=false ;
for !_dab .empty (_gdbg ){_bcgb :=_dab .firstReadingIndex (_gdbg );_deba :=_dab .firstWord (_bcgb );_dbcf :=_abfg (_deba ,_cfeg ,_caae ,_dbed );_dab .removeWord (_deba ,_bcgb );if _bfaag {_ae .Log .Info ("\u0066\u0069\u0072\u0073\u0074\u0057\u006f\u0072\u0064\u0020\u005e\u005e^\u005e\u0020\u0025\u0073",_deba .String ());
};for _dabc :=true ;_dabc ;_dabc =_dcdb {_dcdb =false ;_daa :=_gfdb *_dbcf ._dca ;_eddf :=_gdeg *_dbcf ._dca ;_fagc :=_ebef *_dbcf ._dca ;if _bfaag {_ae .Log .Info ("\u0070a\u0072a\u0057\u006f\u0072\u0064\u0073\u0020\u0064\u0065\u0070\u0074\u0068 \u0025\u002e\u0032\u0066 \u002d\u0020\u0025\u002e\u0032f\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061\u0044\u0065\u0070\u0074\u0068\u0047\u0061\u0070\u003d\u0025\u002e\u0032\u0066\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061R\u0065\u0061\u0064\u0069\u006e\u0067\u0047\u0061p\u003d\u0025\u002e\u0032\u0066",_dbcf .minDepth (),_dbcf .maxDepth (),_fagc ,_eddf );
};if _dab .scanBand ("\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c",_dbcf ,_fga (_cbee ,0),_dbcf .minDepth ()-_fagc ,_dbcf .maxDepth ()+_fagc ,_beeb ,false ,false )> 0{_dcdb =true ;};if _dab .scanBand ("\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_dbcf ,_fga (_cbee ,_eddf ),_dbcf .minDepth (),_dbcf .maxDepth (),_fcfae ,false ,false )> 0{_dcdb =true ;
};if _dcdb {continue ;};_dfaaa :=_dab .scanBand ("",_dbcf ,_fga (_dfgc ,_daa ),_dbcf .minDepth (),_dbcf .maxDepth (),_feac ,true ,false );if _dfaaa > 0{_gcec :=(_dbcf .maxDepth ()-_dbcf .minDepth ())/_dbcf ._dca ;if (_dfaaa > 1&&float64 (_dfaaa )> 0.3*_gcec )||_dfaaa <=10{if _dab .scanBand ("\u006f\u0074\u0068e\u0072",_dbcf ,_fga (_dfgc ,_daa ),_dbcf .minDepth (),_dbcf .maxDepth (),_feac ,false ,true )> 0{_dcdb =true ;
};};};};_bdeb =append (_bdeb ,_dbcf );};};return _bdeb ;};func (_gddg intSet )has (_cfcfa int )bool {_ ,_cfgc :=_gddg [_cfcfa ];return _cfgc };func (_aabd paraList )topoOrder ()[]int {if _fdcd {_ae .Log .Info ("\u0074\u006f\u0070\u006f\u004f\u0072\u0064\u0065\u0072\u003a");
};_bdce :=len (_aabd );_dgea :=make ([]bool ,_bdce );_effa :=make ([]int ,0,_bdce );_aeba :=_aabd .llyOrdering ();var _gfdbg func (_aagc int );_gfdbg =func (_dddba int ){_dgea [_dddba ]=true ;for _fabc :=0;_fabc < _bdce ;_fabc ++{if !_dgea [_fabc ]{if _aabd .readBefore (_aeba ,_dddba ,_fabc ){_gfdbg (_fabc );
};};};_effa =append (_effa ,_dddba );};for _feee :=0;_feee < _bdce ;_feee ++{if !_dgea [_feee ]{_gfdbg (_feee );};};return _feed (_effa );};func (_aadc *shapesState )quadraticTo (_ddbc ,_eba ,_ccef ,_ffe float64 ){if _fdef {_ae .Log .Info ("\u0071\u0075\u0061d\u0072\u0061\u0074\u0069\u0063\u0054\u006f\u003a");
};_aadc .addPoint (_ccef ,_ffe );};

// String returns a string describing `tm`.
func (_gca TextMark )String ()string {_acbb :=_gca .BBox ;var _ddff string ;if _gca .Font !=nil {_ddff =_gca .Font .String ();if len (_ddff )> 50{_ddff =_ddff [:50]+"\u002e\u002e\u002e";};};var _bcfb string ;if _gca .Meta {_bcfb ="\u0020\u002a\u004d\u002a";
};return _ded .Sprintf ("\u007b\u0054\u0065\u0078t\u004d\u0061\u0072\u006b\u003a\u0020\u0025\u0064\u0020%\u0071\u003d\u0025\u0030\u0032\u0078\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e2\u0066\u0029\u0020\u0028\u00256\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0025\u0073\u007d",_gca .Offset ,_gca .Text ,[]rune (_gca .Text ),_acbb .Llx ,_acbb .Lly ,_acbb .Urx ,_acbb .Ury ,_ddff ,_bcfb );
};func (_cdgde *textTable )subdivide ()*textTable {_cdgde .logComposite ("\u0073u\u0062\u0064\u0069\u0076\u0069\u0064e");_cgga :=_cdgde .compositeRowCorridors ();_dagc :=_cdgde .compositeColCorridors ();if _dcfc {_ae .Log .Info ("\u0073u\u0062\u0064i\u0076\u0069\u0064\u0065:\u000a\u0009\u0072o\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s=\u0025\u0073\u000a\t\u0063\u006fl\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073=\u0025\u0073",_becde (_cgga ),_becde (_dagc ));
};if len (_cgga )==0||len (_dagc )==0{return _cdgde ;};_agbd (_cgga );_agbd (_dagc );if _dcfc {_ae .Log .Info ("\u0073\u0075\u0062\u0064\u0069\u0076\u0069\u0064\u0065\u0020\u0066\u0069\u0078\u0065\u0064\u003a\u000a\u0009r\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073\u003d\u0025\u0073\u000a\u0009\u0063\u006f\u006cC\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d\u0025\u0073",_becde (_cgga ),_becde (_dagc ));
};_ccgd ,_fccfa :=_gfee (_cdgde ._egcge ,_cgga );_addc ,_fgddg :=_gfee (_cdgde ._aecda ,_dagc );_daddf :=make (map[uint64 ]*textPara ,_fgddg *_fccfa );_gfgdc :=&textTable {PdfRectangle :_cdgde .PdfRectangle ,_eecbc :_cdgde ._eecbc ,_egcge :_fccfa ,_aecda :_fgddg ,_bbbb :_daddf };
if _dcfc {_ae .Log .Info ("\u0073\u0075b\u0064\u0069\u0076\u0069\u0064\u0065\u003a\u0020\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0063\u0065\u006c\u006c\u0073\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0079\u004f\u0066\u0066\u0073\u0065\u0074\u0073=\u0025\u002b\u0076\u000a"+"\u0009\u0078\u004f\u0066\u0066\u0073\u0065\u0074\u0073\u003d\u0025\u002b\u0076",_cdgde ._aecda ,_cdgde ._egcge ,_fgddg ,_fccfa ,_becde (_cgga ),_becde (_dagc ),_ccgd ,_addc );
};for _cafb :=0;_cafb < _cdgde ._egcge ;_cafb ++{_gaag :=_ccgd [_cafb ];for _cfbfe :=0;_cfbfe < _cdgde ._aecda ;_cfbfe ++{_bfad :=_addc [_cfbfe ];if _dcfc {_ded .Printf ("\u0025\u0036\u0064\u002c %\u0032\u0064\u003a\u0020\u0078\u0030\u003d\u0025\u0064\u0020\u0079\u0030\u003d\u0025d\u000a",_cfbfe ,_cafb ,_bfad ,_gaag );
};_gedg ,_ggef :=_cdgde ._agdc [_babg (_cfbfe ,_cafb )];if !_ggef {continue ;};_cadea :=_gedg .split (_cgga [_cafb ],_dagc [_cfbfe ]);for _ggdb :=0;_ggdb < _cadea ._egcge ;_ggdb ++{for _cefa :=0;_cefa < _cadea ._aecda ;_cefa ++{_dbgda :=_cadea .get (_cefa ,_ggdb );
_gfgdc .put (_bfad +_cefa ,_gaag +_ggdb ,_dbgda );if _dcfc {_ded .Printf ("\u0025\u0038\u0064\u002c\u0020\u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_bfad +_cefa ,_gaag +_ggdb ,_dbgda );};};};};};return _gfgdc ;};type textState struct{_gfaad float64 ;
_dge float64 ;_gaf float64 ;_ffc float64 ;_fdc float64 ;_dbgb RenderMode ;_baed float64 ;_acde *_fa .PdfFont ;_dfae _fa .PdfRectangle ;_abea int ;_fcc int ;};func _fagfc (_cadd string )(string ,bool ){_dbcee :=[]rune (_cadd );if len (_dbcee )!=1{return "",false ;
};_efdef ,_dgdea :=_aagdg [_dbcee [0]];return _efdef ,_dgdea ;};type textMark struct{_fa .PdfRectangle ;_cafc int ;_ebed string ;_eagb string ;_bbfe *_fa .PdfFont ;_eafd float64 ;_adbbd float64 ;_ffecg _ge .Matrix ;_gace _ge .Point ;_efeb _fa .PdfRectangle ;
_efa _c .Color ;_ggfd _c .Color ;_dgdcb _cb .PdfObject ;_ebafd []string ;Tw float64 ;Th float64 ;_gcbcd int ;};

// String returns a description of `b`.
func (_fgbb *wordBag )String ()string {var _cagb []string ;for _ ,_dedf :=range _fgbb .depthIndexes (){_cfcf :=_fgbb ._cfe [_dedf ];for _ ,_affg :=range _cfcf {_cagb =append (_cagb ,_affg ._gcead );};};return _ded .Sprintf ("\u0025.\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065=\u0025\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0025\u0071",_fgbb .PdfRectangle ,_fgbb ._dca ,len (_cagb ),_cagb );
};func (_gecf *shapesState )newSubPath (){_gecf .clearPath ();if _fdef {_ae .Log .Info ("\u006e\u0065\u0077\u0053\u0075\u0062\u0050\u0061\u0074h\u003a\u0020\u0025\u0073",_gecf );};};func (_bdca paraList )log (_cffg string ){if !_fdcd {return ;};_ae .Log .Info ("%\u0038\u0073\u003a\u0020\u0025\u0064 \u0070\u0061\u0072\u0061\u0073\u0020=\u003d\u003d\u003d\u003d\u003d\u003d\u002d-\u002d\u002d\u002d\u002d\u002d\u003d\u003d\u003d\u003d\u003d=\u003d",_cffg ,len (_bdca ));
for _cabe ,_becb :=range _bdca {if _becb ==nil {continue ;};_bcfee :=_becb .text ();_ebff :="\u0020\u0020";if _becb ._cbaaf !=nil {_ebff =_ded .Sprintf ("\u005b%\u0064\u0078\u0025\u0064\u005d",_becb ._cbaaf ._aecda ,_becb ._cbaaf ._egcge );};_ded .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0025s\u0020\u0025\u0071\u000a",_cabe ,_becb .PdfRectangle ,_ebff ,_efac (_bcfee ,50));
};};func _bfege (_gegb _fa .PdfRectangle )*ruling {return &ruling {_gagfc :_fbde ,_dade :_gegb .Ury ,_bggda :_gegb .Llx ,_aed :_gegb .Urx };};func (_ebb *shapesState )devicePoint (_fagf ,_cba float64 )_ge .Point {_fccb :=_ebb ._dbbf .Mult (_ebb ._afef );
_fagf ,_cba =_fccb .Transform (_fagf ,_cba );return _ge .NewPoint (_fagf ,_cba );};func (_fcbe *textPara )toTextMarks (_cedd *int )[]TextMark {if _fcbe ._cbaaf ==nil {return _fcbe .toCellTextMarks (_cedd );};var _faca []TextMark ;for _cgef :=0;_cgef < _fcbe ._cbaaf ._egcge ;
_cgef ++{for _bcdde :=0;_bcdde < _fcbe ._cbaaf ._aecda ;_bcdde ++{_bacec :=_fcbe ._cbaaf .get (_bcdde ,_cgef );if _bacec ==nil {_faca =_fffb (_faca ,_cedd ,"\u0009");}else {_aaefa :=_bacec .toCellTextMarks (_cedd );_faca =append (_faca ,_aaefa ...);};_faca =_fffb (_faca ,_cedd ,"\u0020");
};if _cgef < _fcbe ._cbaaf ._egcge -1{_faca =_fffb (_faca ,_cedd ,"\u000a");};};return _faca ;};func (_bea *subpath )removeDuplicates (){if len (_bea ._afdb )==0{return ;};_cebc :=[]_ge .Point {_bea ._afdb [0]};for _ ,_dacg :=range _bea ._afdb [1:]{if !_bcbc (_dacg ,_cebc [len (_cebc )-1]){_cebc =append (_cebc ,_dacg );
};};_bea ._afdb =_cebc ;};

// String returns a description of `p`.
func (_dbcc *textPara )String ()string {if _dbcc ._fdbaa {return _ded .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u005b\u0045\u004d\u0050\u0054\u0059\u005d",_dbcc .PdfRectangle );};_agefa :="";if _dbcc ._cbaaf !=nil {_agefa =_ded .Sprintf ("\u005b\u0025\u0064\u0078\u0025\u0064\u005d\u0020",_dbcc ._cbaaf ._aecda ,_dbcc ._cbaaf ._egcge );
};return _ded .Sprintf ("\u0025\u0036\u002e\u0032f \u0025\u0073\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u0020\u0025\u0071",_dbcc .PdfRectangle ,_agefa ,len (_dbcc ._dfcfe ),_efac (_dbcc .text (),50));};func _edda (_gfce ,_bbgf bounded )float64 {return _gfce .bbox ().Llx -_bbgf .bbox ().Urx };
type paraList []*textPara ;

// ToTextMark returns the public view of `tm`.
func (_gagf *textMark )ToTextMark ()TextMark {return TextMark {Text :_gagf ._ebed ,Original :_gagf ._eagb ,BBox :_gagf ._efeb ,Font :_gagf ._bbfe ,FontSize :_gagf ._eafd ,FillColor :_gagf ._efa ,StrokeColor :_gagf ._ggfd ,Orientation :_gagf ._cafc ,DirectObject :_gagf ._dgdcb ,ObjString :_gagf ._ebafd ,Tw :_gagf .Tw ,Th :_gagf .Th ,Tc :_gagf ._adbbd ,Index :_gagf ._gcbcd };
};func (_eafe rulingList )primaries ()[]float64 {_gffd :=make (map[float64 ]struct{},len (_eafe ));for _ ,_fdgfg :=range _eafe {_gffd [_fdgfg ._dade ]=struct{}{};};_edaf :=make ([]float64 ,len (_gffd ));_fceg :=0;for _fccg :=range _gffd {_edaf [_fceg ]=_fccg ;
_fceg ++;};_ff .Float64s (_edaf );return _edaf ;};type bounded interface{bbox ()_fa .PdfRectangle };func (_facgc *ruling )encloses (_eeea ,_fdded float64 )bool {return _facgc ._bggda -_gecg <=_eeea &&_fdded <=_facgc ._aed +_gecg ;};func _gegg (_ffgg string )bool {if _e .RuneCountInString (_ffgg )< _geeg {return false ;
};_egfc ,_eaad :=_e .DecodeLastRuneInString (_ffgg );if _eaad <=0||!_gc .Is (_gc .Hyphen ,_egfc ){return false ;};_egfc ,_eaad =_e .DecodeLastRuneInString (_ffgg [:len (_ffgg )-_eaad ]);return _eaad > 0&&!_gc .IsSpace (_egfc );};func (_afdfe *textTable )isExportable ()bool {if _afdfe ._eecbc {return true ;
};_egfba :=func (_cdded int )bool {_efbe :=_afdfe .get (0,_cdded );if _efbe ==nil {return false ;};_gebb :=_efbe .text ();_becgc :=_e .RuneCountInString (_gebb );_fgfg :=_eegb .MatchString (_gebb );return _becgc <=1||_fgfg ;};for _edbef :=0;_edbef < _afdfe ._egcge ;
_edbef ++{if !_egfba (_edbef ){return true ;};};return false ;};func _dced (_bcca []rulingList )(rulingList ,rulingList ){var _fcea rulingList ;for _ ,_aedd :=range _bcca {_fcea =append (_fcea ,_aedd ...);};return _fcea .vertsHorzs ();};func (_dfcag *compositeCell )updateBBox (){for _ ,_eged :=range _dfcag .paraList {_dfcag .PdfRectangle =_deab (_dfcag .PdfRectangle ,_eged .PdfRectangle );
};};func (_bcgge rulingList )sort (){_ff .Slice (_bcgge ,_bcgge .comp )};func (_acg paraList )reorder (_aade []int ){_cbff :=make (paraList ,len (_acg ));for _caebd ,_gffb :=range _aade {_cbff [_caebd ]=_acg [_gffb ];};copy (_acg ,_cbff );};func _bdab (_fdbc bounded )float64 {return -_fdbc .bbox ().Lly };
const (_fe ="\u0045\u0052R\u004f\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u002c\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";
_cc ="\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0043a\u006e\u0027\u0074 g\u0065\u0074\u0020\u0066\u006f\u006et\u0020\u0070\u0072\u006f\u0070\u0065\u0072\u0074\u0069\u0065\u0073\u002c\u0020\u0066\u006fn\u0074\u0020\u006e\u006f\u0074\u0020\u0066\u006fu\u006e\u0064";
_gg ="\u0045\u0052\u0052O\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0067\u0065\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0074\u0072\u0065\u0061\u006d\u002c\u0020\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";);
type cachedImage struct{_fb *_fa .Image ;_cg _fa .PdfColorspace ;};func (_fdgc *stateStack )size ()int {return len (*_fdgc )};func _abfg (_ggf *textWord ,_eggg float64 ,_eaf ,_bdeea rulingList )*wordBag {_dcbf :=_gcga (_ggf ._ecdaa );_befd :=[]*textWord {_ggf };
_bgcd :=wordBag {_cfe :map[int ][]*textWord {_dcbf :_befd },PdfRectangle :_ggf .PdfRectangle ,_dca :_ggf ._ddffg ,_agee :_eggg ,_dgaga :_eaf ,_bdbca :_bdeea };return &_bgcd ;};func (_cagbe *textPara )bbox ()_fa .PdfRectangle {return _cagbe .PdfRectangle };
func _gdbe (_daddc []_cb .PdfObject )(_adgf ,_ebec float64 ,_fbdd error ){if len (_daddc )!=2{return 0,0,_ded .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020o\u0066 \u0070\u0061\u0072\u0061\u006d\u0073\u003a \u0025\u0064",len (_daddc ));
};_aggc ,_fbdd :=_cb .GetNumbersAsFloat (_daddc );if _fbdd !=nil {return 0,0,_fbdd ;};return _aggc [0],_aggc [1],nil ;};

// Elements returns the TextMarks in `ma`.
func (_baea *TextMarkArray )Elements ()[]TextMark {return _baea ._dfgf };func (_gfdd *textWord )addDiacritic (_cdce string ){_gdfgf :=_gfdd ._dded [len (_gfdd ._dded )-1];_gdfgf ._ebed +=_cdce ;_gdfgf ._ebed =_b .NFKC .String (_gdfgf ._ebed );};func (_bfeb *textObject )showTextAdjusted (_gbdc *_cb .PdfObjectArray )error {_ebd :=false ;
for _ ,_daea :=range _gbdc .Elements (){switch _daea .(type ){case *_cb .PdfObjectFloat ,*_cb .PdfObjectInteger :_cgd ,_baa :=_cb .GetNumberAsFloat (_daea );if _baa !=nil {_ae .Log .Debug ("\u0045\u0052\u0052\u004fR\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078t\u0041\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0042\u0061\u0064\u0020\u006e\u0075\u006d\u0065r\u0069\u0063\u0061\u006c\u0020a\u0072\u0067\u002e\u0020\u006f\u003d\u0025\u0073\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_daea ,_gbdc );
return _baa ;};_bbgb ,_fcd :=-_cgd *0.001*_bfeb ._ddc ._fdc ,0.0;if _ebd {_fcd ,_bbgb =_bbgb ,_fcd ;};_bebf :=_cegg (_ge .Point {X :_bbgb ,Y :_fcd });_bfeb ._abd .Concat (_bebf );case *_cb .PdfObjectString :_aff :=_cb .TraceToDirectObject (_daea );_fcaf ,_fgd :=_cb .GetStringBytes (_aff );
if !_fgd {_ae .Log .Trace ("s\u0068\u006f\u0077\u0054\u0065\u0078\u0074\u0041\u0064j\u0075\u0073\u0074\u0065\u0064\u003a\u0020Ba\u0064\u0020\u0073\u0074r\u0069\u006e\u0067\u0020\u0061\u0072\u0067\u002e\u0020o=\u0025\u0073 \u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_daea ,_gbdc );
return _cb .ErrTypeError ;};_bfeb .renderText (_aff ,_fcaf );default:_ae .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078\u0074A\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0055\u006e\u0065\u0078p\u0065\u0063\u0074\u0065\u0064\u0020\u0074\u0079\u0070\u0065\u0020\u0028%T\u0029\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_daea ,_gbdc );
return _cb .ErrTypeError ;};};return nil ;};var _fd =false ;func (_fcecg *textObject )showText (_eff _cb .PdfObject ,_fad []byte )error {return _fcecg .renderText (_eff ,_fad );};func (_ebgd *textTable )compositeColCorridors ()map[int ][]float64 {_fccga :=make (map[int ][]float64 ,_ebgd ._aecda );
if _dcfc {_ae .Log .Info ("\u0063\u006f\u006d\u0070o\u0073\u0069\u0074\u0065\u0043\u006f\u006c\u0043\u006f\u0072r\u0069d\u006f\u0072\u0073\u003a\u0020\u0077\u003d%\u0064\u0020",_ebgd ._aecda );};for _cfdgf :=0;_cfdgf < _ebgd ._aecda ;_cfdgf ++{_fccga [_cfdgf ]=nil ;
};return _fccga ;};func (_bbgec rulingList )snapToGroupsDirection ()rulingList {_bbgec .sortStrict ();_cdab :=make (map[*ruling ]rulingList ,len (_bbgec ));_gacec :=_bbgec [0];_fdcga :=func (_dfaec *ruling ){_gacec =_dfaec ;_cdab [_gacec ]=rulingList {_dfaec }};
_fdcga (_bbgec [0]);for _ ,_fcfac :=range _bbgec [1:]{if _fcfac ._dade < _gacec ._dade -_dddb {_ae .Log .Error ("\u0073\u006e\u0061\u0070T\u006f\u0047\u0072\u006f\u0075\u0070\u0073\u0044\u0069r\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0057\u0072\u006f\u006e\u0067\u0020\u0070\u0072\u0069\u006da\u0072\u0079\u0020\u006f\u0072d\u0065\u0072\u002e\u000a\u0009\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0020\u0076\u003d\u0025\u0073",_gacec ,_fcfac );
};if _fcfac ._dade > _gacec ._dade +_afaba {_fdcga (_fcfac );}else {_cdab [_gacec ]=append (_cdab [_gacec ],_fcfac );};};_ecdc :=make (map[*ruling ]float64 ,len (_cdab ));_dcgdf :=make (map[*ruling ]*ruling ,len (_bbgec ));for _eced ,_dggd :=range _cdab {_ecdc [_eced ]=_dggd .mergePrimary ();
for _ ,_edeb :=range _dggd {_dcgdf [_edeb ]=_eced ;};};for _ ,_aegef :=range _bbgec {_aegef ._dade =_ecdc [_dcgdf [_aegef ]];};_ecbf :=make (rulingList ,0,len (_bbgec ));for _ ,_cceb :=range _cdab {_fegba :=_cceb .splitSec ();for _ecbd ,_gaadc :=range _fegba {_ccff :=_gaadc .merge ();
if len (_ecbf )> 0{_cdbg :=_ecbf [len (_ecbf )-1];if _cdbg .alignsPrimary (_ccff )&&_cdbg .alignsSec (_ccff ){_ae .Log .Error ("\u0073\u006e\u0061\u0070\u0054\u006fG\u0072\u006f\u0075\u0070\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0044\u0075\u0070\u006ci\u0063\u0061\u0074\u0065\u0020\u0069\u003d\u0025\u0064\u000a\u0009\u0077\u003d\u0025s\u000a\t\u0076\u003d\u0025\u0073",_ecbd ,_cdbg ,_ccff );
continue ;};};_ecbf =append (_ecbf ,_ccff );};};_ecbf .sortStrict ();return _ecbf ;};func (_gdfd *textObject )getCurrentFont ()*_fa .PdfFont {_fcab :=_gdfd ._ddc ._acde ;if _fcab ==nil {_ae .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020U\u0073\u0069\u006e\u0067\u0020d\u0065\u0066a\u0075\u006c\u0074\u002e");
return _fa .DefaultFont ();};return _fcab ;};type wordBag struct{_fa .PdfRectangle ;_dca float64 ;_dgaga ,_bdbca rulingList ;_agee float64 ;_cfe map[int ][]*textWord ;};

// PageFonts represents extracted fonts on a PDF page.
type PageFonts struct{Fonts []Font ;};func _cdaed (_bfgdd ,_abggd int )int {if _bfgdd > _abggd {return _bfgdd ;};return _abggd ;};func _faeg (_bccc ,_gdea bounded )float64 {return _bdab (_bccc )-_bdab (_gdea )};func _ecec (_gagefc map[float64 ]gridTile )[]float64 {_dgab :=make ([]float64 ,0,len (_gagefc ));
for _ffefg :=range _gagefc {_dgab =append (_dgab ,_ffefg );};_ff .Float64s (_dgab );return _dgab ;};func _ggcc (_bedc ,_dcac *textPara )bool {return _bbbe (_bedc ._bceg ,_dcac ._bceg )};func (_gcege *wordBag )depthRange (_defd ,_bff int )[]int {var _cgede []int ;
for _gfeb :=range _gcege ._cfe {if _defd <=_gfeb &&_gfeb <=_bff {_cgede =append (_cgede ,_gfeb );};};if len (_cgede )==0{return nil ;};_ff .Ints (_cgede );return _cgede ;};

// PageImages represents extracted images on a PDF page with spatial information:
// display position and size.
type PageImages struct{Images []ImageMark ;};func _ccda (_cabb ,_eaded _ge .Point )rulingKind {_bedd :=_de .Abs (_cabb .X -_eaded .X );_bbed :=_de .Abs (_cabb .Y -_eaded .Y );return _gccbb (_bedd ,_bbed ,_ffdb );};func _fdaa (_dcaf ,_cgf bounded )float64 {_geba :=_eddg (_dcaf ,_cgf );
if !_bggba (_geba ){return _geba ;};return _faeg (_dcaf ,_cgf );};

// String returns a human readable description of `s`.
func (_gbcd intSet )String ()string {var _adace []int ;for _fccgae :=range _gbcd {if _gbcd .has (_fccgae ){_adace =append (_adace ,_fccgae );};};_ff .Ints (_adace );return _ded .Sprintf ("\u0025\u002b\u0076",_adace );};func (_cada paraList )computeEBBoxes (){if _dfcad {_ae .Log .Info ("\u0063o\u006dp\u0075\u0074\u0065\u0045\u0042\u0042\u006f\u0078\u0065\u0073\u003a");
};for _ ,_gdba :=range _cada {_gdba ._bceg =_gdba .PdfRectangle ;};_adaf :=_cada .yNeighbours (0);for _babf ,_edgf :=range _cada {_dgef :=_edgf ._bceg ;_fggf ,_ggbc :=-1.0e9,+1.0e9;for _ ,_ebceb :=range _adaf [_edgf ]{_dgdg :=_cada [_ebceb ]._bceg ;if _dgdg .Urx < _dgef .Llx {_fggf =_de .Max (_fggf ,_dgdg .Urx );
}else if _dgef .Urx < _dgdg .Llx {_ggbc =_de .Min (_ggbc ,_dgdg .Llx );};};for _dadb ,_edfd :=range _cada {_fbgc :=_edfd ._bceg ;if _babf ==_dadb ||_fbgc .Ury > _dgef .Lly {continue ;};if _fggf <=_fbgc .Llx &&_fbgc .Llx < _dgef .Llx {_dgef .Llx =_fbgc .Llx ;
}else if _fbgc .Urx <=_ggbc &&_dgef .Urx < _fbgc .Urx {_dgef .Urx =_fbgc .Urx ;};};if _dfcad {_ded .Printf ("\u0025\u0034\u0064\u003a %\u0036\u002e\u0032\u0066\u2192\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0071\u000a",_babf ,_edgf ._bceg ,_dgef ,_efac (_edgf .text (),50));
};_edgf ._bceg =_dgef ;};if _gdfbd {for _ ,_fcb :=range _cada {_fcb .PdfRectangle =_fcb ._bceg ;};};};func (_ebcae *ruling )intersects (_gdga *ruling )bool {_gggdb :=(_ebcae ._gagfc ==_bggg &&_gdga ._gagfc ==_fbde )||(_gdga ._gagfc ==_bggg &&_ebcae ._gagfc ==_fbde );
_cbfac :=func (_gdgg ,_eace *ruling )bool {return _gdgg ._bggda -_gecg <=_eace ._dade &&_eace ._dade <=_gdgg ._aed +_gecg ;};_affe :=_cbfac (_ebcae ,_gdga );_bbefg :=_cbfac (_gdga ,_ebcae );if _cddgc {_ded .Printf ("\u0020\u0020\u0020\u0020\u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003a\u0020\u0020\u006fr\u0074\u0068\u006f\u0067\u006f\u006e\u0061l\u003d\u0025\u0074\u0020\u006f\u0031\u003d\u0025\u0074\u0020\u006f2\u003d\u0025\u0074\u0020\u2192\u0020\u0025\u0074\u000a"+"\u0020\u0020\u0020 \u0020\u0020\u0020\u0076\u003d\u0025\u0073\u000a"+" \u0020\u0020\u0020\u0020\u0020\u0077\u003d\u0025\u0073\u000a",_gggdb ,_affe ,_bbefg ,_gggdb &&_affe &&_bbefg ,_ebcae ,_gdga );
};return _gggdb &&_affe &&_bbefg ;};func (_fdgg *textTable )getDown ()paraList {_gaaec :=make (paraList ,_fdgg ._aecda );for _cadac :=0;_cadac < _fdgg ._aecda ;_cadac ++{_badc :=_fdgg .get (_cadac ,_fdgg ._egcge -1)._ddce ;if _badc .taken (){return nil ;
};_gaaec [_cadac ]=_badc ;};for _fadc :=0;_fadc < _fdgg ._aecda -1;_fadc ++{if _gaaec [_fadc ]._gfdg !=_gaaec [_fadc +1]{return nil ;};};return _gaaec ;};func (_affd *wordBag )depthIndexes ()[]int {if len (_affd ._cfe )==0{return nil ;};_edgc :=make ([]int ,len (_affd ._cfe ));
_dcfb :=0;for _baeb :=range _affd ._cfe {_edgc [_dcfb ]=_baeb ;_dcfb ++;};_ff .Ints (_edgc );return _edgc ;};

// String returns a description of `tm`.
func (_eded *textMark )String ()string {return _ded .Sprintf ("\u0025\u002e\u0032f \u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\u0022\u0025\u0073\u0022",_eded .PdfRectangle ,_eded ._eafd ,_eded ._ebed );};func _cgfc (_cbaa ,_dfee *textPara )bool {if _cbaa ._fdbaa ||_dfee ._fdbaa {return true ;
};return _bggba (_cbaa .depth ()-_dfee .depth ());};func (_cccaa gridTiling )complete ()bool {for _ ,_eagf :=range _cccaa ._ddba {for _ ,_ccbg :=range _eagf {if !_ccbg .complete (){return false ;};};};return true ;};func (_bgcf *wordBag )highestWord (_gfca int ,_ebbc ,_gced float64 )*textWord {for _ ,_ggaf :=range _bgcf ._cfe [_gfca ]{if _ebbc <=_ggaf ._ecdaa &&_ggaf ._ecdaa <=_gced {return _ggaf ;
};};return nil ;};func (_cgeff compositeCell )String ()string {_ecba :="";if len (_cgeff .paraList )> 0{_ecba =_efac (_cgeff .paraList .merge ().text (),50);};return _ded .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0070\u0061\u0072a\u0073\u0020\u0025\u0071",_cgeff .PdfRectangle ,len (_cgeff .paraList ),_ecba );
};func _fdea (_fdbe ,_dfaa _fa .PdfRectangle )bool {return _bbbe (_fdbe ,_dfaa )&&_bcfe (_fdbe ,_dfaa )};func (_aec *textObject )setFont (_ddg string ,_bggb float64 )error {if _aec ==nil {return nil ;};_aec ._ddc ._fdc =_bggb ;_dac ,_gccc :=_aec .getFont (_ddg );
if _gccc !=nil {return _gccc ;};_aec ._ddc ._acde =_dac ;return nil ;};func (_dfec rulingList )augmentGrid ()(rulingList ,rulingList ){_fgfd ,_cdec :=_dfec .vertsHorzs ();if len (_fgfd )==0||len (_cdec )==0{return _fgfd ,_cdec ;};_bdcc ,_ebae :=_fgfd ,_cdec ;
_beaf :=_fgfd .bbox ();_ceead :=_cdec .bbox ();if _cddgc {_ae .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0056\u003d\u0025\u0036\u002e\u0032\u0066",_beaf );_ae .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0048\u003d\u0025\u0036\u002e\u0032\u0066",_ceead );
};var _dbega ,_adfa ,_adfaa ,_ddab *ruling ;if _ceead .Llx < _beaf .Llx -_gecg {_dbega =&ruling {_eeab :_fgbbd ,_gagfc :_bggg ,_dade :_ceead .Llx ,_bggda :_beaf .Lly ,_aed :_beaf .Ury };_fgfd =append (rulingList {_dbega },_fgfd ...);};if _ceead .Urx > _beaf .Urx +_gecg {_adfa =&ruling {_eeab :_fgbbd ,_gagfc :_bggg ,_dade :_ceead .Urx ,_bggda :_beaf .Lly ,_aed :_beaf .Ury };
_fgfd =append (_fgfd ,_adfa );};if _beaf .Lly < _ceead .Lly -_gecg {_adfaa =&ruling {_eeab :_fgbbd ,_gagfc :_fbde ,_dade :_beaf .Lly ,_bggda :_ceead .Llx ,_aed :_ceead .Urx };_cdec =append (rulingList {_adfaa },_cdec ...);};if _beaf .Ury > _ceead .Ury +_gecg {_ddab =&ruling {_eeab :_fgbbd ,_gagfc :_fbde ,_dade :_beaf .Ury ,_bggda :_ceead .Llx ,_aed :_ceead .Urx };
_cdec =append (_cdec ,_ddab );};if len (_fgfd )+len (_cdec )==len (_dfec ){return _bdcc ,_ebae ;};_bcaf :=append (_fgfd ,_cdec ...);_dfec .log ("u\u006e\u0061\u0075\u0067\u006d\u0065\u006e\u0074\u0065\u0064");_bcaf .log ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0065d");
return _fgfd ,_cdec ;};func _edbee (_ecad []*textWord ,_efea *textWord )[]*textWord {for _gacfa ,_cabbf :=range _ecad {if _cabbf ==_efea {return _dcfe (_ecad ,_gacfa );};};_ae .Log .Error ("\u0072\u0065\u006d\u006f\u0076e\u0057\u006f\u0072\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u0073\u0020\u0064o\u0065\u0073\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",_efea );
return nil ;};func (_facbb rulingList )removeDuplicates ()rulingList {if len (_facbb )==0{return nil ;};_facbb .sort ();_efeg :=rulingList {_facbb [0]};for _ ,_gffa :=range _facbb [1:]{if _gffa .equals (_efeg [len (_efeg )-1]){continue ;};_efeg =append (_efeg ,_gffa );
};return _efeg ;};func (_cbfd *shapesState )addPoint (_dbfa ,_dbcg float64 ){_gcf :=_cbfd .establishSubpath ();_bbb :=_cbfd .devicePoint (_dbfa ,_dbcg );if _gcf ==nil {_cbfd ._efc =true ;_cbfd ._cfdd =_bbb ;}else {_gcf .add (_bbb );};};func (_fdeg *ruling )alignsPrimary (_dfbe *ruling )bool {return _fdeg ._gagfc ==_dfbe ._gagfc &&_de .Abs (_fdeg ._dade -_dfbe ._dade )< _afaba *0.5;
};

// String returns a description of `v`.
func (_fcge *ruling )String ()string {if _fcge ._gagfc ==_ggdc {return "\u004e\u004f\u0054\u0020\u0052\u0055\u004c\u0049\u004e\u0047";};_bafda ,_ecbc :="\u0078","\u0079";if _fcge ._gagfc ==_fbde {_bafda ,_ecbc ="\u0079","\u0078";};_egee :="";if _fcge ._gcbee !=0.0{_egee =_ded .Sprintf (" \u0077\u0069\u0064\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_fcge ._gcbee );
};return _ded .Sprintf ("\u0025\u00310\u0073\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0020\u0025\u0076\u0025\u0073",_fcge ._gagfc ,_bafda ,_fcge ._dade ,_ecbc ,_fcge ._bggda ,_fcge ._aed ,_fcge ._aed -_fcge ._bggda ,_fcge ._eeab ,_fcge .Color ,_egee );
};

// String returns a description of `k`.
func (_cfdg rulingKind )String ()string {_bdeg ,_abda :=_ffef [_cfdg ];if !_abda {return _ded .Sprintf ("\u004e\u006ft\u0020\u0061\u0020r\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_cfdg );};return _bdeg ;};func (_egaff paraList )llyOrdering ()[]int {_gggg :=make ([]int ,len (_egaff ));
for _cecg :=range _egaff {_gggg [_cecg ]=_cecg ;};_ff .SliceStable (_gggg ,func (_abcf ,_acegb int )bool {_bfac ,_facg :=_gggg [_abcf ],_gggg [_acegb ];return _egaff [_bfac ].Lly < _egaff [_facg ].Lly ;});return _gggg ;};func (_aaed *ruling )equals (_ffeb *ruling )bool {return _aaed ._gagfc ==_ffeb ._gagfc &&_gcbecc (_aaed ._dade ,_ffeb ._dade )&&_gcbecc (_aaed ._bggda ,_ffeb ._bggda )&&_gcbecc (_aaed ._aed ,_ffeb ._aed );
};func _bcbbd (_fdec _fa .PdfColorspace ,_ddafag _fa .PdfColor )_c .Color {if _fdec ==nil ||_ddafag ==nil {return _c .Black ;};_abaae ,_ggefb :=_fdec .ColorToRGB (_ddafag );if _ggefb !=nil {_ae .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006fu\u006c\u0064\u0020no\u0074\u0020\u0063\u006f\u006e\u0076e\u0072\u0074\u0020\u0063\u006f\u006c\u006f\u0072\u0020\u0025\u0076\u0020\u0028\u0025\u0076)\u0020\u0074\u006f\u0020\u0052\u0047\u0042\u003a \u0025\u0073",_ddafag ,_fdec ,_ggefb );
return _c .Black ;};_abeab ,_fbdef :=_abaae .(*_fa .PdfColorDeviceRGB );if !_fbdef {_ae .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0065\u0064 \u0063\u006f\u006c\u006f\u0072\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020i\u006e\u0020\u0074\u0068\u0065\u0020\u0052\u0047\u0042\u0020\u0063\u006flo\u0072\u0073\u0070\u0061\u0063\u0065\u003a\u0020\u0025\u0076",_abaae );
return _c .Black ;};return _c .NRGBA {R :uint8 (_abeab .R ()*255),G :uint8 (_abeab .G ()*255),B :uint8 (_abeab .B ()*255),A :uint8 (255)};};func _cdaae (_ffcc map[float64 ]map[float64 ]gridTile )[]float64 {_egfga :=make ([]float64 ,0,len (_ffcc ));for _ddfg :=range _ffcc {_egfga =append (_egfga ,_ddfg );
};_ff .Float64s (_egfga );_eadd :=len (_egfga );for _dgced :=0;_dgced < _eadd /2;_dgced ++{_egfga [_dgced ],_egfga [_eadd -1-_dgced ]=_egfga [_eadd -1-_dgced ],_egfga [_dgced ];};return _egfga ;};type rulingList []*ruling ;func (_dbef *textWord )toTextMarks (_cdggc *int )[]TextMark {var _fdeee []TextMark ;
for _ ,_ggbf :=range _dbef ._dded {_fdeee =_abbc (_fdeee ,_cdggc ,_ggbf .ToTextMark ());};return _fdeee ;};func (_fbbe *textTable )emptyCompositeColumn (_gdbcf int )bool {for _gebeec :=0;_gebeec < _fbbe ._egcge ;_gebeec ++{if _egace ,_fadf :=_fbbe ._agdc [_babg (_gdbcf ,_gebeec )];
_fadf {if len (_egace .paraList )> 0{return false ;};};};return true ;};func _fcee (_ade _fa .PdfRectangle )*ruling {return &ruling {_gagfc :_fbde ,_dade :_ade .Lly ,_bggda :_ade .Llx ,_aed :_ade .Urx };};type ruling struct{_gagfc rulingKind ;_eeab markKind ;
_c .Color ;_dade float64 ;_bggda float64 ;_aed float64 ;_gcbee float64 ;};func _eeagd (_badd map[int ][]float64 )[]int {_caefe :=make ([]int ,len (_badd ));_bgfe :=0;for _fbbdb :=range _badd {_caefe [_bgfe ]=_fbbdb ;_bgfe ++;};_ff .Ints (_caefe );return _caefe ;
};func _gcbecc (_bdeag ,_gaeac float64 )bool {return _de .Abs (_bdeag -_gaeac )<=_gecg };func (_cddfd paraList )addNeighbours (){_adfca :=func (_bgbbd []int ,_efcca *textPara )([]*textPara ,[]*textPara ){_ccafe :=make ([]*textPara ,0,len (_bgbbd )-1);_bgcde :=make ([]*textPara ,0,len (_bgbbd )-1);
for _ ,_adbafb :=range _bgbbd {_daga :=_cddfd [_adbafb ];if _daga .Urx <=_efcca .Llx {_ccafe =append (_ccafe ,_daga );}else if _daga .Llx >=_efcca .Urx {_bgcde =append (_bgcde ,_daga );};};return _ccafe ,_bgcde ;};_eafee :=func (_fcbd []int ,_afed *textPara )([]*textPara ,[]*textPara ){_eacg :=make ([]*textPara ,0,len (_fcbd )-1);
_bead :=make ([]*textPara ,0,len (_fcbd )-1);for _ ,_deeg :=range _fcbd {_aded :=_cddfd [_deeg ];if _aded .Ury <=_afed .Lly {_bead =append (_bead ,_aded );}else if _aded .Lly >=_afed .Ury {_eacg =append (_eacg ,_aded );};};return _eacg ,_bead ;};_ceffa :=_cddfd .yNeighbours (_gcdc );
for _ ,_gbdca :=range _cddfd {_gcgbc :=_ceffa [_gbdca ];if len (_gcgbc )==0{continue ;};_bafea ,_egge :=_adfca (_gcgbc ,_gbdca );if len (_bafea )==0&&len (_egge )==0{continue ;};if len (_bafea )> 0{_daae :=_bafea [0];for _ ,_bdcbd :=range _bafea [1:]{if _bdcbd .Urx >=_daae .Urx {_daae =_bdcbd ;
};};for _ ,_gadce :=range _bafea {if _gadce !=_daae &&_gadce .Urx > _daae .Llx {_daae =nil ;break ;};};if _daae !=nil &&_bcfe (_gbdca .PdfRectangle ,_daae .PdfRectangle ){_gbdca ._efda =_daae ;};};if len (_egge )> 0{_acee :=_egge [0];for _ ,_caffa :=range _egge [1:]{if _caffa .Llx <=_acee .Llx {_acee =_caffa ;
};};for _ ,_dadge :=range _egge {if _dadge !=_acee &&_dadge .Llx < _acee .Urx {_acee =nil ;break ;};};if _acee !=nil &&_bcfe (_gbdca .PdfRectangle ,_acee .PdfRectangle ){_gbdca ._gfdg =_acee ;};};};_ceffa =_cddfd .xNeighbours (_defca );for _ ,_ebad :=range _cddfd {_daaf :=_ceffa [_ebad ];
if len (_daaf )==0{continue ;};_gacbf ,_cbaab :=_eafee (_daaf ,_ebad );if len (_gacbf )==0&&len (_cbaab )==0{continue ;};if len (_cbaab )> 0{_eedb :=_cbaab [0];for _ ,_beab :=range _cbaab [1:]{if _beab .Ury >=_eedb .Ury {_eedb =_beab ;};};for _ ,_fbgd :=range _cbaab {if _fbgd !=_eedb &&_fbgd .Ury > _eedb .Lly {_eedb =nil ;
break ;};};if _eedb !=nil &&_bbbe (_ebad .PdfRectangle ,_eedb .PdfRectangle ){_ebad ._ddce =_eedb ;};};if len (_gacbf )> 0{_abgcb :=_gacbf [0];for _ ,_ccgaf :=range _gacbf [1:]{if _ccgaf .Lly <=_abgcb .Lly {_abgcb =_ccgaf ;};};for _ ,_eafef :=range _gacbf {if _eafef !=_abgcb &&_eafef .Lly < _abgcb .Ury {_abgcb =nil ;
break ;};};if _abgcb !=nil &&_bbbe (_ebad .PdfRectangle ,_abgcb .PdfRectangle ){_ebad ._begg =_abgcb ;};};};for _ ,_aeeg :=range _cddfd {if _aeeg ._efda !=nil &&_aeeg ._efda ._gfdg !=_aeeg {_aeeg ._efda =nil ;};if _aeeg ._begg !=nil &&_aeeg ._begg ._ddce !=_aeeg {_aeeg ._begg =nil ;
};if _aeeg ._gfdg !=nil &&_aeeg ._gfdg ._efda !=_aeeg {_aeeg ._gfdg =nil ;};if _aeeg ._ddce !=nil &&_aeeg ._ddce ._begg !=_aeeg {_aeeg ._ddce =nil ;};};};func (_bdg *textObject )setHorizScaling (_aegd float64 ){if _bdg ==nil {return ;};_bdg ._ddc ._gaf =_aegd ;
};type markKind int ;func _ebfgg (_egce _fa .PdfRectangle )*ruling {return &ruling {_gagfc :_bggg ,_dade :_egce .Urx ,_bggda :_egce .Lly ,_aed :_egce .Ury };};func (_deaa rectRuling )checkWidth (_dfcg ,_abbe float64 )(float64 ,bool ){_fabf :=_abbe -_dfcg ;
_gageb :=_fabf <=_afaba ;return _fabf ,_gageb ;};func _deab (_dgeb ,_eccd _fa .PdfRectangle )_fa .PdfRectangle {return _fa .PdfRectangle {Llx :_de .Min (_dgeb .Llx ,_eccd .Llx ),Lly :_de .Min (_dgeb .Lly ,_eccd .Lly ),Urx :_de .Max (_dgeb .Urx ,_eccd .Urx ),Ury :_de .Max (_dgeb .Ury ,_eccd .Ury )};
};func (_eeafe *wordBag )pullWord (_agbe *textWord ,_ebfg int ,_eda map[int ]map[*textWord ]struct{}){_eeafe .PdfRectangle =_deab (_eeafe .PdfRectangle ,_agbe .PdfRectangle );if _agbe ._ddffg > _eeafe ._dca {_eeafe ._dca =_agbe ._ddffg ;};_eeafe ._cfe [_ebfg ]=append (_eeafe ._cfe [_ebfg ],_agbe );
_eda [_ebfg ][_agbe ]=struct{}{};};func (_gefed rulingList )sortStrict (){_ff .Slice (_gefed ,func (_edac ,_gdge int )bool {_gcgbg ,_edffa :=_gefed [_edac ],_gefed [_gdge ];_fbcf ,_gefa :=_gcgbg ._gagfc ,_edffa ._gagfc ;if _fbcf !=_gefa {return _fbcf > _gefa ;
};_bedb ,_fggc :=_gcgbg ._dade ,_edffa ._dade ;if !_bggba (_bedb -_fggc ){return _bedb < _fggc ;};_bedb ,_fggc =_gcgbg ._bggda ,_edffa ._bggda ;if _bedb !=_fggc {return _bedb < _fggc ;};return _gcgbg ._aed < _edffa ._aed ;});};

// ApplyArea processes the page text only within the specified area `bbox`.
// Each time ApplyArea is called, it updates the result set in `pt`.
// Can be called multiple times in a row with different bounding boxes.
func (_dbdc *PageText )ApplyArea (bbox _fa .PdfRectangle ){_ccga :=make ([]*textMark ,0,len (_dbdc ._fde ));for _ ,_fdad :=range _dbdc ._fde {if _fdea (_fdad .bbox (),bbox ){_ccga =append (_ccga ,_fdad );};};var _ffaa paraList ;_gagef :=len (_ccga );for _cdb :=0;
_cdb < 360&&_gagef > 0;_cdb +=90{_ccc :=make ([]*textMark ,0,len (_ccga )-_gagef );for _ ,_gaad :=range _ccga {if _gaad ._cafc ==_cdb {_ccc =append (_ccc ,_gaad );};};if len (_ccc )> 0{_efgg :=_ebg (_ccc ,_dbdc ._abfb ,nil ,nil );_ffaa =append (_ffaa ,_efgg ...);
_gagef -=len (_ccc );};};_dda :=new (_eg .Buffer );_ffaa .writeText (_dda );_dbdc ._adc =_dda .String ();_dbdc ._gdgd =_ffaa .toTextMarks ();_dbdc ._geab =_ffaa .tables ();};func _cgbe (_fgab map[int ]intSet )[]int {_gcdgc :=make ([]int ,0,len (_fgab ));
for _fffdc :=range _fgab {_gcdgc =append (_gcdgc ,_fffdc );};_ff .Ints (_gcdgc );return _gcdgc ;};func _feed (_ccaf []int )[]int {_dbfaa :=make ([]int ,len (_ccaf ));for _ffgb ,_fbaf :=range _ccaf {_dbfaa [len (_ccaf )-1-_ffgb ]=_fbaf ;};return _dbfaa ;
};const (_fdcg markKind =iota ;_ceaf ;_agea ;_fgbbd ;);func (_egedc *ruling )alignsSec (_bbdd *ruling )bool {const _bafb =_afaba +1.0;return _egedc ._bggda -_bafb <=_bbdd ._aed &&_bbdd ._bggda -_bafb <=_egedc ._aed ;};func (_agdb *textTable )newTablePara ()*textPara {_dgac :=_agdb .computeBbox ();
_ddde :=&textPara {PdfRectangle :_dgac ,_bceg :_dgac ,_cbaaf :_agdb };if _dcfc {_ae .Log .Info ("\u006e\u0065w\u0054\u0061\u0062l\u0065\u0050\u0061\u0072\u0061\u003a\u0020\u0025\u0073",_ddde );};return _ddde ;};func (_eaebb *textWord )bbox ()_fa .PdfRectangle {return _eaebb .PdfRectangle };
func (_eddd *stateStack )empty ()bool {return len (*_eddd )==0};func (_gdgac paraList )inTile (_ccfgd gridTile )paraList {var _gfgg paraList ;for _ ,_eeec :=range _gdgac {if _ccfgd .contains (_eeec .PdfRectangle ){_gfgg =append (_gfgg ,_eeec );};};if _dcfc {_ded .Printf ("\u0020 \u0020\u0069\u006e\u0054i\u006c\u0065\u003a\u0020\u0020%\u0073 \u0069n\u0073\u0069\u0064\u0065\u003d\u0025\u0064\n",_ccfgd ,len (_gfgg ));
for _egca ,_edgcd :=range _gfgg {_ded .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_egca ,_edgcd );};_ded .Println ("");};return _gfgg ;};

// String returns a description of `state`.
func (_gbfac *textState )String ()string {_fgf :="\u005bN\u004f\u0054\u0020\u0053\u0045\u0054]";if _gbfac ._acde !=nil {_fgf =_gbfac ._acde .BaseFont ();};return _ded .Sprintf ("\u0074\u0063\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0077\u003d\u0025\u002e\u0032\u0066 \u0074f\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u003d\u0025\u0071",_gbfac ._gfaad ,_gbfac ._dge ,_gbfac ._fdc ,_fgf );
};type textObject struct{_fgg *Extractor ;_eea *_fa .PdfPageResources ;_bbfd _aef .GraphicsState ;_ddc *textState ;_baaa *stateStack ;_abd _ge .Matrix ;_ceff _ge .Matrix ;_adg []*textMark ;_beba bool ;};func _aafg (_ccbec _fa .PdfRectangle ,_cegb bounded )float64 {return _ccbec .Ury -_cegb .bbox ().Lly };
func (_bca *wordBag )scanBand (_ggbd string ,_gbgdg *wordBag ,_ggcb func (_cdea *wordBag ,_cddg *textWord )bool ,_bcae ,_egcbg ,_fdd float64 ,_egd ,_cgedc bool )int {_adbbc :=_gbgdg ._dca ;var _daf map[int ]map[*textWord ]struct{};if !_egd {_daf =_bca .makeRemovals ();
};_agfb :=_fgda *_adbbc ;_ebcb :=0;for _ ,_gfd :=range _bca .depthBand (_bcae -_agfb ,_egcbg +_agfb ){if len (_bca ._cfe [_gfd ])==0{continue ;};for _ ,_bbfdd :=range _bca ._cfe [_gfd ]{if !(_bcae -_agfb <=_bbfdd ._ecdaa &&_bbfdd ._ecdaa <=_egcbg +_agfb ){continue ;
};if !_ggcb (_gbgdg ,_bbfdd ){continue ;};_ggag :=2.0*_de .Abs (_bbfdd ._ddffg -_gbgdg ._dca )/(_bbfdd ._ddffg +_gbgdg ._dca );_bdgb :=_de .Max (_bbfdd ._ddffg /_gbgdg ._dca ,_gbgdg ._dca /_bbfdd ._ddffg );_bage :=_de .Min (_ggag ,_bdgb );if _fdd > 0&&_bage > _fdd {continue ;
};if _gbgdg .blocked (_bbfdd ){continue ;};if !_egd {_gbgdg .pullWord (_bbfdd ,_gfd ,_daf );};_ebcb ++;if !_cgedc {if _bbfdd ._ecdaa < _bcae {_bcae =_bbfdd ._ecdaa ;};if _bbfdd ._ecdaa > _egcbg {_egcbg =_bbfdd ._ecdaa ;};};if _egd {break ;};};};if !_egd {_bca .applyRemovals (_daf );
};return _ebcb ;};func (_cagf *subpath )close (){if !_bcbc (_cagf ._afdb [0],_cagf .last ()){_cagf .add (_cagf ._afdb [0]);};_cagf ._agd =true ;_cagf .removeDuplicates ();};func _dacfb (_abff []pathSection )rulingList {_dbca (_abff );if _cddgc {_ae .Log .Info ("\u006da\u006b\u0065\u0046\u0069l\u006c\u0052\u0075\u006c\u0069n\u0067s\u003a \u0025\u0064\u0020\u0066\u0069\u006c\u006cs",len (_abff ));
};var _egfa rulingList ;for _ ,_aead :=range _abff {for _ ,_eecde :=range _aead ._dadd {if !_eecde .isQuadrilateral (){if _cddgc {_ae .Log .Error ("!\u0069s\u0051\u0075\u0061\u0064\u0072\u0069\u006c\u0061t\u0065\u0072\u0061\u006c: \u0025\u0073",_eecde );
};continue ;};if _feaf ,_gaac :=_eecde .makeRectRuling (_aead .Color );_gaac {_egfa =append (_egfa ,_feaf );}else {if _aggg {_ae .Log .Error ("\u0021\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0073",_eecde );
};};};};if _cddgc {_ae .Log .Info ("\u006d\u0061\u006b\u0065Fi\u006c\u006c\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0073",_egfa .String ());};return _egfa ;};func (_gfaa *textObject )setCharSpacing (_fdae float64 ){if _gfaa ==nil {return ;
};_gfaa ._ddc ._gfaad =_fdae ;if _adag {_ae .Log .Info ("\u0073\u0065t\u0043\u0068\u0061\u0072\u0053\u0070\u0061\u0063\u0069\u006e\u0067\u003a\u0020\u0025\u002e\u0032\u0066\u0020\u0073\u0074\u0061\u0074e=\u0025\u0073",_fdae ,_gfaa ._ddc .String ());};};
func (_gcgbe *textPara )writeText (_fagd _f .Writer ){if _gcgbe ._cbaaf ==nil {_gcgbe .writeCellText (_fagd );return ;};for _abfdb :=0;_abfdb < _gcgbe ._cbaaf ._egcge ;_abfdb ++{for _acgb :=0;_acgb < _gcgbe ._cbaaf ._aecda ;_acgb ++{_baae :=_gcgbe ._cbaaf .get (_acgb ,_abfdb );
if _baae ==nil {_fagd .Write ([]byte ("\u0009"));}else {_baae .writeCellText (_fagd );};_fagd .Write ([]byte ("\u0020"));};if _abfdb < _gcgbe ._cbaaf ._egcge -1{_fagd .Write ([]byte ("\u000a"));};};};func _bcfe (_abaa ,_ecfcc _fa .PdfRectangle )bool {return _abaa .Lly <=_ecfcc .Ury &&_ecfcc .Lly <=_abaa .Ury ;
};func (_fbbd rulingList )asTiling ()gridTiling {if _gedb {_ae .Log .Info ("r\u0075\u006ci\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0063s\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u002b\u002b\u002b\u0020\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_fbbd ));
};for _dcfbe ,_dgae :=range _fbbd [1:]{_debf :=_fbbd [_dcfbe ];if _debf .alignsPrimary (_dgae )&&_debf .alignsSec (_dgae ){_ae .Log .Error ("a\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0044\u0075\u0070\u006c\u0069\u0063\u0061\u0074\u0065 \u0072\u0075\u006c\u0069\u006e\u0067\u0073\u002e\u000a\u0009v=\u0025\u0073\u000a\t\u0077=\u0025\u0073",_dgae ,_debf );
};};_fbbd .sortStrict ();_fbbd .log ("\u0073n\u0061\u0070\u0070\u0065\u0064");_fbf ,_bdbdd :=_fbbd .vertsHorzs ();_ecdfe :=_fbf .primaries ();_adfg :=_bdbdd .primaries ();_acbbf :=len (_ecdfe )-1;_cfac :=len (_adfg )-1;if _acbbf ==0||_cfac ==0{return gridTiling {};
};_dfab :=_fa .PdfRectangle {Llx :_ecdfe [0],Urx :_ecdfe [_acbbf ],Lly :_adfg [0],Ury :_adfg [_cfac ]};if _gedb {_ae .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0072\u0074s=\u0025\u0064",len (_fbf ));
for _fdadd ,_caaa :=range _fbf {_ded .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fdadd ,_caaa );};_ae .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0068\u006f\u0072\u007as=\u0025\u0064",len (_bdbdd ));
for _fcbc ,_gdac :=range _bdbdd {_ded .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fcbc ,_gdac );};_ae .Log .Info ("\u0072\u0075\u006c\u0069\u006eg\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067:\u0020\u0020\u0077\u0078\u0068\u003d\u0025\u0064\u0078\u0025\u0064\u000a\u0009\u006c\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a\u0009\u006c\u006c\u0079\u003d\u0025\u002e\u0032f",_acbbf ,_cfac ,_ecdfe ,_adfg );
};_bfcb :=make ([]gridTile ,_acbbf *_cfac );for _cccab :=_cfac -1;_cccab >=0;_cccab --{_bbgc :=_adfg [_cccab ];_gcgf :=_adfg [_cccab +1];for _gcfa :=0;_gcfa < _acbbf ;_gcfa ++{_degce :=_ecdfe [_gcfa ];_affc :=_ecdfe [_gcfa +1];_cfeb :=_fbf .findPrimSec (_degce ,_bbgc );
_gadb :=_fbf .findPrimSec (_affc ,_bbgc );_fbca :=_bdbdd .findPrimSec (_bbgc ,_degce );_ddafa :=_bdbdd .findPrimSec (_gcgf ,_degce );_edfg :=_fa .PdfRectangle {Llx :_degce ,Urx :_affc ,Lly :_bbgc ,Ury :_gcgf };_dcbbf :=_fcad (_edfg ,_cfeb ,_gadb ,_fbca ,_ddafa );
_bfcb [_cccab *_acbbf +_gcfa ]=_dcbbf ;if _gedb {_ded .Printf ("\u0020\u0020\u0078\u003d\u0025\u0032\u0064\u0020\u0079\u003d\u0025\u0032\u0064\u003a\u0020%\u0073 \u0025\u0036\u002e\u0032\u0066\u0020\u0078\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_gcfa ,_cccab ,_dcbbf .String (),_dcbbf .Width (),_dcbbf .Height ());
};};};if _gedb {_ae .Log .Info ("r\u0075\u006c\u0069\u006e\u0067\u004c\u0069\u0073\u0074.\u0061\u0073\u0054\u0069\u006c\u0069\u006eg:\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0020\u0068\u006f\u0072\u0069zo\u006e\u0074a\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_dfab );
};_bcea :=make ([]map[float64 ]gridTile ,_cfac );for _abdg :=_cfac -1;_abdg >=0;_abdg --{if _gedb {_ded .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_abdg );};_bcea [_abdg ]=make (map[float64 ]gridTile ,_acbbf );for _fegb :=0;_fegb < _acbbf ;
_fegb ++{_degb :=_bfcb [_abdg *_acbbf +_fegb ];if _gedb {_ded .Printf ("\u0020\u0020\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fegb ,_degb );};if !_degb ._acef {continue ;};_bbec :=_fegb ;for _acca :=_fegb +1;!_degb ._cade &&_acca < _acbbf ;_acca ++{_egfbd :=_bfcb [_abdg *_acbbf +_acca ];
_degb .Urx =_egfbd .Urx ;_degb ._ggcd =_degb ._ggcd ||_egfbd ._ggcd ;_degb ._cgff =_degb ._cgff ||_egfbd ._cgff ;_degb ._cade =_egfbd ._cade ;if _gedb {_ded .Printf ("\u0020 \u0020%\u0034\u0064\u003a\u0020\u0025s\u0020\u2192 \u0025\u0073\u000a",_acca ,_egfbd ,_degb );
};_bbec =_acca ;};if _gedb {_ded .Printf (" \u0020 \u0025\u0032\u0064\u0020\u002d\u0020\u0025\u0032d\u0020\u2192\u0020\u0025s\n",_fegb ,_bbec ,_degb );};_fegb =_bbec ;_bcea [_abdg ][_degb .Llx ]=_degb ;};};_ddcb :=make (map[float64 ]map[float64 ]gridTile ,_cfac );
_acec :=make (map[float64 ]map[float64 ]struct{},_cfac );for _agefb :=_cfac -1;_agefb >=0;_agefb --{_bfgg :=_bfcb [_agefb *_acbbf ].Lly ;_ddcb [_bfgg ]=make (map[float64 ]gridTile ,_acbbf );_acec [_bfgg ]=make (map[float64 ]struct{},_acbbf );};if _gedb {_ae .Log .Info ("\u0072u\u006c\u0069n\u0067\u004c\u0069s\u0074\u002e\u0061\u0073\u0054\u0069\u006ci\u006e\u0067\u003a\u0020\u0063\u006fa\u006c\u0065\u0073\u0063\u0065\u0020\u0076\u0065\u0072\u0074\u0069c\u0061\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_dfab );
};for _fagga :=_cfac -1;_fagga >=0;_fagga --{_dcgb :=_bfcb [_fagga *_acbbf ].Lly ;_acace :=_bcea [_fagga ];if _gedb {_ded .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_fagga );};for _ ,_adfd :=range _ecec (_acace ){if _ ,_dcafg :=_acec [_dcgb ][_adfd ];
_dcafg {continue ;};_eee :=_acace [_adfd ];if _gedb {_ded .Printf (" \u0020\u0020\u0020\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_eee .String ());};for _faga :=_fagga -1;_faga >=0;_faga --{if _eee ._cgff {break ;};_dcbec :=_bcea [_faga ];_fbba ,_fegaa :=_dcbec [_adfd ];
if !_fegaa {break ;};if _fbba .Urx !=_eee .Urx {break ;};_eee ._cgff =_fbba ._cgff ;_eee .Lly =_fbba .Lly ;if _gedb {_ded .Printf ("\u0020\u0020\u0020\u0020  \u0020\u0020\u0076\u003d\u0025\u0073\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_fbba .String (),_eee .String ());
};_acec [_fbba .Lly ][_fbba .Llx ]=struct{}{};};if _fagga ==0{_eee ._cgff =true ;};if _eee .complete (){_ddcb [_dcgb ][_adfd ]=_eee ;};};};_afbdg :=gridTiling {PdfRectangle :_dfab ,_ddfbg :_gdad (_ddcb ),_dffe :_cdaae (_ddcb ),_ddba :_ddcb };_afbdg .log ("\u0043r\u0065\u0061\u0074\u0065\u0064");
return _afbdg ;};func (_fcagb *textTable )toTextTable ()TextTable {if _dcfc {_ae .Log .Info ("t\u006fT\u0065\u0078\u0074\u0054\u0061\u0062\u006c\u0065:\u0020\u0025\u0064\u0020x \u0025\u0064",_fcagb ._aecda ,_fcagb ._egcge );};_ebba :=make ([][]TableCell ,_fcagb ._egcge );
for _bbad :=0;_bbad < _fcagb ._egcge ;_bbad ++{_ebba [_bbad ]=make ([]TableCell ,_fcagb ._aecda );for _eddc :=0;_eddc < _fcagb ._aecda ;_eddc ++{_bbaff :=_fcagb .get (_eddc ,_bbad );if _bbaff ==nil {continue ;};if _dcfc {_ded .Printf ("\u0025\u0034\u0064 \u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_eddc ,_bbad ,_bbaff );
};_ebba [_bbad ][_eddc ].Text =_bbaff .text ();_fdcgf :=0;_ebba [_bbad ][_eddc ].Marks ._dfgf =_bbaff .toTextMarks (&_fdcgf );};};return TextTable {W :_fcagb ._aecda ,H :_fcagb ._egcge ,Cells :_ebba };};

// String returns a description of `w`.
func (_caddd *textWord )String ()string {return _ded .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_caddd ._ecdaa ,_caddd .PdfRectangle ,_caddd ._ddffg ,_caddd ._gcead );
};

// Marks returns the TextMark collection for a page. It represents all the text on the page.
func (_deae PageText )Marks ()*TextMarkArray {return &TextMarkArray {_dfgf :_deae ._gdgd }};func _gbce (_ece []TextMark ,_fedg *int )[]TextMark {_fdee :=_ece [len (_ece )-1];_eadf :=[]rune (_fdee .Text );if len (_eadf )==1{_ece =_ece [:len (_ece )-1];_ddece :=_ece [len (_ece )-1];
*_fedg =_ddece .Offset +len (_ddece .Text );}else {_bbbc :=_gfec (_fdee .Text );*_fedg +=len (_bbbc )-len (_fdee .Text );_fdee .Text =_bbbc ;};return _ece ;};func (_dfbg *shapesState )fill (_cbc *[]pathSection ){_cga :=pathSection {_dadd :_dfbg ._bab ,Color :_dfbg ._edfa .getFillColor ()};
*_cbc =append (*_cbc ,_cga );if _cddgc {_ceed :=_cga .bbox ();_ded .Printf ("\u0020 \u0020\u0020\u0046\u0049\u004c\u004c\u003a %\u0032\u0064\u0020\u0066\u0069\u006c\u006c\u0073\u0020\u0028\u0025\u0064\u0020\u006ee\u0077\u0029 \u0073\u0073\u003d%\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d\u0025\u0033\u0076\u0020\u0025\u0036\u002e\u0032f\u003d\u00256.\u0032\u0066\u0078%\u0036\u002e\u0032\u0066\u000a",len (*_cbc ),len (_cga ._dadd ),_dfbg ,_cga .Color ,_ceed ,_ceed .Width (),_ceed .Height ());
if _bgbe {for _afdg ,_eca :=range _cga ._dadd {_ded .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_afdg ,_eca );if _afdg ==10{break ;};};};};};type lineRuling struct{_gcada rulingKind ;_gfcc markKind ;_c .Color ;_afag ,_deeb _ge .Point ;};
func (_adba *textLine )text ()string {var _cfg []string ;for _ ,_ecfea :=range _adba ._afbd {if _ecfea ._aegg {_cfg =append (_cfg ,"\u0020");};_cfg =append (_cfg ,_ecfea ._gcead );};return _db .Join (_cfg ,"");};func (_fee *wordBag )depthBand (_gfag ,_afc float64 )[]int {if len (_fee ._cfe )==0{return nil ;
};return _fee .depthRange (_fee .getDepthIdx (_gfag ),_fee .getDepthIdx (_afc ));};

// New returns an Extractor instance for extracting content from the input PDF page.
func New (page *_fa .PdfPage )(*Extractor ,error ){return NewWithOptions (page ,nil )};

// String returns a human readable description of `vecs`.
func (_efgd rulingList )String ()string {if len (_efgd )==0{return "\u007b \u0045\u004d\u0050\u0054\u0059\u0020}";};_ccbf ,_afeac :=_efgd .vertsHorzs ();_edgcf :=len (_ccbf );_fdab :=len (_afeac );if _edgcf ==0||_fdab ==0{return _ded .Sprintf ("\u007b%\u0064\u0020\u0078\u0020\u0025\u0064}",_edgcf ,_fdab );
};_febbg :=_fa .PdfRectangle {Llx :_ccbf [0]._dade ,Urx :_ccbf [_edgcf -1]._dade ,Lly :_afeac [_fdab -1]._dade ,Ury :_afeac [0]._dade };return _ded .Sprintf ("\u007b\u0025d\u0020\u0078\u0020%\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u007d",_edgcf ,_fdab ,_febbg );
};func (_faf *wordBag )empty (_bcfc int )bool {_ ,_fgdc :=_faf ._cfe [_bcfc ];return !_fgdc };

// Len returns the number of TextMarks in `ma`.
func (_fdb *TextMarkArray )Len ()int {if _fdb ==nil {return 0;};return len (_fdb ._dfgf );};func (_edag *wordBag )text ()string {_dag :=_edag .allWords ();_bcbd :=make ([]string ,len (_dag ));for _gggd ,_cgge :=range _dag {_bcbd [_gggd ]=_cgge ._gcead ;
};return _db .Join (_bcbd ,"\u0020");};func _gafg (_ecfc []*textWord ,_ceae float64 ,_fdba ,_ccd rulingList )*wordBag {_bged :=_abfg (_ecfc [0],_ceae ,_fdba ,_ccd );for _ ,_bbgg :=range _ecfc [1:]{_gdbf :=_gcga (_bbgg ._ecdaa );_bged ._cfe [_gdbf ]=append (_bged ._cfe [_gdbf ],_bbgg );
_bged .PdfRectangle =_deab (_bged .PdfRectangle ,_bbgg .PdfRectangle );};_bged .sort ();return _bged ;};func (_gbe *textObject )getFont (_gcbe string )(*_fa .PdfFont ,error ){if _gbe ._fgg ._aa !=nil {_cdef ,_dgdf :=_gbe .getFontDict (_gcbe );if _dgdf !=nil {_ae .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0067\u0065\u0074\u0046\u006f\u006e\u0074:\u0020n\u0061m\u0065=\u0025\u0073\u002c\u0020\u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0073",_gcbe ,_dgdf .Error ());
return nil ,_dgdf ;};_gbe ._fgg ._ceb ++;_gbfg ,_dbc :=_gbe ._fgg ._aa [_cdef .String ()];if _dbc {_gbfg ._adde =_gbe ._fgg ._ceb ;return _gbfg ._fdgb ,nil ;};};_gdag ,_eeca :=_gbe .getFontDict (_gcbe );if _eeca !=nil {return nil ,_eeca ;};_bdbf ,_eeca :=_gbe .getFontDirect (_gcbe );
if _eeca !=nil {return nil ,_eeca ;};if _gbe ._fgg ._aa !=nil {_ffad :=fontEntry {_bdbf ,_gbe ._fgg ._ceb };if len (_gbe ._fgg ._aa )>=_gdab {var _cgbc []string ;for _cccg :=range _gbe ._fgg ._aa {_cgbc =append (_cgbc ,_cccg );};_ff .Slice (_cgbc ,func (_abcc ,_cdfg int )bool {return _gbe ._fgg ._aa [_cgbc [_abcc ]]._adde < _gbe ._fgg ._aa [_cgbc [_cdfg ]]._adde ;
});delete (_gbe ._fgg ._aa ,_cgbc [0]);};_gbe ._fgg ._aa [_gdag .String ()]=_ffad ;};return _bdbf ,nil ;};func _cffd (_acgg _fa .PdfRectangle )rulingKind {_fced :=_acgg .Width ();_cdeag :=_acgg .Height ();if _fced > _cdeag {if _fced >=_egccb {return _fbde ;
};}else {if _cdeag >=_egccb {return _bggg ;};};return _ggdc ;};func (_cfad compositeCell )parasBBox ()(paraList ,_fa .PdfRectangle ){return _cfad .paraList ,_cfad .PdfRectangle ;};var _ffef =map[rulingKind ]string {_ggdc :"\u006e\u006f\u006e\u0065",_fbde :"\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_bggg :"\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c"};
func (_ddga rulingList )toGrids ()[]rulingList {if _cddgc {_ae .Log .Info ("t\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0025\u0073",_ddga );};_fefa :=_ddga .intersections ();if _cddgc {_ae .Log .Info ("\u0074\u006f\u0047r\u0069\u0064\u0073\u003a \u0076\u0065\u0063\u0073\u003d\u0025\u0064 \u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003d\u0025\u0064\u0020",len (_ddga ),len (_fefa ));
for _ ,_acafe :=range _cgbe (_fefa ){_ded .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_acafe ,_fefa [_acafe ]);};};_feg :=make (map[int ]intSet ,len (_ddga ));for _edagg :=range _ddga {_cgefe :=_ddga .connections (_fefa ,_edagg );if len (_cgefe )> 0{_feg [_edagg ]=_cgefe ;
};};if _cddgc {_ae .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0063\u006fn\u006e\u0065\u0063\u0074s=\u0025\u0064",len (_feg ));for _ ,_deabg :=range _cgbe (_feg ){_ded .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_deabg ,_feg [_deabg ]);
};};_fdgf :=_ebac (len (_ddga ),func (_fgcf ,_acfe int )bool {_fefab ,_facaf :=len (_feg [_fgcf ]),len (_feg [_acfe ]);if _fefab !=_facaf {return _fefab > _facaf ;};return _ddga .comp (_fgcf ,_acfe );});if _cddgc {_ae .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u006f\u0072d\u0065\u0072\u0069\u006eg=\u0025\u0076",_fdgf );
};_fega :=[][]int {{_fdgf [0]}};_cgcc :for _ ,_bbge :=range _fdgf [1:]{for _aafb ,_dfag :=range _fega {for _ ,_ggee :=range _dfag {if _feg [_ggee ].has (_bbge ){_fega [_aafb ]=append (_dfag ,_bbge );continue _cgcc ;};};};_fega =append (_fega ,[]int {_bbge });
};if _cddgc {_ae .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020i\u0067\u0072i\u0064\u0073\u003d\u0025\u0076",_fega );};_ff .SliceStable (_fega ,func (_cccb ,_gcca int )bool {return len (_fega [_cccb ])> len (_fega [_gcca ])});for _ ,_bdfa :=range _fega {_ff .Slice (_bdfa ,func (_abaed ,_gageg int )bool {return _ddga .comp (_bdfa [_abaed ],_bdfa [_gageg ])});
};_bgdb :=make ([]rulingList ,len (_fega ));for _aeace ,_ceca :=range _fega {_becd :=make (rulingList ,len (_ceca ));for _gacb ,_afabag :=range _ceca {_becd [_gacb ]=_ddga [_afabag ];};_bgdb [_aeace ]=_becd ;};if _cddgc {_ae .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020g\u0072\u0069d\u0073\u003d\u0025\u002b\u0076",_bgdb );
};var _beggc []rulingList ;for _ ,_dfcb :=range _bgdb {if _eefeg ,_baebg :=_dfcb .isActualGrid ();_baebg {_dfcb =_eefeg ;_dfcb =_dfcb .snapToGroups ();_beggc =append (_beggc ,_dfcb );};};if _cddgc {_gbeg ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0061\u0063t\u0075\u0061\u006c\u0047ri\u0064\u0073",_beggc );
_ae .Log .Info ("\u0074\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0067\u0072\u0069\u0064\u0073\u003d%\u0064 \u0061\u0063\u0074\u0075\u0061\u006c\u0047\u0072\u0069\u0064\u0073\u003d\u0025\u0064",len (_bgdb ),len (_beggc ));};return _beggc ;};func (_fddfd paraList )findTextTables ()[]*textTable {var _cffge []*textTable ;
for _ ,_fbfc :=range _fddfd {if _fbfc .taken ()||_fbfc .Width ()==0{continue ;};_aega :=_fbfc .isAtom ();if _aega ==nil {continue ;};_aega .growTable ();if _aega ._aecda *_aega ._egcge < _fgbd {continue ;};_aega .markCells ();_aega .log ("\u0067\u0072\u006fw\u006e");
_cffge =append (_cffge ,_aega );};return _cffge ;};

// NewWithOptions an Extractor instance for extracting content from the input PDF page with options.
func NewWithOptions (page *_fa .PdfPage ,options *Options )(*Extractor ,error ){const _ba ="\u0065x\u0074\u0072\u0061\u0063\u0074\u006f\u0072\u002e\u004e\u0065\u0077W\u0069\u0074\u0068\u004f\u0070\u0074\u0069\u006f\u006e\u0073";_bd ,_bdc :=page .GetAllContentStreams ();
if _bdc !=nil {return nil ,_bdc ;};_ged ,_bdc :=page .GetMediaBox ();if _bdc !=nil {return nil ,_ded .Errorf ("\u0065\u0078\u0074r\u0061\u0063\u0074\u006fr\u0020\u0072\u0065\u0071\u0075\u0069\u0072e\u0073\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u002e\u0020\u0025\u0076",_bdc );
};_ga :=&Extractor {_fc :_bd ,_dedg :page .Resources ,_ed :*_ged ,_gee :page .CropBox ,_aa :map[string ]fontEntry {},_ec :map[string ]textResult {},_ab :options };if _ga ._ed .Llx > _ga ._ed .Urx {_ae .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0058\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_ga ._ed );
_ga ._ed .Llx ,_ga ._ed .Urx =_ga ._ed .Urx ,_ga ._ed .Llx ;};if _ga ._ed .Lly > _ga ._ed .Ury {_ae .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0059\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_ga ._ed );
_ga ._ed .Lly ,_ga ._ed .Ury =_ga ._ed .Ury ,_ga ._ed .Lly ;};_cbf .TrackUse (_ba );return _ga ,nil ;};func (_ceedd paraList )xNeighbours (_bafde float64 )map[*textPara ][]int {_bfee :=make ([]event ,2*len (_ceedd ));if _bafde ==0{for _aebd ,_cgdf :=range _ceedd {_bfee [2*_aebd ]=event {_cgdf .Llx ,true ,_aebd };
_bfee [2*_aebd +1]=event {_cgdf .Urx ,false ,_aebd };};}else {for _begd ,_fggg :=range _ceedd {_bfee [2*_begd ]=event {_fggg .Llx -_bafde *_fggg .fontsize (),true ,_begd };_bfee [2*_begd +1]=event {_fggg .Urx +_bafde *_fggg .fontsize (),false ,_begd };
};};return _ceedd .eventNeighbours (_bfee );};func _abbc (_baag []TextMark ,_faeb *int ,_adad TextMark )[]TextMark {_adad .Offset =*_faeb ;_baag =append (_baag ,_adad );*_faeb +=len (_adad .Text );return _baag ;};func (_egc *imageExtractContext )processOperand (_gbd *_aef .ContentStreamOperation ,_bfb _aef .GraphicsState ,_gbf *_fa .PdfPageResources )error {if _gbd .Operand =="\u0042\u0049"&&len (_gbd .Params )==1{_gfb ,_eb :=_gbd .Params [0].(*_aef .ContentStreamInlineImage );
if !_eb {return nil ;};if _fbg ,_gbc :=_cb .GetBoolVal (_gfb .ImageMask );_gbc {if _fbg &&!_egc ._deda .IncludeInlineStencilMasks {return nil ;};};return _egc .extractInlineImage (_gfb ,_bfb ,_gbf );}else if _gbd .Operand =="\u0044\u006f"&&len (_gbd .Params )==1{_gbg ,_acd :=_cb .GetName (_gbd .Params [0]);
if !_acd {_ae .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");return _ac ;};_ ,_acb :=_gbf .GetXObjectByName (*_gbg );switch _acb {case _fa .XObjectTypeImage :return _egc .extractXObjectImage (_gbg ,_bfb ,_gbf );case _fa .XObjectTypeForm :return _egc .extractFormImages (_gbg ,_bfb ,_gbf );
};};return nil ;};type textResult struct{_fcag PageText ;_febb int ;_dffc int ;};func _cdbb (_cfbb []compositeCell )[]float64 {var _baabd []*textLine ;_faab :=0;for _ ,_bedcgd :=range _cfbb {_faab +=len (_bedcgd .paraList );_baabd =append (_baabd ,_bedcgd .lines ()...);
};_ff .Slice (_baabd ,func (_fgbe ,_gbdf int )bool {_dbff ,_efbfc :=_baabd [_fgbe ],_baabd [_gbdf ];_cbec ,_gdgde :=_dbff ._ccca ,_efbfc ._ccca ;if !_bggba (_cbec -_gdgde ){return _cbec < _gdgde ;};return _dbff .Llx < _efbfc .Llx ;});if _dcfc {_ded .Printf ("\u0020\u0020\u0020 r\u006f\u0077\u0042\u006f\u0072\u0064\u0065\u0072\u0073:\u0020%\u0064 \u0070a\u0072\u0061\u0073\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",_faab ,len (_baabd ));
for _adacgd ,_bafcg :=range _baabd {_ded .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_adacgd ,_bafcg );};};var _fbcd []float64 ;_cdabg :=_baabd [0];var _egdf [][]*textLine ;_gcff :=[]*textLine {_cdabg };for _bggf ,_gefcf :=range _baabd [1:]{if _gefcf .Ury < _cdabg .Lly {_fbeb :=0.5*(_gefcf .Ury +_cdabg .Lly );
if _dcfc {_ded .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u003c\u0020\u0025\u0036.\u0032f\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u003d\u0025\u0036\u002e\u0032\u0066\u000a"+"\u0009\u0020\u0071\u003d\u0025\u0073\u000a\u0009\u0020p\u003d\u0025\u0073\u000a",_bggf ,_gefcf .Ury ,_cdabg .Lly ,_fbeb ,_cdabg ,_gefcf );
};_fbcd =append (_fbcd ,_fbeb );_egdf =append (_egdf ,_gcff );_gcff =nil ;};_gcff =append (_gcff ,_gefcf );if _gefcf .Lly < _cdabg .Lly {_cdabg =_gefcf ;};};if len (_gcff )> 0{_egdf =append (_egdf ,_gcff );};if _dcfc {_ded .Printf (" \u0020\u0020\u0020\u0020\u0020\u0020 \u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073\u003d%\u0036.\u0032\u0066\u000a",_fbcd );
};if _dcfc {_ae .Log .Info ("\u0072\u006f\u0077\u003d\u0025\u0064",len (_cfbb ));for _bedac ,_adcc :=range _cfbb {_ded .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bedac ,_adcc );};_ae .Log .Info ("\u0067r\u006f\u0075\u0070\u0073\u003d\u0025d",len (_egdf ));
for _ccbeb ,_fdfb :=range _egdf {_ded .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0064\u000a",_ccbeb ,len (_fdfb ));for _gedgg ,_fgfga :=range _fdfb {_ded .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_gedgg ,_fgfga );};};};_gafad :=true ;
for _agcb ,_gggcb :=range _egdf {_fffa :=true ;for _ebcc ,_dbgdc :=range _cfbb {if _dcfc {_ded .Printf ("\u0020\u0020\u0020\u007e\u007e\u007e\u0067\u0072\u006f\u0075\u0070\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0020\u0063\u0065\u006cl\u0020\u0025\u0064\u0020\u006ff\u0020\u0025d\u0020\u0025\u0073\u000a",_agcb ,len (_egdf ),_ebcc ,len (_cfbb ),_dbgdc );
};if !_dbgdc .hasLines (_gggcb ){if _dcfc {_ded .Printf ("\u0020\u0020\u0020\u0021\u0021\u0021\u0067\u0072\u006f\u0075\u0070\u0020\u0025d\u0020\u006f\u0066\u0020\u0025\u0064 \u0063\u0065\u006c\u006c\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064 \u004f\u0055\u0054\u000a",_agcb ,len (_egdf ),_ebcc ,len (_cfbb ));
};_fffa =false ;break ;};};if !_fffa {_gafad =false ;break ;};};if !_gafad {if _dcfc {_ae .Log .Info ("\u0072\u006f\u0077\u0020\u0063o\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u0020\u0064\u006f\u006e\u0027\u0074 \u0073\u0070\u0061\u006e\u0020\u0061\u006c\u006c\u0020\u0063\u0065\u006c\u006c\u0073\u0020\u0069\u006e\u0020\u0072\u006f\u0077\u002e\u0020\u0069\u0067\u006e\u006f\u0072\u0069\u006eg");
};_fbcd =nil ;};if _dcfc &&_fbcd !=nil {_ded .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u002a\u002a*\u0072\u006f\u0077\u0043\u006f\u0072\u0072i\u0064\u006f\u0072\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u000a",_fbcd );};return _fbcd ;};
func (_bdfdg paraList )findTables (_eeaa []gridTiling )[]*textTable {_bdfdg .addNeighbours ();_ff .Slice (_bdfdg ,func (_fbcfe ,_adfe int )bool {return _fdaa (_bdfdg [_fbcfe ],_bdfdg [_adfe ])< 0});var _eabf []*textTable ;if _dafc {_eddfg :=_bdfdg .findGridTables (_eeaa );
_eabf =append (_eabf ,_eddfg ...);};if _fbab {_ebgf :=_bdfdg .findTextTables ();_eabf =append (_eabf ,_ebgf ...);};return _eabf ;};

// Tables returns the tables extracted from the page.
func (_gdd PageText )Tables ()[]TextTable {if _dcfc {_ae .Log .Info ("\u0054\u0061\u0062\u006c\u0065\u0073\u003a\u0020\u0025\u0064",len (_gdd ._geab ));};return _gdd ._geab ;};func (_bbbgf paraList )merge ()*textPara {_ae .Log .Trace ("\u006d\u0065\u0072\u0067\u0065:\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_bbbgf ));
if len (_bbbgf )==0{return nil ;};_bbbgf .sortReadingOrder ();_dgdcc :=_bbbgf [0].PdfRectangle ;_aefd :=_bbbgf [0]._dfcfe ;for _ ,_bfce :=range _bbbgf [1:]{_dgdcc =_deab (_dgdcc ,_bfce .PdfRectangle );_aefd =append (_aefd ,_bfce ._dfcfe ...);};return _bffg (_dgdcc ,_aefd );
};func _babg (_eaed ,_ecga int )uint64 {return uint64 (_eaed )*0x1000000+uint64 (_ecga )};func (_eaeb *textObject )newTextMark (_bfgc string ,_gecga _ge .Matrix ,_edaa _ge .Point ,_gbdb float64 ,_dgggc *_fa .PdfFont ,_afdf float64 ,_cdfeg ,_cgeb _c .Color ,_ffac _cb .PdfObject ,_daeg []string ,_aabce int )(textMark ,bool ){_fadg :=_gecga .Angle ();
_efdd :=_edc (_fadg ,_ebdb );var _dcbfc float64 ;if _efdd %180!=90{_dcbfc =_gecga .ScalingFactorY ();}else {_dcbfc =_gecga .ScalingFactorX ();};_ecfee :=_cad (_gecga );_cegfd :=_fa .PdfRectangle {Llx :_ecfee .X ,Lly :_ecfee .Y ,Urx :_edaa .X ,Ury :_edaa .Y };
switch _efdd %360{case 90:_cegfd .Urx -=_dcbfc ;case 180:_cegfd .Ury -=_dcbfc ;case 270:_cegfd .Urx +=_dcbfc ;case 0:_cegfd .Ury +=_dcbfc ;default:_efdd =0;_cegfd .Ury +=_dcbfc ;};if _cegfd .Llx > _cegfd .Urx {_cegfd .Llx ,_cegfd .Urx =_cegfd .Urx ,_cegfd .Llx ;
};if _cegfd .Lly > _cegfd .Ury {_cegfd .Lly ,_cegfd .Ury =_cegfd .Ury ,_cegfd .Lly ;};_bbaf :=true ;if _eaeb ._fgg ._ed .Width ()> 0{_ebabg ,_fgfa :=_fade (_cegfd ,_eaeb ._fgg ._ed );if !_fgfa {_bbaf =false ;_ae .Log .Debug ("\u0054\u0065\u0078\u0074\u0020m\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069\u0064\u0065\u0020\u0070a\u0067\u0065\u002e\u0020\u0062\u0062\u006f\u0078\u003d\u0025\u0067\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u003d\u0025\u0067\u0020\u0074\u0065\u0078\u0074\u003d\u0025q",_cegfd ,_eaeb ._fgg ._ed ,_bfgc );
};_cegfd =_ebabg ;};_cbce :=_cegfd ;_fffd :=_eaeb ._fgg ._ed ;switch _efdd %360{case 90:_fffd .Urx ,_fffd .Ury =_fffd .Ury ,_fffd .Urx ;_cbce =_fa .PdfRectangle {Llx :_fffd .Urx -_cegfd .Ury ,Urx :_fffd .Urx -_cegfd .Lly ,Lly :_cegfd .Llx ,Ury :_cegfd .Urx };
case 180:_cbce =_fa .PdfRectangle {Llx :_fffd .Urx -_cegfd .Llx ,Urx :_fffd .Urx -_cegfd .Urx ,Lly :_fffd .Ury -_cegfd .Lly ,Ury :_fffd .Ury -_cegfd .Ury };case 270:_fffd .Urx ,_fffd .Ury =_fffd .Ury ,_fffd .Urx ;_cbce =_fa .PdfRectangle {Llx :_cegfd .Ury ,Urx :_cegfd .Lly ,Lly :_fffd .Ury -_cegfd .Llx ,Ury :_fffd .Ury -_cegfd .Urx };
};if _cbce .Llx > _cbce .Urx {_cbce .Llx ,_cbce .Urx =_cbce .Urx ,_cbce .Llx ;};if _cbce .Lly > _cbce .Ury {_cbce .Lly ,_cbce .Ury =_cbce .Ury ,_cbce .Lly ;};_gfcg :=textMark {_ebed :_bfgc ,PdfRectangle :_cbce ,_efeb :_cegfd ,_bbfe :_dgggc ,_eafd :_dcbfc ,_adbbd :_afdf ,_ffecg :_gecga ,_gace :_edaa ,_cafc :_efdd ,_efa :_cdfeg ,_ggfd :_cgeb ,_dgdcb :_ffac ,_ebafd :_daeg ,Th :_eaeb ._ddc ._gaf ,Tw :_eaeb ._ddc ._dge ,_gcbcd :_aabce };
if _added {_ae .Log .Info ("n\u0065\u0077\u0054\u0065\u0078\u0074M\u0061\u0072\u006b\u003a\u0020\u0073t\u0061\u0072\u0074\u003d\u0025\u002e\u0032f\u0020\u0065\u006e\u0064\u003d\u0025\u002e\u0032\u0066\u0020%\u0073",_ecfee ,_edaa ,_gfcg .String ());};return _gfcg ,_bbaf ;
};func _ffabe (_ddac _fa .PdfRectangle )*ruling {return &ruling {_gagfc :_bggg ,_dade :_ddac .Llx ,_bggda :_ddac .Lly ,_aed :_ddac .Ury };};

// ImageExtractOptions contains options for controlling image extraction from
// PDF pages.
type ImageExtractOptions struct{IncludeInlineStencilMasks bool ;};func _acaf (_fag *Extractor ,_dcec *_fa .PdfPageResources ,_dcbe _aef .GraphicsState ,_fgb *textState ,_eae *stateStack )*textObject {return &textObject {_fgg :_fag ,_eea :_dcec ,_bbfd :_dcbe ,_baaa :_eae ,_ddc :_fgb ,_abd :_ge .IdentityMatrix (),_ceff :_ge .IdentityMatrix ()};
};func (_geac *textTable )growTable (){_dcfgg :=func (_gagce paraList ){_geac ._egcge ++;for _accb :=0;_accb < _geac ._aecda ;_accb ++{_abga :=_gagce [_accb ];_geac .put (_accb ,_geac ._egcge -1,_abga );};};_dadg :=func (_cdge paraList ){_geac ._aecda ++;
for _ebabd :=0;_ebabd < _geac ._egcge ;_ebabd ++{_gfcd :=_cdge [_ebabd ];_geac .put (_geac ._aecda -1,_ebabd ,_gfcd );};};if _gcea {_geac .log ("\u0067r\u006f\u0077\u0054\u0061\u0062\u006ce");};for _ddbgf :=0;;_ddbgf ++{_aagf :=false ;_bafe :=_geac .getDown ();
_bcddb :=_geac .getRight ();if _gcea {_ded .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ddbgf ,_geac );_ded .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0020\u0064\u006f\u0077\u006e\u003d\u0025\u0073\u000a",_bafe );_ded .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0072\u0069\u0067\u0068\u0074\u003d\u0025\u0073\u000a",_bcddb );
};if _bafe !=nil &&_bcddb !=nil {_cbdb :=_bafe [len (_bafe )-1];if !_cbdb .taken ()&&_cbdb ==_bcddb [len (_bcddb )-1]{_dcfgg (_bafe );if _bcddb =_geac .getRight ();_bcddb !=nil {_dadg (_bcddb );_geac .put (_geac ._aecda -1,_geac ._egcge -1,_cbdb );};_aagf =true ;
};};if !_aagf &&_bafe !=nil {_dcfgg (_bafe );_aagf =true ;};if !_aagf &&_bcddb !=nil {_dadg (_bcddb );_aagf =true ;};if !_aagf {break ;};};};func (_gaga *PageText )computeViews (){var _acac rulingList ;if _affb {_gdf :=_cgac (_gaga ._edff );_acac =append (_acac ,_gdf ...);
};if _eacc {_aeab :=_dacfb (_gaga ._ebeb );_acac =append (_acac ,_aeab ...);};_acac ,_gge :=_acac .toTilings ();var _dfff paraList ;_efde :=len (_gaga ._fde );for _abcg :=0;_abcg < 360&&_efde > 0;_abcg +=90{_ccea :=make ([]*textMark ,0,len (_gaga ._fde )-_efde );
for _ ,_cddf :=range _gaga ._fde {if _cddf ._cafc ==_abcg {_ccea =append (_ccea ,_cddf );};};if len (_ccea )> 0{_adf :=_ebg (_ccea ,_gaga ._abfb ,_acac ,_gge );_dfff =append (_dfff ,_adf ...);_efde -=len (_ccea );};};_gcg :=new (_eg .Buffer );_dfff .writeText (_gcg );
_gaga ._adc =_gcg .String ();_gaga ._gdgd =_dfff .toTextMarks ();_gaga ._geab =_dfff .tables ();if _dcfc {_ae .Log .Info ("\u0063\u006f\u006dpu\u0074\u0065\u0056\u0069\u0065\u0077\u0073\u003a\u0020\u0074\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064",len (_gaga ._geab ));
};};func _fbb (_gcfg []*wordBag )[]*wordBag {if len (_gcfg )<=1{return _gcfg ;};if _eaga {_ae .Log .Info ("\u006d\u0065\u0072\u0067\u0065\u0057\u006f\u0072\u0064B\u0061\u0067\u0073\u003a");};_ff .Slice (_gcfg ,func (_bfc ,_cecd int )bool {_ccbe ,_bgcca :=_gcfg [_bfc ],_gcfg [_cecd ];
_abg :=_ccbe .Width ()*_ccbe .Height ();_efce :=_bgcca .Width ()*_bgcca .Height ();if _abg !=_efce {return _abg > _efce ;};if _ccbe .Height ()!=_bgcca .Height (){return _ccbe .Height ()> _bgcca .Height ();};return _bfc < _cecd ;});var _cbfg []*wordBag ;
_ccab :=make (intSet );for _gaeg :=0;_gaeg < len (_gcfg );_gaeg ++{if _ccab .has (_gaeg ){continue ;};_bee :=_gcfg [_gaeg ];for _cgdg :=_gaeg +1;_cgdg < len (_gcfg );_cgdg ++{if _ccab .has (_gaeg ){continue ;};_bgd :=_gcfg [_cgdg ];_cbba :=_bee .PdfRectangle ;
_cbba .Llx -=_bee ._dca ;if _deee (_cbba ,_bgd .PdfRectangle ){_bee .absorb (_bgd );_ccab .add (_cgdg );};};_cbfg =append (_cbfg ,_bee );};if len (_gcfg )!=len (_cbfg )+len (_ccab ){_ae .Log .Error ("\u006d\u0065\u0072ge\u0057\u006f\u0072\u0064\u0042\u0061\u0067\u0073\u003a \u0025d\u2192%\u0064 \u0061\u0062\u0073\u006f\u0072\u0062\u0065\u0064\u003d\u0025\u0064",len (_gcfg ),len (_cbfg ),len (_ccab ));
};return _cbfg ;};func (_cdaa *textMark )inDiacriticArea (_aecd *textMark )bool {_aece :=_cdaa .Llx -_aecd .Llx ;_cgfa :=_cdaa .Urx -_aecd .Urx ;_cfff :=_cdaa .Lly -_aecd .Lly ;return _de .Abs (_aece +_cgfa )< _cdaa .Width ()*_bcab &&_de .Abs (_cfff )< _cdaa .Height ()*_bcab ;
};

// Options extractor options.
type Options struct{

// ApplyCropBox will extract page text based on page cropbox if set to `true`.
ApplyCropBox bool ;};

// ImageMark represents an image drawn on a page and its position in device coordinates.
// All coordinates are in device coordinates.
type ImageMark struct{Image *_fa .Image ;

// Dimensions of the image as displayed in the PDF.
Width float64 ;Height float64 ;

// Position of the image in PDF coordinates (lower left corner).
X float64 ;Y float64 ;

// Angle in degrees, if rotated.
Angle float64 ;};func (_faef *stateStack )top ()*textState {if _faef .empty (){return nil ;};return (*_faef )[_faef .size ()-1];};func _fcad (_ddgf _fa .PdfRectangle ,_affcc ,_afcg ,_geefd ,_gebe *ruling )gridTile {_bbfb :=_ddgf .Llx ;_gbade :=_ddgf .Urx ;
_abfdbc :=_ddgf .Lly ;_fbee :=_ddgf .Ury ;return gridTile {PdfRectangle :_ddgf ,_acef :_affcc !=nil &&_affcc .encloses (_abfdbc ,_fbee ),_cade :_afcg !=nil &&_afcg .encloses (_abfdbc ,_fbee ),_cgff :_geefd !=nil &&_geefd .encloses (_bbfb ,_gbade ),_ggcd :_gebe !=nil &&_gebe .encloses (_bbfb ,_gbade )};
};func (_gcac compositeCell )hasLines (_becg []*textLine )bool {for _acae ,_gfbb :=range _becg {_gfbga :=_fdea (_gcac .PdfRectangle ,_gfbb .PdfRectangle );if _dcfc {_ded .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u005e\u005e\u005e\u0069\u006e\u0074\u0065\u0072\u0073e\u0063t\u0073\u003d\u0025\u0074\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u000a",_gfbga ,_acae ,len (_becg ));
_ded .Printf ("\u0020\u0020\u0020\u0020  \u005e\u005e\u005e\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025s\u000a",_gcac );_ded .Printf ("\u0020 \u0020 \u0020\u0020\u0020\u006c\u0069\u006e\u0065\u003d\u0025\u0073\u000a",_gfbb );};if _gfbga {return true ;
};};return false ;};func (_beafa *textTable )log (_bafdg string ){if !_dcfc {return ;};_ae .Log .Info ("~\u007e\u007e\u0020\u0025\u0073\u003a \u0025\u0064\u0020\u0078\u0020\u0025d\u0020\u0067\u0072\u0069\u0064\u003d\u0025t\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0025\u0036\u002e2\u0066",_bafdg ,_beafa ._aecda ,_beafa ._egcge ,_beafa ._eecbc ,_beafa .PdfRectangle );
for _dafcd :=0;_dafcd < _beafa ._egcge ;_dafcd ++{for _cefdb :=0;_cefdb < _beafa ._aecda ;_cefdb ++{_cadcf :=_beafa .get (_cefdb ,_dafcd );if _cadcf ==nil {continue ;};_ded .Printf ("%\u0034\u0064\u0020\u00252d\u003a \u0025\u0036\u002e\u0032\u0066 \u0025\u0071\u0020\u0025\u0064\u000a",_cefdb ,_dafcd ,_cadcf .PdfRectangle ,_efac (_cadcf .text (),50),_e .RuneCountInString (_cadcf .text ()));
};};};var _ageag =map[markKind ]string {_ceaf :"\u0073\u0074\u0072\u006f\u006b\u0065",_agea :"\u0066\u0069\u006c\u006c",_fgbbd :"\u0061u\u0067\u006d\u0065\u006e\u0074"};func (_eade *textPara )writeCellText (_acegg _f .Writer ){for _ggd ,_ecgg :=range _eade ._dfcfe {_eegfa :=_ecgg .text ();
_eab :=_dcdd &&_ecgg .endsInHyphen ()&&_ggd !=len (_eade ._dfcfe )-1;if _eab {_eegfa =_gfec (_eegfa );};_acegg .Write ([]byte (_eegfa ));if !(_eab ||_ggd ==len (_eade ._dfcfe )-1){_acegg .Write ([]byte (_adbg (_ecgg ._ccca ,_eade ._dfcfe [_ggd +1]._ccca )));
};};};func _cad (_dacf _ge .Matrix )_ge .Point {_cce ,_bedg :=_dacf .Translation ();return _ge .Point {X :_cce ,Y :_bedg };};func (_ecdad *ruling )gridIntersecting (_feda *ruling )bool {return _gcbecc (_ecdad ._bggda ,_feda ._bggda )&&_gcbecc (_ecdad ._aed ,_feda ._aed );
};func (_fdfd rulingList )vertsHorzs ()(rulingList ,rulingList ){var _gbfd ,_bgdbc rulingList ;for _ ,_agcc :=range _fdfd {switch _agcc ._gagfc {case _bggg :_gbfd =append (_gbfd ,_agcc );case _fbde :_bgdbc =append (_bgdbc ,_agcc );};};return _gbfd ,_bgdbc ;
};func (_bgee paraList )findTableGrid (_dcegf gridTiling )(*textTable ,map[*textPara ]struct{}){_acdfbd :=len (_dcegf ._ddfbg );_cfebc :=len (_dcegf ._dffe );_ceaae :=textTable {_eecbc :true ,_aecda :_acdfbd ,_egcge :_cfebc ,_bbbb :make (map[uint64 ]*textPara ,_acdfbd *_cfebc ),_agdc :make (map[uint64 ]compositeCell ,_acdfbd *_cfebc )};
_febed :=make (map[*textPara ]struct{});_cedaf :=int ((1.0-_abbf )*float64 (_acdfbd *_cfebc ));_ceafe :=0;if _gedb {_ae .Log .Info ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0064\u0020\u0078\u0020%\u0064",_acdfbd ,_cfebc );
};for _efdg ,_ddfdb :=range _dcegf ._dffe {_abbcf ,_ecgb :=_dcegf ._ddba [_ddfdb ];if !_ecgb {continue ;};for _geafe ,_bacd :=range _dcegf ._ddfbg {_gedd ,_ddcg :=_abbcf [_bacd ];if !_ddcg {continue ;};_gaaca :=_bgee .inTile (_gedd );if len (_gaaca )==0{_ceafe ++;
if _ceafe > _cedaf {if _gedb {_ae .Log .Info ("\u0021\u006e\u0075m\u0045\u006d\u0070\u0074\u0079\u003d\u0025\u0064",_ceafe );};return nil ,nil ;};}else {_ceaae .putComposite (_geafe ,_efdg ,_gaaca ,_gedd .PdfRectangle );for _ ,_bbce :=range _gaaca {_febed [_bbce ]=struct{}{};
};};};};_fecd :=0;for _gfdeg :=0;_gfdeg < _acdfbd ;_gfdeg ++{_ecfef :=_ceaae .get (_gfdeg ,0);if _ecfef ==nil ||!_ecfef ._fdbaa {_fecd ++;};};if _fecd ==0{if _gedb {_ae .Log .Info ("\u0021\u006e\u0075m\u0048\u0065\u0061\u0064\u0065\u0072\u003d\u0030");
};return nil ,nil ;};_dcff :=_ceaae .reduceTiling (_dcegf ,_gbag );_dcff =_dcff .subdivide ();return _dcff ,_febed ;};func (_agebb *textTable )bbox ()_fa .PdfRectangle {return _agebb .PdfRectangle };

// String returns a human readable description of `path`.
func (_gac *subpath )String ()string {_ddbf :=_gac ._afdb ;_gdb :=len (_ddbf );if _gdb <=5{return _ded .Sprintf ("\u0025d\u003a\u0020\u0025\u0036\u002e\u0032f",_gdb ,_ddbf );};return _ded .Sprintf ("\u0025d\u003a\u0020\u0025\u0036.\u0032\u0066\u0020\u0025\u0036.\u0032f\u0020.\u002e\u002e\u0020\u0025\u0036\u002e\u0032f",_gdb ,_ddbf [0],_ddbf [1],_ddbf [_gdb -1]);
};func (_gcbf *subpath )add (_dba ..._ge .Point ){_gcbf ._afdb =append (_gcbf ._afdb ,_dba ...)};func (_cgba gridTile )contains (_bedcc _fa .PdfRectangle )bool {if _cgba .numBorders ()< 3{return false ;};if _cgba ._acef &&_bedcc .Llx < _cgba .Llx -_beef {return false ;
};if _cgba ._cade &&_bedcc .Urx > _cgba .Urx +_beef {return false ;};if _cgba ._cgff &&_bedcc .Lly < _cgba .Lly -_beef {return false ;};if _cgba ._ggcd &&_bedcc .Ury > _cgba .Ury +_beef {return false ;};return true ;};func (_daecc gridTiling )log (_afgdf string ){if !_gedb {return ;
};_ae .Log .Info ("\u0074i\u006ci\u006e\u0067\u003a\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0071",len (_daecc ._ddfbg ),len (_daecc ._dffe ),_afgdf );_ded .Printf ("\u0020\u0020\u0020l\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a",_daecc ._ddfbg );
_ded .Printf ("\u0020\u0020\u0020l\u006c\u0079\u003d\u0025\u002e\u0032\u0066\u000a",_daecc ._dffe );for _eecb ,_baadd :=range _daecc ._dffe {_egabg ,_eeag :=_daecc ._ddba [_baadd ];if !_eeag {continue ;};_ded .Printf ("%\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_eecb ,_baadd );
for _aefe ,_cbbc :=range _daecc ._ddfbg {_ddfa ,_ebefc :=_egabg [_cbbc ];if !_ebefc {continue ;};_ded .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_aefe ,_ddfa .String ());};};};

// String returns a string describing `ma`.
func (_dbgd TextMarkArray )String ()string {_bcd :=len (_dbgd ._dfgf );if _bcd ==0{return "\u0045\u004d\u0050T\u0059";};_gcdb :=_dbgd ._dfgf [0];_defg :=_dbgd ._dfgf [_bcd -1];return _ded .Sprintf ("\u007b\u0054\u0045\u0058\u0054\u004d\u0041\u0052K\u0041\u0052\u0052AY\u003a\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025s\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d%\u0073\u007d",_bcd ,_gcdb ,_defg );
};

// String returns a string describing `pt`.
func (_ffb PageText )String ()string {_adbb :=_ded .Sprintf ("P\u0061\u0067\u0065\u0054ex\u0074:\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073",len (_ffb ._fde ));_eeda :=[]string {"\u002d"+_adbb };for _ ,_cdc :=range _ffb ._fde {_eeda =append (_eeda ,_cdc .String ());
};_eeda =append (_eeda ,"\u002b"+_adbb );return _db .Join (_eeda ,"\u000a");};func (_dcc *textMark )bbox ()_fa .PdfRectangle {return _dcc .PdfRectangle };

// Font represents the font properties on a PDF page.
type Font struct{PdfFont *_fa .PdfFont ;

// FontName represents Font Name from font properties.
FontName string ;

// FontType represents Font Subtype entry in the font dictionary inside page resources.
// Examples : type0, Type1, MMType1, Type3, TrueType, CIDFont.
FontType string ;

// ToUnicode is true if font provides a `ToUnicode` mapping.
ToUnicode bool ;

// IsCID is true if underlying font is a composite font.
// Composite font is represented by a font dictionary whose Subtype is `Type0`
IsCID bool ;

// IsSimple is true if font is simple font.
// A simple font is limited to only 8 bit (255) character codes.
IsSimple bool ;

// FontData represents the raw data of the embedded font file.
// It can have format TrueType (TTF), PostScript Font (PFB) or Compact Font Format (CCF).
// FontData value can be indicates from `FontFile`, `FontFile2` or `FontFile3` inside Font Descriptor.
// At most, only one of `FontFile`, `FontFile2` or `FontFile3` will be FontData value.
FontData []byte ;

// FontFileName is a name representing the font. it has format:
// (Font Name) + (Font Type Extension), example: helvetica.ttf.
FontFileName string ;

// FontDescriptor represents metrics and other attributes inside font properties from PDF Structure (Font Descriptor).
FontDescriptor *_fa .PdfFontDescriptor ;};var _eegb =_d .MustCompile ("\u005e\u005c\u0073\u002a\u0028\u005c\u0064\u002b\u005c\u002e\u003f|\u005b\u0049\u0069\u0076\u005d\u002b\u0029\u005c\u0073\u002a\\\u0029\u003f\u0024");func (_caaef *wordBag )arrangeText ()*textPara {_caaef .sort ();
if _cfa {_caaef .removeDuplicates ();};var _gefc []*textLine ;for _ ,_dcfge :=range _caaef .depthIndexes (){for !_caaef .empty (_dcfge ){_abegf :=_caaef .firstReadingIndex (_dcfge );_ebabb :=_caaef .firstWord (_abegf );_dcga :=_gfdbd (_caaef ,_abegf );
_bafd :=_ebabb ._ddffg ;_fcefc :=_ebabb ._ecdaa -_fgda *_bafd ;_debc :=_ebabb ._ecdaa +_fgda *_bafd ;_decb :=_dbfc *_bafd ;_bfge :=_facd *_bafd ;_eege :for {var _ecb *textWord ;_gab :=0;for _ ,_ebdg :=range _caaef .depthBand (_fcefc ,_debc ){_bdbff :=_caaef .highestWord (_ebdg ,_fcefc ,_debc );
if _bdbff ==nil {continue ;};_edbac :=_edda (_bdbff ,_dcga ._afbd [len (_dcga ._afbd )-1]);if _edbac < -_bfge {break _eege ;};if _edbac > _decb {continue ;};if _ecb !=nil &&_eddg (_bdbff ,_ecb )>=0{continue ;};_ecb =_bdbff ;_gab =_ebdg ;};if _ecb ==nil {break ;
};_dcga .pullWord (_caaef ,_ecb ,_gab );};_dcga .markWordBoundaries ();_gefc =append (_gefc ,_dcga );};};if len (_gefc )==0{return nil ;};_ff .Slice (_gefc ,func (_baba ,_fdacd int )bool {return _dcbb (_gefc [_baba ],_gefc [_fdacd ])< 0});_efbf :=_bffg (_caaef .PdfRectangle ,_gefc );
if _eaga {_ae .Log .Info ("\u0061\u0072\u0072an\u0067\u0065\u0054\u0065\u0078\u0074\u0020\u0021\u0021\u0021\u0020\u0070\u0061\u0072\u0061\u003d\u0025\u0073",_efbf .String ());if _cgdd {for _gdeag ,_dffd :=range _efbf ._dfcfe {_ded .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gdeag ,_dffd .String ());
if _gded {for _gaed ,_gagb :=range _dffd ._afbd {_ded .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_gaed ,_gagb .String ());for _fdbf ,_afac :=range _gagb ._dded {_ded .Printf ("\u00251\u0032\u0064\u003a\u0020\u0025\u0073\n",_fdbf ,_afac .String ());
};};};};};};return _efbf ;};func (_bce *wordBag )sort (){for _ ,_aace :=range _bce ._cfe {_ff .Slice (_aace ,func (_ggff ,_fdda int )bool {return _eddg (_aace [_ggff ],_aace [_fdda ])< 0});};};func _gfdaa (_cggc float64 )bool {return _de .Abs (_cggc )< _afaba };
func (_ffec *wordBag )absorb (_gaae *wordBag ){_dddd :=_gaae .makeRemovals ();for _fgbbf ,_bffc :=range _gaae ._cfe {for _ ,_cfb :=range _bffc {_ffec .pullWord (_cfb ,_fgbbf ,_dddd );};};_gaae .applyRemovals (_dddd );};

// GetContentStreamOps returns the contentStreamOps field of `pt`.
func (_eefe *PageText )GetContentStreamOps ()*_aef .ContentStreamOperations {return _eefe ._adca };const _cca =1.0/1000.0;func (_gebee *textTable )getRight ()paraList {_faaf :=make (paraList ,_gebee ._egcge );for _dfcc :=0;_dfcc < _gebee ._egcge ;_dfcc ++{_gede :=_gebee .get (_gebee ._aecda -1,_dfcc )._gfdg ;
if _gede .taken (){return nil ;};_faaf [_dfcc ]=_gede ;};for _adab :=0;_adab < _gebee ._egcge -1;_adab ++{if _faaf [_adab ]._ddce !=_faaf [_adab +1]{return nil ;};};return _faaf ;};func (_bcc *textObject )getStrokeColor ()_c .Color {return _bcbbd (_bcc ._bbfd .ColorspaceStroking ,_bcc ._bbfd .ColorStroking );
};var (_ac =_g .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");_ce =_g .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););func (_fdac paraList )toTextMarks ()[]TextMark {_bfcc :=0;
var _fdace []TextMark ;for _bade ,_efdde :=range _fdac {if _efdde ._fdbaa {continue ;};_bbc :=_efdde .toTextMarks (&_bfcc );_fdace =append (_fdace ,_bbc ...);if _bade !=len (_fdac )-1{if _cgfc (_efdde ,_fdac [_bade +1]){_fdace =_fffb (_fdace ,&_bfcc ,"\u0020");
}else {_fdace =_fffb (_fdace ,&_bfcc ,"\u000a");_fdace =_fffb (_fdace ,&_bfcc ,"\u000a");};};};_fdace =_fffb (_fdace ,&_bfcc ,"\u000a");_fdace =_fffb (_fdace ,&_bfcc ,"\u000a");return _fdace ;};func _gbeg (_fgbag string ,_eedf []rulingList ){_ae .Log .Info ("\u0024\u0024 \u0025\u0064\u0020g\u0072\u0069\u0064\u0073\u0020\u002d\u0020\u0025\u0073",len (_eedf ),_fgbag );
for _cebf ,_egec :=range _eedf {_ded .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cebf ,_egec .String ());};};func (_adbf *textPara )text ()string {_geag :=new (_eg .Buffer );_adbf .writeText (_geag );return _geag .String ();};func _becde (_cecab map[int ][]float64 )string {_acea :=_eeagd (_cecab );
_ffggc :=make ([]string ,len (_cecab ));for _debe ,_ebdbd :=range _acea {_ffggc [_debe ]=_ded .Sprintf ("\u0025\u0064\u003a\u0020\u0025\u002e\u0032\u0066",_ebdbd ,_cecab [_ebdbd ]);};return _ded .Sprintf ("\u007b\u0025\u0073\u007d",_db .Join (_ffggc ,"\u002c\u0020"));
};func (_abeg *textPara )fontsize ()float64 {return _abeg ._dfcfe [0]._afca };var (_aagdg =map[rune ]string {0x0060:"\u0300",0x02CB:"\u0300",0x0027:"\u0301",0x00B4:"\u0301",0x02B9:"\u0301",0x02CA:"\u0301",0x005E:"\u0302",0x02C6:"\u0302",0x007E:"\u0303",0x02DC:"\u0303",0x00AF:"\u0304",0x02C9:"\u0304",0x02D8:"\u0306",0x02D9:"\u0307",0x00A8:"\u0308",0x00B0:"\u030a",0x02DA:"\u030a",0x02BA:"\u030b",0x02DD:"\u030b",0x02C7:"\u030c",0x02C8:"\u030d",0x0022:"\u030e",0x02BB:"\u0312",0x02BC:"\u0313",0x0486:"\u0313",0x055A:"\u0313",0x02BD:"\u0314",0x0485:"\u0314",0x0559:"\u0314",0x02D4:"\u031d",0x02D5:"\u031e",0x02D6:"\u031f",0x02D7:"\u0320",0x02B2:"\u0321",0x00B8:"\u0327",0x02CC:"\u0329",0x02B7:"\u032b",0x02CD:"\u0331",0x005F:"\u0332",0x204E:"\u0359"};
);func (_ddag *textTable )reduceTiling (_ggggf gridTiling ,_ffecga float64 )*textTable {_edeca :=make ([]int ,0,_ddag ._egcge );_gbcb :=make ([]int ,0,_ddag ._aecda );_eccdd :=_ggggf ._ddfbg ;_fceae :=_ggggf ._dffe ;for _efae :=0;_efae < _ddag ._egcge ;
_efae ++{_eedfe :=_efae > 0&&_de .Abs (_fceae [_efae -1]-_fceae [_efae ])< _ffecga &&_ddag .emptyCompositeRow (_efae );if !_eedfe {_edeca =append (_edeca ,_efae );};};for _cfcb :=0;_cfcb < _ddag ._aecda ;_cfcb ++{_aabbg :=_cfcb < _ddag ._aecda -1&&_de .Abs (_eccdd [_cfcb +1]-_eccdd [_cfcb ])< _ffecga &&_ddag .emptyCompositeColumn (_cfcb );
if !_aabbg {_gbcb =append (_gbcb ,_cfcb );};};if len (_edeca )==_ddag ._egcge &&len (_gbcb )==_ddag ._aecda {return _ddag ;};_facf :=textTable {_eecbc :_ddag ._eecbc ,_aecda :len (_gbcb ),_egcge :len (_edeca ),_agdc :make (map[uint64 ]compositeCell ,len (_gbcb )*len (_edeca ))};
if _dcfc {_ae .Log .Info ("\u0072\u0065\u0064\u0075c\u0065\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0025d\u0078%\u0064\u0020\u002d\u003e\u0020\u0025\u0064x\u0025\u0064",_ddag ._aecda ,_ddag ._egcge ,len (_gbcb ),len (_edeca ));_ae .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_gbcb );
_ae .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_edeca );};for _dfdg ,_caff :=range _edeca {for _gcfe ,_gbeff :=range _gbcb {_gdbgd ,_cdba :=_ddag .getComposite (_gbeff ,_caff );if len (_gdbgd )==0{continue ;
};if _dcfc {_ded .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_gcfe ,_dfdg ,_gbeff ,_caff ,_efac (_gdbgd .merge ().text (),50));};_facf .putComposite (_gcfe ,_dfdg ,_gdbgd ,_cdba );
};};return &_facf ;};func (_egcc *shapesState )cubicTo (_ecda ,_beda ,_dfbf ,_aefc ,_ddgc ,_dadcf float64 ){if _fdef {_ae .Log .Info ("\u0063\u0075\u0062\u0069\u0063\u0054\u006f\u003a");};_egcc .addPoint (_ddgc ,_dadcf );};func (_gaadf rulingList )aligned ()bool {if len (_gaadf )< 2{return false ;
};_cgeg :=make (map[*ruling ]int );_cgeg [_gaadf [0]]=0;for _ ,_egfad :=range _gaadf [1:]{_afgdd :=false ;for _dbedd :=range _cgeg {if _egfad .gridIntersecting (_dbedd ){_cgeg [_dbedd ]++;_afgdd =true ;break ;};};if !_afgdd {_cgeg [_egfad ]=0;};};_ggagg :=0;
for _ ,_abdf :=range _cgeg {if _abdf ==0{_ggagg ++;};};_gcdbd :=float64 (_ggagg )/float64 (len (_gaadf ));_begc :=_gcdbd <=1.0-_dbad ;if _cddgc {_ae .Log .Info ("\u0061\u006c\u0069\u0067\u006e\u0065\u0064\u003d\u0025\u0074\u0020\u0075\u006em\u0061\u0074\u0063\u0068\u0065\u0064=\u0025\u002e\u0032\u0066\u003d\u0025\u0064\u002f\u0025\u0064\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_begc ,_gcdbd ,_ggagg ,len (_gaadf ),_gaadf .String ());
};return _begc ;};func (_dg *PageFonts )extractPageResourcesToFont (_bc *_fa .PdfPageResources )error {_ca ,_acf :=_cb .GetDict (_bc .Font );if !_acf {return _g .New (_fe );};for _ ,_dbd :=range _ca .Keys (){var (_bdcb =true ;_gf []byte ;_fce string ;);
_bf ,_dfd :=_bc .GetFontByName (_dbd );if !_dfd {return _g .New (_cc );};_agc ,_age :=_fa .NewPdfFontFromPdfObject (_bf );if _age !=nil {return _age ;};_gda :=_agc .FontDescriptor ();_fcf :=_agc .FontDescriptor ().FontName .String ();_abe :=_agc .Subtype ();
if _ceg (_dg .Fonts ,_fcf ){continue ;};if len (_agc .ToUnicode ())==0{_bdcb =false ;};if _gda .FontFile !=nil {if _cae ,_cbd :=_cb .GetStream (_gda .FontFile );_cbd {_gf ,_age =_cb .DecodeStream (_cae );if _age !=nil {return _age ;};_fce =_fcf +"\u002e\u0070\u0066\u0062";
};}else if _gda .FontFile2 !=nil {if _gga ,_bgc :=_cb .GetStream (_gda .FontFile2 );_bgc {_gf ,_age =_cb .DecodeStream (_gga );if _age !=nil {return _age ;};_fce =_fcf +"\u002e\u0074\u0074\u0066";};}else if _gda .FontFile3 !=nil {if _dff ,_dbb :=_cb .GetStream (_gda .FontFile3 );
_dbb {_gf ,_age =_cb .DecodeStream (_dff );if _age !=nil {return _age ;};_fce =_fcf +"\u002e\u0063\u0066\u0066";};};if len (_fce )< 1{_ae .Log .Debug (_gg );};_fdg :=Font {FontName :_fcf ,PdfFont :_agc ,IsCID :_agc .IsCID (),IsSimple :_agc .IsSimple (),ToUnicode :_bdcb ,FontType :_abe ,FontData :_gf ,FontFileName :_fce ,FontDescriptor :_gda };
_dg .Fonts =append (_dg .Fonts ,_fdg );};return nil ;};func (_gcce rectRuling )asRuling ()(*ruling ,bool ){_aaffe :=ruling {_gagfc :_gcce ._acga ,Color :_gcce .Color ,_eeab :_agea };switch _gcce ._acga {case _bggg :_aaffe ._dade =0.5*(_gcce .Llx +_gcce .Urx );
_aaffe ._bggda =_gcce .Lly ;_aaffe ._aed =_gcce .Ury ;_badef ,_babd :=_gcce .checkWidth (_gcce .Llx ,_gcce .Urx );if !_babd {if _aggg {_ae .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067V\u0065\u0072\u0074\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_gcce );
};return nil ,false ;};_aaffe ._gcbee =_badef ;case _fbde :_aaffe ._dade =0.5*(_gcce .Lly +_gcce .Ury );_aaffe ._bggda =_gcce .Llx ;_aaffe ._aed =_gcce .Urx ;_gdbgf ,_fddb :=_gcce .checkWidth (_gcce .Lly ,_gcce .Ury );if !_fddb {if _aggg {_ae .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067H\u006f\u0072\u007a\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_gcce );
};return nil ,false ;};_aaffe ._gcbee =_gdbgf ;default:_ae .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_gcce ._acga );return nil ,false ;};return &_aaffe ,true ;};

// String returns a string describing the current state of the textState stack.
func (_bbfg *stateStack )String ()string {_edfe :=[]string {_ded .Sprintf ("\u002d\u002d\u002d\u002d f\u006f\u006e\u0074\u0020\u0073\u0074\u0061\u0063\u006b\u003a\u0020\u0025\u0064",len (*_bbfg ))};for _dcef ,_cffc :=range *_bbfg {_dbg :="\u003c\u006e\u0069l\u003e";
if _cffc !=nil {_dbg =_cffc .String ();};_edfe =append (_edfe ,_ded .Sprintf ("\u0009\u0025\u0032\u0064\u003a\u0020\u0025\u0073",_dcef ,_dbg ));};return _db .Join (_edfe ,"\u000a");};func _fffb (_afdc []TextMark ,_bbae *int ,_aae string )[]TextMark {_gbee :=_gbde ;
_gbee .Text =_aae ;return _abbc (_afdc ,_bbae ,_gbee );};

// String returns a description of `t`.
func (_fcege *textTable )String ()string {return _ded .Sprintf ("\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0025\u0074",_fcege ._aecda ,_fcege ._egcge ,_fcege ._eecbc );};func (_fcg *textObject )moveTextSetLeading (_bcgg ,_fcfa float64 ){_fcg ._ddc ._ffc =-_fcfa ;
_fcg .moveLP (_bcgg ,_fcfa );};func (_aeed rulingList )splitSec ()[]rulingList {_ff .Slice (_aeed ,func (_ceac ,_gcdcf int )bool {_cbaf ,_egaa :=_aeed [_ceac ],_aeed [_gcdcf ];if _cbaf ._bggda !=_egaa ._bggda {return _cbaf ._bggda < _egaa ._bggda ;};return _cbaf ._aed < _egaa ._aed ;
});_cdddc :=make (map[*ruling ]struct{},len (_aeed ));_edaaf :=func (_bcbb *ruling )rulingList {_dbgf :=rulingList {_bcbb };_cdddc [_bcbb ]=struct{}{};for _ ,_gefg :=range _aeed {if _ ,_gbdd :=_cdddc [_gefg ];_gbdd {continue ;};for _ ,_acdfb :=range _dbgf {if _gefg .alignsSec (_acdfb ){_dbgf =append (_dbgf ,_gefg );
_cdddc [_gefg ]=struct{}{};break ;};};};return _dbgf ;};_edde :=[]rulingList {_edaaf (_aeed [0])};for _ ,_gbeb :=range _aeed [1:]{if _ ,_cabea :=_cdddc [_gbeb ];_cabea {continue ;};_edde =append (_edde ,_edaaf (_gbeb ));};return _edde ;};func (_ddca *wordBag )removeWord (_aaf *textWord ,_aabba int ){_acfae :=_ddca ._cfe [_aabba ];
_acfae =_edbee (_acfae ,_aaf );if len (_acfae )==0{delete (_ddca ._cfe ,_aabba );}else {_ddca ._cfe [_aabba ]=_acfae ;};};func (_dabd intSet )add (_dfbgg int ){_dabd [_dfbgg ]=struct{}{}};type event struct{_fbfe float64 ;_aedbfg bool ;_defge int ;};func (_bcafc *textTable )getComposite (_egga ,_beaad int )(paraList ,_fa .PdfRectangle ){_gccf ,_fage :=_bcafc ._agdc [_babg (_egga ,_beaad )];
if _dcfc {_ded .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0067\u0065\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u002d\u003e\u0025\u0073\u000a",_egga ,_beaad ,_gccf .String ());};if !_fage {return nil ,_fa .PdfRectangle {};
};return _gccf .parasBBox ();};func (_fgfe *textLine )appendWord (_bagee *textWord ){_fgfe ._afbd =append (_fgfe ._afbd ,_bagee );_fgfe .PdfRectangle =_deab (_fgfe .PdfRectangle ,_bagee .PdfRectangle );if _bagee ._ddffg > _fgfe ._afca {_fgfe ._afca =_bagee ._ddffg ;
};if _bagee ._ecdaa > _fgfe ._ccca {_fgfe ._ccca =_bagee ._ecdaa ;};};func _dcfe (_cgccd []*textWord ,_febg int )[]*textWord {_gfbf :=len (_cgccd );copy (_cgccd [_febg :],_cgccd [_febg +1:]);return _cgccd [:_gfbf -1];};func _gcadg (_ggced ,_cfggd ,_aedc ,_ebcg *textPara )*textTable {_gfad :=&textTable {_aecda :2,_egcge :2,_bbbb :make (map[uint64 ]*textPara ,4)};
_gfad .put (0,0,_ggced );_gfad .put (1,0,_cfggd );_gfad .put (0,1,_aedc );_gfad .put (1,1,_ebcg );return _gfad ;};func _bcgd (_gcbbd ,_fdfae _ge .Point )bool {_ebabc :=_de .Abs (_gcbbd .X -_fdfae .X );_feeg :=_de .Abs (_gcbbd .Y -_fdfae .Y );return _cgde (_feeg ,_ebabc );
};func (_bde *Extractor )extractPageText (_def string ,_gada *_fa .PdfPageResources ,_bdcg _ge .Matrix ,_cdd int )(*PageText ,int ,int ,error ){_ae .Log .Trace ("\u0065x\u0074\u0072\u0061\u0063t\u0050\u0061\u0067\u0065\u0054e\u0078t\u003a \u006c\u0065\u0076\u0065\u006c\u003d\u0025d",_cdd );
_ggb :=&PageText {_abfb :_bde ._ed };_aab :=_gadcb (_bde ._ed );var _ced stateStack ;_dgc :=_acaf (_bde ,_gada ,_aef .GraphicsState {},&_aab ,&_ced );_cea :=shapesState {_dbbf :_bdcg ,_afef :_ge .IdentityMatrix (),_edfa :_dgc };var _fg bool ;if _cdd > _gae {_cef :=_g .New ("\u0066\u006f\u0072\u006d s\u0074\u0061\u0063\u006b\u0020\u006f\u0076\u0065\u0072\u0066\u006c\u006f\u0077");
_ae .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0065\u0078\u0074\u0072\u0061\u0063\u0074\u0050\u0061\u0067\u0065\u0054\u0065\u0078\u0074\u002e\u0020\u0072\u0065\u0063u\u0072\u0073\u0069\u006f\u006e\u0020\u006c\u0065\u0076\u0065\u006c\u003d\u0025\u0064 \u0065r\u0072\u003d\u0025\u0076",_cdd ,_cef );
return _ggb ,_aab ._abea ,_aab ._fcc ,_cef ;};_bba :=_aef .NewContentStreamParser (_def );_ecg ,_cdde :=_bba .Parse ();if _cdde !=nil {_ae .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020e\u0078\u0074\u0072a\u0063\u0074\u0050\u0061g\u0065\u0054\u0065\u0078\u0074\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cdde );
return _ggb ,_aab ._abea ,_aab ._fcc ,_cdde ;};_ggb ._adca =_ecg ;_egfg :=_aef .NewContentStreamProcessor (*_ecg );_egfg .AddHandler (_aef .HandlerConditionEnumAllOperands ,"",func (_dgb *_aef .ContentStreamOperation ,_agg _aef .GraphicsState ,_bge *_fa .PdfPageResources )error {_ceec :=_dgb .Operand ;
if _bbbd {_ae .Log .Info ("\u0026&\u0026\u0020\u006f\u0070\u003d\u0025s",_dgb );};switch _ceec {case "\u0071":if _fdef {_ae .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_cea ._afef );};_ced .push (&_aab );case "\u0051":if !_ced .empty (){_aab =*_ced .pop ();
};_cea ._afef =_agg .CTM ;if _fdef {_ae .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_cea ._afef );};case "\u0042\u0054":if _fg {_ae .Log .Debug ("\u0042\u0054\u0020\u0063\u0061\u006c\u006c\u0065\u0064\u0020\u0077\u0068\u0069\u006c\u0065 \u0069n\u0020\u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
_ggb ._fde =append (_ggb ._fde ,_dgc ._adg ...);};_fg =true ;_dadc :=_agg ;_dadc .CTM =_bdcg .Mult (_dadc .CTM );_dgc =_acaf (_bde ,_bge ,_dadc ,&_aab ,&_ced );_cea ._edfa =_dgc ;case "\u0045\u0054":if !_fg {_ae .Log .Debug ("\u0045\u0054\u0020ca\u006c\u006c\u0065\u0064\u0020\u006f\u0075\u0074\u0073i\u0064e\u0020o\u0066 \u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
};_fg =false ;_ggb ._fde =append (_ggb ._fde ,_dgc ._adg ...);_dgc .reset ();case "\u0054\u002a":_dgc .nextLine ();case "\u0054\u0064":if _cfd ,_cged :=_dgc .checkOp (_dgb ,2,true );!_cfd {_ae .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cged );
return _cged ;};_ggc ,_ada ,_cefb :=_gdbe (_dgb .Params );if _cefb !=nil {return _cefb ;};_dgc .moveText (_ggc ,_ada );case "\u0054\u0044":if _ffd ,_cdf :=_dgc .checkOp (_dgb ,2,true );!_ffd {_ae .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cdf );
return _cdf ;};_fda ,_geef ,_gce :=_gdbe (_dgb .Params );if _gce !=nil {_ae .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gce );return _gce ;};_dgc .moveTextSetLeading (_fda ,_geef );case "\u0054\u006a":if _gef ,_bef :=_dgc .checkOp (_dgb ,1,true );
!_gef {_ae .Log .Debug ("\u0045\u0052\u0052\u004fR:\u0020\u0054\u006a\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0065\u0072\u0072\u003d%\u0076",_dgb ,_bef );return _bef ;};_ddb :=_cb .TraceToDirectObject (_dgb .Params [0]);_gea ,_dcd :=_cb .GetStringBytes (_ddb );
if !_dcd {_ae .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020T\u006a\u0020o\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074S\u0074\u0072\u0069\u006e\u0067\u0042\u0079\u0074\u0065\u0073\u0020\u0066a\u0069\u006c\u0065\u0064",_dgb );return _cb .ErrTypeError ;
};return _dgc .showText (_ddb ,_gea );case "\u0054\u004a":if _bdb ,_cdfe :=_dgc .checkOp (_dgb ,1,true );!_bdb {_ae .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cdfe );return _cdfe ;};_acfc ,_bac :=_cb .GetArray (_dgb .Params [0]);
if !_bac {_ae .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_dgb );return _cdde ;};return _dgc .showTextAdjusted (_acfc );
case "\u0027":if _ee ,_defc :=_dgc .checkOp (_dgb ,1,true );!_ee {_ae .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0027\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_defc );return _defc ;};_eec :=_cb .TraceToDirectObject (_dgb .Params [0]);_gag ,_aac :=_cb .GetStringBytes (_eec );
if !_aac {_ae .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020'\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_dgb );return _cb .ErrTypeError ;};_dgc .nextLine ();return _dgc .showText (_eec ,_gag );
case "\u0022":if _bagb ,_af :=_dgc .checkOp (_dgb ,3,true );!_bagb {_ae .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0022\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_af );return _af ;};_aag ,_bfg ,_bdbc :=_gdbe (_dgb .Params [:2]);if _bdbc !=nil {return _bdbc ;
};_bcf :=_cb .TraceToDirectObject (_dgb .Params [2]);_ebe ,_aeg :=_cb .GetStringBytes (_bcf );if !_aeg {_ae .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020\"\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_dgb );
return _cb .ErrTypeError ;};_dgc .setCharSpacing (_aag );_dgc .setWordSpacing (_bfg );_dgc .nextLine ();return _dgc .showText (_bcf ,_ebe );case "\u0054\u004c":_aabb ,_aad :=_abagb (_dgb );if _aad !=nil {_ae .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004c\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_aad );
return _aad ;};_dgc .setTextLeading (_aabb );case "\u0054\u0063":_fdfa ,_caeg :=_abagb (_dgb );if _caeg !=nil {_ae .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0063\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_caeg );return _caeg ;};_dgc .setCharSpacing (_fdfa );
case "\u0054\u0066":if _bbf ,_afa :=_dgc .checkOp (_dgb ,2,true );!_bbf {_ae .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0066\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_afa );return _afa ;};_fff ,_abc :=_cb .GetNameVal (_dgb .Params [0]);if !_abc {_ae .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u004ea\u006d\u0065\u0056\u0061\u006c\u0020\u0066a\u0069\u006c\u0065\u0064",_dgb );
return _cb .ErrTypeError ;};_fef ,_gfg :=_cb .GetNumberAsFloat (_dgb .Params [1]);if !_abc {_ae .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u0046\u006c\u006f\u0061\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065d\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dgb ,_gfg );
return _gfg ;};_gfg =_dgc .setFont (_fff ,_fef );_dgc ._beba =_dd .Is (_gfg ,_cb .ErrNotSupported );if _gfg !=nil &&!_dgc ._beba {return _gfg ;};case "\u0054\u006d":if _bbg ,_ggg :=_dgc .checkOp (_dgb ,6,true );!_bbg {_ae .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u006d\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ggg );
return _ggg ;};_dgf ,_bgea :=_cb .GetNumbersAsFloat (_dgb .Params );if _bgea !=nil {_ae .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bgea );return _bgea ;};_dgc .setTextMatrix (_dgf );case "\u0054\u0072":if _gbb ,_bcb :=_dgc .checkOp (_dgb ,1,true );
!_gbb {_ae .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0072\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bcb );return _bcb ;};_bgca ,_aacd :=_cb .GetIntVal (_dgb .Params [0]);if !_aacd {_ae .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0072\u0020\u006f\u0070\u003d\u0025\u0073 \u0047e\u0074\u0049\u006e\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_dgb );
return _cb .ErrTypeError ;};_dgc .setTextRenderMode (_bgca );case "\u0054\u0073":if _agba ,_dae :=_dgc .checkOp (_dgb ,1,true );!_agba {_ae .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0073\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dae );return _dae ;
};_fba ,_dcde :=_cb .GetNumberAsFloat (_dgb .Params [0]);if _dcde !=nil {_ae .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dcde );return _dcde ;};_dgc .setTextRise (_fba );case "\u0054\u0077":if _dfe ,_aadf :=_dgc .checkOp (_dgb ,1,true );
!_dfe {_ae .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_aadf );return _aadf ;};_eed ,_bfe :=_cb .GetNumberAsFloat (_dgb .Params [0]);if _bfe !=nil {_ae .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bfe );
return _bfe ;};_dgc .setWordSpacing (_eed );case "\u0054\u007a":if _agca ,_dfeg :=_dgc .checkOp (_dgb ,1,true );!_agca {_ae .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dfeg );return _dfeg ;};_cde ,_bec :=_cb .GetNumberAsFloat (_dgb .Params [0]);
if _bec !=nil {_ae .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bec );return _bec ;};_dgc .setHorizScaling (_cde );case "\u0063\u006d":_cea ._afef =_agg .CTM ;if _cea ._afef .Singular (){_aea :=_ge .IdentityMatrix ().Translate (_cea ._afef .Translation ());
_ae .Log .Debug ("S\u0069n\u0067\u0075\u006c\u0061\u0072\u0020\u0063\u0074m\u003d\u0025\u0073\u2192%s",_cea ._afef ,_aea );_cea ._afef =_aea ;};if _fdef {_ae .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_cea ._afef );};case "\u006d":if len (_dgb .Params )!=2{_ae .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_ce );
return nil ;};_cfc ,_fae :=_cb .GetNumbersAsFloat (_dgb .Params );if _fae !=nil {return _fae ;};_cea .moveTo (_cfc [0],_cfc [1]);case "\u006c":if len (_dgb .Params )!=2{_ae .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_ce );
return nil ;};_feff ,_adb :=_cb .GetNumbersAsFloat (_dgb .Params );if _adb !=nil {return _adb ;};_cea .lineTo (_feff [0],_feff [1]);case "\u0063":if len (_dgb .Params )!=6{return _ce ;};_ddbg ,_dedc :=_cb .GetNumbersAsFloat (_dgb .Params );if _dedc !=nil {return _dedc ;
};_ae .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_ddbg );_cea .cubicTo (_ddbg [0],_ddbg [1],_ddbg [2],_ddbg [3],_ddbg [4],_ddbg [5]);case "\u0076","\u0079":if len (_dgb .Params )!=4{return _ce ;
};_beg ,_agf :=_cb .GetNumbersAsFloat (_dgb .Params );if _agf !=nil {return _agf ;};_ae .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_beg );_cea .quadraticTo (_beg [0],_beg [1],_beg [2],_beg [3]);
case "\u0068":_cea .closePath ();case "\u0072\u0065":if len (_dgb .Params )!=4{return _ce ;};_gfa ,_dbbg :=_cb .GetNumbersAsFloat (_dgb .Params );if _dbbg !=nil {return _dbbg ;};_cea .drawRectangle (_gfa [0],_gfa [1],_gfa [2],_gfa [3]);_cea .closePath ();
case "\u0053":_cea .stroke (&_ggb ._edff );_cea .clearPath ();case "\u0073":_cea .closePath ();_cea .stroke (&_ggb ._edff );_cea .clearPath ();case "\u0046":_cea .fill (&_ggb ._ebeb );_cea .clearPath ();case "\u0066","\u0066\u002a":_cea .closePath ();_cea .fill (&_ggb ._ebeb );
_cea .clearPath ();case "\u0042","\u0042\u002a":_cea .fill (&_ggb ._ebeb );_cea .stroke (&_ggb ._edff );_cea .clearPath ();case "\u0062","\u0062\u002a":_cea .closePath ();_cea .fill (&_ggb ._ebeb );_cea .stroke (&_ggb ._edff );_cea .clearPath ();case "\u006e":_cea .clearPath ();
case "\u0044\u006f":if len (_dgb .Params )==0{_ae .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0058\u004fbj\u0065c\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006f\u0070\u0065\u0072\u0061n\u0064\u0020\u0066\u006f\u0072\u0020\u0044\u006f\u0020\u006f\u0070\u0065\u0072\u0061\u0074\u006f\u0072.\u0020\u0047\u006f\u0074\u0020\u0025\u002b\u0076\u002e",_dgb .Params );
return _cb .ErrRangeError ;};_bdcge ,_gbdg :=_cb .GetName (_dgb .Params [0]);if !_gbdg {_ae .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0044\u006f\u0020\u006f\u0070e\u0072a\u0074\u006f\u0072\u0020\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006fp\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u002b\u0076\u002e",_dgb .Params [0]);
return _cb .ErrTypeError ;};_ ,_agefe :=_bge .GetXObjectByName (*_bdcge );if _agefe !=_fa .XObjectTypeForm {break ;};_bdbd ,_gbdg :=_bde ._ec [_bdcge .String ()];if !_gbdg {_gadc ,_bed :=_bge .GetXObjectFormByName (*_bdcge );if _bed !=nil {_ae .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_bed );
return _bed ;};_cec ,_bed :=_gadc .GetContentStream ();if _bed !=nil {_ae .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_bed );return _bed ;};_afd :=_gadc .Resources ;if _afd ==nil {_afd =_bge ;};_geg ,_cefd ,_dfc ,_bed :=_bde .extractPageText (string (_cec ),_afd ,_bdcg .Mult (_agg .CTM ),_cdd +1);
if _bed !=nil {_ae .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_bed );return _bed ;};_bdbd =textResult {*_geg ,_cefd ,_dfc };_bde ._ec [_bdcge .String ()]=_bdbd ;};_cea ._afef =_agg .CTM ;if _fdef {_ae .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_cea ._afef );
};_ggb ._fde =append (_ggb ._fde ,_bdbd ._fcag ._fde ...);_ggb ._edff =append (_ggb ._edff ,_bdbd ._fcag ._edff ...);_ggb ._ebeb =append (_ggb ._ebeb ,_bdbd ._fcag ._ebeb ...);_aab ._abea +=_bdbd ._febb ;_aab ._fcc +=_bdbd ._dffc ;case "\u0072\u0067","\u0067","\u006b","\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_dgc ._bbfd .ColorspaceNonStroking =_agg .ColorspaceNonStroking ;
_dgc ._bbfd .ColorNonStroking =_agg .ColorNonStroking ;case "\u0052\u0047","\u0047","\u004b","\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_dgc ._bbfd .ColorspaceStroking =_agg .ColorspaceStroking ;_dgc ._bbfd .ColorStroking =_agg .ColorStroking ;
};return nil ;});_cdde =_egfg .Process (_gada );return _ggb ,_aab ._abea ,_aab ._fcc ,_cdde ;};func (_gceg *textObject )setTextRise (_bfeg float64 ){if _gceg ==nil {return ;};_gceg ._ddc ._baed =_bfeg ;};func (_eefeb *textObject )getFontDirect (_cbb string )(*_fa .PdfFont ,error ){_fcce ,_geb :=_eefeb .getFontDict (_cbb );
if _geb !=nil {return nil ,_geb ;};_begf ,_geb :=_fa .NewPdfFontFromPdfObject (_fcce );if _geb !=nil {_ae .Log .Debug ("\u0067\u0065\u0074\u0046\u006f\u006e\u0074\u0044\u0069\u0072\u0065\u0063\u0074\u003a\u0020\u004e\u0065\u0077Pd\u0066F\u006f\u006e\u0074\u0046\u0072\u006f\u006d\u0050\u0064\u0066\u004f\u0062j\u0065\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u006e\u0061\u006d\u0065\u003d%\u0023\u0071\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cbb ,_geb );
};return _begf ,_geb ;};func _aedbf (_ggad float64 )float64 {return _ccabb *_de .Round (_ggad /_ccabb )};func (_bfgb *textTable )compositeRowCorridors ()map[int ][]float64 {_gbab :=make (map[int ][]float64 ,_bfgb ._egcge );if _dcfc {_ae .Log .Info ("c\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0052\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073:\u0020h\u003d\u0025\u0064",_bfgb ._egcge );
};for _gebg :=1;_gebg < _bfgb ._egcge ;_gebg ++{var _ccfg []compositeCell ;for _efee :=0;_efee < _bfgb ._aecda ;_efee ++{if _cdabb ,_abbdf :=_bfgb ._agdc [_babg (_efee ,_gebg )];_abbdf {_ccfg =append (_ccfg ,_cdabb );};};if len (_ccfg )==0{continue ;};
_bdgbb :=_cdbb (_ccfg );_gbab [_gebg ]=_bdgbb ;if _dcfc {_ded .Printf ("\u0020\u0020\u0020\u0025\u0032\u0064\u003a\u0020\u00256\u002e\u0032\u0066\u000a",_gebg ,_bdgbb );};};return _gbab ;};func _ceg (_ccb []Font ,_ef string )bool {for _ ,_ffa :=range _ccb {if _ffa .FontName ==_ef {return true ;
};};return false ;};func (_cagg *textTable )logComposite (_fddea string ){if !_dcfc {return ;};_ae .Log .Info ("\u007e~\u007eP\u0061\u0072\u0061\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_cagg ._aecda ,_cagg ._egcge ,_fddea );_ded .Printf ("\u0025\u0035\u0073 \u007c","");
for _fbdaf :=0;_fbdaf < _cagg ._aecda ;_fbdaf ++{_ded .Printf ("\u0025\u0033\u0064 \u007c",_fbdaf );};_ded .Println ("");_ded .Printf ("\u0025\u0035\u0073 \u002b","");for _cdgg :=0;_cdgg < _cagg ._aecda ;_cdgg ++{_ded .Printf ("\u0025\u0033\u0073 \u002b","\u002d\u002d\u002d");
};_ded .Println ("");for _daagf :=0;_daagf < _cagg ._egcge ;_daagf ++{_ded .Printf ("\u0025\u0035\u0064 \u007c",_daagf );for _cccfa :=0;_cccfa < _cagg ._aecda ;_cccfa ++{_ggfb ,_ :=_cagg ._agdc [_babg (_cccfa ,_daagf )].parasBBox ();_ded .Printf ("\u0025\u0033\u0064 \u007c",len (_ggfb ));
};_ded .Println ("");};_ae .Log .Info ("\u007e~\u007eT\u0065\u0078\u0074\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_cagg ._aecda ,_cagg ._egcge ,_fddea );_ded .Printf ("\u0025\u0035\u0073 \u007c","");for _efcef :=0;_efcef < _cagg ._aecda ;
_efcef ++{_ded .Printf ("\u0025\u0031\u0032\u0064\u0020\u007c",_efcef );};_ded .Println ("");_ded .Printf ("\u0025\u0035\u0073 \u002b","");for _gaacg :=0;_gaacg < _cagg ._aecda ;_gaacg ++{_ded .Print ("\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d-\u002d\u002d\u002d\u002b");
};_ded .Println ("");for _ebgg :=0;_ebgg < _cagg ._egcge ;_ebgg ++{_ded .Printf ("\u0025\u0035\u0064 \u007c",_ebgg );for _ededb :=0;_ededb < _cagg ._aecda ;_ededb ++{_eedg ,_ :=_cagg ._agdc [_babg (_ededb ,_ebgg )].parasBBox ();_bfca :="";_fgdfg :=_eedg .merge ();
if _fgdfg !=nil {_bfca =_fgdfg .text ();};_bfca =_ded .Sprintf ("\u0025\u0071",_efac (_bfca ,12));_bfca =_bfca [1:len (_bfca )-1];_ded .Printf ("\u0025\u0031\u0032\u0073\u0020\u007c",_bfca );};_ded .Println ("");};};func (_gdec rulingList )mergePrimary ()float64 {_bdda :=_gdec [0]._dade ;
for _ ,_ffee :=range _gdec [1:]{_bdda +=_ffee ._dade ;};return _bdda /float64 (len (_gdec ));};func (_gabg rulingList )primMinMax ()(float64 ,float64 ){_cadae ,_cdgc :=_gabg [0]._dade ,_gabg [0]._dade ;for _ ,_fdde :=range _gabg [1:]{if _fdde ._dade < _cadae {_cadae =_fdde ._dade ;
}else if _fdde ._dade > _cdgc {_cdgc =_fdde ._dade ;};};return _cadae ,_cdgc ;};func (_egaf *wordBag )makeRemovals ()map[int ]map[*textWord ]struct{}{_cebg :=make (map[int ]map[*textWord ]struct{},len (_egaf ._cfe ));for _bcdd :=range _egaf ._cfe {_cebg [_bcdd ]=make (map[*textWord ]struct{});
};return _cebg ;};func (_dbdd gridTile )complete ()bool {return _dbdd .numBorders ()==4};func _geaag (_dafe []*textMark ,_ddcgb _fa .PdfRectangle )*textWord {_ddcdf :=_dafe [0].PdfRectangle ;_adfgb :=_dafe [0]._eafd ;for _ ,_feag :=range _dafe [1:]{_ddcdf =_deab (_ddcdf ,_feag .PdfRectangle );
if _feag ._eafd > _adfgb {_adfgb =_feag ._eafd ;};};return &textWord {PdfRectangle :_ddcdf ,_dded :_dafe ,_ecdaa :_ddcgb .Ury -_ddcdf .Lly ,_ddffg :_adfgb };};func _gfee (_aafd int ,_fdega map[int ][]float64 )([]int ,int ){_cggda :=make ([]int ,_aafd );
_gdbc :=0;for _baee :=0;_baee < _aafd ;_baee ++{_cggda [_baee ]=_gdbc ;_gdbc +=len (_fdega [_baee ])+1;};return _cggda ,_gdbc ;};func _cegg (_afb _ge .Point )_ge .Matrix {return _ge .TranslationMatrix (_afb .X ,_afb .Y )};func (_cafdc *textTable )reduce ()*textTable {_dbfff :=make ([]int ,0,_cafdc ._egcge );
_abcdc :=make ([]int ,0,_cafdc ._aecda );for _egdb :=0;_egdb < _cafdc ._egcge ;_egdb ++{if !_cafdc .emptyCompositeRow (_egdb ){_dbfff =append (_dbfff ,_egdb );};};for _daag :=0;_daag < _cafdc ._aecda ;_daag ++{if !_cafdc .emptyCompositeColumn (_daag ){_abcdc =append (_abcdc ,_daag );
};};if len (_dbfff )==_cafdc ._egcge &&len (_abcdc )==_cafdc ._aecda {return _cafdc ;};_fabe :=textTable {_eecbc :_cafdc ._eecbc ,_aecda :len (_abcdc ),_egcge :len (_dbfff ),_bbbb :make (map[uint64 ]*textPara ,len (_abcdc )*len (_dbfff ))};if _dcfc {_ae .Log .Info ("\u0072\u0065\u0064\u0075ce\u003a\u0020\u0025\u0064\u0078\u0025\u0064\u0020\u002d\u003e\u0020\u0025\u0064\u0078%\u0064",_cafdc ._aecda ,_cafdc ._egcge ,len (_abcdc ),len (_dbfff ));
_ae .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_abcdc );_ae .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_dbfff );};for _fgeg ,_fdefg :=range _dbfff {for _baage ,_ggfdc :=range _abcdc {_fgbdg ,_fcdbb :=_cafdc .getComposite (_ggfdc ,_fdefg );
if _fgbdg ==nil {continue ;};if _dcfc {_ded .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_baage ,_fgeg ,_ggfdc ,_fdefg ,_efac (_fgbdg .merge ().text (),50));};_fabe .putComposite (_baage ,_fgeg ,_fgbdg ,_fcdbb );
};};return &_fabe ;};func (_fac *textObject )getFillColor ()_c .Color {return _bcbbd (_fac ._bbfd .ColorspaceNonStroking ,_fac ._bbfd .ColorNonStroking );};func _fga (_gfde func (*wordBag ,*textWord ,float64 )bool ,_gccb float64 )func (*wordBag ,*textWord )bool {return func (_cefbg *wordBag ,_fdff *textWord )bool {return _gfde (_cefbg ,_fdff ,_gccb )};
};func (_gec *textObject )setTextLeading (_gefe float64 ){if _gec ==nil {return ;};_gec ._ddc ._ffc =_gefe ;};func _edc (_edffd float64 ,_gcba int )int {if _gcba ==0{_gcba =1;};_efdeb :=float64 (_gcba );return int (_de .Round (_edffd /_efdeb )*_efdeb );
};func (_ggfg *textWord )absorb (_eabe *textWord ){_ggfg .PdfRectangle =_deab (_ggfg .PdfRectangle ,_eabe .PdfRectangle );_ggfg ._dded =append (_ggfg ._dded ,_eabe ._dded ...);};type imageExtractContext struct{_bfa []ImageMark ;_cegf int ;_bag int ;_cee int ;
_cf map[*_cb .PdfObjectStream ]*cachedImage ;_deda *ImageExtractOptions ;};

// ExtractText processes and extracts all text data in content streams and returns as a string.
// It takes into account character encodings in the PDF file, which are decoded by
// CharcodeBytesToUnicode.
// Characters that can't be decoded are replaced with MissingCodeRune ('\ufffd' = ).
func (_egcg *Extractor )ExtractText ()(string ,error ){_beb ,_ ,_ ,_fca :=_egcg .ExtractTextWithStats ();return _beb ,_fca ;};func (_cdca paraList )applyTables (_aefed []*textTable )paraList {var _begeb paraList ;for _ ,_dcba :=range _aefed {_begeb =append (_begeb ,_dcba .newTablePara ());
};for _ ,_gdbgfd :=range _cdca {if _gdbgfd ._efff {continue ;};_begeb =append (_begeb ,_gdbgfd );};return _begeb ;};type fontEntry struct{_fdgb *_fa .PdfFont ;_adde int64 ;};

// ExtractPageImages returns the image contents of the page extractor, including data
// and position, size information for each image.
// A set of options to control page image extraction can be passed in. The options
// parameter can be nil for the default options. By default, inline stencil masks
// are not extracted.
func (_dbe *Extractor )ExtractPageImages (options *ImageExtractOptions )(*PageImages ,error ){_bae :=&imageExtractContext {_deda :options };_cd :=_bae .extractContentStreamImages (_dbe ._fc ,_dbe ._dedg );if _cd !=nil {return nil ,_cd ;};return &PageImages {Images :_bae ._bfa },nil ;
};func (_ege *wordBag )allWords ()[]*textWord {var _aebe []*textWord ;for _ ,_dgde :=range _ege ._cfe {_aebe =append (_aebe ,_dgde ...);};return _aebe ;};func _ega (_baeg _ge .Point )*subpath {return &subpath {_afdb :[]_ge .Point {_baeg }}};

// BBox returns the smallest axis-aligned rectangle that encloses all the TextMarks in `ma`.
func (_fcfgg *TextMarkArray )BBox ()(_fa .PdfRectangle ,bool ){var _aeb _fa .PdfRectangle ;_gaea :=false ;for _ ,_afbf :=range _fcfgg ._dfgf {if _afbf .Meta ||_cdcfc (_afbf .Text ){continue ;};if _gaea {_aeb =_deab (_aeb ,_afbf .BBox );}else {_aeb =_afbf .BBox ;
_gaea =true ;};};return _aeb ,_gaea ;};

// TableCell is a cell in a TextTable.
type TableCell struct{

// Text is the extracted text.
Text string ;

// Marks returns the TextMarks corresponding to the text in Text.
Marks TextMarkArray ;};func (_acda *wordBag )blocked (_gbef *textWord )bool {if _gbef .Urx < _acda .Llx {_dbdcf :=_ebfgg (_gbef .PdfRectangle );_fcaa :=_ffabe (_acda .PdfRectangle );if _acda ._dgaga .blocks (_dbdcf ,_fcaa ){if _abgg {_ae .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0078\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_gbef ,_acda );
};return true ;};}else if _acda .Urx < _gbef .Llx {_bfgd :=_ebfgg (_acda .PdfRectangle );_gff :=_ffabe (_gbef .PdfRectangle );if _acda ._dgaga .blocks (_bfgd ,_gff ){if _abgg {_ae .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0078\u2192\u0020:\u0020\u0025\u0073\u0020%s",_gbef ,_acda );
};return true ;};};if _gbef .Ury < _acda .Lly {_ebc :=_bfege (_gbef .PdfRectangle );_fabb :=_fcee (_acda .PdfRectangle );if _acda ._bdbca .blocks (_ebc ,_fabb ){if _abgg {_ae .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0079\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_gbef ,_acda );
};return true ;};}else if _acda .Ury < _gbef .Lly {_ebab :=_bfege (_acda .PdfRectangle );_geaf :=_fcee (_gbef .PdfRectangle );if _acda ._bdbca .blocks (_ebab ,_geaf ){if _abgg {_ae .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0079\u2192\u0020:\u0020\u0025\u0073\u0020%s",_gbef ,_acda );
};return true ;};};return false ;};func (_cac *shapesState )drawRectangle (_gcegg ,_dfce ,_gbfc ,_ddec float64 ){if _fdef {_cgedb :=_cac .devicePoint (_gcegg ,_dfce );_ede :=_cac .devicePoint (_gcegg +_gbfc ,_dfce +_ddec );_aeac :=_fa .PdfRectangle {Llx :_cgedb .X ,Lly :_cgedb .Y ,Urx :_ede .X ,Ury :_ede .Y };
_ae .Log .Info ("d\u0072a\u0077\u0052\u0065\u0063\u0074\u0061\u006e\u0067l\u0065\u003a\u0020\u00256.\u0032\u0066",_aeac );};_cac .newSubPath ();_cac .moveTo (_gcegg ,_dfce );_cac .lineTo (_gcegg +_gbfc ,_dfce );_cac .lineTo (_gcegg +_gbfc ,_dfce +_ddec );
_cac .lineTo (_gcegg ,_dfce +_ddec );_cac .closePath ();};func (_ecd *textObject )moveLP (_egfb ,_cedf float64 ){_ecd ._ceff .Concat (_ge .NewMatrix (1,0,0,1,_egfb ,_cedf ));_ecd ._abd =_ecd ._ceff ;};func (_gfab *textLine )markWordBoundaries (){_gbad :=_adfbf *_gfab ._afca ;
for _aabbac ,_ebce :=range _gfab ._afbd [1:]{if _edda (_ebce ,_gfab ._afbd [_aabbac ])>=_gbad {_ebce ._aegg =true ;};};};func (_bagbd rulingList )tidied (_dgec string )rulingList {_ebcaf :=_bagbd .removeDuplicates ();_ebcaf .log ("\u0075n\u0069\u0071\u0075\u0065\u0073");
_dfbb :=_ebcaf .snapToGroups ();if _dfbb ==nil {return nil ;};_dfbb .sort ();if _cddgc {_ae .Log .Info ("\u0074\u0069\u0064i\u0065\u0064\u003a\u0020\u0025\u0071\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u0075\u006e\u0069\u0071\u0075\u0065\u0073\u003d\u0025\u0064\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0064\u003d\u0025\u0064",_dgec ,len (_bagbd ),len (_ebcaf ),len (_dfbb ));
};_dfbb .log ("\u0063o\u0061\u006c\u0065\u0073\u0063\u0065d");return _dfbb ;};func (_fdabd *textTable )computeBbox ()_fa .PdfRectangle {var _gbgc _fa .PdfRectangle ;_dbeb :=false ;for _gaadg :=0;_gaadg < _fdabd ._egcge ;_gaadg ++{for _fceef :=0;_fceef < _fdabd ._aecda ;
_fceef ++{_gdedf :=_fdabd .get (_fceef ,_gaadg );if _gdedf ==nil {continue ;};if !_dbeb {_gbgc =_gdedf .PdfRectangle ;_dbeb =true ;}else {_gbgc =_deab (_gbgc ,_gdedf .PdfRectangle );};};};return _gbgc ;};func _deee (_afbb ,_ffg _fa .PdfRectangle )bool {return _afbb .Llx <=_ffg .Llx &&_ffg .Urx <=_afbb .Urx &&_afbb .Lly <=_ffg .Lly &&_ffg .Ury <=_afbb .Ury ;
};func (_bffa *textTable )depth ()float64 {_ddef :=1e10;for _gcdga :=0;_gcdga < _bffa ._aecda ;_gcdga ++{_abaeg :=_bffa .get (_gcdga ,0);if _abaeg ==nil ||_abaeg ._fdbaa {continue ;};_ddef =_de .Min (_ddef ,_abaeg .depth ());};return _ddef ;};func (_egbg rulingList )findPrimSec (_aagg ,_cedag float64 )*ruling {for _ ,_fgbg :=range _egbg {if _bggba (_fgbg ._dade -_aagg )&&_fgbg ._bggda -_gecg <=_cedag &&_cedag <=_fgbg ._aed +_gecg {return _fgbg ;
};};return nil ;};func _ebac (_dgge int ,_cgcb func (int ,int )bool )[]int {_dcefe :=make ([]int ,_dgge );for _agcff :=range _dcefe {_dcefe [_agcff ]=_agcff ;};_ff .Slice (_dcefe ,func (_deaf ,_ddfe int )bool {return _cgcb (_dcefe [_deaf ],_dcefe [_ddfe ])});
return _dcefe ;};

// String returns a string descibing `i`.
func (_gcde gridTile )String ()string {_agce :=func (_faed bool ,_efaa string )string {if _faed {return _efaa ;};return "\u005f";};return _ded .Sprintf ("\u00256\u002e2\u0066\u0020\u0025\u0031\u0073%\u0031\u0073%\u0031\u0073\u0025\u0031\u0073",_gcde .PdfRectangle ,_agce (_gcde ._acef ,"\u004c"),_agce (_gcde ._cade ,"\u0052"),_agce (_gcde ._cgff ,"\u0042"),_agce (_gcde ._ggcd ,"\u0054"));
};func (_bgccg paraList )eventNeighbours (_bgad []event )map[*textPara ][]int {_ff .Slice (_bgad ,func (_cdag ,_fdaba int )bool {_gaeeb ,_dcgda :=_bgad [_cdag ],_bgad [_fdaba ];_bbcb ,_cdbe :=_gaeeb ._fbfe ,_dcgda ._fbfe ;if _bbcb !=_cdbe {return _bbcb < _cdbe ;
};if _gaeeb ._aedbfg !=_dcgda ._aedbfg {return _gaeeb ._aedbfg ;};return _cdag < _fdaba ;});_edad :=make (map[int ]intSet );_caaac :=make (intSet );for _ ,_aebad :=range _bgad {if _aebad ._aedbfg {_edad [_aebad ._defge ]=make (intSet );for _edagb :=range _caaac {if _edagb !=_aebad ._defge {_edad [_aebad ._defge ].add (_edagb );
_edad [_edagb ].add (_aebad ._defge );};};_caaac .add (_aebad ._defge );}else {_caaac .del (_aebad ._defge );};};_ccfd :=map[*textPara ][]int {};for _ebebc ,_cege :=range _edad {_dbdde :=_bgccg [_ebebc ];if len (_cege )==0{_ccfd [_dbdde ]=nil ;continue ;
};_abbb :=make ([]int ,len (_cege ));_bgccf :=0;for _ebbcb :=range _cege {_abbb [_bgccf ]=_ebbcb ;_bgccf ++;};_ccfd [_dbdde ]=_abbb ;};return _ccfd ;};func (_agdd lineRuling )xMean ()float64 {return 0.5*(_agdd ._afag .X +_agdd ._deeb .X )};func _bcbc (_gfded ,_edfag _ge .Point )bool {return _gfded .X ==_edfag .X &&_gfded .Y ==_edfag .Y };
func (_eag *wordBag )getDepthIdx (_ecfg float64 )int {_ddfd :=_eag .depthIndexes ();_ffca :=_gcga (_ecfg );if _ffca < _ddfd [0]{return _ddfd [0];};if _ffca > _ddfd [len (_ddfd )-1]{return _ddfd [len (_ddfd )-1];};return _ffca ;};func _ageg (_agcg ,_fcdc _ge .Point )rulingKind {_dbec :=_de .Abs (_agcg .X -_fcdc .X );
_agfbg :=_de .Abs (_agcg .Y -_fcdc .Y );return _gccbb (_dbec ,_agfbg ,_egccb );};func _dcbb (_fgc ,_edbf bounded )float64 {_caef :=_faeg (_fgc ,_edbf );if !_bggba (_caef ){return _caef ;};return _eddg (_fgc ,_edbf );};func _gfdbd (_aafc *wordBag ,_fagg int )*textLine {_gfbd :=_aafc .firstWord (_fagg );
_cedgc :=textLine {PdfRectangle :_gfbd .PdfRectangle ,_afca :_gfbd ._ddffg ,_ccca :_gfbd ._ecdaa };_cedgc .pullWord (_aafc ,_gfbd ,_fagg );return &_cedgc ;};func (_bgdc paraList )extractTables (_gggc []gridTiling )paraList {if _dcfc {_ae .Log .Debug ("\u0065\u0078\u0074r\u0061\u0063\u0074\u0054\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_bgdc ));
};if len (_bgdc )< _fgbd {return _bgdc ;};_beaa :=_bgdc .findTables (_gggc );if _dcfc {_ae .Log .Info ("c\u006f\u006d\u0062\u0069\u006e\u0065d\u0020\u0074\u0061\u0062\u006c\u0065s\u0020\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_beaa ));
for _ccdf ,_fdfef :=range _beaa {_fdfef .log (_ded .Sprintf ("c\u006f\u006d\u0062\u0069\u006e\u0065\u0064\u0020\u0025\u0064",_ccdf ));};};return _bgdc .applyTables (_beaa );};type textWord struct{_fa .PdfRectangle ;_ecdaa float64 ;_gcead string ;_dded []*textMark ;
_ddffg float64 ;_aegg bool ;};func (_gbcf *subpath )isQuadrilateral ()bool {if len (_gbcf ._afdb )< 4||len (_gbcf ._afdb )> 5{return false ;};if len (_gbcf ._afdb )==5{_aabf :=_gbcf ._afdb [0];_agae :=_gbcf ._afdb [4];if _aabf .X !=_agae .X ||_aabf .Y !=_agae .Y {return false ;
};};return true ;};func (_dcgd rulingList )bbox ()_fa .PdfRectangle {var _ecac _fa .PdfRectangle ;if len (_dcgd )==0{_ae .Log .Error ("r\u0075\u006c\u0069\u006e\u0067\u004ci\u0073\u0074\u002e\u0062\u0062\u006f\u0078\u003a\u0020n\u006f\u0020\u0072u\u006ci\u006e\u0067\u0073");
return _fa .PdfRectangle {};};if _dcgd [0]._gagfc ==_fbde {_ecac .Llx ,_ecac .Urx =_dcgd .secMinMax ();_ecac .Lly ,_ecac .Ury =_dcgd .primMinMax ();}else {_ecac .Llx ,_ecac .Urx =_dcgd .primMinMax ();_ecac .Lly ,_ecac .Ury =_dcgd .secMinMax ();};return _ecac ;
};

// Text returns the extracted page text.
func (_gaff PageText )Text ()string {return _gaff ._adc };func _abagb (_dfcf *_aef .ContentStreamOperation )(float64 ,error ){if len (_dfcf .Params )!=1{_egg :=_g .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");
_ae .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_dfcf .Operand ,1,len (_dfcf .Params ),_dfcf .Params );
return 0.0,_egg ;};return _cb .GetNumberAsFloat (_dfcf .Params [0]);};func (_fgde paraList )llyRange (_ddeca []int ,_adgg ,_ccfe float64 )[]int {_afaa :=len (_fgde );if _ccfe < _fgde [_ddeca [0]].Lly ||_adgg > _fgde [_ddeca [_afaa -1]].Lly {return nil ;
};_aga :=_ff .Search (_afaa ,func (_aaef int )bool {return _fgde [_ddeca [_aaef ]].Lly >=_adgg });_cgbcd :=_ff .Search (_afaa ,func (_efga int )bool {return _fgde [_ddeca [_efga ]].Lly > _ccfe });return _ddeca [_aga :_cgbcd ];};

// TextMarkArray is a collection of TextMarks.
type TextMarkArray struct{_dfgf []TextMark };func (_ecf *textObject )moveText (_gage ,_eeb float64 ){_ecf .moveLP (_gage ,_eeb )};

// NewFromContents creates a new extractor from contents and page resources.
func NewFromContents (contents string ,resources *_fa .PdfPageResources )(*Extractor ,error ){const _edd ="\u0065x\u0074\u0072\u0061\u0063t\u006f\u0072\u002e\u004e\u0065w\u0046r\u006fm\u0043\u006f\u006e\u0074\u0065\u006e\u0074s";_ad :=&Extractor {_fc :contents ,_dedg :resources ,_aa :map[string ]fontEntry {},_ec :map[string ]textResult {}};
_cbf .TrackUse (_edd );return _ad ,nil ;};func (_bagbb *textLine )endsInHyphen ()bool {_afbda :=_bagbb ._afbd [len (_bagbb ._afbd )-1];_bbdb :=_afbda ._gcead ;_gece ,_cfbf :=_e .DecodeLastRuneInString (_bbdb );if _cfbf <=0||!_gc .Is (_gc .Hyphen ,_gece ){return false ;
};if _afbda ._aegg &&_gegg (_bbdb ){return true ;};return _gegg (_bagbb .text ());};

// String returns a description of `l`.
func (_cebca *textLine )String ()string {return _ded .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_cebca ._ccca ,_cebca .PdfRectangle ,_cebca ._afca ,_cebca .text ());
};func (_efd *textObject )nextLine (){_efd .moveLP (0,-_efd ._ddc ._ffc )};func (_dee *textObject )getFontDict (_gfea string )(_ffcb _cb .PdfObject ,_cccf error ){_dga :=_dee ._eea ;if _dga ==nil {_ae .Log .Debug ("g\u0065\u0074\u0046\u006f\u006e\u0074D\u0069\u0063\u0074\u002e\u0020\u004eo\u0020\u0072\u0065\u0073\u006f\u0075\u0072c\u0065\u0073\u002e\u0020\u006e\u0061\u006d\u0065\u003d\u0025#\u0071",_gfea );
return nil ,nil ;};_ffcb ,_cdac :=_dga .GetFontByName (_cb .PdfObjectName (_gfea ));if !_cdac {_ae .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0067\u0065t\u0046\u006f\u006et\u0044\u0069\u0063\u0074\u003a\u0020\u0046\u006f\u006et \u006e\u006f\u0074 \u0066\u006fu\u006e\u0064\u003a\u0020\u006e\u0061m\u0065\u003d%\u0023\u0071",_gfea );
return nil ,_g .New ("f\u006f\u006e\u0074\u0020no\u0074 \u0069\u006e\u0020\u0072\u0065s\u006f\u0075\u0072\u0063\u0065\u0073");};return _ffcb ,nil ;};func _cdcfc (_fccba string )bool {for _ ,_gbgb :=range _fccba {if !_gc .IsSpace (_gbgb ){return false ;
};};return true ;};

// ToText returns the page text as a single string.
// Deprecated: This function is deprecated and will be removed in a future major version. Please use
// Text() instead.
func (_eeg PageText )ToText ()string {return _eeg .Text ()};

// ExtractFonts returns all font information from the page extractor, including
// font name, font type, the raw data of the embedded font file (if embedded), font descriptor and more.
//
// The argument `previousPageFonts` is used when trying to build a complete font catalog for multiple pages or the entire document.
// The entries from `previousPageFonts` are added to the returned result unless already included in the page, i.e. no duplicate entries.
//
// NOTE: If previousPageFonts is nil, all fonts from the page will be returned. Use it when building up a full list of fonts for a document or page range.
func (_bg *Extractor )ExtractFonts (previousPageFonts *PageFonts )(*PageFonts ,error ){_gb :=PageFonts {};_gd :=_gb .extractPageResourcesToFont (_bg ._dedg );if _gd !=nil {return nil ,_gd ;};if previousPageFonts !=nil {for _ ,_faa :=range previousPageFonts .Fonts {if !_ceg (_gb .Fonts ,_faa .FontName ){_gb .Fonts =append (_gb .Fonts ,_faa );
};};};return &PageFonts {Fonts :_gb .Fonts },nil ;};func _cgde (_abcef ,_gaegg float64 )bool {return _abcef /_de .Max (_egb ,_gaegg )< _ffdb };func (_agdf *textPara )taken ()bool {return _agdf ==nil ||_agdf ._efff };

// RangeOffset returns the TextMarks in `ma` that overlap text[start:end] in the extracted text.
// These are tm: `start` <= tm.Offset + len(tm.Text) && tm.Offset < `end` where
// `start` and `end` are offsets in the extracted text.
// NOTE: TextMarks can contain multiple characters. e.g. "ffi" for the  ligature so the first and
// last elements of the returned TextMarkArray may only partially overlap text[start:end].
func (_fded *TextMarkArray )RangeOffset (start ,end int )(*TextMarkArray ,error ){if _fded ==nil {return nil ,_g .New ("\u006da\u003d\u003d\u006e\u0069\u006c");};if end < start {return nil ,_ded .Errorf ("\u0065\u006e\u0064\u0020\u003c\u0020\u0073\u0074\u0061\u0072\u0074\u002e\u0020\u0052\u0061n\u0067\u0065\u004f\u0066\u0066\u0073\u0065\u0074\u0020\u006e\u006f\u0074\u0020d\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020\u0073\u0074\u0061\u0072t=\u0025\u0064\u0020\u0065\u006e\u0064\u003d\u0025\u0064\u0020",start ,end );
};_efe :=len (_fded ._dfgf );if _efe ==0{return _fded ,nil ;};if start < _fded ._dfgf [0].Offset {start =_fded ._dfgf [0].Offset ;};if end > _fded ._dfgf [_efe -1].Offset +1{end =_fded ._dfgf [_efe -1].Offset +1;};_dggg :=_ff .Search (_efe ,func (_baf int )bool {return _fded ._dfgf [_baf ].Offset +len (_fded ._dfgf [_baf ].Text )-1>=start });
if !(0<=_dggg &&_dggg < _efe ){_dcda :=_ded .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020\u0072\u0061\u006e\u0067\u0065\u002e\u0020\u0073\u0074\u0061\u0072\u0074\u003d%\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009 \u006c\u0061\u0073\u0074\u003d%\u0076",start ,_dggg ,_efe ,_fded ._dfgf [0],_fded ._dfgf [_efe -1]);
return nil ,_dcda ;};_ceef :=_ff .Search (_efe ,func (_bega int )bool {return _fded ._dfgf [_bega ].Offset > end -1});if !(0<=_ceef &&_ceef < _efe ){_afab :=_ded .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020r\u0061\u006e\u0067e\u002e\u0020\u0065n\u0064\u003d%\u0064\u0020\u0069\u0045\u006e\u0064=\u0025d \u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d\u0025\u0076",end ,_ceef ,_efe ,_fded ._dfgf [0],_fded ._dfgf [_efe -1]);
return nil ,_afab ;};if _ceef <=_dggg {return nil ,_ded .Errorf ("\u0069\u0045\u006e\u0064\u0020\u003c=\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003a\u0020\u0073\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u0065\u006ed\u003d\u0025\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020i\u0045n\u0064\u003d\u0025\u0064",start ,end ,_dggg ,_ceef );
};return &TextMarkArray {_dfgf :_fded ._dfgf [_dggg :_ceef ]},nil ;};