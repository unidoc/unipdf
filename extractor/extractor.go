//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package extractor is used for quickly extracting PDF content through a simple interface.
// Currently offers functionality for extracting textual content.
package extractor ;import (_ea "bytes";_g "errors";_fg "fmt";_a "github.com/unidoc/unipdf/v4/common";_cd "github.com/unidoc/unipdf/v4/contentstream";_bd "github.com/unidoc/unipdf/v4/core";_cde "github.com/unidoc/unipdf/v4/internal/license";_ega "github.com/unidoc/unipdf/v4/internal/textencoding";
_eac "github.com/unidoc/unipdf/v4/internal/transform";_dc "github.com/unidoc/unipdf/v4/model";_be "golang.org/x/image/draw";_eg "golang.org/x/text/unicode/norm";_eb "image";_df "image/color";_f "io";_b "math";_dbgf "reflect";_ed "regexp";_c "sort";_db "strings";
_dbg "unicode";_e "unicode/utf8";);func (_efab paraList )writeText (_decg _f .Writer ){for _afdef ,_ffbcg :=range _efab {if _ffbcg ._affde {continue ;};_ffbcg .writeText (_decg );if _afdef !=len (_efab )-1{if _ebcda (_ffbcg ,_efab [_afdef +1]){_decg .Write ([]byte ("\u0020"));
}else {_decg .Write ([]byte ("\u000a"));_decg .Write ([]byte ("\u000a"));};};};_decg .Write ([]byte ("\u000a"));_decg .Write ([]byte ("\u000a"));};func _defe (_cbfd byte )bool {for _ ,_gegda :=range _gaac {if []byte (_gegda )[0]==_cbfd {return true ;};
};return false ;};func _gddg (_decb []*textLine ,_bgfg map[float64 ][]*textLine ,_ffeb []float64 ,_cfaa int ,_eacd ,_cade float64 )[]*list {_afgb :=[]*list {};_aeac :=_cfaa ;_cfaa =_cfaa +1;_ebfa :=_ffeb [_aeac ];_eegf :=_bgfg [_ebfa ];_accag :=_bgefe (_eegf ,_cade ,_eacd );
for _cdbg ,_gefca :=range _accag {var _ffae float64 ;_bged :=[]*list {};_gebc :=_gefca ._ddgc ;_dfcec :=_cade ;if _cdbg < len (_accag )-1{_dfcec =_accag [_cdbg +1]._ddgc ;};if _cfaa < len (_ffeb ){_bged =_gddg (_decb ,_bgfg ,_ffeb ,_cfaa ,_gebc ,_dfcec );
};_ffae =_dfcec ;if len (_bged )> 0{_gbdd :=_bged [0];if len (_gbdd ._cfeee )> 0{_ffae =_gbdd ._cfeee [0]._ddgc ;};};_fgfba :=[]*textLine {_gefca };_fbfdd :=_cggdg (_gefca ,_decb ,_gebc ,_ffae );_fgfba =append (_fgfba ,_fbfdd ...);_cbgd :=_fcff (_fgfba ,"\u0062\u0075\u006c\u006c\u0065\u0074",_bged );
_cbgd ._cef =_gefb (_fgfba ,"");_afgb =append (_afgb ,_cbgd );};return _afgb ;};func _fgga (_bcde bounded )float64 {return -_bcde .bbox ().Lly };func (_dda *textObject )setTextMatrix (_bbbe []float64 ){if len (_bbbe )!=6{_a .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u006c\u0065\u006e\u0028\u0066\u0029\u0020\u0021\u003d\u0020\u0036\u0020\u0028\u0025\u0064\u0029",len (_bbbe ));
return ;};_ffcbb ,_dfcg ,_ggaa ,_agdgg ,_ffcd ,_edba :=_bbbe [0],_bbbe [1],_bbbe [2],_bbbe [3],_bbbe [4],_bbbe [5];_dda ._ddgbc =_eac .NewMatrix (_ffcbb ,_dfcg ,_ggaa ,_agdgg ,_ffcd ,_edba );_dda ._dcde =_dda ._ddgbc ;};func (_agef *textTable )isExportable ()bool {if _agef ._baead {return true ;
};_badb :=func (_fcefa int )bool {_bdfb :=_agef .get (0,_fcefa );if _bdfb ==nil {return false ;};_afefd :=_bdfb .text ();_cebc :=_e .RuneCountInString (_afefd );_fcgefa :=_fggd .MatchString (_afefd );return _cebc <=1||_fcgefa ;};for _caaeg :=0;_caaeg < _agef ._egfcf ;
_caaeg ++{if !_badb (_caaeg ){return true ;};};return false ;};func (_ffbcf paraList )log (_gdgg string ){if !_cffg {return ;};_a .Log .Info ("%\u0038\u0073\u003a\u0020\u0025\u0064 \u0070\u0061\u0072\u0061\u0073\u0020=\u003d\u003d\u003d\u003d\u003d\u003d\u002d-\u002d\u002d\u002d\u002d\u002d\u003d\u003d\u003d\u003d\u003d=\u003d",_gdgg ,len (_ffbcf ));
for _addfa ,_dagdc :=range _ffbcf {if _dagdc ==nil {continue ;};_eafdbb :=_dagdc .text ();_bcfeg :="\u0020\u0020";if _dagdc ._aece !=nil {_bcfeg =_fg .Sprintf ("\u005b%\u0064\u0078\u0025\u0064\u005d",_dagdc ._aece ._cged ,_dagdc ._aece ._egfcf );};_fg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0025s\u0020\u0025\u0071\u000a",_addfa ,_dagdc .PdfRectangle ,_bcfeg ,_geecd (_eafdbb ,50));
};};func (_gbbd lineRuling )yMean ()float64 {return 0.5*(_gbbd ._gcagg .Y +_gbbd ._gacc .Y )};

// ImageMark represents an image drawn on a page and its position in device coordinates.
// All coordinates are in device coordinates.
type ImageMark struct{Image *_dc .Image ;

// Dimensions of the image as displayed in the PDF.
Width float64 ;Height float64 ;

// Position of the image in PDF coordinates (lower left corner).
X float64 ;Y float64 ;

// Angle in degrees, if rotated.
Angle float64 ;};type fontEntry struct{_ebac *_dc .PdfFont ;_ebbf int64 ;};func (_fbfee *textPara )toCellTextMarks (_bgafc *int )[]TextMark {var _bbfdd []TextMark ;for _eaae ,_fgbdd :=range _fbfee ._babfe {_deda :=_fgbdd .toTextMarks (_bgafc );_acaa :=_cdeed &&_fgbdd .endsInHyphen ()&&_eaae !=len (_fbfee ._babfe )-1;
if _acaa {_deda =_addfg (_deda ,_bgafc );};_bbfdd =append (_bbfdd ,_deda ...);if !(_acaa ||_eaae ==len (_fbfee ._babfe )-1){_bbfdd =_eaggb (_bbfdd ,_bgafc ,_cfaf (_fgbdd ._ddgc ,_fbfee ._babfe [_eaae +1]._ddgc ));};};return _bbfdd ;};func (_fbc *imageExtractContext )extractFormImages (_baga *_bd .PdfObjectName ,_ff _cd .GraphicsState ,_adec *_dc .PdfPageResources )error {_fba ,_gacf :=_adec .GetXObjectFormByName (*_baga );
if _gacf !=nil {return _gacf ;};if _fba ==nil {return nil ;};_ddf ,_gacf :=_fba .GetContentStream ();if _gacf !=nil {return _gacf ;};_aafb :=_fba .Resources ;if _aafb ==nil {_aafb =_adec ;};_gacf =_fbc .extractContentStreamImages (string (_ddf ),_aafb );
if _gacf !=nil {return _gacf ;};_fbc ._dff ++;return nil ;};func _fdcg (_dabf ,_bcb _dc .PdfRectangle )(_dc .PdfRectangle ,bool ){if !_adge (_dabf ,_bcb ){return _dc .PdfRectangle {},false ;};return _dc .PdfRectangle {Llx :_b .Max (_dabf .Llx ,_bcb .Llx ),Urx :_b .Min (_dabf .Urx ,_bcb .Urx ),Lly :_b .Max (_dabf .Lly ,_bcb .Lly ),Ury :_b .Min (_dabf .Ury ,_bcb .Ury )},true ;
};

// PageImages represents extracted images on a PDF page with spatial information:
// display position and size.
type PageImages struct{Images []ImageMark ;};

// StrokePath is a stroked path.
type StrokePath struct{Points []_eac .Point ;_df .Color ;};func (_cdc *textObject )moveTextSetLeading (_fecc ,_gaee float64 ){_cdc ._gcfda ._deeb =-_gaee ;_cdc .moveLP (_fecc ,_gaee );};func _ffbba (_dbfcb float64 )bool {return _b .Abs (_dbfcb )< _gdeg };
type list struct{_cfeee []*textLine ;_fdda string ;_dbcfd []*list ;_cef string ;};

// New returns an Extractor instance for extracting content from the input PDF page.
func New (page *_dc .PdfPage )(*Extractor ,error ){return NewWithOptions (page ,nil )};func _dbcg (_dgbfd _dc .PdfRectangle ,_ggegf []*textLine )*textPara {return &textPara {PdfRectangle :_dgbfd ,_babfe :_ggegf };};func _aafd (_bdg []*TextMarkArray ,_bfcg ,_bbd string )(string ,error ){_bgcb :=0;
for _ ,_febb :=range _bdg {_dgbc :=_febb ._abfg [0].DirectObject ;if _dgbc ==nil {continue ;};_ged :=_dgbc .String ();if len (_ged )> 1{_dbac :=_gfc (_febb ,&_bfcg ,&_bgcb ,_bbd );if _dbac !=nil {return _bfcg ,_dbac ;};}else if len (_ged )==1{_fgc :=_bgd (_febb ,&_bfcg ,&_bgcb ,_bbd );
if _fgc !=nil {return _bfcg ,_fgc ;};};};return _bfcg ,nil ;};func (_egabf paraList )findTextTables ()[]*textTable {var _faaec []*textTable ;for _ ,_gedf :=range _egabf {if _gedf .taken ()||_gedf .Width ()==0{continue ;};_deade :=_gedf .isAtom ();if _deade ==nil {continue ;
};_deade .growTable ();if _deade ._cged *_deade ._egfcf < _bagb {continue ;};_deade .markCells ();_deade .log ("\u0067\u0072\u006fw\u006e");_faaec =append (_faaec ,_deade );};return _faaec ;};

// WriteToFile writes the edited content to `outputPath`.
func (_agfa *Editor )WriteToFile (outputPath string )error {_aed ,_cdbb :=_agfa ._gf .ToWriter (nil );if _cdbb !=nil {return _fg .Errorf ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0074\u006f\u0020c\u006f\u006e\u0076\u0065\u0072\u0074\u0020t\u006f\u0020\u0077\u0072\u0069\u0074\u0065\u0072\u0020\u0025\u0076",_cdbb );
};_aed .WriteToFile (outputPath );return nil ;};func _ad (_gc []string ,_bb int ,_dfg int ,_egb string ){for _bbe :=_bb ;_bbe < _dfg ;_bbe ++{_gc [_bbe ]=_egb ;};};type rectRuling struct{_geggg rulingKind ;_babbc markKind ;_df .Color ;_dc .PdfRectangle ;
};func (_acfb *stateStack )pop ()*textState {if _acfb .empty (){return nil ;};_gefcg :=*(*_acfb )[len (*_acfb )-1];*_acfb =(*_acfb )[:len (*_acfb )-1];return &_gefcg ;};func (_faac *textMark )bbox ()_dc .PdfRectangle {return _faac .PdfRectangle };func _gdb (_fgg *TextMarkArray )[]*TextMarkArray {_fac :=_fgg .Elements ();
_face :=len (_fac );var _cadf _bd .PdfObject ;_bgb :=[]*TextMarkArray {};_agfb :=&TextMarkArray {};_gbfg :=-1;for _acf ,_gbe :=range _fac {_cff :=_gbe .DirectObject ;_gbfg =_gbe .Index ;if _cff ==nil {_bbc :=_cbce (_fgg ,_acf );if _cadf !=nil {if _bbc ==-1||_bbc > _acf {_bgb =append (_bgb ,_agfb );
_agfb =&TextMarkArray {};};};}else if _cadf ==nil {if _gbfg ==0&&_acf > 0{_bgb =append (_bgb ,_agfb );_agfb =&TextMarkArray {};};}else {if _cff !=_cadf {_bgb =append (_bgb ,_agfb );_agfb =&TextMarkArray {};};};_cadf =_cff ;_agfb .Append (_gbe );if _acf ==(_face -1){_bgb =append (_bgb ,_agfb );
};};return _bgb ;};func (_dfef *textObject )setFont (_gced string ,_faceg float64 )error {if _dfef ==nil {return nil ;};_dfef ._gcfda ._ffbg =_faceg ;_dffb ,_gffg :=_dfef .getFont (_gced );if _gffg !=nil {return _gffg ;};_dfef ._gcfda ._deeag =_dffb ;return nil ;
};func (_bcef *shapesState )clearPath (){_bcef ._bdbb =nil ;_bcef ._fded =false ;if _bbbg {_a .Log .Info ("\u0043\u004c\u0045A\u0052\u003a\u0020\u0073\u0073\u003d\u0025\u0073",_bcef );};};

// Search searches the pages specified by `pages`.
func (_abf *Editor )Search (pattern string ,pages []int )(map[int ]Match ,error ){_ggee ,_ ,_gcc :=_abf .getMatches (pattern ,pages );return _ggee ,_gcc ;};

// String returns a human readable description of `s`.
func (_effaf intSet )String ()string {var _ggfbe []int ;for _bbfb :=range _effaf {if _effaf .has (_bbfb ){_ggfbe =append (_ggfbe ,_bbfb );};};_c .Ints (_ggfbe );return _fg .Sprintf ("\u0025\u002b\u0076",_ggfbe );};func _aegf (_afaad *paraList )map[int ][]*textLine {_baac :=map[int ][]*textLine {};
for _ ,_eggd :=range *_afaad {for _ ,_fabe :=range _eggd ._babfe {if !_geadc (_fabe ){_a .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_bdce :=_fabe ._egdbg [0]._egded [0]._eacg ;_baac [_bdce ]=append (_baac [_bdce ],_fabe );};if _eggd ._aece !=nil {_edcd :=_eggd ._aece ._ecdgfe ;for _ ,_gdcb :=range _edcd {for _ ,_gebg :=range _gdcb ._babfe {if !_geadc (_gebg ){_a .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_bcad :=_gebg ._egdbg [0]._egded [0]._eacg ;_baac [_bcad ]=append (_baac [_bcad ],_gebg );};};};};return _baac ;};func _gffb (_afee ,_egdc bounded )float64 {return _afee .bbox ().Llx -_egdc .bbox ().Urx };func _ceggb (_bgeb map[int ][]float64 ){if len (_bgeb )<=1{return ;
};_faaee :=_fegbg (_bgeb );if _bdcag {_a .Log .Info ("\u0066i\u0078C\u0065\u006c\u006c\u0073\u003a \u006b\u0065y\u0073\u003d\u0025\u002b\u0076",_faaee );};var _agdbb ,_ggege int ;for _agdbb ,_ggege =range _faaee {if _bgeb [_ggege ]!=nil {break ;};};for _aegg ,_aggce :=range _faaee [_agdbb :]{_ecde :=_bgeb [_aggce ];
if _ecde ==nil {continue ;};if _bdcag {_fg .Printf ("\u0025\u0034\u0064\u003a\u0020\u006b\u0030\u003d\u0025\u0064\u0020\u006b1\u003d\u0025\u0064\u000a",_agdbb +_aegg ,_ggege ,_aggce );};_bcdeb :=_bgeb [_aggce ];if _bcdeb [len (_bcdeb )-1]> _ecde [0]{_bcdeb [len (_bcdeb )-1]=_ecde [0];
_bgeb [_ggege ]=_bcdeb ;};_ggege =_aggce ;};};type lists []*list ;func _ddbfg (_ccggd []float64 ,_abfff ,_fbdbe float64 )[]float64 {_fbfc ,_aceg :=_abfff ,_fbdbe ;if _aceg < _fbfc {_fbfc ,_aceg =_aceg ,_fbfc ;};_cdfcc :=make ([]float64 ,0,len (_ccggd )+2);
_cdfcc =append (_cdfcc ,_abfff );for _ ,_dfdf :=range _ccggd {if _dfdf <=_fbfc {continue ;}else if _dfdf >=_aceg {break ;};_cdfcc =append (_cdfcc ,_dfdf );};_cdfcc =append (_cdfcc ,_fbdbe );return _cdfcc ;};func (_bggeg *textPara )depth ()float64 {if _bggeg ._affde {return -1.0;
};if len (_bggeg ._babfe )> 0{return _bggeg ._babfe [0]._ddgc ;};return _bggeg ._aece .depth ();};func (_bdafe *ruling )intersects (_adadb *ruling )bool {_eggaa :=(_bdafe ._bcdf ==_gacba &&_adadb ._bcdf ==_dafa )||(_adadb ._bcdf ==_gacba &&_bdafe ._bcdf ==_dafa );
_gfge :=func (_gbggb ,_bbdb *ruling )bool {return _gbggb ._fbab -_agaea <=_bbdb ._ddbf &&_bbdb ._ddbf <=_gbggb ._bgdd +_agaea ;};_dgbcf :=_gfge (_bdafe ,_adadb );_gedg :=_gfge (_adadb ,_bdafe );if _egfg {_fg .Printf ("\u0020\u0020\u0020\u0020\u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003a\u0020\u0020\u006fr\u0074\u0068\u006f\u0067\u006f\u006e\u0061l\u003d\u0025\u0074\u0020\u006f\u0031\u003d\u0025\u0074\u0020\u006f2\u003d\u0025\u0074\u0020\u2192\u0020\u0025\u0074\u000a"+"\u0020\u0020\u0020 \u0020\u0020\u0020\u0076\u003d\u0025\u0073\u000a"+" \u0020\u0020\u0020\u0020\u0020\u0077\u003d\u0025\u0073\u000a",_eggaa ,_dgbcf ,_gedg ,_eggaa &&_dgbcf &&_gedg ,_bdafe ,_adadb );
};return _eggaa &&_dgbcf &&_gedg ;};

// TextMarkArray is a collection of TextMarks.
type TextMarkArray struct{_abfg []TextMark };func _bbeea (_dged _dc .PdfRectangle )textState {return textState {_deeaf :100,_gbge :RenderModeFill ,_bfb :_dged };};func (_fcbd paraList )llyRange (_dbcbf []int ,_dfgcd ,_bbff float64 )[]int {_febbg :=len (_fcbd );
if _bbff < _fcbd [_dbcbf [0]].Lly ||_dfgcd > _fcbd [_dbcbf [_febbg -1]].Lly {return nil ;};_fgbc :=_c .Search (_febbg ,func (_ceeb int )bool {return _fcbd [_dbcbf [_ceeb ]].Lly >=_dfgcd });_ebfgb :=_c .Search (_febbg ,func (_adbg int )bool {return _fcbd [_dbcbf [_adbg ]].Lly > _bbff });
return _dbcbf [_fgbc :_ebfgb ];};func (_bfce *stateStack )top ()*textState {if _bfce .empty (){return nil ;};return (*_bfce )[_bfce .size ()-1];};

// String returns a description of `b`.
func (_dgfg *wordBag )String ()string {var _eggf []string ;for _ ,_cdee :=range _dgfg .depthIndexes (){_egde :=_dgfg ._cfag [_cdee ];for _ ,_ddag :=range _egde {_eggf =append (_eggf ,_ddag ._aegcb );};};return _fg .Sprintf ("\u0025.\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065=\u0025\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0025\u0071",_dgfg .PdfRectangle ,_dgfg ._bdgf ,len (_eggf ),_eggf );
};type ruling struct{_bcdf rulingKind ;_ddbb markKind ;_df .Color ;_ddbf float64 ;_fbab float64 ;_bgdd float64 ;_facc float64 ;};

// Tables returns the tables extracted from the page.
func (_ebab PageText )Tables ()[]TextTable {if _bdcag {_a .Log .Info ("\u0054\u0061\u0062\u006c\u0065\u0073\u003a\u0020\u0025\u0064",len (_ebab ._ecba ));};return _ebab ._ecba ;};func _bbeef (_cece *list ,_fadg *_db .Builder ,_adff *string ){_efdb :=_begc (_cece ,_adff );
_fadg .WriteString (_efdb );for _ ,_fbbf :=range _cece ._dbcfd {_cbdab :=*_adff +"\u0020\u0020\u0020";_bbeef (_fbbf ,_fadg ,&_cbdab );};};func (_cabed *wordBag )blocked (_eaeb *textWord )bool {if _eaeb .Urx < _cabed .Llx {_ddfd :=_gcgbgf (_eaeb .PdfRectangle );
_aaeg :=_dbcgb (_cabed .PdfRectangle );if _cabed ._cgba .blocks (_ddfd ,_aaeg ){if _dgdd {_a .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0078\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_eaeb ,_cabed );};return true ;};}else if _cabed .Urx < _eaeb .Llx {_fecf :=_gcgbgf (_cabed .PdfRectangle );
_eaad :=_dbcgb (_eaeb .PdfRectangle );if _cabed ._cgba .blocks (_fecf ,_eaad ){if _dgdd {_a .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0078\u2192\u0020:\u0020\u0025\u0073\u0020%s",_eaeb ,_cabed );};return true ;};};if _eaeb .Ury < _cabed .Lly {_cace :=_gfefa (_eaeb .PdfRectangle );
_fdba :=_deeeb (_cabed .PdfRectangle );if _cabed ._dgbde .blocks (_cace ,_fdba ){if _dgdd {_a .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0079\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_eaeb ,_cabed );};return true ;};}else if _cabed .Ury < _eaeb .Lly {_edgge :=_gfefa (_cabed .PdfRectangle );
_bbfag :=_deeeb (_eaeb .PdfRectangle );if _cabed ._dgbde .blocks (_edgge ,_bbfag ){if _dgdd {_a .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0079\u2192\u0020:\u0020\u0025\u0073\u0020%s",_eaeb ,_cabed );};return true ;};};return false ;};type cachedImage struct{_faf *_dc .Image ;
_cee _dc .PdfColorspace ;};func _edea (_ddafe ,_faada _eac .Point )bool {return _ddafe .X ==_faada .X &&_ddafe .Y ==_faada .Y };

// String returns a human readable description of `ss`.
func (_gecc *shapesState )String ()string {return _fg .Sprintf ("\u007b\u0025\u0064\u0020su\u0062\u0070\u0061\u0074\u0068\u0073\u0020\u0066\u0072\u0065\u0073\u0068\u003d\u0025t\u007d",len (_gecc ._bdbb ),_gecc ._fded );};func (_ccbac *wordBag )firstReadingIndex (_affg int )int {_abaab :=_ccbac .firstWord (_affg )._bbaa ;
_fegcd :=float64 (_affg +1)*_ccdbf ;_faaa :=_fegcd +_dead *_abaab ;_ebbe :=_affg ;for _ ,_ddaf :=range _ccbac .depthBand (_fegcd ,_faaa ){if _abfcc (_ccbac .firstWord (_ddaf ),_ccbac .firstWord (_ebbe ))< 0{_ebbe =_ddaf ;};};return _ebbe ;};func (_dggeb paraList )sortReadingOrder (){_a .Log .Trace ("\u0073\u006fr\u0074\u0052\u0065\u0061\u0064i\u006e\u0067\u004f\u0072\u0064e\u0072\u003a\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_dggeb ));
if len (_dggeb )<=1{return ;};_dggeb .computeEBBoxes ();_c .Slice (_dggeb ,func (_ccaba ,_cbdd int )bool {return _eabc (_dggeb [_ccaba ],_dggeb [_cbdd ])<=0});};func (_febge intSet )has (_ggdeg int )bool {_ ,_cddf :=_febge [_ggdeg ];return _cddf };func _eccf (_bbfd ,_ddea _dc .PdfRectangle )bool {return _bbfd .Lly <=_ddea .Ury &&_ddea .Lly <=_bbfd .Ury ;
};

// PageText represents the layout of text on a device page.
type PageText struct{_dggb []*textMark ;_gggb string ;_abg []TextMark ;_ecba []TextTable ;_bbcc _dc .PdfRectangle ;_dbgg []pathSection ;_adbf []pathSection ;_age *_dc .StructTreeRoot ;_gcddc _bd .PdfObject ;_ceee *_cd .ContentStreamOperations ;_aee PageTextOptions ;
};type textWord struct{_dc .PdfRectangle ;_bfdff float64 ;_aegcb string ;_egded []*textMark ;_bbaa float64 ;_gcba bool ;};func _cbce (_bebc *TextMarkArray ,_cbca int )int {_gge :=_bebc .Elements ();_ada :=_cbca -1;_gbca :=_cbca +1;_feg :=-1;if _ada >=0{_gcff :=_gge [_ada ];
_fbg :=_gcff .ObjString ;_gaba :=len (_fbg );_ecgg :=_gcff .Index ;if _ecgg +1< _gaba {return _ada ;};};if _gbca < len (_gge ){_cdaa :=_gge [_gbca ];_dgb :=_cdaa .ObjString ;if _dgb [0]!=_cdaa .Text {return _gbca ;};};if _feg ==-1&&_gge [_cbca ].Text =="\u0020"{return _ada ;
};return _feg ;};func (_aebb *textTable )emptyCompositeRow (_fgdefg int )bool {for _fceac :=0;_fceac < _aebb ._cged ;_fceac ++{if _ebgg ,_ffag :=_aebb ._fbfef [_fabee (_fceac ,_fgdefg )];_ffag {if len (_ebgg .paraList )> 0{return false ;};};};return true ;
};func (_bdfdd *textTable )bbox ()_dc .PdfRectangle {return _bdfdd .PdfRectangle };type gridTile struct{_dc .PdfRectangle ;_daaf ,_bdgbc ,_accf ,_gggf bool ;};func _geadc (_gagd *textLine )bool {_defef :=true ;_gcega :=-1;for _ ,_edac :=range _gagd ._egdbg {for _ ,_dddad :=range _edac ._egded {_bfda :=_dddad ._eacg ;
if _gcega ==-1{_gcega =_bfda ;}else {if _gcega !=_bfda {_defef =false ;break ;};};};};return _defef ;};func _eedf (_cbfa ,_ebagf ,_fabc ,_gbdc *textPara )*textTable {_fdbdb :=&textTable {_cged :2,_egfcf :2,_ecdgfe :make (map[uint64 ]*textPara ,4)};_fdbdb .put (0,0,_cbfa );
_fdbdb .put (1,0,_ebagf );_fdbdb .put (0,1,_fabc );_fdbdb .put (1,1,_gbdc );return _fdbdb ;};func (_ecebb compositeCell )hasLines (_cae []*textLine )bool {for _debd ,_aeacg :=range _cae {_ddcb :=_adge (_ecebb .PdfRectangle ,_aeacg .PdfRectangle );if _bdcag {_fg .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u005e\u005e\u005e\u0069\u006e\u0074\u0065\u0072\u0073e\u0063t\u0073\u003d\u0025\u0074\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u000a",_ddcb ,_debd ,len (_cae ));
_fg .Printf ("\u0020\u0020\u0020\u0020  \u005e\u005e\u005e\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025s\u000a",_ecebb );_fg .Printf ("\u0020 \u0020 \u0020\u0020\u0020\u006c\u0069\u006e\u0065\u003d\u0025\u0073\u000a",_aeacg );};if _ddcb {return true ;
};};return false ;};func _cbda (_acbcb *wordBag ,_aab *textWord ,_cage float64 )bool {return _acbcb .Urx <=_aab .Llx &&_aab .Llx < _acbcb .Urx +_cage ;};

// Text gets the extracted text contained in `l`.
func (_fedga *list )Text ()string {_edbac :=&_db .Builder {};_gcgbg :="";_bbeef (_fedga ,_edbac ,&_gcgbg );return _edbac .String ();};func (_feccc gridTile )complete ()bool {return _feccc .numBorders ()==4};func (_gba *textObject )getFontDict (_ecbf string )(_babe _bd .PdfObject ,_aced error ){_gdba :=_gba ._acec ;
if _gdba ==nil {_a .Log .Debug ("g\u0065\u0074\u0046\u006f\u006e\u0074D\u0069\u0063\u0074\u002e\u0020\u004eo\u0020\u0072\u0065\u0073\u006f\u0075\u0072c\u0065\u0073\u002e\u0020\u006e\u0061\u006d\u0065\u003d\u0025#\u0071",_ecbf );return nil ,nil ;};_babe ,_dfgd :=_gdba .GetFontByName (_bd .PdfObjectName (_ecbf ));
if !_dfgd {_a .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0067\u0065t\u0046\u006f\u006et\u0044\u0069\u0063\u0074\u003a\u0020\u0046\u006f\u006et \u006e\u006f\u0074 \u0066\u006fu\u006e\u0064\u003a\u0020\u006e\u0061m\u0065\u003d%\u0023\u0071",_ecbf );
return nil ,_g .New ("f\u006f\u006e\u0074\u0020no\u0074 \u0069\u006e\u0020\u0072\u0065s\u006f\u0075\u0072\u0063\u0065\u0073");};return _babe ,nil ;};func _geecd (_dgeddc string ,_fddge int )string {if len (_dgeddc )< _fddge {return _dgeddc ;};return _dgeddc [:_fddge ];
};var _ade =false ;

// Append appends `mark` to the mark array.
func (_ccce *TextMarkArray )Append (mark TextMark ){_ccce ._abfg =append (_ccce ._abfg ,mark )};func _eaggb (_geea []TextMark ,_dede *int ,_bdbe string )[]TextMark {_bdaf :=_fcadb ;_bdaf .Text =_bdbe ;return _adffa (_geea ,_dede ,_bdaf );};func _gfcg (_gfed []*textMark ,_adgea _dc .PdfRectangle ,_addc rulingList ,_adfd []gridTiling ,_dadd bool )paraList {_a .Log .Trace ("\u006d\u0061\u006b\u0065\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065\u003a \u0025\u0064\u0020\u0065\u006c\u0065m\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065=\u0025\u002e\u0032\u0066",len (_gfed ),_adgea );
if len (_gfed )==0{return nil ;};_befc :=_cfaac (_gfed ,_adgea ,false );if len (_befc )==0{return nil ;};_addc .log ("\u006d\u0061\u006be\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065");_efdae ,_aegb :=_addc .vertsHorzs ();_agda :=_eeba (_befc ,_adgea .Ury ,_efdae ,_aegb );
_dadc :=_beag (_agda ,_adgea .Ury ,_efdae ,_aegb ,_dadd );_dadc =_gbggc (_dadc );_dgfcg :=make (paraList ,0,len (_dadc ));for _ ,_edcbc :=range _dadc {_cfdcg :=_edcbc .arrangeText (_dadd );if _cfdcg !=nil {_dgfcg =append (_dgfcg ,_cfdcg );};};if len (_dgfcg )>=_bagb {_dgfcg =_dgfcg .extractTables (_adfd );
};_dgfcg .sortReadingOrder ();_dgfcg .sortTopoOrder ();_dgfcg .log ("\u0073\u006f\u0072te\u0064\u0020\u0069\u006e\u0020\u0072\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u006f\u0072\u0064\u0065\u0072");return _dgfcg ;};type textState struct{_accg float64 ;
_egdb float64 ;_deeaf float64 ;_deeb float64 ;_ffbg float64 ;_gbge RenderMode ;_ebgf float64 ;_deeag *_dc .PdfFont ;_bfb _dc .PdfRectangle ;_bdgc int ;_gaff int ;};func (_dbggg *shapesState )lineTo (_bfba ,_bfad float64 ){if _bbbg {_a .Log .Info ("\u006c\u0069\u006eeT\u006f\u0028\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0070\u003d\u0025\u002e\u0032\u0066",_bfba ,_bfad ,_dbggg .devicePoint (_bfba ,_bfad ));
};_dbggg .addPoint (_bfba ,_bfad );};const (_afda =false ;_gdee =false ;_adgaf =false ;_gaca =false ;_bbbg =false ;_ecegb =false ;_ddafd =false ;_cffg =false ;_gacb =false ;_dgfc =_gacb &&true ;_fceag =_dgfc &&false ;_bfcab =_gacb &&true ;_bdcag =false ;
_cacea =_bdcag &&false ;_ddae =_bdcag &&true ;_egfg =false ;_gbfbe =_egfg &&false ;_fefe =_egfg &&false ;_bdcaa =_egfg &&true ;_eaeg =_egfg &&false ;_dgdd =_egfg &&false ;);func (_cdgb intSet )del (_ceead int ){delete (_cdgb ,_ceead )};func (_aceab *textTable )getDown ()paraList {_facac :=make (paraList ,_aceab ._cged );
for _becec :=0;_becec < _aceab ._cged ;_becec ++{_decgb :=_aceab .get (_becec ,_aceab ._egfcf -1)._ecaa ;if _decgb .taken (){return nil ;};_facac [_becec ]=_decgb ;};for _gfcdf :=0;_gfcdf < _aceab ._cged -1;_gfcdf ++{if _facac [_gfcdf ]._dbed !=_facac [_gfcdf +1]{return nil ;
};};return _facac ;};func (_bca *Editor )getMatches (_cab string ,_gce []int )(map[int ]Match ,map[int ][]*TextMarkArray ,error ){_daa :=map[int ]Match {};_fbaa :=map[int ][]*TextMarkArray {};for _ ,_cg :=range _gce {_bad ,_dcac :=_bca ._gf .GetPage (_cg );
if _dcac !=nil {return nil ,nil ,_dcac ;};_gdcc ,_dcac :=New (_bad );if _dcac !=nil {return nil ,nil ,_dcac ;};_eec ,_ ,_ ,_dcac :=_gdcc .ExtractPageText ();if _dcac !=nil {return nil ,nil ,_dcac ;};_eaca :=_eec .Text ();_afae ,_dcac :=_fde (_cab ,_eaca );
if _dcac !=nil {return nil ,nil ,_dcac ;};if len (_afae )==0{_a .Log .Info ("\u004e\u006f\u0020\u006d\u0061\u0074\u0063\u0068\u0020\u0066\u006f\u0075\u006e\u0064\u0020f\u006fr\u0020\u0025\u0073\u0020\u006f\u006e\u0020\u0070\u0061\u0067\u0065\u0020\u0025\u0064",_cab ,_cg );
};_caf :=_eec .Marks ();_bedf :=[]Box {};for _ ,_bfc :=range _afae {_ ,_fgeg ,_edg :=_bda (_bfc ,_caf ,_cab );if _edg !=nil {return nil ,nil ,_edg ;};_bedf =append (_bedf ,_fgeg );};_bbce :=Match {Pattern :_cab ,Indexes :_afae ,Locations :_bedf };_daa [_cg ]=_bbce ;
};return _daa ,_fbaa ,nil ;};func (_ebedb *textPara )isAtom ()*textTable {_ebbab :=_ebedb ;_adeab :=_ebedb ._dbed ;_ggge :=_ebedb ._ecaa ;if _adeab .taken ()||_ggge .taken (){return nil ;};_cafe :=_adeab ._ecaa ;if _cafe .taken ()||_cafe !=_ggge ._dbed {return nil ;
};return _eedf (_ebbab ,_adeab ,_ggge ,_cafe );};func (_caac *textMark )inDiacriticArea (_faca *textMark )bool {_feca :=_caac .Llx -_faca .Llx ;_fdcb :=_caac .Urx -_faca .Urx ;_badd :=_caac .Lly -_faca .Lly ;return _b .Abs (_feca +_fdcb )< _caac .Width ()*_cgccc &&_b .Abs (_badd )< _caac .Height ()*_cgccc ;
};func (_fab *imageExtractContext )extractContentStreamImages (_aba string ,_ecbd *_dc .PdfPageResources )error {_fag :=_cd .NewContentStreamParser (_aba );_cec ,_cda :=_fag .Parse ();if _cda !=nil {return _cda ;};if _fab ._abd ==nil {_fab ._abd =map[*_bd .PdfObjectStream ]*cachedImage {};
};if _fab ._ddc ==nil {_fab ._ddc =&ImageExtractOptions {};};_acc :=_cd .NewContentStreamProcessor (*_cec );_acc .AddHandler (_cd .HandlerConditionEnumAllOperands ,"",_fab .processOperand );return _acc .Process (_ecbd );};

// Font represents the font properties on a PDF page.
type Font struct{PdfFont *_dc .PdfFont ;

// FontName represents Font Name from font properties.
FontName string ;

// FontType represents Font Subtype entry in the font dictionary inside page resources.
// Examples : type0, Type1, MMType1, Type3, TrueType, CIDFont.
FontType string ;

// ToUnicode is true if font provides a `ToUnicode` mapping.
ToUnicode bool ;

// IsCID is true if underlying font is a composite font.
// Composite font is represented by a font dictionary whose Subtype is `Type0`
IsCID bool ;

// IsSimple is true if font is simple font.
// A simple font is limited to only 8 bit (255) character codes.
IsSimple bool ;

// FontData represents the raw data of the embedded font file.
// It can have format TrueType (TTF), PostScript Font (PFB) or Compact Font Format (CCF).
// FontData value can be indicates from `FontFile`, `FontFile2` or `FontFile3` inside Font Descriptor.
// At most, only one of `FontFile`, `FontFile2` or `FontFile3` will be FontData value.
FontData []byte ;

// FontFileName is a name representing the font. it has format:
// (Font Name) + (Font Type Extension), example: helvetica.ttf.
FontFileName string ;

// FontDescriptor represents metrics and other attributes inside font properties from PDF Structure (Font Descriptor).
FontDescriptor *_dc .PdfFontDescriptor ;};func (_fcfb *imageExtractContext )extractInlineImage (_fcbf *_cd .ContentStreamInlineImage ,_fb _cd .GraphicsState ,_fadd *_dc .PdfPageResources )error {_abag ,_add :=_fcbf .ToImage (_fadd );if _add !=nil {return _add ;
};_gac ,_add :=_fcbf .GetColorSpace (_fadd );if _add !=nil {return _add ;};if _gac ==nil {_gac =_dc .NewPdfColorspaceDeviceGray ();};_abdb ,_add :=_gac .ImageToRGB (*_abag );if _add !=nil {return _add ;};_cbb :=ImageMark {Image :&_abdb ,Width :_fb .CTM .ScalingFactorX (),Height :_fb .CTM .ScalingFactorY (),Angle :_fb .CTM .Angle ()};
_cbb .X ,_cbb .Y =_fb .CTM .Translation ();_fcfb ._gcf =append (_fcfb ._gcf ,_cbb );_fcfb ._dcc ++;return nil ;};

// NewFromContents creates a new extractor from contents and page resources.
func NewFromContents (contents string ,resources *_dc .PdfPageResources )(*Extractor ,error ){const _bage ="\u0065x\u0074\u0072\u0061\u0063t\u006f\u0072\u002e\u004e\u0065w\u0046r\u006fm\u0043\u006f\u006e\u0074\u0065\u006e\u0074s";_cbe :=&Extractor {_aec :contents ,_dfgf :resources ,_ggd :map[string ]fontEntry {},_ccg :map[string ]textResult {}};
_cde .TrackUse (_bage );return _cbe ,nil ;};func (_cabg paraList )eventNeighbours (_ggdef []event )map[*textPara ][]int {_c .Slice (_ggdef ,func (_fbea ,_gcddb int )bool {_bcafg ,_defb :=_ggdef [_fbea ],_ggdef [_gcddb ];_fcdf ,_cdec :=_bcafg ._gcagf ,_defb ._gcagf ;
if _fcdf !=_cdec {return _fcdf < _cdec ;};if _bcafg ._efgga !=_defb ._efgga {return _bcafg ._efgga ;};return _fbea < _gcddb ;});_gaedf :=make (map[int ]intSet );_bcabe :=make (intSet );for _ ,_bgab :=range _ggdef {if _bgab ._efgga {_gaedf [_bgab ._aafba ]=make (intSet );
for _ddfdd :=range _bcabe {if _ddfdd !=_bgab ._aafba {_gaedf [_bgab ._aafba ].add (_ddfdd );_gaedf [_ddfdd ].add (_bgab ._aafba );};};_bcabe .add (_bgab ._aafba );}else {_bcabe .del (_bgab ._aafba );};};_fefbb :=map[*textPara ][]int {};for _fdbb ,_bdaac :=range _gaedf {_aggg :=_cabg [_fdbb ];
if len (_bdaac )==0{_fefbb [_aggg ]=nil ;continue ;};_gacfeb :=make ([]int ,len (_bdaac ));_ebecd :=0;for _abcg :=range _bdaac {_gacfeb [_ebecd ]=_abcg ;_ebecd ++;};_fefbb [_aggg ]=_gacfeb ;};return _fefbb ;};func (_fccb *textObject )checkOp (_cccac *_cd .ContentStreamOperation ,_ffd int ,_cccb bool )(_bcfe bool ,_ccafg error ){if _fccb ==nil {var _bab []_bd .PdfObject ;
if _ffd > 0{_bab =_cccac .Params ;if len (_bab )> _ffd {_bab =_bab [:_ffd ];};};_a .Log .Debug ("\u0025\u0023q \u006f\u0070\u0065r\u0061\u006e\u0064\u0020out\u0073id\u0065\u0020\u0074\u0065\u0078\u0074\u002e p\u0061\u0072\u0061\u006d\u0073\u003d\u0025+\u0076",_cccac .Operand ,_bab );
};if _ffd >=0{if len (_cccac .Params )!=_ffd {if _cccb {_ccafg =_g .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");};_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_cccac .Operand ,_ffd ,len (_cccac .Params ),_cccac .Params );
return false ,_ccafg ;};};return true ,nil ;};type wordBag struct{_dc .PdfRectangle ;_bdgf float64 ;_cgba ,_dgbde rulingList ;_ebd float64 ;_cfag map[int ][]*textWord ;};func _dgeb (_ageb string )string {_ceeg :=[]rune (_ageb );return string (_ceeg [:len (_ceeg )-1])};
func (_fbfe *textObject )showText (_dffdd _bd .PdfObject ,_baef []byte ,_febe int ,_ccfe string )error {return _fbfe .renderText (_dffdd ,_baef ,_febe ,_ccfe );};func (_cgb *stateStack )empty ()bool {return len (*_cgb )==0};func (_fcef *stateStack )push (_efbcd *textState ){_bcgc :=*_efbcd ;
*_fcef =append (*_fcef ,&_bcgc )};func _bda (_cafb []int ,_cecd *TextMarkArray ,_fea string )(*TextMarkArray ,Box ,error ){_aeba :=Box {};_fgdf :=_cafb [0];_cegb :=_cafb [1];_dgfa :=len (_fea )-len (_db .TrimLeft (_fea ,"\u0020"));_accb :=len (_fea )-len (_db .TrimRight (_fea ,"\u0020\u000a"));
_fgdf =_fgdf +_dgfa ;_cegb =_cegb -_accb ;_fgf ,_adc :=_cecd .RangeOffset (_fgdf ,_cegb );if _adc !=nil {return nil ,_aeba ,_adc ;};_dcca ,_ddb :=_fgf .BBox ();if !_ddb {return nil ,_aeba ,_fg .Errorf ("\u0073\u0070\u0061\u006e\u004d\u0061\u0072\u006bs\u002e\u0042\u0042ox\u0020\u0068\u0061\u0073\u0020\u006eo\u0020\u0062\u006f\u0075\u006e\u0064\u0069\u006e\u0067\u0020\u0062\u006f\u0078\u002e\u0020s\u0070\u0061\u006e\u004d\u0061\u0072\u006b\u0073=\u0025\u0073",_fgf );
};_aeba =Box {BBox :_dcca };return _fgf ,_aeba ,nil ;};func _efgda (_gagfd []*textWord ,_cdde *textWord )[]*textWord {for _cfgaa ,_gfec :=range _gagfd {if _gfec ==_cdde {return _ggfca (_gagfd ,_cfgaa );};};_a .Log .Error ("\u0072\u0065\u006d\u006f\u0076e\u0057\u006f\u0072\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u0073\u0020\u0064o\u0065\u0073\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",_cdde );
return nil ;};func (_daggg rectRuling )asRuling ()(*ruling ,bool ){_fbgba :=ruling {_bcdf :_daggg ._geggg ,Color :_daggg .Color ,_ddbb :_edgbf };switch _daggg ._geggg {case _gacba :_fbgba ._ddbf =0.5*(_daggg .Llx +_daggg .Urx );_fbgba ._fbab =_daggg .Lly ;
_fbgba ._bgdd =_daggg .Ury ;_fadbcb ,_ccfd :=_daggg .checkWidth (_daggg .Llx ,_daggg .Urx );if !_ccfd {if _eaeg {_a .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067V\u0065\u0072\u0074\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_daggg );
};return nil ,false ;};_fbgba ._facc =_fadbcb ;case _dafa :_fbgba ._ddbf =0.5*(_daggg .Lly +_daggg .Ury );_fbgba ._fbab =_daggg .Llx ;_fbgba ._bgdd =_daggg .Urx ;_faeg ,_gafg :=_daggg .checkWidth (_daggg .Lly ,_daggg .Ury );if !_gafg {if _eaeg {_a .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067H\u006f\u0072\u007a\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_daggg );
};return nil ,false ;};_fbgba ._facc =_faeg ;default:_a .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_daggg ._geggg );return nil ,false ;};return &_fbgba ,true ;};func (_gecgd *wordBag )makeRemovals ()map[int ]map[*textWord ]struct{}{_ggdeb :=make (map[int ]map[*textWord ]struct{},len (_gecgd ._cfag ));
for _fbfd :=range _gecgd ._cfag {_ggdeb [_fbfd ]=make (map[*textWord ]struct{});};return _ggdeb ;};func (_aaed *TextMarkArray )exists (_dgbd TextMark )bool {for _ ,_dbdc :=range _aaed .Elements (){if _dbgf .DeepEqual (_dgbd .DirectObject ,_dbdc .DirectObject )&&_dbgf .DeepEqual (_dgbd .BBox ,_dbdc .BBox )&&_dbdc .Text ==_dgbd .Text {return true ;
};};return false ;};func _fdeg (_dbaec float64 ,_eabge int )int {if _eabge ==0{_eabge =1;};_gfebd :=float64 (_eabge );return int (_b .Round (_dbaec /_gfebd )*_gfebd );};func _ebb (_cf string ,_eacc bool ,_cc bool )BidiText {_afcc :="\u006c\u0074\u0072";
if _cc {_afcc ="\u0074\u0074\u0062";}else if !_eacc {_afcc ="\u0072\u0074\u006c";};return BidiText {_ag :_cf ,_eaa :_afcc };};

// PageTextOptions holds various options available in extraction process.
type PageTextOptions struct{_fgdff bool ;_aage ExtractionMode ;};

// ExtractPageText returns the text contents of `e` (an Extractor for a page) as a PageText.
// TODO(peterwilliams97): The stats complicate this function signature and aren't very useful.
//
//	Replace with a function like Extract() (*PageText, error)
func (_edbd *Extractor )ExtractPageText ()(*PageText ,int ,int ,error ){_gfca ,_dgdb ,_eafd ,_eab :=_edbd .extractPageText (_edbd ._aec ,_edbd ._dfgf ,_eac .IdentityMatrix (),0,false );if _eab !=nil &&_eab !=_dc .ErrColorOutOfRange {return nil ,0,0,_eab ;
};if _edbd ._agd !=nil {_gfca ._aee ._aage =_edbd ._agd .ExtractionMode ;};_gfca .computeViews ();_eab =_efaea (_gfca );if _eab !=nil {return nil ,0,0,_eab ;};if _edbd ._agd !=nil {if _edbd ._agd .ApplyCropBox &&_edbd ._ecc !=nil {_gfca .ApplyArea (*_edbd ._ecc );
};_gfca ._aee ._fgdff =_edbd ._agd .DisableDocumentTags ;};return _gfca ,_dgdb ,_eafd ,nil ;};func (_cgbge *textTable )putComposite (_gdefa ,_agaac int ,_abdaa paraList ,_gcafg _dc .PdfRectangle ){if len (_abdaa )==0{_a .Log .Error ("\u0074\u0065xt\u0054\u0061\u0062l\u0065\u0029\u0020\u0070utC\u006fmp\u006f\u0073\u0069\u0074\u0065\u003a\u0020em\u0070\u0074\u0079\u0020\u0070\u0061\u0072a\u0073");
return ;};_eecc :=compositeCell {PdfRectangle :_gcafg ,paraList :_abdaa };if _bdcag {_fg .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0075\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u003c\u002d\u0025\u0073\u000a",_gdefa ,_agaac ,_eecc .String ());
};_eecc .updateBBox ();_cgbge ._fbfef [_fabee (_gdefa ,_agaac )]=_eecc ;};

// Text returns the text content of the `bulletLists`.
func (_eddg *lists )Text ()string {_fegbb :=&_db .Builder {};for _ ,_fggae :=range *_eddg {_cga :=_fggae .Text ();_fegbb .WriteString (_cga );};return _fegbb .String ();};func _faceb (_dcda *_dc .StructTreeRoot ,_fbgb map[int ][]*textLine ,_ebgae _bd .PdfObject )[]*list {if _dcda ==nil {_a .Log .Debug ("\u0062\u0075\u0069\u006c\u0064\u004c\u0069\u0073\u0074\u003a\u0020t\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0069\u0073 \u006e\u0069\u006c");
return nil ;};_ebca :=[]*_dc .KValue {};var _acaf func (_fffd *_dc .KValue );_acaf =func (_bfbc *_dc .KValue ){if _faed :=_bfbc .GetKDict ();_faed !=nil {if _faed .S .String ()=="\u004c"{_ebca =append (_ebca ,_bfbc );}else {for _ ,_bdgbe :=range _faed .GetChildren (){_acaf (_bdgbe );
};};};};for _ ,_bfgg :=range _dcda .K {_ccdd :=_dc .NewKValue ();_ccdd .SetKDict (_bfgg );_acaf (_ccdd );};_cdbbf :=_ggb (_ebca ,_fbgb ,_ebgae );var _dedca []*list ;for _ ,_eaegg :=range _cdbbf {_bgfd :=_caaac (_eaegg );_dedca =append (_dedca ,_bgfd ...);
};return _dedca ;};func (_daaaef paraList )findTables (_egfgda []gridTiling )[]*textTable {_daaaef .addNeighbours ();_c .Slice (_daaaef ,func (_becef ,_eedd int )bool {return _gddd (_daaaef [_becef ],_daaaef [_eedd ])< 0});var _aagb []*textTable ;if _gcag {_beeg :=_daaaef .findGridTables (_egfgda );
_aagb =append (_aagb ,_beeg ...);};if _adcea {_cbebf :=_daaaef .findTextTables ();_aagb =append (_aagb ,_cbebf ...);};return _aagb ;};

// TableInfo gets table information of the textmark `tm`.
func (_bcd *TextMark )TableInfo ()(*TextTable ,[][]int ){if !_bcd ._fgde {return nil ,nil ;};_egeb :=_bcd ._adaf ;_agfe :=_egeb .getCellInfo (*_bcd );return _egeb ,_agfe ;};func (_fbbgb *textTable )compositeRowCorridors ()map[int ][]float64 {_cgfac :=make (map[int ][]float64 ,_fbbgb ._egfcf );
if _bdcag {_a .Log .Info ("c\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0052\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073:\u0020h\u003d\u0025\u0064",_fbbgb ._egfcf );};for _cfdcc :=1;_cfdcc < _fbbgb ._egfcf ;_cfdcc ++{var _bdgdf []compositeCell ;
for _agba :=0;_agba < _fbbgb ._cged ;_agba ++{if _ffgfe ,_cfec :=_fbbgb ._fbfef [_fabee (_agba ,_cfdcc )];_cfec {_bdgdf =append (_bdgdf ,_ffgfe );};};if len (_bdgdf )==0{continue ;};_egec :=_cbfgf (_bdgdf );_cgfac [_cfdcc ]=_egec ;if _bdcag {_fg .Printf ("\u0020\u0020\u0020\u0025\u0032\u0064\u003a\u0020\u00256\u002e\u0032\u0066\u000a",_cfdcc ,_egec );
};};return _cgfac ;};func _bebfg (_bcafc _eac .Matrix )_eac .Point {_ffbd ,_fbdd :=_bcafc .Translation ();return _eac .Point {X :_ffbd ,Y :_fbdd };};func _gdac (_gadg []*textLine )map[float64 ][]*textLine {_c .Slice (_gadg ,func (_aeag ,_abca int )bool {return _gadg [_aeag ]._ddgc < _gadg [_abca ]._ddgc });
_abae :=map[float64 ][]*textLine {};for _ ,_bcddg :=range _gadg {_gbged :=_fefed (_bcddg );_gbged =_b .Round (_gbged );_abae [_gbged ]=append (_abae [_gbged ],_bcddg );};return _abae ;};func _adge (_cegg ,_cbgf _dc .PdfRectangle )bool {return _acfd (_cegg ,_cbgf )&&_eccf (_cegg ,_cbgf )};
func (_bfdf *textLine )pullWord (_acace *wordBag ,_cfdac *textWord ,_gbbfc int ){_bfdf .appendWord (_cfdac );_acace .removeWord (_cfdac ,_gbbfc );};const _gggc =1.0/1000.0;func _adffa (_ebda []TextMark ,_ccdfd *int ,_fecae TextMark )[]TextMark {_fecae .Offset =*_ccdfd ;
_ebda =append (_ebda ,_fecae );*_ccdfd +=len (_fecae .Text );return _ebda ;};func (_fadb *shapesState )quadraticTo (_faee ,_ecfd ,_ccdb ,_bfag float64 ){if _bbbg {_a .Log .Info ("\u0071\u0075\u0061d\u0072\u0061\u0074\u0069\u0063\u0054\u006f\u003a");};_fadb .addPoint (_ccdb ,_bfag );
};func _bgd (_efbg *TextMarkArray ,_cfg *string ,_fcga *int ,_dbcb string )error {var _gfg TextMark ;for _ ,_ecfc :=range _efbg .Elements (){_dbb :=_ecfc .Text ;_gfb :=_ecfc .Font ;_bbg :="";_bbag :=*_cfg ;if len (_bbag )> *_fcga {_bbg =_bbag [*_fcga :*_fcga +len (_dbb )];
}else if *_fcga ==len (_dbcb )-1&&len (_bbag )> *_fcga {_bbg =_bbag [*_fcga :];};_adb :=_ecfc .DirectObject ;if _adb ==nil &&_ecfc .Text =="\u0020"{_eaf :=_gfg .ObjString ;_cega :=_eaf [len (_eaf )-1];if _cega !=_ecfc .Text {_adb =_gfg .DirectObject ;_gfb =_gfg .Font ;
_ccd ,_abc :=_bd .GetString (_adb );if !_abc {return _fg .Errorf ("\u0075n\u0061\u0062l\u0065\u0020\u0074\u006f \u0067\u0065\u0074 \u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0042\u0079te\u0073\u0020\u0066r\u006f\u006d \u0064\u0069\u0072\u0065\u0063\u0074O\u0062\u006ae\u0063\u0074");
};_gbg ,_abc :=_bd .GetStringBytes (_adb );if !_abc {return _bd .ErrTypeError ;};_gceg :=_fecd (_gbg ,_gfb );_bbg =_gceg +_bbg ;_bbfg (_ccd ,_bbg ,_gfb );*_fcga +=len (_dbb );continue ;};};_cgf ,_fegcb :=_bd .GetString (_adb );if !_fegcb {return _fg .Errorf ("\u0075n\u0061\u0062l\u0065\u0020\u0074\u006f \u0067\u0065\u0074 \u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0042\u0079te\u0073\u0020\u0066r\u006f\u006d \u0064\u0069\u0072\u0065\u0063\u0074O\u0062\u006ae\u0063\u0074");
};_feef :="";_aef ,_fegcb :=_bd .GetStringBytes (_adb );if !_fegcb {return _bd .ErrTypeError ;};_egf :=_fecd (_aef ,_gfb );_feef =_db .Replace (_egf ,_dbb ,_bbg ,1);_bbfg (_cgf ,_feef ,_gfb );*_fcga +=len (_dbb );_gfg =_ecfc ;};return nil ;};

// ToTextMark returns the public view of `tm`.
func (_dcafc *textMark )ToTextMark ()TextMark {return TextMark {Text :_dcafc ._eeab ,Original :_dcafc ._bcac ,BBox :_dcafc ._aeaae ,Font :_dcafc ._bgac ,FontSize :_dcafc ._cbfc ,FillColor :_dcafc ._dcbe ,StrokeColor :_dcafc ._ccfa ,Orientation :_dcafc ._cdcd ,DirectObject :_dcafc ._bcda ,ObjString :_dcafc ._cgfea ,Tw :_dcafc .Tw ,Th :_dcafc .Th ,Tc :_dcafc ._fecg ,Index :_dcafc ._affa };
};

// Elements returns the TextMarks in `ma`.
func (_egbe *TextMarkArray )Elements ()[]TextMark {return _egbe ._abfg };func (_ead *imageExtractContext )extractXObjectImage (_ggg *_bd .PdfObjectName ,_dfe _cd .GraphicsState ,_afbf *_dc .PdfPageResources )error {_dfcd ,_ :=_afbf .GetXObjectByName (*_ggg );
if _dfcd ==nil {return nil ;};_fcg ,_dfcda :=_ead ._abd [_dfcd ];if !_dfcda {_edff ,_abb :=_afbf .GetXObjectImageByName (*_ggg );if _abb !=nil {return _abb ;};if _edff ==nil {return nil ;};_fdaa ,_abb :=_edff .ToImage ();if _abb !=nil {return _abb ;};var _dfbd _eb .Image ;
if _edff .Mask !=nil {if _dfbd ,_abb =_efgbf (_edff .Mask ,_df .Opaque );_abb !=nil {_a .Log .Debug ("\u0057\u0041\u0052\u004e\u003a \u0063\u006f\u0075\u006c\u0064 \u006eo\u0074\u0020\u0067\u0065\u0074\u0020\u0065\u0078\u0070\u006c\u0069\u0063\u0069\u0074\u0020\u0069\u006d\u0061\u0067e\u0020\u006d\u0061\u0073\u006b\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e");
};}else if _edff .SMask !=nil {_dfbd ,_abb =_dcea (_edff .SMask ,_df .Opaque );if _abb !=nil {_a .Log .Debug ("W\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0067\u0065\u0074\u0020\u0073\u006f\u0066\u0074\u0020\u0069\u006da\u0067e\u0020\u006d\u0061\u0073k\u002e\u0020O\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u002e");
};};if _dfbd !=nil {_cag ,_dafc :=_fdaa .ToGoImage ();if _dafc !=nil {return _dafc ;};_cag =_begbb (_cag ,_dfbd );switch _edff .ColorSpace .String (){case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0049n\u0064\u0065\u0078\u0065\u0064":_fdaa ,_dafc =_dc .ImageHandling .NewGrayImageFromGoImage (_cag );
if _dafc !=nil {return _dafc ;};default:_fdaa ,_dafc =_dc .ImageHandling .NewImageFromGoImage (_cag );if _dafc !=nil {return _dafc ;};};};_fcg =&cachedImage {_faf :_fdaa ,_cee :_edff .ColorSpace };_ead ._abd [_dfcd ]=_fcg ;};_egg :=_fcg ._faf ;_cdaf :=_fcg ._cee ;
_cfb ,_aaf :=_cdaf .ImageToRGB (*_egg );if _aaf !=nil {return _aaf ;};_a .Log .Debug ("@\u0044\u006f\u0020\u0043\u0054\u004d\u003a\u0020\u0025\u0073",_dfe .CTM .String ());_dffa :=ImageMark {Image :&_cfb ,Width :_dfe .CTM .ScalingFactorX (),Height :_dfe .CTM .ScalingFactorY (),Angle :_dfe .CTM .Angle ()};
_dffa .X ,_dffa .Y =_dfe .CTM .Translation ();_ead ._gcf =append (_ead ._gcf ,_dffa );_ead ._eca ++;return nil ;};func (_cebd *textObject )moveLP (_bfa ,_aecg float64 ){_cebd ._dcde .Concat (_eac .NewMatrix (1,0,0,1,_bfa ,_aecg ));_cebd ._ddgbc =_cebd ._dcde ;
};func _gcgbgf (_dbeb _dc .PdfRectangle )*ruling {return &ruling {_bcdf :_gacba ,_ddbf :_dbeb .Urx ,_fbab :_dbeb .Lly ,_bgdd :_dbeb .Ury };};func _dbbc (_bgff *wordBag ,_baad *textWord ,_ddbgc float64 )bool {return _baad .Llx < _bgff .Urx +_ddbgc &&_bgff .Llx -_ddbgc < _baad .Urx ;
};func _fbfa (_dab *Extractor ,_acca *_dc .PdfPageResources ,_edd _cd .GraphicsState ,_dedf *textState ,_efa *stateStack )*textObject {return &textObject {_fbfec :_dab ,_acec :_acca ,_bfca :_edd ,_caag :_efa ,_gcfda :_dedf ,_ddgbc :_eac .IdentityMatrix (),_dcde :_eac .IdentityMatrix ()};
};func (_bgeff *textWord )addDiacritic (_abfe string ){_feefd :=_bgeff ._egded [len (_bgeff ._egded )-1];_feefd ._eeab +=_abfe ;_feefd ._eeab =_eg .NFKC .String (_feefd ._eeab );};func (_bga *wordBag )highestWord (_bdcb int ,_eccc ,_cadb float64 )*textWord {for _ ,_fga :=range _bga ._cfag [_bdcb ]{if _eccc <=_fga ._bfdff &&_fga ._bfdff <=_cadb {return _fga ;
};};return nil ;};type pathSection struct{_ggf []*subpath ;_df .Color ;};func (_baae *shapesState )newSubPath (){_baae .clearPath ();if _bbbg {_a .Log .Info ("\u006e\u0065\u0077\u0053\u0075\u0062\u0050\u0061\u0074h\u003a\u0020\u0025\u0073",_baae );};};
func _gebb (_fcaa float64 )bool {return _b .Abs (_fcaa )< _cgd };func _dbfcc (_aefbg float64 )float64 {return _bcdee *_b .Round (_aefbg /_bcdee )};func (_agcc TextTable )getCellInfo (_egeg TextMark )[][]int {for _dagd ,_cgbd :=range _agcc .Cells {for _ebeb :=range _cgbd {_afed :=&_cgbd [_ebeb ].Marks ;
if _afed .exists (_egeg ){return [][]int {{_dagd },{_ebeb }};};};};return nil ;};

// NewWithOptions an Extractor instance for extracting content from the input PDF page with options.
func NewWithOptions (page *_dc .PdfPage ,options *Options )(*Extractor ,error ){const _edf ="\u0065x\u0074\u0072\u0061\u0063\u0074\u006f\u0072\u002e\u004e\u0065\u0077W\u0069\u0074\u0068\u004f\u0070\u0074\u0069\u006f\u006e\u0073";_bedb ,_gdg :=page .GetAllContentStreams ();
if _gdg !=nil {return nil ,_gdg ;};var _beb *_dc .StructTreeRoot ;_ece ,_fd :=page .GetStructTreeRoot ();if !_fd {_a .Log .Debug ("T\u0068\u0065\u0020\u0070\u0064\u0066\u0020\u0064\u006f\u0063\u0075\u006d\u0065\u006e\u0074\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0074\u0061\u0067g\u0065d\u002e\u0020\u0053\u0074r\u0075\u0063t\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e\u0027\u0074\u0020\u0065\u0078\u0069\u0073\u0074\u002e");
}else {_beb ,_gdg =_dc .NewStructTreeRootFromPdfObject (*_ece );if _gdg !=nil {return nil ,_fg .Errorf ("\u0065\u0072\u0072or\u0020\u006c\u006f\u0061\u0064\u0069\u006e\u0067\u0020s\u0074r\u0075c\u0074 \u0074\u0072\u0065\u0065\u0020\u0072\u006f\u006f\u0074\u003a\u0020\u0025\u0076",_gdg );
};};_gbb :=page .GetContainingPdfObject ();_ccc ,_gdg :=page .GetMediaBox ();if _gdg !=nil {return nil ,_fg .Errorf ("\u0065\u0078\u0074r\u0061\u0063\u0074\u006fr\u0020\u0072\u0065\u0071\u0075\u0069\u0072e\u0073\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u002e\u0020\u0025\u0076",_gdg );
};_gda :=&Extractor {_aec :_bedb ,_dfgf :page .Resources ,_eee :*_ccc ,_ecc :page .CropBox ,_cb :page .GetStructParentsKey (),_ggd :map[string ]fontEntry {},_ccg :map[string ]textResult {},_daf :map[string ]textResult {},_agd :options ,_gb :_beb ,_bba :_gbb };
if _gda ._eee .Llx > _gda ._eee .Urx {_a .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0058\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_gda ._eee );
_gda ._eee .Llx ,_gda ._eee .Urx =_gda ._eee .Urx ,_gda ._eee .Llx ;};if _gda ._eee .Lly > _gda ._eee .Ury {_a .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0059\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_gda ._eee );
_gda ._eee .Lly ,_gda ._eee .Ury =_gda ._eee .Ury ,_gda ._eee .Lly ;};if _gda ._agd !=nil {if _gda ._agd .IncludeAnnotations {_gda ._dcfc ,_gdg =page .GetAnnotations ();if _gdg !=nil {_a .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0067\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0061\u006e\u006e\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0073: \u0025\u0076",_gdg );
};};};_cde .TrackUse (_edf );return _gda ,nil ;};func (_edfb *wordBag )pullWord (_aecbc *textWord ,_cdcg int ,_geac map[int ]map[*textWord ]struct{}){_edfb .PdfRectangle =_faga (_edfb .PdfRectangle ,_aecbc .PdfRectangle );if _aecbc ._bbaa > _edfb ._bdgf {_edfb ._bdgf =_aecbc ._bbaa ;
};_edfb ._cfag [_cdcg ]=append (_edfb ._cfag [_cdcg ],_aecbc );_geac [_cdcg ][_aecbc ]=struct{}{};};func (_cdfd *shapesState )moveTo (_deag ,_ecab float64 ){_cdfd ._fded =true ;_cdfd ._cebe =_cdfd .devicePoint (_deag ,_ecab );if _bbbg {_a .Log .Info ("\u006d\u006fv\u0065\u0054\u006f\u003a\u0020\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0064\u0065\u0076\u0069\u0063\u0065\u003d%.\u0032\u0066",_deag ,_ecab ,_cdfd ._cebe );
};};func _facb (_caeg _dc .PdfRectangle )rulingKind {_cbff :=_caeg .Width ();_dcae :=_caeg .Height ();if _cbff > _dcae {if _cbff >=_febdc {return _dafa ;};}else {if _dcae >=_febdc {return _gacba ;};};return _daba ;};func (_adgg compositeCell )split (_eabcc ,_ccee []float64 )*textTable {_gccea :=len (_eabcc )+1;
_geaf :=len (_ccee )+1;if _bdcag {_a .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0043\u0065l\u006c\u002e\u0073\u0070l\u0069\u0074\u003a\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a\u0009\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025\u0073\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073=\u0025\u0036\u002e\u0032\u0066\u000a\t\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d%\u0036\u002e\u0032\u0066",_geaf ,_gccea ,_adgg ,_eabcc ,_ccee );
_fg .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073\u000a",len (_adgg .paraList ));for _cbdef ,_gdcga :=range _adgg .paraList {_fg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cbdef ,_gdcga .String ());
};_fg .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",len (_adgg .lines ()));for _bdfdg ,_abeg :=range _adgg .lines (){_fg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bdfdg ,_abeg );};};_eabcc =_ddbfg (_eabcc ,_adgg .Ury ,_adgg .Lly );
_ccee =_ddbfg (_ccee ,_adgg .Llx ,_adgg .Urx );_ccebb :=make (map[uint64 ]*textPara ,_geaf *_gccea );_fcab :=textTable {_cged :_geaf ,_egfcf :_gccea ,_ecdgfe :_ccebb };_fddg :=_adgg .paraList ;_c .Slice (_fddg ,func (_ffac ,_dbcef int )bool {_gcfdc ,_eafe :=_fddg [_ffac ],_fddg [_dbcef ];
_gabbc ,_acdc :=_gcfdc .Lly ,_eafe .Lly ;if _gabbc !=_acdc {return _gabbc < _acdc ;};return _gcfdc .Llx < _eafe .Llx ;});_eaecf :=make (map[uint64 ]_dc .PdfRectangle ,_geaf *_gccea );for _edffe ,_gdgfg :=range _eabcc [1:]{_caaga :=_eabcc [_edffe ];for _dcbea ,_ccef :=range _ccee [1:]{_accc :=_ccee [_dcbea ];
_eaecf [_fabee (_dcbea ,_edffe )]=_dc .PdfRectangle {Llx :_accc ,Urx :_ccef ,Lly :_gdgfg ,Ury :_caaga };};};if _bdcag {_a .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0043\u0065l\u006c\u002e\u0073\u0070\u006c\u0069\u0074\u003a\u0020\u0072e\u0063\u0074\u0073");
_fg .Printf ("\u0020\u0020\u0020\u0020");for _faaaf :=0;_faaaf < _geaf ;_faaaf ++{_fg .Printf ("\u0025\u0033\u0030\u0064\u002c\u0020",_faaaf );};_fg .Println ();for _cdaad :=0;_cdaad < _gccea ;_cdaad ++{_fg .Printf ("\u0020\u0020\u0025\u0032\u0064\u003a",_cdaad );
for _fcfc :=0;_fcfc < _geaf ;_fcfc ++{_fg .Printf ("\u00256\u002e\u0032\u0066\u002c\u0020",_eaecf [_fabee (_fcfc ,_cdaad )]);};_fg .Println ();};};_ecefb :=func (_edgb *textLine )(int ,int ){for _ebag :=0;_ebag < _gccea ;_ebag ++{for _dfbga :=0;_dfbga < _geaf ;
_dfbga ++{if _adce (_eaecf [_fabee (_dfbga ,_ebag )],_edgb .PdfRectangle ){return _dfbga ,_ebag ;};};};return -1,-1;};_bgecd :=make (map[uint64 ][]*textLine ,_geaf *_gccea );for _ ,_ebdc :=range _fddg .lines (){_cdaff ,_ecdg :=_ecefb (_ebdc );if _cdaff < 0{continue ;
};_bgecd [_fabee (_cdaff ,_ecdg )]=append (_bgecd [_fabee (_cdaff ,_ecdg )],_ebdc );};for _aedc :=0;_aedc < len (_eabcc )-1;_aedc ++{_abgb :=_eabcc [_aedc ];_gcced :=_eabcc [_aedc +1];for _cedfg :=0;_cedfg < len (_ccee )-1;_cedfg ++{_gcad :=_ccee [_cedfg ];
_eeedeb :=_ccee [_cedfg +1];_bagdd :=_dc .PdfRectangle {Llx :_gcad ,Urx :_eeedeb ,Lly :_gcced ,Ury :_abgb };_eabb :=_bgecd [_fabee (_cedfg ,_aedc )];if len (_eabb )==0{continue ;};_bggg :=_dbcg (_bagdd ,_eabb );_fcab .put (_cedfg ,_aedc ,_bggg );};};return &_fcab ;
};func _gfgf (_ccge map[float64 ]gridTile )[]float64 {_cbad :=make ([]float64 ,0,len (_ccge ));for _dffg :=range _ccge {_cbad =append (_cbad ,_dffg );};_c .Float64s (_cbad );return _cbad ;};var _dade string ="\u005e\u005b\u0061\u002d\u007a\u0041\u002dZ\u005d\u0028\u005c)\u007c\u005c\u002e)\u007c\u005e[\u005c\u0064\u005d\u002b\u0028\u005c)\u007c\\.\u0029\u007c\u005e\u005c\u0028\u005b\u0061\u002d\u007a\u0041\u002d\u005a\u005d\u005c\u0029\u007c\u005e\u005c\u0028\u005b\u005c\u0064\u005d\u002b\u005c\u0029";


// BBox returns the smallest axis-aligned rectangle that encloses all the TextMarks in `ma`.
func (_ecbdg *TextMarkArray )BBox ()(_dc .PdfRectangle ,bool ){var _cfgc _dc .PdfRectangle ;_cfa :=false ;for _ ,_fbbe :=range _ecbdg ._abfg {if _fbbe .Meta ||_gcbba (_fbbe .Text ){continue ;};if _cfa {_cfgc =_faga (_cfgc ,_fbbe .BBox );}else {_cfgc =_fbbe .BBox ;
_cfa =true ;};};return _cfgc ,_cfa ;};

// Marks returns the TextMark collection for a page. It represents all the text on the page.
func (_adae PageText )Marks ()*TextMarkArray {return &TextMarkArray {_abfg :_adae ._abg }};var _efce *_ed .Regexp =_ed .MustCompile (_gaef +"\u007c"+_dade );func (_gacfe pathSection )bbox ()_dc .PdfRectangle {_ffaa :=_gacfe ._ggf [0]._gfad [0];_cfda :=_dc .PdfRectangle {Llx :_ffaa .X ,Urx :_ffaa .X ,Lly :_ffaa .Y ,Ury :_ffaa .Y };
_cea :=func (_daad _eac .Point ){if _daad .X < _cfda .Llx {_cfda .Llx =_daad .X ;}else if _daad .X > _cfda .Urx {_cfda .Urx =_daad .X ;};if _daad .Y < _cfda .Lly {_cfda .Lly =_daad .Y ;}else if _daad .Y > _cfda .Ury {_cfda .Ury =_daad .Y ;};};for _ ,_ceaa :=range _gacfe ._ggf [0]._gfad [1:]{_cea (_ceaa );
};for _ ,_gagc :=range _gacfe ._ggf [1:]{for _ ,_ecef :=range _gagc ._gfad {_cea (_ecef );};};return _cfda ;};type bounded interface{bbox ()_dc .PdfRectangle };

// String returns a string describing the current state of the textState stack.
func (_ddbc *stateStack )String ()string {_gcg :=[]string {_fg .Sprintf ("\u002d\u002d\u002d\u002d f\u006f\u006e\u0074\u0020\u0073\u0074\u0061\u0063\u006b\u003a\u0020\u0025\u0064",len (*_ddbc ))};for _bgdb ,_edbf :=range *_ddbc {_gfcf :="\u003c\u006e\u0069l\u003e";
if _edbf !=nil {_gfcf =_edbf .String ();};_gcg =append (_gcg ,_fg .Sprintf ("\u0009\u0025\u0032\u0064\u003a\u0020\u0025\u0073",_bgdb ,_gfcf ));};return _db .Join (_gcg ,"\u000a");};func _adca (_badc []pathSection )rulingList {_dadda (_badc );if _egfg {_a .Log .Info ("\u006da\u006b\u0065\u0046\u0069l\u006c\u0052\u0075\u006c\u0069n\u0067s\u003a \u0025\u0064\u0020\u0066\u0069\u006c\u006cs",len (_badc ));
};var _dgabf rulingList ;for _ ,_cbge :=range _badc {for _ ,_fada :=range _cbge ._ggf {if !_fada .isQuadrilateral (){if _egfg {_a .Log .Error ("!\u0069s\u0051\u0075\u0061\u0064\u0072\u0069\u006c\u0061t\u0065\u0072\u0061\u006c: \u0025\u0073",_fada );};continue ;
};if _fbbeg ,_fgbed :=_fada .makeRectRuling (_cbge .Color );_fgbed {_dgabf =append (_dgabf ,_fbbeg );}else {if _eaeg {_a .Log .Error ("\u0021\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0073",_fada );};};
};};if _egfg {_a .Log .Info ("\u006d\u0061\u006b\u0065Fi\u006c\u006c\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0073",_dgabf .String ());};return _dgabf ;};func (_adffag gridTile )numBorders ()int {_cceed :=0;if _adffag ._bdgbc {_cceed ++;
};if _adffag ._gggf {_cceed ++;};if _adffag ._accf {_cceed ++;};if _adffag ._daaf {_cceed ++;};return _cceed ;};func (_efbfc *textTable )log (_daac string ){if !_bdcag {return ;};_a .Log .Info ("~\u007e\u007e\u0020\u0025\u0073\u003a \u0025\u0064\u0020\u0078\u0020\u0025d\u0020\u0067\u0072\u0069\u0064\u003d\u0025t\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0025\u0036\u002e2\u0066",_daac ,_efbfc ._cged ,_efbfc ._egfcf ,_efbfc ._baead ,_efbfc .PdfRectangle );
for _bbggg :=0;_bbggg < _efbfc ._egfcf ;_bbggg ++{for _acabfb :=0;_acabfb < _efbfc ._cged ;_acabfb ++{_abed :=_efbfc .get (_acabfb ,_bbggg );if _abed ==nil {continue ;};_fg .Printf ("%\u0034\u0064\u0020\u00252d\u003a \u0025\u0036\u002e\u0032\u0066 \u0025\u0071\u0020\u0025\u0064\u000a",_acabfb ,_bbggg ,_abed .PdfRectangle ,_geecd (_abed .text (),50),_e .RuneCountInString (_abed .text ()));
};};};func (_fgcg *ruling )equals (_efba *ruling )bool {return _fgcg ._bcdf ==_efba ._bcdf &&_cdfa (_fgcg ._ddbf ,_efba ._ddbf )&&_cdfa (_fgcg ._fbab ,_efba ._fbab )&&_cdfa (_fgcg ._bgdd ,_efba ._bgdd );};type rulingKind int ;func (_abbe *textObject )getFillColor ()_df .Color {return _dedbe (_abbe ._bfca .ColorspaceNonStroking ,_abbe ._bfca .ColorNonStroking );
};func _ec (_agf int )bool {return (_agf &1)!=0};func (_gcef *textPara )getListLines ()[]*textLine {var _ggdfg []*textLine ;_faea :=_fedd (_gcef ._babfe );for _ ,_bdbge :=range _gcef ._babfe {_aacd :=_bdbge ._egdbg [0]._aegcb [0];if _defe (_aacd ){_ggdfg =append (_ggdfg ,_bdbge );
};};_ggdfg =append (_ggdfg ,_faea ...);return _ggdfg ;};

// Len returns the number of TextMarks in `ma`.
func (_gdad *TextMarkArray )Len ()int {if _gdad ==nil {return 0;};return len (_gdad ._abfg );};func _abfcc (_cdea ,_dgbfg bounded )float64 {return _cdea .bbox ().Llx -_dgbfg .bbox ().Llx };func _egea (_fdcd string )bool {if _e .RuneCountInString (_fdcd )< _caba {return false ;
};_bgfb ,_cfead :=_e .DecodeLastRuneInString (_fdcd );if _cfead <=0||!_dbg .Is (_dbg .Hyphen ,_bgfb ){return false ;};_bgfb ,_cfead =_e .DecodeLastRuneInString (_fdcd [:len (_fdcd )-_cfead ]);return _cfead > 0&&!_dbg .IsSpace (_bgfb );};func (_cbgdb rulingList )secMinMax ()(float64 ,float64 ){_bcefe ,_bbdgg :=_cbgdb [0]._fbab ,_cbgdb [0]._bgdd ;
for _ ,_ddaeg :=range _cbgdb [1:]{if _ddaeg ._fbab < _bcefe {_bcefe =_ddaeg ._fbab ;};if _ddaeg ._bgdd > _bbdgg {_bbdgg =_ddaeg ._bgdd ;};};return _bcefe ,_bbdgg ;};func (_ffde paraList )inTile (_aegc gridTile )paraList {var _fgfdd paraList ;for _ ,_acecb :=range _ffde {if _aegc .contains (_acecb .PdfRectangle ){_fgfdd =append (_fgfdd ,_acecb );
};};if _bdcag {_fg .Printf ("\u0020 \u0020\u0069\u006e\u0054i\u006c\u0065\u003a\u0020\u0020%\u0073 \u0069n\u0073\u0069\u0064\u0065\u003d\u0025\u0064\n",_aegc ,len (_fgfdd ));for _fgdc ,_egag :=range _fgfdd {_fg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fgdc ,_egag );
};_fg .Println ("");};return _fgfdd ;};func _efdc (_ecgge *_dc .Image ,_ffee _df .Color )_eb .Image {_gace ,_begga :=int (_ecgge .Width ),int (_ecgge .Height );_abfbg :=_eb .NewRGBA (_eb .Rect (0,0,_gace ,_begga ));for _cgddc :=0;_cgddc < _begga ;_cgddc ++{for _cdba :=0;
_cdba < _gace ;_cdba ++{_fadcd ,_fdbbe :=_ecgge .ColorAt (_cdba ,_cgddc );if _fdbbe !=nil {_a .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_cdba ,_cgddc );
continue ;};_bdcga ,_fdgfa ,_fddc ,_ :=_fadcd .RGBA ();var _gafc _df .Color ;if _bdcga +_fdgfa +_fddc ==0{_gafc =_ffee ;}else {_gafc =_df .Transparent ;};_abfbg .Set (_cdba ,_cgddc ,_gafc );};};return _abfbg ;};

// ExtractPageImages returns the image contents of the page extractor, including data
// and position, size information for each image.
// A set of options to control page image extraction can be passed in. The options
// parameter can be nil for the default options. By default, inline stencil masks
// are not extracted.
func (_agfg *Extractor )ExtractPageImages (options *ImageExtractOptions )(*PageImages ,error ){_cbc :=&imageExtractContext {_ddc :options };_feed :=_cbc .extractContentStreamImages (_agfg ._aec ,_agfg ._dfgf );if _feed !=nil {return nil ,_feed ;};return &PageImages {Images :_cbc ._gcf },nil ;
};func (_cbcf *textLine )endsInHyphen ()bool {_gbef :=_cbcf ._egdbg [len (_cbcf ._egdbg )-1];_fbga :=_gbef ._aegcb ;_gdfa ,_eage :=_e .DecodeLastRuneInString (_fbga );if _eage <=0||!_dbg .Is (_dbg .Hyphen ,_gdfa ){return false ;};if _gbef ._gcba &&_egea (_fbga ){return true ;
};return _egea (_cbcf .text ());};

// BidiText represents a bidi text organized in its visual order
// with base direction of the text.
type BidiText struct{_ag string ;_eaa string ;};

// ExtractTextWithStats works like ExtractText but returns the number of characters in the output
// (`numChars`) and the number of characters that were not decoded (`numMisses`).
func (_agc *Extractor )ExtractTextWithStats ()(_gde string ,_eecg int ,_dfaf int ,_bfd error ){_fdg ,_eecg ,_dfaf ,_bfd :=_agc .ExtractPageText ();if _bfd !=nil {return "",_eecg ,_dfaf ,_bfd ;};return _fdg .Text (),_eecg ,_dfaf ,nil ;};func _bg (_ba []string ,_dce int ,_afc int ){for _ac ,_ce :=_dce ,_afc -1;
_ac < _ce ;_ac ,_ce =_ac +1,_ce -1{_dd :=_ba [_ac ];_ba [_ac ]=_ba [_ce ];_ba [_ce ]=_dd ;};};func _fdcge (_dacc string )(string ,bool ){_ggeaa :=[]rune (_dacc );if len (_ggeaa )!=1{return "",false ;};_fdef ,_dbdac :=_ffbeee [_ggeaa [0]];return _fdef ,_dbdac ;
};func (_dgdca paraList )readBefore (_aacf []int ,_fdgac ,_bdbf int )bool {_abdd ,_agfbc :=_dgdca [_fdgac ],_dgdca [_bdbf ];if _caad (_abdd ,_agfbc )&&_abdd .Lly > _agfbc .Lly {return true ;};if !(_abdd ._bdaed .Urx < _agfbc ._bdaed .Llx ){return false ;
};_acabf ,_agfd :=_abdd .Lly ,_agfbc .Lly ;if _acabf > _agfd {_agfd ,_acabf =_acabf ,_agfd ;};_aeeg :=_b .Max (_abdd ._bdaed .Llx ,_agfbc ._bdaed .Llx );_degg :=_b .Min (_abdd ._bdaed .Urx ,_agfbc ._bdaed .Urx );_defg :=_dgdca .llyRange (_aacf ,_acabf ,_agfd );
for _ ,_gfda :=range _defg {if _gfda ==_fdgac ||_gfda ==_bdbf {continue ;};_fddab :=_dgdca [_gfda ];if _fddab ._bdaed .Llx <=_degg &&_aeeg <=_fddab ._bdaed .Urx {return false ;};};return true ;};const _gcac =20;func _caad (_dfafba ,_bead *textPara )bool {return _acfd (_dfafba ._bdaed ,_bead ._bdaed )};
func _fcff (_faddb []*textLine ,_gadab string ,_bccbb []*list )*list {return &list {_cfeee :_faddb ,_fdda :_gadab ,_dbcfd :_bccbb };};func _bfbb (_gegd ,_gdcg bounded )float64 {return _fgga (_gegd )-_fgga (_gdcg )};

// String returns a description of `k`.
func (_fbedg markKind )String ()string {_afgdg ,_bfgde :=_beac [_fbedg ];if !_bfgde {return _fg .Sprintf ("\u004e\u006f\u0074\u0020\u0061\u0020\u006d\u0061\u0072k\u003a\u0020\u0025\u0064",_fbedg );};return _afgdg ;};func _aefc (_dcad []*textMark ,_aaeeg _dc .PdfRectangle )string {_a .Log .Trace ("\u006d\u0061\u006b\u0065\u0053i\u006d\u0070\u006c\u0065\u0054\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020e\u006c\u0065\u006d\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",len (_dcad ),_aaeeg );
_bcdb :="";if len (_dcad )==0{return _bcdb ;};_gddge :=_cfaac (_dcad ,_aaeeg ,true );if len (_gddge )==0{return _bcdb ;};_cbfce :=0.0;_gabfc :=true ;_bace :="";for _ ,_ggdfgf :=range _gddge {_bbgba :=_ggdfgf ._bbaa ;if _bbgba > _efbgb {_bbgba =_efbgb ;
};if (_ggdfgf ._bfdff -_cbfce > _dfda *_bbgba &&_cbfce !=0.0)||(_cbfce -_ggdfgf ._bfdff > _bbgba *10){_fegad :=_dfb ([]rune (_bace ));_bace =_fegad ._ag ;_bace +="\u000a";_bcdb +=_bace ;_bace ="";}else {if !_gabfc {_bace +="\u0020";};};_bace +=_ggdfgf ._aegcb ;
_gabfc =false ;_cbfce =_ggdfgf ._bfdff ;};if _bace !=""{_gdage :=_dfb ([]rune (_bace ));_bace =_gdage ._ag ;_bace +="\u000a";_bcdb +=_bace ;};return _bcdb ;};const (ExtractionModeLayout =iota ;ExtractionModePlain ;ExtractionModeLayoutNoBreaks ;);func _eeba (_bfae []*textWord ,_adgd float64 ,_ggfd ,_bgce rulingList )*wordBag {_agdfa :=_gfaf (_bfae [0],_adgd ,_ggfd ,_bgce );
for _ ,_agae :=range _bfae [1:]{_afbcd :=_aaee (_agae ._bfdff );_agdfa ._cfag [_afbcd ]=append (_agdfa ._cfag [_afbcd ],_agae );_agdfa .PdfRectangle =_faga (_agdfa .PdfRectangle ,_agae .PdfRectangle );};_agdfa .sort ();return _agdfa ;};func _afbe (_fcgb []*textLine ,_dbca map[float64 ][]*textLine )[]*list {_fbbfg :=_gabe (_dbca );
_ebeg :=[]*list {};if len (_fbbfg )==0{return _ebeg ;};_fbeca :=_fbbfg [0];_cfga :=1;_aeagc :=_dbca [_fbeca ];for _afdd ,_gggaf :=range _aeagc {var _caabf float64 ;_cgfc :=[]*list {};_edfee :=_gggaf ._ddgc ;_agcb :=-1.0;if _afdd < len (_aeagc )-1{_agcb =_aeagc [_afdd +1]._ddgc ;
};if _cfga < len (_fbbfg ){_cgfc =_gddg (_fcgb ,_dbca ,_fbbfg ,_cfga ,_edfee ,_agcb );};_caabf =_agcb ;if len (_cgfc )> 0{_baca :=_cgfc [0];if len (_baca ._cfeee )> 0{_caabf =_baca ._cfeee [0]._ddgc ;};};_bbgcf :=[]*textLine {_gggaf };_dadg :=_cggdg (_gggaf ,_fcgb ,_edfee ,_caabf );
_bbgcf =append (_bbgcf ,_dadg ...);_egfb :=_fcff (_bbgcf ,"\u0062\u0075\u006c\u006c\u0065\u0074",_cgfc );_egfb ._cef =_gefb (_bbgcf ,"");_ebeg =append (_ebeg ,_egfb );};return _ebeg ;};

// ToText returns the page text as a single string.
// Deprecated: This function is deprecated and will be removed in a future major version. Please use
// Text() instead.
func (_caab PageText )ToText ()string {return _caab .Text ()};func _aagc (_gfdcg _dc .PdfRectangle ,_bdcgb ,_fgdef ,_afgf ,_ccdcg *ruling )gridTile {_aacg :=_gfdcg .Llx ;_baecc :=_gfdcg .Urx ;_egbaa :=_gfdcg .Lly ;_cabb :=_gfdcg .Ury ;return gridTile {PdfRectangle :_gfdcg ,_bdgbc :_bdcgb !=nil &&_bdcgb .encloses (_egbaa ,_cabb ),_gggf :_fgdef !=nil &&_fgdef .encloses (_egbaa ,_cabb ),_accf :_afgf !=nil &&_afgf .encloses (_aacg ,_baecc ),_daaf :_ccdcg !=nil &&_ccdcg .encloses (_aacg ,_baecc )};
};

// String returns a description of `t`.
func (_ebdd *textTable )String ()string {return _fg .Sprintf ("\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0025\u0074",_ebdd ._cged ,_ebdd ._egfcf ,_ebdd ._baead );};func _dbcgb (_cacc _dc .PdfRectangle )*ruling {return &ruling {_bcdf :_gacba ,_ddbf :_cacc .Llx ,_fbab :_cacc .Lly ,_bgdd :_cacc .Ury };
};func (_ccfg *shapesState )devicePoint (_ccbfa ,_gcedg float64 )_eac .Point {_aafe :=_ccfg ._adgab .Mult (_ccfg ._fedg );_ccbfa ,_gcedg =_aafe .Transform (_ccbfa ,_gcedg );return _eac .NewPoint (_ccbfa ,_gcedg );};type event struct{_gcagf float64 ;_efgga bool ;
_aafba int ;};func (_bfgc *textObject )setWordSpacing (_efg float64 ){if _bfgc ==nil {return ;};_bfgc ._gcfda ._egdb =_efg ;};func (_bcceg *textTable )reduceTiling (_cdeae gridTiling ,_bcca float64 )*textTable {_caed :=make ([]int ,0,_bcceg ._egfcf );_dfaab :=make ([]int ,0,_bcceg ._cged );
_bedeb :=_cdeae ._egaf ;_cagd :=_cdeae ._aaeb ;for _abfb :=0;_abfb < _bcceg ._egfcf ;_abfb ++{_afddg :=_abfb > 0&&_b .Abs (_cagd [_abfb -1]-_cagd [_abfb ])< _bcca &&_bcceg .emptyCompositeRow (_abfb );if !_afddg {_caed =append (_caed ,_abfb );};};for _fgbbc :=0;
_fgbbc < _bcceg ._cged ;_fgbbc ++{_fbba :=_fgbbc < _bcceg ._cged -1&&_b .Abs (_bedeb [_fgbbc +1]-_bedeb [_fgbbc ])< _bcca &&_bcceg .emptyCompositeColumn (_fgbbc );if !_fbba {_dfaab =append (_dfaab ,_fgbbc );};};if len (_caed )==_bcceg ._egfcf &&len (_dfaab )==_bcceg ._cged {return _bcceg ;
};_babgc :=textTable {_baead :_bcceg ._baead ,_cged :len (_dfaab ),_egfcf :len (_caed ),_fbfef :make (map[uint64 ]compositeCell ,len (_dfaab )*len (_caed ))};if _bdcag {_a .Log .Info ("\u0072\u0065\u0064\u0075c\u0065\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0025d\u0078%\u0064\u0020\u002d\u003e\u0020\u0025\u0064x\u0025\u0064",_bcceg ._cged ,_bcceg ._egfcf ,len (_dfaab ),len (_caed ));
_a .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_dfaab );_a .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_caed );};for _dbdf ,_dcgf :=range _caed {for _eggbc ,_bgcfc :=range _dfaab {_baag ,_abfd :=_bcceg .getComposite (_bgcfc ,_dcgf );
if len (_baag )==0{continue ;};if _bdcag {_fg .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_eggbc ,_dbdf ,_bgcfc ,_dcgf ,_geecd (_baag .merge ().text (),50));};_babgc .putComposite (_eggbc ,_dbdf ,_baag ,_abfd );
};};return &_babgc ;};func _adce (_ccgd ,_acefe _dc .PdfRectangle )bool {return _ccgd .Llx <=_acefe .Llx &&_acefe .Urx <=_ccgd .Urx &&_ccgd .Lly <=_acefe .Lly &&_acefe .Ury <=_ccgd .Ury ;};func _dadda (_geec []pathSection ){if _bcdee < 0.0{return ;};if _egfg {_a .Log .Info ("\u0067\u0072\u0061\u006e\u0075\u006c\u0061\u0072\u0069\u007a\u0065\u003a\u0020\u0025\u0064 \u0073u\u0062\u0070\u0061\u0074\u0068\u0020\u0073\u0065\u0063\u0074\u0069\u006f\u006e\u0073",len (_geec ));
};for _dcede ,_degc :=range _geec {for _cafg ,_cfbgb :=range _degc ._ggf {for _gbgf ,_ccec :=range _cfbgb ._gfad {_cfbgb ._gfad [_gbgf ]=_eac .Point {X :_dbfcc (_ccec .X ),Y :_dbfcc (_ccec .Y )};if _egfg {_ggbf :=_cfbgb ._gfad [_gbgf ];if !_edea (_ccec ,_ggbf ){_afegg :=_eac .Point {X :_ggbf .X -_ccec .X ,Y :_ggbf .Y -_ccec .Y };
_fg .Printf ("\u0025\u0034d \u002d\u0020\u00254\u0064\u0020\u002d\u0020%4d\u003a %\u002e\u0032\u0066\u0020\u2192\u0020\u0025.2\u0066\u0020\u0028\u0025\u0067\u0029\u000a",_dcede ,_cafg ,_gbgf ,_ccec ,_ggbf ,_afegg );};};};};};};func _gbggc (_ddab []*wordBag )[]*wordBag {if len (_ddab )<=1{return _ddab ;
};if _gacb {_a .Log .Info ("\u006d\u0065\u0072\u0067\u0065\u0057\u006f\u0072\u0064B\u0061\u0067\u0073\u003a");};_c .Slice (_ddab ,func (_bgec ,_edaef int )bool {_bedee ,_efcbd :=_ddab [_bgec ],_ddab [_edaef ];_gbebc :=_bedee .Width ()*_bedee .Height ();
_agcce :=_efcbd .Width ()*_efcbd .Height ();if _gbebc !=_agcce {return _gbebc > _agcce ;};if _bedee .Height ()!=_efcbd .Height (){return _bedee .Height ()> _efcbd .Height ();};return _bgec < _edaef ;});var _dgbb []*wordBag ;_adaa :=make (intSet );for _acdd :=0;
_acdd < len (_ddab );_acdd ++{if _adaa .has (_acdd ){continue ;};_abde :=_ddab [_acdd ];for _acce :=_acdd +1;_acce < len (_ddab );_acce ++{if _adaa .has (_acdd ){continue ;};_fdcc :=_ddab [_acce ];_cbaee :=_abde .PdfRectangle ;_cbaee .Llx -=_abde ._bdgf ;
if _adce (_cbaee ,_fdcc .PdfRectangle ){_abde .absorb (_fdcc );_adaa .add (_acce );};};_dgbb =append (_dgbb ,_abde );};if len (_ddab )!=len (_dgbb )+len (_adaa ){_a .Log .Error ("\u006d\u0065\u0072ge\u0057\u006f\u0072\u0064\u0042\u0061\u0067\u0073\u003a \u0025d\u2192%\u0064 \u0061\u0062\u0073\u006f\u0072\u0062\u0065\u0064\u003d\u0025\u0064",len (_ddab ),len (_dgbb ),len (_adaa ));
};return _dgbb ;};func _fe (_ca int )bool {return (_ca &1)==0};type gridTiling struct{_dc .PdfRectangle ;_egaf []float64 ;_aaeb []float64 ;_cbfda map[float64 ]map[float64 ]gridTile ;};func (_afad rulingList )sortStrict (){_c .Slice (_afad ,func (_gafgd ,_fecdd int )bool {_feggb ,_gcgg :=_afad [_gafgd ],_afad [_fecdd ];
_gdbe ,_eecef :=_feggb ._bcdf ,_gcgg ._bcdf ;if _gdbe !=_eecef {return _gdbe > _eecef ;};_fccad ,_ecdgf :=_feggb ._ddbf ,_gcgg ._ddbf ;if !_gebb (_fccad -_ecdgf ){return _fccad < _ecdgf ;};_fccad ,_ecdgf =_feggb ._fbab ,_gcgg ._fbab ;if _fccad !=_ecdgf {return _fccad < _ecdgf ;
};return _feggb ._bgdd < _gcgg ._bgdd ;});};var _fc =[]string {"\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0053","\u0042","\u0053","\u0057\u0053","\u0042","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042","\u0042","\u0042","\u0053","\u0057\u0053","\u004f\u004e","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0045\u0053","\u0043\u0053","\u0045\u0053","\u0043\u0053","\u0043\u0053","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0043\u0053","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0043\u0053","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u0042\u004e","\u004f\u004e","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u004e","\u0045\u004e","\u004f\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0045\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c"};
func (_gagf *textObject )setCharSpacing (_ccaa float64 ){if _gagf ==nil {return ;};_gagf ._gcfda ._accg =_ccaa ;if _ecegb {_a .Log .Info ("\u0073\u0065t\u0043\u0068\u0061\u0072\u0053\u0070\u0061\u0063\u0069\u006e\u0067\u003a\u0020\u0025\u002e\u0032\u0066\u0020\u0073\u0074\u0061\u0074e=\u0025\u0073",_ccaa ,_gagf ._gcfda .String ());
};};func _ceea (_bcfce string ,_ecaee []rulingList ){_a .Log .Info ("\u0024\u0024 \u0025\u0064\u0020g\u0072\u0069\u0064\u0073\u0020\u002d\u0020\u0025\u0073",len (_ecaee ),_bcfce );for _ccff ,_gebec :=range _ecaee {_fg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ccff ,_gebec .String ());
};};func (_ccabe gridTile )contains (_gage _dc .PdfRectangle )bool {if _ccabe .numBorders ()< 3{return false ;};if _ccabe ._bdgbc &&_gage .Llx < _ccabe .Llx -_bffd {return false ;};if _ccabe ._gggf &&_gage .Urx > _ccabe .Urx +_bffd {return false ;};if _ccabe ._accf &&_gage .Lly < _ccabe .Lly -_bffd {return false ;
};if _ccabe ._daaf &&_gage .Ury > _ccabe .Ury +_bffd {return false ;};return true ;};func (_cabge *textWord )bbox ()_dc .PdfRectangle {return _cabge .PdfRectangle };func (_eagge paraList )tables ()[]TextTable {var _eebbg []TextTable ;if _bdcag {_a .Log .Info ("\u0070\u0061\u0072\u0061\u0073\u002e\u0074\u0061\u0062\u006c\u0065\u0073\u003a");
};for _ ,_fgbd :=range _eagge {_eeaf :=_fgbd ._aece ;if _eeaf !=nil &&_eeaf .isExportable (){_eebbg =append (_eebbg ,_eeaf .toTextTable ());};};return _eebbg ;};func _caaac (_dbda *list )[]*list {var _bbegd []*list ;for _ ,_eef :=range _dbda ._dbcfd {switch _eef ._fdda {case "\u004c\u0049":_deadf :=_dgbab (_eef );
_eeaa :=_caaac (_eef );_feee :=_fcff (_deadf ,"\u0062\u0075\u006c\u006c\u0065\u0074",_eeaa );_bbgcd :=_gefb (_deadf ,"");_feee ._cef =_bbgcd ;_bbegd =append (_bbegd ,_feee );case "\u004c\u0042\u006fd\u0079":return _caaac (_eef );case "\u004c":_daaae :=_caaac (_eef );
_bbegd =append (_bbegd ,_daaae ...);return _bbegd ;};};return _bbegd ;};func (_aedd paraList )lines ()[]*textLine {var _becee []*textLine ;for _ ,_eeeaf :=range _aedd {_becee =append (_becee ,_eeeaf ._babfe ...);};return _becee ;};func (_fcca *textObject )renderText (_bfe _bd .PdfObject ,_bfgcd []byte ,_gfde int ,_edbab string )error {if _fcca ._gfcd {_a .Log .Debug ("\u0072\u0065\u006e\u0064\u0065r\u0054\u0065\u0078\u0074\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069\u0064 \u0066\u006f\u006e\u0074\u002e\u0020\u004e\u006f\u0074\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u002e");
return nil ;};_ccbf :=_fcca .getCurrentFont ();_ggde :=_ccbf .BytesToCharcodes (_bfgcd );var (_eceb []string ;_efcb int ;_gcdd int ;);if _edbab !=""{_eceb =[]string {_bd .MakeString (_edbab ).Decoded ()};_efcb =1;}else {_eceb ,_efcb ,_gcdd =_ccbf .CharcodesToStrings (_ggde ,"");
if _gcdd > 0{_a .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_efcb ,_gcdd );};};_fcca ._gcfda ._bdgc +=_efcb ;_fcca ._gcfda ._gaff +=_gcdd ;
_febbf :=_fcca ._gcfda ;_bfbf :=_febbf ._ffbg ;_afgea :=_febbf ._deeaf /100.0;_dec :=_gggc ;if _ccbf .Subtype ()=="\u0054\u0079\u0070e\u0033"{_dec =1;};_ddac ,_fega :=_ccbf .GetRuneMetrics (' ');if !_fega {_ddac ,_fega =_ccbf .GetCharMetrics (32);};if !_fega {_ddac ,_ =_dc .DefaultFont ().GetRuneMetrics (' ');
};_gaeb :=_ddac .Wx *_dec ;_a .Log .Trace ("\u0073p\u0061\u0063e\u0057\u0069\u0064t\u0068\u003d\u0025\u002e\u0032\u0066\u0020t\u0065\u0078\u0074\u003d\u0025\u0071 \u0066\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0066\u006f\u006et\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",_gaeb ,_eceb ,_ccbf ,_bfbf );
_eeca :=_eac .NewMatrix (_bfbf *_afgea ,0,0,_bfbf ,0,_febbf ._ebgf );if _ecegb {_a .Log .Info ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0074\u0065\u0078t\u0073\u003d\u0025\u0071",len (_ggde ),_ggde ,_eceb );
};_a .Log .Trace ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0072\u0075\u006ee\u0073\u003d\u0025\u0071",len (_ggde ),_ggde ,len (_eceb ));_dcaf :=_fcca .getFillColor ();
_feab :=_fcca .getStrokeColor ();for _fbac ,_fbec :=range _eceb {_bgeg :=[]rune (_fbec );if len (_bgeg )==1&&_bgeg [0]=='\x00'{continue ;};_gade :=_ggde [_fbac ];_edfe :=_fcca ._bfca .CTM .Mult (_fcca ._ddgbc ).Mult (_eeca );_begd :=0.0;if len (_bgeg )==1&&_bgeg [0]==32{_begd =_febbf ._egdb ;
};_fgfa ,_fcbe :=_ccbf .GetCharMetrics (_gade );if !_fcbe {_a .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u004e\u006f \u006d\u0065\u0074r\u0069\u0063\u0020\u0066\u006f\u0072\u0020\u0063\u006fde\u003d\u0025\u0064 \u0072\u003d0\u0078\u0025\u0030\u0034\u0078\u003d%\u002b\u0071 \u0025\u0073",_gade ,_bgeg ,_bgeg ,_ccbf );
return _fg .Errorf ("\u006e\u006f\u0020\u0063\u0068\u0061\u0072\u0020\u006d\u0065\u0074\u0072\u0069\u0063\u0073:\u0020f\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0063\u006f\u0064\u0065\u003d\u0025\u0064",_ccbf .String (),_gade );};_bcea :=_eac .Point {X :_fgfa .Wx *_dec ,Y :_fgfa .Wy *_dec };
_begf :=_eac .Point {X :(_bcea .X *_bfbf +_begd )*_afgea };_aeda :=_eac .Point {X :(_bcea .X *_bfbf +_febbf ._accg +_begd )*_afgea };if _ecegb {_a .Log .Info ("\u0074\u0066\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0063\u003d\u0025\u002e\u0032f\u0020t\u0077\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_bfbf ,_febbf ._accg ,_febbf ._egdb ,_afgea );
_a .Log .Info ("\u0064x\u002c\u0064\u0079\u003d%\u002e\u0033\u0066\u0020\u00740\u003d%\u002e3\u0066\u0020\u0074\u003d\u0025\u002e\u0033f",_bcea ,_begf ,_aeda );};_ccea :=_affc (_begf );_ffbbd :=_affc (_aeda );_gefe :=_fcca ._bfca .CTM .Mult (_fcca ._ddgbc ).Mult (_ccea );
if _gaca {_a .Log .Info ("e\u006e\u0064\u003a\u000a\tC\u0054M\u003d\u0025\u0073\u000a\u0009 \u0074\u006d\u003d\u0025\u0073\u000a"+"\u0009\u0020t\u0064\u003d\u0025s\u0020\u0078\u006c\u0061\u0074\u003d\u0025\u0073\u000a"+"\u0009t\u0064\u0030\u003d\u0025s\u000a\u0009\u0020\u0020\u2192 \u0025s\u0020x\u006c\u0061\u0074\u003d\u0025\u0073",_fcca ._bfca .CTM ,_fcca ._ddgbc ,_ffbbd ,_bebfg (_fcca ._bfca .CTM .Mult (_fcca ._ddgbc ).Mult (_ffbbd )),_ccea ,_gefe ,_bebfg (_gefe ));
};_bagaa ,_dbfcf :=_fcca .newTextMark (_ega .ExpandLigatures (_bgeg ),_edfe ,_bebfg (_gefe ),_b .Abs (_gaeb *_edfe .ScalingFactorX ()),_ccbf ,_fcca ._gcfda ._accg ,_dcaf ,_feab ,_bfe ,_eceb ,_fbac ,_gfde );if !_dbfcf {_a .Log .Debug ("\u0054\u0065\u0078\u0074\u0020\u006d\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069d\u0065 \u0070\u0061\u0067\u0065\u002e\u0020\u0053\u006b\u0069\u0070\u0070\u0069\u006e\u0067");
continue ;};if _ccbf ==nil {_a .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u002e");}else if _ccbf .Encoder ()==nil {_a .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020N\u006f\u0020\u0065\u006e\u0063\u006f\u0064\u0069\u006eg\u002e\u0020\u0066o\u006et\u003d\u0025\u0073",_ccbf );
}else {if _dddf ,_dccac :=_ccbf .Encoder ().CharcodeToRune (_gade );_dccac {_bagaa ._bcac =string (_dddf );};};_a .Log .Trace ("i\u003d\u0025\u0064\u0020\u0063\u006fd\u0065\u003d\u0025\u0064\u0020\u006d\u0061\u0072\u006b=\u0025\u0073\u0020t\u0072m\u003d\u0025\u0073",_fbac ,_gade ,_bagaa ,_edfe );
_fcca ._edbb =append (_fcca ._edbb ,&_bagaa );_fcca ._ddgbc .Concat (_ffbbd );};return nil ;};func (_cgad *textObject )newTextMark (_dfgc string ,_bcfd _eac .Matrix ,_edbg _eac .Point ,_bfaf float64 ,_adeg *_dc .PdfFont ,_cgab float64 ,_ffca ,_ggefb _df .Color ,_fecga _bd .PdfObject ,_dbfdg []string ,_gdbf int ,_bece int )(textMark ,bool ){_gbab :=_bcfd .Angle ();
_caddb :=_fdeg (_gbab ,_cfge );var _dafdf float64 ;if _caddb %180!=90{_dafdf =_bcfd .ScalingFactorY ();}else {_dafdf =_bcfd .ScalingFactorX ();};_bbdc :=_bebfg (_bcfd );_dfcef :=_dc .PdfRectangle {Llx :_bbdc .X ,Lly :_bbdc .Y ,Urx :_edbg .X ,Ury :_edbg .Y };
switch _caddb %360{case 90:_dfcef .Urx -=_dafdf ;case 180:_dfcef .Ury -=_dafdf ;case 270:_dfcef .Urx +=_dafdf ;case 0:_dfcef .Ury +=_dafdf ;default:_caddb =0;_dfcef .Ury +=_dafdf ;};if _dfcef .Llx > _dfcef .Urx {_dfcef .Llx ,_dfcef .Urx =_dfcef .Urx ,_dfcef .Llx ;
};if _dfcef .Lly > _dfcef .Ury {_dfcef .Lly ,_dfcef .Ury =_dfcef .Ury ,_dfcef .Lly ;};_gdae :=true ;if _cgad ._fbfec ._eee .Width ()> 0{_fcec ,_aaae :=_fdcg (_dfcef ,_cgad ._fbfec ._eee );if !_aaae {_gdae =false ;_a .Log .Debug ("\u0054\u0065\u0078\u0074\u0020m\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069\u0064\u0065\u0020\u0070a\u0067\u0065\u002e\u0020\u0062\u0062\u006f\u0078\u003d\u0025\u0067\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u003d\u0025\u0067\u0020\u0074\u0065\u0078\u0074\u003d\u0025q",_dfcef ,_cgad ._fbfec ._eee ,_dfgc );
};_dfcef =_fcec ;};_bfbfd :=_dfcef ;_gcab :=_cgad ._fbfec ._eee ;switch _caddb %360{case 90:_gcab .Urx ,_gcab .Ury =_gcab .Ury ,_gcab .Urx ;_bfbfd =_dc .PdfRectangle {Llx :_gcab .Urx -_dfcef .Ury ,Urx :_gcab .Urx -_dfcef .Lly ,Lly :_dfcef .Llx ,Ury :_dfcef .Urx };
case 180:_bfbfd =_dc .PdfRectangle {Llx :_gcab .Urx -_dfcef .Llx ,Urx :_gcab .Urx -_dfcef .Urx ,Lly :_gcab .Ury -_dfcef .Lly ,Ury :_gcab .Ury -_dfcef .Ury };case 270:_gcab .Urx ,_gcab .Ury =_gcab .Ury ,_gcab .Urx ;_bfbfd =_dc .PdfRectangle {Llx :_dfcef .Ury ,Urx :_dfcef .Lly ,Lly :_gcab .Ury -_dfcef .Llx ,Ury :_gcab .Ury -_dfcef .Urx };
};if _bfbfd .Llx > _bfbfd .Urx {_bfbfd .Llx ,_bfbfd .Urx =_bfbfd .Urx ,_bfbfd .Llx ;};if _bfbfd .Lly > _bfbfd .Ury {_bfbfd .Lly ,_bfbfd .Ury =_bfbfd .Ury ,_bfbfd .Lly ;};_cgfcb :=textMark {_eeab :_dfgc ,PdfRectangle :_bfbfd ,_aeaae :_dfcef ,_bgac :_adeg ,_cbfc :_dafdf ,_fecg :_cgab ,_fccgda :_bcfd ,_dbdaa :_edbg ,_cdcd :_caddb ,_dcbe :_ffca ,_ccfa :_ggefb ,_bcda :_fecga ,_cgfea :_dbfdg ,Th :_cgad ._gcfda ._deeaf ,Tw :_cgad ._gcfda ._egdb ,_eacg :_bece ,_affa :_gdbf };
if _gdee {_a .Log .Info ("n\u0065\u0077\u0054\u0065\u0078\u0074M\u0061\u0072\u006b\u003a\u0020\u0073t\u0061\u0072\u0074\u003d\u0025\u002e\u0032f\u0020\u0065\u006e\u0064\u003d\u0025\u002e\u0032\u0066\u0020%\u0073",_bbdc ,_edbg ,_cgfcb .String ());};return _cgfcb ,_gdae ;
};func (_gcagd paraList )xNeighbours (_eebg float64 )map[*textPara ][]int {_agdcg :=make ([]event ,2*len (_gcagd ));if _eebg ==0{for _cdegf ,_cgcbc :=range _gcagd {_agdcg [2*_cdegf ]=event {_cgcbc .Llx ,true ,_cdegf };_agdcg [2*_cdegf +1]=event {_cgcbc .Urx ,false ,_cdegf };
};}else {for _faccg ,_afcd :=range _gcagd {_agdcg [2*_faccg ]=event {_afcd .Llx -_eebg *_afcd .fontsize (),true ,_faccg };_agdcg [2*_faccg +1]=event {_afcd .Urx +_eebg *_afcd .fontsize (),false ,_faccg };};};return _gcagd .eventNeighbours (_agdcg );};func (_dgab *textPara )text ()string {_dcag :=new (_ea .Buffer );
_dgab .writeText (_dcag );return _dcag .String ();};func (_gafb paraList )merge ()*textPara {_a .Log .Trace ("\u006d\u0065\u0072\u0067\u0065:\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_gafb ));
if len (_gafb )==0{return nil ;};_gafb .sortReadingOrder ();_bbaee :=_gafb [0].PdfRectangle ;_cffb :=_gafb [0]._babfe ;for _ ,_fbaga :=range _gafb [1:]{_bbaee =_faga (_bbaee ,_fbaga .PdfRectangle );_cffb =append (_cffb ,_fbaga ._babfe ...);};return _dbcg (_bbaee ,_cffb );
};func (_babff rulingList )augmentGrid ()(rulingList ,rulingList ){_gecb ,_cacb :=_babff .vertsHorzs ();if len (_gecb )==0||len (_cacb )==0{return _gecb ,_cacb ;};_ageeb ,_daff :=_gecb ,_cacb ;_ccddd :=_gecb .bbox ();_abbb :=_cacb .bbox ();if _egfg {_a .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0056\u003d\u0025\u0036\u002e\u0032\u0066",_ccddd );
_a .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0048\u003d\u0025\u0036\u002e\u0032\u0066",_abbb );};var _aadd ,_eaggf ,_cceag ,_afdde *ruling ;if _abbb .Llx < _ccddd .Llx -_agaea {_aadd =&ruling {_ddbb :_gbbgc ,_bcdf :_gacba ,_ddbf :_abbb .Llx ,_fbab :_ccddd .Lly ,_bgdd :_ccddd .Ury };
_gecb =append (rulingList {_aadd },_gecb ...);};if _abbb .Urx > _ccddd .Urx +_agaea {_eaggf =&ruling {_ddbb :_gbbgc ,_bcdf :_gacba ,_ddbf :_abbb .Urx ,_fbab :_ccddd .Lly ,_bgdd :_ccddd .Ury };_gecb =append (_gecb ,_eaggf );};if _ccddd .Lly < _abbb .Lly -_agaea {_cceag =&ruling {_ddbb :_gbbgc ,_bcdf :_dafa ,_ddbf :_ccddd .Lly ,_fbab :_abbb .Llx ,_bgdd :_abbb .Urx };
_cacb =append (rulingList {_cceag },_cacb ...);};if _ccddd .Ury > _abbb .Ury +_agaea {_afdde =&ruling {_ddbb :_gbbgc ,_bcdf :_dafa ,_ddbf :_ccddd .Ury ,_fbab :_abbb .Llx ,_bgdd :_abbb .Urx };_cacb =append (_cacb ,_afdde );};if len (_gecb )+len (_cacb )==len (_babff ){return _ageeb ,_daff ;
};_gadc :=append (_gecb ,_cacb ...);_babff .log ("u\u006e\u0061\u0075\u0067\u006d\u0065\u006e\u0074\u0065\u0064");_gadc .log ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0065d");return _gecb ,_cacb ;};

// String returns a description of `v`.
func (_dgad *ruling )String ()string {if _dgad ._bcdf ==_daba {return "\u004e\u004f\u0054\u0020\u0052\u0055\u004c\u0049\u004e\u0047";};_dcee ,_ffaf :="\u0078","\u0079";if _dgad ._bcdf ==_dafa {_dcee ,_ffaf ="\u0079","\u0078";};_geafb :="";if _dgad ._facc !=0.0{_geafb =_fg .Sprintf (" \u0077\u0069\u0064\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_dgad ._facc );
};return _fg .Sprintf ("\u0025\u00310\u0073\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0020\u0025\u0076\u0025\u0073",_dgad ._bcdf ,_dcee ,_dgad ._ddbf ,_ffaf ,_dgad ._fbab ,_dgad ._bgdd ,_dgad ._bgdd -_dgad ._fbab ,_dgad ._ddbb ,_dgad .Color ,_geafb );
};func _fadc (_fagda ,_egdef int )int {if _fagda > _egdef {return _fagda ;};return _egdef ;};func (_aafg *textTable )toTextTable ()TextTable {if _bdcag {_a .Log .Info ("t\u006fT\u0065\u0078\u0074\u0054\u0061\u0062\u006c\u0065:\u0020\u0025\u0064\u0020x \u0025\u0064",_aafg ._cged ,_aafg ._egfcf );
};_bgffae :=make ([][]TableCell ,_aafg ._egfcf );for _fbccg :=0;_fbccg < _aafg ._egfcf ;_fbccg ++{_bgffae [_fbccg ]=make ([]TableCell ,_aafg ._cged );for _cedc :=0;_cedc < _aafg ._cged ;_cedc ++{_fabeb :=_aafg .get (_cedc ,_fbccg );if _fabeb ==nil {continue ;
};_afba (_fabeb ._babfe );if _bdcag {_fg .Printf ("\u0025\u0034\u0064 \u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_cedc ,_fbccg ,_fabeb );};_bgffae [_fbccg ][_cedc ].Text =_fabeb .text ();_bfab :=0;_bgffae [_fbccg ][_cedc ].Marks ._abfg =_fabeb .toTextMarks (&_bfab );
};};_cfef :=TextTable {W :_aafg ._cged ,H :_aafg ._egfcf ,Cells :_bgffae };_cfef .PdfRectangle =_aafg .bbox ();return _cfef ;};func (_fced *textPara )writeText (_ccdde _f .Writer ){if _fced ._aece ==nil {_fced .writeCellText (_ccdde );return ;};for _acae :=0;
_acae < _fced ._aece ._egfcf ;_acae ++{for _agaf :=0;_agaf < _fced ._aece ._cged ;_agaf ++{_cgdc :=_fced ._aece .get (_agaf ,_acae );if _cgdc ==nil {_ccdde .Write ([]byte ("\u0009"));}else {_afba (_cgdc ._babfe );_cgdc .writeCellText (_ccdde );};_ccdde .Write ([]byte ("\u0020"));
};if _acae < _fced ._aece ._egfcf -1{_ccdde .Write ([]byte ("\u000a"));};};};func _cfcc (_aeee ,_eadg ,_bdaa float64 )rulingKind {if _aeee >=_bdaa &&_cabc (_eadg ,_aeee ){return _dafa ;};if _eadg >=_bdaa &&_cabc (_aeee ,_eadg ){return _gacba ;};return _daba ;
};func (_bebf *Extractor )extractPageText (_dggc string ,_agdg *_dc .PdfPageResources ,_cbcc _eac .Matrix ,_gcd int ,_dcg bool )(*PageText ,int ,int ,error ){_a .Log .Trace ("\u0065x\u0074\u0072\u0061\u0063t\u0050\u0061\u0067\u0065\u0054e\u0078t\u003a \u006c\u0065\u0076\u0065\u006c\u003d\u0025d",_gcd );
_fcbc :=&PageText {_bbcc :_bebf ._eee ,_age :_bebf ._gb ,_gcddc :_bebf ._bba };_eba :=_bbeea (_bebf ._eee );var _ced stateStack ;_cbdg :=_fbfa (_bebf ,_agdg ,_cd .GraphicsState {},&_eba ,&_ced );_eeb :=shapesState {_adgab :_cbcc ,_fedg :_eac .IdentityMatrix (),_dfff :_cbdg };
var _acb bool ;_bdc :=-1;_dbbb :="";if _gcd > _gcac {_gef :=_g .New ("\u0066\u006f\u0072\u006d s\u0074\u0061\u0063\u006b\u0020\u006f\u0076\u0065\u0072\u0066\u006c\u006f\u0077");_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0065\u0078\u0074\u0072\u0061\u0063\u0074\u0050\u0061\u0067\u0065\u0054\u0065\u0078\u0074\u002e\u0020\u0072\u0065\u0063u\u0072\u0073\u0069\u006f\u006e\u0020\u006c\u0065\u0076\u0065\u006c\u003d\u0025\u0064 \u0065r\u0072\u003d\u0025\u0076",_gcd ,_gef );
return _fcbc ,_eba ._bdgc ,_eba ._gaff ,_gef ;};_dgdg :=_cd .NewContentStreamParser (_dggc );_bdf ,_dggd :=_dgdg .Parse ();if _dggd !=nil {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020e\u0078\u0074\u0072a\u0063\u0074\u0050\u0061g\u0065\u0054\u0065\u0078\u0074\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dggd );
return _fcbc ,_eba ._bdgc ,_eba ._gaff ,_dggd ;};_fcbc ._ceee =_bdf ;_gag :=_cd .NewContentStreamProcessor (*_bdf );if _bebf ._agd !=nil {_gag .SetRelaxedMode (_bebf ._agd .RelaxedMode );};_gag .AddHandler (_cd .HandlerConditionEnumAllOperands ,"",func (_feedb *_cd .ContentStreamOperation ,_fbb _cd .GraphicsState ,_feebd *_dc .PdfPageResources )error {_abfc :=_feedb .Operand ;
if _adgaf {_a .Log .Info ("\u0026&\u0026\u0020\u006f\u0070\u003d\u0025s",_feedb );};switch _abfc {case "\u0071":if _bbbg {_a .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_eeb ._fedg );};_ced .push (&_eba );case "\u0051":if !_ced .empty (){_eba =*_ced .pop ();
};_eeb ._fedg =_fbb .CTM ;if _bbbg {_a .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_eeb ._fedg );};case "\u0042\u0044\u0043":_gcfc ,_dag :=_bd .GetDict (_feedb .Params [1]);if !_dag {_a .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0042D\u0043\u0020\u006f\u0070\u003d\u0025\u0073 \u0047\u0065\u0074\u0044\u0069\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_feedb );
return _dggd ;};_dcgd :=_gcfc .Get ("\u004d\u0043\u0049\u0044");if _dcgd !=nil {_afe ,_bffg :=_bd .GetIntVal (_dcgd );if !_bffg {_a .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0042\u0044C\u0020\u006f\u0070=\u0025\u0073\u002e\u0020\u0042\u0061\u0064\u0020\u006eum\u0065\u0072\u0069c\u0061\u006c \u006f\u0062\u006a\u0065\u0063\u0074.\u0020\u006f=\u0025\u0073",_feedb ,_dcgd );
};_bdc =_afe ;}else {_bdc =-1;};if _bebf ._gb !=nil &&_bdc !=-1&&_bebf ._cb !=-1&&_bebf ._gb .ParentTree !=nil {_gdbb :=_bebf ._cb ;var _dcd func (_adg []*_dc .KValue )bool ;_dcd =func (_gdag []*_dc .KValue )bool {for _ ,_agdge :=range _gdag {if _dcdd :=_agdge .GetKDict ();
_dcdd !=nil {_ebgb :=_dcdd .GetChildren ();if len (_ebgb )==1&&_ebgb [0].GetMCID ()!=nil {if *_ebgb [0].GetMCID ()==_bdc {if _dcdd .ActualText !=nil {_dbbb =_db .TrimSpace (_dcdd .ActualText .Str ());return true ;};return false ;};}else {return _dcd (_ebgb );
};};};return false ;};if _edcf :=_bebf ._gb .ParentTree .Get ("\u004e\u0075\u006d\u0073");_edcf !=nil {_afbd ,_bce :=_bd .GetArray (_edcf );if !_bce {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0042\u0044\u0043\u0020\u006f\u0070\u003d\u0025\u0073\u002e\u0020\u0042\u0061\u0064\u0020\u004e\u0075m\u0073\u0020\u0061\u0072\u0072a\u0079\u002e \u006f\u003d\u0025\u0073",_feedb ,_edcf );
}else {for _acd :=0;_acd < _afbd .Len ();_acd +=2{if _aga ,_abe :=_bd .GetInt (_afbd .Get (_acd ));_abe {if int (*_aga )==_gdbb {if _ffc :=_afbd .Get (_acd +1);_ffc !=nil {if _fdb ,_fefg :=_bd .GetArray (_ffc );_fefg {for _ ,_ddg :=range _fdb .Elements (){_daaa ,_bcga :=_dc .NewKDictFromPdfObject (_ddg );
if _bcga !=nil {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0042\u0044\u0043\u0020\u006f\u0070\u003d\u0025\u0073\u002e\u0020\u0042\u0061d\u0020\u004b\u0044\u0069\u0063\u0074\u002e \u006f\u003d\u0025\u0073",_feedb ,_ddg );continue ;};_beeb :=_daaa .GetChildren ();
if len (_beeb )==1&&_beeb [0].GetMCID ()!=nil {if *_beeb [0].GetMCID ()==_bdc {if _daaa .ActualText !=nil {_dbbb =_db .TrimSpace (_daaa .ActualText .Str ());};break ;}else if _dcd (_beeb ){break ;};};};};};};};};};};};if _dbbb ==""{_eag :=_gcfc .Get ("\u0041\u0063\u0074\u0075\u0061\u006c\u0054\u0065\u0078\u0074");
if _eag !=nil {_dbbb =_db .TrimSpace (_eag .String ());};};case "\u0045\u004d\u0043":_bdc =-1;_dbbb ="";case "\u0042\u0054":if _acb {_a .Log .Debug ("\u0042\u0054\u0020\u0063\u0061\u006c\u006c\u0065\u0064\u0020\u0077\u0068\u0069\u006c\u0065 \u0069n\u0020\u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
_fcbc ._dggb =append (_fcbc ._dggb ,_cbdg ._edbb ...);};_acb =true ;_bgg :=_fbb ;if _dcg {_bgg =_cd .GraphicsState {};_bgg .CTM =_eeb ._fedg ;};_bgg .CTM =_cbcc .Mult (_bgg .CTM );_cbdg =_fbfa (_bebf ,_feebd ,_bgg ,&_eba ,&_ced );_eeb ._dfff =_cbdg ;case "\u0045\u0054":if !_acb {_a .Log .Debug ("\u0045\u0054\u0020ca\u006c\u006c\u0065\u0064\u0020\u006f\u0075\u0074\u0073i\u0064e\u0020o\u0066 \u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
};_acb =false ;_fcbc ._dggb =append (_fcbc ._dggb ,_cbdg ._edbb ...);_cbdg .reset ();case "\u0054\u002a":_cbdg .nextLine ();case "\u0054\u0064":if _eafg ,_acab :=_cbdg .checkOp (_feedb ,2,true );!_eafg {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_acab );
return _acab ;};_ccdc ,_dcbf ,_ffa :=_fecaa (_feedb .Params );if _ffa !=nil {return _ffa ;};_cbdg .moveText (_ccdc ,_dcbf );case "\u0054\u0044":if _cfc ,_adea :=_cbdg .checkOp (_feedb ,2,true );!_cfc {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_adea );
return _adea ;};_ddgb ,_fgcb ,_ccca :=_fecaa (_feedb .Params );if _ccca !=nil {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ccca );return _ccca ;};_cbdg .moveTextSetLeading (_ddgb ,_fgcb );case "\u0054\u006a":if _fcdg ,_fbd :=_cbdg .checkOp (_feedb ,1,true );
!_fcdg {_a .Log .Debug ("\u0045\u0052\u0052\u004fR:\u0020\u0054\u006a\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0065\u0072\u0072\u003d%\u0076",_feedb ,_fbd );return _fbd ;};_fbf :=_bd .TraceToDirectObject (_feedb .Params [0]);_aae ,_eeea :=_bd .GetStringBytes (_fbf );
if !_eeea {_a .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020T\u006a\u0020o\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074S\u0074\u0072\u0069\u006e\u0067\u0042\u0079\u0074\u0065\u0073\u0020\u0066a\u0069\u006c\u0065\u0064",_feedb );return _bd .ErrTypeError ;
};return _cbdg .showText (_fbf ,_aae ,_bdc ,_dbbb );case "\u0054\u004a":if _acff ,_cbaa :=_cbdg .checkOp (_feedb ,1,true );!_acff {_a .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cbaa );return _cbaa ;
};_aefb ,_egdf :=_bd .GetArray (_feedb .Params [0]);if !_egdf {_a .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_feedb );
return _dggd ;};return _cbdg .showTextAdjusted (_aefb ,_bdc ,_dbbb );case "\u0027":if _aade ,_dcaa :=_cbdg .checkOp (_feedb ,1,true );!_aade {_a .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0027\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dcaa );return _dcaa ;
};_fdbe :=_bd .TraceToDirectObject (_feedb .Params [0]);_cgg ,_cadc :=_bd .GetStringBytes (_fdbe );if !_cadc {_a .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020'\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_feedb );
return _bd .ErrTypeError ;};_cbdg .nextLine ();return _cbdg .showText (_fdbe ,_cgg ,_bdc ,_dbbb );case "\u0022":if _afaef ,_eeeb :=_cbdg .checkOp (_feedb ,3,true );!_afaef {_a .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0022\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_eeeb );
return _eeeb ;};_ffbb ,_ace ,_cca :=_fecaa (_feedb .Params [:2]);if _cca !=nil {return _cca ;};_acea :=_bd .TraceToDirectObject (_feedb .Params [2]);_beec ,_edbe :=_bd .GetStringBytes (_acea );if !_edbe {_a .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020\"\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_feedb );
return _bd .ErrTypeError ;};_cbdg .setCharSpacing (_ffbb );_cbdg .setWordSpacing (_ace );_cbdg .nextLine ();return _cbdg .showText (_acea ,_beec ,_bdc ,_dbbb );case "\u0054\u004c":_bdd ,_gacg :=_fdf (_feedb );if _gacg !=nil {_a .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004c\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gacg );
return _gacg ;};_cbdg .setTextLeading (_bdd );case "\u0054\u0063":_efbc ,_fed :=_fdf (_feedb );if _fed !=nil {_a .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0063\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fed );return _fed ;};_cbdg .setCharSpacing (_efbc );
case "\u0054\u0066":if _fefba ,_eafdb :=_cbdg .checkOp (_feedb ,2,true );!_fefba {_a .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0066\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_eafdb );return _eafdb ;};_cfgf ,_affd :=_bd .GetNameVal (_feedb .Params [0]);
if !_affd {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u004ea\u006d\u0065\u0056\u0061\u006c\u0020\u0066a\u0069\u006c\u0065\u0064",_feedb );return _bd .ErrTypeError ;};_fbcc ,_dgcd :=_bd .GetNumberAsFloat (_feedb .Params [1]);
if !_affd {_a .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u0046\u006c\u006f\u0061\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065d\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_feedb ,_dgcd );
return _dgcd ;};_dgcd =_cbdg .setFont (_cfgf ,_fbcc );_cbdg ._gfcd =_g .Is (_dgcd ,_bd .ErrNotSupported );if _dgcd !=nil &&!_cbdg ._gfcd {return _dgcd ;};case "\u0054\u006d":if _agab ,_dbaa :=_cbdg .checkOp (_feedb ,6,true );!_agab {_a .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u006d\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dbaa );
return _dbaa ;};_bbb ,_ecae :=_bd .GetNumbersAsFloat (_feedb .Params );if _ecae !=nil {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ecae );return _ecae ;};_cbdg .setTextMatrix (_bbb );case "\u0054\u0072":if _cced ,_efbgf :=_cbdg .checkOp (_feedb ,1,true );
!_cced {_a .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0072\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_efbgf );return _efbgf ;};_fbbg ,_gbbf :=_bd .GetIntVal (_feedb .Params [0]);if !_gbbf {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0072\u0020\u006f\u0070\u003d\u0025\u0073 \u0047e\u0074\u0049\u006e\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_feedb );
return _bd .ErrTypeError ;};_cbdg .setTextRenderMode (_fbbg );case "\u0054\u0073":if _eaba ,_ddfc :=_cbdg .checkOp (_feedb ,1,true );!_eaba {_a .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0073\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ddfc );
return _ddfc ;};_bccb ,_faba :=_bd .GetNumberAsFloat (_feedb .Params [0]);if _faba !=nil {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_faba );return _faba ;};_cbdg .setTextRise (_bccb );case "\u0054\u0077":if _bef ,_ceba :=_cbdg .checkOp (_feedb ,1,true );
!_bef {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ceba );return _ceba ;};_gfd ,_fff :=_bd .GetNumberAsFloat (_feedb .Params [0]);if _fff !=nil {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fff );
return _fff ;};_cbdg .setWordSpacing (_gfd );case "\u0054\u007a":if _fcbb ,_bbgg :=_cbdg .checkOp (_feedb ,1,true );!_fcbb {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bbgg );return _bbgg ;};_cfed ,_egc :=_bd .GetNumberAsFloat (_feedb .Params [0]);
if _egc !=nil {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_egc );return _egc ;};_cbdg .setHorizScaling (_cfed );case "\u0063\u006d":if !_dcg {_eeb ._fedg =_fbb .CTM ;};if _eeb ._fedg .Singular (){_bbbb :=_eac .IdentityMatrix ().Translate (_eeb ._fedg .Translation ());
_a .Log .Debug ("S\u0069n\u0067\u0075\u006c\u0061\u0072\u0020\u0063\u0074m\u003d\u0025\u0073\u2192%s",_eeb ._fedg ,_bbbb );_eeb ._fedg =_bbbb ;};if _bbbg {_a .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_eeb ._fedg );};case "\u006d":if len (_feedb .Params )!=2{_a .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_cdb );
return nil ;};_ddbg ,_dadb :=_bd .GetNumbersAsFloat (_feedb .Params );if _dadb !=nil {return _dadb ;};_eeb .moveTo (_ddbg [0],_ddbg [1]);case "\u006c":if len (_feedb .Params )!=2{_a .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_cdb );
return nil ;};_baec ,_gefg :=_bd .GetNumbersAsFloat (_feedb .Params );if _gefg !=nil {return _gefg ;};_eeb .lineTo (_baec [0],_baec [1]);case "\u0063":if len (_feedb .Params )!=6{return _cdb ;};_cbf ,_fgff :=_bd .GetNumbersAsFloat (_feedb .Params );if _fgff !=nil {return _fgff ;
};_a .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_cbf );_eeb .cubicTo (_cbf [0],_cbf [1],_cbf [2],_cbf [3],_cbf [4],_cbf [5]);case "\u0076","\u0079":if len (_feedb .Params )!=4{return _cdb ;
};_agag ,_bdea :=_bd .GetNumbersAsFloat (_feedb .Params );if _bdea !=nil {return _bdea ;};_a .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_agag );_eeb .quadraticTo (_agag [0],_agag [1],_agag [2],_agag [3]);
case "\u0068":_eeb .closePath ();case "\u0072\u0065":if len (_feedb .Params )!=4{return _cdb ;};_gecg ,_aaa :=_bd .GetNumbersAsFloat (_feedb .Params );if _aaa !=nil {return _aaa ;};_eeb .drawRectangle (_gecg [0],_gecg [1],_gecg [2],_gecg [3]);_eeb .closePath ();
case "\u0053":_eeb .stroke (&_fcbc ._dbgg );_eeb .clearPath ();case "\u0073":_eeb .closePath ();_eeb .stroke (&_fcbc ._dbgg );_eeb .clearPath ();case "\u0046":_eeb .fill (&_fcbc ._adbf );_eeb .clearPath ();case "\u0066","\u0066\u002a":_eeb .closePath ();
_eeb .fill (&_fcbc ._adbf );_eeb .clearPath ();case "\u0042","\u0042\u002a":_eeb .fill (&_fcbc ._adbf );_eeb .stroke (&_fcbc ._dbgg );_eeb .clearPath ();case "\u0062","\u0062\u002a":_eeb .closePath ();_eeb .fill (&_fcbc ._adbf );_eeb .stroke (&_fcbc ._dbgg );
_eeb .clearPath ();case "\u006e":_eeb .clearPath ();case "\u0044\u006f":if len (_feedb .Params )==0{_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0058\u004fbj\u0065c\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006f\u0070\u0065\u0072\u0061n\u0064\u0020\u0066\u006f\u0072\u0020\u0044\u006f\u0020\u006f\u0070\u0065\u0072\u0061\u0074\u006f\u0072.\u0020\u0047\u006f\u0074\u0020\u0025\u002b\u0076\u002e",_feedb .Params );
return _bd .ErrRangeError ;};_bdae ,_gbfc :=_bd .GetName (_feedb .Params [0]);if !_gbfc {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0044\u006f\u0020\u006f\u0070e\u0072a\u0074\u006f\u0072\u0020\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006fp\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u002b\u0076\u002e",_feedb .Params [0]);
return _bd .ErrTypeError ;};_ ,_fcafd :=_feebd .GetXObjectByName (*_bdae );if _fcafd !=_dc .XObjectTypeForm {break ;};_gbgg ,_gbfc :=_bebf ._ccg [_bdae .String ()];if !_gbfc {_acgg ,_bfdb :=_feebd .GetXObjectFormByName (*_bdae );if _bfdb !=nil {_a .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_bfdb );
return _bfdb ;};_bbfa ,_bfdb :=_acgg .GetContentStream ();if _bfdb !=nil {_a .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_bfdb );return _bfdb ;};_cggf :=_acgg .Resources ;if _cggf ==nil {_cggf =_feebd ;};_afgc :=_fbb .CTM ;if _ebba ,_dbd :=_bd .GetArray (_acgg .Matrix );
_dbd {_dbge ,_ebad :=_ebba .GetAsFloat64Slice ();if _ebad !=nil {return _ebad ;};if len (_dbge )!=6{return _cdb ;};_gead :=_eac .NewMatrix (_dbge [0],_dbge [1],_dbge [2],_dbge [3],_dbge [4],_dbge [5]);_afgc =_fbb .CTM .Mult (_gead );};_dccf ,_cccd ,_ffcb ,_bfdb :=_bebf .extractPageText (string (_bbfa ),_cggf ,_cbcc .Mult (_afgc ),_gcd +1,false );
if _bfdb !=nil {_a .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_bfdb );return _bfdb ;};_gbgg =textResult {*_dccf ,_cccd ,_ffcb };_bebf ._ccg [_bdae .String ()]=_gbgg ;};_eeb ._fedg =_fbb .CTM ;if _bbbg {_a .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_eeb ._fedg );
};_fcbc ._dggb =append (_fcbc ._dggb ,_gbgg ._gdec ._dggb ...);_fcbc ._dbgg =append (_fcbc ._dbgg ,_gbgg ._gdec ._dbgg ...);_fcbc ._adbf =append (_fcbc ._adbf ,_gbgg ._gdec ._adbf ...);_eba ._bdgc +=_gbgg ._gff ;_eba ._gaff +=_gbgg ._faad ;case "\u0072\u0067","\u0067","\u006b","\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_cbdg ._bfca .ColorspaceNonStroking =_fbb .ColorspaceNonStroking ;
_cbdg ._bfca .ColorNonStroking =_fbb .ColorNonStroking ;case "\u0052\u0047","\u0047","\u004b","\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_cbdg ._bfca .ColorspaceStroking =_fbb .ColorspaceStroking ;_cbdg ._bfca .ColorStroking =_fbb .ColorStroking ;
};return nil ;});_dggd =_gag .Process (_agdg );if _bebf ._agd !=nil &&_bebf ._agd .IncludeAnnotations &&!_dcg {for _ ,_geab :=range _bebf ._dcfc {_bbee ,_bcaf :=_bd .GetDict (_geab .AP );if !_bcaf {continue ;};_eaec ,_bcaf :=_bbee .Get ("\u004e").(*_bd .PdfObjectStream );
if !_bcaf {continue ;};_dgcc ,_ggac :=_bd .DecodeStream (_eaec );if _ggac !=nil {_a .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u006f\u006e\u0020\u0064\u0065c\u006f\u0064\u0065\u0020\u0073\u0074\u0072\u0065\u0061\u006d:\u0020\u0025\u0076",_ggac );
continue ;};_bbgb :=_eaec .PdfObjectDictionary .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s");_bege ,_ggac :=_dc .NewPdfPageResourcesFromDict (_bbgb .(*_bd .PdfObjectDictionary ));if _ggac !=nil {_a .Log .Debug ("\u0045\u0072\u0072\u006f\u0072 \u006f\u006e\u0020\u0067\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0061\u006en\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0020\u0072\u0065\u0073\u006f\u0075\u0072\u0063\u0065\u0073\u003a\u0020\u0025\u0076",_ggac );
continue ;};_aaea :=_eac .IdentityMatrix ();_dea ,_bcaf :=_eaec .PdfObjectDictionary .Get ("\u004d\u0061\u0074\u0072\u0069\u0078").(*_bd .PdfObjectArray );if _bcaf {_bac ,_ecgc :=_dea .GetAsFloat64Slice ();if _ecgc !=nil {_a .Log .Debug ("\u0045\u0072\u0072or\u0020\u006f\u006e\u0020\u0067\u0065\u0074\u0074\u0069n\u0067 \u0066l\u006fa\u0074\u0036\u0034\u0020\u0073\u006c\u0069\u0063\u0065\u003a\u0020\u0025\u0076",_ecgc );
continue ;};if len (_bac )!=6{_a .Log .Debug ("I\u006e\u0076\u0061\u006c\u0069\u0064 \u006d\u0061\u0074\u0072\u0069\u0078\u0020\u0073\u006ci\u0063\u0065\u0020l\u0065n\u0067\u0074\u0068");continue ;};_aaea =_eac .NewMatrix (_bac [0],_bac [1],_bac [2],_bac [3],_bac [4],_bac [5]);
};_cbdc ,_bcaf :=_bebf ._daf [_eaec .String ()];if !_bcaf {_gbga ,_eggb ,_deea ,_fgeb :=_bebf .extractPageText (string (_dgcc ),_bege ,_aaea ,_gcd +1,true );if _fgeb !=nil {_a .Log .Debug ("\u0045\u0052R\u004f\u0052\u0020\u0065x\u0074\u0072a\u0063\u0074\u0069\u006e\u0067\u0020\u0061\u006en\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0020\u0074\u0065\u0078\u0074s\u003a\u0020\u0025\u0076",_fgeb );
continue ;};_cbdc =textResult {*_gbga ,_eggb ,_deea };_bebf ._daf [_eaec .String ()]=_cbdc ;};_fcbc ._dggb =append (_fcbc ._dggb ,_cbdc ._gdec ._dggb ...);_fcbc ._dbgg =append (_fcbc ._dbgg ,_cbdc ._gdec ._dbgg ...);_fcbc ._adbf =append (_fcbc ._adbf ,_cbdc ._gdec ._adbf ...);
_eba ._bdgc +=_cbdc ._gff ;_eba ._gaff +=_cbdc ._faad ;};};return _fcbc ,_eba ._bdgc ,_eba ._gaff ,_dggd ;};func _eabc (_cada ,_agcg bounded )float64 {_befd :=_bfbb (_cada ,_agcg );if !_gebb (_befd ){return _befd ;};return _abfcc (_cada ,_agcg );};func _gcbba (_gbcg string )bool {for _ ,_efed :=range _gbcg {if !_dbg .IsSpace (_efed ){return false ;
};};return true ;};func (_bddbg rectRuling )checkWidth (_fffa ,_bgefee float64 )(float64 ,bool ){_dagc :=_bgefee -_fffa ;_bfea :=_dagc <=_gdeg ;return _dagc ,_bfea ;};type textPara struct{_dc .PdfRectangle ;_bdaed _dc .PdfRectangle ;_babfe []*textLine ;
_aece *textTable ;_cdeb bool ;_affde bool ;_eggfe *textPara ;_dbed *textPara ;_aecea *textPara ;_ecaa *textPara ;_fcdb []list ;};func (_ddaa *textObject )getStrokeColor ()_df .Color {return _dedbe (_ddaa ._bfca .ColorspaceStroking ,_ddaa ._bfca .ColorStroking );
};func (_cgbe rulingList )toTilings ()(rulingList ,[]gridTiling ){_cgbe .log ("\u0074o\u0054\u0069\u006c\u0069\u006e\u0067s");if len (_cgbe )==0{return nil ,nil ;};_cgbe =_cgbe .tidied ("\u0061\u006c\u006c");_cgbe .log ("\u0074\u0069\u0064\u0069\u0065\u0064");
_ceada :=_cgbe .toGrids ();_cbffc :=make ([]gridTiling ,len (_ceada ));for _bgdg ,_dgfcb :=range _ceada {_cbffc [_bgdg ]=_dgfcb .asTiling ();};return _cgbe ,_cbffc ;};func (_dbef *ruling )alignsPrimary (_cddb *ruling )bool {return _dbef ._bcdf ==_cddb ._bcdf &&_b .Abs (_dbef ._ddbf -_cddb ._ddbf )< _gdeg *0.5;
};func _efgbf (_dccab _bd .PdfObject ,_feda _df .Color )(_eb .Image ,error ){_bafg ,_gadgce :=_bd .GetStream (_dccab );if !_gadgce {return nil ,nil ;};_cdggd ,_fedaa :=_dc .NewXObjectImageFromStream (_bafg );if _fedaa !=nil {return nil ,_fedaa ;};_fgade ,_fedaa :=_cdggd .ToImage ();
if _fedaa !=nil {return nil ,_fedaa ;};return _efdc (_fgade ,_feda ),nil ;};func (_gagbg rulingList )sort (){_c .Slice (_gagbg ,_gagbg .comp )};

// String returns a string descibing `i`.
func (_ccbfcd gridTile )String ()string {_ebae :=func (_fdada bool ,_fabd string )string {if _fdada {return _fabd ;};return "\u005f";};return _fg .Sprintf ("\u00256\u002e2\u0066\u0020\u0025\u0031\u0073%\u0031\u0073%\u0031\u0073\u0025\u0031\u0073",_ccbfcd .PdfRectangle ,_ebae (_ccbfcd ._bdgbc ,"\u004c"),_ebae (_ccbfcd ._gggf ,"\u0052"),_ebae (_ccbfcd ._accf ,"\u0042"),_ebae (_ccbfcd ._daaf ,"\u0054"));
};func (_fbeg *wordBag )minDepth ()float64 {return _fbeg ._ebd -(_fbeg .Ury -_fbeg ._bdgf )};func (_cbdae *subpath )isQuadrilateral ()bool {if len (_cbdae ._gfad )< 4||len (_cbdae ._gfad )> 5{return false ;};if len (_cbdae ._gfad )==5{_bcdc :=_cbdae ._gfad [0];
_adcf :=_cbdae ._gfad [4];if _bcdc .X !=_adcf .X ||_bcdc .Y !=_adcf .Y {return false ;};};return true ;};func (_bfge *textLine )bbox ()_dc .PdfRectangle {return _bfge .PdfRectangle };func (_fagf *PageText )getParagraphs ()paraList {var _eff rulingList ;
if _effd {_dgbcd :=_aefbd (_fagf ._dbgg );_eff =append (_eff ,_dgbcd ...);};if _bgcbc {_aefa :=_adca (_fagf ._adbf );_eff =append (_eff ,_aefa ...);};_eff ,_agdf :=_eff .toTilings ();var _ddff paraList ;_dage :=len (_fagf ._dggb );for _gcfcc :=0;_gcfcc < 360&&_dage > 0;
_gcfcc +=90{_aggf :=make ([]*textMark ,0,len (_fagf ._dggb )-_dage );for _ ,_gdgf :=range _fagf ._dggb {if _gdgf ._cdcd ==_gcfcc {_aggf =append (_aggf ,_gdgf );};};if len (_aggf )> 0{_cbbd :=_gfcg (_aggf ,_fagf ._bbcc ,_eff ,_agdf ,_fagf ._aee ._aage ==ExtractionModeLayoutNoBreaks );
_ddff =append (_ddff ,_cbbd ...);_dage -=len (_aggf );};};return _ddff ;};

// String returns a human readable description of `path`.
func (_adcd *subpath )String ()string {_afgg :=_adcd ._gfad ;_fcgae :=len (_afgg );if _fcgae <=5{return _fg .Sprintf ("\u0025d\u003a\u0020\u0025\u0036\u002e\u0032f",_fcgae ,_afgg );};return _fg .Sprintf ("\u0025d\u003a\u0020\u0025\u0036.\u0032\u0066\u0020\u0025\u0036.\u0032f\u0020.\u002e\u002e\u0020\u0025\u0036\u002e\u0032f",_fcgae ,_afgg [0],_afgg [1],_afgg [_fcgae -1]);
};func (_dbgfab *wordBag )removeDuplicates (){if _bfcab {_a .Log .Info ("r\u0065m\u006f\u0076\u0065\u0044\u0075\u0070\u006c\u0069c\u0061\u0074\u0065\u0073: \u0025\u0071",_dbgfab .text ());};for _ ,_acbe :=range _dbgfab .depthIndexes (){if len (_dbgfab ._cfag [_acbe ])==0{continue ;
};_fgcc :=_dbgfab ._cfag [_acbe ][0];_faebd :=_fdge *_fgcc ._bbaa ;_dggf :=_fgcc ._bfdff ;for _ ,_fcbce :=range _dbgfab .depthBand (_dggf ,_dggf +_faebd ){_cdbbd :=map[*textWord ]struct{}{};_dbdaac :=_dbgfab ._cfag [_fcbce ];for _ ,_dcce :=range _dbdaac {if _ ,_afaaa :=_cdbbd [_dcce ];
_afaaa {continue ;};for _ ,_dgcac :=range _dbdaac {if _ ,_dbee :=_cdbbd [_dgcac ];_dbee {continue ;};if _dgcac !=_dcce &&_dgcac ._aegcb ==_dcce ._aegcb &&_b .Abs (_dgcac .Llx -_dcce .Llx )< _faebd &&_b .Abs (_dgcac .Urx -_dcce .Urx )< _faebd &&_b .Abs (_dgcac .Lly -_dcce .Lly )< _faebd &&_b .Abs (_dgcac .Ury -_dcce .Ury )< _faebd {_cdbbd [_dgcac ]=struct{}{};
};};};if len (_cdbbd )> 0{_cefa :=0;for _ ,_bcdg :=range _dbdaac {if _ ,_fbae :=_cdbbd [_bcdg ];!_fbae {_dbdaac [_cefa ]=_bcdg ;_cefa ++;};};_dbgfab ._cfag [_fcbce ]=_dbdaac [:len (_dbdaac )-len (_cdbbd )];if len (_dbgfab ._cfag [_fcbce ])==0{delete (_dbgfab ._cfag ,_fcbce );
};};};};};func _fecaa (_agefc []_bd .PdfObject )(_dgbbb ,_ebfe float64 ,_gafe error ){if len (_agefc )!=2{return 0,0,_fg .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020o\u0066 \u0070\u0061\u0072\u0061\u006d\u0073\u003a \u0025\u0064",len (_agefc ));
};_gceee ,_gafe :=_bd .GetNumbersAsFloat (_agefc );if _gafe !=nil {return 0,0,_gafe ;};return _gceee [0],_gceee [1],nil ;};func (_afag *textTable )markCells (){for _egac :=0;_egac < _afag ._egfcf ;_egac ++{for _adagd :=0;_adagd < _afag ._cged ;_adagd ++{_aded :=_afag .get (_adagd ,_egac );
if _aded !=nil {_aded ._cdeb =true ;};};};};func _ggb (_cbdeg []*_dc .KValue ,_ffbee map[int ][]*textLine ,_bfaa _bd .PdfObject )[]*list {_dgcag :=[]*list {};for _ ,_ccddg :=range _cbdeg {_dcafa :=_ccddg .GetKDict ();_gbbg :=_dcafa .GetChildren ();_adag :=[]*textLine {};
_ffdd :=[]*list {};_bfdfb :=_dcafa .S .(*_bd .PdfObjectName ).String ();_bfeg :=_gbbg [0];_gbfd :=_bfeg .GetMCID ();if len (_gbbg )==1&&_gbfd !=nil &&*_gbfd !=-1{if _dcafa .Pg ==_bfaa {_adag =_ffbee [*_gbfd ];};}else {_ffdd =_ggb (_gbbg ,_ffbee ,_bfaa );
};_afdea :=_fcff (_adag ,_bfdfb ,_ffdd );_dgcag =append (_dgcag ,_afdea );};return _dgcag ;};var (_ffbeee =map[rune ]string {0x0060:"\u0300",0x02CB:"\u0300",0x0027:"\u0301",0x00B4:"\u0301",0x02B9:"\u0301",0x02CA:"\u0301",0x005E:"\u0302",0x02C6:"\u0302",0x007E:"\u0303",0x02DC:"\u0303",0x00AF:"\u0304",0x02C9:"\u0304",0x02D8:"\u0306",0x02D9:"\u0307",0x00A8:"\u0308",0x00B0:"\u030a",0x02DA:"\u030a",0x02BA:"\u030b",0x02DD:"\u030b",0x02C7:"\u030c",0x02C8:"\u030d",0x0022:"\u030e",0x02BB:"\u0312",0x02BC:"\u0313",0x0486:"\u0313",0x055A:"\u0313",0x02BD:"\u0314",0x0485:"\u0314",0x0559:"\u0314",0x02D4:"\u031d",0x02D5:"\u031e",0x02D6:"\u031f",0x02D7:"\u0320",0x02B2:"\u0321",0x00B8:"\u0327",0x02CC:"\u0329",0x02B7:"\u032b",0x02CD:"\u0331",0x005F:"\u0332",0x204E:"\u0359"};
);func _gabe (_gcaa map[float64 ][]*textLine )[]float64 {_gdgc :=[]float64 {};for _bdeab :=range _gcaa {_gdgc =append (_gdgc ,_bdeab );};_c .Float64s (_gdgc );return _gdgc ;};func (_cgac rulingList )tidied (_gfga string )rulingList {_agebc :=_cgac .removeDuplicates ();
_agebc .log ("\u0075n\u0069\u0071\u0075\u0065\u0073");_cebeg :=_agebc .snapToGroups ();if _cebeg ==nil {return nil ;};_cebeg .sort ();if _egfg {_a .Log .Info ("\u0074\u0069\u0064i\u0065\u0064\u003a\u0020\u0025\u0071\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u0075\u006e\u0069\u0071\u0075\u0065\u0073\u003d\u0025\u0064\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0064\u003d\u0025\u0064",_gfga ,len (_cgac ),len (_agebc ),len (_cebeg ));
};_cebeg .log ("\u0063o\u0061\u006c\u0065\u0073\u0063\u0065d");return _cebeg ;};func _deeeb (_abaae _dc .PdfRectangle )*ruling {return &ruling {_bcdf :_dafa ,_ddbf :_abaae .Lly ,_fbab :_abaae .Llx ,_bgdd :_abaae .Urx };};

// String returns a description of `tm`.
func (_bceg *textMark )String ()string {return _fg .Sprintf ("\u0025\u002e\u0032f \u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\u0022\u0025\u0073\u0022",_bceg .PdfRectangle ,_bceg ._cbfc ,_bceg ._eeab );};func (_agdfb *textPara )fontsize ()float64 {return _agdfb ._babfe [0]._fafcg };
func (_effb rulingList )removeDuplicates ()rulingList {if len (_effb )==0{return nil ;};_effb .sort ();_gcfde :=rulingList {_effb [0]};for _ ,_cgbg :=range _effb [1:]{if _cgbg .equals (_gcfde [len (_gcfde )-1]){continue ;};_gcfde =append (_gcfde ,_cgbg );
};return _gcfde ;};func (_aaad rulingList )log (_gafga string ){if !_egfg {return ;};_a .Log .Info ("\u0023\u0023\u0023\u0020\u0025\u0031\u0030\u0073\u003a\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_gafga ,_aaad .String ());for _fgdb ,_eedc :=range _aaad {_fg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fgdb ,_eedc .String ());
};};func (_feaf *textPara )writeCellText (_aacc _f .Writer ){for _bbeeb ,_fafgc :=range _feaf ._babfe {_bebcf :=_fafgc .text ();_dbbg :=_cdeed &&_fafgc .endsInHyphen ()&&_bbeeb !=len (_feaf ._babfe )-1;if _dbbg {_bebcf =_dgeb (_bebcf );};_aacc .Write ([]byte (_bebcf ));
if !(_dbbg ||_bbeeb ==len (_feaf ._babfe )-1){_aacc .Write ([]byte (_cfaf (_fafgc ._ddgc ,_feaf ._babfe [_bbeeb +1]._ddgc )));};};};func _fefed (_cbbdc *textLine )float64 {return _cbbdc ._egdbg [0].Llx };func (_bbfad paraList )list ()[]*list {var _ecafc []*textLine ;
var _dbbca []*textLine ;for _ ,_ebfg :=range _bbfad {_dgff :=_ebfg .getListLines ();_ecafc =append (_ecafc ,_dgff ...);_dbbca =append (_dbbca ,_ebfg ._babfe ...);};_bcade :=_gdac (_ecafc );_eddb :=_afbe (_dbbca ,_bcade );return _eddb ;};

// String returns a string describing `ma`.
func (_deg TextMarkArray )String ()string {_cbaad :=len (_deg ._abfg );if _cbaad ==0{return "\u0045\u004d\u0050T\u0059";};_cgfe :=_deg ._abfg [0];_ede :=_deg ._abfg [_cbaad -1];return _fg .Sprintf ("\u007b\u0054\u0045\u0058\u0054\u004d\u0041\u0052K\u0041\u0052\u0052AY\u003a\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025s\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d%\u0073\u007d",_cbaad ,_cgfe ,_ede );
};func (_efaec rulingList )primaries ()[]float64 {_faaag :=make (map[float64 ]struct{},len (_efaec ));for _ ,_aafae :=range _efaec {_faaag [_aafae ._ddbf ]=struct{}{};};_gbddg :=make ([]float64 ,len (_faaag ));_bccbd :=0;for _gfce :=range _faaag {_gbddg [_bccbd ]=_gfce ;
_bccbd ++;};_c .Float64s (_gbddg );return _gbddg ;};

// String returns a string describing `tm`.
func (_cedf TextMark )String ()string {_geg :=_cedf .BBox ;var _eged string ;if _cedf .Font !=nil {_eged =_cedf .Font .String ();if len (_eged )> 50{_eged =_eged [:50]+"\u002e\u002e\u002e";};};var _cegf string ;if _cedf .Meta {_cegf ="\u0020\u002a\u004d\u002a";
};return _fg .Sprintf ("\u007b\u0054\u0065\u0078t\u004d\u0061\u0072\u006b\u003a\u0020\u0025\u0064\u0020%\u0071\u003d\u0025\u0030\u0032\u0078\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e2\u0066\u0029\u0020\u0028\u00256\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0025\u0073\u007d",_cedf .Offset ,_cedf .Text ,[]rune (_cedf .Text ),_geg .Llx ,_geg .Lly ,_geg .Urx ,_geg .Ury ,_eged ,_cegf );
};func _adecbd (_agfab *wordBag ,_dcfff int )*textLine {_eeda :=_agfab .firstWord (_dcfff );_afde :=textLine {PdfRectangle :_eeda .PdfRectangle ,_fafcg :_eeda ._bbaa ,_ddgc :_eeda ._bfdff };_afde .pullWord (_agfab ,_eeda ,_dcfff );return &_afde ;};func (_adde rulingList )isActualGrid ()(rulingList ,bool ){_febdg ,_baeda :=_adde .augmentGrid ();
if !(len (_febdg )>=_cfca +1&&len (_baeda )>=_eadb +1){if _egfg {_a .Log .Info ("\u0069s\u0041\u0063t\u0075\u0061\u006c\u0047r\u0069\u0064\u003a \u004e\u006f\u0074\u0020\u0061\u006c\u0069\u0067\u006eed\u002e\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u003c\u0020\u0025d\u0020\u0078 \u0025\u0064",len (_febdg ),len (_baeda ),_cfca +1,_eadb +1);
};return nil ,false ;};if _egfg {_a .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075a\u006c\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0073\u0020\u003a\u0020\u0025t\u0020\u0026\u0020\u0025\u0074\u0020\u2192 \u0025\u0074",_adde ,len (_febdg )>=2,len (_baeda )>=2,len (_febdg )>=2&&len (_baeda )>=2);
for _gfab ,_aaffd :=range _adde {_fg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0076\u000a",_gfab ,_aaffd );};};if _gabbg {_fcgef ,_ebfd :=_febdg [0],_febdg [len (_febdg )-1];_bebdg ,_ffafb :=_baeda [0],_baeda [len (_baeda )-1];if !(_ffbba (_fcgef ._ddbf -_bebdg ._fbab )&&_ffbba (_ebfd ._ddbf -_bebdg ._bgdd )&&_ffbba (_bebdg ._ddbf -_fcgef ._bgdd )&&_ffbba (_ffafb ._ddbf -_fcgef ._fbab )){if _egfg {_a .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069d\u003a\u0020\u0020N\u006f\u0074 \u0061\u006c\u0069\u0067\u006e\u0065d\u002e\n\t\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0076\u0031\u003d\u0025\u0073\u000a\u0009\u0068\u0030\u003d\u0025\u0073\u000a\u0009\u0068\u0031\u003d\u0025\u0073",_fcgef ,_ebfd ,_bebdg ,_ffafb );
};return nil ,false ;};}else {if !_febdg .aligned (){if _fefe {_a .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0076\u0065\u0072\u0074\u0073\u002e\u0020%\u0064",len (_febdg ));
};return nil ,false ;};if !_baeda .aligned (){if _egfg {_a .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0068\u006f\u0072\u007a\u0073\u002e\u0020%\u0064",len (_baeda ));
};return nil ,false ;};};_acgd :=append (_febdg ,_baeda ...);return _acgd ,true ;};func (_ecbg lineRuling )asRuling ()(*ruling ,bool ){_fbagd :=ruling {_bcdf :_ecbg ._fadbc ,Color :_ecbg .Color ,_ddbb :_aggca };switch _ecbg ._fadbc {case _gacba :_fbagd ._ddbf =_ecbg .xMean ();
_fbagd ._fbab =_b .Min (_ecbg ._gcagg .Y ,_ecbg ._gacc .Y );_fbagd ._bgdd =_b .Max (_ecbg ._gcagg .Y ,_ecbg ._gacc .Y );case _dafa :_fbagd ._ddbf =_ecbg .yMean ();_fbagd ._fbab =_b .Min (_ecbg ._gcagg .X ,_ecbg ._gacc .X );_fbagd ._bgdd =_b .Max (_ecbg ._gcagg .X ,_ecbg ._gacc .X );
default:_a .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_ecbg ._fadbc );return nil ,false ;};return &_fbagd ,true ;};

// ApplyArea processes the page text only within the specified area `bbox`.
// Each time ApplyArea is called, it updates the result set in `pt`.
// Can be called multiple times in a row with different bounding boxes.
func (_ddgf *PageText )ApplyArea (bbox _dc .PdfRectangle ){_afcce :=make ([]*textMark ,0,len (_ddgf ._dggb ));for _ ,_cebb :=range _ddgf ._dggb {if _adge (_cebb .bbox (),bbox ){_afcce =append (_afcce ,_cebb );};};var _baed paraList ;_acecd :="";_cgbc :=len (_afcce );
for _ffgc :=0;_ffgc < 360&&_cgbc > 0;_ffgc +=90{_bede :=make ([]*textMark ,0,len (_afcce )-_cgbc );for _ ,_ffbe :=range _afcce {if _ffbe ._cdcd ==_ffgc {_bede =append (_bede ,_ffbe );};};if len (_bede )> 0{if _ddgf ._aee ._aage ==ExtractionModePlain {_acecd +=_aefc (_bede ,_ddgf ._bbcc );
}else {_dafd :=_gfcg (_bede ,_ddgf ._bbcc ,nil ,nil ,_ddgf ._aee ._aage ==ExtractionModeLayoutNoBreaks );_baed =append (_baed ,_dafd ...);};_cgbc -=len (_bede );};};if _ddgf ._aee ._aage ==ExtractionModePlain {_ddgf ._gggb =_acecd ;}else {_dgbcb :=new (_ea .Buffer );
_baed .writeText (_dgbcb );_ddgf ._gggb =_dgbcb .String ();_ddgf ._abg =_baed .toTextMarks ();_ddgf ._ecba =_baed .tables ();};};

// ImageExtractOptions contains options for controlling image extraction from
// PDF pages.
type ImageExtractOptions struct{IncludeInlineStencilMasks bool ;};func _fafd (_becb map[float64 ]map[float64 ]gridTile )[]float64 {_eaaf :=make ([]float64 ,0,len (_becb ));for _cgeb :=range _becb {_eaaf =append (_eaaf ,_cgeb );};_c .Float64s (_eaaf );_gegb :=len (_eaaf );
for _ddga :=0;_ddga < _gegb /2;_ddga ++{_eaaf [_ddga ],_eaaf [_gegb -1-_ddga ]=_eaaf [_gegb -1-_ddga ],_eaaf [_ddga ];};return _eaaf ;};func _gebe (_cbea ,_bdeeg _eac .Point ,_dgbae _df .Color )(*ruling ,bool ){_cacg :=lineRuling {_gcagg :_cbea ,_gacc :_bdeeg ,_fadbc :_fgbb (_cbea ,_bdeeg ),Color :_dgbae };
if _cacg ._fadbc ==_daba {return nil ,false ;};return _cacg .asRuling ();};func (_aaegac *textTable )put (_gedc ,_eebd int ,_bfgfa *textPara ){_aaegac ._ecdgfe [_fabee (_gedc ,_eebd )]=_bfgfa ;};func (_bcae *shapesState )establishSubpath ()*subpath {_cbg ,_ebga :=_bcae .lastpointEstablished ();
if !_ebga {_bcae ._bdbb =append (_bcae ._bdbb ,_egdfd (_cbg ));};if len (_bcae ._bdbb )==0{return nil ;};_bcae ._fded =false ;return _bcae ._bdbb [len (_bcae ._bdbb )-1];};func _afba (_daaac []*textLine ){_c .Slice (_daaac ,func (_cgaa ,_efgg int )bool {_egbbc ,_dddafa :=_daaac [_cgaa ],_daaac [_efgg ];
return _egbbc ._ddgc < _dddafa ._ddgc ;});};

// GetContentStreamOps returns the contentStreamOps field of `pt`.
func (_baf *PageText )GetContentStreamOps ()*_cd .ContentStreamOperations {return _baf ._ceee };func _bdba (_bffa func (*wordBag ,*textWord ,float64 )bool ,_bea float64 )func (*wordBag ,*textWord )bool {return func (_ggfdb *wordBag ,_degb *textWord )bool {return _bffa (_ggfdb ,_degb ,_bea )};
};func _ebcd (_dbgfa _dc .PdfRectangle ,_ebed bounded )float64 {return _dbgfa .Ury -_ebed .bbox ().Lly };func (_acac *textObject )setTextRenderMode (_dcbbe int ){if _acac ==nil {return ;};_acac ._gcfda ._gbge =RenderMode (_dcbbe );};func _ddfgd (_ceeef ,_cbgdd _eac .Point )bool {_fggg :=_b .Abs (_ceeef .X -_cbgdd .X );
_feggba :=_b .Abs (_ceeef .Y -_cbgdd .Y );return _cabc (_fggg ,_feggba );};func (_aa *PageFonts )extractPageResourcesToFont (_dfae *_dc .PdfPageResources )error {if _dfae .Font ==nil {return _g .New (_baeg );};_gbc ,_dgc :=_bd .GetDict (_dfae .Font );if !_dgc {return _g .New (_begg );
};for _ ,_ecf :=range _gbc .Keys (){var (_afa =true ;_bf []byte ;_fcea string ;);_caaa ,_afg :=_dfae .GetFontByName (_ecf );if !_afg {return _g .New (_ecb );};_bgc ,_aca :=_dc .NewPdfFontFromPdfObject (_caaa );if _aca !=nil {return _aca ;};_fae :=_bgc .FontDescriptor ();
_gcaf :=_bgc .FontDescriptor ().FontName .String ();_ab :=_bgc .Subtype ();if _fad (_aa .Fonts ,_gcaf ){continue ;};if len (_bgc .ToUnicode ())==0{_afa =false ;};if _fae .FontFile !=nil {if _aff ,_gbd :=_bd .GetStream (_fae .FontFile );_gbd {_bf ,_aca =_bd .DecodeStream (_aff );
if _aca !=nil {return _aca ;};_fcea =_gcaf +"\u002e\u0070\u0066\u0062";};}else if _fae .FontFile2 !=nil {if _bbae ,_afd :=_bd .GetStream (_fae .FontFile2 );_afd {_bf ,_aca =_bd .DecodeStream (_bbae );if _aca !=nil {return _aca ;};_fcea =_gcaf +"\u002e\u0074\u0074\u0066";
};}else if _fae .FontFile3 !=nil {if _ded ,_fgdd :=_bd .GetStream (_fae .FontFile3 );_fgdd {_bf ,_aca =_bd .DecodeStream (_ded );if _aca !=nil {return _aca ;};_fcea =_gcaf +"\u002e\u0063\u0066\u0066";};};if len (_fcea )< 1{_a .Log .Debug (_fdd );};_dbc :=Font {FontName :_gcaf ,PdfFont :_bgc ,IsCID :_bgc .IsCID (),IsSimple :_bgc .IsSimple (),ToUnicode :_afa ,FontType :_ab ,FontData :_bf ,FontFileName :_fcea ,FontDescriptor :_fae };
_aa .Fonts =append (_aa .Fonts ,_dbc );};return nil ;};func _fdf (_fbcd *_cd .ContentStreamOperation )(float64 ,error ){if len (_fbcd .Params )!=1{_feebe :=_g .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");
_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_fbcd .Operand ,1,len (_fbcd .Params ),_fbcd .Params );
return 0.0,_feebe ;};return _bd .GetNumberAsFloat (_fbcd .Params [0]);};func (_ggga *textObject )moveText (_afge ,_ccaf float64 ){_ggga .moveLP (_afge ,_ccaf )};var (_fa =_g .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");
_cdb =_g .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););func _caff (_edae *TextMarkArray )string {_aad :="";for _ ,_gfe :=range _edae .Elements (){_aad +=_gfe .Text ;};return _aad ;};func (_bbda paraList )computeEBBoxes (){if _afda {_a .Log .Info ("\u0063o\u006dp\u0075\u0074\u0065\u0045\u0042\u0042\u006f\u0078\u0065\u0073\u003a");
};for _ ,_cdeg :=range _bbda {_cdeg ._bdaed =_cdeg .PdfRectangle ;};_febc :=_bbda .yNeighbours (0);for _gbdg ,_bbceb :=range _bbda {_efbf :=_bbceb ._bdaed ;_ceacg ,_egedf :=-1.0e9,+1.0e9;for _ ,_dfeac :=range _febc [_bbceb ]{_edfa :=_bbda [_dfeac ]._bdaed ;
if _edfa .Urx < _efbf .Llx {_ceacg =_b .Max (_ceacg ,_edfa .Urx );}else if _efbf .Urx < _edfa .Llx {_egedf =_b .Min (_egedf ,_edfa .Llx );};};for _aeeb ,_edcff :=range _bbda {_babf :=_edcff ._bdaed ;if _gbdg ==_aeeb ||_babf .Ury > _efbf .Lly {continue ;
};if _ceacg <=_babf .Llx &&_babf .Llx < _efbf .Llx {_efbf .Llx =_babf .Llx ;}else if _babf .Urx <=_egedf &&_efbf .Urx < _babf .Urx {_efbf .Urx =_babf .Urx ;};};if _afda {_fg .Printf ("\u0025\u0034\u0064\u003a %\u0036\u002e\u0032\u0066\u2192\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0071\u000a",_gbdg ,_bbceb ._bdaed ,_efbf ,_geecd (_bbceb .text (),50));
};_bbceb ._bdaed =_efbf ;};if _fgfb {for _ ,_ddcg :=range _bbda {_ddcg .PdfRectangle =_ddcg ._bdaed ;};};};func (_cceb *wordBag )depthBand (_eedb ,_ffbdf float64 )[]int {if len (_cceb ._cfag )==0{return nil ;};return _cceb .depthRange (_cceb .getDepthIdx (_eedb ),_cceb .getDepthIdx (_ffbdf ));
};

// Replace takes a pattern and replaces all the texts that much the pattern with `replacement`.
func (_ecd *Editor )Replace (pattern string ,replacement string ,pages []int )error {_cce :=map[int ]Match {};for _ ,_fcad :=range pages {_dgbf ,_dga :=_ecd ._gf .GetPage (_fcad );if _dga !=nil {return _dga ;};_bcc ,_dga :=New (_dgbf );if _dga !=nil {return _dga ;
};_edb ,_ ,_ ,_dga :=_bcc .ExtractPageText ();if _dga !=nil {return _dga ;};_gcfd :="";_becc :=_edb .Text ();_efd ,_dga :=_fde (pattern ,_becc );if _dga !=nil {return _dga ;};_dee :=_edb .Marks ();_efc :=[]Box {};for _ ,_fceg :=range _efd {_gaf ,_gec ,_cgc :=_bda (_fceg ,_dee ,pattern );
if _cgc !=nil {return _cgc ;};_efb :=_gdb (_gaf );_efc =append (_efc ,_gec );replacement ,_cgc =_aafd (_efb ,replacement ,pattern );if _cgc !=nil {return _cgc ;};};_gcfd =_edb .GetContentStreamOps ().String ();_cbbg :=Match {Pattern :pattern ,Indexes :_efd ,Locations :_efc };
_dgbf .SetContentStreams ([]string {_gcfd },_bd .NewFlateEncoder ());_cce [_fcad ]=_cbbg ;};return nil ;};func (_dcfbf *subpath )clear (){*_dcfbf =subpath {}};func (_bcfee *wordBag )depthIndexes ()[]int {if len (_bcfee ._cfag )==0{return nil ;};_ccgf :=make ([]int ,len (_bcfee ._cfag ));
_gagb :=0;for _bdcbf :=range _bcfee ._cfag {_ccgf [_gagb ]=_bdcbf ;_gagb ++;};_c .Ints (_ccgf );return _ccgf ;};var _fcadb =TextMark {Text :"\u005b\u0058\u005d",Original :"\u0020",Meta :true ,FillColor :_df .White ,StrokeColor :_df .White };var _gaecd =map[rulingKind ]string {_daba :"\u006e\u006f\u006e\u0065",_dafa :"\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_gacba :"\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c"};
func _dcea (_cgae _bd .PdfObject ,_gacbc _df .Color )(_eb .Image ,error ){_egfa ,_eegac :=_bd .GetStream (_cgae );if !_eegac {return nil ,nil ;};_ggab ,_ffcc :=_dc .NewXObjectImageFromStream (_egfa );if _ffcc !=nil {return nil ,_ffcc ;};_dcfda ,_ffcc :=_ggab .ToImage ();
if _ffcc !=nil {return nil ,_ffcc ;};return _cdcb (_dcfda ,_gacbc ),nil ;};func (_aabce rulingList )connections (_gbcb map[int ]intSet ,_bddd int )intSet {_badg :=make (intSet );_eabd :=make (intSet );var _dcffa func (int );_dcffa =func (_ccefa int ){if !_eabd .has (_ccefa ){_eabd .add (_ccefa );
for _dbfb :=range _aabce {if _gbcb [_dbfb ].has (_ccefa ){_badg .add (_dbfb );};};for _aaec :=range _aabce {if _badg .has (_aaec ){_dcffa (_aaec );};};};};_dcffa (_bddd );return _badg ;};func _addfg (_cfgb []TextMark ,_dfbcd *int )[]TextMark {_gcbd :=_cfgb [len (_cfgb )-1];
_agage :=[]rune (_gcbd .Text );if len (_agage )==1{_cfgb =_cfgb [:len (_cfgb )-1];_ecdc :=_cfgb [len (_cfgb )-1];*_dfbcd =_ecdc .Offset +len (_ecdc .Text );}else {_fgcd :=_dgeb (_gcbd .Text );*_dfbcd +=len (_fgcd )-len (_gcbd .Text );_gcbd .Text =_fgcd ;
};return _cfgb ;};

// TextMark represents extracted text on a page with information regarding both textual content,
// formatting (font and size) and positioning.
// It is the smallest unit of text on a PDF page, typically a single character.
//
// getBBox() in test_text.go shows how to compute bounding boxes of substrings of extracted text.
// The following code extracts the text on PDF page `page` into `text` then finds the bounding box
// `bbox` of substring `term` in `text`.
//
//	ex, _ := New(page)
//	// handle errors
//	pageText, _, _, err := ex.ExtractPageText()
//	// handle errors
//	text := pageText.Text()
//	textMarks := pageText.Marks()
//
//		start := strings.Index(text, term)
//	 end := start + len(term)
//	 spanMarks, err := textMarks.RangeOffset(start, end)
//	 // handle errors
//	 bbox, ok := spanMarks.BBox()
//	 // handle errors
type TextMark struct{

// Text is the extracted text.
Text string ;

// Original is the text in the PDF. It has not been decoded like `Text`.
Original string ;

// BBox is the bounding box of the text.
BBox _dc .PdfRectangle ;

// Font is the font the text was drawn with.
Font *_dc .PdfFont ;

// FontSize is the font size the text was drawn with.
FontSize float64 ;

// Offset is the offset of the start of TextMark.Text in the extracted text. If you do this
//   text, textMarks := pageText.Text(), pageText.Marks()
//   marks := textMarks.Elements()
// then marks[i].Offset is the offset of marks[i].Text in text.
Offset int ;

// Meta is set true for spaces and line breaks that we insert in the extracted text. We insert
// spaces (line breaks) when we see characters that are over a threshold horizontal (vertical)
//  distance  apart. See wordJoiner (lineJoiner) in PageText.computeViews().
Meta bool ;

// FillColor is the fill color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
FillColor _df .Color ;

// StrokeColor is the stroke color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
StrokeColor _df .Color ;

// Orientation is the text orientation
Orientation int ;

// DirectObject is the underlying PdfObject (Text Object) that represents the visible texts. This is introduced to get
// a simple access to the TextObject in case editing or replacment of some text is needed. E.g during redaction.
DirectObject _bd .PdfObject ;

// ObjString is a decoded string operand of a text-showing operator. It has the same value as `Text` attribute except
// when many glyphs are represented with the same Text Object that contains multiple length string operand in which case
// ObjString spans more than one character string that falls in different TextMark objects.
ObjString []string ;Tw float64 ;Th float64 ;Tc float64 ;Index int ;_fgde bool ;_adaf *TextTable ;};

// ExtractionMode defines different types of extraction mode.
type ExtractionMode int ;func _gfdc (_eece ,_dbgc _eac .Point )rulingKind {_faedc :=_b .Abs (_eece .X -_dbgc .X );_gadf :=_b .Abs (_eece .Y -_dbgc .Y );return _cfcc (_faedc ,_gadf ,_befa );};

// String returns a string describing `pt`.
func (_ccdf PageText )String ()string {_dbfd :=_fg .Sprintf ("P\u0061\u0067\u0065\u0054ex\u0074:\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073",len (_ccdf ._dggb ));_gcdg :=[]string {"\u002d"+_dbfd };for _ ,_acbc :=range _ccdf ._dggb {_gcdg =append (_gcdg ,_acbc .String ());
};_gcdg =append (_gcdg ,"\u002b"+_dbfd );return _db .Join (_gcdg ,"\u000a");};func (_abbg *wordBag )maxDepth ()float64 {return _abbg ._ebd -_abbg .Lly };func (_dfbg *textLine )markWordBoundaries (){_ffba :=_gcbbf *_dfbg ._fafcg ;for _beedg ,_agb :=range _dfbg ._egdbg [1:]{if _gffb (_agb ,_dfbg ._egdbg [_beedg ])>=_ffba {_agb ._gcba =true ;
};};};type textTable struct{_dc .PdfRectangle ;_cged ,_egfcf int ;_baead bool ;_ecdgfe map[uint64 ]*textPara ;_fbfef map[uint64 ]compositeCell ;};func (_dced *textObject )setTextLeading (_cbab float64 ){if _dced ==nil {return ;};_dced ._gcfda ._deeb =_cbab ;
};func (_efdab gridTiling )complete ()bool {for _ ,_addg :=range _efdab ._cbfda {for _ ,_ebea :=range _addg {if !_ebea .complete (){return false ;};};};return true ;};const (_cgd =1.0e-6;_bcdee =1.0e-4;_cfge =10;_ccdbf =6;_dfda =0.5;_gdfe =0.12;_eaed =0.19;
_bfbg =0.04;_fcbbg =1.0;_bffab =0.04;_efbgb =12;_fgfbe =0.4;_eecgf =0.7;_degd =1.0;_begb =0.1;_bfgd =1.4;_egcg =0.46;_gcbbf =0.02;_fdge =0.2;_cgccc =0.5;_caba =4;_dead =4.0;_bagb =6;_cecf =0.3;_bffe =0.01;_gfcdcc =0.02;_cfca =2;_eadb =2;_ecaf =500;_febdc =4.0;
_befa =0.05;_accga =0.1;_agaea =2.0;_gdeg =2.0;_bffd =1.5;_ecad =3.0;_fbed =0.25;);

// String returns a description of `l`.
func (_dedb *textLine )String ()string {return _fg .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_dedb ._ddgc ,_dedb .PdfRectangle ,_dedb ._fafcg ,_dedb .text ());
};func _afdf (_bbaeeg []rulingList )(rulingList ,rulingList ){var _fbdb rulingList ;for _ ,_fgac :=range _bbaeeg {_fbdb =append (_fbdb ,_fgac ...);};return _fbdb .vertsHorzs ();};func (_eceg *shapesState )fill (_acef *[]pathSection ){_befe :=pathSection {_ggf :_eceg ._bdbb ,Color :_eceg ._dfff .getFillColor ()};
*_acef =append (*_acef ,_befe );if _egfg {_geed :=_befe .bbox ();_fg .Printf ("\u0020 \u0020\u0020\u0046\u0049\u004c\u004c\u003a %\u0032\u0064\u0020\u0066\u0069\u006c\u006c\u0073\u0020\u0028\u0025\u0064\u0020\u006ee\u0077\u0029 \u0073\u0073\u003d%\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d\u0025\u0033\u0076\u0020\u0025\u0036\u002e\u0032f\u003d\u00256.\u0032\u0066\u0078%\u0036\u002e\u0032\u0066\u000a",len (*_acef ),len (_befe ._ggf ),_eceg ,_befe .Color ,_geed ,_geed .Width (),_geed .Height ());
if _gbfbe {for _afaa ,_edbda :=range _befe ._ggf {_fg .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_afaa ,_edbda );if _afaa ==10{break ;};};};};};type paraList []*textPara ;func (_cfdcf rulingList )merge ()*ruling {_dcbff :=_cfdcf [0]._ddbf ;
_dedfb :=_cfdcf [0]._fbab ;_cafde :=_cfdcf [0]._bgdd ;for _ ,_fdgd :=range _cfdcf [1:]{_dcbff +=_fdgd ._ddbf ;if _fdgd ._fbab < _dedfb {_dedfb =_fdgd ._fbab ;};if _fdgd ._bgdd > _cafde {_cafde =_fdgd ._bgdd ;};};_faadf :=&ruling {_bcdf :_cfdcf [0]._bcdf ,_ddbb :_cfdcf [0]._ddbb ,Color :_cfdcf [0].Color ,_ddbf :_dcbff /float64 (len (_cfdcf )),_fbab :_dedfb ,_bgdd :_cafde };
if _fefe {_a .Log .Info ("\u006de\u0072g\u0065\u003a\u0020\u0025\u0032d\u0020\u0076e\u0063\u0073\u0020\u0025\u0073",len (_cfdcf ),_faadf );for _dbag ,_dgfce :=range _cfdcf {_fg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dbag ,_dgfce );
};};return _faadf ;};

// Text returns the extracted page text.
func (_dgce PageText )Text ()string {return _dgce ._gggb };func _cfeb (_bgdc []int )[]int {_bdee :=make ([]int ,len (_bgdc ));for _dgedc ,_gadgc :=range _bgdc {_bdee [len (_bgdc )-1-_dgedc ]=_gadgc ;};return _bdee ;};func (_daaed gridTiling )log (_daffc string ){if !_bdcaa {return ;
};_a .Log .Info ("\u0074i\u006ci\u006e\u0067\u003a\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0071",len (_daaed ._egaf ),len (_daaed ._aaeb ),_daffc );_fg .Printf ("\u0020\u0020\u0020l\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a",_daaed ._egaf );
_fg .Printf ("\u0020\u0020\u0020l\u006c\u0079\u003d\u0025\u002e\u0032\u0066\u000a",_daaed ._aaeb );for _cbeb ,_cggfd :=range _daaed ._aaeb {_fedgf ,_fdcda :=_daaed ._cbfda [_cggfd ];if !_fdcda {continue ;};_fg .Printf ("%\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_cbeb ,_cggfd );
for _gdbdd ,_bdbgf :=range _daaed ._egaf {_befb ,_affe :=_fedgf [_bdbgf ];if !_affe {continue ;};_fg .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_gdbdd ,_befb .String ());};};};var _beac =map[markKind ]string {_aggca :"\u0073\u0074\u0072\u006f\u006b\u0065",_edgbf :"\u0066\u0069\u006c\u006c",_gbbgc :"\u0061u\u0067\u006d\u0065\u006e\u0074"};
func (_efdad lineRuling )xMean ()float64 {return 0.5*(_efdad ._gcagg .X +_efdad ._gacc .X )};func (_abff *wordBag )empty (_egad int )bool {_ ,_ecfb :=_abff ._cfag [_egad ];return !_ecfb };func (_efgcg *textTable )reduce ()*textTable {_dbdfc :=make ([]int ,0,_efgcg ._egfcf );
_efgcd :=make ([]int ,0,_efgcg ._cged );for _bgfcd :=0;_bgfcd < _efgcg ._egfcf ;_bgfcd ++{if !_efgcg .emptyCompositeRow (_bgfcd ){_dbdfc =append (_dbdfc ,_bgfcd );};};for _bgae :=0;_bgae < _efgcg ._cged ;_bgae ++{if !_efgcg .emptyCompositeColumn (_bgae ){_efgcd =append (_efgcd ,_bgae );
};};if len (_dbdfc )==_efgcg ._egfcf &&len (_efgcd )==_efgcg ._cged {return _efgcg ;};_edcde :=textTable {_baead :_efgcg ._baead ,_cged :len (_efgcd ),_egfcf :len (_dbdfc ),_ecdgfe :make (map[uint64 ]*textPara ,len (_efgcd )*len (_dbdfc ))};if _bdcag {_a .Log .Info ("\u0072\u0065\u0064\u0075ce\u003a\u0020\u0025\u0064\u0078\u0025\u0064\u0020\u002d\u003e\u0020\u0025\u0064\u0078%\u0064",_efgcg ._cged ,_efgcg ._egfcf ,len (_efgcd ),len (_dbdfc ));
_a .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_efgcd );_a .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_dbdfc );};for _dffab ,_gggee :=range _dbdfc {for _ceacc ,_cgcb :=range _efgcd {_ececf ,_eecb :=_efgcg .getComposite (_cgcb ,_gggee );
if _ececf ==nil {continue ;};if _bdcag {_fg .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_ceacc ,_dffab ,_cgcb ,_gggee ,_geecd (_ececf .merge ().text (),50));};_edcde .putComposite (_ceacc ,_dffab ,_ececf ,_eecb );
};};return &_edcde ;};func (_gdd *wordBag )firstWord (_ggfg int )*textWord {return _gdd ._cfag [_ggfg ][0]};type rulingList []*ruling ;func _cfaf (_dedcc ,_fggc float64 )string {_ecag :=!_gebb (_dedcc -_fggc );if _ecag {return "\u000a";};return "\u0020";
};func _feefcf (_effa []TextMark ,_fgag *TextTable )[]TextMark {var _ebdg []TextMark ;for _ ,_cge :=range _effa {_cge ._fgde =true ;_cge ._adaf =_fgag ;_ebdg =append (_ebdg ,_cge );};return _ebdg ;};

// ExtractFonts returns all font information from the page extractor, including
// font name, font type, the raw data of the embedded font file (if embedded), font descriptor and more.
//
// The argument `previousPageFonts` is used when trying to build a complete font catalog for multiple pages or the entire document.
// The entries from `previousPageFonts` are added to the returned result unless already included in the page, i.e. no duplicate entries.
//
// NOTE: If previousPageFonts is nil, all fonts from the page will be returned. Use it when building up a full list of fonts for a document or page range.
func (_geb *Extractor )ExtractFonts (previousPageFonts *PageFonts )(*PageFonts ,error ){_fda :=PageFonts {};_dge :=_fda .extractPageResourcesToFont (_geb ._dfgf );if _dge !=nil {return nil ,_dge ;};if previousPageFonts !=nil {for _ ,_bee :=range previousPageFonts .Fonts {if !_fad (_fda .Fonts ,_bee .FontName ){_fda .Fonts =append (_fda .Fonts ,_bee );
};};};return &PageFonts {Fonts :_fda .Fonts },nil ;};func (_eega *textTable )logComposite (_ddacb string ){if !_bdcag {return ;};_a .Log .Info ("\u007e~\u007eP\u0061\u0072\u0061\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_eega ._cged ,_eega ._egfcf ,_ddacb );
_fg .Printf ("\u0025\u0035\u0073 \u007c","");for _abbee :=0;_abbee < _eega ._cged ;_abbee ++{_fg .Printf ("\u0025\u0033\u0064 \u007c",_abbee );};_fg .Println ("");_fg .Printf ("\u0025\u0035\u0073 \u002b","");for _dagf :=0;_dagf < _eega ._cged ;_dagf ++{_fg .Printf ("\u0025\u0033\u0073 \u002b","\u002d\u002d\u002d");
};_fg .Println ("");for _cabaf :=0;_cabaf < _eega ._egfcf ;_cabaf ++{_fg .Printf ("\u0025\u0035\u0064 \u007c",_cabaf );for _egbc :=0;_egbc < _eega ._cged ;_egbc ++{_gcfdd ,_ :=_eega ._fbfef [_fabee (_egbc ,_cabaf )].parasBBox ();_fg .Printf ("\u0025\u0033\u0064 \u007c",len (_gcfdd ));
};_fg .Println ("");};_a .Log .Info ("\u007e~\u007eT\u0065\u0078\u0074\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_eega ._cged ,_eega ._egfcf ,_ddacb );_fg .Printf ("\u0025\u0035\u0073 \u007c","");for _beda :=0;_beda < _eega ._cged ;_beda ++{_fg .Printf ("\u0025\u0031\u0032\u0064\u0020\u007c",_beda );
};_fg .Println ("");_fg .Printf ("\u0025\u0035\u0073 \u002b","");for _cagc :=0;_cagc < _eega ._cged ;_cagc ++{_fg .Print ("\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d-\u002d\u002d\u002d\u002b");};_fg .Println ("");for _bdfgg :=0;_bdfgg < _eega ._egfcf ;
_bdfgg ++{_fg .Printf ("\u0025\u0035\u0064 \u007c",_bdfgg );for _ffcdb :=0;_ffcdb < _eega ._cged ;_ffcdb ++{_bggc ,_ :=_eega ._fbfef [_fabee (_ffcdb ,_bdfgg )].parasBBox ();_fcbg :="";_abddc :=_bggc .merge ();if _abddc !=nil {_fcbg =_abddc .text ();};_fcbg =_fg .Sprintf ("\u0025\u0071",_geecd (_fcbg ,12));
_fcbg =_fcbg [1:len (_fcbg )-1];_fg .Printf ("\u0025\u0031\u0032\u0073\u0020\u007c",_fcbg );};_fg .Println ("");};};func _cbfgf (_gggae []compositeCell )[]float64 {var _ccdg []*textLine ;_dgdde :=0;for _ ,_eaddb :=range _gggae {_dgdde +=len (_eaddb .paraList );
_ccdg =append (_ccdg ,_eaddb .lines ()...);};_c .Slice (_ccdg ,func (_ebec ,_fgfdf int )bool {_affb ,_dcge :=_ccdg [_ebec ],_ccdg [_fgfdf ];_dggg ,_acfff :=_affb ._ddgc ,_dcge ._ddgc ;if !_gebb (_dggg -_acfff ){return _dggg < _acfff ;};return _affb .Llx < _dcge .Llx ;
});if _bdcag {_fg .Printf ("\u0020\u0020\u0020 r\u006f\u0077\u0042\u006f\u0072\u0064\u0065\u0072\u0073:\u0020%\u0064 \u0070a\u0072\u0061\u0073\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",_dgdde ,len (_ccdg ));for _gbaa ,_acdbg :=range _ccdg {_fg .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_gbaa ,_acdbg );
};};var _dfaa []float64 ;_bfgbe :=_ccdg [0];var _bacdg [][]*textLine ;_begeb :=[]*textLine {_bfgbe };for _gdgfb ,_gbacg :=range _ccdg [1:]{if _gbacg .Ury < _bfgbe .Lly {_cedcc :=0.5*(_gbacg .Ury +_bfgbe .Lly );if _bdcag {_fg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u003c\u0020\u0025\u0036.\u0032f\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u003d\u0025\u0036\u002e\u0032\u0066\u000a"+"\u0009\u0020\u0071\u003d\u0025\u0073\u000a\u0009\u0020p\u003d\u0025\u0073\u000a",_gdgfb ,_gbacg .Ury ,_bfgbe .Lly ,_cedcc ,_bfgbe ,_gbacg );
};_dfaa =append (_dfaa ,_cedcc );_bacdg =append (_bacdg ,_begeb );_begeb =nil ;};_begeb =append (_begeb ,_gbacg );if _gbacg .Lly < _bfgbe .Lly {_bfgbe =_gbacg ;};};if len (_begeb )> 0{_bacdg =append (_bacdg ,_begeb );};if _bdcag {_fg .Printf (" \u0020\u0020\u0020\u0020\u0020\u0020 \u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073\u003d%\u0036.\u0032\u0066\u000a",_dfaa );
};if _bdcag {_a .Log .Info ("\u0072\u006f\u0077\u003d\u0025\u0064",len (_gggae ));for _ceegf ,_bgffc :=range _gggae {_fg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ceegf ,_bgffc );};_a .Log .Info ("\u0067r\u006f\u0075\u0070\u0073\u003d\u0025d",len (_bacdg ));
for _bgcg ,_cfdcge :=range _bacdg {_fg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0064\u000a",_bgcg ,len (_cfdcge ));for _ddbce ,_cgdec :=range _cfdcge {_fg .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_ddbce ,_cgdec );};};};_abda :=true ;
for _ebfb ,_bcabc :=range _bacdg {_ddec :=true ;for _bgced ,_edfcg :=range _gggae {if _bdcag {_fg .Printf ("\u0020\u0020\u0020\u007e\u007e\u007e\u0067\u0072\u006f\u0075\u0070\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0020\u0063\u0065\u006cl\u0020\u0025\u0064\u0020\u006ff\u0020\u0025d\u0020\u0025\u0073\u000a",_ebfb ,len (_bacdg ),_bgced ,len (_gggae ),_edfcg );
};if !_edfcg .hasLines (_bcabc ){if _bdcag {_fg .Printf ("\u0020\u0020\u0020\u0021\u0021\u0021\u0067\u0072\u006f\u0075\u0070\u0020\u0025d\u0020\u006f\u0066\u0020\u0025\u0064 \u0063\u0065\u006c\u006c\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064 \u004f\u0055\u0054\u000a",_ebfb ,len (_bacdg ),_bgced ,len (_gggae ));
};_ddec =false ;break ;};};if !_ddec {_abda =false ;break ;};};if !_abda {if _bdcag {_a .Log .Info ("\u0072\u006f\u0077\u0020\u0063o\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u0020\u0064\u006f\u006e\u0027\u0074 \u0073\u0070\u0061\u006e\u0020\u0061\u006c\u006c\u0020\u0063\u0065\u006c\u006c\u0073\u0020\u0069\u006e\u0020\u0072\u006f\u0077\u002e\u0020\u0069\u0067\u006e\u006f\u0072\u0069\u006eg");
};_dfaa =nil ;};if _bdcag &&_dfaa !=nil {_fg .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u002a\u002a*\u0072\u006f\u0077\u0043\u006f\u0072\u0072i\u0064\u006f\u0072\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u000a",_dfaa );};return _dfaa ;};


// String returns a description of `p`.
func (_gfcc *textPara )String ()string {if _gfcc ._affde {return _fg .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u005b\u0045\u004d\u0050\u0054\u0059\u005d",_gfcc .PdfRectangle );};_cgcac :="";if _gfcc ._aece !=nil {_cgcac =_fg .Sprintf ("\u005b\u0025\u0064\u0078\u0025\u0064\u005d\u0020",_gfcc ._aece ._cged ,_gfcc ._aece ._egfcf );
};return _fg .Sprintf ("\u0025\u0036\u002e\u0032f \u0025\u0073\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u0020\u0025\u0071",_gfcc .PdfRectangle ,_cgcac ,len (_gfcc ._babfe ),_geecd (_gfcc .text (),50));};func (_geef *textPara )bbox ()_dc .PdfRectangle {return _geef .PdfRectangle };
func (_fdegg *textWord )appendMark (_aaede *textMark ,_edgf _dc .PdfRectangle ){_fdegg ._egded =append (_fdegg ._egded ,_aaede );_fdegg .PdfRectangle =_faga (_fdegg .PdfRectangle ,_aaede .PdfRectangle );if _aaede ._cbfc > _fdegg ._bbaa {_fdegg ._bbaa =_aaede ._cbfc ;
};_fdegg ._bfdff =_edgf .Ury -_fdegg .Lly ;};func _fde (_ffb string ,_dde string )([][]int ,error ){_ccf ,_bcfa :=_ed .Compile (_ffb );if _bcfa !=nil {return nil ,_fg .Errorf ("\u0065\u0072\u0072\u006f\u0072\u0020c\u006f\u006d\u0070\u0069\u006c\u0069\u006e\u0067\u0020\u0072\u0065\u0067\u0065x\u0020\u0070\u0061\u0074\u0074\u0065\u0072n\u003a\u0020\u0025\u0077",_bcfa );
};_dfbe :=_ccf .FindAllStringIndex (_dde ,-1);return _dfbe ,nil ;};func _bdaad (_abcbd ,_bcaba int )int {if _abcbd < _bcaba {return _abcbd ;};return _bcaba ;};func (_bddb *wordBag )getDepthIdx (_dggcb float64 )int {_ccab :=_bddb .depthIndexes ();_ebfc :=_aaee (_dggcb );
if _ebfc < _ccab [0]{return _ccab [0];};if _ebfc > _ccab [len (_ccab )-1]{return _ccab [len (_ccab )-1];};return _ebfc ;};type intSet map[int ]struct{};func (_dddg *textObject )getCurrentFont ()*_dc .PdfFont {_aafc :=_dddg ._gcfda ._deeag ;if _aafc ==nil {_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020U\u0073\u0069\u006e\u0067\u0020d\u0065\u0066a\u0075\u006c\u0074\u002e");
return _dc .DefaultFont ();};return _aafc ;};func (_ddbbb paraList )extractTables (_fbbb []gridTiling )paraList {if _bdcag {_a .Log .Debug ("\u0065\u0078\u0074r\u0061\u0063\u0074\u0054\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_ddbbb ));
};if len (_ddbbb )< _bagb {return _ddbbb ;};_cgdb :=_ddbbb .findTables (_fbbb );if _bdcag {_a .Log .Info ("c\u006f\u006d\u0062\u0069\u006e\u0065d\u0020\u0074\u0061\u0062\u006c\u0065s\u0020\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_cgdb ));
for _efgb ,_cgbcg :=range _cgdb {_cgbcg .log (_fg .Sprintf ("c\u006f\u006d\u0062\u0069\u006e\u0065\u0064\u0020\u0025\u0064",_efgb ));};};return _ddbbb .applyTables (_cgdb );};func (_addef *textTable )compositeColCorridors ()map[int ][]float64 {_abdc :=make (map[int ][]float64 ,_addef ._cged );
if _bdcag {_a .Log .Info ("\u0063\u006f\u006d\u0070o\u0073\u0069\u0074\u0065\u0043\u006f\u006c\u0043\u006f\u0072r\u0069d\u006f\u0072\u0073\u003a\u0020\u0077\u003d%\u0064\u0020",_addef ._cged );};for _daag :=0;_daag < _addef ._cged ;_daag ++{_abdc [_daag ]=nil ;
};return _abdc ;};func (_egdcc rulingList )snapToGroups ()rulingList {_dbdcg ,_dfba :=_egdcc .vertsHorzs ();if len (_dbdcg )> 0{_dbdcg =_dbdcg .snapToGroupsDirection ();};if len (_dfba )> 0{_dfba =_dfba .snapToGroupsDirection ();};_ceacd :=append (_dbdcg ,_dfba ...);
_ceacd .log ("\u0073\u006e\u0061p\u0054\u006f\u0047\u0072\u006f\u0075\u0070\u0073");return _ceacd ;};func (_bfcad *textTable )growTable (){_dggaf :=func (_ebdaf paraList ){_bfcad ._egfcf ++;for _ggfdd :=0;_ggfdd < _bfcad ._cged ;_ggfdd ++{_defgfb :=_ebdaf [_ggfdd ];
_bfcad .put (_ggfdd ,_bfcad ._egfcf -1,_defgfb );};};_cfbfd :=func (_cdff paraList ){_bfcad ._cged ++;for _fgbab :=0;_fgbab < _bfcad ._egfcf ;_fgbab ++{_gdccd :=_cdff [_fgbab ];_bfcad .put (_bfcad ._cged -1,_fgbab ,_gdccd );};};if _cacea {_bfcad .log ("\u0067r\u006f\u0077\u0054\u0061\u0062\u006ce");
};for _agbg :=0;;_agbg ++{_gaed :=false ;_cfgga :=_bfcad .getDown ();_cdag :=_bfcad .getRight ();if _cacea {_fg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_agbg ,_bfcad );_fg .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0020\u0064\u006f\u0077\u006e\u003d\u0025\u0073\u000a",_cfgga );
_fg .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0072\u0069\u0067\u0068\u0074\u003d\u0025\u0073\u000a",_cdag );};if _cfgga !=nil &&_cdag !=nil {_fadbg :=_cfgga [len (_cfgga )-1];if !_fadbg .taken ()&&_fadbg ==_cdag [len (_cdag )-1]{_dggaf (_cfgga );if _cdag =_bfcad .getRight ();
_cdag !=nil {_cfbfd (_cdag );_bfcad .put (_bfcad ._cged -1,_bfcad ._egfcf -1,_fadbg );};_gaed =true ;};};if !_gaed &&_cfgga !=nil {_dggaf (_cfgga );_gaed =true ;};if !_gaed &&_cdag !=nil {_cfbfd (_cdag );_gaed =true ;};if !_gaed {break ;};};};func (_eeae *shapesState )closePath (){if _eeae ._fded {_eeae ._bdbb =append (_eeae ._bdbb ,_egdfd (_eeae ._cebe ));
_eeae ._fded =false ;}else if len (_eeae ._bdbb )==0{if _bbbg {_a .Log .Debug ("\u0063\u006c\u006f\u0073eP\u0061\u0074\u0068\u0020\u0077\u0069\u0074\u0068\u0020\u006e\u006f\u0020\u0070\u0061t\u0068");};_eeae ._fded =false ;return ;};_eeae ._bdbb [len (_eeae ._bdbb )-1].close ();
if _bbbg {_a .Log .Info ("\u0063\u006c\u006f\u0073\u0065\u0050\u0061\u0074\u0068\u003a\u0020\u0025\u0073",_eeae );};};func _fecd (_cabd []byte ,_faa *_dc .PdfFont )string {_adad :=_faa .BytesToCharcodes (_cabd );_aag ,_aaff ,_bcag :=_faa .CharcodesToStrings (_adad ,"");
if _bcag > 0{_a .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_aaff ,_bcag );};_dcab :=_db .Join (_aag ,"");return _dcab ;
};

// Extractor stores and offers functionality for extracting content from PDF pages.
type Extractor struct{_aec string ;_dfgf *_dc .PdfPageResources ;_eee _dc .PdfRectangle ;_ecc *_dc .PdfRectangle ;_cb int ;_ggd map[string ]fontEntry ;_ccg map[string ]textResult ;_daf map[string ]textResult ;_fec int64 ;_agd *Options ;_gb *_dc .StructTreeRoot ;
_bba _bd .PdfObject ;_dcfc []*_dc .PdfAnnotation ;};type textLine struct{_dc .PdfRectangle ;_ddgc float64 ;_egdbg []*textWord ;_fafcg float64 ;};func (_edadc *textTable )emptyCompositeColumn (_gcge int )bool {for _dbebb :=0;_dbebb < _edadc ._egfcf ;_dbebb ++{if _bgcfcc ,_edbbd :=_edadc ._fbfef [_fabee (_gcge ,_dbebb )];
_edbbd {if len (_bgcfcc .paraList )> 0{return false ;};};};return true ;};func (_faeb *textLine )appendWord (_dagg *textWord ){_faeb ._egdbg =append (_faeb ._egdbg ,_dagg );_faeb .PdfRectangle =_faga (_faeb .PdfRectangle ,_dagg .PdfRectangle );if _dagg ._bbaa > _faeb ._fafcg {_faeb ._fafcg =_dagg ._bbaa ;
};if _dagg ._bfdff > _faeb ._ddgc {_faeb ._ddgc =_dagg ._bfdff ;};};func (_bdac *textObject )reset (){_bdac ._ddgbc =_eac .IdentityMatrix ();_bdac ._dcde =_eac .IdentityMatrix ();_bdac ._edbb =nil ;};func _cdfa (_aacfa ,_aeaeb float64 )bool {return _b .Abs (_aacfa -_aeaeb )<=_agaea };
func (_adgeb rulingList )intersections ()map[int ]intSet {var _bbadb ,_cdge []int ;for _geag ,_gfgg :=range _adgeb {switch _gfgg ._bcdf {case _gacba :_bbadb =append (_bbadb ,_geag );case _dafa :_cdge =append (_cdge ,_geag );};};if len (_bbadb )< _cfca +1||len (_cdge )< _eadb +1{return nil ;
};if len (_bbadb )+len (_cdge )> _ecaf {_a .Log .Debug ("\u0069\u006e\u0074\u0065\u0072\u0073e\u0063\u0074\u0069\u006f\u006e\u0073\u003a\u0020\u0054\u004f\u004f\u0020\u004d\u0041\u004e\u0059\u0020\u0072\u0075\u006ci\u006e\u0067\u0073\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u003d\u0020%\u0064 \u0078\u0020\u0025\u0064",len (_adgeb ),len (_bbadb ),len (_cdge ));
return nil ;};_dcbc :=make (map[int ]intSet ,len (_bbadb )+len (_cdge ));for _ ,_gbde :=range _bbadb {for _ ,_ebabe :=range _cdge {if _adgeb [_gbde ].intersects (_adgeb [_ebabe ]){if _ ,_cege :=_dcbc [_gbde ];!_cege {_dcbc [_gbde ]=make (intSet );};if _ ,_bbffb :=_dcbc [_ebabe ];
!_bbffb {_dcbc [_ebabe ]=make (intSet );};_dcbc [_gbde ].add (_ebabe );_dcbc [_ebabe ].add (_gbde );};};};return _dcbc ;};type textResult struct{_gdec PageText ;_gff int ;_faad int ;};func _fedd (_bcfc []*textLine )[]*textLine {_efdf :=[]*textLine {};for _ ,_bfgf :=range _bcfc {_bdfg :=_bfgf .text ();
_bebe :=_efce .Find ([]byte (_bdfg ));if _bebe !=nil {_efdf =append (_efdf ,_bfgf );};};return _efdf ;};func (_dfge *textLine )toTextMarks (_gbbcg *int )[]TextMark {var _dbe []TextMark ;for _ ,_fbff :=range _dfge ._egdbg {if _fbff ._gcba {_dbe =_eaggb (_dbe ,_gbbcg ,"\u0020");
};_ffea :=_fbff .toTextMarks (_gbbcg );_dbe =append (_dbe ,_ffea ...);};return _dbe ;};func _egcfg (_ggfcb []*textMark ,_beaef _dc .PdfRectangle )*textWord {_eggg :=_ggfcb [0].PdfRectangle ;_gedab :=_ggfcb [0]._cbfc ;for _ ,_fdccbd :=range _ggfcb [1:]{_eggg =_faga (_eggg ,_fdccbd .PdfRectangle );
if _fdccbd ._cbfc > _gedab {_gedab =_fdccbd ._cbfc ;};};return &textWord {PdfRectangle :_eggg ,_egded :_ggfcb ,_bfdff :_beaef .Ury -_eggg .Lly ,_bbaa :_gedab };};func (_gebd *textPara )toTextMarks (_fagfd *int )[]TextMark {if _gebd ._aece ==nil {return _gebd .toCellTextMarks (_fagfd );
};var _ebebb []TextMark ;for _cafd :=0;_cafd < _gebd ._aece ._egfcf ;_cafd ++{for _afca :=0;_afca < _gebd ._aece ._cged ;_afca ++{_ddaag :=_gebd ._aece .get (_afca ,_cafd );if _ddaag ==nil {_ebebb =_eaggb (_ebebb ,_fagfd ,"\u0009");}else {_ecabd :=_ddaag .toCellTextMarks (_fagfd );
_ebebb =append (_ebebb ,_ecabd ...);};_ebebb =_eaggb (_ebebb ,_fagfd ,"\u0020");};if _cafd < _gebd ._aece ._egfcf -1{_ebebb =_eaggb (_ebebb ,_fagfd ,"\u000a");};};_bcab :=_gebd ._aece ;if _bcab .isExportable (){_bgffa :=_bcab .toTextTable ();_ebebb =_feefcf (_ebebb ,&_bgffa );
};return _ebebb ;};func (_fdaae *textObject )setTextRise (_ggdf float64 ){if _fdaae ==nil {return ;};_fdaae ._gcfda ._ebgf =_ggdf ;};func (_fagff rulingList )vertsHorzs ()(rulingList ,rulingList ){var _bedg ,_ecgdg rulingList ;for _ ,_fabg :=range _fagff {switch _fabg ._bcdf {case _gacba :_bedg =append (_bedg ,_fabg );
case _dafa :_ecgdg =append (_ecgdg ,_fabg );};};return _bedg ,_ecgdg ;};func (_abgf *PageText )computeViews (){if _abgf ._aee ._aage ==ExtractionModePlain {_abgf ._gggb =_abgf .getText ();return ;};_bbgc :=_abgf .getParagraphs ();_dedc :=new (_ea .Buffer );
_bbgc .writeText (_dedc );_abgf ._gggb =_dedc .String ();_abgf ._abg =_bbgc .toTextMarks ();_abgf ._ecba =_bbgc .tables ();if _bdcag {_a .Log .Info ("\u0063\u006f\u006dpu\u0074\u0065\u0056\u0069\u0065\u0077\u0073\u003a\u0020\u0074\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064",len (_abgf ._ecba ));
};};func (_cebda rulingList )comp (_ceaf ,_cdfdf int )bool {_cgdd ,_bgfc :=_cebda [_ceaf ],_cebda [_cdfdf ];_dgbe ,_fefgc :=_cgdd ._bcdf ,_bgfc ._bcdf ;if _dgbe !=_fefgc {return _dgbe > _fefgc ;};if _dgbe ==_daba {return false ;};_gdecb :=func (_gbee bool )bool {if _dgbe ==_dafa {return _gbee ;
};return !_gbee ;};_aaga ,_dfbcdb :=_cgdd ._ddbf ,_bgfc ._ddbf ;if _aaga !=_dfbcdb {return _gdecb (_aaga > _dfbcdb );};_aaga ,_dfbcdb =_cgdd ._fbab ,_bgfc ._fbab ;if _aaga !=_dfbcdb {return _gdecb (_aaga < _dfbcdb );};return _gdecb (_cgdd ._bgdd < _bgfc ._bgdd );
};func (_eagg *wordBag )sort (){for _ ,_cdfc :=range _eagg ._cfag {_c .Slice (_cdfc ,func (_gbfb ,_edee int )bool {return _abfcc (_cdfc [_gbfb ],_cdfc [_edee ])< 0});};};func _dfb (_agg []rune )BidiText {_eda :=-1;_ee :=false ;_gg :=true ;_dg :=len (_agg );
_cfe :=make ([]string ,_dg );_dba :=make ([]string ,_dg );if _dg ==0||_ee {return _ebb (string (_agg ),_gg ,_ee );};_ceb :=0;for _gae ,_fee :=range _agg {_cfe [_gae ]=string (_fee );_ge :="\u004c";if _fee <=0x00ff{_ge =_fc [_fee ];}else if 0x0590<=_fee &&_fee <=0x05f4{_ge ="\u0052";
}else if 0x0600<=_fee &&_fee <=0x06ff{_gca :=_fee &0xff;if int (_gca )>=len (_af ){_a .Log .Debug ("\u0042\u0069\u0064\u0069\u003a\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0055n\u0069c\u006f\u0064\u0065\u0020\u0063\u0068\u0061\u0072\u0061\u0063\u0074\u0065\u0072\u0020"+string (_fee ));
};_ge =_af [_fee &0xff];}else if (0x0700<=_fee &&_fee <=0x08ac)||(0xfb50<=_fee &&_fee <=0xfdff)||(0xfe70<=_fee &&_fee <=0xfeff){_ge ="\u0041\u004c";};if _ge =="\u0052"||_ge =="\u0041\u004c"||_ge =="\u0041\u004e"{_ceb ++;};_dba [_gae ]=_ge ;};if _ceb ==0{_gg =true ;
return _ebb (string (_agg ),_gg ,false );};if _eda ==-1{if float64 (_ceb )/float64 (_dg )< 0.3&&_dg > 4{_gg =true ;_eda =0;}else {_gg =false ;_eda =1;};};var _fgb []int ;for range _agg {_fgb =append (_fgb ,_eda );};_bc :="\u004c";if _ec (_eda ){_bc ="\u0052";
};_fca :=_bc ;_dgd :=_fca ;_fgd :=_fca ;for _dgg :=range _agg {if _dba [_dgg ]=="\u004e\u0053\u004d"{_dba [_dgg ]=_fgd ;}else {_fgd =_dba [_dgg ];};};_fgd =_fca ;var _bed string ;for _aggc :=range _agg {_bed =_dba [_aggc ];switch _bed {case "\u0045\u004e":if _fgd =="\u0041\u004c"{_dba [_aggc ]="\u0041\u004e";
}else {_dba [_aggc ]="\u0045\u004e";};case "\u0052","\u004c","\u0041\u004c":_fgd =_bed ;};};for _aeb :=range _agg {_bcg :=_dba [_aeb ];if _bcg =="\u0041\u004c"{_dba [_aeb ]="\u0052";};};for _de :=1;_de < (len (_agg )-1);_de ++{if _dba [_de ]=="\u0045\u0053"&&_dba [_de -1]=="\u0045\u004e"&&_dba [_de +1]=="\u0045\u004e"{_dba [_de ]="\u0045\u004e";
};if _dba [_de ]=="\u0043\u0053"&&(_dba [_de -1]=="\u0045\u004e"||_dba [_de -1]=="\u0041\u004e")&&_dba [_de +1]==_dba [_de -1]{_dba [_de ]=_dba [_de -1];};};for _ceg :=range _agg {if _dba [_ceg ]=="\u0045\u004e"{for _ef :=_ceg -1;_ef >=0;_ef --{if _dba [_ef ]!="\u0045\u0054"{break ;
};_dba [_ef ]="\u0045\u004e";};for _bag :=_ceg +1;_bag < _dg ;_bag ++{if _dba [_bag ]!="\u0045\u0054"{break ;};_dba [_bag ]="\u0045\u004e";};};};for _bde :=range _agg {_ege :=_dba [_bde ];if _ege =="\u0057\u0053"||_ege =="\u0045\u0053"||_ege =="\u0045\u0054"||_ege =="\u0043\u0053"{_dba [_bde ]="\u004f\u004e";
};};_fgd ="\u0073\u006f\u0072";for _gd :=range _agg {_beg :=_dba [_gd ];switch _beg {case "\u0045\u004e":if _fgd =="\u004c"{_dba [_gd ]="\u004c";}else {_dba [_gd ]="\u0045\u004e";};case "\u0052","\u004c":_fgd =_beg ;};};for _dcf :=0;_dcf < len (_agg );
_dcf ++{if _dba [_dcf ]=="\u004f\u004e"{_fce :=_ae (_dba ,_dcf +1,"\u004f\u004e");_da :=_dgd ;if _dcf > 0{_da =_dba [_dcf -1];};_caa :=_dgd ;if _fce +1< _dg {_caa =_dba [_fce +1];};if _da !="\u004c"{_da ="\u0052";};if _caa !="\u004c"{_caa ="\u0052";};if _da ==_caa {_ad (_dba ,_dcf ,_fce ,_da );
};_dcf =_fce -1;};};for _fgbe :=range _agg {if _dba [_fgbe ]=="\u004f\u004e"{_dba [_fgbe ]=_bc ;};};for _fge :=range _agg {_afb :=_dba [_fge ];if _fe (_fgb [_fge ]){switch _afb {case "\u0052":_fgb [_fge ]++;case "\u0041\u004e","\u0045\u004e":_fgb [_fge ]+=2;
};}else if _afb =="\u004c"||_afb =="\u0041\u004e"||_afb =="\u0045\u004e"{_fgb [_fge ]++;};};_bcf :=-1;_dad :=99;var _edc int ;for _fcaf :=0;_fcaf < len (_fgb );_fcaf ++{_edc =_fgb [_fcaf ];if _bcf < _edc {_bcf =_edc ;};if _dad > _edc &&_ec (_edc ){_dad =_edc ;
};};for _dcb :=_bcf ;_dcb >=_dad ;_dcb --{_fcb :=-1;for _bae :=0;_bae < len (_fgb );_bae ++{if _fgb [_bae ]< _dcb {if _fcb >=0{_bg (_cfe ,_fcb ,_bae );_fcb =-1;};}else if _fcb < 0{_fcb =_bae ;};};if _fcb >=0{_bg (_cfe ,_fcb ,len (_fgb ));};};for _gga :=0;
_gga < len (_cfe );_gga ++{_cfd :=_cfe [_gga ];if _cfd =="\u003c"||_cfd =="\u003e"{_cfe [_gga ]="";};};return _ebb (_db .Join (_cfe ,""),_gg ,false );};

// String returns a human readable description of `vecs`.
func (_bfffe rulingList )String ()string {if len (_bfffe )==0{return "\u007b \u0045\u004d\u0050\u0054\u0059\u0020}";};_cfdfe ,_bggd :=_bfffe .vertsHorzs ();_fbddg :=len (_cfdfe );_gbebf :=len (_bggd );if _fbddg ==0||_gbebf ==0{return _fg .Sprintf ("\u007b%\u0064\u0020\u0078\u0020\u0025\u0064}",_fbddg ,_gbebf );
};_bbgdd :=_dc .PdfRectangle {Llx :_cfdfe [0]._ddbf ,Urx :_cfdfe [_fbddg -1]._ddbf ,Lly :_bggd [_gbebf -1]._ddbf ,Ury :_bggd [0]._ddbf };return _fg .Sprintf ("\u007b\u0025d\u0020\u0078\u0020%\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u007d",_fbddg ,_gbebf ,_bbgdd );
};

// ExtractStrokePaths processes and extracts all stroke paths in content streams.
func (_febd *Extractor )ExtractStrokePaths ()([]StrokePath ,error ){_adf ,_ ,_ ,_adecb :=_febd .ExtractPageText ();if _adecb !=nil {return nil ,_adecb ;};_fcc :=[]StrokePath {};for _ ,_acg :=range _adf ._dbgg {_bbcb :=StrokePath {Color :_acg .Color ,Points :[]_eac .Point {}};
for _ ,_accd :=range _acg ._ggf {_bbcb .Points =append (_bbcb .Points ,_accd ._gfad ...);};_fcc =append (_fcc ,_bbcb );};return _fcc ,nil ;};func (_bcge *subpath )close (){if !_edea (_bcge ._gfad [0],_bcge .last ()){_bcge .add (_bcge ._gfad [0]);};_bcge ._bgcbf =true ;
_bcge .removeDuplicates ();};func (_aeg *wordBag )text ()string {_fdga :=_aeg .allWords ();_ffgg :=make ([]string ,len (_fdga ));for _eeebe ,_gcgb :=range _fdga {_ffgg [_eeebe ]=_gcgb ._aegcb ;};return _db .Join (_ffgg ,"\u0020");};var _af =[]string {"\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u004f\u004e","\u004f\u004e","\u0041\u004c","\u0045\u0054","\u0045\u0054","\u0041\u004c","\u0043\u0053","\u0041\u004c","\u004f\u004e","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0045\u0054","\u0041\u004e","\u0041\u004e","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004e","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c"};
func (_fccg *subpath )add (_dbcf ..._eac .Point ){_fccg ._gfad =append (_fccg ._gfad ,_dbcf ...)};func (_aada *subpath )last ()_eac .Point {return _aada ._gfad [len (_aada ._gfad )-1]};func _beag (_afgca *wordBag ,_ecefc float64 ,_dgec ,_bbca rulingList ,_dfdd bool )[]*wordBag {var _bgega []*wordBag ;
for _ ,_gfafc :=range _afgca .depthIndexes (){_gacaa :=false ;for !_afgca .empty (_gfafc ){_dbbd :=_afgca .firstReadingIndex (_gfafc );_fdfd :=_afgca .firstWord (_dbbd );_eeag :=_gfaf (_fdfd ,_ecefc ,_dgec ,_bbca );_afgca .removeWord (_fdfd ,_dbbd );if _ddafd {_a .Log .Info ("\u0066\u0069\u0072\u0073\u0074\u0057\u006f\u0072\u0064\u0020\u005e\u005e^\u005e\u0020\u0025\u0073",_fdfd .String ());
};for _dcga :=true ;_dcga ;_dcga =_gacaa {_gacaa =false ;_fcge :=_degd *_eeag ._bdgf ;_feefc :=_fgfbe *_eeag ._bdgf ;if _dfdd {_feefc =_b .MaxFloat64 ;};_bgbb :=_fcbbg *_eeag ._bdgf ;if _ddafd {_a .Log .Info ("\u0070a\u0072a\u0057\u006f\u0072\u0064\u0073\u0020\u0064\u0065\u0070\u0074\u0068 \u0025\u002e\u0032\u0066 \u002d\u0020\u0025\u002e\u0032f\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061\u0044\u0065\u0070\u0074\u0068\u0047\u0061\u0070\u003d\u0025\u002e\u0032\u0066\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061R\u0065\u0061\u0064\u0069\u006e\u0067\u0047\u0061p\u003d\u0025\u002e\u0032\u0066",_eeag .minDepth (),_eeag .maxDepth (),_bgbb ,_feefc );
};if _afgca .scanBand ("\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c",_eeag ,_bdba (_dbbc ,0),_eeag .minDepth ()-_bgbb ,_eeag .maxDepth ()+_bgbb ,_bffab ,false ,false )> 0{_gacaa =true ;};if _afgca .scanBand ("\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_eeag ,_bdba (_dbbc ,_feefc ),_eeag .minDepth (),_eeag .maxDepth (),_eecgf ,false ,false )> 0{_gacaa =true ;
};if _gacaa {continue ;};_fbdg :=_afgca .scanBand ("",_eeag ,_bdba (_cbda ,_fcge ),_eeag .minDepth (),_eeag .maxDepth (),_begb ,true ,false );if _fbdg > 0{_gabfd :=(_eeag .maxDepth ()-_eeag .minDepth ())/_eeag ._bdgf ;if (_fbdg > 1&&float64 (_fbdg )> 0.3*_gabfd )||_fbdg <=10{if _afgca .scanBand ("\u006f\u0074\u0068e\u0072",_eeag ,_bdba (_cbda ,_fcge ),_eeag .minDepth (),_eeag .maxDepth (),_begb ,false ,true )> 0{_gacaa =true ;
};};};};_bgega =append (_bgega ,_eeag );};};return _bgega ;};func (_aaega *textTable )get (_deed ,_ffdf int )*textPara {return _aaega ._ecdgfe [_fabee (_deed ,_ffdf )]};func (_gbgb *ruling )alignsSec (_aafec *ruling )bool {const _acceg =_gdeg +1.0;return _gbgb ._fbab -_acceg <=_aafec ._bgdd &&_aafec ._fbab -_acceg <=_gbgb ._bgdd ;
};func (_eccab *textTable )getComposite (_gcfec ,_eggdf int )(paraList ,_dc .PdfRectangle ){_dfbb ,_gefbc :=_eccab ._fbfef [_fabee (_gcfec ,_eggdf )];if _bdcag {_fg .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0067\u0065\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u002d\u003e\u0025\u0073\u000a",_gcfec ,_eggdf ,_dfbb .String ());
};if !_gefbc {return nil ,_dc .PdfRectangle {};};return _dfbb .parasBBox ();};type subpath struct{_gfad []_eac .Point ;_bgcbf bool ;};func (_ddbd rulingList )primMinMax ()(float64 ,float64 ){_fadfe ,_ggdec :=_ddbd [0]._ddbf ,_ddbd [0]._ddbf ;for _ ,_bfdd :=range _ddbd [1:]{if _bfdd ._ddbf < _fadfe {_fadfe =_bfdd ._ddbf ;
}else if _bfdd ._ddbf > _ggdec {_ggdec =_bfdd ._ddbf ;};};return _fadfe ,_ggdec ;};

// ExtractText processes and extracts all text data in content streams and returns as a string.
// It takes into account character encodings in the PDF file, which are decoded by
// CharcodeBytesToUnicode.
// Characters that can't be decoded are replaced with MissingCodeRune ('\ufffd' = ).
func (_dac *Extractor )ExtractText ()(string ,error ){_aeaa ,_ ,_ ,_bff :=_dac .ExtractTextWithStats ();return _aeaa ,_bff ;};func _gddd (_dddaf ,_agfae bounded )float64 {_bacf :=_abfcc (_dddaf ,_agfae );if !_gebb (_bacf ){return _bacf ;};return _bfbb (_dddaf ,_agfae );
};

// NewEditor returns a new Editor object
func NewEditor (reader *_dc .PdfReader )*Editor {return &Editor {_gf :reader }};func (_dabb rulingList )blocks (_beccc ,_gadb *ruling )bool {if _beccc ._fbab > _gadb ._bgdd ||_gadb ._fbab > _beccc ._bgdd {return false ;};_acbcd :=_b .Max (_beccc ._fbab ,_gadb ._fbab );
_fdgg :=_b .Min (_beccc ._bgdd ,_gadb ._bgdd );if _beccc ._ddbf > _gadb ._ddbf {_beccc ,_gadb =_gadb ,_beccc ;};for _ ,_fabgc :=range _dabb {if _beccc ._ddbf <=_fabgc ._ddbf +_gdeg &&_fabgc ._ddbf <=_gadb ._ddbf +_gdeg &&_fabgc ._fbab <=_fdgg &&_acbcd <=_fabgc ._bgdd {return true ;
};};return false ;};

// String returns a description of `state`.
func (_eed *textState )String ()string {_deb :="\u005bN\u004f\u0054\u0020\u0053\u0045\u0054]";if _eed ._deeag !=nil {_deb =_eed ._deeag .BaseFont ();};return _fg .Sprintf ("\u0074\u0063\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0077\u003d\u0025\u002e\u0032\u0066 \u0074f\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u003d\u0025\u0071",_eed ._accg ,_eed ._egdb ,_eed ._ffbg ,_deb );
};func _ae (_ga []string ,_dfc int ,_dfa string )int {_gaa :=_dfc ;for ;_gaa < len (_ga );_gaa ++{if _ga [_gaa ]!=_dfa {return _gaa ;};};return _gaa ;};const (_daba rulingKind =iota ;_dafa ;_gacba ;);func (_dacdd rulingList )findPrimSec (_cbaeeb ,_aacfd float64 )*ruling {for _ ,_aeec :=range _dacdd {if _gebb (_aeec ._ddbf -_cbaeeb )&&_aeec ._fbab -_agaea <=_aacfd &&_aacfd <=_aeec ._bgdd +_agaea {return _aeec ;
};};return nil ;};func _bge (_bdeg string ,_fefb ,_fcd int ,_geda string )string {if _fcd > len (_bdeg )-1{return _bdeg [:_fefb ]+_geda ;};return _bdeg [:_fefb ]+_geda +_bdeg [_fcd :];};func (_cgbf paraList )applyTables (_fgfbf []*textTable )paraList {var _egda paraList ;
for _ ,_babg :=range _fgfbf {_egda =append (_egda ,_babg .newTablePara ());};for _ ,_fafe :=range _cgbf {if _fafe ._cdeb {continue ;};_egda =append (_egda ,_fafe );};return _egda ;};func _gefb (_cgbdb []*textLine ,_adfa string )string {var _daae _db .Builder ;
_baff :=0.0;for _eegd ,_bcbe :=range _cgbdb {_egab :=_bcbe .text ();_eggbg :=_bcbe ._ddgc ;if _eegd < len (_cgbdb )-1{_baff =_cgbdb [_eegd +1]._ddgc ;}else {_baff =0.0;};_daae .WriteString (_adfa );_daae .WriteString (_egab );if _baff !=_eggbg {_daae .WriteString ("\u000a");
}else {_daae .WriteString ("\u0020");};};return _daae .String ();};type textMark struct{_dc .PdfRectangle ;_cdcd int ;_eeab string ;_bcac string ;_bgac *_dc .PdfFont ;_cbfc float64 ;_fecg float64 ;_fccgda _eac .Matrix ;_dbdaa _eac .Point ;_aeaae _dc .PdfRectangle ;
_dcbe _df .Color ;_ccfa _df .Color ;_bcda _bd .PdfObject ;_cgfea []string ;Tw float64 ;Th float64 ;_eacg int ;_affa int ;};func (_fgcac *shapesState )lastpointEstablished ()(_eac .Point ,bool ){if _fgcac ._fded {return _fgcac ._cebe ,false ;};_cfdc :=len (_fgcac ._bdbb );
if _cfdc > 0&&_fgcac ._bdbb [_cfdc -1]._bgcbf {return _fgcac ._bdbb [_cfdc -1].last (),false ;};return _eac .Point {},true ;};func (_dgcef paraList )findTableGrid (_cbgc gridTiling )(*textTable ,map[*textPara ]struct{}){_becf :=len (_cbgc ._egaf );_gedb :=len (_cbgc ._aaeb );
_decd :=textTable {_baead :true ,_cged :_becf ,_egfcf :_gedb ,_ecdgfe :make (map[uint64 ]*textPara ,_becf *_gedb ),_fbfef :make (map[uint64 ]compositeCell ,_becf *_gedb )};_decd .PdfRectangle =_cbgc .PdfRectangle ;_eebbc :=make (map[*textPara ]struct{});
_cfad :=int ((1.0-_cecf )*float64 (_becf *_gedb ));_eaedb :=0;if _bdcaa {_a .Log .Info ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0064\u0020\u0078\u0020%\u0064",_becf ,_gedb );};for _dfbac ,_geddd :=range _cbgc ._aaeb {_bcagb ,_fagg :=_cbgc ._cbfda [_geddd ];
if !_fagg {continue ;};for _aefg ,_bbeed :=range _cbgc ._egaf {_gcee ,_abcf :=_bcagb [_bbeed ];if !_abcf {continue ;};_fcfe :=_dgcef .inTile (_gcee );if len (_fcfe )==0{_eaedb ++;if _eaedb > _cfad {if _bdcaa {_a .Log .Info ("\u0021\u006e\u0075m\u0045\u006d\u0070\u0074\u0079\u003d\u0025\u0064",_eaedb );
};return nil ,nil ;};}else {_decd .putComposite (_aefg ,_dfbac ,_fcfe ,_gcee .PdfRectangle );for _ ,_ecbc :=range _fcfe {_eebbc [_ecbc ]=struct{}{};};};};};_ddfcf :=0;for _ccdbfa :=0;_ccdbfa < _becf ;_ccdbfa ++{_aeaag :=_decd .get (_ccdbfa ,0);if _aeaag ==nil ||!_aeaag ._affde {_ddfcf ++;
};};if _ddfcf ==0{if _bdcaa {_a .Log .Info ("\u0021\u006e\u0075m\u0048\u0065\u0061\u0064\u0065\u0072\u003d\u0030");};return nil ,nil ;};_accbb :=_decd .reduceTiling (_cbgc ,_ecad );_accbb =_accbb .subdivide ();return _accbb ,_eebbc ;};func (_gbcf *textWord )toTextMarks (_acfe *int )[]TextMark {var _efgd []TextMark ;
for _ ,_fecaef :=range _gbcf ._egded {_efgd =_adffa (_efgd ,_acfe ,_fecaef .ToTextMark ());};return _efgd ;};func (_gea *imageExtractContext )processOperand (_aecb *_cd .ContentStreamOperation ,_gdc _cd .GraphicsState ,_dcec *_dc .PdfPageResources )error {if _aecb .Operand =="\u0042\u0049"&&len (_aecb .Params )==1{_bec ,_gbf :=_aecb .Params [0].(*_cd .ContentStreamInlineImage );
if !_gbf {return nil ;};if _gab ,_dcff :=_bd .GetBoolVal (_bec .ImageMask );_dcff {if _gab &&!_gea ._ddc .IncludeInlineStencilMasks {return nil ;};};return _gea .extractInlineImage (_bec ,_gdc ,_dcec );}else if _aecb .Operand =="\u0044\u006f"&&len (_aecb .Params )==1{_dgca ,_dgdc :=_bd .GetName (_aecb .Params [0]);
if !_dgdc {_a .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");return _fa ;};_ ,_aea :=_dcec .GetXObjectByName (*_dgca );switch _aea {case _dc .XObjectTypeImage :return _gea .extractXObjectImage (_dgca ,_gdc ,_dcec );case _dc .XObjectTypeForm :return _gea .extractFormImages (_dgca ,_gdc ,_dcec );
};}else if _gea ._gdga &&(_aecb .Operand =="\u0073\u0063\u006e"||_aecb .Operand =="\u0053\u0043\u004e")&&len (_aecb .Params )==1{_dca ,_ecg :=_bd .GetName (_aecb .Params [0]);if !_ecg {_a .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");
return _fa ;};_ddd ,_ecg :=_dcec .GetPatternByName (*_dca );if !_ecg {_a .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0050\u0061\u0074\u0074\u0065\u0072n\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");return nil ;};if _ddd .IsTiling (){_ggc :=_ddd .GetAsTilingPattern ();
_bfg ,_fcf :=_ggc .GetContentStream ();if _fcf !=nil {return _fcf ;};_fcf =_gea .extractContentStreamImages (string (_bfg ),_ggc .Resources );if _fcf !=nil {return _fcf ;};};}else if (_aecb .Operand =="\u0063\u0073"||_aecb .Operand =="\u0043\u0053")&&len (_aecb .Params )>=1{_gea ._gdga =_aecb .Params [0].String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e";
};return nil ;};

// TableCell is a cell in a TextTable.
type TableCell struct{_dc .PdfRectangle ;

// Text is the extracted text.
Text string ;

// Marks returns the TextMarks corresponding to the text in Text.
Marks TextMarkArray ;};

// TextTable represents a table.
// Cells are ordered top-to-bottom, left-to-right.
// Cells[y] is the (0-offset) y'th row in the table.
// Cells[y][x] is the (0-offset) x'th column in the table.
type TextTable struct{_dc .PdfRectangle ;W ,H int ;Cells [][]TableCell ;};type lineRuling struct{_fadbc rulingKind ;_fged markKind ;_df .Color ;_gcagg ,_gacc _eac .Point ;};func _fegbg (_dfcga map[int ][]float64 )[]int {_gfdbc :=make ([]int ,len (_dfcga ));
_fcace :=0;for _cefag :=range _dfcga {_gfdbc [_fcace ]=_cefag ;_fcace ++;};_c .Ints (_gfdbc );return _gfdbc ;};const _ffe =10;

// RenderMode specifies the text rendering mode (Tmode), which determines whether showing text shall cause
// glyph outlines to be  stroked, filled, used as a clipping boundary, or some combination of the three.
// Stroking, filling, and clipping shall have the same effects for a text object as they do for a path object
// (see 8.5.3, "Path-Painting Operators" and 8.5.4, "Clipping Path Operators").
type RenderMode int ;func _begc (_cgaf *list ,_egadd *string )string {_aceb :=_db .Split (_cgaf ._cef ,"\u000a");_gdaa :=&_db .Builder {};for _ ,_dbae :=range _aceb {if _dbae !=""{_gdaa .WriteString (*_egadd );_gdaa .WriteString (_dbae );_gdaa .WriteString ("\u000a");
};};return _gdaa .String ();};func _dbffb (_ffbbdf ,_ceab _eac .Point )bool {_ggefbe :=_b .Abs (_ffbbdf .X -_ceab .X );_cafa :=_b .Abs (_ffbbdf .Y -_ceab .Y );return _cabc (_cafa ,_ggefbe );};func _begbb (_bdgba ,_adaef _eb .Image )_eb .Image {_gdabg ,_acefb :=_adaef .Bounds ().Size (),_bdgba .Bounds ().Size ();
_fddce ,_cfgce :=_gdabg .X ,_gdabg .Y ;if _acefb .X > _fddce {_fddce =_acefb .X ;};if _acefb .Y > _cfgce {_cfgce =_acefb .Y ;};_eedge :=_eb .Rect (0,0,_fddce ,_cfgce );if _gdabg .X !=_fddce ||_gdabg .Y !=_cfgce {_bdaacd :=_eb .NewRGBA (_eedge );_be .BiLinear .Scale (_bdaacd ,_eedge ,_bdgba ,_adaef .Bounds (),_be .Over ,nil );
_adaef =_bdaacd ;};if _acefb .X !=_fddce ||_acefb .Y !=_cfgce {_effdb :=_eb .NewRGBA (_eedge );_be .BiLinear .Scale (_effdb ,_eedge ,_bdgba ,_bdgba .Bounds (),_be .Over ,nil );_bdgba =_effdb ;};_ffed :=_eb .NewRGBA (_eedge );_be .DrawMask (_ffed ,_eedge ,_bdgba ,_eb .Point {},_adaef ,_eb .Point {},_be .Over );
return _ffed ;};func _fad (_gcb []Font ,_ebe string )bool {for _ ,_cad :=range _gcb {if _cad .FontName ==_ebe {return true ;};};return false ;};const (_begg ="\u0045\u0052R\u004f\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u002c\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";
_ecb ="\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0043a\u006e\u0027\u0074 g\u0065\u0074\u0020\u0066\u006f\u006et\u0020\u0070\u0072\u006f\u0070\u0065\u0072\u0074\u0069\u0065\u0073\u002c\u0020\u0066\u006fn\u0074\u0020\u006e\u006f\u0074\u0020\u0066\u006fu\u006e\u0064";
_fdd ="\u0045\u0052\u0052O\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0067\u0065\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0074\u0072\u0065\u0061\u006d\u002c\u0020\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";_baeg ="E\u0052R\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066o\u006e\u0074\u0020\u0066ou\u006e\u0064";
);func _cfaac (_aeagd []*textMark ,_fdadg _dc .PdfRectangle ,_efcfb bool )[]*textWord {var _efcg []*textWord ;var _dcfbb *textWord ;if _gdee {_a .Log .Info ("\u006d\u0061\u006beT\u0065\u0078\u0074\u0057\u006f\u0072\u0064\u0073\u003a\u0020\u0025\u0064\u0020\u006d\u0061\u0072\u006b\u0073",len (_aeagd ));
};_fgae :=func (){if _dcfbb !=nil {_fdbg :=_dcfbb .computeText ();if !_gcbba (_fdbg ){_dcfbb ._aegcb =_fdbg ;_efcg =append (_efcg ,_dcfbb );if _gdee {_a .Log .Info ("\u0061\u0064\u0064Ne\u0077\u0057\u006f\u0072\u0064\u003a\u0020\u0025\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",len (_efcg )-1,_dcfbb .String ());
for _cgbcb ,_dbgga :=range _dcfbb ._egded {_fg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cgbcb ,_dbgga .String ());};};};_dcfbb =nil ;};};for _ ,_badf :=range _aeagd {if _dddb &&_dcfbb !=nil &&len (_dcfbb ._egded )> 0{_effc :=_dcfbb ._egded [len (_dcfbb ._egded )-1];
_ggfda ,_ababa :=_fdcge (_badf ._eeab );_ccag ,_edbbe :=_fdcge (_effc ._eeab );if _ababa &&!_edbbe &&_effc .inDiacriticArea (_badf ){_dcfbb .addDiacritic (_ggfda );continue ;};if _edbbe &&!_ababa &&_badf .inDiacriticArea (_effc ){_dcfbb ._egded =_dcfbb ._egded [:len (_dcfbb ._egded )-1];
_dcfbb .appendMark (_badf ,_fdadg );_dcfbb .addDiacritic (_ccag );continue ;};};_daffcc :=_gcbba (_badf ._eeab );if _daffcc {_fgae ();continue ;};if _dcfbb ==nil &&!_daffcc {_dcfbb =_egcfg ([]*textMark {_badf },_fdadg );continue ;};_fgbac :=_dcfbb ._bbaa ;
_aeea :=_b .Abs (_ebcd (_fdadg ,_badf )-_dcfbb ._bfdff )/_fgbac ;_afgef :=_gffb (_badf ,_dcfbb )/_fgbac ;_cbceb :=_dcfbb .Width ()+_badf .Width ();if _efcfb &&_badf ._fccgda .Angle ()!=0.0{_eaab :=_b .Abs (_cbceb *_b .Tan (_badf ._fccgda .Angle ())/_fgbac );
if _aeea > _eaab {_aeea -=_eaab ;}else {_aeea =0.0;};};if _afgef >=_gdfe ||!(-_eaed <=_afgef &&_aeea <=_bfbg ){_fgae ();_dcfbb =_egcfg ([]*textMark {_badf },_fdadg );continue ;};_dcfbb .appendMark (_badf ,_fdadg );};_fgae ();return _efcg ;};func (_ebebbf *textWord )computeText ()string {_ddge :=make ([]string ,len (_ebebbf ._egded ));
for _dege ,_bbadf :=range _ebebbf ._egded {_ddge [_dege ]=_bbadf ._eeab ;};return _db .Join (_ddge ,"");};func (_agfdc paraList )findGridTables (_gagg []gridTiling )[]*textTable {if _bdcag {_a .Log .Info ("\u0066i\u006e\u0064\u0047\u0072\u0069\u0064\u0054\u0061\u0062\u006c\u0065s\u003a\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073",len (_agfdc ));
for _befg ,_bafc :=range _agfdc {_fg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_befg ,_bafc );};};var _geddg []*textTable ;for _efdd ,_cfdcaa :=range _gagg {_dbdbb ,_edad :=_agfdc .findTableGrid (_cfdcaa );if _dbdbb !=nil {_dbdbb .log (_fg .Sprintf ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0057\u0069\u0074\u0068\u0047\u0072\u0069\u0064\u0073\u003a\u0020%\u0064",_efdd ));
_geddg =append (_geddg ,_dbdbb );_dbdbb .markCells ();};for _fceef :=range _edad {_fceef ._cdeb =true ;};};if _bdcag {_a .Log .Info ("\u0066i\u006e\u0064\u0047\u0072i\u0064\u0054\u0061\u0062\u006ce\u0073:\u0020%\u0064\u0020\u0074\u0061\u0062\u006c\u0065s",len (_geddg ));
};return _geddg ;};func (_eccfe rulingList )bbox ()_dc .PdfRectangle {var _cfdca _dc .PdfRectangle ;if len (_eccfe )==0{_a .Log .Error ("r\u0075\u006c\u0069\u006e\u0067\u004ci\u0073\u0074\u002e\u0062\u0062\u006f\u0078\u003a\u0020n\u006f\u0020\u0072u\u006ci\u006e\u0067\u0073");
return _dc .PdfRectangle {};};if _eccfe [0]._bcdf ==_dafa {_cfdca .Llx ,_cfdca .Urx =_eccfe .secMinMax ();_cfdca .Lly ,_cfdca .Ury =_eccfe .primMinMax ();}else {_cfdca .Llx ,_cfdca .Urx =_eccfe .primMinMax ();_cfdca .Lly ,_cfdca .Ury =_eccfe .secMinMax ();
};return _cfdca ;};func (_bbfgg intSet )add (_gefcf int ){_bbfgg [_gefcf ]=struct{}{}};func _ebcda (_gfbc ,_ggfc *textPara )bool {if _gfbc ._affde ||_ggfc ._affde {return true ;};return _gebb (_gfbc .depth ()-_ggfc .depth ());};func (_gdda *wordBag )removeWord (_def *textWord ,_cbae int ){_deee :=_gdda ._cfag [_cbae ];
_deee =_efgda (_deee ,_def );if len (_deee )==0{delete (_gdda ._cfag ,_cbae );}else {_gdda ._cfag [_cbae ]=_deee ;};};func (_ceef paraList )addNeighbours (){_ebegf :=func (_dedg []int ,_abdg *textPara )([]*textPara ,[]*textPara ){_cbec :=make ([]*textPara ,0,len (_dedg )-1);
_bdcbe :=make ([]*textPara ,0,len (_dedg )-1);for _ ,_gggeef :=range _dedg {_cfde :=_ceef [_gggeef ];if _cfde .Urx <=_abdg .Llx {_cbec =append (_cbec ,_cfde );}else if _cfde .Llx >=_abdg .Urx {_bdcbe =append (_bdcbe ,_cfde );};};return _cbec ,_bdcbe ;};
_fcdd :=func (_ggdebe []int ,_geabd *textPara )([]*textPara ,[]*textPara ){_dbdg :=make ([]*textPara ,0,len (_ggdebe )-1);_acfbg :=make ([]*textPara ,0,len (_ggdebe )-1);for _ ,_bafe :=range _ggdebe {_fcged :=_ceef [_bafe ];if _fcged .Ury <=_geabd .Lly {_acfbg =append (_acfbg ,_fcged );
}else if _fcged .Lly >=_geabd .Ury {_dbdg =append (_dbdg ,_fcged );};};return _dbdg ,_acfbg ;};_cceg :=_ceef .yNeighbours (_gfcdcc );for _ ,_egafd :=range _ceef {_cegbb :=_cceg [_egafd ];if len (_cegbb )==0{continue ;};_feeaf ,_aeefe :=_ebegf (_cegbb ,_egafd );
if len (_feeaf )==0&&len (_aeefe )==0{continue ;};if len (_feeaf )> 0{_bdec :=_feeaf [0];for _ ,_eaaa :=range _feeaf [1:]{if _eaaa .Urx >=_bdec .Urx {_bdec =_eaaa ;};};for _ ,_bbdgd :=range _feeaf {if _bbdgd !=_bdec &&_bbdgd .Urx > _bdec .Llx {_bdec =nil ;
break ;};};if _bdec !=nil &&_eccf (_egafd .PdfRectangle ,_bdec .PdfRectangle ){_egafd ._eggfe =_bdec ;};};if len (_aeefe )> 0{_baee :=_aeefe [0];for _ ,_ceae :=range _aeefe [1:]{if _ceae .Llx <=_baee .Llx {_baee =_ceae ;};};for _ ,_dccc :=range _aeefe {if _dccc !=_baee &&_dccc .Llx < _baee .Urx {_baee =nil ;
break ;};};if _baee !=nil &&_eccf (_egafd .PdfRectangle ,_baee .PdfRectangle ){_egafd ._dbed =_baee ;};};};_cceg =_ceef .xNeighbours (_bffe );for _ ,_agbc :=range _ceef {_efgfc :=_cceg [_agbc ];if len (_efgfc )==0{continue ;};_babfb ,_afff :=_fcdd (_efgfc ,_agbc );
if len (_babfb )==0&&len (_afff )==0{continue ;};if len (_afff )> 0{_fdggf :=_afff [0];for _ ,_ecegbd :=range _afff [1:]{if _ecegbd .Ury >=_fdggf .Ury {_fdggf =_ecegbd ;};};for _ ,_fagdg :=range _afff {if _fagdg !=_fdggf &&_fagdg .Ury > _fdggf .Lly {_fdggf =nil ;
break ;};};if _fdggf !=nil &&_acfd (_agbc .PdfRectangle ,_fdggf .PdfRectangle ){_agbc ._ecaa =_fdggf ;};};if len (_babfb )> 0{_cgfacf :=_babfb [0];for _ ,_dggec :=range _babfb [1:]{if _dggec .Lly <=_cgfacf .Lly {_cgfacf =_dggec ;};};for _ ,_geeda :=range _babfb {if _geeda !=_cgfacf &&_geeda .Lly < _cgfacf .Ury {_cgfacf =nil ;
break ;};};if _cgfacf !=nil &&_acfd (_agbc .PdfRectangle ,_cgfacf .PdfRectangle ){_agbc ._aecea =_cgfacf ;};};};for _ ,_edegd :=range _ceef {if _edegd ._eggfe !=nil &&_edegd ._eggfe ._dbed !=_edegd {_edegd ._eggfe =nil ;};if _edegd ._aecea !=nil &&_edegd ._aecea ._ecaa !=_edegd {_edegd ._aecea =nil ;
};if _edegd ._dbed !=nil &&_edegd ._dbed ._eggfe !=_edegd {_edegd ._dbed =nil ;};if _edegd ._ecaa !=nil &&_edegd ._ecaa ._aecea !=_edegd {_edegd ._ecaa =nil ;};};};func (_dbgcc *textTable )depth ()float64 {_aafce :=1e10;for _bgfgd :=0;_bgfgd < _dbgcc ._cged ;
_bgfgd ++{_gaae :=_dbgcc .get (_bgfgd ,0);if _gaae ==nil ||_gaae ._affde {continue ;};_aafce =_b .Min (_aafce ,_gaae .depth ());};return _aafce ;};func (_cgfbf *ruling )encloses (_ffggb ,_abab float64 )bool {return _cgfbf ._fbab -_agaea <=_ffggb &&_abab <=_cgfbf ._bgdd +_agaea ;
};func (_aeeed rulingList )snapToGroupsDirection ()rulingList {_aeeed .sortStrict ();_eacda :=make (map[*ruling ]rulingList ,len (_aeeed ));_dccag :=_aeeed [0];_ebfab :=func (_gadbd *ruling ){_dccag =_gadbd ;_eacda [_dccag ]=rulingList {_gadbd }};_ebfab (_aeeed [0]);
for _ ,_acedb :=range _aeeed [1:]{if _acedb ._ddbf < _dccag ._ddbf -_cgd {_a .Log .Error ("\u0073\u006e\u0061\u0070T\u006f\u0047\u0072\u006f\u0075\u0070\u0073\u0044\u0069r\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0057\u0072\u006f\u006e\u0067\u0020\u0070\u0072\u0069\u006da\u0072\u0079\u0020\u006f\u0072d\u0065\u0072\u002e\u000a\u0009\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0020\u0076\u003d\u0025\u0073",_dccag ,_acedb );
};if _acedb ._ddbf > _dccag ._ddbf +_gdeg {_ebfab (_acedb );}else {_eacda [_dccag ]=append (_eacda [_dccag ],_acedb );};};_cfccg :=make (map[*ruling ]float64 ,len (_eacda ));_baea :=make (map[*ruling ]*ruling ,len (_aeeed ));for _eacdc ,_cccag :=range _eacda {_cfccg [_eacdc ]=_cccag .mergePrimary ();
for _ ,_gcfe :=range _cccag {_baea [_gcfe ]=_eacdc ;};};for _ ,_adegg :=range _aeeed {_adegg ._ddbf =_cfccg [_baea [_adegg ]];};_fcac :=make (rulingList ,0,len (_aeeed ));for _ ,_ggaac :=range _eacda {_cafdg :=_ggaac .splitSec ();for _adcac ,_acdcc :=range _cafdg {_bfege :=_acdcc .merge ();
if len (_fcac )> 0{_faec :=_fcac [len (_fcac )-1];if _faec .alignsPrimary (_bfege )&&_faec .alignsSec (_bfege ){_a .Log .Error ("\u0073\u006e\u0061\u0070\u0054\u006fG\u0072\u006f\u0075\u0070\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0044\u0075\u0070\u006ci\u0063\u0061\u0074\u0065\u0020\u0069\u003d\u0025\u0064\u000a\u0009\u0077\u003d\u0025s\u000a\t\u0076\u003d\u0025\u0073",_adcac ,_faec ,_bfege );
continue ;};};_fcac =append (_fcac ,_bfege );};};_fcac .sortStrict ();return _fcac ;};func (_fcgbd rulingList )toGrids ()[]rulingList {if _egfg {_a .Log .Info ("t\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0025\u0073",_fcgbd );};_eafga :=_fcgbd .intersections ();
if _egfg {_a .Log .Info ("\u0074\u006f\u0047r\u0069\u0064\u0073\u003a \u0076\u0065\u0063\u0073\u003d\u0025\u0064 \u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003d\u0025\u0064\u0020",len (_fcgbd ),len (_eafga ));for _ ,_bdfc :=range _gegcd (_eafga ){_fg .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_bdfc ,_eafga [_bdfc ]);
};};_bddf :=make (map[int ]intSet ,len (_fcgbd ));for _bgaa :=range _fcgbd {_fcgbdd :=_fcgbd .connections (_eafga ,_bgaa );if len (_fcgbdd )> 0{_bddf [_bgaa ]=_fcgbdd ;};};if _egfg {_a .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0063\u006fn\u006e\u0065\u0063\u0074s=\u0025\u0064",len (_bddf ));
for _ ,_gcabb :=range _gegcd (_bddf ){_fg .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_gcabb ,_bddf [_gcabb ]);};};_afaeb :=_fdccbf (len (_fcgbd ),func (_edbc ,_eaggea int )bool {_cdgg ,_fcfcd :=len (_bddf [_edbc ]),len (_bddf [_eaggea ]);
if _cdgg !=_fcfcd {return _cdgg > _fcfcd ;};return _fcgbd .comp (_edbc ,_eaggea );});if _egfg {_a .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u006f\u0072d\u0065\u0072\u0069\u006eg=\u0025\u0076",_afaeb );};_eefb :=[][]int {{_afaeb [0]}};_cfbg :for _ ,_bgegg :=range _afaeb [1:]{for _bgcbb ,_ageaf :=range _eefb {for _ ,_dacf :=range _ageaf {if _bddf [_dacf ].has (_bgegg ){_eefb [_bgcbb ]=append (_ageaf ,_bgegg );
continue _cfbg ;};};};_eefb =append (_eefb ,[]int {_bgegg });};if _egfg {_a .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020i\u0067\u0072i\u0064\u0073\u003d\u0025\u0076",_eefb );};_c .SliceStable (_eefb ,func (_gdagb ,_daaef int )bool {return len (_eefb [_gdagb ])> len (_eefb [_daaef ])});
for _ ,_dgdbg :=range _eefb {_c .Slice (_dgdbg ,func (_fbccb ,_bgcc int )bool {return _fcgbd .comp (_dgdbg [_fbccb ],_dgdbg [_bgcc ])});};_dbgfg :=make ([]rulingList ,len (_eefb ));for _dbcfc ,_gcbe :=range _eefb {_dbcd :=make (rulingList ,len (_gcbe ));
for _fgad ,_cdeec :=range _gcbe {_dbcd [_fgad ]=_fcgbd [_cdeec ];};_dbgfg [_dbcfc ]=_dbcd ;};if _egfg {_a .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020g\u0072\u0069d\u0073\u003d\u0025\u002b\u0076",_dbgfg );};var _cdbd []rulingList ;for _ ,_afgeg :=range _dbgfg {if _abecf ,_ddgg :=_afgeg .isActualGrid ();
_ddgg {_afgeg =_abecf ;_afgeg =_afgeg .snapToGroups ();_cdbd =append (_cdbd ,_afgeg );};};if _egfg {_ceea ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0061\u0063t\u0075\u0061\u006c\u0047ri\u0064\u0073",_cdbd );_a .Log .Info ("\u0074\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0067\u0072\u0069\u0064\u0073\u003d%\u0064 \u0061\u0063\u0074\u0075\u0061\u006c\u0047\u0072\u0069\u0064\u0073\u003d\u0025\u0064",len (_dbgfg ),len (_cdbd ));
};return _cdbd ;};func _cabc (_ffgf ,_gbac float64 )bool {return _ffgf /_b .Max (_accga ,_gbac )< _befa };func _fgbb (_bafa ,_ccdaf _eac .Point )rulingKind {_fgfd :=_b .Abs (_bafa .X -_ccdaf .X );_bbac :=_b .Abs (_bafa .Y -_ccdaf .Y );return _cfcc (_fgfd ,_bbac ,_febdc );
};func (_ccbb *textObject )getFont (_cggd string )(*_dc .PdfFont ,error ){if _ccbb ._fbfec ._ggd !=nil {_fbacd ,_bbgda :=_ccbb .getFontDict (_cggd );if _bbgda !=nil {_a .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0067\u0065\u0074\u0046\u006f\u006e\u0074:\u0020n\u0061m\u0065=\u0025\u0073\u002c\u0020\u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0073",_cggd ,_bbgda .Error ());
return nil ,_bbgda ;};_ccbb ._fbfec ._fec ++;_cacd ,_feac :=_ccbb ._fbfec ._ggd [_fbacd .String ()];if _feac {_cacd ._ebbf =_ccbb ._fbfec ._fec ;return _cacd ._ebac ,nil ;};};_afgcc ,_gffa :=_ccbb .getFontDict (_cggd );if _gffa !=nil {return nil ,_gffa ;
};_dfea ,_gffa :=_ccbb .getFontDirect (_cggd );if _gffa !=nil {return nil ,_gffa ;};if _ccbb ._fbfec ._ggd !=nil {_bdcg :=fontEntry {_dfea ,_ccbb ._fbfec ._fec };if len (_ccbb ._fbfec ._ggd )>=_ffe {var _gegg []string ;for _gee :=range _ccbb ._fbfec ._ggd {_gegg =append (_gegg ,_gee );
};_c .Slice (_gegg ,func (_dcdb ,_beff int )bool {return _ccbb ._fbfec ._ggd [_gegg [_dcdb ]]._ebbf < _ccbb ._fbfec ._ggd [_gegg [_beff ]]._ebbf ;});delete (_ccbb ._fbfec ._ggd ,_gegg [0]);};_ccbb ._fbfec ._ggd [_afgcc .String ()]=_bdcg ;};return _dfea ,nil ;
};func (_bgge paraList )reorder (_cbfg []int ){_gcea :=make (paraList ,len (_bgge ));for _gfdb ,_gafd :=range _cbfg {_gcea [_gfdb ]=_bgge [_gafd ];};copy (_bgge ,_gcea );};func (_gfcdc *textObject )getFontDirect (_gada string )(*_dc .PdfFont ,error ){_bgcf ,_fdc :=_gfcdc .getFontDict (_gada );
if _fdc !=nil {return nil ,_fdc ;};_bbeg ,_fdc :=_dc .NewPdfFontFromPdfObject (_bgcf );if _fdc !=nil {_a .Log .Debug ("\u0067\u0065\u0074\u0046\u006f\u006e\u0074\u0044\u0069\u0072\u0065\u0063\u0074\u003a\u0020\u004e\u0065\u0077Pd\u0066F\u006f\u006e\u0074\u0046\u0072\u006f\u006d\u0050\u0064\u0066\u004f\u0062j\u0065\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u006e\u0061\u006d\u0065\u003d%\u0023\u0071\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gada ,_fdc );
};return _bbeg ,_fdc ;};func _dedbe (_bccac _dc .PdfColorspace ,_gdcbf _dc .PdfColor )_df .Color {if _bccac ==nil ||_gdcbf ==nil {return _df .Black ;};_dbcec ,_edggd :=_bccac .ColorToRGB (_gdcbf );if _edggd !=nil {_a .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006fu\u006c\u0064\u0020no\u0074\u0020\u0063\u006f\u006e\u0076e\u0072\u0074\u0020\u0063\u006f\u006c\u006f\u0072\u0020\u0025\u0076\u0020\u0028\u0025\u0076)\u0020\u0074\u006f\u0020\u0052\u0047\u0042\u003a \u0025\u0073",_gdcbf ,_bccac ,_edggd );
return _df .Black ;};_eggbce ,_feccg :=_dbcec .(*_dc .PdfColorDeviceRGB );if !_feccg {_a .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0065\u0064 \u0063\u006f\u006c\u006f\u0072\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020i\u006e\u0020\u0074\u0068\u0065\u0020\u0052\u0047\u0042\u0020\u0063\u006flo\u0072\u0073\u0070\u0061\u0063\u0065\u003a\u0020\u0025\u0076",_dbcec );
return _df .Black ;};return _df .NRGBA {R :uint8 (_eggbce .R ()*255),G :uint8 (_eggbce .G ()*255),B :uint8 (_eggbce .B ()*255),A :uint8 (255)};};func _aaee (_efga float64 )int {var _faae int ;if _efga >=0{_faae =int (_efga /_ccdbf );}else {_faae =int (_efga /_ccdbf )-1;
};return _faae ;};func _gfaf (_efgf *textWord ,_bcdd float64 ,_cbbb ,_cdfb rulingList )*wordBag {_gabf :=_aaee (_efgf ._bfdff );_cbeg :=[]*textWord {_efgf };_gdcf :=wordBag {_cfag :map[int ][]*textWord {_gabf :_cbeg },PdfRectangle :_efgf .PdfRectangle ,_bdgf :_efgf ._bbaa ,_ebd :_bcdd ,_cgba :_cbbb ,_dgbde :_cdfb };
return &_gdcf ;};

// Options extractor options.
type Options struct{

// DisableDocumentTags specifies whether to use the document tags during list extraction.
DisableDocumentTags bool ;

// ApplyCropBox will extract page text based on page cropbox if set to `true`.
ApplyCropBox bool ;

// Text extraction mode, default is ExtractionModeLayout.
ExtractionMode ExtractionMode ;

// IncludeAnnotations specifies whether to include annotations in the extraction process, default value is `false`.
IncludeAnnotations bool ;

// RelaxedMode specifies whether to use relaxed mode for processing the objects,
// If enabled UniPDF will automatically try to fix invalid parameters length and value.
// Default is `false`.
RelaxedMode bool ;};func (_gafgag *textTable )newTablePara ()*textPara {_gegbe :=_gafgag .computeBbox ();_bdcab :=&textPara {PdfRectangle :_gegbe ,_bdaed :_gegbe ,_aece :_gafgag };if _bdcag {_a .Log .Info ("\u006e\u0065w\u0054\u0061\u0062l\u0065\u0050\u0061\u0072\u0061\u003a\u0020\u0025\u0073",_bdcab );
};return _bdcab ;};func _fdec (_abcb int ,_agece map[int ][]float64 )([]int ,int ){_eabf :=make ([]int ,_abcb );_deff :=0;for _daggf :=0;_daggf < _abcb ;_daggf ++{_eabf [_daggf ]=_deff ;_deff +=len (_agece [_daggf ])+1;};return _eabf ,_deff ;};func (_eedgf *wordBag )depthRange (_edbdd ,_ggcc int )[]int {var _abcca []int ;
for _bgag :=range _eedgf ._cfag {if _edbdd <=_bgag &&_bgag <=_ggcc {_abcca =append (_abcca ,_bgag );};};if len (_abcca )==0{return nil ;};_c .Ints (_abcca );return _abcca ;};func (_dfeae *textTable )getRight ()paraList {_fbffc :=make (paraList ,_dfeae ._egfcf );
for _geefa :=0;_geefa < _dfeae ._egfcf ;_geefa ++{_daaee :=_dfeae .get (_dfeae ._cged -1,_geefa )._dbed ;if _daaee .taken (){return nil ;};_fbffc [_geefa ]=_daaee ;};for _gbcc :=0;_gbcc < _dfeae ._egfcf -1;_gbcc ++{if _fbffc [_gbcc ]._ecaa !=_fbffc [_gbcc +1]{return nil ;
};};return _fbffc ;};func (_beba *ruling )gridIntersecting (_cebbf *ruling )bool {return _cdfa (_beba ._fbab ,_cebbf ._fbab )&&_cdfa (_beba ._bgdd ,_cebbf ._bgdd );};const (_deggc markKind =iota ;_aggca ;_edgbf ;_gbbgc ;);func (_bcce paraList )llyOrdering ()[]int {_bdgg :=make ([]int ,len (_bcce ));
for _fbagc :=range _bcce {_bdgg [_fbagc ]=_fbagc ;};_c .SliceStable (_bdgg ,func (_gfeeg ,_cgfb int )bool {_egcf ,_dgaa :=_bdgg [_gfeeg ],_bdgg [_cgfb ];return _bcce [_egcf ].Lly < _bcce [_dgaa ].Lly ;});return _bdgg ;};func _cggdg (_cfdf *textLine ,_caaf []*textLine ,_gggaa ,_egcb float64 )[]*textLine {_bgef :=[]*textLine {};
for _ ,_eaedc :=range _caaf {if _eaedc ._ddgc >=_gggaa {if _egcb !=-1&&_eaedc ._ddgc < _egcb {if _eaedc .text ()!=_cfdf .text (){if _b .Round (_eaedc .Llx )< _b .Round (_cfdf .Llx ){break ;};_bgef =append (_bgef ,_eaedc );};}else if _egcb ==-1{if _eaedc ._ddgc ==_cfdf ._ddgc {if _eaedc .text ()!=_cfdf .text (){_bgef =append (_bgef ,_eaedc );
};continue ;};_aabc :=_cgfg (_cfdf ,_caaf );if _aabc !=-1&&_eaedc ._ddgc <=_aabc {_bgef =append (_bgef ,_eaedc );};};};};return _bgef ;};func _dega (_aaeac map[int ][]float64 )string {_fdff :=_fegbg (_aaeac );_gbcbe :=make ([]string ,len (_aaeac ));for _fdcgb ,_eddc :=range _fdff {_gbcbe [_fdcgb ]=_fg .Sprintf ("\u0025\u0064\u003a\u0020\u0025\u002e\u0032\u0066",_eddc ,_aaeac [_eddc ]);
};return _fg .Sprintf ("\u007b\u0025\u0073\u007d",_db .Join (_gbcbe ,"\u002c\u0020"));};func _fabee (_bdege ,_ebaee int )uint64 {return uint64 (_bdege )*0x1000000+uint64 (_ebaee )};func (_eadf rulingList )asTiling ()gridTiling {if _bdcaa {_a .Log .Info ("r\u0075\u006ci\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0063s\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u002b\u002b\u002b\u0020\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_eadf ));
};for _aefd ,_agbb :=range _eadf [1:]{_cecfb :=_eadf [_aefd ];if _cecfb .alignsPrimary (_agbb )&&_cecfb .alignsSec (_agbb ){_a .Log .Error ("a\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0044\u0075\u0070\u006c\u0069\u0063\u0061\u0074\u0065 \u0072\u0075\u006c\u0069\u006e\u0067\u0073\u002e\u000a\u0009v=\u0025\u0073\u000a\t\u0077=\u0025\u0073",_agbb ,_cecfb );
};};_eadf .sortStrict ();_eadf .log ("\u0073n\u0061\u0070\u0070\u0065\u0064");_fabea ,_ecce :=_eadf .vertsHorzs ();_cdaaaf :=_fabea .primaries ();_gcgbgb :=_ecce .primaries ();_bgcbcb :=len (_cdaaaf )-1;_acede :=len (_gcgbgb )-1;if _bgcbcb ==0||_acede ==0{return gridTiling {};
};_fbgg :=_dc .PdfRectangle {Llx :_cdaaaf [0],Urx :_cdaaaf [_bgcbcb ],Lly :_gcgbgb [0],Ury :_gcgbgb [_acede ]};if _bdcaa {_a .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0072\u0074s=\u0025\u0064",len (_fabea ));
for _dfbec ,_gbabf :=range _fabea {_fg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dfbec ,_gbabf );};_a .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0068\u006f\u0072\u007as=\u0025\u0064",len (_ecce ));
for _bbga ,_gcggg :=range _ecce {_fg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bbga ,_gcggg );};_a .Log .Info ("\u0072\u0075\u006c\u0069\u006eg\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067:\u0020\u0020\u0077\u0078\u0068\u003d\u0025\u0064\u0078\u0025\u0064\u000a\u0009\u006c\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a\u0009\u006c\u006c\u0079\u003d\u0025\u002e\u0032f",_bgcbcb ,_acede ,_cdaaaf ,_gcgbgb );
};_ggeec :=make ([]gridTile ,_bgcbcb *_acede );for _deaa :=_acede -1;_deaa >=0;_deaa --{_bfbbc :=_gcgbgb [_deaa ];_bedbe :=_gcgbgb [_deaa +1];for _eaegb :=0;_eaegb < _bgcbcb ;_eaegb ++{_efabg :=_cdaaaf [_eaegb ];_agbd :=_cdaaaf [_eaegb +1];_bebag :=_fabea .findPrimSec (_efabg ,_bfbbc );
_fdbd :=_fabea .findPrimSec (_agbd ,_bfbbc );_fbacg :=_ecce .findPrimSec (_bfbbc ,_efabg );_eaccb :=_ecce .findPrimSec (_bedbe ,_efabg );_gfgef :=_dc .PdfRectangle {Llx :_efabg ,Urx :_agbd ,Lly :_bfbbc ,Ury :_bedbe };_bdcf :=_aagc (_gfgef ,_bebag ,_fdbd ,_fbacg ,_eaccb );
_ggeec [_deaa *_bgcbcb +_eaegb ]=_bdcf ;if _bdcaa {_fg .Printf ("\u0020\u0020\u0078\u003d\u0025\u0032\u0064\u0020\u0079\u003d\u0025\u0032\u0064\u003a\u0020%\u0073 \u0025\u0036\u002e\u0032\u0066\u0020\u0078\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_eaegb ,_deaa ,_bdcf .String (),_bdcf .Width (),_bdcf .Height ());
};};};if _bdcaa {_a .Log .Info ("r\u0075\u006c\u0069\u006e\u0067\u004c\u0069\u0073\u0074.\u0061\u0073\u0054\u0069\u006c\u0069\u006eg:\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0020\u0068\u006f\u0072\u0069zo\u006e\u0074a\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_fbgg );
};_gacbf :=make ([]map[float64 ]gridTile ,_acede );for _dedd :=_acede -1;_dedd >=0;_dedd --{if _bdcaa {_fg .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_dedd );};_gacbf [_dedd ]=make (map[float64 ]gridTile ,_bgcbcb );for _eafb :=0;_eafb < _bgcbcb ;
_eafb ++{_fdaf :=_ggeec [_dedd *_bgcbcb +_eafb ];if _bdcaa {_fg .Printf ("\u0020\u0020\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_eafb ,_fdaf );};if !_fdaf ._bdgbc {continue ;};_dedccc :=_eafb ;for _bfec :=_eafb +1;!_fdaf ._gggf &&_bfec < _bgcbcb ;
_bfec ++{_afcb :=_ggeec [_dedd *_bgcbcb +_bfec ];_fdaf .Urx =_afcb .Urx ;_fdaf ._daaf =_fdaf ._daaf ||_afcb ._daaf ;_fdaf ._accf =_fdaf ._accf ||_afcb ._accf ;_fdaf ._gggf =_afcb ._gggf ;if _bdcaa {_fg .Printf ("\u0020 \u0020%\u0034\u0064\u003a\u0020\u0025s\u0020\u2192 \u0025\u0073\u000a",_bfec ,_afcb ,_fdaf );
};_dedccc =_bfec ;};if _bdcaa {_fg .Printf (" \u0020 \u0025\u0032\u0064\u0020\u002d\u0020\u0025\u0032d\u0020\u2192\u0020\u0025s\n",_eafb ,_dedccc ,_fdaf );};_eafb =_dedccc ;_gacbf [_dedd ][_fdaf .Llx ]=_fdaf ;};};_fefc :=make (map[float64 ]map[float64 ]gridTile ,_acede );
_eceee :=make (map[float64 ]map[float64 ]struct{},_acede );for _caabg :=_acede -1;_caabg >=0;_caabg --{_ebagc :=_ggeec [_caabg *_bgcbcb ].Lly ;_fefc [_ebagc ]=make (map[float64 ]gridTile ,_bgcbcb );_eceee [_ebagc ]=make (map[float64 ]struct{},_bgcbcb );
};if _bdcaa {_a .Log .Info ("\u0072u\u006c\u0069n\u0067\u004c\u0069s\u0074\u002e\u0061\u0073\u0054\u0069\u006ci\u006e\u0067\u003a\u0020\u0063\u006fa\u006c\u0065\u0073\u0063\u0065\u0020\u0076\u0065\u0072\u0074\u0069c\u0061\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_fbgg );
};for _begdb :=_acede -1;_begdb >=0;_begdb --{_dfgdc :=_ggeec [_begdb *_bgcbcb ].Lly ;_fagd :=_gacbf [_begdb ];if _bdcaa {_fg .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_begdb );};for _ ,_dcedd :=range _gfgf (_fagd ){if _ ,_eebe :=_eceee [_dfgdc ][_dcedd ];
_eebe {continue ;};_aedb :=_fagd [_dcedd ];if _bdcaa {_fg .Printf (" \u0020\u0020\u0020\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_aedb .String ());};for _dbcee :=_begdb -1;_dbcee >=0;_dbcee --{if _aedb ._accf {break ;};_cgde :=_gacbf [_dbcee ];_gdbd ,_eefd :=_cgde [_dcedd ];
if !_eefd {break ;};if _gdbd .Urx !=_aedb .Urx {break ;};_aedb ._accf =_gdbd ._accf ;_aedb .Lly =_gdbd .Lly ;if _bdcaa {_fg .Printf ("\u0020\u0020\u0020\u0020  \u0020\u0020\u0076\u003d\u0025\u0073\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_gdbd .String (),_aedb .String ());
};_eceee [_gdbd .Lly ][_gdbd .Llx ]=struct{}{};};if _begdb ==0{_aedb ._accf =true ;};if _aedb .complete (){_fefc [_dfgdc ][_dcedd ]=_aedb ;};};};_fbdbd :=gridTiling {PdfRectangle :_fbgg ,_egaf :_beee (_fefc ),_aaeb :_fafd (_fefc ),_cbfda :_fefc };_fbdbd .log ("\u0043r\u0065\u0061\u0074\u0065\u0064");
return _fbdbd ;};func _aefbd (_egdd []pathSection )rulingList {_dadda (_egdd );if _egfg {_a .Log .Info ("\u006d\u0061k\u0065\u0053\u0074\u0072\u006f\u006b\u0065\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0064\u0020\u0073\u0074\u0072ok\u0065\u0073",len (_egdd ));
};var _bdegg rulingList ;for _ ,_aaac :=range _egdd {for _ ,_ecec :=range _aaac ._ggf {if len (_ecec ._gfad )< 2{continue ;};_fabb :=_ecec ._gfad [0];for _ ,_egfgd :=range _ecec ._gfad [1:]{if _fceed ,_adcg :=_gebe (_fabb ,_egfgd ,_aaac .Color );_adcg {_bdegg =append (_bdegg ,_fceed );
};_fabb =_egfgd ;};};};if _egfg {_a .Log .Info ("m\u0061\u006b\u0065\u0053tr\u006fk\u0065\u0052\u0075\u006c\u0069n\u0067\u0073\u003a\u0020\u0025\u0073",_bdegg );};return _bdegg ;};func (_cac *textObject )setHorizScaling (_dgga float64 ){if _cac ==nil {return ;
};_cac ._gcfda ._deeaf =_dgga ;};const (_cdeed =true ;_cdd =true ;_dddb =true ;_fgfb =false ;_gcag =true ;_adcea =true ;_effd =true ;_bgcbc =true ;_gabbg =false ;);func _bgefe (_bgedd []*textLine ,_dgbbf ,_feead float64 )[]*textLine {var _bffc []*textLine ;
for _ ,_dfafb :=range _bgedd {if _dgbbf ==-1{if _dfafb ._ddgc > _feead {_bffc =append (_bffc ,_dfafb );};}else {if _dfafb ._ddgc > _feead &&_dfafb ._ddgc < _dgbbf {_bffc =append (_bffc ,_dfafb );};};};return _bffc ;};func (_bdfed rulingList )mergePrimary ()float64 {_ggfb :=_bdfed [0]._ddbf ;
for _ ,_dcedg :=range _bdfed [1:]{_ggfb +=_dcedg ._ddbf ;};return _ggfb /float64 (len (_bdfed ));};func (_cgca *wordBag )applyRemovals (_bedba map[int ]map[*textWord ]struct{}){for _cfff ,_fegb :=range _bedba {if len (_fegb )==0{continue ;};_efgc :=_cgca ._cfag [_cfff ];
_bdab :=len (_efgc )-len (_fegb );if _bdab ==0{delete (_cgca ._cfag ,_cfff );continue ;};_dgba :=make ([]*textWord ,_bdab );_ccgg :=0;for _ ,_gbbc :=range _efgc {if _ ,_gefa :=_fegb [_gbbc ];!_gefa {_dgba [_ccgg ]=_gbbc ;_ccgg ++;};};_cgca ._cfag [_cfff ]=_dgba ;
};};func (_dgfad *wordBag )allWords ()[]*textWord {var _cedff []*textWord ;for _ ,_efae :=range _dgfad ._cfag {_cedff =append (_cedff ,_efae ...);};return _cedff ;};func (_bfbe paraList )sortTopoOrder (){_fbcdb :=_bfbe .topoOrder ();_bfbe .reorder (_fbcdb )};
func (_baba *wordBag )scanBand (_geada string ,_cgcc *wordBag ,_gbec func (_gfee *wordBag ,_faag *textWord )bool ,_facd ,_cdef ,_cdg float64 ,_aac ,_eabg bool )int {_cbde :=_cgcc ._bdgf ;var _cadd map[int ]map[*textWord ]struct{};if !_aac {_cadd =_baba .makeRemovals ();
};_gcafc :=_dfda *_cbde ;_afgd :=0;for _ ,_ggef :=range _baba .depthBand (_facd -_gcafc ,_cdef +_gcafc ){if len (_baba ._cfag [_ggef ])==0{continue ;};for _ ,_geba :=range _baba ._cfag [_ggef ]{if !(_facd -_gcafc <=_geba ._bfdff &&_geba ._bfdff <=_cdef +_gcafc ){continue ;
};if !_gbec (_cgcc ,_geba ){continue ;};_gbfa :=2.0*_b .Abs (_geba ._bbaa -_cgcc ._bdgf )/(_geba ._bbaa +_cgcc ._bdgf );_bbad :=_b .Max (_geba ._bbaa /_cgcc ._bdgf ,_cgcc ._bdgf /_geba ._bbaa );_ebf :=_b .Min (_gbfa ,_bbad );if _cdg > 0&&_ebf > _cdg {continue ;
};if _cgcc .blocked (_geba ){continue ;};if !_aac {_cgcc .pullWord (_geba ,_ggef ,_cadd );};_afgd ++;if !_eabg {if _geba ._bfdff < _facd {_facd =_geba ._bfdff ;};if _geba ._bfdff > _cdef {_cdef =_geba ._bfdff ;};};if _aac {break ;};};};if !_aac {_baba .applyRemovals (_cadd );
};return _afgd ;};func (_bdeae *TextMarkArray )getTextMarkAtOffset (_bdca int )*TextMark {for _ ,_fbgf :=range _bdeae ._abfg {if _fbgf .Offset ==_bdca {return &_fbgf ;};};return nil ;};func _affc (_fffe _eac .Point )_eac .Matrix {return _eac .TranslationMatrix (_fffe .X ,_fffe .Y )};
func (_ecgb *compositeCell )updateBBox (){for _ ,_dgee :=range _ecgb .paraList {_ecgb .PdfRectangle =_faga (_ecgb .PdfRectangle ,_dgee .PdfRectangle );};};type stateStack []*textState ;func (_abcc *PageText )getText ()string {_gfef :="";_dbba :=len (_abcc ._dggb );
for _fbag :=0;_fbag < 360&&_dbba > 0;_fbag +=90{_fegg :=make ([]*textMark ,0,len (_abcc ._dggb )-_dbba );for _ ,_cdf :=range _abcc ._dggb {if _cdf ._cdcd ==_fbag {_fegg =append (_fegg ,_cdf );};};if len (_fegg )> 0{_gfef +=_aefc (_fegg ,_abcc ._bbcc );
_dbba -=len (_fegg );};};return _gfef ;};func (_bade *shapesState )stroke (_fcfd *[]pathSection ){_acfbb :=pathSection {_ggf :_bade ._bdbb ,Color :_bade ._dfff .getStrokeColor ()};*_fcfd =append (*_fcfd ,_acfbb );if _egfg {_fg .Printf ("\u0020 \u0020\u0020S\u0054\u0052\u004fK\u0045\u003a\u0020\u0025\u0064\u0020\u0073t\u0072\u006f\u006b\u0065\u0073\u0020s\u0073\u003d\u0025\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d%\u002b\u0076\u0020\u0025\u0036\u002e\u0032\u0066\u000a",len (*_fcfd ),_bade ,_bade ._dfff .getStrokeColor (),_acfbb .bbox ());
if _gbfbe {for _aead ,_bdfe :=range _bade ._bdbb {_fg .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_aead ,_bdfe );if _aead ==10{break ;};};};};};func (_acfda *subpath )makeRectRuling (_cecdd _df .Color )(*ruling ,bool ){if _eaeg {_a .Log .Info ("\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0070\u0061\u0074\u0068\u003d\u0025\u0076",_acfda );
};_gbbcf :=_acfda ._gfad [:4];_gfbb :=make (map[int ]rulingKind ,len (_gbbcf ));for _bfff ,_edfba :=range _gbbcf {_cfdb :=_acfda ._gfad [(_bfff +1)%4];_gfbb [_bfff ]=_gfdc (_edfba ,_cfdb );if _eaeg {_fg .Printf ("\u0025\u0034\u0064: \u0025\u0073\u0020\u003d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066",_bfff ,_gfbb [_bfff ],_edfba ,_cfdb );
};};if _eaeg {_fg .Printf ("\u0020\u0020\u0020\u006b\u0069\u006e\u0064\u0073\u003d\u0025\u002b\u0076\u000a",_gfbb );};var _aecbe ,_aaaf []int ;for _cead ,_fadac :=range _gfbb {switch _fadac {case _dafa :_aaaf =append (_aaaf ,_cead );case _gacba :_aecbe =append (_aecbe ,_cead );
};};if _eaeg {_fg .Printf ("\u0020\u0020 \u0068\u006f\u0072z\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_aaaf ),_aaaf );_fg .Printf ("\u0020\u0020 \u0076\u0065\u0072t\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_aecbe ),_aecbe );
};_ggfa :=(len (_aaaf )==2&&len (_aecbe )==2)||(len (_aaaf )==2&&len (_aecbe )==0&&_dbffb (_gbbcf [_aaaf [0]],_gbbcf [_aaaf [1]]))||(len (_aecbe )==2&&len (_aaaf )==0&&_ddfgd (_gbbcf [_aecbe [0]],_gbbcf [_aecbe [1]]));if _eaeg {_fg .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_aaaf ),len (_aecbe ),_ggfa );
};if !_ggfa {if _eaeg {_a .Log .Error ("\u0021!\u006d\u0061\u006b\u0065R\u0065\u0063\u0074\u0052\u0075l\u0069n\u0067:\u0020\u0070\u0061\u0074\u0068\u003d\u0025v",_acfda );_fg .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_aaaf ),len (_aecbe ),_ggfa );
};return &ruling {},false ;};if len (_aecbe )==0{for _deba ,_egcgg :=range _gfbb {if _egcgg !=_dafa {_aecbe =append (_aecbe ,_deba );};};};if len (_aaaf )==0{for _aacfb ,_bfgca :=range _gfbb {if _bfgca !=_gacba {_aaaf =append (_aaaf ,_aacfb );};};};if _eaeg {_a .Log .Info ("\u006da\u006b\u0065R\u0065\u0063\u0074\u0052u\u006c\u0069\u006eg\u003a\u0020\u0068\u006f\u0072\u007a\u0073\u003d\u0025d \u0076\u0065\u0072t\u0073\u003d%\u0064\u0020\u0070\u006f\u0069\u006et\u0073\u003d%\u0064\u000a"+"\u0009\u0020\u0068o\u0072\u007a\u0073\u003d\u0025\u002b\u0076\u000a"+"\u0009\u0020\u0076e\u0072\u0074\u0073\u003d\u0025\u002b\u0076\u000a"+"\t\u0070\u006f\u0069\u006e\u0074\u0073\u003d\u0025\u002b\u0076",len (_aaaf ),len (_aecbe ),len (_gbbcf ),_aaaf ,_aecbe ,_gbbcf );
};var _gdcgf ,_dfcddg ,_cfgg ,_gcafcg _eac .Point ;if _gbbcf [_aaaf [0]].Y > _gbbcf [_aaaf [1]].Y {_cfgg ,_gcafcg =_gbbcf [_aaaf [0]],_gbbcf [_aaaf [1]];}else {_cfgg ,_gcafcg =_gbbcf [_aaaf [1]],_gbbcf [_aaaf [0]];};if _gbbcf [_aecbe [0]].X > _gbbcf [_aecbe [1]].X {_gdcgf ,_dfcddg =_gbbcf [_aecbe [0]],_gbbcf [_aecbe [1]];
}else {_gdcgf ,_dfcddg =_gbbcf [_aecbe [1]],_gbbcf [_aecbe [0]];};_ebabb :=_dc .PdfRectangle {Llx :_gdcgf .X ,Urx :_dfcddg .X ,Lly :_gcafcg .Y ,Ury :_cfgg .Y };if _ebabb .Llx > _ebabb .Urx {_ebabb .Llx ,_ebabb .Urx =_ebabb .Urx ,_ebabb .Llx ;};if _ebabb .Lly > _ebabb .Ury {_ebabb .Lly ,_ebabb .Ury =_ebabb .Ury ,_ebabb .Lly ;
};_bfcb :=rectRuling {PdfRectangle :_ebabb ,_geggg :_facb (_ebabb ),Color :_cecdd };if _bfcb ._geggg ==_daba {if _eaeg {_a .Log .Error ("\u006da\u006b\u0065\u0052\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006eg\u003a\u0020\u006b\u0069\u006e\u0064\u003d\u006e\u0069\u006c");
};return nil ,false ;};_cgfa ,_fgdgg :=_bfcb .asRuling ();if !_fgdgg {if _eaeg {_a .Log .Error ("\u006da\u006b\u0065\u0052\u0065c\u0074\u0052\u0075\u006c\u0069n\u0067:\u0020!\u0069\u0073\u0052\u0075\u006c\u0069\u006eg");};return nil ,false ;};if _egfg {_fg .Printf ("\u0020\u0020\u0020\u0072\u003d\u0025\u0073\u000a",_cgfa .String ());
};return _cgfa ,true ;};func (_gbgc paraList )toTextMarks ()[]TextMark {_eaef :=0;var _deeff []TextMark ;for _badec ,_efcbf :=range _gbgc {if _efcbf ._affde {continue ;};_fbde :=_efcbf .toTextMarks (&_eaef );_deeff =append (_deeff ,_fbde ...);if _badec !=len (_gbgc )-1{if _ebcda (_efcbf ,_gbgc [_badec +1]){_deeff =_eaggb (_deeff ,&_eaef ,"\u0020");
}else {_deeff =_eaggb (_deeff ,&_eaef ,"\u000a");_deeff =_eaggb (_deeff ,&_eaef ,"\u000a");};};};_deeff =_eaggb (_deeff ,&_eaef ,"\u000a");_deeff =_eaggb (_deeff ,&_eaef ,"\u000a");return _deeff ;};func (_gaeed *textTable )computeBbox ()_dc .PdfRectangle {var _eeeafd _dc .PdfRectangle ;
_ecfe :=false ;for _cffge :=0;_cffge < _gaeed ._egfcf ;_cffge ++{for _aeaaa :=0;_aeaaa < _gaeed ._cged ;_aeaaa ++{_dgbg :=_gaeed .get (_aeaaa ,_cffge );if _dgbg ==nil {continue ;};if !_ecfe {_eeeafd =_dgbg .PdfRectangle ;_ecfe =true ;}else {_eeeafd =_faga (_eeeafd ,_dgbg .PdfRectangle );
};};};return _eeeafd ;};func (_gcfb *textTable )subdivide ()*textTable {_gcfb .logComposite ("\u0073u\u0062\u0064\u0069\u0076\u0069\u0064e");_badecb :=_gcfb .compositeRowCorridors ();_cgdeg :=_gcfb .compositeColCorridors ();if _bdcag {_a .Log .Info ("\u0073u\u0062\u0064i\u0076\u0069\u0064\u0065:\u000a\u0009\u0072o\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s=\u0025\u0073\u000a\t\u0063\u006fl\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073=\u0025\u0073",_dega (_badecb ),_dega (_cgdeg ));
};if len (_badecb )==0||len (_cgdeg )==0{return _gcfb ;};_ceggb (_badecb );_ceggb (_cgdeg );if _bdcag {_a .Log .Info ("\u0073\u0075\u0062\u0064\u0069\u0076\u0069\u0064\u0065\u0020\u0066\u0069\u0078\u0065\u0064\u003a\u000a\u0009r\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073\u003d\u0025\u0073\u000a\u0009\u0063\u006f\u006cC\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d\u0025\u0073",_dega (_badecb ),_dega (_cgdeg ));
};_bgdf ,_afbff :=_fdec (_gcfb ._egfcf ,_badecb );_dbfe ,_cgbag :=_fdec (_gcfb ._cged ,_cgdeg );_ggea :=make (map[uint64 ]*textPara ,_cgbag *_afbff );_bfgb :=&textTable {PdfRectangle :_gcfb .PdfRectangle ,_baead :_gcfb ._baead ,_egfcf :_afbff ,_cged :_cgbag ,_ecdgfe :_ggea };
if _bdcag {_a .Log .Info ("\u0073\u0075b\u0064\u0069\u0076\u0069\u0064\u0065\u003a\u0020\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0063\u0065\u006c\u006c\u0073\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0079\u004f\u0066\u0066\u0073\u0065\u0074\u0073=\u0025\u002b\u0076\u000a"+"\u0009\u0078\u004f\u0066\u0066\u0073\u0065\u0074\u0073\u003d\u0025\u002b\u0076",_gcfb ._cged ,_gcfb ._egfcf ,_cgbag ,_afbff ,_dega (_badecb ),_dega (_cgdeg ),_bgdf ,_dbfe );
};for _dccd :=0;_dccd < _gcfb ._egfcf ;_dccd ++{_aeddg :=_bgdf [_dccd ];for _aeacc :=0;_aeacc < _gcfb ._cged ;_aeacc ++{_fecgc :=_dbfe [_aeacc ];if _bdcag {_fg .Printf ("\u0025\u0036\u0064\u002c %\u0032\u0064\u003a\u0020\u0078\u0030\u003d\u0025\u0064\u0020\u0079\u0030\u003d\u0025d\u000a",_aeacc ,_dccd ,_fecgc ,_aeddg );
};_fdfcf ,_aecbg :=_gcfb ._fbfef [_fabee (_aeacc ,_dccd )];if !_aecbg {continue ;};_dcgc :=_fdfcf .split (_badecb [_dccd ],_cgdeg [_aeacc ]);for _bdgd :=0;_bdgd < _dcgc ._egfcf ;_bdgd ++{for _bfcc :=0;_bfcc < _dcgc ._cged ;_bfcc ++{_gdgb :=_dcgc .get (_bfcc ,_bdgd );
_bfgb .put (_fecgc +_bfcc ,_aeddg +_bdgd ,_gdgb );if _bdcag {_fg .Printf ("\u0025\u0038\u0064\u002c\u0020\u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_fecgc +_bfcc ,_aeddg +_bdgd ,_gdgb );};};};};};return _bfgb ;};var _fggd =_ed .MustCompile ("\u005e\u005c\u0073\u002a\u0028\u005c\u0064\u002b\u005c\u002e\u003f|\u005b\u0049\u0069\u0076\u005d\u002b\u0029\u005c\u0073\u002a\\\u0029\u003f\u0024");


// PageFonts represents extracted fonts on a PDF page.
type PageFonts struct{Fonts []Font ;};func (_cbee *shapesState )addPoint (_ccbc ,_fgca float64 ){_gbeb :=_cbee .establishSubpath ();_cggfc :=_cbee .devicePoint (_ccbc ,_fgca );if _gbeb ==nil {_cbee ._fded =true ;_cbee ._cebe =_cggfc ;}else {_gbeb .add (_cggfc );
};};const (RenderModeStroke RenderMode =1<<iota ;RenderModeFill ;RenderModeClip ;);func (_bdbg *shapesState )drawRectangle (_fdad ,_bbdg ,_dfbc ,_aeed float64 ){if _bbbg {_eeg :=_bdbg .devicePoint (_fdad ,_bbdg );_cggdc :=_bdbg .devicePoint (_fdad +_dfbc ,_bbdg +_aeed );
_fbbd :=_dc .PdfRectangle {Llx :_eeg .X ,Lly :_eeg .Y ,Urx :_cggdc .X ,Ury :_cggdc .Y };_a .Log .Info ("d\u0072a\u0077\u0052\u0065\u0063\u0074\u0061\u006e\u0067l\u0065\u003a\u0020\u00256.\u0032\u0066",_fbbd );};_bdbg .newSubPath ();_bdbg .moveTo (_fdad ,_bbdg );
_bdbg .lineTo (_fdad +_dfbc ,_bbdg );_bdbg .lineTo (_fdad +_dfbc ,_bbdg +_aeed );_bdbg .lineTo (_fdad ,_bbdg +_aeed );_bdbg .closePath ();};func _ggfca (_gbce []*textWord ,_bcbcb int )[]*textWord {_cfbga :=len (_gbce );copy (_gbce [_bcbcb :],_gbce [_bcbcb +1:]);
return _gbce [:_cfbga -1];};func (_gbddc paraList )topoOrder ()[]int {if _cffg {_a .Log .Info ("\u0074\u006f\u0070\u006f\u004f\u0072\u0064\u0065\u0072\u003a");};_cbac :=len (_gbddc );_fgec :=make ([]bool ,_cbac );_dacd :=make ([]int ,0,_cbac );_adef :=_gbddc .llyOrdering ();
var _babeb func (_eggbd int );_babeb =func (_eeede int ){_fgec [_eeede ]=true ;for _bdceb :=0;_bdceb < _cbac ;_bdceb ++{if !_fgec [_bdceb ]{if _gbddc .readBefore (_adef ,_eeede ,_bdceb ){_babeb (_bdceb );};};};_dacd =append (_dacd ,_eeede );};for _caae :=0;
_caae < _cbac ;_caae ++{if !_fgec [_caae ]{_babeb (_caae );};};return _cfeb (_dacd );};func _gfc (_bccg *TextMarkArray ,_gacd *string ,_gfa *int ,_egd string )error {_dgf :=_bccg .Elements ()[0].DirectObject ;_egfe ,_cdafb :=_bd .GetString (_dgf );if !_cdafb {return _fg .Errorf ("\u0075n\u0061\u0062l\u0065\u0020\u0074\u006f \u0067\u0065\u0074 \u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0042\u0079te\u0073\u0020\u0066r\u006f\u006d \u0064\u0069\u0072\u0065\u0063\u0074O\u0062\u006ae\u0063\u0074");
};_dcbb :=_caff (_bccg );_ccgb ,_cdafb :=_bd .GetStringBytes (_dgf );if !_cdafb {return _bd .ErrTypeError ;};_dgdf :=_bccg .Elements ()[0].Font ;_cbbc :=_fecd (_ccgb ,_dgdf );_ddfg :="";_dgag :=*_gacd ;if len (_dgag )> *_gfa {_ddfg =_dgag [*_gfa :*_gfa +len (_dcbb )];
}else if *_gfa ==len (_egd )-1&&len (_dgag )> *_gfa {_ddfg =_dgag [*_gfa :];};_cbd :="";_cfea :=_db .Split (_cbbc ,"\u0020");_eccb :=_cfea [len (_cfea )-1];if _eccb ==_dcbb &&*_gfa ==0{_dfce :=_db .LastIndex (_cbbc ,_dcbb );_cbd =_bge (_cbbc ,_dfce ,len (_dcbb )+_dfce ,_ddfg );
}else if *_gfa ==len (_egd )-1&&len (_dgag )> *_gfa {_cbd =_db .ReplaceAll (_cbbc ,_dcbb ,_dgag [*_gfa :]);}else {_cbd =_db .Replace (_cbbc ,_dcbb ,_ddfg ,1);};_bbfg (_egfe ,_cbd ,_dgdf );*_gfa +=len (_dcbb );return nil ;};func _cdcb (_dadee *_dc .Image ,_cgfbc _df .Color )_eb .Image {_degbd ,_cccea :=int (_dadee .Width ),int (_dadee .Height );
_afdae :=_eb .NewRGBA (_eb .Rect (0,0,_degbd ,_cccea ));for _abgbe :=0;_abgbe < _cccea ;_abgbe ++{for _eabef :=0;_eabef < _degbd ;_eabef ++{_abecfb ,_bcba :=_dadee .ColorAt (_eabef ,_abgbe );if _bcba !=nil {_a .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_eabef ,_abgbe );
continue ;};_defgfg ,_ccbcg ,_aede ,_ :=_abecfb .RGBA ();var _dfeg _df .Color ;if _defgfg +_ccbcg +_aede ==0{_dfeg =_df .Transparent ;}else {_dfeg =_cgfbc ;};_afdae .Set (_eabef ,_abgbe ,_dfeg );};};return _afdae ;};func (_efda *subpath )removeDuplicates (){if len (_efda ._gfad )==0{return ;
};_dfec :=[]_eac .Point {_efda ._gfad [0]};for _ ,_beea :=range _efda ._gfad [1:]{if !_edea (_beea ,_dfec [len (_dfec )-1]){_dfec =append (_dfec ,_beea );};};_efda ._gfad =_dfec ;};func (_dfd *stateStack )size ()int {return len (*_dfd )};func (_dbff compositeCell )String ()string {_abdf :="";
if len (_dbff .paraList )> 0{_abdf =_geecd (_dbff .paraList .merge ().text (),50);};return _fg .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0070\u0061\u0072a\u0073\u0020\u0025\u0071",_dbff .PdfRectangle ,len (_dbff .paraList ),_abdf );
};func _acfd (_beecb ,_geae _dc .PdfRectangle )bool {return _geae .Llx <=_beecb .Urx &&_beecb .Llx <=_geae .Urx ;};

// RangeOffset returns the TextMarks in `ma` that overlap text[start:end] in the extracted text.
// These are tm: `start` <= tm.Offset + len(tm.Text) && tm.Offset < `end` where
// `start` and `end` are offsets in the extracted text.
// NOTE: TextMarks can contain multiple characters. e.g. "ffi" for the  ligature so the first and
// last elements of the returned TextMarkArray may only partially overlap text[start:end].
func (_eeed *TextMarkArray )RangeOffset (start ,end int )(*TextMarkArray ,error ){if _eeed ==nil {return nil ,_g .New ("\u006da\u003d\u003d\u006e\u0069\u006c");};if end < start {return nil ,_fg .Errorf ("\u0065\u006e\u0064\u0020\u003c\u0020\u0073\u0074\u0061\u0072\u0074\u002e\u0020\u0052\u0061n\u0067\u0065\u004f\u0066\u0066\u0073\u0065\u0074\u0020\u006e\u006f\u0074\u0020d\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020\u0073\u0074\u0061\u0072t=\u0025\u0064\u0020\u0065\u006e\u0064\u003d\u0025\u0064\u0020",start ,end );
};_edcb :=len (_eeed ._abfg );if _edcb ==0{return _eeed ,nil ;};if start < _eeed ._abfg [0].Offset {start =_eeed ._abfg [0].Offset ;};if end > _eeed ._abfg [_edcb -1].Offset +1{end =_eeed ._abfg [_edcb -1].Offset +1;};_ggca :=_c .Search (_edcb ,func (_agec int )bool {return _eeed ._abfg [_agec ].Offset +len (_eeed ._abfg [_agec ].Text )-1>=start });
if !(0<=_ggca &&_ggca < _edcb ){_bbeec :=_fg .Errorf ("\u006f\u0075\u0074\u0020\u006f\u0066\u0020\u0072\u0061\u006e\u0067\u0065\u002e\u0020\u0073\u0074\u0061\u0072\u0074\u003d%\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009 \u006c\u0061\u0073\u0074\u003d%\u0076",start ,_ggca ,_edcb ,_eeed ._abfg [0],_eeed ._abfg [_edcb -1]);
return nil ,_bbeec ;};_abdbf :=_c .Search (_edcb ,func (_adga int )bool {return _eeed ._abfg [_adga ].Offset > end -1});if !(0<=_abdbf &&_abdbf < _edcb ){_ccbd :=_fg .Errorf ("\u006f\u0075\u0074\u0020\u006f\u0066\u0020r\u0061\u006e\u0067e\u002e\u0020\u0065n\u0064\u003d%\u0064\u0020\u0069\u0045\u006e\u0064=\u0025d \u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d\u0025\u0076",end ,_abdbf ,_edcb ,_eeed ._abfg [0],_eeed ._abfg [_edcb -1]);
return nil ,_ccbd ;};if _abdbf <=_ggca {return nil ,_fg .Errorf ("\u0069\u0045\u006e\u0064\u0020\u003c=\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003a\u0020\u0073\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u0065\u006ed\u003d\u0025\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020i\u0045n\u0064\u003d\u0025\u0064",start ,end ,_ggca ,_abdbf );
};return &TextMarkArray {_abfg :_eeed ._abfg [_ggca :_abdbf ]},nil ;};

// Editor represents a document editor object
type Editor struct{_gf *_dc .PdfReader };func (_cbfb *textLine )text ()string {var _dabg []string ;for _ ,_bgad :=range _cbfb ._egdbg {if _bgad ._gcba {_dabg =append (_dabg ,"\u0020");};_dabg =append (_dabg ,_bgad ._aegcb );};_gegc :=_db .Join (_dabg ,"");
_dgedd :=_dfb ([]rune (_gegc ));return _dgedd ._ag ;};func _gegcd (_eeef map[int ]intSet )[]int {_fcfcb :=make ([]int ,0,len (_eeef ));for _fcecd :=range _eeef {_fcfcb =append (_fcfcb ,_fcecd );};_c .Ints (_fcfcb );return _fcfcb ;};func (_eea *textObject )nextLine (){_eea .moveLP (0,-_eea ._gcfda ._deeb )};
func _fdccbf (_cecb int ,_cdbc func (int ,int )bool )[]int {_gdddb :=make ([]int ,_cecb );for _degdd :=range _gdddb {_gdddb [_degdd ]=_degdd ;};_c .Slice (_gdddb ,func (_febg ,_abbeg int )bool {return _cdbc (_gdddb [_febg ],_gdddb [_abbeg ])});return _gdddb ;
};func (_beed *shapesState )cubicTo (_addf ,_efde ,_bebce ,_fbee ,_fdgc ,_agccg float64 ){if _bbbg {_a .Log .Info ("\u0063\u0075\u0062\u0069\u0063\u0054\u006f\u003a");};_beed .addPoint (_fdgc ,_agccg );};func (_edeg *wordBag )arrangeText (_cbaf bool )*textPara {_edeg .sort ();
if _cdd {_edeg .removeDuplicates ();};var _eadc []*textLine ;for _ ,_gefae :=range _edeg .depthIndexes (){for !_edeg .empty (_gefae ){_ggfgf :=_edeg .firstReadingIndex (_gefae );_aeef :=_edeg .firstWord (_ggfgf );_agea :=_adecbd (_edeg ,_ggfgf );_afcag :=_aeef ._bbaa ;
if _afcag < _efbgb {_afcag =_efbgb ;};_agee :=_aeef ._bfdff -_dfda *_afcag ;_gedd :=_aeef ._bfdff +_dfda *_afcag ;_febf :=_bfgd *_afcag ;_dfeaa :=_egcg *_afcag ;_gdab :for {var _cffa *textWord ;_bagd :=0;for _ ,_cfdg :=range _edeg .depthBand (_agee ,_gedd ){_gbad :=_edeg .highestWord (_cfdg ,_agee ,_gedd );
if _gbad ==nil {continue ;};_afab :=_gffb (_gbad ,_agea ._egdbg [len (_agea ._egdbg )-1]);if _afab < -_dfeaa {break _gdab ;};if !_cbaf &&_afab > _febf {continue ;};if _cffa !=nil &&_abfcc (_gbad ,_cffa )>=0{continue ;};_cffa =_gbad ;_bagd =_cfdg ;};if _cffa ==nil {break ;
};_agea .pullWord (_edeg ,_cffa ,_bagd );};_agea .markWordBoundaries ();_eadc =append (_eadc ,_agea );};};if len (_eadc )==0{return nil ;};_c .Slice (_eadc ,func (_eadd ,_feag int )bool {return _eabc (_eadc [_eadd ],_eadc [_feag ])< 0});_bdfd :=_dbcg (_edeg .PdfRectangle ,_eadc );
if _gacb {_a .Log .Info ("\u0061\u0072\u0072an\u0067\u0065\u0054\u0065\u0078\u0074\u0020\u0021\u0021\u0021\u0020\u0070\u0061\u0072\u0061\u003d\u0025\u0073",_bdfd .String ());if _dgfc {for _bbcad ,_edec :=range _bdfd ._babfe {_fg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bbcad ,_edec .String ());
if _fceag {for _fdgf ,_abec :=range _edec ._egdbg {_fg .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_fdgf ,_abec .String ());for _eaff ,_bdafg :=range _abec ._egded {_fg .Printf ("\u00251\u0032\u0064\u003a\u0020\u0025\u0073\n",_eaff ,_bdafg .String ());
};};};};};};return _bdfd ;};func _gfefa (_egfc _dc .PdfRectangle )*ruling {return &ruling {_bcdf :_dafa ,_ddbf :_egfc .Ury ,_fbab :_egfc .Llx ,_bgdd :_egfc .Urx };};

// Match defines the structure for each match, including pattern, indexes, and locations.
type Match struct{Pattern string ;Indexes [][]int ;Locations []Box ;};

// List returns all the list objects detected on the page.
// It detects all the bullet point Lists from a given pdf page and builds a slice of bullet list objects.
// A given bullet list object has a tree structure.
// Each bullet point list is extracted with the text content it contains and all the sub lists found under it as children in the tree.
// The rest content of the pdf is ignored and only text in the bullet point lists are extracted.
// The list extraction is done in two ways.
// 1. If the document is tagged then the lists are extracted using the tags provided in the document.
// 2. Otherwise the bullet lists are extracted from the raw text using regex matching.
// By default the document tag is used if available.
// However this can be disabled using `DisableDocumentTags` in the `Options` object.
// Sometimes disabling document tags option might give a better bullet list extraction if the document was tagged incorrectly.
//
//	    options := &Options{
//		     DisableDocumentTags: false, // this means use document tag if available
//	    }
//	    ex, err := NewWithOptions(page, options)
//	    // handle error
//	    pageText, _, _, err := ex.ExtractPageText()
//	    // handle error
//	    lists := pageText.List()
//	    txt := lists.Text()
func (_fdbef PageText )List ()lists {_affdb :=!_fdbef ._aee ._fgdff ;_cdaaa :=_fdbef .getParagraphs ();_debc :=_cdaaa .list ();if _fdbef ._age !=nil &&_affdb {_ecgd :=_aegf (&_cdaaa );if len (_fdbef ._age .K )==0{_a .Log .Debug ("\u004c\u0069\u0073\u0074\u003a\u0020\u0073t\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e'\u0074\u0020\u0068\u0061\u0076e\u0020\u0061\u006e\u0079\u0020\u0063\u006f\u006e\u0074e\u006e\u0074\u002c\u0020\u0075\u0073\u0069\u006e\u0067\u0020\u0074\u0065\u0078\u0074\u0020\u006d\u0061\u0074\u0063\u0068\u0069\u006e\u0067\u0020\u006d\u0065\u0074\u0068\u006f\u0064\u0020\u0069\u006e\u0073\u0074\u0065\u0061\u0064\u002e");
return _debc ;};_debc =_faceb (_fdbef ._age ,_ecgd ,_fdbef ._gcddc );};return _debc ;};type shapesState struct{_fedg _eac .Matrix ;_adgab _eac .Matrix ;_bdbb []*subpath ;_fded bool ;_cebe _eac .Point ;_dfff *textObject ;};func _bbfg (_edgg *_bd .PdfObjectString ,_fadf string ,_dbfc *_dc .PdfFont ){_adbd ,_feeb :=_dbfc .StringToCharcodeBytes (_fadf );
if _feeb !=0{_a .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0073\u006fm\u0065\u0020\u0072un\u0065\u0073\u0020\u0063\u006f\u0075l\u0064\u0020\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u0065\u006e\u0063\u006f\u0064\u0065d\u002e\u000a\u0009\u0025\u0073\u0020\u002d\u003e \u0025\u0076",_fadf ,_adbd );
};_gbdf :=_bd .MakeStringFromBytes (_adbd );*_edgg =*_gbdf ;};func _efaea (_gadgf *PageText )error {_ebge :=_cde .GetLicenseKey ();if _ebge !=nil &&_ebge .IsLicensed ()||_ade {return nil ;};_fg .Printf ("\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064\u0020c\u006f\u0070\u0079\u0020\u006f\u0066\u0020\u0055\u006e\u0069P\u0044\u0046\u000a");
_fg .Println ("-\u0020\u0047\u0065\u0074\u0020\u0061\u0020\u0066\u0072e\u0065\u0020\u0074\u0072\u0069\u0061\u006c l\u0069\u0063\u0065\u006es\u0065\u0020\u006f\u006e\u0020\u0068\u0074\u0074\u0070s:\u002f\u002fu\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f");
return _g .New ("\u0075\u006e\u0069\u0070d\u0066\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020c\u006fd\u0065\u0020\u0072\u0065\u0071\u0075\u0069r\u0065\u0064");};func (_gdeff compositeCell )parasBBox ()(paraList ,_dc .PdfRectangle ){return _gdeff .paraList ,_gdeff .PdfRectangle ;
};func _beee (_dabe map[float64 ]map[float64 ]gridTile )[]float64 {_ccbfc :=make ([]float64 ,0,len (_dabe ));_defgf :=make (map[float64 ]struct{},len (_dabe ));for _ ,_ebcc :=range _dabe {for _fbedb :=range _ebcc {if _ ,_egbg :=_defgf [_fbedb ];_egbg {continue ;
};_ccbfc =append (_ccbfc ,_fbedb );_defgf [_fbedb ]=struct{}{};};};_c .Float64s (_ccbfc );return _ccbfc ;};func (_bgf *textObject )showTextAdjusted (_efe *_bd .PdfObjectArray ,_fgba int ,_acdb string )error {_dfgfg :=false ;for _ ,_cabe :=range _efe .Elements (){switch _cabe .(type ){case *_bd .PdfObjectFloat ,*_bd .PdfObjectInteger :_agdd ,_ccba :=_bd .GetNumberAsFloat (_cabe );
if _ccba !=nil {_a .Log .Debug ("\u0045\u0052\u0052\u004fR\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078t\u0041\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0042\u0061\u0064\u0020\u006e\u0075\u006d\u0065r\u0069\u0063\u0061\u006c\u0020a\u0072\u0067\u002e\u0020\u006f\u003d\u0025\u0073\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_cabe ,_efe );
return _ccba ;};_gbcaa ,_gabb :=-_agdd *0.001*_bgf ._gcfda ._ffbg ,0.0;if _dfgfg {_gabb ,_gbcaa =_gbcaa ,_gabb ;};_ffg :=_affc (_eac .Point {X :_gbcaa ,Y :_gabb });_bgf ._ddgbc .Concat (_ffg );case *_bd .PdfObjectString :_dbdb :=_bd .TraceToDirectObject (_cabe );
_egef ,_ebgd :=_bd .GetStringBytes (_dbdb );if !_ebgd {_a .Log .Trace ("s\u0068\u006f\u0077\u0054\u0065\u0078\u0074\u0041\u0064j\u0075\u0073\u0074\u0065\u0064\u003a\u0020Ba\u0064\u0020\u0073\u0074r\u0069\u006e\u0067\u0020\u0061\u0072\u0067\u002e\u0020o=\u0025\u0073 \u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_cabe ,_efe );
return _bd .ErrTypeError ;};_bgf .renderText (_dbdb ,_egef ,_fgba ,_acdb );default:_a .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078\u0074A\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0055\u006e\u0065\u0078p\u0065\u0063\u0074\u0065\u0064\u0020\u0074\u0079\u0070\u0065\u0020\u0028%T\u0029\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_cabe ,_efe );
return _bd .ErrTypeError ;};};return nil ;};

// String returns a description of `w`.
func (_ccdcgf *textWord )String ()string {return _fg .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_ccdcgf ._bfdff ,_ccdcgf .PdfRectangle ,_ccdcgf ._bbaa ,_ccdcgf ._aegcb );
};func (_bdcfd rulingList )splitSec ()[]rulingList {_c .Slice (_bdcfd ,func (_fdcgd ,_bagbb int )bool {_fdfcb ,_ebeae :=_bdcfd [_fdcgd ],_bdcfd [_bagbb ];if _fdfcb ._fbab !=_ebeae ._fbab {return _fdfcb ._fbab < _ebeae ._fbab ;};return _fdfcb ._bgdd < _ebeae ._bgdd ;
});_beeee :=make (map[*ruling ]struct{},len (_bdcfd ));_defed :=func (_dgdba *ruling )rulingList {_ecabc :=rulingList {_dgdba };_beeee [_dgdba ]=struct{}{};for _ ,_bdead :=range _bdcfd {if _ ,_cddae :=_beeee [_bdead ];_cddae {continue ;};for _ ,_bceb :=range _ecabc {if _bdead .alignsSec (_bceb ){_ecabc =append (_ecabc ,_bdead );
_beeee [_bdead ]=struct{}{};break ;};};};return _ecabc ;};_fcfg :=[]rulingList {_defed (_bdcfd [0])};for _ ,_egbb :=range _bdcfd [1:]{if _ ,_cfbf :=_beeee [_egbb ];_cfbf {continue ;};_fcfg =append (_fcfg ,_defed (_egbb ));};return _fcfg ;};type compositeCell struct{_dc .PdfRectangle ;
paraList ;};func (_defedf *textPara )taken ()bool {return _defedf ==nil ||_defedf ._cdeb };func _faga (_gfdg ,_fdaab _dc .PdfRectangle )_dc .PdfRectangle {return _dc .PdfRectangle {Llx :_b .Min (_gfdg .Llx ,_fdaab .Llx ),Lly :_b .Min (_gfdg .Lly ,_fdaab .Lly ),Urx :_b .Max (_gfdg .Urx ,_fdaab .Urx ),Ury :_b .Max (_gfdg .Ury ,_fdaab .Ury )};
};var _gaac =[]string {"\u2756","\u27a2","\u2713","\u2022","\uf0a7","\u25a1","\u2212","\u25a0","\u25aa","\u006f"};func (_cbege paraList )yNeighbours (_daagd float64 )map[*textPara ][]int {_fgcbc :=make ([]event ,2*len (_cbege ));if _daagd ==0{for _dded ,_ggaca :=range _cbege {_fgcbc [2*_dded ]=event {_ggaca .Lly ,true ,_dded };
_fgcbc [2*_dded +1]=event {_ggaca .Ury ,false ,_dded };};}else {for _egfeg ,_bbcag :=range _cbege {_fgcbc [2*_egfeg ]=event {_bbcag .Lly -_daagd *_bbcag .fontsize (),true ,_egfeg };_fgcbc [2*_egfeg +1]=event {_bbcag .Ury +_daagd *_bbcag .fontsize (),false ,_egfeg };
};};return _cbege .eventNeighbours (_fgcbc );};func _egdfd (_cfeae _eac .Point )*subpath {return &subpath {_gfad :[]_eac .Point {_cfeae }}};type imageExtractContext struct{_gcf []ImageMark ;_dcc int ;_eca int ;_dff int ;_abd map[*_bd .PdfObjectStream ]*cachedImage ;
_ddc *ImageExtractOptions ;_gdga bool ;};func _dgbab (_agff *list )[]*textLine {for _ ,_fdccb :=range _agff ._dbcfd {switch _fdccb ._fdda {case "\u004c\u0042\u006fd\u0079":if len (_fdccb ._cfeee )!=0{return _fdccb ._cfeee ;};return _dgbab (_fdccb );case "\u0053\u0070\u0061\u006e":return _fdccb ._cfeee ;
case "I\u006e\u006c\u0069\u006e\u0065\u0053\u0068\u0061\u0070\u0065":return _fdccb ._cfeee ;};};return nil ;};type textObject struct{_fbfec *Extractor ;_acec *_dc .PdfPageResources ;_bfca _cd .GraphicsState ;_gcfda *textState ;_caag *stateStack ;_ddgbc _eac .Matrix ;
_dcde _eac .Matrix ;_edbb []*textMark ;_gfcd bool ;};func (_dfbcg *wordBag )absorb (_fedb *wordBag ){_gcbb :=_fedb .makeRemovals ();for _bcaec ,_cbcae :=range _fedb ._cfag {for _ ,_ffbc :=range _cbcae {_dfbcg .pullWord (_ffbc ,_bcaec ,_gcbb );};};_fedb .applyRemovals (_gcbb );
};

// Box represents the bounding box of a given textMark on pdf page.
// This might be used for different kinds of high lighting after doing the search
type Box struct{BBox _dc .PdfRectangle ;};

// String returns a description of `k`.
func (_ccbba rulingKind )String ()string {_facce ,_adfde :=_gaecd [_ccbba ];if !_adfde {return _fg .Sprintf ("\u004e\u006ft\u0020\u0061\u0020r\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_ccbba );};return _facce ;};type markKind int ;var _gaef string ="\u0028\u003f\u0069\u0029\u005e\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028?\u003a\u0044\u007cM\u0029\u007c\u0044\u003f\u0043{\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028\u003f\u003a\u004c\u007c\u0043\u0029\u007cL\u003f\u0058\u007b\u0030\u002c\u0033}\u0029\u0028\u0049\u0028\u003f\u003a\u0056\u007c\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u005c\u0029\u007c\u005c\u002e\u0029\u007c\u005e\u005c\u0028\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028\u003f\u003aD\u007cM\u0029\u007c\u0044\u003f\u0043\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028?\u003a\u004c\u007c\u0043\u0029\u007c\u004c?\u0058\u007b0\u002c\u0033\u007d\u0029(\u0049\u0028\u003f\u003a\u0056|\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u005c\u0029";
func (_eaecc rulingList )aligned ()bool {if len (_eaecc )< 2{return false ;};_gfeea :=make (map[*ruling ]int );_gfeea [_eaecc [0]]=0;for _ ,_gggg :=range _eaecc [1:]{_afef :=false ;for _geafbe :=range _gfeea {if _gggg .gridIntersecting (_geafbe ){_gfeea [_geafbe ]++;
_afef =true ;break ;};};if !_afef {_gfeea [_gggg ]=0;};};_beaa :=0;for _ ,_edfc :=range _gfeea {if _edfc ==0{_beaa ++;};};_ecga :=float64 (_beaa )/float64 (len (_eaecc ));_geedc :=_ecga <=1.0-_fbed ;if _egfg {_a .Log .Info ("\u0061\u006c\u0069\u0067\u006e\u0065\u0064\u003d\u0025\u0074\u0020\u0075\u006em\u0061\u0074\u0063\u0068\u0065\u0064=\u0025\u002e\u0032\u0066\u003d\u0025\u0064\u002f\u0025\u0064\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_geedc ,_ecga ,_beaa ,len (_eaecc ),_eaecc .String ());
};return _geedc ;};func _cgfg (_ccda *textLine ,_cccg []*textLine )float64 {var _ecdd float64 =-1;for _ ,_beae :=range _cccg {if _beae ._ddgc > _ccda ._ddgc {if _b .Round (_beae .Llx )>=_b .Round (_ccda .Llx ){_ecdd =_beae ._ddgc ;}else {break ;};};};return _ecdd ;
};