//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package extractor is used for quickly extracting PDF content through a simple interface.
// Currently offers functionality for extracting textual content.
package extractor ;import (_ba "bytes";_e "errors";_eb "fmt";_bbc "github.com/unidoc/unipdf/v3/common";_eae "github.com/unidoc/unipdf/v3/contentstream";_ga "github.com/unidoc/unipdf/v3/core";_ag "github.com/unidoc/unipdf/v3/internal/license";_dae "github.com/unidoc/unipdf/v3/internal/textencoding";
_ge "github.com/unidoc/unipdf/v3/internal/transform";_da "github.com/unidoc/unipdf/v3/model";_ce "golang.org/x/image/draw";_ac "golang.org/x/text/unicode/norm";_ab "image";_a "image/color";_f "io";_bb "math";_df "reflect";_ea "regexp";_c "sort";_fg "strings";
_d "unicode";_b "unicode/utf8";);func (_ebcf paraList )topoOrder ()[]int {if _fbag {_bbc .Log .Info ("\u0074\u006f\u0070\u006f\u004f\u0072\u0064\u0065\u0072\u003a");};_dedcc :=len (_ebcf );_deced :=make ([]bool ,_dedcc );_egbb :=make ([]int ,0,_dedcc );
_eebdd :=_ebcf .llyOrdering ();var _dfabb func (_cfdg int );_dfabb =func (_fdda int ){_deced [_fdda ]=true ;for _bcef :=0;_bcef < _dedcc ;_bcef ++{if !_deced [_bcef ]{if _ebcf .readBefore (_eebdd ,_fdda ,_bcef ){_dfabb (_bcef );};};};_egbb =append (_egbb ,_fdda );
};for _defcg :=0;_defcg < _dedcc ;_defcg ++{if !_deced [_defcg ]{_dfabb (_defcg );};};return _fgdcf (_egbb );};func (_fdaa *shapesState )moveTo (_ebffa ,_eab float64 ){_fdaa ._afe =true ;_fdaa ._bcec =_fdaa .devicePoint (_ebffa ,_eab );if _bfaf {_bbc .Log .Info ("\u006d\u006fv\u0065\u0054\u006f\u003a\u0020\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0064\u0065\u0076\u0069\u0063\u0065\u003d%.\u0032\u0066",_ebffa ,_eab ,_fdaa ._bcec );
};};var _efgb string ="\u0028\u003f\u0069\u0029\u005e\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028?\u003a\u0044\u007cM\u0029\u007c\u0044\u003f\u0043{\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028\u003f\u003a\u004c\u007c\u0043\u0029\u007cL\u003f\u0058\u007b\u0030\u002c\u0033}\u0029\u0028\u0049\u0028\u003f\u003a\u0056\u007c\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u005c\u0029\u007c\u005c\u002e\u0029\u007c\u005e\u005c\u0028\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028\u003f\u003aD\u007cM\u0029\u007c\u0044\u003f\u0043\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028?\u003a\u004c\u007c\u0043\u0029\u007c\u004c?\u0058\u007b0\u002c\u0033\u007d\u0029(\u0049\u0028\u003f\u003a\u0056|\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u005c\u0029";
func (_adbe pathSection )bbox ()_da .PdfRectangle {_dgfb :=_adbe ._febc [0]._fbed [0];_bebd :=_da .PdfRectangle {Llx :_dgfb .X ,Urx :_dgfb .X ,Lly :_dgfb .Y ,Ury :_dgfb .Y };_ccgb :=func (_fbecf _ge .Point ){if _fbecf .X < _bebd .Llx {_bebd .Llx =_fbecf .X ;
}else if _fbecf .X > _bebd .Urx {_bebd .Urx =_fbecf .X ;};if _fbecf .Y < _bebd .Lly {_bebd .Lly =_fbecf .Y ;}else if _fbecf .Y > _bebd .Ury {_bebd .Ury =_fbecf .Y ;};};for _ ,_ffcc :=range _adbe ._febc [0]._fbed [1:]{_ccgb (_ffcc );};for _ ,_bgag :=range _adbe ._febc [1:]{for _ ,_cgd :=range _bgag ._fbed {_ccgb (_cgd );
};};return _bebd ;};func (_gcbea paraList )readBefore (_fadb []int ,_fafe ,_dcgf int )bool {_dfegd ,_eecge :=_gcbea [_fafe ],_gcbea [_dcgf ];if _caba (_dfegd ,_eecge )&&_dfegd .Lly > _eecge .Lly {return true ;};if !(_dfegd ._adged .Urx < _eecge ._adged .Llx ){return false ;
};_bccg ,_deegd :=_dfegd .Lly ,_eecge .Lly ;if _bccg > _deegd {_deegd ,_bccg =_bccg ,_deegd ;};_bbgcb :=_bb .Max (_dfegd ._adged .Llx ,_eecge ._adged .Llx );_aecf :=_bb .Min (_dfegd ._adged .Urx ,_eecge ._adged .Urx );_cccb :=_gcbea .llyRange (_fadb ,_bccg ,_deegd );
for _ ,_fefg :=range _cccb {if _fefg ==_fafe ||_fefg ==_dcgf {continue ;};_cgfbg :=_gcbea [_fefg ];if _cgfbg ._adged .Llx <=_aecf &&_bbgcb <=_cgfbg ._adged .Urx {return false ;};};return true ;};func (_fabf paraList )sortTopoOrder (){_gedae :=_fabf .topoOrder ();
_fabf .reorder (_gedae )};

// Font represents the font properties on a PDF page.
type Font struct{PdfFont *_da .PdfFont ;

// FontName represents Font Name from font properties.
FontName string ;

// FontType represents Font Subtype entry in the font dictionary inside page resources.
// Examples : type0, Type1, MMType1, Type3, TrueType, CIDFont.
FontType string ;

// ToUnicode is true if font provides a `ToUnicode` mapping.
ToUnicode bool ;

// IsCID is true if underlying font is a composite font.
// Composite font is represented by a font dictionary whose Subtype is `Type0`
IsCID bool ;

// IsSimple is true if font is simple font.
// A simple font is limited to only 8 bit (255) character codes.
IsSimple bool ;

// FontData represents the raw data of the embedded font file.
// It can have format TrueType (TTF), PostScript Font (PFB) or Compact Font Format (CCF).
// FontData value can be indicates from `FontFile`, `FontFile2` or `FontFile3` inside Font Descriptor.
// At most, only one of `FontFile`, `FontFile2` or `FontFile3` will be FontData value.
FontData []byte ;

// FontFileName is a name representing the font. it has format:
// (Font Name) + (Font Type Extension), example: helvetica.ttf.
FontFileName string ;

// FontDescriptor represents metrics and other attributes inside font properties from PDF Structure (Font Descriptor).
FontDescriptor *_da .PdfFontDescriptor ;};func (_fedf *textPara )text ()string {_bcbg :=new (_ba .Buffer );_fedf .writeText (_bcbg );return _bcbg .String ();};

// ToText returns the page text as a single string.
// Deprecated: This function is deprecated and will be removed in a future major version. Please use
// Text() instead.
func (_aee PageText )ToText ()string {return _aee .Text ()};func (_gbeb *stateStack )size ()int {return len (*_gbeb )};func (_fcg *textObject )moveTextSetLeading (_fcag ,_ffd float64 ){_fcg ._gcdgg ._bag =-_ffd ;_fcg .moveLP (_fcag ,_ffd );};func (_adfbe intSet )has (_cdfea int )bool {_ ,_bcdfe :=_adfbe [_cdfea ];
return _bcdfe };func _bfecg (_cgfdg ,_dgbb _da .PdfRectangle )bool {return _cgfdg .Lly <=_dgbb .Ury &&_dgbb .Lly <=_cgfdg .Ury ;};func _dcfad (_caacf *PageText )error {_gbdae :=_ag .GetLicenseKey ();if _gbdae !=nil &&_gbdae .IsLicensed ()||_ca {return nil ;
};_eb .Printf ("\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064\u0020c\u006f\u0070\u0079\u0020\u006f\u0066\u0020\u0055\u006e\u0069P\u0044\u0046\u000a");_eb .Println ("-\u0020\u0047\u0065\u0074\u0020\u0061\u0020\u0066\u0072e\u0065\u0020\u0074\u0072\u0069\u0061\u006c l\u0069\u0063\u0065\u006es\u0065\u0020\u006f\u006e\u0020\u0068\u0074\u0074\u0070s:\u002f\u002fu\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f");
return _e .New ("\u0075\u006e\u0069\u0070d\u0066\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020c\u006fd\u0065\u0020\u0072\u0065\u0071\u0075\u0069r\u0065\u0064");};const (RenderModeStroke RenderMode =1<<iota ;RenderModeFill ;RenderModeClip ;);func _bbfg (_bgbf []*textLine ,_bgeb map[float64 ][]*textLine )[]*list {_gbbb :=_ggda (_bgeb );
_dfaf :=[]*list {};if len (_gbbb )==0{return _dfaf ;};_gabb :=_gbbb [0];_gcbf :=1;_efbg :=_bgeb [_gabb ];for _ceag ,_beaf :=range _efbg {var _begb float64 ;_gceag :=[]*list {};_fgdcg :=_beaf ._dfbc ;_cecb :=-1.0;if _ceag < len (_efbg )-1{_cecb =_efbg [_ceag +1]._dfbc ;
};if _gcbf < len (_gbbb ){_gceag =_cdgd (_bgbf ,_bgeb ,_gbbb ,_gcbf ,_fgdcg ,_cecb );};_begb =_cecb ;if len (_gceag )> 0{_dcgd :=_gceag [0];if len (_dcgd ._fadc )> 0{_begb =_dcgd ._fadc [0]._dfbc ;};};_gec :=[]*textLine {_beaf };_fbae :=_gadad (_beaf ,_bgbf ,_gbbb ,_fgdcg ,_begb );
_gec =append (_gec ,_fbae ...);_afbf :=_dgbbe (_gec ,"\u0062\u0075\u006c\u006c\u0065\u0074",_gceag );_afbf ._dfab =_eccg (_gec ,"");_dfaf =append (_dfaf ,_afbf );};return _dfaf ;};func (_edab *TextMarkArray )getTextMarkAtOffset (_fcage int )*TextMark {for _ ,_acgcb :=range _edab ._cggca {if _acgcb .Offset ==_fcage {return &_acgcb ;
};};return nil ;};func (_bdab *shapesState )fill (_gcfe *[]pathSection ){_ccbd :=pathSection {_febc :_bdab ._gcda ,Color :_bdab ._cefec .getFillColor ()};*_gcfe =append (*_gcfe ,_ccbd );if _eggfb {_afdg :=_ccbd .bbox ();_eb .Printf ("\u0020 \u0020\u0020\u0046\u0049\u004c\u004c\u003a %\u0032\u0064\u0020\u0066\u0069\u006c\u006c\u0073\u0020\u0028\u0025\u0064\u0020\u006ee\u0077\u0029 \u0073\u0073\u003d%\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d\u0025\u0033\u0076\u0020\u0025\u0036\u002e\u0032f\u003d\u00256.\u0032\u0066\u0078%\u0036\u002e\u0032\u0066\u000a",len (*_gcfe ),len (_ccbd ._febc ),_bdab ,_ccbd .Color ,_afdg ,_afdg .Width (),_afdg .Height ());
if _adce {for _faeb ,_bdf :=range _ccbd ._febc {_eb .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_faeb ,_bdf );if _faeb ==10{break ;};};};};};func (_faeea *textTable )markCells (){for _gdgb :=0;_gdgb < _faeea ._feaf ;_gdgb ++{for _faegc :=0;
_faegc < _faeea ._dabeb ;_faegc ++{_fdcfd :=_faeea .get (_faegc ,_gdgb );if _fdcfd !=nil {_fdcfd ._bdec =true ;};};};};func _dgaf (_cbgcc map[int ][]float64 )[]int {_fgfda :=make ([]int ,len (_cbgcc ));_bfagd :=0;for _gaac :=range _cbgcc {_fgfda [_bfagd ]=_gaac ;
_bfagd ++;};_c .Ints (_fgfda );return _fgfda ;};type textState struct{_dbe float64 ;_bbde float64 ;_adc float64 ;_bag float64 ;_deec float64 ;_dggg RenderMode ;_cgc float64 ;_fdeg *_da .PdfFont ;_abf _da .PdfRectangle ;_acbd int ;_dff int ;};func (_bfccd *compositeCell )updateBBox (){for _ ,_gccad :=range _bfccd .paraList {_bfccd .PdfRectangle =_bafg (_bfccd .PdfRectangle ,_gccad .PdfRectangle );
};};const (_gbbd markKind =iota ;_gefg ;_dacb ;_bgca ;);func (_gbe *textObject )setTextMatrix (_eaee []float64 ){if len (_eaee )!=6{_bbc .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u006c\u0065\u006e\u0028\u0066\u0029\u0020\u0021\u003d\u0020\u0036\u0020\u0028\u0025\u0064\u0029",len (_eaee ));
return ;};_gag ,_dca ,_eegg ,_gdac ,_eaae ,_fagb :=_eaee [0],_eaee [1],_eaee [2],_eaee [3],_eaee [4],_eaee [5];_gbe ._gbeg =_ge .NewMatrix (_gag ,_dca ,_eegg ,_gdac ,_eaae ,_fagb );_gbe ._ccdc =_gbe ._gbeg ;};func _bdcc (_dbcc float64 )bool {return _bb .Abs (_dbcc )< _acda };
var _fcecb *_ea .Regexp =_ea .MustCompile (_efgb +"\u007c"+_bddfc );var _bddfc string ="\u005e\u005b\u0061\u002d\u007a\u0041\u002dZ\u005d\u0028\u005c)\u007c\u005c\u002e)\u007c\u005e[\u005c\u0064\u005d\u002b\u0028\u005c)\u007c\\.\u0029\u007c\u005e\u005c\u0028\u005b\u0061\u002d\u007a\u0041\u002d\u005a\u005d\u005c\u0029\u007c\u005e\u005c\u0028\u005b\u005c\u0064\u005d\u002b\u005c\u0029";
func (_abbb *stateStack )push (_dgbd *textState ){_eggf :=*_dgbd ;*_abbb =append (*_abbb ,&_eggf )};

// String returns a description of `v`.
func (_ccaf *ruling )String ()string {if _ccaf ._cbabg ==_caca {return "\u004e\u004f\u0054\u0020\u0052\u0055\u004c\u0049\u004e\u0047";};_eabbg ,_cefc :="\u0078","\u0079";if _ccaf ._cbabg ==_edff {_eabbg ,_cefc ="\u0079","\u0078";};_fbcc :="";if _ccaf ._gfdg !=0.0{_fbcc =_eb .Sprintf (" \u0077\u0069\u0064\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_ccaf ._gfdg );
};return _eb .Sprintf ("\u0025\u00310\u0073\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0020\u0025\u0076\u0025\u0073",_ccaf ._cbabg ,_eabbg ,_ccaf ._fbaf ,_cefc ,_ccaf ._ccfd ,_ccaf ._fbaca ,_ccaf ._fbaca -_ccaf ._ccfd ,_ccaf ._baef ,_ccaf .Color ,_fbcc );
};func (_badf rulingList )toTilings ()(rulingList ,[]gridTiling ){_badf .log ("\u0074o\u0054\u0069\u006c\u0069\u006e\u0067s");if len (_badf )==0{return nil ,nil ;};_badf =_badf .tidied ("\u0061\u006c\u006c");_badf .log ("\u0074\u0069\u0064\u0069\u0065\u0064");
_cdcd :=_badf .toGrids ();_cdcg :=make ([]gridTiling ,len (_cdcd ));for _aeca ,_gedc :=range _cdcd {_cdcg [_aeca ]=_gedc .asTiling ();};return _badf ,_cdcg ;};func (_bg *PageFonts )extractPageResourcesToFont (_fee *_da .PdfPageResources )error {_ffg ,_aff :=_ga .GetDict (_fee .Font );
if !_aff {return _e .New (_eg );};for _ ,_eag :=range _ffg .Keys (){var (_ggd =true ;_gaa []byte ;_ced string ;);_bd ,_de :=_fee .GetFontByName (_eag );if !_de {return _e .New (_fd );};_gaf ,_ebd :=_da .NewPdfFontFromPdfObject (_bd );if _ebd !=nil {return _ebd ;
};_ged :=_gaf .FontDescriptor ();_cea :=_gaf .FontDescriptor ().FontName .String ();_cgb :=_gaf .Subtype ();if _bc (_bg .Fonts ,_cea ){continue ;};if len (_gaf .ToUnicode ())==0{_ggd =false ;};if _ged .FontFile !=nil {if _aca ,_ega :=_ga .GetStream (_ged .FontFile );
_ega {_gaa ,_ebd =_ga .DecodeStream (_aca );if _ebd !=nil {return _ebd ;};_ced =_cea +"\u002e\u0070\u0066\u0062";};}else if _ged .FontFile2 !=nil {if _fdg ,_ade :=_ga .GetStream (_ged .FontFile2 );_ade {_gaa ,_ebd =_ga .DecodeStream (_fdg );if _ebd !=nil {return _ebd ;
};_ced =_cea +"\u002e\u0074\u0074\u0066";};}else if _ged .FontFile3 !=nil {if _acc ,_gce :=_ga .GetStream (_ged .FontFile3 );_gce {_gaa ,_ebd =_ga .DecodeStream (_acc );if _ebd !=nil {return _ebd ;};_ced =_cea +"\u002e\u0063\u0066\u0066";};};if len (_ced )< 1{_bbc .Log .Debug (_dg );
};_eeg :=Font {FontName :_cea ,PdfFont :_gaf ,IsCID :_gaf .IsCID (),IsSimple :_gaf .IsSimple (),ToUnicode :_ggd ,FontType :_cgb ,FontData :_gaa ,FontFileName :_ced ,FontDescriptor :_ged };_bg .Fonts =append (_bg .Fonts ,_eeg );};return nil ;};func (_bcaa *structElement )parseStructElement (_gddc _ga .PdfObject ){_eedc ,_dged :=_ga .GetDict (_gddc );
if !_dged {_bbc .Log .Debug ("\u0070\u0061\u0072\u0073\u0065\u0053\u0074\u0072u\u0063\u0074\u0045le\u006d\u0065\u006e\u0074\u003a\u0020d\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u002e");
return ;};_gfag :=_eedc .Get ("\u0053");_edef :=_eedc .Get ("\u0050\u0067");_abg :="";if _gfag !=nil {_abg =_gfag .String ();};_abce :=_eedc .Get ("\u004b");_bcaa ._ecdc =_abg ;_bcaa ._ebgb =_edef ;switch _edge :=_abce .(type ){case *_ga .PdfObjectInteger :_bcaa ._ecdc =_abg ;
_bcaa ._cccf =int64 (*_edge );_bcaa ._ebgb =_edef ;case *_ga .PdfObjectReference :_aebb :=*_ga .MakeArray (_edge );var _fbabb int64 =-1;_bcaa ._cccf =_fbabb ;if _aebb .Len ()==1{_edd :=_aebb .Elements ()[0];_ggfe ,_gcgb :=_edd .(*_ga .PdfObjectInteger );
if _gcgb {_fbabb =int64 (*_ggfe );_bcaa ._cccf =_fbabb ;_bcaa ._ecdc =_abg ;_bcaa ._ebgb =_edef ;return ;};};_eecc :=[]structElement {};for _ ,_deebe :=range _aebb .Elements (){_beec ,_gddcf :=_deebe .(*_ga .PdfObjectInteger );if _gddcf {_fbabb =int64 (*_beec );
_bcaa ._cccf =_fbabb ;_bcaa ._ecdc =_abg ;}else {_geaa :=&structElement {};_geaa .parseStructElement (_deebe );_eecc =append (_eecc ,*_geaa );};_fbabb =-1;};_bcaa ._ecded =_eecc ;case *_ga .PdfObjectArray :_ffdc :=_abce .(*_ga .PdfObjectArray );var _acfd int64 =-1;
_bcaa ._cccf =_acfd ;if _ffdc .Len ()==1{_dcbg :=_ffdc .Elements ()[0];_bddc ,_eeec :=_dcbg .(*_ga .PdfObjectInteger );if _eeec {_acfd =int64 (*_bddc );_bcaa ._cccf =_acfd ;_bcaa ._ecdc =_abg ;_bcaa ._ebgb =_edef ;return ;};};_ebdf :=[]structElement {};
for _ ,_ddga :=range _ffdc .Elements (){_fcff ,_gdeb :=_ddga .(*_ga .PdfObjectInteger );if _gdeb {_acfd =int64 (*_fcff );_bcaa ._cccf =_acfd ;_bcaa ._ecdc =_abg ;_bcaa ._ebgb =_edef ;}else {_aabfcg :=&structElement {};_aabfcg .parseStructElement (_ddga );
_ebdf =append (_ebdf ,*_aabfcg );};_acfd =-1;};_bcaa ._ecded =_ebdf ;};};func _fafcg (_egcac []pathSection )rulingList {_dbcde (_egcac );if _eggfb {_bbc .Log .Info ("\u006da\u006b\u0065\u0046\u0069l\u006c\u0052\u0075\u006c\u0069n\u0067s\u003a \u0025\u0064\u0020\u0066\u0069\u006c\u006cs",len (_egcac ));
};var _cdgb rulingList ;for _ ,_fagg :=range _egcac {for _ ,_cccg :=range _fagg ._febc {if !_cccg .isQuadrilateral (){if _eggfb {_bbc .Log .Error ("!\u0069s\u0051\u0075\u0061\u0064\u0072\u0069\u006c\u0061t\u0065\u0072\u0061\u006c: \u0025\u0073",_cccg );
};continue ;};if _cgbb ,_bfagc :=_cccg .makeRectRuling (_fagg .Color );_bfagc {_cdgb =append (_cdgb ,_cgbb );}else {if _adbf {_bbc .Log .Error ("\u0021\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0073",_cccg );
};};};};if _eggfb {_bbc .Log .Info ("\u006d\u0061\u006b\u0065Fi\u006c\u006c\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0073",_cdgb .String ());};return _cdgb ;};func (_fbec *shapesState )drawRectangle (_agae ,_ceff ,_fbab ,_dgag float64 ){if _bfaf {_adgg :=_fbec .devicePoint (_agae ,_ceff );
_edbd :=_fbec .devicePoint (_agae +_fbab ,_ceff +_dgag );_bdgc :=_da .PdfRectangle {Llx :_adgg .X ,Lly :_adgg .Y ,Urx :_edbd .X ,Ury :_edbd .Y };_bbc .Log .Info ("d\u0072a\u0077\u0052\u0065\u0063\u0074\u0061\u006e\u0067l\u0065\u003a\u0020\u00256.\u0032\u0066",_bdgc );
};_fbec .newSubPath ();_fbec .moveTo (_agae ,_ceff );_fbec .lineTo (_agae +_fbab ,_ceff );_fbec .lineTo (_agae +_fbab ,_ceff +_dgag );_fbec .lineTo (_agae ,_ceff +_dgag );_fbec .closePath ();};

// String returns a description of `t`.
func (_dfaae *textTable )String ()string {return _eb .Sprintf ("\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0025\u0074",_dfaae ._dabeb ,_dfaae ._feaf ,_dfaae ._abdfg );};func (_dbfe intSet )add (_cdgbf int ){_dbfe [_cdgbf ]=struct{}{}};func (_bgbe *textTable )putComposite (_ggae ,_abbbd int ,_bdfdb paraList ,_aeege _da .PdfRectangle ){if len (_bdfdb )==0{_bbc .Log .Error ("\u0074\u0065xt\u0054\u0061\u0062l\u0065\u0029\u0020\u0070utC\u006fmp\u006f\u0073\u0069\u0074\u0065\u003a\u0020em\u0070\u0074\u0079\u0020\u0070\u0061\u0072a\u0073");
return ;};_aegb :=compositeCell {PdfRectangle :_aeege ,paraList :_bdfdb };if _ffbd {_eb .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0075\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u003c\u002d\u0025\u0073\u000a",_ggae ,_abbbd ,_aegb .String ());
};_aegb .updateBBox ();_bgbe ._bcfe [_dfabe (_ggae ,_abbbd )]=_aegb ;};func (_dgfcf *wordBag )depthRange (_dgbf ,_gdbaf int )[]int {var _cbfg []int ;for _aaedd :=range _dgfcf ._ggadg {if _dgbf <=_aaedd &&_aaedd <=_gdbaf {_cbfg =append (_cbfg ,_aaedd );
};};if len (_cbfg )==0{return nil ;};_c .Ints (_cbfg );return _cbfg ;};func _acde (_bedaf map[int ][]float64 ){if len (_bedaf )<=1{return ;};_bfef :=_dgaf (_bedaf );if _ffbd {_bbc .Log .Info ("\u0066i\u0078C\u0065\u006c\u006c\u0073\u003a \u006b\u0065y\u0073\u003d\u0025\u002b\u0076",_bfef );
};var _bfcgg ,_edce int ;for _bfcgg ,_edce =range _bfef {if _bedaf [_edce ]!=nil {break ;};};for _bdcfe ,_dfegdg :=range _bfef [_bfcgg :]{_fdbg :=_bedaf [_dfegdg ];if _fdbg ==nil {continue ;};if _ffbd {_eb .Printf ("\u0025\u0034\u0064\u003a\u0020\u006b\u0030\u003d\u0025\u0064\u0020\u006b1\u003d\u0025\u0064\u000a",_bfcgg +_bdcfe ,_edce ,_dfegdg );
};_bafd :=_bedaf [_dfegdg ];if _bafd [len (_bafd )-1]> _fdbg [0]{_bafd [len (_bafd )-1]=_fdbg [0];_bedaf [_edce ]=_bafd ;};_edce =_dfegdg ;};};

// TableInfo gets table information of the textmark `tm`.
func (_fdfb *TextMark )TableInfo ()(*TextTable ,[][]int ){if !_fdfb ._cecd {return nil ,nil ;};_cbbd :=_fdfb ._cbf ;_cfdd :=_cbbd .getCellInfo (*_fdfb );return _cbbd ,_cfdd ;};func (_bfb *shapesState )cubicTo (_gfa ,_gcgc ,_dffe ,_afdeb ,_afdf ,_edfe float64 ){if _bfaf {_bbc .Log .Info ("\u0063\u0075\u0062\u0069\u0063\u0054\u006f\u003a");
};_bfb .addPoint (_afdf ,_edfe );};func _beag (_fead _da .PdfColorspace ,_bgbbf _da .PdfColor )_a .Color {if _fead ==nil ||_bgbbf ==nil {return _a .Black ;};_cfbde ,_fdbgd :=_fead .ColorToRGB (_bgbbf );if _fdbgd !=nil {_bbc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006fu\u006c\u0064\u0020no\u0074\u0020\u0063\u006f\u006e\u0076e\u0072\u0074\u0020\u0063\u006f\u006c\u006f\u0072\u0020\u0025\u0076\u0020\u0028\u0025\u0076)\u0020\u0074\u006f\u0020\u0052\u0047\u0042\u003a \u0025\u0073",_bgbbf ,_fead ,_fdbgd );
return _a .Black ;};_cacf ,_fccdb :=_cfbde .(*_da .PdfColorDeviceRGB );if !_fccdb {_bbc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0065\u0064 \u0063\u006f\u006c\u006f\u0072\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020i\u006e\u0020\u0074\u0068\u0065\u0020\u0052\u0047\u0042\u0020\u0063\u006flo\u0072\u0073\u0070\u0061\u0063\u0065\u003a\u0020\u0025\u0076",_cfbde );
return _a .Black ;};return _a .NRGBA {R :uint8 (_cacf .R ()*255),G :uint8 (_cacf .G ()*255),B :uint8 (_cacf .B ()*255),A :uint8 (255)};};func (_cgegb rulingList )sort (){_c .Slice (_cgegb ,_cgegb .comp )};func _fgdc (_fcaf float64 )int {var _bbfe int ;
if _fcaf >=0{_bbfe =int (_fcaf /_cbbdd );}else {_bbfe =int (_fcaf /_cbbdd )-1;};return _bbfe ;};func (_edggd gridTiling )complete ()bool {for _ ,_ddadg :=range _edggd ._gaee {for _ ,_cgfcg :=range _ddadg {if !_cgfcg .complete (){return false ;};};};return true ;
};func _abbae (_bace float64 )bool {return _bb .Abs (_bace )< _bbgd };func (_dcad compositeCell )hasLines (_dafge []*textLine )bool {for _ceceg ,_dcac :=range _dafge {_fefa :=_efdf (_dcad .PdfRectangle ,_dcac .PdfRectangle );if _ffbd {_eb .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u005e\u005e\u005e\u0069\u006e\u0074\u0065\u0072\u0073e\u0063t\u0073\u003d\u0025\u0074\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u000a",_fefa ,_ceceg ,len (_dafge ));
_eb .Printf ("\u0020\u0020\u0020\u0020  \u005e\u005e\u005e\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025s\u000a",_dcad );_eb .Printf ("\u0020 \u0020 \u0020\u0020\u0020\u006c\u0069\u006e\u0065\u003d\u0025\u0073\u000a",_dcac );};if _fefa {return true ;
};};return false ;};type cachedImage struct{_cc *_da .Image ;_gafd _da .PdfColorspace ;};func (_bgcga rulingList )merge ()*ruling {_gcceb :=_bgcga [0]._fbaf ;_ageee :=_bgcga [0]._ccfd ;_egae :=_bgcga [0]._fbaca ;for _ ,_cdae :=range _bgcga [1:]{_gcceb +=_cdae ._fbaf ;
if _cdae ._ccfd < _ageee {_ageee =_cdae ._ccfd ;};if _cdae ._fbaca > _egae {_egae =_cdae ._fbaca ;};};_deebd :=&ruling {_cbabg :_bgcga [0]._cbabg ,_baef :_bgcga [0]._baef ,Color :_bgcga [0].Color ,_fbaf :_gcceb /float64 (len (_bgcga )),_ccfd :_ageee ,_fbaca :_egae };
if _fgec {_bbc .Log .Info ("\u006de\u0072g\u0065\u003a\u0020\u0025\u0032d\u0020\u0076e\u0063\u0073\u0020\u0025\u0073",len (_bgcga ),_deebd );for _agagb ,_eabe :=range _bgcga {_eb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_agagb ,_eabe );
};};return _deebd ;};

// ImageMark represents an image drawn on a page and its position in device coordinates.
// All coordinates are in device coordinates.
type ImageMark struct{Image *_da .Image ;

// Dimensions of the image as displayed in the PDF.
Width float64 ;Height float64 ;

// Position of the image in PDF coordinates (lower left corner).
X float64 ;Y float64 ;

// Angle in degrees, if rotated.
Angle float64 ;};func (_cbbe *textTable )log (_bcffa string ){if !_ffbd {return ;};_bbc .Log .Info ("~\u007e\u007e\u0020\u0025\u0073\u003a \u0025\u0064\u0020\u0078\u0020\u0025d\u0020\u0067\u0072\u0069\u0064\u003d\u0025t\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0025\u0036\u002e2\u0066",_bcffa ,_cbbe ._dabeb ,_cbbe ._feaf ,_cbbe ._abdfg ,_cbbe .PdfRectangle );
for _ecaaf :=0;_ecaaf < _cbbe ._feaf ;_ecaaf ++{for _adde :=0;_adde < _cbbe ._dabeb ;_adde ++{_fdecb :=_cbbe .get (_adde ,_ecaaf );if _fdecb ==nil {continue ;};_eb .Printf ("%\u0034\u0064\u0020\u00252d\u003a \u0025\u0036\u002e\u0032\u0066 \u0025\u0071\u0020\u0025\u0064\u000a",_adde ,_ecaaf ,_fdecb .PdfRectangle ,_febcc (_fdecb .text (),50),_b .RuneCountInString (_fdecb .text ()));
};};};func (_cbab *subpath )last ()_ge .Point {return _cbab ._fbed [len (_cbab ._fbed )-1]};func (_cebe *textObject )renderText (_faf _ga .PdfObject ,_caf []byte ,_gga int )error {if _cebe ._adad {_bbc .Log .Debug ("\u0072\u0065\u006e\u0064\u0065r\u0054\u0065\u0078\u0074\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069\u0064 \u0066\u006f\u006e\u0074\u002e\u0020\u004e\u006f\u0074\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u002e");
return nil ;};_bfed :=_cebe .getCurrentFont ();_ebdd :=_bfed .BytesToCharcodes (_caf );_ggdc ,_afa ,_edc :=_bfed .CharcodesToStrings (_ebdd );if _edc > 0{_bbc .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_afa ,_edc );
};_cebe ._gcdgg ._acbd +=_afa ;_cebe ._gcdgg ._dff +=_edc ;_gdg :=_cebe ._gcdgg ;_dfa :=_gdg ._deec ;_adgd :=_gdg ._adc /100.0;_cdeg :=_agaa ;if _bfed .Subtype ()=="\u0054\u0079\u0070e\u0033"{_cdeg =1;};_acae ,_efb :=_bfed .GetRuneMetrics (' ');if !_efb {_acae ,_efb =_bfed .GetCharMetrics (32);
};if !_efb {_acae ,_ =_da .DefaultFont ().GetRuneMetrics (' ');};_gba :=_acae .Wx *_cdeg ;_bbc .Log .Trace ("\u0073p\u0061\u0063e\u0057\u0069\u0064t\u0068\u003d\u0025\u002e\u0032\u0066\u0020t\u0065\u0078\u0074\u003d\u0025\u0071 \u0066\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0066\u006f\u006et\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",_gba ,_ggdc ,_bfed ,_dfa );
_fcgf :=_ge .NewMatrix (_dfa *_adgd ,0,0,_dfa ,0,_gdg ._cgc );if _ebecb {_bbc .Log .Info ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0074\u0065\u0078t\u0073\u003d\u0025\u0071",len (_ebdd ),_ebdd ,_ggdc );
};_bbc .Log .Trace ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0072\u0075\u006ee\u0073\u003d\u0025\u0071",len (_ebdd ),_ebdd ,len (_ggdc ));_dcg :=_cebe .getFillColor ();
_afg :=_cebe .getStrokeColor ();for _aaa ,_caff :=range _ggdc {_geea :=[]rune (_caff );if len (_geea )==1&&_geea [0]=='\x00'{continue ;};_cee :=_ebdd [_aaa ];_gdba :=_cebe ._gde .CTM .Mult (_cebe ._gbeg ).Mult (_fcgf );_egcc :=0.0;if len (_geea )==1&&_geea [0]==32{_egcc =_gdg ._bbde ;
};_gbea ,_abfa :=_bfed .GetCharMetrics (_cee );if !_abfa {_bbc .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u004e\u006f \u006d\u0065\u0074r\u0069\u0063\u0020\u0066\u006f\u0072\u0020\u0063\u006fde\u003d\u0025\u0064 \u0072\u003d0\u0078\u0025\u0030\u0034\u0078\u003d%\u002b\u0071 \u0025\u0073",_cee ,_geea ,_geea ,_bfed );
return _eb .Errorf ("\u006e\u006f\u0020\u0063\u0068\u0061\u0072\u0020\u006d\u0065\u0074\u0072\u0069\u0063\u0073:\u0020f\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0063\u006f\u0064\u0065\u003d\u0025\u0064",_bfed .String (),_cee );};_bbbe :=_ge .Point {X :_gbea .Wx *_cdeg ,Y :_gbea .Wy *_cdeg };
_dab :=_ge .Point {X :(_bbbe .X *_dfa +_egcc )*_adgd };_bedg :=_ge .Point {X :(_bbbe .X *_dfa +_gdg ._dbe +_egcc )*_adgd };if _ebecb {_bbc .Log .Info ("\u0074\u0066\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0063\u003d\u0025\u002e\u0032f\u0020t\u0077\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_dfa ,_gdg ._dbe ,_gdg ._bbde ,_adgd );
_bbc .Log .Info ("\u0064x\u002c\u0064\u0079\u003d%\u002e\u0033\u0066\u0020\u00740\u003d%\u002e3\u0066\u0020\u0074\u003d\u0025\u002e\u0033f",_bbbe ,_dab ,_bedg );};_cfac :=_eebe (_dab );_fgfc :=_eebe (_bedg );_fbb :=_cebe ._gde .CTM .Mult (_cebe ._gbeg ).Mult (_cfac );
if _dgfa {_bbc .Log .Info ("e\u006e\u0064\u003a\u000a\tC\u0054M\u003d\u0025\u0073\u000a\u0009 \u0074\u006d\u003d\u0025\u0073\u000a"+"\u0009\u0020t\u0064\u003d\u0025s\u0020\u0078\u006c\u0061\u0074\u003d\u0025\u0073\u000a"+"\u0009t\u0064\u0030\u003d\u0025s\u000a\u0009\u0020\u0020\u2192 \u0025s\u0020x\u006c\u0061\u0074\u003d\u0025\u0073",_cebe ._gde .CTM ,_cebe ._gbeg ,_fgfc ,_adcf (_cebe ._gde .CTM .Mult (_cebe ._gbeg ).Mult (_fgfc )),_cfac ,_fbb ,_adcf (_fbb ));
};_fgaf ,_dbae :=_cebe .newTextMark (_dae .ExpandLigatures (_geea ),_gdba ,_adcf (_fbb ),_bb .Abs (_gba *_gdba .ScalingFactorX ()),_bfed ,_cebe ._gcdgg ._dbe ,_dcg ,_afg ,_faf ,_ggdc ,_aaa ,_gga );if !_dbae {_bbc .Log .Debug ("\u0054\u0065\u0078\u0074\u0020\u006d\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069d\u0065 \u0070\u0061\u0067\u0065\u002e\u0020\u0053\u006b\u0069\u0070\u0070\u0069\u006e\u0067");
continue ;};if _bfed ==nil {_bbc .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u002e");}else if _bfed .Encoder ()==nil {_bbc .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020N\u006f\u0020\u0065\u006e\u0063\u006f\u0064\u0069\u006eg\u002e\u0020\u0066o\u006et\u003d\u0025\u0073",_bfed );
}else {if _egca ,_deb :=_bfed .Encoder ().CharcodeToRune (_cee );_deb {_fgaf ._agfda =string (_egca );};};_bbc .Log .Trace ("i\u003d\u0025\u0064\u0020\u0063\u006fd\u0065\u003d\u0025\u0064\u0020\u006d\u0061\u0072\u006b=\u0025\u0073\u0020t\u0072m\u003d\u0025\u0073",_aaa ,_cee ,_fgaf ,_gdba );
_cebe ._dfga =append (_cebe ._dfga ,&_fgaf );_cebe ._gbeg .Concat (_fgfc );};return nil ;};type gridTile struct{_da .PdfRectangle ;_ddcc ,_abagd ,_cfad ,_bagb bool ;};

// ExtractFonts returns all font information from the page extractor, including
// font name, font type, the raw data of the embedded font file (if embedded), font descriptor and more.
//
// The argument `previousPageFonts` is used when trying to build a complete font catalog for multiple pages or the entire document.
// The entries from `previousPageFonts` are added to the returned result unless already included in the page, i.e. no duplicate entries.
//
// NOTE: If previousPageFonts is nil, all fonts from the page will be returned. Use it when building up a full list of fonts for a document or page range.
func (_feb *Extractor )ExtractFonts (previousPageFonts *PageFonts )(*PageFonts ,error ){_cg :=PageFonts {};_age :=_cg .extractPageResourcesToFont (_feb ._gcg );if _age !=nil {return nil ,_age ;};if previousPageFonts !=nil {for _ ,_faa :=range previousPageFonts .Fonts {if !_bc (_cg .Fonts ,_faa .FontName ){_cg .Fonts =append (_cg .Fonts ,_faa );
};};};return &PageFonts {Fonts :_cg .Fonts },nil ;};func _fgafe (_gfcbf []*textMark ,_cefa _da .PdfRectangle )*textWord {_cffab :=_gfcbf [0].PdfRectangle ;_fgfbb :=_gfcbf [0]._feag ;for _ ,_daagd :=range _gfcbf [1:]{_cffab =_bafg (_cffab ,_daagd .PdfRectangle );
if _daagd ._feag > _fgfbb {_fgfbb =_daagd ._feag ;};};return &textWord {PdfRectangle :_cffab ,_bbaaf :_gfcbf ,_ecdfc :_cefa .Ury -_cffab .Lly ,_fabac :_fgfbb };};func (_bdg *Extractor )extractPageText (_afb string ,_aga *_da .PdfPageResources ,_gcdc _ge .Matrix ,_fac int ,_dga bool )(*PageText ,int ,int ,error ){_bbc .Log .Trace ("\u0065x\u0074\u0072\u0061\u0063t\u0050\u0061\u0067\u0065\u0054e\u0078t\u003a \u006c\u0065\u0076\u0065\u006c\u003d\u0025d",_fac );
_ddec :=&PageText {_bce :_bdg ._fga ,_bded :_bdg ._ecc ,_gcbg :_bdg ._fb };_ceg :=_ggfd (_bdg ._fga );var _dade stateStack ;_ecde :=_efa (_bdg ,_aga ,_eae .GraphicsState {},&_ceg ,&_dade );_cfb :=shapesState {_cgfg :_gcdc ,_gcc :_ge .IdentityMatrix (),_cefec :_ecde };
var _dba bool ;_cef :=-1;if _fac > _dag {_bfc :=_e .New ("\u0066\u006f\u0072\u006d s\u0074\u0061\u0063\u006b\u0020\u006f\u0076\u0065\u0072\u0066\u006c\u006f\u0077");_bbc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0065\u0078\u0074\u0072\u0061\u0063\u0074\u0050\u0061\u0067\u0065\u0054\u0065\u0078\u0074\u002e\u0020\u0072\u0065\u0063u\u0072\u0073\u0069\u006f\u006e\u0020\u006c\u0065\u0076\u0065\u006c\u003d\u0025\u0064 \u0065r\u0072\u003d\u0025\u0076",_fac ,_bfc );
return _ddec ,_ceg ._acbd ,_ceg ._dff ,_bfc ;};_ebc :=_eae .NewContentStreamParser (_afb );_bab ,_cfd :=_ebc .Parse ();if _cfd !=nil {_bbc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020e\u0078\u0074\u0072a\u0063\u0074\u0050\u0061g\u0065\u0054\u0065\u0078\u0074\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cfd );
return _ddec ,_ceg ._acbd ,_ceg ._dff ,_cfd ;};_ddec ._dbafa =_bab ;_gcea :=_eae .NewContentStreamProcessor (*_bab );_gcea .AddHandler (_eae .HandlerConditionEnumAllOperands ,"",func (_aba *_eae .ContentStreamOperation ,_ggf _eae .GraphicsState ,_bcg *_da .PdfPageResources )error {_ebed :=_aba .Operand ;
if _bge {_bbc .Log .Info ("\u0026&\u0026\u0020\u006f\u0070\u003d\u0025s",_aba );};switch _ebed {case "\u0071":if _bfaf {_bbc .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_cfb ._gcc );};_dade .push (&_ceg );case "\u0051":if !_dade .empty (){_ceg =*_dade .pop ();
};_cfb ._gcc =_ggf .CTM ;if _bfaf {_bbc .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_cfb ._gcc );};case "\u0042\u0044\u0043":_edb ,_bbg :=_ga .GetDict (_aba .Params [1]);if !_bbg {_bbc .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0042D\u0043\u0020\u006f\u0070\u003d\u0025\u0073 \u0047\u0065\u0074\u0044\u0069\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_aba );
return _cfd ;};_cac :=_edb .Get ("\u004d\u0043\u0049\u0044");if _cac !=nil {_dbce ,_afc :=_ga .GetIntVal (_cac );if !_afc {_bbc .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0042\u0044C\u0020\u006f\u0070=\u0025\u0073\u002e\u0020\u0042\u0061\u0064\u0020\u006eum\u0065\u0072\u0069c\u0061\u006c \u006f\u0062\u006a\u0065\u0063\u0074.\u0020\u006f=\u0025\u0073",_aba ,_cac );
};_cef =_dbce ;}else {_cef =-1;};case "\u0045\u004d\u0043":_cef =-1;case "\u0042\u0054":if _dba {_bbc .Log .Debug ("\u0042\u0054\u0020\u0063\u0061\u006c\u006c\u0065\u0064\u0020\u0077\u0068\u0069\u006c\u0065 \u0069n\u0020\u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
_ddec ._gcffe =append (_ddec ._gcffe ,_ecde ._dfga ...);};_dba =true ;_cabb :=_ggf ;if _dga {_cabb =_eae .GraphicsState {};_cabb .CTM =_cfb ._gcc ;};_cabb .CTM =_gcdc .Mult (_cabb .CTM );_ecde =_efa (_bdg ,_bcg ,_cabb ,&_ceg ,&_dade );_cfb ._cefec =_ecde ;
case "\u0045\u0054":if !_dba {_bbc .Log .Debug ("\u0045\u0054\u0020ca\u006c\u006c\u0065\u0064\u0020\u006f\u0075\u0074\u0073i\u0064e\u0020o\u0066 \u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");};_dba =false ;_ddec ._gcffe =append (_ddec ._gcffe ,_ecde ._dfga ...);
_ecde .reset ();case "\u0054\u002a":_ecde .nextLine ();case "\u0054\u0064":if _facb ,_gd :=_ecde .checkOp (_aba ,2,true );!_facb {_bbc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gd );return _gd ;};_gbd ,_gfb ,_ecgd :=_afcfb (_aba .Params );
if _ecgd !=nil {return _ecgd ;};_ecde .moveText (_gbd ,_gfb );case "\u0054\u0044":if _ceb ,_gede :=_ecde .checkOp (_aba ,2,true );!_ceb {_bbc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gede );return _gede ;
};_dbaf ,_dgf ,_bcac :=_afcfb (_aba .Params );if _bcac !=nil {_bbc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bcac );return _bcac ;};_ecde .moveTextSetLeading (_dbaf ,_dgf );case "\u0054\u006a":if _cbg ,_egb :=_ecde .checkOp (_aba ,1,true );
!_cbg {_bbc .Log .Debug ("\u0045\u0052\u0052\u004fR:\u0020\u0054\u006a\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0065\u0072\u0072\u003d%\u0076",_aba ,_egb );return _egb ;};_ffgg :=_ga .TraceToDirectObject (_aba .Params [0]);_ccd ,_bdee :=_ga .GetStringBytes (_ffgg );
if !_bdee {_bbc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020T\u006a\u0020o\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074S\u0074\u0072\u0069\u006e\u0067\u0042\u0079\u0074\u0065\u0073\u0020\u0066a\u0069\u006c\u0065\u0064",_aba );return _ga .ErrTypeError ;
};return _ecde .showText (_ffgg ,_ccd ,_cef );case "\u0054\u004a":if _gdd ,_fgab :=_ecde .checkOp (_aba ,1,true );!_gdd {_bbc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fgab );return _fgab ;};
_gdf ,_beg :=_ga .GetArray (_aba .Params [0]);if !_beg {_bbc .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_aba );
return _cfd ;};return _ecde .showTextAdjusted (_gdf ,_cef );case "\u0027":if _gceg ,_ebbg :=_ecde .checkOp (_aba ,1,true );!_gceg {_bbc .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0027\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ebbg );return _ebbg ;
};_gda :=_ga .TraceToDirectObject (_aba .Params [0]);_acgf ,_becb :=_ga .GetStringBytes (_gda );if !_becb {_bbc .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020'\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_aba );
return _ga .ErrTypeError ;};_ecde .nextLine ();return _ecde .showText (_gda ,_acgf ,_cef );case "\u0022":if _egd ,_abd :=_ecde .checkOp (_aba ,3,true );!_egd {_bbc .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0022\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_abd );
return _abd ;};_abdb ,_gafb ,_fcec :=_afcfb (_aba .Params [:2]);if _fcec !=nil {return _fcec ;};_eda :=_ga .TraceToDirectObject (_aba .Params [2]);_dbb ,_dgab :=_ga .GetStringBytes (_eda );if !_dgab {_bbc .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020\"\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_aba );
return _ga .ErrTypeError ;};_ecde .setCharSpacing (_abdb );_ecde .setWordSpacing (_gafb );_ecde .nextLine ();return _ecde .showText (_eda ,_dbb ,_cef );case "\u0054\u004c":_aed ,_fae :=_gcdg (_aba );if _fae !=nil {_bbc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004c\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fae );
return _fae ;};_ecde .setTextLeading (_aed );case "\u0054\u0063":_aedd ,_ebf :=_gcdg (_aba );if _ebf !=nil {_bbc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0063\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ebf );return _ebf ;};_ecde .setCharSpacing (_aedd );
case "\u0054\u0066":if _cba ,_cgec :=_ecde .checkOp (_aba ,2,true );!_cba {_bbc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0066\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cgec );return _cgec ;};_egf ,_dfed :=_ga .GetNameVal (_aba .Params [0]);
if !_dfed {_bbc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u004ea\u006d\u0065\u0056\u0061\u006c\u0020\u0066a\u0069\u006c\u0065\u0064",_aba );return _ga .ErrTypeError ;};_aggc ,_daff :=_ga .GetNumberAsFloat (_aba .Params [1]);
if !_dfed {_bbc .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u0046\u006c\u006f\u0061\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065d\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_aba ,_daff );
return _daff ;};_daff =_ecde .setFont (_egf ,_aggc );_ecde ._adad =_e .Is (_daff ,_ga .ErrNotSupported );if _daff !=nil &&!_ecde ._adad {return _daff ;};case "\u0054\u006d":if _eec ,_fad :=_ecde .checkOp (_aba ,6,true );!_eec {_bbc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u006d\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fad );
return _fad ;};_aaed ,_fdb :=_ga .GetNumbersAsFloat (_aba .Params );if _fdb !=nil {_bbc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fdb );return _fdb ;};_ecde .setTextMatrix (_aaed );case "\u0054\u0072":if _fbdc ,_abb :=_ecde .checkOp (_aba ,1,true );
!_fbdc {_bbc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0072\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_abb );return _abb ;};_adge ,_fceb :=_ga .GetIntVal (_aba .Params [0]);if !_fceb {_bbc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0072\u0020\u006f\u0070\u003d\u0025\u0073 \u0047e\u0074\u0049\u006e\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_aba );
return _ga .ErrTypeError ;};_ecde .setTextRenderMode (_adge );case "\u0054\u0073":if _cefe ,_feg :=_ecde .checkOp (_aba ,1,true );!_cefe {_bbc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0073\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_feg );
return _feg ;};_eedf ,_def :=_ga .GetNumberAsFloat (_aba .Params [0]);if _def !=nil {_bbc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_def );return _def ;};_ecde .setTextRise (_eedf );case "\u0054\u0077":if _afca ,_gbbe :=_ecde .checkOp (_aba ,1,true );
!_afca {_bbc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gbbe );return _gbbe ;};_faee ,_aeb :=_ga .GetNumberAsFloat (_aba .Params [0]);if _aeb !=nil {_bbc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_aeb );
return _aeb ;};_ecde .setWordSpacing (_faee );case "\u0054\u007a":if _cfbb ,_bfe :=_ecde .checkOp (_aba ,1,true );!_cfbb {_bbc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bfe );return _bfe ;};_cecg ,_fffb :=_ga .GetNumberAsFloat (_aba .Params [0]);
if _fffb !=nil {_bbc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fffb );return _fffb ;};_ecde .setHorizScaling (_cecg );case "\u0063\u006d":if !_dga {_cfb ._gcc =_ggf .CTM ;};if _cfb ._gcc .Singular (){_gea :=_ge .IdentityMatrix ().Translate (_cfb ._gcc .Translation ());
_bbc .Log .Debug ("S\u0069n\u0067\u0075\u006c\u0061\u0072\u0020\u0063\u0074m\u003d\u0025\u0073\u2192%s",_cfb ._gcc ,_gea );_cfb ._gcc =_gea ;};if _bfaf {_bbc .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_cfb ._gcc );};case "\u006d":if len (_aba .Params )!=2{_bbc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_gc );
return nil ;};_cga ,_bafb :=_ga .GetNumbersAsFloat (_aba .Params );if _bafb !=nil {return _bafb ;};_cfb .moveTo (_cga [0],_cga [1]);case "\u006c":if len (_aba .Params )!=2{_bbc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_gc );
return nil ;};_bgd ,_egda :=_ga .GetNumbersAsFloat (_aba .Params );if _egda !=nil {return _egda ;};_cfb .lineTo (_bgd [0],_bgd [1]);case "\u0063":if len (_aba .Params )!=6{return _gc ;};_bdag ,_eaf :=_ga .GetNumbersAsFloat (_aba .Params );if _eaf !=nil {return _eaf ;
};_bbc .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_bdag );_cfb .cubicTo (_bdag [0],_bdag [1],_bdag [2],_bdag [3],_bdag [4],_bdag [5]);case "\u0076","\u0079":if len (_aba .Params )!=4{return _gc ;
};_cada ,_cbb :=_ga .GetNumbersAsFloat (_aba .Params );if _cbb !=nil {return _cbb ;};_bbc .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_cada );_cfb .quadraticTo (_cada [0],_cada [1],_cada [2],_cada [3]);
case "\u0068":_cfb .closePath ();case "\u0072\u0065":if len (_aba .Params )!=4{return _gc ;};_deff ,_gca :=_ga .GetNumbersAsFloat (_aba .Params );if _gca !=nil {return _gca ;};_cfb .drawRectangle (_deff [0],_deff [1],_deff [2],_deff [3]);_cfb .closePath ();
case "\u0053":_cfb .stroke (&_ddec ._adbc );_cfb .clearPath ();case "\u0073":_cfb .closePath ();_cfb .stroke (&_ddec ._adbc );_cfb .clearPath ();case "\u0046":_cfb .fill (&_ddec ._eage );_cfb .clearPath ();case "\u0066","\u0066\u002a":_cfb .closePath ();
_cfb .fill (&_ddec ._eage );_cfb .clearPath ();case "\u0042","\u0042\u002a":_cfb .fill (&_ddec ._eage );_cfb .stroke (&_ddec ._adbc );_cfb .clearPath ();case "\u0062","\u0062\u002a":_cfb .closePath ();_cfb .fill (&_ddec ._eage );_cfb .stroke (&_ddec ._adbc );
_cfb .clearPath ();case "\u006e":_cfb .clearPath ();case "\u0044\u006f":if len (_aba .Params )==0{_bbc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0058\u004fbj\u0065c\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006f\u0070\u0065\u0072\u0061n\u0064\u0020\u0066\u006f\u0072\u0020\u0044\u006f\u0020\u006f\u0070\u0065\u0072\u0061\u0074\u006f\u0072.\u0020\u0047\u006f\u0074\u0020\u0025\u002b\u0076\u002e",_aba .Params );
return _ga .ErrRangeError ;};_eafc ,_aabf :=_ga .GetName (_aba .Params [0]);if !_aabf {_bbc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0044\u006f\u0020\u006f\u0070e\u0072a\u0074\u006f\u0072\u0020\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006fp\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u002b\u0076\u002e",_aba .Params [0]);
return _ga .ErrTypeError ;};_ ,_cfa :=_bcg .GetXObjectByName (*_eafc );if _cfa !=_da .XObjectTypeForm {break ;};_bed ,_aabf :=_bdg ._bae [_eafc .String ()];if !_aabf {_ace ,_bfa :=_bcg .GetXObjectFormByName (*_eafc );if _bfa !=nil {_bbc .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_bfa );
return _bfa ;};_aag ,_bfa :=_ace .GetContentStream ();if _bfa !=nil {_bbc .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_bfa );return _bfa ;};_dagg :=_ace .Resources ;if _dagg ==nil {_dagg =_bcg ;};_dcdf :=_ggf .CTM ;if _cdc ,_eecg :=_ga .GetArray (_ace .Matrix );
_eecg {_fdee ,_aef :=_cdc .GetAsFloat64Slice ();if _aef !=nil {return _aef ;};if len (_fdee )!=6{return _gc ;};_bgc :=_ge .NewMatrix (_fdee [0],_fdee [1],_fdee [2],_fdee [3],_fdee [4],_fdee [5]);_dcdf =_ggf .CTM .Mult (_bgc );};_acb ,_efd ,_gdc ,_bfa :=_bdg .extractPageText (string (_aag ),_dagg ,_gcdc .Mult (_dcdf ),_fac +1,false );
if _bfa !=nil {_bbc .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_bfa );return _bfa ;};_bed =textResult {*_acb ,_efd ,_gdc };_bdg ._bae [_eafc .String ()]=_bed ;};_cfb ._gcc =_ggf .CTM ;if _bfaf {_bbc .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_cfb ._gcc );
};_ddec ._gcffe =append (_ddec ._gcffe ,_bed ._gdfc ._gcffe ...);_ddec ._adbc =append (_ddec ._adbc ,_bed ._gdfc ._adbc ...);_ddec ._eage =append (_ddec ._eage ,_bed ._gdfc ._eage ...);_ceg ._acbd +=_bed ._bga ;_ceg ._dff +=_bed ._bbe ;case "\u0072\u0067","\u0067","\u006b","\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_ecde ._gde .ColorspaceNonStroking =_ggf .ColorspaceNonStroking ;
_ecde ._gde .ColorNonStroking =_ggf .ColorNonStroking ;case "\u0052\u0047","\u0047","\u004b","\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_ecde ._gde .ColorspaceStroking =_ggf .ColorspaceStroking ;_ecde ._gde .ColorStroking =_ggf .ColorStroking ;
};return nil ;});_cfd =_gcea .Process (_aga );if _bdg ._fa !=nil &&_bdg ._fa .IncludeAnnotations &&!_dga {for _ ,_eaa :=range _bdg ._geb {_afcc ,_ccc :=_ga .GetDict (_eaa .AP );if !_ccc {continue ;};_gbda ,_ccc :=_afcc .Get ("\u004e").(*_ga .PdfObjectStream );
if !_ccc {continue ;};_cgfd ,_aec :=_ga .DecodeStream (_gbda );if _aec !=nil {_bbc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u006f\u006e\u0020\u0064\u0065c\u006f\u0064\u0065\u0020\u0073\u0074\u0072\u0065\u0061\u006d:\u0020\u0025\u0076",_aec );
continue ;};_fag :=_gbda .PdfObjectDictionary .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s");_baff ,_aec :=_da .NewPdfPageResourcesFromDict (_fag .(*_ga .PdfObjectDictionary ));if _aec !=nil {_bbc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072 \u006f\u006e\u0020\u0067\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0061\u006en\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0020\u0072\u0065\u0073\u006f\u0075\u0072\u0063\u0065\u0073\u003a\u0020\u0025\u0076",_aec );
continue ;};_ddd :=_ge .IdentityMatrix ();_ada ,_ccc :=_gbda .PdfObjectDictionary .Get ("\u004d\u0061\u0074\u0072\u0069\u0078").(*_ga .PdfObjectArray );if _ccc {_gef ,_ggdf :=_ada .GetAsFloat64Slice ();if _ggdf !=nil {_bbc .Log .Debug ("\u0045\u0072\u0072or\u0020\u006f\u006e\u0020\u0067\u0065\u0074\u0074\u0069n\u0067 \u0066l\u006fa\u0074\u0036\u0034\u0020\u0073\u006c\u0069\u0063\u0065\u003a\u0020\u0025\u0076",_ggdf );
continue ;};if len (_gef )!=6{_bbc .Log .Debug ("I\u006e\u0076\u0061\u006c\u0069\u0064 \u006d\u0061\u0074\u0072\u0069\u0078\u0020\u0073\u006ci\u0063\u0065\u0020l\u0065n\u0067\u0074\u0068");continue ;};_ddd =_ge .NewMatrix (_gef [0],_gef [1],_gef [2],_gef [3],_gef [4],_gef [5]);
};_dcc ,_ccc :=_bdg ._db [_gbda .String ()];if !_ccc {_dfdc ,_ffb ,_dgba ,_dce :=_bdg .extractPageText (string (_cgfd ),_baff ,_ddd ,_fac +1,true );if _dce !=nil {_bbc .Log .Debug ("\u0045\u0052R\u004f\u0052\u0020\u0065x\u0074\u0072a\u0063\u0074\u0069\u006e\u0067\u0020\u0061\u006en\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0020\u0074\u0065\u0078\u0074s\u003a\u0020\u0025\u0076",_dce );
continue ;};_dcc =textResult {*_dfdc ,_ffb ,_dgba };_bdg ._db [_gbda .String ()]=_dcc ;};_ddec ._gcffe =append (_ddec ._gcffe ,_dcc ._gdfc ._gcffe ...);_ddec ._adbc =append (_ddec ._adbc ,_dcc ._gdfc ._adbc ...);_ddec ._eage =append (_ddec ._eage ,_dcc ._gdfc ._eage ...);
_ceg ._acbd +=_dcc ._bga ;_ceg ._dff +=_dcc ._bbe ;};};return _ddec ,_ceg ._acbd ,_ceg ._dff ,_cfd ;};

// ExtractPageText returns the text contents of `e` (an Extractor for a page) as a PageText.
// TODO(peterwilliams97): The stats complicate this function signature and aren't very useful.
//
//	Replace with a function like Extract() (*PageText, error)
func (_dfe *Extractor )ExtractPageText ()(*PageText ,int ,int ,error ){_cca ,_egc ,_ebb ,_aace :=_dfe .extractPageText (_dfe ._ff ,_dfe ._gcg ,_ge .IdentityMatrix (),0,false );if _aace !=nil &&_aace !=_da .ErrColorOutOfRange {return nil ,0,0,_aace ;};if _dfe ._fa !=nil {_cca ._dfee ._ebec =_dfe ._fa .UseSimplerExtractionProcess ;
};_cca .computeViews ();_aace =_dcfad (_cca );if _aace !=nil {return nil ,0,0,_aace ;};if _dfe ._fa !=nil {if _dfe ._fa .ApplyCropBox &&_dfe ._fc !=nil {_cca .ApplyArea (*_dfe ._fc );};_cca ._dfee ._bbgaf =_dfe ._fa .DisableDocumentTags ;};return _cca ,_egc ,_ebb ,nil ;
};

// Options extractor options.
type Options struct{

// DisableDocumentTags specifies whether to use the document tags during list extraction.
DisableDocumentTags bool ;

// ApplyCropBox will extract page text based on page cropbox if set to `true`.
ApplyCropBox bool ;

// UseSimplerExtractionProcess will skip topological text ordering and table processing.
//
// NOTE: While normally the extra processing is beneficial, it can also lead to problems when it does not work.
// Thus it is a flag to allow the user to control this process.
//
// Skipping some extraction processes would also lead to the reduced processing time.
UseSimplerExtractionProcess bool ;

// IncludeAnnotations specifies whether to include annotations in the extraction process, default value is `false`.
IncludeAnnotations bool ;};func (_cbfga rulingList )toGrids ()[]rulingList {if _eggfb {_bbc .Log .Info ("t\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0025\u0073",_cbfga );};_gcfcd :=_cbfga .intersections ();if _eggfb {_bbc .Log .Info ("\u0074\u006f\u0047r\u0069\u0064\u0073\u003a \u0076\u0065\u0063\u0073\u003d\u0025\u0064 \u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003d\u0025\u0064\u0020",len (_cbfga ),len (_gcfcd ));
for _ ,_becbd :=range _fgef (_gcfcd ){_eb .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_becbd ,_gcfcd [_becbd ]);};};_ebeg :=make (map[int ]intSet ,len (_cbfga ));for _gefd :=range _cbfga {_debd :=_cbfga .connections (_gcfcd ,_gefd );if len (_debd )> 0{_ebeg [_gefd ]=_debd ;
};};if _eggfb {_bbc .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0063\u006fn\u006e\u0065\u0063\u0074s=\u0025\u0064",len (_ebeg ));for _ ,_gceaf :=range _fgef (_ebeg ){_eb .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_gceaf ,_ebeg [_gceaf ]);
};};_dacab :=_edcg (len (_cbfga ),func (_fdce ,_gcba int )bool {_daffg ,_acfdg :=len (_ebeg [_fdce ]),len (_ebeg [_gcba ]);if _daffg !=_acfdg {return _daffg > _acfdg ;};return _cbfga .comp (_fdce ,_gcba );});if _eggfb {_bbc .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u006f\u0072d\u0065\u0072\u0069\u006eg=\u0025\u0076",_dacab );
};_dbff :=[][]int {{_dacab [0]}};_decd :for _ ,_cebbf :=range _dacab [1:]{for _bfddf ,_daad :=range _dbff {for _ ,_cfge :=range _daad {if _ebeg [_cfge ].has (_cebbf ){_dbff [_bfddf ]=append (_daad ,_cebbf );continue _decd ;};};};_dbff =append (_dbff ,[]int {_cebbf });
};if _eggfb {_bbc .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020i\u0067\u0072i\u0064\u0073\u003d\u0025\u0076",_dbff );};_c .SliceStable (_dbff ,func (_bdbeb ,_dgee int )bool {return len (_dbff [_bdbeb ])> len (_dbff [_dgee ])});for _ ,_cabbc :=range _dbff {_c .Slice (_cabbc ,func (_dfaff ,_ccag int )bool {return _cbfga .comp (_cabbc [_dfaff ],_cabbc [_ccag ])});
};_bdcf :=make ([]rulingList ,len (_dbff ));for _bgcg ,_abcab :=range _dbff {_ddge :=make (rulingList ,len (_abcab ));for _dgbc ,_bddd :=range _abcab {_ddge [_dgbc ]=_cbfga [_bddd ];};_bdcf [_bgcg ]=_ddge ;};if _eggfb {_bbc .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020g\u0072\u0069d\u0073\u003d\u0025\u002b\u0076",_bdcf );
};var _fgag []rulingList ;for _ ,_fbbg :=range _bdcf {if _caegd ,_cggec :=_fbbg .isActualGrid ();_cggec {_fbbg =_caegd ;_fbbg =_fbbg .snapToGroups ();_fgag =append (_fgag ,_fbbg );};};if _eggfb {_ecda ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0061\u0063t\u0075\u0061\u006c\u0047ri\u0064\u0073",_fgag );
_bbc .Log .Info ("\u0074\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0067\u0072\u0069\u0064\u0073\u003d%\u0064 \u0061\u0063\u0074\u0075\u0061\u006c\u0047\u0072\u0069\u0064\u0073\u003d\u0025\u0064",len (_bdcf ),len (_fgag ));};return _fgag ;};func (_dede *textLine )markWordBoundaries (){_eebd :=_gfbd *_dede ._bgge ;
for _gbdee ,_bddf :=range _dede ._ffaf [1:]{if _gbde (_bddf ,_dede ._ffaf [_gbdee ])>=_eebd {_bddf ._dcdg =true ;};};};func (_ffdfe paraList )llyRange (_acgbf []int ,_gcdea ,_gdcd float64 )[]int {_aaffd :=len (_ffdfe );if _gdcd < _ffdfe [_acgbf [0]].Lly ||_gcdea > _ffdfe [_acgbf [_aaffd -1]].Lly {return nil ;
};_dcaf :=_c .Search (_aaffd ,func (_gbbc int )bool {return _ffdfe [_acgbf [_gbbc ]].Lly >=_gcdea });_aega :=_c .Search (_aaffd ,func (_egaf int )bool {return _ffdfe [_acgbf [_egaf ]].Lly > _gdcd });return _acgbf [_dcaf :_aega ];};

// NewWithOptions an Extractor instance for extracting content from the input PDF page with options.
func NewWithOptions (page *_da .PdfPage ,options *Options )(*Extractor ,error ){const _bbf ="\u0065x\u0074\u0072\u0061\u0063\u0074\u006f\u0072\u002e\u004e\u0065\u0077W\u0069\u0074\u0068\u004f\u0070\u0074\u0069\u006f\u006e\u0073";_aa ,_ee :=page .GetAllContentStreams ();
if _ee !=nil {return nil ,_ee ;};_caa ,_af :=page .GetStructTreeRoot ();if !_af {_bbc .Log .Info ("T\u0068\u0065\u0020\u0070\u0064\u0066\u0020\u0064\u006f\u0063\u0075\u006d\u0065\u006e\u0074\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0074\u0061\u0067g\u0065d\u002e\u0020\u0053\u0074r\u0075\u0063t\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e\u0027\u0074\u0020\u0065\u0078\u0069\u0073\u0074\u002e");
};_gg :=page .GetContainingPdfObject ();_fgf ,_ee :=page .GetMediaBox ();if _ee !=nil {return nil ,_eb .Errorf ("\u0065\u0078\u0074r\u0061\u0063\u0074\u006fr\u0020\u0072\u0065\u0071\u0075\u0069\u0072e\u0073\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u002e\u0020\u0025\u0076",_ee );
};_gac :=&Extractor {_ff :_aa ,_gcg :page .Resources ,_fga :*_fgf ,_fc :page .CropBox ,_ad :map[string ]fontEntry {},_bae :map[string ]textResult {},_db :map[string ]textResult {},_fa :options ,_ecc :_caa ,_fb :_gg };if _gac ._fga .Llx > _gac ._fga .Urx {_bbc .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0058\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_gac ._fga );
_gac ._fga .Llx ,_gac ._fga .Urx =_gac ._fga .Urx ,_gac ._fga .Llx ;};if _gac ._fga .Lly > _gac ._fga .Ury {_bbc .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0059\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_gac ._fga );
_gac ._fga .Lly ,_gac ._fga .Ury =_gac ._fga .Ury ,_gac ._fga .Lly ;};if _gac ._fa !=nil {if _gac ._fa .IncludeAnnotations {_gac ._geb ,_ee =page .GetAnnotations ();if _ee !=nil {_bbc .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0067\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0061\u006e\u006e\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0073: \u0025\u0076",_ee );
};};};_ag .TrackUse (_bbf );return _gac ,nil ;};func (_ccbf *textTable )subdivide ()*textTable {_ccbf .logComposite ("\u0073u\u0062\u0064\u0069\u0076\u0069\u0064e");_efcadf :=_ccbf .compositeRowCorridors ();_dcdag :=_ccbf .compositeColCorridors ();if _ffbd {_bbc .Log .Info ("\u0073u\u0062\u0064i\u0076\u0069\u0064\u0065:\u000a\u0009\u0072o\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s=\u0025\u0073\u000a\t\u0063\u006fl\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073=\u0025\u0073",_ggea (_efcadf ),_ggea (_dcdag ));
};if len (_efcadf )==0||len (_dcdag )==0{return _ccbf ;};_acde (_efcadf );_acde (_dcdag );if _ffbd {_bbc .Log .Info ("\u0073\u0075\u0062\u0064\u0069\u0076\u0069\u0064\u0065\u0020\u0066\u0069\u0078\u0065\u0064\u003a\u000a\u0009r\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073\u003d\u0025\u0073\u000a\u0009\u0063\u006f\u006cC\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d\u0025\u0073",_ggea (_efcadf ),_ggea (_dcdag ));
};_fgfb ,_begag :=_aaada (_ccbf ._feaf ,_efcadf );_acdcd ,_adgc :=_aaada (_ccbf ._dabeb ,_dcdag );_fcafd :=make (map[uint64 ]*textPara ,_adgc *_begag );_caeb :=&textTable {PdfRectangle :_ccbf .PdfRectangle ,_abdfg :_ccbf ._abdfg ,_feaf :_begag ,_dabeb :_adgc ,_cffda :_fcafd };
if _ffbd {_bbc .Log .Info ("\u0073\u0075b\u0064\u0069\u0076\u0069\u0064\u0065\u003a\u0020\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0063\u0065\u006c\u006c\u0073\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0079\u004f\u0066\u0066\u0073\u0065\u0074\u0073=\u0025\u002b\u0076\u000a"+"\u0009\u0078\u004f\u0066\u0066\u0073\u0065\u0074\u0073\u003d\u0025\u002b\u0076",_ccbf ._dabeb ,_ccbf ._feaf ,_adgc ,_begag ,_ggea (_efcadf ),_ggea (_dcdag ),_fgfb ,_acdcd );
};for _deace :=0;_deace < _ccbf ._feaf ;_deace ++{_bcbdb :=_fgfb [_deace ];for _bafe :=0;_bafe < _ccbf ._dabeb ;_bafe ++{_gebdb :=_acdcd [_bafe ];if _ffbd {_eb .Printf ("\u0025\u0036\u0064\u002c %\u0032\u0064\u003a\u0020\u0078\u0030\u003d\u0025\u0064\u0020\u0079\u0030\u003d\u0025d\u000a",_bafe ,_deace ,_gebdb ,_bcbdb );
};_dgeb ,_efae :=_ccbf ._bcfe [_dfabe (_bafe ,_deace )];if !_efae {continue ;};_feccb :=_dgeb .split (_efcadf [_deace ],_dcdag [_bafe ]);for _eegd :=0;_eegd < _feccb ._feaf ;_eegd ++{for _bfgc :=0;_bfgc < _feccb ._dabeb ;_bfgc ++{_cdafd :=_feccb .get (_bfgc ,_eegd );
_caeb .put (_gebdb +_bfgc ,_bcbdb +_eegd ,_cdafd );if _ffbd {_eb .Printf ("\u0025\u0038\u0064\u002c\u0020\u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_gebdb +_bfgc ,_bcbdb +_eegd ,_cdafd );};};};};};return _caeb ;};

// Append appends `mark` to the mark array.
func (_caeg *TextMarkArray )Append (mark TextMark ){_caeg ._cggca =append (_caeg ._cggca ,mark )};

// PageText represents the layout of text on a device page.
type PageText struct{_gcffe []*textMark ;_gfc string ;_bdeef []TextMark ;_fda []TextTable ;_bce _da .PdfRectangle ;_adbc []pathSection ;_eage []pathSection ;_bded *_ga .PdfObject ;_gcbg _ga .PdfObject ;_dbafa *_eae .ContentStreamOperations ;_dfee PageTextOptions ;
};func _gcdg (_dgae *_eae .ContentStreamOperation )(float64 ,error ){if len (_dgae .Params )!=1{_abe :=_e .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");_bbc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_dgae .Operand ,1,len (_dgae .Params ),_dgae .Params );
return 0.0,_abe ;};return _ga .GetNumberAsFloat (_dgae .Params [0]);};func _cfga (_cdbea _ga .PdfObject ,_gbdc _a .Color )(_ab .Image ,error ){_bedce ,_cdaa :=_ga .GetStream (_cdbea );if !_cdaa {return nil ,nil ;};_aebfc ,_gaffa :=_da .NewXObjectImageFromStream (_bedce );
if _gaffa !=nil {return nil ,_gaffa ;};_cfegb ,_gaffa :=_aebfc .ToImage ();if _gaffa !=nil {return nil ,_gaffa ;};return _fagbb (_cfegb ,_gbdc ),nil ;};func _ggea (_abcef map[int ][]float64 )string {_cecdg :=_dgaf (_abcef );_gggaf :=make ([]string ,len (_abcef ));
for _bdacf ,_afbe :=range _cecdg {_gggaf [_bdacf ]=_eb .Sprintf ("\u0025\u0064\u003a\u0020\u0025\u002e\u0032\u0066",_afbe ,_abcef [_afbe ]);};return _eb .Sprintf ("\u007b\u0025\u0073\u007d",_fg .Join (_gggaf ,"\u002c\u0020"));};func _ffab (_adgge ,_cdd _da .PdfRectangle )bool {return _adgge .Llx <=_cdd .Llx &&_cdd .Urx <=_adgge .Urx &&_adgge .Lly <=_cdd .Lly &&_cdd .Ury <=_adgge .Ury ;
};

// String returns a string describing `ma`.
func (_cafc TextMarkArray )String ()string {_gaff :=len (_cafc ._cggca );if _gaff ==0{return "\u0045\u004d\u0050T\u0059";};_ffbg :=_cafc ._cggca [0];_cebb :=_cafc ._cggca [_gaff -1];return _eb .Sprintf ("\u007b\u0054\u0045\u0058\u0054\u004d\u0041\u0052K\u0041\u0052\u0052AY\u003a\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025s\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d%\u0073\u007d",_gaff ,_ffbg ,_cebb );
};func _egag (_bbdd ,_cade float64 )bool {return _bb .Abs (_bbdd -_cade )<=_acfe };

// String returns a string descibing `i`.
func (_dgcf gridTile )String ()string {_dbdc :=func (_dcda bool ,_dcfa string )string {if _dcda {return _dcfa ;};return "\u005f";};return _eb .Sprintf ("\u00256\u002e2\u0066\u0020\u0025\u0031\u0073%\u0031\u0073%\u0031\u0073\u0025\u0031\u0073",_dgcf .PdfRectangle ,_dbdc (_dgcf ._abagd ,"\u004c"),_dbdc (_dgcf ._bagb ,"\u0052"),_dbdc (_dgcf ._cfad ,"\u0042"),_dbdc (_dgcf ._ddcc ,"\u0054"));
};func (_ffee paraList )computeEBBoxes (){if _agac {_bbc .Log .Info ("\u0063o\u006dp\u0075\u0074\u0065\u0045\u0042\u0042\u006f\u0078\u0065\u0073\u003a");};for _ ,_daba :=range _ffee {_daba ._adged =_daba .PdfRectangle ;};_cgge :=_ffee .yNeighbours (0);
for _gcbgf ,_adeaf :=range _ffee {_abca :=_adeaf ._adged ;_geeff ,_cgea :=-1.0e9,+1.0e9;for _ ,_adae :=range _cgge [_adeaf ]{_ecfd :=_ffee [_adae ]._adged ;if _ecfd .Urx < _abca .Llx {_geeff =_bb .Max (_geeff ,_ecfd .Urx );}else if _abca .Urx < _ecfd .Llx {_cgea =_bb .Min (_cgea ,_ecfd .Llx );
};};for _fabgc ,_dbdd :=range _ffee {_dfge :=_dbdd ._adged ;if _gcbgf ==_fabgc ||_dfge .Ury > _abca .Lly {continue ;};if _geeff <=_dfge .Llx &&_dfge .Llx < _abca .Llx {_abca .Llx =_dfge .Llx ;}else if _dfge .Urx <=_cgea &&_abca .Urx < _dfge .Urx {_abca .Urx =_dfge .Urx ;
};};if _agac {_eb .Printf ("\u0025\u0034\u0064\u003a %\u0036\u002e\u0032\u0066\u2192\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0071\u000a",_gcbgf ,_adeaf ._adged ,_abca ,_febcc (_adeaf .text (),50));};_adeaf ._adged =_abca ;};if _bgda {for _ ,_gcae :=range _ffee {_gcae .PdfRectangle =_gcae ._adged ;
};};};

// String returns a description of `l`.
func (_gedb *textLine )String ()string {return _eb .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_gedb ._dfbc ,_gedb .PdfRectangle ,_gedb ._bgge ,_gedb .text ());
};

// PageTextOptions holds various options available in extraction process.
type PageTextOptions struct{_bbgaf bool ;_ebec bool ;};func (_fecc paraList )merge ()*textPara {_bbc .Log .Trace ("\u006d\u0065\u0072\u0067\u0065:\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_fecc ));
if len (_fecc )==0{return nil ;};_fecc .sortReadingOrder ();_fggd :=_fecc [0].PdfRectangle ;_efge :=_fecc [0]._acgga ;for _ ,_gegde :=range _fecc [1:]{_fggd =_bafg (_fggd ,_gegde .PdfRectangle );_efge =append (_efge ,_gegde ._acgga ...);};return _dadb (_fggd ,_efge );
};func (_cfee paraList )findGridTables (_agacb []gridTiling )[]*textTable {if _ffbd {_bbc .Log .Info ("\u0066i\u006e\u0064\u0047\u0072\u0069\u0064\u0054\u0061\u0062\u006c\u0065s\u003a\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073",len (_cfee ));
for _gdead ,_ebbb :=range _cfee {_eb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gdead ,_ebbb );};};var _dddbg []*textTable ;for _dage ,_ebab :=range _agacb {_ddfc ,_debf :=_cfee .findTableGrid (_ebab );if _ddfc !=nil {_ddfc .log (_eb .Sprintf ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0057\u0069\u0074\u0068\u0047\u0072\u0069\u0064\u0073\u003a\u0020%\u0064",_dage ));
_dddbg =append (_dddbg ,_ddfc );_ddfc .markCells ();};for _gdgfd :=range _debf {_gdgfd ._bdec =true ;};};if _ffbd {_bbc .Log .Info ("\u0066i\u006e\u0064\u0047\u0072i\u0064\u0054\u0061\u0062\u006ce\u0073:\u0020%\u0064\u0020\u0074\u0061\u0062\u006c\u0065s",len (_dddbg ));
};return _dddbg ;};var (_fedd =map[rune ]string {0x0060:"\u0300",0x02CB:"\u0300",0x0027:"\u0301",0x00B4:"\u0301",0x02B9:"\u0301",0x02CA:"\u0301",0x005E:"\u0302",0x02C6:"\u0302",0x007E:"\u0303",0x02DC:"\u0303",0x00AF:"\u0304",0x02C9:"\u0304",0x02D8:"\u0306",0x02D9:"\u0307",0x00A8:"\u0308",0x00B0:"\u030a",0x02DA:"\u030a",0x02BA:"\u030b",0x02DD:"\u030b",0x02C7:"\u030c",0x02C8:"\u030d",0x0022:"\u030e",0x02BB:"\u0312",0x02BC:"\u0313",0x0486:"\u0313",0x055A:"\u0313",0x02BD:"\u0314",0x0485:"\u0314",0x0559:"\u0314",0x02D4:"\u031d",0x02D5:"\u031e",0x02D6:"\u031f",0x02D7:"\u0320",0x02B2:"\u0321",0x00B8:"\u0327",0x02CC:"\u0329",0x02B7:"\u032b",0x02CD:"\u0331",0x005F:"\u0332",0x204E:"\u0359"};
);func (_dbd *textObject )moveLP (_ebgd ,_ffce float64 ){_dbd ._ccdc .Concat (_ge .NewMatrix (1,0,0,1,_ebgd ,_ffce ));_dbd ._gbeg =_dbd ._ccdc ;};

// ExtractPageImages returns the image contents of the page extractor, including data
// and position, size information for each image.
// A set of options to control page image extraction can be passed in. The options
// parameter can be nil for the default options. By default, inline stencil masks
// are not extracted.
func (_ecg *Extractor )ExtractPageImages (options *ImageExtractOptions )(*PageImages ,error ){_baf :=&imageExtractContext {_fec :options };_bdb :=_baf .extractContentStreamImages (_ecg ._ff ,_ecg ._gcg );if _bdb !=nil {return nil ,_bdb ;};return &PageImages {Images :_baf ._ffe },nil ;
};func (_afef *textTable )growTable (){_ffdcee :=func (_dbeg paraList ){_afef ._feaf ++;for _ffcfb :=0;_ffcfb < _afef ._dabeb ;_ffcfb ++{_dbdac :=_dbeg [_ffcfb ];_afef .put (_ffcfb ,_afef ._feaf -1,_dbdac );};};_aeed :=func (_egaa paraList ){_afef ._dabeb ++;
for _fdggb :=0;_fdggb < _afef ._feaf ;_fdggb ++{_fdba :=_egaa [_fdggb ];_afef .put (_afef ._dabeb -1,_fdggb ,_fdba );};};if _fabg {_afef .log ("\u0067r\u006f\u0077\u0054\u0061\u0062\u006ce");};for _aefb :=0;;_aefb ++{_bgadg :=false ;_fddc :=_afef .getDown ();
_effb :=_afef .getRight ();if _fabg {_eb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_aefb ,_afef );_eb .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0020\u0064\u006f\u0077\u006e\u003d\u0025\u0073\u000a",_fddc );_eb .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0072\u0069\u0067\u0068\u0074\u003d\u0025\u0073\u000a",_effb );
};if _fddc !=nil &&_effb !=nil {_ccce :=_fddc [len (_fddc )-1];if !_ccce .taken ()&&_ccce ==_effb [len (_effb )-1]{_ffdcee (_fddc );if _effb =_afef .getRight ();_effb !=nil {_aeed (_effb );_afef .put (_afef ._dabeb -1,_afef ._feaf -1,_ccce );};_bgadg =true ;
};};if !_bgadg &&_fddc !=nil {_ffdcee (_fddc );_bgadg =true ;};if !_bgadg &&_effb !=nil {_aeed (_effb );_bgadg =true ;};if !_bgadg {break ;};};};func _fdfda (_gcaf _da .PdfRectangle ,_aacde ,_dgfba ,_facbg ,_dgdba *ruling )gridTile {_cafde :=_gcaf .Llx ;
_aeeg :=_gcaf .Urx ;_efce :=_gcaf .Lly ;_cdec :=_gcaf .Ury ;return gridTile {PdfRectangle :_gcaf ,_abagd :_aacde !=nil &&_aacde .encloses (_efce ,_cdec ),_bagb :_dgfba !=nil &&_dgfba .encloses (_efce ,_cdec ),_cfad :_facbg !=nil &&_facbg .encloses (_cafde ,_aeeg ),_ddcc :_dgdba !=nil &&_dgdba .encloses (_cafde ,_aeeg )};
};type wordBag struct{_da .PdfRectangle ;_aaf float64 ;_ddad ,_dfgb rulingList ;_efddf float64 ;_ggadg map[int ][]*textWord ;};func _edcg (_ebded int ,_fccf func (int ,int )bool )[]int {_deaeg :=make ([]int ,_ebded );for _eabg :=range _deaeg {_deaeg [_eabg ]=_eabg ;
};_c .Slice (_deaeg ,func (_geebe ,_dbab int )bool {return _fccf (_deaeg [_geebe ],_deaeg [_dbab ])});return _deaeg ;};var _ca =false ;func _fgbfg (_bfafb *_da .Image ,_geaab _a .Color )_ab .Image {_feec ,_bbegc :=int (_bfafb .Width ),int (_bfafb .Height );
_cgcd :=_ab .NewRGBA (_ab .Rect (0,0,_feec ,_bbegc ));for _bgdb :=0;_bgdb < _bbegc ;_bgdb ++{for _fcgb :=0;_fcgb < _feec ;_fcgb ++{_ddea ,_fdabc :=_bfafb .ColorAt (_fcgb ,_bgdb );if _fdabc !=nil {_bbc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_fcgb ,_bgdb );
continue ;};_babac ,_dggd ,_bbbeg ,_ :=_ddea .RGBA ();var _ffeaa _a .Color ;if _babac +_dggd +_bbbeg ==0{_ffeaa =_geaab ;}else {_ffeaa =_a .Transparent ;};_cgcd .Set (_fcgb ,_bgdb ,_ffeaa );};};return _cgcd ;};func (_eefd *wordBag )getDepthIdx (_agga float64 )int {_fcc :=_eefd .depthIndexes ();
_afgd :=_fgdc (_agga );if _afgd < _fcc [0]{return _fcc [0];};if _afgd > _fcc [len (_fcc )-1]{return _fcc [len (_fcc )-1];};return _afgd ;};type rulingKind int ;type subpath struct{_fbed []_ge .Point ;_dggf bool ;};func _eebe (_ggad _ge .Point )_ge .Matrix {return _ge .TranslationMatrix (_ggad .X ,_ggad .Y )};
func (_ddf *shapesState )lineTo (_defa ,_fbbc float64 ){if _bfaf {_bbc .Log .Info ("\u006c\u0069\u006eeT\u006f\u0028\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0070\u003d\u0025\u002e\u0032\u0066",_defa ,_fbbc ,_ddf .devicePoint (_defa ,_fbbc ));
};_ddf .addPoint (_defa ,_fbbc );};func _bdgb (_fadcbd _da .PdfRectangle )*ruling {return &ruling {_cbabg :_eabff ,_fbaf :_fadcbd .Llx ,_ccfd :_fadcbd .Lly ,_fbaca :_fadcbd .Ury };};func (_feegd rulingList )comp (_fbgec ,_bced int )bool {_aegaa ,_babc :=_feegd [_fbgec ],_feegd [_bced ];
_dfce ,_adac :=_aegaa ._cbabg ,_babc ._cbabg ;if _dfce !=_adac {return _dfce > _adac ;};if _dfce ==_caca {return false ;};_bgacb :=func (_fcefg bool )bool {if _dfce ==_edff {return _fcefg ;};return !_fcefg ;};_edgb ,_aefad :=_aegaa ._fbaf ,_babc ._fbaf ;
if _edgb !=_aefad {return _bgacb (_edgb > _aefad );};_edgb ,_aefad =_aegaa ._ccfd ,_babc ._ccfd ;if _edgb !=_aefad {return _bgacb (_edgb < _aefad );};return _bgacb (_aegaa ._fbaca < _babc ._fbaca );};const (_agac =false ;_bgad =false ;_bge =false ;_dgfa =false ;
_bfaf =false ;_ebecb =false ;_cdeeg =false ;_fbag =false ;_aead =false ;_acgg =_aead &&true ;_ceec =_acgg &&false ;_gcfeb =_aead &&true ;_ffbd =false ;_fabg =_ffbd &&false ;_geee =_ffbd &&true ;_eggfb =false ;_adce =_eggfb &&false ;_fgec =_eggfb &&false ;
_afdb =_eggfb &&true ;_adbf =_eggfb &&false ;_dabd =_eggfb &&false ;);func _aeac (_eabf []TextMark ,_fcbg *int ,_acgd TextMark )[]TextMark {_acgd .Offset =*_fcbg ;_eabf =append (_eabf ,_acgd );*_fcbg +=len (_acgd .Text );return _eabf ;};func (_bbff *textObject )setWordSpacing (_eff float64 ){if _bbff ==nil {return ;
};_bbff ._gcdgg ._bbde =_eff ;};func _ggda (_ebgf map[float64 ][]*textLine )[]float64 {_caee :=[]float64 {};for _eagg :=range _ebgf {_caee =append (_caee ,_eagg );};_c .Float64s (_caee );return _caee ;};func _agde (_gaeg map[float64 ]map[float64 ]gridTile )[]float64 {_ecafa :=make ([]float64 ,0,len (_gaeg ));
for _fada :=range _gaeg {_ecafa =append (_ecafa ,_fada );};_c .Float64s (_ecafa );_geag :=len (_ecafa );for _bcead :=0;_bcead < _geag /2;_bcead ++{_ecafa [_bcead ],_ecafa [_geag -1-_bcead ]=_ecafa [_geag -1-_bcead ],_ecafa [_bcead ];};return _ecafa ;};
func (_fage *ruling )alignsSec (_bcacf *ruling )bool {const _cgagc =_acda +1.0;return _fage ._ccfd -_cgagc <=_bcacf ._fbaca &&_bcacf ._ccfd -_cgagc <=_fage ._fbaca ;};func (_ebeb *wordBag )removeWord (_eded *textWord ,_aaff int ){_cccd :=_ebeb ._ggadg [_aaff ];
_cccd =_aeedg (_cccd ,_eded );if len (_cccd )==0{delete (_ebeb ._ggadg ,_aaff );}else {_ebeb ._ggadg [_aaff ]=_cccd ;};};func (_edacf paraList )yNeighbours (_egagc float64 )map[*textPara ][]int {_ffdfa :=make ([]event ,2*len (_edacf ));if _egagc ==0{for _dfbd ,_gdagd :=range _edacf {_ffdfa [2*_dfbd ]=event {_gdagd .Lly ,true ,_dfbd };
_ffdfa [2*_dfbd +1]=event {_gdagd .Ury ,false ,_dfbd };};}else {for _fcea ,_aggbe :=range _edacf {_ffdfa [2*_fcea ]=event {_aggbe .Lly -_egagc *_aggbe .fontsize (),true ,_fcea };_ffdfa [2*_fcea +1]=event {_aggbe .Ury +_egagc *_aggbe .fontsize (),false ,_fcea };
};};return _edacf .eventNeighbours (_ffdfa );};const (_caca rulingKind =iota ;_edff ;_eabff ;);func _egfd (_fefe []*wordBag )[]*wordBag {if len (_fefe )<=1{return _fefe ;};if _aead {_bbc .Log .Info ("\u006d\u0065\u0072\u0067\u0065\u0057\u006f\u0072\u0064B\u0061\u0067\u0073\u003a");
};_c .Slice (_fefe ,func (_dcfe ,_ggbe int )bool {_eea ,_cgbf :=_fefe [_dcfe ],_fefe [_ggbe ];_fgcf :=_eea .Width ()*_eea .Height ();_bafaa :=_cgbf .Width ()*_cgbf .Height ();if _fgcf !=_bafaa {return _fgcf > _bafaa ;};if _eea .Height ()!=_cgbf .Height (){return _eea .Height ()> _cgbf .Height ();
};return _dcfe < _ggbe ;});var _bfagf []*wordBag ;_deba :=make (intSet );for _efeg :=0;_efeg < len (_fefe );_efeg ++{if _deba .has (_efeg ){continue ;};_gfab :=_fefe [_efeg ];for _ffa :=_efeg +1;_ffa < len (_fefe );_ffa ++{if _deba .has (_efeg ){continue ;
};_cefeb :=_fefe [_ffa ];_ffad :=_gfab .PdfRectangle ;_ffad .Llx -=_gfab ._aaf ;if _ffab (_ffad ,_cefeb .PdfRectangle ){_gfab .absorb (_cefeb );_deba .add (_ffa );};};_bfagf =append (_bfagf ,_gfab );};if len (_fefe )!=len (_bfagf )+len (_deba ){_bbc .Log .Error ("\u006d\u0065\u0072ge\u0057\u006f\u0072\u0064\u0042\u0061\u0067\u0073\u003a \u0025d\u2192%\u0064 \u0061\u0062\u0073\u006f\u0072\u0062\u0065\u0064\u003d\u0025\u0064",len (_fefe ),len (_bfagf ),len (_deba ));
};return _bfagf ;};func _edffe (_gegc ,_gade int )int {if _gegc < _gade {return _gegc ;};return _gade ;};func (_edae rectRuling )checkWidth (_degbb ,_egee float64 )(float64 ,bool ){_gdfdb :=_egee -_degbb ;_ccad :=_gdfdb <=_acda ;return _gdfdb ,_ccad ;};
type paraList []*textPara ;func (_fcga *ruling )equals (_ebdb *ruling )bool {return _fcga ._cbabg ==_ebdb ._cbabg &&_egag (_fcga ._fbaf ,_ebdb ._fbaf )&&_egag (_fcga ._ccfd ,_ebdb ._ccfd )&&_egag (_fcga ._fbaca ,_ebdb ._fbaca );};func _fgddc (_cffa *wordBag ,_fbga float64 ,_dbdfd ,_gcfc rulingList )[]*wordBag {var _aafg []*wordBag ;
for _ ,_egfe :=range _cffa .depthIndexes (){_cbfac :=false ;for !_cffa .empty (_egfe ){_agd :=_cffa .firstReadingIndex (_egfe );_dbaad :=_cffa .firstWord (_agd );_ffdfd :=_aafc (_dbaad ,_fbga ,_dbdfd ,_gcfc );_cffa .removeWord (_dbaad ,_agd );if _cdeeg {_bbc .Log .Info ("\u0066\u0069\u0072\u0073\u0074\u0057\u006f\u0072\u0064\u0020\u005e\u005e^\u005e\u0020\u0025\u0073",_dbaad .String ());
};for _geef :=true ;_geef ;_geef =_cbfac {_cbfac =false ;_efccf :=_dced *_ffdfd ._aaf ;_bbcc :=_faag *_ffdfd ._aaf ;_ebfc :=_bbeg *_ffdfd ._aaf ;if _cdeeg {_bbc .Log .Info ("\u0070a\u0072a\u0057\u006f\u0072\u0064\u0073\u0020\u0064\u0065\u0070\u0074\u0068 \u0025\u002e\u0032\u0066 \u002d\u0020\u0025\u002e\u0032f\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061\u0044\u0065\u0070\u0074\u0068\u0047\u0061\u0070\u003d\u0025\u002e\u0032\u0066\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061R\u0065\u0061\u0064\u0069\u006e\u0067\u0047\u0061p\u003d\u0025\u002e\u0032\u0066",_ffdfd .minDepth (),_ffdfd .maxDepth (),_ebfc ,_bbcc );
};if _cffa .scanBand ("\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c",_ffdfd ,_gace (_accfc ,0),_ffdfd .minDepth ()-_ebfc ,_ffdfd .maxDepth ()+_ebfc ,_afeb ,false ,false )> 0{_cbfac =true ;};if _cffa .scanBand ("\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_ffdfd ,_gace (_accfc ,_bbcc ),_ffdfd .minDepth (),_ffdfd .maxDepth (),_fcaa ,false ,false )> 0{_cbfac =true ;
};if _cbfac {continue ;};_ecag :=_cffa .scanBand ("",_ffdfd ,_gace (_bedc ,_efccf ),_ffdfd .minDepth (),_ffdfd .maxDepth (),_abbbe ,true ,false );if _ecag > 0{_edba :=(_ffdfd .maxDepth ()-_ffdfd .minDepth ())/_ffdfd ._aaf ;if (_ecag > 1&&float64 (_ecag )> 0.3*_edba )||_ecag <=10{if _cffa .scanBand ("\u006f\u0074\u0068e\u0072",_ffdfd ,_gace (_bedc ,_efccf ),_ffdfd .minDepth (),_ffdfd .maxDepth (),_abbbe ,false ,true )> 0{_cbfac =true ;
};};};};_aafg =append (_aafg ,_ffdfd );};};return _aafg ;};func _dbcde (_cbfd []pathSection ){if _edca < 0.0{return ;};if _eggfb {_bbc .Log .Info ("\u0067\u0072\u0061\u006e\u0075\u006c\u0061\u0072\u0069\u007a\u0065\u003a\u0020\u0025\u0064 \u0073u\u0062\u0070\u0061\u0074\u0068\u0020\u0073\u0065\u0063\u0074\u0069\u006f\u006e\u0073",len (_cbfd ));
};for _dcbee ,_bfbd :=range _cbfd {for _fbdaa ,_gdfab :=range _bfbd ._febc {for _egfdc ,_edbb :=range _gdfab ._fbed {_gdfab ._fbed [_egfdc ]=_ge .Point {X :_edcbd (_edbb .X ),Y :_edcbd (_edbb .Y )};if _eggfb {_dagdc :=_gdfab ._fbed [_egfdc ];if !_gdbe (_edbb ,_dagdc ){_gfeff :=_ge .Point {X :_dagdc .X -_edbb .X ,Y :_dagdc .Y -_edbb .Y };
_eb .Printf ("\u0025\u0034d \u002d\u0020\u00254\u0064\u0020\u002d\u0020%4d\u003a %\u002e\u0032\u0066\u0020\u2192\u0020\u0025.2\u0066\u0020\u0028\u0025\u0067\u0029\u000a",_dcbee ,_fbdaa ,_egfdc ,_edbb ,_dagdc ,_gfeff );};};};};};};func (_ceeea rulingList )blocks (_ecaa ,_cbegc *ruling )bool {if _ecaa ._ccfd > _cbegc ._fbaca ||_cbegc ._ccfd > _ecaa ._fbaca {return false ;
};_acbba :=_bb .Max (_ecaa ._ccfd ,_cbegc ._ccfd );_eddbe :=_bb .Min (_ecaa ._fbaca ,_cbegc ._fbaca );if _ecaa ._fbaf > _cbegc ._fbaf {_ecaa ,_cbegc =_cbegc ,_ecaa ;};for _ ,_cfae :=range _ceeea {if _ecaa ._fbaf <=_cfae ._fbaf +_acda &&_cfae ._fbaf <=_cbegc ._fbaf +_acda &&_cfae ._ccfd <=_eddbe &&_acbba <=_cfae ._fbaca {return true ;
};};return false ;};func _caba (_fabc ,_dcfea *textPara )bool {return _afag (_fabc ._adged ,_dcfea ._adged )};func (_agddf *ruling )alignsPrimary (_bddfe *ruling )bool {return _agddf ._cbabg ==_bddfe ._cbabg &&_bb .Abs (_agddf ._fbaf -_bddfe ._fbaf )< _acda *0.5;
};func _efdf (_dfdcg ,_dbca _da .PdfRectangle )bool {return _afag (_dfdcg ,_dbca )&&_bfecg (_dfdcg ,_dbca )};var _babadf =map[rulingKind ]string {_caca :"\u006e\u006f\u006e\u0065",_edff :"\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_eabff :"\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c"};
func _ecda (_fdaff string ,_geab []rulingList ){_bbc .Log .Info ("\u0024\u0024 \u0025\u0064\u0020g\u0072\u0069\u0064\u0073\u0020\u002d\u0020\u0025\u0073",len (_geab ),_fdaff );for _ffec ,_dbfg :=range _geab {_eb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ffec ,_dbfg .String ());
};};type textPara struct{_da .PdfRectangle ;_adged _da .PdfRectangle ;_acgga []*textLine ;_bgde *textTable ;_bdec bool ;_bfgf bool ;_dgcdb *textPara ;_cebf *textPara ;_addg *textPara ;_ffea *textPara ;_cdbd []list ;};func (_deacg rulingList )aligned ()bool {if len (_deacg )< 2{return false ;
};_cbgb :=make (map[*ruling ]int );_cbgb [_deacg [0]]=0;for _ ,_eegc :=range _deacg [1:]{_dbdae :=false ;for _ebfg :=range _cbgb {if _eegc .gridIntersecting (_ebfg ){_cbgb [_ebfg ]++;_dbdae =true ;break ;};};if !_dbdae {_cbgb [_eegc ]=0;};};_afdge :=0;
for _ ,_edbag :=range _cbgb {if _edbag ==0{_afdge ++;};};_agec :=float64 (_afdge )/float64 (len (_deacg ));_cbfb :=_agec <=1.0-_feeb ;if _eggfb {_bbc .Log .Info ("\u0061\u006c\u0069\u0067\u006e\u0065\u0064\u003d\u0025\u0074\u0020\u0075\u006em\u0061\u0074\u0063\u0068\u0065\u0064=\u0025\u002e\u0032\u0066\u003d\u0025\u0064\u002f\u0025\u0064\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_cbfb ,_agec ,_afdge ,len (_deacg ),_deacg .String ());
};return _cbfb ;};func _aafc (_efc *textWord ,_fgba float64 ,_dbef ,_abaa rulingList )*wordBag {_bfd :=_fgdc (_efc ._ecdfc );_fdc :=[]*textWord {_efc };_cfab :=wordBag {_ggadg :map[int ][]*textWord {_bfd :_fdc },PdfRectangle :_efc .PdfRectangle ,_aaf :_efc ._fabac ,_efddf :_fgba ,_ddad :_dbef ,_dfgb :_abaa };
return &_cfab ;};func (_fgff *textPara )toTextMarks (_cabae *int )[]TextMark {if _fgff ._bgde ==nil {return _fgff .toCellTextMarks (_cabae );};var _fdaae []TextMark ;for _dgda :=0;_dgda < _fgff ._bgde ._feaf ;_dgda ++{for _cedcd :=0;_cedcd < _fgff ._bgde ._dabeb ;
_cedcd ++{_fcef :=_fgff ._bgde .get (_cedcd ,_dgda );if _fcef ==nil {_fdaae =_fccg (_fdaae ,_cabae ,"\u0009");}else {_ffcf :=_fcef .toCellTextMarks (_cabae );_fdaae =append (_fdaae ,_ffcf ...);};_fdaae =_fccg (_fdaae ,_cabae ,"\u0020");};if _dgda < _fgff ._bgde ._feaf -1{_fdaae =_fccg (_fdaae ,_cabae ,"\u000a");
};};_babg :=_fgff ._bgde ;if _babg .isExportable (){_aefd :=_babg .toTextTable ();_fdaae =_eaggb (_fdaae ,&_aefd );};return _fdaae ;};func (_ffbf *ruling )gridIntersecting (_fcaafc *ruling )bool {return _egag (_ffbf ._ccfd ,_fcaafc ._ccfd )&&_egag (_ffbf ._fbaca ,_fcaafc ._fbaca );
};func (_eedfe *textObject )moveText (_acgc ,_gfbe float64 ){_eedfe .moveLP (_acgc ,_gfbe )};func (_fgfcc *textTable )emptyCompositeRow (_ecfge int )bool {for _efec :=0;_efec < _fgfcc ._dabeb ;_efec ++{if _eebdc ,_gagcd :=_fgfcc ._bcfe [_dfabe (_efec ,_ecfge )];
_gagcd {if len (_eebdc .paraList )> 0{return false ;};};};return true ;};type lineRuling struct{_eagge rulingKind ;_baac markKind ;_a .Color ;_gdcfa ,_geed _ge .Point ;};func (_gdea rulingList )augmentGrid ()(rulingList ,rulingList ){_dcgc ,_abccg :=_gdea .vertsHorzs ();
if len (_dcgc )==0||len (_abccg )==0{return _dcgc ,_abccg ;};_edegf ,_ecdcc :=_dcgc ,_abccg ;_cccff :=_dcgc .bbox ();_ccfa :=_abccg .bbox ();if _eggfb {_bbc .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0056\u003d\u0025\u0036\u002e\u0032\u0066",_cccff );
_bbc .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0048\u003d\u0025\u0036\u002e\u0032\u0066",_ccfa );};var _effg ,_acga ,_fdadb ,_feedd *ruling ;if _ccfa .Llx < _cccff .Llx -_acfe {_effg =&ruling {_baef :_bgca ,_cbabg :_eabff ,_fbaf :_ccfa .Llx ,_ccfd :_cccff .Lly ,_fbaca :_cccff .Ury };
_dcgc =append (rulingList {_effg },_dcgc ...);};if _ccfa .Urx > _cccff .Urx +_acfe {_acga =&ruling {_baef :_bgca ,_cbabg :_eabff ,_fbaf :_ccfa .Urx ,_ccfd :_cccff .Lly ,_fbaca :_cccff .Ury };_dcgc =append (_dcgc ,_acga );};if _cccff .Lly < _ccfa .Lly -_acfe {_fdadb =&ruling {_baef :_bgca ,_cbabg :_edff ,_fbaf :_cccff .Lly ,_ccfd :_ccfa .Llx ,_fbaca :_ccfa .Urx };
_abccg =append (rulingList {_fdadb },_abccg ...);};if _cccff .Ury > _ccfa .Ury +_acfe {_feedd =&ruling {_baef :_bgca ,_cbabg :_edff ,_fbaf :_cccff .Ury ,_ccfd :_ccfa .Llx ,_fbaca :_ccfa .Urx };_abccg =append (_abccg ,_feedd );};if len (_dcgc )+len (_abccg )==len (_gdea ){return _edegf ,_ecdcc ;
};_ccbb :=append (_dcgc ,_abccg ...);_gdea .log ("u\u006e\u0061\u0075\u0067\u006d\u0065\u006e\u0074\u0065\u0064");_ccbb .log ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0065d");return _dcgc ,_abccg ;};type list struct{_fadc []*textLine ;_ecfg string ;_afbc []*list ;
_dfab string ;};type textObject struct{_accf *Extractor ;_dfg *_da .PdfPageResources ;_gde _eae .GraphicsState ;_gcdgg *textState ;_fdfd *stateStack ;_gbeg _ge .Matrix ;_ccdc _ge .Matrix ;_dfga []*textMark ;_adad bool ;};func (_afefa *textWord )addDiacritic (_dada string ){_acba :=_afefa ._bbaaf [len (_afefa ._bbaaf )-1];
_acba ._fgbe +=_dada ;_acba ._fgbe =_ac .NFKC .String (_acba ._fgbe );};func (_agee TextTable )getCellInfo (_gdeg TextMark )[][]int {for _ded ,_aacc :=range _agee .Cells {for _cda :=range _aacc {_gdega :=&_aacc [_cda ].Marks ;if _gdega .exists (_gdeg ){return [][]int {{_ded },{_cda }};
};};};return nil ;};func _fbcg (_eefde string )string {_fdec :=[]rune (_eefde );return string (_fdec [:len (_fdec )-1])};func (_cgbed paraList )reorder (_gecf []int ){_adgdd :=make (paraList ,len (_cgbed ));for _cfbf ,_edeg :=range _gecf {_adgdd [_cfbf ]=_cgbed [_edeg ];
};copy (_cgbed ,_adgdd );};type textResult struct{_gdfc PageText ;_bga int ;_bbe int ;};func (_fefd paraList )applyTables (_gaad []*textTable )paraList {var _daagf paraList ;for _ ,_abbbad :=range _gaad {_daagf =append (_daagf ,_abbbad .newTablePara ());
};for _ ,_afaf :=range _fefd {if _afaf ._bdec {continue ;};_daagf =append (_daagf ,_afaf );};return _daagf ;};func _befb (_eccc *textLine )float64 {return _eccc ._ffaf [0].Llx };func (_agfec gridTile )contains (_bcge _da .PdfRectangle )bool {if _agfec .numBorders ()< 3{return false ;
};if _agfec ._abagd &&_bcge .Llx < _agfec .Llx -_fcaaf {return false ;};if _agfec ._bagb &&_bcge .Urx > _agfec .Urx +_fcaaf {return false ;};if _agfec ._cfad &&_bcge .Lly < _agfec .Lly -_fcaaf {return false ;};if _agfec ._ddcc &&_bcge .Ury > _agfec .Ury +_fcaaf {return false ;
};return true ;};func (_eagd compositeCell )parasBBox ()(paraList ,_da .PdfRectangle ){return _eagd .paraList ,_eagd .PdfRectangle ;};func _dead (_afgef float64 ,_faafd int )int {if _faafd ==0{_faafd =1;};_bcbd :=float64 (_faafd );return int (_bb .Round (_afgef /_bcbd )*_bcbd );
};func (_dffed rulingList )findPrimSec (_fbaga ,_gegab float64 )*ruling {for _ ,_cafe :=range _dffed {if _abbae (_cafe ._fbaf -_fbaga )&&_cafe ._ccfd -_acfe <=_gegab &&_gegab <=_cafe ._fbaca +_acfe {return _cafe ;};};return nil ;};

// ToTextMark returns the public view of `tm`.
func (_dcaa *textMark )ToTextMark ()TextMark {return TextMark {Text :_dcaa ._fgbe ,Original :_dcaa ._agfda ,BBox :_dcaa ._eead ,Font :_dcaa ._bfeb ,FontSize :_dcaa ._feag ,FillColor :_dcaa ._fgcg ,StrokeColor :_dcaa ._bfbc ,Orientation :_dcaa ._ababc ,DirectObject :_dcaa ._dagca ,ObjString :_dcaa ._gdcf ,Tw :_dcaa .Tw ,Th :_dcaa .Th ,Tc :_dcaa ._deaf ,Index :_dcaa ._dece };
};func (_beac paraList )sortReadingOrder (){_bbc .Log .Trace ("\u0073\u006fr\u0074\u0052\u0065\u0061\u0064i\u006e\u0067\u004f\u0072\u0064e\u0072\u003a\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_beac ));
if len (_beac )<=1{return ;};_beac .computeEBBoxes ();_c .Slice (_beac ,func (_fafg ,_ffgc int )bool {return _abag (_beac [_fafg ],_beac [_ffgc ])<=0});};func (_ebgce rulingList )isActualGrid ()(rulingList ,bool ){_dcgb ,_fbbbd :=_ebgce .augmentGrid ();
if !(len (_dcgb )>=_ggdca +1&&len (_fbbbd )>=_agfe +1){if _eggfb {_bbc .Log .Info ("\u0069s\u0041\u0063t\u0075\u0061\u006c\u0047r\u0069\u0064\u003a \u004e\u006f\u0074\u0020\u0061\u006c\u0069\u0067\u006eed\u002e\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u003c\u0020\u0025d\u0020\u0078 \u0025\u0064",len (_dcgb ),len (_fbbbd ),_ggdca +1,_agfe +1);
};return nil ,false ;};if _eggfb {_bbc .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075a\u006c\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0073\u0020\u003a\u0020\u0025t\u0020\u0026\u0020\u0025\u0074\u0020\u2192 \u0025\u0074",_ebgce ,len (_dcgb )>=2,len (_fbbbd )>=2,len (_dcgb )>=2&&len (_fbbbd )>=2);
for _edadg ,_bbbc :=range _ebgce {_eb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0076\u000a",_edadg ,_bbbc );};};if _bcdd {_ebffeb ,_fcgfc :=_dcgb [0],_dcgb [len (_dcgb )-1];_facab ,_faegf :=_fbbbd [0],_fbbbd [len (_fbbbd )-1];if !(_bdcc (_ebffeb ._fbaf -_facab ._ccfd )&&_bdcc (_fcgfc ._fbaf -_facab ._fbaca )&&_bdcc (_facab ._fbaf -_ebffeb ._fbaca )&&_bdcc (_faegf ._fbaf -_ebffeb ._ccfd )){if _eggfb {_bbc .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069d\u003a\u0020\u0020N\u006f\u0074 \u0061\u006c\u0069\u0067\u006e\u0065d\u002e\n\t\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0076\u0031\u003d\u0025\u0073\u000a\u0009\u0068\u0030\u003d\u0025\u0073\u000a\u0009\u0068\u0031\u003d\u0025\u0073",_ebffeb ,_fcgfc ,_facab ,_faegf );
};return nil ,false ;};}else {if !_dcgb .aligned (){if _fgec {_bbc .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0076\u0065\u0072\u0074\u0073\u002e\u0020%\u0064",len (_dcgb ));
};return nil ,false ;};if !_fbbbd .aligned (){if _eggfb {_bbc .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0068\u006f\u0072\u007a\u0073\u002e\u0020%\u0064",len (_fbbbd ));
};return nil ,false ;};};_dabdg :=append (_dcgb ,_fbbbd ...);return _dabdg ,true ;};func (_cbdd *wordBag )depthIndexes ()[]int {if len (_cbdd ._ggadg )==0{return nil ;};_acdg :=make ([]int ,len (_cbdd ._ggadg ));_deffe :=0;for _ddaa :=range _cbdd ._ggadg {_acdg [_deffe ]=_ddaa ;
_deffe ++;};_c .Ints (_acdg );return _acdg ;};func (_ebffe *shapesState )newSubPath (){_ebffe .clearPath ();if _bfaf {_bbc .Log .Info ("\u006e\u0065\u0077\u0053\u0075\u0062\u0050\u0061\u0074h\u003a\u0020\u0025\u0073",_ebffe );};};func (_bfca rulingList )log (_ebdef string ){if !_eggfb {return ;
};_bbc .Log .Info ("\u0023\u0023\u0023\u0020\u0025\u0031\u0030\u0073\u003a\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_ebdef ,_bfca .String ());for _aegc ,_fbge :=range _bfca {_eb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_aegc ,_fbge .String ());
};};

// TextMark represents extracted text on a page with information regarding both textual content,
// formatting (font and size) and positioning.
// It is the smallest unit of text on a PDF page, typically a single character.
//
// getBBox() in test_text.go shows how to compute bounding boxes of substrings of extracted text.
// The following code extracts the text on PDF page `page` into `text` then finds the bounding box
// `bbox` of substring `term` in `text`.
//
//	ex, _ := New(page)
//	// handle errors
//	pageText, _, _, err := ex.ExtractPageText()
//	// handle errors
//	text := pageText.Text()
//	textMarks := pageText.Marks()
//
//		start := strings.Index(text, term)
//	 end := start + len(term)
//	 spanMarks, err := textMarks.RangeOffset(start, end)
//	 // handle errors
//	 bbox, ok := spanMarks.BBox()
//	 // handle errors
type TextMark struct{

// Text is the extracted text.
Text string ;

// Original is the text in the PDF. It has not been decoded like `Text`.
Original string ;

// BBox is the bounding box of the text.
BBox _da .PdfRectangle ;

// Font is the font the text was drawn with.
Font *_da .PdfFont ;

// FontSize is the font size the text was drawn with.
FontSize float64 ;

// Offset is the offset of the start of TextMark.Text in the extracted text. If you do this
//   text, textMarks := pageText.Text(), pageText.Marks()
//   marks := textMarks.Elements()
// then marks[i].Offset is the offset of marks[i].Text in text.
Offset int ;

// Meta is set true for spaces and line breaks that we insert in the extracted text. We insert
// spaces (line breaks) when we see characters that are over a threshold horizontal (vertical)
//  distance  apart. See wordJoiner (lineJoiner) in PageText.computeViews().
Meta bool ;

// FillColor is the fill color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
FillColor _a .Color ;

// StrokeColor is the stroke color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
StrokeColor _a .Color ;

// Orientation is the text orientation
Orientation int ;

// DirectObject is the underlying PdfObject (Text Object) that represents the visible texts. This is introduced to get
// a simple access to the TextObject in case editing or replacment of some text is needed. E.g during redaction.
DirectObject _ga .PdfObject ;

// ObjString is a decoded string operand of a text-showing operator. It has the same value as `Text` attribute except
// when many glyphs are represented with the same Text Object that contains multiple length string operand in which case
// ObjString spans more than one character string that falls in different TextMark objects.
ObjString []string ;Tw float64 ;Th float64 ;Tc float64 ;Index int ;_cecd bool ;_cbf *TextTable ;};func (_bfbf *shapesState )stroke (_gcca *[]pathSection ){_bgdg :=pathSection {_febc :_bfbf ._gcda ,Color :_bfbf ._cefec .getStrokeColor ()};*_gcca =append (*_gcca ,_bgdg );
if _eggfb {_eb .Printf ("\u0020 \u0020\u0020S\u0054\u0052\u004fK\u0045\u003a\u0020\u0025\u0064\u0020\u0073t\u0072\u006f\u006b\u0065\u0073\u0020s\u0073\u003d\u0025\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d%\u002b\u0076\u0020\u0025\u0036\u002e\u0032\u0066\u000a",len (*_gcca ),_bfbf ,_bfbf ._cefec .getStrokeColor (),_bgdg .bbox ());
if _adce {for _gbfa ,_eggb :=range _bfbf ._gcda {_eb .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_gbfa ,_eggb );if _gbfa ==10{break ;};};};};};func (_faff paraList )list ()[]*list {var _ebaa []*textLine ;var _bbdc []*textLine ;for _ ,_feac :=range _faff {_ddgaa :=_feac .getListLines ();
_ebaa =append (_ebaa ,_ddgaa ...);_bbdc =append (_bbdc ,_feac ._acgga ...);};_aecc :=_decb (_ebaa );_bdagb :=_bbfg (_bbdc ,_aecc );return _bdagb ;};func _afebc (_bgabf *textLine ,_cadd []*textLine ,_eebac []float64 )float64 {var _bcab float64 =-1;for _ ,_fdfe :=range _cadd {if _fdfe ._dfbc > _bgabf ._dfbc {if _bb .Round (_fdfe .Llx )>=_bb .Round (_bgabf .Llx ){_bcab =_fdfe ._dfbc ;
}else {break ;};};};return _bcab ;};func _adeab (_bbbde map[float64 ]gridTile )[]float64 {_cddc :=make ([]float64 ,0,len (_bbbde ));for _gebe :=range _bbbde {_cddc =append (_cddc ,_gebe );};_c .Float64s (_cddc );return _cddc ;};func (_eabbf lineRuling )xMean ()float64 {return 0.5*(_eabbf ._gdcfa .X +_eabbf ._geed .X )};
func _fbca (_fedff ,_aegfd _ab .Image )_ab .Image {_gecdb ,_ceege :=_aegfd .Bounds ().Size (),_fedff .Bounds ().Size ();_ecfdb ,_aedcg :=_gecdb .X ,_gecdb .Y ;if _ceege .X > _ecfdb {_ecfdb =_ceege .X ;};if _ceege .Y > _aedcg {_aedcg =_ceege .Y ;};_cega :=_ab .Rect (0,0,_ecfdb ,_aedcg );
if _gecdb .X !=_ecfdb ||_gecdb .Y !=_aedcg {_fdeaf :=_ab .NewRGBA (_cega );_ce .BiLinear .Scale (_fdeaf ,_cega ,_fedff ,_aegfd .Bounds (),_ce .Over ,nil );_aegfd =_fdeaf ;};if _ceege .X !=_ecfdb ||_ceege .Y !=_aedcg {_ccffe :=_ab .NewRGBA (_cega );_ce .BiLinear .Scale (_ccffe ,_cega ,_fedff ,_fedff .Bounds (),_ce .Over ,nil );
_fedff =_ccffe ;};_ddcgd :=_ab .NewRGBA (_cega );_ce .DrawMask (_ddcgd ,_cega ,_fedff ,_ab .Point {},_aegfd ,_ab .Point {},_ce .Over );return _ddcgd ;};func (_aegd *textPara )isAtom ()*textTable {_ffgf :=_aegd ;_eeafa :=_aegd ._cebf ;_abfc :=_aegd ._ffea ;
if _eeafa .taken ()||_abfc .taken (){return nil ;};_ggccb :=_eeafa ._ffea ;if _ggccb .taken ()||_ggccb !=_abfc ._cebf {return nil ;};return _gdad (_ffgf ,_eeafa ,_abfc ,_ggccb );};func (_bedge *textPara )writeText (_fbbbg _f .Writer ){if _bedge ._bgde ==nil {_bedge .writeCellText (_fbbbg );
return ;};for _fdae :=0;_fdae < _bedge ._bgde ._feaf ;_fdae ++{for _bbaa :=0;_bbaa < _bedge ._bgde ._dabeb ;_bbaa ++{_addf :=_bedge ._bgde .get (_bbaa ,_fdae );if _addf ==nil {_fbbbg .Write ([]byte ("\u0009"));}else {_addf .writeCellText (_fbbbg );};_fbbbg .Write ([]byte ("\u0020"));
};if _fdae < _bedge ._bgde ._feaf -1{_fbbbg .Write ([]byte ("\u000a"));};};};type stateStack []*textState ;func (_afda *textObject )setFont (_acd string ,_fagbf float64 )error {if _afda ==nil {return nil ;};_afda ._gcdgg ._deec =_fagbf ;_dddg ,_egba :=_afda .getFont (_acd );
if _egba !=nil {return _egba ;};_afda ._gcdgg ._fdeg =_dddg ;return nil ;};func (_dfd *imageExtractContext )processOperand (_aab *_eae .ContentStreamOperation ,_gab _eae .GraphicsState ,_aae *_da .PdfPageResources )error {if _aab .Operand =="\u0042\u0049"&&len (_aab .Params )==1{_cgf ,_dgb :=_aab .Params [0].(*_eae .ContentStreamInlineImage );
if !_dgb {return nil ;};if _afd ,_fff :=_ga .GetBoolVal (_cgf .ImageMask );_fff {if _afd &&!_dfd ._fec .IncludeInlineStencilMasks {return nil ;};};return _dfd .extractInlineImage (_cgf ,_gab ,_aae );}else if _aab .Operand =="\u0044\u006f"&&len (_aab .Params )==1{_bgf ,_dd :=_ga .GetName (_aab .Params [0]);
if !_dd {_bbc .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");return _agg ;};_ ,_ed :=_aae .GetXObjectByName (*_bgf );switch _ed {case _da .XObjectTypeImage :return _dfd .extractXObjectImage (_bgf ,_gab ,_aae );case _da .XObjectTypeForm :return _dfd .extractFormImages (_bgf ,_gab ,_aae );
};}else if _dfd ._fde &&(_aab .Operand =="\u0073\u0063\u006e"||_aab .Operand =="\u0053\u0043\u004e")&&len (_aab .Params )==1{_cad ,_gcfd :=_ga .GetName (_aab .Params [0]);if !_gcfd {_bbc .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");
return _agg ;};_aac ,_gcfd :=_aae .GetPatternByName (*_cad );if !_gcfd {_bbc .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0050\u0061\u0074\u0074\u0065\u0072n\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");return nil ;};if _aac .IsTiling (){_cb :=_aac .GetAsTilingPattern ();
_ae ,_dgc :=_cb .GetContentStream ();if _dgc !=nil {return _dgc ;};_dgc =_dfd .extractContentStreamImages (string (_ae ),_cb .Resources );if _dgc !=nil {return _dgc ;};};}else if (_aab .Operand =="\u0063\u0073"||_aab .Operand =="\u0043\u0053")&&len (_aab .Params )>=1{_dfd ._fde =_aab .Params [0].String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e";
};return nil ;};func _efa (_fceg *Extractor ,_dfb *_da .PdfPageResources ,_dddb _eae .GraphicsState ,_acdc *textState ,_ebg *stateStack )*textObject {return &textObject {_accf :_fceg ,_dfg :_dfb ,_gde :_dddb ,_fdfd :_ebg ,_gcdgg :_acdc ,_gbeg :_ge .IdentityMatrix (),_ccdc :_ge .IdentityMatrix ()};
};func _gabgb (_beef map[float64 ]map[float64 ]gridTile )[]float64 {_gdgad :=make ([]float64 ,0,len (_beef ));_gacec :=make (map[float64 ]struct{},len (_beef ));for _ ,_bbfa :=range _beef {for _bcee :=range _bbfa {if _ ,_fbcca :=_gacec [_bcee ];_fbcca {continue ;
};_gdgad =append (_gdgad ,_bcee );_gacec [_bcee ]=struct{}{};};};_c .Float64s (_gdgad );return _gdgad ;};func _cgfgg (_gdda *paraList )map[int ][]*textLine {_eeba :=map[int ][]*textLine {};for _ ,_cddf :=range *_gdda {for _ ,_dbcdc :=range _cddf ._acgga {if !_gcdbg (_dbcdc ){_bbc .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_cfddd :=_dbcdc ._ffaf [0]._bbaaf [0]._bdac ;_eeba [_cfddd ]=append (_eeba [_cfddd ],_dbcdc );};if _cddf ._bgde !=nil {_bdbf :=_cddf ._bgde ._cffda ;for _ ,_aafb :=range _bdbf {for _ ,_edfg :=range _aafb ._acgga {if !_gcdbg (_edfg ){_bbc .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_bdc :=_edfg ._ffaf [0]._bbaaf [0]._bdac ;_eeba [_bdc ]=append (_eeba [_bdc ],_edfg );};};};};return _eeba ;};func (_bceg *shapesState )devicePoint (_afccd ,_ccec float64 )_ge .Point {_fcb :=_bceg ._cgfg .Mult (_bceg ._gcc );_afccd ,_ccec =_fcb .Transform (_afccd ,_ccec );
return _ge .NewPoint (_afccd ,_ccec );};func _cffdc (_fbfe []*textWord ,_eade int )[]*textWord {_ddeg :=len (_fbfe );copy (_fbfe [_eade :],_fbfe [_eade +1:]);return _fbfe [:_ddeg -1];};func (_dagc *textLine )pullWord (_ddbe *wordBag ,_cbcc *textWord ,_gceaa int ){_dagc .appendWord (_cbcc );
_ddbe .removeWord (_cbcc ,_gceaa );};func _aegf (_bfcb _da .PdfRectangle )rulingKind {_fdgg :=_bfcb .Width ();_cebgf :=_bfcb .Height ();if _fdgg > _cebgf {if _fdgg >=_ggge {return _edff ;};}else {if _cebgf >=_ggge {return _eabff ;};};return _caca ;};func _gfcbg (_fabd *list )[]*list {var _afccce []*list ;
for _ ,_bea :=range _fabd ._afbc {switch _bea ._ecfg {case "\u004c\u0049":_aacd :=_cbee (_bea );_cgfa :=_gfcbg (_bea );_fgbaa :=_dgbbe (_aacd ,"\u0062\u0075\u006c\u006c\u0065\u0074",_cgfa );_cefg :=_eccg (_aacd ,"");_fgbaa ._dfab =_cefg ;_afccce =append (_afccce ,_fgbaa );
case "\u004c\u0042\u006fd\u0079":return _gfcbg (_bea );case "\u004c":_eeeaf :=_gfcbg (_bea );_afccce =append (_afccce ,_eeeaf ...);return _afccce ;};};return _afccce ;};func (_edf *imageExtractContext )extractInlineImage (_dda *_eae .ContentStreamInlineImage ,_dc _eae .GraphicsState ,_eccb *_da .PdfPageResources )error {_cd ,_edg :=_dda .ToImage (_eccb );
if _edg !=nil {return _edg ;};_ef ,_edg :=_dda .GetColorSpace (_eccb );if _edg !=nil {return _edg ;};if _ef ==nil {_ef =_da .NewPdfColorspaceDeviceGray ();};_cdf ,_edg :=_ef .ImageToRGB (*_cd );if _edg !=nil {return _edg ;};_fbd :=ImageMark {Image :&_cdf ,Width :_dc .CTM .ScalingFactorX (),Height :_dc .CTM .ScalingFactorY (),Angle :_dc .CTM .Angle ()};
_fbd .X ,_fbd .Y =_dc .CTM .Translation ();_edf ._ffe =append (_edf ._ffe ,_fbd );_edf ._fba ++;return nil ;};func _dadd (_gebd _ge .Point )*subpath {return &subpath {_fbed :[]_ge .Point {_gebd }}};func (_fdbgc *textTable )put (_bfda ,_gfbda int ,_efad *textPara ){_fdbgc ._cffda [_dfabe (_bfda ,_gfbda )]=_efad ;
};

// String returns a description of `w`.
func (_ggcddg *textWord )String ()string {return _eb .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_ggcddg ._ecdfc ,_ggcddg .PdfRectangle ,_ggcddg ._fabac ,_ggcddg ._aefg );
};func _fcgab (_gcaca ,_dffge int )int {if _gcaca > _dffge {return _gcaca ;};return _dffge ;};func _dbee (_fefb *list ,_egcg *string )string {_dffgg :=_fg .Split (_fefb ._dfab ,"\u000a");_gaeb :=&_fg .Builder {};for _ ,_dfcd :=range _dffgg {if _dfcd !=""{_gaeb .WriteString (*_egcg );
_gaeb .WriteString (_dfcd );_gaeb .WriteString ("\u000a");};};return _gaeb .String ();};func _gabd (_bcbb ,_cbef *textPara )bool {if _bcbb ._bfgf ||_cbef ._bfgf {return true ;};return _abbae (_bcbb .depth ()-_cbef .depth ());};func (_deece *textPara )writeCellText (_bebf _f .Writer ){for _cgeca ,_fedb :=range _deece ._acgga {_cegff :=_fedb .text ();
_fdab :=_bgec &&_fedb .endsInHyphen ()&&_cgeca !=len (_deece ._acgga )-1;if _fdab {_cegff =_fbcg (_cegff );};_bebf .Write ([]byte (_cegff ));if !(_fdab ||_cgeca ==len (_deece ._acgga )-1){_bebf .Write ([]byte (_dcec (_fedb ._dfbc ,_deece ._acgga [_cgeca +1]._dfbc )));
};};};

// Len returns the number of TextMarks in `ma`.
func (_egcd *TextMarkArray )Len ()int {if _egcd ==nil {return 0;};return len (_egcd ._cggca );};

// PageImages represents extracted images on a PDF page with spatial information:
// display position and size.
type PageImages struct{Images []ImageMark ;};

// ImageExtractOptions contains options for controlling image extraction from
// PDF pages.
type ImageExtractOptions struct{IncludeInlineStencilMasks bool ;};func _gcdbg (_ddade *textLine )bool {_ddgd :=true ;_fdcb :=-1;for _ ,_aeea :=range _ddade ._ffaf {for _ ,_gdga :=range _aeea ._bbaaf {_fdaf :=_gdga ._bdac ;if _fdcb ==-1{_fdcb =_fdaf ;}else {if _fdcb !=_fdaf {_ddgd =false ;
break ;};};};};return _ddgd ;};func (_dedg *textLine )endsInHyphen ()bool {_fcgfd :=_dedg ._ffaf [len (_dedg ._ffaf )-1];_facg :=_fcgfd ._aefg ;_bebg ,_ccea :=_b .DecodeLastRuneInString (_facg );if _ccea <=0||!_d .Is (_d .Hyphen ,_bebg ){return false ;
};if _fcgfd ._dcdg &&_dgbab (_facg ){return true ;};return _dgbab (_dedg .text ());};func (_bcff rulingList )tidied (_ddecf string )rulingList {_dgea :=_bcff .removeDuplicates ();_dgea .log ("\u0075n\u0069\u0071\u0075\u0065\u0073");_cffd :=_dgea .snapToGroups ();
if _cffd ==nil {return nil ;};_cffd .sort ();if _eggfb {_bbc .Log .Info ("\u0074\u0069\u0064i\u0065\u0064\u003a\u0020\u0025\u0071\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u0075\u006e\u0069\u0071\u0075\u0065\u0073\u003d\u0025\u0064\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0064\u003d\u0025\u0064",_ddecf ,len (_bcff ),len (_dgea ),len (_cffd ));
};_cffd .log ("\u0063o\u0061\u006c\u0065\u0073\u0063\u0065d");return _cffd ;};func (_cfbd rulingList )sortStrict (){_c .Slice (_cfbd ,func (_ddddc ,_ccdd int )bool {_geace ,_cbbg :=_cfbd [_ddddc ],_cfbd [_ccdd ];_bbgg ,_abed :=_geace ._cbabg ,_cbbg ._cbabg ;
if _bbgg !=_abed {return _bbgg > _abed ;};_gcee ,_gcgd :=_geace ._fbaf ,_cbbg ._fbaf ;if !_abbae (_gcee -_gcgd ){return _gcee < _gcgd ;};_gcee ,_gcgd =_geace ._ccfd ,_cbbg ._ccfd ;if _gcee !=_gcgd {return _gcee < _gcgd ;};return _geace ._fbaca < _cbbg ._fbaca ;
});};func (_cde *textObject )setTextLeading (_bfec float64 ){if _cde ==nil {return ;};_cde ._gcdgg ._bag =_bfec ;};func (_cbac *textObject )nextLine (){_cbac .moveLP (0,-_cbac ._gcdgg ._bag )};func _decb (_cafdc []*textLine )map[float64 ][]*textLine {_c .Slice (_cafdc ,func (_afge ,_dfdd int )bool {return _cafdc [_afge ]._dfbc < _cafdc [_dfdd ]._dfbc });
_begc :=map[float64 ][]*textLine {};for _ ,_eegb :=range _cafdc {_dbcg :=_befb (_eegb );_dbcg =_bb .Round (_dbcg );_begc [_dbcg ]=append (_begc [_dbcg ],_eegb );};return _begc ;};func _edcbd (_gedaf float64 )float64 {return _edca *_bb .Round (_gedaf /_edca )};
func (_eedfa *structTreeRoot )parseStructTreeRoot (_bgab _ga .PdfObject ){if _bgab !=nil {_cdg ,_acdcf :=_ga .GetDict (_bgab );if !_acdcf {_bbc .Log .Debug ("\u0070\u0061\u0072s\u0065\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u003a\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u006eo\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");
};K :=_cdg .Get ("\u004b");_dfbca :=_cdg .Get ("\u0054\u0079\u0070\u0065").String ();var _aada *_ga .PdfObjectArray ;switch _faaf :=K .(type ){case *_ga .PdfObjectArray :_aada =_faaf ;case *_ga .PdfObjectReference :_aada =_ga .MakeArray (K );};_edeb :=[]structElement {};
for _ ,_fgaaf :=range _aada .Elements (){_bggbc :=&structElement {};_bggbc .parseStructElement (_fgaaf );_edeb =append (_edeb ,*_bggbc );};_eedfa ._cfgg =_edeb ;_eedfa ._dggbg =_dfbca ;};};func _cgag (_feebd []*textMark ,_eeaa _da .PdfRectangle ,_ecba rulingList ,_bcc []gridTiling ,_ceeb bool )paraList {_bbc .Log .Trace ("\u006d\u0061\u006b\u0065\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065\u003a \u0025\u0064\u0020\u0065\u006c\u0065m\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065=\u0025\u002e\u0032\u0066",len (_feebd ),_eeaa );
if len (_feebd )==0{return nil ;};_edbf :=_fccaa (_feebd ,_eeaa );if len (_edbf )==0{return nil ;};_ecba .log ("\u006d\u0061\u006be\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065");_bbea ,_bfdd :=_ecba .vertsHorzs ();_ggfdc :=_ffga (_edbf ,_eeaa .Ury ,_bbea ,_bfdd );
_gebad :=_fgddc (_ggfdc ,_eeaa .Ury ,_bbea ,_bfdd );_gebad =_egfd (_gebad );_afgc :=make (paraList ,0,len (_gebad ));for _ ,_bfgdg :=range _gebad {_ccba :=_bfgdg .arrangeText ();if _ccba !=nil {_afgc =append (_afgc ,_ccba );};};if !_ceeb &&len (_afgc )>=_dbda {_afgc =_afgc .extractTables (_bcc );
};_afgc .sortReadingOrder ();if !_ceeb {_afgc .sortTopoOrder ();};_afgc .log ("\u0073\u006f\u0072te\u0064\u0020\u0069\u006e\u0020\u0072\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u006f\u0072\u0064\u0065\u0072");return _afgc ;};func (_aagc *textLine )bbox ()_da .PdfRectangle {return _aagc .PdfRectangle };
func (_fcfe *wordBag )blocked (_bafa *textWord )bool {if _bafa .Urx < _fcfe .Llx {_fgga :=_adaa (_bafa .PdfRectangle );_cafd :=_bdgb (_fcfe .PdfRectangle );if _fcfe ._ddad .blocks (_fgga ,_cafd ){if _dabd {_bbc .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0078\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_bafa ,_fcfe );
};return true ;};}else if _fcfe .Urx < _bafa .Llx {_affc :=_adaa (_fcfe .PdfRectangle );_adadd :=_bdgb (_bafa .PdfRectangle );if _fcfe ._ddad .blocks (_affc ,_adadd ){if _dabd {_bbc .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0078\u2192\u0020:\u0020\u0025\u0073\u0020%s",_bafa ,_fcfe );
};return true ;};};if _bafa .Ury < _fcfe .Lly {_cdcc :=_cceef (_bafa .PdfRectangle );_gagbd :=_gggb (_fcfe .PdfRectangle );if _fcfe ._dfgb .blocks (_cdcc ,_gagbd ){if _dabd {_bbc .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0079\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_bafa ,_fcfe );
};return true ;};}else if _fcfe .Ury < _bafa .Lly {_eebf :=_cceef (_fcfe .PdfRectangle );_cbe :=_gggb (_bafa .PdfRectangle );if _fcfe ._dfgb .blocks (_eebf ,_cbe ){if _dabd {_bbc .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0079\u2192\u0020:\u0020\u0025\u0073\u0020%s",_bafa ,_fcfe );
};return true ;};};return false ;};func (_bcaed gridTile )numBorders ()int {_cggfde :=0;if _bcaed ._abagd {_cggfde ++;};if _bcaed ._bagb {_cggfde ++;};if _bcaed ._cfad {_cggfde ++;};if _bcaed ._ddcc {_cggfde ++;};return _cggfde ;};func (_dedd *textTable )emptyCompositeColumn (_faad int )bool {for _edgec :=0;
_edgec < _dedd ._feaf ;_edgec ++{if _gddd ,_faga :=_dedd ._bcfe [_dfabe (_faad ,_edgec )];_faga {if len (_gddd .paraList )> 0{return false ;};};};return true ;};

// Elements returns the TextMarks in `ma`.
func (_afccc *TextMarkArray )Elements ()[]TextMark {return _afccc ._cggca };func _gbde (_efcc ,_gcge bounded )float64 {return _efcc .bbox ().Llx -_gcge .bbox ().Urx };func (_ceadf *textTable )get (_afgg ,_gdfdcc int )*textPara {return _ceadf ._cffda [_dfabe (_afgg ,_gdfdcc )];
};func (_ggdd paraList )findTables (_fdbe []gridTiling )[]*textTable {_ggdd .addNeighbours ();_c .Slice (_ggdd ,func (_aaeddc ,_baag int )bool {return _dbdg (_ggdd [_aaeddc ],_ggdd [_baag ])< 0});var _gfbeba []*textTable ;if _adbdf {_gbcgg :=_ggdd .findGridTables (_fdbe );
_gfbeba =append (_gfbeba ,_gbcgg ...);};if _bee {_geedg :=_ggdd .findTextTables ();_gfbeba =append (_gfbeba ,_geedg ...);};return _gfbeba ;};type lists []*list ;var _dgcd =[]string {"\u2756","\u27a2","\u2713","\u2022","\uf0a7","\u25a1","\u2212","\u25a0","\u25aa","\u006f"};
type gridTiling struct{_da .PdfRectangle ;_cbedc []float64 ;_aggcf []float64 ;_gaee map[float64 ]map[float64 ]gridTile ;};

// List returns all the list objects detected on the page.
// It detects all the bullet point Lists from a given pdf page and builds a slice of bullet list objects.
// A given bullet list object has a tree structure.
// Each bullet point list is extracted with the text content it contains and all the sub lists found under it as children in the tree.
// The rest content of the pdf is ignored and only text in the bullet point lists are extracted.
// The list extraction is done in two ways.
// 1. If the document is tagged then the lists are extracted using the tags provided in the document.
// 2. Otherwise the bullet lists are extracted from the raw text using regex matching.
// By default the document tag is used if available.
// However this can be disabled using `DisableDocumentTags` in the `Options` object.
// Sometimes disabling document tags option might give a better bullet list extraction if the document was tagged incorrectly.
//
//	    options := &Options{
//		     DisableDocumentTags: false, // this means use document tag if available
//	    }
//	    ex, err := NewWithOptions(page, options)
//	    // handle error
//	    pageText, _, _, err := ex.ExtractPageText()
//	    // handle error
//	    lists := pageText.List()
//	    txt := lists.Text()
func (_cfea PageText )List ()lists {_cfaaa :=!_cfea ._dfee ._bbgaf ;_cgee :=_cfea .getParagraphs ();_gfdd :=true ;if _cfea ._bded ==nil ||*_cfea ._bded ==nil {_gfdd =false ;};_bega :=_cgee .list ();if _gfdd &&_cfaaa {_gdcb :=_cgfgg (&_cgee );_dgdc :=&structTreeRoot {};
_dgdc .parseStructTreeRoot (*_cfea ._bded );if _dgdc ._cfgg ==nil {_bbc .Log .Debug ("\u004c\u0069\u0073\u0074\u003a\u0020\u0073t\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e'\u0074\u0020\u0068\u0061\u0076e\u0020\u0061\u006e\u0079\u0020\u0063\u006f\u006e\u0074e\u006e\u0074\u002c\u0020\u0075\u0073\u0069\u006e\u0067\u0020\u0074\u0065\u0078\u0074\u0020\u006d\u0061\u0074\u0063\u0068\u0069\u006e\u0067\u0020\u006d\u0065\u0074\u0068\u006f\u0064\u0020\u0069\u006e\u0073\u0074\u0065\u0061\u0064\u002e");
return _bega ;};_bega =_dgdc .buildList (_gdcb ,_cfea ._gcbg );};return _bega ;};func (_cdba *wordBag )applyRemovals (_ecb map[int ]map[*textWord ]struct{}){for _gcac ,_gaef :=range _ecb {if len (_gaef )==0{continue ;};_ggbd :=_cdba ._ggadg [_gcac ];_dbcd :=len (_ggbd )-len (_gaef );
if _dbcd ==0{delete (_cdba ._ggadg ,_gcac );continue ;};_dfeeb :=make ([]*textWord ,_dbcd );_eccf :=0;for _ ,_ggcc :=range _ggbd {if _ ,_baga :=_gaef [_ggcc ];!_baga {_dfeeb [_eccf ]=_ggcc ;_eccf ++;};};_cdba ._ggadg [_gcac ]=_dfeeb ;};};type pathSection struct{_febc []*subpath ;
_a .Color ;};func (_bac *imageExtractContext )extractXObjectImage (_dea *_ga .PdfObjectName ,_fcf _eae .GraphicsState ,_ebe *_da .PdfPageResources )error {_gcd ,_ :=_ebe .GetXObjectByName (*_dea );if _gcd ==nil {return nil ;};_gee ,_fce :=_bac ._gcf [_gcd ];
if !_fce {_gge ,_cec :=_ebe .GetXObjectImageByName (*_dea );if _cec !=nil {return _cec ;};if _gge ==nil {return nil ;};_fbac ,_cec :=_gge .ToImage ();if _cec !=nil {return _cec ;};var _bec _ab .Image ;if _gge .Mask !=nil {if _bec ,_cec =_dadbf (_gge .Mask ,_a .Opaque );
_cec !=nil {_bbc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a \u0063\u006f\u0075\u006c\u0064 \u006eo\u0074\u0020\u0067\u0065\u0074\u0020\u0065\u0078\u0070\u006c\u0069\u0063\u0069\u0074\u0020\u0069\u006d\u0061\u0067e\u0020\u006d\u0061\u0073\u006b\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e");
};}else if _gge .SMask !=nil {_bec ,_cec =_cfga (_gge .SMask ,_a .Opaque );if _cec !=nil {_bbc .Log .Debug ("W\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0067\u0065\u0074\u0020\u0073\u006f\u0066\u0074\u0020\u0069\u006da\u0067e\u0020\u006d\u0061\u0073k\u002e\u0020O\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u002e");
};};if _bec !=nil {_adb ,_baca :=_fbac .ToGoImage ();if _baca !=nil {return _baca ;};_adb =_fbca (_adb ,_bec );switch _gge .ColorSpace .String (){case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0049n\u0064\u0065\u0078\u0065\u0064":_fbac ,_baca =_da .ImageHandling .NewGrayImageFromGoImage (_adb );
if _baca !=nil {return _baca ;};default:_fbac ,_baca =_da .ImageHandling .NewImageFromGoImage (_adb );if _baca !=nil {return _baca ;};};};_gee =&cachedImage {_cc :_fbac ,_gafd :_gge .ColorSpace };_bac ._gcf [_gcd ]=_gee ;};_bda :=_gee ._cc ;_eee :=_gee ._gafd ;
_fca ,_eedb :=_eee .ImageToRGB (*_bda );if _eedb !=nil {return _eedb ;};_bbc .Log .Debug ("@\u0044\u006f\u0020\u0043\u0054\u004d\u003a\u0020\u0025\u0073",_fcf .CTM .String ());_ecd :=ImageMark {Image :&_fca ,Width :_fcf .CTM .ScalingFactorX (),Height :_fcf .CTM .ScalingFactorY (),Angle :_fcf .CTM .Angle ()};
_ecd .X ,_ecd .Y =_fcf .CTM .Translation ();_bac ._ffe =append (_bac ._ffe ,_ecd );_bac ._cge ++;return nil ;};func (_dfad *subpath )makeRectRuling (_efbe _a .Color )(*ruling ,bool ){if _adbf {_bbc .Log .Info ("\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0070\u0061\u0074\u0068\u003d\u0025\u0076",_dfad );
};_fgcc :=_dfad ._fbed [:4];_bfac :=make (map[int ]rulingKind ,len (_fgcc ));for _fcbb ,_afce :=range _fgcc {_ggacb :=_dfad ._fbed [(_fcbb +1)%4];_bfac [_fcbb ]=_aagaa (_afce ,_ggacb );if _adbf {_eb .Printf ("\u0025\u0034\u0064: \u0025\u0073\u0020\u003d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066",_fcbb ,_bfac [_fcbb ],_afce ,_ggacb );
};};if _adbf {_eb .Printf ("\u0020\u0020\u0020\u006b\u0069\u006e\u0064\u0073\u003d\u0025\u002b\u0076\u000a",_bfac );};var _gacb ,_cecgb []int ;for _eafd ,_aceb :=range _bfac {switch _aceb {case _edff :_cecgb =append (_cecgb ,_eafd );case _eabff :_gacb =append (_gacb ,_eafd );
};};if _adbf {_eb .Printf ("\u0020\u0020 \u0068\u006f\u0072z\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_cecgb ),_cecgb );_eb .Printf ("\u0020\u0020 \u0076\u0065\u0072t\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_gacb ),_gacb );
};_eeaf :=(len (_cecgb )==2&&len (_gacb )==2)||(len (_cecgb )==2&&len (_gacb )==0&&_dggfbf (_fgcc [_cecgb [0]],_fgcc [_cecgb [1]]))||(len (_gacb )==2&&len (_cecgb )==0&&_aaedb (_fgcc [_gacb [0]],_fgcc [_gacb [1]]));if _adbf {_eb .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_cecgb ),len (_gacb ),_eeaf );
};if !_eeaf {if _adbf {_bbc .Log .Error ("\u0021!\u006d\u0061\u006b\u0065R\u0065\u0063\u0074\u0052\u0075l\u0069n\u0067:\u0020\u0070\u0061\u0074\u0068\u003d\u0025v",_dfad );_eb .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_cecgb ),len (_gacb ),_eeaf );
};return &ruling {},false ;};if len (_gacb )==0{for _gcfa ,_edbfd :=range _bfac {if _edbfd !=_edff {_gacb =append (_gacb ,_gcfa );};};};if len (_cecgb )==0{for _dgfab ,_dccde :=range _bfac {if _dccde !=_eabff {_cecgb =append (_cecgb ,_dgfab );};};};if _adbf {_bbc .Log .Info ("\u006da\u006b\u0065R\u0065\u0063\u0074\u0052u\u006c\u0069\u006eg\u003a\u0020\u0068\u006f\u0072\u007a\u0073\u003d\u0025d \u0076\u0065\u0072t\u0073\u003d%\u0064\u0020\u0070\u006f\u0069\u006et\u0073\u003d%\u0064\u000a"+"\u0009\u0020\u0068o\u0072\u007a\u0073\u003d\u0025\u002b\u0076\u000a"+"\u0009\u0020\u0076e\u0072\u0074\u0073\u003d\u0025\u002b\u0076\u000a"+"\t\u0070\u006f\u0069\u006e\u0074\u0073\u003d\u0025\u002b\u0076",len (_cecgb ),len (_gacb ),len (_fgcc ),_cecgb ,_gacb ,_fgcc );
};var _bbeab ,_cded ,_fafee ,_agfde _ge .Point ;if _fgcc [_cecgb [0]].Y > _fgcc [_cecgb [1]].Y {_fafee ,_agfde =_fgcc [_cecgb [0]],_fgcc [_cecgb [1]];}else {_fafee ,_agfde =_fgcc [_cecgb [1]],_fgcc [_cecgb [0]];};if _fgcc [_gacb [0]].X > _fgcc [_gacb [1]].X {_bbeab ,_cded =_fgcc [_gacb [0]],_fgcc [_gacb [1]];
}else {_bbeab ,_cded =_fgcc [_gacb [1]],_fgcc [_gacb [0]];};_acfdb :=_da .PdfRectangle {Llx :_bbeab .X ,Urx :_cded .X ,Lly :_agfde .Y ,Ury :_fafee .Y };if _acfdb .Llx > _acfdb .Urx {_acfdb .Llx ,_acfdb .Urx =_acfdb .Urx ,_acfdb .Llx ;};if _acfdb .Lly > _acfdb .Ury {_acfdb .Lly ,_acfdb .Ury =_acfdb .Ury ,_acfdb .Lly ;
};_abae :=rectRuling {PdfRectangle :_acfdb ,_fgbg :_aegf (_acfdb ),Color :_efbe };if _abae ._fgbg ==_caca {if _adbf {_bbc .Log .Error ("\u006da\u006b\u0065\u0052\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006eg\u003a\u0020\u006b\u0069\u006e\u0064\u003d\u006e\u0069\u006c");
};return nil ,false ;};_ceee ,_agcb :=_abae .asRuling ();if !_agcb {if _adbf {_bbc .Log .Error ("\u006da\u006b\u0065\u0052\u0065c\u0074\u0052\u0075\u006c\u0069n\u0067:\u0020!\u0069\u0073\u0052\u0075\u006c\u0069\u006eg");};return nil ,false ;};if _eggfb {_eb .Printf ("\u0020\u0020\u0020\u0072\u003d\u0025\u0073\u000a",_ceee .String ());
};return _ceee ,true ;};func (_gcaeb *textPara )taken ()bool {return _gcaeb ==nil ||_gcaeb ._bdec };

// String returns a description of `tm`.
func (_dafg *textMark )String ()string {return _eb .Sprintf ("\u0025\u002e\u0032f \u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\u0022\u0025\u0073\u0022",_dafg .PdfRectangle ,_dafg ._feag ,_dafg ._fgbe );};func (_dbggaa intSet )del (_gfgg int ){delete (_dbggaa ,_gfgg )};


// Extractor stores and offers functionality for extracting content from PDF pages.
type Extractor struct{_ff string ;_gcg *_da .PdfPageResources ;_fga _da .PdfRectangle ;_fc *_da .PdfRectangle ;_ad map[string ]fontEntry ;_bae map[string ]textResult ;_db map[string ]textResult ;_ec int64 ;_gf int ;_fa *Options ;_ecc *_ga .PdfObject ;_fb _ga .PdfObject ;
_geb []*_da .PdfAnnotation ;};

// TableCell is a cell in a TextTable.
type TableCell struct{_da .PdfRectangle ;

// Text is the extracted text.
Text string ;

// Marks returns the TextMarks corresponding to the text in Text.
Marks TextMarkArray ;};func (_bgdgfg paraList )xNeighbours (_aadae float64 )map[*textPara ][]int {_dgccf :=make ([]event ,2*len (_bgdgfg ));if _aadae ==0{for _dadgg ,_ggbcc :=range _bgdgfg {_dgccf [2*_dadgg ]=event {_ggbcc .Llx ,true ,_dadgg };_dgccf [2*_dadgg +1]=event {_ggbcc .Urx ,false ,_dadgg };
};}else {for _ffeeg ,_ecca :=range _bgdgfg {_dgccf [2*_ffeeg ]=event {_ecca .Llx -_aadae *_ecca .fontsize (),true ,_ffeeg };_dgccf [2*_ffeeg +1]=event {_ecca .Urx +_aadae *_ecca .fontsize (),false ,_ffeeg };};};return _bgdgfg .eventNeighbours (_dgccf );
};const (_bbgd =1.0e-6;_edca =1.0e-4;_bfabd =10;_cbbdd =6;_ebdg =0.5;_feeg =0.12;_deeg =0.19;_cbec =0.04;_deac =0.04;_bbeg =1.0;_afeb =0.04;_faag =0.4;_fcaa =0.7;_dced =1.0;_abbbe =0.1;_fdca =1.4;_gdgc =0.46;_gfbd =0.02;_bbeb =0.2;_gfd =0.5;_edac =4;_dfgg =4.0;
_dbda =6;_gfda =0.3;_bfcc =0.01;_fbg =0.02;_ggdca =2;_agfe =2;_gcgf =500;_ggge =4.0;_eege =4.0;_dfc =0.05;_baba =0.1;_acfe =2.0;_acda =2.0;_fcaaf =1.5;_geeb =3.0;_feeb =0.25;);func _adcf (_ede _ge .Matrix )_ge .Point {_gcdb ,_gdce :=_ede .Translation ();
return _ge .Point {X :_gcdb ,Y :_gdce };};func (_cccbe *textTable )logComposite (_ebfce string ){if !_ffbd {return ;};_bbc .Log .Info ("\u007e~\u007eP\u0061\u0072\u0061\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_cccbe ._dabeb ,_cccbe ._feaf ,_ebfce );
_eb .Printf ("\u0025\u0035\u0073 \u007c","");for _agdbc :=0;_agdbc < _cccbe ._dabeb ;_agdbc ++{_eb .Printf ("\u0025\u0033\u0064 \u007c",_agdbc );};_eb .Println ("");_eb .Printf ("\u0025\u0035\u0073 \u002b","");for _aadc :=0;_aadc < _cccbe ._dabeb ;_aadc ++{_eb .Printf ("\u0025\u0033\u0073 \u002b","\u002d\u002d\u002d");
};_eb .Println ("");for _bggdcf :=0;_bggdcf < _cccbe ._feaf ;_bggdcf ++{_eb .Printf ("\u0025\u0035\u0064 \u007c",_bggdcf );for _afdea :=0;_afdea < _cccbe ._dabeb ;_afdea ++{_afgeg ,_ :=_cccbe ._bcfe [_dfabe (_afdea ,_bggdcf )].parasBBox ();_eb .Printf ("\u0025\u0033\u0064 \u007c",len (_afgeg ));
};_eb .Println ("");};_bbc .Log .Info ("\u007e~\u007eT\u0065\u0078\u0074\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_cccbe ._dabeb ,_cccbe ._feaf ,_ebfce );_eb .Printf ("\u0025\u0035\u0073 \u007c","");for _gbbcd :=0;_gbbcd < _cccbe ._dabeb ;
_gbbcd ++{_eb .Printf ("\u0025\u0031\u0032\u0064\u0020\u007c",_gbbcd );};_eb .Println ("");_eb .Printf ("\u0025\u0035\u0073 \u002b","");for _gbcc :=0;_gbcc < _cccbe ._dabeb ;_gbcc ++{_eb .Print ("\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d-\u002d\u002d\u002d\u002b");
};_eb .Println ("");for _caeec :=0;_caeec < _cccbe ._feaf ;_caeec ++{_eb .Printf ("\u0025\u0035\u0064 \u007c",_caeec );for _gdfdcd :=0;_gdfdcd < _cccbe ._dabeb ;_gdfdcd ++{_bgbfe ,_ :=_cccbe ._bcfe [_dfabe (_gdfdcd ,_caeec )].parasBBox ();_bgafe :="";_adec :=_bgbfe .merge ();
if _adec !=nil {_bgafe =_adec .text ();};_bgafe =_eb .Sprintf ("\u0025\u0071",_febcc (_bgafe ,12));_bgafe =_bgafe [1:len (_bgafe )-1];_eb .Printf ("\u0025\u0031\u0032\u0073\u0020\u007c",_bgafe );};_eb .Println ("");};};func _bc (_ggg []Font ,_cf string )bool {for _ ,_bcd :=range _ggg {if _bcd .FontName ==_cf {return true ;
};};return false ;};func (_cdfae *textTable )compositeColCorridors ()map[int ][]float64 {_aafae :=make (map[int ][]float64 ,_cdfae ._dabeb );if _ffbd {_bbc .Log .Info ("\u0063\u006f\u006d\u0070o\u0073\u0069\u0074\u0065\u0043\u006f\u006c\u0043\u006f\u0072r\u0069d\u006f\u0072\u0073\u003a\u0020\u0077\u003d%\u0064\u0020",_cdfae ._dabeb );
};for _gdca :=0;_gdca < _cdfae ._dabeb ;_gdca ++{_aafae [_gdca ]=nil ;};return _aafae ;};func (_edbff *textPara )depth ()float64 {if _edbff ._bfgf {return -1.0;};if len (_edbff ._acgga )> 0{return _edbff ._acgga [0]._dfbc ;};return _edbff ._bgde .depth ();
};

// NewFromContents creates a new extractor from contents and page resources.
func NewFromContents (contents string ,resources *_da .PdfPageResources )(*Extractor ,error ){const _fe ="\u0065x\u0074\u0072\u0061\u0063t\u006f\u0072\u002e\u004e\u0065w\u0046r\u006fm\u0043\u006f\u006e\u0074\u0065\u006e\u0074s";_adg :=&Extractor {_ff :contents ,_gcg :resources ,_ad :map[string ]fontEntry {},_bae :map[string ]textResult {}};
_ag .TrackUse (_fe );return _adg ,nil ;};const _dag =20;func _fccg (_efege []TextMark ,_cgcg *int ,_bggd string )[]TextMark {_fdeeg :=_ccf ;_fdeeg .Text =_bggd ;return _aeac (_efege ,_cgcg ,_fdeeg );};func (_deda lineRuling )yMean ()float64 {return 0.5*(_deda ._gdcfa .Y +_deda ._geed .Y )};
func (_bcda *textObject )setCharSpacing (_gbbg float64 ){if _bcda ==nil {return ;};_bcda ._gcdgg ._dbe =_gbbg ;if _ebecb {_bbc .Log .Info ("\u0073\u0065t\u0043\u0068\u0061\u0072\u0053\u0070\u0061\u0063\u0069\u006e\u0067\u003a\u0020\u0025\u002e\u0032\u0066\u0020\u0073\u0074\u0061\u0074e=\u0025\u0073",_gbbg ,_bcda ._gcdgg .String ());
};};func (_abab *textPara )getListLines ()[]*textLine {var _egcda []*textLine ;_dbfb :=_cedg (_abab ._acgga );for _ ,_ceba :=range _abab ._acgga {_cbgg :=_ceba ._ffaf [0]._aefg [0];if _gfee (_cbgg ){_egcda =append (_egcda ,_ceba );};};_egcda =append (_egcda ,_dbfb ...);
return _egcda ;};func (_aggf paraList )writeText (_ffcce _f .Writer ){for _fgaae ,_baedd :=range _aggf {if _baedd ._bfgf {continue ;};_baedd .writeText (_ffcce );if _fgaae !=len (_aggf )-1{if _gabd (_baedd ,_aggf [_fgaae +1]){_ffcce .Write ([]byte ("\u0020"));
}else {_ffcce .Write ([]byte ("\u000a"));_ffcce .Write ([]byte ("\u000a"));};};};_ffcce .Write ([]byte ("\u000a"));_ffcce .Write ([]byte ("\u000a"));};func _fgacd (_gdge *list ,_abea *_fg .Builder ,_ffdf *string ){_debac :=_dbee (_gdge ,_ffdf );_abea .WriteString (_debac );
for _ ,_efgad :=range _gdge ._afbc {_fccae :=*_ffdf +"\u0020\u0020\u0020";_fgacd (_efgad ,_abea ,&_fccae );};};type fontEntry struct{_cefea *_da .PdfFont ;_gcbe int64 ;};func _dgaee (_cbeg []TextMark ,_dffee *int )[]TextMark {_gecd :=_cbeg [len (_cbeg )-1];
_agfb :=[]rune (_gecd .Text );if len (_agfb )==1{_cbeg =_cbeg [:len (_cbeg )-1];_dbea :=_cbeg [len (_cbeg )-1];*_dffee =_dbea .Offset +len (_dbea .Text );}else {_ffag :=_fbcg (_gecd .Text );*_dffee +=len (_ffag )-len (_gecd .Text );_gecd .Text =_ffag ;
};return _cbeg ;};const (_bgec =true ;_cgace =true ;_dgde =true ;_bgda =false ;_gegd =false ;_gfe =6;_caga =3.0;_feede =200;_adbdf =true ;_bee =true ;_dgac =true ;_dgdeg =true ;_bcdd =false ;);func (_ddba *subpath )add (_bfgd ..._ge .Point ){_ddba ._fbed =append (_ddba ._fbed ,_bfgd ...)};
func (_eecf *wordBag )pullWord (_ggca *textWord ,_efgf int ,_fge map[int ]map[*textWord ]struct{}){_eecf .PdfRectangle =_bafg (_eecf .PdfRectangle ,_ggca .PdfRectangle );if _ggca ._fabac > _eecf ._aaf {_eecf ._aaf =_ggca ._fabac ;};_eecf ._ggadg [_efgf ]=append (_eecf ._ggadg [_efgf ],_ggca );
_fge [_efgf ][_ggca ]=struct{}{};};func _afcfb (_beccc []_ga .PdfObject )(_bcfg ,_bfbg float64 ,_abccd error ){if len (_beccc )!=2{return 0,0,_eb .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020o\u0066 \u0070\u0061\u0072\u0061\u006d\u0073\u003a \u0025\u0064",len (_beccc ));
};_fgfff ,_abccd :=_ga .GetNumbersAsFloat (_beccc );if _abccd !=nil {return 0,0,_abccd ;};return _fgfff [0],_fgfff [1],nil ;};

// Text returns the text content of the `bulletLists`.
func (_bfba *lists )Text ()string {_fgac :=&_fg .Builder {};for _ ,_bcgd :=range *_bfba {_fdfg :=_bcgd .Text ();_fgac .WriteString (_fdfg );};return _fgac .String ();};func (_cff *wordBag )text ()string {_gagg :=_cff .allWords ();_gbee :=make ([]string ,len (_gagg ));
for _fcfd ,_aecd :=range _gagg {_gbee [_fcfd ]=_aecd ._aefg ;};return _fg .Join (_gbee ,"\u0020");};func (_ebgc *PageText )computeViews (){_agaf :=_ebgc .getParagraphs ();_bcga :=new (_ba .Buffer );_agaf .writeText (_bcga );_ebgc ._gfc =_bcga .String ();
_ebgc ._bdeef =_agaf .toTextMarks ();_ebgc ._fda =_agaf .tables ();if _ffbd {_bbc .Log .Info ("\u0063\u006f\u006dpu\u0074\u0065\u0056\u0069\u0065\u0077\u0073\u003a\u0020\u0074\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064",len (_ebgc ._fda ));};};

// String returns a human readable description of `s`.
func (_dfffa intSet )String ()string {var _dbggb []int ;for _geaaf :=range _dfffa {if _dfffa .has (_geaaf ){_dbggb =append (_dbggb ,_geaaf );};};_c .Ints (_dbggb );return _eb .Sprintf ("\u0025\u002b\u0076",_dbggb );};func _accfc (_gbac *wordBag ,_cfg *textWord ,_egdd float64 )bool {return _cfg .Llx < _gbac .Urx +_egdd &&_gbac .Llx -_egdd < _cfg .Urx ;
};

// TextTable represents a table.
// Cells are ordered top-to-bottom, left-to-right.
// Cells[y] is the (0-offset) y'th row in the table.
// Cells[y][x] is the (0-offset) x'th column in the table.
type TextTable struct{_da .PdfRectangle ;W ,H int ;Cells [][]TableCell ;};func _dadb (_degd _da .PdfRectangle ,_cceg []*textLine )*textPara {return &textPara {PdfRectangle :_degd ,_acgga :_cceg };};func (_ddc *wordBag )depthBand (_aaab ,_aece float64 )[]int {if len (_ddc ._ggadg )==0{return nil ;
};return _ddc .depthRange (_ddc .getDepthIdx (_aaab ),_ddc .getDepthIdx (_aece ));};func (_fabdb paraList )log (_bbgad string ){if !_fbag {return ;};_bbc .Log .Info ("%\u0038\u0073\u003a\u0020\u0025\u0064 \u0070\u0061\u0072\u0061\u0073\u0020=\u003d\u003d\u003d\u003d\u003d\u003d\u002d-\u002d\u002d\u002d\u002d\u002d\u003d\u003d\u003d\u003d\u003d=\u003d",_bbgad ,len (_fabdb ));
for _ccffa ,_ddee :=range _fabdb {if _ddee ==nil {continue ;};_beda :=_ddee .text ();_dgabf :="\u0020\u0020";if _ddee ._bgde !=nil {_dgabf =_eb .Sprintf ("\u005b%\u0064\u0078\u0025\u0064\u005d",_ddee ._bgde ._dabeb ,_ddee ._bgde ._feaf );};_eb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0025s\u0020\u0025\u0071\u000a",_ccffa ,_ddee .PdfRectangle ,_dgabf ,_febcc (_beda ,50));
};};

// String returns a human readable description of `path`.
func (_bdgf *subpath )String ()string {_afbb :=_bdgf ._fbed ;_ccdce :=len (_afbb );if _ccdce <=5{return _eb .Sprintf ("\u0025d\u003a\u0020\u0025\u0036\u002e\u0032f",_ccdce ,_afbb );};return _eb .Sprintf ("\u0025d\u003a\u0020\u0025\u0036.\u0032\u0066\u0020\u0025\u0036.\u0032f\u0020.\u002e\u002e\u0020\u0025\u0036\u002e\u0032f",_ccdce ,_afbb [0],_afbb [1],_afbb [_ccdce -1]);
};func (_ggbee *wordBag )removeDuplicates (){if _gcfeb {_bbc .Log .Info ("r\u0065m\u006f\u0076\u0065\u0044\u0075\u0070\u006c\u0069c\u0061\u0074\u0065\u0073: \u0025\u0071",_ggbee .text ());};for _ ,_fggab :=range _ggbee .depthIndexes (){if len (_ggbee ._ggadg [_fggab ])==0{continue ;
};_dbbbd :=_ggbee ._ggadg [_fggab ][0];_dbgg :=_bbeb *_dbbbd ._fabac ;_cggg :=_dbbbd ._ecdfc ;for _ ,_fdcbe :=range _ggbee .depthBand (_cggg ,_cggg +_dbgg ){_ggeb :=map[*textWord ]struct{}{};_bddcb :=_ggbee ._ggadg [_fdcbe ];for _ ,_cbag :=range _bddcb {if _ ,_dded :=_ggeb [_cbag ];
_dded {continue ;};for _ ,_egcag :=range _bddcb {if _ ,_fdad :=_ggeb [_egcag ];_fdad {continue ;};if _egcag !=_cbag &&_egcag ._aefg ==_cbag ._aefg &&_bb .Abs (_egcag .Llx -_cbag .Llx )< _dbgg &&_bb .Abs (_egcag .Urx -_cbag .Urx )< _dbgg &&_bb .Abs (_egcag .Lly -_cbag .Lly )< _dbgg &&_bb .Abs (_egcag .Ury -_cbag .Ury )< _dbgg {_ggeb [_egcag ]=struct{}{};
};};};if len (_ggeb )> 0{_aebg :=0;for _ ,_fbda :=range _bddcb {if _ ,_cdbf :=_ggeb [_fbda ];!_cdbf {_bddcb [_aebg ]=_fbda ;_aebg ++;};};_ggbee ._ggadg [_fdcbe ]=_bddcb [:len (_bddcb )-len (_ggeb )];if len (_ggbee ._ggadg [_fdcbe ])==0{delete (_ggbee ._ggadg ,_fdcbe );
};};};};};func _gdffg (_cceeg []float64 ,_egfa ,_eagbg float64 )[]float64 {_cfaed ,_ccfb :=_egfa ,_eagbg ;if _ccfb < _cfaed {_cfaed ,_ccfb =_ccfb ,_cfaed ;};_ffgcba :=make ([]float64 ,0,len (_cceeg )+2);_ffgcba =append (_ffgcba ,_egfa );for _ ,_abaf :=range _cceeg {if _abaf <=_cfaed {continue ;
}else if _abaf >=_ccfb {break ;};_ffgcba =append (_ffgcba ,_abaf );};_ffgcba =append (_ffgcba ,_eagbg );return _ffgcba ;};func _aedf (_ebcdef ,_daca _ge .Point )rulingKind {_edafd :=_bb .Abs (_ebcdef .X -_daca .X );_bffa :=_bb .Abs (_ebcdef .Y -_daca .Y );
return _edcbe (_edafd ,_bffa ,_ggge );};func (_gbacc compositeCell )String ()string {_dgacf :="";if len (_gbacc .paraList )> 0{_dgacf =_febcc (_gbacc .paraList .merge ().text (),50);};return _eb .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0070\u0061\u0072a\u0073\u0020\u0025\u0071",_gbacc .PdfRectangle ,len (_gbacc .paraList ),_dgacf );
};func (_gabe *textObject )getFillColor ()_a .Color {return _beag (_gabe ._gde .ColorspaceNonStroking ,_gabe ._gde .ColorNonStroking );};func (_fdde *textTable )reduceTiling (_dcee gridTiling ,_gcbd float64 )*textTable {_efdge :=make ([]int ,0,_fdde ._feaf );
_ggacc :=make ([]int ,0,_fdde ._dabeb );_effcg :=_dcee ._cbedc ;_geeg :=_dcee ._aggcf ;for _cfbdc :=0;_cfbdc < _fdde ._feaf ;_cfbdc ++{_fccd :=_cfbdc > 0&&_bb .Abs (_geeg [_cfbdc -1]-_geeg [_cfbdc ])< _gcbd &&_fdde .emptyCompositeRow (_cfbdc );if !_fccd {_efdge =append (_efdge ,_cfbdc );
};};for _bebff :=0;_bebff < _fdde ._dabeb ;_bebff ++{_cdfad :=_bebff < _fdde ._dabeb -1&&_bb .Abs (_effcg [_bebff +1]-_effcg [_bebff ])< _gcbd &&_fdde .emptyCompositeColumn (_bebff );if !_cdfad {_ggacc =append (_ggacc ,_bebff );};};if len (_efdge )==_fdde ._feaf &&len (_ggacc )==_fdde ._dabeb {return _fdde ;
};_ggcfca :=textTable {_abdfg :_fdde ._abdfg ,_dabeb :len (_ggacc ),_feaf :len (_efdge ),_bcfe :make (map[uint64 ]compositeCell ,len (_ggacc )*len (_efdge ))};if _ffbd {_bbc .Log .Info ("\u0072\u0065\u0064\u0075c\u0065\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0025d\u0078%\u0064\u0020\u002d\u003e\u0020\u0025\u0064x\u0025\u0064",_fdde ._dabeb ,_fdde ._feaf ,len (_ggacc ),len (_efdge ));
_bbc .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_ggacc );_bbc .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_efdge );};for _acagc ,_bbacf :=range _efdge {for _dccdc ,_cfce :=range _ggacc {_caec ,_ecea :=_fdde .getComposite (_cfce ,_bbacf );
if len (_caec )==0{continue ;};if _ffbd {_eb .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_dccdc ,_acagc ,_cfce ,_bbacf ,_febcc (_caec .merge ().text (),50));};_ggcfca .putComposite (_dccdc ,_acagc ,_caec ,_ecea );
};};return &_ggcfca ;};func (_gdged *textWord )absorb (_gbgg *textWord ){_gdged .PdfRectangle =_bafg (_gdged .PdfRectangle ,_gbgg .PdfRectangle );_gdged ._bbaaf =append (_gdged ._bbaaf ,_gbgg ._bbaaf ...);};func (_ddg *shapesState )clearPath (){_ddg ._gcda =nil ;
_ddg ._afe =false ;if _bfaf {_bbc .Log .Info ("\u0043\u004c\u0045A\u0052\u003a\u0020\u0073\u0073\u003d\u0025\u0073",_ddg );};};type textMark struct{_da .PdfRectangle ;_ababc int ;_fgbe string ;_agfda string ;_bfeb *_da .PdfFont ;_feag float64 ;_deaf float64 ;
_ddbg _ge .Matrix ;_efdc _ge .Point ;_eead _da .PdfRectangle ;_fgcg _a .Color ;_bfbc _a .Color ;_dagca _ga .PdfObject ;_gdcf []string ;Tw float64 ;Th float64 ;_bdac int ;_dece int ;};func (_afgf paraList )tables ()[]TextTable {var _dedb []TextTable ;if _ffbd {_bbc .Log .Info ("\u0070\u0061\u0072\u0061\u0073\u002e\u0074\u0061\u0062\u006c\u0065\u0073\u003a");
};for _ ,_fdfga :=range _afgf {_edbfa :=_fdfga ._bgde ;if _edbfa !=nil &&_edbfa .isExportable (){_dedb =append (_dedb ,_edbfa .toTextTable ());};};return _dedb ;};func (_cbfa *shapesState )quadraticTo (_eacd ,_dbbf ,_cfaa ,_gcag float64 ){if _bfaf {_bbc .Log .Info ("\u0071\u0075\u0061d\u0072\u0061\u0074\u0069\u0063\u0054\u006f\u003a");
};_cbfa .addPoint (_cfaa ,_gcag );};type shapesState struct{_gcc _ge .Matrix ;_cgfg _ge .Matrix ;_gcda []*subpath ;_afe bool ;_bcec _ge .Point ;_cefec *textObject ;};

// TextMarkArray is a collection of TextMarks.
type TextMarkArray struct{_cggca []TextMark };func (_gbded rulingList )snapToGroupsDirection ()rulingList {_gbded .sortStrict ();_bdbdf :=make (map[*ruling ]rulingList ,len (_gbded ));_bggfc :=_gbded [0];_bgcc :=func (_gdffa *ruling ){_bggfc =_gdffa ;_bdbdf [_bggfc ]=rulingList {_gdffa }};
_bgcc (_gbded [0]);for _ ,_egcf :=range _gbded [1:]{if _egcf ._fbaf < _bggfc ._fbaf -_bbgd {_bbc .Log .Error ("\u0073\u006e\u0061\u0070T\u006f\u0047\u0072\u006f\u0075\u0070\u0073\u0044\u0069r\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0057\u0072\u006f\u006e\u0067\u0020\u0070\u0072\u0069\u006da\u0072\u0079\u0020\u006f\u0072d\u0065\u0072\u002e\u000a\u0009\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0020\u0076\u003d\u0025\u0073",_bggfc ,_egcf );
};if _egcf ._fbaf > _bggfc ._fbaf +_acda {_bgcc (_egcf );}else {_bdbdf [_bggfc ]=append (_bdbdf [_bggfc ],_egcf );};};_dgedf :=make (map[*ruling ]float64 ,len (_bdbdf ));_gafg :=make (map[*ruling ]*ruling ,len (_gbded ));for _acgcd ,_bfccb :=range _bdbdf {_dgedf [_acgcd ]=_bfccb .mergePrimary ();
for _ ,_daed :=range _bfccb {_gafg [_daed ]=_acgcd ;};};for _ ,_abef :=range _gbded {_abef ._fbaf =_dgedf [_gafg [_abef ]];};_gdcg :=make (rulingList ,0,len (_gbded ));for _ ,_cebfb :=range _bdbdf {_cdfa :=_cebfb .splitSec ();for _fbdad ,_bcecd :=range _cdfa {_aebga :=_bcecd .merge ();
if len (_gdcg )> 0{_cfadc :=_gdcg [len (_gdcg )-1];if _cfadc .alignsPrimary (_aebga )&&_cfadc .alignsSec (_aebga ){_bbc .Log .Error ("\u0073\u006e\u0061\u0070\u0054\u006fG\u0072\u006f\u0075\u0070\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0044\u0075\u0070\u006ci\u0063\u0061\u0074\u0065\u0020\u0069\u003d\u0025\u0064\u000a\u0009\u0077\u003d\u0025s\u000a\t\u0076\u003d\u0025\u0073",_fbdad ,_cfadc ,_aebga );
continue ;};};_gdcg =append (_gdcg ,_aebga );};};_gdcg .sortStrict ();return _gdcg ;};

// String returns a human readable description of `vecs`.
func (_eddg rulingList )String ()string {if len (_eddg )==0{return "\u007b \u0045\u004d\u0050\u0054\u0059\u0020}";};_feab ,_agff :=_eddg .vertsHorzs ();_dcedg :=len (_feab );_fbdf :=len (_agff );if _dcedg ==0||_fbdf ==0{return _eb .Sprintf ("\u007b%\u0064\u0020\u0078\u0020\u0025\u0064}",_dcedg ,_fbdf );
};_agda :=_da .PdfRectangle {Llx :_feab [0]._fbaf ,Urx :_feab [_dcedg -1]._fbaf ,Lly :_agff [_fbdf -1]._fbaf ,Ury :_agff [0]._fbaf };return _eb .Sprintf ("\u007b\u0025d\u0020\u0078\u0020%\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u007d",_dcedg ,_fbdf ,_agda );
};func _dadbf (_bggde _ga .PdfObject ,_eccga _a .Color )(_ab .Image ,error ){_agbb ,_facgee :=_ga .GetStream (_bggde );if !_facgee {return nil ,nil ;};_fcfaf ,_febg :=_da .NewXObjectImageFromStream (_agbb );if _febg !=nil {return nil ,_febg ;};_geefg ,_febg :=_fcfaf .ToImage ();
if _febg !=nil {return nil ,_febg ;};return _fgbfg (_geefg ,_eccga ),nil ;};func (_aceg *stateStack )pop ()*textState {if _aceg .empty (){return nil ;};_ebff :=*(*_aceg )[len (*_aceg )-1];*_aceg =(*_aceg )[:len (*_aceg )-1];return &_ebff ;};func (_cddfa *textTable )reduce ()*textTable {_bfbad :=make ([]int ,0,_cddfa ._feaf );
_aafd :=make ([]int ,0,_cddfa ._dabeb );for _ededa :=0;_ededa < _cddfa ._feaf ;_ededa ++{if !_cddfa .emptyCompositeRow (_ededa ){_bfbad =append (_bfbad ,_ededa );};};for _adggf :=0;_adggf < _cddfa ._dabeb ;_adggf ++{if !_cddfa .emptyCompositeColumn (_adggf ){_aafd =append (_aafd ,_adggf );
};};if len (_bfbad )==_cddfa ._feaf &&len (_aafd )==_cddfa ._dabeb {return _cddfa ;};_bgfgf :=textTable {_abdfg :_cddfa ._abdfg ,_dabeb :len (_aafd ),_feaf :len (_bfbad ),_cffda :make (map[uint64 ]*textPara ,len (_aafd )*len (_bfbad ))};if _ffbd {_bbc .Log .Info ("\u0072\u0065\u0064\u0075ce\u003a\u0020\u0025\u0064\u0078\u0025\u0064\u0020\u002d\u003e\u0020\u0025\u0064\u0078%\u0064",_cddfa ._dabeb ,_cddfa ._feaf ,len (_aafd ),len (_bfbad ));
_bbc .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_aafd );_bbc .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_bfbad );};for _cedcda ,_efdaa :=range _bfbad {for _bdgbb ,_dfff :=range _aafd {_fafa ,_fabae :=_cddfa .getComposite (_dfff ,_efdaa );
if _fafa ==nil {continue ;};if _ffbd {_eb .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_bdgbb ,_cedcda ,_dfff ,_efdaa ,_febcc (_fafa .merge ().text (),50));};_bgfgf .putComposite (_bdgbb ,_cedcda ,_fafa ,_fabae );
};};return &_bgfgf ;};

// String returns a description of `k`.
func (_bfge markKind )String ()string {_egbe ,_caeeb :=_ebgff [_bfge ];if !_caeeb {return _eb .Sprintf ("\u004e\u006f\u0074\u0020\u0061\u0020\u006d\u0061\u0072k\u003a\u0020\u0025\u0064",_bfge );};return _egbe ;};func (_caac *textObject )getFontDict (_dcb string )(_eba _ga .PdfObject ,_caagd error ){_bdbg :=_caac ._dfg ;
if _bdbg ==nil {_bbc .Log .Debug ("g\u0065\u0074\u0046\u006f\u006e\u0074D\u0069\u0063\u0074\u002e\u0020\u004eo\u0020\u0072\u0065\u0073\u006f\u0075\u0072c\u0065\u0073\u002e\u0020\u006e\u0061\u006d\u0065\u003d\u0025#\u0071",_dcb );return nil ,nil ;};_eba ,_dfbb :=_bdbg .GetFontByName (_ga .PdfObjectName (_dcb ));
if !_dfbb {_bbc .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0067\u0065t\u0046\u006f\u006et\u0044\u0069\u0063\u0074\u003a\u0020\u0046\u006f\u006et \u006e\u006f\u0074 \u0066\u006fu\u006e\u0064\u003a\u0020\u006e\u0061m\u0065\u003d%\u0023\u0071",_dcb );
return nil ,_e .New ("f\u006f\u006e\u0074\u0020no\u0074 \u0069\u006e\u0020\u0072\u0065s\u006f\u0075\u0072\u0063\u0065\u0073");};return _eba ,nil ;};func (_gagc rulingList )primMinMax ()(float64 ,float64 ){_acdf ,_cggfd :=_gagc [0]._fbaf ,_gagc [0]._fbaf ;
for _ ,_efcgd :=range _gagc [1:]{if _efcgd ._fbaf < _acdf {_acdf =_efcgd ._fbaf ;}else if _efcgd ._fbaf > _cggfd {_cggfd =_efcgd ._fbaf ;};};return _acdf ,_cggfd ;};func _dafb (_bbbb ,_aagcc float64 )bool {return _bbbb /_bb .Max (_baba ,_aagcc )< _dfc };
func _cdgd (_bba []*textLine ,_accbe map[float64 ][]*textLine ,_agcf []float64 ,_dbde int ,_dcfc ,_bgbb float64 )[]*list {_eecd :=[]*list {};_abgf :=_dbde ;_dbde =_dbde +1;_fagc :=_agcf [_abgf ];_bcdb :=_accbe [_fagc ];_dcff :=_fbgg (_bcdb ,_bgbb ,_dcfc );
for _fecb ,_geba :=range _dcff {var _bcdg float64 ;_efdg :=[]*list {};_aeff :=_geba ._dfbc ;_fedc :=_bgbb ;if _fecb < len (_dcff )-1{_fedc =_dcff [_fecb +1]._dfbc ;};if _dbde < len (_agcf ){_efdg =_cdgd (_bba ,_accbe ,_agcf ,_dbde ,_aeff ,_fedc );};_bcdg =_fedc ;
if len (_efdg )> 0{_dfaa :=_efdg [0];if len (_dfaa ._fadc )> 0{_bcdg =_dfaa ._fadc [0]._dfbc ;};};_afagg :=[]*textLine {_geba };_gccg :=_gadad (_geba ,_bba ,_agcf ,_aeff ,_bcdg );_afagg =append (_afagg ,_gccg ...);_effc :=_dgbbe (_afagg ,"\u0062\u0075\u006c\u006c\u0065\u0074",_efdg );
_effc ._dfab =_eccg (_afagg ,"");_eecd =append (_eecd ,_effc );};return _eecd ;};

// ExtractTextWithStats works like ExtractText but returns the number of characters in the output
// (`numChars`) and the number of characters that were not decoded (`numMisses`).
func (_gbg *Extractor )ExtractTextWithStats ()(_fdf string ,_gcec int ,_dge int ,_baeg error ){_cdb ,_gcec ,_dge ,_baeg :=_gbg .ExtractPageText ();if _baeg !=nil {return "",_gcec ,_dge ,_baeg ;};return _cdb .Text (),_gcec ,_dge ,nil ;};type ruling struct{_cbabg rulingKind ;
_baef markKind ;_a .Color ;_fbaf float64 ;_ccfd float64 ;_fbaca float64 ;_gfdg float64 ;};func (_agab *shapesState )closePath (){if _agab ._afe {_agab ._gcda =append (_agab ._gcda ,_dadd (_agab ._bcec ));_agab ._afe =false ;}else if len (_agab ._gcda )==0{if _bfaf {_bbc .Log .Debug ("\u0063\u006c\u006f\u0073eP\u0061\u0074\u0068\u0020\u0077\u0069\u0074\u0068\u0020\u006e\u006f\u0020\u0070\u0061t\u0068");
};_agab ._afe =false ;return ;};_agab ._gcda [len (_agab ._gcda )-1].close ();if _bfaf {_bbc .Log .Info ("\u0063\u006c\u006f\u0073\u0065\u0050\u0061\u0074\u0068\u003a\u0020\u0025\u0073",_agab );};};func (_gccb compositeCell )split (_eddb ,_ecec []float64 )*textTable {_abfg :=len (_eddb )+1;
_cbedb :=len (_ecec )+1;if _ffbd {_bbc .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0043\u0065l\u006c\u002e\u0073\u0070l\u0069\u0074\u003a\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a\u0009\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025\u0073\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073=\u0025\u0036\u002e\u0032\u0066\u000a\t\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d%\u0036\u002e\u0032\u0066",_cbedb ,_abfg ,_gccb ,_eddb ,_ecec );
_eb .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073\u000a",len (_gccb .paraList ));for _fadcb ,_eagba :=range _gccb .paraList {_eb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fadcb ,_eagba .String ());
};_eb .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",len (_gccb .lines ()));for _fecd ,_dcffg :=range _gccb .lines (){_eb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fecd ,_dcffg );};};_eddb =_gdffg (_eddb ,_gccb .Ury ,_gccb .Lly );
_ecec =_gdffg (_ecec ,_gccb .Llx ,_gccb .Urx );_acbf :=make (map[uint64 ]*textPara ,_cbedb *_abfg );_cggd :=textTable {_dabeb :_cbedb ,_feaf :_abfg ,_cffda :_acbf };_fdcc :=_gccb .paraList ;_c .Slice (_fdcc ,func (_cgefd ,_cadf int )bool {_bdbd ,_cbdb :=_fdcc [_cgefd ],_fdcc [_cadf ];
_gfddf ,_fgcgg :=_bdbd .Lly ,_cbdb .Lly ;if _gfddf !=_fgcgg {return _gfddf < _fgcgg ;};return _bdbd .Llx < _cbdb .Llx ;});_baffd :=make (map[uint64 ]_da .PdfRectangle ,_cbedb *_abfg );for _agfc ,_egde :=range _eddb [1:]{_gbega :=_eddb [_agfc ];for _deab ,_faagd :=range _ecec [1:]{_bgcf :=_ecec [_deab ];
_baffd [_dfabe (_deab ,_agfc )]=_da .PdfRectangle {Llx :_bgcf ,Urx :_faagd ,Lly :_egde ,Ury :_gbega };};};if _ffbd {_bbc .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0043\u0065l\u006c\u002e\u0073\u0070\u006c\u0069\u0074\u003a\u0020\u0072e\u0063\u0074\u0073");
_eb .Printf ("\u0020\u0020\u0020\u0020");for _efcg :=0;_efcg < _cbedb ;_efcg ++{_eb .Printf ("\u0025\u0033\u0030\u0064\u002c\u0020",_efcg );};_eb .Println ();for _ecagc :=0;_ecagc < _abfg ;_ecagc ++{_eb .Printf ("\u0020\u0020\u0025\u0032\u0064\u003a",_ecagc );
for _ageea :=0;_ageea < _cbedb ;_ageea ++{_eb .Printf ("\u00256\u002e\u0032\u0066\u002c\u0020",_baffd [_dfabe (_ageea ,_ecagc )]);};_eb .Println ();};};_adca :=func (_faafa *textLine )(int ,int ){for _babd :=0;_babd < _abfg ;_babd ++{for _cbbdf :=0;_cbbdf < _cbedb ;
_cbbdf ++{if _ffab (_baffd [_dfabe (_cbbdf ,_babd )],_faafa .PdfRectangle ){return _cbbdf ,_babd ;};};};return -1,-1;};_dbcge :=make (map[uint64 ][]*textLine ,_cbedb *_abfg );for _ ,_deecg :=range _fdcc .lines (){_cfdc ,_cdfc :=_adca (_deecg );if _cfdc < 0{continue ;
};_dbcge [_dfabe (_cfdc ,_cdfc )]=append (_dbcge [_dfabe (_cfdc ,_cdfc )],_deecg );};for _efgbf :=0;_efgbf < len (_eddb )-1;_efgbf ++{_fdgce :=_eddb [_efgbf ];_gbcb :=_eddb [_efgbf +1];for _aedc :=0;_aedc < len (_ecec )-1;_aedc ++{_ecga :=_ecec [_aedc ];
_cdgdb :=_ecec [_aedc +1];_geac :=_da .PdfRectangle {Llx :_ecga ,Urx :_cdgdb ,Lly :_gbcb ,Ury :_fdgce };_abbd :=_dbcge [_dfabe (_aedc ,_efgbf )];if len (_abbd )==0{continue ;};_aeagc :=_dadb (_geac ,_abbd );_cggd .put (_aedc ,_efgbf ,_aeagc );};};return &_cggd ;
};func _fgdcf (_cafb []int )[]int {_dccd :=make ([]int ,len (_cafb ));for _fbcd ,_bcddb :=range _cafb {_dccd [len (_cafb )-1-_fbcd ]=_bcddb ;};return _dccd ;};func _fagbb (_dgcg *_da .Image ,_adga _a .Color )_ab .Image {_dbefc ,_gdec :=int (_dgcg .Width ),int (_dgcg .Height );
_aggad :=_ab .NewRGBA (_ab .Rect (0,0,_dbefc ,_gdec ));for _dfbg :=0;_dfbg < _gdec ;_dfbg ++{for _bcddbd :=0;_bcddbd < _dbefc ;_bcddbd ++{_adcdc ,_effa :=_dgcg .ColorAt (_bcddbd ,_dfbg );if _effa !=nil {_bbc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_bcddbd ,_dfbg );
continue ;};_cdaba ,_bcgda ,_ggaec ,_ :=_adcdc .RGBA ();var _fcdb _a .Color ;if _cdaba +_bcgda +_ggaec ==0{_fcdb =_a .Transparent ;}else {_fcdb =_adga ;};_aggad .Set (_bcddbd ,_dfbg ,_fcdb );};};return _aggad ;};func (_dbaa *subpath )clear (){*_dbaa =subpath {}};
func (_agag gridTile )complete ()bool {return _agag .numBorders ()==4};

// String returns a string describing the current state of the textState stack.
func (_ffff *stateStack )String ()string {_gced :=[]string {_eb .Sprintf ("\u002d\u002d\u002d\u002d f\u006f\u006e\u0074\u0020\u0073\u0074\u0061\u0063\u006b\u003a\u0020\u0025\u0064",len (*_ffff ))};for _ffc ,_afcf :=range *_ffff {_fcd :="\u003c\u006e\u0069l\u003e";
if _afcf !=nil {_fcd =_afcf .String ();};_gced =append (_gced ,_eb .Sprintf ("\u0009\u0025\u0032\u0064\u003a\u0020\u0025\u0073",_ffc ,_fcd ));};return _fg .Join (_gced ,"\u000a");};

// GetContentStreamOps returns the contentStreamOps field of `pt`.
func (_dfec *PageText )GetContentStreamOps ()*_eae .ContentStreamOperations {return _dfec ._dbafa };func (_daa *shapesState )establishSubpath ()*subpath {_dffg ,_dedc :=_daa .lastpointEstablished ();if !_dedc {_daa ._gcda =append (_daa ._gcda ,_dadd (_dffg ));
};if len (_daa ._gcda )==0{return nil ;};_daa ._afe =false ;return _daa ._gcda [len (_daa ._gcda )-1];};func (_adbb paraList )inTile (_degdb gridTile )paraList {var _beaa paraList ;for _ ,_fbfc :=range _adbb {if _degdb .contains (_fbfc .PdfRectangle ){_beaa =append (_beaa ,_fbfc );
};};if _ffbd {_eb .Printf ("\u0020 \u0020\u0069\u006e\u0054i\u006c\u0065\u003a\u0020\u0020%\u0073 \u0069n\u0073\u0069\u0064\u0065\u003d\u0025\u0064\n",_degdb ,len (_beaa ));for _cgacee ,_dfgc :=range _beaa {_eb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cgacee ,_dfgc );
};_eb .Println ("");};return _beaa ;};func (_deada gridTiling )log (_egcaf string ){if !_afdb {return ;};_bbc .Log .Info ("\u0074i\u006ci\u006e\u0067\u003a\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0071",len (_deada ._cbedc ),len (_deada ._aggcf ),_egcaf );
_eb .Printf ("\u0020\u0020\u0020l\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a",_deada ._cbedc );_eb .Printf ("\u0020\u0020\u0020l\u006c\u0079\u003d\u0025\u002e\u0032\u0066\u000a",_deada ._aggcf );for _feacc ,_fdeb :=range _deada ._aggcf {_dcbe ,_cadc :=_deada ._gaee [_fdeb ];
if !_cadc {continue ;};_eb .Printf ("%\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_feacc ,_fdeb );for _eacdf ,_facge :=range _deada ._cbedc {_defe ,_affee :=_dcbe [_facge ];if !_affee {continue ;};_eb .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_eacdf ,_defe .String ());
};};};func _faba (_gedbc []compositeCell )[]float64 {var _becd []*textLine ;_bdda :=0;for _ ,_dabg :=range _gedbc {_bdda +=len (_dabg .paraList );_becd =append (_becd ,_dabg .lines ()...);};_c .Slice (_becd ,func (_gdab ,_gdgfc int )bool {_cagb ,_aeaeg :=_becd [_gdab ],_becd [_gdgfc ];
_fgbed ,_afbcd :=_cagb ._dfbc ,_aeaeg ._dfbc ;if !_abbae (_fgbed -_afbcd ){return _fgbed < _afbcd ;};return _cagb .Llx < _aeaeg .Llx ;});if _ffbd {_eb .Printf ("\u0020\u0020\u0020 r\u006f\u0077\u0042\u006f\u0072\u0064\u0065\u0072\u0073:\u0020%\u0064 \u0070a\u0072\u0061\u0073\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",_bdda ,len (_becd ));
for _bcdbf ,_afga :=range _becd {_eb .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_bcdbf ,_afga );};};var _fbgge []float64 ;_ecggd :=_becd [0];var _dfgeg [][]*textLine ;_ggdaf :=[]*textLine {_ecggd };for _cfbg ,_eagf :=range _becd [1:]{if _eagf .Ury < _ecggd .Lly {_eegad :=0.5*(_eagf .Ury +_ecggd .Lly );
if _ffbd {_eb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u003c\u0020\u0025\u0036.\u0032f\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u003d\u0025\u0036\u002e\u0032\u0066\u000a"+"\u0009\u0020\u0071\u003d\u0025\u0073\u000a\u0009\u0020p\u003d\u0025\u0073\u000a",_cfbg ,_eagf .Ury ,_ecggd .Lly ,_eegad ,_ecggd ,_eagf );
};_fbgge =append (_fbgge ,_eegad );_dfgeg =append (_dfgeg ,_ggdaf );_ggdaf =nil ;};_ggdaf =append (_ggdaf ,_eagf );if _eagf .Lly < _ecggd .Lly {_ecggd =_eagf ;};};if len (_ggdaf )> 0{_dfgeg =append (_dfgeg ,_ggdaf );};if _ffbd {_eb .Printf (" \u0020\u0020\u0020\u0020\u0020\u0020 \u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073\u003d%\u0036.\u0032\u0066\u000a",_fbgge );
};if _ffbd {_bbc .Log .Info ("\u0072\u006f\u0077\u003d\u0025\u0064",len (_gedbc ));for _gfed ,_bggg :=range _gedbc {_eb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gfed ,_bggg );};_bbc .Log .Info ("\u0067r\u006f\u0075\u0070\u0073\u003d\u0025d",len (_dfgeg ));
for _gacg ,_fabe :=range _dfgeg {_eb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0064\u000a",_gacg ,len (_fabe ));for _fdaed ,_gbeba :=range _fabe {_eb .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_fdaed ,_gbeba );};};};_fgbc :=true ;
for _beafc ,_acad :=range _dfgeg {_fgeb :=true ;for _aebfg ,_egcbe :=range _gedbc {if _ffbd {_eb .Printf ("\u0020\u0020\u0020\u007e\u007e\u007e\u0067\u0072\u006f\u0075\u0070\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0020\u0063\u0065\u006cl\u0020\u0025\u0064\u0020\u006ff\u0020\u0025d\u0020\u0025\u0073\u000a",_beafc ,len (_dfgeg ),_aebfg ,len (_gedbc ),_egcbe );
};if !_egcbe .hasLines (_acad ){if _ffbd {_eb .Printf ("\u0020\u0020\u0020\u0021\u0021\u0021\u0067\u0072\u006f\u0075\u0070\u0020\u0025d\u0020\u006f\u0066\u0020\u0025\u0064 \u0063\u0065\u006c\u006c\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064 \u004f\u0055\u0054\u000a",_beafc ,len (_dfgeg ),_aebfg ,len (_gedbc ));
};_fgeb =false ;break ;};};if !_fgeb {_fgbc =false ;break ;};};if !_fgbc {if _ffbd {_bbc .Log .Info ("\u0072\u006f\u0077\u0020\u0063o\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u0020\u0064\u006f\u006e\u0027\u0074 \u0073\u0070\u0061\u006e\u0020\u0061\u006c\u006c\u0020\u0063\u0065\u006c\u006c\u0073\u0020\u0069\u006e\u0020\u0072\u006f\u0077\u002e\u0020\u0069\u0067\u006e\u006f\u0072\u0069\u006eg");
};_fbgge =nil ;};if _ffbd &&_fbgge !=nil {_eb .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u002a\u002a*\u0072\u006f\u0077\u0043\u006f\u0072\u0072i\u0064\u006f\u0072\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u000a",_fbgge );};return _fbgge ;
};func _cedg (_gfca []*textLine )[]*textLine {_bacaf :=[]*textLine {};for _ ,_egef :=range _gfca {_cgfc :=_egef .text ();_ecgb :=_fcecb .Find ([]byte (_cgfc ));if _ecgb !=nil {_bacaf =append (_bacaf ,_egef );};};return _bacaf ;};var _ebgff =map[markKind ]string {_gefg :"\u0073\u0074\u0072\u006f\u006b\u0065",_dacb :"\u0066\u0069\u006c\u006c",_bgca :"\u0061u\u0067\u006d\u0065\u006e\u0074"};
func (_ebga rulingList )removeDuplicates ()rulingList {if len (_ebga )==0{return nil ;};_ebga .sort ();_aagf :=rulingList {_ebga [0]};for _ ,_abcc :=range _ebga [1:]{if _abcc .equals (_aagf [len (_aagf )-1]){continue ;};_aagf =append (_aagf ,_abcc );};
return _aagf ;};func _dcfee (_bfdb []rulingList )(rulingList ,rulingList ){var _bege rulingList ;for _ ,_fbea :=range _bfdb {_bege =append (_bege ,_fbea ...);};return _bege .vertsHorzs ();};func _aaedb (_ebfa ,_ececf _ge .Point )bool {_ebcb :=_bb .Abs (_ebfa .X -_ececf .X );
_bgcgb :=_bb .Abs (_ebfa .Y -_ececf .Y );return _dafb (_ebcb ,_bgcgb );};

// String returns a human readable description of `ss`.
func (_dbg *shapesState )String ()string {return _eb .Sprintf ("\u007b\u0025\u0064\u0020su\u0062\u0070\u0061\u0074\u0068\u0073\u0020\u0066\u0072\u0065\u0073\u0068\u003d\u0025t\u007d",len (_dbg ._gcda ),_dbg ._afe );};func (_gbdaf rulingList )vertsHorzs ()(rulingList ,rulingList ){var _cdcb ,_cddb rulingList ;
for _ ,_fbbcc :=range _gbdaf {switch _fbbcc ._cbabg {case _eabff :_cdcb =append (_cdcb ,_fbbcc );case _edff :_cddb =append (_cddb ,_fbbcc );};};return _cdcb ,_cddb ;};func _ffga (_cegc []*textWord ,_bcea float64 ,_dcae ,_fcde rulingList )*wordBag {_fcab :=_aafc (_cegc [0],_bcea ,_dcae ,_fcde );
for _ ,_bdfe :=range _cegc [1:]{_becg :=_fgdc (_bdfe ._ecdfc );_fcab ._ggadg [_becg ]=append (_fcab ._ggadg [_becg ],_bdfe );_fcab .PdfRectangle =_bafg (_fcab .PdfRectangle ,_bdfe .PdfRectangle );};_fcab .sort ();return _fcab ;};func _cceef (_dbedc _da .PdfRectangle )*ruling {return &ruling {_cbabg :_edff ,_fbaf :_dbedc .Ury ,_ccfd :_dbedc .Llx ,_fbaca :_dbedc .Urx };
};const _ggga =10;func (_gbf *textObject )showTextAdjusted (_edad *_ga .PdfObjectArray ,_cgaa int )error {_bcf :=false ;for _ ,_feba :=range _edad .Elements (){switch _feba .(type ){case *_ga .PdfObjectFloat ,*_ga .PdfObjectInteger :_beb ,_fdgb :=_ga .GetNumberAsFloat (_feba );
if _fdgb !=nil {_bbc .Log .Debug ("\u0045\u0052\u0052\u004fR\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078t\u0041\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0042\u0061\u0064\u0020\u006e\u0075\u006d\u0065r\u0069\u0063\u0061\u006c\u0020a\u0072\u0067\u002e\u0020\u006f\u003d\u0025\u0073\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_feba ,_edad );
return _fdgb ;};_bbga ,_eeb :=-_beb *0.001*_gbf ._gcdgg ._deec ,0.0;if _bcf {_eeb ,_bbga =_bbga ,_eeb ;};_fdd :=_eebe (_ge .Point {X :_bbga ,Y :_eeb });_gbf ._gbeg .Concat (_fdd );case *_ga .PdfObjectString :_fgg :=_ga .TraceToDirectObject (_feba );_ggc ,_efdd :=_ga .GetStringBytes (_fgg );
if !_efdd {_bbc .Log .Trace ("s\u0068\u006f\u0077\u0054\u0065\u0078\u0074\u0041\u0064j\u0075\u0073\u0074\u0065\u0064\u003a\u0020Ba\u0064\u0020\u0073\u0074r\u0069\u006e\u0067\u0020\u0061\u0072\u0067\u002e\u0020o=\u0025\u0073 \u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_feba ,_edad );
return _ga .ErrTypeError ;};_gbf .renderText (_fgg ,_ggc ,_cgaa );default:_bbc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078\u0074A\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0055\u006e\u0065\u0078p\u0065\u0063\u0074\u0065\u0064\u0020\u0074\u0079\u0070\u0065\u0020\u0028%T\u0029\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_feba ,_edad );
return _ga .ErrTypeError ;};};return nil ;};

// Tables returns the tables extracted from the page.
func (_deag PageText )Tables ()[]TextTable {if _ffbd {_bbc .Log .Info ("\u0054\u0061\u0062\u006c\u0065\u0073\u003a\u0020\u0025\u0064",len (_deag ._fda ));};return _deag ._fda ;};func _gfee (_cgefa byte )bool {for _ ,_ddfd :=range _dgcd {if []byte (_ddfd )[0]==_cgefa {return true ;
};};return false ;};func (_bgaf rulingList )splitSec ()[]rulingList {_c .Slice (_bgaf ,func (_agafdf ,_eebb int )bool {_ebgfba ,_efde :=_bgaf [_agafdf ],_bgaf [_eebb ];if _ebgfba ._ccfd !=_efde ._ccfd {return _ebgfba ._ccfd < _efde ._ccfd ;};return _ebgfba ._fbaca < _efde ._fbaca ;
});_aacg :=make (map[*ruling ]struct{},len (_bgaf ));_cbdg :=func (_fcbc *ruling )rulingList {_gdbfc :=rulingList {_fcbc };_aacg [_fcbc ]=struct{}{};for _ ,_bfdbc :=range _bgaf {if _ ,_fbeg :=_aacg [_bfdbc ];_fbeg {continue ;};for _ ,_bagg :=range _gdbfc {if _bfdbc .alignsSec (_bagg ){_gdbfc =append (_gdbfc ,_bfdbc );
_aacg [_bfdbc ]=struct{}{};break ;};};};return _gdbfc ;};_bafc :=[]rulingList {_cbdg (_bgaf [0])};for _ ,_aafaf :=range _bgaf [1:]{if _ ,_aaef :=_aacg [_aafaf ];_aaef {continue ;};_bafc =append (_bafc ,_cbdg (_aafaf ));};return _bafc ;};func (_dgcc rulingList )primaries ()[]float64 {_ffba :=make (map[float64 ]struct{},len (_dgcc ));
for _ ,_bgac :=range _dgcc {_ffba [_bgac ._fbaf ]=struct{}{};};_ggdea :=make ([]float64 ,len (_ffba ));_affe :=0;for _gafbd :=range _ffba {_ggdea [_affe ]=_gafbd ;_affe ++;};_c .Float64s (_ggdea );return _ggdea ;};func _afag (_cbc ,_bcae _da .PdfRectangle )bool {return _bcae .Llx <=_cbc .Urx &&_cbc .Llx <=_bcae .Urx };


// ExtractText processes and extracts all text data in content streams and returns as a string.
// It takes into account character encodings in the PDF file, which are decoded by
// CharcodeBytesToUnicode.
// Characters that can't be decoded are replaced with MissingCodeRune ('\ufffd' = ).
func (_dcd *Extractor )ExtractText ()(string ,error ){_daf ,_ ,_ ,_fgc :=_dcd .ExtractTextWithStats ();return _daf ,_fgc ;};func _dggfbf (_cbedd ,_ceeg _ge .Point )bool {_cadb :=_bb .Abs (_cbedd .X -_ceeg .X );_baeb :=_bb .Abs (_cbedd .Y -_ceeg .Y );return _dafb (_baeb ,_cadb );
};func (_egfb *textObject )showText (_afde _ga .PdfObject ,_egg []byte ,_gcff int )error {return _egfb .renderText (_afde ,_egg ,_gcff );};type bounded interface{bbox ()_da .PdfRectangle };func _eccg (_dgdg []*textLine ,_babad string )string {var _geaf _fg .Builder ;
_abba :=0.0;for _dbcf ,_ebge :=range _dgdg {_ageb :=_ebge .text ();_aadad :=_ebge ._dfbc ;if _dbcf < len (_dgdg )-1{_abba =_dgdg [_dbcf +1]._dfbc ;}else {_abba =0.0;};_geaf .WriteString (_babad );_geaf .WriteString (_ageb );if _abba !=_aadad {_geaf .WriteString ("\u000a");
}else {_geaf .WriteString ("\u0020");};};return _geaf .String ();};func (_deaee *structTreeRoot )buildList (_gfde map[int ][]*textLine ,_efbb _ga .PdfObject )[]*list {if _deaee ==nil {_bbc .Log .Debug ("\u0062\u0075\u0069\u006c\u0064\u004c\u0069\u0073\u0074\u003a\u0020t\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0069\u0073 \u006e\u0069\u006c");
return nil ;};var _ddbab *structElement ;_ecfgg :=[]structElement {};if len (_deaee ._cfgg )==1{_febae :=_deaee ._cfgg [0]._ecdc ;if _febae =="\u0044\u006f\u0063\u0075\u006d\u0065\u006e\u0074"||_febae =="\u0053\u0065\u0063\u0074"||_febae =="\u0050\u0061\u0072\u0074"||_febae =="\u0044\u0069\u0076"||_febae =="\u0041\u0072\u0074"{_ddbab =&_deaee ._cfgg [0];
};}else {_ddbab =&structElement {_ecded :_deaee ._cfgg ,_ecdc :_deaee ._dggbg };};if _ddbab ==nil {_bbc .Log .Debug ("\u0062\u0075\u0069\u006cd\u004c\u0069\u0073\u0074\u003a\u0020\u0074\u006f\u0070\u0045l\u0065m\u0065\u006e\u0074\u0020\u0069\u0073\u0020n\u0069\u006c");
return nil ;};for _ ,_aeag :=range _ddbab ._ecded {if _aeag ._ecdc =="\u004c"{_ecfgg =append (_ecfgg ,_aeag );}else if _aeag ._ecdc =="\u0054\u0061\u0062l\u0065"{_acgb :=_cgfb (_aeag );_ecfgg =append (_ecfgg ,_acgb ...);};};_fcda :=_defc (_ecfgg ,_gfde ,_efbb );
var _cddg []*list ;for _ ,_gfcag :=range _fcda {_bgba :=_gfcbg (_gfcag );_cddg =append (_cddg ,_bgba ...);};return _cddg ;};func (_gfef *textTable )toTextTable ()TextTable {if _ffbd {_bbc .Log .Info ("t\u006fT\u0065\u0078\u0074\u0054\u0061\u0062\u006c\u0065:\u0020\u0025\u0064\u0020x \u0025\u0064",_gfef ._dabeb ,_gfef ._feaf );
};_gceda :=make ([][]TableCell ,_gfef ._feaf );for _fadg :=0;_fadg < _gfef ._feaf ;_fadg ++{_gceda [_fadg ]=make ([]TableCell ,_gfef ._dabeb );for _gedg :=0;_gedg < _gfef ._dabeb ;_gedg ++{_cfcc :=_gfef .get (_gedg ,_fadg );if _cfcc ==nil {continue ;};
if _ffbd {_eb .Printf ("\u0025\u0034\u0064 \u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_gedg ,_fadg ,_cfcc );};_gceda [_fadg ][_gedg ].Text =_cfcc .text ();_geca :=0;_gceda [_fadg ][_gedg ].Marks ._cggca =_cfcc .toTextMarks (&_geca );};};_ceda :=TextTable {W :_gfef ._dabeb ,H :_gfef ._feaf ,Cells :_gceda };
_ceda .PdfRectangle =_gfef .bbox ();return _ceda ;};func (_deae *wordBag )firstReadingIndex (_cgef int )int {_gcbc :=_deae .firstWord (_cgef )._fabac ;_cedf :=float64 (_cgef +1)*_cbbdd ;_dbbc :=_cedf +_dfgg *_gcbc ;_abfb :=_cgef ;for _ ,_cead :=range _deae .depthBand (_cedf ,_dbbc ){if _adcc (_deae .firstWord (_cead ),_deae .firstWord (_abfb ))< 0{_abfb =_cead ;
};};return _abfb ;};func (_bde *imageExtractContext )extractContentStreamImages (_dee string ,_ccb *_da .PdfPageResources )error {_dad :=_eae .NewContentStreamParser (_dee );_dbc ,_eed :=_dad .Parse ();if _eed !=nil {return _eed ;};if _bde ._gcf ==nil {_bde ._gcf =map[*_ga .PdfObjectStream ]*cachedImage {};
};if _bde ._fec ==nil {_bde ._fec =&ImageExtractOptions {};};_fgb :=_eae .NewContentStreamProcessor (*_dbc );_fgb .AddHandler (_eae .HandlerConditionEnumAllOperands ,"",_bde .processOperand );return _fgb .Process (_ccb );};func _adcc (_fcbe ,_ecf bounded )float64 {return _fcbe .bbox ().Llx -_ecf .bbox ().Llx };
func (_cfef *textMark )inDiacriticArea (_ggac *textMark )bool {_ffaa :=_cfef .Llx -_ggac .Llx ;_ffca :=_cfef .Urx -_ggac .Urx ;_gddb :=_cfef .Lly -_ggac .Lly ;return _bb .Abs (_ffaa +_ffca )< _cfef .Width ()*_gfd &&_bb .Abs (_gddb )< _cfef .Height ()*_gfd ;
};func _fgge (_cag _da .PdfRectangle ,_dggb bounded )float64 {return _cag .Ury -_dggb .bbox ().Lly };func (_gagb *textObject )checkOp (_cggc *_eae .ContentStreamOperation ,_cbga int ,_fbe bool )(_efg bool ,_daec error ){if _gagb ==nil {var _accb []_ga .PdfObject ;
if _cbga > 0{_accb =_cggc .Params ;if len (_accb )> _cbga {_accb =_accb [:_cbga ];};};_bbc .Log .Debug ("\u0025\u0023q \u006f\u0070\u0065r\u0061\u006e\u0064\u0020out\u0073id\u0065\u0020\u0074\u0065\u0078\u0074\u002e p\u0061\u0072\u0061\u006d\u0073\u003d\u0025+\u0076",_cggc .Operand ,_accb );
};if _cbga >=0{if len (_cggc .Params )!=_cbga {if _fbe {_daec =_e .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");};_bbc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_cggc .Operand ,_cbga ,len (_cggc .Params ),_cggc .Params );
return false ,_daec ;};};return true ,nil ;};func (_gbfg paraList )findTableGrid (_adecd gridTiling )(*textTable ,map[*textPara ]struct{}){_cccfc :=len (_adecd ._cbedc );_begg :=len (_adecd ._aggcf );_gbcgc :=textTable {_abdfg :true ,_dabeb :_cccfc ,_feaf :_begg ,_cffda :make (map[uint64 ]*textPara ,_cccfc *_begg ),_bcfe :make (map[uint64 ]compositeCell ,_cccfc *_begg )};
_gbcgc .PdfRectangle =_adecd .PdfRectangle ;_gfeb :=make (map[*textPara ]struct{});_edabg :=int ((1.0-_gfda )*float64 (_cccfc *_begg ));_abeb :=0;if _afdb {_bbc .Log .Info ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0064\u0020\u0078\u0020%\u0064",_cccfc ,_begg );
};for _edfeg ,_daegc :=range _adecd ._aggcf {_afab ,_dbeee :=_adecd ._gaee [_daegc ];if !_dbeee {continue ;};for _edec ,_bdbeg :=range _adecd ._cbedc {_dcgec ,_fdcaf :=_afab [_bdbeg ];if !_fdcaf {continue ;};_ccfc :=_gbfg .inTile (_dcgec );if len (_ccfc )==0{_abeb ++;
if _abeb > _edabg {if _afdb {_bbc .Log .Info ("\u0021\u006e\u0075m\u0045\u006d\u0070\u0074\u0079\u003d\u0025\u0064",_abeb );};return nil ,nil ;};}else {_gbcgc .putComposite (_edec ,_edfeg ,_ccfc ,_dcgec .PdfRectangle );for _ ,_gcfff :=range _ccfc {_gfeb [_gcfff ]=struct{}{};
};};};};_eeee :=0;for _ffagf :=0;_ffagf < _cccfc ;_ffagf ++{_bgdc :=_gbcgc .get (_ffagf ,0);if _bgdc ==nil ||!_bgdc ._bfgf {_eeee ++;};};if _eeee ==0{if _afdb {_bbc .Log .Info ("\u0021\u006e\u0075m\u0048\u0065\u0061\u0064\u0065\u0072\u003d\u0030");};return nil ,nil ;
};_bdgg :=_gbcgc .reduceTiling (_adecd ,_geeb );_bdgg =_bdgg .subdivide ();return _bdgg ,_gfeb ;};func _adaa (_dfegf _da .PdfRectangle )*ruling {return &ruling {_cbabg :_eabff ,_fbaf :_dfegf .Urx ,_ccfd :_dfegf .Lly ,_fbaca :_dfegf .Ury };};func (_ccdcf *wordBag )scanBand (_eeda string ,_dbbb *wordBag ,_ggdb func (_acf *wordBag ,_edee *textWord )bool ,_efdb ,_dege ,_geg float64 ,_gdaa ,_bbcf bool )int {_adbd :=_dbbb ._aaf ;
var _bcfc map[int ]map[*textWord ]struct{};if !_gdaa {_bcfc =_ccdcf .makeRemovals ();};_ffdb :=_ebdg *_adbd ;_bggb :=0;for _ ,_abc :=range _ccdcf .depthBand (_efdb -_ffdb ,_dege +_ffdb ){if len (_ccdcf ._ggadg [_abc ])==0{continue ;};for _ ,_aecg :=range _ccdcf ._ggadg [_abc ]{if !(_efdb -_ffdb <=_aecg ._ecdfc &&_aecg ._ecdfc <=_dege +_ffdb ){continue ;
};if !_ggdb (_dbbb ,_aecg ){continue ;};_eef :=2.0*_bb .Abs (_aecg ._fabac -_dbbb ._aaf )/(_aecg ._fabac +_dbbb ._aaf );_bbef :=_bb .Max (_aecg ._fabac /_dbbb ._aaf ,_dbbb ._aaf /_aecg ._fabac );_dcbd :=_bb .Min (_eef ,_bbef );if _geg > 0&&_dcbd > _geg {continue ;
};if _dbbb .blocked (_aecg ){continue ;};if !_gdaa {_dbbb .pullWord (_aecg ,_abc ,_bcfc );};_bggb ++;if !_bbcf {if _aecg ._ecdfc < _efdb {_efdb =_aecg ._ecdfc ;};if _aecg ._ecdfc > _dege {_dege =_aecg ._ecdfc ;};};if _gdaa {break ;};};};if !_gdaa {_ccdcf .applyRemovals (_bcfc );
};return _bggb ;};var _ccf =TextMark {Text :"\u005b\u0058\u005d",Original :"\u0020",Meta :true ,FillColor :_a .White ,StrokeColor :_a .White };func _dgbab (_fbba string )bool {if _b .RuneCountInString (_fbba )< _edac {return false ;};_decgb ,_ccab :=_b .DecodeLastRuneInString (_fbba );
if _ccab <=0||!_d .Is (_d .Hyphen ,_decgb ){return false ;};_decgb ,_ccab =_b .DecodeLastRuneInString (_fbba [:len (_fbba )-_ccab ]);return _ccab > 0&&!_d .IsSpace (_decgb );};func _gdad (_babde ,_cgdb ,_efdbe ,_aeaa *textPara )*textTable {_efcef :=&textTable {_dabeb :2,_feaf :2,_cffda :make (map[uint64 ]*textPara ,4)};
_efcef .put (0,0,_babde );_efcef .put (1,0,_cgdb );_efcef .put (0,1,_efdbe );_efcef .put (1,1,_aeaa );return _efcef ;};type textTable struct{_da .PdfRectangle ;_dabeb ,_feaf int ;_abdfg bool ;_cffda map[uint64 ]*textPara ;_bcfe map[uint64 ]compositeCell ;
};func _fccaa (_gcef []*textMark ,_fega _da .PdfRectangle )[]*textWord {var _abgb []*textWord ;var _fgbff *textWord ;if _bgad {_bbc .Log .Info ("\u006d\u0061\u006beT\u0065\u0078\u0074\u0057\u006f\u0072\u0064\u0073\u003a\u0020\u0025\u0064\u0020\u006d\u0061\u0072\u006b\u0073",len (_gcef ));
};_cadbf :=func (){if _fgbff !=nil {_cedfg :=_fgbff .computeText ();if !_acge (_cedfg ){_fgbff ._aefg =_cedfg ;_abgb =append (_abgb ,_fgbff );if _bgad {_bbc .Log .Info ("\u0061\u0064\u0064Ne\u0077\u0057\u006f\u0072\u0064\u003a\u0020\u0025\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",len (_abgb )-1,_fgbff .String ());
for _ddda ,_eacb :=range _fgbff ._bbaaf {_eb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ddda ,_eacb .String ());};};};_fgbff =nil ;};};for _ ,_eeafd :=range _gcef {if _dgde &&_fgbff !=nil &&len (_fgbff ._bbaaf )> 0{_dgbff :=_fgbff ._bbaaf [len (_fgbff ._bbaaf )-1];
_fecbd ,_gbaec :=_abebd (_eeafd ._fgbe );_cdce ,_gadb :=_abebd (_dgbff ._fgbe );if _gbaec &&!_gadb &&_dgbff .inDiacriticArea (_eeafd ){_fgbff .addDiacritic (_fecbd );continue ;};if _gadb &&!_gbaec &&_eeafd .inDiacriticArea (_dgbff ){_fgbff ._bbaaf =_fgbff ._bbaaf [:len (_fgbff ._bbaaf )-1];
_fgbff .appendMark (_eeafd ,_fega );_fgbff .addDiacritic (_cdce );continue ;};};_bbbbe :=_acge (_eeafd ._fgbe );if _bbbbe {_cadbf ();continue ;};if _fgbff ==nil &&!_bbbbe {_fgbff =_fgafe ([]*textMark {_eeafd },_fega );continue ;};_gceff :=_fgbff ._fabac ;
_agbd :=_bb .Abs (_fgge (_fega ,_eeafd )-_fgbff ._ecdfc )/_gceff ;_aebbb :=_gbde (_eeafd ,_fgbff )/_gceff ;if _aebbb >=_feeg ||!(-_deeg <=_aebbb &&_agbd <=_cbec ){_cadbf ();_fgbff =_fgafe ([]*textMark {_eeafd },_fega );continue ;};_fgbff .appendMark (_eeafd ,_fega );
};_cadbf ();return _abgb ;};func _gggb (_ecdg _da .PdfRectangle )*ruling {return &ruling {_cbabg :_edff ,_fbaf :_ecdg .Lly ,_ccfd :_ecdg .Llx ,_fbaca :_ecdg .Urx };};

// BBox returns the smallest axis-aligned rectangle that encloses all the TextMarks in `ma`.
func (_cdfe *TextMarkArray )BBox ()(_da .PdfRectangle ,bool ){var _gcffg _da .PdfRectangle ;_eac :=false ;for _ ,_cgbe :=range _cdfe ._cggca {if _cgbe .Meta ||_acge (_cgbe .Text ){continue ;};if _eac {_gcffg =_bafg (_gcffg ,_cgbe .BBox );}else {_gcffg =_cgbe .BBox ;
_eac =true ;};};return _gcffg ,_eac ;};func (_dfcf paraList )toTextMarks ()[]TextMark {_aabd :=0;var _edbaf []TextMark ;for _ggbc ,_degb :=range _dfcf {if _degb ._bfgf {continue ;};_gfcbe :=_degb .toTextMarks (&_aabd );_edbaf =append (_edbaf ,_gfcbe ...);
if _ggbc !=len (_dfcf )-1{if _gabd (_degb ,_dfcf [_ggbc +1]){_edbaf =_fccg (_edbaf ,&_aabd ,"\u0020");}else {_edbaf =_fccg (_edbaf ,&_aabd ,"\u000a");_edbaf =_fccg (_edbaf ,&_aabd ,"\u000a");};};};_edbaf =_fccg (_edbaf ,&_aabd ,"\u000a");_edbaf =_fccg (_edbaf ,&_aabd ,"\u000a");
return _edbaf ;};func (_efadb *textWord )toTextMarks (_adgda *int )[]TextMark {var _cgefae []TextMark ;for _ ,_baad :=range _efadb ._bbaaf {_cgefae =_aeac (_cgefae ,_adgda ,_baad .ToTextMark ());};return _cgefae ;};

// String returns a string describing `tm`.
func (_ecaf TextMark )String ()string {_edaf :=_ecaf .BBox ;var _dfae string ;if _ecaf .Font !=nil {_dfae =_ecaf .Font .String ();if len (_dfae )> 50{_dfae =_dfae [:50]+"\u002e\u002e\u002e";};};var _gad string ;if _ecaf .Meta {_gad ="\u0020\u002a\u004d\u002a";
};return _eb .Sprintf ("\u007b\u0054\u0065\u0078t\u004d\u0061\u0072\u006b\u003a\u0020\u0025\u0064\u0020%\u0071\u003d\u0025\u0030\u0032\u0078\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e2\u0066\u0029\u0020\u0028\u00256\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0025\u0073\u007d",_ecaf .Offset ,_ecaf .Text ,[]rune (_ecaf .Text ),_edaf .Llx ,_edaf .Lly ,_edaf .Urx ,_edaf .Ury ,_dfae ,_gad );
};func (_caed paraList )lines ()[]*textLine {var _cbed []*textLine ;for _ ,_bfaa :=range _caed {_cbed =append (_cbed ,_bfaa ._acgga ...);};return _cbed ;};func (_adaf rulingList )asTiling ()gridTiling {if _afdb {_bbc .Log .Info ("r\u0075\u006ci\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0063s\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u002b\u002b\u002b\u0020\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_adaf ));
};for _ggfea ,_bedcb :=range _adaf [1:]{_gbbeg :=_adaf [_ggfea ];if _gbbeg .alignsPrimary (_bedcb )&&_gbbeg .alignsSec (_bedcb ){_bbc .Log .Error ("a\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0044\u0075\u0070\u006c\u0069\u0063\u0061\u0074\u0065 \u0072\u0075\u006c\u0069\u006e\u0067\u0073\u002e\u000a\u0009v=\u0025\u0073\u000a\t\u0077=\u0025\u0073",_bedcb ,_gbbeg );
};};_adaf .sortStrict ();_adaf .log ("\u0073n\u0061\u0070\u0070\u0065\u0064");_bgbc ,_aaad :=_adaf .vertsHorzs ();_dbgga :=_bgbc .primaries ();_gfddd :=_aaad .primaries ();_ceagd :=len (_dbgga )-1;_edefa :=len (_gfddd )-1;if _ceagd ==0||_edefa ==0{return gridTiling {};
};_beacg :=_da .PdfRectangle {Llx :_dbgga [0],Urx :_dbgga [_ceagd ],Lly :_gfddd [0],Ury :_gfddd [_edefa ]};if _afdb {_bbc .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0072\u0074s=\u0025\u0064",len (_bgbc ));
for _fgdf ,_fecg :=range _bgbc {_eb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fgdf ,_fecg );};_bbc .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0068\u006f\u0072\u007as=\u0025\u0064",len (_aaad ));
for _bbbd ,_gecff :=range _aaad {_eb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bbbd ,_gecff );};_bbc .Log .Info ("\u0072\u0075\u006c\u0069\u006eg\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067:\u0020\u0020\u0077\u0078\u0068\u003d\u0025\u0064\u0078\u0025\u0064\u000a\u0009\u006c\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a\u0009\u006c\u006c\u0079\u003d\u0025\u002e\u0032f",_ceagd ,_edefa ,_dbgga ,_gfddd );
};_ffgcb :=make ([]gridTile ,_ceagd *_edefa );for _bfce :=_edefa -1;_bfce >=0;_bfce --{_cbae :=_gfddd [_bfce ];_bdae :=_gfddd [_bfce +1];for _egbc :=0;_egbc < _ceagd ;_egbc ++{_cfc :=_dbgga [_egbc ];_fbf :=_dbgga [_egbc +1];_bgee :=_bgbc .findPrimSec (_cfc ,_cbae );
_gbcf :=_bgbc .findPrimSec (_fbf ,_cbae );_fgafd :=_aaad .findPrimSec (_cbae ,_cfc );_gafc :=_aaad .findPrimSec (_bdae ,_cfc );_abdcg :=_da .PdfRectangle {Llx :_cfc ,Urx :_fbf ,Lly :_cbae ,Ury :_bdae };_bagd :=_fdfda (_abdcg ,_bgee ,_gbcf ,_fgafd ,_gafc );
_ffgcb [_bfce *_ceagd +_egbc ]=_bagd ;if _afdb {_eb .Printf ("\u0020\u0020\u0078\u003d\u0025\u0032\u0064\u0020\u0079\u003d\u0025\u0032\u0064\u003a\u0020%\u0073 \u0025\u0036\u002e\u0032\u0066\u0020\u0078\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_egbc ,_bfce ,_bagd .String (),_bagd .Width (),_bagd .Height ());
};};};if _afdb {_bbc .Log .Info ("r\u0075\u006c\u0069\u006e\u0067\u004c\u0069\u0073\u0074.\u0061\u0073\u0054\u0069\u006c\u0069\u006eg:\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0020\u0068\u006f\u0072\u0069zo\u006e\u0074a\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_beacg );
};_becc :=make ([]map[float64 ]gridTile ,_edefa );for _faddg :=_edefa -1;_faddg >=0;_faddg --{if _afdb {_eb .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_faddg );};_becc [_faddg ]=make (map[float64 ]gridTile ,_ceagd );for _bcgc :=0;_bcgc < _ceagd ;
_bcgc ++{_acdb :=_ffgcb [_faddg *_ceagd +_bcgc ];if _afdb {_eb .Printf ("\u0020\u0020\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bcgc ,_acdb );};if !_acdb ._abagd {continue ;};_ffdd :=_bcgc ;for _dbbbe :=_bcgc +1;!_acdb ._bagb &&_dbbbe < _ceagd ;
_dbbbe ++{_dbcfd :=_ffgcb [_faddg *_ceagd +_dbbbe ];_acdb .Urx =_dbcfd .Urx ;_acdb ._ddcc =_acdb ._ddcc ||_dbcfd ._ddcc ;_acdb ._cfad =_acdb ._cfad ||_dbcfd ._cfad ;_acdb ._bagb =_dbcfd ._bagb ;if _afdb {_eb .Printf ("\u0020 \u0020%\u0034\u0064\u003a\u0020\u0025s\u0020\u2192 \u0025\u0073\u000a",_dbbbe ,_dbcfd ,_acdb );
};_ffdd =_dbbbe ;};if _afdb {_eb .Printf (" \u0020 \u0025\u0032\u0064\u0020\u002d\u0020\u0025\u0032d\u0020\u2192\u0020\u0025s\n",_bcgc ,_ffdd ,_acdb );};_bcgc =_ffdd ;_becc [_faddg ][_acdb .Llx ]=_acdb ;};};_gdgag :=make (map[float64 ]map[float64 ]gridTile ,_edefa );
_fefc :=make (map[float64 ]map[float64 ]struct{},_edefa );for _bcggf :=_edefa -1;_bcggf >=0;_bcggf --{_afccda :=_ffgcb [_bcggf *_ceagd ].Lly ;_gdgag [_afccda ]=make (map[float64 ]gridTile ,_ceagd );_fefc [_afccda ]=make (map[float64 ]struct{},_ceagd );
};if _afdb {_bbc .Log .Info ("\u0072u\u006c\u0069n\u0067\u004c\u0069s\u0074\u002e\u0061\u0073\u0054\u0069\u006ci\u006e\u0067\u003a\u0020\u0063\u006fa\u006c\u0065\u0073\u0063\u0065\u0020\u0076\u0065\u0072\u0074\u0069c\u0061\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_beacg );
};for _eaeb :=_edefa -1;_eaeb >=0;_eaeb --{_gedbe :=_ffgcb [_eaeb *_ceagd ].Lly ;_cgaf :=_becc [_eaeb ];if _afdb {_eb .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_eaeb );};for _ ,_dagdb :=range _adeab (_cgaf ){if _ ,_agddd :=_fefc [_gedbe ][_dagdb ];
_agddd {continue ;};_agce :=_cgaf [_dagdb ];if _afdb {_eb .Printf (" \u0020\u0020\u0020\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_agce .String ());};for _gcedd :=_eaeb -1;_gcedd >=0;_gcedd --{if _agce ._cfad {break ;};_efaf :=_becc [_gcedd ];_fdfgg ,_decbf :=_efaf [_dagdb ];
if !_decbf {break ;};if _fdfgg .Urx !=_agce .Urx {break ;};_agce ._cfad =_fdfgg ._cfad ;_agce .Lly =_fdfgg .Lly ;if _afdb {_eb .Printf ("\u0020\u0020\u0020\u0020  \u0020\u0020\u0076\u003d\u0025\u0073\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_fdfgg .String (),_agce .String ());
};_fefc [_fdfgg .Lly ][_fdfgg .Llx ]=struct{}{};};if _eaeb ==0{_agce ._cfad =true ;};if _agce .complete (){_gdgag [_gedbe ][_dagdb ]=_agce ;};};};_cebc :=gridTiling {PdfRectangle :_beacg ,_cbedc :_gabgb (_gdgag ),_aggcf :_agde (_gdgag ),_gaee :_gdgag };
_cebc .log ("\u0043r\u0065\u0061\u0074\u0065\u0064");return _cebc ;};func (_efcad rulingList )mergePrimary ()float64 {_cbge :=_efcad [0]._fbaf ;for _ ,_eefe :=range _efcad [1:]{_cbge +=_eefe ._fbaf ;};return _cbge /float64 (len (_efcad ));};func (_dgfc *subpath )removeDuplicates (){if len (_dgfc ._fbed )==0{return ;
};_fab :=[]_ge .Point {_dgfc ._fbed [0]};for _ ,_febb :=range _dgfc ._fbed [1:]{if !_gdbe (_febb ,_fab [len (_fab )-1]){_fab =append (_fab ,_febb );};};_dgfc ._fbed =_fab ;};func (_bfbfe *textPara )bbox ()_da .PdfRectangle {return _bfbfe .PdfRectangle };
func _fbgg (_eagaa []*textLine ,_dddd ,_cggf float64 )[]*textLine {var _daef []*textLine ;for _ ,_febbf :=range _eagaa {if _dddd ==-1{if _febbf ._dfbc > _cggf {_daef =append (_daef ,_febbf );};}else {if _febbf ._dfbc > _cggf &&_febbf ._dfbc < _dddd {_daef =append (_daef ,_febbf );
};};};return _daef ;};func (_bfg *textObject )setHorizScaling (_fbc float64 ){if _bfg ==nil {return ;};_bfg ._gcdgg ._adc =_fbc ;};func _defc (_bef []structElement ,_deagf map[int ][]*textLine ,_aabfa _ga .PdfObject )[]*list {_gfcd :=[]*list {};for _ ,_beeb :=range _bef {_agc :=_beeb ._ecded ;
_dfeb :=int (_beeb ._cccf );_ffdce :=_beeb ._ecdc ;_fdfc :=[]*textLine {};_aafbd :=[]*list {};_dgfd :=_beeb ._ebgb ;_cccdb ,_ebgcd :=(_dgfd .(*_ga .PdfObjectReference ));if !_ebgcd {_bbc .Log .Debug ("\u0066\u0061\u0069l\u0065\u0064\u0020\u006f\u0074\u0020\u0063\u0061\u0073\u0074\u0020\u0074\u006f\u0020\u002a\u0063\u006f\u0072\u0065\u002e\u0050\u0064\u0066\u004f\u0062\u006a\u0065\u0063\u0074R\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");
};if _dfeb !=-1&&_cccdb !=nil {if _gfcf ,_ggcf :=_deagf [_dfeb ];_ggcf {if _dafd ,_dabe :=_aabfa .(*_ga .PdfIndirectObject );_dabe {_dbdb :=_dafd .PdfObjectReference ;if _df .DeepEqual (*_cccdb ,_dbdb ){_fdfc =_gfcf ;};};};};if _agc !=nil {_aafbd =_defc (_agc ,_deagf ,_aabfa );
};_gafdc :=_dgbbe (_fdfc ,_ffdce ,_aafbd );_gfcd =append (_gfcd ,_gafdc );};return _gfcd ;};func _aedg (_fdfbg bounded )float64 {return -_fdfbg .bbox ().Lly };func (_eacc lineRuling )asRuling ()(*ruling ,bool ){_dbed :=ruling {_cbabg :_eacc ._eagge ,Color :_eacc .Color ,_baef :_gefg };
switch _eacc ._eagge {case _eabff :_dbed ._fbaf =_eacc .xMean ();_dbed ._ccfd =_bb .Min (_eacc ._gdcfa .Y ,_eacc ._geed .Y );_dbed ._fbaca =_bb .Max (_eacc ._gdcfa .Y ,_eacc ._geed .Y );case _edff :_dbed ._fbaf =_eacc .yMean ();_dbed ._ccfd =_bb .Min (_eacc ._gdcfa .X ,_eacc ._geed .X );
_dbed ._fbaca =_bb .Max (_eacc ._gdcfa .X ,_eacc ._geed .X );default:_bbc .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_eacc ._eagge );return nil ,false ;};return &_dbed ,true ;
};func _gadad (_fbbb *textLine ,_abbf []*textLine ,_egcgf []float64 ,_bbgc ,_baa float64 )[]*textLine {_ead :=[]*textLine {};for _ ,_eacg :=range _abbf {if _eacg ._dfbc >=_bbgc {if _baa !=-1&&_eacg ._dfbc < _baa {if _eacg .text ()!=_fbbb .text (){if _bb .Round (_eacg .Llx )< _bb .Round (_fbbb .Llx ){break ;
};_ead =append (_ead ,_eacg );};}else if _baa ==-1{if _eacg ._dfbc ==_fbbb ._dfbc {if _eacg .text ()!=_fbbb .text (){_ead =append (_ead ,_eacg );};continue ;};_bdbe :=_afebc (_fbbb ,_abbf ,_egcgf );if _bdbe !=-1&&_eacg ._dfbc <=_bdbe {_ead =append (_ead ,_eacg );
};};};};return _ead ;};func (_befaa *textTable )getRight ()paraList {_bacc :=make (paraList ,_befaa ._feaf );for _dbbcf :=0;_dbbcf < _befaa ._feaf ;_dbbcf ++{_ecdb :=_befaa .get (_befaa ._dabeb -1,_dbbcf )._cebf ;if _ecdb .taken (){return nil ;};_bacc [_dbbcf ]=_ecdb ;
};for _ddac :=0;_ddac < _befaa ._feaf -1;_ddac ++{if _bacc [_ddac ]._ffea !=_bacc [_ddac +1]{return nil ;};};return _bacc ;};func (_ffcg *textTable )depth ()float64 {_deecb :=1e10;for _eacgf :=0;_eacgf < _ffcg ._dabeb ;_eacgf ++{_bcgdb :=_ffcg .get (_eacgf ,0);
if _bcgdb ==nil ||_bcgdb ._bfgf {continue ;};_deecb =_bb .Min (_deecb ,_bcgdb .depth ());};return _deecb ;};func (_fdea *wordBag )allWords ()[]*textWord {var _fgaa []*textWord ;for _ ,_afee :=range _fdea ._ggadg {_fgaa =append (_fgaa ,_afee ...);};return _fgaa ;
};func _cgfb (_dbbcc structElement )[]structElement {_ggde :=[]structElement {};for _ ,_bbfec :=range _dbbcc ._ecded {for _ ,_ecdea :=range _bbfec ._ecded {for _ ,_cedc :=range _ecdea ._ecded {if _cedc ._ecdc =="\u004c"{_ggde =append (_ggde ,_cedc );};
};};};return _ggde ;};func _bafg (_fdac ,_cace _da .PdfRectangle )_da .PdfRectangle {return _da .PdfRectangle {Llx :_bb .Min (_fdac .Llx ,_cace .Llx ),Lly :_bb .Min (_fdac .Lly ,_cace .Lly ),Urx :_bb .Max (_fdac .Urx ,_cace .Urx ),Ury :_bb .Max (_fdac .Ury ,_cace .Ury )};
};func (_bf *imageExtractContext )extractFormImages (_gbb *_ga .PdfObjectName ,_dde _eae .GraphicsState ,_cgg *_da .PdfPageResources )error {_cab ,_agb :=_cgg .GetXObjectFormByName (*_gbb );if _agb !=nil {return _agb ;};if _cab ==nil {return nil ;};_bca ,_agb :=_cab .GetContentStream ();
if _agb !=nil {return _agb ;};_bbd :=_cab .Resources ;if _bbd ==nil {_bbd =_cgg ;};_agb =_bf .extractContentStreamImages (string (_bca ),_bbd );if _agb !=nil {return _agb ;};_bf ._gb ++;return nil ;};func _cbee (_facbc *list )[]*textLine {for _ ,_agbg :=range _facbc ._afbc {switch _agbg ._ecfg {case "\u004c\u0042\u006fd\u0079":if len (_agbg ._fadc )!=0{return _agbg ._fadc ;
};return _cbee (_agbg );case "\u0053\u0070\u0061\u006e":return _agbg ._fadc ;case "I\u006e\u006c\u0069\u006e\u0065\u0053\u0068\u0061\u0070\u0065":return _agbg ._fadc ;};};return nil ;};func (_efcb *textPara )toCellTextMarks (_agada *int )[]TextMark {var _dac []TextMark ;
for _gefc ,_dfbbf :=range _efcb ._acgga {_deage :=_dfbbf .toTextMarks (_agada );_baee :=_bgec &&_dfbbf .endsInHyphen ()&&_gefc !=len (_efcb ._acgga )-1;if _baee {_deage =_dgaee (_deage ,_agada );};_dac =append (_dac ,_deage ...);if !(_baee ||_gefc ==len (_efcb ._acgga )-1){_dac =_fccg (_dac ,_agada ,_dcec (_dfbbf ._dfbc ,_efcb ._acgga [_gefc +1]._dfbc ));
};};return _dac ;};func (_ddde rulingList )secMinMax ()(float64 ,float64 ){_acff ,_dgdb :=_ddde [0]._ccfd ,_ddde [0]._fbaca ;for _ ,_efcf :=range _ddde [1:]{if _efcf ._ccfd < _acff {_acff =_efcf ._ccfd ;};if _efcf ._fbaca > _dgdb {_dgdb =_efcf ._fbaca ;
};};return _acff ,_dgdb ;};

// Marks returns the TextMark collection for a page. It represents all the text on the page.
func (_efga PageText )Marks ()*TextMarkArray {return &TextMarkArray {_cggca :_efga ._bdeef }};func (_aeae *textLine )toTextMarks (_ege *int )[]TextMark {var _cbba []TextMark ;for _ ,_cfbe :=range _aeae ._ffaf {if _cfbe ._dcdg {_cbba =_fccg (_cbba ,_ege ,"\u0020");
};_ffdba :=_cfbe .toTextMarks (_ege );_cbba =append (_cbba ,_ffdba ...);};return _cbba ;};func (_egad *textObject )reset (){_egad ._gbeg =_ge .IdentityMatrix ();_egad ._ccdc =_ge .IdentityMatrix ();_egad ._dfga =nil ;};func (_fdgc *wordBag )maxDepth ()float64 {return _fdgc ._efddf -_fdgc .Lly };


// String returns a description of `p`.
func (_ddaae *textPara )String ()string {if _ddaae ._bfgf {return _eb .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u005b\u0045\u004d\u0050\u0054\u0059\u005d",_ddaae .PdfRectangle );};_febce :="";if _ddaae ._bgde !=nil {_febce =_eb .Sprintf ("\u005b\u0025\u0064\u0078\u0025\u0064\u005d\u0020",_ddaae ._bgde ._dabeb ,_ddaae ._bgde ._feaf );
};return _eb .Sprintf ("\u0025\u0036\u002e\u0032f \u0025\u0073\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u0020\u0025\u0071",_ddaae .PdfRectangle ,_febce ,len (_ddaae ._acgga ),_febcc (_ddaae .text (),50));};var (_agg =_e .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");
_gc =_e .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););type event struct{_bbcea float64 ;_eeafc bool ;_cbce int ;};func (_bedb *subpath )isQuadrilateral ()bool {if len (_bedb ._fbed )< 4||len (_bedb ._fbed )> 5{return false ;
};if len (_bedb ._fbed )==5{_eeef :=_bedb ._fbed [0];_fbbag :=_bedb ._fbed [4];if _eeef .X !=_fbbag .X ||_eeef .Y !=_fbbag .Y {return false ;};};return true ;};func (_dcdb *wordBag )absorb (_dcfb *wordBag ){_afdc :=_dcfb .makeRemovals ();for _bfab ,_abdf :=range _dcfb ._ggadg {for _ ,_bcdcb :=range _abdf {_dcdb .pullWord (_bcdcb ,_bfab ,_afdc );
};};_dcfb .applyRemovals (_afdc );};func _eaggb (_efea []TextMark ,_eaeea *TextTable )[]TextMark {var _befde []TextMark ;for _ ,_adf :=range _efea {_adf ._cecd =true ;_adf ._cbf =_eaeea ;_befde =append (_befde ,_adf );};return _befde ;};func (_bbce *stateStack )empty ()bool {return len (*_bbce )==0};
func (_aebf *wordBag )minDepth ()float64 {return _aebf ._efddf -(_aebf .Ury -_aebf ._aaf )};func (_gdgf paraList )extractTables (_ggcdd []gridTiling )paraList {if _ffbd {_bbc .Log .Debug ("\u0065\u0078\u0074r\u0061\u0063\u0074\u0054\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_gdgf ));
};if len (_gdgf )< _dbda {return _gdgf ;};_eaaa :=_gdgf .findTables (_ggcdd );if _ffbd {_bbc .Log .Info ("c\u006f\u006d\u0062\u0069\u006e\u0065d\u0020\u0074\u0061\u0062\u006c\u0065s\u0020\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_eaaa ));
for _cegg ,_cbacb :=range _eaaa {_cbacb .log (_eb .Sprintf ("c\u006f\u006d\u0062\u0069\u006e\u0065\u0064\u0020\u0025\u0064",_cegg ));};};return _gdgf .applyTables (_eaaa );};func (_ddcg *textWord )bbox ()_da .PdfRectangle {return _ddcg .PdfRectangle };
func (_agcff *textTable )computeBbox ()_da .PdfRectangle {var _bgaea _da .PdfRectangle ;_dcfcf :=false ;for _dfedf :=0;_dfedf < _agcff ._feaf ;_dfedf ++{for _agafb :=0;_agafb < _agcff ._dabeb ;_agafb ++{_fagbc :=_agcff .get (_agafb ,_dfedf );if _fagbc ==nil {continue ;
};if !_dcfcf {_bgaea =_fagbc .PdfRectangle ;_dcfcf =true ;}else {_bgaea =_bafg (_bgaea ,_fagbc .PdfRectangle );};};};return _bgaea ;};

// ApplyArea processes the page text only within the specified area `bbox`.
// Each time ApplyArea is called, it updates the result set in `pt`.
// Can be called multiple times in a row with different bounding boxes.
func (_agf *PageText )ApplyArea (bbox _da .PdfRectangle ){_deg :=make ([]*textMark ,0,len (_agf ._gcffe ));for _ ,_dec :=range _agf ._gcffe {if _efdf (_dec .bbox (),bbox ){_deg =append (_deg ,_dec );};};var _ggcd paraList ;_bgff :=len (_deg );for _acca :=0;
_acca < 360&&_bgff > 0;_acca +=90{_fgd :=make ([]*textMark ,0,len (_deg )-_bgff );for _ ,_aadd :=range _deg {if _aadd ._ababc ==_acca {_fgd =append (_fgd ,_aadd );};};if len (_fgd )> 0{_eaga :=_cgag (_fgd ,_agf ._bce ,nil ,nil ,_agf ._dfee ._ebec );_ggcd =append (_ggcd ,_eaga ...);
_bgff -=len (_fgd );};};_cfda :=new (_ba .Buffer );_ggcd .writeText (_cfda );_agf ._gfc =_cfda .String ();_agf ._bdeef =_ggcd .toTextMarks ();_agf ._fda =_ggcd .tables ();};func (_cfeg *subpath )close (){if !_gdbe (_cfeg ._fbed [0],_cfeg .last ()){_cfeg .add (_cfeg ._fbed [0]);
};_cfeg ._dggf =true ;_cfeg .removeDuplicates ();};func (_fea *wordBag )firstWord (_ddcb int )*textWord {return _fea ._ggadg [_ddcb ][0]};func (_gedd *textPara )fontsize ()float64 {return _gedd ._acgga [0]._bgge };func (_fdege rectRuling )asRuling ()(*ruling ,bool ){_afged :=ruling {_cbabg :_fdege ._fgbg ,Color :_fdege .Color ,_baef :_dacb };
switch _fdege ._fgbg {case _eabff :_afged ._fbaf =0.5*(_fdege .Llx +_fdege .Urx );_afged ._ccfd =_fdege .Lly ;_afged ._fbaca =_fdege .Ury ;_ddfg ,_edgg :=_fdege .checkWidth (_fdege .Llx ,_fdege .Urx );if !_edgg {if _adbf {_bbc .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067V\u0065\u0072\u0074\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_fdege );
};return nil ,false ;};_afged ._gfdg =_ddfg ;case _edff :_afged ._fbaf =0.5*(_fdege .Lly +_fdege .Ury );_afged ._ccfd =_fdege .Llx ;_afged ._fbaca =_fdege .Urx ;_caceg ,_eabb :=_fdege .checkWidth (_fdege .Lly ,_fdege .Ury );if !_eabb {if _adbf {_bbc .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067H\u006f\u0072\u007a\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_fdege );
};return nil ,false ;};_afged ._gfdg =_caceg ;default:_bbc .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_fdege ._fgbg );return nil ,false ;};return &_afged ,true ;};

// RenderMode specifies the text rendering mode (Tmode), which determines whether showing text shall cause
// glyph outlines to be  stroked, filled, used as a clipping boundary, or some combination of the three.
// Stroking, filling, and clipping shall have the same effects for a text object as they do for a path object
// (see 8.5.3, "Path-Painting Operators" and 8.5.4, "Clipping Path Operators").
type RenderMode int ;

// Text gets the extracted text contained in `l`.
func (_gcce *list )Text ()string {_befa :=&_fg .Builder {};_eaca :="";_fgacd (_gcce ,_befa ,&_eaca );return _befa .String ();};func (_bbefa paraList )eventNeighbours (_fedfe []event )map[*textPara ][]int {_c .Slice (_fedfe ,func (_babb ,_fbede int )bool {_bdecb ,_facbf :=_fedfe [_babb ],_fedfe [_fbede ];
_dabb ,_dbeag :=_bdecb ._bbcea ,_facbf ._bbcea ;if _dabb !=_dbeag {return _dabb < _dbeag ;};if _bdecb ._eeafc !=_facbf ._eeafc {return _bdecb ._eeafc ;};return _babb < _fbede ;});_efag :=make (map[int ]intSet );_ebaba :=make (intSet );for _ ,_ggcca :=range _fedfe {if _ggcca ._eeafc {_efag [_ggcca ._cbce ]=make (intSet );
for _gcbdf :=range _ebaba {if _gcbdf !=_ggcca ._cbce {_efag [_ggcca ._cbce ].add (_gcbdf );_efag [_gcbdf ].add (_ggcca ._cbce );};};_ebaba .add (_ggcca ._cbce );}else {_ebaba .del (_ggcca ._cbce );};};_ecad :=map[*textPara ][]int {};for _abde ,_ebbc :=range _efag {_badgc :=_bbefa [_abde ];
if len (_ebbc )==0{_ecad [_badgc ]=nil ;continue ;};_faege :=make ([]int ,len (_ebbc ));_ddff :=0;for _gefa :=range _ebbc {_faege [_ddff ]=_gefa ;_ddff ++;};_ecad [_badgc ]=_faege ;};return _ecad ;};func (_gbcg *wordBag )empty (_bcdc int )bool {_ ,_faca :=_gbcg ._ggadg [_bcdc ];
return !_faca };func (_bgb *stateStack )top ()*textState {if _bgb .empty (){return nil ;};return (*_bgb )[_bgb .size ()-1];};func (_bgeca *textTable )compositeRowCorridors ()map[int ][]float64 {_aeaef :=make (map[int ][]float64 ,_bgeca ._feaf );if _ffbd {_bbc .Log .Info ("c\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0052\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073:\u0020h\u003d\u0025\u0064",_bgeca ._feaf );
};for _ggbg :=1;_ggbg < _bgeca ._feaf ;_ggbg ++{var _efee []compositeCell ;for _ggce :=0;_ggce < _bgeca ._dabeb ;_ggce ++{if _gcaea ,_dcbc :=_bgeca ._bcfe [_dfabe (_ggce ,_ggbg )];_dcbc {_efee =append (_efee ,_gcaea );};};if len (_efee )==0{continue ;};
_dgdcb :=_faba (_efee );_aeaef [_ggbg ]=_dgdcb ;if _ffbd {_eb .Printf ("\u0020\u0020\u0020\u0025\u0032\u0064\u003a\u0020\u00256\u002e\u0032\u0066\u000a",_ggbg ,_dgdcb );};};return _aeaef ;};func (_eacae *textMark )bbox ()_da .PdfRectangle {return _eacae .PdfRectangle };
func (_ggcfc rulingList )snapToGroups ()rulingList {_egcb ,_cbgc :=_ggcfc .vertsHorzs ();if len (_egcb )> 0{_egcb =_egcb .snapToGroupsDirection ();};if len (_cbgc )> 0{_cbgc =_cbgc .snapToGroupsDirection ();};_eebg :=append (_egcb ,_cbgc ...);_eebg .log ("\u0073\u006e\u0061p\u0054\u006f\u0047\u0072\u006f\u0075\u0070\u0073");
return _eebg ;};func (_dagef paraList )addNeighbours (){_abec :=func (_bdde []int ,_fggc *textPara )([]*textPara ,[]*textPara ){_ccece :=make ([]*textPara ,0,len (_bdde )-1);_bfdg :=make ([]*textPara ,0,len (_bdde )-1);for _ ,_fbgd :=range _bdde {_deffa :=_dagef [_fbgd ];
if _deffa .Urx <=_fggc .Llx {_ccece =append (_ccece ,_deffa );}else if _deffa .Llx >=_fggc .Urx {_bfdg =append (_bfdg ,_deffa );};};return _ccece ,_bfdg ;};_ffeec :=func (_adcd []int ,_bfdba *textPara )([]*textPara ,[]*textPara ){_eebgg :=make ([]*textPara ,0,len (_adcd )-1);
_bacd :=make ([]*textPara ,0,len (_adcd )-1);for _ ,_gcbb :=range _adcd {_bgdgf :=_dagef [_gcbb ];if _bgdgf .Ury <=_bfdba .Lly {_bacd =append (_bacd ,_bgdgf );}else if _bgdgf .Lly >=_bfdba .Ury {_eebgg =append (_eebgg ,_bgdgf );};};return _eebgg ,_bacd ;
};_gbbbe :=_dagef .yNeighbours (_fbg );for _ ,_cgbedc :=range _dagef {_adccc :=_gbbbe [_cgbedc ];if len (_adccc )==0{continue ;};_eegcb ,_ebdefc :=_abec (_adccc ,_cgbedc );if len (_eegcb )==0&&len (_ebdefc )==0{continue ;};if len (_eegcb )> 0{_fdddf :=_eegcb [0];
for _ ,_bbfad :=range _eegcb [1:]{if _bbfad .Urx >=_fdddf .Urx {_fdddf =_bbfad ;};};for _ ,_gbcd :=range _eegcb {if _gbcd !=_fdddf &&_gbcd .Urx > _fdddf .Llx {_fdddf =nil ;break ;};};if _fdddf !=nil &&_bfecg (_cgbedc .PdfRectangle ,_fdddf .PdfRectangle ){_cgbedc ._dgcdb =_fdddf ;
};};if len (_ebdefc )> 0{_cffdac :=_ebdefc [0];for _ ,_bacf :=range _ebdefc [1:]{if _bacf .Llx <=_cffdac .Llx {_cffdac =_bacf ;};};for _ ,_ggef :=range _ebdefc {if _ggef !=_cffdac &&_ggef .Llx < _cffdac .Urx {_cffdac =nil ;break ;};};if _cffdac !=nil &&_bfecg (_cgbedc .PdfRectangle ,_cffdac .PdfRectangle ){_cgbedc ._cebf =_cffdac ;
};};};_gbbbe =_dagef .xNeighbours (_bfcc );for _ ,_caedf :=range _dagef {_affef :=_gbbbe [_caedf ];if len (_affef )==0{continue ;};_dbefe ,_gbaea :=_ffeec (_affef ,_caedf );if len (_dbefe )==0&&len (_gbaea )==0{continue ;};if len (_gbaea )> 0{_ebgdd :=_gbaea [0];
for _ ,_cfbbb :=range _gbaea [1:]{if _cfbbb .Ury >=_ebgdd .Ury {_ebgdd =_cfbbb ;};};for _ ,_bcgdd :=range _gbaea {if _bcgdd !=_ebgdd &&_bcgdd .Ury > _ebgdd .Lly {_ebgdd =nil ;break ;};};if _ebgdd !=nil &&_afag (_caedf .PdfRectangle ,_ebgdd .PdfRectangle ){_caedf ._ffea =_ebgdd ;
};};if len (_dbefe )> 0{_ffddf :=_dbefe [0];for _ ,_cgaec :=range _dbefe [1:]{if _cgaec .Lly <=_ffddf .Lly {_ffddf =_cgaec ;};};for _ ,_beeg :=range _dbefe {if _beeg !=_ffddf &&_beeg .Lly < _ffddf .Ury {_ffddf =nil ;break ;};};if _ffddf !=nil &&_afag (_caedf .PdfRectangle ,_ffddf .PdfRectangle ){_caedf ._addg =_ffddf ;
};};};for _ ,_febf :=range _dagef {if _febf ._dgcdb !=nil &&_febf ._dgcdb ._cebf !=_febf {_febf ._dgcdb =nil ;};if _febf ._addg !=nil &&_febf ._addg ._ffea !=_febf {_febf ._addg =nil ;};if _febf ._cebf !=nil &&_febf ._cebf ._dgcdb !=_febf {_febf ._cebf =nil ;
};if _febf ._ffea !=nil &&_febf ._ffea ._addg !=_febf {_febf ._ffea =nil ;};};};func _fadbe (_ceeag ,_dbbd _ge .Point ,_agdb _a .Color )(*ruling ,bool ){_aaga :=lineRuling {_gdcfa :_ceeag ,_geed :_dbbd ,_eagge :_aedf (_ceeag ,_dbbd ),Color :_agdb };if _aaga ._eagge ==_caca {return nil ,false ;
};return _aaga .asRuling ();};type rulingList []*ruling ;func _edcbe (_ebgfb ,_gfage ,_bffg float64 )rulingKind {if _ebgfb >=_bffg &&_dafb (_gfage ,_ebgfb ){return _edff ;};if _gfage >=_bffg &&_dafb (_ebgfb ,_gfage ){return _eabff ;};return _caca ;};func (_ggcfg *textTable )bbox ()_da .PdfRectangle {return _ggcfg .PdfRectangle };
func (_eaag *ruling )encloses (_dffgd ,_gcaa float64 )bool {return _eaag ._ccfd -_acfe <=_dffgd &&_gcaa <=_eaag ._fbaca +_acfe ;};func (_acag *textObject )getFont (_faaa string )(*_da .PdfFont ,error ){if _acag ._accf ._ad !=nil {_fafc ,_dfdf :=_acag .getFontDict (_faaa );
if _dfdf !=nil {_bbc .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0067\u0065\u0074\u0046\u006f\u006e\u0074:\u0020n\u0061m\u0065=\u0025\u0073\u002c\u0020\u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0073",_faaa ,_dfdf .Error ());return nil ,_dfdf ;
};_acag ._accf ._ec ++;_cgac ,_dcf :=_acag ._accf ._ad [_fafc .String ()];if _dcf {_cgac ._gcbe =_acag ._accf ._ec ;return _cgac ._cefea ,nil ;};};_gae ,_ffed :=_acag .getFontDict (_faaa );if _ffed !=nil {return nil ,_ffed ;};_faeda ,_ffed :=_acag .getFontDirect (_faaa );
if _ffed !=nil {return nil ,_ffed ;};if _acag ._accf ._ad !=nil {_bcb :=fontEntry {_faeda ,_acag ._accf ._ec };if len (_acag ._accf ._ad )>=_ggga {var _cce []string ;for _bebe :=range _acag ._accf ._ad {_cce =append (_cce ,_bebe );};_c .Slice (_cce ,func (_bbdeb ,_bedd int )bool {return _acag ._accf ._ad [_cce [_bbdeb ]]._gcbe < _acag ._accf ._ad [_cce [_bedd ]]._gcbe ;
});delete (_acag ._accf ._ad ,_cce [0]);};_acag ._accf ._ad [_gae .String ()]=_bcb ;};return _faeda ,nil ;};func (_geddc rulingList )connections (_agdf map[int ]intSet ,_adaee int )intSet {_fcecg :=make (intSet );_ggee :=make (intSet );var _gbdf func (int );
_gbdf =func (_bdfb int ){if !_ggee .has (_bdfb ){_ggee .add (_bdfb );for _egddd :=range _geddc {if _agdf [_egddd ].has (_bdfb ){_fcecg .add (_egddd );};};for _gffd :=range _geddc {if _fcecg .has (_gffd ){_gbdf (_gffd );};};};};_gbdf (_adaee );return _fcecg ;
};

// RangeOffset returns the TextMarks in `ma` that overlap text[start:end] in the extracted text.
// These are tm: `start` <= tm.Offset + len(tm.Text) && tm.Offset < `end` where
// `start` and `end` are offsets in the extracted text.
// NOTE: TextMarks can contain multiple characters. e.g. "ffi" for the  ligature so the first and
// last elements of the returned TextMarkArray may only partially overlap text[start:end].
func (_gdff *TextMarkArray )RangeOffset (start ,end int )(*TextMarkArray ,error ){if _gdff ==nil {return nil ,_e .New ("\u006da\u003d\u003d\u006e\u0069\u006c");};if end < start {return nil ,_eb .Errorf ("\u0065\u006e\u0064\u0020\u003c\u0020\u0073\u0074\u0061\u0072\u0074\u002e\u0020\u0052\u0061n\u0067\u0065\u004f\u0066\u0066\u0073\u0065\u0074\u0020\u006e\u006f\u0074\u0020d\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020\u0073\u0074\u0061\u0072t=\u0025\u0064\u0020\u0065\u006e\u0064\u003d\u0025\u0064\u0020",start ,end );
};_ebba :=len (_gdff ._cggca );if _ebba ==0{return _gdff ,nil ;};if start < _gdff ._cggca [0].Offset {start =_gdff ._cggca [0].Offset ;};if end > _gdff ._cggca [_ebba -1].Offset +1{end =_gdff ._cggca [_ebba -1].Offset +1;};_gbba :=_c .Search (_ebba ,func (_ebcd int )bool {return _gdff ._cggca [_ebcd ].Offset +len (_gdff ._cggca [_ebcd ].Text )-1>=start });
if !(0<=_gbba &&_gbba < _ebba ){_dcdc :=_eb .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020\u0072\u0061\u006e\u0067\u0065\u002e\u0020\u0073\u0074\u0061\u0072\u0074\u003d%\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009 \u006c\u0061\u0073\u0074\u003d%\u0076",start ,_gbba ,_ebba ,_gdff ._cggca [0],_gdff ._cggca [_ebba -1]);
return nil ,_dcdc ;};_aebe :=_c .Search (_ebba ,func (_fgbf int )bool {return _gdff ._cggca [_fgbf ].Offset > end -1});if !(0<=_aebe &&_aebe < _ebba ){_faed :=_eb .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020r\u0061\u006e\u0067e\u002e\u0020\u0065n\u0064\u003d%\u0064\u0020\u0069\u0045\u006e\u0064=\u0025d \u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d\u0025\u0076",end ,_aebe ,_ebba ,_gdff ._cggca [0],_gdff ._cggca [_ebba -1]);
return nil ,_faed ;};if _aebe <=_gbba {return nil ,_eb .Errorf ("\u0069\u0045\u006e\u0064\u0020\u003c=\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003a\u0020\u0073\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u0065\u006ed\u003d\u0025\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020i\u0045n\u0064\u003d\u0025\u0064",start ,end ,_gbba ,_aebe );
};return &TextMarkArray {_cggca :_gdff ._cggca [_gbba :_aebe ]},nil ;};func _abebd (_acgfa string )(string ,bool ){_gcbbc :=[]rune (_acgfa );if len (_gcbbc )!=1{return "",false ;};_aeda ,_ecdcb :=_fedd [_gcbbc [0]];return _aeda ,_ecdcb ;};func _ggfd (_efe _da .PdfRectangle )textState {return textState {_adc :100,_dggg :RenderModeFill ,_abf :_efe };
};

// New returns an Extractor instance for extracting content from the input PDF page.
func New (page *_da .PdfPage )(*Extractor ,error ){return NewWithOptions (page ,nil )};var _fegg =_ea .MustCompile ("\u005e\u005c\u0073\u002a\u0028\u005c\u0064\u002b\u005c\u002e\u003f|\u005b\u0049\u0069\u0076\u005d\u002b\u0029\u005c\u0073\u002a\\\u0029\u003f\u0024");
type structElement struct{_ecdc string ;_ecded []structElement ;_cccf int64 ;_ebgb _ga .PdfObject ;};func (_ccbc *wordBag )highestWord (_gaae int ,_fgdd ,_fef float64 )*textWord {for _ ,_bfcg :=range _ccbc ._ggadg [_gaae ]{if _fgdd <=_bfcg ._ecdfc &&_bfcg ._ecdfc <=_fef {return _bfcg ;
};};return nil ;};func _bedc (_aabfc *wordBag ,_acfg *textWord ,_bbed float64 )bool {return _aabfc .Urx <=_acfg .Llx &&_acfg .Llx < _aabfc .Urx +_bbed ;};func _cggfe (_aaba []pathSection )rulingList {_dbcde (_aaba );if _eggfb {_bbc .Log .Info ("\u006d\u0061k\u0065\u0053\u0074\u0072\u006f\u006b\u0065\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0064\u0020\u0073\u0074\u0072ok\u0065\u0073",len (_aaba ));
};var _bcaea rulingList ;for _ ,_ffcab :=range _aaba {for _ ,_gbeea :=range _ffcab ._febc {if len (_gbeea ._fbed )< 2{continue ;};_gabc :=_gbeea ._fbed [0];for _ ,_gcbgd :=range _gbeea ._fbed [1:]{if _agdd ,_agaaa :=_fadbe (_gabc ,_gcbgd ,_ffcab .Color );
_agaaa {_bcaea =append (_bcaea ,_agdd );};_gabc =_gcbgd ;};};};if _eggfb {_bbc .Log .Info ("m\u0061\u006b\u0065\u0053tr\u006fk\u0065\u0052\u0075\u006c\u0069n\u0067\u0073\u003a\u0020\u0025\u0073",_bcaea );};return _bcaea ;};type markKind int ;func _dfabe (_faddf ,_dfdfg int )uint64 {return uint64 (_faddf )*0x1000000+uint64 (_dfdfg )};
func (_faeg *PageText )getParagraphs ()paraList {var _fddd rulingList ;if _dgac {_fed :=_cggfe (_faeg ._adbc );_fddd =append (_fddd ,_fed ...);};if _dgdeg {_aage :=_fafcg (_faeg ._eage );_fddd =append (_fddd ,_aage ...);};_fddd ,_ggab :=_fddd .toTilings ();
var _dcge paraList ;_gfbb :=len (_faeg ._gcffe );for _gafa :=0;_gafa < 360&&_gfbb > 0;_gafa +=90{_ggb :=make ([]*textMark ,0,len (_faeg ._gcffe )-_gfbb );for _ ,_aefa :=range _faeg ._gcffe {if _aefa ._ababc ==_gafa {_ggb =append (_ggb ,_aefa );};};if len (_ggb )> 0{_gbc :=_cgag (_ggb ,_faeg ._bce ,_fddd ,_ggab ,_faeg ._dfee ._ebec );
_dcge =append (_dcge ,_gbc ...);_gfbb -=len (_ggb );};};return _dcge ;};func (_aaddg *wordBag )arrangeText ()*textPara {_aaddg .sort ();if _cgace {_aaddg .removeDuplicates ();};var _ecgc []*textLine ;for _ ,_edfgb :=range _aaddg .depthIndexes (){for !_aaddg .empty (_edfgb ){_efda :=_aaddg .firstReadingIndex (_edfgb );
_cgggg :=_aaddg .firstWord (_efda );_baede :=_geda (_aaddg ,_efda );_efdgf :=_cgggg ._fabac ;_abbe :=_cgggg ._ecdfc -_ebdg *_efdgf ;_eabc :=_cgggg ._ecdfc +_ebdg *_efdgf ;_dgcde :=_fdca *_efdgf ;_fgfd :=_gdgc *_efdgf ;_cddge :for {var _fccgc *textWord ;
_egdc :=0;for _ ,_bbfd :=range _aaddg .depthBand (_abbe ,_eabc ){_eedaa :=_aaddg .highestWord (_bbfd ,_abbe ,_eabc );if _eedaa ==nil {continue ;};_bdfdg :=_gbde (_eedaa ,_baede ._ffaf [len (_baede ._ffaf )-1]);if _bdfdg < -_fgfd {break _cddge ;};if _bdfdg > _dgcde {continue ;
};if _fccgc !=nil &&_adcc (_eedaa ,_fccgc )>=0{continue ;};_fccgc =_eedaa ;_egdc =_bbfd ;};if _fccgc ==nil {break ;};_baede .pullWord (_aaddg ,_fccgc ,_egdc );};_baede .markWordBoundaries ();_ecgc =append (_ecgc ,_baede );};};if len (_ecgc )==0{return nil ;
};_c .Slice (_ecgc ,func (_eadd ,_aafbf int )bool {return _abag (_ecgc [_eadd ],_ecgc [_aafbf ])< 0});_eagb :=_dadb (_aaddg .PdfRectangle ,_ecgc );if _aead {_bbc .Log .Info ("\u0061\u0072\u0072an\u0067\u0065\u0054\u0065\u0078\u0074\u0020\u0021\u0021\u0021\u0020\u0070\u0061\u0072\u0061\u003d\u0025\u0073",_eagb .String ());
if _acgg {for _ceea ,_acagg :=range _eagb ._acgga {_eb .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ceea ,_acagg .String ());if _ceec {for _acbc ,_gdag :=range _acagg ._ffaf {_eb .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_acbc ,_gdag .String ());
for _adff ,_ccbad :=range _gdag ._bbaaf {_eb .Printf ("\u00251\u0032\u0064\u003a\u0020\u0025\u0073\n",_adff ,_ccbad .String ());};};};};};};return _eagb ;};

// String returns a description of `state`.
func (_caag *textState )String ()string {_eafb :="\u005bN\u004f\u0054\u0020\u0053\u0045\u0054]";if _caag ._fdeg !=nil {_eafb =_caag ._fdeg .BaseFont ();};return _eb .Sprintf ("\u0074\u0063\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0077\u003d\u0025\u002e\u0032\u0066 \u0074f\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u003d\u0025\u0071",_caag ._dbe ,_caag ._bbde ,_caag ._deec ,_eafb );
};type textLine struct{_da .PdfRectangle ;_dfbc float64 ;_ffaf []*textWord ;_bgge float64 ;};

// PageFonts represents extracted fonts on a PDF page.
type PageFonts struct{Fonts []Font ;};func _dbdg (_aeef ,_cdee bounded )float64 {_bff :=_adcc (_aeef ,_cdee );if !_abbae (_bff ){return _bff ;};return _afba (_aeef ,_cdee );};func _dcec (_ggbda ,_aabc float64 )string {_cecdc :=!_abbae (_ggbda -_aabc );
if _cecdc {return "\u000a";};return "\u0020";};func _acge (_gfg string )bool {for _ ,_affdc :=range _gfg {if !_d .IsSpace (_affdc ){return false ;};};return true ;};func (_gdfa *textTable )getComposite (_cceec ,_afac int )(paraList ,_da .PdfRectangle ){_dacf ,_gdbb :=_gdfa ._bcfe [_dfabe (_cceec ,_afac )];
if _ffbd {_eb .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0067\u0065\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u002d\u003e\u0025\u0073\u000a",_cceec ,_afac ,_dacf .String ());};if !_gdbb {return nil ,_da .PdfRectangle {};
};return _dacf .parasBBox ();};func (_bdd *wordBag )sort (){for _ ,_gcde :=range _bdd ._ggadg {_c .Slice (_gcde ,func (_cabg ,_dgd int )bool {return _adcc (_gcde [_cabg ],_gcde [_dgd ])< 0});};};

// String returns a string describing `pt`.
func (_eaad PageText )String ()string {_cbd :=_eb .Sprintf ("P\u0061\u0067\u0065\u0054ex\u0074:\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073",len (_eaad ._gcffe ));_adcg :=[]string {"\u002d"+_cbd };for _ ,_gfcb :=range _eaad ._gcffe {_adcg =append (_adcg ,_gfcb .String ());
};_adcg =append (_adcg ,"\u002b"+_cbd );return _fg .Join (_adcg ,"\u000a");};func (_aeg *textLine )text ()string {var _dcba []string ;for _ ,_fadd :=range _aeg ._ffaf {if _fadd ._dcdg {_dcba =append (_dcba ,"\u0020");};_dcba =append (_dcba ,_fadd ._aefg );
};return _fg .Join (_dcba ,"");};func _gace (_fdbf func (*wordBag ,*textWord ,float64 )bool ,_acaf float64 )func (*wordBag ,*textWord )bool {return func (_add *wordBag ,_bfdc *textWord )bool {return _fdbf (_add ,_bfdc ,_acaf )};};type imageExtractContext struct{_ffe []ImageMark ;
_fba int ;_cge int ;_gb int ;_gcf map[*_ga .PdfObjectStream ]*cachedImage ;_fec *ImageExtractOptions ;_fde bool ;};const (_eg ="\u0045\u0052R\u004f\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u002c\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";
_fd ="\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0043a\u006e\u0027\u0074 g\u0065\u0074\u0020\u0066\u006f\u006et\u0020\u0070\u0072\u006f\u0070\u0065\u0072\u0074\u0069\u0065\u0073\u002c\u0020\u0066\u006fn\u0074\u0020\u006e\u006f\u0074\u0020\u0066\u006fu\u006e\u0064";
_dg ="\u0045\u0052\u0052O\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0067\u0065\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0074\u0072\u0065\u0061\u006d\u002c\u0020\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";);
func (_ffbae *textTable )newTablePara ()*textPara {_fccad :=_ffbae .computeBbox ();_fcbeg :=&textPara {PdfRectangle :_fccad ,_adged :_fccad ,_bgde :_ffbae };if _ffbd {_bbc .Log .Info ("\u006e\u0065w\u0054\u0061\u0062l\u0065\u0050\u0061\u0072\u0061\u003a\u0020\u0025\u0073",_fcbeg );
};return _fcbeg ;};func (_cecc *wordBag )makeRemovals ()map[int ]map[*textWord ]struct{}{_gada :=make (map[int ]map[*textWord ]struct{},len (_cecc ._ggadg ));for _ece :=range _cecc ._ggadg {_gada [_ece ]=make (map[*textWord ]struct{});};return _gada ;};
const _agaa =1.0/1000.0;func (_dcdd *textTable )isExportable ()bool {if _dcdd ._abdfg {return true ;};_acgdb :=func (_cegd int )bool {_eddd :=_dcdd .get (0,_cegd );if _eddd ==nil {return false ;};_dafgd :=_eddd .text ();_cecgg :=_b .RuneCountInString (_dafgd );
_fdece :=_fegg .MatchString (_dafgd );return _cecgg <=1||_fdece ;};for _aabfd :=0;_aabfd < _dcdd ._feaf ;_aabfd ++{if !_acgdb (_aabfd ){return true ;};};return false ;};func (_fagde *textWord )computeText ()string {_cecdga :=make ([]string ,len (_fagde ._bbaaf ));
for _ddbb ,_aagb :=range _fagde ._bbaaf {_cecdga [_ddbb ]=_aagb ._fgbe ;};return _fg .Join (_cecdga ,"");};type textWord struct{_da .PdfRectangle ;_ecdfc float64 ;_aefg string ;_bbaaf []*textMark ;_fabac float64 ;_dcdg bool ;};func _afba (_dfeg ,_bfae bounded )float64 {return _aedg (_dfeg )-_aedg (_bfae )};
func _faebd (_dffa ,_daag _da .PdfRectangle )(_da .PdfRectangle ,bool ){if !_efdf (_dffa ,_daag ){return _da .PdfRectangle {},false ;};return _da .PdfRectangle {Llx :_bb .Max (_dffa .Llx ,_daag .Llx ),Urx :_bb .Min (_dffa .Urx ,_daag .Urx ),Lly :_bb .Max (_dffa .Lly ,_daag .Lly ),Ury :_bb .Min (_dffa .Ury ,_daag .Ury )},true ;
};func (_cdbe *textObject )setTextRise (_aggcc float64 ){if _cdbe ==nil {return ;};_cdbe ._gcdgg ._cgc =_aggcc ;};type compositeCell struct{_da .PdfRectangle ;paraList ;};func (_dbf *TextMarkArray )exists (_deeb TextMark )bool {for _ ,_edcb :=range _dbf .Elements (){if _df .DeepEqual (_deeb .DirectObject ,_edcb .DirectObject )&&_df .DeepEqual (_deeb .BBox ,_edcb .BBox )&&_edcb .Text ==_deeb .Text {return true ;
};};return false ;};func (_afeg rulingList )bbox ()_da .PdfRectangle {var _bgbff _da .PdfRectangle ;if len (_afeg )==0{_bbc .Log .Error ("r\u0075\u006c\u0069\u006e\u0067\u004ci\u0073\u0074\u002e\u0062\u0062\u006f\u0078\u003a\u0020n\u006f\u0020\u0072u\u006ci\u006e\u0067\u0073");
return _da .PdfRectangle {};};if _afeg [0]._cbabg ==_edff {_bgbff .Llx ,_bgbff .Urx =_afeg .secMinMax ();_bgbff .Lly ,_bgbff .Ury =_afeg .primMinMax ();}else {_bgbff .Llx ,_bgbff .Urx =_afeg .primMinMax ();_bgbff .Lly ,_bgbff .Ury =_afeg .secMinMax ();
};return _bgbff ;};func (_aceaa rulingList )intersections ()map[int ]intSet {var _dgaed ,_ecfe []int ;for _dddf ,_bdabd :=range _aceaa {switch _bdabd ._cbabg {case _eabff :_dgaed =append (_dgaed ,_dddf );case _edff :_ecfe =append (_ecfe ,_dddf );};};if len (_dgaed )< _ggdca +1||len (_ecfe )< _agfe +1{return nil ;
};if len (_dgaed )+len (_ecfe )> _gcgf {_bbc .Log .Debug ("\u0069\u006e\u0074\u0065\u0072\u0073e\u0063\u0074\u0069\u006f\u006e\u0073\u003a\u0020\u0054\u004f\u004f\u0020\u004d\u0041\u004e\u0059\u0020\u0072\u0075\u006ci\u006e\u0067\u0073\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u003d\u0020%\u0064 \u0078\u0020\u0025\u0064",len (_aceaa ),len (_dgaed ),len (_ecfe ));
return nil ;};_dagd :=make (map[int ]intSet ,len (_dgaed )+len (_ecfe ));for _ ,_egcce :=range _dgaed {for _ ,_eggbb :=range _ecfe {if _aceaa [_egcce ].intersects (_aceaa [_eggbb ]){if _ ,_bagc :=_dagd [_egcce ];!_bagc {_dagd [_egcce ]=make (intSet );};
if _ ,_eafcc :=_dagd [_eggbb ];!_eafcc {_dagd [_eggbb ]=make (intSet );};_dagd [_egcce ].add (_eggbb );_dagd [_eggbb ].add (_egcce );};};};return _dagd ;};func (_eacf *textTable )getDown ()paraList {_bfccg :=make (paraList ,_eacf ._dabeb );for _ecgg :=0;
_ecgg < _eacf ._dabeb ;_ecgg ++{_cagac :=_eacf .get (_ecgg ,_eacf ._feaf -1)._ffea ;if _cagac .taken (){return nil ;};_bfccg [_ecgg ]=_cagac ;};for _fcbd :=0;_fcbd < _eacf ._dabeb -1;_fcbd ++{if _bfccg [_fcbd ]._cebf !=_bfccg [_fcbd +1]{return nil ;};};
return _bfccg ;};func (_gcb *textObject )setTextRenderMode (_acea int ){if _gcb ==nil {return ;};_gcb ._gcdgg ._dggg =RenderMode (_acea );};func _gdbe (_gbbcdg ,_efef _ge .Point )bool {return _gbbcdg .X ==_efef .X &&_gbbcdg .Y ==_efef .Y };func _dgbbe (_dfag []*textLine ,_bgfg string ,_fdcf []*list )*list {return &list {_fadc :_dfag ,_ecfg :_bgfg ,_afbc :_fdcf };
};func _abag (_degc ,_ddcd bounded )float64 {_ebef :=_afba (_degc ,_ddcd );if !_abbae (_ebef ){return _ebef ;};return _adcc (_degc ,_ddcd );};func _aagaa (_dafgb ,_cafbc _ge .Point )rulingKind {_gbfdb :=_bb .Abs (_dafgb .X -_cafbc .X );_ebfcb :=_bb .Abs (_dafgb .Y -_cafbc .Y );
return _edcbe (_gbfdb ,_ebfcb ,_dfc );};func (_bcgg *shapesState )addPoint (_decg ,_cbfc float64 ){_ccg :=_bcgg .establishSubpath ();_fdfa :=_bcgg .devicePoint (_decg ,_cbfc );if _ccg ==nil {_bcgg ._afe =true ;_bcgg ._bcec =_fdfa ;}else {_ccg .add (_fdfa );
};};func (_bbbee *shapesState )lastpointEstablished ()(_ge .Point ,bool ){if _bbbee ._afe {return _bbbee ._bcec ,false ;};_cfe :=len (_bbbee ._gcda );if _cfe > 0&&_bbbee ._gcda [_cfe -1]._dggf {return _bbbee ._gcda [_cfe -1].last (),false ;};return _ge .Point {},true ;
};func _fgef (_dgaef map[int ]intSet )[]int {_aaade :=make ([]int ,0,len (_dgaef ));for _cege :=range _dgaef {_aaade =append (_aaade ,_cege );};_c .Ints (_aaade );return _aaade ;};type rectRuling struct{_fgbg rulingKind ;_dagcd markKind ;_a .Color ;_da .PdfRectangle ;
};type intSet map[int ]struct{};func (_cegcb *textObject )newTextMark (_gefb string ,_fcece _ge .Matrix ,_fbdb _ge .Point ,_ddca float64 ,_bdfd *_da .PdfFont ,_cbcf float64 ,_cdaf ,_dcea _a .Color ,_ggcfb _ga .PdfObject ,_eeff []string ,_affd int ,_ecccg int )(textMark ,bool ){_bbac :=_fcece .Angle ();
_gdfg :=_dead (_bbac ,_bfabd );var _fccb float64 ;if _gdfg %180!=90{_fccb =_fcece .ScalingFactorY ();}else {_fccb =_fcece .ScalingFactorX ();};_dffga :=_adcf (_fcece );_cbeeg :=_da .PdfRectangle {Llx :_dffga .X ,Lly :_dffga .Y ,Urx :_fbdb .X ,Ury :_fbdb .Y };
switch _gdfg %360{case 90:_cbeeg .Urx -=_fccb ;case 180:_cbeeg .Ury -=_fccb ;case 270:_cbeeg .Urx +=_fccb ;case 0:_cbeeg .Ury +=_fccb ;default:_gdfg =0;_cbeeg .Ury +=_fccb ;};if _cbeeg .Llx > _cbeeg .Urx {_cbeeg .Llx ,_cbeeg .Urx =_cbeeg .Urx ,_cbeeg .Llx ;
};if _cbeeg .Lly > _cbeeg .Ury {_cbeeg .Lly ,_cbeeg .Ury =_cbeeg .Ury ,_cbeeg .Lly ;};_baed :=true ;if _cegcb ._accf ._fga .Width ()> 0{_eegf ,_gbce :=_faebd (_cbeeg ,_cegcb ._accf ._fga );if !_gbce {_baed =false ;_bbc .Log .Debug ("\u0054\u0065\u0078\u0074\u0020m\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069\u0064\u0065\u0020\u0070a\u0067\u0065\u002e\u0020\u0062\u0062\u006f\u0078\u003d\u0025\u0067\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u003d\u0025\u0067\u0020\u0074\u0065\u0078\u0074\u003d\u0025q",_cbeeg ,_cegcb ._accf ._fga ,_gefb );
};_cbeeg =_eegf ;};_addc :=_cbeeg ;_gfff :=_cegcb ._accf ._fga ;switch _gdfg %360{case 90:_gfff .Urx ,_gfff .Ury =_gfff .Ury ,_gfff .Urx ;_addc =_da .PdfRectangle {Llx :_gfff .Urx -_cbeeg .Ury ,Urx :_gfff .Urx -_cbeeg .Lly ,Lly :_cbeeg .Llx ,Ury :_cbeeg .Urx };
case 180:_addc =_da .PdfRectangle {Llx :_gfff .Urx -_cbeeg .Llx ,Urx :_gfff .Urx -_cbeeg .Urx ,Lly :_gfff .Ury -_cbeeg .Lly ,Ury :_gfff .Ury -_cbeeg .Ury };case 270:_gfff .Urx ,_gfff .Ury =_gfff .Ury ,_gfff .Urx ;_addc =_da .PdfRectangle {Llx :_cbeeg .Ury ,Urx :_cbeeg .Lly ,Lly :_gfff .Ury -_cbeeg .Llx ,Ury :_gfff .Ury -_cbeeg .Urx };
};if _addc .Llx > _addc .Urx {_addc .Llx ,_addc .Urx =_addc .Urx ,_addc .Llx ;};if _addc .Lly > _addc .Ury {_addc .Lly ,_addc .Ury =_addc .Ury ,_addc .Lly ;};_bcdf :=textMark {_fgbe :_gefb ,PdfRectangle :_addc ,_eead :_cbeeg ,_bfeb :_bdfd ,_feag :_fccb ,_deaf :_cbcf ,_ddbg :_fcece ,_efdc :_fbdb ,_ababc :_gdfg ,_fgcg :_cdaf ,_bfbc :_dcea ,_dagca :_ggcfb ,_gdcf :_eeff ,Th :_cegcb ._gcdgg ._adc ,Tw :_cegcb ._gcdgg ._bbde ,_bdac :_ecccg ,_dece :_affd };
if _bgad {_bbc .Log .Info ("n\u0065\u0077\u0054\u0065\u0078\u0074M\u0061\u0072\u006b\u003a\u0020\u0073t\u0061\u0072\u0074\u003d\u0025\u002e\u0032f\u0020\u0065\u006e\u0064\u003d\u0025\u002e\u0032\u0066\u0020%\u0073",_dffga ,_fbdb ,_bcdf .String ());};return _bcdf ,_baed ;
};func (_aebd *textWord )appendMark (_eadf *textMark ,_fagd _da .PdfRectangle ){_aebd ._bbaaf =append (_aebd ._bbaaf ,_eadf );_aebd .PdfRectangle =_bafg (_aebd .PdfRectangle ,_eadf .PdfRectangle );if _eadf ._feag > _aebd ._fabac {_aebd ._fabac =_eadf ._feag ;
};_aebd ._ecdfc =_fagd .Ury -_aebd .PdfRectangle .Lly ;};func (_fcfa *textObject )getFontDirect (_ebcde string )(*_da .PdfFont ,error ){_bfag ,_daeg :=_fcfa .getFontDict (_ebcde );if _daeg !=nil {return nil ,_daeg ;};_faef ,_daeg :=_da .NewPdfFontFromPdfObject (_bfag );
if _daeg !=nil {_bbc .Log .Debug ("\u0067\u0065\u0074\u0046\u006f\u006e\u0074\u0044\u0069\u0072\u0065\u0063\u0074\u003a\u0020\u004e\u0065\u0077Pd\u0066F\u006f\u006e\u0074\u0046\u0072\u006f\u006d\u0050\u0064\u0066\u004f\u0062j\u0065\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u006e\u0061\u006d\u0065\u003d%\u0023\u0071\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ebcde ,_daeg );
};return _faef ,_daeg ;};type structTreeRoot struct{_cfgg []structElement ;_dggbg string ;};func (_bbb *textObject )getStrokeColor ()_a .Color {return _beag (_bbb ._gde .ColorspaceStroking ,_bbb ._gde .ColorStroking );};func (_befd paraList )llyOrdering ()[]int {_abdd :=make ([]int ,len (_befd ));
for _fgfcd :=range _befd {_abdd [_fgfcd ]=_fgfcd ;};_c .SliceStable (_abdd ,func (_bfaeg ,_acbbc int )bool {_bfgg ,_bgfa :=_abdd [_bfaeg ],_abdd [_acbbc ];return _befd [_bfgg ].Lly < _befd [_bgfa ].Lly ;});return _abdd ;};func (_gbcge *ruling )intersects (_bdgfg *ruling )bool {_fgccd :=(_gbcge ._cbabg ==_eabff &&_bdgfg ._cbabg ==_edff )||(_bdgfg ._cbabg ==_eabff &&_gbcge ._cbabg ==_edff );
_gbdg :=func (_eddc ,_aafa *ruling )bool {return _eddc ._ccfd -_acfe <=_aafa ._fbaf &&_aafa ._fbaf <=_eddc ._fbaca +_acfe ;};_dfgea :=_gbdg (_gbcge ,_bdgfg );_acgce :=_gbdg (_bdgfg ,_gbcge );if _eggfb {_eb .Printf ("\u0020\u0020\u0020\u0020\u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003a\u0020\u0020\u006fr\u0074\u0068\u006f\u0067\u006f\u006e\u0061l\u003d\u0025\u0074\u0020\u006f\u0031\u003d\u0025\u0074\u0020\u006f2\u003d\u0025\u0074\u0020\u2192\u0020\u0025\u0074\u000a"+"\u0020\u0020\u0020 \u0020\u0020\u0020\u0076\u003d\u0025\u0073\u000a"+" \u0020\u0020\u0020\u0020\u0020\u0077\u003d\u0025\u0073\u000a",_fgccd ,_dfgea ,_acgce ,_fgccd &&_dfgea &&_acgce ,_gbcge ,_bdgfg );
};return _fgccd &&_dfgea &&_acgce ;};func _geda (_afagc *wordBag ,_gcdge int )*textLine {_fcfag :=_afagc .firstWord (_gcdge );_aeddc :=textLine {PdfRectangle :_fcfag .PdfRectangle ,_bgge :_fcfag ._fabac ,_dfbc :_fcfag ._ecdfc };_aeddc .pullWord (_afagc ,_fcfag ,_gcdge );
return &_aeddc ;};func (_gdfd *textObject )getCurrentFont ()*_da .PdfFont {_bgae :=_gdfd ._gcdgg ._fdeg ;if _bgae ==nil {_bbc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020U\u0073\u0069\u006e\u0067\u0020d\u0065\u0066a\u0075\u006c\u0074\u002e");
return _da .DefaultFont ();};return _bgae ;};func _aaada (_eddcc int ,_aegg map[int ][]float64 )([]int ,int ){_facbdb :=make ([]int ,_eddcc );_gbfc :=0;for _aeffc :=0;_aeffc < _eddcc ;_aeffc ++{_facbdb [_aeffc ]=_gbfc ;_gbfc +=len (_aegg [_aeffc ])+1;};
return _facbdb ,_gbfc ;};

// String returns a description of `b`.
func (_abdg *wordBag )String ()string {var _dcbf []string ;for _ ,_aacca :=range _abdg .depthIndexes (){_gfcc :=_abdg ._ggadg [_aacca ];for _ ,_bad :=range _gfcc {_dcbf =append (_dcbf ,_bad ._aefg );};};return _eb .Sprintf ("\u0025.\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065=\u0025\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0025\u0071",_abdg .PdfRectangle ,_abdg ._aaf ,len (_dcbf ),_dcbf );
};func (_ccee *textLine )appendWord (_bggf *textWord ){_ccee ._ffaf =append (_ccee ._ffaf ,_bggf );_ccee .PdfRectangle =_bafg (_ccee .PdfRectangle ,_bggf .PdfRectangle );if _bggf ._fabac > _ccee ._bgge {_ccee ._bgge =_bggf ._fabac ;};if _bggf ._ecdfc > _ccee ._dfbc {_ccee ._dfbc =_bggf ._ecdfc ;
};};func _febcc (_aaged string ,_daedg int )string {if len (_aaged )< _daedg {return _aaged ;};return _aaged [:_daedg ];};

// String returns a description of `k`.
func (_efdgg rulingKind )String ()string {_ececc ,_afad :=_babadf [_efdgg ];if !_afad {return _eb .Sprintf ("\u004e\u006ft\u0020\u0061\u0020r\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_efdgg );};return _ececc ;};func _aeedg (_fegab []*textWord ,_cdecd *textWord )[]*textWord {for _bacea ,_eeffe :=range _fegab {if _eeffe ==_cdecd {return _cffdc (_fegab ,_bacea );
};};_bbc .Log .Error ("\u0072\u0065\u006d\u006f\u0076e\u0057\u006f\u0072\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u0073\u0020\u0064o\u0065\u0073\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",_cdecd );
return nil ;};

// Text returns the extracted page text.
func (_fgabb PageText )Text ()string {return _fgabb ._gfc };func (_ddbaa paraList )findTextTables ()[]*textTable {var _adfbf []*textTable ;for _ ,_ececa :=range _ddbaa {if _ececa .taken ()||_ececa .Width ()==0{continue ;};_bddfa :=_ececa .isAtom ();if _bddfa ==nil {continue ;
};_bddfa .growTable ();if _bddfa ._dabeb *_bddfa ._feaf < _dbda {continue ;};_bddfa .markCells ();_bddfa .log ("\u0067\u0072\u006fw\u006e");_adfbf =append (_adfbf ,_bddfa );};return _adfbf ;};