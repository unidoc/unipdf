//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

//
// Package extractor is used for quickly extracting PDF content through a simple interface.
// Currently offers functionality for extracting textual content.
//
package extractor ;import (_g "bytes";_c "errors";_ff "fmt";_fg "github.com/unidoc/unipdf/v3/common";_fd "github.com/unidoc/unipdf/v3/contentstream";_ac "github.com/unidoc/unipdf/v3/core";_cff "github.com/unidoc/unipdf/v3/internal/license";_eb "github.com/unidoc/unipdf/v3/internal/textencoding";
_gb "github.com/unidoc/unipdf/v3/internal/transform";_ge "github.com/unidoc/unipdf/v3/model";_bfc "golang.org/x/text/unicode/norm";_e "golang.org/x/xerrors";_fe "image/color";_f "io";_d "math";_b "regexp";_bf "sort";_ad "strings";_cb "unicode";_cf "unicode/utf8";
);func _aaef (_dfcaa *wordBag ,_ecfc float64 ,_acg ,_gceb rulingList )[]*wordBag {var _bbbde []*wordBag ;for _ ,_cdgde :=range _dfcaa .depthIndexes (){_bbca :=false ;for !_dfcaa .empty (_cdgde ){_beaf :=_dfcaa .firstReadingIndex (_cdgde );_cdcgc :=_dfcaa .firstWord (_beaf );
_gcfb :=_eabba (_cdcgc ,_ecfc ,_acg ,_gceb );_dfcaa .removeWord (_cdcgc ,_beaf );if _cbdg {_fg .Log .Info ("\u0066\u0069\u0072\u0073\u0074\u0057\u006f\u0072\u0064\u0020\u005e\u005e^\u005e\u0020\u0025\u0073",_cdcgc .String ());};for _egabg :=true ;_egabg ;
_egabg =_bbca {_bbca =false ;_efee :=_ddcbf *_gcfb ._gdfg ;_bgcc :=_ffef *_gcfb ._gdfg ;_fdce :=_eegd *_gcfb ._gdfg ;if _cbdg {_fg .Log .Info ("\u0070a\u0072a\u0057\u006f\u0072\u0064\u0073\u0020\u0064\u0065\u0070\u0074\u0068 \u0025\u002e\u0032\u0066 \u002d\u0020\u0025\u002e\u0032f\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061\u0044\u0065\u0070\u0074\u0068\u0047\u0061\u0070\u003d\u0025\u002e\u0032\u0066\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061R\u0065\u0061\u0064\u0069\u006e\u0067\u0047\u0061p\u003d\u0025\u002e\u0032\u0066",_gcfb .minDepth (),_gcfb .maxDepth (),_fdce ,_bgcc );
};if _dfcaa .scanBand ("\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c",_gcfb ,_gbg (_bebd ,0),_gcfb .minDepth ()-_fdce ,_gcfb .maxDepth ()+_fdce ,_gba ,false ,false )> 0{_bbca =true ;};if _dfcaa .scanBand ("\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_gcfb ,_gbg (_bebd ,_bgcc ),_gcfb .minDepth (),_gcfb .maxDepth (),_fegg ,false ,false )> 0{_bbca =true ;
};if _bbca {continue ;};_bfcf :=_dfcaa .scanBand ("",_gcfb ,_gbg (_aebc ,_efee ),_gcfb .minDepth (),_gcfb .maxDepth (),_fcbff ,true ,false );if _bfcf > 0{_bffb :=(_gcfb .maxDepth ()-_gcfb .minDepth ())/_gcfb ._gdfg ;if (_bfcf > 1&&float64 (_bfcf )> 0.3*_bffb )||_bfcf <=10{if _dfcaa .scanBand ("\u006f\u0074\u0068e\u0072",_gcfb ,_gbg (_aebc ,_efee ),_gcfb .minDepth (),_gcfb .maxDepth (),_fcbff ,false ,true )> 0{_bbca =true ;
};};};};_bbbde =append (_bbbde ,_gcfb );};};return _bbbde ;};func (_adbb *textObject )setTextLeading (_bcf float64 ){if _adbb ==nil {return ;};_adbb ._cada ._egb =_bcf ;};func (_fgae intSet )has (_afbe int )bool {_ ,_caggf :=_fgae [_afbe ];return _caggf };
func _gfcef (_dabce []compositeCell )[]float64 {var _gecea []*textLine ;_gfbg :=0;for _ ,_dgfe :=range _dabce {_gfbg +=len (_dgfe .paraList );_gecea =append (_gecea ,_dgfe .lines ()...);};_bf .Slice (_gecea ,func (_abcdf ,_cdbd int )bool {_dceg ,_geab :=_gecea [_abcdf ],_gecea [_cdbd ];
_bgfd ,_cfgde :=_dceg ._bcee ,_geab ._bcee ;if !_cgaeg (_bgfd -_cfgde ){return _bgfd < _cfgde ;};return _dceg .Llx < _geab .Llx ;});if _cfadg {_ff .Printf ("\u0020\u0020\u0020 r\u006f\u0077\u0042\u006f\u0072\u0064\u0065\u0072\u0073:\u0020%\u0064 \u0070a\u0072\u0061\u0073\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",_gfbg ,len (_gecea ));
for _cbae ,_gbbb :=range _gecea {_ff .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_cbae ,_gbbb );};};var _ecfee []float64 ;_ceac :=_gecea [0];var _faec [][]*textLine ;_dfdc :=[]*textLine {_ceac };for _degce ,_gafdf :=range _gecea [1:]{if _gafdf .Ury < _ceac .Lly {_cfgg :=0.5*(_gafdf .Ury +_ceac .Lly );
if _cfadg {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u003c\u0020\u0025\u0036.\u0032f\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u003d\u0025\u0036\u002e\u0032\u0066\u000a"+"\u0009\u0020\u0071\u003d\u0025\u0073\u000a\u0009\u0020p\u003d\u0025\u0073\u000a",_degce ,_gafdf .Ury ,_ceac .Lly ,_cfgg ,_ceac ,_gafdf );
};_ecfee =append (_ecfee ,_cfgg );_faec =append (_faec ,_dfdc );_dfdc =nil ;};_dfdc =append (_dfdc ,_gafdf );if _gafdf .Lly < _ceac .Lly {_ceac =_gafdf ;};};if len (_dfdc )> 0{_faec =append (_faec ,_dfdc );};if _cfadg {_ff .Printf (" \u0020\u0020\u0020\u0020\u0020\u0020 \u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073\u003d%\u0036.\u0032\u0066\u000a",_ecfee );
};if _cfadg {_fg .Log .Info ("\u0072\u006f\u0077\u003d\u0025\u0064",len (_dabce ));for _gfaba ,_aegg :=range _dabce {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gfaba ,_aegg );};_fg .Log .Info ("\u0067r\u006f\u0075\u0070\u0073\u003d\u0025d",len (_faec ));
for _fegc ,_deeac :=range _faec {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0064\u000a",_fegc ,len (_deeac ));for _afgg ,_ecdeb :=range _deeac {_ff .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_afgg ,_ecdeb );};};};_cbbfb :=true ;
for _fbfbd ,_aabc :=range _faec {_faee :=true ;for _edbg ,_fdbf :=range _dabce {if _cfadg {_ff .Printf ("\u0020\u0020\u0020\u007e\u007e\u007e\u0067\u0072\u006f\u0075\u0070\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0020\u0063\u0065\u006cl\u0020\u0025\u0064\u0020\u006ff\u0020\u0025d\u0020\u0025\u0073\u000a",_fbfbd ,len (_faec ),_edbg ,len (_dabce ),_fdbf );
};if !_fdbf .hasLines (_aabc ){if _cfadg {_ff .Printf ("\u0020\u0020\u0020\u0021\u0021\u0021\u0067\u0072\u006f\u0075\u0070\u0020\u0025d\u0020\u006f\u0066\u0020\u0025\u0064 \u0063\u0065\u006c\u006c\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064 \u004f\u0055\u0054\u000a",_fbfbd ,len (_faec ),_edbg ,len (_dabce ));
};_faee =false ;break ;};};if !_faee {_cbbfb =false ;break ;};};if !_cbbfb {if _cfadg {_fg .Log .Info ("\u0072\u006f\u0077\u0020\u0063o\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u0020\u0064\u006f\u006e\u0027\u0074 \u0073\u0070\u0061\u006e\u0020\u0061\u006c\u006c\u0020\u0063\u0065\u006c\u006c\u0073\u0020\u0069\u006e\u0020\u0072\u006f\u0077\u002e\u0020\u0069\u0067\u006e\u006f\u0072\u0069\u006eg");
};_ecfee =nil ;};if _cfadg &&_ecfee !=nil {_ff .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u002a\u002a*\u0072\u006f\u0077\u0043\u006f\u0072\u0072i\u0064\u006f\u0072\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u000a",_ecfee );};return _ecfee ;
};func _eaf (_fbce []TextMark ,_aecac *int ,_faba TextMark )[]TextMark {_faba .Offset =*_aecac ;_fbce =append (_fbce ,_faba );*_aecac +=len (_faba .Text );return _fbce ;};

// String returns a string descibing `i`.
func (_cgag gridTile )String ()string {_dbea :=func (_cgecc bool ,_ebea string )string {if _cgecc {return _ebea ;};return "\u005f";};return _ff .Sprintf ("\u00256\u002e2\u0066\u0020\u0025\u0031\u0073%\u0031\u0073%\u0031\u0073\u0025\u0031\u0073",_cgag .PdfRectangle ,_dbea (_cgag ._cdfbd ,"\u004c"),_dbea (_cgag ._egdg ,"\u0052"),_dbea (_cgag ._cgff ,"\u0042"),_dbea (_cgag ._bbaa ,"\u0054"));
};func (_efbb rulingList )vertsHorzs ()(rulingList ,rulingList ){var _fccb ,_fgac rulingList ;for _ ,_ecfdd :=range _efbb {switch _ecfdd ._beebc {case _egea :_fccb =append (_fccb ,_ecfdd );case _bbge :_fgac =append (_fgac ,_ecfdd );};};return _fccb ,_fgac ;
};func (_cbbgg paraList )lines ()[]*textLine {var _afffe []*textLine ;for _ ,_edaf :=range _cbbgg {_afffe =append (_afffe ,_edaf ._bged ...);};return _afffe ;};

// ImageExtractOptions contains options for controlling image extraction from
// PDF pages.
type ImageExtractOptions struct{IncludeInlineStencilMasks bool ;};func (_gfbf *subpath )add (_bccf ..._gb .Point ){_gfbf ._fbb =append (_gfbf ._fbb ,_bccf ...)};func (_eceba *textPara )toTextMarks (_abb *int )[]TextMark {if _eceba ._gfce ==nil {return _eceba .toCellTextMarks (_abb );
};var _ecfd []TextMark ;for _addb :=0;_addb < _eceba ._gfce ._acde ;_addb ++{for _dedda :=0;_dedda < _eceba ._gfce ._eagd ;_dedda ++{_adgd :=_eceba ._gfce .get (_dedda ,_addb );if _adgd ==nil {_ecfd =_bgc (_ecfd ,_abb ,"\u0009");}else {_cfbcf :=_adgd .toCellTextMarks (_abb );
_ecfd =append (_ecfd ,_cfbcf ...);};_ecfd =_bgc (_ecfd ,_abb ,"\u0020");};if _addb < _eceba ._gfce ._acde -1{_ecfd =_bgc (_ecfd ,_abb ,"\u000a");};};return _ecfd ;};func _gaaa (_ddea ,_fdbad _ge .PdfRectangle )bool {return _ddea .Llx <=_fdbad .Llx &&_fdbad .Urx <=_ddea .Urx &&_ddea .Lly <=_fdbad .Lly &&_fdbad .Ury <=_ddea .Ury ;
};func (_becdc paraList )toTextMarks ()[]TextMark {_ecfe :=0;var _ebfb []TextMark ;for _aafb ,_ebff :=range _becdc {if _ebff ._dddbf {continue ;};_abge :=_ebff .toTextMarks (&_ecfe );_ebfb =append (_ebfb ,_abge ...);if _aafb !=len (_becdc )-1{if _deea (_ebff ,_becdc [_aafb +1]){_ebfb =_bgc (_ebfb ,&_ecfe ,"\u0020");
}else {_ebfb =_bgc (_ebfb ,&_ecfe ,"\u000a");_ebfb =_bgc (_ebfb ,&_ecfe ,"\u000a");};};};_ebfb =_bgc (_ebfb ,&_ecfe ,"\u000a");_ebfb =_bgc (_ebfb ,&_ecfe ,"\u000a");return _ebfb ;};func (_fbag *shapesState )closePath (){if _fbag ._dbb {_fbag ._ccf =append (_fbag ._ccf ,_eebd (_fbag ._gbb ));
_fbag ._dbb =false ;}else if len (_fbag ._ccf )==0{if _gbdf {_fg .Log .Debug ("\u0063\u006c\u006f\u0073eP\u0061\u0074\u0068\u0020\u0077\u0069\u0074\u0068\u0020\u006e\u006f\u0020\u0070\u0061t\u0068");};_fbag ._dbb =false ;return ;};_fbag ._ccf [len (_fbag ._ccf )-1].close ();
if _gbdf {_fg .Log .Info ("\u0063\u006c\u006f\u0073\u0065\u0050\u0061\u0074\u0068\u003a\u0020\u0025\u0073",_fbag );};};func (_fba *textObject )getCurrentFont ()*_ge .PdfFont {_bdae :=_fba ._cada ._baeg ;if _bdae ==nil {_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020U\u0073\u0069\u006e\u0067\u0020d\u0065\u0066a\u0075\u006c\u0074\u002e");
return _ge .DefaultFont ();};return _bdae ;};func (_ecae *textTable )computeBbox ()_ge .PdfRectangle {var _befd _ge .PdfRectangle ;_gcce :=false ;for _fbgda :=0;_fbgda < _ecae ._acde ;_fbgda ++{for _bbaf :=0;_bbaf < _ecae ._eagd ;_bbaf ++{_gdfgf :=_ecae .get (_bbaf ,_fbgda );
if _gdfgf ==nil {continue ;};if !_gcce {_befd =_gdfgf .PdfRectangle ;_gcce =true ;}else {_befd =_gede (_befd ,_gdfgf .PdfRectangle );};};};return _befd ;};func (_efd *wordBag )firstReadingIndex (_gaec int )int {_dfg :=_efd .firstWord (_gaec )._efaa ;_bdaf :=float64 (_gaec +1)*_gdd ;
_abec :=_bdaf +_befe *_dfg ;_dafe :=_gaec ;for _ ,_gffb :=range _efd .depthBand (_bdaf ,_abec ){if _edb (_efd .firstWord (_gffb ),_efd .firstWord (_dafe ))< 0{_dafe =_gffb ;};};return _dafe ;};func (_dadgb paraList )sortReadingOrder (){_fg .Log .Trace ("\u0073\u006fr\u0074\u0052\u0065\u0061\u0064i\u006e\u0067\u004f\u0072\u0064e\u0072\u003a\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_dadgb ));
if len (_dadgb )<=1{return ;};_dadgb .computeEBBoxes ();_bf .Slice (_dadgb ,func (_begg ,_afdb int )bool {return _cbace (_dadgb [_begg ],_dadgb [_afdb ])<=0});_dgfb :=_dadgb .topoOrder ();_dadgb .reorder (_dgfb );};type cachedImage struct{_ebd *_ge .Image ;
_ba _ge .PdfColorspace ;};

// RangeOffset returns the TextMarks in `ma` that overlap text[start:end] in the extracted text.
// These are tm: `start` <= tm.Offset + len(tm.Text) && tm.Offset < `end` where
// `start` and `end` are offsets in the extracted text.
// NOTE: TextMarks can contain multiple characters. e.g. "ffi" for the ï¬ƒ ligature so the first and
// last elements of the returned TextMarkArray may only partially overlap text[start:end].
func (_dgca *TextMarkArray )RangeOffset (start ,end int )(*TextMarkArray ,error ){if _dgca ==nil {return nil ,_c .New ("\u006da\u003d\u003d\u006e\u0069\u006c");};if end < start {return nil ,_ff .Errorf ("\u0065\u006e\u0064\u0020\u003c\u0020\u0073\u0074\u0061\u0072\u0074\u002e\u0020\u0052\u0061n\u0067\u0065\u004f\u0066\u0066\u0073\u0065\u0074\u0020\u006e\u006f\u0074\u0020d\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020\u0073\u0074\u0061\u0072t=\u0025\u0064\u0020\u0065\u006e\u0064\u003d\u0025\u0064\u0020",start ,end );
};_fge :=len (_dgca ._fffd );if _fge ==0{return _dgca ,nil ;};if start < _dgca ._fffd [0].Offset {start =_dgca ._fffd [0].Offset ;};if end > _dgca ._fffd [_fge -1].Offset +1{end =_dgca ._fffd [_fge -1].Offset +1;};_bga :=_bf .Search (_fge ,func (_fffgg int )bool {return _dgca ._fffd [_fffgg ].Offset +len (_dgca ._fffd [_fffgg ].Text )-1>=start });
if !(0<=_bga &&_bga < _fge ){_cdgd :=_ff .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020\u0072\u0061\u006e\u0067\u0065\u002e\u0020\u0073\u0074\u0061\u0072\u0074\u003d%\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009 \u006c\u0061\u0073\u0074\u003d%\u0076",start ,_bga ,_fge ,_dgca ._fffd [0],_dgca ._fffd [_fge -1]);
return nil ,_cdgd ;};_bbfg :=_bf .Search (_fge ,func (_ffdg int )bool {return _dgca ._fffd [_ffdg ].Offset > end -1});if !(0<=_bbfg &&_bbfg < _fge ){_aga :=_ff .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020r\u0061\u006e\u0067e\u002e\u0020\u0065n\u0064\u003d%\u0064\u0020\u0069\u0045\u006e\u0064=\u0025d \u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d\u0025\u0076",end ,_bbfg ,_fge ,_dgca ._fffd [0],_dgca ._fffd [_fge -1]);
return nil ,_aga ;};if _bbfg <=_bga {return nil ,_ff .Errorf ("\u0069\u0045\u006e\u0064\u0020\u003c=\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003a\u0020\u0073\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u0065\u006ed\u003d\u0025\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020i\u0045n\u0064\u003d\u0025\u0064",start ,end ,_bga ,_bbfg );
};return &TextMarkArray {_fffd :_dgca ._fffd [_bga :_bbfg ]},nil ;};func _ceefd (_edafd []pathSection ){if _bbbd < 0.0{return ;};if _ffee {_fg .Log .Info ("\u0067\u0072\u0061\u006e\u0075\u006c\u0061\u0072\u0069\u007a\u0065\u003a\u0020\u0025\u0064 \u0073u\u0062\u0070\u0061\u0074\u0068\u0020\u0073\u0065\u0063\u0074\u0069\u006f\u006e\u0073",len (_edafd ));
};for _begcf ,_cbad :=range _edafd {for _gdcb ,_edcc :=range _cbad ._cbfa {for _ddfda ,_bgcaa :=range _edcc ._fbb {_edcc ._fbb [_ddfda ]=_gb .Point {X :_gabb (_bgcaa .X ),Y :_gabb (_bgcaa .Y )};if _ffee {_fecef :=_edcc ._fbb [_ddfda ];if !_ebdbe (_bgcaa ,_fecef ){_fdgbe :=_gb .Point {X :_fecef .X -_bgcaa .X ,Y :_fecef .Y -_bgcaa .Y };
_ff .Printf ("\u0025\u0034d \u002d\u0020\u00254\u0064\u0020\u002d\u0020%4d\u003a %\u002e\u0032\u0066\u0020\u2192\u0020\u0025.2\u0066\u0020\u0028\u0025\u0067\u0029\u000a",_begcf ,_gdcb ,_ddfda ,_bgcaa ,_fecef ,_fdgbe );};};};};};};type textLine struct{_ge .PdfRectangle ;
_bcee float64 ;_fbeb []*textWord ;_fbbc float64 ;};

// String returns a human readable description of `s`.
func (_bdbf intSet )String ()string {var _aecgb []int ;for _cdbbe :=range _bdbf {if _bdbf .has (_cdbbe ){_aecgb =append (_aecgb ,_cdbbe );};};_bf .Ints (_aecgb );return _ff .Sprintf ("\u0025\u002b\u0076",_aecgb );};func _ecdgg (_gfcca ,_aeedc float64 )bool {return _gfcca /_d .Max (_ecde ,_aeedc )< _baff };
func _fbfde (_aggd float64 )bool {return _d .Abs (_aggd )< _dbg };func (_dgb *textObject )moveLP (_cdff ,_eaa float64 ){_dgb ._fec .Concat (_gb .NewMatrix (1,0,0,1,_cdff ,_eaa ));_dgb ._bfee =_dgb ._fec ;};func (_efgf *shapesState )cubicTo (_edad ,_dag ,_dddb ,_gab ,_facb ,_gadgg float64 ){if _gbdf {_fg .Log .Info ("\u0063\u0075\u0062\u0069\u0063\u0054\u006f\u003a");
};_efgf .addPoint (_facb ,_gadgg );};func (_beff *textTable )bbox ()_ge .PdfRectangle {return _beff .PdfRectangle };func _cfcd (_edff ,_cbgg _gb .Point )rulingKind {_gcgge :=_d .Abs (_edff .X -_cbgg .X );_caeaf :=_d .Abs (_edff .Y -_cbgg .Y );return _ccac (_gcgge ,_caeaf ,_def );
};func (_fbeff compositeCell )parasBBox ()(paraList ,_ge .PdfRectangle ){return _fbeff .paraList ,_fbeff .PdfRectangle ;};func (_cfcg *wordBag )sort (){for _ ,_acdd :=range _cfcg ._dbee {_bf .Slice (_acdd ,func (_cacc ,_dfae int )bool {return _edb (_acdd [_cacc ],_acdd [_dfae ])< 0});
};};func (_afebg rulingList )snapToGroupsDirection ()rulingList {_afebg .sortStrict ();_fbff :=make (map[*ruling ]rulingList ,len (_afebg ));_agdga :=_afebg [0];_bbcbd :=func (_eaee *ruling ){_agdga =_eaee ;_fbff [_agdga ]=rulingList {_eaee }};_bbcbd (_afebg [0]);
for _ ,_fdbcd :=range _afebg [1:]{if _fdbcd ._adggg < _agdga ._adggg -_gacb {_fg .Log .Error ("\u0073\u006e\u0061\u0070T\u006f\u0047\u0072\u006f\u0075\u0070\u0073\u0044\u0069r\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0057\u0072\u006f\u006e\u0067\u0020\u0070\u0072\u0069\u006da\u0072\u0079\u0020\u006f\u0072d\u0065\u0072\u002e\u000a\u0009\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0020\u0076\u003d\u0025\u0073",_agdga ,_fdbcd );
};if _fdbcd ._adggg > _agdga ._adggg +_dbg {_bbcbd (_fdbcd );}else {_fbff [_agdga ]=append (_fbff [_agdga ],_fdbcd );};};_fbgd :=make (map[*ruling ]float64 ,len (_fbff ));_adbbbd :=make (map[*ruling ]*ruling ,len (_afebg ));for _dagdg ,_dfegd :=range _fbff {_fbgd [_dagdg ]=_dfegd .mergePrimary ();
for _ ,_gfga :=range _dfegd {_adbbbd [_gfga ]=_dagdg ;};};for _ ,_ddfdd :=range _afebg {_ddfdd ._adggg =_fbgd [_adbbbd [_ddfdd ]];};_dbcb :=make (rulingList ,0,len (_afebg ));for _ ,_cabac :=range _fbff {_aeecc :=_cabac .splitSec ();for _bddca ,_fecc :=range _aeecc {_ebdfg :=_fecc .merge ();
if len (_dbcb )> 0{_befab :=_dbcb [len (_dbcb )-1];if _befab .alignsPrimary (_ebdfg )&&_befab .alignsSec (_ebdfg ){_fg .Log .Error ("\u0073\u006e\u0061\u0070\u0054\u006fG\u0072\u006f\u0075\u0070\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0044\u0075\u0070\u006ci\u0063\u0061\u0074\u0065\u0020\u0069\u003d\u0025\u0064\u000a\u0009\u0077\u003d\u0025s\u000a\t\u0076\u003d\u0025\u0073",_bddca ,_befab ,_ebdfg );
continue ;};};_dbcb =append (_dbcb ,_ebdfg );};};_dbcb .sortStrict ();return _dbcb ;};func (_fabea paraList )findTableGrid (_egbcd gridTiling )(*textTable ,map[*textPara ]struct{}){_baec :=len (_egbcd ._cfde );_eefe :=len (_egbcd ._bgbge );_eacgd :=textTable {_gbfc :true ,_eagd :_baec ,_acde :_eefe ,_ccacd :make (map[uint64 ]*textPara ,_baec *_eefe ),_fafc :make (map[uint64 ]compositeCell ,_baec *_eefe )};
_dfefb :=make (map[*textPara ]struct{});_afafd :=int ((1.0-_gdda )*float64 (_baec *_eefe ));_ddagd :=0;if _cagc {_fg .Log .Info ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0064\u0020\u0078\u0020%\u0064",_baec ,_eefe );
};for _abdd ,_eadba :=range _egbcd ._bgbge {_bfda ,_abaf :=_egbcd ._fddeg [_eadba ];if !_abaf {continue ;};for _cddd ,_cbddf :=range _egbcd ._cfde {_fggef ,_ffbd :=_bfda [_cbddf ];if !_ffbd {continue ;};_dfaae :=_fabea .inTile (_fggef );if len (_dfaae )==0{_ddagd ++;
if _ddagd > _afafd {if _cagc {_fg .Log .Info ("\u0021\u006e\u0075m\u0045\u006d\u0070\u0074\u0079\u003d\u0025\u0064",_ddagd );};return nil ,nil ;};}else {_eacgd .putComposite (_cddd ,_abdd ,_dfaae ,_fggef .PdfRectangle );for _ ,_cfcc :=range _dfaae {_dfefb [_cfcc ]=struct{}{};
};};};};_ddba :=0;for _ffec :=0;_ffec < _baec ;_ffec ++{_feeb :=_eacgd .get (_ffec ,0);if _feeb ==nil ||!_feeb ._dddbf {_ddba ++;};};if _ddba ==0{if _cagc {_fg .Log .Info ("\u0021\u006e\u0075m\u0048\u0065\u0061\u0064\u0065\u0072\u003d\u0030");};return nil ,nil ;
};_fbfdf :=_eacgd .reduceTiling (_egbcd ,_efcae );_fbfdf =_fbfdf .subdivide ();return _fbfdf ,_dfefb ;};func (_egce *subpath )clear (){*_egce =subpath {}};func _dfbfd (_agge []TextMark ,_gadd *int )[]TextMark {_fdfde :=_agge [len (_agge )-1];_bebdc :=[]rune (_fdfde .Text );
if len (_bebdc )==1{_agge =_agge [:len (_agge )-1];_bfbca :=_agge [len (_agge )-1];*_gadd =_bfbca .Offset +len (_bfbca .Text );}else {_egbc :=_fbaa (_fdfde .Text );*_gadd +=len (_egbc )-len (_fdfde .Text );_fdfde .Text =_egbc ;};return _agge ;};func (_bdbcc *textPara )text ()string {_bgef :=new (_g .Buffer );
_bdbcc .writeText (_bgef );return _bgef .String ();};func (_bdab *textTable )emptyColumn (_ccde int )bool {for _cgdfe :=0;_cgdfe < _bdab ._acde ;_cgdfe ++{_cfdaa :=_bdab .get (_ccde ,_cgdfe );if _cfdaa !=nil &&_cfdaa .text ()!=""{return false ;};};return true ;
};const (_gcd =true ;_ddbf =true ;_eacg =true ;_dgcg =false ;_dbd =false ;_fegd =6;_gdgg =3.0;_dfga =200;_dfec =true ;_daab =true ;_fca =true ;_cddae =true ;_ggfa =false ;);type markKind int ;var _geee =map[markKind ]string {_afdf :"\u0073\u0074\u0072\u006f\u006b\u0065",_afda :"\u0066\u0069\u006c\u006c",_fgbg :"\u0061u\u0067\u006d\u0065\u006e\u0074"};
func _eefg (_bdafd string )bool {if _cf .RuneCountInString (_bdafd )< _febcd {return false ;};_bcff ,_acb :=_cf .DecodeLastRuneInString (_bdafd );if _acb <=0||!_cb .Is (_cb .Hyphen ,_bcff ){return false ;};_bcff ,_acb =_cf .DecodeLastRuneInString (_bdafd [:len (_bdafd )-_acb ]);
return _acb > 0&&!_cb .IsSpace (_bcff );};func _bgffe (_dccd float64 ,_cbcff int )int {if _cbcff ==0{_cbcff =1;};_cgec :=float64 (_cbcff );return int (_d .Round (_dccd /_cgec )*_cgec );};func (_bcdc *ruling )equals (_fcdeg *ruling )bool {return _bcdc ._beebc ==_fcdeg ._beebc &&_adff (_bcdc ._adggg ,_fcdeg ._adggg )&&_adff (_bcdc ._ceggf ,_fcdeg ._ceggf )&&_adff (_bcdc ._gbcd ,_fcdeg ._gbcd );
};func (_dbeg *wordBag )empty (_gaeda int )bool {_ ,_bcd :=_dbeg ._dbee [_gaeda ];return !_bcd };func (_cbca rulingList )log (_fece string ){if !_ffee {return ;};_fg .Log .Info ("\u0023\u0023\u0023\u0020\u0025\u0031\u0030\u0073\u003a\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_fece ,_cbca .String ());
for _adbf ,_bcffe :=range _cbca {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_adbf ,_bcffe .String ());};};func _bagc (_bee *_fd .ContentStreamOperation )(float64 ,error ){if len (_bee .Params )!=1{_eacf :=_c .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");
_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_bee .Operand ,1,len (_bee .Params ),_bee .Params );
return 0.0,_eacf ;};return _ac .GetNumberAsFloat (_bee .Params [0]);};func (_cge *textObject )renderText (_abg []byte )error {if _cge ._ceee {_fg .Log .Debug ("\u0072\u0065\u006e\u0064\u0065r\u0054\u0065\u0078\u0074\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069\u0064 \u0066\u006f\u006e\u0074\u002e\u0020\u004e\u006f\u0074\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u002e");
return nil ;};_cgea :=_cge .getCurrentFont ();_faaf :=_cgea .BytesToCharcodes (_abg );_eccb ,_gac ,_afd :=_cgea .CharcodesToStrings (_faaf );if _afd > 0{_fg .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_gac ,_afd );
};_cge ._cada ._cbda +=_gac ;_cge ._cada ._dfdg +=_afd ;_efg :=_cge ._cada ;_gff :=_efg ._ecdc ;_acegc :=_efg ._aad /100.0;_abcc :=_gadg ;if _cgea .Subtype ()=="\u0054\u0079\u0070e\u0033"{_abcc =1;};_bdb ,_cag :=_cgea .GetRuneMetrics (' ');if !_cag {_bdb ,_cag =_cgea .GetCharMetrics (32);
};if !_cag {_bdb ,_ =_ge .DefaultFont ().GetRuneMetrics (' ');};_aec :=_bdb .Wx *_abcc ;_fg .Log .Trace ("\u0073p\u0061\u0063e\u0057\u0069\u0064t\u0068\u003d\u0025\u002e\u0032\u0066\u0020t\u0065\u0078\u0074\u003d\u0025\u0071 \u0066\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0066\u006f\u006et\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",_aec ,_eccb ,_cgea ,_gff );
_aada :=_gb .NewMatrix (_gff *_acegc ,0,0,_gff ,0,_efg ._fcca );if _eefa {_fg .Log .Info ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0074\u0065\u0078t\u0073\u003d\u0025\u0071",len (_faaf ),_faaf ,_eccb );
};_fg .Log .Trace ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0072\u0075\u006ee\u0073\u003d\u0025\u0071",len (_faaf ),_faaf ,len (_eccb ));_feef :=_cge .getFillColor ();
_ebce :=_cge .getStrokeColor ();for _acab ,_gafc :=range _eccb {_bac :=[]rune (_gafc );if len (_bac )==1&&_bac [0]=='\x00'{continue ;};_daa :=_faaf [_acab ];_fgdf :=_cge ._gaf .CTM .Mult (_cge ._bfee ).Mult (_aada );_efe :=0.0;if len (_bac )==1&&_bac [0]==32{_efe =_efg ._acag ;
};_bbc ,_ecea :=_cgea .GetCharMetrics (_daa );if !_ecea {_fg .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u004e\u006f \u006d\u0065\u0074r\u0069\u0063\u0020\u0066\u006f\u0072\u0020\u0063\u006fde\u003d\u0025\u0064 \u0072\u003d0\u0078\u0025\u0030\u0034\u0078\u003d%\u002b\u0071 \u0025\u0073",_daa ,_bac ,_bac ,_cgea );
return _ff .Errorf ("\u006e\u006f\u0020\u0063\u0068\u0061\u0072\u0020\u006d\u0065\u0074\u0072\u0069\u0063\u0073:\u0020f\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0063\u006f\u0064\u0065\u003d\u0025\u0064",_cgea .String (),_daa );};_bacg :=_gb .Point {X :_bbc .Wx *_abcc ,Y :_bbc .Wy *_abcc };
_fggf :=_gb .Point {X :(_bacg .X *_gff +_efe )*_acegc };_fbfg :=_gb .Point {X :(_bacg .X *_gff +_efg ._fbfc +_efe )*_acegc };if _eefa {_fg .Log .Info ("\u0074\u0066\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0063\u003d\u0025\u002e\u0032f\u0020t\u0077\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_gff ,_efg ._fbfc ,_efg ._acag ,_acegc );
_fg .Log .Info ("\u0064x\u002c\u0064\u0079\u003d%\u002e\u0033\u0066\u0020\u00740\u003d%\u002e3\u0066\u0020\u0074\u003d\u0025\u002e\u0033f",_bacg ,_fggf ,_fbfg );};_febd :=_ddee (_fggf );_cfe :=_ddee (_fbfg );_aea :=_cge ._gaf .CTM .Mult (_cge ._bfee ).Mult (_febd );
if _aeec {_fg .Log .Info ("e\u006e\u0064\u003a\u000a\tC\u0054M\u003d\u0025\u0073\u000a\u0009 \u0074\u006d\u003d\u0025\u0073\u000a"+"\u0009\u0020t\u0064\u003d\u0025s\u0020\u0078\u006c\u0061\u0074\u003d\u0025\u0073\u000a"+"\u0009t\u0064\u0030\u003d\u0025s\u000a\u0009\u0020\u0020\u2192 \u0025s\u0020x\u006c\u0061\u0074\u003d\u0025\u0073",_cge ._gaf .CTM ,_cge ._bfee ,_cfe ,_gcgd (_cge ._gaf .CTM .Mult (_cge ._bfee ).Mult (_cfe )),_febd ,_aea ,_gcgd (_aea ));
};_bfffc ,_bfccg :=_cge .newTextMark (_eb .ExpandLigatures (_bac ),_fgdf ,_gcgd (_aea ),_d .Abs (_aec *_fgdf .ScalingFactorX ()),_cgea ,_cge ._cada ._fbfc ,_feef ,_ebce );if !_bfccg {_fg .Log .Debug ("\u0054\u0065\u0078\u0074\u0020\u006d\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069d\u0065 \u0070\u0061\u0067\u0065\u002e\u0020\u0053\u006b\u0069\u0070\u0070\u0069\u006e\u0067");
continue ;};if _cgea ==nil {_fg .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u002e");}else if _cgea .Encoder ()==nil {_fg .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020N\u006f\u0020\u0065\u006e\u0063\u006f\u0064\u0069\u006eg\u002e\u0020\u0066o\u006et\u003d\u0025\u0073",_cgea );
}else {if _accf ,_bdag :=_cgea .Encoder ().CharcodeToRune (_daa );_bdag {_bfffc ._eebcd =string (_accf );};};_fg .Log .Trace ("i\u003d\u0025\u0064\u0020\u0063\u006fd\u0065\u003d\u0025\u0064\u0020\u006d\u0061\u0072\u006b=\u0025\u0073\u0020t\u0072m\u003d\u0025\u0073",_acab ,_daa ,_bfffc ,_fgdf );
_cge ._ccb =append (_cge ._ccb ,&_bfffc );_cge ._bfee .Concat (_cfe );};return nil ;};func (_gca *textObject )getStrokeColor ()_fe .Color {return _ddae (_gca ._gaf .ColorspaceStroking ,_gca ._gaf .ColorStroking );};

// Text returns the extracted page text.
func (_bbg PageText )Text ()string {return _bbg ._geg };func (_eeddg paraList )findTables (_dgfa []gridTiling )[]*textTable {_eeddg .addNeighbours ();_bf .Slice (_eeddg ,func (_bbga ,_bbgab int )bool {return _afef (_eeddg [_bbga ],_eeddg [_bbgab ])< 0});
var _adcc []*textTable ;if _dfec {_cefda :=_eeddg .findGridTables (_dgfa );_adcc =append (_adcc ,_cefda ...);};if _daab {_acaf :=_eeddg .findTextTables ();_adcc =append (_adcc ,_acaf ...);};return _adcc ;};func _cgge (_efa ,_caea _ge .PdfRectangle )(_ge .PdfRectangle ,bool ){if !_fdcd (_efa ,_caea ){return _ge .PdfRectangle {},false ;
};return _ge .PdfRectangle {Llx :_d .Max (_efa .Llx ,_caea .Llx ),Urx :_d .Min (_efa .Urx ,_caea .Urx ),Lly :_d .Max (_efa .Lly ,_caea .Lly ),Ury :_d .Min (_efa .Ury ,_caea .Ury )},true ;};type gridTiling struct{_ge .PdfRectangle ;_cfde []float64 ;_bgbge []float64 ;
_fddeg map[float64 ]map[float64 ]gridTile ;};func _cefb (_cdbf ,_fdbe _gb .Point )rulingKind {_fbfdc :=_d .Abs (_cdbf .X -_fdbe .X );_cefa :=_d .Abs (_cdbf .Y -_fdbe .Y );return _ccac (_fbfdc ,_cefa ,_baff );};func _eebd (_cbec _gb .Point )*subpath {return &subpath {_fbb :[]_gb .Point {_cbec }}};
func (_edga *textPara )writeText (_aeafb _f .Writer ){if _edga ._gfce ==nil {_edga .writeCellText (_aeafb );return ;};for _cgb :=0;_cgb < _edga ._gfce ._acde ;_cgb ++{for _dda :=0;_dda < _edga ._gfce ._eagd ;_dda ++{_cegc :=_edga ._gfce .get (_dda ,_cgb );
if _cegc ==nil {_aeafb .Write ([]byte ("\u0009"));}else {_cegc .writeCellText (_aeafb );};_aeafb .Write ([]byte ("\u0020"));};if _cgb < _edga ._gfce ._acde -1{_aeafb .Write ([]byte ("\u000a"));};};};

// String returns a string describing the current state of the textState stack.
func (_aceg *stateStack )String ()string {_cbge :=[]string {_ff .Sprintf ("\u002d\u002d\u002d\u002d f\u006f\u006e\u0074\u0020\u0073\u0074\u0061\u0063\u006b\u003a\u0020\u0025\u0064",len (*_aceg ))};for _abf ,_dea :=range *_aceg {_acc :="\u003c\u006e\u0069l\u003e";
if _dea !=nil {_acc =_dea .String ();};_cbge =append (_cbge ,_ff .Sprintf ("\u0009\u0025\u0032\u0064\u003a\u0020\u0025\u0073",_abf ,_acc ));};return _ad .Join (_cbge ,"\u000a");};func (_dbfe paraList )tables ()[]TextTable {var _acbe []TextTable ;if _cfadg {_fg .Log .Info ("\u0070\u0061\u0072\u0061\u0073\u002e\u0074\u0061\u0062\u006c\u0065\u0073\u003a");
};for _ ,_fdfe :=range _dbfe {_cbdeb :=_fdfe ._gfce ;if _cbdeb !=nil &&_cbdeb .isExportable (){_acbe =append (_acbe ,_cbdeb .toTextTable ());};};return _acbe ;};func (_caba *wordBag )applyRemovals (_cac map[int ]map[*textWord ]struct{}){for _bgfe ,_cfgf :=range _cac {if len (_cfgf )==0{continue ;
};_fbed :=_caba ._dbee [_bgfe ];_gadc :=len (_fbed )-len (_cfgf );if _gadc ==0{delete (_caba ._dbee ,_bgfe );continue ;};_cbdc :=make ([]*textWord ,_gadc );_agcg :=0;for _ ,_cebc :=range _fbed {if _ ,_aab :=_cfgf [_cebc ];!_aab {_cbdc [_agcg ]=_cebc ;_agcg ++;
};};_caba ._dbee [_bgfe ]=_cbdc ;};};func (_daed *ruling )intersects (_dcag *ruling )bool {_bcebc :=(_daed ._beebc ==_egea &&_dcag ._beebc ==_bbge )||(_dcag ._beebc ==_egea &&_daed ._beebc ==_bbge );_aefa :=func (_beag ,_ebdaac *ruling )bool {return _beag ._ceggf -_cdga <=_ebdaac ._adggg &&_ebdaac ._adggg <=_beag ._gbcd +_cdga ;
};_gfab :=_aefa (_daed ,_dcag );_aaga :=_aefa (_dcag ,_daed );if _ffee {_ff .Printf ("\u0020\u0020\u0020\u0020\u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003a\u0020\u0020\u006fr\u0074\u0068\u006f\u0067\u006f\u006e\u0061l\u003d\u0025\u0074\u0020\u006f\u0031\u003d\u0025\u0074\u0020\u006f2\u003d\u0025\u0074\u0020\u2192\u0020\u0025\u0074\u000a"+"\u0020\u0020\u0020 \u0020\u0020\u0020\u0076\u003d\u0025\u0073\u000a"+" \u0020\u0020\u0020\u0020\u0020\u0077\u003d\u0025\u0073\u000a",_bcebc ,_gfab ,_aaga ,_bcebc &&_gfab &&_aaga ,_daed ,_dcag );
};return _bcebc &&_gfab &&_aaga ;};func _egge (_baaa bounded )float64 {return -_baaa .bbox ().Lly };

// Len returns the number of TextMarks in `ma`.
func (_ffag *TextMarkArray )Len ()int {if _ffag ==nil {return 0;};return len (_ffag ._fffd );};func (_bfed *wordBag )getDepthIdx (_cffae float64 )int {_fbee :=_bfed .depthIndexes ();_bdbc :=_becd (_cffae );if _bdbc < _fbee [0]{return _fbee [0];};if _bdbc > _fbee [len (_fbee )-1]{return _fbee [len (_fbee )-1];
};return _bdbc ;};

// TextMark represents extracted text on a page with information regarding both textual content,
// formatting (font and size) and positioning.
// It is the smallest unit of text on a PDF page, typically a single character.
//
// getBBox() in test_text.go shows how to compute bounding boxes of substrings of extracted text.
// The following code extracts the text on PDF page `page` into `text` then finds the bounding box
// `bbox` of substring `term` in `text`.
//
//     ex, _ := New(page)
//     // handle errors
//     pageText, _, _, err := ex.ExtractPageText()
//     // handle errors
//     text := pageText.Text()
//     textMarks := pageText.Marks()
//
//     	start := strings.Index(text, term)
//      end := start + len(term)
//      spanMarks, err := textMarks.RangeOffset(start, end)
//      // handle errors
//      bbox, ok := spanMarks.BBox()
//      // handle errors
type TextMark struct{

// Text is the extracted text.
Text string ;

// Original is the text in the PDF. It has not been decoded like `Text`.
Original string ;

// BBox is the bounding box of the text.
BBox _ge .PdfRectangle ;

// Font is the font the text was drawn with.
Font *_ge .PdfFont ;

// FontSize is the font size the text was drawn with.
FontSize float64 ;

// Offset is the offset of the start of TextMark.Text in the extracted text. If you do this
//   text, textMarks := pageText.Text(), pageText.Marks()
//   marks := textMarks.Elements()
// then marks[i].Offset is the offset of marks[i].Text in text.
Offset int ;

// Meta is set true for spaces and line breaks that we insert in the extracted text. We insert
// spaces (line breaks) when we see characters that are over a threshold horizontal (vertical)
//  distance  apart. See wordJoiner (lineJoiner) in PageText.computeViews().
Meta bool ;

// FillColor is the fill color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
FillColor _fe .Color ;

// StrokeColor is the stroke color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
StrokeColor _fe .Color ;

// Orientation is the text orientation
Orientation int ;};func (_edbaa *textTable )toTextTable ()TextTable {if _cfadg {_fg .Log .Info ("t\u006fT\u0065\u0078\u0074\u0054\u0061\u0062\u006c\u0065:\u0020\u0025\u0064\u0020x \u0025\u0064",_edbaa ._eagd ,_edbaa ._acde );};_bfefb :=make ([][]TableCell ,_edbaa ._acde );
for _gfafg :=0;_gfafg < _edbaa ._acde ;_gfafg ++{_bfefb [_gfafg ]=make ([]TableCell ,_edbaa ._eagd );for _bcgcb :=0;_bcgcb < _edbaa ._eagd ;_bcgcb ++{_gceg :=_edbaa .get (_bcgcb ,_gfafg );if _gceg ==nil {continue ;};if _cfadg {_ff .Printf ("\u0025\u0034\u0064 \u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_bcgcb ,_gfafg ,_gceg );
};_bfefb [_gfafg ][_bcgcb ].Text =_gceg .text ();_bbag :=0;_bfefb [_gfafg ][_bcgcb ].Marks ._fffd =_gceg .toTextMarks (&_bbag );};};return TextTable {W :_edbaa ._eagd ,H :_edbaa ._acde ,Cells :_bfefb };};func (_baacc rulingList )merge ()*ruling {_eggd :=_baacc [0]._adggg ;
_gge :=_baacc [0]._ceggf ;_efef :=_baacc [0]._gbcd ;for _ ,_gbebg :=range _baacc [1:]{_eggd +=_gbebg ._adggg ;if _gbebg ._ceggf < _gge {_gge =_gbebg ._ceggf ;};if _gbebg ._gbcd > _efef {_efef =_gbebg ._gbcd ;};};_adgb :=&ruling {_beebc :_baacc [0]._beebc ,_edba :_baacc [0]._edba ,Color :_baacc [0].Color ,_adggg :_eggd /float64 (len (_baacc )),_ceggf :_gge ,_gbcd :_efef };
if _aadg {_fg .Log .Info ("\u006de\u0072g\u0065\u003a\u0020\u0025\u0032d\u0020\u0076e\u0063\u0073\u0020\u0025\u0073",len (_baacc ),_adgb );for _ceefa ,_facd :=range _baacc {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ceefa ,_facd );
};};return _adgb ;};func (_bgbgd *textTable )logComposite (_gaag string ){if !_cfadg {return ;};_fg .Log .Info ("\u007e~\u007eP\u0061\u0072\u0061\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_bgbgd ._eagd ,_bgbgd ._acde ,_gaag );_ff .Printf ("\u0025\u0035\u0073 \u007c","");
for _dbaag :=0;_dbaag < _bgbgd ._eagd ;_dbaag ++{_ff .Printf ("\u0025\u0033\u0064 \u007c",_dbaag );};_ff .Println ("");_ff .Printf ("\u0025\u0035\u0073 \u002b","");for _gcag :=0;_gcag < _bgbgd ._eagd ;_gcag ++{_ff .Printf ("\u0025\u0033\u0073 \u002b","\u002d\u002d\u002d");
};_ff .Println ("");for _dbad :=0;_dbad < _bgbgd ._acde ;_dbad ++{_ff .Printf ("\u0025\u0035\u0064 \u007c",_dbad );for _cdacd :=0;_cdacd < _bgbgd ._eagd ;_cdacd ++{_edfce ,_ :=_bgbgd ._fafc [_dgfc (_cdacd ,_dbad )].parasBBox ();_ff .Printf ("\u0025\u0033\u0064 \u007c",len (_edfce ));
};_ff .Println ("");};_fg .Log .Info ("\u007e~\u007eT\u0065\u0078\u0074\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_bgbgd ._eagd ,_bgbgd ._acde ,_gaag );_ff .Printf ("\u0025\u0035\u0073 \u007c","");for _cece :=0;_cece < _bgbgd ._eagd ;_cece ++{_ff .Printf ("\u0025\u0031\u0032\u0064\u0020\u007c",_cece );
};_ff .Println ("");_ff .Printf ("\u0025\u0035\u0073 \u002b","");for _gccc :=0;_gccc < _bgbgd ._eagd ;_gccc ++{_ff .Print ("\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d-\u002d\u002d\u002d\u002b");};_ff .Println ("");for _efec :=0;_efec < _bgbgd ._acde ;
_efec ++{_ff .Printf ("\u0025\u0035\u0064 \u007c",_efec );for _adfff :=0;_adfff < _bgbgd ._eagd ;_adfff ++{_efba ,_ :=_bgbgd ._fafc [_dgfc (_adfff ,_efec )].parasBBox ();_fbadc :="";_ccfc :=_efba .merge ();if _ccfc !=nil {_fbadc =_ccfc .text ();};_fbadc =_ff .Sprintf ("\u0025\u0071",_dgae (_fbadc ,12));
_fbadc =_fbadc [1:len (_fbadc )-1];_ff .Printf ("\u0025\u0031\u0032\u0073\u0020\u007c",_fbadc );};_ff .Println ("");};};type rulingKind int ;func (_bgbf paraList )xNeighbours (_abda float64 )map[*textPara ][]int {_aaccd :=make ([]event ,2*len (_bgbf ));
if _abda ==0{for _gfega ,_gaffa :=range _bgbf {_aaccd [2*_gfega ]=event {_gaffa .Llx ,true ,_gfega };_aaccd [2*_gfega +1]=event {_gaffa .Urx ,false ,_gfega };};}else {for _bgffd ,_fbcfe :=range _bgbf {_aaccd [2*_bgffd ]=event {_fbcfe .Llx -_abda *_fbcfe .fontsize (),true ,_bgffd };
_aaccd [2*_bgffd +1]=event {_fbcfe .Urx +_abda *_fbcfe .fontsize (),false ,_bgffd };};};return _bgbf .eventNeighbours (_aaccd );};func (_agdg compositeCell )hasLines (_fdgg []*textLine )bool {for _ggae ,_gdgga :=range _fdgg {_aacca :=_fdcd (_agdg .PdfRectangle ,_gdgga .PdfRectangle );
if _cfadg {_ff .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u005e\u005e\u005e\u0069\u006e\u0074\u0065\u0072\u0073e\u0063t\u0073\u003d\u0025\u0074\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u000a",_aacca ,_ggae ,len (_fdgg ));_ff .Printf ("\u0020\u0020\u0020\u0020  \u005e\u005e\u005e\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025s\u000a",_agdg );
_ff .Printf ("\u0020 \u0020 \u0020\u0020\u0020\u006c\u0069\u006e\u0065\u003d\u0025\u0073\u000a",_gdgga );};if _aacca {return true ;};};return false ;};

// PageImages represents extracted images on a PDF page with spatial information:
// display position and size.
type PageImages struct{Images []ImageMark ;};func (_gdcg rulingList )augmentGrid ()(rulingList ,rulingList ){_dgfbb ,_cgbb :=_gdcg .vertsHorzs ();if len (_dgfbb )==0||len (_cgbb )==0{return _dgfbb ,_cgbb ;};_baagg ,_fdfa :=_dgfbb ,_cgbb ;_gfff :=_dgfbb .bbox ();
_deafe :=_cgbb .bbox ();if _ffee {_fg .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0056\u003d\u0025\u0036\u002e\u0032\u0066",_gfff );_fg .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0048\u003d\u0025\u0036\u002e\u0032\u0066",_deafe );
};var _cbfg ,_gfee ,_fgeb ,_fffge *ruling ;if _deafe .Llx < _gfff .Llx -_cdga {_cbfg =&ruling {_edba :_fgbg ,_beebc :_egea ,_adggg :_deafe .Llx ,_ceggf :_gfff .Lly ,_gbcd :_gfff .Ury };_dgfbb =append (rulingList {_cbfg },_dgfbb ...);};if _deafe .Urx > _gfff .Urx +_cdga {_gfee =&ruling {_edba :_fgbg ,_beebc :_egea ,_adggg :_deafe .Urx ,_ceggf :_gfff .Lly ,_gbcd :_gfff .Ury };
_dgfbb =append (_dgfbb ,_gfee );};if _gfff .Lly < _deafe .Lly -_cdga {_fgeb =&ruling {_edba :_fgbg ,_beebc :_bbge ,_adggg :_gfff .Lly ,_ceggf :_deafe .Llx ,_gbcd :_deafe .Urx };_cgbb =append (rulingList {_fgeb },_cgbb ...);};if _gfff .Ury > _deafe .Ury +_cdga {_fffge =&ruling {_edba :_fgbg ,_beebc :_bbge ,_adggg :_gfff .Ury ,_ceggf :_deafe .Llx ,_gbcd :_deafe .Urx };
_cgbb =append (_cgbb ,_fffge );};if len (_dgfbb )+len (_cgbb )==len (_gdcg ){return _baagg ,_fdfa ;};_cdfec :=append (_dgfbb ,_cgbb ...);_gdcg .log ("u\u006e\u0061\u0075\u0067\u006d\u0065\u006e\u0074\u0065\u0064");_cdfec .log ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0065d");
return _dgfbb ,_cgbb ;};func (_cbab *subpath )makeRectRuling (_deaf _fe .Color )(*ruling ,bool ){if _cbcf {_fg .Log .Info ("\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0070\u0061\u0074\u0068\u003d\u0025\u0076",_cbab );
};_daaf :=_cbab ._fbb [:4];_beca :=make (map[int ]rulingKind ,len (_daaf ));for _dffa ,_aaccf :=range _daaf {_egag :=_cbab ._fbb [(_dffa +1)%4];_beca [_dffa ]=_cefb (_aaccf ,_egag );if _cbcf {_ff .Printf ("\u0025\u0034\u0064: \u0025\u0073\u0020\u003d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066",_dffa ,_beca [_dffa ],_aaccf ,_egag );
};};if _cbcf {_ff .Printf ("\u0020\u0020\u0020\u006b\u0069\u006e\u0064\u0073\u003d\u0025\u002b\u0076\u000a",_beca );};var _fbfdd ,_dccdc []int ;for _gaca ,_dfeb :=range _beca {switch _dfeb {case _bbge :_dccdc =append (_dccdc ,_gaca );case _egea :_fbfdd =append (_fbfdd ,_gaca );
};};if _cbcf {_ff .Printf ("\u0020\u0020 \u0068\u006f\u0072z\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_dccdc ),_dccdc );_ff .Printf ("\u0020\u0020 \u0076\u0065\u0072t\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_fbfdd ),_fbfdd );
};_ffgb :=(len (_dccdc )==2&&len (_fbfdd )==2)||(len (_dccdc )==2&&len (_fbfdd )==0&&_acgg (_daaf [_dccdc [0]],_daaf [_dccdc [1]]))||(len (_fbfdd )==2&&len (_dccdc )==0&&_agda (_daaf [_fbfdd [0]],_daaf [_fbfdd [1]]));if _cbcf {_ff .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_dccdc ),len (_fbfdd ),_ffgb );
};if !_ffgb {if _cbcf {_fg .Log .Error ("\u0021!\u006d\u0061\u006b\u0065R\u0065\u0063\u0074\u0052\u0075l\u0069n\u0067:\u0020\u0070\u0061\u0074\u0068\u003d\u0025v",_cbab );_ff .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_dccdc ),len (_fbfdd ),_ffgb );
};return &ruling {},false ;};if len (_fbfdd )==0{for _edab ,_aeebc :=range _beca {if _aeebc !=_bbge {_fbfdd =append (_fbfdd ,_edab );};};};if len (_dccdc )==0{for _fccg ,_afabg :=range _beca {if _afabg !=_egea {_dccdc =append (_dccdc ,_fccg );};};};if _cbcf {_fg .Log .Info ("\u006da\u006b\u0065R\u0065\u0063\u0074\u0052u\u006c\u0069\u006eg\u003a\u0020\u0068\u006f\u0072\u007a\u0073\u003d\u0025d \u0076\u0065\u0072t\u0073\u003d%\u0064\u0020\u0070\u006f\u0069\u006et\u0073\u003d%\u0064\u000a"+"\u0009\u0020\u0068o\u0072\u007a\u0073\u003d\u0025\u002b\u0076\u000a"+"\u0009\u0020\u0076e\u0072\u0074\u0073\u003d\u0025\u002b\u0076\u000a"+"\t\u0070\u006f\u0069\u006e\u0074\u0073\u003d\u0025\u002b\u0076",len (_dccdc ),len (_fbfdd ),len (_daaf ),_dccdc ,_fbfdd ,_daaf );
};var _faga ,_dfbac ,_fdaa ,_acca _gb .Point ;if _daaf [_dccdc [0]].Y > _daaf [_dccdc [1]].Y {_fdaa ,_acca =_daaf [_dccdc [0]],_daaf [_dccdc [1]];}else {_fdaa ,_acca =_daaf [_dccdc [1]],_daaf [_dccdc [0]];};if _daaf [_fbfdd [0]].X > _daaf [_fbfdd [1]].X {_faga ,_dfbac =_daaf [_fbfdd [0]],_daaf [_fbfdd [1]];
}else {_faga ,_dfbac =_daaf [_fbfdd [1]],_daaf [_fbfdd [0]];};_affd :=_ge .PdfRectangle {Llx :_faga .X ,Urx :_dfbac .X ,Lly :_acca .Y ,Ury :_fdaa .Y };if _affd .Llx > _affd .Urx {_affd .Llx ,_affd .Urx =_affd .Urx ,_affd .Llx ;};if _affd .Lly > _affd .Ury {_affd .Lly ,_affd .Ury =_affd .Ury ,_affd .Lly ;
};_dccfa :=rectRuling {PdfRectangle :_affd ,_bba :_cedcc (_affd ),Color :_deaf };if _dccfa ._bba ==_bgcgd {if _cbcf {_fg .Log .Error ("\u006da\u006b\u0065\u0052\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006eg\u003a\u0020\u006b\u0069\u006e\u0064\u003d\u006e\u0069\u006c");
};return nil ,false ;};_aecag ,_cega :=_dccfa .asRuling ();if !_cega {if _cbcf {_fg .Log .Error ("\u006da\u006b\u0065\u0052\u0065c\u0074\u0052\u0075\u006c\u0069n\u0067:\u0020!\u0069\u0073\u0052\u0075\u006c\u0069\u006eg");};return nil ,false ;};if _ffee {_ff .Printf ("\u0020\u0020\u0020\u0072\u003d\u0025\u0073\u000a",_aecag .String ());
};return _aecag ,true ;};func (_eeba *shapesState )devicePoint (_aeb ,_bad float64 )_gb .Point {_ccbb :=_eeba ._cfeb .Mult (_eeba ._gaed );_aeb ,_bad =_ccbb .Transform (_aeb ,_bad );return _gb .NewPoint (_aeb ,_bad );};func (_egfa *textTable )isExportable ()bool {if _egfa ._gbfc {return true ;
};_bebeg :=func (_ffcg int )bool {_aafbf :=_egfa .get (0,_ffcg );if _aafbf ==nil {return false ;};_eeab :=_aafbf .text ();_agaa :=_cf .RuneCountInString (_eeab );_defff :=_gfgc .MatchString (_eeab );return _agaa <=1||_defff ;};for _ecedb :=0;_ecedb < _egfa ._acde ;
_ecedb ++{if !_bebeg (_ecedb ){return true ;};};return false ;};func (_fbd *textObject )showTextAdjusted (_fggd *_ac .PdfObjectArray )error {_bfe :=false ;for _ ,_fcc :=range _fggd .Elements (){switch _fcc .(type ){case *_ac .PdfObjectFloat ,*_ac .PdfObjectInteger :_ggg ,_dccf :=_ac .GetNumberAsFloat (_fcc );
if _dccf !=nil {_fg .Log .Debug ("\u0045\u0052\u0052\u004fR\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078t\u0041\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0042\u0061\u0064\u0020\u006e\u0075\u006d\u0065r\u0069\u0063\u0061\u006c\u0020a\u0072\u0067\u002e\u0020\u006f\u003d\u0025\u0073\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_fcc ,_fggd );
return _dccf ;};_gdg ,_bdc :=-_ggg *0.001*_fbd ._cada ._ecdc ,0.0;if _bfe {_bdc ,_gdg =_gdg ,_bdc ;};_cab :=_ddee (_gb .Point {X :_gdg ,Y :_bdc });_fbd ._bfee .Concat (_cab );case *_ac .PdfObjectString :_bgf ,_bfde :=_ac .GetStringBytes (_fcc );if !_bfde {_fg .Log .Trace ("s\u0068\u006f\u0077\u0054\u0065\u0078\u0074\u0041\u0064j\u0075\u0073\u0074\u0065\u0064\u003a\u0020Ba\u0064\u0020\u0073\u0074r\u0069\u006e\u0067\u0020\u0061\u0072\u0067\u002e\u0020o=\u0025\u0073 \u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_fcc ,_fggd );
return _ac .ErrTypeError ;};_fbd .renderText (_bgf );default:_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078\u0074A\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0055\u006e\u0065\u0078p\u0065\u0063\u0074\u0065\u0064\u0020\u0074\u0079\u0070\u0065\u0020\u0028%T\u0029\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_fcc ,_fggd );
return _ac .ErrTypeError ;};};return nil ;};const (_cfac markKind =iota ;_afdf ;_afda ;_fgbg ;);const (_bgcgd rulingKind =iota ;_bbge ;_egea ;);func (_aceb rulingList )intersections ()map[int ]intSet {var _caab ,_gafd []int ;for _fdag ,_adbbb :=range _aceb {switch _adbbb ._beebc {case _egea :_caab =append (_caab ,_fdag );
case _bbge :_gafd =append (_gafd ,_fdag );};};if len (_caab )< _gcab +1||len (_gafd )< _efdf +1{return nil ;};if len (_caab )+len (_gafd )> _bggf {_fg .Log .Debug ("\u0069\u006e\u0074\u0065\u0072\u0073e\u0063\u0074\u0069\u006f\u006e\u0073\u003a\u0020\u0054\u004f\u004f\u0020\u004d\u0041\u004e\u0059\u0020\u0072\u0075\u006ci\u006e\u0067\u0073\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u003d\u0020%\u0064 \u0078\u0020\u0025\u0064",len (_aceb ),len (_caab ),len (_gafd ));
return nil ;};_ebga :=make (map[int ]intSet ,len (_caab )+len (_gafd ));for _ ,_dac :=range _caab {for _ ,_ecdg :=range _gafd {if _aceb [_dac ].intersects (_aceb [_ecdg ]){if _ ,_ddac :=_ebga [_dac ];!_ddac {_ebga [_dac ]=make (intSet );};if _ ,_gffbd :=_ebga [_ecdg ];
!_gffbd {_ebga [_ecdg ]=make (intSet );};_ebga [_dac ].add (_ecdg );_ebga [_ecdg ].add (_dac );};};};return _ebga ;};func (_gffgc rectRuling )checkWidth (_ebcf ,_dgege float64 )(float64 ,bool ){_ccff :=_dgege -_ebcf ;_fceb :=_ccff <=_dbg ;return _ccff ,_fceb ;
};func (_cdgdb paraList )topoOrder ()[]int {if _ecdd {_fg .Log .Info ("\u0074\u006f\u0070\u006f\u004f\u0072\u0064\u0065\u0072\u003a");};_fbgc :=len (_cdgdb );_fddb :=make ([]bool ,_fbgc );_gagg :=make ([]int ,0,_fbgc );_dbfd :=_cdgdb .llyOrdering ();var _cgdf func (_ffea int );
_cgdf =func (_gbf int ){_fddb [_gbf ]=true ;for _fadd :=0;_fadd < _fbgc ;_fadd ++{if !_fddb [_fadd ]{if _cdgdb .readBefore (_dbfd ,_gbf ,_fadd ){_cgdf (_fadd );};};};_gagg =append (_gagg ,_gbf );};for _deca :=0;_deca < _fbgc ;_deca ++{if !_fddb [_deca ]{_cgdf (_deca );
};};return _gaae (_gagg );};func (_ggff *shapesState )stroke (_bdcc *[]pathSection ){_ddde :=pathSection {_cbfa :_ggff ._ccf ,Color :_ggff ._ceae .getStrokeColor ()};*_bdcc =append (*_bdcc ,_ddde );if _ffee {_ff .Printf ("\u0020 \u0020\u0020S\u0054\u0052\u004fK\u0045\u003a\u0020\u0025\u0064\u0020\u0073t\u0072\u006f\u006b\u0065\u0073\u0020s\u0073\u003d\u0025\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d%\u002b\u0076\u0020\u0025\u0036\u002e\u0032\u0066\u000a",len (*_bdcc ),_ggff ,_ggff ._ceae .getStrokeColor (),_ddde .bbox ());
if _bccd {for _gbeb ,_aba :=range _ggff ._ccf {_ff .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_gbeb ,_aba );if _gbeb ==10{break ;};};};};};func (_fabe *textObject )reset (){_fabe ._bfee =_gb .IdentityMatrix ();_fabe ._fec =_gb .IdentityMatrix ();
_fabe ._ccb =nil ;};

// String returns a description of `tm`.
func (_gfbab *textMark )String ()string {return _ff .Sprintf ("\u0025\u002e\u0032f \u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\u0022\u0025\u0073\u0022",_gfbab .PdfRectangle ,_gfbab ._fgcd ,_gfbab ._gfba );};func (_febcc *shapesState )clearPath (){_febcc ._ccf =nil ;
_febcc ._dbb =false ;if _gbdf {_fg .Log .Info ("\u0043\u004c\u0045A\u0052\u003a\u0020\u0073\u0073\u003d\u0025\u0073",_febcc );};};func _dgba (_dfdf []*textWord ,_agb float64 ,_eee ,_cgf rulingList )*wordBag {_faeb :=_eabba (_dfdf [0],_agb ,_eee ,_cgf );
for _ ,_gagc :=range _dfdf [1:]{_ddcd :=_becd (_gagc ._gacg );_faeb ._dbee [_ddcd ]=append (_faeb ._dbee [_ddcd ],_gagc );_faeb .PdfRectangle =_gede (_faeb .PdfRectangle ,_gagc .PdfRectangle );};_faeb .sort ();return _faeb ;};func (_cfaa *shapesState )moveTo (_gbe ,_fdd float64 ){_cfaa ._dbb =true ;
_cfaa ._gbb =_cfaa .devicePoint (_gbe ,_fdd );if _gbdf {_fg .Log .Info ("\u006d\u006fv\u0065\u0054\u006f\u003a\u0020\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0064\u0065\u0076\u0069\u0063\u0065\u003d%.\u0032\u0066",_gbe ,_fdd ,_cfaa ._gbb );
};};func (_ddb *stateStack )empty ()bool {return len (*_ddb )==0};func (_ggba *subpath )close (){if !_ebdbe (_ggba ._fbb [0],_ggba .last ()){_ggba .add (_ggba ._fbb [0]);};_ggba ._fagb =true ;_ggba .removeDuplicates ();};func _cbace (_cfce ,_gedf bounded )float64 {_agg :=_gcc (_cfce ,_gedf );
if !_cgaeg (_agg ){return _agg ;};return _edb (_cfce ,_gedf );};

// NewFromContents creates a new extractor from contents and page resources.
func NewFromContents (contents string ,resources *_ge .PdfPageResources )(*Extractor ,error ){const _bb ="\u0065x\u0074\u0072\u0061\u0063t\u006f\u0072\u002e\u004e\u0065w\u0046r\u006fm\u0043\u006f\u006e\u0074\u0065\u006e\u0074s";_df :=&Extractor {_ee :contents ,_bec :resources ,_cd :map[string ]fontEntry {},_ec :map[string ]textResult {}};
_cff .TrackUse (_bb );return _df ,nil ;};type lineRuling struct{_ggdg rulingKind ;_dbfc markKind ;_fe .Color ;_egd ,_aacf _gb .Point ;};const (_ecebf =false ;_fgcb =false ;_bfdb =false ;_aeec =false ;_gbdf =false ;_eefa =false ;_cbdg =false ;_ecdd =false ;
_abga =false ;_gcee =_abga &&true ;_badfb =_gcee &&false ;_dbff =_abga &&true ;_cfadg =false ;_egfb =_cfadg &&false ;_adadc =_cfadg &&true ;_ffee =false ;_bccd =_ffee &&false ;_aadg =_ffee &&false ;_cagc =_ffee &&true ;_cbcf =_ffee &&false ;_edfg =_ffee &&false ;
);func (_eebf *wordBag )text ()string {_beg :=_eebf .allWords ();_agbf :=make ([]string ,len (_beg ));for _eddf ,_fagc :=range _beg {_agbf [_eddf ]=_fagc ._cgcd ;};return _ad .Join (_agbf ,"\u0020");};func _gccb (_cabf map[float64 ]map[float64 ]gridTile )[]float64 {_deed :=make ([]float64 ,0,len (_cabf ));
for _bfcg :=range _cabf {_deed =append (_deed ,_bfcg );};_bf .Float64s (_deed );_gcabb :=len (_deed );for _ddaf :=0;_ddaf < _gcabb /2;_ddaf ++{_deed [_ddaf ],_deed [_gcabb -1-_ddaf ]=_deed [_gcabb -1-_ddaf ],_deed [_ddaf ];};return _deed ;};func (_fedc *textLine )markWordBoundaries (){_ccebc :=_gddd *_fedc ._fbbc ;
for _gddb ,_dbgb :=range _fedc ._fbeb [1:]{if _aabb (_dbgb ,_fedc ._fbeb [_gddb ])>=_ccebc {_dbgb ._gcae =true ;};};};func (_cadb *wordBag )blocked (_eabbg *textWord )bool {if _eabbg .Urx < _cadb .Llx {_fbef :=_ggfg (_eabbg .PdfRectangle );_bea :=_acagd (_cadb .PdfRectangle );
if _cadb ._gdfgb .blocks (_fbef ,_bea ){if _edfg {_fg .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0078\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_eabbg ,_cadb );};return true ;};}else if _cadb .Urx < _eabbg .Llx {_fdbd :=_ggfg (_cadb .PdfRectangle );
_ceea :=_acagd (_eabbg .PdfRectangle );if _cadb ._gdfgb .blocks (_fdbd ,_ceea ){if _edfg {_fg .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0078\u2192\u0020:\u0020\u0025\u0073\u0020%s",_eabbg ,_cadb );};return true ;};};if _eabbg .Ury < _cadb .Lly {_ggce :=_ddge (_eabbg .PdfRectangle );
_bbbg :=_efea (_cadb .PdfRectangle );if _cadb ._afee .blocks (_ggce ,_bbbg ){if _edfg {_fg .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0079\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_eabbg ,_cadb );};return true ;};}else if _cadb .Ury < _eabbg .Lly {_cddb :=_ddge (_cadb .PdfRectangle );
_aff :=_efea (_eabbg .PdfRectangle );if _cadb ._afee .blocks (_cddb ,_aff ){if _edfg {_fg .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0079\u2192\u0020:\u0020\u0025\u0073\u0020%s",_eabbg ,_cadb );};return true ;};};return false ;};func (_faafe *textObject )getFont (_bfef string )(*_ge .PdfFont ,error ){if _faafe ._dde ._cd !=nil {_faafe ._dde ._adf ++;
_gcaa ,_aagb :=_faafe ._dde ._cd [_bfef ];if _aagb {_gcaa ._gcgg =_faafe ._dde ._adf ;return _gcaa ._bebf ,nil ;};};_eabb ,_cgef :=_faafe .getFontDirect (_bfef );if _cgef !=nil {return nil ,_cgef ;};if _faafe ._dde ._cd !=nil {_gdf :=fontEntry {_eabb ,_faafe ._dde ._adf };
if len (_faafe ._dde ._cd )>=_adgf {var _cbac []string ;for _cceb :=range _faafe ._dde ._cd {_cbac =append (_cbac ,_cceb );};_bf .Slice (_cbac ,func (_cgeac ,_ccea int )bool {return _faafe ._dde ._cd [_cbac [_cgeac ]]._gcgg < _faafe ._dde ._cd [_cbac [_ccea ]]._gcgg ;
});delete (_faafe ._dde ._cd ,_cbac [0]);};_faafe ._dde ._cd [_bfef ]=_gdf ;};return _eabb ,nil ;};type pathSection struct{_cbfa []*subpath ;_fe .Color ;};func (_fbfb *shapesState )newSubPath (){_fbfb .clearPath ();if _gbdf {_fg .Log .Info ("\u006e\u0065\u0077\u0053\u0075\u0062\u0050\u0061\u0074h\u003a\u0020\u0025\u0073",_fbfb );
};};func _deea (_gega ,_acaa *textPara )bool {if _gega ._dddbf ||_acaa ._dddbf {return true ;};return _cgaeg (_gega .depth ()-_acaa .depth ());};func (_gefg *subpath )last ()_gb .Point {return _gefg ._fbb [len (_gefg ._fbb )-1]};

// ExtractText processes and extracts all text data in content streams and returns as a string.
// It takes into account character encodings in the PDF file, which are decoded by
// CharcodeBytesToUnicode.
// Characters that can't be decoded are replaced with MissingCodeRune ('\ufffd' = ï¿½).
func (_aca *Extractor )ExtractText ()(string ,error ){_bbf ,_ ,_ ,_ggf :=_aca .ExtractTextWithStats ();return _bbf ,_ggf ;};func (_ggbe *textObject )setWordSpacing (_efb float64 ){if _ggbe ==nil {return ;};_ggbe ._cada ._acag =_efb ;};type ruling struct{_beebc rulingKind ;
_edba markKind ;_fe .Color ;_adggg float64 ;_ceggf float64 ;_gbcd float64 ;_dgcc float64 ;};

// String returns a human readable description of `vecs`.
func (_cdegf rulingList )String ()string {if len (_cdegf )==0{return "\u007b \u0045\u004d\u0050\u0054\u0059\u0020}";};_aadaf ,_afde :=_cdegf .vertsHorzs ();_adbbd :=len (_aadaf );_bdce :=len (_afde );if _adbbd ==0||_bdce ==0{return _ff .Sprintf ("\u007b%\u0064\u0020\u0078\u0020\u0025\u0064}",_adbbd ,_bdce );
};_gdddb :=_ge .PdfRectangle {Llx :_aadaf [0]._adggg ,Urx :_aadaf [_adbbd -1]._adggg ,Lly :_afde [_bdce -1]._adggg ,Ury :_afde [0]._adggg };return _ff .Sprintf ("\u007b\u0025d\u0020\u0078\u0020%\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u007d",_adbbd ,_bdce ,_gdddb );
};func (_ggfb *textObject )newTextMark (_fcgc string ,_aacc _gb .Matrix ,_gcbe _gb .Point ,_cfcgg float64 ,_cecg *_ge .PdfFont ,_ecec float64 ,_fgfde ,_cbb _fe .Color )(textMark ,bool ){_dfaa :=_aacc .Angle ();_cdbe :=_bgffe (_dfaa ,_bbd );var _ggbd float64 ;
if _cdbe %180!=90{_ggbd =_aacc .ScalingFactorY ();}else {_ggbd =_aacc .ScalingFactorX ();};_cbde :=_gcgd (_aacc );_ggbf :=_ge .PdfRectangle {Llx :_cbde .X ,Lly :_cbde .Y ,Urx :_gcbe .X ,Ury :_gcbe .Y };switch _cdbe %360{case 90:_ggbf .Urx -=_ggbd ;case 180:_ggbf .Ury -=_ggbd ;
case 270:_ggbf .Urx +=_ggbd ;case 0:_ggbf .Ury +=_ggbd ;default:_cdbe =0;_ggbf .Ury +=_ggbd ;};if _ggbf .Llx > _ggbf .Urx {_ggbf .Llx ,_ggbf .Urx =_ggbf .Urx ,_ggbf .Llx ;};if _ggbf .Lly > _ggbf .Ury {_ggbf .Lly ,_ggbf .Ury =_ggbf .Ury ,_ggbf .Lly ;};_dadb ,_acfb :=_cgge (_ggbf ,_ggfb ._dde ._eg );
if !_acfb {_fg .Log .Debug ("\u0054\u0065\u0078\u0074\u0020m\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069\u0064\u0065\u0020\u0070a\u0067\u0065\u002e\u0020\u0062\u0062\u006f\u0078\u003d\u0025\u0067\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u003d\u0025\u0067\u0020\u0074\u0065\u0078\u0074\u003d\u0025q",_ggbf ,_ggfb ._dde ._eg ,_fcgc );
};_ggbf =_dadb ;_fcbfa :=_ggbf ;_dfef :=_ggfb ._dde ._eg ;switch _cdbe %360{case 90:_dfef .Urx ,_dfef .Ury =_dfef .Ury ,_dfef .Urx ;_fcbfa =_ge .PdfRectangle {Llx :_dfef .Urx -_ggbf .Ury ,Urx :_dfef .Urx -_ggbf .Lly ,Lly :_ggbf .Llx ,Ury :_ggbf .Urx };
case 180:_fcbfa =_ge .PdfRectangle {Llx :_dfef .Urx -_ggbf .Llx ,Urx :_dfef .Urx -_ggbf .Urx ,Lly :_dfef .Ury -_ggbf .Lly ,Ury :_dfef .Ury -_ggbf .Ury };case 270:_dfef .Urx ,_dfef .Ury =_dfef .Ury ,_dfef .Urx ;_fcbfa =_ge .PdfRectangle {Llx :_ggbf .Ury ,Urx :_ggbf .Lly ,Lly :_dfef .Ury -_ggbf .Llx ,Ury :_dfef .Ury -_ggbf .Urx };
};if _fcbfa .Llx > _fcbfa .Urx {_fcbfa .Llx ,_fcbfa .Urx =_fcbfa .Urx ,_fcbfa .Llx ;};if _fcbfa .Lly > _fcbfa .Ury {_fcbfa .Lly ,_fcbfa .Ury =_fcbfa .Ury ,_fcbfa .Lly ;};_egab :=textMark {_gfba :_fcgc ,PdfRectangle :_fcbfa ,_eadg :_ggbf ,_bfea :_cecg ,_fgcd :_ggbd ,_aeca :_ecec ,_eeec :_aacc ,_ebbe :_gcbe ,_dadg :_cdbe ,_gcfe :_fgfde ,_dbbd :_cbb };
if _fgcb {_fg .Log .Info ("n\u0065\u0077\u0054\u0065\u0078\u0074M\u0061\u0072\u006b\u003a\u0020\u0073t\u0061\u0072\u0074\u003d\u0025\u002e\u0032f\u0020\u0065\u006e\u0064\u003d\u0025\u002e\u0032\u0066\u0020%\u0073",_cbde ,_gcbe ,_egab .String ());};return _egab ,_acfb ;
};func (_cfbc *wordBag )depthIndexes ()[]int {if len (_cfbc ._dbee )==0{return nil ;};_gecfa :=make ([]int ,len (_cfbc ._dbee ));_afff :=0;for _gfgb :=range _cfbc ._dbee {_gecfa [_afff ]=_gfgb ;_afff ++;};_bf .Ints (_gecfa );return _gecfa ;};type wordBag struct{_ge .PdfRectangle ;
_gdfg float64 ;_gdfgb ,_afee rulingList ;_dbbg float64 ;_dbee map[int ][]*textWord ;};func _ffeed (_agec []_ac .PdfObject )(_afage ,_efcbf float64 ,_degee error ){if len (_agec )!=2{return 0,0,_ff .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020o\u0066 \u0070\u0061\u0072\u0061\u006d\u0073\u003a \u0025\u0064",len (_agec ));
};_bbfeg ,_degee :=_ac .GetNumbersAsFloat (_agec );if _degee !=nil {return 0,0,_degee ;};return _bbfeg [0],_bbfeg [1],nil ;};func _bebd (_dfdd *wordBag ,_degc *textWord ,_ccge float64 )bool {return _degc .Llx < _dfdd .Urx +_ccge &&_dfdd .Llx -_ccge < _degc .Urx ;
};func (_ddag rulingList )isActualGrid ()(rulingList ,bool ){_fegb ,_ebdgg :=_ddag .augmentGrid ();if !(len (_fegb )>=_gcab +1&&len (_ebdgg )>=_efdf +1){if _ffee {_fg .Log .Info ("\u0069s\u0041\u0063t\u0075\u0061\u006c\u0047r\u0069\u0064\u003a \u004e\u006f\u0074\u0020\u0061\u006c\u0069\u0067\u006eed\u002e\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u003c\u0020\u0025d\u0020\u0078 \u0025\u0064",len (_fegb ),len (_ebdgg ),_gcab +1,_efdf +1);
};return nil ,false ;};if _ffee {_fg .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075a\u006c\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0073\u0020\u003a\u0020\u0025t\u0020\u0026\u0020\u0025\u0074\u0020\u2192 \u0025\u0074",_ddag ,len (_fegb )>=2,len (_ebdgg )>=2,len (_fegb )>=2&&len (_ebdgg )>=2);
for _cddf ,_bgbg :=range _ddag {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0076\u000a",_cddf ,_bgbg );};};if _ggfa {_bgbeg ,_decag :=_fegb [0],_fegb [len (_fegb )-1];_dgbe ,_aeae :=_ebdgg [0],_ebdgg [len (_ebdgg )-1];if !(_fbfde (_bgbeg ._adggg -_dgbe ._ceggf )&&_fbfde (_decag ._adggg -_dgbe ._gbcd )&&_fbfde (_dgbe ._adggg -_bgbeg ._gbcd )&&_fbfde (_aeae ._adggg -_bgbeg ._ceggf )){if _ffee {_fg .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069d\u003a\u0020\u0020N\u006f\u0074 \u0061\u006c\u0069\u0067\u006e\u0065d\u002e\n\t\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0076\u0031\u003d\u0025\u0073\u000a\u0009\u0068\u0030\u003d\u0025\u0073\u000a\u0009\u0068\u0031\u003d\u0025\u0073",_bgbeg ,_decag ,_dgbe ,_aeae );
};return nil ,false ;};}else {if !_fegb .aligned (){if _aadg {_fg .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0076\u0065\u0072\u0074\u0073\u002e\u0020%\u0064",len (_fegb ));
};return nil ,false ;};if !_ebdgg .aligned (){if _ffee {_fg .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0068\u006f\u0072\u007a\u0073\u002e\u0020%\u0064",len (_ebdgg ));
};return nil ,false ;};};_gdbe :=append (_fegb ,_ebdgg ...);return _gdbe ,true ;};func _agda (_bgcf ,_fcfd _gb .Point )bool {_aceba :=_d .Abs (_bgcf .X -_fcfd .X );_fafge :=_d .Abs (_bgcf .Y -_fcfd .Y );return _ecdgg (_aceba ,_fafge );};func (_cfeg rulingList )primMinMax ()(float64 ,float64 ){_bgfa ,_ebgac :=_cfeg [0]._adggg ,_cfeg [0]._adggg ;
for _ ,_baac :=range _cfeg [1:]{if _baac ._adggg < _bgfa {_bgfa =_baac ._adggg ;}else if _baac ._adggg > _ebgac {_ebgac =_baac ._adggg ;};};return _bgfa ,_ebgac ;};

// ApplyArea processes the page text only within the specified area `bbox`.
// Each time ApplyArea is called, it updates the result set in `pt`.
// Can be called multiple times in a row with different bounding boxes.
func (_ced *PageText )ApplyArea (bbox _ge .PdfRectangle ){_aagg :=make ([]*textMark ,0,len (_ced ._egfg ));for _ ,_adg :=range _ced ._egfg {if _fdcd (_adg .bbox (),bbox ){_aagg =append (_aagg ,_adg );};};var _ggc paraList ;_bfeb :=len (_aagg );for _gaeg :=0;
_gaeg < 360&&_bfeb > 0;_gaeg +=90{_ebg :=make ([]*textMark ,0,len (_aagg )-_bfeb );for _ ,_efc :=range _aagg {if _efc ._dadg ==_gaeg {_ebg =append (_ebg ,_efc );};};if len (_ebg )> 0{_ggbg :=_afb (_ebg ,_ced ._cdc ,nil ,nil );_ggc =append (_ggc ,_ggbg ...);
_bfeb -=len (_ebg );};};_egg :=new (_g .Buffer );_ggc .writeText (_egg );_ced ._geg =_egg .String ();_ced ._gfb =_ggc .toTextMarks ();_ced ._accfd =_ggc .tables ();};func (_ddbe *wordBag )depthRange (_effd ,_bfffd int )[]int {var _dgf []int ;for _edfa :=range _ddbe ._dbee {if _effd <=_edfa &&_edfa <=_bfffd {_dgf =append (_dgf ,_edfa );
};};if len (_dgf )==0{return nil ;};_bf .Ints (_dgf );return _dgf ;};type gridTile struct{_ge .PdfRectangle ;_bbaa ,_cdfbd ,_cgff ,_egdg bool ;};type compositeCell struct{_ge .PdfRectangle ;paraList ;};func (_efcge *ruling )alignsSec (_babc *ruling )bool {const _gfbb =_dbg +1.0;
return _efcge ._ceggf -_gfbb <=_babc ._gbcd &&_babc ._ceggf -_gfbb <=_efcge ._gbcd ;};func _ccac (_bggb ,_bdgg ,_edce float64 )rulingKind {if _bggb >=_edce &&_ecdgg (_bdgg ,_bggb ){return _bbge ;};if _bdgg >=_edce &&_ecdgg (_bggb ,_bdgg ){return _egea ;
};return _bgcgd ;};func (_eaaa rulingList )aligned ()bool {if len (_eaaa )< 2{return false ;};_aedb :=make (map[*ruling ]int );_aedb [_eaaa [0]]=0;for _ ,_cabb :=range _eaaa [1:]{_ecbc :=false ;for _cbdd :=range _aedb {if _cabb .gridIntersecting (_cbdd ){_aedb [_cbdd ]++;
_ecbc =true ;break ;};};if !_ecbc {_aedb [_cabb ]=0;};};_gedegc :=0;for _ ,_aabbc :=range _aedb {if _aabbc ==0{_gedegc ++;};};_dbaa :=float64 (_gedegc )/float64 (len (_eaaa ));_dcfe :=_dbaa <=1.0-_febe ;if _ffee {_fg .Log .Info ("\u0061\u006c\u0069\u0067\u006e\u0065\u0064\u003d\u0025\u0074\u0020\u0075\u006em\u0061\u0074\u0063\u0068\u0065\u0064=\u0025\u002e\u0032\u0066\u003d\u0025\u0064\u002f\u0025\u0064\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_dcfe ,_dbaa ,_gedegc ,len (_eaaa ),_eaaa .String ());
};return _dcfe ;};func _ffgc (_faadfe *PageText )error {_ffbf :=_cff .GetLicenseKey ();if _ffbf !=nil &&_ffbf .IsLicensed ()||_adc {return nil ;};_ff .Printf ("\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064\u0020c\u006f\u0070\u0079\u0020\u006f\u0066\u0020\u0055\u006e\u0069P\u0044\u0046\u000a");
_ff .Println ("-\u0020\u0047\u0065\u0074\u0020\u0061\u0020\u0066\u0072e\u0065\u0020\u0074\u0072\u0069\u0061\u006c l\u0069\u0063\u0065\u006es\u0065\u0020\u006f\u006e\u0020\u0068\u0074\u0074\u0070s:\u002f\u002fu\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f");
return _c .New ("\u0075\u006e\u0069\u0070d\u0066\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020c\u006fd\u0065\u0020\u0072\u0065\u0071\u0075\u0069r\u0065\u0064");};func (_debe *textObject )moveText (_dfa ,_fbe float64 ){_debe .moveLP (_dfa ,_fbe )};
func (_geede intSet )del (_ecfba int ){delete (_geede ,_ecfba )};func (_gfg *stateStack )push (_fad *textState ){_fdee :=*_fad ;*_gfg =append (*_gfg ,&_fdee )};func (_fce *wordBag )allWords ()[]*textWord {var _dfca []*textWord ;for _ ,_facba :=range _fce ._dbee {_dfca =append (_dfca ,_facba ...);
};return _dfca ;};

// Append appends `mark` to the mark array.
func (_ecfb *TextMarkArray )Append (mark TextMark ){_ecfb ._fffd =append (_ecfb ._fffd ,mark )};func _bfffda (_dafb map[float64 ]gridTile )[]float64 {_afgf :=make ([]float64 ,0,len (_dafb ));for _dbce :=range _dafb {_afgf =append (_afgf ,_dbce );};_bf .Float64s (_afgf );
return _afgf ;};

// String returns a description of `p`.
func (_fdff *textPara )String ()string {if _fdff ._dddbf {return _ff .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u005b\u0045\u004d\u0050\u0054\u0059\u005d",_fdff .PdfRectangle );};_ffdc :="";if _fdff ._gfce !=nil {_ffdc =_ff .Sprintf ("\u005b\u0025\u0064\u0078\u0025\u0064\u005d\u0020",_fdff ._gfce ._eagd ,_fdff ._gfce ._acde );
};return _ff .Sprintf ("\u0025\u0036\u002e\u0032f \u0025\u0073\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u0020\u0025\u0071",_fdff .PdfRectangle ,_ffdc ,len (_fdff ._bged ),_dgae (_fdff .text (),50));};func (_fgce *textObject )setHorizScaling (_egeb float64 ){if _fgce ==nil {return ;
};_fgce ._cada ._aad =_egeb ;};func (_aece *textLine )endsInHyphen ()bool {_bbbf :=_aece ._fbeb [len (_aece ._fbeb )-1];_fcdg :=_bbbf ._cgcd ;_fbggf ,_gffd :=_cf .DecodeLastRuneInString (_fcdg );if _gffd <=0||!_cb .Is (_cb .Hyphen ,_fbggf ){return false ;
};if _bbbf ._gcae &&_eefg (_fcdg ){return true ;};return _eefg (_aece .text ());};func _gaae (_cfadf []int )[]int {_fefg :=make ([]int ,len (_cfadf ));for _dbae ,_fecg :=range _cfadf {_fefg [len (_cfadf )-1-_dbae ]=_fecg ;};return _fefg ;};func _aadac (_eaeae []*textWord ,_ddeb int )[]*textWord {_bgcfg :=len (_eaeae );
copy (_eaeae [_ddeb :],_eaeae [_ddeb +1:]);return _eaeae [:_bgcfg -1];};func _dgfc (_eebcc ,_fbac int )uint64 {return uint64 (_eebcc )*0x1000000+uint64 (_fbac )};type textObject struct{_dde *Extractor ;_bfcc *_ge .PdfPageResources ;_gaf _fd .GraphicsState ;
_cada *textState ;_gfe *stateStack ;_bfee _gb .Matrix ;_fec _gb .Matrix ;_ccb []*textMark ;_ceee bool ;};func _fecgg (_dfabd []pathSection )rulingList {_ceefd (_dfabd );if _ffee {_fg .Log .Info ("\u006da\u006b\u0065\u0046\u0069l\u006c\u0052\u0075\u006c\u0069n\u0067s\u003a \u0025\u0064\u0020\u0066\u0069\u006c\u006cs",len (_dfabd ));
};var _bccda rulingList ;for _ ,_ecb :=range _dfabd {for _ ,_fgge :=range _ecb ._cbfa {if !_fgge .isQuadrilateral (){if _ffee {_fg .Log .Error ("!\u0069s\u0051\u0075\u0061\u0064\u0072\u0069\u006c\u0061t\u0065\u0072\u0061\u006c: \u0025\u0073",_fgge );};
continue ;};if _deba ,_ebaa :=_fgge .makeRectRuling (_ecb .Color );_ebaa {_bccda =append (_bccda ,_deba );}else {if _cbcf {_fg .Log .Error ("\u0021\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0073",_fgge );
};};};};if _ffee {_fg .Log .Info ("\u006d\u0061\u006b\u0065Fi\u006c\u006c\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0073",_bccda .String ());};return _bccda ;};func (_ebed *compositeCell )updateBBox (){for _ ,_gafg :=range _ebed .paraList {_ebed .PdfRectangle =_gede (_ebed .PdfRectangle ,_gafg .PdfRectangle );
};};type textWord struct{_ge .PdfRectangle ;_gacg float64 ;_cgcd string ;_gffgdd []*textMark ;_efaa float64 ;_gcae bool ;};func _edb (_agf ,_cdaeb bounded )float64 {return _agf .bbox ().Llx -_cdaeb .bbox ().Llx };func _cbgc (_ffbb []rulingList )(rulingList ,rulingList ){var _dffb rulingList ;
for _ ,_eggg :=range _ffbb {_dffb =append (_dffb ,_eggg ...);};return _dffb .vertsHorzs ();};

// ExtractPageText returns the text contents of `e` (an Extractor for a page) as a PageText.
// TODO(peterwilliams97): The stats complicate this function signature and aren't very useful.
//                        Replace with a function like Extract() (*PageText, error)
func (_baf *Extractor )ExtractPageText ()(*PageText ,int ,int ,error ){_fgd ,_cgc ,_fc ,_eae :=_baf .extractPageText (_baf ._ee ,_baf ._bec ,_gb .IdentityMatrix (),0);if _eae !=nil {return nil ,0,0,_eae ;};_fgd .computeViews ();_eae =_ffgc (_fgd );if _eae !=nil {return nil ,0,0,_eae ;
};return _fgd ,_cgc ,_fc ,nil ;};func (_cdfb paraList )llyOrdering ()[]int {_aead :=make ([]int ,len (_cdfb ));for _aeegd :=range _cdfb {_aead [_aeegd ]=_aeegd ;};_bf .SliceStable (_aead ,func (_dfaf ,_gdba int )bool {_cbbg ,_gdad :=_aead [_dfaf ],_aead [_gdba ];
return _cdfb [_cbbg ].Lly < _cdfb [_gdad ].Lly ;});return _aead ;};func (_bbgg gridTile )complete ()bool {return _bbgg .numBorders ()==4};type bounded interface{bbox ()_ge .PdfRectangle };func (_bagd paraList )eventNeighbours (_ddbce []event )map[*textPara ][]int {_bf .Slice (_ddbce ,func (_decad ,_cfbg int )bool {_dcff ,_fefe :=_ddbce [_decad ],_ddbce [_cfbg ];
_gcbde ,_febdg :=_dcff ._gbea ,_fefe ._gbea ;if _gcbde !=_febdg {return _gcbde < _febdg ;};if _dcff ._bbefe !=_fefe ._bbefe {return _dcff ._bbefe ;};return _decad < _cfbg ;});_dcgf :=make (map[int ]intSet );_fded :=make (intSet );for _ ,_bggfb :=range _ddbce {if _bggfb ._bbefe {_dcgf [_bggfb ._egegg ]=make (intSet );
for _bcdfb :=range _fded {if _bcdfb !=_bggfb ._egegg {_dcgf [_bggfb ._egegg ].add (_bcdfb );_dcgf [_bcdfb ].add (_bggfb ._egegg );};};_fded .add (_bggfb ._egegg );}else {_fded .del (_bggfb ._egegg );};};_bfccb :=map[*textPara ][]int {};for _bbaaa ,_ggdgg :=range _dcgf {_gdgc :=_bagd [_bbaaa ];
if len (_ggdgg )==0{_bfccb [_gdgc ]=nil ;continue ;};_cdbceg :=make ([]int ,len (_ggdgg ));_cbcba :=0;for _eaeeg :=range _ggdgg {_cdbceg [_cbcba ]=_eaeeg ;_cbcba ++;};_bfccb [_gdgc ]=_cdbceg ;};return _bfccb ;};func (_cea *stateStack )size ()int {return len (*_cea )};


// String returns a human readable description of `ss`.
func (_fda *shapesState )String ()string {return _ff .Sprintf ("\u007b\u0025\u0064\u0020su\u0062\u0070\u0061\u0074\u0068\u0073\u0020\u0066\u0072\u0065\u0073\u0068\u003d\u0025t\u007d",len (_fda ._ccf ),_fda ._dbb );};func _fagca (_fecd []*textMark ,_ebgg _ge .PdfRectangle )*textWord {_daafa :=_fecd [0].PdfRectangle ;
_agbgg :=_fecd [0]._fgcd ;for _ ,_bddgf :=range _fecd [1:]{_daafa =_gede (_daafa ,_bddgf .PdfRectangle );if _bddgf ._fgcd > _agbgg {_agbgg =_bddgf ._fgcd ;};};return &textWord {PdfRectangle :_daafa ,_gffgdd :_fecd ,_gacg :_ebgg .Ury -_daafa .Lly ,_efaa :_agbgg };
};

// String returns a description of `k`.
func (_fadc rulingKind )String ()string {_fafd ,_cacac :=_ecdcg [_fadc ];if !_cacac {return _ff .Sprintf ("\u004e\u006ft\u0020\u0061\u0020r\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_fadc );};return _fafd ;};var _adc =false ;type paraList []*textPara ;
func (_fecgf paraList )merge ()*textPara {_fg .Log .Trace ("\u006d\u0065\u0072\u0067\u0065:\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_fecgf ));
if len (_fecgf )==0{return nil ;};_fecgf .sortReadingOrder ();_fbdae :=_fecgf [0].PdfRectangle ;_bbcf :=_fecgf [0]._bged ;for _ ,_bage :=range _fecgf [1:]{_fbdae =_gede (_fbdae ,_bage .PdfRectangle );_bbcf =append (_bbcf ,_bage ._bged ...);};return _aaea (_fbdae ,_bbcf );
};func (_adgg *textMark )bbox ()_ge .PdfRectangle {return _adgg .PdfRectangle };func _gede (_edfb ,_cace _ge .PdfRectangle )_ge .PdfRectangle {return _ge .PdfRectangle {Llx :_d .Min (_edfb .Llx ,_cace .Llx ),Lly :_d .Min (_edfb .Lly ,_cace .Lly ),Urx :_d .Max (_edfb .Urx ,_cace .Urx ),Ury :_d .Max (_edfb .Ury ,_cace .Ury )};
};

// String returns a description of `b`.
func (_fbagc *wordBag )String ()string {var _deg []string ;for _ ,_ddbb :=range _fbagc .depthIndexes (){_fgcfb :=_fbagc ._dbee [_ddbb ];for _ ,_baef :=range _fgcfb {_deg =append (_deg ,_baef ._cgcd );};};return _ff .Sprintf ("\u0025.\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065=\u0025\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0025\u0071",_fbagc .PdfRectangle ,_fbagc ._gdfg ,len (_deg ),_deg );
};func (_dgcb gridTile )contains (_ecga _ge .PdfRectangle )bool {if _dgcb .numBorders ()< 3{return false ;};if _dgcb ._cdfbd &&_ecga .Llx < _dgcb .Llx -_addae {return false ;};if _dgcb ._egdg &&_ecga .Urx > _dgcb .Urx +_addae {return false ;};if _dgcb ._cgff &&_ecga .Lly < _dgcb .Lly -_addae {return false ;
};if _dgcb ._bbaa &&_ecga .Ury > _dgcb .Ury +_addae {return false ;};return true ;};func (_geeb paraList )inTile (_fecga gridTile )paraList {var _gceaf paraList ;for _ ,_fdga :=range _geeb {if _fecga .contains (_fdga .PdfRectangle ){_gceaf =append (_gceaf ,_fdga );
};};if _cfadg {_ff .Printf ("\u0020 \u0020\u0069\u006e\u0054i\u006c\u0065\u003a\u0020\u0020%\u0073 \u0069n\u0073\u0069\u0064\u0065\u003d\u0025\u0064\n",_fecga ,len (_gceaf ));for _deag ,_ebec :=range _gceaf {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_deag ,_ebec );
};_ff .Println ("");};return _gceaf ;};func (_ddade paraList )extractTables (_daaa []gridTiling )paraList {if _cfadg {_fg .Log .Debug ("\u0065\u0078\u0074r\u0061\u0063\u0074\u0054\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_ddade ));
};if len (_ddade )< _bcde {return _ddade ;};_cecd :=_ddade .findTables (_daaa );if _cfadg {_fg .Log .Info ("c\u006f\u006d\u0062\u0069\u006e\u0065d\u0020\u0074\u0061\u0062\u006c\u0065s\u0020\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_cecd ));
for _cbfd ,_ecab :=range _cecd {_ecab .log (_ff .Sprintf ("c\u006f\u006d\u0062\u0069\u006e\u0065\u0064\u0020\u0025\u0064",_cbfd ));};};return _ddade .applyTables (_cecd );};func (_faccc lineRuling )yMean ()float64 {return 0.5*(_faccc ._egd .Y +_faccc ._aacf .Y )};
func _dgge (_dfbf *wordBag ,_ecg int )*textLine {_aadgg :=_dfbf .firstWord (_ecg );_ecdb :=textLine {PdfRectangle :_aadgg .PdfRectangle ,_fbbc :_aadgg ._efaa ,_bcee :_aadgg ._gacg };_ecdb .pullWord (_dfbf ,_aadgg ,_ecg );return &_ecdb ;};func (_dcca *shapesState )quadraticTo (_gggd ,_dabf ,_ffc ,_cecf float64 ){if _gbdf {_fg .Log .Info ("\u0071\u0075\u0061d\u0072\u0061\u0074\u0069\u0063\u0054\u006f\u003a");
};_dcca .addPoint (_ffc ,_cecf );};func _adff (_gefc ,_cdfea float64 )bool {return _d .Abs (_gefc -_cdfea )<=_cdga };

// Elements returns the TextMarks in `ma`.
func (_ccc *TextMarkArray )Elements ()[]TextMark {return _ccc ._fffd };type textState struct{_fbfc float64 ;_acag float64 ;_aad float64 ;_egb float64 ;_ecdc float64 ;_ecf RenderMode ;_fcca float64 ;_baeg *_ge .PdfFont ;_fabc _ge .PdfRectangle ;_cbda int ;
_dfdg int ;};func _cedcc (_fdbc _ge .PdfRectangle )rulingKind {_bbfa :=_fdbc .Width ();_dabb :=_fdbc .Height ();if _bbfa > _dabb {if _bbfa >=_def {return _bbge ;};}else {if _dabb >=_def {return _egea ;};};return _bgcgd ;};func _egbg (_cde *Extractor ,_ebdbb *_ge .PdfPageResources ,_fcbe _fd .GraphicsState ,_dced *textState ,_beb *stateStack )*textObject {return &textObject {_dde :_cde ,_bfcc :_ebdbb ,_gaf :_fcbe ,_gfe :_beb ,_cada :_dced ,_bfee :_gb .IdentityMatrix (),_fec :_gb .IdentityMatrix ()};
};func _ddge (_cebb _ge .PdfRectangle )*ruling {return &ruling {_beebc :_bbge ,_adggg :_cebb .Ury ,_ceggf :_cebb .Llx ,_gbcd :_cebb .Urx };};func (_edbc rulingList )asTiling ()gridTiling {if _cagc {_fg .Log .Info ("r\u0075\u006ci\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0063s\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u002b\u002b\u002b\u0020\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_edbc ));
};for _cagcf ,_bfdfa :=range _edbc [1:]{_egcga :=_edbc [_cagcf ];if _egcga .alignsPrimary (_bfdfa )&&_egcga .alignsSec (_bfdfa ){_fg .Log .Error ("a\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0044\u0075\u0070\u006c\u0069\u0063\u0061\u0074\u0065 \u0072\u0075\u006c\u0069\u006e\u0067\u0073\u002e\u000a\u0009v=\u0025\u0073\u000a\t\u0077=\u0025\u0073",_bfdfa ,_egcga );
};};_edbc .sortStrict ();_edbc .log ("\u0073n\u0061\u0070\u0070\u0065\u0064");_baacd ,_bagee :=_edbc .vertsHorzs ();_baaaf :=_baacd .primaries ();_fbfgd :=_bagee .primaries ();_deda :=len (_baaaf )-1;_decb :=len (_fbfgd )-1;if _deda ==0||_decb ==0{return gridTiling {};
};_gadb :=_ge .PdfRectangle {Llx :_baaaf [0],Urx :_baaaf [_deda ],Lly :_fbfgd [0],Ury :_fbfgd [_decb ]};if _cagc {_fg .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0072\u0074s=\u0025\u0064",len (_baacd ));
for _efgd ,_abbb :=range _baacd {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_efgd ,_abbb );};_fg .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0068\u006f\u0072\u007as=\u0025\u0064",len (_bagee ));
for _cfba ,_gaef :=range _bagee {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cfba ,_gaef );};_fg .Log .Info ("\u0072\u0075\u006c\u0069\u006eg\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067:\u0020\u0020\u0077\u0078\u0068\u003d\u0025\u0064\u0078\u0025\u0064\u000a\u0009\u006c\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a\u0009\u006c\u006c\u0079\u003d\u0025\u002e\u0032f",_deda ,_decb ,_baaaf ,_fbfgd );
};_fdggf :=make ([]gridTile ,_deda *_decb );for _fdbada :=_decb -1;_fdbada >=0;_fdbada --{_cdgaf :=_fbfgd [_fdbada ];_gcdg :=_fbfgd [_fdbada +1];for _egba :=0;_egba < _deda ;_egba ++{_edfe :=_baaaf [_egba ];_accd :=_baaaf [_egba +1];_dfdag :=_baacd .findPrimSec (_edfe ,_cdgaf );
_fbfe :=_baacd .findPrimSec (_accd ,_cdgaf );_ccaa :=_bagee .findPrimSec (_cdgaf ,_edfe );_aaaef :=_bagee .findPrimSec (_gcdg ,_edfe );_edcb :=_ge .PdfRectangle {Llx :_edfe ,Urx :_accd ,Lly :_cdgaf ,Ury :_gcdg };_ggfcb :=_fdggg (_edcb ,_dfdag ,_fbfe ,_ccaa ,_aaaef );
_fdggf [_fdbada *_deda +_egba ]=_ggfcb ;if _cagc {_ff .Printf ("\u0020\u0020\u0078\u003d\u0025\u0032\u0064\u0020\u0079\u003d\u0025\u0032\u0064\u003a\u0020%\u0073 \u0025\u0036\u002e\u0032\u0066\u0020\u0078\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_egba ,_fdbada ,_ggfcb .String (),_ggfcb .Width (),_ggfcb .Height ());
};};};if _cagc {_fg .Log .Info ("r\u0075\u006c\u0069\u006e\u0067\u004c\u0069\u0073\u0074.\u0061\u0073\u0054\u0069\u006c\u0069\u006eg:\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0020\u0068\u006f\u0072\u0069zo\u006e\u0074a\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_gadb );
};_dcfgd :=make ([]map[float64 ]gridTile ,_decb );for _feec :=_decb -1;_feec >=0;_feec --{if _cagc {_ff .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_feec );};_dcfgd [_feec ]=make (map[float64 ]gridTile ,_deda );for _edgae :=0;_edgae < _deda ;
_edgae ++{_agdc :=_fdggf [_feec *_deda +_edgae ];if _cagc {_ff .Printf ("\u0020\u0020\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_edgae ,_agdc );};if !_agdc ._cdfbd {continue ;};_fbfeb :=_edgae ;for _eebfa :=_edgae +1;!_agdc ._egdg &&_eebfa < _deda ;
_eebfa ++{_bdda :=_fdggf [_feec *_deda +_eebfa ];_agdc .Urx =_bdda .Urx ;_agdc ._bbaa =_agdc ._bbaa ||_bdda ._bbaa ;_agdc ._cgff =_agdc ._cgff ||_bdda ._cgff ;_agdc ._egdg =_bdda ._egdg ;if _cagc {_ff .Printf ("\u0020 \u0020%\u0034\u0064\u003a\u0020\u0025s\u0020\u2192 \u0025\u0073\u000a",_eebfa ,_bdda ,_agdc );
};_fbfeb =_eebfa ;};if _cagc {_ff .Printf (" \u0020 \u0025\u0032\u0064\u0020\u002d\u0020\u0025\u0032d\u0020\u2192\u0020\u0025s\n",_edgae ,_fbfeb ,_agdc );};_edgae =_fbfeb ;_dcfgd [_feec ][_agdc .Llx ]=_agdc ;};};_egcfa :=make (map[float64 ]map[float64 ]gridTile ,_decb );
_ecbd :=make (map[float64 ]map[float64 ]struct{},_decb );for _ecffe :=_decb -1;_ecffe >=0;_ecffe --{_ddad :=_fdggf [_ecffe *_deda ].Lly ;_egcfa [_ddad ]=make (map[float64 ]gridTile ,_deda );_ecbd [_ddad ]=make (map[float64 ]struct{},_deda );};if _cagc {_fg .Log .Info ("\u0072u\u006c\u0069n\u0067\u004c\u0069s\u0074\u002e\u0061\u0073\u0054\u0069\u006ci\u006e\u0067\u003a\u0020\u0063\u006fa\u006c\u0065\u0073\u0063\u0065\u0020\u0076\u0065\u0072\u0074\u0069c\u0061\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_gadb );
};for _bebb :=_decb -1;_bebb >=0;_bebb --{_faaa :=_fdggf [_bebb *_deda ].Lly ;_gbed :=_dcfgd [_bebb ];if _cagc {_ff .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_bebb );};for _ ,_edadb :=range _bfffda (_gbed ){if _ ,_ceda :=_ecbd [_faaa ][_edadb ];
_ceda {continue ;};_baffa :=_gbed [_edadb ];if _cagc {_ff .Printf (" \u0020\u0020\u0020\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_baffa .String ());};for _bfdfb :=_bebb -1;_bfdfb >=0;_bfdfb --{if _baffa ._cgff {break ;};_fggfe :=_dcfgd [_bfdfb ];_aecd ,_egcee :=_fggfe [_edadb ];
if !_egcee {break ;};if _aecd .Urx !=_baffa .Urx {break ;};_baffa ._cgff =_aecd ._cgff ;_baffa .Lly =_aecd .Lly ;if _cagc {_ff .Printf ("\u0020\u0020\u0020\u0020  \u0020\u0020\u0076\u003d\u0025\u0073\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_aecd .String (),_baffa .String ());
};_ecbd [_aecd .Lly ][_aecd .Llx ]=struct{}{};};if _bebb ==0{_baffa ._cgff =true ;};if _baffa .complete (){_egcfa [_faaa ][_edadb ]=_baffa ;};};};_caeb :=gridTiling {PdfRectangle :_gadb ,_cfde :_fecgff (_egcfa ),_bgbge :_gccb (_egcfa ),_fddeg :_egcfa };
_caeb .log ("\u0043r\u0065\u0061\u0074\u0065\u0064");return _caeb ;};func (_fafg rulingList )findPrimSec (_aedd ,_ggfcc float64 )*ruling {for _ ,_bdbe :=range _fafg {if _cgaeg (_bdbe ._adggg -_aedd )&&_bdbe ._ceggf -_cdga <=_ggfcc &&_ggfcc <=_bdbe ._gbcd +_cdga {return _bdbe ;
};};return nil ;};func (_afeb *wordBag )absorb (_cdfe *wordBag ){_fffb :=_cdfe .makeRemovals ();for _gded ,_aac :=range _cdfe ._dbee {for _ ,_eage :=range _aac {_afeb .pullWord (_eage ,_gded ,_fffb );};};_cdfe .applyRemovals (_fffb );};func (_dbba rulingList )snapToGroups ()rulingList {_acgc ,_accg :=_dbba .vertsHorzs ();
if len (_acgc )> 0{_acgc =_acgc .snapToGroupsDirection ();};if len (_accg )> 0{_accg =_accg .snapToGroupsDirection ();};_acgd :=append (_acgc ,_accg ...);_acgd .log ("\u0073\u006e\u0061p\u0054\u006f\u0047\u0072\u006f\u0075\u0070\u0073");return _acgd ;};
func (_afece *textMark )inDiacriticArea (_fggfb *textMark )bool {_bgad :=_afece .Llx -_fggfb .Llx ;_acdf :=_afece .Urx -_fggfb .Urx ;_dbda :=_afece .Lly -_fggfb .Lly ;return _d .Abs (_bgad +_acdf )< _afece .Width ()*_dege &&_d .Abs (_dbda )< _afece .Height ()*_dege ;
};

// ToTextMark returns the public view of `tm`.
func (_afdg *textMark )ToTextMark ()TextMark {return TextMark {Text :_afdg ._gfba ,Original :_afdg ._eebcd ,BBox :_afdg ._eadg ,Font :_afdg ._bfea ,FontSize :_afdg ._fgcd ,FillColor :_afdg ._gcfe ,StrokeColor :_afdg ._dbbd ,Orientation :_afdg ._dadg };
};func (_cdcg *wordBag )removeWord (_bdaa *textWord ,_fed int ){_ebbf :=_cdcg ._dbee [_fed ];_ebbf =_dcegg (_ebbf ,_bdaa );if len (_ebbf )==0{delete (_cdcg ._dbee ,_fed );}else {_cdcg ._dbee [_fed ]=_ebbf ;};};func (_edf *textObject )showText (_aegb []byte )error {return _edf .renderText (_aegb )};
func (_gbd *textObject )getFontDict (_abcg string )(_fbdc _ac .PdfObject ,_fcbg error ){_gfcc :=_gbd ._bfcc ;if _gfcc ==nil {_fg .Log .Debug ("g\u0065\u0074\u0046\u006f\u006e\u0074D\u0069\u0063\u0074\u002e\u0020\u004eo\u0020\u0072\u0065\u0073\u006f\u0075\u0072c\u0065\u0073\u002e\u0020\u006e\u0061\u006d\u0065\u003d\u0025#\u0071",_abcg );
return nil ,nil ;};_fbdc ,_eged :=_gfcc .GetFontByName (_ac .PdfObjectName (_abcg ));if !_eged {_fg .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0067\u0065t\u0046\u006f\u006et\u0044\u0069\u0063\u0074\u003a\u0020\u0046\u006f\u006et \u006e\u006f\u0074 \u0066\u006fu\u006e\u0064\u003a\u0020\u006e\u0061m\u0065\u003d%\u0023\u0071",_abcg );
return nil ,_c .New ("f\u006f\u006e\u0074\u0020no\u0074 \u0069\u006e\u0020\u0072\u0065s\u006f\u0075\u0072\u0063\u0065\u0073");};return _fbdc ,nil ;};func (_fcac *textLine )pullWord (_cbgeg *wordBag ,_bfce *textWord ,_gbbc int ){_fcac .appendWord (_bfce );
_cbgeg .removeWord (_bfce ,_gbbc );};func (_ffad *wordBag )firstWord (_beab int )*textWord {return _ffad ._dbee [_beab ][0]};func _bcgcf (_baca ,_cdeae float64 )string {_fbcf :=!_cgaeg (_baca -_cdeae );if _fbcf {return "\u000a";};return "\u0020";};func (_ggfce intSet )add (_bdfbf int ){_ggfce [_bdfbf ]=struct{}{}};
func (_ddfa lineRuling )xMean ()float64 {return 0.5*(_ddfa ._egd .X +_ddfa ._aacf .X )};func _gcda (_gaaff ,_afdfc ,_dcdb ,_bcfb *textPara )*textTable {_ddafg :=&textTable {_eagd :2,_acde :2,_ccacd :make (map[uint64 ]*textPara ,4)};_ddafg .put (0,0,_gaaff );
_ddafg .put (1,0,_afdfc );_ddafg .put (0,1,_dcdb );_ddafg .put (1,1,_bcfb );return _ddafg ;};func (_cgac *textPara )toCellTextMarks (_cfadge *int )[]TextMark {var _cgde []TextMark ;for _agd ,_fgfe :=range _cgac ._bged {_bagce :=_fgfe .toTextMarks (_cfadge );
_adeg :=_gcd &&_fgfe .endsInHyphen ()&&_agd !=len (_cgac ._bged )-1;if _adeg {_bagce =_dfbfd (_bagce ,_cfadge );};_cgde =append (_cgde ,_bagce ...);if !(_adeg ||_agd ==len (_cgac ._bged )-1){_cgde =_bgc (_cgde ,_cfadge ,_bcgcf (_fgfe ._bcee ,_cgac ._bged [_agd +1]._bcee ));
};};return _cgde ;};func (_bdd *textObject )nextLine (){_bdd .moveLP (0,-_bdd ._cada ._egb )};func (_beba *textTable )get (_cdafd ,_gfdbc int )*textPara {return _beba ._ccacd [_dgfc (_cdafd ,_gfdbc )]};func _fbcc (_dfdge []float64 ,_daeg ,_aaca float64 )[]float64 {_gccef ,_bfebc :=_daeg ,_aaca ;
if _bfebc < _gccef {_gccef ,_bfebc =_bfebc ,_gccef ;};_caecb :=make ([]float64 ,0,len (_dfdge )+2);_caecb =append (_caecb ,_daeg );for _ ,_ddadeg :=range _dfdge {if _ddadeg <=_gccef {continue ;}else if _ddadeg >=_bfebc {break ;};_caecb =append (_caecb ,_ddadeg );
};_caecb =append (_caecb ,_aaca );return _caecb ;};func (_bfd *textObject )setTextMatrix (_ddgd []float64 ){if len (_ddgd )!=6{_fg .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u006c\u0065\u006e\u0028\u0066\u0029\u0020\u0021\u003d\u0020\u0036\u0020\u0028\u0025\u0064\u0029",len (_ddgd ));
return ;};_dfb ,_dcc ,_cee ,_bfa ,_bbb ,_adfab :=_ddgd [0],_ddgd [1],_ddgd [2],_ddgd [3],_ddgd [4],_ddgd [5];_bfd ._bfee =_gb .NewMatrix (_dfb ,_dcc ,_cee ,_bfa ,_bbb ,_adfab );_bfd ._fec =_bfd ._bfee ;};func _aabb (_fgbe ,_ecfbe bounded )float64 {return _fgbe .bbox ().Llx -_ecfbe .bbox ().Urx };
func (_aacfg *ruling )alignsPrimary (_dcac *ruling )bool {return _aacfg ._beebc ==_dcac ._beebc &&_d .Abs (_aacfg ._adggg -_dcac ._adggg )< _dbg *0.5;};func (_dcbd *wordBag )maxDepth ()float64 {return _dcbd ._dbbg -_dcbd .Lly };func (_dcae rulingList )mergePrimary ()float64 {_caec :=_dcae [0]._adggg ;
for _ ,_deeag :=range _dcae [1:]{_caec +=_deeag ._adggg ;};return _caec /float64 (len (_dcae ));};func (_cfadfd *textPara )depth ()float64 {if _cfadfd ._dddbf {return -1.0;};if len (_cfadfd ._bged )> 0{return _cfadfd ._bged [0]._bcee ;};return _cfadfd ._gfce .depth ();
};func (_acdc *textWord )appendMark (_fbfed *textMark ,_aceeb _ge .PdfRectangle ){_acdc ._gffgdd =append (_acdc ._gffgdd ,_fbfed );_acdc .PdfRectangle =_gede (_acdc .PdfRectangle ,_fbfed .PdfRectangle );if _fbfed ._fgcd > _acdc ._efaa {_acdc ._efaa =_fbfed ._fgcd ;
};_acdc ._gacg =_aceeb .Ury -_acdc .PdfRectangle .Lly ;};func _cafge (_gcge string ,_addf []rulingList ){_fg .Log .Info ("\u0024\u0024 \u0025\u0064\u0020g\u0072\u0069\u0064\u0073\u0020\u002d\u0020\u0025\u0073",len (_addf ),_gcge );for _gaegb ,_bdfde :=range _addf {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gaegb ,_bdfde .String ());
};};func (_acbab *textWord )bbox ()_ge .PdfRectangle {return _acbab .PdfRectangle };func (_acfg *stateStack )pop ()*textState {if _acfg .empty (){return nil ;};_dceb :=*(*_acfg )[len (*_acfg )-1];*_acfg =(*_acfg )[:len (*_acfg )-1];return &_dceb ;};func _gcc (_gcaf ,_fcd bounded )float64 {return _egge (_gcaf )-_egge (_fcd )};
func _fgbc (_affa map[int ][]float64 )string {_aegf :=_egee (_affa );_abce :=make ([]string ,len (_affa ));for _ggdde ,_ggdc :=range _aegf {_abce [_ggdde ]=_ff .Sprintf ("\u0025\u0064\u003a\u0020\u0025\u002e\u0032\u0066",_ggdc ,_affa [_ggdc ]);};return _ff .Sprintf ("\u007b\u0025\u0073\u007d",_ad .Join (_abce ,"\u002c\u0020"));
};var (_ce =_c .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");_be =_c .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););func (_afag *textWord )addDiacritic (_bcgg string ){_ebdd :=_afag ._gffgdd [len (_afag ._gffgdd )-1];
_ebdd ._gfba +=_bcgg ;_ebdd ._gfba =_bfc .NFKC .String (_ebdd ._gfba );};func (_gec *imageExtractContext )extractContentStreamImages (_dd string ,_ddc *_ge .PdfPageResources )error {_bab :=_fd .NewContentStreamParser (_dd );_dcf ,_aeg :=_bab .Parse ();
if _aeg !=nil {return _aeg ;};if _gec ._dc ==nil {_gec ._dc =map[*_ac .PdfObjectStream ]*cachedImage {};};if _gec ._cdf ==nil {_gec ._cdf =&ImageExtractOptions {};};_ebc :=_fd .NewContentStreamProcessor (*_dcf );_ebc .AddHandler (_fd .HandlerConditionEnumAllOperands ,"",_gec .processOperand );
return _ebc .Process (_ddc );};type rectRuling struct{_bba rulingKind ;_becc markKind ;_fe .Color ;_ge .PdfRectangle ;};type shapesState struct{_gaed _gb .Matrix ;_cfeb _gb .Matrix ;_ccf []*subpath ;_dbb bool ;_gbb _gb .Point ;_ceae *textObject ;};var (_dcbdg =map[rune ]string {0x0060:"\u0300",0x02CB:"\u0300",0x0027:"\u0301",0x00B4:"\u0301",0x02B9:"\u0301",0x02CA:"\u0301",0x005E:"\u0302",0x02C6:"\u0302",0x007E:"\u0303",0x02DC:"\u0303",0x00AF:"\u0304",0x02C9:"\u0304",0x02D8:"\u0306",0x02D9:"\u0307",0x00A8:"\u0308",0x00B0:"\u030a",0x02DA:"\u030a",0x02BA:"\u030b",0x02DD:"\u030b",0x02C7:"\u030c",0x02C8:"\u030d",0x0022:"\u030e",0x02BB:"\u0312",0x02BC:"\u0313",0x0486:"\u0313",0x055A:"\u0313",0x02BD:"\u0314",0x0485:"\u0314",0x0559:"\u0314",0x02D4:"\u031d",0x02D5:"\u031e",0x02D6:"\u031f",0x02D7:"\u0320",0x02B2:"\u0321",0x00B8:"\u0327",0x02CC:"\u0329",0x02B7:"\u032b",0x02CD:"\u0331",0x005F:"\u0332",0x204E:"\u0359"};
);func (_agde *textPara )isAtom ()*textTable {_faadc :=_agde ;_fccbg :=_agde ._caa ;_ebeb :=_agde ._cafc ;if !(_fccbg !=nil &&!_fccbg ._cdcf &&_ebeb !=nil &&!_ebeb ._cdcf ){return nil ;};_egbec :=_fccbg ._cafc ;if !(_egbec !=nil &&!_egbec ._cdcf &&_egbec ==_ebeb ._caa ){return nil ;
};return _gcda (_faadc ,_fccbg ,_ebeb ,_egbec );};func (_bcg *shapesState )addPoint (_ggaa ,_dgdc float64 ){_cdeg :=_bcg .establishSubpath ();_gfea :=_bcg .devicePoint (_ggaa ,_dgdc );if _cdeg ==nil {_bcg ._dbb =true ;_bcg ._gbb =_gfea ;}else {_cdeg .add (_gfea );
};};func _beec (_ddfb int ,_cgbd func (int ,int )bool )[]int {_dcaa :=make ([]int ,_ddfb );for _gfac :=range _dcaa {_dcaa [_gfac ]=_gfac ;};_bf .Slice (_dcaa ,func (_dceac ,_cfdef int )bool {return _cgbd (_dcaa [_dceac ],_dcaa [_cfdef ])});return _dcaa ;
};func (_gbebf *wordBag )makeRemovals ()map[int ]map[*textWord ]struct{}{_debd :=make (map[int ]map[*textWord ]struct{},len (_gbebf ._dbee ));for _gbdb :=range _gbebf ._dbee {_debd [_gbdb ]=make (map[*textWord ]struct{});};return _debd ;};

// String returns a description of `t`.
func (_dgab *textTable )String ()string {return _ff .Sprintf ("\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0025\u0074",_dgab ._eagd ,_dgab ._acde ,_dgab ._gbfc );};func (_ddbfdb gridTiling )log (_fcad string ){if !_cagc {return ;};_fg .Log .Info ("\u0074i\u006ci\u006e\u0067\u003a\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0071",len (_ddbfdb ._cfde ),len (_ddbfdb ._bgbge ),_fcad );
_ff .Printf ("\u0020\u0020\u0020l\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a",_ddbfdb ._cfde );_ff .Printf ("\u0020\u0020\u0020l\u006c\u0079\u003d\u0025\u002e\u0032\u0066\u000a",_ddbfdb ._bgbge );for _gfeg ,_fdffb :=range _ddbfdb ._bgbge {_defg ,_bbedc :=_ddbfdb ._fddeg [_fdffb ];
if !_bbedc {continue ;};_ff .Printf ("%\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_gfeg ,_fdffb );for _gfec ,_acbaa :=range _ddbfdb ._cfde {_ddbea ,_aabd :=_defg [_acbaa ];if !_aabd {continue ;};_ff .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_gfec ,_ddbea .String ());
};};};type textTable struct{_ge .PdfRectangle ;_eagd ,_acde int ;_gbfc bool ;_ccacd map[uint64 ]*textPara ;_fafc map[uint64 ]compositeCell ;};

// String returns a description of `l`.
func (_bdfd *textLine )String ()string {return _ff .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_bdfd ._bcee ,_bdfd .PdfRectangle ,_bdfd ._fbbc ,_bdfd .text ());
};func (_ecad *subpath )isQuadrilateral ()bool {if len (_ecad ._fbb )< 4||len (_ecad ._fbb )> 5{return false ;};if len (_ecad ._fbb )==5{_bfgg :=_ecad ._fbb [0];_dfac :=_ecad ._fbb [4];if _bfgg .X !=_dfac .X ||_bfgg .Y !=_dfac .Y {return false ;};};return true ;
};func (_fbcd *textTable )subdivide ()*textTable {_fbcd .logComposite ("\u0073u\u0062\u0064\u0069\u0076\u0069\u0064e");_acga :=_fbcd .compositeRowCorridors ();_daac :=_fbcd .compositeColCorridors ();if _cfadg {_fg .Log .Info ("\u0073u\u0062\u0064i\u0076\u0069\u0064\u0065:\u000a\u0009\u0072o\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s=\u0025\u0073\u000a\t\u0063\u006fl\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073=\u0025\u0073",_fgbc (_acga ),_fgbc (_daac ));
};if len (_acga )==0||len (_daac )==0{return _fbcd ;};_cdbce (_acga );_cdbce (_daac );if _cfadg {_fg .Log .Info ("\u0073\u0075\u0062\u0064\u0069\u0076\u0069\u0064\u0065\u0020\u0066\u0069\u0078\u0065\u0064\u003a\u000a\u0009r\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073\u003d\u0025\u0073\u000a\u0009\u0063\u006f\u006cC\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d\u0025\u0073",_fgbc (_acga ),_fgbc (_daac ));
};_aege ,_fege :=_eefbb (_fbcd ._acde ,_acga );_effc ,_baabc :=_eefbb (_fbcd ._eagd ,_daac );_cbbf :=make (map[uint64 ]*textPara ,_baabc *_fege );_ggaec :=&textTable {PdfRectangle :_fbcd .PdfRectangle ,_gbfc :_fbcd ._gbfc ,_acde :_fege ,_eagd :_baabc ,_ccacd :_cbbf };
if _cfadg {_fg .Log .Info ("\u0073\u0075b\u0064\u0069\u0076\u0069\u0064\u0065\u003a\u0020\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0063\u0065\u006c\u006c\u0073\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0079\u004f\u0066\u0066\u0073\u0065\u0074\u0073=\u0025\u002b\u0076\u000a"+"\u0009\u0078\u004f\u0066\u0066\u0073\u0065\u0074\u0073\u003d\u0025\u002b\u0076",_fbcd ._eagd ,_fbcd ._acde ,_baabc ,_fege ,_fgbc (_acga ),_fgbc (_daac ),_aege ,_effc );
};for _dacf :=0;_dacf < _fbcd ._acde ;_dacf ++{_fggfa :=_aege [_dacf ];for _afba :=0;_afba < _fbcd ._eagd ;_afba ++{_acbc :=_effc [_afba ];if _cfadg {_ff .Printf ("\u0025\u0036\u0064\u002c %\u0032\u0064\u003a\u0020\u0078\u0030\u003d\u0025\u0064\u0020\u0079\u0030\u003d\u0025d\u000a",_afba ,_dacf ,_acbc ,_fggfa );
};_dcebe ,_dgce :=_fbcd ._fafc [_dgfc (_afba ,_dacf )];if !_dgce {continue ;};_gafce :=_dcebe .split (_acga [_dacf ],_daac [_afba ]);for _afea :=0;_afea < _gafce ._acde ;_afea ++{for _geffg :=0;_geffg < _gafce ._eagd ;_geffg ++{_bbfe :=_gafce .get (_geffg ,_afea );
_ggaec .put (_acbc +_geffg ,_fggfa +_afea ,_bbfe );if _cfadg {_ff .Printf ("\u0025\u0038\u0064\u002c\u0020\u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_acbc +_geffg ,_fggfa +_afea ,_bbfe );};};};};};return _ggaec ;};func (_bbcg *wordBag )scanBand (_cae string ,_deab *wordBag ,_bggce func (_cgcg *wordBag ,_aagga *textWord )bool ,_afaf ,_abe ,_bddd float64 ,_fbga ,_efge bool )int {_bacc :=_deab ._gdfg ;
var _eaba map[int ]map[*textWord ]struct{};if !_fbga {_eaba =_bbcg .makeRemovals ();};_cdgb :=_fdde *_bacc ;_gfag :=0;for _ ,_cged :=range _bbcg .depthBand (_afaf -_cdgb ,_abe +_cdgb ){if len (_bbcg ._dbee [_cged ])==0{continue ;};for _ ,_ceef :=range _bbcg ._dbee [_cged ]{if !(_afaf -_cdgb <=_ceef ._gacg &&_ceef ._gacg <=_abe +_cdgb ){continue ;
};if !_bggce (_deab ,_ceef ){continue ;};_aeeb :=2.0*_d .Abs (_ceef ._efaa -_deab ._gdfg )/(_ceef ._efaa +_deab ._gdfg );_aegc :=_d .Max (_ceef ._efaa /_deab ._gdfg ,_deab ._gdfg /_ceef ._efaa );_caca :=_d .Min (_aeeb ,_aegc );if _bddd > 0&&_caca > _bddd {continue ;
};if _deab .blocked (_ceef ){continue ;};if !_fbga {_deab .pullWord (_ceef ,_cged ,_eaba );};_gfag ++;if !_efge {if _ceef ._gacg < _afaf {_afaf =_ceef ._gacg ;};if _ceef ._gacg > _abe {_abe =_ceef ._gacg ;};};if _fbga {break ;};};};if !_fbga {_bbcg .applyRemovals (_eaba );
};return _gfag ;};func (_gdfd rulingList )toGrids ()[]rulingList {if _ffee {_fg .Log .Info ("t\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0025\u0073",_gdfd );};_eagb :=_gdfd .intersections ();if _ffee {_fg .Log .Info ("\u0074\u006f\u0047r\u0069\u0064\u0073\u003a \u0076\u0065\u0063\u0073\u003d\u0025\u0064 \u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003d\u0025\u0064\u0020",len (_gdfd ),len (_eagb ));
for _ ,_deffa :=range _dddg (_eagb ){_ff .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_deffa ,_eagb [_deffa ]);};};_ddeeg :=make (map[int ]intSet ,len (_gdfd ));for _adbe :=range _gdfd {_geb :=_gdfd .connections (_eagb ,_adbe );if len (_geb )> 0{_ddeeg [_adbe ]=_geb ;
};};if _ffee {_fg .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0063\u006fn\u006e\u0065\u0063\u0074s=\u0025\u0064",len (_ddeeg ));for _ ,_ffeg :=range _dddg (_ddeeg ){_ff .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_ffeg ,_ddeeg [_ffeg ]);
};};_baee :=_beec (len (_gdfd ),func (_dbed ,_abed int )bool {_dafed ,_cdbc :=len (_ddeeg [_dbed ]),len (_ddeeg [_abed ]);if _dafed !=_cdbc {return _dafed > _cdbc ;};return _gdfd .comp (_dbed ,_abed );});if _ffee {_fg .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u006f\u0072d\u0065\u0072\u0069\u006eg=\u0025\u0076",_baee );
};_cddbb :=[][]int {{_baee [0]}};_egcg :for _ ,_gedea :=range _baee [1:]{for _fdea ,_fgbd :=range _cddbb {for _ ,_ffege :=range _fgbd {if _ddeeg [_ffege ].has (_gedea ){_cddbb [_fdea ]=append (_fgbd ,_gedea );continue _egcg ;};};};_cddbb =append (_cddbb ,[]int {_gedea });
};if _ffee {_fg .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020i\u0067\u0072i\u0064\u0073\u003d\u0025\u0076",_cddbb );};_bf .SliceStable (_cddbb ,func (_agdd ,_gcbd int )bool {return len (_cddbb [_agdd ])> len (_cddbb [_gcbd ])});for _ ,_fdae :=range _cddbb {_bf .Slice (_fdae ,func (_gdbf ,_ddfd int )bool {return _gdfd .comp (_fdae [_gdbf ],_fdae [_ddfd ])});
};_dagda :=make ([]rulingList ,len (_cddbb ));for _efaf ,_egfc :=range _cddbb {_gbba :=make (rulingList ,len (_egfc ));for _bdfb ,_cagb :=range _egfc {_gbba [_bdfb ]=_gdfd [_cagb ];};_dagda [_efaf ]=_gbba ;};if _ffee {_fg .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020g\u0072\u0069d\u0073\u003d\u0025\u002b\u0076",_dagda );
};var _dfgag []rulingList ;for _ ,_fadg :=range _dagda {if _agag ,_dabc :=_fadg .isActualGrid ();_dabc {_fadg =_agag ;_fadg =_fadg .snapToGroups ();_dfgag =append (_dfgag ,_fadg );};};if _ffee {_cafge ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0061\u0063t\u0075\u0061\u006c\u0047ri\u0064\u0073",_dfgag );
_fg .Log .Info ("\u0074\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0067\u0072\u0069\u0064\u0073\u003d%\u0064 \u0061\u0063\u0074\u0075\u0061\u006c\u0047\u0072\u0069\u0064\u0073\u003d\u0025\u0064",len (_dagda ),len (_dfgag ));};return _dfgag ;};func (_bfgb *textPara )taken ()bool {return _bfgb ==nil ||_bfgb ._cdcf };
func _cdbce (_gdfe map[int ][]float64 ){if len (_gdfe )<=1{return ;};_ebcga :=_egee (_gdfe );if _cfadg {_fg .Log .Info ("\u0066i\u0078C\u0065\u006c\u006c\u0073\u003a \u006b\u0065y\u0073\u003d\u0025\u002b\u0076",_ebcga );};var _ddgbe ,_bcec int ;for _ddgbe ,_bcec =range _ebcga {if _gdfe [_bcec ]!=nil {break ;
};};for _cbga ,_cafa :=range _ebcga [_ddgbe :]{_fdccfa :=_gdfe [_cafa ];if _fdccfa ==nil {continue ;};if _cfadg {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u006b\u0030\u003d\u0025\u0064\u0020\u006b1\u003d\u0025\u0064\u000a",_ddgbe +_cbga ,_bcec ,_cafa );
};_eccag :=_gdfe [_cafa ];if _eccag [len (_eccag )-1]> _fdccfa [0]{_eccag [len (_eccag )-1]=_fdccfa [0];_gdfe [_bcec ]=_eccag ;};_bcec =_cafa ;};};func (_edgac *wordBag )arrangeText ()*textPara {_edgac .sort ();if _ddbf {_edgac .removeDuplicates ();};var _eca []*textLine ;
for _ ,_dbdf :=range _edgac .depthIndexes (){for !_edgac .empty (_dbdf ){_efcd :=_edgac .firstReadingIndex (_dbdf );_cegf :=_edgac .firstWord (_efcd );_fcce :=_dgge (_edgac ,_efcd );_fgdg :=_cegf ._efaa ;_acabf :=_cegf ._gacg -_fdde *_fgdg ;_fdgf :=_cegf ._gacg +_fdde *_fgdg ;
_cgeg :=_gafb *_fgdg ;_acaab :=_dcef *_fgdg ;_dabff :for {var _becdb *textWord ;_cceaa :=0;for _ ,_fga :=range _edgac .depthBand (_acabf ,_fdgf ){_cggf :=_edgac .highestWord (_fga ,_acabf ,_fdgf );if _cggf ==nil {continue ;};_dagd :=_aabb (_cggf ,_fcce ._fbeb [len (_fcce ._fbeb )-1]);
if _dagd < -_acaab {break _dabff ;};if _dagd > _cgeg {continue ;};if _becdb !=nil &&_edb (_cggf ,_becdb )>=0{continue ;};_becdb =_cggf ;_cceaa =_fga ;};if _becdb ==nil {break ;};_fcce .pullWord (_edgac ,_becdb ,_cceaa );};_fcce .markWordBoundaries ();_eca =append (_eca ,_fcce );
};};if len (_eca )==0{return nil ;};_bf .Slice (_eca ,func (_begc ,_bfdf int )bool {return _cbace (_eca [_begc ],_eca [_bfdf ])< 0});_bgeb :=_aaea (_edgac .PdfRectangle ,_eca );if _abga {_fg .Log .Info ("\u0061\u0072\u0072an\u0067\u0065\u0054\u0065\u0078\u0074\u0020\u0021\u0021\u0021\u0020\u0070\u0061\u0072\u0061\u003d\u0025\u0073",_bgeb .String ());
if _gcee {for _fgbf ,_abd :=range _bgeb ._bged {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fgbf ,_abd .String ());if _badfb {for _aadcg ,_abcd :=range _abd ._fbeb {_ff .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_aadcg ,_abcd .String ());
for _dfab ,_cgdc :=range _abcd ._gffgdd {_ff .Printf ("\u00251\u0032\u0064\u003a\u0020\u0025\u0073\n",_dfab ,_cgdc .String ());};};};};};};return _bgeb ;};func (_egagf rulingList )comp (_gfabe ,_becga int )bool {_dbge ,_ffde :=_egagf [_gfabe ],_egagf [_becga ];
_ccgfc ,_aeebcf :=_dbge ._beebc ,_ffde ._beebc ;if _ccgfc !=_aeebcf {return _ccgfc > _aeebcf ;};if _ccgfc ==_bgcgd {return false ;};_fgaf :=func (_ggdd bool )bool {if _ccgfc ==_bbge {return _ggdd ;};return !_ggdd ;};_eddd ,_efde :=_dbge ._adggg ,_ffde ._adggg ;
if _eddd !=_efde {return _fgaf (_eddd > _efde );};_eddd ,_efde =_dbge ._ceggf ,_ffde ._ceggf ;if _eddd !=_efde {return _fgaf (_eddd < _efde );};return _fgaf (_dbge ._gbcd < _ffde ._gbcd );};func (_daeb rulingList )sortStrict (){_bf .Slice (_daeb ,func (_bfdd ,_eea int )bool {_dfecb ,_bffbd :=_daeb [_bfdd ],_daeb [_eea ];
_eecc ,_edfc :=_dfecb ._beebc ,_bffbd ._beebc ;if _eecc !=_edfc {return _eecc > _edfc ;};_fdfaf ,_aaae :=_dfecb ._adggg ,_bffbd ._adggg ;if !_cgaeg (_fdfaf -_aaae ){return _fdfaf < _aaae ;};_fdfaf ,_aaae =_dfecb ._ceggf ,_bffbd ._ceggf ;if _fdfaf !=_aaae {return _fdfaf < _aaae ;
};return _dfecb ._gbcd < _bffbd ._gbcd ;});};func _fdggg (_cegce _ge .PdfRectangle ,_gabf ,_abcb ,_cgfbe ,_fedg *ruling )gridTile {_efga :=_cegce .Llx ;_gbae :=_cegce .Urx ;_ebcb :=_cegce .Lly ;_bgdc :=_cegce .Ury ;return gridTile {PdfRectangle :_cegce ,_cdfbd :_gabf !=nil &&_gabf .encloses (_ebcb ,_bgdc ),_egdg :_abcb !=nil &&_abcb .encloses (_ebcb ,_bgdc ),_cgff :_cgfbe !=nil &&_cgfbe .encloses (_efga ,_gbae ),_bbaa :_fedg !=nil &&_fedg .encloses (_efga ,_gbae )};
};func (_gebg *textTable )put (_geffa ,_gddc int ,_fcdfg *textPara ){_gebg ._ccacd [_dgfc (_geffa ,_gddc )]=_fcdfg ;};func (_fdccf paraList )log (_fbad string ){if !_ecdd {return ;};_fg .Log .Info ("%\u0038\u0073\u003a\u0020\u0025\u0064 \u0070\u0061\u0072\u0061\u0073\u0020=\u003d\u003d\u003d\u003d\u003d\u003d\u002d-\u002d\u002d\u002d\u002d\u002d\u003d\u003d\u003d\u003d\u003d=\u003d",_fbad ,len (_fdccf ));
for _dccc ,_agcd :=range _fdccf {if _agcd ==nil {continue ;};_ebffg :=_agcd .text ();_edcda :="\u0020\u0020";if _agcd ._gfce !=nil {_edcda =_ff .Sprintf ("\u005b%\u0064\u0078\u0025\u0064\u005d",_agcd ._gfce ._eagd ,_agcd ._gfce ._acde );};_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0025s\u0020\u0025\u0071\u000a",_dccc ,_agcd .PdfRectangle ,_edcda ,_dgae (_ebffg ,50));
};};func _dfea (_bfff _ge .PdfRectangle )textState {return textState {_aad :100,_ecf :RenderModeFill ,_fabc :_bfff };};func (_gfgd *wordBag )depthBand (_gefe ,_bfec float64 )[]int {if len (_gfgd ._dbee )==0{return nil ;};return _gfgd .depthRange (_gfgd .getDepthIdx (_gefe ),_gfgd .getDepthIdx (_bfec ));
};func (_bbae rulingList )bbox ()_ge .PdfRectangle {var _ddeea _ge .PdfRectangle ;if len (_bbae )==0{_fg .Log .Error ("r\u0075\u006c\u0069\u006e\u0067\u004ci\u0073\u0074\u002e\u0062\u0062\u006f\u0078\u003a\u0020n\u006f\u0020\u0072u\u006ci\u006e\u0067\u0073");
return _ge .PdfRectangle {};};if _bbae [0]._beebc ==_bbge {_ddeea .Llx ,_ddeea .Urx =_bbae .secMinMax ();_ddeea .Lly ,_ddeea .Ury =_bbae .primMinMax ();}else {_ddeea .Llx ,_ddeea .Urx =_bbae .primMinMax ();_ddeea .Lly ,_ddeea .Ury =_bbae .secMinMax ();
};return _ddeea ;};func (_efbe paraList )findGridTables (_aaagc []gridTiling )[]*textTable {if _cfadg {_fg .Log .Info ("\u0066i\u006e\u0064\u0047\u0072\u0069\u0064\u0054\u0061\u0062\u006c\u0065s\u003a\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073",len (_efbe ));
for _fbcb ,_dded :=range _efbe {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fbcb ,_dded );};};var _fgfg []*textTable ;for _cecc ,_gea :=range _aaagc {_aeba ,_gcea :=_efbe .findTableGrid (_gea );if _aeba !=nil {_aeba .log (_ff .Sprintf ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0057\u0069\u0074\u0068\u0047\u0072\u0069\u0064\u0073\u003a\u0020%\u0064",_cecc ));
_fgfg =append (_fgfg ,_aeba );_aeba .markCells ();};for _eggb :=range _gcea {_eggb ._cdcf =true ;};};if _cfadg {_fg .Log .Info ("\u0066i\u006e\u0064\u0047\u0072i\u0064\u0054\u0061\u0062\u006ce\u0073:\u0020%\u0064\u0020\u0074\u0061\u0062\u006c\u0065s",len (_fgfg ));
};return _fgfg ;};func (_abc *textObject )moveTextSetLeading (_fgf ,_aeed float64 ){_abc ._cada ._egb =-_aeed ;_abc .moveLP (_fgf ,_aeed );};func _efea (_cedc _ge .PdfRectangle )*ruling {return &ruling {_beebc :_bbge ,_adggg :_cedc .Lly ,_ceggf :_cedc .Llx ,_gbcd :_cedc .Urx };
};func (_aecb rulingList )sort (){_bf .Slice (_aecb ,_aecb .comp )};func (_fedf paraList )llyRange (_ebcdg []int ,_dgcag ,_gcef float64 )[]int {_cafb :=len (_fedf );if _gcef < _fedf [_ebcdg [0]].Lly ||_dgcag > _fedf [_ebcdg [_cafb -1]].Lly {return nil ;
};_gecfaa :=_bf .Search (_cafb ,func (_fdfed int )bool {return _fedf [_ebcdg [_fdfed ]].Lly >=_dgcag });_cbece :=_bf .Search (_cafb ,func (_bgaf int )bool {return _fedf [_ebcdg [_bgaf ]].Lly > _gcef });return _ebcdg [_gecfaa :_cbece ];};func (_efeef gridTiling )complete ()bool {for _ ,_cfaaf :=range _efeef ._fddeg {for _ ,_fgab :=range _cfaaf {if !_fgab .complete (){return false ;
};};};return true ;};func _cgaeg (_affg float64 )bool {return _d .Abs (_affg )< _gacb };func _aaea (_bdgb _ge .PdfRectangle ,_gaba []*textLine )*textPara {return &textPara {PdfRectangle :_bdgb ,_bged :_gaba };};func (_dad *shapesState )fill (_gece *[]pathSection ){_aaac :=pathSection {_cbfa :_dad ._ccf ,Color :_dad ._ceae .getFillColor ()};
*_gece =append (*_gece ,_aaac );if _ffee {_eceb :=_aaac .bbox ();_ff .Printf ("\u0020 \u0020\u0020\u0046\u0049\u004c\u004c\u003a %\u0032\u0064\u0020\u0066\u0069\u006c\u006c\u0073\u0020\u0028\u0025\u0064\u0020\u006ee\u0077\u0029 \u0073\u0073\u003d%\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d\u0025\u0033\u0076\u0020\u0025\u0036\u002e\u0032f\u003d\u00256.\u0032\u0066\u0078%\u0036\u002e\u0032\u0066\u000a",len (*_gece ),len (_aaac ._cbfa ),_dad ,_aaac .Color ,_eceb ,_eceb .Width (),_eceb .Height ());
if _bccd {for _gcb ,_dbe :=range _aaac ._cbfa {_ff .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_gcb ,_dbe );if _gcb ==10{break ;};};};};};func _dddg (_cddg map[int ]intSet )[]int {_cbcbf :=make ([]int ,0,len (_cddg ));for _daaaf :=range _cddg {_cbcbf =append (_cbcbf ,_daaaf );
};_bf .Ints (_cbcbf );return _cbcbf ;};func (_ada *imageExtractContext )extractInlineImage (_cda *_fd .ContentStreamInlineImage ,_fgg _fd .GraphicsState ,_eac *_ge .PdfPageResources )error {_gf ,_egc :=_cda .ToImage (_eac );if _egc !=nil {return _egc ;
};_fdc ,_egc :=_cda .GetColorSpace (_eac );if _egc !=nil {return _egc ;};if _fdc ==nil {_fdc =_ge .NewPdfColorspaceDeviceGray ();};_ca ,_egc :=_fdc .ImageToRGB (*_gf );if _egc !=nil {return _egc ;};_aa :=ImageMark {Image :&_ca ,Width :_fgg .CTM .ScalingFactorX (),Height :_fgg .CTM .ScalingFactorY (),Angle :_fgg .CTM .Angle ()};
_aa .X ,_aa .Y =_fgg .CTM .Translation ();_ada ._fac =append (_ada ._fac ,_aa );_ada ._dff ++;return nil ;};func (_gbge rulingList )secMinMax ()(float64 ,float64 ){_fgcc ,_gfdb :=_gbge [0]._ceggf ,_gbge [0]._gbcd ;for _ ,_cgab :=range _gbge [1:]{if _cgab ._ceggf < _fgcc {_fgcc =_cgab ._ceggf ;
};if _cgab ._gbcd > _gfdb {_gfdb =_cgab ._gbcd ;};};return _fgcc ,_gfdb ;};func (_cgd *textLine )appendWord (_fddf *textWord ){_cgd ._fbeb =append (_cgd ._fbeb ,_fddf );_cgd .PdfRectangle =_gede (_cgd .PdfRectangle ,_fddf .PdfRectangle );if _fddf ._efaa > _cgd ._fbbc {_cgd ._fbbc =_fddf ._efaa ;
};if _fddf ._gacg > _cgd ._bcee {_cgd ._bcee =_fddf ._gacg ;};};const (_gacb =1.0e-6;_bbbd =1.0e-4;_bbd =10;_gdd =6;_fdde =0.5;_cfgd =0.12;_edaa =0.19;_bedf =0.04;_eeeg =0.04;_eegd =1.0;_gba =0.04;_ffef =0.4;_fegg =0.7;_ddcbf =1.0;_fcbff =0.1;_gafb =1.4;
_dcef =0.46;_gddd =0.02;_gfd =0.2;_dege =0.5;_febcd =4;_befe =4.0;_bcde =6;_gdda =0.3;_adeb =0.01;_dabfc =0.02;_gcab =2;_efdf =2;_bggf =500;_def =4.0;_cffc =4.0;_baff =0.05;_ecde =0.1;_cdga =2.0;_dbg =2.0;_addae =1.5;_efcae =3.0;_febe =0.25;);func (_cbd *imageExtractContext )extractFormImages (_baa *_ac .PdfObjectName ,_bc _fd .GraphicsState ,_edd *_ge .PdfPageResources )error {_afe ,_add :=_edd .GetXObjectFormByName (*_baa );
if _add !=nil {return _add ;};if _afe ==nil {return nil ;};_ead ,_add :=_afe .GetContentStream ();if _add !=nil {return _add ;};_cbf :=_afe .Resources ;if _cbf ==nil {_cbf =_edd ;};_add =_cbd .extractContentStreamImages (string (_ead ),_cbf );if _add !=nil {return _add ;
};_cbd ._ag ++;return nil ;};func _ccaee (_gfdc []pathSection )rulingList {_ceefd (_gfdc );if _ffee {_fg .Log .Info ("\u006d\u0061k\u0065\u0053\u0074\u0072\u006f\u006b\u0065\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0064\u0020\u0073\u0074\u0072ok\u0065\u0073",len (_gfdc ));
};var _efcb rulingList ;for _ ,_cfaag :=range _gfdc {for _ ,_eceeg :=range _cfaag ._cbfa {if len (_eceeg ._fbb )< 2{continue ;};_ebdc :=_eceeg ._fbb [0];for _ ,_ebef :=range _eceeg ._fbb [1:]{if _bfbf ,_eaefg :=_bdgbd (_ebdc ,_ebef ,_cfaag .Color );_eaefg {_efcb =append (_efcb ,_bfbf );
};_ebdc =_ebef ;};};};if _ffee {_fg .Log .Info ("m\u0061\u006b\u0065\u0053tr\u006fk\u0065\u0052\u0075\u006c\u0069n\u0067\u0073\u003a\u0020\u0025\u0073",_efcb );};return _efcb ;};func _fbaa (_cgcgf string )string {_gdec :=[]rune (_cgcgf );return string (_gdec [:len (_gdec )-1])};
func (_ceeee *textTable )growTable (){_dadbf :=func (_aeac paraList ){_ceeee ._acde ++;for _ceeg :=0;_ceeg < _ceeee ._eagd ;_ceeg ++{_gaaea :=_aeac [_ceeg ];_ceeee .put (_ceeg ,_ceeee ._acde -1,_gaaea );};};_ffaa :=func (_gccbe paraList ){_ceeee ._eagd ++;
for _caad :=0;_caad < _ceeee ._acde ;_caad ++{_bcaa :=_gccbe [_caad ];_ceeee .put (_ceeee ._eagd -1,_caad ,_bcaa );};};if _egfb {_ceeee .log ("\u0067r\u006f\u0077\u0054\u0061\u0062\u006ce");};for _bbbfc :=0;;_bbbfc ++{_caabd :=false ;_bcfg :=_ceeee .getDown ();
_aacbb :=_ceeee .getRight ();if _egfb {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bbbfc ,_ceeee );_ff .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0020\u0064\u006f\u0077\u006e\u003d\u0025\u0073\u000a",_bcfg );_ff .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0072\u0069\u0067\u0068\u0074\u003d\u0025\u0073\u000a",_aacbb );
};if _bcfg !=nil &&_aacbb !=nil {_eeae :=_bcfg [len (_bcfg )-1];if _eeae !=nil &&!_eeae ._cdcf &&_eeae ==_aacbb [len (_aacbb )-1]{_dadbf (_bcfg );if _aacbb =_ceeee .getRight ();_aacbb !=nil {_ffaa (_aacbb );_ceeee .put (_ceeee ._eagd -1,_ceeee ._acde -1,_eeae );
};_caabd =true ;};};if !_caabd &&_bcfg !=nil {_dadbf (_bcfg );_caabd =true ;};if !_caabd &&_aacbb !=nil {_ffaa (_aacbb );_caabd =true ;};if !_caabd {break ;};};};

// ExtractTextWithStats works like ExtractText but returns the number of characters in the output
// (`numChars`) and the number of characters that were not decoded (`numMisses`).
func (_ddce *Extractor )ExtractTextWithStats ()(_dee string ,_fab int ,_egcd int ,_ece error ){_ccg ,_fab ,_egcd ,_ece :=_ddce .ExtractPageText ();if _ece !=nil {return "",_fab ,_egcd ,_ece ;};return _ccg .Text (),_fab ,_egcd ,nil ;};func (_acac *textPara )bbox ()_ge .PdfRectangle {return _acac .PdfRectangle };
func (_facc pathSection )bbox ()_ge .PdfRectangle {_aef :=_facc ._cbfa [0]._fbb [0];_ega :=_ge .PdfRectangle {Llx :_aef .X ,Urx :_aef .X ,Lly :_aef .Y ,Ury :_aef .Y };_fgea :=func (_bedd _gb .Point ){if _bedd .X < _ega .Llx {_ega .Llx =_bedd .X ;}else if _bedd .X > _ega .Urx {_ega .Urx =_bedd .X ;
};if _bedd .Y < _ega .Lly {_ega .Lly =_bedd .Y ;}else if _bedd .Y > _ega .Ury {_ega .Ury =_bedd .Y ;};};for _ ,_cbff :=range _facc ._cbfa [0]._fbb [1:]{_fgea (_cbff );};for _ ,_dafc :=range _facc ._cbfa [1:]{for _ ,_fag :=range _dafc ._fbb {_fgea (_fag );
};};return _ega ;};func (_bgcgb rulingList )primaries ()[]float64 {_dbfda :=make (map[float64 ]struct{},len (_bgcgb ));for _ ,_cgfe :=range _bgcgb {_dbfda [_cgfe ._adggg ]=struct{}{};};_aace :=make ([]float64 ,len (_dbfda ));_bgfb :=0;for _abfb :=range _dbfda {_aace [_bgfb ]=_abfb ;
_bgfb ++;};_bf .Float64s (_aace );return _aace ;};func (_bda *textObject )setTextRenderMode (_aed int ){if _bda ==nil {return ;};_bda ._cada ._ecf =RenderMode (_aed );};

// TableCell is a cell in a TextTable.
type TableCell struct{

// Text is the extracted text.
Text string ;

// Marks returns the TextMarks corresponding to the text in Text.
Marks TextMarkArray ;};func (_bfefc *textLine )bbox ()_ge .PdfRectangle {return _bfefc .PdfRectangle };func _eabd (_fcgg []*wordBag )[]*wordBag {if len (_fcgg )<=1{return _fcgg ;};if _abga {_fg .Log .Info ("\u006d\u0065\u0072\u0067\u0065\u0057\u006f\u0072\u0064B\u0061\u0067\u0073\u003a");
};_bf .Slice (_fcgg ,func (_cddba ,_acee int )bool {_gbef ,_dcad :=_fcgg [_cddba ],_fcgg [_acee ];_cegg :=_gbef .Width ()*_gbef .Height ();_ebda :=_dcad .Width ()*_dcad .Height ();if _cegg !=_ebda {return _cegg > _ebda ;};if _gbef .Height ()!=_dcad .Height (){return _gbef .Height ()> _dcad .Height ();
};return _cddba < _acee ;});var _geff []*wordBag ;_gggb :=make (intSet );for _fbda :=0;_fbda < len (_fcgg );_fbda ++{if _gggb .has (_fbda ){continue ;};_cdae :=_fcgg [_fbda ];for _bbef :=_fbda +1;_bbef < len (_fcgg );_bbef ++{if _gggb .has (_fbda ){continue ;
};_ggbb :=_fcgg [_bbef ];_egfd :=_cdae .PdfRectangle ;_egfd .Llx -=_cdae ._gdfg ;if _gaaa (_egfd ,_ggbb .PdfRectangle ){_cdae .absorb (_ggbb );_gggb .add (_bbef );};};_geff =append (_geff ,_cdae );};if len (_fcgg )!=len (_geff )+len (_gggb ){_fg .Log .Error ("\u006d\u0065\u0072ge\u0057\u006f\u0072\u0064\u0042\u0061\u0067\u0073\u003a \u0025d\u2192%\u0064 \u0061\u0062\u0073\u006f\u0072\u0062\u0065\u0064\u003d\u0025\u0064",len (_fcgg ),len (_geff ),len (_gggb ));
};return _geff ;};func (_befb paraList )applyTables (_egca []*textTable )paraList {var _fbefc paraList ;for _ ,_fcaf :=range _egca {_fbefc =append (_fbefc ,_fcaf .newTablePara ());};for _ ,_ddbfe :=range _befb {if _ddbfe ._cdcf {continue ;};_fbefc =append (_fbefc ,_ddbfe );
};return _fbefc ;};func _ggfg (_ecfg _ge .PdfRectangle )*ruling {return &ruling {_beebc :_egea ,_adggg :_ecfg .Urx ,_ceggf :_ecfg .Lly ,_gbcd :_ecfg .Ury };};func (_eddb *textTable )log (_addg string ){if !_cfadg {return ;};_fg .Log .Info ("~\u007e\u007e\u0020\u0025\u0073\u003a \u0025\u0064\u0020\u0078\u0020\u0025d\u0020\u0067\u0072\u0069\u0064\u003d\u0025t\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0025\u0036\u002e2\u0066",_addg ,_eddb ._eagd ,_eddb ._acde ,_eddb ._gbfc ,_eddb .PdfRectangle );
for _dbbf :=0;_dbbf < _eddb ._acde ;_dbbf ++{for _ggfe :=0;_ggfe < _eddb ._eagd ;_ggfe ++{_cffb :=_eddb .get (_ggfe ,_dbbf );if _cffb ==nil {continue ;};_ff .Printf ("%\u0034\u0064\u0020\u00252d\u003a \u0025\u0036\u002e\u0032\u0066 \u0025\u0071\u0020\u0025\u0064\u000a",_ggfe ,_dbbf ,_cffb .PdfRectangle ,_dgae (_cffb .text (),50),_cf .RuneCountInString (_cffb .text ()));
};};};func (_dgdd *ruling )encloses (_fcbb ,_edceg float64 )bool {return _dgdd ._ceggf -_cdga <=_fcbb &&_edceg <=_dgdd ._gbcd +_cdga ;};func (_dgegc *shapesState )establishSubpath ()*subpath {_aaec ,_dafd :=_dgegc .lastpointEstablished ();if !_dafd {_dgegc ._ccf =append (_dgegc ._ccf ,_eebd (_aaec ));
};if len (_dgegc ._ccf )==0{return nil ;};_dgegc ._dbb =false ;return _dgegc ._ccf [len (_dgegc ._ccf )-1];};func (_ea *imageExtractContext )processOperand (_ab *_fd .ContentStreamOperation ,_gg _fd .GraphicsState ,_feb *_ge .PdfPageResources )error {if _ab .Operand =="\u0042\u0049"&&len (_ab .Params )==1{_cg ,_dcb :=_ab .Params [0].(*_fd .ContentStreamInlineImage );
if !_dcb {return nil ;};if _db ,_dce :=_ac .GetBoolVal (_cg .ImageMask );_dce {if _db &&!_ea ._cdf .IncludeInlineStencilMasks {return nil ;};};return _ea .extractInlineImage (_cg ,_gg ,_feb );}else if _ab .Operand =="\u0044\u006f"&&len (_ab .Params )==1{_da ,_ffa :=_ac .GetName (_ab .Params [0]);
if !_ffa {_fg .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");return _ce ;};_ ,_af :=_feb .GetXObjectByName (*_da );switch _af {case _ge .XObjectTypeImage :return _ea .extractXObjectImage (_da ,_gg ,_feb );case _ge .XObjectTypeForm :return _ea .extractFormImages (_da ,_gg ,_feb );
};};return nil ;};

// ToText returns the page text as a single string.
// Deprecated: This function is deprecated and will be removed in a future major version. Please use
// Text() instead.
func (_bbe PageText )ToText ()string {return _bbe .Text ()};func (_ecef *ruling )gridIntersecting (_gfgdb *ruling )bool {return _adff (_ecef ._ceggf ,_gfgdb ._ceggf )&&_adff (_ecef ._gbcd ,_gfgdb ._gbcd );};func (_gdag rulingList )connections (_bgca map[int ]intSet ,_cfgad int )intSet {_agfe :=make (intSet );
_facad :=make (intSet );var _agef func (int );_agef =func (_dcfg int ){if !_facad .has (_dcfg ){_facad .add (_dcfg );for _efadc :=range _gdag {if _bgca [_efadc ].has (_dcfg ){_agfe .add (_efadc );};};for _bcdf :=range _gdag {if _agfe .has (_bcdf ){_agef (_bcdf );
};};};};_agef (_cfgad );return _agfe ;};func _acgg (_aeafbf ,_gbbg _gb .Point )bool {_faadf :=_d .Abs (_aeafbf .X -_gbbg .X );_fbde :=_d .Abs (_aeafbf .Y -_gbbg .Y );return _ecdgg (_fbde ,_faadf );};

// BBox returns the smallest axis-aligned rectangle that encloses all the TextMarks in `ma`.
func (_efca *TextMarkArray )BBox ()(_ge .PdfRectangle ,bool ){var _dfbd _ge .PdfRectangle ;_cfad :=false ;for _ ,_bgdd :=range _efca ._fffd {if _bgdd .Meta ||_dcgc (_bgdd .Text ){continue ;};if _cfad {_dfbd =_gede (_dfbd ,_bgdd .BBox );}else {_dfbd =_bgdd .BBox ;
_cfad =true ;};};return _dfbd ,_cfad ;};func _dfgc (_egbea _ge .PdfRectangle ,_fgfdb bounded )float64 {return _egbea .Ury -_fgfdb .bbox ().Lly };func _dcegg (_bcgca []*textWord ,_gbbca *textWord )[]*textWord {for _ebced ,_ffeb :=range _bcgca {if _ffeb ==_gbbca {return _aadac (_bcgca ,_ebced );
};};_fg .Log .Error ("\u0072\u0065\u006d\u006f\u0076e\u0057\u006f\u0072\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u0073\u0020\u0064o\u0065\u0073\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",_gbbca );
return nil ;};func (_cbg *Extractor )extractPageText (_ga string ,_fcb *_ge .PdfPageResources ,_dcd _gb .Matrix ,_cfd int )(*PageText ,int ,int ,error ){_fg .Log .Trace ("\u0065x\u0074\u0072\u0061\u0063t\u0050\u0061\u0067\u0065\u0054e\u0078t\u003a \u006c\u0065\u0076\u0065\u006c\u003d\u0025d",_cfd );
_fb :=&PageText {_cdc :_cbg ._eg };_cce :=_dfea (_cbg ._eg );var _bg stateStack ;_ebdg :=_egbg (_cbg ,_fcb ,_fd .GraphicsState {},&_cce ,&_bg );_cgg :=shapesState {_cfeb :_dcd ,_gaed :_gb .IdentityMatrix (),_ceae :_ebdg };var _fde bool ;if _cfd > _gcf {_cdda :=_c .New ("\u0066\u006f\u0072\u006d s\u0074\u0061\u0063\u006b\u0020\u006f\u0076\u0065\u0072\u0066\u006c\u006f\u0077");
_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0065\u0078\u0074\u0072\u0061\u0063\u0074\u0050\u0061\u0067\u0065\u0054\u0065\u0078\u0074\u002e\u0020\u0072\u0065\u0063u\u0072\u0073\u0069\u006f\u006e\u0020\u006c\u0065\u0076\u0065\u006c\u003d\u0025\u0064 \u0065r\u0072\u003d\u0025\u0076",_cfd ,_cdda );
return _fb ,_cce ._cbda ,_cce ._dfdg ,_cdda ;};_cec :=_fd .NewContentStreamParser (_ga );_bed ,_bgb :=_cec .Parse ();if _bgb !=nil {_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020e\u0078\u0074\u0072a\u0063\u0074\u0050\u0061g\u0065\u0054\u0065\u0078\u0074\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bgb );
return _fb ,_cce ._cbda ,_cce ._dfdg ,_bgb ;};_egf :=_fd .NewContentStreamProcessor (*_bed );_egf .AddHandler (_fd .HandlerConditionEnumAllOperands ,"",func (_bge *_fd .ContentStreamOperation ,_dca _fd .GraphicsState ,_ace *_ge .PdfPageResources )error {_ebf :=_bge .Operand ;
if _bfdb {_fg .Log .Info ("\u0026&\u0026\u0020\u006f\u0070\u003d\u0025s",_bge );};switch _ebf {case "\u0071":if _gbdf {_fg .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_cgg ._gaed );};_bg .push (&_cce );case "\u0051":if !_bg .empty (){_cce =*_bg .pop ();
};_cgg ._gaed =_dca .CTM ;if _gbdf {_fg .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_cgg ._gaed );};case "\u0042\u0054":if _fde {_fg .Log .Debug ("\u0042\u0054\u0020\u0063\u0061\u006c\u006c\u0065\u0064\u0020\u0077\u0068\u0069\u006c\u0065 \u0069n\u0020\u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
_fb ._egfg =append (_fb ._egfg ,_ebdg ._ccb ...);};_fde =true ;_dffd :=_dca ;_dffd .CTM =_dcd .Mult (_dffd .CTM );_ebdg =_egbg (_cbg ,_ace ,_dffd ,&_cce ,&_bg );_cgg ._ceae =_ebdg ;case "\u0045\u0054":if !_fde {_fg .Log .Debug ("\u0045\u0054\u0020ca\u006c\u006c\u0065\u0064\u0020\u006f\u0075\u0074\u0073i\u0064e\u0020o\u0066 \u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
};_fde =false ;_fb ._egfg =append (_fb ._egfg ,_ebdg ._ccb ...);_ebdg .reset ();case "\u0054\u002a":_ebdg .nextLine ();case "\u0054\u0064":if _fggc ,_febg :=_ebdg .checkOp (_bge ,2,true );!_fggc {_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_febg );
return _febg ;};_bfg ,_eade ,_cfga :=_ffeed (_bge .Params );if _cfga !=nil {return _cfga ;};_ebdg .moveText (_bfg ,_eade );case "\u0054\u0044":if _ddcc ,_fgc :=_ebdg .checkOp (_bge ,2,true );!_ddcc {_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fgc );
return _fgc ;};_ebb ,_fbg ,_afec :=_ffeed (_bge .Params );if _afec !=nil {_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_afec );return _afec ;};_ebdg .moveTextSetLeading (_ebb ,_fbg );case "\u0054\u006a":if _ecc ,_cad :=_ebdg .checkOp (_bge ,1,true );
!_ecc {_fg .Log .Debug ("\u0045\u0052\u0052\u004fR:\u0020\u0054\u006a\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0065\u0072\u0072\u003d%\u0076",_bge ,_cad );return _cad ;};_fbc ,_gcg :=_ac .GetStringBytes (_bge .Params [0]);if !_gcg {_fg .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020T\u006a\u0020o\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074S\u0074\u0072\u0069\u006e\u0067\u0042\u0079\u0074\u0065\u0073\u0020\u0066a\u0069\u006c\u0065\u0064",_bge );
return _ac .ErrTypeError ;};return _ebdg .showText (_fbc );case "\u0054\u004a":if _cfb ,_acd :=_ebdg .checkOp (_bge ,1,true );!_cfb {_fg .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_acd );return _acd ;
};_ceg ,_bd :=_ac .GetArray (_bge .Params [0]);if !_bd {_fg .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_bge );
return _bgb ;};return _ebdg .showTextAdjusted (_ceg );case "\u0027":if _cba ,_aaa :=_ebdg .checkOp (_bge ,1,true );!_cba {_fg .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0027\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_aaa );return _aaa ;};_fcbf ,_aee :=_ac .GetStringBytes (_bge .Params [0]);
if !_aee {_fg .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020'\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_bge );return _ac .ErrTypeError ;};_ebdg .nextLine ();return _ebdg .showText (_fcbf );
case "\u0022":if _gfc ,_daf :=_ebdg .checkOp (_bge ,3,true );!_gfc {_fg .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0022\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_daf );return _daf ;};_ef ,_fdcc ,_cef :=_ffeed (_bge .Params [:2]);if _cef !=nil {return _cef ;
};_ffd ,_aaf :=_ac .GetStringBytes (_bge .Params [2]);if !_aaf {_fg .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020\"\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_bge );
return _ac .ErrTypeError ;};_ebdg .setCharSpacing (_ef );_ebdg .setWordSpacing (_fdcc );_ebdg .nextLine ();return _ebdg .showText (_ffd );case "\u0054\u004c":_faf ,_deb :=_bagc (_bge );if _deb !=nil {_fg .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004c\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_deb );
return _deb ;};_ebdg .setTextLeading (_faf );case "\u0054\u0063":_gaa ,_deef :=_bagc (_bge );if _deef !=nil {_fg .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0063\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_deef );return _deef ;};_ebdg .setCharSpacing (_gaa );
case "\u0054\u0066":if _ceb ,_fbgb :=_ebdg .checkOp (_bge ,2,true );!_ceb {_fg .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0066\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fbgb );return _fbgb ;};_faa ,_ddd :=_ac .GetNameVal (_bge .Params [0]);
if !_ddd {_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u004ea\u006d\u0065\u0056\u0061\u006c\u0020\u0066a\u0069\u006c\u0065\u0064",_bge );return _ac .ErrTypeError ;};_fff ,_aaag :=_ac .GetNumberAsFloat (_bge .Params [1]);
if !_ddd {_fg .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u0046\u006c\u006f\u0061\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065d\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bge ,_aaag );
return _aaag ;};_aaag =_ebdg .setFont (_faa ,_fff );_ebdg ._ceee =_e .Is (_aaag ,_ac .ErrNotSupported );if _aaag !=nil &&!_ebdg ._ceee {return _aaag ;};case "\u0054\u006d":if _ebcg ,_ded :=_ebdg .checkOp (_bge ,6,true );!_ebcg {_fg .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u006d\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ded );
return _ded ;};_ggb ,_cebd :=_ac .GetNumbersAsFloat (_bge .Params );if _cebd !=nil {_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cebd );return _cebd ;};_ebdg .setTextMatrix (_ggb );case "\u0054\u0072":if _ebdb ,_gef :=_ebdg .checkOp (_bge ,1,true );
!_ebdb {_fg .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0072\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gef );return _gef ;};_ecd ,_dfe :=_ac .GetIntVal (_bge .Params [0]);if !_dfe {_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0072\u0020\u006f\u0070\u003d\u0025\u0073 \u0047e\u0074\u0049\u006e\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_bge );
return _ac .ErrTypeError ;};_ebdg .setTextRenderMode (_ecd );case "\u0054\u0073":if _cfff ,_edde :=_ebdg .checkOp (_bge ,1,true );!_cfff {_fg .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0073\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_edde );
return _edde ;};_eff ,_fdba :=_ac .GetNumberAsFloat (_bge .Params [0]);if _fdba !=nil {_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fdba );return _fdba ;};_ebdg .setTextRise (_eff );case "\u0054\u0077":if _fffg ,_cbc :=_ebdg .checkOp (_bge ,1,true );
!_fffg {_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cbc );return _cbc ;};_dgg ,_ffg :=_ac .GetNumberAsFloat (_bge .Params [0]);if _ffg !=nil {_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ffg );
return _ffg ;};_ebdg .setWordSpacing (_dgg );case "\u0054\u007a":if _dga ,_fbf :=_ebdg .checkOp (_bge ,1,true );!_dga {_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fbf );return _fbf ;};_deee ,_bgg :=_ac .GetNumberAsFloat (_bge .Params [0]);
if _bgg !=nil {_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bgg );return _bgg ;};_ebdg .setHorizScaling (_deee );case "\u0063\u006d":_cgg ._gaed =_dca .CTM ;if _cgg ._gaed .Singular (){_ebcd :=_gb .IdentityMatrix ().Translate (_cgg ._gaed .Translation ());
_fg .Log .Debug ("S\u0069n\u0067\u0075\u006c\u0061\u0072\u0020\u0063\u0074m\u003d\u0025\u0073\u2192%s",_cgg ._gaed ,_ebcd );_cgg ._gaed =_ebcd ;};if _gbdf {_fg .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_cgg ._gaed );};case "\u006d":if len (_bge .Params )!=2{_fg .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_be );
return nil ;};_bdg ,_dge :=_ac .GetNumbersAsFloat (_bge .Params );if _dge !=nil {return _dge ;};_fg .Log .Debug ("\u004d\u006f\u0076\u0065\u0020\u0074\u006f\u003a\u0020\u0025\u002e\u0032\u0066",_bdg );_cgg .moveTo (_bdg [0],_bdg [1]);case "\u006c":if len (_bge .Params )!=2{_fg .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_be );
return nil ;};_cfdg ,_age :=_ac .GetNumbersAsFloat (_bge .Params );if _age !=nil {return _age ;};_cgg .lineTo (_cfdg [0],_cfdg [1]);case "\u0063":if len (_bge .Params )!=6{return _be ;};_ege ,_fdfg :=_ac .GetNumbersAsFloat (_bge .Params );if _fdfg !=nil {return _fdfg ;
};_fg .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_ege );_cgg .cubicTo (_ege [0],_ege [1],_ege [2],_ege [3],_ege [4],_ege [5]);case "\u0076","\u0079":if len (_bge .Params )!=4{return _be ;
};_acad ,_cffa :=_ac .GetNumbersAsFloat (_bge .Params );if _cffa !=nil {return _cffa ;};_fg .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_acad );_cgg .quadraticTo (_acad [0],_acad [1],_acad [2],_acad [3]);
case "\u0068":_cgg .closePath ();case "\u0072\u0065":if len (_bge .Params )!=4{return _be ;};_adb ,_cca :=_ac .GetNumbersAsFloat (_bge .Params );if _cca !=nil {return _cca ;};_cgg .drawRectangle (_adb [0],_adb [1],_adb [2],_adb [3]);_cgg .closePath ();
case "\u0053":_cgg .stroke (&_fb ._aeee );_cgg .clearPath ();case "\u0073":_cgg .closePath ();_cgg .stroke (&_fb ._aeee );_cgg .clearPath ();case "\u0046":_cgg .fill (&_fb ._dgeg );_cgg .clearPath ();case "\u0066","\u0066\u002a":_cgg .closePath ();_cgg .fill (&_fb ._dgeg );
_cgg .clearPath ();case "\u0042","\u0042\u002a":_cgg .fill (&_fb ._dgeg );_cgg .stroke (&_fb ._aeee );_cgg .clearPath ();case "\u0062","\u0062\u002a":_cgg .closePath ();_cgg .fill (&_fb ._dgeg );_cgg .stroke (&_fb ._aeee );_cgg .clearPath ();case "\u006e":_cgg .clearPath ();
case "\u0044\u006f":if len (_bge .Params )==0{_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0058\u004fbj\u0065c\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006f\u0070\u0065\u0072\u0061n\u0064\u0020\u0066\u006f\u0072\u0020\u0044\u006f\u0020\u006f\u0070\u0065\u0072\u0061\u0074\u006f\u0072.\u0020\u0047\u006f\u0074\u0020\u0025\u002b\u0076\u002e",_bge .Params );
return _ac .ErrRangeError ;};_fgb ,_feg :=_ac .GetName (_bge .Params [0]);if !_feg {_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0044\u006f\u0020\u006f\u0070e\u0072a\u0074\u006f\u0072\u0020\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006fp\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u002b\u0076\u002e",_bge .Params [0]);
return _ac .ErrTypeError ;};_ ,_edg :=_ace .GetXObjectByName (*_fgb );if _edg !=_ge .XObjectTypeForm {break ;};_dgc ,_feg :=_cbg ._ec [_fgb .String ()];if !_feg {_cdaf ,_gae :=_ace .GetXObjectFormByName (*_fgb );if _gae !=nil {_fg .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_gae );
return _gae ;};_dab ,_gae :=_cdaf .GetContentStream ();if _gae !=nil {_fg .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_gae );return _gae ;};_dec :=_cdaf .Resources ;if _dec ==nil {_dec =_ace ;};_bdf ,_bgd ,_fee ,_gae :=_cbg .extractPageText (string (_dab ),_dec ,_dcd .Mult (_dca .CTM ),_cfd +1);
if _gae !=nil {_fg .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_gae );return _gae ;};_dgc =textResult {*_bdf ,_bgd ,_fee };_cbg ._ec [_fgb .String ()]=_dgc ;};_cgg ._gaed =_dca .CTM ;if _gbdf {_fg .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_cgg ._gaed );
};_fb ._egfg =append (_fb ._egfg ,_dgc ._gad ._egfg ...);_fb ._aeee =append (_fb ._aeee ,_dgc ._gad ._aeee ...);_fb ._dgeg =append (_fb ._dgeg ,_dgc ._gad ._dgeg ...);_cce ._cbda +=_dgc ._aae ;_cce ._dfdg +=_dgc ._fafe ;case "\u0072\u0067","\u0067","\u006b","\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_ebdg ._gaf .ColorspaceNonStroking =_dca .ColorspaceNonStroking ;
_ebdg ._gaf .ColorNonStroking =_dca .ColorNonStroking ;case "\u0052\u0047","\u0047","\u004b","\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_ebdg ._gaf .ColorspaceStroking =_dca .ColorspaceStroking ;_ebdg ._gaf .ColorStroking =_dca .ColorStroking ;
};return nil ;});_bgb =_egf .Process (_fcb );return _fb ,_cce ._cbda ,_cce ._dfdg ,_bgb ;};func _dcgc (_baecg string )bool {for _ ,_fcfc :=range _baecg {if !_cb .IsSpace (_fcfc ){return false ;};};return true ;};func (_dfd *textObject )checkOp (_cdg *_fd .ContentStreamOperation ,_ddcb int ,_eag bool )(_gcfd bool ,_eddc error ){if _dfd ==nil {var _gdb []_ac .PdfObject ;
if _ddcb > 0{_gdb =_cdg .Params ;if len (_gdb )> _ddcb {_gdb =_gdb [:_ddcb ];};};_fg .Log .Debug ("\u0025\u0023q \u006f\u0070\u0065r\u0061\u006e\u0064\u0020out\u0073id\u0065\u0020\u0074\u0065\u0078\u0074\u002e p\u0061\u0072\u0061\u006d\u0073\u003d\u0025+\u0076",_cdg .Operand ,_gdb );
};if _ddcb >=0{if len (_cdg .Params )!=_ddcb {if _eag {_eddc =_c .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");};_fg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_cdg .Operand ,_ddcb ,len (_cdg .Params ),_cdg .Params );
return false ,_eddc ;};};return true ,nil ;};type imageExtractContext struct{_fac []ImageMark ;_dff int ;_dg int ;_ag int ;_dc map[*_ac .PdfObjectStream ]*cachedImage ;_cdf *ImageExtractOptions ;};func (_cegd rulingList )blocks (_bbgd ,_cadf *ruling )bool {if _bbgd ._ceggf > _cadf ._gbcd ||_cadf ._ceggf > _bbgd ._gbcd {return false ;
};_fdda :=_d .Max (_bbgd ._ceggf ,_cadf ._ceggf );_gcfed :=_d .Min (_bbgd ._gbcd ,_cadf ._gbcd );if _bbgd ._adggg > _cadf ._adggg {_bbgd ,_cadf =_cadf ,_bbgd ;};for _ ,_gaff :=range _cegd {if _bbgd ._adggg <=_gaff ._adggg +_dbg &&_gaff ._adggg <=_cadf ._adggg +_dbg &&_gaff ._ceggf <=_gcfed &&_fdda <=_gaff ._gbcd {return true ;
};};return false ;};func (_afdd lineRuling )asRuling ()(*ruling ,bool ){_cgace :=ruling {_beebc :_afdd ._ggdg ,Color :_afdd .Color ,_edba :_afdf };switch _afdd ._ggdg {case _egea :_cgace ._adggg =_afdd .xMean ();_cgace ._ceggf =_d .Min (_afdd ._egd .Y ,_afdd ._aacf .Y );
_cgace ._gbcd =_d .Max (_afdd ._egd .Y ,_afdd ._aacf .Y );case _bbge :_cgace ._adggg =_afdd .yMean ();_cgace ._ceggf =_d .Min (_afdd ._egd .X ,_afdd ._aacf .X );_cgace ._gbcd =_d .Max (_afdd ._egd .X ,_afdd ._aacf .X );default:_fg .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_afdd ._ggdg );
return nil ,false ;};return &_cgace ,true ;};func (_ccaf *textTable )putComposite (_dbcf ,_bceef int ,_cffg paraList ,_bfced _ge .PdfRectangle ){if len (_cffg )==0{_fg .Log .Error ("\u0074\u0065xt\u0054\u0061\u0062l\u0065\u0029\u0020\u0070utC\u006fmp\u006f\u0073\u0069\u0074\u0065\u003a\u0020em\u0070\u0074\u0079\u0020\u0070\u0061\u0072a\u0073");
return ;};_fafec :=compositeCell {_bfced ,_cffg };if _cfadg {_ff .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0075\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u003c\u002d\u0025\u0073\u000a",_dbcf ,_bceef ,_fafec .String ());
};_fafec .updateBBox ();_ccaf ._fafc [_dgfc (_dbcf ,_bceef )]=_fafec ;};

// String returns a string describing `tm`.
func (_cgce TextMark )String ()string {_adde :=_cgce .BBox ;var _beef string ;if _cgce .Font !=nil {_beef =_cgce .Font .String ();if len (_beef )> 50{_beef =_beef [:50]+"\u002e\u002e\u002e";};};var _cbgd string ;if _cgce .Meta {_cbgd ="\u0020\u002a\u004d\u002a";
};return _ff .Sprintf ("\u007b\u0054\u0065\u0078t\u004d\u0061\u0072\u006b\u003a\u0020\u0025\u0064\u0020%\u0071\u003d\u0025\u0030\u0032\u0078\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e2\u0066\u0029\u0020\u0028\u00256\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0025\u0073\u007d",_cgce .Offset ,_cgce .Text ,[]rune (_cgce .Text ),_adde .Llx ,_adde .Lly ,_adde .Urx ,_adde .Ury ,_beef ,_cbgd );
};const (RenderModeStroke RenderMode =1<<iota ;RenderModeFill ;RenderModeClip ;);func _bgc (_edcd []TextMark ,_faca *int ,_acabc string )[]TextMark {_ddgb :=_aeeg ;_ddgb .Text =_acabc ;return _eaf (_edcd ,_faca ,_ddgb );};func (_bddc paraList )reorder (_fcfg []int ){_beeb :=make (paraList ,len (_bddc ));
for _dedd ,_fbaf :=range _fcfg {_beeb [_dedd ]=_bddc [_fbaf ];};copy (_bddc ,_beeb );};

// RenderMode specifies the text rendering mode (Tmode), which determines whether showing text shall cause
// glyph outlines to be  stroked, filled, used as a clipping boundary, or some combination of the three.
// Stroking, filling, and clipping shall have the same effects for a text object as they do for a path object
// (see 8.5.3, "Path-Painting Operators" and 8.5.4, "Clipping Path Operators").
type RenderMode int ;func (_gbdg *textWord )absorb (_bgae *textWord ){_gbdg .PdfRectangle =_gede (_gbdg .PdfRectangle ,_bgae .PdfRectangle );_gbdg ._gffgdd =append (_gbdg ._gffgdd ,_bgae ._gffgdd ...);};func _adba (_gdc ,_gdee _ge .PdfRectangle )bool {return _gdc .Lly <=_gdee .Ury &&_gdee .Lly <=_gdc .Ury };
func (_aadb *textTable )markCells (){for _bdac :=0;_bdac < _aadb ._acde ;_bdac ++{for _gfcb :=0;_gfcb < _aadb ._eagd ;_gfcb ++{_gfdca :=_aadb .get (_gfcb ,_bdac );if _gfdca !=nil {_gfdca ._cdcf =true ;};};};};func _bcgc (_eaef ,_gbee _ge .PdfRectangle )bool {return _gbee .Llx <=_eaef .Urx &&_eaef .Llx <=_gbee .Urx ;
};func (_ccead *textTable )emptyRow (_gcaab int )bool {for _bcgcc :=0;_bcgcc < _ccead ._eagd ;_bcgcc ++{_dabca :=_ccead .get (_bcgcc ,_gcaab );if _dabca !=nil &&_dabca .text ()!=""{return false ;};};return true ;};func (_dbf *subpath )removeDuplicates (){if len (_dbf ._fbb )==0{return ;
};_fdg :=[]_gb .Point {_dbf ._fbb [0]};for _ ,_fdcg :=range _dbf ._fbb [1:]{if !_ebdbe (_fdcg ,_fdg [len (_fdg )-1]){_fdg =append (_fdg ,_fdcg );};};_dbf ._fbb =_fdg ;};type rulingList []*ruling ;

// New returns an Extractor instance for extracting content from the input PDF page.
func New (page *_ge .PdfPage )(*Extractor ,error ){const _gc ="\u0065\u0078\u0074\u0072\u0061\u0063\u0074\u006f\u0072\u002e\u004e\u0065\u0077";_de ,_fdf :=page .GetAllContentStreams ();if _fdf !=nil {return nil ,_fdf ;};_adfa ,_fdf :=page .GetMediaBox ();
if _fdf !=nil {return nil ,_ff .Errorf ("\u0065\u0078\u0074r\u0061\u0063\u0074\u006fr\u0020\u0072\u0065\u0071\u0075\u0069\u0072e\u0073\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u002e\u0020\u0025\u0076",_fdf );};_cc :=&Extractor {_ee :_de ,_bec :page .Resources ,_eg :*_adfa ,_cd :map[string ]fontEntry {},_ec :map[string ]textResult {}};
if _cc ._eg .Llx > _cc ._eg .Urx {_fg .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0058\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_cc ._eg );
_cc ._eg .Llx ,_cc ._eg .Urx =_cc ._eg .Urx ,_cc ._eg .Llx ;};if _cc ._eg .Lly > _cc ._eg .Ury {_fg .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0059\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_cc ._eg );
_cc ._eg .Lly ,_cc ._eg .Ury =_cc ._eg .Ury ,_cc ._eg .Lly ;};_cff .TrackUse (_gc );return _cc ,nil ;};

// ImageMark represents an image drawn on a page and its position in device coordinates.
// All coordinates are in device coordinates.
type ImageMark struct{Image *_ge .Image ;

// Dimensions of the image as displayed in the PDF.
Width float64 ;Height float64 ;

// Position of the image in PDF coordinates (lower left corner).
X float64 ;Y float64 ;

// Angle in degrees, if rotated.
Angle float64 ;};func (_cade *textTable )reduce ()*textTable {_cfdd :=make ([]int ,0,_cade ._acde );_gffe :=make ([]int ,0,_cade ._eagd );for _eeeag :=0;_eeeag < _cade ._acde ;_eeeag ++{if !_cade .emptyRow (_eeeag ){_cfdd =append (_cfdd ,_eeeag );};};for _ffcaf :=0;
_ffcaf < _cade ._eagd ;_ffcaf ++{if !_cade .emptyColumn (_ffcaf ){_gffe =append (_gffe ,_ffcaf );};};if len (_cfdd )==_cade ._acde &&len (_gffe )==_cade ._eagd {return _cade ;};_eceg :=textTable {_gbfc :_cade ._gbfc ,_eagd :len (_gffe ),_acde :len (_cfdd ),_ccacd :make (map[uint64 ]*textPara ,len (_gffe )*len (_cfdd ))};
if _cfadg {_fg .Log .Info ("\u0072\u0065\u0064\u0075ce\u003a\u0020\u0025\u0064\u0078\u0025\u0064\u0020\u002d\u003e\u0020\u0025\u0064\u0078%\u0064",_cade ._eagd ,_cade ._acde ,len (_gffe ),len (_cfdd ));_fg .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_gffe );
_fg .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_cfdd );};for _abged ,_fgda :=range _cfdd {for _bbgc ,_cdeb :=range _gffe {_bcefe :=_cade .get (_cdeb ,_fgda );if _bcefe ==nil {continue ;};if _cfadg {_ff .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_bbgc ,_abged ,_cdeb ,_fgda ,_dgae (_bcefe .text (),50));
};_eceg .put (_bbgc ,_abged ,_bcefe );};};return &_eceg ;};func _ebdbe (_febf ,_gbfge _gb .Point )bool {return _febf .X ==_gbfge .X &&_febf .Y ==_gbfge .Y };const _gcf =20;type stateStack []*textState ;func (_edfgf gridTile )numBorders ()int {_gfbad :=0;
if _edfgf ._cdfbd {_gfbad ++;};if _edfgf ._egdg {_gfbad ++;};if _edfgf ._cgff {_gfbad ++;};if _edfgf ._bbaa {_gfbad ++;};return _gfbad ;};

// Marks returns the TextMark collection for a page. It represents all the text on the page.
func (_fae PageText )Marks ()*TextMarkArray {return &TextMarkArray {_fffd :_fae ._gfb }};

// String returns a string describing `ma`.
func (_eacc TextMarkArray )String ()string {_bde :=len (_eacc ._fffd );if _bde ==0{return "\u0045\u004d\u0050T\u0059";};_cfa :=_eacc ._fffd [0];_gdbg :=_eacc ._fffd [_bde -1];return _ff .Sprintf ("\u007b\u0054\u0045\u0058\u0054\u004d\u0041\u0052K\u0041\u0052\u0052AY\u003a\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025s\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d%\u0073\u007d",_bde ,_cfa ,_gdbg );
};func _afb (_aeaf []*textMark ,_bgcg _ge .PdfRectangle ,_eege rulingList ,_ede []gridTiling )paraList {_fg .Log .Trace ("\u006d\u0061\u006b\u0065\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065\u003a \u0025\u0064\u0020\u0065\u006c\u0065m\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065=\u0025\u002e\u0032\u0066",len (_aeaf ),_bgcg );
if len (_aeaf )==0{return nil ;};_beac :=_eadbb (_aeaf ,_bgcg );if len (_beac )==0{return nil ;};_eege .log ("\u006d\u0061\u006be\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065");_gbdfd ,_ffff :=_eege .vertsHorzs ();_bdgd :=_dgba (_beac ,_bgcg .Ury ,_gbdfd ,_ffff );
_aacb :=_aaef (_bdgd ,_bgcg .Ury ,_gbdfd ,_ffff );_aacb =_eabd (_aacb );_dcea :=make (paraList ,0,len (_aacb ));for _ ,_fbdf :=range _aacb {_gabd :=_fbdf .arrangeText ();if _gabd !=nil {_dcea =append (_dcea ,_gabd );};};if len (_dcea )>=_bcde {_dcea =_dcea .extractTables (_ede );
};_dcea .sortReadingOrder ();_dcea .log ("\u0073\u006f\u0072te\u0064\u0020\u0069\u006e\u0020\u0072\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u006f\u0072\u0064\u0065\u0072");return _dcea ;};func (_ade *shapesState )lastpointEstablished ()(_gb .Point ,bool ){if _ade ._dbb {return _ade ._gbb ,false ;
};_gag :=len (_ade ._ccf );if _gag > 0&&_ade ._ccf [_gag -1]._fagb {return _ade ._ccf [_gag -1].last (),false ;};return _gb .Point {},true ;};func (_baefc paraList )findTextTables ()[]*textTable {var _adab []*textTable ;for _ ,_cgdea :=range _baefc {if _cgdea .taken ()||_cgdea .Width ()==0{continue ;
};_fddba :=_cgdea .isAtom ();if _fddba ==nil {continue ;};_fddba .growTable ();if _fddba ._eagd *_fddba ._acde < _bcde {continue ;};_fddba .markCells ();_fddba .log ("\u0067\u0072\u006fw\u006e");_adab =append (_adab ,_fddba );};return _adab ;};func (_dbfb *textTable )compositeColCorridors ()map[int ][]float64 {_ceeed :=make (map[int ][]float64 ,_dbfb ._eagd );
if _cfadg {_fg .Log .Info ("\u0063\u006f\u006d\u0070o\u0073\u0069\u0074\u0065\u0043\u006f\u006c\u0043\u006f\u0072r\u0069d\u006f\u0072\u0073\u003a\u0020\u0077\u003d%\u0064\u0020",_dbfb ._eagd );};for _fedfe :=0;_fedfe < _dbfb ._eagd ;_fedfe ++{_ceeed [_fedfe ]=nil ;
};return _ceeed ;};func (_eab *stateStack )top ()*textState {if _eab .empty (){return nil ;};return (*_eab )[_eab .size ()-1];};func _egee (_bbec map[int ][]float64 )[]int {_dagdf :=make ([]int ,len (_bbec ));_cagg :=0;for _agfa :=range _bbec {_dagdf [_cagg ]=_agfa ;
_cagg ++;};_bf .Ints (_dagdf );return _dagdf ;};func (_gccbf *textWord )computeText ()string {_ggaag :=make ([]string ,len (_gccbf ._gffgdd ));for _eaea ,_fea :=range _gccbf ._gffgdd {_ggaag [_eaea ]=_fea ._gfba ;};return _ad .Join (_ggaag ,"");};type fontEntry struct{_bebf *_ge .PdfFont ;
_gcgg int64 ;};func (_cfbd *textObject )setTextRise (_bfca float64 ){if _cfbd ==nil {return ;};_cfbd ._cada ._fcca =_bfca ;};func (_gdgd *textWord )toTextMarks (_caga *int )[]TextMark {var _ffab []TextMark ;for _ ,_dfcc :=range _gdgd ._gffgdd {_ffab =_eaf (_ffab ,_caga ,_dfcc .ToTextMark ());
};return _ffab ;};func (_dfge *wordBag )minDepth ()float64 {return _dfge ._dbbg -(_dfge .Ury -_dfge ._gdfg )};func (_fddbg rectRuling )asRuling ()(*ruling ,bool ){_cdef :=ruling {_beebc :_fddbg ._bba ,Color :_fddbg .Color ,_edba :_afda };switch _fddbg ._bba {case _egea :_cdef ._adggg =0.5*(_fddbg .Llx +_fddbg .Urx );
_cdef ._ceggf =_fddbg .Lly ;_cdef ._gbcd =_fddbg .Ury ;_dcga ,_ccbf :=_fddbg .checkWidth (_fddbg .Llx ,_fddbg .Urx );if !_ccbf {if _cbcf {_fg .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067V\u0065\u0072\u0074\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_fddbg );
};return nil ,false ;};_cdef ._dgcc =_dcga ;case _bbge :_cdef ._adggg =0.5*(_fddbg .Lly +_fddbg .Ury );_cdef ._ceggf =_fddbg .Llx ;_cdef ._gbcd =_fddbg .Urx ;_abff ,_bdec :=_fddbg .checkWidth (_fddbg .Lly ,_fddbg .Ury );if !_bdec {if _cbcf {_fg .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067H\u006f\u0072\u007a\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_fddbg );
};return nil ,false ;};_cdef ._dgcc =_abff ;default:_fg .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_fddbg ._bba );return nil ,false ;};return &_cdef ,true ;};func (_beda *textTable )reduceTiling (_ddceb gridTiling ,_gage float64 )*textTable {_afga :=make ([]int ,0,_beda ._acde );
_cfdgb :=make ([]int ,0,_beda ._eagd );_eccacb :=_ddceb ._cfde ;_bgbdg :=_ddceb ._bgbge ;for _eggbf :=0;_eggbf < _beda ._acde ;_eggbf ++{_gfad :=_eggbf > 0&&_d .Abs (_bgbdg [_eggbf -1]-_bgbdg [_eggbf ])< _gage &&_beda .emptyRow (_eggbf );if !_gfad {_afga =append (_afga ,_eggbf );
};};for _eefbc :=0;_eefbc < _beda ._eagd ;_eefbc ++{_fcbd :=_eefbc < _beda ._eagd -1&&_d .Abs (_eccacb [_eefbc +1]-_eccacb [_eefbc ])< _gage &&_beda .emptyColumn (_eefbc );if !_fcbd {_cfdgb =append (_cfdgb ,_eefbc );};};if len (_afga )==_beda ._acde &&len (_cfdgb )==_beda ._eagd {return _beda ;
};_agee :=textTable {_gbfc :_beda ._gbfc ,_eagd :len (_cfdgb ),_acde :len (_afga ),_fafc :make (map[uint64 ]compositeCell ,len (_cfdgb )*len (_afga ))};if _cfadg {_fg .Log .Info ("\u0072\u0065\u0064\u0075c\u0065\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0025d\u0078%\u0064\u0020\u002d\u003e\u0020\u0025\u0064x\u0025\u0064",_beda ._eagd ,_beda ._acde ,len (_cfdgb ),len (_afga ));
_fg .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_cfdgb );_fg .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_afga );};for _edfad ,_fefa :=range _afga {for _cdccg ,_bcce :=range _cfdgb {_fbfab ,_fccd :=_beda .getComposite (_bcce ,_fefa );
if len (_fbfab )==0{continue ;};if _cfadg {_ff .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_cdccg ,_edfad ,_bcce ,_fefa ,_dgae (_fbfab .merge ().text (),50));};_agee .putComposite (_cdccg ,_edfad ,_fbfab ,_fccd );
};};return &_agee ;};func (_becgf *textTable )getDown ()paraList {_eeef :=make (paraList ,_becgf ._eagd );for _dcbdd :=0;_dcbdd < _becgf ._eagd ;_dcbdd ++{_bfeg :=_becgf .get (_dcbdd ,_becgf ._acde -1)._cafc ;if _bfeg ==nil ||_bfeg ._cdcf {return nil ;
};_eeef [_dcbdd ]=_bfeg ;};for _ecfdda :=0;_ecfdda < _becgf ._eagd -1;_ecfdda ++{if _eeef [_ecfdda ]._caa !=_eeef [_ecfdda +1]{return nil ;};};return _eeef ;};

// String returns a description of `w`.
func (_dcdc *textWord )String ()string {return _ff .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_dcdc ._gacg ,_dcdc .PdfRectangle ,_dcdc ._efaa ,_dcdc ._cgcd );
};func (_dece *textObject )getFillColor ()_fe .Color {return _ddae (_dece ._gaf .ColorspaceNonStroking ,_dece ._gaf .ColorNonStroking );};type textResult struct{_gad PageText ;_aae int ;_fafe int ;};func (_fbfbg compositeCell )String ()string {_gaggf :="";
if len (_fbfbg .paraList )> 0{_gaggf =_dgae (_fbfbg .paraList .merge ().text (),50);};return _ff .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0070\u0061\u0072a\u0073\u0020\u0025\u0071",_fbfbg .PdfRectangle ,len (_fbfbg .paraList ),_gaggf );
};func (_edcdf *textTable )getComposite (_bbged ,_bgdf int )(paraList ,_ge .PdfRectangle ){_efeg ,_dgea :=_edcdf ._fafc [_dgfc (_bbged ,_bgdf )];if _cfadg {_ff .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0067\u0065\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u002d\u003e\u0025\u0073\u000a",_bbged ,_bgdf ,_efeg .String ());
};if !_dgea {return nil ,_ge .PdfRectangle {};};return _efeg .parasBBox ();};type intSet map[int ]struct{};var _gfgc =_b .MustCompile ("\u005e\u005c\u0073\u002a\u0028\u005c\u0064\u002b\u005c\u002e\u003f|\u005b\u0049\u0069\u0076\u005d\u002b\u0029\u005c\u0073\u002a\\\u0029\u003f\u0024");
func (_ffbc *textTable )depth ()float64 {_faeg :=1e10;for _eegef :=0;_eegef < _ffbc ._eagd ;_eegef ++{_faef :=_ffbc .get (_eegef ,0);if _faef ==nil ||_faef ._dddbf {continue ;};_faeg =_d .Min (_faeg ,_faef .depth ());};return _faeg ;};func _bgab (_eddfg ,_cfegb int )int {if _eddfg > _cfegb {return _eddfg ;
};return _cfegb ;};func (_fbgg *textObject )setFont (_fgcf string ,_egcf float64 )error {if _fbgg ==nil {return nil ;};_fbgg ._cada ._ecdc =_egcf ;_caf ,_bae :=_fbgg .getFont (_fgcf );if _bae !=nil {return _bae ;};_fbgg ._cada ._baeg =_caf ;return nil ;
};

// String returns a description of `k`.
func (_dfda markKind )String ()string {_aefb ,_gffgd :=_geee [_dfda ];if !_gffgd {return _ff .Sprintf ("\u004e\u006f\u0074\u0020\u0061\u0020\u006d\u0061\u0072k\u003a\u0020\u0025\u0064",_dfda );};return _aefb ;};func _afef (_cgeff ,_aedg bounded )float64 {_gda :=_edb (_cgeff ,_aedg );
if !_cgaeg (_gda ){return _gda ;};return _gcc (_cgeff ,_aedg );};func (_ggbfe paraList )computeEBBoxes (){if _ecebf {_fg .Log .Info ("\u0063o\u006dp\u0075\u0074\u0065\u0045\u0042\u0042\u006f\u0078\u0065\u0073\u003a");};for _ ,_afab :=range _ggbfe {_afab ._becf =_afab .PdfRectangle ;
};_bdge :=_ggbfe .yNeighbours (0);for _fcde ,_dfba :=range _ggbfe {_ccfe :=_dfba ._becf ;_gdge ,_dfed :=-1.0e9,+1.0e9;for _ ,_fggg :=range _bdge [_dfba ]{_cced :=_ggbfe [_fggg ]._becf ;if _cced .Urx < _ccfe .Llx {_gdge =_d .Max (_gdge ,_cced .Urx );}else if _ccfe .Urx < _cced .Llx {_dfed =_d .Min (_dfed ,_cced .Llx );
};};for _gdade ,_ddbge :=range _ggbfe {_dfaea :=_ddbge ._becf ;if _fcde ==_gdade ||_dfaea .Ury > _ccfe .Lly {continue ;};if _gdge <=_dfaea .Llx &&_dfaea .Llx < _ccfe .Llx {_ccfe .Llx =_dfaea .Llx ;}else if _dfaea .Urx <=_dfed &&_ccfe .Urx < _dfaea .Urx {_ccfe .Urx =_dfaea .Urx ;
};};if _ecebf {_ff .Printf ("\u0025\u0034\u0064\u003a %\u0036\u002e\u0032\u0066\u2192\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0071\u000a",_fcde ,_dfba ._becf ,_ccfe ,_dgae (_dfba .text (),50));};_dfba ._becf =_ccfe ;};if _dgcg {for _ ,_dfecf :=range _ggbfe {_dfecf .PdfRectangle =_dfecf ._becf ;
};};};func (_bbed *shapesState )drawRectangle (_bebe ,_bce ,_bef ,_fgfd float64 ){if _gbdf {_bdeg :=_bbed .devicePoint (_bebe ,_bce );_cbe :=_bbed .devicePoint (_bebe +_bef ,_bce +_fgfd );_bggc :=_ge .PdfRectangle {Llx :_bdeg .X ,Lly :_bdeg .Y ,Urx :_cbe .X ,Ury :_cbe .Y };
_fg .Log .Info ("d\u0072a\u0077\u0052\u0065\u0063\u0074\u0061\u006e\u0067l\u0065\u003a\u0020\u00256.\u0032\u0066",_bggc );};_bbed .newSubPath ();_bbed .moveTo (_bebe ,_bce );_bbed .lineTo (_bebe +_bef ,_bce );_bbed .lineTo (_bebe +_bef ,_bce +_fgfd );_bbed .lineTo (_bebe ,_bce +_fgfd );
_bbed .closePath ();};

// TextMarkArray is a collection of TextMarks.
type TextMarkArray struct{_fffd []TextMark };func (_egaee *textTable )newTablePara ()*textPara {_ddgef :=_egaee .computeBbox ();_ecba :=&textPara {PdfRectangle :_ddgef ,_becf :_ddgef ,_gfce :_egaee };if _cfadg {_fg .Log .Info ("\u006e\u0065w\u0054\u0061\u0062l\u0065\u0050\u0061\u0072\u0061\u003a\u0020\u0025\u0073",_ecba );
};return _ecba ;};func _bdgbd (_bdga ,_edef _gb .Point ,_fggge _fe .Color )(*ruling ,bool ){_dafdc :=lineRuling {_egd :_bdga ,_aacf :_edef ,_ggdg :_cfcd (_bdga ,_edef ),Color :_fggge };if _dafdc ._ggdg ==_bgcgd {return nil ,false ;};return _dafdc .asRuling ();
};func _eabba (_gbde *textWord ,_cdcc float64 ,_aagbe ,_ccab rulingList )*wordBag {_fcgb :=_becd (_gbde ._gacg );_gfa :=[]*textWord {_gbde };_ddcg :=wordBag {_dbee :map[int ][]*textWord {_fcgb :_gfa },PdfRectangle :_gbde .PdfRectangle ,_gdfg :_gbde ._efaa ,_dbbg :_cdcc ,_gdfgb :_aagbe ,_afee :_ccab };
return &_ddcg ;};func _eadbb (_fbcbd []*textMark ,_ffcae _ge .PdfRectangle )[]*textWord {var _fcbbf []*textWord ;var _gbcg *textWord ;if _fgcb {_fg .Log .Info ("\u006d\u0061\u006beT\u0065\u0078\u0074\u0057\u006f\u0072\u0064\u0073\u003a\u0020\u0025\u0064\u0020\u006d\u0061\u0072\u006b\u0073",len (_fbcbd ));
};_gcaff :=func (){if _gbcg !=nil {_bdef :=_gbcg .computeText ();if !_dcgc (_bdef ){_gbcg ._cgcd =_bdef ;_fcbbf =append (_fcbbf ,_gbcg );if _fgcb {_fg .Log .Info ("\u0061\u0064\u0064Ne\u0077\u0057\u006f\u0072\u0064\u003a\u0020\u0025\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",len (_fcbbf )-1,_gbcg .String ());
for _adfd ,_bbfaa :=range _gbcg ._gffgdd {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_adfd ,_bbfaa .String ());};};};_gbcg =nil ;};};for _ ,_cddgf :=range _fbcbd {if _eacg &&_gbcg !=nil &&len (_gbcg ._gffgdd )> 0{_ebgab :=_gbcg ._gffgdd [len (_gbcg ._gffgdd )-1];
_fabd ,_fdeb :=_effa (_cddgf ._gfba );_bdgaf ,_deeb :=_effa (_ebgab ._gfba );if _fdeb &&!_deeb &&_ebgab .inDiacriticArea (_cddgf ){_gbcg .addDiacritic (_fabd );continue ;};if _deeb &&!_fdeb &&_cddgf .inDiacriticArea (_ebgab ){_gbcg ._gffgdd =_gbcg ._gffgdd [:len (_gbcg ._gffgdd )-1];
_gbcg .appendMark (_cddgf ,_ffcae );_gbcg .addDiacritic (_bdgaf );continue ;};};_eadc :=_dcgc (_cddgf ._gfba );if _eadc {_gcaff ();continue ;};if _gbcg ==nil &&!_eadc {_gbcg =_fagca ([]*textMark {_cddgf },_ffcae );continue ;};_ggfff :=_gbcg ._efaa ;_ebfc :=_d .Abs (_dfgc (_ffcae ,_cddgf )-_gbcg ._gacg )/_ggfff ;
_ccffd :=_aabb (_cddgf ,_gbcg )/_ggfff ;if _ccffd >=_cfgd ||!(-_edaa <=_ccffd &&_ebfc <=_bedf ){_gcaff ();_gbcg =_fagca ([]*textMark {_cddgf },_ffcae );continue ;};_gbcg .appendMark (_cddgf ,_ffcae );};_gcaff ();return _fcbbf ;};func (_ddbc *shapesState )lineTo (_dgd ,_cdb float64 ){if _gbdf {_fg .Log .Info ("\u006c\u0069\u006eeT\u006f\u0028\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0070\u003d\u0025\u002e\u0032\u0066",_dgd ,_cdb ,_ddbc .devicePoint (_dgd ,_cdb ));
};_ddbc .addPoint (_dgd ,_cdb );};var _ecdcg =map[rulingKind ]string {_bgcgd :"\u006e\u006f\u006e\u0065",_bbge :"\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_egea :"\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c"};func (_edgc *wordBag )removeDuplicates (){if _dbff {_fg .Log .Info ("r\u0065m\u006f\u0076\u0065\u0044\u0075\u0070\u006c\u0069c\u0061\u0074\u0065\u0073: \u0025\u0071",_edgc .text ());
};for _ ,_dega :=range _edgc .depthIndexes (){if len (_edgc ._dbee [_dega ])==0{continue ;};_ccgf :=_edgc ._dbee [_dega ][0];_cdfff :=_gfd *_ccgf ._efaa ;_eefb :=_ccgf ._gacg ;for _ ,_fadb :=range _edgc .depthBand (_eefb ,_eefb +_cdfff ){_gbfg :=map[*textWord ]struct{}{};
_gbbcf :=_edgc ._dbee [_fadb ];for _ ,_adgfd :=range _gbbcf {if _ ,_decf :=_gbfg [_adgfd ];_decf {continue ;};for _ ,_cgcgd :=range _gbbcf {if _ ,_ebe :=_gbfg [_cgcgd ];_ebe {continue ;};if _cgcgd !=_adgfd &&_cgcgd ._cgcd ==_adgfd ._cgcd &&_d .Abs (_cgcgd .Llx -_adgfd .Llx )< _cdfff &&_d .Abs (_cgcgd .Urx -_adgfd .Urx )< _cdfff &&_d .Abs (_cgcgd .Lly -_adgfd .Lly )< _cdfff &&_d .Abs (_cgcgd .Ury -_adgfd .Ury )< _cdfff {_gbfg [_cgcgd ]=struct{}{};
};};};if len (_gbfg )> 0{_becg :=0;for _ ,_efad :=range _gbbcf {if _ ,_deff :=_gbfg [_efad ];!_deff {_gbbcf [_becg ]=_efad ;_becg ++;};};_edgc ._dbee [_fadb ]=_gbbcf [:len (_gbbcf )-len (_gbfg )];if len (_edgc ._dbee [_fadb ])==0{delete (_edgc ._dbee ,_fadb );
};};};};};func (_fcaa rulingList )splitSec ()[]rulingList {_bf .Slice (_fcaa ,func (_dbbc ,_dfbg int )bool {_gdecb ,_fddg :=_fcaa [_dbbc ],_fcaa [_dfbg ];if _gdecb ._ceggf !=_fddg ._ceggf {return _gdecb ._ceggf < _fddg ._ceggf ;};return _gdecb ._gbcd < _fddg ._gbcd ;
});_bgdg :=make (map[*ruling ]struct{},len (_fcaa ));_aaeae :=func (_cgcc *ruling )rulingList {_bfgfc :=rulingList {_cgcc };_bgdg [_cgcc ]=struct{}{};for _ ,_gacc :=range _fcaa {if _ ,_fcdf :=_bgdg [_gacc ];_fcdf {continue ;};for _ ,_ddcdd :=range _bfgfc {if _gacc .alignsSec (_ddcdd ){_bfgfc =append (_bfgfc ,_gacc );
_bgdg [_gacc ]=struct{}{};break ;};};};return _bfgfc ;};_gbec :=[]rulingList {_aaeae (_fcaa [0])};for _ ,_fdded :=range _fcaa [1:]{if _ ,_bgag :=_bgdg [_fdded ];_bgag {continue ;};_gbec =append (_gbec ,_aaeae (_fdded ));};return _gbec ;};var _aeeg =TextMark {Text :"\u005b\u0058\u005d",Original :"\u0020",Meta :true ,FillColor :_fe .White ,StrokeColor :_fe .White };
type textMark struct{_ge .PdfRectangle ;_dadg int ;_gfba string ;_eebcd string ;_bfea *_ge .PdfFont ;_fgcd float64 ;_aeca float64 ;_eeec _gb .Matrix ;_ebbe _gb .Point ;_eadg _ge .PdfRectangle ;_gcfe _fe .Color ;_dbbd _fe .Color ;};func (_ecge paraList )addNeighbours (){_dfada :=func (_cdad []int ,_caac *textPara )([]*textPara ,[]*textPara ){_eabbgc :=make ([]*textPara ,0,len (_cdad )-1);
_bddaf :=make ([]*textPara ,0,len (_cdad )-1);for _ ,_dgbfd :=range _cdad {_ffda :=_ecge [_dgbfd ];if _ffda .Urx <=_caac .Llx {_eabbgc =append (_eabbgc ,_ffda );}else if _ffda .Llx >=_caac .Urx {_bddaf =append (_bddaf ,_ffda );};};return _eabbgc ,_bddaf ;
};_gbdc :=func (_fdgff []int ,_bbced *textPara )([]*textPara ,[]*textPara ){_cggg :=make ([]*textPara ,0,len (_fdgff )-1);_bbcafb :=make ([]*textPara ,0,len (_fdgff )-1);for _ ,_abccf :=range _fdgff {_egfbf :=_ecge [_abccf ];if _egfbf .Ury <=_bbced .Lly {_bbcafb =append (_bbcafb ,_egfbf );
}else if _egfbf .Lly >=_bbced .Ury {_cggg =append (_cggg ,_egfbf );};};return _cggg ,_bbcafb ;};_edcg :=_ecge .yNeighbours (_dabfc );for _ ,_faag :=range _ecge {_aeafg :=_edcg [_faag ];if len (_aeafg )==0{continue ;};_eada ,_gbgd :=_dfada (_aeafg ,_faag );
if len (_eada )==0&&len (_gbgd )==0{continue ;};if len (_eada )> 0{_gbff :=_eada [0];for _ ,_adcd :=range _eada [1:]{if _adcd .Urx >=_gbff .Urx {_gbff =_adcd ;};};for _ ,_dbgc :=range _eada {if _dbgc !=_gbff &&_dbgc .Urx > _gbff .Llx {_gbff =nil ;break ;
};};if _gbff !=nil &&_adba (_faag .PdfRectangle ,_gbff .PdfRectangle ){_faag ._eccf =_gbff ;};};if len (_gbgd )> 0{_aaecb :=_gbgd [0];for _ ,_debb :=range _gbgd [1:]{if _debb .Llx <=_aaecb .Llx {_aaecb =_debb ;};};for _ ,_cbcc :=range _gbgd {if _cbcc !=_aaecb &&_cbcc .Llx < _aaecb .Urx {_aaecb =nil ;
break ;};};if _aaecb !=nil &&_adba (_faag .PdfRectangle ,_aaecb .PdfRectangle ){_faag ._caa =_aaecb ;};};};_edcg =_ecge .xNeighbours (_adeb );for _ ,_egdb :=range _ecge {_adfbd :=_edcg [_egdb ];if len (_adfbd )==0{continue ;};_adfbe ,_acgce :=_gbdc (_adfbd ,_egdb );
if len (_adfbe )==0&&len (_acgce )==0{continue ;};if len (_acgce )> 0{_agbfd :=_acgce [0];for _ ,_cfdefg :=range _acgce [1:]{if _cfdefg .Ury >=_agbfd .Ury {_agbfd =_cfdefg ;};};for _ ,_adgcb :=range _acgce {if _adgcb !=_agbfd &&_adgcb .Ury > _agbfd .Lly {_agbfd =nil ;
break ;};};if _agbfd !=nil &&_bcgc (_egdb .PdfRectangle ,_agbfd .PdfRectangle ){_egdb ._cafc =_agbfd ;};};if len (_adfbe )> 0{_gagea :=_adfbe [0];for _ ,_faff :=range _adfbe [1:]{if _faff .Lly <=_gagea .Lly {_gagea =_faff ;};};for _ ,_acfe :=range _adfbe {if _acfe !=_gagea &&_acfe .Lly < _gagea .Ury {_gagea =nil ;
break ;};};if _gagea !=nil &&_bcgc (_egdb .PdfRectangle ,_gagea .PdfRectangle ){_egdb ._egae =_gagea ;};};};for _ ,_dbaf :=range _ecge {if _dbaf ._eccf !=nil &&_dbaf ._eccf ._caa !=_dbaf {_dbaf ._eccf =nil ;};if _dbaf ._egae !=nil &&_dbaf ._egae ._cafc !=_dbaf {_dbaf ._egae =nil ;
};if _dbaf ._caa !=nil &&_dbaf ._caa ._eccf !=_dbaf {_dbaf ._caa =nil ;};if _dbaf ._cafc !=nil &&_dbaf ._cafc ._egae !=_dbaf {_dbaf ._cafc =nil ;};};};func (_gbdd *textPara )fontsize ()float64 {return _gbdd ._bged [0]._fbbc };func (_eceag *PageText )computeViews (){var _adca rulingList ;
if _fca {_cbcb :=_ccaee (_eceag ._aeee );_adca =append (_adca ,_cbcb ...);};if _cddae {_dcfa :=_fecgg (_eceag ._dgeg );_adca =append (_adca ,_dcfa ...);};_adca ,_aadc :=_adca .toTilings ();var _bace paraList ;_ddbg :=len (_eceag ._egfg );for _fada :=0;
_fada < 360&&_ddbg > 0;_fada +=90{_cdea :=make ([]*textMark ,0,len (_eceag ._egfg )-_ddbg );for _ ,_baag :=range _eceag ._egfg {if _baag ._dadg ==_fada {_cdea =append (_cdea ,_baag );};};if len (_cdea )> 0{_ffe :=_afb (_cdea ,_eceag ._cdc ,_adca ,_aadc );
_bace =append (_bace ,_ffe ...);_ddbg -=len (_cdea );};};_deac :=new (_g .Buffer );_bace .writeText (_deac );_eceag ._geg =_deac .String ();_eceag ._gfb =_bace .toTextMarks ();_eceag ._accfd =_bace .tables ();if _cfadg {_fg .Log .Info ("\u0063\u006f\u006dpu\u0074\u0065\u0056\u0069\u0065\u0077\u0073\u003a\u0020\u0074\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064",len (_eceag ._accfd ));
};};func (_fcga *textLine )toTextMarks (_bggfa *int )[]TextMark {var _agfg []TextMark ;for _ ,_ffgf :=range _fcga ._fbeb {if _ffgf ._gcae {_agfg =_bgc (_agfg ,_bggfa ,"\u0020");};_dgbb :=_ffgf .toTextMarks (_bggfa );_agfg =append (_agfg ,_dgbb ...);};return _agfg ;
};func (_fegdg rulingList )removeDuplicates ()rulingList {if len (_fegdg )==0{return nil ;};_fegdg .sort ();_bbdf :=rulingList {_fegdg [0]};for _ ,_cedcf :=range _fegdg [1:]{if _cedcf .equals (_bbdf [len (_bbdf )-1]){continue ;};_bbdf =append (_bbdf ,_cedcf );
};return _bbdf ;};func _fcgag (_gfgg ,_eebe int )int {if _gfgg < _eebe {return _gfgg ;};return _eebe ;};func (_aaba rulingList )tidied (_dfecff string )rulingList {_aagbd :=_aaba .removeDuplicates ();_aagbd .log ("\u0075n\u0069\u0071\u0075\u0065\u0073");
_fcgf :=_aagbd .snapToGroups ();if _fcgf ==nil {return nil ;};_fcgf .sort ();if _ffee {_fg .Log .Info ("\u0074\u0069\u0064i\u0065\u0064\u003a\u0020\u0025\u0071\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u0075\u006e\u0069\u0071\u0075\u0065\u0073\u003d\u0025\u0064\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0064\u003d\u0025\u0064",_dfecff ,len (_aaba ),len (_aagbd ),len (_fcgf ));
};_fcgf .log ("\u0063o\u0061\u006c\u0065\u0073\u0063\u0065d");return _fcgf ;};func _eefbb (_cbeb int ,_agbg map[int ][]float64 )([]int ,int ){_fdaeb :=make ([]int ,_cbeb );_dbbb :=0;for _agfcb :=0;_agfcb < _cbeb ;_agfcb ++{_fdaeb [_agfcb ]=_dbbb ;_dbbb +=len (_agbg [_agfcb ])+1;
};return _fdaeb ,_dbbb ;};func (_baae *textTable )compositeRowCorridors ()map[int ][]float64 {_gfgf :=make (map[int ][]float64 ,_baae ._acde );if _cfadg {_fg .Log .Info ("c\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0052\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073:\u0020h\u003d\u0025\u0064",_baae ._acde );
};for _aage :=1;_aage < _baae ._acde ;_aage ++{var _egeg []compositeCell ;for _cabd :=0;_cabd < _baae ._eagd ;_cabd ++{if _gbgc ,_gdbc :=_baae ._fafc [_dgfc (_cabd ,_aage )];_gdbc {_egeg =append (_egeg ,_gbgc );};};if len (_egeg )==0{continue ;};_dbcg :=_gfcef (_egeg );
_gfgf [_aage ]=_dbcg ;if _cfadg {_ff .Printf ("\u0020\u0020\u0020\u0025\u0032\u0064\u003a\u0020\u00256\u002e\u0032\u0066\u000a",_aage ,_dbcg );};};return _gfgf ;};func _fdcd (_dgaa ,_bfgf _ge .PdfRectangle )bool {return _bcgc (_dgaa ,_bfgf )&&_adba (_dgaa ,_bfgf )};
func _acagd (_bddg _ge .PdfRectangle )*ruling {return &ruling {_beebc :_egea ,_adggg :_bddg .Llx ,_ceggf :_bddg .Lly ,_gbcd :_bddg .Ury };};func _dgae (_aaccag string ,_cbfba int )string {if len (_aaccag )< _cbfba {return _aaccag ;};return _aaccag [:_cbfba ];
};func (_agca *textTable )getRight ()paraList {_baab :=make (paraList ,_agca ._acde );for _fedcf :=0;_fedcf < _agca ._acde ;_fedcf ++{_bfeac :=_agca .get (_agca ._eagd -1,_fedcf )._caa ;if _bfeac ==nil ||_bfeac ._cdcf {return nil ;};_baab [_fedcf ]=_bfeac ;
};for _fcbef :=0;_fcbef < _agca ._acde -1;_fcbef ++{if _baab [_fcbef ]._cafc !=_baab [_fcbef +1]{return nil ;};};return _baab ;};

// TextTable represents a table.
// Cells are ordered top-to-bottom, left-to-right.
// Cells[y] is the (0-offset) y'th row in the table.
// Cells[y][x] is the (0-offset) x'th column in the table.
type TextTable struct{W ,H int ;Cells [][]TableCell ;};func _fecgff (_gbeeb map[float64 ]map[float64 ]gridTile )[]float64 {_fdgb :=make ([]float64 ,0,len (_gbeeb ));_febgg :=make (map[float64 ]struct{},len (_gbeeb ));for _ ,_gefd :=range _gbeeb {for _cbfe :=range _gefd {if _ ,_bbggg :=_febgg [_cbfe ];
_bbggg {continue ;};_fdgb =append (_fdgb ,_cbfe );_febgg [_cbfe ]=struct{}{};};};_bf .Float64s (_fdgb );return _fdgb ;};

// String returns a string describing `pt`.
func (_aaaa PageText )String ()string {_bfbc :=_ff .Sprintf ("P\u0061\u0067\u0065\u0054ex\u0074:\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073",len (_aaaa ._egfg ));_faad :=[]string {"\u002d"+_bfbc };for _ ,_eebc :=range _aaaa ._egfg {_faad =append (_faad ,_eebc .String ());
};_faad =append (_faad ,"\u002b"+_bfbc );return _ad .Join (_faad ,"\u000a");};const _adgf =10;func _ddee (_fcg _gb .Point )_gb .Matrix {return _gb .TranslationMatrix (_fcg .X ,_fcg .Y )};func (_bgbe compositeCell )split (_ebcee ,_bdcf []float64 )*textTable {_fcab :=len (_ebcee )+1;
_aacg :=len (_bdcf )+1;if _cfadg {_fg .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0043\u0065l\u006c\u002e\u0073\u0070l\u0069\u0074\u003a\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a\u0009\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025\u0073\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073=\u0025\u0036\u002e\u0032\u0066\u000a\t\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d%\u0036\u002e\u0032\u0066",_aacg ,_fcab ,_bgbe ,_ebcee ,_bdcf );
_ff .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073\u000a",len (_bgbe .paraList ));for _egbb ,_badfc :=range _bgbe .paraList {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_egbb ,_badfc .String ());};
_ff .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",len (_bgbe .lines ()));for _adef ,_dgcd :=range _bgbe .lines (){_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_adef ,_dgcd );};};_ebcee =_fbcc (_ebcee ,_bgbe .Ury ,_bgbe .Lly );
_bdcf =_fbcc (_bdcf ,_bgbe .Llx ,_bgbe .Urx );_fdfff :=make (map[uint64 ]*textPara ,_aacg *_fcab );_eec :=textTable {_eagd :_aacg ,_acde :_fcab ,_ccacd :_fdfff };_acaabe :=_bgbe .paraList ;_bf .Slice (_acaabe ,func (_eaaf ,_acba int )bool {_gcafb ,_dcefd :=_acaabe [_eaaf ],_acaabe [_acba ];
_bceb ,_ddf :=_gcafb .Lly ,_dcefd .Lly ;if _bceb !=_ddf {return _bceb < _ddf ;};return _gcafb .Llx < _dcefd .Llx ;});_aafcd :=make (map[uint64 ]_ge .PdfRectangle ,_aacg *_fcab );for _babf ,_eccac :=range _ebcee [1:]{_afbd :=_ebcee [_babf ];for _gbc ,_agfc :=range _bdcf [1:]{_agfb :=_bdcf [_gbc ];
_aafcd [_dgfc (_gbc ,_babf )]=_ge .PdfRectangle {Llx :_agfb ,Urx :_agfc ,Lly :_eccac ,Ury :_afbd };};};if _cfadg {_fg .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0043\u0065l\u006c\u002e\u0073\u0070\u006c\u0069\u0074\u003a\u0020\u0072e\u0063\u0074\u0073");
_ff .Printf ("\u0020\u0020\u0020\u0020");for _ccgb :=0;_ccgb < _aacg ;_ccgb ++{_ff .Printf ("\u0025\u0033\u0030\u0064\u002c\u0020",_ccgb );};_ff .Println ();for _ccebb :=0;_ccebb < _fcab ;_ccebb ++{_ff .Printf ("\u0020\u0020\u0025\u0032\u0064\u003a",_ccebb );
for _dcg :=0;_dcg < _aacg ;_dcg ++{_ff .Printf ("\u00256\u002e\u0032\u0066\u002c\u0020",_aafcd [_dgfc (_dcg ,_ccebb )]);};_ff .Println ();};};_dfeg :=func (_eegb *textLine )(int ,int ){for _efdd :=0;_efdd < _fcab ;_efdd ++{for _edafg :=0;_edafg < _aacg ;
_edafg ++{if _gaaa (_aafcd [_dgfc (_edafg ,_efdd )],_eegb .PdfRectangle ){return _edafg ,_efdd ;};};};return -1,-1;};_baga :=make (map[uint64 ][]*textLine ,_aacg *_fcab );for _ ,_cbfb :=range _acaabe .lines (){_adgc ,_feeg :=_dfeg (_cbfb );if _adgc < 0{continue ;
};_baga [_dgfc (_adgc ,_feeg )]=append (_baga [_dgfc (_adgc ,_feeg )],_cbfb );};for _fcge :=0;_fcge < len (_ebcee )-1;_fcge ++{_eced :=_ebcee [_fcge ];_fdabf :=_ebcee [_fcge +1];for _gedeg :=0;_gedeg < len (_bdcf )-1;_gedeg ++{_eggc :=_bdcf [_gedeg ];_ccae :=_bdcf [_gedeg +1];
_aecf :=_ge .PdfRectangle {Llx :_eggc ,Urx :_ccae ,Lly :_fdabf ,Ury :_eced };_bbedf :=_baga [_dgfc (_gedeg ,_fcge )];if len (_bbedf )==0{continue ;};_abcgf :=_aaea (_aecf ,_bbedf );_eec .put (_gedeg ,_fcge ,_abcgf );};};return &_eec ;};func (_cfgcb *textPara )writeCellText (_fbae _f .Writer ){for _affc ,_ffb :=range _cfgcb ._bged {_badg :=_ffb .text ();
_fgbb :=_gcd &&_ffb .endsInHyphen ()&&_affc !=len (_cfgcb ._bged )-1;if _fgbb {_badg =_fbaa (_badg );};_fbae .Write ([]byte (_badg ));if !(_fgbb ||_affc ==len (_cfgcb ._bged )-1){_fbae .Write ([]byte (_bcgcf (_ffb ._bcee ,_cfgcb ._bged [_affc +1]._bcee )));
};};};

// String returns a description of `state`.
func (_dedb *textState )String ()string {_afa :="\u005bN\u004f\u0054\u0020\u0053\u0045\u0054]";if _dedb ._baeg !=nil {_afa =_dedb ._baeg .BaseFont ();};return _ff .Sprintf ("\u0074\u0063\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0077\u003d\u0025\u002e\u0032\u0066 \u0074f\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u003d\u0025\u0071",_dedb ._fbfc ,_dedb ._acag ,_dedb ._ecdc ,_afa );
};type event struct{_gbea float64 ;_bbefe bool ;_egegg int ;};func (_gffg paraList )writeText (_fbfd _f .Writer ){for _fafb ,_dgbf :=range _gffg {if _dgbf ._dddbf {continue ;};_dgbf .writeText (_fbfd );if _fafb !=len (_gffg )-1{if _deea (_dgbf ,_gffg [_fafb +1]){_fbfd .Write ([]byte ("\u0020"));
}else {_fbfd .Write ([]byte ("\u000a"));_fbfd .Write ([]byte ("\u000a"));};};};_fbfd .Write ([]byte ("\u000a"));_fbfd .Write ([]byte ("\u000a"));};func _ddae (_bafa _ge .PdfColorspace ,_aaad _ge .PdfColor )_fe .Color {if _bafa ==nil ||_aaad ==nil {return _fe .Black ;
};_edca ,_cadd :=_bafa .ColorToRGB (_aaad );if _cadd !=nil {_fg .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006fu\u006c\u0064\u0020no\u0074\u0020\u0063\u006f\u006e\u0076e\u0072\u0074\u0020\u0063\u006f\u006c\u006f\u0072\u0020\u0025\u0076\u0020\u0028\u0025\u0076)\u0020\u0074\u006f\u0020\u0052\u0047\u0042\u003a \u0025\u0073",_aaad ,_bafa ,_cadd );
return _fe .Black ;};_fega ,_eabdc :=_edca .(*_ge .PdfColorDeviceRGB );if !_eabdc {_fg .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0065\u0064 \u0063\u006f\u006c\u006f\u0072\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020i\u006e\u0020\u0074\u0068\u0065\u0020\u0052\u0047\u0042\u0020\u0063\u006flo\u0072\u0073\u0070\u0061\u0063\u0065\u003a\u0020\u0025\u0076",_edca );
return _fe .Black ;};return _fe .NRGBA {R :uint8 (_fega .R ()*255),G :uint8 (_fega .G ()*255),B :uint8 (_fega .B ()*255),A :uint8 (255)};};

// Tables returns the tables extracted from the page.
func (_bbce PageText )Tables ()[]TextTable {if _cfadg {_fg .Log .Info ("\u0054\u0061\u0062\u006c\u0065\u0073\u003a\u0020\u0025\u0064",len (_bbce ._accfd ));};return _bbce ._accfd ;};

// ExtractPageImages returns the image contents of the page extractor, including data
// and position, size information for each image.
// A set of options to control page image extraction can be passed in. The options
// parameter can be nil for the default options. By default, inline stencil masks
// are not extracted.
func (_fa *Extractor )ExtractPageImages (options *ImageExtractOptions )(*PageImages ,error ){_bff :=&imageExtractContext {_cdf :options };_acf :=_bff .extractContentStreamImages (_fa ._ee ,_fa ._bec );if _acf !=nil {return nil ,_acf ;};return &PageImages {Images :_bff ._fac },nil ;
};

// PageText represents the layout of text on a device page.
type PageText struct{_egfg []*textMark ;_geg string ;_gfb []TextMark ;_accfd []TextTable ;_cdc _ge .PdfRectangle ;_aeee []pathSection ;_dgeg []pathSection ;};

// String returns a description of `v`.
func (_adcg *ruling )String ()string {if _adcg ._beebc ==_bgcgd {return "\u004e\u004f\u0054\u0020\u0052\u0055\u004c\u0049\u004e\u0047";};_ecff ,_ccee :="\u0078","\u0079";if _adcg ._beebc ==_bbge {_ecff ,_ccee ="\u0079","\u0078";};_dddf :="";if _adcg ._dgcc !=0.0{_dddf =_ff .Sprintf (" \u0077\u0069\u0064\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_adcg ._dgcc );
};return _ff .Sprintf ("\u0025\u00310\u0073\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0020\u0025\u0076\u0025\u0073",_adcg ._beebc ,_ecff ,_adcg ._adggg ,_ccee ,_adcg ._ceggf ,_adcg ._gbcd ,_adcg ._gbcd -_adcg ._ceggf ,_adcg ._edba ,_adcg .Color ,_dddf );
};const _gadg =1.0/1000.0;func (_gffbg paraList )readBefore (_gbdef []int ,_cbecd ,_ggcc int )bool {_fgba ,_ceaa :=_gffbg [_cbecd ],_gffbg [_ggcc ];if _cdba (_fgba ,_ceaa )&&_fgba .Lly > _ceaa .Lly {return true ;};if !(_fgba ._becf .Urx < _ceaa ._becf .Llx ){return false ;
};_bdbd ,_bfcb :=_fgba .Lly ,_ceaa .Lly ;if _bdbd > _bfcb {_bfcb ,_bdbd =_bdbd ,_bfcb ;};_ebdf :=_d .Max (_fgba ._becf .Llx ,_ceaa ._becf .Llx );_ddbfd :=_d .Min (_fgba ._becf .Urx ,_ceaa ._becf .Urx );_gafbf :=_gffbg .llyRange (_gbdef ,_bdbd ,_bfcb );
for _ ,_ggd :=range _gafbf {if _ggd ==_cbecd ||_ggd ==_ggcc {continue ;};_ebge :=_gffbg [_ggd ];if _ebge ._becf .Llx <=_ddbfd &&_ebdf <=_ebge ._becf .Urx {return false ;};};return true ;};func (_cefd *wordBag )pullWord (_dbc *textWord ,_fdcb int ,_abecb map[int ]map[*textWord ]struct{}){_cefd .PdfRectangle =_gede (_cefd .PdfRectangle ,_dbc .PdfRectangle );
if _dbc ._efaa > _cefd ._gdfg {_cefd ._gdfg =_dbc ._efaa ;};_cefd ._dbee [_fdcb ]=append (_cefd ._dbee [_fdcb ],_dbc );_abecb [_fdcb ][_dbc ]=struct{}{};};func (_gce *textObject )getFontDirect (_gga string )(*_ge .PdfFont ,error ){_adda ,_gcac :=_gce .getFontDict (_gga );
if _gcac !=nil {return nil ,_gcac ;};_eadb ,_gcac :=_ge .NewPdfFontFromPdfObject (_adda );if _gcac !=nil {_fg .Log .Debug ("\u0067\u0065\u0074\u0046\u006f\u006e\u0074\u0044\u0069\u0072\u0065\u0063\u0074\u003a\u0020\u004e\u0065\u0077Pd\u0066F\u006f\u006e\u0074\u0046\u0072\u006f\u006d\u0050\u0064\u0066\u004f\u0062j\u0065\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u006e\u0061\u006d\u0065\u003d%\u0023\u0071\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gga ,_gcac );
};return _eadb ,_gcac ;};

// String returns a human readable description of `path`.
func (_bfffa *subpath )String ()string {_gfca :=_bfffa ._fbb ;_dba :=len (_gfca );if _dba <=5{return _ff .Sprintf ("\u0025d\u003a\u0020\u0025\u0036\u002e\u0032f",_dba ,_gfca );};return _ff .Sprintf ("\u0025d\u003a\u0020\u0025\u0036.\u0032\u0066\u0020\u0025\u0036.\u0032f\u0020.\u002e\u002e\u0020\u0025\u0036\u002e\u0032f",_dba ,_gfca [0],_gfca [1],_gfca [_dba -1]);
};type textPara struct{_ge .PdfRectangle ;_becf _ge .PdfRectangle ;_bged []*textLine ;_gfce *textTable ;_cdcf bool ;_dddbf bool ;_eccf *textPara ;_caa *textPara ;_egae *textPara ;_cafc *textPara ;};func (_eef *imageExtractContext )extractXObjectImage (_ed *_ac .PdfObjectName ,_aag _fd .GraphicsState ,_bag *_ge .PdfPageResources )error {_cdd ,_ :=_bag .GetXObjectByName (*_ed );
if _cdd ==nil {return nil ;};_ddg ,_cga :=_eef ._dc [_cdd ];if !_cga {_fdfd ,_eeb :=_bag .GetXObjectImageByName (*_ed );if _eeb !=nil {return _eeb ;};if _fdfd ==nil {return nil ;};_eda ,_eeb :=_fdfd .ToImage ();if _eeb !=nil {return _eeb ;};_ddg =&cachedImage {_ebd :_eda ,_ba :_fdfd .ColorSpace };
_eef ._dc [_cdd ]=_ddg ;};_eeg :=_ddg ._ebd ;_edc :=_ddg ._ba ;_fdb ,_bfb :=_edc .ImageToRGB (*_eeg );if _bfb !=nil {return _bfb ;};_fg .Log .Debug ("@\u0044\u006f\u0020\u0043\u0054\u004d\u003a\u0020\u0025\u0073",_aag .CTM .String ());_cffd :=ImageMark {Image :&_fdb ,Width :_aag .CTM .ScalingFactorX (),Height :_aag .CTM .ScalingFactorY (),Angle :_aag .CTM .Angle ()};
_cffd .X ,_cffd .Y =_aag .CTM .Translation ();_eef ._fac =append (_eef ._fac ,_cffd );_eef ._dg ++;return nil ;};func _effa (_badff string )(string ,bool ){_geabb :=[]rune (_badff );if len (_geabb )!=1{return "",false ;};_gcff ,_ceaef :=_dcbdg [_geabb [0]];
return _gcff ,_ceaef ;};func (_dabd *textLine )text ()string {var _befa []string ;for _ ,_defc :=range _dabd ._fbeb {if _defc ._gcae {_befa =append (_befa ,"\u0020");};_befa =append (_befa ,_defc ._cgcd );};return _ad .Join (_befa ,"");};func (_eedd rulingList )toTilings ()(rulingList ,[]gridTiling ){_eedd .log ("\u0074o\u0054\u0069\u006c\u0069\u006e\u0067s");
if len (_eedd )==0{return nil ,nil ;};_eedd =_eedd .tidied ("\u0061\u006c\u006c");_eedd .log ("\u0074\u0069\u0064\u0069\u0065\u0064");_ecbb :=_eedd .toGrids ();_aecg :=make ([]gridTiling ,len (_ecbb ));for _cfdb ,_gdfc :=range _ecbb {_aecg [_cfdb ]=_gdfc .asTiling ();
};return _eedd ,_aecg ;};func (_dged *textObject )setCharSpacing (_eed float64 ){if _dged ==nil {return ;};_dged ._cada ._fbfc =_eed ;if _eefa {_fg .Log .Info ("\u0073\u0065t\u0043\u0068\u0061\u0072\u0053\u0070\u0061\u0063\u0069\u006e\u0067\u003a\u0020\u0025\u002e\u0032\u0066\u0020\u0073\u0074\u0061\u0074e=\u0025\u0073",_eed ,_dged ._cada .String ());
};};type subpath struct{_fbb []_gb .Point ;_fagb bool ;};func _cdba (_baceb ,_gfbfe *textPara )bool {return _bcgc (_baceb ._becf ,_gfbfe ._becf )};func _aebc (_cfgc *wordBag ,_dfad *textWord ,_ccd float64 )bool {return _cfgc .Urx <=_dfad .Llx &&_dfad .Llx < _cfgc .Urx +_ccd ;
};func _gabb (_eeca float64 )float64 {return _bbbd *_d .Round (_eeca /_bbbd )};func _gbg (_ebdaa func (*wordBag ,*textWord ,float64 )bool ,_gcacb float64 )func (*wordBag ,*textWord )bool {return func (_bcef *wordBag ,_dfdfb *textWord )bool {return _ebdaa (_bcef ,_dfdfb ,_gcacb )};
};func (_adggd paraList )yNeighbours (_eebb float64 )map[*textPara ][]int {_geffe :=make ([]event ,2*len (_adggd ));if _eebb ==0{for _ebead ,_decbb :=range _adggd {_geffe [2*_ebead ]=event {_decbb .Lly ,true ,_ebead };_geffe [2*_ebead +1]=event {_decbb .Ury ,false ,_ebead };
};}else {for _effg ,_fbdaf :=range _adggd {_geffe [2*_effg ]=event {_fbdaf .Lly -_eebb *_fbdaf .fontsize (),true ,_effg };_geffe [2*_effg +1]=event {_fbdaf .Ury +_eebb *_fbdaf .fontsize (),false ,_effg };};};return _adggd .eventNeighbours (_geffe );};func (_bgff *wordBag )highestWord (_ffdb int ,_gege ,_egbe float64 )*textWord {for _ ,_ffga :=range _bgff ._dbee [_ffdb ]{if _gege <=_ffga ._gacg &&_ffga ._gacg <=_egbe {return _ffga ;
};};return nil ;};func _becd (_fdeef float64 )int {var _gecf int ;if _fdeef >=0{_gecf =int (_fdeef /_gdd );}else {_gecf =int (_fdeef /_gdd )-1;};return _gecf ;};func _gcgd (_gde _gb .Matrix )_gb .Point {_bcc ,_debc :=_gde .Translation ();return _gb .Point {X :_bcc ,Y :_debc };
};

// Extractor stores and offers functionality for extracting content from PDF pages.
type Extractor struct{_ee string ;_bec *_ge .PdfPageResources ;_eg _ge .PdfRectangle ;_cd map[string ]fontEntry ;_ec map[string ]textResult ;_adf int64 ;_ae int ;};