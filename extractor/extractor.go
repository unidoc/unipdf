//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

//
// Package extractor is used for quickly extracting PDF content through a simple interface.
// Currently offers functionality for extracting textual content.
//
package extractor ;import (_g "bytes";_e "errors";_ac "fmt";_f "github.com/unidoc/unipdf/v3/common";_cea "github.com/unidoc/unipdf/v3/contentstream";_ce "github.com/unidoc/unipdf/v3/core";_gb "github.com/unidoc/unipdf/v3/internal/license";_af "github.com/unidoc/unipdf/v3/internal/textencoding";
_b "github.com/unidoc/unipdf/v3/internal/transform";_cf "github.com/unidoc/unipdf/v3/model";_ae "golang.org/x/text/unicode/norm";_ge "golang.org/x/xerrors";_cc "image/color";_cb "io";_ea "math";_c "regexp";_ee "sort";_ca "strings";_aa "unicode";_d "unicode/utf8";
);func (_gdbgf paraList )llyOrdering ()[]int {_gbac :=make ([]int ,len (_gdbgf ));for _gcef :=range _gdbgf {_gbac [_gcef ]=_gcef ;};_ee .SliceStable (_gbac ,func (_cbee ,_bacd int )bool {_fcce ,_degfg :=_gbac [_cbee ],_gbac [_bacd ];return _gdbgf [_fcce ].Lly < _gdbgf [_degfg ].Lly ;
});return _gbac ;};type rulingKind int ;func (_dgeb *textObject )getFillColor ()_cc .Color {return _gbef (_dgeb ._faea .ColorspaceNonStroking ,_dgeb ._faea .ColorNonStroking );};func (_adbee *wordBag )sort (){for _ ,_cdcb :=range _adbee ._gagc {_ee .Slice (_cdcb ,func (_ecca ,_bfge int )bool {return _ecaed (_cdcb [_ecca ],_cdcb [_bfge ])< 0});
};};func (_fdaa rulingList )aligned ()bool {if len (_fdaa )< 2{return false ;};_ebcgb :=make (map[*ruling ]int );_ebcgb [_fdaa [0]]=0;for _ ,_dddd :=range _fdaa [1:]{_gfeef :=false ;for _geef :=range _ebcgb {if _dddd .gridIntersecting (_geef ){_ebcgb [_geef ]++;
_gfeef =true ;break ;};};if !_gfeef {_ebcgb [_dddd ]=0;};};_adfg :=0;for _ ,_dfca :=range _ebcgb {if _dfca ==0{_adfg ++;};};_gffc :=float64 (_adfg )/float64 (len (_fdaa ));_cbec :=_gffc <=1.0-_cdaba ;if _agfd {_f .Log .Info ("\u0061\u006c\u0069\u0067\u006e\u0065\u0064\u003d\u0025\u0074\u0020\u0075\u006em\u0061\u0074\u0063\u0068\u0065\u0064=\u0025\u002e\u0032\u0066\u003d\u0025\u0064\u002f\u0025\u0064\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_cbec ,_gffc ,_adfg ,len (_fdaa ),_fdaa .String ());
};return _cbec ;};func _ffbg (_dccaa int ,_bdfd func (int ,int )bool )[]int {_gdaf :=make ([]int ,_dccaa );for _cfcbc :=range _gdaf {_gdaf [_cfcbc ]=_cfcbc ;};_ee .Slice (_gdaf ,func (_affcf ,_dgcae int )bool {return _bdfd (_gdaf [_affcf ],_gdaf [_dgcae ])});
return _gdaf ;};func (_afea *textTable )compositeRowCorridors ()map[int ][]float64 {_ffdef :=make (map[int ][]float64 ,_afea ._agfc );if _ffda {_f .Log .Info ("c\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0052\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073:\u0020h\u003d\u0025\u0064",_afea ._agfc );
};for _adag :=1;_adag < _afea ._agfc ;_adag ++{var _acgc []compositeCell ;for _ggfa :=0;_ggfa < _afea ._fbca ;_ggfa ++{if _ebef ,_ccaf :=_afea ._ccad [_dace (_ggfa ,_adag )];_ccaf {_acgc =append (_acgc ,_ebef );};};if len (_acgc )==0{continue ;};_ggbcge :=_dbagc (_acgc );
_ffdef [_adag ]=_ggbcge ;if _ffda {_ac .Printf ("\u0020\u0020\u0020\u0025\u0032\u0064\u003a\u0020\u00256\u002e\u0032\u0066\u000a",_adag ,_ggbcge );};};return _ffdef ;};const (_ccaa markKind =iota ;_acbc ;_ddbg ;_fddbf ;);func _edfc (_aac _cf .PdfRectangle )rulingKind {_dceg :=_aac .Width ();
_gfcd :=_aac .Height ();if _dceg > _gfcd {if _dceg >=_abgg {return _deba ;};}else {if _gfcd >=_abgg {return _afb ;};};return _fecef ;};func _fgfe (_gefb []pathSection ){if _cceg < 0.0{return ;};if _agfd {_f .Log .Info ("\u0067\u0072\u0061\u006e\u0075\u006c\u0061\u0072\u0069\u007a\u0065\u003a\u0020\u0025\u0064 \u0073u\u0062\u0070\u0061\u0074\u0068\u0020\u0073\u0065\u0063\u0074\u0069\u006f\u006e\u0073",len (_gefb ));
};for _fgaeg ,_eabg :=range _gefb {for _gebdc ,_agedaa :=range _eabg ._ffcb {for _ecee ,_bcfbf :=range _agedaa ._cfd {_agedaa ._cfd [_ecee ]=_b .Point {X :_cccfc (_bcfbf .X ),Y :_cccfc (_bcfbf .Y )};if _agfd {_acgga :=_agedaa ._cfd [_ecee ];if !_eggcd (_bcfbf ,_acgga ){_beadg :=_b .Point {X :_acgga .X -_bcfbf .X ,Y :_acgga .Y -_bcfbf .Y };
_ac .Printf ("\u0025\u0034d \u002d\u0020\u00254\u0064\u0020\u002d\u0020%4d\u003a %\u002e\u0032\u0066\u0020\u2192\u0020\u0025.2\u0066\u0020\u0028\u0025\u0067\u0029\u000a",_fgaeg ,_gebdc ,_ecee ,_bcfbf ,_acgga ,_beadg );};};};};};};

// String returns a string describing the current state of the textState stack.
func (_gae *stateStack )String ()string {_fdd :=[]string {_ac .Sprintf ("\u002d\u002d\u002d\u002d f\u006f\u006e\u0074\u0020\u0073\u0074\u0061\u0063\u006b\u003a\u0020\u0025\u0064",len (*_gae ))};for _efda ,_ead :=range *_gae {_edg :="\u003c\u006e\u0069l\u003e";
if _ead !=nil {_edg =_ead .String ();};_fdd =append (_fdd ,_ac .Sprintf ("\u0009\u0025\u0032\u0064\u003a\u0020\u0025\u0073",_efda ,_edg ));};return _ca .Join (_fdd ,"\u000a");};func (_ggb *imageExtractContext )extractXObjectImage (_ffe *_ce .PdfObjectName ,_gfa _cea .GraphicsState ,_fdg *_cf .PdfPageResources )error {_gef ,_ :=_fdg .GetXObjectByName (*_ffe );
if _gef ==nil {return nil ;};_ef ,_bfgg :=_ggb ._bc [_gef ];if !_bfgg {_cce ,_fgd :=_fdg .GetXObjectImageByName (*_ffe );if _fgd !=nil {return _fgd ;};if _cce ==nil {return nil ;};_dde ,_fgd :=_cce .ToImage ();if _fgd !=nil {return _fgd ;};_ef =&cachedImage {_dfe :_dde ,_dgb :_cce .ColorSpace };
_ggb ._bc [_gef ]=_ef ;};_acg :=_ef ._dfe ;_ag :=_ef ._dgb ;_gabg ,_bce :=_ag .ImageToRGB (*_acg );if _bce !=nil {return _bce ;};_f .Log .Debug ("@\u0044\u006f\u0020\u0043\u0054\u004d\u003a\u0020\u0025\u0073",_gfa .CTM .String ());_egb :=ImageMark {Image :&_gabg ,Width :_gfa .CTM .ScalingFactorX (),Height :_gfa .CTM .ScalingFactorY (),Angle :_gfa .CTM .Angle ()};
_egb .X ,_egb .Y =_gfa .CTM .Translation ();_ggb ._eeb =append (_ggb ._eeb ,_egb );_ggb ._aff ++;return nil ;};type imageExtractContext struct{_eeb []ImageMark ;_bea int ;_aff int ;_affb int ;_bc map[*_ce .PdfObjectStream ]*cachedImage ;_fa *ImageExtractOptions ;
};var _agfde =map[rulingKind ]string {_fecef :"\u006e\u006f\u006e\u0065",_deba :"\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_afb :"\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c"};func _bacb (_eece *wordBag ,_eead float64 ,_ceagg ,_bdbb rulingList )[]*wordBag {var _gccd []*wordBag ;
for _ ,_eff :=range _eece .depthIndexes (){_abae :=false ;for !_eece .empty (_eff ){_dbacd :=_eece .firstReadingIndex (_eff );_cgcd :=_eece .firstWord (_dbacd );_feec :=_bgaf (_cgcd ,_eead ,_ceagg ,_bdbb );_eece .removeWord (_cgcd ,_dbacd );if _acbe {_f .Log .Info ("\u0066\u0069\u0072\u0073\u0074\u0057\u006f\u0072\u0064\u0020\u005e\u005e^\u005e\u0020\u0025\u0073",_cgcd .String ());
};for _ggaa :=true ;_ggaa ;_ggaa =_abae {_abae =false ;_baae :=_ebbc *_feec ._afae ;_afab :=_debb *_feec ._afae ;_daed :=_adgf *_feec ._afae ;if _acbe {_f .Log .Info ("\u0070a\u0072a\u0057\u006f\u0072\u0064\u0073\u0020\u0064\u0065\u0070\u0074\u0068 \u0025\u002e\u0032\u0066 \u002d\u0020\u0025\u002e\u0032f\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061\u0044\u0065\u0070\u0074\u0068\u0047\u0061\u0070\u003d\u0025\u002e\u0032\u0066\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061R\u0065\u0061\u0064\u0069\u006e\u0067\u0047\u0061p\u003d\u0025\u002e\u0032\u0066",_feec .minDepth (),_feec .maxDepth (),_daed ,_afab );
};if _eece .scanBand ("\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c",_feec ,_dacb (_bbg ,0),_feec .minDepth ()-_daed ,_feec .maxDepth ()+_daed ,_efgc ,false ,false )> 0{_abae =true ;};if _eece .scanBand ("\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_feec ,_dacb (_bbg ,_afab ),_feec .minDepth (),_feec .maxDepth (),_gcgc ,false ,false )> 0{_abae =true ;
};if _abae {continue ;};_gfbg :=_eece .scanBand ("",_feec ,_dacb (_cccc ,_baae ),_feec .minDepth (),_feec .maxDepth (),_cdag ,true ,false );if _gfbg > 0{_bdcg :=(_feec .maxDepth ()-_feec .minDepth ())/_feec ._afae ;if (_gfbg > 1&&float64 (_gfbg )> 0.3*_bdcg )||_gfbg <=10{if _eece .scanBand ("\u006f\u0074\u0068e\u0072",_feec ,_dacb (_cccc ,_baae ),_feec .minDepth (),_feec .maxDepth (),_cdag ,false ,true )> 0{_abae =true ;
};};};};_gccd =append (_gccd ,_feec );};};return _gccd ;};func (_fce *textObject )moveTextSetLeading (_eae ,_bfe float64 ){_fce ._add ._fef =-_bfe ;_fce .moveLP (_eae ,_bfe );};func (_edga *wordBag )depthRange (_ebb ,_fbfb int )[]int {var _ebcg []int ;
for _ecce :=range _edga ._gagc {if _ebb <=_ecce &&_ecce <=_fbfb {_ebcg =append (_ebcg ,_ecce );};};if len (_ebcg )==0{return nil ;};_ee .Ints (_ebcg );return _ebcg ;};func _bgaf (_gce *textWord ,_ccd float64 ,_cfdd ,_bgc rulingList )*wordBag {_geddb :=_fefb (_gce ._cbcb );
_gbe :=[]*textWord {_gce };_bada :=wordBag {_gagc :map[int ][]*textWord {_geddb :_gbe },PdfRectangle :_gce .PdfRectangle ,_afae :_gce ._addg ,_degg :_ccd ,_efag :_cfdd ,_fbgf :_bgc };return &_bada ;};func _cgfe (_eced ,_egcab float64 )bool {return _eced /_ea .Max (_cfaf ,_egcab )< _dgec };
func (_gde *shapesState )newSubPath (){_gde .clearPath ();if _fac {_f .Log .Info ("\u006e\u0065\u0077\u0053\u0075\u0062\u0050\u0061\u0074h\u003a\u0020\u0025\u0073",_gde );};};const (_fecef rulingKind =iota ;_deba ;_afb ;);func (_dfag *subpath )removeDuplicates (){if len (_dfag ._cfd )==0{return ;
};_eaea :=[]_b .Point {_dfag ._cfd [0]};for _ ,_gcd :=range _dfag ._cfd [1:]{if !_eggcd (_gcd ,_eaea [len (_eaea )-1]){_eaea =append (_eaea ,_gcd );};};_dfag ._cfd =_eaea ;};type event struct{_aaggd float64 ;_afcc bool ;_dbbg int ;};func (_dafg *subpath )isQuadrilateral ()bool {if len (_dafg ._cfd )< 4||len (_dafg ._cfd )> 5{return false ;
};if len (_dafg ._cfd )==5{_cgcge :=_dafg ._cfd [0];_bgfg :=_dafg ._cfd [4];if _cgcge .X !=_bgfg .X ||_cgcge .Y !=_bgfg .Y {return false ;};};return true ;};func (_gcefe rulingList )findPrimSec (_acbef ,_dcafc float64 )*ruling {for _ ,_bbab :=range _gcefe {if _ggbgb (_bbab ._bfdfd -_acbef )&&_bbab ._dcae -_daa <=_dcafc &&_dcafc <=_bbab ._ddgfa +_daa {return _bbab ;
};};return nil ;};func (_fcda *textMark )bbox ()_cf .PdfRectangle {return _fcda .PdfRectangle };func (_fcca rulingList )isActualGrid ()(rulingList ,bool ){_dbab ,_gbce :=_fcca .augmentGrid ();if !(len (_dbab )>=_dead +1&&len (_gbce )>=_ebe +1){if _agfd {_f .Log .Info ("\u0069s\u0041\u0063t\u0075\u0061\u006c\u0047r\u0069\u0064\u003a \u004e\u006f\u0074\u0020\u0061\u006c\u0069\u0067\u006eed\u002e\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u003c\u0020\u0025d\u0020\u0078 \u0025\u0064",len (_dbab ),len (_gbce ),_dead +1,_ebe +1);
};return nil ,false ;};if _agfd {_f .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075a\u006c\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0073\u0020\u003a\u0020\u0025t\u0020\u0026\u0020\u0025\u0074\u0020\u2192 \u0025\u0074",_fcca ,len (_dbab )>=2,len (_gbce )>=2,len (_dbab )>=2&&len (_gbce )>=2);
for _baaa ,_ebcb :=range _fcca {_ac .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0076\u000a",_baaa ,_ebcb );};};if _gdfd {_caaa ,_edgfa :=_dbab [0],_dbab [len (_dbab )-1];_cgad ,_egeb :=_gbce [0],_gbce [len (_gbce )-1];if !(_ecfd (_caaa ._bfdfd -_cgad ._dcae )&&_ecfd (_edgfa ._bfdfd -_cgad ._ddgfa )&&_ecfd (_cgad ._bfdfd -_caaa ._ddgfa )&&_ecfd (_egeb ._bfdfd -_caaa ._dcae )){if _agfd {_f .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069d\u003a\u0020\u0020N\u006f\u0074 \u0061\u006c\u0069\u0067\u006e\u0065d\u002e\n\t\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0076\u0031\u003d\u0025\u0073\u000a\u0009\u0068\u0030\u003d\u0025\u0073\u000a\u0009\u0068\u0031\u003d\u0025\u0073",_caaa ,_edgfa ,_cgad ,_egeb );
};return nil ,false ;};}else {if !_dbab .aligned (){if _cgba {_f .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0076\u0065\u0072\u0074\u0073\u002e\u0020%\u0064",len (_dbab ));
};return nil ,false ;};if !_gbce .aligned (){if _agfd {_f .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0068\u006f\u0072\u007a\u0073\u002e\u0020%\u0064",len (_gbce ));
};return nil ,false ;};};_egea :=append (_dbab ,_gbce ...);return _egea ,true ;};func (_dec *shapesState )devicePoint (_adcf ,_deb float64 )_b .Point {_acf :=_dec ._aaee .Mult (_dec ._bdab );_adcf ,_deb =_acf .Transform (_adcf ,_deb );return _b .NewPoint (_adcf ,_deb );
};func (_affc gridTile )contains (_dcgg _cf .PdfRectangle )bool {if _affc .numBorders ()< 3{return false ;};if _affc ._dfdg &&_dcgg .Llx < _affc .Llx -_ebaf {return false ;};if _affc ._dgea &&_dcgg .Urx > _affc .Urx +_ebaf {return false ;};if _affc ._ddccb &&_dcgg .Lly < _affc .Lly -_ebaf {return false ;
};if _affc ._fdedg &&_dcgg .Ury > _affc .Ury +_ebaf {return false ;};return true ;};func _egcd (_gaff ,_cbge float64 )string {_gcagg :=!_ggbgb (_gaff -_cbge );if _gcagg {return "\u000a";};return "\u0020";};func _becge (_babd map[float64 ]map[float64 ]gridTile )[]float64 {_affbc :=make ([]float64 ,0,len (_babd ));
for _dbce :=range _babd {_affbc =append (_affbc ,_dbce );};_ee .Float64s (_affbc );_eebe :=len (_affbc );for _cdce :=0;_cdce < _eebe /2;_cdce ++{_affbc [_cdce ],_affbc [_eebe -1-_cdce ]=_affbc [_eebe -1-_cdce ],_affbc [_cdce ];};return _affbc ;};func (_abgd *wordBag )text ()string {_eeda :=_abgd .allWords ();
_afebc :=make ([]string ,len (_eeda ));for _fagc ,_ggdd :=range _eeda {_afebc [_fagc ]=_ggdd ._ffcba ;};return _ca .Join (_afebc ,"\u0020");};func (_ggdc paraList )toTextMarks ()[]TextMark {_aefbb :=0;var _bfce []TextMark ;for _fbgge ,_bafd :=range _ggdc {if _bafd ._acgb {continue ;
};_dafe :=_bafd .toTextMarks (&_aefbb );_bfce =append (_bfce ,_dafe ...);if _fbgge !=len (_ggdc )-1{if _bfbb (_bafd ,_ggdc [_fbgge +1]){_bfce =_edag (_bfce ,&_aefbb ,"\u0020");}else {_bfce =_edag (_bfce ,&_aefbb ,"\u000a");_bfce =_edag (_bfce ,&_aefbb ,"\u000a");
};};};_bfce =_edag (_bfce ,&_aefbb ,"\u000a");_bfce =_edag (_bfce ,&_aefbb ,"\u000a");return _bfce ;};func (_gdf *textObject )setTextRenderMode (_eaaag int ){if _gdf ==nil {return ;};_gdf ._add ._dddg =RenderMode (_eaaag );};func (_feae *wordBag )empty (_cegb int )bool {_ ,_abcd :=_feae ._gagc [_cegb ];
return !_abcd };

// String returns a human readable description of `path`.
func (_bbbb *subpath )String ()string {_feac :=_bbbb ._cfd ;_bfeg :=len (_feac );if _bfeg <=5{return _ac .Sprintf ("\u0025d\u003a\u0020\u0025\u0036\u002e\u0032f",_bfeg ,_feac );};return _ac .Sprintf ("\u0025d\u003a\u0020\u0025\u0036.\u0032\u0066\u0020\u0025\u0036.\u0032f\u0020.\u002e\u002e\u0020\u0025\u0036\u002e\u0032f",_bfeg ,_feac [0],_feac [1],_feac [_bfeg -1]);
};func _gefc (_geegc _cf .PdfRectangle )*ruling {return &ruling {_edaga :_deba ,_bfdfd :_geegc .Lly ,_dcae :_geegc .Llx ,_ddgfa :_geegc .Urx };};func (_aadc compositeCell )hasLines (_gfab []*textLine )bool {for _cfddg ,_debc :=range _gfab {_ggbcg :=_fcefd (_aadc .PdfRectangle ,_debc .PdfRectangle );
if _ffda {_ac .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u005e\u005e\u005e\u0069\u006e\u0074\u0065\u0072\u0073e\u0063t\u0073\u003d\u0025\u0074\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u000a",_ggbcg ,_cfddg ,len (_gfab ));_ac .Printf ("\u0020\u0020\u0020\u0020  \u005e\u005e\u005e\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025s\u000a",_aadc );
_ac .Printf ("\u0020 \u0020 \u0020\u0020\u0020\u006c\u0069\u006e\u0065\u003d\u0025\u0073\u000a",_debc );};if _ggbcg {return true ;};};return false ;};func (_bdff rulingList )merge ()*ruling {_efdd :=_bdff [0]._bfdfd ;_fdda :=_bdff [0]._dcae ;_geee :=_bdff [0]._ddgfa ;
for _ ,_fggd :=range _bdff [1:]{_efdd +=_fggd ._bfdfd ;if _fggd ._dcae < _fdda {_fdda =_fggd ._dcae ;};if _fggd ._ddgfa > _geee {_geee =_fggd ._ddgfa ;};};_bged :=&ruling {_edaga :_bdff [0]._edaga ,_deag :_bdff [0]._deag ,Color :_bdff [0].Color ,_bfdfd :_efdd /float64 (len (_bdff )),_dcae :_fdda ,_ddgfa :_geee };
if _cgba {_f .Log .Info ("\u006de\u0072g\u0065\u003a\u0020\u0025\u0032d\u0020\u0076e\u0063\u0073\u0020\u0025\u0073",len (_bdff ),_bged );for _dbag ,_ccded :=range _bdff {_ac .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dbag ,_ccded );};
};return _bged ;};func _gebd (_gcaee []pathSection )rulingList {_fgfe (_gcaee );if _agfd {_f .Log .Info ("\u006d\u0061k\u0065\u0053\u0074\u0072\u006f\u006b\u0065\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0064\u0020\u0073\u0074\u0072ok\u0065\u0073",len (_gcaee ));
};var _eggb rulingList ;for _ ,_bdagf :=range _gcaee {for _ ,_fcga :=range _bdagf ._ffcb {if len (_fcga ._cfd )< 2{continue ;};_cfdda :=_fcga ._cfd [0];for _ ,_fedda :=range _fcga ._cfd [1:]{if _dedb ,_dgacb :=_ggggd (_cfdda ,_fedda ,_bdagf .Color );_dgacb {_eggb =append (_eggb ,_dedb );
};_cfdda =_fedda ;};};};if _agfd {_f .Log .Info ("m\u0061\u006b\u0065\u0053tr\u006fk\u0065\u0052\u0075\u006c\u0069n\u0067\u0073\u003a\u0020\u0025\u0073",_eggb );};return _eggb ;};type textLine struct{_cf .PdfRectangle ;_dfbf float64 ;_badd []*textWord ;
_gfb float64 ;};func _aabb (_efaf string )string {_cbbab :=[]rune (_efaf );return string (_cbbab [:len (_cbbab )-1])};func (_feddg *textPara )toTextMarks (_cdbf *int )[]TextMark {if _feddg ._fdcc ==nil {return _feddg .toCellTextMarks (_cdbf );};var _fgbg []TextMark ;
for _agfb :=0;_agfb < _feddg ._fdcc ._agfc ;_agfb ++{for _aefcb :=0;_aefcb < _feddg ._fdcc ._fbca ;_aefcb ++{_dacc :=_feddg ._fdcc .get (_aefcb ,_agfb );if _dacc ==nil {_fgbg =_edag (_fgbg ,_cdbf ,"\u0009");}else {_agcfc :=_dacc .toCellTextMarks (_cdbf );
_fgbg =append (_fgbg ,_agcfc ...);};_fgbg =_edag (_fgbg ,_cdbf ,"\u0020");};if _agfb < _feddg ._fdcc ._agfc -1{_fgbg =_edag (_fgbg ,_cdbf ,"\u000a");};};return _fgbg ;};

// NewFromContents creates a new extractor from contents and page resources.
func NewFromContents (contents string ,resources *_cf .PdfPageResources )(*Extractor ,error ){const _ed ="\u0065x\u0074\u0072\u0061\u0063t\u006f\u0072\u002e\u004e\u0065w\u0046r\u006fm\u0043\u006f\u006e\u0074\u0065\u006e\u0074s";_fd :=&Extractor {_dc :contents ,_eg :resources ,_gg :map[string ]fontEntry {},_fb :map[string ]textResult {}};
_gb .TrackUse (_ed );return _fd ,nil ;};func (_efeb paraList )readBefore (_gbcg []int ,_dbf ,_effb int )bool {_gdbc ,_acbg :=_efeb [_dbf ],_efeb [_effb ];if _ddgfc (_gdbc ,_acbg )&&_gdbc .Lly > _acbg .Lly {return true ;};if !(_gdbc ._gafc .Urx < _acbg ._gafc .Llx ){return false ;
};_dgdd ,_bdea :=_gdbc .Lly ,_acbg .Lly ;if _dgdd > _bdea {_bdea ,_dgdd =_dgdd ,_bdea ;};_ddb :=_ea .Max (_gdbc ._gafc .Llx ,_acbg ._gafc .Llx );_fcff :=_ea .Min (_gdbc ._gafc .Urx ,_acbg ._gafc .Urx );_fdf :=_efeb .llyRange (_gbcg ,_dgdd ,_bdea );for _ ,_bdaag :=range _fdf {if _bdaag ==_dbf ||_bdaag ==_effb {continue ;
};_dgfc :=_efeb [_bdaag ];if _dgfc ._gafc .Llx <=_fcff &&_ddb <=_dgfc ._gafc .Urx {return false ;};};return true ;};

// String returns a description of `l`.
func (_fcd *textLine )String ()string {return _ac .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_fcd ._dfbf ,_fcd .PdfRectangle ,_fcd ._gfb ,_fcd .text ());
};func _ggggd (_baeb ,_bcdff _b .Point ,_gdefg _cc .Color )(*ruling ,bool ){_ccea :=lineRuling {_gadc :_baeb ,_aadfb :_bcdff ,_cdbd :_gbebd (_baeb ,_bcdff ),Color :_gdefg };if _ccea ._cdbd ==_fecef {return nil ,false ;};return _ccea .asRuling ();};func (_gcbd *wordBag )minDepth ()float64 {return _gcbd ._degg -(_gcbd .Ury -_gcbd ._afae )};
func (_adbe *textObject )renderText (_afe []byte )error {if _adbe ._dbc {_f .Log .Debug ("\u0072\u0065\u006e\u0064\u0065r\u0054\u0065\u0078\u0074\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069\u0064 \u0066\u006f\u006e\u0074\u002e\u0020\u004e\u006f\u0074\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u002e");
return nil ;};_abab :=_adbe .getCurrentFont ();_cbg :=_abab .BytesToCharcodes (_afe );_aae ,_ece ,_eca :=_abab .CharcodesToStrings (_cbg );if _eca > 0{_f .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_ece ,_eca );
};_adbe ._add ._bcaf +=_ece ;_adbe ._add ._dge +=_eca ;_dbcc :=_adbe ._add ;_dbda :=_dbcc ._eed ;_beg :=_dbcc ._fege /100.0;_dac ,_cda :=_abab .GetRuneMetrics (' ');if !_cda {_dac ,_cda =_abab .GetCharMetrics (32);};if !_cda {_dac ,_ =_cf .DefaultFont ().GetRuneMetrics (' ');
};_afd :=_dac .Wx *_baeg ;_f .Log .Trace ("\u0073p\u0061\u0063e\u0057\u0069\u0064t\u0068\u003d\u0025\u002e\u0032\u0066\u0020t\u0065\u0078\u0074\u003d\u0025\u0071 \u0066\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0066\u006f\u006et\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",_afd ,_aae ,_abab ,_dbda );
_dfa :=_b .NewMatrix (_dbda *_beg ,0,0,_dbda ,0,_dbcc ._gabf );if _aabgd {_f .Log .Info ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0074\u0065\u0078t\u0073\u003d\u0025\u0071",len (_cbg ),_cbg ,_aae );
};_f .Log .Trace ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0072\u0075\u006ee\u0073\u003d\u0025\u0071",len (_cbg ),_cbg ,len (_aae ));_cdd :=_adbe .getFillColor ();
_aadb :=_adbe .getStrokeColor ();for _ebgd ,_fgad :=range _aae {_cdca :=[]rune (_fgad );if len (_cdca )==1&&_cdca [0]=='\x00'{continue ;};_cfg :=_cbg [_ebgd ];_deeb :=_adbe ._faea .CTM .Mult (_adbe ._dab ).Mult (_dfa );_bbcf :=0.0;if len (_cdca )==1&&_cdca [0]==32{_bbcf =_dbcc ._cbcf ;
};_abca ,_ffeda :=_abab .GetCharMetrics (_cfg );if !_ffeda {_f .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u004e\u006f \u006d\u0065\u0074r\u0069\u0063\u0020\u0066\u006f\u0072\u0020\u0063\u006fde\u003d\u0025\u0064 \u0072\u003d0\u0078\u0025\u0030\u0034\u0078\u003d%\u002b\u0071 \u0025\u0073",_cfg ,_cdca ,_cdca ,_abab );
return _ac .Errorf ("\u006e\u006f\u0020\u0063\u0068\u0061\u0072\u0020\u006d\u0065\u0074\u0072\u0069\u0063\u0073:\u0020f\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0063\u006f\u0064\u0065\u003d\u0025\u0064",_abab .String (),_cfg );};_deec :=_b .Point {X :_abca .Wx *_baeg ,Y :_abca .Wy *_baeg };
_gcg :=_b .Point {X :(_deec .X *_dbda +_bbcf )*_beg };_bfea :=_b .Point {X :(_deec .X *_dbda +_dbcc ._dgac +_bbcf )*_beg };if _aabgd {_f .Log .Info ("\u0074\u0066\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0063\u003d\u0025\u002e\u0032f\u0020t\u0077\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_dbda ,_dbcc ._dgac ,_dbcc ._cbcf ,_beg );
_f .Log .Info ("\u0064x\u002c\u0064\u0079\u003d%\u002e\u0033\u0066\u0020\u00740\u003d%\u002e3\u0066\u0020\u0074\u003d\u0025\u002e\u0033f",_deec ,_gcg ,_bfea );};_ffgd :=_cde (_gcg );_ffc :=_cde (_bfea );_fgdc :=_adbe ._faea .CTM .Mult (_adbe ._dab ).Mult (_ffgd );
if _adg {_f .Log .Info ("e\u006e\u0064\u003a\u000a\tC\u0054M\u003d\u0025\u0073\u000a\u0009 \u0074\u006d\u003d\u0025\u0073\u000a"+"\u0009\u0020t\u0064\u003d\u0025s\u0020\u0078\u006c\u0061\u0074\u003d\u0025\u0073\u000a"+"\u0009t\u0064\u0030\u003d\u0025s\u000a\u0009\u0020\u0020\u2192 \u0025s\u0020x\u006c\u0061\u0074\u003d\u0025\u0073",_adbe ._faea .CTM ,_adbe ._dab ,_ffc ,_aabc (_adbe ._faea .CTM .Mult (_adbe ._dab ).Mult (_ffc )),_ffgd ,_fgdc ,_aabc (_fgdc ));
};_fab ,_aaf :=_adbe .newTextMark (_af .ExpandLigatures (_cdca ),_deeb ,_aabc (_fgdc ),_ea .Abs (_afd *_deeb .ScalingFactorX ()),_abab ,_adbe ._add ._dgac ,_cdd ,_aadb );if !_aaf {_f .Log .Debug ("\u0054\u0065\u0078\u0074\u0020\u006d\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069d\u0065 \u0070\u0061\u0067\u0065\u002e\u0020\u0053\u006b\u0069\u0070\u0070\u0069\u006e\u0067");
continue ;};if _abab ==nil {_f .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u002e");}else if _abab .Encoder ()==nil {_f .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020N\u006f\u0020\u0065\u006e\u0063\u006f\u0064\u0069\u006eg\u002e\u0020\u0066o\u006et\u003d\u0025\u0073",_abab );
}else {if _ceg ,_gbda :=_abab .Encoder ().CharcodeToRune (_cfg );_gbda {_fab ._gabgg =string (_ceg );};};_f .Log .Trace ("i\u003d\u0025\u0064\u0020\u0063\u006fd\u0065\u003d\u0025\u0064\u0020\u006d\u0061\u0072\u006b=\u0025\u0073\u0020t\u0072m\u003d\u0025\u0073",_ebgd ,_cfg ,_fab ,_deeb );
_adbe ._abd =append (_adbe ._abd ,&_fab );_adbe ._dab .Concat (_ffc );};return nil ;};func (_dbdc *textObject )getFont (_adff string )(*_cf .PdfFont ,error ){if _dbdc ._efb ._gg !=nil {_dbdc ._efb ._dd ++;_gfdc ,_egd :=_dbdc ._efb ._gg [_adff ];if _egd {_gfdc ._dbea =_dbdc ._efb ._dd ;
return _gfdc ._dbe ,nil ;};};_efab ,_bece :=_dbdc .getFontDirect (_adff );if _bece !=nil {return nil ,_bece ;};if _dbdc ._efb ._gg !=nil {_fddb :=fontEntry {_efab ,_dbdc ._efb ._dd };if len (_dbdc ._efb ._gg )>=_bedd {var _dgdc []string ;for _def :=range _dbdc ._efb ._gg {_dgdc =append (_dgdc ,_def );
};_ee .Slice (_dgdc ,func (_bcfe ,_bcde int )bool {return _dbdc ._efb ._gg [_dgdc [_bcfe ]]._dbea < _dbdc ._efb ._gg [_dgdc [_bcde ]]._dbea ;});delete (_dbdc ._efb ._gg ,_dgdc [0]);};_dbdc ._efb ._gg [_adff ]=_fddb ;};return _efab ,nil ;};

// String returns a string describing `pt`.
func (_gad PageText )String ()string {_bbeg :=_ac .Sprintf ("P\u0061\u0067\u0065\u0054ex\u0074:\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073",len (_gad ._cgf ));_gfd :=[]string {"\u002d"+_bbeg };for _ ,_efdg :=range _gad ._cgf {_gfd =append (_gfd ,_efdg .String ());
};_gfd =append (_gfd ,"\u002b"+_bbeg );return _ca .Join (_gfd ,"\u000a");};func (_dfeb *textLine )markWordBoundaries (){_aecca :=_bfgb *_dfeb ._gfb ;for _gaef ,_dabc :=range _dfeb ._badd [1:]{if _agffc (_dabc ,_dfeb ._badd [_gaef ])>=_aecca {_dabc ._cged =true ;
};};};func (_bfeb *subpath )last ()_b .Point {return _bfeb ._cfd [len (_bfeb ._cfd )-1]};func (_dega *wordBag )removeWord (_egbf *textWord ,_gbfb int ){_dbca :=_dega ._gagc [_gbfb ];_dbca =_bcge (_dbca ,_egbf );if len (_dbca )==0{delete (_dega ._gagc ,_gbfb );
}else {_dega ._gagc [_gbfb ]=_dbca ;};};func (_afecb *textWord )bbox ()_cf .PdfRectangle {return _afecb .PdfRectangle };func _addf (_dfc []*textMark ,_ebcd _cf .PdfRectangle ,_accdg rulingList ,_bffef []gridTiling )paraList {_f .Log .Trace ("\u006d\u0061\u006b\u0065\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065\u003a \u0025\u0064\u0020\u0065\u006c\u0065m\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065=\u0025\u002e\u0032\u0066",len (_dfc ),_ebcd );
if len (_dfc )==0{return nil ;};_gge :=_cdge (_dfc ,_ebcd );if len (_gge )==0{return nil ;};_accdg .log ("\u006d\u0061\u006be\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065");_gcde ,_ggbc :=_accdg .vertsHorzs ();_adfa :=_aeeg (_gge ,_ebcd .Ury ,_gcde ,_ggbc );
_cggb :=_bacb (_adfa ,_ebcd .Ury ,_gcde ,_ggbc );_cggb =_cdgae (_cggb );_cdbgf :=make (paraList ,0,len (_cggb ));for _ ,_cgeb :=range _cggb {_adffa :=_cgeb .arrangeText ();if _adffa !=nil {_cdbgf =append (_cdbgf ,_adffa );};};if len (_cdbgf )>=_cacd {_cdbgf =_cdbgf .extractTables (_bffef );
};_cdbgf .sortReadingOrder ();_cdbgf .log ("\u0073\u006f\u0072te\u0064\u0020\u0069\u006e\u0020\u0072\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u006f\u0072\u0064\u0065\u0072");return _cdbgf ;};

// ExtractPageImages returns the image contents of the page extractor, including data
// and position, size information for each image.
// A set of options to control page image extraction can be passed in. The options
// parameter can be nil for the default options. By default, inline stencil masks
// are not extracted.
func (_bg *Extractor )ExtractPageImages (options *ImageExtractOptions )(*PageImages ,error ){_be :=&imageExtractContext {_fa :options };_ggg :=_be .extractContentStreamImages (_bg ._dc ,_bg ._eg );if _ggg !=nil {return nil ,_ggg ;};return &PageImages {Images :_be ._eeb },nil ;
};func _bcbc (_feaf float64 ,_cbgb int )int {if _cbgb ==0{_cbgb =1;};_eadc :=float64 (_cbgb );return int (_ea .Round (_feaf /_eadc )*_eadc );};

// String returns a description of `p`.
func (_dbfea *textPara )String ()string {if _dbfea ._acgb {return _ac .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u005b\u0045\u004d\u0050\u0054\u0059\u005d",_dbfea .PdfRectangle );};_afgc :="";if _dbfea ._fdcc !=nil {_afgc =_ac .Sprintf ("\u005b\u0025\u0064\u0078\u0025\u0064\u005d\u0020",_dbfea ._fdcc ._fbca ,_dbfea ._fdcc ._agfc );
};return _ac .Sprintf ("\u0025\u0036\u002e\u0032f \u0025\u0073\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u0020\u0025\u0071",_dbfea .PdfRectangle ,_afgc ,len (_dbfea ._gdff ),_ecafe (_dbfea .text (),50));};func (_abgf gridTiling )log (_cccb string ){if !_gcac {return ;
};_f .Log .Info ("\u0074i\u006ci\u006e\u0067\u003a\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0071",len (_abgf ._efgea ),len (_abgf ._aebe ),_cccb );_ac .Printf ("\u0020\u0020\u0020l\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a",_abgf ._efgea );
_ac .Printf ("\u0020\u0020\u0020l\u006c\u0079\u003d\u0025\u002e\u0032\u0066\u000a",_abgf ._aebe );for _bbfef ,_egegg :=range _abgf ._aebe {_eaae ,_beac :=_abgf ._geac [_egegg ];if !_beac {continue ;};_ac .Printf ("%\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_bbfef ,_egegg );
for _cdedd ,_cabca :=range _abgf ._efgea {_gcbf ,_bgcc :=_eaae [_cabca ];if !_bgcc {continue ;};_ac .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_cdedd ,_gcbf .String ());};};};func (_cbfb paraList )reorder (_bebb []int ){_cfgc :=make (paraList ,len (_cbfb ));
for _aaad ,_cbaa :=range _bebb {_cfgc [_aaad ]=_cbfb [_cbaa ];};copy (_cbfb ,_cfgc );};func (_dabceb rulingList )primMinMax ()(float64 ,float64 ){_agfg ,_ecgg :=_dabceb [0]._bfdfd ,_dabceb [0]._bfdfd ;for _ ,_aeec :=range _dabceb [1:]{if _aeec ._bfdfd < _agfg {_agfg =_aeec ._bfdfd ;
}else if _aeec ._bfdfd > _ecgg {_ecgg =_aeec ._bfdfd ;};};return _agfg ,_ecgg ;};func (_caabb intSet )has (_dabf int )bool {_ ,_cecf :=_caabb [_dabf ];return _cecf };func (_bgca *textTable )putComposite (_aeaaf ,_bgad int ,_egcba paraList ,_afbe _cf .PdfRectangle ){if len (_egcba )==0{_f .Log .Error ("\u0074\u0065xt\u0054\u0061\u0062l\u0065\u0029\u0020\u0070utC\u006fmp\u006f\u0073\u0069\u0074\u0065\u003a\u0020em\u0070\u0074\u0079\u0020\u0070\u0061\u0072a\u0073");
return ;};_egbbd :=compositeCell {_afbe ,_egcba };if _ffda {_ac .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0075\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u003c\u002d\u0025\u0073\u000a",_aeaaf ,_bgad ,_egbbd .String ());
};_egbbd .updateBBox ();_bgca ._ccad [_dace (_aeaaf ,_bgad )]=_egbbd ;};func (_aega *wordBag )blocked (_caac *textWord )bool {if _caac .Urx < _aega .Llx {_bba :=_gfac (_caac .PdfRectangle );_dcaf :=_bgbd (_aega .PdfRectangle );if _aega ._efag .blocks (_bba ,_dcaf ){if _fbee {_f .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0078\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_caac ,_aega );
};return true ;};}else if _aega .Urx < _caac .Llx {_ccfe :=_gfac (_aega .PdfRectangle );_bagb :=_bgbd (_caac .PdfRectangle );if _aega ._efag .blocks (_ccfe ,_bagb ){if _fbee {_f .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0078\u2192\u0020:\u0020\u0025\u0073\u0020%s",_caac ,_aega );
};return true ;};};if _caac .Ury < _aega .Lly {_geb :=_ffgc (_caac .PdfRectangle );_faff :=_gefc (_aega .PdfRectangle );if _aega ._fbgf .blocks (_geb ,_faff ){if _fbee {_f .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0079\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_caac ,_aega );
};return true ;};}else if _aega .Ury < _caac .Lly {_ede :=_ffgc (_aega .PdfRectangle );_abg :=_gefc (_caac .PdfRectangle );if _aega ._fbgf .blocks (_ede ,_abg ){if _fbee {_f .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0079\u2192\u0020:\u0020\u0025\u0073\u0020%s",_caac ,_aega );
};return true ;};};return false ;};func (_geea gridTile )numBorders ()int {_bcfb :=0;if _geea ._dfdg {_bcfb ++;};if _geea ._dgea {_bcfb ++;};if _geea ._ddccb {_bcfb ++;};if _geea ._fdedg {_bcfb ++;};return _bcfb ;};

// TextMark represents extracted text on a page with information regarding both textual content,
// formatting (font and size) and positioning.
// It is the smallest unit of text on a PDF page, typically a single character.
//
// getBBox() in test_text.go shows how to compute bounding boxes of substrings of extracted text.
// The following code extracts the text on PDF page `page` into `text` then finds the bounding box
// `bbox` of substring `term` in `text`.
//
//     ex, _ := New(page)
//     // handle errors
//     pageText, _, _, err := ex.ExtractPageText()
//     // handle errors
//     text := pageText.Text()
//     textMarks := pageText.Marks()
//
//     	start := strings.Index(text, term)
//      end := start + len(term)
//      spanMarks, err := textMarks.RangeOffset(start, end)
//      // handle errors
//      bbox, ok := spanMarks.BBox()
//      // handle errors
type TextMark struct{

// Text is the extracted text.
Text string ;

// Original is the text in the PDF. It has not been decoded like `Text`.
Original string ;

// BBox is the bounding box of the text.
BBox _cf .PdfRectangle ;

// Font is the font the text was drawn with.
Font *_cf .PdfFont ;

// FontSize is the font size the text was drawn with.
FontSize float64 ;

// Offset is the offset of the start of TextMark.Text in the extracted text. If you do this
//   text, textMarks := pageText.Text(), pageText.Marks()
//   marks := textMarks.Elements()
// then marks[i].Offset is the offset of marks[i].Text in text.
Offset int ;

// Meta is set true for spaces and line breaks that we insert in the extracted text. We insert
// spaces (line breaks) when we see characters that are over a threshold horizontal (vertical)
//  distance  apart. See wordJoiner (lineJoiner) in PageText.computeViews().
Meta bool ;

// FillColor is the fill color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
FillColor _cc .Color ;

// StrokeColor is the stroke color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
StrokeColor _cc .Color ;

// Orientation is the text orientation
Orientation int ;};func (_beaa paraList )addNeighbours (){_gebbgd :=func (_eafa []int ,_cebd *textPara )([]*textPara ,[]*textPara ){_ebbac :=make ([]*textPara ,0,len (_eafa )-1);_gefd :=make ([]*textPara ,0,len (_eafa )-1);for _ ,_cfde :=range _eafa {_cagcg :=_beaa [_cfde ];
if _cagcg .Urx <=_cebd .Llx {_ebbac =append (_ebbac ,_cagcg );}else if _cagcg .Llx >=_cebd .Urx {_gefd =append (_gefd ,_cagcg );};};return _ebbac ,_gefd ;};_aggc :=func (_gdfca []int ,_bgfe *textPara )([]*textPara ,[]*textPara ){_dbeab :=make ([]*textPara ,0,len (_gdfca )-1);
_bggbd :=make ([]*textPara ,0,len (_gdfca )-1);for _ ,_caadf :=range _gdfca {_dgeae :=_beaa [_caadf ];if _dgeae .Ury <=_bgfe .Lly {_bggbd =append (_bggbd ,_dgeae );}else if _dgeae .Lly >=_bgfe .Ury {_dbeab =append (_dbeab ,_dgeae );};};return _dbeab ,_bggbd ;
};_abgc :=_beaa .yNeighbours (_badb );for _ ,_edeb :=range _beaa {_fdde :=_abgc [_edeb ];if len (_fdde )==0{continue ;};_ecbac ,_gcacg :=_gebbgd (_fdde ,_edeb );if len (_ecbac )==0&&len (_gcacg )==0{continue ;};if len (_ecbac )> 0{_fbgb :=_ecbac [0];for _ ,_ffgcf :=range _ecbac [1:]{if _ffgcf .Urx >=_fbgb .Urx {_fbgb =_ffgcf ;
};};for _ ,_gadbfc :=range _ecbac {if _gadbfc !=_fbgb &&_gadbfc .Urx > _fbgb .Llx {_fbgb =nil ;break ;};};if _fbgb !=nil &&_aged (_edeb .PdfRectangle ,_fbgb .PdfRectangle ){_edeb ._dggb =_fbgb ;};};if len (_gcacg )> 0{_eggcdd :=_gcacg [0];for _ ,_cbdgg :=range _gcacg [1:]{if _cbdgg .Llx <=_eggcdd .Llx {_eggcdd =_cbdgg ;
};};for _ ,_fgda :=range _gcacg {if _fgda !=_eggcdd &&_fgda .Llx < _eggcdd .Urx {_eggcdd =nil ;break ;};};if _eggcdd !=nil &&_aged (_edeb .PdfRectangle ,_eggcdd .PdfRectangle ){_edeb ._fgfa =_eggcdd ;};};};_abgc =_beaa .xNeighbours (_bfba );for _ ,_afdb :=range _beaa {_bebd :=_abgc [_afdb ];
if len (_bebd )==0{continue ;};_aafc ,_dggbe :=_aggc (_bebd ,_afdb );if len (_aafc )==0&&len (_dggbe )==0{continue ;};if len (_dggbe )> 0{_gbdfa :=_dggbe [0];for _ ,_dfgga :=range _dggbe [1:]{if _dfgga .Ury >=_gbdfa .Ury {_gbdfa =_dfgga ;};};for _ ,_edgc :=range _dggbe {if _edgc !=_gbdfa &&_edgc .Ury > _gbdfa .Lly {_gbdfa =nil ;
break ;};};if _gbdfa !=nil &&_bbdd (_afdb .PdfRectangle ,_gbdfa .PdfRectangle ){_afdb ._cage =_gbdfa ;};};if len (_aafc )> 0{_bccbc :=_aafc [0];for _ ,_cgdg :=range _aafc [1:]{if _cgdg .Lly <=_bccbc .Lly {_bccbc =_cgdg ;};};for _ ,_gfcc :=range _aafc {if _gfcc !=_bccbc &&_gfcc .Lly < _bccbc .Ury {_bccbc =nil ;
break ;};};if _bccbc !=nil &&_bbdd (_afdb .PdfRectangle ,_bccbc .PdfRectangle ){_afdb ._ddece =_bccbc ;};};};for _ ,_cbdf :=range _beaa {if _cbdf ._dggb !=nil &&_cbdf ._dggb ._fgfa !=_cbdf {_cbdf ._dggb =nil ;};if _cbdf ._ddece !=nil &&_cbdf ._ddece ._cage !=_cbdf {_cbdf ._ddece =nil ;
};if _cbdf ._fgfa !=nil &&_cbdf ._fgfa ._dggb !=_cbdf {_cbdf ._fgfa =nil ;};if _cbdf ._cage !=nil &&_cbdf ._cage ._ddece !=_cbdf {_cbdf ._cage =nil ;};};};

// String returns a description of `v`.
func (_fgbgg *ruling )String ()string {if _fgbgg ._edaga ==_fecef {return "\u004e\u004f\u0054\u0020\u0052\u0055\u004c\u0049\u004e\u0047";};_dgcf ,_deac :="\u0078","\u0079";if _fgbgg ._edaga ==_deba {_dgcf ,_deac ="\u0079","\u0078";};_aaeg :="";if _fgbgg ._dabce !=0.0{_aaeg =_ac .Sprintf (" \u0077\u0069\u0064\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_fgbgg ._dabce );
};return _ac .Sprintf ("\u0025\u00310\u0073\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0020\u0025\u0076\u0025\u0073",_fgbgg ._edaga ,_dgcf ,_fgbgg ._bfdfd ,_deac ,_fgbgg ._dcae ,_fgbgg ._ddgfa ,_fgbgg ._ddgfa -_fgbgg ._dcae ,_fgbgg ._deag ,_fgbgg .Color ,_aaeg );
};func (_gcgb *wordBag )scanBand (_begd string ,_adfb *wordBag ,_aga func (_fcg *wordBag ,_bege *textWord )bool ,_egee ,_baf ,_agdc float64 ,_dagg ,_fefe bool )int {_gbdb :=_adfb ._afae ;var _ggfd map[int ]map[*textWord ]struct{};if !_dagg {_ggfd =_gcgb .makeRemovals ();
};_adca :=_gcae *_gbdb ;_egbe :=0;for _ ,_cacc :=range _gcgb .depthBand (_egee -_adca ,_baf +_adca ){if len (_gcgb ._gagc [_cacc ])==0{continue ;};for _ ,_fgg :=range _gcgb ._gagc [_cacc ]{if !(_egee -_adca <=_fgg ._cbcb &&_fgg ._cbcb <=_baf +_adca ){continue ;
};if !_aga (_adfb ,_fgg ){continue ;};_dded :=2.0*_ea .Abs (_fgg ._addg -_adfb ._afae )/(_fgg ._addg +_adfb ._afae );_fdce :=_ea .Max (_fgg ._addg /_adfb ._afae ,_adfb ._afae /_fgg ._addg );_affea :=_ea .Min (_dded ,_fdce );if _agdc > 0&&_affea > _agdc {continue ;
};if _adfb .blocked (_fgg ){continue ;};if !_dagg {_adfb .pullWord (_fgg ,_cacc ,_ggfd );};_egbe ++;if !_fefe {if _fgg ._cbcb < _egee {_egee =_fgg ._cbcb ;};if _fgg ._cbcb > _baf {_baf =_fgg ._cbcb ;};};if _dagg {break ;};};};if !_dagg {_gcgb .applyRemovals (_ggfd );
};return _egbe ;};func (_adf *imageExtractContext )extractFormImages (_feg *_ce .PdfObjectName ,_affe _cea .GraphicsState ,_bff *_cf .PdfPageResources )error {_eebd ,_edd :=_bff .GetXObjectFormByName (*_feg );if _edd !=nil {return _edd ;};if _eebd ==nil {return nil ;
};_dfef ,_edd :=_eebd .GetContentStream ();if _edd !=nil {return _edd ;};_ba :=_eebd .Resources ;if _ba ==nil {_ba =_bff ;};_edd =_adf .extractContentStreamImages (string (_dfef ),_ba );if _edd !=nil {return _edd ;};_adf ._affb ++;return nil ;};const (RenderModeStroke RenderMode =1<<iota ;
RenderModeFill ;RenderModeClip ;);func (_gbg *imageExtractContext )processOperand (_fe *_cea .ContentStreamOperation ,_ga _cea .GraphicsState ,_bb *_cf .PdfPageResources )error {if _fe .Operand =="\u0042\u0049"&&len (_fe .Params )==1{_fg ,_caf :=_fe .Params [0].(*_cea .ContentStreamInlineImage );
if !_caf {return nil ;};if _aag ,_ced :=_ce .GetBoolVal (_fg .ImageMask );_ced {if _aag &&!_gbg ._fa .IncludeInlineStencilMasks {return nil ;};};return _gbg .extractInlineImage (_fg ,_ga ,_bb );}else if _fe .Operand =="\u0044\u006f"&&len (_fe .Params )==1{_edc ,_ab :=_ce .GetName (_fe .Params [0]);
if !_ab {_f .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");return _ad ;};_ ,_gc :=_bb .GetXObjectByName (*_edc );switch _gc {case _cf .XObjectTypeImage :return _gbg .extractXObjectImage (_edc ,_ga ,_bb );case _cf .XObjectTypeForm :return _gbg .extractFormImages (_edc ,_ga ,_bb );
};};return nil ;};

// RangeOffset returns the TextMarks in `ma` that overlap text[start:end] in the extracted text.
// These are tm: `start` <= tm.Offset + len(tm.Text) && tm.Offset < `end` where
// `start` and `end` are offsets in the extracted text.
// NOTE: TextMarks can contain multiple characters. e.g. "ffi" for the ï¬ƒ ligature so the first and
// last elements of the returned TextMarkArray may only partially overlap text[start:end].
func (_cee *TextMarkArray )RangeOffset (start ,end int )(*TextMarkArray ,error ){if _cee ==nil {return nil ,_e .New ("\u006da\u003d\u003d\u006e\u0069\u006c");};if end < start {return nil ,_ac .Errorf ("\u0065\u006e\u0064\u0020\u003c\u0020\u0073\u0074\u0061\u0072\u0074\u002e\u0020\u0052\u0061n\u0067\u0065\u004f\u0066\u0066\u0073\u0065\u0074\u0020\u006e\u006f\u0074\u0020d\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020\u0073\u0074\u0061\u0072t=\u0025\u0064\u0020\u0065\u006e\u0064\u003d\u0025\u0064\u0020",start ,end );
};_ebc :=len (_cee ._eaf );if _ebc ==0{return _cee ,nil ;};if start < _cee ._eaf [0].Offset {start =_cee ._eaf [0].Offset ;};if end > _cee ._eaf [_ebc -1].Offset +1{end =_cee ._eaf [_ebc -1].Offset +1;};_geeg :=_ee .Search (_ebc ,func (_bfgf int )bool {return _cee ._eaf [_bfgf ].Offset +len (_cee ._eaf [_bfgf ].Text )-1>=start });
if !(0<=_geeg &&_geeg < _ebc ){_ccab :=_ac .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020\u0072\u0061\u006e\u0067\u0065\u002e\u0020\u0073\u0074\u0061\u0072\u0074\u003d%\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009 \u006c\u0061\u0073\u0074\u003d%\u0076",start ,_geeg ,_ebc ,_cee ._eaf [0],_cee ._eaf [_ebc -1]);
return nil ,_ccab ;};_deea :=_ee .Search (_ebc ,func (_fca int )bool {return _cee ._eaf [_fca ].Offset > end -1});if !(0<=_deea &&_deea < _ebc ){_dfdc :=_ac .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020r\u0061\u006e\u0067e\u002e\u0020\u0065n\u0064\u003d%\u0064\u0020\u0069\u0045\u006e\u0064=\u0025d \u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d\u0025\u0076",end ,_deea ,_ebc ,_cee ._eaf [0],_cee ._eaf [_ebc -1]);
return nil ,_dfdc ;};if _deea <=_geeg {return nil ,_ac .Errorf ("\u0069\u0045\u006e\u0064\u0020\u003c=\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003a\u0020\u0073\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u0065\u006ed\u003d\u0025\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020i\u0045n\u0064\u003d\u0025\u0064",start ,end ,_geeg ,_deea );
};return &TextMarkArray {_eaf :_cee ._eaf [_geeg :_deea ]},nil ;};func (_agca *textPara )fontsize ()float64 {return _agca ._gdff [0]._gfb };

// String returns a string describing `tm`.
func (_bdaa TextMark )String ()string {_beea :=_bdaa .BBox ;var _cefc string ;if _bdaa .Font !=nil {_cefc =_bdaa .Font .String ();if len (_cefc )> 50{_cefc =_cefc [:50]+"\u002e\u002e\u002e";};};var _cdab string ;if _bdaa .Meta {_cdab ="\u0020\u002a\u004d\u002a";
};return _ac .Sprintf ("\u007b\u0054\u0065\u0078t\u004d\u0061\u0072\u006b\u003a\u0020\u0025\u0064\u0020%\u0071\u003d\u0025\u0030\u0032\u0078\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e2\u0066\u0029\u0020\u0028\u00256\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0025\u0073\u007d",_bdaa .Offset ,_bdaa .Text ,[]rune (_bdaa .Text ),_beea .Llx ,_beea .Lly ,_beea .Urx ,_beea .Ury ,_cefc ,_cdab );
};type textMark struct{_cf .PdfRectangle ;_aeag int ;_babe string ;_gabgg string ;_fffea *_cf .PdfFont ;_eggg float64 ;_egdb float64 ;_fffb _b .Matrix ;_gea _b .Point ;_face _cf .PdfRectangle ;_cgac _cc .Color ;_dagf _cc .Color ;};func (_bafc rulingList )connections (_feed map[int ]intSet ,_dccc int )intSet {_gfbb :=make (intSet );
_egfg :=make (intSet );var _decd func (int );_decd =func (_dbaec int ){if !_egfg .has (_dbaec ){_egfg .add (_dbaec );for _aaegf :=range _bafc {if _feed [_aaegf ].has (_dbaec ){_gfbb .add (_aaegf );};};for _gcaab :=range _bafc {if _gfbb .has (_gcaab ){_decd (_gcaab );
};};};};_decd (_dccc );return _gfbb ;};func (_gafcf *ruling )gridIntersecting (_abcc *ruling )bool {return _bebe (_gafcf ._dcae ,_abcc ._dcae )&&_bebe (_gafcf ._ddgfa ,_abcc ._ddgfa );};func _fea (_accd *Extractor ,_cgbb *_cf .PdfPageResources ,_agff _cea .GraphicsState ,_cefa *textState ,_dbac *stateStack )*textObject {return &textObject {_efb :_accd ,_gcag :_cgbb ,_faea :_agff ,_gfad :_dbac ,_add :_cefa ,_dab :_b .IdentityMatrix (),_aaabb :_b .IdentityMatrix ()};
};

// String returns a description of `k`.
func (_ceca rulingKind )String ()string {_gabfd ,_gadb :=_agfde [_ceca ];if !_gadb {return _ac .Sprintf ("\u004e\u006ft\u0020\u0061\u0020r\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_ceca );};return _gabfd ;};type textWord struct{_cf .PdfRectangle ;
_cbcb float64 ;_ffcba string ;_efbfe []*textMark ;_addg float64 ;_cged bool ;};func (_cebe *textTable )getDown ()paraList {_cedg :=make (paraList ,_cebe ._fbca );for _fbeaf :=0;_fbeaf < _cebe ._fbca ;_fbeaf ++{_beab :=_cebe .get (_fbeaf ,_cebe ._agfc -1)._cage ;
if _beab ==nil ||_beab ._egceg {return nil ;};_cedg [_fbeaf ]=_beab ;};for _bcff :=0;_bcff < _cebe ._fbca -1;_bcff ++{if _cedg [_bcff ]._fgfa !=_cedg [_bcff +1]{return nil ;};};return _cedg ;};func (_affae *textLine )appendWord (_fdbf *textWord ){_affae ._badd =append (_affae ._badd ,_fdbf );
_affae .PdfRectangle =_gdfb (_affae .PdfRectangle ,_fdbf .PdfRectangle );if _fdbf ._addg > _affae ._gfb {_affae ._gfb =_fdbf ._addg ;};if _fdbf ._cbcb > _affae ._dfbf {_affae ._dfbf =_fdbf ._cbcb ;};};func _aabc (_bda _b .Matrix )_b .Point {_cfga ,_bdag :=_bda .Translation ();
return _b .Point {X :_cfga ,Y :_bdag };};func _aefdf (_dgcd []*textWord ,_efdb int )[]*textWord {_egbc :=len (_dgcd );copy (_dgcd [_efdb :],_dgcd [_efdb +1:]);return _dgcd [:_egbc -1];};func (_ffegf paraList )findTables (_defae []gridTiling )[]*textTable {_ffegf .addNeighbours ();
_ee .Slice (_ffegf ,func (_daegb ,_ddbb int )bool {return _dcb (_ffegf [_daegb ],_ffegf [_ddbb ])< 0});var _dbdca []*textTable ;if _abaf {_ggfeb :=_ffegf .findGridTables (_defae );_dbdca =append (_dbdca ,_ggfeb ...);};if _ffgdg {_edcd :=_ffegf .findTextTables ();
_dbdca =append (_dbdca ,_edcd ...);};return _dbdca ;};func (_ecc *shapesState )moveTo (_dae ,_fbfc float64 ){_ecc ._ccf =true ;_ecc ._dce =_ecc .devicePoint (_dae ,_fbfc );if _fac {_f .Log .Info ("\u006d\u006fv\u0065\u0054\u006f\u003a\u0020\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0064\u0065\u0076\u0069\u0063\u0065\u003d%.\u0032\u0066",_dae ,_fbfc ,_ecc ._dce );
};};

// ToTextMark returns the public view of `tm`.
func (_edfd *textMark )ToTextMark ()TextMark {return TextMark {Text :_edfd ._babe ,Original :_edfd ._gabgg ,BBox :_edfd ._face ,Font :_edfd ._fffea ,FontSize :_edfd ._eggg ,FillColor :_edfd ._cgac ,StrokeColor :_edfd ._dagf ,Orientation :_edfd ._aeag };
};func (_bbec *textTable )growTable (){_dcca :=func (_eddc paraList ){_bbec ._agfc ++;for _aebeg :=0;_aebeg < _bbec ._fbca ;_aebeg ++{_bfee :=_eddc [_aebeg ];_bbec .put (_aebeg ,_bbec ._agfc -1,_bfee );};};_adbec :=func (_defe paraList ){_bbec ._fbca ++;
for _cbdb :=0;_cbdb < _bbec ._agfc ;_cbdb ++{_bfef :=_defe [_cbdb ];_bbec .put (_bbec ._fbca -1,_cbdb ,_bfef );};};if _bcef {_bbec .log ("\u0067r\u006f\u0077\u0054\u0061\u0062\u006ce");};for _bfca :=0;;_bfca ++{_gadbf :=false ;_bafab :=_bbec .getDown ();
_dcfga :=_bbec .getRight ();if _bcef {_ac .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bfca ,_bbec );_ac .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0020\u0064\u006f\u0077\u006e\u003d\u0025\u0073\u000a",_bafab );_ac .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0072\u0069\u0067\u0068\u0074\u003d\u0025\u0073\u000a",_dcfga );
};if _bafab !=nil &&_dcfga !=nil {_dcgb :=_bafab [len (_bafab )-1];if _dcgb !=nil &&!_dcgb ._egceg &&_dcgb ==_dcfga [len (_dcfga )-1]{_dcca (_bafab );if _dcfga =_bbec .getRight ();_dcfga !=nil {_adbec (_dcfga );_bbec .put (_bbec ._fbca -1,_bbec ._agfc -1,_dcgb );
};_gadbf =true ;};};if !_gadbf &&_bafab !=nil {_dcca (_bafab );_gadbf =true ;};if !_gadbf &&_dcfga !=nil {_adbec (_dcfga );_gadbf =true ;};if !_gadbf {break ;};};};func (_dag *shapesState )quadraticTo (_afa ,_degd ,_ecac ,_ebf float64 ){if _fac {_f .Log .Info ("\u0071\u0075\u0061d\u0072\u0061\u0074\u0069\u0063\u0054\u006f\u003a");
};_dag .addPoint (_ecac ,_ebf );};

// ExtractTextWithStats works like ExtractText but returns the number of characters in the output
// (`numChars`) and the number of characters that were not decoded (`numMisses`).
func (_de *Extractor )ExtractTextWithStats ()(_faa string ,_cef int ,_cag int ,_bdf error ){_fc ,_cef ,_cag ,_bdf :=_de .ExtractPageText ();if _bdf !=nil {return "",_cef ,_cag ,_bdf ;};return _fc .Text (),_cef ,_cag ,nil ;};func (_cbfed rulingList )snapToGroupsDirection ()rulingList {_cbfed .sortStrict ();
_afacc :=make (map[*ruling ]rulingList ,len (_cbfed ));_gebe :=_cbfed [0];_gcaea :=func (_ceea *ruling ){_gebe =_ceea ;_afacc [_gebe ]=rulingList {_ceea }};_gcaea (_cbfed [0]);for _ ,_bbdg :=range _cbfed [1:]{if _bbdg ._bfdfd < _gebe ._bfdfd -_fgbf {_f .Log .Error ("\u0073\u006e\u0061\u0070T\u006f\u0047\u0072\u006f\u0075\u0070\u0073\u0044\u0069r\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0057\u0072\u006f\u006e\u0067\u0020\u0070\u0072\u0069\u006da\u0072\u0079\u0020\u006f\u0072d\u0065\u0072\u002e\u000a\u0009\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0020\u0076\u003d\u0025\u0073",_gebe ,_bbdg );
};if _bbdg ._bfdfd > _gebe ._bfdfd +_fedd {_gcaea (_bbdg );}else {_afacc [_gebe ]=append (_afacc [_gebe ],_bbdg );};};_gfdd :=make (map[*ruling ]float64 ,len (_afacc ));_dgff :=make (map[*ruling ]*ruling ,len (_cbfed ));for _ebaa ,_dedbf :=range _afacc {_gfdd [_ebaa ]=_dedbf .mergePrimary ();
for _ ,_dgeac :=range _dedbf {_dgff [_dgeac ]=_ebaa ;};};for _ ,_ggga :=range _cbfed {_ggga ._bfdfd =_gfdd [_dgff [_ggga ]];};_ageca :=make (rulingList ,0,len (_cbfed ));for _ ,_eedee :=range _afacc {_bbeeb :=_eedee .splitSec ();for _fafe ,_aedf :=range _bbeeb {_egec :=_aedf .merge ();
if len (_ageca )> 0{_abdd :=_ageca [len (_ageca )-1];if _abdd .alignsPrimary (_egec )&&_abdd .alignsSec (_egec ){_f .Log .Error ("\u0073\u006e\u0061\u0070\u0054\u006fG\u0072\u006f\u0075\u0070\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0044\u0075\u0070\u006ci\u0063\u0061\u0074\u0065\u0020\u0069\u003d\u0025\u0064\u000a\u0009\u0077\u003d\u0025s\u000a\t\u0076\u003d\u0025\u0073",_fafe ,_abdd ,_egec );
continue ;};};_ageca =append (_ageca ,_egec );};};_ageca .sortStrict ();return _ageca ;};

// String returns a description of `t`.
func (_bbcec *textTable )String ()string {return _ac .Sprintf ("\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0025\u0074",_bbcec ._fbca ,_bbcec ._agfc ,_bbcec ._aeaa );};func (_aeega *wordBag )highestWord (_bcadc int ,_ecd ,_faegd float64 )*textWord {for _ ,_gbed :=range _aeega ._gagc [_bcadc ]{if _ecd <=_gbed ._cbcb &&_gbed ._cbcb <=_faegd {return _gbed ;
};};return nil ;};

// ExtractPageText returns the text contents of `e` (an Extractor for a page) as a PageText.
// TODO(peterwilliams97): The stats complicate this function signature and aren't very useful.
//                        Replace with a function like Extract() (*PageText, error)
func (_fbc *Extractor )ExtractPageText ()(*PageText ,int ,int ,error ){_ddd ,_bcd ,_cad ,_aaba :=_fbc .extractPageText (_fbc ._dc ,_fbc ._eg ,_b .IdentityMatrix (),0);if _aaba !=nil {return nil ,0,0,_aaba ;};_ddd .computeViews ();_aaba =_fcad (_ddd );if _aaba !=nil {return nil ,0,0,_aaba ;
};return _ddd ,_bcd ,_cad ,nil ;};func (_facf *textTable )newTablePara ()*textPara {_cdeb :=_facf .computeBbox ();_bbbee :=&textPara {PdfRectangle :_cdeb ,_gafc :_cdeb ,_fdcc :_facf };if _ffda {_f .Log .Info ("\u006e\u0065w\u0054\u0061\u0062l\u0065\u0050\u0061\u0072\u0061\u003a\u0020\u0025\u0073",_bbbee );
};return _bbbee ;};func (_abga *wordBag )depthIndexes ()[]int {if len (_abga ._gagc )==0{return nil ;};_abac :=make ([]int ,len (_abga ._gagc ));_gbdf :=0;for _bfc :=range _abga ._gagc {_abac [_gbdf ]=_bfc ;_gbdf ++;};_ee .Ints (_abac );return _abac ;};
func (_edcad *textLine )bbox ()_cf .PdfRectangle {return _edcad .PdfRectangle };type ruling struct{_edaga rulingKind ;_deag markKind ;_cc .Color ;_bfdfd float64 ;_dcae float64 ;_ddgfa float64 ;_dabce float64 ;};var _df =false ;func (_ggea paraList )applyTables (_aagf []*textTable )paraList {var _cefef paraList ;
for _ ,_ccfc :=range _aagf {_cefef =append (_cefef ,_ccfc .newTablePara ());};for _ ,_bcbdb :=range _ggea {if _bcbdb ._egceg {continue ;};_cefef =append (_cefef ,_bcbdb );};return _cefef ;};func (_agec *shapesState )addPoint (_bgf ,_gdbg float64 ){_caeg :=_agec .establishSubpath ();
_cccf :=_agec .devicePoint (_bgf ,_gdbg );if _caeg ==nil {_agec ._ccf =true ;_agec ._dce =_cccf ;}else {_caeg .add (_cccf );};};const _bedd =10;

// TableCell is a cell in a TextTable.
type TableCell struct{

// Text is the extracted text.
Text string ;

// Marks returns the TextMarks corresponding to the text in Text.
Marks TextMarkArray ;};type rulingList []*ruling ;func _gdfb (_cfcg ,_gffa _cf .PdfRectangle )_cf .PdfRectangle {return _cf .PdfRectangle {Llx :_ea .Min (_cfcg .Llx ,_gffa .Llx ),Lly :_ea .Min (_cfcg .Lly ,_gffa .Lly ),Urx :_ea .Max (_cfcg .Urx ,_gffa .Urx ),Ury :_ea .Max (_cfcg .Ury ,_gffa .Ury )};
};type rectRuling struct{_eaege rulingKind ;_cfdf markKind ;_cc .Color ;_cf .PdfRectangle ;};func (_bbeef *textWord )absorb (_dacf *textWord ){_bbeef .PdfRectangle =_gdfb (_bbeef .PdfRectangle ,_dacf .PdfRectangle );_bbeef ._efbfe =append (_bbeef ._efbfe ,_dacf ._efbfe ...);
};func (_becgd rulingList )sort (){_ee .Slice (_becgd ,_becgd .comp )};func (_faba rulingList )blocks (_cggdg ,_aabfb *ruling )bool {if _cggdg ._dcae > _aabfb ._ddgfa ||_aabfb ._dcae > _cggdg ._ddgfa {return false ;};_bcgg :=_ea .Max (_cggdg ._dcae ,_aabfb ._dcae );
_bcbb :=_ea .Min (_cggdg ._ddgfa ,_aabfb ._ddgfa );if _cggdg ._bfdfd > _aabfb ._bfdfd {_cggdg ,_aabfb =_aabfb ,_cggdg ;};for _ ,_edfgc :=range _faba {if _cggdg ._bfdfd <=_edfgc ._bfdfd +_fedd &&_edfgc ._bfdfd <=_aabfb ._bfdfd +_fedd &&_edfgc ._dcae <=_bcbb &&_bcgg <=_edfgc ._ddgfa {return true ;
};};return false ;};type textState struct{_dgac float64 ;_cbcf float64 ;_fege float64 ;_fef float64 ;_eed float64 ;_dddg RenderMode ;_gabf float64 ;_faf *_cf .PdfFont ;_fff _cf .PdfRectangle ;_bcaf int ;_dge int ;};func _fbcg (_gdec ,_becg _cf .PdfRectangle )bool {return _gdec .Llx <=_becg .Llx &&_becg .Urx <=_gdec .Urx &&_gdec .Lly <=_becg .Lly &&_becg .Ury <=_gdec .Ury ;
};

// String returns a human readable description of `vecs`.
func (_gdgcf rulingList )String ()string {if len (_gdgcf )==0{return "\u007b \u0045\u004d\u0050\u0054\u0059\u0020}";};_ecba ,_fabfe :=_gdgcf .vertsHorzs ();_dbff :=len (_ecba );_edaa :=len (_fabfe );if _dbff ==0||_edaa ==0{return _ac .Sprintf ("\u007b%\u0064\u0020\u0078\u0020\u0025\u0064}",_dbff ,_edaa );
};_daag :=_cf .PdfRectangle {Llx :_ecba [0]._bfdfd ,Urx :_ecba [_dbff -1]._bfdfd ,Lly :_fabfe [_edaa -1]._bfdfd ,Ury :_fabfe [0]._bfdfd };return _ac .Sprintf ("\u007b\u0025d\u0020\u0078\u0020%\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u007d",_dbff ,_edaa ,_daag );
};func _agffc (_ebad ,_egc bounded )float64 {return _ebad .bbox ().Llx -_egc .bbox ().Urx };type lineRuling struct{_cdbd rulingKind ;_cdcgc markKind ;_cc .Color ;_gadc ,_aadfb _b .Point ;};

// TextTable represents a table.
// Cells are ordered top-to-bottom, left-to-right.
// Cells[y] is the (0-offset) y'th row in the table.
// Cells[y][x] is the (0-offset) x'th column in the table.
type TextTable struct{W ,H int ;Cells [][]TableCell ;};func _bcfff (_eegf map[int ][]float64 )string {_bddg :=_gabca (_eegf );_dffc :=make ([]string ,len (_eegf ));for _cbdgd ,_baabd :=range _bddg {_dffc [_cbdgd ]=_ac .Sprintf ("\u0025\u0064\u003a\u0020\u0025\u002e\u0032\u0066",_baabd ,_eegf [_baabd ]);
};return _ac .Sprintf ("\u007b\u0025\u0073\u007d",_ca .Join (_dffc ,"\u002c\u0020"));};func (_gagb *textObject )getFontDict (_aefb string )(_efad _ce .PdfObject ,_ggf error ){_affa :=_gagb ._gcag ;if _affa ==nil {_f .Log .Debug ("g\u0065\u0074\u0046\u006f\u006e\u0074D\u0069\u0063\u0074\u002e\u0020\u004eo\u0020\u0072\u0065\u0073\u006f\u0075\u0072c\u0065\u0073\u002e\u0020\u006e\u0061\u006d\u0065\u003d\u0025#\u0071",_aefb );
return nil ,nil ;};_efad ,_abagc :=_affa .GetFontByName (_ce .PdfObjectName (_aefb ));if !_abagc {_f .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0067\u0065t\u0046\u006f\u006et\u0044\u0069\u0063\u0074\u003a\u0020\u0046\u006f\u006et \u006e\u006f\u0074 \u0066\u006fu\u006e\u0064\u003a\u0020\u006e\u0061m\u0065\u003d%\u0023\u0071",_aefb );
return nil ,_e .New ("f\u006f\u006e\u0074\u0020no\u0074 \u0069\u006e\u0020\u0072\u0065s\u006f\u0075\u0072\u0063\u0065\u0073");};return _efad ,nil ;};func (_aec *textObject )checkOp (_cga *_cea .ContentStreamOperation ,_faaa int ,_ebdf bool )(_bfaf bool ,_cbe error ){if _aec ==nil {var _cdga []_ce .PdfObject ;
if _faaa > 0{_cdga =_cga .Params ;if len (_cdga )> _faaa {_cdga =_cdga [:_faaa ];};};_f .Log .Debug ("\u0025\u0023q \u006f\u0070\u0065r\u0061\u006e\u0064\u0020out\u0073id\u0065\u0020\u0074\u0065\u0078\u0074\u002e p\u0061\u0072\u0061\u006d\u0073\u003d\u0025+\u0076",_cga .Operand ,_cdga );
};if _faaa >=0{if len (_cga .Params )!=_faaa {if _ebdf {_cbe =_e .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");};_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_cga .Operand ,_faaa ,len (_cga .Params ),_cga .Params );
return false ,_cbe ;};};return true ,nil ;};

// RenderMode specifies the text rendering mode (Tmode), which determines whether showing text shall cause
// glyph outlines to be  stroked, filled, used as a clipping boundary, or some combination of the three.
// Stroking, filling, and clipping shall have the same effects for a text object as they do for a path object
// (see 8.5.3, "Path-Painting Operators" and 8.5.4, "Clipping Path Operators").
type RenderMode int ;func (_eea *shapesState )cubicTo (_ffa ,_fgab ,_deeba ,_bdgg ,_ffde ,_bffg float64 ){if _fac {_f .Log .Info ("\u0063\u0075\u0062\u0069\u0063\u0054\u006f\u003a");};_eea .addPoint (_ffde ,_bffg );};func (_efge *textLine )text ()string {var _cdaff []string ;
for _ ,_baa :=range _efge ._badd {if _baa ._cged {_cdaff =append (_cdaff ,"\u0020");};_cdaff =append (_cdaff ,_baa ._ffcba );};return _ca .Join (_cdaff ,"");};

// Extractor stores and offers functionality for extracting content from PDF pages.
type Extractor struct{_dc string ;_eg *_cf .PdfPageResources ;_aaa _cf .PdfRectangle ;_gg map[string ]fontEntry ;_fb map[string ]textResult ;_dd int64 ;_aaaa int ;};type textResult struct{_agfa PageText ;_dcga int ;_aee int ;};func (_fecga paraList )xNeighbours (_cgfee float64 )map[*textPara ][]int {_dadgc :=make ([]event ,2*len (_fecga ));
if _cgfee ==0{for _eeee ,_gcgdc :=range _fecga {_dadgc [2*_eeee ]=event {_gcgdc .Llx ,true ,_eeee };_dadgc [2*_eeee +1]=event {_gcgdc .Urx ,false ,_eeee };};}else {for _bdcb ,_faed :=range _fecga {_dadgc [2*_bdcb ]=event {_faed .Llx -_cgfee *_faed .fontsize (),true ,_bdcb };
_dadgc [2*_bdcb +1]=event {_faed .Urx +_cgfee *_faed .fontsize (),false ,_bdcb };};};return _fecga .eventNeighbours (_dadgc );};func (_caaga paraList )findGridTables (_fcaf []gridTiling )[]*textTable {if _ffda {_f .Log .Info ("\u0066i\u006e\u0064\u0047\u0072\u0069\u0064\u0054\u0061\u0062\u006c\u0065s\u003a\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073",len (_caaga ));
for _gdeg ,_edffg :=range _caaga {_ac .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gdeg ,_edffg );};};var _decag []*textTable ;for _abdb ,_gdfdc :=range _fcaf {_acac ,_cafd :=_caaga .findTableGrid (_gdfdc );if _acac !=nil {_acac .log (_ac .Sprintf ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0057\u0069\u0074\u0068\u0047\u0072\u0069\u0064\u0073\u003a\u0020%\u0064",_abdb ));
_decag =append (_decag ,_acac );_acac .markCells ();};for _defg :=range _cafd {_defg ._egceg =true ;};};if _ffda {_f .Log .Info ("\u0066i\u006e\u0064\u0047\u0072i\u0064\u0054\u0061\u0062\u006ce\u0073:\u0020%\u0064\u0020\u0074\u0061\u0062\u006c\u0065s",len (_decag ));
};return _decag ;};func (_fbd *wordBag )getDepthIdx (_cbba float64 )int {_afeb :=_fbd .depthIndexes ();_dff :=_fefb (_cbba );if _dff < _afeb [0]{return _afeb [0];};if _dff > _afeb [len (_afeb )-1]{return _afeb [len (_afeb )-1];};return _dff ;};func _ddgfc (_gdbcd ,_cfcf *textPara )bool {return _bbdd (_gdbcd ._gafc ,_cfcf ._gafc )};
func (_bead rulingList )bbox ()_cf .PdfRectangle {var _ecbg _cf .PdfRectangle ;if len (_bead )==0{_f .Log .Error ("r\u0075\u006c\u0069\u006e\u0067\u004ci\u0073\u0074\u002e\u0062\u0062\u006f\u0078\u003a\u0020n\u006f\u0020\u0072u\u006ci\u006e\u0067\u0073");
return _cf .PdfRectangle {};};if _bead [0]._edaga ==_deba {_ecbg .Llx ,_ecbg .Urx =_bead .secMinMax ();_ecbg .Lly ,_ecbg .Ury =_bead .primMinMax ();}else {_ecbg .Llx ,_ecbg .Urx =_bead .primMinMax ();_ecbg .Lly ,_ecbg .Ury =_bead .secMinMax ();};return _ecbg ;
};func _bbdd (_dcba ,_fcc _cf .PdfRectangle )bool {return _fcc .Llx <=_dcba .Urx &&_dcba .Llx <=_fcc .Urx };func _gfac (_efef _cf .PdfRectangle )*ruling {return &ruling {_edaga :_afb ,_bfdfd :_efef .Urx ,_dcae :_efef .Lly ,_ddgfa :_efef .Ury };};func (_ebda *compositeCell )updateBBox (){for _ ,_fccff :=range _ebda .paraList {_ebda .PdfRectangle =_gdfb (_ebda .PdfRectangle ,_fccff .PdfRectangle );
};};func (_gfdg *shapesState )lastpointEstablished ()(_b .Point ,bool ){if _gfdg ._ccf {return _gfdg ._dce ,false ;};_cdgc :=len (_gfdg ._dcd );if _cdgc > 0&&_gfdg ._dcd [_cdgc -1]._fgec {return _gfdg ._dcd [_cdgc -1].last (),false ;};return _b .Point {},true ;
};func _bebe (_cbfg ,_gage float64 )bool {return _ea .Abs (_cbfg -_gage )<=_daa };func (_bdaeb rulingList )asTiling ()gridTiling {if _gcac {_f .Log .Info ("r\u0075\u006ci\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0063s\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u002b\u002b\u002b\u0020\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_bdaeb ));
};for _abcg ,_fagbb :=range _bdaeb [1:]{_abff :=_bdaeb [_abcg ];if _abff .alignsPrimary (_fagbb )&&_abff .alignsSec (_fagbb ){_f .Log .Error ("a\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0044\u0075\u0070\u006c\u0069\u0063\u0061\u0074\u0065 \u0072\u0075\u006c\u0069\u006e\u0067\u0073\u002e\u000a\u0009v=\u0025\u0073\u000a\t\u0077=\u0025\u0073",_fagbb ,_abff );
};};_bdaeb .sortStrict ();_bdaeb .log ("\u0073n\u0061\u0070\u0070\u0065\u0064");_gefg ,_gebc :=_bdaeb .vertsHorzs ();_efced :=_gefg .primaries ();_gafff :=_gebc .primaries ();_aabd :=len (_efced )-1;_ccdd :=len (_gafff )-1;if _aabd ==0||_ccdd ==0{return gridTiling {};
};_cfbg :=_cf .PdfRectangle {Llx :_efced [0],Urx :_efced [_aabd ],Lly :_gafff [0],Ury :_gafff [_ccdd ]};if _gcac {_f .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0072\u0074s=\u0025\u0064",len (_gefg ));
for _baad ,_eeae :=range _gefg {_ac .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_baad ,_eeae );};_f .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0068\u006f\u0072\u007as=\u0025\u0064",len (_gebc ));
for _cfgd ,_dgeg :=range _gebc {_ac .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cfgd ,_dgeg );};_f .Log .Info ("\u0072\u0075\u006c\u0069\u006eg\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067:\u0020\u0020\u0077\u0078\u0068\u003d\u0025\u0064\u0078\u0025\u0064\u000a\u0009\u006c\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a\u0009\u006c\u006c\u0079\u003d\u0025\u002e\u0032f",_aabd ,_ccdd ,_efced ,_gafff );
};_gcagga :=make ([]gridTile ,_aabd *_ccdd );for _gefgd :=_ccdd -1;_gefgd >=0;_gefgd --{_dcfg :=_gafff [_gefgd ];_gccc :=_gafff [_gefgd +1];for _fabfb :=0;_fabfb < _aabd ;_fabfb ++{_dfcf :=_efced [_fabfb ];_egdg :=_efced [_fabfb +1];_fbac :=_gefg .findPrimSec (_dfcf ,_dcfg );
_efbf :=_gefg .findPrimSec (_egdg ,_dcfg );_gcff :=_gebc .findPrimSec (_dcfg ,_dfcf );_edbc :=_gebc .findPrimSec (_gccc ,_dfcf );_afeg :=_cf .PdfRectangle {Llx :_dfcf ,Urx :_egdg ,Lly :_dcfg ,Ury :_gccc };_degff :=_gabfb (_afeg ,_fbac ,_efbf ,_gcff ,_edbc );
_gcagga [_gefgd *_aabd +_fabfb ]=_degff ;if _gcac {_ac .Printf ("\u0020\u0020\u0078\u003d\u0025\u0032\u0064\u0020\u0079\u003d\u0025\u0032\u0064\u003a\u0020%\u0073 \u0025\u0036\u002e\u0032\u0066\u0020\u0078\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_fabfb ,_gefgd ,_degff .String (),_degff .Width (),_degff .Height ());
};};};if _gcac {_f .Log .Info ("r\u0075\u006c\u0069\u006e\u0067\u004c\u0069\u0073\u0074.\u0061\u0073\u0054\u0069\u006c\u0069\u006eg:\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0020\u0068\u006f\u0072\u0069zo\u006e\u0074a\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_cfbg );
};_gfefe :=make ([]map[float64 ]gridTile ,_ccdd );for _baaf :=_ccdd -1;_baaf >=0;_baaf --{if _gcac {_ac .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_baaf );};_gfefe [_baaf ]=make (map[float64 ]gridTile ,_aabd );for _gcaaa :=0;_gcaaa < _aabd ;
_gcaaa ++{_eedf :=_gcagga [_baaf *_aabd +_gcaaa ];if _gcac {_ac .Printf ("\u0020\u0020\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gcaaa ,_eedf );};if !_eedf ._dfdg {continue ;};_adbb :=_gcaaa ;for _aabbaf :=_gcaaa +1;!_eedf ._dgea &&_aabbaf < _aabd ;
_aabbaf ++{_fdea :=_gcagga [_baaf *_aabd +_aabbaf ];_eedf .Urx =_fdea .Urx ;_eedf ._fdedg =_eedf ._fdedg ||_fdea ._fdedg ;_eedf ._ddccb =_eedf ._ddccb ||_fdea ._ddccb ;_eedf ._dgea =_fdea ._dgea ;if _gcac {_ac .Printf ("\u0020 \u0020%\u0034\u0064\u003a\u0020\u0025s\u0020\u2192 \u0025\u0073\u000a",_aabbaf ,_fdea ,_eedf );
};_adbb =_aabbaf ;};if _gcac {_ac .Printf (" \u0020 \u0025\u0032\u0064\u0020\u002d\u0020\u0025\u0032d\u0020\u2192\u0020\u0025s\n",_gcaaa ,_adbb ,_eedf );};_gcaaa =_adbb ;_gfefe [_baaf ][_eedf .Llx ]=_eedf ;};};_bdbf :=make (map[float64 ]map[float64 ]gridTile ,_ccdd );
_febgd :=make (map[float64 ]map[float64 ]struct{},_ccdd );for _dgegb :=_ccdd -1;_dgegb >=0;_dgegb --{_eedg :=_gcagga [_dgegb *_aabd ].Lly ;_bdbf [_eedg ]=make (map[float64 ]gridTile ,_aabd );_febgd [_eedg ]=make (map[float64 ]struct{},_aabd );};if _gcac {_f .Log .Info ("\u0072u\u006c\u0069n\u0067\u004c\u0069s\u0074\u002e\u0061\u0073\u0054\u0069\u006ci\u006e\u0067\u003a\u0020\u0063\u006fa\u006c\u0065\u0073\u0063\u0065\u0020\u0076\u0065\u0072\u0074\u0069c\u0061\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_cfbg );
};for _dgaff :=_ccdd -1;_dgaff >=0;_dgaff --{_dcacg :=_gcagga [_dgaff *_aabd ].Lly ;_ddegd :=_gfefe [_dgaff ];if _gcac {_ac .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_dgaff );};for _ ,_aagg :=range _dcef (_ddegd ){if _ ,_babbd :=_febgd [_dcacg ][_aagg ];
_babbd {continue ;};_ebdaf :=_ddegd [_aagg ];if _gcac {_ac .Printf (" \u0020\u0020\u0020\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_ebdaf .String ());};for _eedd :=_dgaff -1;_eedd >=0;_eedd --{if _ebdaf ._ddccb {break ;};_cdgd :=_gfefe [_eedd ];_fcfad ,_dbeb :=_cdgd [_aagg ];
if !_dbeb {break ;};if _fcfad .Urx !=_ebdaf .Urx {break ;};_ebdaf ._ddccb =_fcfad ._ddccb ;_ebdaf .Lly =_fcfad .Lly ;if _gcac {_ac .Printf ("\u0020\u0020\u0020\u0020  \u0020\u0020\u0076\u003d\u0025\u0073\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_fcfad .String (),_ebdaf .String ());
};_febgd [_fcfad .Lly ][_fcfad .Llx ]=struct{}{};};if _dgaff ==0{_ebdaf ._ddccb =true ;};if _ebdaf .complete (){_bdbf [_dcacg ][_aagg ]=_ebdaf ;};};};_ecaag :=gridTiling {PdfRectangle :_cfbg ,_efgea :_cafb (_bdbf ),_aebe :_becge (_bdbf ),_geac :_bdbf };
_ecaag .log ("\u0043r\u0065\u0061\u0074\u0065\u0064");return _ecaag ;};func _fcgab (_aaffd map[int ]intSet )[]int {_ddfa :=make ([]int ,0,len (_aaffd ));for _dddgd :=range _aaffd {_ddfa =append (_ddfa ,_dddgd );};_ee .Ints (_ddfa );return _ddfa ;};type gridTiling struct{_cf .PdfRectangle ;
_efgea []float64 ;_aebe []float64 ;_geac map[float64 ]map[float64 ]gridTile ;};

// BBox returns the smallest axis-aligned rectangle that encloses all the TextMarks in `ma`.
func (_gbbb *TextMarkArray )BBox ()(_cf .PdfRectangle ,bool ){var _fdc _cf .PdfRectangle ;_cec :=false ;for _ ,_gddg :=range _gbbb ._eaf {if _gddg .Meta ||_aaae (_gddg .Text ){continue ;};if _cec {_fdc =_gdfb (_fdc ,_gddg .BBox );}else {_fdc =_gddg .BBox ;
_cec =true ;};};return _fdc ,_cec ;};func (_eaca paraList )eventNeighbours (_fdcafd []event )map[*textPara ][]int {_ee .Slice (_fdcafd ,func (_dfff ,_fgfeb int )bool {_cfddb ,_abggf :=_fdcafd [_dfff ],_fdcafd [_fgfeb ];_bbgfa ,_edbd :=_cfddb ._aaggd ,_abggf ._aaggd ;
if _bbgfa !=_edbd {return _bbgfa < _edbd ;};if _cfddb ._afcc !=_abggf ._afcc {return _cfddb ._afcc ;};return _dfff < _fgfeb ;});_cagb :=make (map[int ]intSet );_agecad :=make (intSet );for _ ,_acga :=range _fdcafd {if _acga ._afcc {_cagb [_acga ._dbbg ]=make (intSet );
for _dfde :=range _agecad {if _dfde !=_acga ._dbbg {_cagb [_acga ._dbbg ].add (_dfde );_cagb [_dfde ].add (_acga ._dbbg );};};_agecad .add (_acga ._dbbg );}else {_agecad .del (_acga ._dbbg );};};_aeedg :=map[*textPara ][]int {};for _cceee ,_gfaa :=range _cagb {_ddfb :=_eaca [_cceee ];
if len (_gfaa )==0{_aeedg [_ddfb ]=nil ;continue ;};_eaada :=make ([]int ,len (_gfaa ));_bfgea :=0;for _ebbeg :=range _gfaa {_eaada [_bfgea ]=_ebbeg ;_bfgea ++;};_aeedg [_ddfb ]=_eaada ;};return _aeedg ;};func (_cfgcf paraList )findTextTables ()[]*textTable {var _cfca []*textTable ;
for _ ,_gcfcc :=range _cfgcf {if _gcfcc .taken ()||_gcfcc .Width ()==0{continue ;};_cdf :=_gcfcc .isAtom ();if _cdf ==nil {continue ;};_cdf .growTable ();if _cdf ._fbca *_cdf ._agfc < _cacd {continue ;};_cdf .markCells ();_cdf .log ("\u0067\u0072\u006fw\u006e");
_cfca =append (_cfca ,_cdf );};return _cfca ;};func (_aaaf *textTable )log (_afcb string ){if !_ffda {return ;};_f .Log .Info ("~\u007e\u007e\u0020\u0025\u0073\u003a \u0025\u0064\u0020\u0078\u0020\u0025d\u0020\u0067\u0072\u0069\u0064\u003d\u0025t\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0025\u0036\u002e2\u0066",_afcb ,_aaaf ._fbca ,_aaaf ._agfc ,_aaaf ._aeaa ,_aaaf .PdfRectangle );
for _gfgfa :=0;_gfgfa < _aaaf ._agfc ;_gfgfa ++{for _ceafb :=0;_ceafb < _aaaf ._fbca ;_ceafb ++{_geeaf :=_aaaf .get (_ceafb ,_gfgfa );if _geeaf ==nil {continue ;};_ac .Printf ("%\u0034\u0064\u0020\u00252d\u003a \u0025\u0036\u002e\u0032\u0066 \u0025\u0071\u0020\u0025\u0064\u000a",_ceafb ,_gfgfa ,_geeaf .PdfRectangle ,_ecafe (_geeaf .text (),50),_d .RuneCountInString (_geeaf .text ()));
};};};func (_fbeed gridTiling )complete ()bool {for _ ,_efce :=range _fbeed ._geac {for _ ,_afdcg :=range _efce {if !_afdcg .complete (){return false ;};};};return true ;};func (_dgacf *wordBag )absorb (_bbd *wordBag ){_gbfa :=_bbd .makeRemovals ();for _geba ,_efe :=range _bbd ._gagc {for _ ,_cdcg :=range _efe {_dgacf .pullWord (_cdcg ,_geba ,_gbfa );
};};_bbd .applyRemovals (_gbfa );};func (_eeaa rulingList )toTilings ()(rulingList ,[]gridTiling ){_eeaa .log ("\u0074o\u0054\u0069\u006c\u0069\u006e\u0067s");if len (_eeaa )==0{return nil ,nil ;};_eeaa =_eeaa .tidied ("\u0061\u006c\u006c");_eeaa .log ("\u0074\u0069\u0064\u0069\u0065\u0064");
_adgc :=_eeaa .toGrids ();_fdbg :=make ([]gridTiling ,len (_adgc ));for _geae ,_gcda :=range _adgc {_fdbg [_geae ]=_gcda .asTiling ();};return _eeaa ,_fdbg ;};func (_bgd *stateStack )push (_cba *textState ){_bec :=*_cba ;*_bgd =append (*_bgd ,&_bec )};
const _baeg =1.0/1000.0;func (_fceb *wordBag )allWords ()[]*textWord {var _aage []*textWord ;for _ ,_acag :=range _fceb ._gagc {_aage =append (_aage ,_acag ...);};return _aage ;};type shapesState struct{_bdab _b .Matrix ;_aaee _b .Matrix ;_dcd []*subpath ;
_ccf bool ;_dce _b .Point ;_ecaa *textObject ;};

// Append appends `mark` to the mark array.
func (_fagb *TextMarkArray )Append (mark TextMark ){_fagb ._eaf =append (_fagb ._eaf ,mark )};func (_bgb *shapesState )establishSubpath ()*subpath {_beeb ,_bad :=_bgb .lastpointEstablished ();if !_bad {_bgb ._dcd =append (_bgb ._dcd ,_cbf (_beeb ));};if len (_bgb ._dcd )==0{return nil ;
};_bgb ._ccf =false ;return _bgb ._dcd [len (_bgb ._dcd )-1];};const (_efed =true ;_cgbbg =true ;_gccb =true ;_fed =false ;_aaac =false ;_fbcd =6;_becd =3.0;_adgd =200;_abaf =true ;_ffgdg =true ;_gbae =true ;_afff =true ;_gdfd =false ;);func (_feafg rulingList )comp (_dfdf ,_baabf int )bool {_gafaa ,_cgdd :=_feafg [_dfdf ],_feafg [_baabf ];
_cdafd ,_acage :=_gafaa ._edaga ,_cgdd ._edaga ;if _cdafd !=_acage {return _cdafd > _acage ;};if _cdafd ==_fecef {return false ;};_ecbf :=func (_abccd bool )bool {if _cdafd ==_deba {return _abccd ;};return !_abccd ;};_gbafd ,_bcbfa :=_gafaa ._bfdfd ,_cgdd ._bfdfd ;
if _gbafd !=_bcbfa {return _ecbf (_gbafd > _bcbfa );};_gbafd ,_bcbfa =_gafaa ._dcae ,_cgdd ._dcae ;if _gbafd !=_bcbfa {return _ecbf (_gbafd < _bcbfa );};return _ecbf (_gafaa ._ddgfa < _cgdd ._ddgfa );};func (_efgae lineRuling )xMean ()float64 {return 0.5*(_efgae ._gadc .X +_efgae ._aadfb .X )};
func (_cadf *shapesState )fill (_ega *[]pathSection ){_bgeb :=pathSection {_ffcb :_cadf ._dcd ,Color :_cadf ._ecaa .getFillColor ()};*_ega =append (*_ega ,_bgeb );if _agfd {_eggc :=_bgeb .bbox ();_ac .Printf ("\u0020 \u0020\u0020\u0046\u0049\u004c\u004c\u003a %\u0032\u0064\u0020\u0066\u0069\u006c\u006c\u0073\u0020\u0028\u0025\u0064\u0020\u006ee\u0077\u0029 \u0073\u0073\u003d%\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d\u0025\u0033\u0076\u0020\u0025\u0036\u002e\u0032f\u003d\u00256.\u0032\u0066\u0078%\u0036\u002e\u0032\u0066\u000a",len (*_ega ),len (_bgeb ._ffcb ),_cadf ,_bgeb .Color ,_eggc ,_eggc .Width (),_eggc .Height ());
if _gfeg {for _dbb ,_bfd :=range _bgeb ._ffcb {_ac .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_dbb ,_bfd );if _dbb ==10{break ;};};};};};func (_ddebg paraList )lines ()[]*textLine {var _cdea []*textLine ;for _ ,_ccee :=range _ddebg {_cdea =append (_cdea ,_ccee ._gdff ...);
};return _cdea ;};func (_gfc *wordBag )depthBand (_ddcc ,_aea float64 )[]int {if len (_gfc ._gagc )==0{return nil ;};return _gfc .depthRange (_gfc .getDepthIdx (_ddcc ),_gfc .getDepthIdx (_aea ));};

// Tables returns the tables extracted from the page.
func (_faac PageText )Tables ()[]TextTable {if _ffda {_f .Log .Info ("\u0054\u0061\u0062\u006c\u0065\u0073\u003a\u0020\u0025\u0064",len (_faac ._cdb ));};return _faac ._cdb ;};func (_ceggb paraList )llyRange (_fbfd []int ,_fefbf ,_defa float64 )[]int {_egce :=len (_ceggb );
if _defa < _ceggb [_fbfd [0]].Lly ||_fefbf > _ceggb [_fbfd [_egce -1]].Lly {return nil ;};_begdc :=_ee .Search (_egce ,func (_afec int )bool {return _ceggb [_fbfd [_afec ]].Lly >=_fefbf });_bgce :=_ee .Search (_egce ,func (_bcdg int )bool {return _ceggb [_fbfd [_bcdg ]].Lly > _defa });
return _fbfd [_begdc :_bgce ];};func (_gcgg *textTable )getComposite (_adac ,_ceacge int )(paraList ,_cf .PdfRectangle ){_edba ,_egbg :=_gcgg ._ccad [_dace (_adac ,_ceacge )];if _ffda {_ac .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0067\u0065\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u002d\u003e\u0025\u0073\u000a",_adac ,_ceacge ,_edba .String ());
};if !_egbg {return nil ,_cf .PdfRectangle {};};return _edba .parasBBox ();};

// Len returns the number of TextMarks in `ma`.
func (_bcf *TextMarkArray )Len ()int {if _bcf ==nil {return 0;};return len (_bcf ._eaf );};func (_efbae *textPara )toCellTextMarks (_babc *int )[]TextMark {var _bbada []TextMark ;for _egga ,_edfb :=range _efbae ._gdff {_gecc :=_edfb .toTextMarks (_babc );
_gbbe :=_efed &&_edfb .endsInHyphen ()&&_egga !=len (_efbae ._gdff )-1;if _gbbe {_gecc =_bbcd (_gecc ,_babc );};_bbada =append (_bbada ,_gecc ...);if !(_gbbe ||_egga ==len (_efbae ._gdff )-1){_bbada =_edag (_bbada ,_babc ,_egcd (_edfb ._dfbf ,_efbae ._gdff [_egga +1]._dfbf ));
};};return _bbada ;};func (_eda *wordBag )applyRemovals (_gaed map[int ]map[*textWord ]struct{}){for _fdee ,_fbcc :=range _gaed {if len (_fbcc )==0{continue ;};_fbe :=_eda ._gagc [_fdee ];_cbb :=len (_fbe )-len (_fbcc );if _cbb ==0{delete (_eda ._gagc ,_fdee );
continue ;};_cgfg :=make ([]*textWord ,_cbb );_gacd :=0;for _ ,_bbcg :=range _fbe {if _ ,_gbc :=_fbcc [_bbcg ];!_gbc {_cgfg [_gacd ]=_bbcg ;_gacd ++;};};_eda ._gagc [_fdee ]=_cgfg ;};};func (_ecfb paraList )log (_bccbg string ){if !_bfcd {return ;};_f .Log .Info ("%\u0038\u0073\u003a\u0020\u0025\u0064 \u0070\u0061\u0072\u0061\u0073\u0020=\u003d\u003d\u003d\u003d\u003d\u003d\u002d-\u002d\u002d\u002d\u002d\u002d\u003d\u003d\u003d\u003d\u003d=\u003d",_bccbg ,len (_ecfb ));
for _caee ,_eccf :=range _ecfb {if _eccf ==nil {continue ;};_effa :=_eccf .text ();_eebg :="\u0020\u0020";if _eccf ._fdcc !=nil {_eebg =_ac .Sprintf ("\u005b%\u0064\u0078\u0025\u0064\u005d",_eccf ._fdcc ._fbca ,_eccf ._fdcc ._agfc );};_ac .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0025s\u0020\u0025\u0071\u000a",_caee ,_eccf .PdfRectangle ,_eebg ,_ecafe (_effa ,50));
};};func _fdafa (_acegg ,_aegaf _b .Point )bool {_cegf :=_ea .Abs (_acegg .X -_aegaf .X );_egeg :=_ea .Abs (_acegg .Y -_aegaf .Y );return _cgfe (_egeg ,_cegf );};

// TextMarkArray is a collection of TextMarks.
type TextMarkArray struct{_eaf []TextMark };func _eggcd (_efbc ,_ecdba _b .Point )bool {return _efbc .X ==_ecdba .X &&_efbc .Y ==_ecdba .Y };func (_cgge *textLine )toTextMarks (_bagc *int )[]TextMark {var _bcga []TextMark ;for _ ,_ebec :=range _cgge ._badd {if _ebec ._cged {_bcga =_edag (_bcga ,_bagc ,"\u0020");
};_efadb :=_ebec .toTextMarks (_bagc );_bcga =append (_bcga ,_efadb ...);};return _bcga ;};func _ggba (_bbba *_cea .ContentStreamOperation )(float64 ,error ){if len (_bbba .Params )!=1{_fgf :=_e .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");
_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_bbba .Operand ,1,len (_bbba .Params ),_bbba .Params );
return 0.0,_fgf ;};return _ce .GetNumberAsFloat (_bbba .Params [0]);};func (_ffae *wordBag )firstReadingIndex (_bfdd int )int {_acb :=_ffae .firstWord (_bfdd )._addg ;_faee :=float64 (_bfdd +1)*_aaga ;_fbgg :=_faee +_feeg *_acb ;_bcea :=_bfdd ;for _ ,_ecae :=range _ffae .depthBand (_faee ,_fbgg ){if _ecaed (_ffae .firstWord (_ecae ),_ffae .firstWord (_bcea ))< 0{_bcea =_ecae ;
};};return _bcea ;};func _gbcc (_eedgd string )(string ,bool ){_ageb :=[]rune (_eedgd );if len (_ageb )!=1{return "",false ;};_caea ,_fbda :=_dgde [_ageb [0]];return _caea ,_fbda ;};type paraList []*textPara ;func _gefgg (_edac ,_ddegb ,_aecac ,_abcdc *textPara )*textTable {_aaeee :=&textTable {_fbca :2,_agfc :2,_befa :make (map[uint64 ]*textPara ,4)};
_aaeee .put (0,0,_edac );_aaeee .put (1,0,_ddegb );_aaeee .put (0,1,_aecac );_aaeee .put (1,1,_abcdc );return _aaeee ;};func (_gee *textObject )reset (){_gee ._dab =_b .IdentityMatrix ();_gee ._aaabb =_b .IdentityMatrix ();_gee ._abd =nil ;};var _aeca =TextMark {Text :"\u005b\u0058\u005d",Original :"\u0020",Meta :true ,FillColor :_cc .White ,StrokeColor :_cc .White };
func _dcb (_bdb ,_caggg bounded )float64 {_eag :=_ecaed (_bdb ,_caggg );if !_ggbgb (_eag ){return _eag ;};return _gbfbg (_bdb ,_caggg );};func (_acfcb paraList )yNeighbours (_feca float64 )map[*textPara ][]int {_feaa :=make ([]event ,2*len (_acfcb ));if _feca ==0{for _cfbgd ,_fgeb :=range _acfcb {_feaa [2*_cfbgd ]=event {_fgeb .Lly ,true ,_cfbgd };
_feaa [2*_cfbgd +1]=event {_fgeb .Ury ,false ,_cfbgd };};}else {for _cfff ,_ffff :=range _acfcb {_feaa [2*_cfff ]=event {_ffff .Lly -_feca *_ffff .fontsize (),true ,_cfff };_feaa [2*_cfff +1]=event {_ffff .Ury +_feca *_ffff .fontsize (),false ,_cfff };
};};return _acfcb .eventNeighbours (_feaa );};func _gabca (_bfbd map[int ][]float64 )[]int {_eaecc :=make ([]int ,len (_bfbd ));_adcd :=0;for _ebgcc :=range _bfbd {_eaecc [_adcd ]=_ebgcc ;_adcd ++;};_ee .Ints (_eaecc );return _eaecc ;};func (_bfdgg rulingList )mergePrimary ()float64 {_dbeaa :=_bfdgg [0]._bfdfd ;
for _ ,_cece :=range _bfdgg [1:]{_dbeaa +=_cece ._bfdfd ;};return _dbeaa /float64 (len (_bfdgg ));};func (_cfef *textPara )depth ()float64 {if _cfef ._acgb {return -1.0;};if len (_cfef ._gdff )> 0{return _cfef ._gdff [0]._dfbf ;};return _cfef ._fdcc .depth ();
};

// Marks returns the TextMark collection for a page. It represents all the text on the page.
func (_ccef PageText )Marks ()*TextMarkArray {return &TextMarkArray {_eaf :_ccef ._fge }};func (_dede paraList )extractTables (_cbbf []gridTiling )paraList {if _ffda {_f .Log .Debug ("\u0065\u0078\u0074r\u0061\u0063\u0074\u0054\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_dede ));
};if len (_dede )< _cacd {return _dede ;};_bacdg :=_dede .findTables (_cbbf );if _ffda {_f .Log .Info ("c\u006f\u006d\u0062\u0069\u006e\u0065d\u0020\u0074\u0061\u0062\u006c\u0065s\u0020\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_bacdg ));
for _agdf ,_eacc :=range _bacdg {_eacc .log (_ac .Sprintf ("c\u006f\u006d\u0062\u0069\u006e\u0065\u0064\u0020\u0025\u0064",_agdf ));};};return _dede .applyTables (_bacdg );};func _gccdg (_ffedg []*textMark ,_ggac _cf .PdfRectangle )*textWord {_gddf :=_ffedg [0].PdfRectangle ;
_efgcd :=_ffedg [0]._eggg ;for _ ,_ffdbc :=range _ffedg [1:]{_gddf =_gdfb (_gddf ,_ffdbc .PdfRectangle );if _ffdbc ._eggg > _efgcd {_efgcd =_ffdbc ._eggg ;};};return &textWord {PdfRectangle :_gddf ,_efbfe :_ffedg ,_cbcb :_ggac .Ury -_gddf .Lly ,_addg :_efgcd };
};func (_ecdc *wordBag )pullWord (_bdeb *textWord ,_aeed int ,_edcf map[int ]map[*textWord ]struct{}){_ecdc .PdfRectangle =_gdfb (_ecdc .PdfRectangle ,_bdeb .PdfRectangle );if _bdeb ._addg > _ecdc ._afae {_ecdc ._afae =_bdeb ._addg ;};_ecdc ._gagc [_aeed ]=append (_ecdc ._gagc [_aeed ],_bdeb );
_edcf [_aeed ][_bdeb ]=struct{}{};};type intSet map[int ]struct{};

// ExtractText processes and extracts all text data in content streams and returns as a string.
// It takes into account character encodings in the PDF file, which are decoded by
// CharcodeBytesToUnicode.
// Characters that can't be decoded are replaced with MissingCodeRune ('\ufffd' = ï¿½).
func (_dbd *Extractor )ExtractText ()(string ,error ){_bdd ,_ ,_ ,_bga :=_dbd .ExtractTextWithStats ();return _bdd ,_bga ;};func (_eefe *textLine )endsInHyphen ()bool {_dgg :=_eefe ._badd [len (_eefe ._badd )-1];_ebca :=_dgg ._ffcba ;_daec ,_eaga :=_d .DecodeLastRuneInString (_ebca );
if _eaga <=0||!_aa .Is (_aa .Hyphen ,_daec ){return false ;};if _dgg ._cged &&_bgggd (_ebca ){return true ;};return _bgggd (_eefe .text ());};type compositeCell struct{_cf .PdfRectangle ;paraList ;};func _dbagc (_cafbc []compositeCell )[]float64 {var _eecge []*textLine ;
_adba :=0;for _ ,_gbdd :=range _cafbc {_adba +=len (_gbdd .paraList );_eecge =append (_eecge ,_gbdd .lines ()...);};_ee .Slice (_eecge ,func (_dbccd ,_dfdfd int )bool {_adbc ,_ggfdb :=_eecge [_dbccd ],_eecge [_dfdfd ];_cagea ,_gbdg :=_adbc ._dfbf ,_ggfdb ._dfbf ;
if !_ggbgb (_cagea -_gbdg ){return _cagea < _gbdg ;};return _adbc .Llx < _ggfdb .Llx ;});if _ffda {_ac .Printf ("\u0020\u0020\u0020 r\u006f\u0077\u0042\u006f\u0072\u0064\u0065\u0072\u0073:\u0020%\u0064 \u0070a\u0072\u0061\u0073\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",_adba ,len (_eecge ));
for _gcdg ,_cfda :=range _eecge {_ac .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_gcdg ,_cfda );};};var _cafg []float64 ;_bdceg :=_eecge [0];var _dcgd [][]*textLine ;_dcfgg :=[]*textLine {_bdceg };for _adfab ,_gggfg :=range _eecge [1:]{if _gggfg .Ury < _bdceg .Lly {_ddfe :=0.5*(_gggfg .Ury +_bdceg .Lly );
if _ffda {_ac .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u003c\u0020\u0025\u0036.\u0032f\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u003d\u0025\u0036\u002e\u0032\u0066\u000a"+"\u0009\u0020\u0071\u003d\u0025\u0073\u000a\u0009\u0020p\u003d\u0025\u0073\u000a",_adfab ,_gggfg .Ury ,_bdceg .Lly ,_ddfe ,_bdceg ,_gggfg );
};_cafg =append (_cafg ,_ddfe );_dcgd =append (_dcgd ,_dcfgg );_dcfgg =nil ;};_dcfgg =append (_dcfgg ,_gggfg );if _gggfg .Lly < _bdceg .Lly {_bdceg =_gggfg ;};};if len (_dcfgg )> 0{_dcgd =append (_dcgd ,_dcfgg );};if _ffda {_ac .Printf (" \u0020\u0020\u0020\u0020\u0020\u0020 \u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073\u003d%\u0036.\u0032\u0066\u000a",_cafg );
};if _ffda {_f .Log .Info ("\u0072\u006f\u0077\u003d\u0025\u0064",len (_cafbc ));for _gfgf ,_eabd :=range _cafbc {_ac .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gfgf ,_eabd );};_f .Log .Info ("\u0067r\u006f\u0075\u0070\u0073\u003d\u0025d",len (_dcgd ));
for _addff ,_cfgb :=range _dcgd {_ac .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0064\u000a",_addff ,len (_cfgb ));for _geeac ,_bdfb :=range _cfgb {_ac .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_geeac ,_bdfb );};};};_fddba :=true ;
for _bfcab ,_bfgd :=range _dcgd {_bacg :=true ;for _gcdf ,_dfdca :=range _cafbc {if _ffda {_ac .Printf ("\u0020\u0020\u0020\u007e\u007e\u007e\u0067\u0072\u006f\u0075\u0070\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0020\u0063\u0065\u006cl\u0020\u0025\u0064\u0020\u006ff\u0020\u0025d\u0020\u0025\u0073\u000a",_bfcab ,len (_dcgd ),_gcdf ,len (_cafbc ),_dfdca );
};if !_dfdca .hasLines (_bfgd ){if _ffda {_ac .Printf ("\u0020\u0020\u0020\u0021\u0021\u0021\u0067\u0072\u006f\u0075\u0070\u0020\u0025d\u0020\u006f\u0066\u0020\u0025\u0064 \u0063\u0065\u006c\u006c\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064 \u004f\u0055\u0054\u000a",_bfcab ,len (_dcgd ),_gcdf ,len (_cafbc ));
};_bacg =false ;break ;};};if !_bacg {_fddba =false ;break ;};};if !_fddba {if _ffda {_f .Log .Info ("\u0072\u006f\u0077\u0020\u0063o\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u0020\u0064\u006f\u006e\u0027\u0074 \u0073\u0070\u0061\u006e\u0020\u0061\u006c\u006c\u0020\u0063\u0065\u006c\u006c\u0073\u0020\u0069\u006e\u0020\u0072\u006f\u0077\u002e\u0020\u0069\u0067\u006e\u006f\u0072\u0069\u006eg");
};_cafg =nil ;};if _ffda &&_cafg !=nil {_ac .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u002a\u002a*\u0072\u006f\u0077\u0043\u006f\u0072\u0072i\u0064\u006f\u0072\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u000a",_cafg );};return _cafg ;};
const (_degfd =false ;_fgb =false ;_egbd =false ;_adg =false ;_fac =false ;_aabgd =false ;_acbe =false ;_bfcd =false ;_ggfg =false ;_gcad =_ggfg &&true ;_aabf =_gcad &&false ;_acagc =_ggfg &&true ;_ffda =false ;_bcef =_ffda &&false ;_edfe =_ffda &&true ;
_agfd =false ;_gfeg =_agfd &&false ;_cgba =_agfd &&false ;_gcac =_agfd &&true ;_aeeff =_agfd &&false ;_fbee =_agfd &&false ;);func _fefb (_cdgcd float64 )int {var _faad int ;if _cdgcd >=0{_faad =int (_cdgcd /_aaga );}else {_faad =int (_cdgcd /_aaga )-1;
};return _faad ;};type wordBag struct{_cf .PdfRectangle ;_afae float64 ;_efag ,_fbgf rulingList ;_degg float64 ;_gagc map[int ][]*textWord ;};var (_dgde =map[rune ]string {0x0060:"\u0300",0x02CB:"\u0300",0x0027:"\u0301",0x00B4:"\u0301",0x02B9:"\u0301",0x02CA:"\u0301",0x005E:"\u0302",0x02C6:"\u0302",0x007E:"\u0303",0x02DC:"\u0303",0x00AF:"\u0304",0x02C9:"\u0304",0x02D8:"\u0306",0x02D9:"\u0307",0x00A8:"\u0308",0x00B0:"\u030a",0x02DA:"\u030a",0x02BA:"\u030b",0x02DD:"\u030b",0x02C7:"\u030c",0x02C8:"\u030d",0x0022:"\u030e",0x02BB:"\u0312",0x02BC:"\u0313",0x0486:"\u0313",0x055A:"\u0313",0x02BD:"\u0314",0x0485:"\u0314",0x0559:"\u0314",0x02D4:"\u031d",0x02D5:"\u031e",0x02D6:"\u031f",0x02D7:"\u0320",0x02B2:"\u0321",0x00B8:"\u0327",0x02CC:"\u0329",0x02B7:"\u032b",0x02CD:"\u0331",0x005F:"\u0332",0x204E:"\u0359"};
);func (_bfdb *textWord )addDiacritic (_efgcb string ){_edggf :=_bfdb ._efbfe [len (_bfdb ._efbfe )-1];_edggf ._babe +=_efgcb ;_edggf ._babe =_ae .NFKC .String (_edggf ._babe );};func (_acagg intSet )add (_bcggd int ){_acagg [_bcggd ]=struct{}{}};func (_cgccb rulingList )toGrids ()[]rulingList {if _agfd {_f .Log .Info ("t\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0025\u0073",_cgccb );
};_adcbg :=_cgccb .intersections ();if _agfd {_f .Log .Info ("\u0074\u006f\u0047r\u0069\u0064\u0073\u003a \u0076\u0065\u0063\u0073\u003d\u0025\u0064 \u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003d\u0025\u0064\u0020",len (_cgccb ),len (_adcbg ));
for _ ,_befc :=range _fcgab (_adcbg ){_ac .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_befc ,_adcbg [_befc ]);};};_edbf :=make (map[int ]intSet ,len (_cgccb ));for _adda :=range _cgccb {_cede :=_cgccb .connections (_adcbg ,_adda );if len (_cede )> 0{_edbf [_adda ]=_cede ;
};};if _agfd {_f .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0063\u006fn\u006e\u0065\u0063\u0074s=\u0025\u0064",len (_edbf ));for _ ,_gdgeb :=range _fcgab (_edbf ){_ac .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_gdgeb ,_edbf [_gdgeb ]);
};};_acaa :=_ffbg (len (_cgccb ),func (_gddc ,_ebdc int )bool {_ffbbg ,_ggbbe :=len (_edbf [_gddc ]),len (_edbf [_ebdc ]);if _ffbbg !=_ggbbe {return _ffbbg > _ggbbe ;};return _cgccb .comp (_gddc ,_ebdc );});if _agfd {_f .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u006f\u0072d\u0065\u0072\u0069\u006eg=\u0025\u0076",_acaa );
};_aabcc :=[][]int {{_acaa [0]}};_caagf :for _ ,_gcbg :=range _acaa [1:]{for _bcefe ,_aaef :=range _aabcc {for _ ,_fbgfd :=range _aaef {if _edbf [_fbgfd ].has (_gcbg ){_aabcc [_bcefe ]=append (_aaef ,_gcbg );continue _caagf ;};};};_aabcc =append (_aabcc ,[]int {_gcbg });
};if _agfd {_f .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020i\u0067\u0072i\u0064\u0073\u003d\u0025\u0076",_aabcc );};_ee .SliceStable (_aabcc ,func (_bgfb ,_adgb int )bool {return len (_aabcc [_bgfb ])> len (_aabcc [_adgb ])});for _ ,_cace :=range _aabcc {_ee .Slice (_cace ,func (_aceg ,_eadca int )bool {return _cgccb .comp (_cace [_aceg ],_cace [_eadca ])});
};_bgef :=make ([]rulingList ,len (_aabcc ));for _cggee ,_cdcgg :=range _aabcc {_deaac :=make (rulingList ,len (_cdcgg ));for _cddb ,_ggde :=range _cdcgg {_deaac [_cddb ]=_cgccb [_ggde ];};_bgef [_cggee ]=_deaac ;};if _agfd {_f .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020g\u0072\u0069d\u0073\u003d\u0025\u002b\u0076",_bgef );
};var _ggfe []rulingList ;for _ ,_cabc :=range _bgef {if _ffdb ,_dcac :=_cabc .isActualGrid ();_dcac {_cabc =_ffdb ;_cabc =_cabc .snapToGroups ();_ggfe =append (_ggfe ,_cabc );};};if _agfd {_gdbe ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0061\u0063t\u0075\u0061\u006c\u0047ri\u0064\u0073",_ggfe );
_f .Log .Info ("\u0074\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0067\u0072\u0069\u0064\u0073\u003d%\u0064 \u0061\u0063\u0074\u0075\u0061\u006c\u0047\u0072\u0069\u0064\u0073\u003d\u0025\u0064",len (_bgef ),len (_ggfe ));};return _ggfe ;};func (_dceb compositeCell )parasBBox ()(paraList ,_cf .PdfRectangle ){return _dceb .paraList ,_dceb .PdfRectangle ;
};func (_fbfbd *textPara )bbox ()_cf .PdfRectangle {return _fbfbd .PdfRectangle };func (_afgb *textObject )setTextLeading (_cfa float64 ){if _afgb ==nil {return ;};_afgb ._add ._fef =_cfa ;};

// String returns a description of `k`.
func (_feag markKind )String ()string {_cbfe ,_fefeg :=_bcfg [_feag ];if !_fefeg {return _ac .Sprintf ("\u004e\u006f\u0074\u0020\u0061\u0020\u006d\u0061\u0072k\u003a\u0020\u0025\u0064",_feag );};return _cbfe ;};func (_ccb *stateStack )empty ()bool {return len (*_ccb )==0};
func (_bage *shapesState )drawRectangle (_aeef ,_agg ,_cge ,_gdc float64 ){if _fac {_gaa :=_bage .devicePoint (_aeef ,_agg );_deab :=_bage .devicePoint (_aeef +_cge ,_agg +_gdc );_eadf :=_cf .PdfRectangle {Llx :_gaa .X ,Lly :_gaa .Y ,Urx :_deab .X ,Ury :_deab .Y };
_f .Log .Info ("d\u0072a\u0077\u0052\u0065\u0063\u0074\u0061\u006e\u0067l\u0065\u003a\u0020\u00256.\u0032\u0066",_eadf );};_bage .newSubPath ();_bage .moveTo (_aeef ,_agg );_bage .lineTo (_aeef +_cge ,_agg );_bage .lineTo (_aeef +_cge ,_agg +_gdc );_bage .lineTo (_aeef ,_agg +_gdc );
_bage .closePath ();};func (_bffca *textTable )depth ()float64 {_bbca :=1e10;for _cggf :=0;_cggf < _bffca ._fbca ;_cggf ++{_fgfcf :=_bffca .get (_cggf ,0);if _fgfcf ==nil ||_fgfcf ._acgb {continue ;};_bbca =_ea .Min (_bbca ,_fgfcf .depth ());};return _bbca ;
};

// String returns a description of `state`.
func (_fdae *textState )String ()string {_efga :="\u005bN\u004f\u0054\u0020\u0053\u0045\u0054]";if _fdae ._faf !=nil {_efga =_fdae ._faf .BaseFont ();};return _ac .Sprintf ("\u0074\u0063\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0077\u003d\u0025\u002e\u0032\u0066 \u0074f\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u003d\u0025\u0071",_fdae ._dgac ,_fdae ._cbcf ,_fdae ._eed ,_efga );
};

// PageImages represents extracted images on a PDF page with spatial information:
// display position and size.
type PageImages struct{Images []ImageMark ;};func (_efdc lineRuling )asRuling ()(*ruling ,bool ){_gggg :=ruling {_edaga :_efdc ._cdbd ,Color :_efdc .Color ,_deag :_acbc };switch _efdc ._cdbd {case _afb :_gggg ._bfdfd =_efdc .xMean ();_gggg ._dcae =_ea .Min (_efdc ._gadc .Y ,_efdc ._aadfb .Y );
_gggg ._ddgfa =_ea .Max (_efdc ._gadc .Y ,_efdc ._aadfb .Y );case _deba :_gggg ._bfdfd =_efdc .yMean ();_gggg ._dcae =_ea .Min (_efdc ._gadc .X ,_efdc ._aadfb .X );_gggg ._ddgfa =_ea .Max (_efdc ._gadc .X ,_efdc ._aadfb .X );default:_f .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_efdc ._cdbd );
return nil ,false ;};return &_gggg ,true ;};

// ImageExtractOptions contains options for controlling image extraction from
// PDF pages.
type ImageExtractOptions struct{IncludeInlineStencilMasks bool ;};func (_eadg *shapesState )stroke (_fffe *[]pathSection ){_dfdd :=pathSection {_ffcb :_eadg ._dcd ,Color :_eadg ._ecaa .getStrokeColor ()};*_fffe =append (*_fffe ,_dfdd );if _agfd {_ac .Printf ("\u0020 \u0020\u0020S\u0054\u0052\u004fK\u0045\u003a\u0020\u0025\u0064\u0020\u0073t\u0072\u006f\u006b\u0065\u0073\u0020s\u0073\u003d\u0025\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d%\u002b\u0076\u0020\u0025\u0036\u002e\u0032\u0066\u000a",len (*_fffe ),_eadg ,_eadg ._ecaa .getStrokeColor (),_dfdd .bbox ());
if _gfeg {for _aed ,_gedg :=range _eadg ._dcd {_ac .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_aed ,_gedg );if _aed ==10{break ;};};};};};func _agaec (_fdec int ,_aeae map[int ][]float64 )([]int ,int ){_gebdd :=make ([]int ,_fdec );_aeffe :=0;
for _egebc :=0;_egebc < _fdec ;_egebc ++{_gebdd [_egebc ]=_aeffe ;_aeffe +=len (_aeae [_egebc ])+1;};return _gebdd ,_aeffe ;};func (_bab pathSection )bbox ()_cf .PdfRectangle {_ffb :=_bab ._ffcb [0]._cfd [0];_agga :=_cf .PdfRectangle {Llx :_ffb .X ,Urx :_ffb .X ,Lly :_ffb .Y ,Ury :_ffb .Y };
_bdfc :=func (_dgdcb _b .Point ){if _dgdcb .X < _agga .Llx {_agga .Llx =_dgdcb .X ;}else if _dgdcb .X > _agga .Urx {_agga .Urx =_dgdcb .X ;};if _dgdcb .Y < _agga .Lly {_agga .Lly =_dgdcb .Y ;}else if _dgdcb .Y > _agga .Ury {_agga .Ury =_dgdcb .Y ;};};for _ ,_fgfc :=range _bab ._ffcb [0]._cfd [1:]{_bdfc (_fgfc );
};for _ ,_dgbd :=range _bab ._ffcb [1:]{for _ ,_ddec :=range _dgbd ._cfd {_bdfc (_ddec );};};return _agga ;};func (_bgag rulingList )tidied (_faecb string )rulingList {_cfcb :=_bgag .removeDuplicates ();_cfcb .log ("\u0075n\u0069\u0071\u0075\u0065\u0073");
_gbaec :=_cfcb .snapToGroups ();if _gbaec ==nil {return nil ;};_gbaec .sort ();if _agfd {_f .Log .Info ("\u0074\u0069\u0064i\u0065\u0064\u003a\u0020\u0025\u0071\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u0075\u006e\u0069\u0071\u0075\u0065\u0073\u003d\u0025\u0064\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0064\u003d\u0025\u0064",_faecb ,len (_bgag ),len (_cfcb ),len (_gbaec ));
};_gbaec .log ("\u0063o\u0061\u006c\u0065\u0073\u0063\u0065d");return _gbaec ;};func (_fegd *textObject )nextLine (){_fegd .moveLP (0,-_fegd ._add ._fef )};func _begf (_ggcf bounded )float64 {return -_ggcf .bbox ().Lly };func _aacd (_cdbc []float64 ,_ccae ,_gabe float64 )[]float64 {_dagde ,_ddgb :=_ccae ,_gabe ;
if _ddgb < _dagde {_dagde ,_ddgb =_ddgb ,_dagde ;};_bfab :=make ([]float64 ,0,len (_cdbc )+2);_bfab =append (_bfab ,_ccae );for _ ,_cbfeg :=range _cdbc {if _cbfeg <=_dagde {continue ;}else if _cbfeg >=_ddgb {break ;};_bfab =append (_bfab ,_cbfeg );};_bfab =append (_bfab ,_gabe );
return _bfab ;};

// ImageMark represents an image drawn on a page and its position in device coordinates.
// All coordinates are in device coordinates.
type ImageMark struct{Image *_cf .Image ;

// Dimensions of the image as displayed in the PDF.
Width float64 ;Height float64 ;

// Position of the image in PDF coordinates (lower left corner).
X float64 ;Y float64 ;

// Angle in degrees, if rotated.
Angle float64 ;};var _bcfg =map[markKind ]string {_acbc :"\u0073\u0074\u0072\u006f\u006b\u0065",_ddbg :"\u0066\u0069\u006c\u006c",_fddbf :"\u0061u\u0067\u006d\u0065\u006e\u0074"};func (_ccdee *textTable )reduceTiling (_ebdge gridTiling ,_cafeg float64 )*textTable {_fdff :=make ([]int ,0,_ccdee ._agfc );
_cfbe :=make ([]int ,0,_ccdee ._fbca );_ececd :=_ebdge ._efgea ;_cgbbb :=_ebdge ._aebe ;for _adab :=0;_adab < _ccdee ._agfc ;_adab ++{_aaec :=_adab > 0&&_ea .Abs (_cgbbb [_adab -1]-_cgbbb [_adab ])< _cafeg &&_ccdee .emptyRow (_adab );if !_aaec {_fdff =append (_fdff ,_adab );
};};for _eggff :=0;_eggff < _ccdee ._fbca ;_eggff ++{_gebbg :=_eggff < _ccdee ._fbca -1&&_ea .Abs (_ececd [_eggff +1]-_ececd [_eggff ])< _cafeg &&_ccdee .emptyColumn (_eggff );if !_gebbg {_cfbe =append (_cfbe ,_eggff );};};if len (_fdff )==_ccdee ._agfc &&len (_cfbe )==_ccdee ._fbca {return _ccdee ;
};_dbcb :=textTable {_aeaa :_ccdee ._aeaa ,_fbca :len (_cfbe ),_agfc :len (_fdff ),_ccad :make (map[uint64 ]compositeCell ,len (_cfbe )*len (_fdff ))};if _ffda {_f .Log .Info ("\u0072\u0065\u0064\u0075c\u0065\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0025d\u0078%\u0064\u0020\u002d\u003e\u0020\u0025\u0064x\u0025\u0064",_ccdee ._fbca ,_ccdee ._agfc ,len (_cfbe ),len (_fdff ));
_f .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_cfbe );_f .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_fdff );};for _eedeeb ,_fbae :=range _fdff {for _ecfa ,_dfec :=range _cfbe {_babg ,_afgd :=_ccdee .getComposite (_dfec ,_fbae );
if len (_babg )==0{continue ;};if _ffda {_ac .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_ecfa ,_eedeeb ,_dfec ,_fbae ,_ecafe (_babg .merge ().text (),50));};_dbcb .putComposite (_ecfa ,_eedeeb ,_babg ,_afgd );
};};return &_dbcb ;};type fontEntry struct{_dbe *_cf .PdfFont ;_dbea int64 ;};func _bcge (_ebdag []*textWord ,_facd *textWord )[]*textWord {for _eaefag ,_eggge :=range _ebdag {if _eggge ==_facd {return _aefdf (_ebdag ,_eaefag );};};_f .Log .Error ("\u0072\u0065\u006d\u006f\u0076e\u0057\u006f\u0072\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u0073\u0020\u0064o\u0065\u0073\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",_facd );
return nil ;};func _dcef (_cebbd map[float64 ]gridTile )[]float64 {_bbae :=make ([]float64 ,0,len (_cebbd ));for _ggdf :=range _cebbd {_bbae =append (_bbae ,_ggdf );};_ee .Float64s (_bbae );return _bbae ;};func (_bdbg rectRuling )checkWidth (_faca ,_bdae float64 )(float64 ,bool ){_fafa :=_bdae -_faca ;
_cgab :=_fafa <=_fedd ;return _fafa ,_cgab ;};func (_aceab *textTable )compositeColCorridors ()map[int ][]float64 {_daea :=make (map[int ][]float64 ,_aceab ._fbca );if _ffda {_f .Log .Info ("\u0063\u006f\u006d\u0070o\u0073\u0069\u0074\u0065\u0043\u006f\u006c\u0043\u006f\u0072r\u0069d\u006f\u0072\u0073\u003a\u0020\u0077\u003d%\u0064\u0020",_aceab ._fbca );
};for _abagd :=0;_abagd < _aceab ._fbca ;_abagd ++{_daea [_abagd ]=nil ;};return _daea ;};func _cde (_bbe _b .Point )_b .Matrix {return _b .TranslationMatrix (_bbe .X ,_bbe .Y )};func (_gba *Extractor )extractPageText (_dba string ,_acc *_cf .PdfPageResources ,_da _b .Matrix ,_fde int )(*PageText ,int ,int ,error ){_f .Log .Trace ("\u0065x\u0074\u0072\u0061\u0063t\u0050\u0061\u0067\u0065\u0054e\u0078t\u003a \u006c\u0065\u0076\u0065\u006c\u003d\u0025d",_fde );
_efd :=&PageText {_fafg :_gba ._aaa };_bffe :=_adb (_gba ._aaa );_cagg :=stateStack {&_bffe };_edca :=_fea (_gba ,_acc ,_cea .GraphicsState {},&_bffe ,&_cagg );_fae :=shapesState {_aaee :_da ,_bdab :_b .IdentityMatrix (),_ecaa :_edca };var _cd bool ;if _fde > _eee {_bac :=_e .New ("\u0066\u006f\u0072\u006d s\u0074\u0061\u0063\u006b\u0020\u006f\u0076\u0065\u0072\u0066\u006c\u006f\u0077");
_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0065\u0078\u0074\u0072\u0061\u0063\u0074\u0050\u0061\u0067\u0065\u0054\u0065\u0078\u0074\u002e\u0020\u0072\u0065\u0063u\u0072\u0073\u0069\u006f\u006e\u0020\u006c\u0065\u0076\u0065\u006c\u003d\u0025\u0064 \u0065r\u0072\u003d\u0025\u0076",_fde ,_bac );
return _efd ,_bffe ._bcaf ,_bffe ._dge ,_bac ;};_bed :=_cea .NewContentStreamParser (_dba );_faag ,_efg :=_bed .Parse ();if _efg !=nil {_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020e\u0078\u0074\u0072a\u0063\u0074\u0050\u0061g\u0065\u0054\u0065\u0078\u0074\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_efg );
return _efd ,_bffe ._bcaf ,_bffe ._dge ,_efg ;};_fbf :=_cea .NewContentStreamProcessor (*_faag );_fbf .AddHandler (_cea .HandlerConditionEnumAllOperands ,"",func (_bca *_cea .ContentStreamOperation ,_gcf _cea .GraphicsState ,_cg *_cf .PdfPageResources )error {_ged :=_bca .Operand ;
if _egbd {_f .Log .Info ("\u0026&\u0026\u0020\u006f\u0070\u003d\u0025s",_bca );};switch _ged {case "\u0071":if _fac {_f .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_fae ._bdab );};_cagg .push (&_bffe );case "\u0051":if !_cagg .empty (){if len (_cagg )>=2{_cagg .pop ();
};_bffe =*_cagg .top ();};_fae ._bdab =_gcf .CTM ;if _fac {_f .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_fae ._bdab );};case "\u0042\u0054":if _cd {_f .Log .Debug ("\u0042\u0054\u0020\u0063\u0061\u006c\u006c\u0065\u0064\u0020\u0077\u0068\u0069\u006c\u0065 \u0069n\u0020\u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
_efd ._cgf =append (_efd ._cgf ,_edca ._abd ...);};_cd =true ;_eec :=_gcf ;_eec .CTM =_da .Mult (_eec .CTM );_edca =_fea (_gba ,_cg ,_eec ,&_bffe ,&_cagg );_fae ._ecaa =_edca ;case "\u0045\u0054":if !_cd {_f .Log .Debug ("\u0045\u0054\u0020ca\u006c\u006c\u0065\u0064\u0020\u006f\u0075\u0074\u0073i\u0064e\u0020o\u0066 \u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
};_cd =false ;_efd ._cgf =append (_efd ._cgf ,_edca ._abd ...);_edca .reset ();case "\u0054\u002a":_edca .nextLine ();case "\u0054\u0064":if _deg ,_eaac :=_edca .checkOp (_bca ,2,true );!_deg {_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_eaac );
return _eaac ;};_dgf ,_gdgc ,_agd :=_eagbe (_bca .Params );if _agd !=nil {return _agd ;};_edca .moveText (_dgf ,_gdgc );case "\u0054\u0044":if _gcc ,_gedd :=_edca .checkOp (_bca ,2,true );!_gcc {_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gedd );
return _gedd ;};_bag ,_cdc ,_cbc :=_eagbe (_bca .Params );if _cbc !=nil {_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cbc );return _cbc ;};_edca .moveTextSetLeading (_bag ,_cdc );case "\u0054\u006a":if _gff ,_bced :=_edca .checkOp (_bca ,1,true );
!_gff {_f .Log .Debug ("\u0045\u0052\u0052\u004fR:\u0020\u0054\u006a\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0065\u0072\u0072\u003d%\u0076",_bca ,_bced );return _bced ;};_eaaa ,_abe :=_ce .GetStringBytes (_bca .Params [0]);if !_abe {_f .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020T\u006a\u0020o\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074S\u0074\u0072\u0069\u006e\u0067\u0042\u0079\u0074\u0065\u0073\u0020\u0066a\u0069\u006c\u0065\u0064",_bca );
return _ce .ErrTypeError ;};return _edca .showText (_eaaa );case "\u0054\u004a":if _bdg ,_dfd :=_edca .checkOp (_bca ,1,true );!_bdg {_f .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dfd );return _dfd ;
};_ddg ,_gac :=_ce .GetArray (_bca .Params [0]);if !_gac {_f .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_bca );
return _efg ;};return _edca .showTextAdjusted (_ddg );case "\u0027":if _cadg ,_gacf :=_edca .checkOp (_bca ,1,true );!_cadg {_f .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0027\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gacf );return _gacf ;};_eebf ,_caa :=_ce .GetStringBytes (_bca .Params [0]);
if !_caa {_f .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020'\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_bca );return _ce .ErrTypeError ;};_edca .nextLine ();return _edca .showText (_eebf );
case "\u0022":if _ccc ,_dea :=_edca .checkOp (_bca ,3,true );!_ccc {_f .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0022\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dea );return _dea ;};_faeg ,_bcag ,_gacfb :=_eagbe (_bca .Params [:2]);if _gacfb !=nil {return _gacfb ;
};_ggc ,_fded :=_ce .GetStringBytes (_bca .Params [2]);if !_fded {_f .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020\"\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_bca );
return _ce .ErrTypeError ;};_edca .setCharSpacing (_faeg );_edca .setWordSpacing (_bcag );_edca .nextLine ();return _edca .showText (_ggc );case "\u0054\u004c":_ffg ,_eaaac :=_ggba (_bca );if _eaaac !=nil {_f .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004c\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_eaaac );
return _eaaac ;};_edca .setTextLeading (_ffg );case "\u0054\u0063":_ceb ,_cgb :=_ggba (_bca );if _cgb !=nil {_f .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0063\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cgb );return _cgb ;};_edca .setCharSpacing (_ceb );
case "\u0054\u0066":if _bbf ,_efa :=_edca .checkOp (_bca ,2,true );!_bbf {_f .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0066\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_efa );return _efa ;};_eeeg ,_eb :=_ce .GetNameVal (_bca .Params [0]);if !_eb {_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u004ea\u006d\u0065\u0056\u0061\u006c\u0020\u0066a\u0069\u006c\u0065\u0064",_bca );
return _ce .ErrTypeError ;};_bcc ,_cafe :=_ce .GetNumberAsFloat (_bca .Params [1]);if !_eb {_f .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u0046\u006c\u006f\u0061\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065d\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bca ,_cafe );
return _cafe ;};_cafe =_edca .setFont (_eeeg ,_bcc );_edca ._dbc =_ge .Is (_cafe ,_ce .ErrNotSupported );if _cafe !=nil &&!_edca ._dbc {return _cafe ;};case "\u0054\u006d":if _fcb ,_egf :=_edca .checkOp (_bca ,6,true );!_fcb {_f .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u006d\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_egf );
return _egf ;};_dee ,_ace :=_ce .GetNumbersAsFloat (_bca .Params );if _ace !=nil {_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ace );return _ace ;};_edca .setTextMatrix (_dee );case "\u0054\u0072":if _bdc ,_bcg :=_edca .checkOp (_bca ,1,true );
!_bdc {_f .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0072\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bcg );return _bcg ;};_cfbd ,_abfc :=_ce .GetIntVal (_bca .Params [0]);if !_abfc {_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0072\u0020\u006f\u0070\u003d\u0025\u0073 \u0047e\u0074\u0049\u006e\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_bca );
return _ce .ErrTypeError ;};_edca .setTextRenderMode (_cfbd );case "\u0054\u0073":if _bee ,_cae :=_edca .checkOp (_bca ,1,true );!_bee {_f .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0073\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cae );return _cae ;
};_abb ,_dfea :=_ce .GetNumberAsFloat (_bca .Params [0]);if _dfea !=nil {_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dfea );return _dfea ;};_edca .setTextRise (_abb );case "\u0054\u0077":if _dga ,_geg :=_edca .checkOp (_bca ,1,true );
!_dga {_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_geg );return _geg ;};_aeg ,_agdd :=_ce .GetNumberAsFloat (_bca .Params [0]);if _agdd !=nil {_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_agdd );
return _agdd ;};_edca .setWordSpacing (_aeg );case "\u0054\u007a":if _ceag ,_bfb :=_edca .checkOp (_bca ,1,true );!_ceag {_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bfb );return _bfb ;};_beeg ,_beb :=_ce .GetNumberAsFloat (_bca .Params [0]);
if _beb !=nil {_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_beb );return _beb ;};_edca .setHorizScaling (_beeg );case "\u0063\u006d":_fae ._bdab =_gcf .CTM ;if _fae ._bdab .Singular (){_bcdf :=_b .IdentityMatrix ().Translate (_fae ._bdab .Translation ());
_f .Log .Debug ("S\u0069n\u0067\u0075\u006c\u0061\u0072\u0020\u0063\u0074m\u003d\u0025\u0073\u2192%s",_fae ._bdab ,_bcdf );_fae ._bdab =_bcdf ;};if _fac {_f .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_fae ._bdab );};case "\u006d":if len (_bca .Params )!=2{_f .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_cfb );
return nil ;};_ddeb ,_dfg :=_ce .GetNumbersAsFloat (_bca .Params );if _dfg !=nil {return _dfg ;};_f .Log .Debug ("\u004d\u006f\u0076\u0065\u0020\u0074\u006f\u003a\u0020\u0025\u002e\u0032\u0066",_ddeb );_fae .moveTo (_ddeb [0],_ddeb [1]);case "\u006c":if len (_bca .Params )!=2{_f .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_cfb );
return nil ;};_aba ,_abag :=_ce .GetNumbersAsFloat (_bca .Params );if _abag !=nil {return _abag ;};_fae .lineTo (_aba [0],_aba [1]);case "\u0063":if len (_bca .Params )!=6{return _cfb ;};_gefa ,_agf :=_ce .GetNumbersAsFloat (_bca .Params );if _agf !=nil {return _agf ;
};_f .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_gefa );_fae .cubicTo (_gefa [0],_gefa [1],_gefa [2],_gefa [3],_gefa [4],_gefa [5]);case "\u0076","\u0079":if len (_bca .Params )!=4{return _cfb ;
};_gfg ,_fda :=_ce .GetNumbersAsFloat (_bca .Params );if _fda !=nil {return _fda ;};_f .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_gfg );_fae .quadraticTo (_gfg [0],_gfg [1],_gfg [2],_gfg [3]);
case "\u0068":_fae .closePath ();case "\u0072\u0065":if len (_bca .Params )!=4{return _cfb ;};_ffd ,_cca :=_ce .GetNumbersAsFloat (_bca .Params );if _cca !=nil {return _cca ;};_fae .drawRectangle (_ffd [0],_ffd [1],_ffd [2],_ffd [3]);_fae .closePath ();
case "\u0053":_fae .stroke (&_efd ._gag );_fae .clearPath ();case "\u0073":_fae .closePath ();_fae .stroke (&_efd ._gag );_fae .clearPath ();case "\u0046":_fae .fill (&_efd ._abce );_fae .clearPath ();case "\u0066","\u0066\u002a":_fae .closePath ();_fae .fill (&_efd ._abce );
_fae .clearPath ();case "\u0042","\u0042\u002a":_fae .fill (&_efd ._abce );_fae .stroke (&_efd ._gag );_fae .clearPath ();case "\u0062","\u0062\u002a":_fae .closePath ();_fae .fill (&_efd ._abce );_fae .stroke (&_efd ._gag );_fae .clearPath ();case "\u006e":_fae .clearPath ();
case "\u0044\u006f":if len (_bca .Params )==0{_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0058\u004fbj\u0065c\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006f\u0070\u0065\u0072\u0061n\u0064\u0020\u0066\u006f\u0072\u0020\u0044\u006f\u0020\u006f\u0070\u0065\u0072\u0061\u0074\u006f\u0072.\u0020\u0047\u006f\u0074\u0020\u0025\u002b\u0076\u002e",_bca .Params );
return _ce .ErrRangeError ;};_cfc ,_bae :=_ce .GetName (_bca .Params [0]);if !_bae {_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0044\u006f\u0020\u006f\u0070e\u0072a\u0074\u006f\u0072\u0020\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006fp\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u002b\u0076\u002e",_bca .Params [0]);
return _ce .ErrTypeError ;};_ ,_cgc :=_cg .GetXObjectByName (*_cfc );if _cgc !=_cf .XObjectTypeForm {break ;};_aca ,_bae :=_gba ._fb [_cfc .String ()];if !_bae {_bbc ,_eacb :=_cg .GetXObjectFormByName (*_cfc );if _eacb !=nil {_f .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_eacb );
return _eacb ;};_bcad ,_eacb :=_bbc .GetContentStream ();if _eacb !=nil {_f .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_eacb );return _eacb ;};_dca :=_bbc .Resources ;if _dca ==nil {_dca =_cg ;};_age ,_bde ,_fag ,_eacb :=_gba .extractPageText (string (_bcad ),_dca ,_da .Mult (_gcf .CTM ),_fde +1);
if _eacb !=nil {_f .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_eacb );return _eacb ;};_aca =textResult {*_age ,_bde ,_fag };_gba ._fb [_cfc .String ()]=_aca ;};_fae ._bdab =_gcf .CTM ;if _fac {_f .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_fae ._bdab );
};_efd ._cgf =append (_efd ._cgf ,_aca ._agfa ._cgf ...);_efd ._gag =append (_efd ._gag ,_aca ._agfa ._gag ...);_efd ._abce =append (_efd ._abce ,_aca ._agfa ._abce ...);_bffe ._bcaf +=_aca ._dcga ;_bffe ._dge +=_aca ._aee ;case "\u0072\u0067","\u0067","\u006b","\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_edca ._faea .ColorspaceNonStroking =_gcf .ColorspaceNonStroking ;
_edca ._faea .ColorNonStroking =_gcf .ColorNonStroking ;case "\u0052\u0047","\u0047","\u004b","\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_edca ._faea .ColorspaceStroking =_gcf .ColorspaceStroking ;_edca ._faea .ColorStroking =_gcf .ColorStroking ;
};return nil ;});_efg =_fbf .Process (_acc );return _efd ,_bffe ._bcaf ,_bffe ._dge ,_efg ;};func _aaae (_affd string )bool {for _ ,_dfge :=range _affd {if !_aa .IsSpace (_dfge ){return false ;};};return true ;};func (_cfcc *ruling )alignsSec (_cdgb *ruling )bool {const _fbbe =_fedd +1.0;
return _cfcc ._dcae -_fbbe <=_cdgb ._ddgfa &&_cdgb ._dcae -_fbbe <=_cfcc ._ddgfa ;};func (_dcf *stateStack )top ()*textState {if _dcf .empty (){return nil ;};return (*_dcf )[_dcf .size ()-1];};func _ecaed (_feaeeb ,_gfea bounded )float64 {return _feaeeb .bbox ().Llx -_gfea .bbox ().Llx };
func _eagbe (_fdddf []_ce .PdfObject )(_ccabe ,_cagd float64 ,_gefaf error ){if len (_fdddf )!=2{return 0,0,_ac .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020o\u0066 \u0070\u0061\u0072\u0061\u006d\u0073\u003a \u0025\u0064",len (_fdddf ));
};_abdee ,_gefaf :=_ce .GetNumbersAsFloat (_fdddf );if _gefaf !=nil {return 0,0,_gefaf ;};return _abdee [0],_abdee [1],nil ;};func (_abgdb *textPara )isAtom ()*textTable {_accdf :=_abgdb ;_faab :=_abgdb ._fgfa ;_fbea :=_abgdb ._cage ;if !(_faab !=nil &&!_faab ._egceg &&_fbea !=nil &&!_fbea ._egceg ){return nil ;
};_ffdd :=_faab ._cage ;if !(_ffdd !=nil &&!_ffdd ._egceg &&_ffdd ==_fbea ._fgfa ){return nil ;};return _gefgg (_accdf ,_faab ,_fbea ,_ffdd );};func _dacb (_aada func (*wordBag ,*textWord ,float64 )bool ,_gcgd float64 )func (*wordBag ,*textWord )bool {return func (_agac *wordBag ,_bdfg *textWord )bool {return _aada (_agac ,_bdfg ,_gcgd )};
};func _aeb (_addea []pathSection )rulingList {_fgfe (_addea );if _agfd {_f .Log .Info ("\u006da\u006b\u0065\u0046\u0069l\u006c\u0052\u0075\u006c\u0069n\u0067s\u003a \u0025\u0064\u0020\u0066\u0069\u006c\u006cs",len (_addea ));};var _gcaa rulingList ;for _ ,_bdaga :=range _addea {for _ ,_gfee :=range _bdaga ._ffcb {if !_gfee .isQuadrilateral (){if _agfd {_f .Log .Error ("!\u0069s\u0051\u0075\u0061\u0064\u0072\u0069\u006c\u0061t\u0065\u0072\u0061\u006c: \u0025\u0073",_gfee );
};continue ;};if _fbgea ,_ebab :=_gfee .makeRectRuling (_bdaga .Color );_ebab {_gcaa =append (_gcaa ,_fbgea );}else {if _aeeff {_f .Log .Error ("\u0021\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0073",_gfee );
};};};};if _agfd {_f .Log .Info ("\u006d\u0061\u006b\u0065Fi\u006c\u006c\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0073",_gcaa .String ());};return _gcaa ;};func _cbbd (_baabc ,_bgfgb int )int {if _baabc < _bgfgb {return _baabc ;};return _bgfgb ;
};

// String returns a description of `b`.
func (_fec *wordBag )String ()string {var _ege []string ;for _ ,_cgbc :=range _fec .depthIndexes (){_eddf :=_fec ._gagc [_cgbc ];for _ ,_eafg :=range _eddf {_ege =append (_ege ,_eafg ._ffcba );};};return _ac .Sprintf ("\u0025.\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065=\u0025\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0025\u0071",_fec .PdfRectangle ,_fec ._afae ,len (_ege ),_ege );
};func (_deaf paraList )merge ()*textPara {_f .Log .Trace ("\u006d\u0065\u0072\u0067\u0065:\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_deaf ));
if len (_deaf )==0{return nil ;};_deaf .sortReadingOrder ();_bgcg :=_deaf [0].PdfRectangle ;_daba :=_deaf [0]._gdff ;for _ ,_dbgf :=range _deaf [1:]{_bgcg =_gdfb (_bgcg ,_dbgf .PdfRectangle );_daba =append (_daba ,_dbgf ._gdff ...);};return _cbca (_bgcg ,_daba );
};func (_ggcfb rulingList )splitSec ()[]rulingList {_ee .Slice (_ggcfb ,func (_edde ,_dgbb int )bool {_bega ,_eaag :=_ggcfb [_edde ],_ggcfb [_dgbb ];if _bega ._dcae !=_eaag ._dcae {return _bega ._dcae < _eaag ._dcae ;};return _bega ._ddgfa < _eaag ._ddgfa ;
});_acgbff :=make (map[*ruling ]struct{},len (_ggcfb ));_gdbec :=func (_bggb *ruling )rulingList {_cbdg :=rulingList {_bggb };_acgbff [_bggb ]=struct{}{};for _ ,_bddc :=range _ggcfb {if _ ,_gebbe :=_acgbff [_bddc ];_gebbe {continue ;};for _ ,_dadg :=range _cbdg {if _bddc .alignsSec (_dadg ){_cbdg =append (_cbdg ,_bddc );
_acgbff [_bddc ]=struct{}{};break ;};};};return _cbdg ;};_dagc :=[]rulingList {_gdbec (_ggcfb [0])};for _ ,_fgba :=range _ggcfb [1:]{if _ ,_egfb :=_acgbff [_fgba ];_egfb {continue ;};_dagc =append (_dagc ,_gdbec (_fgba ));};return _dagc ;};func _bbcd (_fdgg []TextMark ,_bdce *int )[]TextMark {_adcc :=_fdgg [len (_fdgg )-1];
_ffbb :=[]rune (_adcc .Text );if len (_ffbb )==1{_fdgg =_fdgg [:len (_fdgg )-1];_cefb :=_fdgg [len (_fdgg )-1];*_bdce =_cefb .Offset +len (_cefb .Text );}else {_aadg :=_aabb (_adcc .Text );*_bdce +=len (_aadg )-len (_adcc .Text );_adcc .Text =_aadg ;};
return _fdgg ;};func (_ddbbg *textTable )get (_dcabf ,_gbab int )*textPara {return _ddbbg ._befa [_dace (_dcabf ,_gbab )]};type textTable struct{_cf .PdfRectangle ;_fbca ,_agfc int ;_aeaa bool ;_befa map[uint64 ]*textPara ;_ccad map[uint64 ]compositeCell ;
};func (_fbb *wordBag )removeDuplicates (){if _acagc {_f .Log .Info ("r\u0065m\u006f\u0076\u0065\u0044\u0075\u0070\u006c\u0069c\u0061\u0074\u0065\u0073: \u0025\u0071",_fbb .text ());};for _ ,_deca :=range _fbb .depthIndexes (){if len (_fbb ._gagc [_deca ])==0{continue ;
};_eded :=_fbb ._gagc [_deca ][0];_gdda :=_ecdb *_eded ._addg ;_cgd :=_eded ._cbcb ;for _ ,_fdcaf :=range _fbb .depthBand (_cgd ,_cgd +_gdda ){_ecfe :=map[*textWord ]struct{}{};_cfbf :=_fbb ._gagc [_fdcaf ];for _ ,_abbd :=range _cfbf {if _ ,_agb :=_ecfe [_abbd ];
_agb {continue ;};for _ ,_aeccd :=range _cfbf {if _ ,_cbff :=_ecfe [_aeccd ];_cbff {continue ;};if _aeccd !=_abbd &&_aeccd ._ffcba ==_abbd ._ffcba &&_ea .Abs (_aeccd .Llx -_abbd .Llx )< _gdda &&_ea .Abs (_aeccd .Urx -_abbd .Urx )< _gdda &&_ea .Abs (_aeccd .Lly -_abbd .Lly )< _gdda &&_ea .Abs (_aeccd .Ury -_abbd .Ury )< _gdda {_ecfe [_aeccd ]=struct{}{};
};};};if len (_ecfe )> 0{_ffdg :=0;for _ ,_baca :=range _cfbf {if _ ,_eada :=_ecfe [_baca ];!_eada {_cfbf [_ffdg ]=_baca ;_ffdg ++;};};_fbb ._gagc [_fdcaf ]=_cfbf [:len (_cfbf )-len (_ecfe )];if len (_fbb ._gagc [_fdcaf ])==0{delete (_fbb ._gagc ,_fdcaf );
};};};};};func (_cgg *textObject )getCurrentFont ()*_cf .PdfFont {var _feef *_cf .PdfFont ;if !_cgg ._gfad .empty (){_feef =_cgg ._gfad .top ()._faf ;};if _feef ==nil {_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020U\u0073\u0069\u006e\u0067\u0020d\u0065\u0066a\u0075\u006c\u0074\u002e");
return _cf .DefaultFont ();};return _feef ;};func (_bcbf rulingList )log (_bgaa string ){if !_agfd {return ;};_f .Log .Info ("\u0023\u0023\u0023\u0020\u0025\u0031\u0030\u0073\u003a\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_bgaa ,_bcbf .String ());for _caeb ,_gdggg :=range _bcbf {_ac .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_caeb ,_gdggg .String ());
};};func _cccfc (_ffdfb float64 )float64 {return _cceg *_ea .Round (_ffdfb /_cceg )};var (_ad =_e .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");_cfb =_e .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072");
);func _cbf (_gda _b .Point )*subpath {return &subpath {_cfd :[]_b .Point {_gda }}};func (_cgaga *textMark )inDiacriticArea (_ggcb *textMark )bool {_eedbg :=_cgaga .Llx -_ggcb .Llx ;_dfgc :=_cgaga .Urx -_ggcb .Urx ;_bbea :=_cgaga .Lly -_ggcb .Lly ;return _ea .Abs (_eedbg +_dfgc )< _cgaga .Width ()*_cegg &&_ea .Abs (_bbea )< _cgaga .Height ()*_cegg ;
};func (_ageg *wordBag )firstWord (_abfe int )*textWord {return _ageg ._gagc [_abfe ][0]};

// ApplyArea processes the page text only within the specified area `bbox`.
// Each time ApplyArea is called, it updates the result set in `pt`.
// Can be called multiple times in a row with different bounding boxes.
func (_acgg *PageText )ApplyArea (bbox _cf .PdfRectangle ){_ceaa :=make ([]*textMark ,0,len (_acgg ._cgf ));for _ ,_bagf :=range _acgg ._cgf {if _fcefd (_bagf .bbox (),bbox ){_ceaa =append (_ceaa ,_bagf );};};var _gafa paraList ;_eaef :=len (_ceaa );for _gbf :=0;
_gbf < 360&&_eaef > 0;_gbf +=90{_dbg :=make ([]*textMark ,0,len (_ceaa )-_eaef );for _ ,_cebc :=range _ceaa {if _cebc ._aeag ==_gbf {_dbg =append (_dbg ,_cebc );};};if len (_dbg )> 0{_eba :=_addf (_dbg ,_acgg ._fafg ,nil ,nil );_gafa =append (_gafa ,_eba ...);
_eaef -=len (_dbg );};};_edfg :=new (_g .Buffer );_gafa .writeText (_edfg );_acgg ._agc =_edfg .String ();_acgg ._fge =_gafa .toTextMarks ();_acgg ._cdb =_gafa .tables ();};func (_afee rectRuling )asRuling ()(*ruling ,bool ){_fbdd :=ruling {_edaga :_afee ._eaege ,Color :_afee .Color ,_deag :_ddbg };
switch _afee ._eaege {case _afb :_fbdd ._bfdfd =0.5*(_afee .Llx +_afee .Urx );_fbdd ._dcae =_afee .Lly ;_fbdd ._ddgfa =_afee .Ury ;_beda ,_ffeg :=_afee .checkWidth (_afee .Llx ,_afee .Urx );if !_ffeg {if _aeeff {_f .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067V\u0065\u0072\u0074\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_afee );
};return nil ,false ;};_fbdd ._dabce =_beda ;case _deba :_fbdd ._bfdfd =0.5*(_afee .Lly +_afee .Ury );_fbdd ._dcae =_afee .Llx ;_fbdd ._ddgfa =_afee .Urx ;_fdcafc ,_ddgd :=_afee .checkWidth (_afee .Lly ,_afee .Ury );if !_ddgd {if _aeeff {_f .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067H\u006f\u0072\u007a\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_afee );
};return nil ,false ;};_fbdd ._dabce =_fdcafc ;default:_f .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_afee ._eaege );return nil ,false ;};return &_fbdd ,true ;};func (_gfe *textObject )moveLP (_deaa ,_ecg float64 ){_gfe ._aaabb .Concat (_b .NewMatrix (1,0,0,1,_deaa ,_ecg ));
_gfe ._dab =_gfe ._aaabb ;};type pathSection struct{_ffcb []*subpath ;_cc .Color ;};

// String returns a string describing `ma`.
func (_cdaf TextMarkArray )String ()string {_agcd :=len (_cdaf ._eaf );if _agcd ==0{return "\u0045\u004d\u0050T\u0059";};_cefe :=_cdaf ._eaf [0];_cac :=_cdaf ._eaf [_agcd -1];return _ac .Sprintf ("\u007b\u0054\u0045\u0058\u0054\u004d\u0041\u0052K\u0041\u0052\u0052AY\u003a\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025s\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d%\u0073\u007d",_agcd ,_cefe ,_cac );
};type markKind int ;func (_geag *textPara )taken ()bool {return _geag ==nil ||_geag ._egceg };var _fgfcg =_c .MustCompile ("\u005e\u005c\u0073\u002a\u0028\u005c\u0064\u002b\u005c\u002e\u003f|\u005b\u0049\u0069\u0076\u005d\u002b\u0029\u005c\u0073\u002a\\\u0029\u003f\u0024");
type bounded interface{bbox ()_cf .PdfRectangle };func _bbg (_dagd *wordBag ,_gbaf *textWord ,_bafa float64 )bool {return _gbaf .Llx < _dagd .Urx +_bafa &&_dagd .Llx -_bafa < _gbaf .Urx ;};

// String returns a string descibing `i`.
func (_eaefa gridTile )String ()string {_gdbgc :=func (_bcfd bool ,_fgdb string )string {if _bcfd {return _fgdb ;};return "\u005f";};return _ac .Sprintf ("\u00256\u002e2\u0066\u0020\u0025\u0031\u0073%\u0031\u0073%\u0031\u0073\u0025\u0031\u0073",_eaefa .PdfRectangle ,_gdbgc (_eaefa ._dfdg ,"\u004c"),_gdbgc (_eaefa ._dgea ,"\u0052"),_gdbgc (_eaefa ._ddccb ,"\u0042"),_gdbgc (_eaefa ._fdedg ,"\u0054"));
};func (_fgdcg *textTable )isExportable ()bool {if _fgdcg ._aeaa {return true ;};_dabe :=func (_fcfdf int )bool {_aafga :=_fgdcg .get (0,_fcfdf );if _aafga ==nil {return false ;};_fdcce :=_aafga .text ();_bbga :=_d .RuneCountInString (_fdcce );_dadb :=_fgfcg .MatchString (_fdcce );
return _bbga <=1||_dadb ;};for _defc :=0;_defc < _fgdcg ._agfc ;_defc ++{if !_dabe (_defc ){return true ;};};return false ;};func _fcefd (_gfgb ,_gefe _cf .PdfRectangle )bool {return _bbdd (_gfgb ,_gefe )&&_aged (_gfgb ,_gefe )};type gridTile struct{_cf .PdfRectangle ;
_fdedg ,_dfdg ,_ddccb ,_dgea bool ;};func (_dbeac *textWord )appendMark (_dcbaa *textMark ,_cbfce _cf .PdfRectangle ){_dbeac ._efbfe =append (_dbeac ._efbfe ,_dcbaa );_dbeac .PdfRectangle =_gdfb (_dbeac .PdfRectangle ,_dcbaa .PdfRectangle );if _dcbaa ._eggg > _dbeac ._addg {_dbeac ._addg =_dcbaa ._eggg ;
};_dbeac ._cbcb =_cbfce .Ury -_dbeac .PdfRectangle .Lly ;};func _cccc (_gfef *wordBag ,_bceb *textWord ,_ecde float64 )bool {return _gfef .Urx <=_bceb .Llx &&_bceb .Llx < _gfef .Urx +_ecde ;};func (_ccdf *wordBag )maxDepth ()float64 {return _ccdf ._degg -_ccdf .Lly };
func _caab (_afdc ,_ffgef bounded )float64 {_bdbd :=_gbfbg (_afdc ,_ffgef );if !_ggbgb (_bdbd ){return _bdbd ;};return _ecaed (_afdc ,_ffgef );};func _gbfbg (_feb ,_ecb bounded )float64 {return _begf (_feb )-_begf (_ecb )};func (_effba *subpath )makeRectRuling (_gcbcg _cc .Color )(*ruling ,bool ){if _aeeff {_f .Log .Info ("\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0070\u0061\u0074\u0068\u003d\u0025\u0076",_effba );
};_deeee :=_effba ._cfd [:4];_cfgae :=make (map[int ]rulingKind ,len (_deeee ));for _fgbfb ,_eade :=range _deeee {_afca :=_effba ._cfd [(_fgbfb +1)%4];_cfgae [_fgbfb ]=_bdfe (_eade ,_afca );if _aeeff {_ac .Printf ("\u0025\u0034\u0064: \u0025\u0073\u0020\u003d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066",_fgbfb ,_cfgae [_fgbfb ],_eade ,_afca );
};};if _aeeff {_ac .Printf ("\u0020\u0020\u0020\u006b\u0069\u006e\u0064\u0073\u003d\u0025\u002b\u0076\u000a",_cfgae );};var _ebabc ,_bgeg []int ;for _egbb ,_fbeec :=range _cfgae {switch _fbeec {case _deba :_bgeg =append (_bgeg ,_egbb );case _afb :_ebabc =append (_ebabc ,_egbb );
};};if _aeeff {_ac .Printf ("\u0020\u0020 \u0068\u006f\u0072z\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_bgeg ),_bgeg );_ac .Printf ("\u0020\u0020 \u0076\u0065\u0072t\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_ebabc ),_ebabc );
};_cbeec :=(len (_bgeg )==2&&len (_ebabc )==2)||(len (_bgeg )==2&&len (_ebabc )==0&&_fdafa (_deeee [_bgeg [0]],_deeee [_bgeg [1]]))||(len (_ebabc )==2&&len (_bgeg )==0&&_gccg (_deeee [_ebabc [0]],_deeee [_ebabc [1]]));if _aeeff {_ac .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_bgeg ),len (_ebabc ),_cbeec );
};if !_cbeec {if _aeeff {_f .Log .Error ("\u0021!\u006d\u0061\u006b\u0065R\u0065\u0063\u0074\u0052\u0075l\u0069n\u0067:\u0020\u0070\u0061\u0074\u0068\u003d\u0025v",_effba );_ac .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_bgeg ),len (_ebabc ),_cbeec );
};return &ruling {},false ;};if len (_ebabc )==0{for _afeba ,_gabc :=range _cfgae {if _gabc !=_deba {_ebabc =append (_ebabc ,_afeba );};};};if len (_bgeg )==0{for _bbaf ,_ecbc :=range _cfgae {if _ecbc !=_afb {_bgeg =append (_bgeg ,_bbaf );};};};if _aeeff {_f .Log .Info ("\u006da\u006b\u0065R\u0065\u0063\u0074\u0052u\u006c\u0069\u006eg\u003a\u0020\u0068\u006f\u0072\u007a\u0073\u003d\u0025d \u0076\u0065\u0072t\u0073\u003d%\u0064\u0020\u0070\u006f\u0069\u006et\u0073\u003d%\u0064\u000a"+"\u0009\u0020\u0068o\u0072\u007a\u0073\u003d\u0025\u002b\u0076\u000a"+"\u0009\u0020\u0076e\u0072\u0074\u0073\u003d\u0025\u002b\u0076\u000a"+"\t\u0070\u006f\u0069\u006e\u0074\u0073\u003d\u0025\u002b\u0076",len (_bgeg ),len (_ebabc ),len (_deeee ),_bgeg ,_ebabc ,_deeee );
};var _ddee ,_bagbd ,_fcea ,_gdgg _b .Point ;if _deeee [_bgeg [0]].Y > _deeee [_bgeg [1]].Y {_fcea ,_gdgg =_deeee [_bgeg [0]],_deeee [_bgeg [1]];}else {_fcea ,_gdgg =_deeee [_bgeg [1]],_deeee [_bgeg [0]];};if _deeee [_ebabc [0]].X > _deeee [_ebabc [1]].X {_ddee ,_bagbd =_deeee [_ebabc [0]],_deeee [_ebabc [1]];
}else {_ddee ,_bagbd =_deeee [_ebabc [1]],_deeee [_ebabc [0]];};_bafe :=_cf .PdfRectangle {Llx :_ddee .X ,Urx :_bagbd .X ,Lly :_gdgg .Y ,Ury :_fcea .Y };if _bafe .Llx > _bafe .Urx {_bafe .Llx ,_bafe .Urx =_bafe .Urx ,_bafe .Llx ;};if _bafe .Lly > _bafe .Ury {_bafe .Lly ,_bafe .Ury =_bafe .Ury ,_bafe .Lly ;
};_bfbc :=rectRuling {PdfRectangle :_bafe ,_eaege :_edfc (_bafe ),Color :_gcbcg };if _bfbc ._eaege ==_fecef {if _aeeff {_f .Log .Error ("\u006da\u006b\u0065\u0052\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006eg\u003a\u0020\u006b\u0069\u006e\u0064\u003d\u006e\u0069\u006c");
};return nil ,false ;};_febgf ,_eaab :=_bfbc .asRuling ();if !_eaab {if _aeeff {_f .Log .Error ("\u006da\u006b\u0065\u0052\u0065c\u0074\u0052\u0075\u006c\u0069n\u0067:\u0020!\u0069\u0073\u0052\u0075\u006c\u0069\u006eg");};return nil ,false ;};if _agfd {_ac .Printf ("\u0020\u0020\u0020\u0072\u003d\u0025\u0073\u000a",_febgf .String ());
};return _febgf ,true ;};func (_cfdbe rulingList )snapToGroups ()rulingList {_edgg ,_gdfbg :=_cfdbe .vertsHorzs ();if len (_edgg )> 0{_edgg =_edgg .snapToGroupsDirection ();};if len (_gdfbg )> 0{_gdfbg =_gdfbg .snapToGroupsDirection ();};_ceaac :=append (_edgg ,_gdfbg ...);
_ceaac .log ("\u0073\u006e\u0061p\u0054\u006f\u0047\u0072\u006f\u0075\u0070\u0073");return _ceaac ;};func (_baaec *textPara )writeCellText (_bcfc _cb .Writer ){for _abea ,_aadf :=range _baaec ._gdff {_bccf :=_aadf .text ();_ecbb :=_efed &&_aadf .endsInHyphen ()&&_abea !=len (_baaec ._gdff )-1;
if _ecbb {_bccf =_aabb (_bccf );};_bcfc .Write ([]byte (_bccf ));if !(_ecbb ||_abea ==len (_baaec ._gdff )-1){_bcfc .Write ([]byte (_egcd (_aadf ._dfbf ,_baaec ._gdff [_abea +1]._dfbf )));};};};func _cdgae (_fcae []*wordBag )[]*wordBag {if len (_fcae )<=1{return _fcae ;
};if _ggfg {_f .Log .Info ("\u006d\u0065\u0072\u0067\u0065\u0057\u006f\u0072\u0064B\u0061\u0067\u0073\u003a");};_ee .Slice (_fcae ,func (_ebbd ,_ebae int )bool {_cebg ,_fad :=_fcae [_ebbd ],_fcae [_ebae ];_gbeb :=_cebg .Width ()*_cebg .Height ();_addb :=_fad .Width ()*_fad .Height ();
if _gbeb !=_addb {return _gbeb > _addb ;};if _cebg .Height ()!=_fad .Height (){return _cebg .Height ()> _fad .Height ();};return _ebbd < _ebae ;});var _fcag []*wordBag ;_egbeb :=make (intSet );for _acfg :=0;_acfg < len (_fcae );_acfg ++{if _egbeb .has (_acfg ){continue ;
};_adde :=_fcae [_acfg ];for _daeg :=_acfg +1;_daeg < len (_fcae );_daeg ++{if _egbeb .has (_acfg ){continue ;};_ecf :=_fcae [_daeg ];_cddg :=_adde .PdfRectangle ;_cddg .Llx -=_adde ._afae ;if _fbcg (_cddg ,_ecf .PdfRectangle ){_adde .absorb (_ecf );_egbeb .add (_daeg );
};};_fcag =append (_fcag ,_adde );};if len (_fcae )!=len (_fcag )+len (_egbeb ){_f .Log .Error ("\u006d\u0065\u0072ge\u0057\u006f\u0072\u0064\u0042\u0061\u0067\u0073\u003a \u0025d\u2192%\u0064 \u0061\u0062\u0073\u006f\u0072\u0062\u0065\u0064\u003d\u0025\u0064",len (_fcae ),len (_fcag ),len (_egbeb ));
};return _fcag ;};

// String returns a human readable description of `ss`.
func (_cabe *shapesState )String ()string {return _ac .Sprintf ("\u007b\u0025\u0064\u0020su\u0062\u0070\u0061\u0074\u0068\u0073\u0020\u0066\u0072\u0065\u0073\u0068\u003d\u0025t\u007d",len (_cabe ._dcd ),_cabe ._ccf );};func _ggbgb (_geaga float64 )bool {return _ea .Abs (_geaga )< _fgbf };
func _gbef (_cccbg _cf .PdfColorspace ,_gcga _cf .PdfColor )_cc .Color {if _cccbg ==nil ||_gcga ==nil {return _cc .Black ;};_cgfa ,_aaeag :=_cccbg .ColorToRGB (_gcga );if _aaeag !=nil {_f .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006fu\u006c\u0064\u0020no\u0074\u0020\u0063\u006f\u006e\u0076e\u0072\u0074\u0020\u0063\u006f\u006c\u006f\u0072\u0020\u0025\u0076\u0020\u0028\u0025\u0076)\u0020\u0074\u006f\u0020\u0052\u0047\u0042\u003a \u0025\u0073",_gcga ,_cccbg ,_aaeag );
return _cc .Black ;};_gccf ,_cecc :=_cgfa .(*_cf .PdfColorDeviceRGB );if !_cecc {_f .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0065\u0064 \u0063\u006f\u006c\u006f\u0072\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020i\u006e\u0020\u0074\u0068\u0065\u0020\u0052\u0047\u0042\u0020\u0063\u006flo\u0072\u0073\u0070\u0061\u0063\u0065\u003a\u0020\u0025\u0076",_cgfa );
return _cc .Black ;};return _cc .NRGBA {R :uint8 (_gccf .R ()*255),G :uint8 (_gccf .G ()*255),B :uint8 (_gccf .B ()*255),A :uint8 (255)};};func _gdbe (_fabd string ,_fdad []rulingList ){_f .Log .Info ("\u0024\u0024 \u0025\u0064\u0020g\u0072\u0069\u0064\u0073\u0020\u002d\u0020\u0025\u0073",len (_fdad ),_fabd );
for _decda ,_ggce :=range _fdad {_ac .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_decda ,_ggce .String ());};};func (_babf rulingList )removeDuplicates ()rulingList {if len (_babf )==0{return nil ;};_babf .sort ();_abdff :=rulingList {_babf [0]};
for _ ,_ebba :=range _babf [1:]{if _ebba .equals (_abdff [len (_abdff )-1]){continue ;};_abdff =append (_abdff ,_ebba );};return _abdff ;};func _bfbb (_ffdf ,_cggd *textPara )bool {if _ffdf ._acgb ||_cggd ._acgb {return true ;};return _ggbgb (_ffdf .depth ()-_cggd .depth ());
};func _aged (_bgae ,_cbfc _cf .PdfRectangle )bool {return _bgae .Lly <=_cbfc .Ury &&_cbfc .Lly <=_bgae .Ury ;};func (_aecc *stateStack )pop ()*textState {if _aecc .empty (){return nil ;};_eef :=*(*_aecc )[len (*_aecc )-1];*_aecc =(*_aecc )[:len (*_aecc )-1];
return &_eef ;};func (_dedf gridTile )complete ()bool {return _dedf .numBorders ()==4};func (_cdgcc rulingList )secMinMax ()(float64 ,float64 ){_efafg ,_eede :=_cdgcc [0]._dcae ,_cdgcc [0]._ddgfa ;for _ ,_cfdb :=range _cdgcc [1:]{if _cfdb ._dcae < _efafg {_efafg =_cfdb ._dcae ;
};if _cfdb ._ddgfa > _eede {_eede =_cfdb ._ddgfa ;};};return _efafg ,_eede ;};func (_dgee *wordBag )makeRemovals ()map[int ]map[*textWord ]struct{}{_gafd :=make (map[int ]map[*textWord ]struct{},len (_dgee ._gagc ));for _eebc :=range _dgee ._gagc {_gafd [_eebc ]=make (map[*textWord ]struct{});
};return _gafd ;};func (_bebg *textTable )subdivide ()*textTable {_bebg .logComposite ("\u0073u\u0062\u0064\u0069\u0076\u0069\u0064e");_eccfb :=_bebg .compositeRowCorridors ();_dgeed :=_bebg .compositeColCorridors ();if _ffda {_f .Log .Info ("\u0073u\u0062\u0064i\u0076\u0069\u0064\u0065:\u000a\u0009\u0072o\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s=\u0025\u0073\u000a\t\u0063\u006fl\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073=\u0025\u0073",_bcfff (_eccfb ),_bcfff (_dgeed ));
};if len (_eccfb )==0||len (_dgeed )==0{return _bebg ;};_acde (_eccfb );_acde (_dgeed );if _ffda {_f .Log .Info ("\u0073\u0075\u0062\u0064\u0069\u0076\u0069\u0064\u0065\u0020\u0066\u0069\u0078\u0065\u0064\u003a\u000a\u0009r\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073\u003d\u0025\u0073\u000a\u0009\u0063\u006f\u006cC\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d\u0025\u0073",_bcfff (_eccfb ),_bcfff (_dgeed ));
};_bbff ,_cefd :=_agaec (_bebg ._agfc ,_eccfb );_agad ,_aebd :=_agaec (_bebg ._fbca ,_dgeed );_gdga :=make (map[uint64 ]*textPara ,_aebd *_cefd );_fggb :=&textTable {PdfRectangle :_bebg .PdfRectangle ,_aeaa :_bebg ._aeaa ,_agfc :_cefd ,_fbca :_aebd ,_befa :_gdga };
if _ffda {_f .Log .Info ("\u0073\u0075b\u0064\u0069\u0076\u0069\u0064\u0065\u003a\u0020\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0063\u0065\u006c\u006c\u0073\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0079\u004f\u0066\u0066\u0073\u0065\u0074\u0073=\u0025\u002b\u0076\u000a"+"\u0009\u0078\u004f\u0066\u0066\u0073\u0065\u0074\u0073\u003d\u0025\u002b\u0076",_bebg ._fbca ,_bebg ._agfc ,_aebd ,_cefd ,_bcfff (_eccfb ),_bcfff (_dgeed ),_bbff ,_agad );
};for _dgcfa :=0;_dgcfa < _bebg ._agfc ;_dgcfa ++{_gffcb :=_bbff [_dgcfa ];for _gcaeec :=0;_gcaeec < _bebg ._fbca ;_gcaeec ++{_fcbde :=_agad [_gcaeec ];if _ffda {_ac .Printf ("\u0025\u0036\u0064\u002c %\u0032\u0064\u003a\u0020\u0078\u0030\u003d\u0025\u0064\u0020\u0079\u0030\u003d\u0025d\u000a",_gcaeec ,_dgcfa ,_fcbde ,_gffcb );
};_eedec ,_aeff :=_bebg ._ccad [_dace (_gcaeec ,_dgcfa )];if !_aeff {continue ;};_cafef :=_eedec .split (_eccfb [_dgcfa ],_dgeed [_gcaeec ]);for _bbcb :=0;_bbcb < _cafef ._agfc ;_bbcb ++{for _edfa :=0;_edfa < _cafef ._fbca ;_edfa ++{_bdagfd :=_cafef .get (_edfa ,_bbcb );
_fggb .put (_fcbde +_edfa ,_gffcb +_bbcb ,_bdagfd );if _ffda {_ac .Printf ("\u0025\u0038\u0064\u002c\u0020\u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_fcbde +_edfa ,_gffcb +_bbcb ,_bdagfd );};};};};};return _fggb ;};func (_egffc rulingList )intersections ()map[int ]intSet {var _ggbd ,_bddd []int ;
for _ceeg ,_ffcc :=range _egffc {switch _ffcc ._edaga {case _afb :_ggbd =append (_ggbd ,_ceeg );case _deba :_bddd =append (_bddd ,_ceeg );};};if len (_ggbd )< _dead +1||len (_bddd )< _ebe +1{return nil ;};if len (_ggbd )+len (_bddd )> _eecg {_f .Log .Debug ("\u0069\u006e\u0074\u0065\u0072\u0073e\u0063\u0074\u0069\u006f\u006e\u0073\u003a\u0020\u0054\u004f\u004f\u0020\u004d\u0041\u004e\u0059\u0020\u0072\u0075\u006ci\u006e\u0067\u0073\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u003d\u0020%\u0064 \u0078\u0020\u0025\u0064",len (_egffc ),len (_ggbd ),len (_bddd ));
return nil ;};_bcee :=make (map[int ]intSet ,len (_ggbd )+len (_bddd ));for _ ,_febe :=range _ggbd {for _ ,_gebb :=range _bddd {if _egffc [_febe ].intersects (_egffc [_gebb ]){if _ ,_gdgb :=_bcee [_febe ];!_gdgb {_bcee [_febe ]=make (intSet );};if _ ,_ggddc :=_bcee [_gebb ];
!_ggddc {_bcee [_gebb ]=make (intSet );};_bcee [_febe ].add (_gebb );_bcee [_gebb ].add (_febe );};};};return _bcee ;};func (_dedg paraList )tables ()[]TextTable {var _dgga []TextTable ;if _ffda {_f .Log .Info ("\u0070\u0061\u0072\u0061\u0073\u002e\u0074\u0061\u0062\u006c\u0065\u0073\u003a");
};for _ ,_geaf :=range _dedg {_gec :=_geaf ._fdcc ;if _gec !=nil &&_gec .isExportable (){_dgga =append (_dgga ,_gec .toTextTable ());};};return _dgga ;};func (_gdad *textTable )toTextTable ()TextTable {if _ffda {_f .Log .Info ("t\u006fT\u0065\u0078\u0074\u0054\u0061\u0062\u006c\u0065:\u0020\u0025\u0064\u0020x \u0025\u0064",_gdad ._fbca ,_gdad ._agfc );
};_fgcc :=make ([][]TableCell ,_gdad ._agfc );for _daad :=0;_daad < _gdad ._agfc ;_daad ++{_fgcc [_daad ]=make ([]TableCell ,_gdad ._fbca );for _feeb :=0;_feeb < _gdad ._fbca ;_feeb ++{_feba :=_gdad .get (_feeb ,_daad );if _feba ==nil {continue ;};if _ffda {_ac .Printf ("\u0025\u0034\u0064 \u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_feeb ,_daad ,_feba );
};_fgcc [_daad ][_feeb ].Text =_feba .text ();_efdcb :=0;_fgcc [_daad ][_feeb ].Marks ._eaf =_feba .toTextMarks (&_efdcb );};};return TextTable {W :_gdad ._fbca ,H :_gdad ._agfc ,Cells :_fgcc };};func (_gca *textObject )setFont (_abbg string ,_gbd float64 )error {if _gca ==nil {return nil ;
};_gca ._add ._eed =_gbd ;_beegd ,_cdg :=_gca .getFont (_abbg );if _cdg !=nil {return _cdg ;};_gca ._add ._faf =_beegd ;if _gca ._gfad .empty (){_gca ._gfad .push (_gca ._add );}else {_gca ._gfad .top ()._faf =_gca ._add ._faf ;};return nil ;};func (_egcb lineRuling )yMean ()float64 {return 0.5*(_egcb ._gadc .Y +_egcb ._aadfb .Y )};
func (_geda *ruling )encloses (_gbdeg ,_eadb float64 )bool {return _geda ._dcae -_daa <=_gbdeg &&_eadb <=_geda ._ddgfa +_daa ;};func (_fba rulingList )vertsHorzs ()(rulingList ,rulingList ){var _bfga ,_edfec rulingList ;for _ ,_gfafa :=range _fba {switch _gfafa ._edaga {case _afb :_bfga =append (_bfga ,_gfafa );
case _deba :_edfec =append (_edfec ,_gfafa );};};return _bfga ,_edfec ;};func _afag (_ceacg ,_efgec ,_bfcg float64 )rulingKind {if _ceacg >=_bfcg &&_cgfe (_efgec ,_ceacg ){return _deba ;};if _efgec >=_bfcg &&_cgfe (_ceacg ,_efgec ){return _afb ;};return _fecef ;
};func (_gafg *ruling )alignsPrimary (_gcfc *ruling )bool {return _gafg ._edaga ==_gcfc ._edaga &&_ea .Abs (_gafg ._bfdfd -_gcfc ._bfdfd )< _fedd *0.5;};

// String returns a description of `w`.
func (_ffeea *textWord )String ()string {return _ac .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_ffeea ._cbcb ,_ffeea .PdfRectangle ,_ffeea ._addg ,_ffeea ._ffcba );
};func (_edge *PageText )computeViews (){var _gga rulingList ;if _gbae {_adc :=_gebd (_edge ._gag );_gga =append (_gga ,_adc ...);};if _afff {_cbgd :=_aeb (_edge ._abce );_gga =append (_gga ,_cbgd ...);};_gga ,_cdbe :=_gga .toTilings ();var _aecg paraList ;
_fcbd :=len (_edge ._cgf );for _cagc :=0;_cagc < 360&&_fcbd > 0;_cagc +=90{_ffge :=make ([]*textMark ,0,len (_edge ._cgf )-_fcbd );for _ ,_gdge :=range _edge ._cgf {if _gdge ._aeag ==_cagc {_ffge =append (_ffge ,_gdge );};};if len (_ffge )> 0{_fega :=_addf (_ffge ,_edge ._fafg ,_gga ,_cdbe );
_aecg =append (_aecg ,_fega ...);_fcbd -=len (_ffge );};};_efc :=new (_g .Buffer );_aecg .writeText (_efc );_edge ._agc =_efc .String ();_edge ._fge =_aecg .toTextMarks ();_edge ._cdb =_aecg .tables ();if _ffda {_f .Log .Info ("\u0063\u006f\u006dpu\u0074\u0065\u0056\u0069\u0065\u0077\u0073\u003a\u0020\u0074\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064",len (_edge ._cdb ));
};};

// New returns an Extractor instance for extracting content from the input PDF page.
func New (page *_cf .PdfPage )(*Extractor ,error ){const _dg ="\u0065\u0078\u0074\u0072\u0061\u0063\u0074\u006f\u0072\u002e\u004e\u0065\u0077";_ff ,_dcc :=page .GetAllContentStreams ();if _dcc !=nil {return nil ,_dcc ;};_dgd ,_dcc :=page .GetMediaBox ();
if _dcc !=nil {return nil ,_ac .Errorf ("\u0065\u0078\u0074r\u0061\u0063\u0074\u006fr\u0020\u0072\u0065\u0071\u0075\u0069\u0072e\u0073\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u002e\u0020\u0025\u0076",_dcc );};_eaa :=&Extractor {_dc :_ff ,_eg :page .Resources ,_aaa :*_dgd ,_gg :map[string ]fontEntry {},_fb :map[string ]textResult {}};
if _eaa ._aaa .Llx > _eaa ._aaa .Urx {_f .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0058\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_eaa ._aaa );
_eaa ._aaa .Llx ,_eaa ._aaa .Urx =_eaa ._aaa .Urx ,_eaa ._aaa .Llx ;};if _eaa ._aaa .Lly > _eaa ._aaa .Ury {_f .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0059\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_eaa ._aaa );
_eaa ._aaa .Lly ,_eaa ._aaa .Ury =_eaa ._aaa .Ury ,_eaa ._aaa .Lly ;};_gb .TrackUse (_dg );return _eaa ,nil ;};func (_aaab *stateStack )size ()int {return len (*_aaab )};func _fcad (_aafce *PageText )error {_adffc :=_gb .GetLicenseKey ();if _adffc !=nil &&_adffc .IsLicensed ()||_df {return nil ;
};_ac .Printf ("\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064\u0020c\u006f\u0070\u0079\u0020\u006f\u0066\u0020\u0055\u006e\u0069P\u0044\u0046\u000a");_ac .Println ("-\u0020\u0047\u0065\u0074\u0020\u0061\u0020\u0066\u0072e\u0065\u0020\u0074\u0072\u0069\u0061\u006c l\u0069\u0063\u0065\u006es\u0065\u0020\u006f\u006e\u0020\u0068\u0074\u0074\u0070s:\u002f\u002fu\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f");
return _e .New ("\u0075\u006e\u0069\u0070d\u0066\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020c\u006fd\u0065\u0020\u0072\u0065\u0071\u0075\u0069r\u0065\u0064");};

// Elements returns the TextMarks in `ma`.
func (_edcg *TextMarkArray )Elements ()[]TextMark {return _edcg ._eaf };func _fbgc (_feaee _cf .PdfRectangle ,_eedb bounded )float64 {return _feaee .Ury -_eedb .bbox ().Lly };func _ecfg (_ageda []rulingList )(rulingList ,rulingList ){var _ffcg rulingList ;
for _ ,_bcgf :=range _ageda {_ffcg =append (_ffcg ,_bcgf ...);};return _ffcg .vertsHorzs ();};func (_dabec *textTable )emptyColumn (_ecdec int )bool {for _ddebb :=0;_ddebb < _dabec ._agfc ;_ddebb ++{_gfcb :=_dabec .get (_ecdec ,_ddebb );if _gfcb !=nil &&_gfcb .text ()!=""{return false ;
};};return true ;};func _dcadd (_eeadc []int )[]int {_ceee :=make ([]int ,len (_eeadc ));for _edff ,_gdca :=range _eeadc {_ceee [len (_eeadc )-1-_edff ]=_gdca ;};return _ceee ;};func (_bf *imageExtractContext )extractContentStreamImages (_gd string ,_db *_cf .PdfPageResources )error {_gdg :=_cea .NewContentStreamParser (_gd );
_gf ,_fdb :=_gdg .Parse ();if _fdb !=nil {return _fdb ;};if _bf ._bc ==nil {_bf ._bc =map[*_ce .PdfObjectStream ]*cachedImage {};};if _bf ._fa ==nil {_bf ._fa =&ImageExtractOptions {};};_aef :=_cea .NewContentStreamProcessor (*_gf );_aef .AddHandler (_cea .HandlerConditionEnumAllOperands ,"",_bf .processOperand );
return _aef .Process (_db );};type textPara struct{_cf .PdfRectangle ;_gafc _cf .PdfRectangle ;_gdff []*textLine ;_fdcc *textTable ;_egceg bool ;_acgb bool ;_dggb *textPara ;_fgfa *textPara ;_ddece *textPara ;_cage *textPara ;};func (_cebb *textLine )pullWord (_agdg *wordBag ,_febc *textWord ,_eccc int ){_cebb .appendWord (_febc );
_agdg .removeWord (_febc ,_eccc );};func _bgbd (_faeeb _cf .PdfRectangle )*ruling {return &ruling {_edaga :_afb ,_bfdfd :_faeeb .Llx ,_dcae :_faeeb .Lly ,_ddgfa :_faeeb .Ury };};func (_dfdb *textObject )showText (_cab []byte )error {return _dfdb .renderText (_cab )};
func (_gbedb paraList )topoOrder ()[]int {if _bfcd {_f .Log .Info ("\u0074\u006f\u0070\u006f\u004f\u0072\u0064\u0065\u0072\u003a");};_cafc :=len (_gbedb );_agaaga :=make ([]bool ,_cafc );_bccb :=make ([]int ,0,_cafc );_abdf :=_gbedb .llyOrdering ();var _bbbbe func (_febg int );
_bbbbe =func (_fddd int ){_agaaga [_fddd ]=true ;for _cdcc :=0;_cdcc < _cafc ;_cdcc ++{if !_agaaga [_cdcc ]{if _gbedb .readBefore (_abdf ,_fddd ,_cdcc ){_bbbbe (_cdcc );};};};_bccb =append (_bccb ,_fddd );};for _facg :=0;_facg < _cafc ;_facg ++{if !_agaaga [_facg ]{_bbbbe (_facg );
};};return _dcadd (_bccb );};func (_dbaea *ruling )equals (_bcadg *ruling )bool {return _dbaea ._edaga ==_bcadg ._edaga &&_bebe (_dbaea ._bfdfd ,_bcadg ._bfdfd )&&_bebe (_dbaea ._dcae ,_bcadg ._dcae )&&_bebe (_dbaea ._ddgfa ,_bcadg ._ddgfa );};func _cafb (_fgaf map[float64 ]map[float64 ]gridTile )[]float64 {_fadd :=make ([]float64 ,0,len (_fgaf ));
_bdbc :=make (map[float64 ]struct{},len (_fgaf ));for _ ,_dcgaf :=range _fgaf {for _edab :=range _dcgaf {if _ ,_ebdg :=_bdbc [_edab ];_ebdg {continue ;};_fadd =append (_fadd ,_edab );_bdbc [_edab ]=struct{}{};};};_ee .Float64s (_fadd );return _fadd ;};
func _acde (_acaag map[int ][]float64 ){if len (_acaag )<=1{return ;};_abda :=_gabca (_acaag );if _ffda {_f .Log .Info ("\u0066i\u0078C\u0065\u006c\u006c\u0073\u003a \u006b\u0065y\u0073\u003d\u0025\u002b\u0076",_abda );};var _eagb ,_eagg int ;for _eagb ,_eagg =range _abda {if _acaag [_eagg ]!=nil {break ;
};};for _fede ,_caad :=range _abda [_eagb :]{_egda :=_acaag [_caad ];if _egda ==nil {continue ;};if _ffda {_ac .Printf ("\u0025\u0034\u0064\u003a\u0020\u006b\u0030\u003d\u0025\u0064\u0020\u006b1\u003d\u0025\u0064\u000a",_eagb +_fede ,_eagg ,_caad );};_dffg :=_acaag [_caad ];
if _dffg [len (_dffg )-1]> _egda [0]{_dffg [len (_dffg )-1]=_egda [0];_acaag [_eagg ]=_dffg ;};_eagg =_caad ;};};func (_cfcfd rulingList )primaries ()[]float64 {_ddegc :=make (map[float64 ]struct{},len (_cfcfd ));for _ ,_debgb :=range _cfcfd {_ddegc [_debgb ._bfdfd ]=struct{}{};
};_aagb :=make ([]float64 ,len (_ddegc ));_agaea :=0;for _cdac :=range _ddegc {_aagb [_agaea ]=_cdac ;_agaea ++;};_ee .Float64s (_aagb );return _aagb ;};func _gdfc (_dafgg ,_bcec int )int {if _dafgg > _bcec {return _dafgg ;};return _bcec ;};func (_dege *textObject )getStrokeColor ()_cc .Color {return _gbef (_dege ._faea .ColorspaceStroking ,_dege ._faea .ColorStroking );
};func (_bcbd rulingList )sortStrict (){_ee .Slice (_bcbd ,func (_bfceb ,_bbcga int )bool {_cfcgd ,_gbfd :=_bcbd [_bfceb ],_bcbd [_bbcga ];_bgbe ,_dgba :=_cfcgd ._edaga ,_gbfd ._edaga ;if _bgbe !=_dgba {return _bgbe > _dgba ;};_ggbe ,_fbcbc :=_cfcgd ._bfdfd ,_gbfd ._bfdfd ;
if !_ggbgb (_ggbe -_fbcbc ){return _ggbe < _fbcbc ;};_ggbe ,_fbcbc =_cfcgd ._dcae ,_gbfd ._dcae ;if _ggbe !=_fbcbc {return _ggbe < _fbcbc ;};return _cfcgd ._ddgfa < _gbfd ._ddgfa ;});};func _adb (_ec _cf .PdfRectangle )textState {return textState {_fege :100,_dddg :RenderModeFill ,_fff :_ec };
};func (_gcfe *subpath )add (_fgae ..._b .Point ){_gcfe ._cfd =append (_gcfe ._cfd ,_fgae ...)};func _cbca (_egca _cf .PdfRectangle ,_agae []*textLine )*textPara {return &textPara {PdfRectangle :_egca ,_gdff :_agae };};func _gcbc (_gfag *wordBag ,_edb int )*textLine {_caga :=_gfag .firstWord (_edb );
_bafaa :=textLine {PdfRectangle :_caga .PdfRectangle ,_gfb :_caga ._addg ,_dfbf :_caga ._cbcb };_bafaa .pullWord (_gfag ,_caga ,_edb );return &_bafaa ;};func (_aggg *ruling )intersects (_ffgea *ruling )bool {_cfbc :=(_aggg ._edaga ==_afb &&_ffgea ._edaga ==_deba )||(_ffgea ._edaga ==_afb &&_aggg ._edaga ==_deba );
_cff :=func (_gddcf ,_fffg *ruling )bool {return _gddcf ._dcae -_daa <=_fffg ._bfdfd &&_fffg ._bfdfd <=_gddcf ._ddgfa +_daa ;};_fbff :=_cff (_aggg ,_ffgea );_eab :=_cff (_ffgea ,_aggg );if _agfd {_ac .Printf ("\u0020\u0020\u0020\u0020\u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003a\u0020\u0020\u006fr\u0074\u0068\u006f\u0067\u006f\u006e\u0061l\u003d\u0025\u0074\u0020\u006f\u0031\u003d\u0025\u0074\u0020\u006f2\u003d\u0025\u0074\u0020\u2192\u0020\u0025\u0074\u000a"+"\u0020\u0020\u0020 \u0020\u0020\u0020\u0076\u003d\u0025\u0073\u000a"+" \u0020\u0020\u0020\u0020\u0020\u0077\u003d\u0025\u0073\u000a",_cfbc ,_fbff ,_eab ,_cfbc &&_fbff &&_eab ,_aggg ,_ffgea );
};return _cfbc &&_fbff &&_eab ;};

// ToText returns the page text as a single string.
// Deprecated: This function is deprecated and will be removed in a future major version. Please use
// Text() instead.
func (_bef PageText )ToText ()string {return _bef .Text ()};func (_cbed *textTable )markCells (){for _ffdbf :=0;_ffdbf < _cbed ._agfc ;_ffdbf ++{for _gggb :=0;_gggb < _cbed ._fbca ;_gggb ++{_aefd :=_cbed .get (_gggb ,_ffdbf );if _aefd !=nil {_aefd ._egceg =true ;
};};};};type textObject struct{_efb *Extractor ;_gcag *_cf .PdfPageResources ;_faea _cea .GraphicsState ;_add *textState ;_gfad *stateStack ;_dab _b .Matrix ;_aaabb _b .Matrix ;_abd []*textMark ;_dbc bool ;};func _dace (_aaegb ,_aegf int )uint64 {return uint64 (_aaegb )*0x1000000+uint64 (_aegf )};
func _gccg (_afdd ,_fegc _b .Point )bool {_feefe :=_ea .Abs (_afdd .X -_fegc .X );_fcec :=_ea .Abs (_afdd .Y -_fegc .Y );return _cgfe (_feefe ,_fcec );};func _bgggd (_efgg string )bool {if _d .RuneCountInString (_efgg )< _becb {return false ;};_ggfde ,_acfc :=_d .DecodeLastRuneInString (_efgg );
if _acfc <=0||!_aa .Is (_aa .Hyphen ,_ggfde ){return false ;};_ggfde ,_acfc =_d .DecodeLastRuneInString (_efgg [:len (_efgg )-_acfc ]);return _acfc > 0&&!_aa .IsSpace (_ggfde );};func (_adffd *textTable )logComposite (_bbeb string ){if !_ffda {return ;
};_f .Log .Info ("\u007e~\u007eP\u0061\u0072\u0061\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_adffd ._fbca ,_adffd ._agfc ,_bbeb );_ac .Printf ("\u0025\u0035\u0073 \u007c","");for _fgee :=0;_fgee < _adffd ._fbca ;_fgee ++{_ac .Printf ("\u0025\u0033\u0064 \u007c",_fgee );
};_ac .Println ("");_ac .Printf ("\u0025\u0035\u0073 \u002b","");for _befb :=0;_befb < _adffd ._fbca ;_befb ++{_ac .Printf ("\u0025\u0033\u0073 \u002b","\u002d\u002d\u002d");};_ac .Println ("");for _abafb :=0;_abafb < _adffd ._agfc ;_abafb ++{_ac .Printf ("\u0025\u0035\u0064 \u007c",_abafb );
for _dadba :=0;_dadba < _adffd ._fbca ;_dadba ++{_bdad ,_ :=_adffd ._ccad [_dace (_dadba ,_abafb )].parasBBox ();_ac .Printf ("\u0025\u0033\u0064 \u007c",len (_bdad ));};_ac .Println ("");};_f .Log .Info ("\u007e~\u007eT\u0065\u0078\u0074\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_adffd ._fbca ,_adffd ._agfc ,_bbeb );
_ac .Printf ("\u0025\u0035\u0073 \u007c","");for _ffbe :=0;_ffbe < _adffd ._fbca ;_ffbe ++{_ac .Printf ("\u0025\u0031\u0032\u0064\u0020\u007c",_ffbe );};_ac .Println ("");_ac .Printf ("\u0025\u0035\u0073 \u002b","");for _defeg :=0;_defeg < _adffd ._fbca ;
_defeg ++{_ac .Print ("\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d-\u002d\u002d\u002d\u002b");};_ac .Println ("");for _fcaeg :=0;_fcaeg < _adffd ._agfc ;_fcaeg ++{_ac .Printf ("\u0025\u0035\u0064 \u007c",_fcaeg );for _dcfe :=0;_dcfe < _adffd ._fbca ;
_dcfe ++{_ffbee ,_ :=_adffd ._ccad [_dace (_dcfe ,_fcaeg )].parasBBox ();_badc :="";_agbe :=_ffbee .merge ();if _agbe !=nil {_badc =_agbe .text ();};_badc =_ac .Sprintf ("\u0025\u0071",_ecafe (_badc ,12));_badc =_badc [1:len (_badc )-1];_ac .Printf ("\u0025\u0031\u0032\u0073\u0020\u007c",_badc );
};_ac .Println ("");};};

// String returns a human readable description of `s`.
func (_eafae intSet )String ()string {var _ebaff []int ;for _bccg :=range _eafae {if _eafae .has (_bccg ){_ebaff =append (_ebaff ,_bccg );};};_ee .Ints (_ebaff );return _ac .Sprintf ("\u0025\u002b\u0076",_ebaff );};func (_fcf *textObject )showTextAdjusted (_adfc *_ce .PdfObjectArray )error {_bgg :=false ;
for _ ,_acd :=range _adfc .Elements (){switch _acd .(type ){case *_ce .PdfObjectFloat ,*_ce .PdfObjectInteger :_edda ,_gdd :=_ce .GetNumberAsFloat (_acd );if _gdd !=nil {_f .Log .Debug ("\u0045\u0052\u0052\u004fR\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078t\u0041\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0042\u0061\u0064\u0020\u006e\u0075\u006d\u0065r\u0069\u0063\u0061\u006c\u0020a\u0072\u0067\u002e\u0020\u006f\u003d\u0025\u0073\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_acd ,_adfc );
return _gdd ;};_fee ,_ebd :=-_edda *0.001*_fcf ._add ._eed ,0.0;if _bgg {_ebd ,_fee =_fee ,_ebd ;};_ddcg :=_cde (_b .Point {X :_fee ,Y :_ebd });_fcf ._dab .Concat (_ddcg );case *_ce .PdfObjectString :_dgbc ,_egfd :=_ce .GetStringBytes (_acd );if !_egfd {_f .Log .Trace ("s\u0068\u006f\u0077\u0054\u0065\u0078\u0074\u0041\u0064j\u0075\u0073\u0074\u0065\u0064\u003a\u0020Ba\u0064\u0020\u0073\u0074r\u0069\u006e\u0067\u0020\u0061\u0072\u0067\u002e\u0020o=\u0025\u0073 \u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_acd ,_adfc );
return _ce .ErrTypeError ;};_fcf .renderText (_dgbc );default:_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078\u0074A\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0055\u006e\u0065\u0078p\u0065\u0063\u0074\u0065\u0064\u0020\u0074\u0079\u0070\u0065\u0020\u0028%T\u0029\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_acd ,_adfc );
return _ce .ErrTypeError ;};};return nil ;};func (_dcbab *textTable )getRight ()paraList {_dgca :=make (paraList ,_dcbab ._agfc );for _gfca :=0;_gfca < _dcbab ._agfc ;_gfca ++{_becec :=_dcbab .get (_dcbab ._fbca -1,_gfca )._fgfa ;if _becec ==nil ||_becec ._egceg {return nil ;
};_dgca [_gfca ]=_becec ;};for _effaf :=0;_effaf < _dcbab ._agfc -1;_effaf ++{if _dgca [_effaf ]._cage !=_dgca [_effaf +1]{return nil ;};};return _dgca ;};func _ffgc (_egdd _cf .PdfRectangle )*ruling {return &ruling {_edaga :_deba ,_bfdfd :_egdd .Ury ,_dcae :_egdd .Llx ,_ddgfa :_egdd .Urx };
};func (_gagbb paraList )sortReadingOrder (){_f .Log .Trace ("\u0073\u006fr\u0074\u0052\u0065\u0061\u0064i\u006e\u0067\u004f\u0072\u0064e\u0072\u003a\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_gagbb ));
if len (_gagbb )<=1{return ;};_gagbb .computeEBBoxes ();_ee .Slice (_gagbb ,func (_dgfe ,_gbdae int )bool {return _caab (_gagbb [_dgfe ],_gagbb [_gbdae ])<=0});_ecec :=_gagbb .topoOrder ();_gagbb .reorder (_ecec );};const _eee =20;func (_cbfd intSet )del (_feedd int ){delete (_cbfd ,_feedd )};
type cachedImage struct{_dfe *_cf .Image ;_dgb _cf .PdfColorspace ;};func (_eeg *textPara )writeText (_bgbb _cb .Writer ){if _eeg ._fdcc ==nil {_eeg .writeCellText (_bgbb );return ;};for _acea :=0;_acea < _eeg ._fdcc ._agfc ;_acea ++{for _degc :=0;_degc < _eeg ._fdcc ._fbca ;
_degc ++{_gfeb :=_eeg ._fdcc .get (_degc ,_acea );if _gfeb ==nil {_bgbb .Write ([]byte ("\u0009"));}else {_gfeb .writeCellText (_bgbb );};_bgbb .Write ([]byte ("\u0020"));};if _acea < _eeg ._fdcc ._agfc -1{_bgbb .Write ([]byte ("\u000a"));};};};func (_fdca *shapesState )clearPath (){_fdca ._dcd =nil ;
_fdca ._ccf =false ;if _fac {_f .Log .Info ("\u0043\u004c\u0045A\u0052\u003a\u0020\u0073\u0073\u003d\u0025\u0073",_fdca );};};func (_efcf paraList )writeText (_baece _cb .Writer ){for _bafg ,_fegad :=range _efcf {if _fegad ._acgb {continue ;};_fegad .writeText (_baece );
if _bafg !=len (_efcf )-1{if _bfbb (_fegad ,_efcf [_bafg +1]){_baece .Write ([]byte ("\u0020"));}else {_baece .Write ([]byte ("\u000a"));_baece .Write ([]byte ("\u000a"));};};};_baece .Write ([]byte ("\u000a"));_baece .Write ([]byte ("\u000a"));};func (_dgfa *textObject )setWordSpacing (_ddf float64 ){if _dgfa ==nil {return ;
};_dgfa ._add ._cbcf =_ddf ;};

// String returns a description of `tm`.
func (_adbd *textMark )String ()string {return _ac .Sprintf ("\u0025\u002e\u0032f \u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\u0022\u0025\u0073\u0022",_adbd .PdfRectangle ,_adbd ._eggg ,_adbd ._babe );};func _ecafe (_bgeba string ,_cgde int )string {if len (_bgeba )< _cgde {return _bgeba ;
};return _bgeba [:_cgde ];};func _gbebd (_fbcga ,_bfdg _b .Point )rulingKind {_adcb :=_ea .Abs (_fbcga .X -_bfdg .X );_cbd :=_ea .Abs (_fbcga .Y -_bfdg .Y );return _afag (_adcb ,_cbd ,_abgg );};const (_fgbf =1.0e-6;_cceg =1.0e-4;_agcf =10;_aaga =6;_gcae =0.5;
_egde =0.12;_fedg =0.19;_fagcb =0.04;_agaa =0.04;_adgf =1.0;_efgc =0.04;_debb =0.4;_gcgc =0.7;_ebbc =1.0;_cdag =0.1;_ddgf =1.4;_fcfd =0.46;_bfgb =0.02;_ecdb =0.2;_cegg =0.5;_becb =4;_feeg =4.0;_cacd =6;_acae =0.3;_bfba =0.01;_badb =0.02;_dead =2;_ebe =2;
_eecg =500;_abgg =4.0;_gfege =4.0;_dgec =0.05;_cfaf =0.1;_daa =2.0;_fedd =2.0;_ebaf =1.5;_dcbf =3.0;_cdaba =0.25;);func (_dbeg *textObject )newTextMark (_dbcg string ,_egbec _b .Matrix ,_agaag _b .Point ,_ddcb float64 ,_fccf *_cf .PdfFont ,_edce float64 ,_aafg ,_ababc _cc .Color )(textMark ,bool ){_ddfc :=_egbec .Angle ();
_dffa :=_bcbc (_ddfc ,_agcf );var _gfbd float64 ;if _dffa %180!=90{_gfbd =_egbec .ScalingFactorY ();}else {_gfbd =_egbec .ScalingFactorX ();};_fbde :=_aabc (_egbec );_acbf :=_cf .PdfRectangle {Llx :_fbde .X ,Lly :_fbde .Y ,Urx :_agaag .X ,Ury :_agaag .Y };
switch _dffa %360{case 90:_acbf .Urx -=_gfbd ;case 180:_acbf .Ury -=_gfbd ;case 270:_acbf .Urx +=_gfbd ;case 0:_acbf .Ury +=_gfbd ;default:_dffa =0;_acbf .Ury +=_gfbd ;};if _acbf .Llx > _acbf .Urx {_acbf .Llx ,_acbf .Urx =_acbf .Urx ,_acbf .Llx ;};if _acbf .Lly > _acbf .Ury {_acbf .Lly ,_acbf .Ury =_acbf .Ury ,_acbf .Lly ;
};_afaa ,_bfdf :=_dgbe (_acbf ,_dbeg ._efb ._aaa );if !_bfdf {_f .Log .Debug ("\u0054\u0065\u0078\u0074\u0020m\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069\u0064\u0065\u0020\u0070a\u0067\u0065\u002e\u0020\u0062\u0062\u006f\u0078\u003d\u0025\u0067\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u003d\u0025\u0067\u0020\u0074\u0065\u0078\u0074\u003d\u0025q",_acbf ,_dbeg ._efb ._aaa ,_dbcg );
};_acbf =_afaa ;_gbdc :=_acbf ;_afac :=_dbeg ._efb ._aaa ;switch _dffa %360{case 90:_afac .Urx ,_afac .Ury =_afac .Ury ,_afac .Urx ;_gbdc =_cf .PdfRectangle {Llx :_afac .Urx -_acbf .Ury ,Urx :_afac .Urx -_acbf .Lly ,Lly :_acbf .Llx ,Ury :_acbf .Urx };case 180:_gbdc =_cf .PdfRectangle {Llx :_afac .Urx -_acbf .Llx ,Urx :_afac .Urx -_acbf .Urx ,Lly :_afac .Ury -_acbf .Lly ,Ury :_afac .Ury -_acbf .Ury };
case 270:_afac .Urx ,_afac .Ury =_afac .Ury ,_afac .Urx ;_gbdc =_cf .PdfRectangle {Llx :_acbf .Ury ,Urx :_acbf .Lly ,Lly :_afac .Ury -_acbf .Llx ,Ury :_afac .Ury -_acbf .Urx };};if _gbdc .Llx > _gbdc .Urx {_gbdc .Llx ,_gbdc .Urx =_gbdc .Urx ,_gbdc .Llx ;
};if _gbdc .Lly > _gbdc .Ury {_gbdc .Lly ,_gbdc .Ury =_gbdc .Ury ,_gbdc .Lly ;};_bafae :=textMark {_babe :_dbcg ,PdfRectangle :_gbdc ,_face :_acbf ,_fffea :_fccf ,_eggg :_gfbd ,_egdb :_edce ,_fffb :_egbec ,_gea :_agaag ,_aeag :_dffa ,_cgac :_aafg ,_dagf :_ababc };
if _fgb {_f .Log .Info ("n\u0065\u0077\u0054\u0065\u0078\u0074M\u0061\u0072\u006b\u003a\u0020\u0073t\u0061\u0072\u0074\u003d\u0025\u002e\u0032f\u0020\u0065\u006e\u0064\u003d\u0025\u002e\u0032\u0066\u0020%\u0073",_fbde ,_agaag ,_bafae .String ());};return _bafae ,_bfdf ;
};

// PageText represents the layout of text on a device page.
type PageText struct{_cgf []*textMark ;_agc string ;_fge []TextMark ;_cdb []TextTable ;_fafg _cf .PdfRectangle ;_gag []pathSection ;_abce []pathSection ;};func (_edcec *textPara )text ()string {_fece :=new (_g .Buffer );_edcec .writeText (_fece );return _fece .String ();
};func (_gaf *textObject )moveText (_gbb ,_edf float64 ){_gaf .moveLP (_gbb ,_edf )};func _edag (_bbgf []TextMark ,_fgbe *int ,_gacb string )[]TextMark {_fbcb :=_aeca ;_fbcb .Text =_gacb ;return _fbge (_bbgf ,_fgbe ,_fbcb );};func (_cggg paraList )findTableGrid (_gfbda gridTiling )(*textTable ,map[*textPara ]struct{}){_edaf :=len (_gfbda ._efgea );
_bdgcb :=len (_gfbda ._aebe );_effc :=textTable {_aeaa :true ,_fbca :_edaf ,_agfc :_bdgcb ,_befa :make (map[uint64 ]*textPara ,_edaf *_bdgcb ),_ccad :make (map[uint64 ]compositeCell ,_edaf *_bdgcb )};_afeef :=make (map[*textPara ]struct{});_cacdd :=int ((1.0-_acae )*float64 (_edaf *_bdgcb ));
_ccabd :=0;if _gcac {_f .Log .Info ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0064\u0020\u0078\u0020%\u0064",_edaf ,_bdgcb );};for _aefcc ,_fdgcg :=range _gfbda ._aebe {_edggc ,_fdcb :=_gfbda ._geac [_fdgcg ];
if !_fdcb {continue ;};for _ababg ,_ffcgc :=range _gfbda ._efgea {_eebgd ,_bbdb :=_edggc [_ffcgc ];if !_bbdb {continue ;};_eecgc :=_cggg .inTile (_eebgd );if len (_eecgc )==0{_ccabd ++;if _ccabd > _cacdd {if _gcac {_f .Log .Info ("\u0021\u006e\u0075m\u0045\u006d\u0070\u0074\u0079\u003d\u0025\u0064",_ccabd );
};return nil ,nil ;};}else {_effc .putComposite (_ababg ,_aefcc ,_eecgc ,_eebgd .PdfRectangle );for _ ,_fbffa :=range _eecgc {_afeef [_fbffa ]=struct{}{};};};};};_gddb :=0;for _bgede :=0;_bgede < _edaf ;_bgede ++{_edcc :=_effc .get (_bgede ,0);if _edcc ==nil ||!_edcc ._acgb {_gddb ++;
};};if _gddb ==0{if _gcac {_f .Log .Info ("\u0021\u006e\u0075m\u0048\u0065\u0061\u0064\u0065\u0072\u003d\u0030");};return nil ,nil ;};_dcge :=_effc .reduceTiling (_gfbda ,_dcbf );_dcge =_dcge .subdivide ();return _dcge ,_afeef ;};func (_fdcef compositeCell )split (_dcab ,_bbgd []float64 )*textTable {_ffcbe :=len (_dcab )+1;
_fcgg :=len (_bbgd )+1;if _ffda {_f .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0043\u0065l\u006c\u002e\u0073\u0070l\u0069\u0074\u003a\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a\u0009\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025\u0073\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073=\u0025\u0036\u002e\u0032\u0066\u000a\t\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d%\u0036\u002e\u0032\u0066",_fcgg ,_ffcbe ,_fdcef ,_dcab ,_bbgd );
_ac .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073\u000a",len (_fdcef .paraList ));for _bbce ,_cfbfa :=range _fdcef .paraList {_ac .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bbce ,_cfbfa .String ());
};_ac .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",len (_fdcef .lines ()));for _dcbd ,_dccdg :=range _fdcef .lines (){_ac .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dcbd ,_dccdg );};};_dcab =_aacd (_dcab ,_fdcef .Ury ,_fdcef .Lly );
_bbgd =_aacd (_bbgd ,_fdcef .Llx ,_fdcef .Urx );_ccg :=make (map[uint64 ]*textPara ,_fcgg *_ffcbe );_adga :=textTable {_fbca :_fcgg ,_agfc :_ffcbe ,_befa :_ccg };_gcfbc :=_fdcef .paraList ;_ee .Slice (_gcfbc ,func (_baab ,_gdbd int )bool {_deged ,_fdebg :=_gcfbc [_baab ],_gcfbc [_gdbd ];
_dcbb ,_ggbb :=_deged .Lly ,_fdebg .Lly ;if _dcbb !=_ggbb {return _dcbb < _ggbb ;};return _deged .Llx < _fdebg .Llx ;});_fgaec :=make (map[uint64 ]_cf .PdfRectangle ,_fcgg *_ffcbe );for _gadd ,_ccefb :=range _dcab [1:]{_egdee :=_dcab [_gadd ];for _cgagd ,_dafa :=range _bbgd [1:]{_aecf :=_bbgd [_cgagd ];
_fgaec [_dace (_cgagd ,_gadd )]=_cf .PdfRectangle {Llx :_aecf ,Urx :_dafa ,Lly :_ccefb ,Ury :_egdee };};};if _ffda {_f .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0043\u0065l\u006c\u002e\u0073\u0070\u006c\u0069\u0074\u003a\u0020\u0072e\u0063\u0074\u0073");
_ac .Printf ("\u0020\u0020\u0020\u0020");for _dgfec :=0;_dgfec < _fcgg ;_dgfec ++{_ac .Printf ("\u0025\u0033\u0030\u0064\u002c\u0020",_dgfec );};_ac .Println ();for _eggf :=0;_eggf < _ffcbe ;_eggf ++{_ac .Printf ("\u0020\u0020\u0025\u0032\u0064\u003a",_eggf );
for _gagf :=0;_gagf < _fcgg ;_gagf ++{_ac .Printf ("\u00256\u002e\u0032\u0066\u002c\u0020",_fgaec [_dace (_gagf ,_eggf )]);};_ac .Println ();};};_cgcg :=func (_caag *textLine )(int ,int ){for _bagd :=0;_bagd < _ffcbe ;_bagd ++{for _deee :=0;_deee < _fcgg ;
_deee ++{if _fbcg (_fgaec [_dace (_deee ,_bagd )],_caag .PdfRectangle ){return _deee ,_bagd ;};};};return -1,-1;};_bgbbd :=make (map[uint64 ][]*textLine ,_fcgg *_ffcbe );for _ ,_ada :=range _gcfbc .lines (){_gcgcb ,_dgce :=_cgcg (_ada );if _gcgcb < 0{continue ;
};_bgbbd [_dace (_gcgcb ,_dgce )]=append (_bgbbd [_dace (_gcgcb ,_dgce )],_ada );};for _gebab :=0;_gebab < len (_dcab )-1;_gebab ++{_edec :=_dcab [_gebab ];_cded :=_dcab [_gebab +1];for _eaec :=0;_eaec < len (_bbgd )-1;_eaec ++{_ffgda :=_bbgd [_eaec ];
_baff :=_bbgd [_eaec +1];_gfaf :=_cf .PdfRectangle {Llx :_ffgda ,Urx :_baff ,Lly :_cded ,Ury :_edec };_ebfc :=_bgbbd [_dace (_eaec ,_gebab )];if len (_ebfc )==0{continue ;};_eaad :=_cbca (_gfaf ,_ebfc );_adga .put (_eaec ,_gebab ,_eaad );};};return &_adga ;
};func (_bfa *textObject )setTextMatrix (_fbg []float64 ){if len (_fbg )!=6{_f .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u006c\u0065\u006e\u0028\u0066\u0029\u0020\u0021\u003d\u0020\u0036\u0020\u0028\u0025\u0064\u0029",len (_fbg ));return ;};_baec ,_eaeb ,_abc ,_aade ,_degf ,_bccc :=_fbg [0],_fbg [1],_fbg [2],_fbg [3],_fbg [4],_fbg [5];
_bfa ._dab =_b .NewMatrix (_baec ,_eaeb ,_abc ,_aade ,_degf ,_bccc );_bfa ._aaabb =_bfa ._dab ;};func _ecfd (_fgde float64 )bool {return _ea .Abs (_fgde )< _fedd };func (_ecfga *textTable )emptyRow (_ebabe int )bool {for _bbfa :=0;_bbfa < _ecfga ._fbca ;
_bbfa ++{_bacc :=_ecfga .get (_bbfa ,_ebabe );if _bacc !=nil &&_bacc .text ()!=""{return false ;};};return true ;};func (_aaed *shapesState )closePath (){if _aaed ._ccf {_aaed ._dcd =append (_aaed ._dcd ,_cbf (_aaed ._dce ));_aaed ._ccf =false ;}else if len (_aaed ._dcd )==0{if _fac {_f .Log .Debug ("\u0063\u006c\u006f\u0073eP\u0061\u0074\u0068\u0020\u0077\u0069\u0074\u0068\u0020\u006e\u006f\u0020\u0070\u0061t\u0068");
};_aaed ._ccf =false ;return ;};_aaed ._dcd [len (_aaed ._dcd )-1].close ();if _fac {_f .Log .Info ("\u0063\u006c\u006f\u0073\u0065\u0050\u0061\u0074\u0068\u003a\u0020\u0025\u0073",_aaed );};};func (_gab *imageExtractContext )extractInlineImage (_ggd *_cea .ContentStreamInlineImage ,_dcg _cea .GraphicsState ,_aabg *_cf .PdfPageResources )error {_afg ,_gdb :=_ggd .ToImage (_aabg );
if _gdb !=nil {return _gdb ;};_bfg ,_gdb :=_ggd .GetColorSpace (_aabg );if _gdb !=nil {return _gdb ;};if _bfg ==nil {_bfg =_cf .NewPdfColorspaceDeviceGray ();};_abf ,_gdb :=_bfg .ImageToRGB (*_afg );if _gdb !=nil {return _gdb ;};_aad :=ImageMark {Image :&_abf ,Width :_dcg .CTM .ScalingFactorX (),Height :_dcg .CTM .ScalingFactorY (),Angle :_dcg .CTM .Angle ()};
_aad .X ,_aad .Y =_dcg .CTM .Translation ();_gab ._eeb =append (_gab ._eeb ,_aad );_gab ._bea ++;return nil ;};func (_gdfe compositeCell )String ()string {_cebf :="";if len (_gdfe .paraList )> 0{_cebf =_ecafe (_gdfe .paraList .merge ().text (),50);};return _ac .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0070\u0061\u0072a\u0073\u0020\u0025\u0071",_gdfe .PdfRectangle ,len (_gdfe .paraList ),_cebf );
};func (_dad *subpath )close (){if !_eggcd (_dad ._cfd [0],_dad .last ()){_dad .add (_dad ._cfd [0]);};_dad ._fgec =true ;_dad .removeDuplicates ();};func (_ceff *shapesState )lineTo (_dcad ,_dgc float64 ){if _fac {_f .Log .Info ("\u006c\u0069\u006eeT\u006f\u0028\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0070\u003d\u0025\u002e\u0032\u0066",_dcad ,_dgc ,_ceff .devicePoint (_dcad ,_dgc ));
};_ceff .addPoint (_dcad ,_dgc );};type subpath struct{_cfd []_b .Point ;_fgec bool ;};

// Text returns the extracted page text.
func (_gagg PageText )Text ()string {return _gagg ._agc };func (_ded *textObject )setTextRise (_fdgd float64 ){if _ded ==nil {return ;};_ded ._add ._gabf =_fdgd ;};func _dgbe (_aceb ,_ceac _cf .PdfRectangle )(_cf .PdfRectangle ,bool ){if !_fcefd (_aceb ,_ceac ){return _cf .PdfRectangle {},false ;
};return _cf .PdfRectangle {Llx :_ea .Max (_aceb .Llx ,_ceac .Llx ),Urx :_ea .Min (_aceb .Urx ,_ceac .Urx ),Lly :_ea .Max (_aceb .Lly ,_ceac .Lly ),Ury :_ea .Min (_aceb .Ury ,_ceac .Ury )},true ;};func (_dda paraList )computeEBBoxes (){if _degfd {_f .Log .Info ("\u0063o\u006dp\u0075\u0074\u0065\u0045\u0042\u0042\u006f\u0078\u0065\u0073\u003a");
};for _ ,_acfd :=range _dda {_acfd ._gafc =_acfd .PdfRectangle ;};_dadc :=_dda .yNeighbours (0);for _fecg ,_dgaf :=range _dda {_gbdce :=_dgaf ._gafc ;_efbd ,_gcfb :=-1.0e9,+1.0e9;for _ ,_efba :=range _dadc [_dgaf ]{_dbfe :=_dda [_efba ]._gafc ;if _dbfe .Urx < _gbdce .Llx {_efbd =_ea .Max (_efbd ,_dbfe .Urx );
}else if _gbdce .Urx < _dbfe .Llx {_gcfb =_ea .Min (_gcfb ,_dbfe .Llx );};};for _ccegg ,_faec :=range _dda {_gbdfd :=_faec ._gafc ;if _fecg ==_ccegg ||_gbdfd .Ury > _gbdce .Lly {continue ;};if _efbd <=_gbdfd .Llx &&_gbdfd .Llx < _gbdce .Llx {_gbdce .Llx =_gbdfd .Llx ;
}else if _gbdfd .Urx <=_gcfb &&_gbdce .Urx < _gbdfd .Urx {_gbdce .Urx =_gbdfd .Urx ;};};if _degfd {_ac .Printf ("\u0025\u0034\u0064\u003a %\u0036\u002e\u0032\u0066\u2192\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0071\u000a",_fecg ,_dgaf ._gafc ,_gbdce ,_ecafe (_dgaf .text (),50));
};_dgaf ._gafc =_gbdce ;};if _fed {for _ ,_dgdb :=range _dda {_dgdb .PdfRectangle =_dgdb ._gafc ;};};};func (_fecefa *textTable )computeBbox ()_cf .PdfRectangle {var _agdgf _cf .PdfRectangle ;_aaaac :=false ;for _bffc :=0;_bffc < _fecefa ._agfc ;_bffc ++{for _ffec :=0;
_ffec < _fecefa ._fbca ;_ffec ++{_dbdae :=_fecefa .get (_ffec ,_bffc );if _dbdae ==nil {continue ;};if !_aaaac {_agdgf =_dbdae .PdfRectangle ;_aaaac =true ;}else {_agdgf =_gdfb (_agdgf ,_dbdae .PdfRectangle );};};};return _agdgf ;};func _bdfe (_gbde ,_gbcgc _b .Point )rulingKind {_fbgfa :=_ea .Abs (_gbde .X -_gbcgc .X );
_edbg :=_ea .Abs (_gbde .Y -_gbcgc .Y );return _afag (_fbgfa ,_edbg ,_dgec );};func _cdge (_dbcf []*textMark ,_addba _cf .PdfRectangle )[]*textWord {var _fdgca []*textWord ;var _ecaf *textWord ;if _fgb {_f .Log .Info ("\u006d\u0061\u006beT\u0065\u0078\u0074\u0057\u006f\u0072\u0064\u0073\u003a\u0020\u0025\u0064\u0020\u006d\u0061\u0072\u006b\u0073",len (_dbcf ));
};_aedfd :=func (){if _ecaf !=nil {_gbdgc :=_ecaf .computeText ();if !_aaae (_gbdgc ){_ecaf ._ffcba =_gbdgc ;_fdgca =append (_fdgca ,_ecaf );if _fgb {_f .Log .Info ("\u0061\u0064\u0064Ne\u0077\u0057\u006f\u0072\u0064\u003a\u0020\u0025\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",len (_fdgca )-1,_ecaf .String ());
for _dbcga ,_bgccg :=range _ecaf ._efbfe {_ac .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dbcga ,_bgccg .String ());};};};_ecaf =nil ;};};for _ ,_fbbed :=range _dbcf {if _gccb &&_ecaf !=nil &&len (_ecaf ._efbfe )> 0{_abedf :=_ecaf ._efbfe [len (_ecaf ._efbfe )-1];
_gffg ,_ddba :=_gbcc (_fbbed ._babe );_abfd ,_ffee :=_gbcc (_abedf ._babe );if _ddba &&!_ffee &&_abedf .inDiacriticArea (_fbbed ){_ecaf .addDiacritic (_gffg );continue ;};if _ffee &&!_ddba &&_fbbed .inDiacriticArea (_abedf ){_ecaf ._efbfe =_ecaf ._efbfe [:len (_ecaf ._efbfe )-1];
_ecaf .appendMark (_fbbed ,_addba );_ecaf .addDiacritic (_abfd );continue ;};};_fcfaf :=_aaae (_fbbed ._babe );if _fcfaf {_aedfd ();continue ;};if _ecaf ==nil &&!_fcfaf {_ecaf =_gccdg ([]*textMark {_fbbed },_addba );continue ;};_efcga :=_ecaf ._addg ;_ccdff :=_ea .Abs (_fbgc (_addba ,_fbbed )-_ecaf ._cbcb )/_efcga ;
_adccb :=_agffc (_fbbed ,_ecaf )/_efcga ;if _adccb >=_egde ||!(-_fedg <=_adccb &&_ccdff <=_fagcb ){_aedfd ();_ecaf =_gccdg ([]*textMark {_fbbed },_addba );continue ;};_ecaf .appendMark (_fbbed ,_addba );};_aedfd ();return _fdgca ;};func (_ebg *textObject )setCharSpacing (_bbb float64 ){if _ebg ==nil {return ;
};_ebg ._add ._dgac =_bbb ;if _aabgd {_f .Log .Info ("\u0073\u0065t\u0043\u0068\u0061\u0072\u0053\u0070\u0061\u0063\u0069\u006e\u0067\u003a\u0020\u0025\u002e\u0032\u0066\u0020\u0073\u0074\u0061\u0074e=\u0025\u0073",_bbb ,_ebg ._add .String ());};};type stateStack []*textState ;
func (_acca *textWord )computeText ()string {_gdgef :=make ([]string ,len (_acca ._efbfe ));for _egebg ,_cdeg :=range _acca ._efbfe {_gdgef [_egebg ]=_cdeg ._babe ;};return _ca .Join (_gdgef ,"");};func (_gdba rulingList )augmentGrid ()(rulingList ,rulingList ){_fbfa ,_egac :=_gdba .vertsHorzs ();
if len (_fbfa )==0||len (_egac )==0{return _fbfa ,_egac ;};_fgfg ,_dagda :=_fbfa ,_egac ;_efage :=_fbfa .bbox ();_caabg :=_egac .bbox ();if _agfd {_f .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0056\u003d\u0025\u0036\u002e\u0032\u0066",_efage );
_f .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0048\u003d\u0025\u0036\u002e\u0032\u0066",_caabg );};var _fccea ,_afdg ,_cddf ,_aedg *ruling ;if _caabg .Llx < _efage .Llx -_daa {_fccea =&ruling {_deag :_fddbf ,_edaga :_afb ,_bfdfd :_caabg .Llx ,_dcae :_efage .Lly ,_ddgfa :_efage .Ury };
_fbfa =append (rulingList {_fccea },_fbfa ...);};if _caabg .Urx > _efage .Urx +_daa {_afdg =&ruling {_deag :_fddbf ,_edaga :_afb ,_bfdfd :_caabg .Urx ,_dcae :_efage .Lly ,_ddgfa :_efage .Ury };_fbfa =append (_fbfa ,_afdg );};if _efage .Lly < _caabg .Lly -_daa {_cddf =&ruling {_deag :_fddbf ,_edaga :_deba ,_bfdfd :_efage .Lly ,_dcae :_caabg .Llx ,_ddgfa :_caabg .Urx };
_egac =append (rulingList {_cddf },_egac ...);};if _efage .Ury > _caabg .Ury +_daa {_aedg =&ruling {_deag :_fddbf ,_edaga :_deba ,_bfdfd :_efage .Ury ,_dcae :_caabg .Llx ,_ddgfa :_caabg .Urx };_egac =append (_egac ,_aedg );};if len (_fbfa )+len (_egac )==len (_gdba ){return _fgfg ,_dagda ;
};_agdca :=append (_fbfa ,_egac ...);_gdba .log ("u\u006e\u0061\u0075\u0067\u006d\u0065\u006e\u0074\u0065\u0064");_agdca .log ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0065d");return _fbfa ,_egac ;};func (_ecef paraList )inTile (_ebadf gridTile )paraList {var _badff paraList ;
for _ ,_bbbc :=range _ecef {if _ebadf .contains (_bbbc .PdfRectangle ){_badff =append (_badff ,_bbbc );};};if _ffda {_ac .Printf ("\u0020 \u0020\u0069\u006e\u0054i\u006c\u0065\u003a\u0020\u0020%\u0073 \u0069n\u0073\u0069\u0064\u0065\u003d\u0025\u0064\n",_ebadf ,len (_badff ));
for _gdbf ,_dagge :=range _badff {_ac .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gdbf ,_dagge );};_ac .Println ("");};return _badff ;};func (_ebcf *wordBag )arrangeText ()*textPara {_ebcf .sort ();if _cgbbg {_ebcf .removeDuplicates ();
};var _eaeg []*textLine ;for _ ,_egdcb :=range _ebcf .depthIndexes (){for !_ebcf .empty (_egdcb ){_begg :=_ebcf .firstReadingIndex (_egdcb );_fddg :=_ebcf .firstWord (_begg );_gbbd :=_gcbc (_ebcf ,_begg );_cgbg :=_fddg ._addg ;_abaed :=_fddg ._cbcb -_gcae *_cgbg ;
_deed :=_fddg ._cbcb +_gcae *_cgbg ;_ccde :=_ddgf *_cgbg ;_fgbd :=_fcfd *_cgbg ;_aabba :for {var _abed *textWord ;_fegef :=0;for _ ,_ceaf :=range _ebcf .depthBand (_abaed ,_deed ){_ggdde :=_ebcf .highestWord (_ceaf ,_abaed ,_deed );if _ggdde ==nil {continue ;
};_ccca :=_agffc (_ggdde ,_gbbd ._badd [len (_gbbd ._badd )-1]);if _ccca < -_fgbd {break _aabba ;};if _ccca > _ccde {continue ;};if _abed !=nil &&_ecaed (_ggdde ,_abed )>=0{continue ;};_abed =_ggdde ;_fegef =_ceaf ;};if _abed ==nil {break ;};_gbbd .pullWord (_ebcf ,_abed ,_fegef );
};_gbbd .markWordBoundaries ();_eaeg =append (_eaeg ,_gbbd );};};if len (_eaeg )==0{return nil ;};_ee .Slice (_eaeg ,func (_bfdc ,_caaf int )bool {return _caab (_eaeg [_bfdc ],_eaeg [_caaf ])< 0});_addc :=_cbca (_ebcf .PdfRectangle ,_eaeg );if _ggfg {_f .Log .Info ("\u0061\u0072\u0072an\u0067\u0065\u0054\u0065\u0078\u0074\u0020\u0021\u0021\u0021\u0020\u0070\u0061\u0072\u0061\u003d\u0025\u0073",_addc .String ());
if _gcad {for _ddedd ,_dccd :=range _addc ._gdff {_ac .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ddedd ,_dccd .String ());if _aabf {for _gece ,_begff :=range _dccd ._badd {_ac .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_gece ,_begff .String ());
for _cagf ,_efcb :=range _begff ._efbfe {_ac .Printf ("\u00251\u0032\u0064\u003a\u0020\u0025\u0073\n",_cagf ,_efcb .String ());};};};};};};return _addc ;};func _gabfb (_bdgc _cf .PdfRectangle ,_fecb ,_fegf ,_aedeb ,_edfgg *ruling )gridTile {_afaee :=_bdgc .Llx ;
_ebbe :=_bdgc .Urx ;_daccc :=_bdgc .Lly ;_adgbd :=_bdgc .Ury ;return gridTile {PdfRectangle :_bdgc ,_dfdg :_fecb !=nil &&_fecb .encloses (_daccc ,_adgbd ),_dgea :_fegf !=nil &&_fegf .encloses (_daccc ,_adgbd ),_ddccb :_aedeb !=nil &&_aedeb .encloses (_afaee ,_ebbe ),_fdedg :_edfgg !=nil &&_edfgg .encloses (_afaee ,_ebbe )};
};func _aeeg (_bcb []*textWord ,_fcfa float64 ,_fdeb ,_egdc rulingList )*wordBag {_bbad :=_bgaf (_bcb [0],_fcfa ,_fdeb ,_egdc );for _ ,_cfe :=range _bcb [1:]{_acda :=_fefb (_cfe ._cbcb );_bbad ._gagc [_acda ]=append (_bbad ._gagc [_acda ],_cfe );_bbad .PdfRectangle =_gdfb (_bbad .PdfRectangle ,_cfe .PdfRectangle );
};_bbad .sort ();return _bbad ;};func (_egdea *textTable )bbox ()_cf .PdfRectangle {return _egdea .PdfRectangle };func (_aede *subpath )clear (){*_aede =subpath {}};func (_cdacb *textTable )reduce ()*textTable {_eged :=make ([]int ,0,_cdacb ._agfc );_bfbag :=make ([]int ,0,_cdacb ._fbca );
for _aacf :=0;_aacf < _cdacb ._agfc ;_aacf ++{if !_cdacb .emptyRow (_aacf ){_eged =append (_eged ,_aacf );};};for _dfgg :=0;_dfgg < _cdacb ._fbca ;_dfgg ++{if !_cdacb .emptyColumn (_dfgg ){_bfbag =append (_bfbag ,_dfgg );};};if len (_eged )==_cdacb ._agfc &&len (_bfbag )==_cdacb ._fbca {return _cdacb ;
};_caccd :=textTable {_aeaa :_cdacb ._aeaa ,_fbca :len (_bfbag ),_agfc :len (_eged ),_befa :make (map[uint64 ]*textPara ,len (_bfbag )*len (_eged ))};if _ffda {_f .Log .Info ("\u0072\u0065\u0064\u0075ce\u003a\u0020\u0025\u0064\u0078\u0025\u0064\u0020\u002d\u003e\u0020\u0025\u0064\u0078%\u0064",_cdacb ._fbca ,_cdacb ._agfc ,len (_bfbag ),len (_eged ));
_f .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_bfbag );_f .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_eged );};for _bfda ,_adcdc :=range _eged {for _baba ,_bagbe :=range _bfbag {_gcefb :=_cdacb .get (_bagbe ,_adcdc );
if _gcefb ==nil {continue ;};if _ffda {_ac .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_baba ,_bfda ,_bagbe ,_adcdc ,_ecafe (_gcefb .text (),50));};_caccd .put (_baba ,_bfda ,_gcefb );
};};return &_caccd ;};func (_eafe *textObject )getFontDirect (_fcef string )(*_cf .PdfFont ,error ){_aefc ,_gggc :=_eafe .getFontDict (_fcef );if _gggc !=nil {return nil ,_gggc ;};_gcb ,_gggc :=_cf .NewPdfFontFromPdfObject (_aefc );if _gggc !=nil {_f .Log .Debug ("\u0067\u0065\u0074\u0046\u006f\u006e\u0074\u0044\u0069\u0072\u0065\u0063\u0074\u003a\u0020\u004e\u0065\u0077Pd\u0066F\u006f\u006e\u0074\u0046\u0072\u006f\u006d\u0050\u0064\u0066\u004f\u0062j\u0065\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u006e\u0061\u006d\u0065\u003d%\u0023\u0071\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fcef ,_gggc );
};return _gcb ,_gggc ;};func (_agef *textObject )setHorizScaling (_bbfc float64 ){if _agef ==nil {return ;};_agef ._add ._fege =_bbfc ;};func (_aabgc *textWord )toTextMarks (_cddga *int )[]TextMark {var _aaea []TextMark ;for _ ,_aegfa :=range _aabgc ._efbfe {_aaea =_fbge (_aaea ,_cddga ,_aegfa .ToTextMark ());
};return _aaea ;};func _fbge (_gdef []TextMark ,_bbac *int ,_dbba TextMark )[]TextMark {_dbba .Offset =*_bbac ;_gdef =append (_gdef ,_dbba );*_bbac +=len (_dbba .Text );return _gdef ;};func (_aebb *textTable )put (_bddge ,_ecgc int ,_dbfee *textPara ){_aebb ._befa [_dace (_bddge ,_ecgc )]=_dbfee ;
};