//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

//
// Package extractor is used for quickly extracting PDF content through a simple interface.
// Currently offers functionality for extracting textual content.
//
package extractor ;import (_g "bytes";_c "errors";_db "fmt";_bc "github.com/unidoc/unipdf/v3/common";_ac "github.com/unidoc/unipdf/v3/contentstream";_bgf "github.com/unidoc/unipdf/v3/core";_ag "github.com/unidoc/unipdf/v3/internal/license";_af "github.com/unidoc/unipdf/v3/internal/textencoding";
_ee "github.com/unidoc/unipdf/v3/internal/transform";_e "github.com/unidoc/unipdf/v3/model";_bac "golang.org/x/image/draw";_ge "golang.org/x/text/unicode/norm";_cb "golang.org/x/xerrors";_cec "image";_dg "image/color";_f "io";_bg "math";_bb "reflect";_ad "regexp";
_d "sort";_ce "strings";_ba "unicode";_b "unicode/utf8";);

// ToTextMark returns the public view of `tm`.
func (_edcae *textMark )ToTextMark ()TextMark {return TextMark {Text :_edcae ._adag ,Original :_edcae ._cebbg ,BBox :_edcae ._fcf ,Font :_edcae ._fbeg ,FontSize :_edcae ._ddgdb ,FillColor :_edcae ._dagb ,StrokeColor :_edcae ._cdda ,Orientation :_edcae ._ccbec ,DirectObject :_edcae ._gfec ,ObjString :_edcae ._gafe ,Tw :_edcae .Tw ,Th :_edcae .Th ,Tc :_edcae ._dcac ,Index :_edcae ._bcaf };
};

// ExtractFonts returns all font information from the page extractor, including
// font name, font type, the raw data of the embedded font file (if embedded), font descriptor and more.
//
// The argument `previousPageFonts` is used when trying to build a complete font catalog for multiple pages or the entire document.
// The entries from `previousPageFonts` are added to the returned result unless already included in the page, i.e. no duplicate entries.
//
// NOTE: If previousPageFonts is nil, all fonts from the page will be returned. Use it when building up a full list of fonts for a document or page range.
func (_bd *Extractor )ExtractFonts (previousPageFonts *PageFonts )(*PageFonts ,error ){_da :=PageFonts {};_cd :=_da .extractPageResourcesToFont (_bd ._dbc );if _cd !=nil {return nil ,_cd ;};if previousPageFonts !=nil {for _ ,_ccd :=range previousPageFonts .Fonts {if !_agd (_da .Fonts ,_ccd .FontName ){_da .Fonts =append (_da .Fonts ,_ccd );
};};};return &PageFonts {Fonts :_da .Fonts },nil ;};const _gbdf =1.0/1000.0;type fontEntry struct{_ecfa *_e .PdfFont ;_acac int64 ;};func (_ged *wordBag )applyRemovals (_afda map[int ]map[*textWord ]struct{}){for _bccf ,_agada :=range _afda {if len (_agada )==0{continue ;
};_fbgb :=_ged ._fdc [_bccf ];_ecdc :=len (_fbgb )-len (_agada );if _ecdc ==0{delete (_ged ._fdc ,_bccf );continue ;};_cggg :=make ([]*textWord ,_ecdc );_afed :=0;for _ ,_dccc :=range _fbgb {if _ ,_abefd :=_agada [_dccc ];!_abefd {_cggg [_afed ]=_dccc ;
_afed ++;};};_ged ._fdc [_bccf ]=_cggg ;};};func (_aecff paraList )readBefore (_fgca []int ,_aegcf ,_affe int )bool {_dadee ,_baec :=_aecff [_aegcf ],_aecff [_affe ];if _bfaaa (_dadee ,_baec )&&_dadee .Lly > _baec .Lly {return true ;};if !(_dadee ._eddff .Urx < _baec ._eddff .Llx ){return false ;
};_eaae ,_bcfaa :=_dadee .Lly ,_baec .Lly ;if _eaae > _bcfaa {_bcfaa ,_eaae =_eaae ,_bcfaa ;};_bbca :=_bg .Max (_dadee ._eddff .Llx ,_baec ._eddff .Llx );_dagbb :=_bg .Min (_dadee ._eddff .Urx ,_baec ._eddff .Urx );_cdb :=_aecff .llyRange (_fgca ,_eaae ,_bcfaa );
for _ ,_dbbb :=range _cdb {if _dbbb ==_aegcf ||_dbbb ==_affe {continue ;};_ecgef :=_aecff [_dbbb ];if _ecgef ._eddff .Llx <=_dagbb &&_bbca <=_ecgef ._eddff .Urx {return false ;};};return true ;};func _bgddb (_daca float64 )bool {return _bg .Abs (_daca )< _fddg };
func _gacd (_caa _ee .Point )*subpath {return &subpath {_gcfd :[]_ee .Point {_caa }}};func (_egf *PageText )computeViews (){_gceg :=_egf .getParagraphs ();_bcea :=new (_g .Buffer );_gceg .writeText (_bcea );_egf ._ffaf =_bcea .String ();_egf ._gfg =_gceg .toTextMarks ();
_egf ._beda =_gceg .tables ();if _edeg {_bc .Log .Info ("\u0063\u006f\u006dpu\u0074\u0065\u0056\u0069\u0065\u0077\u0073\u003a\u0020\u0074\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064",len (_egf ._beda ));};};func (_dbad paraList )list ()[]*list {var _bcfa []*textLine ;
var _agddb []*textLine ;for _ ,_bbaaa :=range _dbad {_fdce :=_bbaaa .getListLines ();_bcfa =append (_bcfa ,_fdce ...);_agddb =append (_agddb ,_bbaaa ._gcbc ...);};_eefc :=_bag (_bcfa );_edae :=_bffad (_agddb ,_eefc );return _edae ;};func (_adafe gridTiling )complete ()bool {for _ ,_egcf :=range _adafe ._eebab {for _ ,_aeaf :=range _egcf {if !_aeaf .complete (){return false ;
};};};return true ;};

// Font represents the font properties on a PDF page.
type Font struct{PdfFont *_e .PdfFont ;

// FontName represents Font Name from font properties.
FontName string ;

// FontType represents Font Subtype entry in the font dictionary inside page resources.
// Examples : type0, Type1, MMType1, Type3, TrueType, CIDFont.
FontType string ;

// ToUnicode is true if font provides a `ToUnicode` mapping.
ToUnicode bool ;

// IsCID is true if underlying font is a composite font.
// Composite font is represented by a font dictionary whose Subtype is `Type0`
IsCID bool ;

// IsSimple is true if font is simple font.
// A simple font is limited to only 8 bit (255) character codes.
IsSimple bool ;

// FontData represents the raw data of the embedded font file.
// It can have format TrueType (TTF), PostScript Font (PFB) or Compact Font Format (CCF).
// FontData value can be indicates from `FontFile`, `FontFile2` or `FontFile3` inside Font Descriptor.
// At most, only one of `FontFile`, `FontFile2` or `FontFile3` will be FontData value.
FontData []byte ;

// FontFileName is a name representing the font. it has format:
// (Font Name) + (Font Type Extension), example: helvetica.ttf.
FontFileName string ;

// FontDescriptor represents metrics and other attributes inside font properties from PDF Structure (Font Descriptor).
FontDescriptor *_e .PdfFontDescriptor ;};func _bbdd (_dcbd []TextMark ,_fgbd *int )[]TextMark {_faece :=_dcbd [len (_dcbd )-1];_edaa :=[]rune (_faece .Text );if len (_edaa )==1{_dcbd =_dcbd [:len (_dcbd )-1];_acgf :=_dcbd [len (_dcbd )-1];*_fgbd =_acgf .Offset +len (_acgf .Text );
}else {_bfdda :=_dgdfg (_faece .Text );*_fgbd +=len (_bfdda )-len (_faece .Text );_faece .Text =_bfdda ;};return _dcbd ;};func (_dfbe paraList )sortTopoOrder (){_bcce :=_dfbe .topoOrder ();_dfbe .reorder (_bcce )};type list struct{_caef []*textLine ;_cbcf string ;
_dgac []*list ;_dgaf string ;};func (_gdgd rulingList )merge ()*ruling {_aecde :=_gdgd [0]._cbag ;_cffc :=_gdgd [0]._eagf ;_bfeaaf :=_gdgd [0]._adgg ;for _ ,_geac :=range _gdgd [1:]{_aecde +=_geac ._cbag ;if _geac ._eagf < _cffc {_cffc =_geac ._eagf ;};
if _geac ._adgg > _bfeaaf {_bfeaaf =_geac ._adgg ;};};_cfaf :=&ruling {_ffada :_gdgd [0]._ffada ,_dfcb :_gdgd [0]._dfcb ,Color :_gdgd [0].Color ,_cbag :_aecde /float64 (len (_gdgd )),_eagf :_cffc ,_adgg :_bfeaaf };if _bgfee {_bc .Log .Info ("\u006de\u0072g\u0065\u003a\u0020\u0025\u0032d\u0020\u0076e\u0063\u0073\u0020\u0025\u0073",len (_gdgd ),_cfaf );
for _dbab ,_fdae :=range _gdgd {_db .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dbab ,_fdae );};};return _cfaf ;};func (_fgadg *shapesState )moveTo (_agbg ,_abd float64 ){_fgadg ._ggcge =true ;_fgadg ._aadf =_fgadg .devicePoint (_agbg ,_abd );
if _bcfdb {_bc .Log .Info ("\u006d\u006fv\u0065\u0054\u006f\u003a\u0020\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0064\u0065\u0076\u0069\u0063\u0065\u003d%.\u0032\u0066",_agbg ,_abd ,_fgadg ._aadf );};};type lineRuling struct{_abea rulingKind ;
_aeea markKind ;_dg .Color ;_badd ,_becc _ee .Point ;};func (_ebbg *wordBag )removeDuplicates (){if _bfdgc {_bc .Log .Info ("r\u0065m\u006f\u0076\u0065\u0044\u0075\u0070\u006c\u0069c\u0061\u0074\u0065\u0073: \u0025\u0071",_ebbg .text ());};for _ ,_edaaf :=range _ebbg .depthIndexes (){if len (_ebbg ._fdc [_edaaf ])==0{continue ;
};_fcbe :=_ebbg ._fdc [_edaaf ][0];_gcdgf :=_ageb *_fcbe ._cfccf ;_fdad :=_fcbe ._gbgab ;for _ ,_ccff :=range _ebbg .depthBand (_fdad ,_fdad +_gcdgf ){_cfcc :=map[*textWord ]struct{}{};_bdggg :=_ebbg ._fdc [_ccff ];for _ ,_fgea :=range _bdggg {if _ ,_gdafb :=_cfcc [_fgea ];
_gdafb {continue ;};for _ ,_ecbge :=range _bdggg {if _ ,_egdd :=_cfcc [_ecbge ];_egdd {continue ;};if _ecbge !=_fgea &&_ecbge ._dgeda ==_fgea ._dgeda &&_bg .Abs (_ecbge .Llx -_fgea .Llx )< _gcdgf &&_bg .Abs (_ecbge .Urx -_fgea .Urx )< _gcdgf &&_bg .Abs (_ecbge .Lly -_fgea .Lly )< _gcdgf &&_bg .Abs (_ecbge .Ury -_fgea .Ury )< _gcdgf {_cfcc [_ecbge ]=struct{}{};
};};};if len (_cfcc )> 0{_dafe :=0;for _ ,_gcda :=range _bdggg {if _ ,_bcdb :=_cfcc [_gcda ];!_bcdb {_bdggg [_dafe ]=_gcda ;_dafe ++;};};_ebbg ._fdc [_ccff ]=_bdggg [:len (_bdggg )-len (_cfcc )];if len (_ebbg ._fdc [_ccff ])==0{delete (_ebbg ._fdc ,_ccff );
};};};};};

// GetContentStreamOps returns the contentStreamOps field of `pt`.
func (_cfbb *PageText )GetContentStreamOps ()*_ac .ContentStreamOperations {return _cfbb ._ecda };func _dfga (_gab *wordBag ,_afbge int )*textLine {_dgcdd :=_gab .firstWord (_afbge );_dbec :=textLine {PdfRectangle :_dgcdd .PdfRectangle ,_gebg :_dgcdd ._cfccf ,_ebee :_dgcdd ._gbgab };
_dbec .pullWord (_gab ,_dgcdd ,_afbge );return &_dbec ;};func (_fecb *subpath )add (_cegg ..._ee .Point ){_fecb ._gcfd =append (_fecb ._gcfd ,_cegg ...)};func _acdc (_dedge []pathSection )rulingList {_fagf (_dedge );if _dcdg {_bc .Log .Info ("\u006d\u0061k\u0065\u0053\u0074\u0072\u006f\u006b\u0065\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0064\u0020\u0073\u0074\u0072ok\u0065\u0073",len (_dedge ));
};var _eaccg rulingList ;for _ ,_fedgg :=range _dedge {for _ ,_eacg :=range _fedgg ._dgcdf {if len (_eacg ._gcfd )< 2{continue ;};_eafcd :=_eacg ._gcfd [0];for _ ,_fcceb :=range _eacg ._gcfd [1:]{if _cbdb ,_ggdf :=_dedd (_eafcd ,_fcceb ,_fedgg .Color );
_ggdf {_eaccg =append (_eaccg ,_cbdb );};_eafcd =_fcceb ;};};};if _dcdg {_bc .Log .Info ("m\u0061\u006b\u0065\u0053tr\u006fk\u0065\u0052\u0075\u006c\u0069n\u0067\u0073\u003a\u0020\u0025\u0073",_eaccg );};return _eaccg ;};func (_fced *subpath )removeDuplicates (){if len (_fced ._gcfd )==0{return ;
};_dce :=[]_ee .Point {_fced ._gcfd [0]};for _ ,_bfdf :=range _fced ._gcfd [1:]{if !_aebab (_bfdf ,_dce [len (_dce )-1]){_dce =append (_dce ,_bfdf );};};_fced ._gcfd =_dce ;};func (_cfcb *structElement )parseStructElement (_eaba _bgf .PdfObject ){_cbde ,_fefa :=_bgf .GetDict (_eaba );
if !_fefa {_bc .Log .Debug ("\u0070\u0061\u0072\u0073\u0065\u0053\u0074\u0072u\u0063\u0074\u0045le\u006d\u0065\u006e\u0074\u003a\u0020d\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u002e");
return ;};_cfec :=_cbde .Get ("\u0053");_dgcc :=_cbde .Get ("\u0050\u0067");_fefgf :="";if _cfec !=nil {_fefgf =_cfec .String ();};_faff :=_cbde .Get ("\u004b");_cfcb ._cdaf =_fefgf ;_cfcb ._bfbgf =_dgcc ;switch _aaag :=_faff .(type ){case *_bgf .PdfObjectInteger :_cfcb ._cdaf =_fefgf ;
_cfcb ._gaf =int64 (*_aaag );_cfcb ._bfbgf =_dgcc ;case *_bgf .PdfObjectReference :_fcd :=*_bgf .MakeArray (_aaag );var _eegc int64 =-1;_cfcb ._gaf =_eegc ;if _fcd .Len ()==1{_cafb :=_fcd .Elements ()[0];_bbgf ,_abbba :=_cafb .(*_bgf .PdfObjectInteger );
if _abbba {_eegc =int64 (*_bbgf );_cfcb ._gaf =_eegc ;_cfcb ._cdaf =_fefgf ;_cfcb ._bfbgf =_dgcc ;return ;};};_cebb :=[]structElement {};for _ ,_dbbc :=range _fcd .Elements (){_acdb ,_fbfg :=_dbbc .(*_bgf .PdfObjectInteger );if _fbfg {_eegc =int64 (*_acdb );
_cfcb ._gaf =_eegc ;_cfcb ._cdaf =_fefgf ;}else {_facb :=&structElement {};_facb .parseStructElement (_dbbc );_cebb =append (_cebb ,*_facb );};_eegc =-1;};_cfcb ._aeaaf =_cebb ;case *_bgf .PdfObjectArray :_ceeg :=_faff .(*_bgf .PdfObjectArray );var _cbfa int64 =-1;
_cfcb ._gaf =_cbfa ;if _ceeg .Len ()==1{_abg :=_ceeg .Elements ()[0];_fefgg ,_bfda :=_abg .(*_bgf .PdfObjectInteger );if _bfda {_cbfa =int64 (*_fefgg );_cfcb ._gaf =_cbfa ;_cfcb ._cdaf =_fefgf ;_cfcb ._bfbgf =_dgcc ;return ;};};_debe :=[]structElement {};
for _ ,_gabe :=range _ceeg .Elements (){_agfc ,_accf :=_gabe .(*_bgf .PdfObjectInteger );if _accf {_cbfa =int64 (*_agfc );_cfcb ._gaf =_cbfa ;_cfcb ._cdaf =_fefgf ;_cfcb ._bfbgf =_dgcc ;}else {_aeef :=&structElement {};_aeef .parseStructElement (_gabe );
_debe =append (_debe ,*_aeef );};_cbfa =-1;};_cfcb ._aeaaf =_debe ;};};func (_fgaf *stateStack )empty ()bool {return len (*_fgaf )==0};type rulingKind int ;const _cddg =20;func _egbb (_cacfe _e .PdfRectangle )*ruling {return &ruling {_ffada :_cgfba ,_cbag :_cacfe .Lly ,_eagf :_cacfe .Llx ,_adgg :_cacfe .Urx };
};func _agd (_cg []Font ,_bdg string )bool {for _ ,_acc :=range _cg {if _acc .FontName ==_bdg {return true ;};};return false ;};func (_afg *stateStack )top ()*textState {if _afg .empty (){return nil ;};return (*_afg )[_afg .size ()-1];};func _agcgbc (_ebagb string ,_bbade []rulingList ){_bc .Log .Info ("\u0024\u0024 \u0025\u0064\u0020g\u0072\u0069\u0064\u0073\u0020\u002d\u0020\u0025\u0073",len (_bbade ),_ebagb );
for _gecc ,_feac :=range _bbade {_db .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gecc ,_feac .String ());};};var _eda string ="\u0028\u003f\u0069\u0029\u005e\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028?\u003a\u0044\u007cM\u0029\u007c\u0044\u003f\u0043{\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028\u003f\u003a\u004c\u007c\u0043\u0029\u007cL\u003f\u0058\u007b\u0030\u002c\u0033}\u0029\u0028\u0049\u0028\u003f\u003a\u0056\u007c\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u005c\u0029\u007c\u005c\u002e\u0029\u007c\u005e\u005c\u0028\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028\u003f\u003aD\u007cM\u0029\u007c\u0044\u003f\u0043\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028?\u003a\u004c\u007c\u0043\u0029\u007c\u004c?\u0058\u007b0\u002c\u0033\u007d\u0029(\u0049\u0028\u003f\u003a\u0056|\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u005c\u0029";
type gridTiling struct{_e .PdfRectangle ;_fabcg []float64 ;_gdccb []float64 ;_eebab map[float64 ]map[float64 ]gridTile ;};const (_ea ="\u0045\u0052R\u004f\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u002c\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";
_gb ="\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0043a\u006e\u0027\u0074 g\u0065\u0074\u0020\u0066\u006f\u006et\u0020\u0070\u0072\u006f\u0070\u0065\u0072\u0074\u0069\u0065\u0073\u002c\u0020\u0066\u006fn\u0074\u0020\u006e\u006f\u0074\u0020\u0066\u006fu\u006e\u0064";
_cf ="\u0045\u0052\u0052O\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0067\u0065\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0074\u0072\u0065\u0061\u006d\u002c\u0020\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";);
func (_dcfg *textObject )checkOp (_fed *_ac .ContentStreamOperation ,_deg int ,_cbb bool )(_begd bool ,_fdgg error ){if _dcfg ==nil {var _eceg []_bgf .PdfObject ;if _deg > 0{_eceg =_fed .Params ;if len (_eceg )> _deg {_eceg =_eceg [:_deg ];};};_bc .Log .Debug ("\u0025\u0023q \u006f\u0070\u0065r\u0061\u006e\u0064\u0020out\u0073id\u0065\u0020\u0074\u0065\u0078\u0074\u002e p\u0061\u0072\u0061\u006d\u0073\u003d\u0025+\u0076",_fed .Operand ,_eceg );
};if _deg >=0{if len (_fed .Params )!=_deg {if _cbb {_fdgg =_c .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");};_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_fed .Operand ,_deg ,len (_fed .Params ),_fed .Params );
return false ,_fdgg ;};};return true ,nil ;};type event struct{_cbfea float64 ;_edbfd bool ;_dgbe int ;};

// BBox returns the smallest axis-aligned rectangle that encloses all the TextMarks in `ma`.
func (_eee *TextMarkArray )BBox ()(_e .PdfRectangle ,bool ){var _gdd _e .PdfRectangle ;_dggc :=false ;for _ ,_ecdf :=range _eee ._egfb {if _ecdf .Meta ||_fdbdd (_ecdf .Text ){continue ;};if _dggc {_gdd =_dbef (_gdd ,_ecdf .BBox );}else {_gdd =_ecdf .BBox ;
_dggc =true ;};};return _gdd ,_dggc ;};type textMark struct{_e .PdfRectangle ;_ccbec int ;_adag string ;_cebbg string ;_fbeg *_e .PdfFont ;_ddgdb float64 ;_dcac float64 ;_ceec _ee .Matrix ;_bdaa _ee .Point ;_fcf _e .PdfRectangle ;_dagb _dg .Color ;_cdda _dg .Color ;
_gfec _bgf .PdfObject ;_gafe []string ;Tw float64 ;Th float64 ;_ccdcf int ;_bcaf int ;};

// String returns a human readable description of `ss`.
func (_cbbd *shapesState )String ()string {return _db .Sprintf ("\u007b\u0025\u0064\u0020su\u0062\u0070\u0061\u0074\u0068\u0073\u0020\u0066\u0072\u0065\u0073\u0068\u003d\u0025t\u007d",len (_cbbd ._gfed ),_cbbd ._ggcge );};func (_ccead *wordBag )depthIndexes ()[]int {if len (_ccead ._fdc )==0{return nil ;
};_eecg :=make ([]int ,len (_ccead ._fdc ));_cecb :=0;for _aed :=range _ccead ._fdc {_eecg [_cecb ]=_aed ;_cecb ++;};_d .Ints (_eecg );return _eecg ;};func (_gcab *wordBag )sort (){for _ ,_fbeaa :=range _gcab ._fdc {_d .Slice (_fbeaa ,func (_egbc ,_efdeee int )bool {return _edbb (_fbeaa [_egbc ],_fbeaa [_efdeee ])< 0});
};};

// String returns a human readable description of `s`.
func (_ccfdg intSet )String ()string {var _cffe []int ;for _dcgcf :=range _ccfdg {if _ccfdg .has (_dcgcf ){_cffe =append (_cffe ,_dcgcf );};};_d .Ints (_cffe );return _db .Sprintf ("\u0025\u002b\u0076",_cffe );};func (_cffcg *textPara )taken ()bool {return _cffcg ==nil ||_cffcg ._bdbc };
const (_deee rulingKind =iota ;_cgfba ;_dfdb ;);func (_ecge *textObject )nextLine (){_ecge .moveLP (0,-_ecge ._degc ._cadc )};func (_cccc rectRuling )checkWidth (_gcge ,_dggd float64 )(float64 ,bool ){_cfda :=_dggd -_gcge ;_ebfc :=_cfda <=_fddg ;return _cfda ,_ebfc ;
};func (_dcga *shapesState )drawRectangle (_edfc ,_dada ,_deege ,_egfbb float64 ){if _bcfdb {_gcea :=_dcga .devicePoint (_edfc ,_dada );_dedg :=_dcga .devicePoint (_edfc +_deege ,_dada +_egfbb );_ffcgc :=_e .PdfRectangle {Llx :_gcea .X ,Lly :_gcea .Y ,Urx :_dedg .X ,Ury :_dedg .Y };
_bc .Log .Info ("d\u0072a\u0077\u0052\u0065\u0063\u0074\u0061\u006e\u0067l\u0065\u003a\u0020\u00256.\u0032\u0066",_ffcgc );};_dcga .newSubPath ();_dcga .moveTo (_edfc ,_dada );_dcga .lineTo (_edfc +_deege ,_dada );_dcga .lineTo (_edfc +_deege ,_dada +_egfbb );
_dcga .lineTo (_edfc ,_dada +_egfbb );_dcga .closePath ();};

// Text returns the extracted page text.
func (_gced PageText )Text ()string {return _gced ._ffaf };

// ExtractPageText returns the text contents of `e` (an Extractor for a page) as a PageText.
// TODO(peterwilliams97): The stats complicate this function signature and aren't very useful.
//
//	Replace with a function like Extract() (*PageText, error)
func (_gaa *Extractor )ExtractPageText ()(*PageText ,int ,int ,error ){_cgc ,_accg ,_bfaf ,_adff :=_gaa .extractPageText (_gaa ._aa ,_gaa ._dbc ,_ee .IdentityMatrix (),0);if _adff !=nil &&_adff !=_e .ErrColorOutOfRange {return nil ,0,0,_adff ;};if _gaa ._dc !=nil {_cgc ._caec ._ddb =_gaa ._dc .UseSimplerExtractionProcess ;
};_cgc .computeViews ();_adff =_fbcce (_cgc );if _adff !=nil {return nil ,0,0,_adff ;};if _gaa ._dc !=nil {if _gaa ._dc .ApplyCropBox &&_gaa ._aag !=nil {_cgc .ApplyArea (*_gaa ._aag );};_cgc ._caec ._bgfe =_gaa ._dc .DisableDocumentTags ;};return _cgc ,_accg ,_bfaf ,nil ;
};func _gbbee (_cdcg *wordBag ,_abee *textWord ,_eaac float64 )bool {return _cdcg .Urx <=_abee .Llx &&_abee .Llx < _cdcg .Urx +_eaac ;};const (_ffcf =1.0e-6;_ecc =1.0e-4;_dbfa =10;_afdb =6;_ggdc =0.5;_ecfd =0.12;_bedg =0.19;_baad =0.04;_geaf =0.04;_bbdc =1.0;
_gfbb =0.04;_gbca =0.4;_affb =0.7;_aefe =1.0;_cadb =0.1;_gfeda =1.4;_faaa =0.46;_ecbb =0.02;_ageb =0.2;_dde =0.5;_agbef =4;_gfef =4.0;_bdfd =6;_cfe =0.3;_cgcf =0.01;_ecfc =0.02;_fceff =2;_bebb =2;_dcff =500;_ebgb =4.0;_bcda =4.0;_gffe =0.05;_bcab =0.1;
_ddae =2.0;_fddg =2.0;_cgge =1.5;_agdfg =3.0;_bdggd =0.25;);func (_ebf *textObject )setTextLeading (_efeb float64 ){if _ebf ==nil {return ;};_ebf ._degc ._cadc =_efeb ;};type textLine struct{_e .PdfRectangle ;_ebee float64 ;_gdg []*textWord ;_gebg float64 ;
};

// Extractor stores and offers functionality for extracting content from PDF pages.
type Extractor struct{_aa string ;_dbc *_e .PdfPageResources ;_dea _e .PdfRectangle ;_aag *_e .PdfRectangle ;_fe map[string ]fontEntry ;_bf map[string ]textResult ;_cc int64 ;_gf int ;_dc *Options ;_bbd *_bgf .PdfObject ;_cef _bgf .PdfObject ;};func (_addde intSet )del (_gfcbe int ){delete (_addde ,_gfcbe )};
func (_ffgg *textTable )markCells (){for _adgge :=0;_adgge < _ffgg ._gaafe ;_adgge ++{for _dagf :=0;_dagf < _ffgg ._afde ;_dagf ++{_fgeda :=_ffgg .get (_dagf ,_adgge );if _fgeda !=nil {_fgeda ._bdbc =true ;};};};};

// TextTable represents a table.
// Cells are ordered top-to-bottom, left-to-right.
// Cells[y] is the (0-offset) y'th row in the table.
// Cells[y][x] is the (0-offset) x'th column in the table.
type TextTable struct{_e .PdfRectangle ;W ,H int ;Cells [][]TableCell ;};func _bdeg (_gdcf ,_bcfeg _e .PdfRectangle )bool {return _cbgd (_gdcf ,_bcfeg )&&_gbbg (_gdcf ,_bcfeg )};var _dcaa string ="\u005e\u005b\u0061\u002d\u007a\u0041\u002dZ\u005d\u0028\u005c)\u007c\u005c\u002e)\u007c\u005e[\u005c\u0064\u005d\u002b\u0028\u005c)\u007c\\.\u0029\u007c\u005e\u005c\u0028\u005b\u0061\u002d\u007a\u0041\u002d\u005a\u005d\u005c\u0029\u007c\u005e\u005c\u0028\u005b\u005c\u0064\u005d\u002b\u005c\u0029";
func (_debb *subpath )isQuadrilateral ()bool {if len (_debb ._gcfd )< 4||len (_debb ._gcfd )> 5{return false ;};if len (_debb ._gcfd )==5{_bcffa :=_debb ._gcfd [0];_bcbfg :=_debb ._gcfd [4];if _bcffa .X !=_bcbfg .X ||_bcffa .Y !=_bcbfg .Y {return false ;
};};return true ;};

// ToText returns the page text as a single string.
// Deprecated: This function is deprecated and will be removed in a future major version. Please use
// Text() instead.
func (_acg PageText )ToText ()string {return _acg .Text ()};func _fgga (_aefg []*textLine )[]*textLine {_ebef :=[]*textLine {};for _ ,_bcdg :=range _aefg {_cbfbe :=_bcdg .text ();_bffa :=_ebdg .Find ([]byte (_cbfbe ));if _bffa !=nil {_ebef =append (_ebef ,_bcdg );
};};return _ebef ;};func _gegee (_fegbd ,_acge _e .PdfRectangle )bool {return _fegbd .Llx <=_acge .Llx &&_acge .Urx <=_fegbd .Urx &&_fegbd .Lly <=_acge .Lly &&_acge .Ury <=_fegbd .Ury ;};func _gaff (_bdd []*textMark ,_bfdba _e .PdfRectangle ,_gdbbb rulingList ,_dcce []gridTiling ,_gaec bool )paraList {_bc .Log .Trace ("\u006d\u0061\u006b\u0065\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065\u003a \u0025\u0064\u0020\u0065\u006c\u0065m\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065=\u0025\u002e\u0032\u0066",len (_bdd ),_bfdba );
if len (_bdd )==0{return nil ;};_abca :=_fabb (_bdd ,_bfdba );if len (_abca )==0{return nil ;};_gdbbb .log ("\u006d\u0061\u006be\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065");_cgcc ,_acgd :=_gdbbb .vertsHorzs ();_ebb :=_bcb (_abca ,_bfdba .Ury ,_cgcc ,_acgd );
_gaaa :=_ffae (_ebb ,_bfdba .Ury ,_cgcc ,_acgd );_gaaa =_ebg (_gaaa );_ccbb :=make (paraList ,0,len (_gaaa ));for _ ,_adade :=range _gaaa {_dcecd :=_adade .arrangeText ();if _dcecd !=nil {_ccbb =append (_ccbb ,_dcecd );};};if !_gaec &&len (_ccbb )>=_bdfd {_ccbb =_ccbb .extractTables (_dcce );
};_ccbb .sortReadingOrder ();if !_gaec {_ccbb .sortTopoOrder ();};_ccbb .log ("\u0073\u006f\u0072te\u0064\u0020\u0069\u006e\u0020\u0072\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u006f\u0072\u0064\u0065\u0072");return _ccbb ;};func _gdba (_eafc *textLine )bool {_cgdd :=true ;
_dgccc :=-1;for _ ,_gdfb :=range _eafc ._gdg {for _ ,_ecdb :=range _gdfb ._ggegd {_ccba :=_ecdb ._ccdcf ;if _dgccc ==-1{_dgccc =_ccba ;}else {if _dgccc !=_ccba {_cgdd =false ;break ;};};};};return _cgdd ;};func _gafbf (_fcaaf _e .PdfRectangle )rulingKind {_ddbee :=_fcaaf .Width ();
_effbg :=_fcaaf .Height ();if _ddbee > _effbg {if _ddbee >=_ebgb {return _cgfba ;};}else {if _effbg >=_ebgb {return _dfdb ;};};return _deee ;};func (_gbda paraList )tables ()[]TextTable {var _abcgd []TextTable ;if _edeg {_bc .Log .Info ("\u0070\u0061\u0072\u0061\u0073\u002e\u0074\u0061\u0062\u006c\u0065\u0073\u003a");
};for _ ,_bbecg :=range _gbda {_fddag :=_bbecg ._fbda ;if _fddag !=nil &&_fddag .isExportable (){_abcgd =append (_abcgd ,_fddag .toTextTable ());};};return _abcgd ;};func (_eadb paraList )applyTables (_gfce []*textTable )paraList {var _aaefd paraList ;
for _ ,_bdgb :=range _gfce {_aaefd =append (_aaefd ,_bdgb .newTablePara ());};for _ ,_ebadb :=range _eadb {if _ebadb ._bdbc {continue ;};_aaefd =append (_aaefd ,_ebadb );};return _aaefd ;};func (_gdef *textPara )writeCellText (_ffbg _f .Writer ){for _efdc ,_bbcba :=range _gdef ._gcbc {_aedfd :=_bbcba .text ();
_ecgeg :=_eeg &&_bbcba .endsInHyphen ()&&_efdc !=len (_gdef ._gcbc )-1;if _ecgeg {_aedfd =_dgdfg (_aedfd );};_ffbg .Write ([]byte (_aedfd ));if !(_ecgeg ||_efdc ==len (_gdef ._gcbc )-1){_ffbg .Write ([]byte (_aeced (_bbcba ._ebee ,_gdef ._gcbc [_efdc +1]._ebee )));
};};};func (_feb *textLine )appendWord (_cbeb *textWord ){_feb ._gdg =append (_feb ._gdg ,_cbeb );_feb .PdfRectangle =_dbef (_feb .PdfRectangle ,_cbeb .PdfRectangle );if _cbeb ._cfccf > _feb ._gebg {_feb ._gebg =_cbeb ._cfccf ;};if _cbeb ._gbgab > _feb ._ebee {_feb ._ebee =_cbeb ._gbgab ;
};};func (_befdb paraList )computeEBBoxes (){if _bfef {_bc .Log .Info ("\u0063o\u006dp\u0075\u0074\u0065\u0045\u0042\u0042\u006f\u0078\u0065\u0073\u003a");};for _ ,_abbg :=range _befdb {_abbg ._eddff =_abbg .PdfRectangle ;};_cgfbd :=_befdb .yNeighbours (0);
for _baed ,_cgfc :=range _befdb {_gcabd :=_cgfc ._eddff ;_dfae ,_cddf :=-1.0e9,+1.0e9;for _ ,_cdbf :=range _cgfbd [_cgfc ]{_caac :=_befdb [_cdbf ]._eddff ;if _caac .Urx < _gcabd .Llx {_dfae =_bg .Max (_dfae ,_caac .Urx );}else if _gcabd .Urx < _caac .Llx {_cddf =_bg .Min (_cddf ,_caac .Llx );
};};for _ddbe ,_beeb :=range _befdb {_eged :=_beeb ._eddff ;if _baed ==_ddbe ||_eged .Ury > _gcabd .Lly {continue ;};if _dfae <=_eged .Llx &&_eged .Llx < _gcabd .Llx {_gcabd .Llx =_eged .Llx ;}else if _eged .Urx <=_cddf &&_gcabd .Urx < _eged .Urx {_gcabd .Urx =_eged .Urx ;
};};if _bfef {_db .Printf ("\u0025\u0034\u0064\u003a %\u0036\u002e\u0032\u0066\u2192\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0071\u000a",_baed ,_cgfc ._eddff ,_gcabd ,_agag (_cgfc .text (),50));};_cgfc ._eddff =_gcabd ;};if _beac {for _ ,_dcddf :=range _befdb {_dcddf .PdfRectangle =_dcddf ._eddff ;
};};};

// String returns a human readable description of `path`.
func (_fea *subpath )String ()string {_aagd :=_fea ._gcfd ;_bbfc :=len (_aagd );if _bbfc <=5{return _db .Sprintf ("\u0025d\u003a\u0020\u0025\u0036\u002e\u0032f",_bbfc ,_aagd );};return _db .Sprintf ("\u0025d\u003a\u0020\u0025\u0036.\u0032\u0066\u0020\u0025\u0036.\u0032f\u0020.\u002e\u002e\u0020\u0025\u0036\u002e\u0032f",_bbfc ,_aagd [0],_aagd [1],_aagd [_bbfc -1]);
};func _bfaaa (_bgad ,_beecb *textPara )bool {return _cbgd (_bgad ._eddff ,_beecb ._eddff )};func (_fdafg paraList )findTableGrid (_eggab gridTiling )(*textTable ,map[*textPara ]struct{}){_agfdb :=len (_eggab ._fabcg );_dgad :=len (_eggab ._gdccb );_fdcf :=textTable {_ffdbb :true ,_afde :_agfdb ,_gaafe :_dgad ,_abgb :make (map[uint64 ]*textPara ,_agfdb *_dgad ),_abaeg :make (map[uint64 ]compositeCell ,_agfdb *_dgad )};
_fdcf .PdfRectangle =_eggab .PdfRectangle ;_fafab :=make (map[*textPara ]struct{});_fbead :=int ((1.0-_cfe )*float64 (_agfdb *_dgad ));_bdgag :=0;if _fcaf {_bc .Log .Info ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0064\u0020\u0078\u0020%\u0064",_agfdb ,_dgad );
};for _fedd ,_dcada :=range _eggab ._gdccb {_fcfd ,_cfdff :=_eggab ._eebab [_dcada ];if !_cfdff {continue ;};for _adgga ,_daba :=range _eggab ._fabcg {_fdceb ,_cbgcg :=_fcfd [_daba ];if !_cbgcg {continue ;};_ebaea :=_fdafg .inTile (_fdceb );if len (_ebaea )==0{_bdgag ++;
if _bdgag > _fbead {if _fcaf {_bc .Log .Info ("\u0021\u006e\u0075m\u0045\u006d\u0070\u0074\u0079\u003d\u0025\u0064",_bdgag );};return nil ,nil ;};}else {_fdcf .putComposite (_adgga ,_fedd ,_ebaea ,_fdceb .PdfRectangle );for _ ,_ecbaa :=range _ebaea {_fafab [_ecbaa ]=struct{}{};
};};};};_bebbeb :=0;for _ggec :=0;_ggec < _agfdb ;_ggec ++{_dgbc :=_fdcf .get (_ggec ,0);if _dgbc ==nil ||!_dgbc ._ecfbe {_bebbeb ++;};};if _bebbeb ==0{if _fcaf {_bc .Log .Info ("\u0021\u006e\u0075m\u0048\u0065\u0061\u0064\u0065\u0072\u003d\u0030");};return nil ,nil ;
};_eadgb :=_fdcf .reduceTiling (_eggab ,_agdfg );_eadgb =_eadgb .subdivide ();return _eadgb ,_fafab ;};func (_ffcfa rulingList )snapToGroupsDirection ()rulingList {_ffcfa .sortStrict ();_fefgfa :=make (map[*ruling ]rulingList ,len (_ffcfa ));_bdde :=_ffcfa [0];
_gbgdd :=func (_aefb *ruling ){_bdde =_aefb ;_fefgfa [_bdde ]=rulingList {_aefb }};_gbgdd (_ffcfa [0]);for _ ,_fafa :=range _ffcfa [1:]{if _fafa ._cbag < _bdde ._cbag -_ffcf {_bc .Log .Error ("\u0073\u006e\u0061\u0070T\u006f\u0047\u0072\u006f\u0075\u0070\u0073\u0044\u0069r\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0057\u0072\u006f\u006e\u0067\u0020\u0070\u0072\u0069\u006da\u0072\u0079\u0020\u006f\u0072d\u0065\u0072\u002e\u000a\u0009\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0020\u0076\u003d\u0025\u0073",_bdde ,_fafa );
};if _fafa ._cbag > _bdde ._cbag +_fddg {_gbgdd (_fafa );}else {_fefgfa [_bdde ]=append (_fefgfa [_bdde ],_fafa );};};_eegd :=make (map[*ruling ]float64 ,len (_fefgfa ));_cedg :=make (map[*ruling ]*ruling ,len (_ffcfa ));for _fecg ,_gfgd :=range _fefgfa {_eegd [_fecg ]=_gfgd .mergePrimary ();
for _ ,_bffac :=range _gfgd {_cedg [_bffac ]=_fecg ;};};for _ ,_acgc :=range _ffcfa {_acgc ._cbag =_eegd [_cedg [_acgc ]];};_bfaaad :=make (rulingList ,0,len (_ffcfa ));for _ ,_aadc :=range _fefgfa {_edfag :=_aadc .splitSec ();for _cdeea ,_fgdce :=range _edfag {_ggfg :=_fgdce .merge ();
if len (_bfaaad )> 0{_bdcbb :=_bfaaad [len (_bfaaad )-1];if _bdcbb .alignsPrimary (_ggfg )&&_bdcbb .alignsSec (_ggfg ){_bc .Log .Error ("\u0073\u006e\u0061\u0070\u0054\u006fG\u0072\u006f\u0075\u0070\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0044\u0075\u0070\u006ci\u0063\u0061\u0074\u0065\u0020\u0069\u003d\u0025\u0064\u000a\u0009\u0077\u003d\u0025s\u000a\t\u0076\u003d\u0025\u0073",_cdeea ,_bdcbb ,_ggfg );
continue ;};};_bfaaad =append (_bfaaad ,_ggfg );};};_bfaaad .sortStrict ();return _bfaaad ;};func (_gfbg *shapesState )fill (_gad *[]pathSection ){_bcff :=pathSection {_dgcdf :_gfbg ._gfed ,Color :_gfbg ._bgdd .getFillColor ()};*_gad =append (*_gad ,_bcff );
if _dcdg {_gea :=_bcff .bbox ();_db .Printf ("\u0020 \u0020\u0020\u0046\u0049\u004c\u004c\u003a %\u0032\u0064\u0020\u0066\u0069\u006c\u006c\u0073\u0020\u0028\u0025\u0064\u0020\u006ee\u0077\u0029 \u0073\u0073\u003d%\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d\u0025\u0033\u0076\u0020\u0025\u0036\u002e\u0032f\u003d\u00256.\u0032\u0066\u0078%\u0036\u002e\u0032\u0066\u000a",len (*_gad ),len (_bcff ._dgcdf ),_gfbg ,_bcff .Color ,_gea ,_gea .Width (),_gea .Height ());
if _egc {for _fcaac ,_effc :=range _bcff ._dgcdf {_db .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_fcaac ,_effc );if _fcaac ==10{break ;};};};};};func _bbbd (_gagg _e .PdfRectangle ,_fccd ,_fddaa ,_bdefb ,_gaagf *ruling )gridTile {_gcdb :=_gagg .Llx ;
_acff :=_gagg .Urx ;_baaf :=_gagg .Lly ;_gadf :=_gagg .Ury ;return gridTile {PdfRectangle :_gagg ,_agab :_fccd !=nil &&_fccd .encloses (_baaf ,_gadf ),_edbag :_fddaa !=nil &&_fddaa .encloses (_baaf ,_gadf ),_ddab :_bdefb !=nil &&_bdefb .encloses (_gcdb ,_acff ),_bfefb :_gaagf !=nil &&_gaagf .encloses (_gcdb ,_acff )};
};func (_eeba *textObject )setTextRise (_aff float64 ){if _eeba ==nil {return ;};_eeba ._degc ._edd =_aff ;};func (_gdaf *wordBag )depthBand (_ccgb ,_gbbaf float64 )[]int {if len (_gdaf ._fdc )==0{return nil ;};return _gdaf .depthRange (_gdaf .getDepthIdx (_ccgb ),_gdaf .getDepthIdx (_gbbaf ));
};func _dgbfd (_bgaae *wordBag ,_fgfg *textWord ,_eaga float64 )bool {return _fgfg .Llx < _bgaae .Urx +_eaga &&_bgaae .Llx -_eaga < _fgfg .Urx ;};

// String returns a description of `b`.
func (_dgaad *wordBag )String ()string {var _bgee []string ;for _ ,_fdbf :=range _dgaad .depthIndexes (){_aecd :=_dgaad ._fdc [_fdbf ];for _ ,_adgc :=range _aecd {_bgee =append (_bgee ,_adgc ._dgeda );};};return _db .Sprintf ("\u0025.\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065=\u0025\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0025\u0071",_dgaad .PdfRectangle ,_dgaad ._dgbf ,len (_bgee ),_bgee );
};const (_cgdg markKind =iota ;_ddadb ;_dcgde ;_bdbe ;);func (_deade gridTiling )log (_eggd string ){if !_fcaf {return ;};_bc .Log .Info ("\u0074i\u006ci\u006e\u0067\u003a\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0071",len (_deade ._fabcg ),len (_deade ._gdccb ),_eggd );
_db .Printf ("\u0020\u0020\u0020l\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a",_deade ._fabcg );_db .Printf ("\u0020\u0020\u0020l\u006c\u0079\u003d\u0025\u002e\u0032\u0066\u000a",_deade ._gdccb );for _deed ,_bbfab :=range _deade ._gdccb {_bfbea ,_ggbed :=_deade ._eebab [_bbfab ];
if !_ggbed {continue ;};_db .Printf ("%\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_deed ,_bbfab );for _cdbc ,_eagfc :=range _deade ._fabcg {_eaca ,_dddcg :=_bfbea [_eagfc ];if !_dddcg {continue ;};_db .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_cdbc ,_eaca .String ());
};};};func _abgd (_ffbfa ,_gfecd float64 )bool {return _ffbfa /_bg .Max (_bcab ,_gfecd )< _gffe };func _dbaf (_dfd *list ,_bgfc *string )string {_aedd :=_ce .Split (_dfd ._dgaf ,"\u000a");_aadba :=&_ce .Builder {};for _ ,_ecfb :=range _aedd {if _ecfb !=""{_aadba .WriteString (*_bgfc );
_aadba .WriteString (_ecfb );_aadba .WriteString ("\u000a");};};return _aadba .String ();};type textResult struct{_bcf PageText ;_dee int ;_bffe int ;};func (_ddbaa *textTable )bbox ()_e .PdfRectangle {return _ddbaa .PdfRectangle };

// RangeOffset returns the TextMarks in `ma` that overlap text[start:end] in the extracted text.
// These are tm: `start` <= tm.Offset + len(tm.Text) && tm.Offset < `end` where
// `start` and `end` are offsets in the extracted text.
// NOTE: TextMarks can contain multiple characters. e.g. "ffi" for the ï¬ƒ ligature so the first and
// last elements of the returned TextMarkArray may only partially overlap text[start:end].
func (_bcfe *TextMarkArray )RangeOffset (start ,end int )(*TextMarkArray ,error ){if _bcfe ==nil {return nil ,_c .New ("\u006da\u003d\u003d\u006e\u0069\u006c");};if end < start {return nil ,_db .Errorf ("\u0065\u006e\u0064\u0020\u003c\u0020\u0073\u0074\u0061\u0072\u0074\u002e\u0020\u0052\u0061n\u0067\u0065\u004f\u0066\u0066\u0073\u0065\u0074\u0020\u006e\u006f\u0074\u0020d\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020\u0073\u0074\u0061\u0072t=\u0025\u0064\u0020\u0065\u006e\u0064\u003d\u0025\u0064\u0020",start ,end );
};_bbcb :=len (_bcfe ._egfb );if _bbcb ==0{return _bcfe ,nil ;};if start < _bcfe ._egfb [0].Offset {start =_bcfe ._egfb [0].Offset ;};if end > _bcfe ._egfb [_bbcb -1].Offset +1{end =_bcfe ._egfb [_bbcb -1].Offset +1;};_afd :=_d .Search (_bbcb ,func (_dade int )bool {return _bcfe ._egfb [_dade ].Offset +len (_bcfe ._egfb [_dade ].Text )-1>=start });
if !(0<=_afd &&_afd < _bbcb ){_ebce :=_db .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020\u0072\u0061\u006e\u0067\u0065\u002e\u0020\u0073\u0074\u0061\u0072\u0074\u003d%\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009 \u006c\u0061\u0073\u0074\u003d%\u0076",start ,_afd ,_bbcb ,_bcfe ._egfb [0],_bcfe ._egfb [_bbcb -1]);
return nil ,_ebce ;};_dace :=_d .Search (_bbcb ,func (_adad int )bool {return _bcfe ._egfb [_adad ].Offset > end -1});if !(0<=_dace &&_dace < _bbcb ){_ddbc :=_db .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020r\u0061\u006e\u0067e\u002e\u0020\u0065n\u0064\u003d%\u0064\u0020\u0069\u0045\u006e\u0064=\u0025d \u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d\u0025\u0076",end ,_dace ,_bbcb ,_bcfe ._egfb [0],_bcfe ._egfb [_bbcb -1]);
return nil ,_ddbc ;};if _dace <=_afd {return nil ,_db .Errorf ("\u0069\u0045\u006e\u0064\u0020\u003c=\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003a\u0020\u0073\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u0065\u006ed\u003d\u0025\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020i\u0045n\u0064\u003d\u0025\u0064",start ,end ,_afd ,_dace );
};return &TextMarkArray {_egfb :_bcfe ._egfb [_afd :_dace ]},nil ;};func (_fee *stateStack )size ()int {return len (*_fee )};func _gcaf (_fcfgb ,_bddc int )uint64 {return uint64 (_fcfgb )*0x1000000+uint64 (_bddc )};

// Elements returns the TextMarks in `ma`.
func (_gbef *TextMarkArray )Elements ()[]TextMark {return _gbef ._egfb };type imageExtractContext struct{_add []ImageMark ;_efe int ;_eb int ;_fd int ;_cdd map[*_bgf .PdfObjectStream ]*cachedImage ;_ccdc *ImageExtractOptions ;_aea bool ;};func (_fcb *wordBag )firstReadingIndex (_eafe int )int {_gcfbe :=_fcb .firstWord (_eafe )._cfccf ;
_egb :=float64 (_eafe +1)*_afdb ;_cdcc :=_egb +_gfef *_gcfbe ;_aadfd :=_eafe ;for _ ,_agbeb :=range _fcb .depthBand (_egb ,_cdcc ){if _edbb (_fcb .firstWord (_agbeb ),_fcb .firstWord (_aadfd ))< 0{_aadfd =_agbeb ;};};return _aadfd ;};func (_efdef *textPara )toTextMarks (_fdbe *int )[]TextMark {if _efdef ._fbda ==nil {return _efdef .toCellTextMarks (_fdbe );
};var _fgadc []TextMark ;for _abcac :=0;_abcac < _efdef ._fbda ._gaafe ;_abcac ++{for _dged :=0;_dged < _efdef ._fbda ._afde ;_dged ++{_fdgd :=_efdef ._fbda .get (_dged ,_abcac );if _fdgd ==nil {_fgadc =_afgd (_fgadc ,_fdbe ,"\u0009");}else {_dcgf :=_fdgd .toCellTextMarks (_fdbe );
_fgadc =append (_fgadc ,_dcgf ...);};_fgadc =_afgd (_fgadc ,_fdbe ,"\u0020");};if _abcac < _efdef ._fbda ._gaafe -1{_fgadc =_afgd (_fgadc ,_fdbe ,"\u000a");};};_bdda :=_efdef ._fbda ;if _bdda .isExportable (){_egfbe :=_bdda .toTextTable ();_fgadc =_bdeb (_fgadc ,&_egfbe );
};return _fgadc ;};func (_fdgb *textTable )compositeRowCorridors ()map[int ][]float64 {_baagd :=make (map[int ][]float64 ,_fdgb ._gaafe );if _edeg {_bc .Log .Info ("c\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0052\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073:\u0020h\u003d\u0025\u0064",_fdgb ._gaafe );
};for _edaecf :=1;_edaecf < _fdgb ._gaafe ;_edaecf ++{var _gcgad []compositeCell ;for _gebb :=0;_gebb < _fdgb ._afde ;_gebb ++{if _bgfbd ,_gbdgb :=_fdgb ._abaeg [_gcaf (_gebb ,_edaecf )];_gbdgb {_gcgad =append (_gcgad ,_bgfbd );};};if len (_gcgad )==0{continue ;
};_ecdfg :=_aefad (_gcgad );_baagd [_edaecf ]=_ecdfg ;if _edeg {_db .Printf ("\u0020\u0020\u0020\u0025\u0032\u0064\u003a\u0020\u00256\u002e\u0032\u0066\u000a",_edaecf ,_ecdfg );};};return _baagd ;};type pathSection struct{_dgcdf []*subpath ;_dg .Color ;
};func (_ebfd *wordBag )scanBand (_dgdc string ,_fbea *wordBag ,_eabg func (_cgfe *wordBag ,_aegef *textWord )bool ,_efda ,_bbff ,_feec float64 ,_dcd ,_fddd bool )int {_dcdf :=_fbea ._dgbf ;var _fecfa map[int ]map[*textWord ]struct{};if !_dcd {_fecfa =_ebfd .makeRemovals ();
};_ggaa :=_ggdc *_dcdf ;_dffg :=0;for _ ,_bbfce :=range _ebfd .depthBand (_efda -_ggaa ,_bbff +_ggaa ){if len (_ebfd ._fdc [_bbfce ])==0{continue ;};for _ ,_ccea :=range _ebfd ._fdc [_bbfce ]{if !(_efda -_ggaa <=_ccea ._gbgab &&_ccea ._gbgab <=_bbff +_ggaa ){continue ;
};if !_eabg (_fbea ,_ccea ){continue ;};_gfee :=2.0*_bg .Abs (_ccea ._cfccf -_fbea ._dgbf )/(_ccea ._cfccf +_fbea ._dgbf );_bcec :=_bg .Max (_ccea ._cfccf /_fbea ._dgbf ,_fbea ._dgbf /_ccea ._cfccf );_gecb :=_bg .Min (_gfee ,_bcec );if _feec > 0&&_gecb > _feec {continue ;
};if _fbea .blocked (_ccea ){continue ;};if !_dcd {_fbea .pullWord (_ccea ,_bbfce ,_fecfa );};_dffg ++;if !_fddd {if _ccea ._gbgab < _efda {_efda =_ccea ._gbgab ;};if _ccea ._gbgab > _bbff {_bbff =_ccea ._gbgab ;};};if _dcd {break ;};};};if !_dcd {_ebfd .applyRemovals (_fecfa );
};return _dffg ;};func (_faed *textPara )toCellTextMarks (_fbgbd *int )[]TextMark {var _bgdg []TextMark ;for _fgdf ,_ecbc :=range _faed ._gcbc {_bbab :=_ecbc .toTextMarks (_fbgbd );_acfe :=_eeg &&_ecbc .endsInHyphen ()&&_fgdf !=len (_faed ._gcbc )-1;if _acfe {_bbab =_bbdd (_bbab ,_fbgbd );
};_bgdg =append (_bgdg ,_bbab ...);if !(_acfe ||_fgdf ==len (_faed ._gcbc )-1){_bgdg =_afgd (_bgdg ,_fbgbd ,_aeced (_ecbc ._ebee ,_faed ._gcbc [_fgdf +1]._ebee ));};};return _bgdg ;};func (_fba *textObject )renderText (_gbea _bgf .PdfObject ,_ecbf []byte ,_fegb int )error {if _fba ._dbdd {_bc .Log .Debug ("\u0072\u0065\u006e\u0064\u0065r\u0054\u0065\u0078\u0074\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069\u0064 \u0066\u006f\u006e\u0074\u002e\u0020\u004e\u006f\u0074\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u002e");
return nil ;};_eagg :=_fba .getCurrentFont ();_ecbg :=_eagg .BytesToCharcodes (_ecbf );_gcbe ,_dgd ,_gcd :=_eagg .CharcodesToStrings (_ecbg );if _gcd > 0{_bc .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_dgd ,_gcd );
};_fba ._degc ._aaf +=_dgd ;_fba ._degc ._gcac +=_gcd ;_dff :=_fba ._degc ;_ffcbg :=_dff ._cbbb ;_feee :=_dff ._ecef /100.0;_efdee :=_gbdf ;if _eagg .Subtype ()=="\u0054\u0079\u0070e\u0033"{_efdee =1;};_cgbc ,_ggeg :=_eagg .GetRuneMetrics (' ');if !_ggeg {_cgbc ,_ggeg =_eagg .GetCharMetrics (32);
};if !_ggeg {_cgbc ,_ =_e .DefaultFont ().GetRuneMetrics (' ');};_dbf :=_cgbc .Wx *_efdee ;_bc .Log .Trace ("\u0073p\u0061\u0063e\u0057\u0069\u0064t\u0068\u003d\u0025\u002e\u0032\u0066\u0020t\u0065\u0078\u0074\u003d\u0025\u0071 \u0066\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0066\u006f\u006et\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",_dbf ,_gcbe ,_eagg ,_ffcbg );
_efa :=_ee .NewMatrix (_ffcbg *_feee ,0,0,_ffcbg ,0,_dff ._edd );if _gfgb {_bc .Log .Info ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0074\u0065\u0078t\u0073\u003d\u0025\u0071",len (_ecbg ),_ecbg ,_gcbe );
};_bc .Log .Trace ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0072\u0075\u006ee\u0073\u003d\u0025\u0071",len (_ecbg ),_ecbg ,len (_gcbe ));_dcc :=_fba .getFillColor ();
_dga :=_fba .getStrokeColor ();for _bcgd ,_ecd :=range _gcbe {_eed :=[]rune (_ecd );if len (_eed )==1&&_eed [0]=='\x00'{continue ;};_bdf :=_ecbg [_bcgd ];_gfcg :=_fba ._gaca .CTM .Mult (_fba ._edcb ).Mult (_efa );_ccb :=0.0;if len (_eed )==1&&_eed [0]==32{_ccb =_dff ._bgfba ;
};_fdee ,_dfe :=_eagg .GetCharMetrics (_bdf );if !_dfe {_bc .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u004e\u006f \u006d\u0065\u0074r\u0069\u0063\u0020\u0066\u006f\u0072\u0020\u0063\u006fde\u003d\u0025\u0064 \u0072\u003d0\u0078\u0025\u0030\u0034\u0078\u003d%\u002b\u0071 \u0025\u0073",_bdf ,_eed ,_eed ,_eagg );
return _db .Errorf ("\u006e\u006f\u0020\u0063\u0068\u0061\u0072\u0020\u006d\u0065\u0074\u0072\u0069\u0063\u0073:\u0020f\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0063\u006f\u0064\u0065\u003d\u0025\u0064",_eagg .String (),_bdf );};_gdbg :=_ee .Point {X :_fdee .Wx *_efdee ,Y :_fdee .Wy *_efdee };
_fbe :=_ee .Point {X :(_gdbg .X *_ffcbg +_ccb )*_feee };_addc :=_ee .Point {X :(_gdbg .X *_ffcbg +_dff ._fbg +_ccb )*_feee };if _gfgb {_bc .Log .Info ("\u0074\u0066\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0063\u003d\u0025\u002e\u0032f\u0020t\u0077\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_ffcbg ,_dff ._fbg ,_dff ._bgfba ,_feee );
_bc .Log .Info ("\u0064x\u002c\u0064\u0079\u003d%\u002e\u0033\u0066\u0020\u00740\u003d%\u002e3\u0066\u0020\u0074\u003d\u0025\u002e\u0033f",_gdbg ,_fbe ,_addc );};_gbd :=_fbae (_fbe );_ffb :=_fbae (_addc );_bedf :=_fba ._gaca .CTM .Mult (_fba ._edcb ).Mult (_gbd );
if _egdb {_bc .Log .Info ("e\u006e\u0064\u003a\u000a\tC\u0054M\u003d\u0025\u0073\u000a\u0009 \u0074\u006d\u003d\u0025\u0073\u000a"+"\u0009\u0020t\u0064\u003d\u0025s\u0020\u0078\u006c\u0061\u0074\u003d\u0025\u0073\u000a"+"\u0009t\u0064\u0030\u003d\u0025s\u000a\u0009\u0020\u0020\u2192 \u0025s\u0020x\u006c\u0061\u0074\u003d\u0025\u0073",_fba ._gaca .CTM ,_fba ._edcb ,_ffb ,_cda (_fba ._gaca .CTM .Mult (_fba ._edcb ).Mult (_ffb )),_gbd ,_bedf ,_cda (_bedf ));
};_gbdb ,_adfae :=_fba .newTextMark (_af .ExpandLigatures (_eed ),_gfcg ,_cda (_bedf ),_bg .Abs (_dbf *_gfcg .ScalingFactorX ()),_eagg ,_fba ._degc ._fbg ,_dcc ,_dga ,_gbea ,_gcbe ,_bcgd ,_fegb );if !_adfae {_bc .Log .Debug ("\u0054\u0065\u0078\u0074\u0020\u006d\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069d\u0065 \u0070\u0061\u0067\u0065\u002e\u0020\u0053\u006b\u0069\u0070\u0070\u0069\u006e\u0067");
continue ;};if _eagg ==nil {_bc .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u002e");}else if _eagg .Encoder ()==nil {_bc .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020N\u006f\u0020\u0065\u006e\u0063\u006f\u0064\u0069\u006eg\u002e\u0020\u0066o\u006et\u003d\u0025\u0073",_eagg );
}else {if _accd ,_afa :=_eagg .Encoder ().CharcodeToRune (_bdf );_afa {_gbdb ._cebbg =string (_accd );};};_bc .Log .Trace ("i\u003d\u0025\u0064\u0020\u0063\u006fd\u0065\u003d\u0025\u0064\u0020\u006d\u0061\u0072\u006b=\u0025\u0073\u0020t\u0072m\u003d\u0025\u0073",_bcgd ,_bdf ,_gbdb ,_gfcg );
_fba ._eebd =append (_fba ._eebd ,&_gbdb );_fba ._edcb .Concat (_ffb );};return nil ;};type ruling struct{_ffada rulingKind ;_dfcb markKind ;_dg .Color ;_cbag float64 ;_eagf float64 ;_adgg float64 ;_aabf float64 ;};func (_dbff *textTable )emptyCompositeRow (_fadg int )bool {for _abbeb :=0;
_abbeb < _dbff ._afde ;_abbeb ++{if _bgeccc ,_efeee :=_dbff ._abaeg [_gcaf (_abbeb ,_fadg )];_efeee {if len (_bgeccc .paraList )> 0{return false ;};};};return true ;};func _gebeb (_dcge *textLine ,_gbab []*textLine ,_fddgd []float64 ,_bfbe ,_bebfb float64 )[]*textLine {_dgcccg :=[]*textLine {};
for _ ,_abga :=range _gbab {if _abga ._ebee >=_bfbe {if _bebfb !=-1&&_abga ._ebee < _bebfb {if _abga .text ()!=_dcge .text (){if _bg .Round (_abga .Llx )< _bg .Round (_dcge .Llx ){break ;};_dgcccg =append (_dgcccg ,_abga );};}else if _bebfb ==-1{if _abga ._ebee ==_dcge ._ebee {if _abga .text ()!=_dcge .text (){_dgcccg =append (_dgcccg ,_abga );
};continue ;};_bcgaa :=_gecbf (_dcge ,_gbab ,_fddgd );if _bcgaa !=-1&&_abga ._ebee <=_bcgaa {_dgcccg =append (_dgcccg ,_abga );};};};};return _dgcccg ;};func (_dfbb paraList )toTextMarks ()[]TextMark {_abfeb :=0;var _cag []TextMark ;for _bcgda ,_gafb :=range _dfbb {if _gafb ._ecfbe {continue ;
};_bbec :=_gafb .toTextMarks (&_abfeb );_cag =append (_cag ,_bbec ...);if _bcgda !=len (_dfbb )-1{if _ddgdba (_gafb ,_dfbb [_bcgda +1]){_cag =_afgd (_cag ,&_abfeb ,"\u0020");}else {_cag =_afgd (_cag ,&_abfeb ,"\u000a");_cag =_afgd (_cag ,&_abfeb ,"\u000a");
};};};_cag =_afgd (_cag ,&_abfeb ,"\u000a");_cag =_afgd (_cag ,&_abfeb ,"\u000a");return _cag ;};func _dgeb (_eeac []*textLine ,_bfdb string )string {var _daee _ce .Builder ;_gfacf :=0.0;for _bdea ,_geda :=range _eeac {_gecbb :=_geda .text ();_fag :=_geda ._ebee ;
if _bdea < len (_eeac )-1{_gfacf =_eeac [_bdea +1]._ebee ;}else {_gfacf =0.0;};_daee .WriteString (_bfdb );_daee .WriteString (_gecbb );if _gfacf !=_fag {_daee .WriteString ("\u000a");}else {_daee .WriteString ("\u0020");};};return _daee .String ();};

// TextMarkArray is a collection of TextMarks.
type TextMarkArray struct{_egfb []TextMark };func (_gec *textObject )setCharSpacing (_gfa float64 ){if _gec ==nil {return ;};_gec ._degc ._fbg =_gfa ;if _gfgb {_bc .Log .Info ("\u0073\u0065t\u0043\u0068\u0061\u0072\u0053\u0070\u0061\u0063\u0069\u006e\u0067\u003a\u0020\u0025\u002e\u0032\u0066\u0020\u0073\u0074\u0061\u0074e=\u0025\u0073",_gfa ,_gec ._degc .String ());
};};func (_bggb paraList )xNeighbours (_ffdfg float64 )map[*textPara ][]int {_bggfe :=make ([]event ,2*len (_bggb ));if _ffdfg ==0{for _ceadg ,_eaebb :=range _bggb {_bggfe [2*_ceadg ]=event {_eaebb .Llx ,true ,_ceadg };_bggfe [2*_ceadg +1]=event {_eaebb .Urx ,false ,_ceadg };
};}else {for _eaebe ,_ceae :=range _bggb {_bggfe [2*_eaebe ]=event {_ceae .Llx -_ffdfg *_ceae .fontsize (),true ,_eaebe };_bggfe [2*_eaebe +1]=event {_ceae .Urx +_ffdfg *_ceae .fontsize (),false ,_eaebe };};};return _bggb .eventNeighbours (_bggfe );};func _fbae (_eec _ee .Point )_ee .Matrix {return _ee .TranslationMatrix (_eec .X ,_eec .Y )};
func _ebg (_fcgd []*wordBag )[]*wordBag {if len (_fcgd )<=1{return _fcgd ;};if _gccaf {_bc .Log .Info ("\u006d\u0065\u0072\u0067\u0065\u0057\u006f\u0072\u0064B\u0061\u0067\u0073\u003a");};_d .Slice (_fcgd ,func (_afad ,_cfab int )bool {_acga ,_afag :=_fcgd [_afad ],_fcgd [_cfab ];
_fbdd :=_acga .Width ()*_acga .Height ();_dfbd :=_afag .Width ()*_afag .Height ();if _fbdd !=_dfbd {return _fbdd > _dfbd ;};if _acga .Height ()!=_afag .Height (){return _acga .Height ()> _afag .Height ();};return _afad < _cfab ;});var _fgdb []*wordBag ;
_aebg :=make (intSet );for _dfbg :=0;_dfbg < len (_fcgd );_dfbg ++{if _aebg .has (_dfbg ){continue ;};_edca :=_fcgd [_dfbg ];for _bafgf :=_dfbg +1;_bafgf < len (_fcgd );_bafgf ++{if _aebg .has (_dfbg ){continue ;};_faaf :=_fcgd [_bafgf ];_debdd :=_edca .PdfRectangle ;
_debdd .Llx -=_edca ._dgbf ;if _gegee (_debdd ,_faaf .PdfRectangle ){_edca .absorb (_faaf );_aebg .add (_bafgf );};};_fgdb =append (_fgdb ,_edca );};if len (_fcgd )!=len (_fgdb )+len (_aebg ){_bc .Log .Error ("\u006d\u0065\u0072ge\u0057\u006f\u0072\u0064\u0042\u0061\u0067\u0073\u003a \u0025d\u2192%\u0064 \u0061\u0062\u0073\u006f\u0072\u0062\u0065\u0064\u003d\u0025\u0064",len (_fcgd ),len (_fgdb ),len (_aebg ));
};return _fgdb ;};func (_fdgf paraList )inTile (_afgdc gridTile )paraList {var _dede paraList ;for _ ,_bacde :=range _fdgf {if _afgdc .contains (_bacde .PdfRectangle ){_dede =append (_dede ,_bacde );};};if _edeg {_db .Printf ("\u0020 \u0020\u0069\u006e\u0054i\u006c\u0065\u003a\u0020\u0020%\u0073 \u0069n\u0073\u0069\u0064\u0065\u003d\u0025\u0064\n",_afgdc ,len (_dede ));
for _dadbb ,_bcfcd :=range _dede {_db .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dadbb ,_bcfcd );};_db .Println ("");};return _dede ;};func _gccb (_fbeec ,_cdac ,_bcgf float64 )rulingKind {if _fbeec >=_bcgf &&_abgd (_cdac ,_fbeec ){return _cgfba ;
};if _cdac >=_bcgf &&_abgd (_fbeec ,_cdac ){return _dfdb ;};return _deee ;};func _ecaa (_fcbg *list )[]*textLine {for _ ,_abbef :=range _fcbg ._dgac {switch _abbef ._cbcf {case "\u004c\u0042\u006fd\u0079":if len (_abbef ._caef )!=0{return _abbef ._caef ;
};return _ecaa (_abbef );case "\u0053\u0070\u0061\u006e":return _abbef ._caef ;case "I\u006e\u006c\u0069\u006e\u0065\u0053\u0068\u0061\u0070\u0065":return _abbef ._caef ;};};return nil ;};func (_fdba *TextMarkArray )exists (_ega TextMark )bool {for _ ,_edf :=range _fdba .Elements (){if _bb .DeepEqual (_ega .DirectObject ,_edf .DirectObject )&&_bb .DeepEqual (_ega .BBox ,_edf .BBox )&&_edf .Text ==_ega .Text {return true ;
};};return false ;};func (_cedbb *wordBag )empty (_dacb int )bool {_ ,_agcb :=_cedbb ._fdc [_dacb ];return !_agcb };func (_dbgg *textWord )addDiacritic (_bcgeb string ){_gdaaf :=_dbgg ._ggegd [len (_dbgg ._ggegd )-1];_gdaaf ._adag +=_bcgeb ;_gdaaf ._adag =_ge .NFKC .String (_gdaaf ._adag );
};

// ImageExtractOptions contains options for controlling image extraction from
// PDF pages.
type ImageExtractOptions struct{IncludeInlineStencilMasks bool ;};func _fega (_cafdg []TextMark ,_eadg *int ,_bbgb TextMark )[]TextMark {_bbgb .Offset =*_eadg ;_cafdg =append (_cafdg ,_bbgb );*_eadg +=len (_bbgb .Text );return _cafdg ;};func (_aegf *textPara )depth ()float64 {if _aegf ._ecfbe {return -1.0;
};if len (_aegf ._gcbc )> 0{return _aegf ._gcbc [0]._ebee ;};return _aegf ._fbda .depth ();};func (_dac *imageExtractContext )extractFormImages (_bae *_bgf .PdfObjectName ,_fdg _ac .GraphicsState ,_addb *_e .PdfPageResources )error {_agg ,_dge :=_addb .GetXObjectFormByName (*_bae );
if _dge !=nil {return _dge ;};if _agg ==nil {return nil ;};_dgg ,_dge :=_agg .GetContentStream ();if _dge !=nil {return _dge ;};_dfb :=_agg .Resources ;if _dfb ==nil {_dfb =_addb ;};_dge =_dac .extractContentStreamImages (string (_dgg ),_dfb );if _dge !=nil {return _dge ;
};_dac ._fd ++;return nil ;};

// RenderMode specifies the text rendering mode (Tmode), which determines whether showing text shall cause
// glyph outlines to be  stroked, filled, used as a clipping boundary, or some combination of the three.
// Stroking, filling, and clipping shall have the same effects for a text object as they do for a path object
// (see 8.5.3, "Path-Painting Operators" and 8.5.4, "Clipping Path Operators").
type RenderMode int ;func (_ebag *shapesState )quadraticTo (_afee ,_ebeb ,_cgcg ,_aggg float64 ){if _bcfdb {_bc .Log .Info ("\u0071\u0075\u0061d\u0072\u0061\u0074\u0069\u0063\u0054\u006f\u003a");};_ebag .addPoint (_cgcg ,_aggg );};type intSet map[int ]struct{};
func (_daeef gridTile )numBorders ()int {_cedcb :=0;if _daeef ._agab {_cedcb ++;};if _daeef ._edbag {_cedcb ++;};if _daeef ._ddab {_cedcb ++;};if _daeef ._bfefb {_cedcb ++;};return _cedcb ;};func (_dadb rulingList )intersections ()map[int ]intSet {var _gfcfa ,_bfbc []int ;
for _ddce ,_dcfad :=range _dadb {switch _dcfad ._ffada {case _dfdb :_gfcfa =append (_gfcfa ,_ddce );case _cgfba :_bfbc =append (_bfbc ,_ddce );};};if len (_gfcfa )< _fceff +1||len (_bfbc )< _bebb +1{return nil ;};if len (_gfcfa )+len (_bfbc )> _dcff {_bc .Log .Debug ("\u0069\u006e\u0074\u0065\u0072\u0073e\u0063\u0074\u0069\u006f\u006e\u0073\u003a\u0020\u0054\u004f\u004f\u0020\u004d\u0041\u004e\u0059\u0020\u0072\u0075\u006ci\u006e\u0067\u0073\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u003d\u0020%\u0064 \u0078\u0020\u0025\u0064",len (_dadb ),len (_gfcfa ),len (_bfbc ));
return nil ;};_geea :=make (map[int ]intSet ,len (_gfcfa )+len (_bfbc ));for _ ,_fddfc :=range _gfcfa {for _ ,_gbagf :=range _bfbc {if _dadb [_fddfc ].intersects (_dadb [_gbagf ]){if _ ,_cbef :=_geea [_fddfc ];!_cbef {_geea [_fddfc ]=make (intSet );};if _ ,_gbcc :=_geea [_gbagf ];
!_gbcc {_geea [_gbagf ]=make (intSet );};_geea [_fddfc ].add (_gbagf );_geea [_gbagf ].add (_fddfc );};};};return _geea ;};

// PageText represents the layout of text on a device page.
type PageText struct{_cbcc []*textMark ;_ffaf string ;_gfg []TextMark ;_beda []TextTable ;_acbf _e .PdfRectangle ;_ded []pathSection ;_afae []pathSection ;_ebd *_bgf .PdfObject ;_gded _bgf .PdfObject ;_ecda *_ac .ContentStreamOperations ;_caec PageTextOptions ;
};func (_afb *textObject )moveTextSetLeading (_agb ,_gbf float64 ){_afb ._degc ._cadc =-_gbf ;_afb .moveLP (_agb ,_gbf );};func (_eecb *textMark )bbox ()_e .PdfRectangle {return _eecb .PdfRectangle };func (_befd paraList )llyRange (_gaaad []int ,_fcec ,_gbbd float64 )[]int {_efgd :=len (_befd );
if _gbbd < _befd [_gaaad [0]].Lly ||_fcec > _befd [_gaaad [_efgd -1]].Lly {return nil ;};_gcfc :=_d .Search (_efgd ,func (_daag int )bool {return _befd [_gaaad [_daag ]].Lly >=_fcec });_beee :=_d .Search (_efgd ,func (_bagg int )bool {return _befd [_gaaad [_bagg ]].Lly > _gbbd });
return _gaaad [_gcfc :_beee ];};func (_bgaag rulingList )removeDuplicates ()rulingList {if len (_bgaag )==0{return nil ;};_bgaag .sort ();_ebaga :=rulingList {_bgaag [0]};for _ ,_ceba :=range _bgaag [1:]{if _ceba .equals (_ebaga [len (_ebaga )-1]){continue ;
};_ebaga =append (_ebaga ,_ceba );};return _ebaga ;};

// List returns all the list objects detected on the page.
// It detects all the bullet point Lists from a given pdf page and builds a slice of bullet list objects.
// A given bullet list object has a tree structure.
// Each bullet point list is extracted with the text content it contains and all the sub lists found under it as children in the tree.
// The rest content of the pdf is ignored and only text in the bullet point lists are extracted.
// The list extraction is done in two ways.
// 1. If the document is tagged then the lists are extracted using the tags provided in the document.
// 2. Otherwise the bullet lists are extracted from the raw text using regex matching.
// By default the document tag is used if available.
// However this can be disabled using `DisableDocumentTags` in the `Options` object.
// Sometimes disabling document tags option might give a better bullet list extraction if the document was tagged incorrectly.
//     options := &Options{
//	     DisableDocumentTags: false, // this means use document tag if available
//     }
//     ex, err := NewWithOptions(page, options)
//     // handle error
//     pageText, _, _, err := ex.ExtractPageText()
//     // handle error
//     lists := pageText.List()
//     txt := lists.Text()
func (_dddc PageText )List ()lists {_ecca :=!_dddc ._caec ._bgfe ;_gdf :=_dddc .getParagraphs ();_eabe :=true ;if _dddc ._ebd ==nil ||*_dddc ._ebd ==nil {_eabe =false ;};_aee :=_gdf .list ();if _eabe &&_ecca {_fgbbb :=_gfcb (&_gdf );_agbec :=&structTreeRoot {};
_agbec .parseStructTreeRoot (*_dddc ._ebd );if _agbec ._dceb ==nil {_bc .Log .Debug ("\u004c\u0069\u0073\u0074\u003a\u0020\u0073t\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e'\u0074\u0020\u0068\u0061\u0076e\u0020\u0061\u006e\u0079\u0020\u0063\u006f\u006e\u0074e\u006e\u0074\u002c\u0020\u0075\u0073\u0069\u006e\u0067\u0020\u0074\u0065\u0078\u0074\u0020\u006d\u0061\u0074\u0063\u0068\u0069\u006e\u0067\u0020\u006d\u0065\u0074\u0068\u006f\u0064\u0020\u0069\u006e\u0073\u0074\u0065\u0061\u0064\u002e");
return _aee ;};_aee =_agbec .buildList (_fgbbb ,_dddc ._gded );};return _aee ;};func (_aegb *textPara )getListLines ()[]*textLine {var _gecd []*textLine ;_aced :=_fgga (_aegb ._gcbc );for _ ,_feeea :=range _aegb ._gcbc {_agadcb :=_feeea ._gdg [0]._dgeda [0];
if _bcabb (_agadcb ){_gecd =append (_gecd ,_feeea );};};_gecd =append (_gecd ,_aced ...);return _gecd ;};func _dgfd (_ffe []*textLine ,_dcb map[float64 ][]*textLine ,_bccfb []float64 ,_afbb int ,_fgdbb ,_acedd float64 )[]*list {_bgaac :=[]*list {};_effa :=_afbb ;
_afbb =_afbb +1;_cabde :=_bccfb [_effa ];_abde :=_dcb [_cabde ];_bccag :=_cebf (_abde ,_acedd ,_fgdbb );for _dgdg ,_bfcbd :=range _bccag {var _cedc float64 ;_ebfad :=[]*list {};_adfb :=_bfcbd ._ebee ;_bcbed :=_acedd ;if _dgdg < len (_bccag )-1{_bcbed =_bccag [_dgdg +1]._ebee ;
};if _afbb < len (_bccfb ){_ebfad =_dgfd (_ffe ,_dcb ,_bccfb ,_afbb ,_adfb ,_bcbed );};_cedc =_bcbed ;if len (_ebfad )> 0{_bcgdg :=_ebfad [0];if len (_bcgdg ._caef )> 0{_cedc =_bcgdg ._caef [0]._ebee ;};};_abag :=[]*textLine {_bfcbd };_cfbd :=_gebeb (_bfcbd ,_ffe ,_bccfb ,_adfb ,_cedc );
_abag =append (_abag ,_cfbd ...);_cabg :=_dfgcg (_abag ,"\u0062\u0075\u006c\u006c\u0065\u0074",_ebfad );_cabg ._dgaf =_dgeb (_abag ,"");_bgaac =append (_bgaac ,_cabg );};return _bgaac ;};func _ebab (_bgcd _e .PdfRectangle )*ruling {return &ruling {_ffada :_dfdb ,_cbag :_bgcd .Urx ,_eagf :_bgcd .Lly ,_adgg :_bgcd .Ury };
};type cachedImage struct{_daf *_e .Image ;_geb _e .PdfColorspace ;};func _dfdg (_fefdd map[float64 ][]*textLine )[]float64 {_ggg :=[]float64 {};for _abgc :=range _fefdd {_ggg =append (_ggg ,_abgc );};_d .Float64s (_ggg );return _ggg ;};func (_fdab pathSection )bbox ()_e .PdfRectangle {_eeag :=_fdab ._dgcdf [0]._gcfd [0];
_cgba :=_e .PdfRectangle {Llx :_eeag .X ,Urx :_eeag .X ,Lly :_eeag .Y ,Ury :_eeag .Y };_daaf :=func (_ebaa _ee .Point ){if _ebaa .X < _cgba .Llx {_cgba .Llx =_ebaa .X ;}else if _ebaa .X > _cgba .Urx {_cgba .Urx =_ebaa .X ;};if _ebaa .Y < _cgba .Lly {_cgba .Lly =_ebaa .Y ;
}else if _ebaa .Y > _cgba .Ury {_cgba .Ury =_ebaa .Y ;};};for _ ,_baa :=range _fdab ._dgcdf [0]._gcfd [1:]{_daaf (_baa );};for _ ,_adca :=range _fdab ._dgcdf [1:]{for _ ,_afbg :=range _adca ._gcfd {_daaf (_afbg );};};return _cgba ;};func (_ddecf compositeCell )hasLines (_ddgb []*textLine )bool {for _gceef ,_eggce :=range _ddgb {_daed :=_bdeg (_ddecf .PdfRectangle ,_eggce .PdfRectangle );
if _edeg {_db .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u005e\u005e\u005e\u0069\u006e\u0074\u0065\u0072\u0073e\u0063t\u0073\u003d\u0025\u0074\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u000a",_daed ,_gceef ,len (_ddgb ));_db .Printf ("\u0020\u0020\u0020\u0020  \u005e\u005e\u005e\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025s\u000a",_ddecf );
_db .Printf ("\u0020 \u0020 \u0020\u0020\u0020\u006c\u0069\u006e\u0065\u003d\u0025\u0073\u000a",_eggce );};if _daed {return true ;};};return false ;};func _eaa (_cafe ,_bcfd bounded )float64 {_acccd :=_edbb (_cafe ,_bcfd );if !_ffagb (_acccd ){return _acccd ;
};return _acdab (_cafe ,_bcfd );};func (_fgc *imageExtractContext )extractInlineImage (_ggc *_ac .ContentStreamInlineImage ,_eba _ac .GraphicsState ,_ebaf *_e .PdfPageResources )error {_bgdc ,_bfa :=_ggc .ToImage (_ebaf );if _bfa !=nil {return _bfa ;};
_ead ,_bfa :=_ggc .GetColorSpace (_ebaf );if _bfa !=nil {return _bfa ;};if _ead ==nil {_ead =_e .NewPdfColorspaceDeviceGray ();};_gcf ,_bfa :=_ead .ImageToRGB (*_bgdc );if _bfa !=nil {return _bfa ;};_cbd :=ImageMark {Image :&_gcf ,Width :_eba .CTM .ScalingFactorX (),Height :_eba .CTM .ScalingFactorY (),Angle :_eba .CTM .Angle ()};
_cbd .X ,_cbd .Y =_eba .CTM .Translation ();_fgc ._add =append (_fgc ._add ,_cbd );_fgc ._efe ++;return nil ;};func (_ddfc *textTable )getRight ()paraList {_ebga :=make (paraList ,_ddfc ._gaafe );for _gbee :=0;_gbee < _ddfc ._gaafe ;_gbee ++{_fcgbd :=_ddfc .get (_ddfc ._afde -1,_gbee )._gabd ;
if _fcgbd .taken (){return nil ;};_ebga [_gbee ]=_fcgbd ;};for _ddbcd :=0;_ddbcd < _ddfc ._gaafe -1;_ddbcd ++{if _ebga [_ddbcd ]._gccaae !=_ebga [_ddbcd +1]{return nil ;};};return _ebga ;};func (_agaa *textLine )bbox ()_e .PdfRectangle {return _agaa .PdfRectangle };
func _egbee (_gfba ,_fbde _ee .Point )rulingKind {_gcdd :=_bg .Abs (_gfba .X -_fbde .X );_cbga :=_bg .Abs (_gfba .Y -_fbde .Y );return _gccb (_gcdd ,_cbga ,_gffe );};func (_dbb *wordBag )allWords ()[]*textWord {var _bebcg []*textWord ;for _ ,_gecba :=range _dbb ._fdc {_bebcg =append (_bebcg ,_gecba ...);
};return _bebcg ;};func (_dab *imageExtractContext )extractXObjectImage (_ada *_bgf .PdfObjectName ,_cab _ac .GraphicsState ,_cefb *_e .PdfPageResources )error {_agdb ,_ :=_cefb .GetXObjectByName (*_ada );if _agdb ==nil {return nil ;};_adf ,_cad :=_dab ._cdd [_agdb ];
if !_cad {_cgg ,_bdee :=_cefb .GetXObjectImageByName (*_ada );if _bdee !=nil {return _bdee ;};if _cgg ==nil {return nil ;};_ddc ,_bdee :=_cgg .ToImage ();if _bdee !=nil {return _bdee ;};var _ege _cec .Image ;if _cgg .SMask !=nil {_ege ,_bdee =_eded (_cgg .SMask ,_dg .Opaque );
if _bdee !=nil {_bc .Log .Debug ("W\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0067\u0065\u0074\u0020\u0073\u006f\u0066\u0074\u0020\u0069\u006da\u0067e\u0020\u006d\u0061\u0073k\u002e\u0020O\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u002e");
};};if _ege !=nil {_dca ,_gee :=_ddc .ToGoImage ();if _gee !=nil {return _gee ;};_dca =_gfge (_dca ,_ege );switch _cgg .ColorSpace .String (){case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0049n\u0064\u0065\u0078\u0065\u0064":_ddc ,_gee =_e .ImageHandling .NewGrayImageFromGoImage (_dca );
if _gee !=nil {return _gee ;};default:_ddc ,_gee =_e .ImageHandling .NewImageFromGoImage (_dca );if _gee !=nil {return _gee ;};};};_adf =&cachedImage {_daf :_ddc ,_geb :_cgg .ColorSpace };_dab ._cdd [_agdb ]=_adf ;};_bba :=_adf ._daf ;_bge :=_adf ._geb ;
_ga ,_cde :=_bge .ImageToRGB (*_bba );if _cde !=nil {return _cde ;};_bc .Log .Debug ("@\u0044\u006f\u0020\u0043\u0054\u004d\u003a\u0020\u0025\u0073",_cab .CTM .String ());_cbab :=ImageMark {Image :&_ga ,Width :_cab .CTM .ScalingFactorX (),Height :_cab .CTM .ScalingFactorY (),Angle :_cab .CTM .Angle ()};
_cbab .X ,_cbab .Y =_cab .CTM .Translation ();_dab ._add =append (_dab ._add ,_cbab );_dab ._eb ++;return nil ;};func (_ffbga *textTable )emptyCompositeColumn (_cabgg int )bool {for _cdbcc :=0;_cdbcc < _ffbga ._gaafe ;_cdbcc ++{if _dacbd ,_cagbc :=_ffbga ._abaeg [_gcaf (_cabgg ,_cdbcc )];
_cagbc {if len (_dacbd .paraList )> 0{return false ;};};};return true ;};func (_eab *imageExtractContext )extractContentStreamImages (_fgf string ,_aeg *_e .PdfPageResources )error {_cca :=_ac .NewContentStreamParser (_fgf );_aaea ,_deb :=_cca .Parse ();
if _deb !=nil {return _deb ;};if _eab ._cdd ==nil {_eab ._cdd =map[*_bgf .PdfObjectStream ]*cachedImage {};};if _eab ._ccdc ==nil {_eab ._ccdc =&ImageExtractOptions {};};_bde :=_ac .NewContentStreamProcessor (*_aaea );_bde .AddHandler (_ac .HandlerConditionEnumAllOperands ,"",_eab .processOperand );
return _bde .Process (_aeg );};func _agag (_dbbbd string ,_gdfcd int )string {if len (_dbbbd )< _gdfcd {return _dbbbd ;};return _dbbbd [:_gdfcd ];};func _eada (_cbdf structElement )[]structElement {_aaffd :=[]structElement {};for _ ,_bdfdb :=range _cbdf ._aeaaf {for _ ,_gbgd :=range _bdfdb ._aeaaf {for _ ,_bbfb :=range _gbgd ._aeaaf {if _bbfb ._cdaf =="\u004c"{_aaffd =append (_aaffd ,_bbfb );
};};};};return _aaffd ;};func _cda (_ageg _ee .Matrix )_ee .Point {_deab ,_feeed :=_ageg .Translation ();return _ee .Point {X :_deab ,Y :_feeed };};func _ggbd (_ggbde []*textWord ,_ggbcf int )[]*textWord {_abcf :=len (_ggbde );copy (_ggbde [_ggbcf :],_ggbde [_ggbcf +1:]);
return _ggbde [:_abcf -1];};func (_agef paraList )extractTables (_bdacf []gridTiling )paraList {if _edeg {_bc .Log .Debug ("\u0065\u0078\u0074r\u0061\u0063\u0074\u0054\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_agef ));
};if len (_agef )< _bdfd {return _agef ;};_fabcd :=_agef .findTables (_bdacf );if _edeg {_bc .Log .Info ("c\u006f\u006d\u0062\u0069\u006e\u0065d\u0020\u0074\u0061\u0062\u006c\u0065s\u0020\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_fabcd ));
for _cefba ,_dddd :=range _fabcd {_dddd .log (_db .Sprintf ("c\u006f\u006d\u0062\u0069\u006e\u0065\u0064\u0020\u0025\u0064",_cefba ));};};return _agef .applyTables (_fabcd );};func _deca (_bdcc map[float64 ]map[float64 ]gridTile )[]float64 {_dgda :=make ([]float64 ,0,len (_bdcc ));
_aacc :=make (map[float64 ]struct{},len (_bdcc ));for _ ,_efbd :=range _bdcc {for _ggdfc :=range _efbd {if _ ,_dgcef :=_aacc [_ggdfc ];_dgcef {continue ;};_dgda =append (_dgda ,_ggdfc );_aacc [_ggdfc ]=struct{}{};};};_d .Float64s (_dgda );return _dgda ;
};func (_abb *textObject )getFillColor ()_dg .Color {return _eaccge (_abb ._gaca .ColorspaceNonStroking ,_abb ._gaca .ColorNonStroking );};func (_gd *PageFonts )extractPageResourcesToFont (_fbc *_e .PdfPageResources )error {_cba ,_fa :=_bgf .GetDict (_fbc .Font );
if !_fa {return _c .New (_ea );};for _ ,_efd :=range _cba .Keys (){var (_gde =true ;_ec []byte ;_be string ;);_fbf ,_gg :=_fbc .GetFontByName (_efd );if !_gg {return _c .New (_gb );};_cbg ,_dfa :=_e .NewPdfFontFromPdfObject (_fbf );if _dfa !=nil {return _dfa ;
};_aab :=_cbg .FontDescriptor ();_fc :=_cbg .FontDescriptor ().FontName .String ();_ae :=_cbg .Subtype ();if _agd (_gd .Fonts ,_fc ){continue ;};if len (_cbg .ToUnicode ())==0{_gde =false ;};if _aab .FontFile !=nil {if _eeb ,_dd :=_bgf .GetStream (_aab .FontFile );
_dd {_ec ,_dfa =_bgf .DecodeStream (_eeb );if _dfa !=nil {return _dfa ;};_be =_fc +"\u002e\u0070\u0066\u0062";};}else if _aab .FontFile2 !=nil {if _ffa ,_aca :=_bgf .GetStream (_aab .FontFile2 );_aca {_ec ,_dfa =_bgf .DecodeStream (_ffa );if _dfa !=nil {return _dfa ;
};_be =_fc +"\u002e\u0074\u0074\u0066";};}else if _aab .FontFile3 !=nil {if _ddd ,_dfg :=_bgf .GetStream (_aab .FontFile3 );_dfg {_ec ,_dfa =_bgf .DecodeStream (_ddd );if _dfa !=nil {return _dfa ;};_be =_fc +"\u002e\u0063\u0066\u0066";};};if len (_be )< 1{_bc .Log .Debug (_cf );
};_acf :=Font {FontName :_fc ,PdfFont :_cbg ,IsCID :_cbg .IsCID (),IsSimple :_cbg .IsSimple (),ToUnicode :_gde ,FontType :_ae ,FontData :_ec ,FontFileName :_be ,FontDescriptor :_aab };_gd .Fonts =append (_gd .Fonts ,_acf );};return nil ;};

// Marks returns the TextMark collection for a page. It represents all the text on the page.
func (_gfd PageText )Marks ()*TextMarkArray {return &TextMarkArray {_egfb :_gfd ._gfg }};func (_eegf rulingList )primaries ()[]float64 {_degd :=make (map[float64 ]struct{},len (_eegf ));for _ ,_eccb :=range _eegf {_degd [_eccb ._cbag ]=struct{}{};};_dgaee :=make ([]float64 ,len (_degd ));
_eeec :=0;for _fgag :=range _degd {_dgaee [_eeec ]=_fgag ;_eeec ++;};_d .Float64s (_dgaee );return _dgaee ;};func (_agga *shapesState )lastpointEstablished ()(_ee .Point ,bool ){if _agga ._ggcge {return _agga ._aadf ,false ;};_afcg :=len (_agga ._gfed );
if _afcg > 0&&_agga ._gfed [_afcg -1]._fbaf {return _agga ._gfed [_afcg -1].last (),false ;};return _ee .Point {},true ;};func (_bdeeb *shapesState )establishSubpath ()*subpath {_cfbf ,_abdb :=_bdeeb .lastpointEstablished ();if !_abdb {_bdeeb ._gfed =append (_bdeeb ._gfed ,_gacd (_cfbf ));
};if len (_bdeeb ._gfed )==0{return nil ;};_bdeeb ._ggcge =false ;return _bdeeb ._gfed [len (_bdeeb ._gfed )-1];};func (_cead *textObject )getFontDirect (_adc string )(*_e .PdfFont ,error ){_ecba ,_adb :=_cead .getFontDict (_adc );if _adb !=nil {return nil ,_adb ;
};_dcg ,_adb :=_e .NewPdfFontFromPdfObject (_ecba );if _adb !=nil {_bc .Log .Debug ("\u0067\u0065\u0074\u0046\u006f\u006e\u0074\u0044\u0069\u0072\u0065\u0063\u0074\u003a\u0020\u004e\u0065\u0077Pd\u0066F\u006f\u006e\u0074\u0046\u0072\u006f\u006d\u0050\u0064\u0066\u004f\u0062j\u0065\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u006e\u0061\u006d\u0065\u003d%\u0023\u0071\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_adc ,_adb );
};return _dcg ,_adb ;};func (_eedf *textLine )pullWord (_dcfdc *wordBag ,_dbbfg *textWord ,_ebgbf int ){_eedf .appendWord (_dbbfg );_dcfdc .removeWord (_dbbfg ,_ebgbf );};type lists []*list ;func (_bafd paraList )reorder (_gdgc []int ){_gebae :=make (paraList ,len (_bafd ));
for _agcgg ,_fcdg :=range _gdgc {_gebae [_agcgg ]=_bafd [_fcdg ];};copy (_bafd ,_gebae );};func (_ddgc rulingList )toGrids ()[]rulingList {if _dcdg {_bc .Log .Info ("t\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0025\u0073",_ddgc );};_eaad :=_ddgc .intersections ();
if _dcdg {_bc .Log .Info ("\u0074\u006f\u0047r\u0069\u0064\u0073\u003a \u0076\u0065\u0063\u0073\u003d\u0025\u0064 \u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003d\u0025\u0064\u0020",len (_ddgc ),len (_eaad ));for _ ,_cdbe :=range _cgdff (_eaad ){_db .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_cdbe ,_eaad [_cdbe ]);
};};_ggadf :=make (map[int ]intSet ,len (_ddgc ));for _efddf :=range _ddgc {_eddg :=_ddgc .connections (_eaad ,_efddf );if len (_eddg )> 0{_ggadf [_efddf ]=_eddg ;};};if _dcdg {_bc .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0063\u006fn\u006e\u0065\u0063\u0074s=\u0025\u0064",len (_ggadf ));
for _ ,_fggad :=range _cgdff (_ggadf ){_db .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_fggad ,_ggadf [_fggad ]);};};_bedbf :=_bbae (len (_ddgc ),func (_fcba ,_bdad int )bool {_ebdd ,_fgdc :=len (_ggadf [_fcba ]),len (_ggadf [_bdad ]);if _ebdd !=_fgdc {return _ebdd > _fgdc ;
};return _ddgc .comp (_fcba ,_bdad );});if _dcdg {_bc .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u006f\u0072d\u0065\u0072\u0069\u006eg=\u0025\u0076",_bedbf );};_fdeac :=[][]int {{_bedbf [0]}};_bcbf :for _ ,_bfdbad :=range _bedbf [1:]{for _fcfg ,_bffg :=range _fdeac {for _ ,_eabad :=range _bffg {if _ggadf [_eabad ].has (_bfdbad ){_fdeac [_fcfg ]=append (_bffg ,_bfdbad );
continue _bcbf ;};};};_fdeac =append (_fdeac ,[]int {_bfdbad });};if _dcdg {_bc .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020i\u0067\u0072i\u0064\u0073\u003d\u0025\u0076",_fdeac );};_d .SliceStable (_fdeac ,func (_bggg ,_cfcce int )bool {return len (_fdeac [_bggg ])> len (_fdeac [_cfcce ])});
for _ ,_dcaaa :=range _fdeac {_d .Slice (_dcaaa ,func (_cgda ,_cabda int )bool {return _ddgc .comp (_dcaaa [_cgda ],_dcaaa [_cabda ])});};_fadef :=make ([]rulingList ,len (_fdeac ));for _dgfb ,_gdbgg :=range _fdeac {_fgdbc :=make (rulingList ,len (_gdbgg ));
for _dcegee ,_ffgbf :=range _gdbgg {_fgdbc [_dcegee ]=_ddgc [_ffgbf ];};_fadef [_dgfb ]=_fgdbc ;};if _dcdg {_bc .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020g\u0072\u0069d\u0073\u003d\u0025\u002b\u0076",_fadef );};var _eadd []rulingList ;for _ ,_dcgee :=range _fadef {if _eafee ,_badde :=_dcgee .isActualGrid ();
_badde {_dcgee =_eafee ;_dcgee =_dcgee .snapToGroups ();_eadd =append (_eadd ,_dcgee );};};if _dcdg {_agcgbc ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0061\u0063t\u0075\u0061\u006c\u0047ri\u0064\u0073",_eadd );_bc .Log .Info ("\u0074\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0067\u0072\u0069\u0064\u0073\u003d%\u0064 \u0061\u0063\u0074\u0075\u0061\u006c\u0047\u0072\u0069\u0064\u0073\u003d\u0025\u0064",len (_fadef ),len (_eadd ));
};return _eadd ;};type bounded interface{bbox ()_e .PdfRectangle };func _dbef (_bcga ,_bdeec _e .PdfRectangle )_e .PdfRectangle {return _e .PdfRectangle {Llx :_bg .Min (_bcga .Llx ,_bdeec .Llx ),Lly :_bg .Min (_bcga .Lly ,_bdeec .Lly ),Urx :_bg .Max (_bcga .Urx ,_bdeec .Urx ),Ury :_bg .Max (_bcga .Ury ,_bdeec .Ury )};
};func (_gdaa *subpath )close (){if !_aebab (_gdaa ._gcfd [0],_gdaa .last ()){_gdaa .add (_gdaa ._gcfd [0]);};_gdaa ._fbaf =true ;_gdaa .removeDuplicates ();};func (_gebe *wordBag )minDepth ()float64 {return _gebe ._gdca -(_gebe .Ury -_gebe ._dgbf )};func (_dgce rulingList )sort (){_d .Slice (_dgce ,_dgce .comp )};


// String returns a string describing `tm`.
func (_dccd TextMark )String ()string {_acbb :=_dccd .BBox ;var _dfag string ;if _dccd .Font !=nil {_dfag =_dccd .Font .String ();if len (_dfag )> 50{_dfag =_dfag [:50]+"\u002e\u002e\u002e";};};var _gbbec string ;if _dccd .Meta {_gbbec ="\u0020\u002a\u004d\u002a";
};return _db .Sprintf ("\u007b\u0054\u0065\u0078t\u004d\u0061\u0072\u006b\u003a\u0020\u0025\u0064\u0020%\u0071\u003d\u0025\u0030\u0032\u0078\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e2\u0066\u0029\u0020\u0028\u00256\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0025\u0073\u007d",_dccd .Offset ,_dccd .Text ,[]rune (_dccd .Text ),_acbb .Llx ,_acbb .Lly ,_acbb .Urx ,_acbb .Ury ,_dfag ,_gbbec );
};func (_gcabb *ruling )encloses (_fdca ,_gbbc float64 )bool {return _gcabb ._eagf -_ddae <=_fdca &&_gbbc <=_gcabb ._adgg +_ddae ;};func _dgeg (_cddb *textWord ,_dfceg float64 ,_ccadf ,_bdga rulingList )*wordBag {_ddac :=_fgbf (_cddb ._gbgab );_aecg :=[]*textWord {_cddb };
_bebc :=wordBag {_fdc :map[int ][]*textWord {_ddac :_aecg },PdfRectangle :_cddb .PdfRectangle ,_dgbf :_cddb ._cfccf ,_gdca :_dfceg ,_cefg :_ccadf ,_ecga :_bdga };return &_bebc ;};

// TableInfo gets table information of the textmark `tm`.
func (_ecee *TextMark )TableInfo ()(*TextTable ,[][]int ){if !_ecee ._baeb {return nil ,nil ;};_aef :=_ecee ._dabf ;_dead :=_aef .getCellInfo (*_ecee );return _aef ,_dead ;};

// ApplyArea processes the page text only within the specified area `bbox`.
// Each time ApplyArea is called, it updates the result set in `pt`.
// Can be called multiple times in a row with different bounding boxes.
func (_efg *PageText )ApplyArea (bbox _e .PdfRectangle ){_ccbd :=make ([]*textMark ,0,len (_efg ._cbcc ));for _ ,_gdcc :=range _efg ._cbcc {if _bdeg (_gdcc .bbox (),bbox ){_ccbd =append (_ccbd ,_gdcc );};};var _gcfb paraList ;_beff :=len (_ccbd );for _fdea :=0;
_fdea < 360&&_beff > 0;_fdea +=90{_eae :=make ([]*textMark ,0,len (_ccbd )-_beff );for _ ,_bcca :=range _ccbd {if _bcca ._ccbec ==_fdea {_eae =append (_eae ,_bcca );};};if len (_eae )> 0{_agbd :=_gaff (_eae ,_efg ._acbf ,nil ,nil ,_efg ._caec ._ddb );_gcfb =append (_gcfb ,_agbd ...);
_beff -=len (_eae );};};_aggc :=new (_g .Buffer );_gcfb .writeText (_aggc );_efg ._ffaf =_aggc .String ();_efg ._gfg =_gcfb .toTextMarks ();_efg ._beda =_gcfb .tables ();};func (_eebdb *shapesState )lineTo (_fcaa ,_bgcc float64 ){if _bcfdb {_bc .Log .Info ("\u006c\u0069\u006eeT\u006f\u0028\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0070\u003d\u0025\u002e\u0032\u0066",_fcaa ,_bgcc ,_eebdb .devicePoint (_fcaa ,_bgcc ));
};_eebdb .addPoint (_fcaa ,_bgcc );};

// Text gets the extracted text contained in `l`.
func (_aeae *list )Text ()string {_aadg :=&_ce .Builder {};_gdfc :="";_bfea (_aeae ,_aadg ,&_gdfc );return _aadg .String ();};var _ebdg *_ad .Regexp =_ad .MustCompile (_eda +"\u007c"+_dcaa );var (_df =_c .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");
_de =_c .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););

// String returns a description of `state`.
func (_bcg *textState )String ()string {_gff :="\u005bN\u004f\u0054\u0020\u0053\u0045\u0054]";if _bcg ._fgbg !=nil {_gff =_bcg ._fgbg .BaseFont ();};return _db .Sprintf ("\u0074\u0063\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0077\u003d\u0025\u002e\u0032\u0066 \u0074f\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u003d\u0025\u0071",_bcg ._fbg ,_bcg ._bgfba ,_bcg ._cbbb ,_gff );
};func (_dcad *ruling )alignsSec (_fbeecc *ruling )bool {const _badded =_fddg +1.0;return _dcad ._eagf -_badded <=_fbeecc ._adgg &&_fbeecc ._eagf -_badded <=_dcad ._adgg ;};

// String returns a description of `tm`.
func (_adcae *textMark )String ()string {return _db .Sprintf ("\u0025\u002e\u0032f \u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\u0022\u0025\u0073\u0022",_adcae .PdfRectangle ,_adcae ._ddgdb ,_adcae ._adag );};func (_gbag *textPara )fontsize ()float64 {return _gbag ._gcbc [0]._gebg };
func (_fgcad paraList )merge ()*textPara {_bc .Log .Trace ("\u006d\u0065\u0072\u0067\u0065:\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_fgcad ));
if len (_fgcad )==0{return nil ;};_fgcad .sortReadingOrder ();_eegec :=_fgcad [0].PdfRectangle ;_bcbc :=_fgcad [0]._gcbc ;for _ ,_dffb :=range _fgcad [1:]{_eegec =_dbef (_eegec ,_dffb .PdfRectangle );_bcbc =append (_bcbc ,_dffb ._gcbc ...);};return _caba (_eegec ,_bcbc );
};func (_ceef lineRuling )xMean ()float64 {return 0.5*(_ceef ._badd .X +_ceef ._becc .X )};var (_cbcef =map[rune ]string {0x0060:"\u0300",0x02CB:"\u0300",0x0027:"\u0301",0x00B4:"\u0301",0x02B9:"\u0301",0x02CA:"\u0301",0x005E:"\u0302",0x02C6:"\u0302",0x007E:"\u0303",0x02DC:"\u0303",0x00AF:"\u0304",0x02C9:"\u0304",0x02D8:"\u0306",0x02D9:"\u0307",0x00A8:"\u0308",0x00B0:"\u030a",0x02DA:"\u030a",0x02BA:"\u030b",0x02DD:"\u030b",0x02C7:"\u030c",0x02C8:"\u030d",0x0022:"\u030e",0x02BB:"\u0312",0x02BC:"\u0313",0x0486:"\u0313",0x055A:"\u0313",0x02BD:"\u0314",0x0485:"\u0314",0x0559:"\u0314",0x02D4:"\u031d",0x02D5:"\u031e",0x02D6:"\u031f",0x02D7:"\u0320",0x02B2:"\u0321",0x00B8:"\u0327",0x02CC:"\u0329",0x02B7:"\u032b",0x02CD:"\u0331",0x005F:"\u0332",0x204E:"\u0359"};
);func (_bgafe *textPara )text ()string {_efc :=new (_g .Buffer );_bgafe .writeText (_efc );return _efc .String ();};func _ddgd (_cdee []structElement ,_ffdb map[int ][]*textLine ,_fgcf _bgf .PdfObject )[]*list {_aceb :=[]*list {};for _ ,_ffbab :=range _cdee {_gaab :=_ffbab ._aeaaf ;
_aaad :=int (_ffbab ._gaf );_ecdfc :=_ffbab ._cdaf ;_ebad :=[]*textLine {};_cegde :=[]*list {};_fadae :=_ffbab ._bfbgf ;_fggd ,_gafc :=(_fadae .(*_bgf .PdfObjectReference ));if !_gafc {_bc .Log .Debug ("\u0066\u0061\u0069l\u0065\u0064\u0020\u006f\u0074\u0020\u0063\u0061\u0073\u0074\u0020\u0074\u006f\u0020\u002a\u0063\u006f\u0072\u0065\u002e\u0050\u0064\u0066\u004f\u0062\u006a\u0065\u0063\u0074R\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");
};if _aaad !=-1&&_fggd !=nil {if _gdfg ,_ffaaf :=_ffdb [_aaad ];_ffaaf {if _gebgg ,_fefd :=_fgcf .(*_bgf .PdfIndirectObject );_fefd {_eeab :=_gebgg .PdfObjectReference ;if _bb .DeepEqual (*_fggd ,_eeab ){_ebad =_gdfg ;};};};};if _gaab !=nil {_cegde =_ddgd (_gaab ,_ffdb ,_fgcf );
};_bebca :=_dfgcg (_ebad ,_ecdfc ,_cegde );_aceb =append (_aceb ,_bebca );};return _aceb ;};func _fgbf (_ebgf float64 )int {var _gebcf int ;if _ebgf >=0{_gebcf =int (_ebgf /_afdb );}else {_gebcf =int (_ebgf /_afdb )-1;};return _gebcf ;};func (_gece *wordBag )arrangeText ()*textPara {_gece .sort ();
if _afgf {_gece .removeDuplicates ();};var _bdegg []*textLine ;for _ ,_aeffc :=range _gece .depthIndexes (){for !_gece .empty (_aeffc ){_bgba :=_gece .firstReadingIndex (_aeffc );_dafa :=_gece .firstWord (_bgba );_fdef :=_dfga (_gece ,_bgba );_bfdcf :=_dafa ._cfccf ;
_bfeg :=_dafa ._gbgab -_ggdc *_bfdcf ;_cfgc :=_dafa ._gbgab +_ggdc *_bfdcf ;_fdfa :=_gfeda *_bfdcf ;_fdaf :=_faaa *_bfdcf ;_ffac :for {var _becf *textWord ;_acfcd :=0;for _ ,_gef :=range _gece .depthBand (_bfeg ,_cfgc ){_dgec :=_gece .highestWord (_gef ,_bfeg ,_cfgc );
if _dgec ==nil {continue ;};_cbgdg :=_bgdbb (_dgec ,_fdef ._gdg [len (_fdef ._gdg )-1]);if _cbgdg < -_fdaf {break _ffac ;};if _cbgdg > _fdfa {continue ;};if _becf !=nil &&_edbb (_dgec ,_becf )>=0{continue ;};_becf =_dgec ;_acfcd =_gef ;};if _becf ==nil {break ;
};_fdef .pullWord (_gece ,_becf ,_acfcd );};_fdef .markWordBoundaries ();_bdegg =append (_bdegg ,_fdef );};};if len (_bdegg )==0{return nil ;};_d .Slice (_bdegg ,func (_gfaa ,_fff int )bool {return _ebfg (_bdegg [_gfaa ],_bdegg [_fff ])< 0});_gdedg :=_caba (_gece .PdfRectangle ,_bdegg );
if _gccaf {_bc .Log .Info ("\u0061\u0072\u0072an\u0067\u0065\u0054\u0065\u0078\u0074\u0020\u0021\u0021\u0021\u0020\u0070\u0061\u0072\u0061\u003d\u0025\u0073",_gdedg .String ());if _cdgg {for _cbfec ,_aecda :=range _gdedg ._gcbc {_db .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cbfec ,_aecda .String ());
if _gfcf {for _bcafb ,_aeeg :=range _aecda ._gdg {_db .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_bcafb ,_aeeg .String ());for _cafde ,_dceg :=range _aeeg ._ggegd {_db .Printf ("\u00251\u0032\u0064\u003a\u0020\u0025\u0073\n",_cafde ,_dceg .String ());
};};};};};};return _gdedg ;};

// String returns a string descibing `i`.
func (_addbc gridTile )String ()string {_acgea :=func (_afafd bool ,_bcgc string )string {if _afafd {return _bcgc ;};return "\u005f";};return _db .Sprintf ("\u00256\u002e2\u0066\u0020\u0025\u0031\u0073%\u0031\u0073%\u0031\u0073\u0025\u0031\u0073",_addbc .PdfRectangle ,_acgea (_addbc ._agab ,"\u004c"),_acgea (_addbc ._edbag ,"\u0052"),_acgea (_addbc ._ddab ,"\u0042"),_acgea (_addbc ._bfefb ,"\u0054"));
};type shapesState struct{_bfcf _ee .Matrix ;_agcg _ee .Matrix ;_gfed []*subpath ;_ggcge bool ;_aadf _ee .Point ;_bgdd *textObject ;};

// Options extractor options.
type Options struct{

// DisableDocumentTags specifies whether to use the document tags during list extraction.
DisableDocumentTags bool ;

// ApplyCropBox will extract page text based on page cropbox if set to `true`.
ApplyCropBox bool ;

// UseSimplerExtractionProcess will skip topological text ordering and table processing.
//
// NOTE: While normally the extra processing is beneficial, it can also lead to problems when it does not work.
// Thus it is a flag to allow the user to control this process.
//
// Skipping some extraction processes would also lead to the reduced processing time.
UseSimplerExtractionProcess bool ;};func (_fffb *textTable )logComposite (_edff string ){if !_edeg {return ;};_bc .Log .Info ("\u007e~\u007eP\u0061\u0072\u0061\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_fffb ._afde ,_fffb ._gaafe ,_edff );
_db .Printf ("\u0025\u0035\u0073 \u007c","");for _dgag :=0;_dgag < _fffb ._afde ;_dgag ++{_db .Printf ("\u0025\u0033\u0064 \u007c",_dgag );};_db .Println ("");_db .Printf ("\u0025\u0035\u0073 \u002b","");for _gfefg :=0;_gfefg < _fffb ._afde ;_gfefg ++{_db .Printf ("\u0025\u0033\u0073 \u002b","\u002d\u002d\u002d");
};_db .Println ("");for _geeg :=0;_geeg < _fffb ._gaafe ;_geeg ++{_db .Printf ("\u0025\u0035\u0064 \u007c",_geeg );for _aaefa :=0;_aaefa < _fffb ._afde ;_aaefa ++{_cffd ,_ :=_fffb ._abaeg [_gcaf (_aaefa ,_geeg )].parasBBox ();_db .Printf ("\u0025\u0033\u0064 \u007c",len (_cffd ));
};_db .Println ("");};_bc .Log .Info ("\u007e~\u007eT\u0065\u0078\u0074\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_fffb ._afde ,_fffb ._gaafe ,_edff );_db .Printf ("\u0025\u0035\u0073 \u007c","");for _dfdbf :=0;_dfdbf < _fffb ._afde ;_dfdbf ++{_db .Printf ("\u0025\u0031\u0032\u0064\u0020\u007c",_dfdbf );
};_db .Println ("");_db .Printf ("\u0025\u0035\u0073 \u002b","");for _fbbc :=0;_fbbc < _fffb ._afde ;_fbbc ++{_db .Print ("\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d-\u002d\u002d\u002d\u002b");};_db .Println ("");for _afbc :=0;_afbc < _fffb ._gaafe ;
_afbc ++{_db .Printf ("\u0025\u0035\u0064 \u007c",_afbc );for _gfegg :=0;_gfegg < _fffb ._afde ;_gfegg ++{_bdgdd ,_ :=_fffb ._abaeg [_gcaf (_gfegg ,_afbc )].parasBBox ();_ccfb :="";_ccef :=_bdgdd .merge ();if _ccef !=nil {_ccfb =_ccef .text ();};_ccfb =_db .Sprintf ("\u0025\u0071",_agag (_ccfb ,12));
_ccfb =_ccfb [1:len (_ccfb )-1];_db .Printf ("\u0025\u0031\u0032\u0073\u0020\u007c",_ccfb );};_db .Println ("");};};

// TextMark represents extracted text on a page with information regarding both textual content,
// formatting (font and size) and positioning.
// It is the smallest unit of text on a PDF page, typically a single character.
//
// getBBox() in test_text.go shows how to compute bounding boxes of substrings of extracted text.
// The following code extracts the text on PDF page `page` into `text` then finds the bounding box
// `bbox` of substring `term` in `text`.
//
//	ex, _ := New(page)
//	// handle errors
//	pageText, _, _, err := ex.ExtractPageText()
//	// handle errors
//	text := pageText.Text()
//	textMarks := pageText.Marks()
//
//		start := strings.Index(text, term)
//	 end := start + len(term)
//	 spanMarks, err := textMarks.RangeOffset(start, end)
//	 // handle errors
//	 bbox, ok := spanMarks.BBox()
//	 // handle errors
type TextMark struct{

// Text is the extracted text.
Text string ;

// Original is the text in the PDF. It has not been decoded like `Text`.
Original string ;

// BBox is the bounding box of the text.
BBox _e .PdfRectangle ;

// Font is the font the text was drawn with.
Font *_e .PdfFont ;

// FontSize is the font size the text was drawn with.
FontSize float64 ;

// Offset is the offset of the start of TextMark.Text in the extracted text. If you do this
//   text, textMarks := pageText.Text(), pageText.Marks()
//   marks := textMarks.Elements()
// then marks[i].Offset is the offset of marks[i].Text in text.
Offset int ;

// Meta is set true for spaces and line breaks that we insert in the extracted text. We insert
// spaces (line breaks) when we see characters that are over a threshold horizontal (vertical)
//  distance  apart. See wordJoiner (lineJoiner) in PageText.computeViews().
Meta bool ;

// FillColor is the fill color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
FillColor _dg .Color ;

// StrokeColor is the stroke color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
StrokeColor _dg .Color ;

// Orientation is the text orientation
Orientation int ;

// DirectObject is the underlying PdfObject (Text Object) that represents the visible texts. This is introduced to get
// a simple access to the TextObject in case editing or replacment of some text is needed. E.g during redaction.
DirectObject _bgf .PdfObject ;

// ObjString is a decoded string operand of a text-showing operator. It has the same value as `Text` attribute except
// when many glyphs are represented with the same Text Object that contains multiple length string operand in which case
// ObjString spans more than one character string that falls in different TextMark objects.
ObjString []string ;Tw float64 ;Th float64 ;Tc float64 ;Index int ;_baeb bool ;_dabf *TextTable ;};

// ExtractTextWithStats works like ExtractText but returns the number of characters in the output
// (`numChars`) and the number of characters that were not decoded (`numMisses`).
func (_ecgb *Extractor )ExtractTextWithStats ()(_bbf string ,_aeb int ,_bff int ,_edc error ){_aaec ,_aeb ,_bff ,_edc :=_ecgb .ExtractPageText ();if _edc !=nil {return "",_aeb ,_bff ,_edc ;};return _aaec .Text (),_aeb ,_bff ,nil ;};func _caba (_eaab _e .PdfRectangle ,_ffbag []*textLine )*textPara {return &textPara {PdfRectangle :_eaab ,_gcbc :_ffbag };
};func _cgbg (_dggcg string )(string ,bool ){_bgfbeg :=[]rune (_dggcg );if len (_bgfbeg )!=1{return "",false ;};_daddff ,_faef :=_cbcef [_bgfbeg [0]];return _daddff ,_faef ;};

// String returns a description of `k`.
func (_dgaef rulingKind )String ()string {_dgge ,_dafab :=_ffbc [_dgaef ];if !_dafab {return _db .Sprintf ("\u004e\u006ft\u0020\u0061\u0020r\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_dgaef );};return _dgge ;};func (_def *shapesState )addPoint (_gaagd ,_aafbf float64 ){_afbd :=_def .establishSubpath ();
_dgga :=_def .devicePoint (_gaagd ,_aafbf );if _afbd ==nil {_def ._ggcge =true ;_def ._aadf =_dgga ;}else {_afbd .add (_dgga );};};

// String returns a description of `t`.
func (_dbed *textTable )String ()string {return _db .Sprintf ("\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0025\u0074",_dbed ._afde ,_dbed ._gaafe ,_dbed ._ffdbb );};func _fbee (_eagc ,_agcgb _ee .Point )rulingKind {_acbg :=_bg .Abs (_eagc .X -_agcgb .X );
_bfefd :=_bg .Abs (_eagc .Y -_agcgb .Y );return _gccb (_acbg ,_bfefd ,_ebgb );};func (_dfabb compositeCell )parasBBox ()(paraList ,_e .PdfRectangle ){return _dfabb .paraList ,_dfabb .PdfRectangle ;};func (_bfbg *shapesState )devicePoint (_eefb ,_gdbb float64 )_ee .Point {_cdf :=_bfbg ._agcg .Mult (_bfbg ._bfcf );
_eefb ,_gdbb =_cdf .Transform (_eefb ,_gdbb );return _ee .NewPoint (_eefb ,_gdbb );};func (_aaada intSet )has (_acgbb int )bool {_ ,_afgba :=_aaada [_acgbb ];return _afgba };func (_facf rulingList )sortStrict (){_d .Slice (_facf ,func (_bgbae ,_aaffc int )bool {_bebd ,_dfgbb :=_facf [_bgbae ],_facf [_aaffc ];
_bcbeb ,_dfeba :=_bebd ._ffada ,_dfgbb ._ffada ;if _bcbeb !=_dfeba {return _bcbeb > _dfeba ;};_bfeb ,_daga :=_bebd ._cbag ,_dfgbb ._cbag ;if !_ffagb (_bfeb -_daga ){return _bfeb < _daga ;};_bfeb ,_daga =_bebd ._eagf ,_dfgbb ._eagf ;if _bfeb !=_daga {return _bfeb < _daga ;
};return _bebd ._adgg < _dfgbb ._adgg ;});};func (_cfa *textObject )getFont (_fge string )(*_e .PdfFont ,error ){if _cfa ._faf ._fe !=nil {_cfg ,_efed :=_cfa .getFontDict (_fge );if _efed !=nil {_bc .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0067\u0065\u0074\u0046\u006f\u006e\u0074:\u0020n\u0061m\u0065=\u0025\u0073\u002c\u0020\u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0073",_fge ,_efed .Error ());
return nil ,_efed ;};_cfa ._faf ._cc ++;_dfbf ,_fdd :=_cfa ._faf ._fe [_cfg .String ()];if _fdd {_dfbf ._acac =_cfa ._faf ._cc ;return _dfbf ._ecfa ,nil ;};};_cfga ,_edef :=_cfa .getFontDict (_fge );if _edef !=nil {return nil ,_edef ;};_edbc ,_edef :=_cfa .getFontDirect (_fge );
if _edef !=nil {return nil ,_edef ;};if _cfa ._faf ._fe !=nil {_ffg :=fontEntry {_edbc ,_cfa ._faf ._cc };if len (_cfa ._faf ._fe )>=_ceab {var _agba []string ;for _caf :=range _cfa ._faf ._fe {_agba =append (_agba ,_caf );};_d .Slice (_agba ,func (_cdgf ,_bcead int )bool {return _cfa ._faf ._fe [_agba [_cdgf ]]._acac < _cfa ._faf ._fe [_agba [_bcead ]]._acac ;
});delete (_cfa ._faf ._fe ,_agba [0]);};_cfa ._faf ._fe [_cfga .String ()]=_ffg ;};return _edbc ,nil ;};func (_fbeecf *ruling )alignsPrimary (_cdcfc *ruling )bool {return _fbeecf ._ffada ==_cdcfc ._ffada &&_bg .Abs (_fbeecf ._cbag -_cdcfc ._cbag )< _fddg *0.5;
};func (_bfaa *wordBag )absorb (_egff *wordBag ){_caca :=_egff .makeRemovals ();for _cabf ,_bbeb :=range _egff ._fdc {for _ ,_dgdd :=range _bbeb {_bfaa .pullWord (_dgdd ,_cabf ,_caca );};};_egff .applyRemovals (_caca );};func (_aedae rulingList )primMinMax ()(float64 ,float64 ){_edbf ,_beca :=_aedae [0]._cbag ,_aedae [0]._cbag ;
for _ ,_bceg :=range _aedae [1:]{if _bceg ._cbag < _edbf {_edbf =_bceg ._cbag ;}else if _bceg ._cbag > _beca {_beca =_bceg ._cbag ;};};return _edbf ,_beca ;};type rectRuling struct{_dage rulingKind ;_afgg markKind ;_dg .Color ;_e .PdfRectangle ;};func (_becd *subpath )makeRectRuling (_gefc _dg .Color )(*ruling ,bool ){if _effb {_bc .Log .Info ("\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0070\u0061\u0074\u0068\u003d\u0025\u0076",_becd );
};_bgfg :=_becd ._gcfd [:4];_fbabd :=make (map[int ]rulingKind ,len (_bgfg ));for _aeeb ,_egac :=range _bgfg {_gdcab :=_becd ._gcfd [(_aeeb +1)%4];_fbabd [_aeeb ]=_egbee (_egac ,_gdcab );if _effb {_db .Printf ("\u0025\u0034\u0064: \u0025\u0073\u0020\u003d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066",_aeeb ,_fbabd [_aeeb ],_egac ,_gdcab );
};};if _effb {_db .Printf ("\u0020\u0020\u0020\u006b\u0069\u006e\u0064\u0073\u003d\u0025\u002b\u0076\u000a",_fbabd );};var _ffbf ,_cbded []int ;for _eaeb ,_fbff :=range _fbabd {switch _fbff {case _cgfba :_cbded =append (_cbded ,_eaeb );case _dfdb :_ffbf =append (_ffbf ,_eaeb );
};};if _effb {_db .Printf ("\u0020\u0020 \u0068\u006f\u0072z\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_cbded ),_cbded );_db .Printf ("\u0020\u0020 \u0076\u0065\u0072t\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_ffbf ),_ffbf );
};_ebda :=(len (_cbded )==2&&len (_ffbf )==2)||(len (_cbded )==2&&len (_ffbf )==0&&_gffb (_bgfg [_cbded [0]],_bgfg [_cbded [1]]))||(len (_ffbf )==2&&len (_cbded )==0&&_acee (_bgfg [_ffbf [0]],_bgfg [_ffbf [1]]));if _effb {_db .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_cbded ),len (_ffbf ),_ebda );
};if !_ebda {if _effb {_bc .Log .Error ("\u0021!\u006d\u0061\u006b\u0065R\u0065\u0063\u0074\u0052\u0075l\u0069n\u0067:\u0020\u0070\u0061\u0074\u0068\u003d\u0025v",_becd );_db .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_cbded ),len (_ffbf ),_ebda );
};return &ruling {},false ;};if len (_ffbf )==0{for _bcfeb ,_gecea :=range _fbabd {if _gecea !=_cgfba {_ffbf =append (_ffbf ,_bcfeb );};};};if len (_cbded )==0{for _fgbcb ,_bacg :=range _fbabd {if _bacg !=_dfdb {_cbded =append (_cbded ,_fgbcb );};};};if _effb {_bc .Log .Info ("\u006da\u006b\u0065R\u0065\u0063\u0074\u0052u\u006c\u0069\u006eg\u003a\u0020\u0068\u006f\u0072\u007a\u0073\u003d\u0025d \u0076\u0065\u0072t\u0073\u003d%\u0064\u0020\u0070\u006f\u0069\u006et\u0073\u003d%\u0064\u000a"+"\u0009\u0020\u0068o\u0072\u007a\u0073\u003d\u0025\u002b\u0076\u000a"+"\u0009\u0020\u0076e\u0072\u0074\u0073\u003d\u0025\u002b\u0076\u000a"+"\t\u0070\u006f\u0069\u006e\u0074\u0073\u003d\u0025\u002b\u0076",len (_cbded ),len (_ffbf ),len (_bgfg ),_cbded ,_ffbf ,_bgfg );
};var _baab ,_fbcfb ,_bggc ,_ddaa _ee .Point ;if _bgfg [_cbded [0]].Y > _bgfg [_cbded [1]].Y {_bggc ,_ddaa =_bgfg [_cbded [0]],_bgfg [_cbded [1]];}else {_bggc ,_ddaa =_bgfg [_cbded [1]],_bgfg [_cbded [0]];};if _bgfg [_ffbf [0]].X > _bgfg [_ffbf [1]].X {_baab ,_fbcfb =_bgfg [_ffbf [0]],_bgfg [_ffbf [1]];
}else {_baab ,_fbcfb =_bgfg [_ffbf [1]],_bgfg [_ffbf [0]];};_ccfda :=_e .PdfRectangle {Llx :_baab .X ,Urx :_fbcfb .X ,Lly :_ddaa .Y ,Ury :_bggc .Y };if _ccfda .Llx > _ccfda .Urx {_ccfda .Llx ,_ccfda .Urx =_ccfda .Urx ,_ccfda .Llx ;};if _ccfda .Lly > _ccfda .Ury {_ccfda .Lly ,_ccfda .Ury =_ccfda .Ury ,_ccfda .Lly ;
};_ggabf :=rectRuling {PdfRectangle :_ccfda ,_dage :_gafbf (_ccfda ),Color :_gefc };if _ggabf ._dage ==_deee {if _effb {_bc .Log .Error ("\u006da\u006b\u0065\u0052\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006eg\u003a\u0020\u006b\u0069\u006e\u0064\u003d\u006e\u0069\u006c");
};return nil ,false ;};_bccagf ,_eegac :=_ggabf .asRuling ();if !_eegac {if _effb {_bc .Log .Error ("\u006da\u006b\u0065\u0052\u0065c\u0074\u0052\u0075\u006c\u0069n\u0067:\u0020!\u0069\u0073\u0052\u0075\u006c\u0069\u006eg");};return nil ,false ;};if _dcdg {_db .Printf ("\u0020\u0020\u0020\u0072\u003d\u0025\u0073\u000a",_bccagf .String ());
};return _bccagf ,true ;};func _fabb (_agbc []*textMark ,_geecg _e .PdfRectangle )[]*textWord {var _ecfg []*textWord ;var _bgbd *textWord ;if _aeaa {_bc .Log .Info ("\u006d\u0061\u006beT\u0065\u0078\u0074\u0057\u006f\u0072\u0064\u0073\u003a\u0020\u0025\u0064\u0020\u006d\u0061\u0072\u006b\u0073",len (_agbc ));
};_gfcd :=func (){if _bgbd !=nil {_dcfge :=_bgbd .computeText ();if !_fdbdd (_dcfge ){_bgbd ._dgeda =_dcfge ;_ecfg =append (_ecfg ,_bgbd );if _aeaa {_bc .Log .Info ("\u0061\u0064\u0064Ne\u0077\u0057\u006f\u0072\u0064\u003a\u0020\u0025\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",len (_ecfg )-1,_bgbd .String ());
for _babb ,_aebfe :=range _bgbd ._ggegd {_db .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_babb ,_aebfe .String ());};};};_bgbd =nil ;};};for _ ,_gdae :=range _agbc {if _aaff &&_bgbd !=nil &&len (_bgbd ._ggegd )> 0{_aabc :=_bgbd ._ggegd [len (_bgbd ._ggegd )-1];
_eegge ,_dbcabf :=_cgbg (_gdae ._adag );_bdcdb ,_fabca :=_cgbg (_aabc ._adag );if _dbcabf &&!_fabca &&_aabc .inDiacriticArea (_gdae ){_bgbd .addDiacritic (_eegge );continue ;};if _fabca &&!_dbcabf &&_gdae .inDiacriticArea (_aabc ){_bgbd ._ggegd =_bgbd ._ggegd [:len (_bgbd ._ggegd )-1];
_bgbd .appendMark (_gdae ,_geecg );_bgbd .addDiacritic (_bdcdb );continue ;};};_ecfcc :=_fdbdd (_gdae ._adag );if _ecfcc {_gfcd ();continue ;};if _bgbd ==nil &&!_ecfcc {_bgbd =_afaed ([]*textMark {_gdae },_geecg );continue ;};_aefbe :=_bgbd ._cfccf ;_edbbaf :=_bg .Abs (_gbbf (_geecg ,_gdae )-_bgbd ._gbgab )/_aefbe ;
_fege :=_bgdbb (_gdae ,_bgbd )/_aefbe ;if _fege >=_ecfd ||!(-_bedg <=_fege &&_edbbaf <=_baad ){_gfcd ();_bgbd =_afaed ([]*textMark {_gdae },_geecg );continue ;};_bgbd .appendMark (_gdae ,_geecg );};_gfcd ();return _ecfg ;};func (_aad *textObject )moveLP (_cadg ,_gfac float64 ){_aad ._fde .Concat (_ee .NewMatrix (1,0,0,1,_cadg ,_gfac ));
_aad ._edcb =_aad ._fde ;};type textWord struct{_e .PdfRectangle ;_gbgab float64 ;_dgeda string ;_ggegd []*textMark ;_cfccf float64 ;_ddbd bool ;};func (_caaf *textTable )putComposite (_bfcd ,_aaac int ,_gaaab paraList ,_egace _e .PdfRectangle ){if len (_gaaab )==0{_bc .Log .Error ("\u0074\u0065xt\u0054\u0061\u0062l\u0065\u0029\u0020\u0070utC\u006fmp\u006f\u0073\u0069\u0074\u0065\u003a\u0020em\u0070\u0074\u0079\u0020\u0070\u0061\u0072a\u0073");
return ;};_cbebf :=compositeCell {PdfRectangle :_egace ,paraList :_gaaab };if _edeg {_db .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0075\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u003c\u002d\u0025\u0073\u000a",_bfcd ,_aaac ,_cbebf .String ());
};_cbebf .updateBBox ();_caaf ._abaeg [_gcaf (_bfcd ,_aaac )]=_cbebf ;};type structElement struct{_cdaf string ;_aeaaf []structElement ;_gaf int64 ;_bfbgf _bgf .PdfObject ;};func (_agdf *textObject )setTextMatrix (_gbba []float64 ){if len (_gbba )!=6{_bc .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u006c\u0065\u006e\u0028\u0066\u0029\u0020\u0021\u003d\u0020\u0036\u0020\u0028\u0025\u0064\u0029",len (_gbba ));
return ;};_bfbb ,_dfce ,_ffd ,_cbaaf ,_dbd ,_dcfd :=_gbba [0],_gbba [1],_gbba [2],_gbba [3],_gbba [4],_gbba [5];_agdf ._edcb =_ee .NewMatrix (_bfbb ,_dfce ,_ffd ,_cbaaf ,_dbd ,_dcfd );_agdf ._fde =_agdf ._edcb ;};func (_bgcbc rulingList )asTiling ()gridTiling {if _fcaf {_bc .Log .Info ("r\u0075\u006ci\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0063s\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u002b\u002b\u002b\u0020\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_bgcbc ));
};for _adgb ,_abed :=range _bgcbc [1:]{_abbgf :=_bgcbc [_adgb ];if _abbgf .alignsPrimary (_abed )&&_abbgf .alignsSec (_abed ){_bc .Log .Error ("a\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0044\u0075\u0070\u006c\u0069\u0063\u0061\u0074\u0065 \u0072\u0075\u006c\u0069\u006e\u0067\u0073\u002e\u000a\u0009v=\u0025\u0073\u000a\t\u0077=\u0025\u0073",_abed ,_abbgf );
};};_bgcbc .sortStrict ();_bgcbc .log ("\u0073n\u0061\u0070\u0070\u0065\u0064");_fgbfg ,_cdcf :=_bgcbc .vertsHorzs ();_adcgg :=_fgbfg .primaries ();_bcbef :=_cdcf .primaries ();_efgf :=len (_adcgg )-1;_cabe :=len (_bcbef )-1;if _efgf ==0||_cabe ==0{return gridTiling {};
};_abcge :=_e .PdfRectangle {Llx :_adcgg [0],Urx :_adcgg [_efgf ],Lly :_bcbef [0],Ury :_bcbef [_cabe ]};if _fcaf {_bc .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0072\u0074s=\u0025\u0064",len (_fgbfg ));
for _cdfa ,_gebd :=range _fgbfg {_db .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cdfa ,_gebd );};_bc .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0068\u006f\u0072\u007as=\u0025\u0064",len (_cdcf ));
for _dgaaa ,_bbgfa :=range _cdcf {_db .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dgaaa ,_bbgfa );};_bc .Log .Info ("\u0072\u0075\u006c\u0069\u006eg\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067:\u0020\u0020\u0077\u0078\u0068\u003d\u0025\u0064\u0078\u0025\u0064\u000a\u0009\u006c\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a\u0009\u006c\u006c\u0079\u003d\u0025\u002e\u0032f",_efgf ,_cabe ,_adcgg ,_bcbef );
};_bbgfb :=make ([]gridTile ,_efgf *_cabe );for _dfded :=_cabe -1;_dfded >=0;_dfded --{_bged :=_bcbef [_dfded ];_cbaf :=_bcbef [_dfded +1];for _cdfde :=0;_cdfde < _efgf ;_cdfde ++{_eeeg :=_adcgg [_cdfde ];_adgd :=_adcgg [_cdfde +1];_acba :=_fgbfg .findPrimSec (_eeeg ,_bged );
_beecg :=_fgbfg .findPrimSec (_adgd ,_bged );_bggeg :=_cdcf .findPrimSec (_bged ,_eeeg );_bece :=_cdcf .findPrimSec (_cbaf ,_eeeg );_agda :=_e .PdfRectangle {Llx :_eeeg ,Urx :_adgd ,Lly :_bged ,Ury :_cbaf };_eebf :=_bbbd (_agda ,_acba ,_beecg ,_bggeg ,_bece );
_bbgfb [_dfded *_efgf +_cdfde ]=_eebf ;if _fcaf {_db .Printf ("\u0020\u0020\u0078\u003d\u0025\u0032\u0064\u0020\u0079\u003d\u0025\u0032\u0064\u003a\u0020%\u0073 \u0025\u0036\u002e\u0032\u0066\u0020\u0078\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_cdfde ,_dfded ,_eebf .String (),_eebf .Width (),_eebf .Height ());
};};};if _fcaf {_bc .Log .Info ("r\u0075\u006c\u0069\u006e\u0067\u004c\u0069\u0073\u0074.\u0061\u0073\u0054\u0069\u006c\u0069\u006eg:\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0020\u0068\u006f\u0072\u0069zo\u006e\u0074a\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_abcge );
};_cdbb :=make ([]map[float64 ]gridTile ,_cabe );for _gfecea :=_cabe -1;_gfecea >=0;_gfecea --{if _fcaf {_db .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_gfecea );};_cdbb [_gfecea ]=make (map[float64 ]gridTile ,_efgf );for _gbcb :=0;_gbcb < _efgf ;
_gbcb ++{_cffa :=_bbgfb [_gfecea *_efgf +_gbcb ];if _fcaf {_db .Printf ("\u0020\u0020\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gbcb ,_cffa );};if !_cffa ._agab {continue ;};_fcgdd :=_gbcb ;for _fgcaa :=_gbcb +1;!_cffa ._edbag &&_fgcaa < _efgf ;
_fgcaa ++{_dcdb :=_bbgfb [_gfecea *_efgf +_fgcaa ];_cffa .Urx =_dcdb .Urx ;_cffa ._bfefb =_cffa ._bfefb ||_dcdb ._bfefb ;_cffa ._ddab =_cffa ._ddab ||_dcdb ._ddab ;_cffa ._edbag =_dcdb ._edbag ;if _fcaf {_db .Printf ("\u0020 \u0020%\u0034\u0064\u003a\u0020\u0025s\u0020\u2192 \u0025\u0073\u000a",_fgcaa ,_dcdb ,_cffa );
};_fcgdd =_fgcaa ;};if _fcaf {_db .Printf (" \u0020 \u0025\u0032\u0064\u0020\u002d\u0020\u0025\u0032d\u0020\u2192\u0020\u0025s\n",_gbcb ,_fcgdd ,_cffa );};_gbcb =_fcgdd ;_cdbb [_gfecea ][_cffa .Llx ]=_cffa ;};};_cefe :=make (map[float64 ]map[float64 ]gridTile ,_cabe );
_cddgg :=make (map[float64 ]map[float64 ]struct{},_cabe );for _gffc :=_cabe -1;_gffc >=0;_gffc --{_cdafb :=_bbgfb [_gffc *_efgf ].Lly ;_cefe [_cdafb ]=make (map[float64 ]gridTile ,_efgf );_cddgg [_cdafb ]=make (map[float64 ]struct{},_efgf );};if _fcaf {_bc .Log .Info ("\u0072u\u006c\u0069n\u0067\u004c\u0069s\u0074\u002e\u0061\u0073\u0054\u0069\u006ci\u006e\u0067\u003a\u0020\u0063\u006fa\u006c\u0065\u0073\u0063\u0065\u0020\u0076\u0065\u0072\u0074\u0069c\u0061\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_abcge );
};for _fbdge :=_cabe -1;_fbdge >=0;_fbdge --{_cgcga :=_bbgfb [_fbdge *_efgf ].Lly ;_cbgb :=_cdbb [_fbdge ];if _fcaf {_db .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_fbdge );};for _ ,_decd :=range _cbac (_cbgb ){if _ ,_bggcc :=_cddgg [_cgcga ][_decd ];
_bggcc {continue ;};_dfeg :=_cbgb [_decd ];if _fcaf {_db .Printf (" \u0020\u0020\u0020\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_dfeg .String ());};for _ebabd :=_fbdge -1;_ebabd >=0;_ebabd --{if _dfeg ._ddab {break ;};_fcfb :=_cdbb [_ebabd ];_acccb ,_gddbf :=_fcfb [_decd ];
if !_gddbf {break ;};if _acccb .Urx !=_dfeg .Urx {break ;};_dfeg ._ddab =_acccb ._ddab ;_dfeg .Lly =_acccb .Lly ;if _fcaf {_db .Printf ("\u0020\u0020\u0020\u0020  \u0020\u0020\u0076\u003d\u0025\u0073\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_acccb .String (),_dfeg .String ());
};_cddgg [_acccb .Lly ][_acccb .Llx ]=struct{}{};};if _fbdge ==0{_dfeg ._ddab =true ;};if _dfeg .complete (){_cefe [_cgcga ][_decd ]=_dfeg ;};};};_fdfg :=gridTiling {PdfRectangle :_abcge ,_fabcg :_deca (_cefe ),_gdccb :_gacf (_cefe ),_eebab :_cefe };_fdfg .log ("\u0043r\u0065\u0061\u0074\u0065\u0064");
return _fdfg ;};func (_fbbd *compositeCell )updateBBox (){for _ ,_bgab :=range _fbbd .paraList {_fbbd .PdfRectangle =_dbef (_fbbd .PdfRectangle ,_bgab .PdfRectangle );};};func (_bfca *textObject )getStrokeColor ()_dg .Color {return _eaccge (_bfca ._gaca .ColorspaceStroking ,_bfca ._gaca .ColorStroking );
};func (_fcef *wordBag )depthRange (_gbbed ,_gdec int )[]int {var _gcdg []int ;for _ecde :=range _fcef ._fdc {if _gbbed <=_ecde &&_ecde <=_gdec {_gcdg =append (_gcdg ,_ecde );};};if len (_gcdg )==0{return nil ;};_d .Ints (_gcdg );return _gcdg ;};func _cbgd (_cbfe ,_bcfb _e .PdfRectangle )bool {return _bcfb .Llx <=_cbfe .Urx &&_cbfe .Llx <=_bcfb .Urx ;
};func (_fcda rulingList )mergePrimary ()float64 {_bdcg :=_fcda [0]._cbag ;for _ ,_dbfg :=range _fcda [1:]{_bdcg +=_dbfg ._cbag ;};return _bdcg /float64 (len (_fcda ));};func (_ccc *textObject )showTextAdjusted (_ccad *_bgf .PdfObjectArray ,_cgb int )error {_dbca :=false ;
for _ ,_bcad :=range _ccad .Elements (){switch _bcad .(type ){case *_bgf .PdfObjectFloat ,*_bgf .PdfObjectInteger :_gfbf ,_fade :=_bgf .GetNumberAsFloat (_bcad );if _fade !=nil {_bc .Log .Debug ("\u0045\u0052\u0052\u004fR\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078t\u0041\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0042\u0061\u0064\u0020\u006e\u0075\u006d\u0065r\u0069\u0063\u0061\u006c\u0020a\u0072\u0067\u002e\u0020\u006f\u003d\u0025\u0073\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_bcad ,_ccad );
return _fade ;};_ede ,_edg :=-_gfbf *0.001*_ccc ._degc ._cbbb ,0.0;if _dbca {_edg ,_ede =_ede ,_edg ;};_dbda :=_fbae (_ee .Point {X :_ede ,Y :_edg });_ccc ._edcb .Concat (_dbda );case *_bgf .PdfObjectString :_bbc :=_bgf .TraceToDirectObject (_bcad );_aeca ,_gaaf :=_bgf .GetStringBytes (_bbc );
if !_gaaf {_bc .Log .Trace ("s\u0068\u006f\u0077\u0054\u0065\u0078\u0074\u0041\u0064j\u0075\u0073\u0074\u0065\u0064\u003a\u0020Ba\u0064\u0020\u0073\u0074r\u0069\u006e\u0067\u0020\u0061\u0072\u0067\u002e\u0020o=\u0025\u0073 \u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_bcad ,_ccad );
return _bgf .ErrTypeError ;};_ccc .renderText (_bbc ,_aeca ,_cgb );default:_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078\u0074A\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0055\u006e\u0065\u0078p\u0065\u0063\u0074\u0065\u0064\u0020\u0074\u0079\u0070\u0065\u0020\u0028%T\u0029\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_bcad ,_ccad );
return _bgf .ErrTypeError ;};};return nil ;};func (_cegec gridTile )complete ()bool {return _cegec .numBorders ()==4};func (_efac *ruling )intersects (_dfcf *ruling )bool {_bdaea :=(_efac ._ffada ==_dfdb &&_dfcf ._ffada ==_cgfba )||(_dfcf ._ffada ==_dfdb &&_efac ._ffada ==_cgfba );
_cfba :=func (_edbba ,_bdba *ruling )bool {return _edbba ._eagf -_ddae <=_bdba ._cbag &&_bdba ._cbag <=_edbba ._adgg +_ddae ;};_dbgd :=_cfba (_efac ,_dfcf );_dcebg :=_cfba (_dfcf ,_efac );if _dcdg {_db .Printf ("\u0020\u0020\u0020\u0020\u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003a\u0020\u0020\u006fr\u0074\u0068\u006f\u0067\u006f\u006e\u0061l\u003d\u0025\u0074\u0020\u006f\u0031\u003d\u0025\u0074\u0020\u006f2\u003d\u0025\u0074\u0020\u2192\u0020\u0025\u0074\u000a"+"\u0020\u0020\u0020 \u0020\u0020\u0020\u0076\u003d\u0025\u0073\u000a"+" \u0020\u0020\u0020\u0020\u0020\u0077\u003d\u0025\u0073\u000a",_bdaea ,_dbgd ,_dcebg ,_bdaea &&_dbgd &&_dcebg ,_efac ,_dfcf );
};return _bdaea &&_dbgd &&_dcebg ;};func (_bdac rulingList )secMinMax ()(float64 ,float64 ){_cccac ,_afcb :=_bdac [0]._eagf ,_bdac [0]._adgg ;for _ ,_eabb :=range _bdac [1:]{if _eabb ._eagf < _cccac {_cccac =_eabb ._eagf ;};if _eabb ._adgg > _afcb {_afcb =_eabb ._adgg ;
};};return _cccac ,_afcb ;};func _cbaeb (_feba []_bgf .PdfObject )(_bfaeb ,_dcceg float64 ,_dafed error ){if len (_feba )!=2{return 0,0,_db .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020o\u0066 \u0070\u0061\u0072\u0061\u006d\u0073\u003a \u0025\u0064",len (_feba ));
};_gdag ,_dafed :=_bgf .GetNumbersAsFloat (_feba );if _dafed !=nil {return 0,0,_dafed ;};return _gdag [0],_gdag [1],nil ;};func (_fab *shapesState )cubicTo (_bda ,_ffga ,_geec ,_dabc ,_eacc ,_bgaf float64 ){if _bcfdb {_bc .Log .Info ("\u0063\u0075\u0062\u0069\u0063\u0054\u006f\u003a");
};_fab .addPoint (_eacc ,_bgaf );};func _cbac (_bgeec map[float64 ]gridTile )[]float64 {_afga :=make ([]float64 ,0,len (_bgeec ));for _eefca :=range _bgeec {_afga =append (_afga ,_eefca );};_d .Float64s (_afga );return _afga ;};const _ceab =10;

// PageTextOptions holds various options available in extraction process.
type PageTextOptions struct{_bgfe bool ;_ddb bool ;};func (_fadac rulingList )snapToGroups ()rulingList {_cafg ,_aafdd :=_fadac .vertsHorzs ();if len (_cafg )> 0{_cafg =_cafg .snapToGroupsDirection ();};if len (_aafdd )> 0{_aafdd =_aafdd .snapToGroupsDirection ();
};_afaec :=append (_cafg ,_aafdd ...);_afaec .log ("\u0073\u006e\u0061p\u0054\u006f\u0047\u0072\u006f\u0075\u0070\u0073");return _afaec ;};func (_bgbc rulingList )log (_fadee string ){if !_dcdg {return ;};_bc .Log .Info ("\u0023\u0023\u0023\u0020\u0025\u0031\u0030\u0073\u003a\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_fadee ,_bgbc .String ());
for _adbg ,_ffed :=range _bgbc {_db .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_adbg ,_ffed .String ());};};func (_abfa compositeCell )String ()string {_cgbce :="";if len (_abfa .paraList )> 0{_cgbce =_agag (_abfa .paraList .merge ().text (),50);
};return _db .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0070\u0061\u0072a\u0073\u0020\u0025\u0071",_abfa .PdfRectangle ,len (_abfa .paraList ),_cgbce );};func (_bgbfc *textPara )isAtom ()*textTable {_fegd :=_bgbfc ;_becdb :=_bgbfc ._gabd ;
_ecgg :=_bgbfc ._gccaae ;if _becdb .taken ()||_ecgg .taken (){return nil ;};_fedb :=_becdb ._gccaae ;if _fedb .taken ()||_fedb !=_ecgg ._gabd {return nil ;};return _ccfdd (_fegd ,_becdb ,_ecgg ,_fedb );};func (_ggad *textPara )writeText (_bcde _f .Writer ){if _ggad ._fbda ==nil {_ggad .writeCellText (_bcde );
return ;};for _daeg :=0;_daeg < _ggad ._fbda ._gaafe ;_daeg ++{for _defe :=0;_defe < _ggad ._fbda ._afde ;_defe ++{_abdba :=_ggad ._fbda .get (_defe ,_daeg );if _abdba ==nil {_bcde .Write ([]byte ("\u0009"));}else {_abdba .writeCellText (_bcde );};_bcde .Write ([]byte ("\u0020"));
};if _daeg < _ggad ._fbda ._gaafe -1{_bcde .Write ([]byte ("\u000a"));};};};func (_edbdc *textTable )toTextTable ()TextTable {if _edeg {_bc .Log .Info ("t\u006fT\u0065\u0078\u0074\u0054\u0061\u0062\u006c\u0065:\u0020\u0025\u0064\u0020x \u0025\u0064",_edbdc ._afde ,_edbdc ._gaafe );
};_bedfd :=make ([][]TableCell ,_edbdc ._gaafe );for _egcff :=0;_egcff < _edbdc ._gaafe ;_egcff ++{_bedfd [_egcff ]=make ([]TableCell ,_edbdc ._afde );for _dbcad :=0;_dbcad < _edbdc ._afde ;_dbcad ++{_fdedd :=_edbdc .get (_dbcad ,_egcff );if _fdedd ==nil {continue ;
};if _edeg {_db .Printf ("\u0025\u0034\u0064 \u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_dbcad ,_egcff ,_fdedd );};_bedfd [_egcff ][_dbcad ].Text =_fdedd .text ();_eggg :=0;_bedfd [_egcff ][_dbcad ].Marks ._egfb =_fdedd .toTextMarks (&_eggg );};
};_fcaab :=TextTable {W :_edbdc ._afde ,H :_edbdc ._gaafe ,Cells :_bedfd };_fcaab .PdfRectangle =_edbdc .bbox ();return _fcaab ;};func (_bddd lineRuling )yMean ()float64 {return 0.5*(_bddd ._badd .Y +_bddd ._becc .Y )};

// ExtractText processes and extracts all text data in content streams and returns as a string.
// It takes into account character encodings in the PDF file, which are decoded by
// CharcodeBytesToUnicode.
// Characters that can't be decoded are replaced with MissingCodeRune ('\ufffd' = ï¿½).
func (_gbb *Extractor )ExtractText ()(string ,error ){_dacf ,_ ,_ ,_aec :=_gbb .ExtractTextWithStats ();return _dacf ,_aec ;};type textObject struct{_faf *Extractor ;_bed *_e .PdfPageResources ;_gaca _ac .GraphicsState ;_degc *textState ;_afff *stateStack ;
_edcb _ee .Matrix ;_fde _ee .Matrix ;_eebd []*textMark ;_dbdd bool ;};type structTreeRoot struct{_dceb []structElement ;_cfbc string ;};func _gfge (_aafg ,_ceaf _cec .Image )_cec .Image {_dced ,_gcbef :=_ceaf .Bounds ().Size (),_aafg .Bounds ().Size ();
_gdcfe ,_dabbc :=_dced .X ,_dced .Y ;if _gcbef .X > _gdcfe {_gdcfe =_gcbef .X ;};if _gcbef .Y > _dabbc {_dabbc =_gcbef .Y ;};_dege :=_cec .Rect (0,0,_gdcfe ,_dabbc );if _dced .X !=_gdcfe ||_dced .Y !=_dabbc {_fgafd :=_cec .NewRGBA (_dege );_bac .BiLinear .Scale (_fgafd ,_dege ,_aafg ,_ceaf .Bounds (),_bac .Over ,nil );
_ceaf =_fgafd ;};if _gcbef .X !=_gdcfe ||_gcbef .Y !=_dabbc {_dgffe :=_cec .NewRGBA (_dege );_bac .BiLinear .Scale (_dgffe ,_dege ,_aafg ,_aafg .Bounds (),_bac .Over ,nil );_aafg =_dgffe ;};_ggdfcc :=_cec .NewRGBA (_dege );_bac .DrawMask (_ggdfcc ,_dege ,_aafg ,_cec .Point {},_ceaf ,_cec .Point {},_bac .Over );
return _ggdfcc ;};func (_dacd compositeCell )split (_ffddf ,_gcdf []float64 )*textTable {_agfd :=len (_ffddf )+1;_edac :=len (_gcdf )+1;if _edeg {_bc .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0043\u0065l\u006c\u002e\u0073\u0070l\u0069\u0074\u003a\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a\u0009\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025\u0073\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073=\u0025\u0036\u002e\u0032\u0066\u000a\t\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d%\u0036\u002e\u0032\u0066",_edac ,_agfd ,_dacd ,_ffddf ,_gcdf );
_db .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073\u000a",len (_dacd .paraList ));for _adcc ,_dgae :=range _dacd .paraList {_db .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_adcc ,_dgae .String ());};_db .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",len (_dacd .lines ()));
for _ddcdc ,_dcfa :=range _dacd .lines (){_db .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ddcdc ,_dcfa );};};_ffddf =_abdg (_ffddf ,_dacd .Ury ,_dacd .Lly );_gcdf =_abdg (_gcdf ,_dacd .Llx ,_dacd .Urx );_dded :=make (map[uint64 ]*textPara ,_edac *_agfd );
_bgeb :=textTable {_afde :_edac ,_gaafe :_agfd ,_abgb :_dded };_ffgbe :=_dacd .paraList ;_d .Slice (_ffgbe ,func (_dcdc ,_afab int )bool {_adab ,_aabgg :=_ffgbe [_dcdc ],_ffgbe [_afab ];_aefa ,_dfde :=_adab .Lly ,_aabgg .Lly ;if _aefa !=_dfde {return _aefa < _dfde ;
};return _adab .Llx < _aabgg .Llx ;});_gebf :=make (map[uint64 ]_e .PdfRectangle ,_edac *_agfd );for _dcege ,_ffbd :=range _ffddf [1:]{_effcce :=_ffddf [_dcege ];for _cbfd ,_gacc :=range _gcdf [1:]{_bad :=_gcdf [_cbfd ];_gebf [_gcaf (_cbfd ,_dcege )]=_e .PdfRectangle {Llx :_bad ,Urx :_gacc ,Lly :_ffbd ,Ury :_effcce };
};};if _edeg {_bc .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0043\u0065l\u006c\u002e\u0073\u0070\u006c\u0069\u0074\u003a\u0020\u0072e\u0063\u0074\u0073");_db .Printf ("\u0020\u0020\u0020\u0020");for _dbcab :=0;_dbcab < _edac ;
_dbcab ++{_db .Printf ("\u0025\u0033\u0030\u0064\u002c\u0020",_dbcab );};_db .Println ();for _cgbf :=0;_cgbf < _agfd ;_cgbf ++{_db .Printf ("\u0020\u0020\u0025\u0032\u0064\u003a",_cgbf );for _ebfdc :=0;_ebfdc < _edac ;_ebfdc ++{_db .Printf ("\u00256\u002e\u0032\u0066\u002c\u0020",_gebf [_gcaf (_ebfdc ,_cgbf )]);
};_db .Println ();};};_agbdb :=func (_acfdb *textLine )(int ,int ){for _bacd :=0;_bacd < _agfd ;_bacd ++{for _ddcc :=0;_ddcc < _edac ;_ddcc ++{if _gegee (_gebf [_gcaf (_ddcc ,_bacd )],_acfdb .PdfRectangle ){return _ddcc ,_bacd ;};};};return -1,-1;};_acgac :=make (map[uint64 ][]*textLine ,_edac *_agfd );
for _ ,_gbec :=range _ffgbe .lines (){_dbacb ,_fbcd :=_agbdb (_gbec );if _dbacb < 0{continue ;};_acgac [_gcaf (_dbacb ,_fbcd )]=append (_acgac [_gcaf (_dbacb ,_fbcd )],_gbec );};for _ddcb :=0;_ddcb < len (_ffddf )-1;_ddcb ++{_fdff :=_ffddf [_ddcb ];_agcgd :=_ffddf [_ddcb +1];
for _edab :=0;_edab < len (_gcdf )-1;_edab ++{_eaagg :=_gcdf [_edab ];_cgcge :=_gcdf [_edab +1];_dgffc :=_e .PdfRectangle {Llx :_eaagg ,Urx :_cgcge ,Lly :_agcgd ,Ury :_fdff };_bfddg :=_acgac [_gcaf (_edab ,_ddcb )];if len (_bfddg )==0{continue ;};_dfgcgf :=_caba (_dgffc ,_bfddg );
_bgeb .put (_edab ,_ddcb ,_dfgcgf );};};return &_bgeb ;};type gridTile struct{_e .PdfRectangle ;_bfefb ,_agab ,_ddab ,_edbag bool ;};func _ffae (_gbgc *wordBag ,_bdb float64 ,_fgfe ,_bedb rulingList )[]*wordBag {var _dddcc []*wordBag ;for _ ,_caea :=range _gbgc .depthIndexes (){_ebgg :=false ;
for !_gbgc .empty (_caea ){_fbcff :=_gbgc .firstReadingIndex (_caea );_ggf :=_gbgc .firstWord (_fbcff );_eeafdf :=_dgeg (_ggf ,_bdb ,_fgfe ,_bedb );_gbgc .removeWord (_ggf ,_fbcff );if _dgbg {_bc .Log .Info ("\u0066\u0069\u0072\u0073\u0074\u0057\u006f\u0072\u0064\u0020\u005e\u005e^\u005e\u0020\u0025\u0073",_ggf .String ());
};for _eegcd :=true ;_eegcd ;_eegcd =_ebgg {_ebgg =false ;_gdac :=_aefe *_eeafdf ._dgbf ;_bbb :=_gbca *_eeafdf ._dgbf ;_bgfbe :=_bbdc *_eeafdf ._dgbf ;if _dgbg {_bc .Log .Info ("\u0070a\u0072a\u0057\u006f\u0072\u0064\u0073\u0020\u0064\u0065\u0070\u0074\u0068 \u0025\u002e\u0032\u0066 \u002d\u0020\u0025\u002e\u0032f\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061\u0044\u0065\u0070\u0074\u0068\u0047\u0061\u0070\u003d\u0025\u002e\u0032\u0066\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061R\u0065\u0061\u0064\u0069\u006e\u0067\u0047\u0061p\u003d\u0025\u002e\u0032\u0066",_eeafdf .minDepth (),_eeafdf .maxDepth (),_bgfbe ,_bbb );
};if _gbgc .scanBand ("\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c",_eeafdf ,_gead (_dgbfd ,0),_eeafdf .minDepth ()-_bgfbe ,_eeafdf .maxDepth ()+_bgfbe ,_gfbb ,false ,false )> 0{_ebgg =true ;};if _gbgc .scanBand ("\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_eeafdf ,_gead (_dgbfd ,_bbb ),_eeafdf .minDepth (),_eeafdf .maxDepth (),_affb ,false ,false )> 0{_ebgg =true ;
};if _ebgg {continue ;};_bedaf :=_gbgc .scanBand ("",_eeafdf ,_gead (_gbbee ,_gdac ),_eeafdf .minDepth (),_eeafdf .maxDepth (),_cadb ,true ,false );if _bedaf > 0{_accfc :=(_eeafdf .maxDepth ()-_eeafdf .minDepth ())/_eeafdf ._dgbf ;if (_bedaf > 1&&float64 (_bedaf )> 0.3*_accfc )||_bedaf <=10{if _gbgc .scanBand ("\u006f\u0074\u0068e\u0072",_eeafdf ,_gead (_gbbee ,_gdac ),_eeafdf .minDepth (),_eeafdf .maxDepth (),_cadb ,false ,true )> 0{_ebgg =true ;
};};};};_dddcc =append (_dddcc ,_eeafdf );};};return _dddcc ;};const (RenderModeStroke RenderMode =1<<iota ;RenderModeFill ;RenderModeClip ;);type stateStack []*textState ;func (_aecgb rulingList )augmentGrid ()(rulingList ,rulingList ){_ceee ,_bebfe :=_aecgb .vertsHorzs ();
if len (_ceee )==0||len (_bebfe )==0{return _ceee ,_bebfe ;};_dbbg ,_gecg :=_ceee ,_bebfe ;_cdcb :=_ceee .bbox ();_bbcbf :=_bebfe .bbox ();if _dcdg {_bc .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0056\u003d\u0025\u0036\u002e\u0032\u0066",_cdcb );
_bc .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0048\u003d\u0025\u0036\u002e\u0032\u0066",_bbcbf );};var _egfbc ,_bbad ,_bbfa ,_bccc *ruling ;if _bbcbf .Llx < _cdcb .Llx -_ddae {_egfbc =&ruling {_dfcb :_bdbe ,_ffada :_dfdb ,_cbag :_bbcbf .Llx ,_eagf :_cdcb .Lly ,_adgg :_cdcb .Ury };
_ceee =append (rulingList {_egfbc },_ceee ...);};if _bbcbf .Urx > _cdcb .Urx +_ddae {_bbad =&ruling {_dfcb :_bdbe ,_ffada :_dfdb ,_cbag :_bbcbf .Urx ,_eagf :_cdcb .Lly ,_adgg :_cdcb .Ury };_ceee =append (_ceee ,_bbad );};if _cdcb .Lly < _bbcbf .Lly -_ddae {_bbfa =&ruling {_dfcb :_bdbe ,_ffada :_cgfba ,_cbag :_cdcb .Lly ,_eagf :_bbcbf .Llx ,_adgg :_bbcbf .Urx };
_bebfe =append (rulingList {_bbfa },_bebfe ...);};if _cdcb .Ury > _bbcbf .Ury +_ddae {_bccc =&ruling {_dfcb :_bdbe ,_ffada :_cgfba ,_cbag :_cdcb .Ury ,_eagf :_bbcbf .Llx ,_adgg :_bbcbf .Urx };_bebfe =append (_bebfe ,_bccc );};if len (_ceee )+len (_bebfe )==len (_aecgb ){return _dbbg ,_gecg ;
};_gade :=append (_ceee ,_bebfe ...);_aecgb .log ("u\u006e\u0061\u0075\u0067\u006d\u0065\u006e\u0074\u0065\u0064");_gade .log ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0065d");return _ceee ,_bebfe ;};func (_edfa *textPara )bbox ()_e .PdfRectangle {return _edfa .PdfRectangle };
func (_cff *textObject )setWordSpacing (_dag float64 ){if _cff ==nil {return ;};_cff ._degc ._bgfba =_dag ;};type markKind int ;func (_edee *subpath )clear (){*_edee =subpath {}};func (_eceee *textWord )absorb (_fbded *textWord ){_eceee .PdfRectangle =_dbef (_eceee .PdfRectangle ,_fbded .PdfRectangle );
_eceee ._ggegd =append (_eceee ._ggegd ,_fbded ._ggegd ...);};

// NewFromContents creates a new extractor from contents and page resources.
func NewFromContents (contents string ,resources *_e .PdfPageResources )(*Extractor ,error ){const _fg ="\u0065x\u0074\u0072\u0061\u0063t\u006f\u0072\u002e\u004e\u0065w\u0046r\u006fm\u0043\u006f\u006e\u0074\u0065\u006e\u0074s";_ef :=&Extractor {_aa :contents ,_dbc :resources ,_fe :map[string ]fontEntry {},_bf :map[string ]textResult {}};
_ag .TrackUse (_fg );return _ef ,nil ;};func (_bcbe *wordBag )firstWord (_aeff int )*textWord {return _bcbe ._fdc [_aeff ][0]};func (_gegd paraList )log (_fgdg string ){if !_egdf {return ;};_bc .Log .Info ("%\u0038\u0073\u003a\u0020\u0025\u0064 \u0070\u0061\u0072\u0061\u0073\u0020=\u003d\u003d\u003d\u003d\u003d\u003d\u002d-\u002d\u002d\u002d\u002d\u002d\u003d\u003d\u003d\u003d\u003d=\u003d",_fgdg ,len (_gegd ));
for _bgbf ,_egba :=range _gegd {if _egba ==nil {continue ;};_efae :=_egba .text ();_gagb :="\u0020\u0020";if _egba ._fbda !=nil {_gagb =_db .Sprintf ("\u005b%\u0064\u0078\u0025\u0064\u005d",_egba ._fbda ._afde ,_egba ._fbda ._gaafe );};_db .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0025s\u0020\u0025\u0071\u000a",_bgbf ,_egba .PdfRectangle ,_gagb ,_agag (_efae ,50));
};};func (_aecf *PageText )getParagraphs ()paraList {var _dfbc rulingList ;if _fgdac {_ggbc :=_acdc (_aecf ._ded );_dfbc =append (_dfbc ,_ggbc ...);};if _dbbf {_bgb :=_dbee (_aecf ._afae );_dfbc =append (_dfbc ,_bgb ...);};_dfbc ,_bgae :=_dfbc .toTilings ();
var _cedb paraList ;_abbe :=len (_aecf ._cbcc );for _fgg :=0;_fgg < 360&&_abbe > 0;_fgg +=90{_bfbd :=make ([]*textMark ,0,len (_aecf ._cbcc )-_abbe );for _ ,_acfd :=range _aecf ._cbcc {if _acfd ._ccbec ==_fgg {_bfbd =append (_bfbd ,_acfd );};};if len (_bfbd )> 0{_cdg :=_gaff (_bfbd ,_aecf ._acbf ,_dfbc ,_bgae ,_aecf ._caec ._ddb );
_cedb =append (_cedb ,_cdg ...);_abbe -=len (_bfbd );};};return _cedb ;};func (_cbagf rulingList )blocks (_afage ,_efaeg *ruling )bool {if _afage ._eagf > _efaeg ._adgg ||_efaeg ._eagf > _afage ._adgg {return false ;};_cbfda :=_bg .Max (_afage ._eagf ,_efaeg ._eagf );
_gcdc :=_bg .Min (_afage ._adgg ,_efaeg ._adgg );if _afage ._cbag > _efaeg ._cbag {_afage ,_efaeg =_efaeg ,_afage ;};for _ ,_egge :=range _cbagf {if _afage ._cbag <=_egge ._cbag +_fddg &&_egge ._cbag <=_efaeg ._cbag +_fddg &&_egge ._eagf <=_gcdc &&_cbfda <=_egge ._adgg {return true ;
};};return false ;};func _bbae (_eaggg int ,_daddf func (int ,int )bool )[]int {_abgf :=make ([]int ,_eaggg );for _abcc :=range _abgf {_abgf [_abcc ]=_abcc ;};_d .Slice (_abgf ,func (_baeaf ,_ebdf int )bool {return _daddf (_abgf [_baeaf ],_abgf [_ebdf ])});
return _abgf ;};func _gacf (_bdef map[float64 ]map[float64 ]gridTile )[]float64 {_gdga :=make ([]float64 ,0,len (_bdef ));for _cga :=range _bdef {_gdga =append (_gdga ,_cga );};_d .Float64s (_gdga );_bdab :=len (_gdga );for _becec :=0;_becec < _bdab /2;
_becec ++{_gdga [_becec ],_gdga [_bdab -1-_becec ]=_gdga [_bdab -1-_becec ],_gdga [_becec ];};return _gdga ;};func (_aabfa *textTable )depth ()float64 {_febcg :=1e10;for _ebfag :=0;_ebfag < _aabfa ._afde ;_ebfag ++{_eabbf :=_aabfa .get (_ebfag ,0);if _eabbf ==nil ||_eabbf ._ecfbe {continue ;
};_febcg =_bg .Min (_febcg ,_eabbf .depth ());};return _febcg ;};func (_afcc *textTable )reduceTiling (_geafg gridTiling ,_adfg float64 )*textTable {_cabdd :=make ([]int ,0,_afcc ._gaafe );_fdcc :=make ([]int ,0,_afcc ._afde );_ebgbe :=_geafg ._fabcg ;
_cecfb :=_geafg ._gdccb ;for _ecegb :=0;_ecegb < _afcc ._gaafe ;_ecegb ++{_cfgg :=_ecegb > 0&&_bg .Abs (_cecfb [_ecegb -1]-_cecfb [_ecegb ])< _adfg &&_afcc .emptyCompositeRow (_ecegb );if !_cfgg {_cabdd =append (_cabdd ,_ecegb );};};for _cbgaa :=0;_cbgaa < _afcc ._afde ;
_cbgaa ++{_cecgb :=_cbgaa < _afcc ._afde -1&&_bg .Abs (_ebgbe [_cbgaa +1]-_ebgbe [_cbgaa ])< _adfg &&_afcc .emptyCompositeColumn (_cbgaa );if !_cecgb {_fdcc =append (_fdcc ,_cbgaa );};};if len (_cabdd )==_afcc ._gaafe &&len (_fdcc )==_afcc ._afde {return _afcc ;
};_decb :=textTable {_ffdbb :_afcc ._ffdbb ,_afde :len (_fdcc ),_gaafe :len (_cabdd ),_abaeg :make (map[uint64 ]compositeCell ,len (_fdcc )*len (_cabdd ))};if _edeg {_bc .Log .Info ("\u0072\u0065\u0064\u0075c\u0065\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0025d\u0078%\u0064\u0020\u002d\u003e\u0020\u0025\u0064x\u0025\u0064",_afcc ._afde ,_afcc ._gaafe ,len (_fdcc ),len (_cabdd ));
_bc .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_fdcc );_bc .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_cabdd );};for _cfabe ,_begag :=range _cabdd {for _cabbb ,_efba :=range _fdcc {_bebcd ,_dfgcb :=_afcc .getComposite (_efba ,_begag );
if len (_bebcd )==0{continue ;};if _edeg {_db .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_cabbb ,_cfabe ,_efba ,_begag ,_agag (_bebcd .merge ().text (),50));};_decb .putComposite (_cabbb ,_cfabe ,_bebcd ,_dfgcb );
};};return &_decb ;};func _bgeg (_eabbc map[int ][]float64 )string {_bbfaa :=_cecf (_eabbc );_agafb :=make ([]string ,len (_eabbc ));for _dfcg ,_eacf :=range _bbfaa {_agafb [_dfcg ]=_db .Sprintf ("\u0025\u0064\u003a\u0020\u0025\u002e\u0032\u0066",_eacf ,_eabbc [_eacf ]);
};return _db .Sprintf ("\u007b\u0025\u0073\u007d",_ce .Join (_agafb ,"\u002c\u0020"));};func (_ffeg intSet )add (_dggcb int ){_ffeg [_dggcb ]=struct{}{}};func _edbb (_acda ,_gbcec bounded )float64 {return _acda .bbox ().Llx -_gbcec .bbox ().Llx };func (_gcgc paraList )findTables (_cagd []gridTiling )[]*textTable {_gcgc .addNeighbours ();
_d .Slice (_gcgc ,func (_edagf ,_agcdc int )bool {return _eaa (_gcgc [_edagf ],_gcgc [_agcdc ])< 0});var _befgf []*textTable ;if _cccb {_cbada :=_gcgc .findGridTables (_cagd );_befgf =append (_befgf ,_cbada ...);};if _daceb {_daded :=_gcgc .findTextTables ();
_befgf =append (_befgf ,_daded ...);};return _befgf ;};func _abdg (_feaf []float64 ,_cbgcd ,_cdgb float64 )[]float64 {_ffedb ,_dcgg :=_cbgcd ,_cdgb ;if _dcgg < _ffedb {_ffedb ,_dcgg =_dcgg ,_ffedb ;};_fbccg :=make ([]float64 ,0,len (_feaf )+2);_fbccg =append (_fbccg ,_cbgcd );
for _ ,_cged :=range _feaf {if _cged <=_ffedb {continue ;}else if _cged >=_dcgg {break ;};_fbccg =append (_fbccg ,_cged );};_fbccg =append (_fbccg ,_cdgb );return _fbccg ;};var _fbcdg =map[markKind ]string {_ddadb :"\u0073\u0074\u0072\u006f\u006b\u0065",_dcgde :"\u0066\u0069\u006c\u006c",_bdbe :"\u0061u\u0067\u006d\u0065\u006e\u0074"};


// PageFonts represents extracted fonts on a PDF page.
type PageFonts struct{Fonts []Font ;};var _fbafd =[]string {"\u2756","\u27a2","\u2713","\u2022","\uf0a7","\u25a1","\u2212","\u25a0","\u25aa","\u006f"};func (_baf *textObject )reset (){_baf ._edcb =_ee .IdentityMatrix ();_baf ._fde =_ee .IdentityMatrix ();
_baf ._eebd =nil ;};const (_eeg =true ;_afgf =true ;_aaff =true ;_beac =false ;_gbg =false ;_eeee =6;_gddb =3.0;_bdfe =200;_cccb =true ;_daceb =true ;_fgdac =true ;_dbbf =true ;_egbe =false ;);

// String returns a description of `l`.
func (_bab *textLine )String ()string {return _db .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_bab ._ebee ,_bab .PdfRectangle ,_bab ._gebg ,_bab .text ());
};func _gffb (_baeeb ,_ggfd _ee .Point )bool {_bbfca :=_bg .Abs (_baeeb .X -_ggfd .X );_gcag :=_bg .Abs (_baeeb .Y -_ggfd .Y );return _abgd (_gcag ,_bbfca );};func (_dffbb *textTable )get (_gbcd ,_cffg int )*textPara {return _dffbb ._abgb [_gcaf (_gbcd ,_cffg )]};
func (_gegaa *textTable )isExportable ()bool {if _gegaa ._ffdbb {return true ;};_cdfbf :=func (_egeg int )bool {_acfb :=_gegaa .get (0,_egeg );if _acfb ==nil {return false ;};_fccg :=_acfb .text ();_cgddf :=_b .RuneCountInString (_fccg );_gccba :=_eabc .MatchString (_fccg );
return _cgddf <=1||_gccba ;};for _ffff :=0;_ffff < _gegaa ._gaafe ;_ffff ++{if !_cdfbf (_ffff ){return true ;};};return false ;};func (_caae rulingList )splitSec ()[]rulingList {_d .Slice (_caae ,func (_cegdea ,_caaa int )bool {_dccgge ,_ddggd :=_caae [_cegdea ],_caae [_caaa ];
if _dccgge ._eagf !=_ddggd ._eagf {return _dccgge ._eagf < _ddggd ._eagf ;};return _dccgge ._adgg < _ddggd ._adgg ;});_ffbb :=make (map[*ruling ]struct{},len (_caae ));_efec :=func (_aadfe *ruling )rulingList {_eccd :=rulingList {_aadfe };_ffbb [_aadfe ]=struct{}{};
for _ ,_gefe :=range _caae {if _ ,_fbfc :=_ffbb [_gefe ];_fbfc {continue ;};for _ ,_egbbd :=range _eccd {if _gefe .alignsSec (_egbbd ){_eccd =append (_eccd ,_gefe );_ffbb [_gefe ]=struct{}{};break ;};};};return _eccd ;};_edaec :=[]rulingList {_efec (_caae [0])};
for _ ,_aefec :=range _caae [1:]{if _ ,_eadf :=_ffbb [_aefec ];_eadf {continue ;};_edaec =append (_edaec ,_efec (_aefec ));};return _edaec ;};func (_aadbb *ruling )equals (_acfge *ruling )bool {return _aadbb ._ffada ==_acfge ._ffada &&_afgb (_aadbb ._cbag ,_acfge ._cbag )&&_afgb (_aadbb ._eagf ,_acfge ._eagf )&&_afgb (_aadbb ._adgg ,_acfge ._adgg );
};func (_cdgfd rulingList )isActualGrid ()(rulingList ,bool ){_fggf ,_fbgc :=_cdgfd .augmentGrid ();if !(len (_fggf )>=_fceff +1&&len (_fbgc )>=_bebb +1){if _dcdg {_bc .Log .Info ("\u0069s\u0041\u0063t\u0075\u0061\u006c\u0047r\u0069\u0064\u003a \u004e\u006f\u0074\u0020\u0061\u006c\u0069\u0067\u006eed\u002e\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u003c\u0020\u0025d\u0020\u0078 \u0025\u0064",len (_fggf ),len (_fbgc ),_fceff +1,_bebb +1);
};return nil ,false ;};if _dcdg {_bc .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075a\u006c\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0073\u0020\u003a\u0020\u0025t\u0020\u0026\u0020\u0025\u0074\u0020\u2192 \u0025\u0074",_cdgfd ,len (_fggf )>=2,len (_fbgc )>=2,len (_fggf )>=2&&len (_fbgc )>=2);
for _bcdaa ,_efdcg :=range _cdgfd {_db .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0076\u000a",_bcdaa ,_efdcg );};};if _egbe {_gdgcc ,_dfdc :=_fggf [0],_fggf [len (_fggf )-1];_abce ,_cbdfd :=_fbgc [0],_fbgc [len (_fbgc )-1];if !(_bgddb (_gdgcc ._cbag -_abce ._eagf )&&_bgddb (_dfdc ._cbag -_abce ._adgg )&&_bgddb (_abce ._cbag -_gdgcc ._adgg )&&_bgddb (_cbdfd ._cbag -_gdgcc ._eagf )){if _dcdg {_bc .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069d\u003a\u0020\u0020N\u006f\u0074 \u0061\u006c\u0069\u0067\u006e\u0065d\u002e\n\t\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0076\u0031\u003d\u0025\u0073\u000a\u0009\u0068\u0030\u003d\u0025\u0073\u000a\u0009\u0068\u0031\u003d\u0025\u0073",_gdgcc ,_dfdc ,_abce ,_cbdfd );
};return nil ,false ;};}else {if !_fggf .aligned (){if _bgfee {_bc .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0076\u0065\u0072\u0074\u0073\u002e\u0020%\u0064",len (_fggf ));
};return nil ,false ;};if !_fbgc .aligned (){if _dcdg {_bc .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0068\u006f\u0072\u007a\u0073\u002e\u0020%\u0064",len (_fbgc ));
};return nil ,false ;};};_dbcae :=append (_fggf ,_fbgc ...);return _dbcae ,true ;};

// String returns a description of `w`.
func (_adcb *textWord )String ()string {return _db .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_adcb ._gbgab ,_adcb .PdfRectangle ,_adcb ._cfccf ,_adcb ._dgeda );
};

// Text returns the text content of the `bulletLists`.
func (_cgdf *lists )Text ()string {_cfdf :=&_ce .Builder {};for _ ,_gcga :=range *_cgdf {_eeeb :=_gcga .Text ();_cfdf .WriteString (_eeeb );};return _cfdf .String ();};func (_ccgff rulingList )connections (_ccge map[int ]intSet ,_bfgb int )intSet {_geead :=make (intSet );
_aeceg :=make (intSet );var _addg func (int );_addg =func (_acdgf int ){if !_aeceg .has (_acdgf ){_aeceg .add (_acdgf );for _fbgf :=range _ccgff {if _ccge [_fbgf ].has (_acdgf ){_geead .add (_fbgf );};};for _cdeeb :=range _ccgff {if _geead .has (_cdeeb ){_addg (_cdeeb );
};};};};_addg (_bfgb );return _geead ;};func (_fbfgc *textTable )newTablePara ()*textPara {_gdeb :=_fbfgc .computeBbox ();_aggcg :=&textPara {PdfRectangle :_gdeb ,_eddff :_gdeb ,_fbda :_fbfgc };if _edeg {_bc .Log .Info ("\u006e\u0065w\u0054\u0061\u0062l\u0065\u0050\u0061\u0072\u0061\u003a\u0020\u0025\u0073",_aggcg );
};return _aggcg ;};type paraList []*textPara ;func _cagb (_dceec _e .PdfRectangle )*ruling {return &ruling {_ffada :_cgfba ,_cbag :_dceec .Ury ,_eagf :_dceec .Llx ,_adgg :_dceec .Urx };};func (_bfee *wordBag )highestWord (_ffdf int ,_aceg ,_bebf float64 )*textWord {for _ ,_fcgb :=range _bfee ._fdc [_ffdf ]{if _aceg <=_fcgb ._gbgab &&_fcgb ._gbgab <=_bebf {return _fcgb ;
};};return nil ;};func _bgdbb (_gebcc ,_agae bounded )float64 {return _gebcc .bbox ().Llx -_agae .bbox ().Urx };func (_dccgg rulingList )aligned ()bool {if len (_dccgg )< 2{return false ;};_dfccf :=make (map[*ruling ]int );_dfccf [_dccgg [0]]=0;for _ ,_ccga :=range _dccgg [1:]{_adcd :=false ;
for _daeb :=range _dfccf {if _ccga .gridIntersecting (_daeb ){_dfccf [_daeb ]++;_adcd =true ;break ;};};if !_adcd {_dfccf [_ccga ]=0;};};_agaad :=0;for _ ,_fgcff :=range _dfccf {if _fgcff ==0{_agaad ++;};};_aggb :=float64 (_agaad )/float64 (len (_dccgg ));
_cge :=_aggb <=1.0-_bdggd ;if _dcdg {_bc .Log .Info ("\u0061\u006c\u0069\u0067\u006e\u0065\u0064\u003d\u0025\u0074\u0020\u0075\u006em\u0061\u0074\u0063\u0068\u0065\u0064=\u0025\u002e\u0032\u0066\u003d\u0025\u0064\u002f\u0025\u0064\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_cge ,_aggb ,_agaad ,len (_dccgg ),_dccgg .String ());
};return _cge ;};func _bdaf (_edda ,_dgfag int )int {if _edda < _dgfag {return _edda ;};return _dgfag ;};func (_ccfd TextTable )getCellInfo (_acce TextMark )[][]int {for _cbf ,_fce :=range _ccfd .Cells {for _dbeg ,_dfeb :=range _fce {_adg :=&_dfeb .Marks ;
if _adg .exists (_acce ){return [][]int {{_cbf },{_dbeg }};};};};return nil ;};func _cecf (_bbbg map[int ][]float64 )[]int {_gecf :=make ([]int ,len (_bbbg ));_ebgaa :=0;for _agegg :=range _bbbg {_gecf [_ebgaa ]=_agegg ;_ebgaa ++;};_d .Ints (_gecf );return _gecf ;
};func (_eddgd *textTable )growTable (){_cbadg :=func (_aaeae paraList ){_eddgd ._gaafe ++;for _ecefb :=0;_ecefb < _eddgd ._afde ;_ecefb ++{_eaaaa :=_aaeae [_ecefb ];_eddgd .put (_ecefb ,_eddgd ._gaafe -1,_eaaaa );};};_bgec :=func (_adfag paraList ){_eddgd ._afde ++;
for _fgaca :=0;_fgaca < _eddgd ._gaafe ;_fgaca ++{_dagc :=_adfag [_fgaca ];_eddgd .put (_eddgd ._afde -1,_fgaca ,_dagc );};};if _aggcc {_eddgd .log ("\u0067r\u006f\u0077\u0054\u0061\u0062\u006ce");};for _gbcac :=0;;_gbcac ++{_cccd :=false ;_agbea :=_eddgd .getDown ();
_beeg :=_eddgd .getRight ();if _aggcc {_db .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gbcac ,_eddgd );_db .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0020\u0064\u006f\u0077\u006e\u003d\u0025\u0073\u000a",_agbea );_db .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0072\u0069\u0067\u0068\u0074\u003d\u0025\u0073\u000a",_beeg );
};if _agbea !=nil &&_beeg !=nil {_cegb :=_agbea [len (_agbea )-1];if !_cegb .taken ()&&_cegb ==_beeg [len (_beeg )-1]{_cbadg (_agbea );if _beeg =_eddgd .getRight ();_beeg !=nil {_bgec (_beeg );_eddgd .put (_eddgd ._afde -1,_eddgd ._gaafe -1,_cegb );};_cccd =true ;
};};if !_cccd &&_agbea !=nil {_cbadg (_agbea );_cccd =true ;};if !_cccd &&_beeg !=nil {_bgec (_beeg );_cccd =true ;};if !_cccd {break ;};};};var _ffbc =map[rulingKind ]string {_deee :"\u006e\u006f\u006e\u0065",_cgfba :"\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_dfdb :"\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c"};
func (_faae *wordBag )getDepthIdx (_dgfg float64 )int {_fgda :=_faae .depthIndexes ();_acega :=_fgbf (_dgfg );if _acega < _fgda [0]{return _fgda [0];};if _acega > _fgda [len (_fgda )-1]{return _fgda [len (_fgda )-1];};return _acega ;};

// TableCell is a cell in a TextTable.
type TableCell struct{_e .PdfRectangle ;

// Text is the extracted text.
Text string ;

// Marks returns the TextMarks corresponding to the text in Text.
Marks TextMarkArray ;};func _bcb (_fac []*textWord ,_ffag float64 ,_dggf ,_acbc rulingList )*wordBag {_bgbb :=_dgeg (_fac [0],_ffag ,_dggf ,_acbc );for _ ,_dcee :=range _fac [1:]{_bbe :=_fgbf (_dcee ._gbgab );_bgbb ._fdc [_bbe ]=append (_bgbb ._fdc [_bbe ],_dcee );
_bgbb .PdfRectangle =_dbef (_bgbb .PdfRectangle ,_dcee .PdfRectangle );};_bgbb .sort ();return _bgbb ;};func (_dbce *imageExtractContext )processOperand (_ecg *_ac .ContentStreamOperation ,_cbgc _ac .GraphicsState ,_dfab *_e .PdfPageResources )error {if _ecg .Operand =="\u0042\u0049"&&len (_ecg .Params )==1{_gbc ,_bgd :=_ecg .Params [0].(*_ac .ContentStreamInlineImage );
if !_bgd {return nil ;};if _aga ,_gce :=_bgf .GetBoolVal (_gbc .ImageMask );_gce {if _aga &&!_dbce ._ccdc .IncludeInlineStencilMasks {return nil ;};};return _dbce .extractInlineImage (_gbc ,_cbgc ,_dfab );}else if _ecg .Operand =="\u0044\u006f"&&len (_ecg .Params )==1{_cbaa ,_cfb :=_bgf .GetName (_ecg .Params [0]);
if !_cfb {_bc .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");return _df ;};_ ,_fgb :=_dfab .GetXObjectByName (*_cbaa );switch _fgb {case _e .XObjectTypeImage :return _dbce .extractXObjectImage (_cbaa ,_cbgc ,_dfab );case _e .XObjectTypeForm :return _dbce .extractFormImages (_cbaa ,_cbgc ,_dfab );
};}else if _dbce ._aea &&(_ecg .Operand =="\u0073\u0063\u006e"||_ecg .Operand =="\u0053\u0043\u004e")&&len (_ecg .Params )==1{_cfd ,_efb :=_bgf .GetName (_ecg .Params [0]);if !_efb {_bc .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");
return _df ;};_ceg ,_efb :=_dfab .GetPatternByName (*_cfd );if !_efb {_bc .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0050\u0061\u0074\u0074\u0065\u0072n\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");return nil ;};if _ceg .IsTiling (){_eef :=_ceg .GetAsTilingPattern ();
_ddg ,_dda :=_eef .GetContentStream ();if _dda !=nil {return _dda ;};_dda =_dbce .extractContentStreamImages (string (_ddg ),_eef .Resources );if _dda !=nil {return _dda ;};};}else if (_ecg .Operand =="\u0063\u0073"||_ecg .Operand =="\u0043\u0053")&&len (_ecg .Params )>=1{_dbce ._aea =_ecg .Params [0].String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e";
};return nil ;};func (_fgd *subpath )last ()_ee .Point {return _fgd ._gcfd [len (_fgd ._gcfd )-1]};func (_bbfe *textWord )computeText ()string {_affda :=make ([]string ,len (_bbfe ._ggegd ));for _cgde ,_fbed :=range _bbfe ._ggegd {_affda [_cgde ]=_fbed ._adag ;
};return _ce .Join (_affda ,"");};func _aefad (_cbfed []compositeCell )[]float64 {var _bebbe []*textLine ;_dffbd :=0;for _ ,_cecbf :=range _cbfed {_dffbd +=len (_cecbf .paraList );_bebbe =append (_bebbe ,_cecbf .lines ()...);};_d .Slice (_bebbe ,func (_edaed ,_fbec int )bool {_eaeg ,_dgdb :=_bebbe [_edaed ],_bebbe [_fbec ];
_fdeb ,_ebade :=_eaeg ._ebee ,_dgdb ._ebee ;if !_ffagb (_fdeb -_ebade ){return _fdeb < _ebade ;};return _eaeg .Llx < _dgdb .Llx ;});if _edeg {_db .Printf ("\u0020\u0020\u0020 r\u006f\u0077\u0042\u006f\u0072\u0064\u0065\u0072\u0073:\u0020%\u0064 \u0070a\u0072\u0061\u0073\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",_dffbd ,len (_bebbe ));
for _eafef ,_ecaf :=range _bebbe {_db .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_eafef ,_ecaf );};};var _baaee []float64 ;_ecgbc :=_bebbe [0];var _gefb [][]*textLine ;_fbdb :=[]*textLine {_ecgbc };for _dcgc ,_gfeg :=range _bebbe [1:]{if _gfeg .Ury < _ecgbc .Lly {_eeebg :=0.5*(_gfeg .Ury +_ecgbc .Lly );
if _edeg {_db .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u003c\u0020\u0025\u0036.\u0032f\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u003d\u0025\u0036\u002e\u0032\u0066\u000a"+"\u0009\u0020\u0071\u003d\u0025\u0073\u000a\u0009\u0020p\u003d\u0025\u0073\u000a",_dcgc ,_gfeg .Ury ,_ecgbc .Lly ,_eeebg ,_ecgbc ,_gfeg );
};_baaee =append (_baaee ,_eeebg );_gefb =append (_gefb ,_fbdb );_fbdb =nil ;};_fbdb =append (_fbdb ,_gfeg );if _gfeg .Lly < _ecgbc .Lly {_ecgbc =_gfeg ;};};if len (_fbdb )> 0{_gefb =append (_gefb ,_fbdb );};if _edeg {_db .Printf (" \u0020\u0020\u0020\u0020\u0020\u0020 \u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073\u003d%\u0036.\u0032\u0066\u000a",_baaee );
};if _edeg {_bc .Log .Info ("\u0072\u006f\u0077\u003d\u0025\u0064",len (_cbfed ));for _fgce ,_aegefd :=range _cbfed {_db .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fgce ,_aegefd );};_bc .Log .Info ("\u0067r\u006f\u0075\u0070\u0073\u003d\u0025d",len (_gefb ));
for _accec ,_geaa :=range _gefb {_db .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0064\u000a",_accec ,len (_geaa ));for _aebfb ,_ceag :=range _geaa {_db .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_aebfb ,_ceag );};};};_dgacd :=true ;
for _ffaff ,_gbbfg :=range _gefb {_dfcd :=true ;for _gdda ,_dgfe :=range _cbfed {if _edeg {_db .Printf ("\u0020\u0020\u0020\u007e\u007e\u007e\u0067\u0072\u006f\u0075\u0070\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0020\u0063\u0065\u006cl\u0020\u0025\u0064\u0020\u006ff\u0020\u0025d\u0020\u0025\u0073\u000a",_ffaff ,len (_gefb ),_gdda ,len (_cbfed ),_dgfe );
};if !_dgfe .hasLines (_gbbfg ){if _edeg {_db .Printf ("\u0020\u0020\u0020\u0021\u0021\u0021\u0067\u0072\u006f\u0075\u0070\u0020\u0025d\u0020\u006f\u0066\u0020\u0025\u0064 \u0063\u0065\u006c\u006c\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064 \u004f\u0055\u0054\u000a",_ffaff ,len (_gefb ),_gdda ,len (_cbfed ));
};_dfcd =false ;break ;};};if !_dfcd {_dgacd =false ;break ;};};if !_dgacd {if _edeg {_bc .Log .Info ("\u0072\u006f\u0077\u0020\u0063o\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u0020\u0064\u006f\u006e\u0027\u0074 \u0073\u0070\u0061\u006e\u0020\u0061\u006c\u006c\u0020\u0063\u0065\u006c\u006c\u0073\u0020\u0069\u006e\u0020\u0072\u006f\u0077\u002e\u0020\u0069\u0067\u006e\u006f\u0072\u0069\u006eg");
};_baaee =nil ;};if _edeg &&_baaee !=nil {_db .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u002a\u002a*\u0072\u006f\u0077\u0043\u006f\u0072\u0072i\u0064\u006f\u0072\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u000a",_baaee );};return _baaee ;
};

// Tables returns the tables extracted from the page.
func (_gaag PageText )Tables ()[]TextTable {if _edeg {_bc .Log .Info ("\u0054\u0061\u0062\u006c\u0065\u0073\u003a\u0020\u0025\u0064",len (_gaag ._beda ));};return _gaag ._beda ;};func (_fedc *TextMarkArray )getTextMarkAtOffset (_aafb int )*TextMark {for _ ,_dgaa :=range _fedc ._egfb {if _dgaa .Offset ==_aafb {return &_dgaa ;
};};return nil ;};func (_cfdad *textTable )getComposite (_fbfbb ,_egga int )(paraList ,_e .PdfRectangle ){_fgcc ,_ddeg :=_cfdad ._abaeg [_gcaf (_fbfbb ,_egga )];if _edeg {_db .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0067\u0065\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u002d\u003e\u0025\u0073\u000a",_fbfbb ,_egga ,_fgcc .String ());
};if !_ddeg {return nil ,_e .PdfRectangle {};};return _fgcc .parasBBox ();};type subpath struct{_gcfd []_ee .Point ;_fbaf bool ;};

// String returns a human readable description of `vecs`.
func (_fbce rulingList )String ()string {if len (_fbce )==0{return "\u007b \u0045\u004d\u0050\u0054\u0059\u0020}";};_ebeed ,_cgee :=_fbce .vertsHorzs ();_dcda :=len (_ebeed );_eaaca :=len (_cgee );if _dcda ==0||_eaaca ==0{return _db .Sprintf ("\u007b%\u0064\u0020\u0078\u0020\u0025\u0064}",_dcda ,_eaaca );
};_ddeb :=_e .PdfRectangle {Llx :_ebeed [0]._cbag ,Urx :_ebeed [_dcda -1]._cbag ,Lly :_cgee [_eaaca -1]._cbag ,Ury :_cgee [0]._cbag };return _db .Sprintf ("\u007b\u0025d\u0020\u0078\u0020%\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u007d",_dcda ,_eaaca ,_ddeb );
};func (_feea rulingList )bbox ()_e .PdfRectangle {var _bcadb _e .PdfRectangle ;if len (_feea )==0{_bc .Log .Error ("r\u0075\u006c\u0069\u006e\u0067\u004ci\u0073\u0074\u002e\u0062\u0062\u006f\u0078\u003a\u0020n\u006f\u0020\u0072u\u006ci\u006e\u0067\u0073");
return _e .PdfRectangle {};};if _feea [0]._ffada ==_cgfba {_bcadb .Llx ,_bcadb .Urx =_feea .secMinMax ();_bcadb .Lly ,_bcadb .Ury =_feea .primMinMax ();}else {_bcadb .Llx ,_bcadb .Urx =_feea .primMinMax ();_bcadb .Lly ,_bcadb .Ury =_feea .secMinMax ();
};return _bcadb ;};type rulingList []*ruling ;func (_cggeb *structTreeRoot )parseStructTreeRoot (_fcce _bgf .PdfObject ){if _fcce !=nil {_ccca ,_fgaa :=_bgf .GetDict (_fcce );if !_fgaa {_bc .Log .Debug ("\u0070\u0061\u0072s\u0065\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u003a\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u006eo\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");
};K :=_ccca .Get ("\u004b");_agega :=_ccca .Get ("\u0054\u0079\u0070\u0065").String ();var _edce *_bgf .PdfObjectArray ;switch _cdde :=K .(type ){case *_bgf .PdfObjectArray :_edce =_cdde ;case *_bgf .PdfObjectReference :_edce =_bgf .MakeArray (K );};_fgbc :=[]structElement {};
for _ ,_eega :=range _edce .Elements (){_gaad :=&structElement {};_gaad .parseStructElement (_eega );_fgbc =append (_fgbc ,*_gaad );};_cggeb ._dceb =_fgbc ;_cggeb ._cfbc =_agega ;};};func (_efdd *textObject )setHorizScaling (_dggg float64 ){if _efdd ==nil {return ;
};_efdd ._degc ._ecef =_dggg ;};func (_cacf paraList )writeText (_dadg _f .Writer ){for _fbcc ,_dbecc :=range _cacf {if _dbecc ._ecfbe {continue ;};_dbecc .writeText (_dadg );if _fbcc !=len (_cacf )-1{if _ddgdba (_dbecc ,_cacf [_fbcc +1]){_dadg .Write ([]byte ("\u0020"));
}else {_dadg .Write ([]byte ("\u000a"));_dadg .Write ([]byte ("\u000a"));};};};_dadg .Write ([]byte ("\u000a"));_dadg .Write ([]byte ("\u000a"));};func (_fafff paraList )eventNeighbours (_edaf []event )map[*textPara ][]int {_d .Slice (_edaf ,func (_cbee ,_fdfd int )bool {_aebbf ,_gfdf :=_edaf [_cbee ],_edaf [_fdfd ];
_bdfea ,_ccdd :=_aebbf ._cbfea ,_gfdf ._cbfea ;if _bdfea !=_ccdd {return _bdfea < _ccdd ;};if _aebbf ._edbfd !=_gfdf ._edbfd {return _aebbf ._edbfd ;};return _cbee < _fdfd ;});_ebfcb :=make (map[int ]intSet );_fbcbc :=make (intSet );for _ ,_bgaeb :=range _edaf {if _bgaeb ._edbfd {_ebfcb [_bgaeb ._dgbe ]=make (intSet );
for _fadd :=range _fbcbc {if _fadd !=_bgaeb ._dgbe {_ebfcb [_bgaeb ._dgbe ].add (_fadd );_ebfcb [_fadd ].add (_bgaeb ._dgbe );};};_fbcbc .add (_bgaeb ._dgbe );}else {_fbcbc .del (_bgaeb ._dgbe );};};_facdg :=map[*textPara ][]int {};for _gbeg ,_dabb :=range _ebfcb {_ebeba :=_fafff [_gbeg ];
if len (_dabb )==0{_facdg [_ebeba ]=nil ;continue ;};_gdefa :=make ([]int ,len (_dabb ));_gfbgb :=0;for _aeafe :=range _dabb {_gdefa [_gfbgb ]=_aeafe ;_gfbgb ++;};_facdg [_ebeba ]=_gdefa ;};return _facdg ;};func _eaccge (_edfff _e .PdfColorspace ,_bgag _e .PdfColor )_dg .Color {if _edfff ==nil ||_bgag ==nil {return _dg .Black ;
};_addcc ,_aaedf :=_edfff .ColorToRGB (_bgag );if _aaedf !=nil {_bc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006fu\u006c\u0064\u0020no\u0074\u0020\u0063\u006f\u006e\u0076e\u0072\u0074\u0020\u0063\u006f\u006c\u006f\u0072\u0020\u0025\u0076\u0020\u0028\u0025\u0076)\u0020\u0074\u006f\u0020\u0052\u0047\u0042\u003a \u0025\u0073",_bgag ,_edfff ,_aaedf );
return _dg .Black ;};_dgggf ,_ffgbc :=_addcc .(*_e .PdfColorDeviceRGB );if !_ffgbc {_bc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0065\u0064 \u0063\u006f\u006c\u006f\u0072\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020i\u006e\u0020\u0074\u0068\u0065\u0020\u0052\u0047\u0042\u0020\u0063\u006flo\u0072\u0073\u0070\u0061\u0063\u0065\u003a\u0020\u0025\u0076",_addcc );
return _dg .Black ;};return _dg .NRGBA {R :uint8 (_dgggf .R ()*255),G :uint8 (_dgggf .G ()*255),B :uint8 (_dgggf .B ()*255),A :uint8 (255)};};func (_eabeb paraList )sortReadingOrder (){_bc .Log .Trace ("\u0073\u006fr\u0074\u0052\u0065\u0061\u0064i\u006e\u0067\u004f\u0072\u0064e\u0072\u003a\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_eabeb ));
if len (_eabeb )<=1{return ;};_eabeb .computeEBBoxes ();_d .Slice (_eabeb ,func (_cddd ,_dfbga int )bool {return _ebfg (_eabeb [_cddd ],_eabeb [_dfbga ])<=0});};func (_ffad *textObject )setTextRenderMode (_gdc int ){if _ffad ==nil {return ;};_ffad ._degc ._agc =RenderMode (_gdc );
};func _geece (_egfcg []int )[]int {_cgbd :=make ([]int ,len (_egfcg ));for _bdaec ,_bega :=range _egfcg {_cgbd [len (_egfcg )-1-_bdaec ]=_bega ;};return _cgbd ;};func (_abgcd *textObject )newTextMark (_gdee string ,_acec _ee .Matrix ,_gag _ee .Point ,_caeb float64 ,_ffdd *_e .PdfFont ,_dcag float64 ,_bdcb ,_ffdg _dg .Color ,_cbddf _bgf .PdfObject ,_egg []string ,_cfag int ,_abfe int )(textMark ,bool ){_efeda :=_acec .Angle ();
_eege :=_aaade (_efeda ,_dbfa );var _baag float64 ;if _eege %180!=90{_baag =_acec .ScalingFactorY ();}else {_baag =_acec .ScalingFactorX ();};_cebff :=_cda (_acec );_fdda :=_e .PdfRectangle {Llx :_cebff .X ,Lly :_cebff .Y ,Urx :_gag .X ,Ury :_gag .Y };
switch _eege %360{case 90:_fdda .Urx -=_baag ;case 180:_fdda .Ury -=_baag ;case 270:_fdda .Urx +=_baag ;case 0:_fdda .Ury +=_baag ;default:_eege =0;_fdda .Ury +=_baag ;};if _fdda .Llx > _fdda .Urx {_fdda .Llx ,_fdda .Urx =_fdda .Urx ,_fdda .Llx ;};if _fdda .Lly > _fdda .Ury {_fdda .Lly ,_fdda .Ury =_fdda .Ury ,_fdda .Lly ;
};_eggc :=true ;if _abgcd ._faf ._dea .Width ()> 0{_gbdbe ,_gdfgf :=_ccgbc (_fdda ,_abgcd ._faf ._dea );if !_gdfgf {_eggc =false ;_bc .Log .Debug ("\u0054\u0065\u0078\u0074\u0020m\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069\u0064\u0065\u0020\u0070a\u0067\u0065\u002e\u0020\u0062\u0062\u006f\u0078\u003d\u0025\u0067\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u003d\u0025\u0067\u0020\u0074\u0065\u0078\u0074\u003d\u0025q",_fdda ,_abgcd ._faf ._dea ,_gdee );
};_fdda =_gbdbe ;};_fged :=_fdda ;_affbg :=_abgcd ._faf ._dea ;switch _eege %360{case 90:_affbg .Urx ,_affbg .Ury =_affbg .Ury ,_affbg .Urx ;_fged =_e .PdfRectangle {Llx :_affbg .Urx -_fdda .Ury ,Urx :_affbg .Urx -_fdda .Lly ,Lly :_fdda .Llx ,Ury :_fdda .Urx };
case 180:_fged =_e .PdfRectangle {Llx :_affbg .Urx -_fdda .Llx ,Urx :_affbg .Urx -_fdda .Urx ,Lly :_affbg .Ury -_fdda .Lly ,Ury :_affbg .Ury -_fdda .Ury };case 270:_affbg .Urx ,_affbg .Ury =_affbg .Ury ,_affbg .Urx ;_fged =_e .PdfRectangle {Llx :_fdda .Ury ,Urx :_fdda .Lly ,Lly :_affbg .Ury -_fdda .Llx ,Ury :_affbg .Ury -_fdda .Urx };
};if _fged .Llx > _fged .Urx {_fged .Llx ,_fged .Urx =_fged .Urx ,_fged .Llx ;};if _fged .Lly > _fged .Ury {_fged .Lly ,_fged .Ury =_fged .Ury ,_fged .Lly ;};_fbab :=textMark {_adag :_gdee ,PdfRectangle :_fged ,_fcf :_fdda ,_fbeg :_ffdd ,_ddgdb :_baag ,_dcac :_dcag ,_ceec :_acec ,_bdaa :_gag ,_ccbec :_eege ,_dagb :_bdcb ,_cdda :_ffdg ,_gfec :_cbddf ,_gafe :_egg ,Th :_abgcd ._degc ._ecef ,Tw :_abgcd ._degc ._bgfba ,_ccdcf :_abfe ,_bcaf :_cfag };
if _aeaa {_bc .Log .Info ("n\u0065\u0077\u0054\u0065\u0078\u0074M\u0061\u0072\u006b\u003a\u0020\u0073t\u0061\u0072\u0074\u003d\u0025\u002e\u0032f\u0020\u0065\u006e\u0064\u003d\u0025\u002e\u0032\u0066\u0020%\u0073",_cebff ,_gag ,_fbab .String ());};return _fbab ,_eggc ;
};func (_gacge *textTable )getDown ()paraList {_cacad :=make (paraList ,_gacge ._afde );for _ddbb :=0;_ddbb < _gacge ._afde ;_ddbb ++{_ccdf :=_gacge .get (_ddbb ,_gacge ._gaafe -1)._gccaae ;if _ccdf .taken (){return nil ;};_cacad [_ddbb ]=_ccdf ;};for _cdcfd :=0;
_cdcfd < _gacge ._afde -1;_cdcfd ++{if _cacad [_cdcfd ]._gabd !=_cacad [_cdcfd +1]{return nil ;};};return _cacad ;};func _cadbd (_fgac []rulingList )(rulingList ,rulingList ){var _afece rulingList ;for _ ,_ggfb :=range _fgac {_afece =append (_afece ,_ggfb ...);
};return _afece .vertsHorzs ();};func (_fdefg paraList )addNeighbours (){_becb :=func (_bgac []int ,_ccac *textPara )([]*textPara ,[]*textPara ){_dgbga :=make ([]*textPara ,0,len (_bgac )-1);_gadec :=make ([]*textPara ,0,len (_bgac )-1);for _ ,_deef :=range _bgac {_gfdd :=_fdefg [_deef ];
if _gfdd .Urx <=_ccac .Llx {_dgbga =append (_dgbga ,_gfdd );}else if _gfdd .Llx >=_ccac .Urx {_gadec =append (_gadec ,_gfdd );};};return _dgbga ,_gadec ;};_egdfb :=func (_dbace []int ,_begg *textPara )([]*textPara ,[]*textPara ){_bceb :=make ([]*textPara ,0,len (_dbace )-1);
_cgfa :=make ([]*textPara ,0,len (_dbace )-1);for _ ,_deea :=range _dbace {_bbeed :=_fdefg [_deea ];if _bbeed .Ury <=_begg .Lly {_cgfa =append (_cgfa ,_bbeed );}else if _bbeed .Lly >=_begg .Ury {_bceb =append (_bceb ,_bbeed );};};return _bceb ,_cgfa ;};
_edge :=_fdefg .yNeighbours (_ecfc );for _ ,_bbfcc :=range _fdefg {_abeca :=_edge [_bbfcc ];if len (_abeca )==0{continue ;};_eddd ,_ebdb :=_becb (_abeca ,_bbfcc );if len (_eddd )==0&&len (_ebdb )==0{continue ;};if len (_eddd )> 0{_agafa :=_eddd [0];for _ ,_gcgcb :=range _eddd [1:]{if _gcgcb .Urx >=_agafa .Urx {_agafa =_gcgcb ;
};};for _ ,_eggdc :=range _eddd {if _eggdc !=_agafa &&_eggdc .Urx > _agafa .Llx {_agafa =nil ;break ;};};if _agafa !=nil &&_gbbg (_bbfcc .PdfRectangle ,_agafa .PdfRectangle ){_bbfcc ._faea =_agafa ;};};if len (_ebdb )> 0{_faaef :=_ebdb [0];for _ ,_dgbde :=range _ebdb [1:]{if _dgbde .Llx <=_faaef .Llx {_faaef =_dgbde ;
};};for _ ,_bcdgc :=range _ebdb {if _bcdgc !=_faaef &&_bcdgc .Llx < _faaef .Urx {_faaef =nil ;break ;};};if _faaef !=nil &&_gbbg (_bbfcc .PdfRectangle ,_faaef .PdfRectangle ){_bbfcc ._gabd =_faaef ;};};};_edge =_fdefg .xNeighbours (_cgcf );for _ ,_fbefg :=range _fdefg {_affef :=_edge [_fbefg ];
if len (_affef )==0{continue ;};_fabf ,_ecgf :=_egdfb (_affef ,_fbefg );if len (_fabf )==0&&len (_ecgf )==0{continue ;};if len (_ecgf )> 0{_fadbc :=_ecgf [0];for _ ,_acgb :=range _ecgf [1:]{if _acgb .Ury >=_fadbc .Ury {_fadbc =_acgb ;};};for _ ,_facfe :=range _ecgf {if _facfe !=_fadbc &&_facfe .Ury > _fadbc .Lly {_fadbc =nil ;
break ;};};if _fadbc !=nil &&_cbgd (_fbefg .PdfRectangle ,_fadbc .PdfRectangle ){_fbefg ._gccaae =_fadbc ;};};if len (_fabf )> 0{_gbgf :=_fabf [0];for _ ,_affc :=range _fabf [1:]{if _affc .Lly <=_gbgf .Lly {_gbgf =_affc ;};};for _ ,_cdea :=range _fabf {if _cdea !=_gbgf &&_cdea .Lly < _gbgf .Ury {_gbgf =nil ;
break ;};};if _gbgf !=nil &&_cbgd (_fbefg .PdfRectangle ,_gbgf .PdfRectangle ){_fbefg ._bbgcc =_gbgf ;};};};for _ ,_gfceb :=range _fdefg {if _gfceb ._faea !=nil &&_gfceb ._faea ._gabd !=_gfceb {_gfceb ._faea =nil ;};if _gfceb ._bbgcc !=nil &&_gfceb ._bbgcc ._gccaae !=_gfceb {_gfceb ._bbgcc =nil ;
};if _gfceb ._gabd !=nil &&_gfceb ._gabd ._faea !=_gfceb {_gfceb ._gabd =nil ;};if _gfceb ._gccaae !=nil &&_gfceb ._gccaae ._bbgcc !=_gfceb {_gfceb ._gccaae =nil ;};};};func _aeced (_ceeb ,_effag float64 )string {_fegg :=!_ffagb (_ceeb -_effag );if _fegg {return "\u000a";
};return "\u0020";};func _bag (_gccaa []*textLine )map[float64 ][]*textLine {_d .Slice (_gccaa ,func (_effcc ,_ddecb int )bool {return _gccaa [_effcc ]._ebee < _gccaa [_ddecb ]._ebee });_ddfe :=map[float64 ][]*textLine {};for _ ,_cbcg :=range _gccaa {_bdfc :=_bbea (_cbcg );
_bdfc =_bg .Round (_bdfc );_ddfe [_bdfc ]=append (_ddfe [_bdfc ],_cbcg );};return _ddfe ;};func _fagf (_bbeeb []pathSection ){if _ecc < 0.0{return ;};if _dcdg {_bc .Log .Info ("\u0067\u0072\u0061\u006e\u0075\u006c\u0061\u0072\u0069\u007a\u0065\u003a\u0020\u0025\u0064 \u0073u\u0062\u0070\u0061\u0074\u0068\u0020\u0073\u0065\u0063\u0074\u0069\u006f\u006e\u0073",len (_bbeeb ));
};for _dedgg ,_fbca :=range _bbeeb {for _ggaac ,_bgdgd :=range _fbca ._dgcdf {for _gdedf ,_gcgg :=range _bgdgd ._gcfd {_bgdgd ._gcfd [_gdedf ]=_ee .Point {X :_bfdfe (_gcgg .X ),Y :_bfdfe (_gcgg .Y )};if _dcdg {_aggfd :=_bgdgd ._gcfd [_gdedf ];if !_aebab (_gcgg ,_aggfd ){_egeae :=_ee .Point {X :_aggfd .X -_gcgg .X ,Y :_aggfd .Y -_gcgg .Y };
_db .Printf ("\u0025\u0034d \u002d\u0020\u00254\u0064\u0020\u002d\u0020%4d\u003a %\u002e\u0032\u0066\u0020\u2192\u0020\u0025.2\u0066\u0020\u0028\u0025\u0067\u0029\u000a",_dedgg ,_ggaac ,_gdedf ,_gcgg ,_aggfd ,_egeae );};};};};};};func _ddgdba (_fcdc ,_gfece *textPara )bool {if _fcdc ._ecfbe ||_gfece ._ecfbe {return true ;
};return _ffagb (_fcdc .depth ()-_gfece .depth ());};func (_fabc *structTreeRoot )buildList (_cecd map[int ][]*textLine ,_cecg _bgf .PdfObject )[]*list {if _fabc ==nil {_bc .Log .Debug ("\u0062\u0075\u0069\u006c\u0064\u004c\u0069\u0073\u0074\u003a\u0020t\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0069\u0073 \u006e\u0069\u006c");
return nil ;};var _dgege *structElement ;_dgea :=[]structElement {};if len (_fabc ._dceb )==1{_ffafc :=_fabc ._dceb [0]._cdaf ;if _ffafc =="\u0044\u006f\u0063\u0075\u006d\u0065\u006e\u0074"||_ffafc =="\u0053\u0065\u0063\u0074"||_ffafc =="\u0050\u0061\u0072\u0074"||_ffafc =="\u0044\u0069\u0076"||_ffafc =="\u0041\u0072\u0074"{_dgege =&_fabc ._dceb [0];
};}else {_dgege =&structElement {_aeaaf :_fabc ._dceb ,_cdaf :_fabc ._cfbc };};if _dgege ==nil {_bc .Log .Debug ("\u0062\u0075\u0069\u006cd\u004c\u0069\u0073\u0074\u003a\u0020\u0074\u006f\u0070\u0045l\u0065m\u0065\u006e\u0074\u0020\u0069\u0073\u0020n\u0069\u006c");
return nil ;};for _ ,_dbfd :=range _dgege ._aeaaf {if _dbfd ._cdaf =="\u004c"{_dgea =append (_dgea ,_dbfd );}else if _dbfd ._cdaf =="\u0054\u0061\u0062l\u0065"{_dega :=_eada (_dbfd );_dgea =append (_dgea ,_dega ...);};};_bfafe :=_ddgd (_dgea ,_cecd ,_cecg );
var _cabc []*list ;for _ ,_cegdc :=range _bfafe {_cbfad :=_eebe (_cegdc );_cabc =append (_cabc ,_cbfad ...);};return _cabc ;};func (_ccbg lineRuling )asRuling ()(*ruling ,bool ){_febg :=ruling {_ffada :_ccbg ._abea ,Color :_ccbg .Color ,_dfcb :_ddadb };
switch _ccbg ._abea {case _dfdb :_febg ._cbag =_ccbg .xMean ();_febg ._eagf =_bg .Min (_ccbg ._badd .Y ,_ccbg ._becc .Y );_febg ._adgg =_bg .Max (_ccbg ._badd .Y ,_ccbg ._becc .Y );case _cgfba :_febg ._cbag =_ccbg .yMean ();_febg ._eagf =_bg .Min (_ccbg ._badd .X ,_ccbg ._becc .X );
_febg ._adgg =_bg .Max (_ccbg ._badd .X ,_ccbg ._becc .X );default:_bc .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_ccbg ._abea );return nil ,false ;};return &_febg ,true ;};func _bbea (_acdg *textLine )float64 {return _acdg ._gdg [0].Llx };
func (_daddc rulingList )comp (_bgaaea ,_gfae int )bool {_ggag ,_dgfgd :=_daddc [_bgaaea ],_daddc [_gfae ];_aebc ,_cacc :=_ggag ._ffada ,_dgfgd ._ffada ;if _aebc !=_cacc {return _aebc > _cacc ;};if _aebc ==_deee {return false ;};_cbcgd :=func (_efca bool )bool {if _aebc ==_cgfba {return _efca ;
};return !_efca ;};_cegef ,_bffge :=_ggag ._cbag ,_dgfgd ._cbag ;if _cegef !=_bffge {return _cbcgd (_cegef > _bffge );};_cegef ,_bffge =_ggag ._eagf ,_dgfgd ._eagf ;if _cegef !=_bffge {return _cbcgd (_cegef < _bffge );};return _cbcgd (_ggag ._adgg < _dgfgd ._adgg );
};func _eca (_ecgeb _e .PdfRectangle )textState {return textState {_ecef :100,_agc :RenderModeFill ,_ddcdb :_ecgeb };};func (_beg *textObject )moveText (_cbdd ,_ddcg float64 ){_beg .moveLP (_cbdd ,_ddcg )};func (_fcg *textObject )showText (_cgf _bgf .PdfObject ,_gfc []byte ,_ece int )error {return _fcg .renderText (_cgf ,_gfc ,_ece );
};var _eabc =_ad .MustCompile ("\u005e\u005c\u0073\u002a\u0028\u005c\u0064\u002b\u005c\u002e\u003f|\u005b\u0049\u0069\u0076\u005d\u002b\u0029\u005c\u0073\u002a\\\u0029\u003f\u0024");func _bdeb (_acfcg []TextMark ,_fagd *TextTable )[]TextMark {var _feca []TextMark ;
for _ ,_gfff :=range _acfcg {_gfff ._baeb =true ;_gfff ._dabf =_fagd ;_feca =append (_feca ,_gfff );};return _feca ;};func (_ecb *stateStack )pop ()*textState {if _ecb .empty (){return nil ;};_cdc :=*(*_ecb )[len (*_ecb )-1];*_ecb =(*_ecb )[:len (*_ecb )-1];
return &_cdc ;};func (_bcge *textLine )markWordBoundaries (){_dcec :=_ecbb *_bcge ._gebg ;for _cfgd ,_gcfa :=range _bcge ._gdg [1:]{if _bgdbb (_gcfa ,_bcge ._gdg [_cfgd ])>=_dcec {_gcfa ._ddbd =true ;};};};func (_deadd *textTable )subdivide ()*textTable {_deadd .logComposite ("\u0073u\u0062\u0064\u0069\u0076\u0069\u0064e");
_bfbf :=_deadd .compositeRowCorridors ();_eddgdd :=_deadd .compositeColCorridors ();if _edeg {_bc .Log .Info ("\u0073u\u0062\u0064i\u0076\u0069\u0064\u0065:\u000a\u0009\u0072o\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s=\u0025\u0073\u000a\t\u0063\u006fl\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073=\u0025\u0073",_bgeg (_bfbf ),_bgeg (_eddgdd ));
};if len (_bfbf )==0||len (_eddgdd )==0{return _deadd ;};_gceag (_bfbf );_gceag (_eddgdd );if _edeg {_bc .Log .Info ("\u0073\u0075\u0062\u0064\u0069\u0076\u0069\u0064\u0065\u0020\u0066\u0069\u0078\u0065\u0064\u003a\u000a\u0009r\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073\u003d\u0025\u0073\u000a\u0009\u0063\u006f\u006cC\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d\u0025\u0073",_bgeg (_bfbf ),_bgeg (_eddgdd ));
};_fbdef ,_edefd :=_gfag (_deadd ._gaafe ,_bfbf );_cbdff ,_cdca :=_gfag (_deadd ._afde ,_eddgdd );_dbde :=make (map[uint64 ]*textPara ,_cdca *_edefd );_dfdcf :=&textTable {PdfRectangle :_deadd .PdfRectangle ,_ffdbb :_deadd ._ffdbb ,_gaafe :_edefd ,_afde :_cdca ,_abgb :_dbde };
if _edeg {_bc .Log .Info ("\u0073\u0075b\u0064\u0069\u0076\u0069\u0064\u0065\u003a\u0020\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0063\u0065\u006c\u006c\u0073\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0079\u004f\u0066\u0066\u0073\u0065\u0074\u0073=\u0025\u002b\u0076\u000a"+"\u0009\u0078\u004f\u0066\u0066\u0073\u0065\u0074\u0073\u003d\u0025\u002b\u0076",_deadd ._afde ,_deadd ._gaafe ,_cdca ,_edefd ,_bgeg (_bfbf ),_bgeg (_eddgdd ),_fbdef ,_cbdff );
};for _baggb :=0;_baggb < _deadd ._gaafe ;_baggb ++{_ebac :=_fbdef [_baggb ];for _aceba :=0;_aceba < _deadd ._afde ;_aceba ++{_accde :=_cbdff [_aceba ];if _edeg {_db .Printf ("\u0025\u0036\u0064\u002c %\u0032\u0064\u003a\u0020\u0078\u0030\u003d\u0025\u0064\u0020\u0079\u0030\u003d\u0025d\u000a",_aceba ,_baggb ,_accde ,_ebac );
};_bdgbb ,_aefee :=_deadd ._abaeg [_gcaf (_aceba ,_baggb )];if !_aefee {continue ;};_aeba :=_bdgbb .split (_bfbf [_baggb ],_eddgdd [_aceba ]);for _cgbdg :=0;_cgbdg < _aeba ._gaafe ;_cgbdg ++{for _ggegc :=0;_ggegc < _aeba ._afde ;_ggegc ++{_efeed :=_aeba .get (_ggegc ,_cgbdg );
_dfdcf .put (_accde +_ggegc ,_ebac +_cgbdg ,_efeed );if _edeg {_db .Printf ("\u0025\u0038\u0064\u002c\u0020\u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_accde +_ggegc ,_ebac +_cgbdg ,_efeed );};};};};};return _dfdcf ;};func _fdbdd (_ccbc string )bool {for _ ,_bbebb :=range _ccbc {if !_ba .IsSpace (_bbebb ){return false ;
};};return true ;};func _gceag (_fcbgc map[int ][]float64 ){if len (_fcbgc )<=1{return ;};_bggf :=_cecf (_fcbgc );if _edeg {_bc .Log .Info ("\u0066i\u0078C\u0065\u006c\u006c\u0073\u003a \u006b\u0065y\u0073\u003d\u0025\u002b\u0076",_bggf );};var _eacb ,_gbcca int ;
for _eacb ,_gbcca =range _bggf {if _fcbgc [_gbcca ]!=nil {break ;};};for _bfaec ,_dbcadb :=range _bggf [_eacb :]{_bgecc :=_fcbgc [_dbcadb ];if _bgecc ==nil {continue ;};if _edeg {_db .Printf ("\u0025\u0034\u0064\u003a\u0020\u006b\u0030\u003d\u0025\u0064\u0020\u006b1\u003d\u0025\u0064\u000a",_eacb +_bfaec ,_gbcca ,_dbcadb );
};_ffee :=_fcbgc [_dbcadb ];if _ffee [len (_ffee )-1]> _bgecc [0]{_ffee [len (_ffee )-1]=_bgecc [0];_fcbgc [_gbcca ]=_ffee ;};_gbcca =_dbcadb ;};};func _afgb (_gbdac ,_egca float64 )bool {return _bg .Abs (_gbdac -_egca )<=_ddae };

// Len returns the number of TextMarks in `ma`.
func (_eaef *TextMarkArray )Len ()int {if _eaef ==nil {return 0;};return len (_eaef ._egfb );};

// ImageMark represents an image drawn on a page and its position in device coordinates.
// All coordinates are in device coordinates.
type ImageMark struct{Image *_e .Image ;

// Dimensions of the image as displayed in the PDF.
Width float64 ;Height float64 ;

// Position of the image in PDF coordinates (lower left corner).
X float64 ;Y float64 ;

// Angle in degrees, if rotated.
Angle float64 ;};

// New returns an Extractor instance for extracting content from the input PDF page.
func New (page *_e .PdfPage )(*Extractor ,error ){return NewWithOptions (page ,nil )};

// String returns a string describing `pt`.
func (_ccbe PageText )String ()string {_dad :=_db .Sprintf ("P\u0061\u0067\u0065\u0054ex\u0074:\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073",len (_ccbe ._cbcc ));_fca :=[]string {"\u002d"+_dad };for _ ,_edea :=range _ccbe ._cbcc {_fca =append (_fca ,_edea .String ());
};_fca =append (_fca ,"\u002b"+_dad );return _ce .Join (_fca ,"\u000a");};func _bgdf (_cdae bounded )float64 {return -_cdae .bbox ().Lly };type wordBag struct{_e .PdfRectangle ;_dgbf float64 ;_cefg ,_ecga rulingList ;_gdca float64 ;_fdc map[int ][]*textWord ;
};func (_fcfbc paraList )findGridTables (_cdeeg []gridTiling )[]*textTable {if _edeg {_bc .Log .Info ("\u0066i\u006e\u0064\u0047\u0072\u0069\u0064\u0054\u0061\u0062\u006c\u0065s\u003a\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073",len (_fcfbc ));
for _ffbbd ,_deeed :=range _fcfbc {_db .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ffbbd ,_deeed );};};var _gacfa []*textTable ;for _face ,_bgbca :=range _cdeeg {_egag ,_fbcfg :=_fcfbc .findTableGrid (_bgbca );if _egag !=nil {_egag .log (_db .Sprintf ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0057\u0069\u0074\u0068\u0047\u0072\u0069\u0064\u0073\u003a\u0020%\u0064",_face ));
_gacfa =append (_gacfa ,_egag );_egag .markCells ();};for _ggaaf :=range _fbcfg {_ggaaf ._bdbc =true ;};};if _edeg {_bc .Log .Info ("\u0066i\u006e\u0064\u0047\u0072i\u0064\u0054\u0061\u0062\u006ce\u0073:\u0020%\u0064\u0020\u0074\u0061\u0062\u006c\u0065s",len (_gacfa ));
};return _gacfa ;};func _dgdfg (_dbaa string )string {_dadea :=[]rune (_dbaa );return string (_dadea [:len (_dadea )-1])};const (_bfef =false ;_aeaa =false ;_ceb =false ;_egdb =false ;_bcfdb =false ;_gfgb =false ;_dgbg =false ;_egdf =false ;_gccaf =false ;
_cdgg =_gccaf &&true ;_gfcf =_cdgg &&false ;_bfdgc =_gccaf &&true ;_edeg =false ;_aggcc =_edeg &&false ;_ffba =_edeg &&true ;_dcdg =false ;_egc =_dcdg &&false ;_bgfee =_dcdg &&false ;_fcaf =_dcdg &&true ;_effb =_dcdg &&false ;_eeafd =_dcdg &&false ;);

// String returns a string describing the current state of the textState stack.
func (_gae *stateStack )String ()string {_gdb :=[]string {_db .Sprintf ("\u002d\u002d\u002d\u002d f\u006f\u006e\u0074\u0020\u0073\u0074\u0061\u0063\u006b\u003a\u0020\u0025\u0064",len (*_gae ))};for _beb ,_fgbb :=range *_gae {_fefg :="\u003c\u006e\u0069l\u003e";
if _fgbb !=nil {_fefg =_fgbb .String ();};_gdb =append (_gdb ,_db .Sprintf ("\u0009\u0025\u0032\u0064\u003a\u0020\u0025\u0073",_beb ,_fefg ));};return _ce .Join (_gdb ,"\u000a");};func (_cceg *wordBag )pullWord (_fbfa *textWord ,_dgbd int ,_bebfc map[int ]map[*textWord ]struct{}){_cceg .PdfRectangle =_dbef (_cceg .PdfRectangle ,_fbfa .PdfRectangle );
if _fbfa ._cfccf > _cceg ._dgbf {_cceg ._dgbf =_fbfa ._cfccf ;};_cceg ._fdc [_dgbd ]=append (_cceg ._fdc [_dgbd ],_fbfa );_bebfc [_dgbd ][_fbfa ]=struct{}{};};func (_ggbe rulingList )tidied (_adbd string )rulingList {_feggg :=_ggbe .removeDuplicates ();
_feggg .log ("\u0075n\u0069\u0071\u0075\u0065\u0073");_caefg :=_feggg .snapToGroups ();if _caefg ==nil {return nil ;};_caefg .sort ();if _dcdg {_bc .Log .Info ("\u0074\u0069\u0064i\u0065\u0064\u003a\u0020\u0025\u0071\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u0075\u006e\u0069\u0071\u0075\u0065\u0073\u003d\u0025\u0064\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0064\u003d\u0025\u0064",_adbd ,len (_ggbe ),len (_feggg ),len (_caefg ));
};_caefg .log ("\u0063o\u0061\u006c\u0065\u0073\u0063\u0065d");return _caefg ;};func _cgdff (_aadcd map[int ]intSet )[]int {_cgfed :=make ([]int ,0,len (_aadcd ));for _cfac :=range _aadcd {_cgfed =append (_cgfed ,_cfac );};_d .Ints (_cgfed );return _cgfed ;
};

// String returns a description of `v`.
func (_gfaaf *ruling )String ()string {if _gfaaf ._ffada ==_deee {return "\u004e\u004f\u0054\u0020\u0052\u0055\u004c\u0049\u004e\u0047";};_dfcbb ,_fgec :="\u0078","\u0079";if _gfaaf ._ffada ==_cgfba {_dfcbb ,_fgec ="\u0079","\u0078";};_ebeg :="";if _gfaaf ._aabf !=0.0{_ebeg =_db .Sprintf (" \u0077\u0069\u0064\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_gfaaf ._aabf );
};return _db .Sprintf ("\u0025\u00310\u0073\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0020\u0025\u0076\u0025\u0073",_gfaaf ._ffada ,_dfcbb ,_gfaaf ._cbag ,_fgec ,_gfaaf ._eagf ,_gfaaf ._adgg ,_gfaaf ._adgg -_gfaaf ._eagf ,_gfaaf ._dfcb ,_gfaaf .Color ,_ebeg );
};func _afgd (_eceffb []TextMark ,_dcde *int ,_gdbbf string )[]TextMark {_cdec :=_aadb ;_cdec .Text =_gdbbf ;return _fega (_eceffb ,_dcde ,_cdec );};func (_begb *wordBag )text ()string {_gcc :=_begb .allWords ();_agegc :=make ([]string ,len (_gcc ));for _egd ,_baae :=range _gcc {_agegc [_egd ]=_baae ._dgeda ;
};return _ce .Join (_agegc ,"\u0020");};func (_gceb *stateStack )push (_gcb *textState ){_age :=*_gcb ;*_gceb =append (*_gceb ,&_age )};func _dbee (_gfab []pathSection )rulingList {_fagf (_gfab );if _dcdg {_bc .Log .Info ("\u006da\u006b\u0065\u0046\u0069l\u006c\u0052\u0075\u006c\u0069n\u0067s\u003a \u0025\u0064\u0020\u0066\u0069\u006c\u006cs",len (_gfab ));
};var _dadd rulingList ;for _ ,_egbcf :=range _gfab {for _ ,_bbdag :=range _egbcf ._dgcdf {if !_bbdag .isQuadrilateral (){if _dcdg {_bc .Log .Error ("!\u0069s\u0051\u0075\u0061\u0064\u0072\u0069\u006c\u0061t\u0065\u0072\u0061\u006c: \u0025\u0073",_bbdag );
};continue ;};if _gbfa ,_bgff :=_bbdag .makeRectRuling (_egbcf .Color );_bgff {_dadd =append (_dadd ,_gbfa );}else {if _effb {_bc .Log .Error ("\u0021\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0073",_bbdag );
};};};};if _dcdg {_bc .Log .Info ("\u006d\u0061\u006b\u0065Fi\u006c\u006c\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0073",_dadd .String ());};return _dadd ;};func (_caeba *textTable )reduce ()*textTable {_fede :=make ([]int ,0,_caeba ._gaafe );
_gcagb :=make ([]int ,0,_caeba ._afde );for _cfgcf :=0;_cfgcf < _caeba ._gaafe ;_cfgcf ++{if !_caeba .emptyCompositeRow (_cfgcf ){_fede =append (_fede ,_cfgcf );};};for _aggf :=0;_aggf < _caeba ._afde ;_aggf ++{if !_caeba .emptyCompositeColumn (_aggf ){_gcagb =append (_gcagb ,_aggf );
};};if len (_fede )==_caeba ._gaafe &&len (_gcagb )==_caeba ._afde {return _caeba ;};_bcccg :=textTable {_ffdbb :_caeba ._ffdbb ,_afde :len (_gcagb ),_gaafe :len (_fede ),_abgb :make (map[uint64 ]*textPara ,len (_gcagb )*len (_fede ))};if _edeg {_bc .Log .Info ("\u0072\u0065\u0064\u0075ce\u003a\u0020\u0025\u0064\u0078\u0025\u0064\u0020\u002d\u003e\u0020\u0025\u0064\u0078%\u0064",_caeba ._afde ,_caeba ._gaafe ,len (_gcagb ),len (_fede ));
_bc .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_gcagb );_bc .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_fede );};for _dcef ,_eceef :=range _fede {for _ggdb ,_dgdfd :=range _gcagb {_cbdeda ,_efedg :=_caeba .getComposite (_dgdfd ,_eceef );
if _cbdeda ==nil {continue ;};if _edeg {_db .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_ggdb ,_dcef ,_dgdfd ,_eceef ,_agag (_cbdeda .merge ().text (),50));};_bcccg .putComposite (_ggdb ,_dcef ,_cbdeda ,_efedg );
};};return &_bcccg ;};

// String returns a string describing `ma`.
func (_cege TextMarkArray )String ()string {_faa :=len (_cege ._egfb );if _faa ==0{return "\u0045\u004d\u0050T\u0059";};_ccf :=_cege ._egfb [0];_cegd :=_cege ._egfb [_faa -1];return _db .Sprintf ("\u007b\u0054\u0045\u0058\u0054\u004d\u0041\u0052K\u0041\u0052\u0052AY\u003a\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025s\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d%\u0073\u007d",_faa ,_ccf ,_cegd );
};func _cggc (_gddd ,_dccf int )int {if _gddd > _dccf {return _gddd ;};return _dccf ;};

// String returns a description of `p`.
func (_geag *textPara )String ()string {if _geag ._ecfbe {return _db .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u005b\u0045\u004d\u0050\u0054\u0059\u005d",_geag .PdfRectangle );};_ebgc :="";if _geag ._fbda !=nil {_ebgc =_db .Sprintf ("\u005b\u0025\u0064\u0078\u0025\u0064\u005d\u0020",_geag ._fbda ._afde ,_geag ._fbda ._gaafe );
};return _db .Sprintf ("\u0025\u0036\u002e\u0032f \u0025\u0073\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u0020\u0025\u0071",_geag .PdfRectangle ,_ebgc ,len (_geag ._gcbc ),_agag (_geag .text (),50));};

// Append appends `mark` to the mark array.
func (_cgfb *TextMarkArray )Append (mark TextMark ){_cgfb ._egfb =append (_cgfb ._egfb ,mark )};func (_afec *textLine )text ()string {var _adcg []string ;for _ ,_bdgc :=range _afec ._gdg {if _bdgc ._ddbd {_adcg =append (_adcg ,"\u0020");};_adcg =append (_adcg ,_bdgc ._dgeda );
};return _ce .Join (_adcg ,"");};func _bfdfe (_eaggb float64 )float64 {return _ecc *_bg .Round (_eaggb /_ecc )};func (_gega *textTable )computeBbox ()_e .PdfRectangle {var _cfbdg _e .PdfRectangle ;_gaffe :=false ;for _agcbg :=0;_agcbg < _gega ._gaafe ;
_agcbg ++{for _fgbce :=0;_fgbce < _gega ._afde ;_fgbce ++{_dcdae :=_gega .get (_fgbce ,_agcbg );if _dcdae ==nil {continue ;};if !_gaffe {_cfbdg =_dcdae .PdfRectangle ;_gaffe =true ;}else {_cfbdg =_dbef (_cfbdg ,_dcdae .PdfRectangle );};};};return _cfbdg ;
};func (_bdgd *wordBag )makeRemovals ()map[int ]map[*textWord ]struct{}{_aege :=make (map[int ]map[*textWord ]struct{},len (_bdgd ._fdc ));for _fbac :=range _bdgd ._fdc {_aege [_fbac ]=make (map[*textWord ]struct{});};return _aege ;};func (_ecabg *textTable )put (_afge ,_dgfa int ,_aebbd *textPara ){_ecabg ._abgb [_gcaf (_afge ,_dgfa )]=_aebbd ;
};func _bfea (_acfg *list ,_aedf *_ce .Builder ,_addd *string ){_dffd :=_dbaf (_acfg ,_addd );_aedf .WriteString (_dffd );for _ ,_dae :=range _acfg ._dgac {_fbgg :=*_addd +"\u0020\u0020\u0020";_bfea (_dae ,_aedf ,&_fbgg );};};func _ccgbc (_bgcef ,_dgdf _e .PdfRectangle )(_e .PdfRectangle ,bool ){if !_bdeg (_bgcef ,_dgdf ){return _e .PdfRectangle {},false ;
};return _e .PdfRectangle {Llx :_bg .Max (_bgcef .Llx ,_dgdf .Llx ),Urx :_bg .Min (_bgcef .Urx ,_dgdf .Urx ),Lly :_bg .Max (_bgcef .Lly ,_dgdf .Lly ),Ury :_bg .Min (_bgcef .Ury ,_dgdf .Ury )},true ;};func _fgba (_baef []*textWord ,_bgdgdf *textWord )[]*textWord {for _edbe ,_dcab :=range _baef {if _dcab ==_bgdgdf {return _ggbd (_baef ,_edbe );
};};_bc .Log .Error ("\u0072\u0065\u006d\u006f\u0076e\u0057\u006f\u0072\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u0073\u0020\u0064o\u0065\u0073\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",_bgdgdf );
return nil ;};func (_fecf *textObject )setFont (_debcb string ,_acd float64 )error {if _fecf ==nil {return nil ;};_fecf ._degc ._cbbb =_acd ;_daa ,_adfd :=_fecf .getFont (_debcb );if _adfd !=nil {return _adfd ;};_fecf ._degc ._fgbg =_daa ;return nil ;};
func (_fgcfg paraList )topoOrder ()[]int {if _egdf {_bc .Log .Info ("\u0074\u006f\u0070\u006f\u004f\u0072\u0064\u0065\u0072\u003a");};_afdcf :=len (_fgcfg );_ceea :=make ([]bool ,_afdcf );_cgbb :=make ([]int ,0,_afdcf );_fedg :=_fgcfg .llyOrdering ();var _fddcf func (_bbgd int );
_fddcf =func (_afca int ){_ceea [_afca ]=true ;for _ecab :=0;_ecab < _afdcf ;_ecab ++{if !_ceea [_ecab ]{if _fgcfg .readBefore (_fedg ,_afca ,_ecab ){_fddcf (_ecab );};};};_cgbb =append (_cgbb ,_afca );};for _cdce :=0;_cdce < _afdcf ;_cdce ++{if !_ceea [_cdce ]{_fddcf (_cdce );
};};return _geece (_cgbb );};func _aaade (_dcdeb float64 ,_befg int )int {if _befg ==0{_befg =1;};_adee :=float64 (_befg );return int (_bg .Round (_dcdeb /_adee )*_adee );};func (_bfdg *shapesState )stroke (_geg *[]pathSection ){_dbac :=pathSection {_dgcdf :_bfdg ._gfed ,Color :_bfdg ._bgdd .getStrokeColor ()};
*_geg =append (*_geg ,_dbac );if _dcdg {_db .Printf ("\u0020 \u0020\u0020S\u0054\u0052\u004fK\u0045\u003a\u0020\u0025\u0064\u0020\u0073t\u0072\u006f\u006b\u0065\u0073\u0020s\u0073\u003d\u0025\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d%\u002b\u0076\u0020\u0025\u0036\u002e\u0032\u0066\u000a",len (*_geg ),_bfdg ,_bfdg ._bgdd .getStrokeColor (),_dbac .bbox ());
if _egc {for _eeaf ,_dcgd :=range _bfdg ._gfed {_db .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_eeaf ,_dcgd );if _eeaf ==10{break ;};};};};};func _acdab (_geab ,_cbgca bounded )float64 {return _bgdf (_geab )-_bgdf (_cbgca )};func (_gdea *shapesState )clearPath (){_gdea ._gfed =nil ;
_gdea ._ggcge =false ;if _bcfdb {_bc .Log .Info ("\u0043\u004c\u0045A\u0052\u003a\u0020\u0073\u0073\u003d\u0025\u0073",_gdea );};};func _afaed (_cabee []*textMark ,_eadaa _e .PdfRectangle )*textWord {_dgfdg :=_cabee [0].PdfRectangle ;_aabec :=_cabee [0]._ddgdb ;
for _ ,_dacac :=range _cabee [1:]{_dgfdg =_dbef (_dgfdg ,_dacac .PdfRectangle );if _dacac ._ddgdb > _aabec {_aabec =_dacac ._ddgdb ;};};return &textWord {PdfRectangle :_dgfdg ,_ggegd :_cabee ,_gbgab :_eadaa .Ury -_dgfdg .Lly ,_cfccf :_aabec };};func (_aacf *shapesState )newSubPath (){_aacf .clearPath ();
if _bcfdb {_bc .Log .Info ("\u006e\u0065\u0077\u0053\u0075\u0062\u0050\u0061\u0074h\u003a\u0020\u0025\u0073",_aacf );};};func (_beec *wordBag )maxDepth ()float64 {return _beec ._gdca -_beec .Lly };func _abe (_cabd *_ac .ContentStreamOperation )(float64 ,error ){if len (_cabd .Params )!=1{_bfg :=_c .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");
_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_cabd .Operand ,1,len (_cabd .Params ),_cabd .Params );
return 0.0,_bfg ;};return _bgf .GetNumberAsFloat (_cabd .Params [0]);};func (_edfd *textMark )inDiacriticArea (_aabb *textMark )bool {_edcac :=_edfd .Llx -_aabb .Llx ;_afdba :=_edfd .Urx -_aabb .Urx ;_eceff :=_edfd .Lly -_aabb .Lly ;return _bg .Abs (_edcac +_afdba )< _edfd .Width ()*_dde &&_bg .Abs (_eceff )< _edfd .Height ()*_dde ;
};var _eg =false ;func _fbcce (_ccae *PageText )error {_fbceg :=_ag .GetLicenseKey ();if _fbceg !=nil &&_fbceg .IsLicensed ()||_eg {return nil ;};_db .Printf ("\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064\u0020c\u006f\u0070\u0079\u0020\u006f\u0066\u0020\u0055\u006e\u0069P\u0044\u0046\u000a");
_db .Println ("-\u0020\u0047\u0065\u0074\u0020\u0061\u0020\u0066\u0072e\u0065\u0020\u0074\u0072\u0069\u0061\u006c l\u0069\u0063\u0065\u006es\u0065\u0020\u006f\u006e\u0020\u0068\u0074\u0074\u0070s:\u002f\u002fu\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f");
return _c .New ("\u0075\u006e\u0069\u0070d\u0066\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020c\u006fd\u0065\u0020\u0072\u0065\u0071\u0075\u0069r\u0065\u0064");};

// PageImages represents extracted images on a PDF page with spatial information:
// display position and size.
type PageImages struct{Images []ImageMark ;};func _gfag (_eeece int ,_fccfe map[int ][]float64 )([]int ,int ){_efea :=make ([]int ,_eeece );_faaaf :=0;for _fcdd :=0;_fcdd < _eeece ;_fcdd ++{_efea [_fcdd ]=_faaaf ;_faaaf +=len (_fccfe [_fcdd ])+1;};return _efea ,_faaaf ;
};var _aadb =TextMark {Text :"\u005b\u0058\u005d",Original :"\u0020",Meta :true ,FillColor :_dg .White ,StrokeColor :_dg .White };

// NewWithOptions an Extractor instance for extracting content from the input PDF page with options.
func NewWithOptions (page *_e .PdfPage ,options *Options )(*Extractor ,error ){const _ab ="\u0065x\u0074\u0072\u0061\u0063\u0074\u006f\u0072\u002e\u004e\u0065\u0077W\u0069\u0074\u0068\u004f\u0070\u0074\u0069\u006f\u006e\u0073";_aae ,_dbcb :=page .GetAllContentStreams ();
if _dbcb !=nil {return nil ,_dbcb ;};_ed ,_ca :=page .GetStructTreeRoot ();if !_ca {_bc .Log .Info ("T\u0068\u0065\u0020\u0070\u0064\u0066\u0020\u0064\u006f\u0063\u0075\u006d\u0065\u006e\u0074\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0074\u0061\u0067g\u0065d\u002e\u0020\u0053\u0074r\u0075\u0063t\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e\u0027\u0074\u0020\u0065\u0078\u0069\u0073\u0074\u002e");
};_aaa :=page .GetContainingPdfObject ();_fb ,_dbcb :=page .GetMediaBox ();if _dbcb !=nil {return nil ,_db .Errorf ("\u0065\u0078\u0074r\u0061\u0063\u0074\u006fr\u0020\u0072\u0065\u0071\u0075\u0069\u0072e\u0073\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u002e\u0020\u0025\u0076",_dbcb );
};_gc :=&Extractor {_aa :_aae ,_dbc :page .Resources ,_dea :*_fb ,_aag :page .CropBox ,_fe :map[string ]fontEntry {},_bf :map[string ]textResult {},_dc :options ,_bbd :_ed ,_cef :_aaa };if _gc ._dea .Llx > _gc ._dea .Urx {_bc .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0058\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_gc ._dea );
_gc ._dea .Llx ,_gc ._dea .Urx =_gc ._dea .Urx ,_gc ._dea .Llx ;};if _gc ._dea .Lly > _gc ._dea .Ury {_bc .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0059\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_gc ._dea );
_gc ._dea .Lly ,_gc ._dea .Ury =_gc ._dea .Ury ,_gc ._dea .Lly ;};_ag .TrackUse (_ab );return _gc ,nil ;};func (_caff *shapesState )closePath (){if _caff ._ggcge {_caff ._gfed =append (_caff ._gfed ,_gacd (_caff ._aadf ));_caff ._ggcge =false ;}else if len (_caff ._gfed )==0{if _bcfdb {_bc .Log .Debug ("\u0063\u006c\u006f\u0073eP\u0061\u0074\u0068\u0020\u0077\u0069\u0074\u0068\u0020\u006e\u006f\u0020\u0070\u0061t\u0068");
};_caff ._ggcge =false ;return ;};_caff ._gfed [len (_caff ._gfed )-1].close ();if _bcfdb {_bc .Log .Info ("\u0063\u006c\u006f\u0073\u0065\u0050\u0061\u0074\u0068\u003a\u0020\u0025\u0073",_caff );};};func (_ddfb *textLine )toTextMarks (_cdeg *int )[]TextMark {var _defb []TextMark ;
for _ ,_fadb :=range _ddfb ._gdg {if _fadb ._ddbd {_defb =_afgd (_defb ,_cdeg ,"\u0020");};_ccgf :=_fadb .toTextMarks (_cdeg );_defb =append (_defb ,_ccgf ...);};return _defb ;};func (_begf *textObject )getCurrentFont ()*_e .PdfFont {_gba :=_begf ._degc ._fgbg ;
if _gba ==nil {_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020U\u0073\u0069\u006e\u0067\u0020d\u0065\u0066a\u0075\u006c\u0074\u002e");return _e .DefaultFont ();
};return _gba ;};func _efaf (_aaeca _e .PdfRectangle )*ruling {return &ruling {_ffada :_dfdb ,_cbag :_aaeca .Llx ,_eagf :_aaeca .Lly ,_adgg :_aaeca .Ury };};func (_edba paraList )lines ()[]*textLine {var _bcaff []*textLine ;for _ ,_acdgb :=range _edba {_bcaff =append (_bcaff ,_acdgb ._gcbc ...);
};return _bcaff ;};func _dedd (_gecbd ,_efcf _ee .Point ,_adffc _dg .Color )(*ruling ,bool ){_addba :=lineRuling {_badd :_gecbd ,_becc :_efcf ,_abea :_fbee (_gecbd ,_efcf ),Color :_adffc };if _addba ._abea ==_deee {return nil ,false ;};return _addba .asRuling ();
};func _ffagb (_afdec float64 )bool {return _bg .Abs (_afdec )< _ffcf };func _eded (_dbdee _bgf .PdfObject ,_gbagfe _dg .Color )(_cec .Image ,error ){_fecfe ,_gbcbg :=_bgf .GetStream (_dbdee );if !_gbcbg {return nil ,nil ;};_fafb ,_caecb :=_e .NewXObjectImageFromStream (_fecfe );
if _caecb !=nil {return nil ,_caecb ;};_bgace ,_caecb :=_fafb .ToImage ();if _caecb !=nil {return nil ,_caecb ;};return _ggfdb (_bgace ,_gbagfe ),nil ;};func _gfcb (_fgae *paraList )map[int ][]*textLine {_bdae :=map[int ][]*textLine {};for _ ,_fddf :=range *_fgae {for _ ,_dedgf :=range _fddf ._gcbc {if !_gdba (_dedgf ){_bc .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_egfc :=_dedgf ._gdg [0]._ggegd [0]._ccdcf ;_bdae [_egfc ]=append (_bdae [_egfc ],_dedgf );};if _fddf ._fbda !=nil {_faafc :=_fddf ._fbda ._abgb ;for _ ,_abfc :=range _faafc {for _ ,_fccf :=range _abfc ._gcbc {if !_gdba (_fccf ){_bc .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_edbd :=_fccf ._gdg [0]._ggegd [0]._ccdcf ;_bdae [_edbd ]=append (_bdae [_edbd ],_fccf );};};};};return _bdae ;};func _gecbf (_ceac *textLine ,_abeec []*textLine ,_ffcd []float64 )float64 {var _aaga float64 =-1;for _ ,_facd :=range _abeec {if _facd ._ebee > _ceac ._ebee {if _bg .Round (_facd .Llx )>=_bg .Round (_ceac .Llx ){_aaga =_facd ._ebee ;
}else {break ;};};};return _aaga ;};type textState struct{_fbg float64 ;_bgfba float64 ;_ecef float64 ;_cadc float64 ;_cbbb float64 ;_agc RenderMode ;_edd float64 ;_fgbg *_e .PdfFont ;_ddcdb _e .PdfRectangle ;_aaf int ;_gcac int ;};func (_bfd *Extractor )extractPageText (_fad string ,_aba *_e .PdfPageResources ,_bgdb _ee .Matrix ,_bgg int )(*PageText ,int ,int ,error ){_bc .Log .Trace ("\u0065x\u0074\u0072\u0061\u0063t\u0050\u0061\u0067\u0065\u0054e\u0078t\u003a \u006c\u0065\u0076\u0065\u006c\u003d\u0025d",_bgg );
_bgfb :=&PageText {_acbf :_bfd ._dea ,_ebd :_bfd ._bbd ,_gded :_bfd ._cef };_dfgb :=_eca (_bfd ._dea );var _gca stateStack ;_ggcb :=_acb (_bfd ,_aba ,_ac .GraphicsState {},&_dfgb ,&_gca );_ffc :=shapesState {_agcg :_bgdb ,_bfcf :_ee .IdentityMatrix (),_bgdd :_ggcb };
var _ddgg bool ;_ggcg :=-1;if _bgg > _cddg {_dbcg :=_c .New ("\u0066\u006f\u0072\u006d s\u0074\u0061\u0063\u006b\u0020\u006f\u0076\u0065\u0072\u0066\u006c\u006f\u0077");_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0065\u0078\u0074\u0072\u0061\u0063\u0074\u0050\u0061\u0067\u0065\u0054\u0065\u0078\u0074\u002e\u0020\u0072\u0065\u0063u\u0072\u0073\u0069\u006f\u006e\u0020\u006c\u0065\u0076\u0065\u006c\u003d\u0025\u0064 \u0065r\u0072\u003d\u0025\u0076",_bgg ,_dbcg );
return _bgfb ,_dfgb ._aaf ,_dfgb ._gcac ,_dbcg ;};_afc :=_ac .NewContentStreamParser (_fad );_bga ,_gfe :=_afc .Parse ();if _gfe !=nil {_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020e\u0078\u0074\u0072a\u0063\u0074\u0050\u0061g\u0065\u0054\u0065\u0078\u0074\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gfe );
return _bgfb ,_dfgb ._aaf ,_dfgb ._gcac ,_gfe ;};_bgfb ._ecda =_bga ;_bdc :=_ac .NewContentStreamProcessor (*_bga );_bdc .AddHandler (_ac .HandlerConditionEnumAllOperands ,"",func (_fda *_ac .ContentStreamOperation ,_gbce _ac .GraphicsState ,_bfdd *_e .PdfPageResources )error {_fcc :=_fda .Operand ;
if _ceb {_bc .Log .Info ("\u0026&\u0026\u0020\u006f\u0070\u003d\u0025s",_fda );};switch _fcc {case "\u0071":if _bcfdb {_bc .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_ffc ._bfcf );};_gca .push (&_dfgb );case "\u0051":if !_gca .empty (){_dfgb =*_gca .pop ();
};_ffc ._bfcf =_gbce .CTM ;if _bcfdb {_bc .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_ffc ._bfcf );};case "\u0042\u0044\u0043":_aece ,_adfa :=_bgf .GetDict (_fda .Params [1]);if !_adfa {_bc .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0042D\u0043\u0020\u006f\u0070\u003d\u0025\u0073 \u0047\u0065\u0074\u0044\u0069\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_fda );
return _gfe ;};_eag :=_aece .Get ("\u004d\u0043\u0049\u0044");if _eag !=nil {_efde ,_dgf :=_bgf .GetIntVal (_eag );if !_dgf {_bc .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0042\u0044C\u0020\u006f\u0070=\u0025\u0073\u002e\u0020\u0042\u0061\u0064\u0020\u006eum\u0065\u0072\u0069c\u0061\u006c \u006f\u0062\u006a\u0065\u0063\u0074.\u0020\u006f=\u0025\u0073",_fda ,_eag );
};_ggcg =_efde ;}else {_ggcg =-1;};case "\u0045\u004d\u0043":_ggcg =-1;case "\u0042\u0054":if _ddgg {_bc .Log .Debug ("\u0042\u0054\u0020\u0063\u0061\u006c\u006c\u0065\u0064\u0020\u0077\u0068\u0069\u006c\u0065 \u0069n\u0020\u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
_bgfb ._cbcc =append (_bgfb ._cbcc ,_ggcb ._eebd ...);};_ddgg =true ;_agad :=_gbce ;_agad .CTM =_bgdb .Mult (_agad .CTM );_ggcb =_acb (_bfd ,_bfdd ,_agad ,&_dfgb ,&_gca );_ffc ._bgdd =_ggcb ;case "\u0045\u0054":if !_ddgg {_bc .Log .Debug ("\u0045\u0054\u0020ca\u006c\u006c\u0065\u0064\u0020\u006f\u0075\u0074\u0073i\u0064e\u0020o\u0066 \u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
};_ddgg =false ;_bgfb ._cbcc =append (_bgfb ._cbcc ,_ggcb ._eebd ...);_ggcb .reset ();case "\u0054\u002a":_ggcb .nextLine ();case "\u0054\u0064":if _abc ,_gcee :=_ggcb .checkOp (_fda ,2,true );!_abc {_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gcee );
return _gcee ;};_aaed ,_dgb ,_bcc :=_cbaeb (_fda .Params );if _bcc !=nil {return _bcc ;};_ggcb .moveText (_aaed ,_dgb );case "\u0054\u0044":if _bca ,_cfc :=_ggcb .checkOp (_fda ,2,true );!_bca {_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cfc );
return _cfc ;};_cae ,_gceed ,_bfe :=_cbaeb (_fda .Params );if _bfe !=nil {_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bfe );return _bfe ;};_ggcb .moveTextSetLeading (_cae ,_gceed );case "\u0054\u006a":if _gcg ,_bdgg :=_ggcb .checkOp (_fda ,1,true );
!_gcg {_bc .Log .Debug ("\u0045\u0052\u0052\u004fR:\u0020\u0054\u006a\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0065\u0072\u0072\u003d%\u0076",_fda ,_bdgg );return _bdgg ;};_feg :=_bgf .TraceToDirectObject (_fda .Params [0]);_aebf ,_ffaa :=_bgf .GetStringBytes (_feg );
if !_ffaa {_bc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020T\u006a\u0020o\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074S\u0074\u0072\u0069\u006e\u0067\u0042\u0079\u0074\u0065\u0073\u0020\u0066a\u0069\u006c\u0065\u0064",_fda );return _bgf .ErrTypeError ;
};return _ggcb .showText (_feg ,_aebf ,_ggcg );case "\u0054\u004a":if _ddcf ,_cea :=_ggcb .checkOp (_fda ,1,true );!_ddcf {_bc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cea );return _cea ;};_dafb ,_bgc :=_bgf .GetArray (_fda .Params [0]);
if !_bgc {_bc .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_fda );return _gfe ;};return _ggcb .showTextAdjusted (_dafb ,_ggcg );
case "\u0027":if _afcf ,_fbcb :=_ggcb .checkOp (_fda ,1,true );!_afcf {_bc .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0027\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fbcb );return _fbcb ;};_egea :=_bgf .TraceToDirectObject (_fda .Params [0]);_cbgf ,_cbda :=_bgf .GetStringBytes (_egea );
if !_cbda {_bc .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020'\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_fda );return _bgf .ErrTypeError ;};_ggcb .nextLine ();return _ggcb .showText (_egea ,_cbgf ,_ggcg );
case "\u0022":if _fbd ,_ced :=_ggcb .checkOp (_fda ,3,true );!_fbd {_bc .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0022\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ced );return _ced ;};_gfea ,_ace ,_bef :=_cbaeb (_fda .Params [:2]);if _bef !=nil {return _bef ;
};_bea :=_bgf .TraceToDirectObject (_fda .Params [2]);_efbf ,_bgge :=_bgf .GetStringBytes (_bea );if !_bgge {_bc .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020\"\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_fda );
return _bgf .ErrTypeError ;};_ggcb .setCharSpacing (_gfea );_ggcb .setWordSpacing (_ace );_ggcb .nextLine ();return _ggcb .showText (_bea ,_efbf ,_ggcg );case "\u0054\u004c":_bfdc ,_ffcb :=_abe (_fda );if _ffcb !=nil {_bc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004c\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ffcb );
return _ffcb ;};_ggcb .setTextLeading (_bfdc );case "\u0054\u0063":_dbe ,_ffcg :=_abe (_fda );if _ffcg !=nil {_bc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0063\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ffcg );return _ffcg ;};_ggcb .setCharSpacing (_dbe );
case "\u0054\u0066":if _gfb ,_bded :=_ggcb .checkOp (_fda ,2,true );!_gfb {_bc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0066\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bded );return _bded ;};_ebafe ,_dfc :=_bgf .GetNameVal (_fda .Params [0]);
if !_dfc {_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u004ea\u006d\u0065\u0056\u0061\u006c\u0020\u0066a\u0069\u006c\u0065\u0064",_fda );return _bgf .ErrTypeError ;};_befb ,_ebae :=_bgf .GetNumberAsFloat (_fda .Params [1]);
if !_dfc {_bc .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u0046\u006c\u006f\u0061\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065d\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fda ,_ebae );
return _ebae ;};_ebae =_ggcb .setFont (_ebafe ,_befb );_ggcb ._dbdd =_cb .Is (_ebae ,_bgf .ErrNotSupported );if _ebae !=nil &&!_ggcb ._dbdd {return _ebae ;};case "\u0054\u006d":if _bce ,_dgc :=_ggcb .checkOp (_fda ,6,true );!_bce {_bc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u006d\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dgc );
return _dgc ;};_bgaa ,_dddf :=_bgf .GetNumbersAsFloat (_fda .Params );if _dddf !=nil {_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dddf );return _dddf ;};_ggcb .setTextMatrix (_bgaa );case "\u0054\u0072":if _dgba ,_agdd :=_ggcb .checkOp (_fda ,1,true );
!_dgba {_bc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0072\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_agdd );return _agdd ;};_eff ,_debc :=_bgf .GetIntVal (_fda .Params [0]);if !_debc {_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0072\u0020\u006f\u0070\u003d\u0025\u0073 \u0047e\u0074\u0049\u006e\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_fda );
return _bgf .ErrTypeError ;};_ggcb .setTextRenderMode (_eff );case "\u0054\u0073":if _cgd ,_beab :=_ggcb .checkOp (_fda ,1,true );!_cgd {_bc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0073\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_beab );return _beab ;
};_ecf ,_fdf :=_bgf .GetNumberAsFloat (_fda .Params [0]);if _fdf !=nil {_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fdf );return _fdf ;};_ggcb .setTextRise (_ecf );case "\u0054\u0077":if _accc ,_cac :=_ggcb .checkOp (_fda ,1,true );
!_accc {_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cac );return _cac ;};_fgcb ,_fef :=_bgf .GetNumberAsFloat (_fda .Params [0]);if _fef !=nil {_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fef );
return _fef ;};_ggcb .setWordSpacing (_fgcb );case "\u0054\u007a":if _ddcd ,_ecff :=_ggcb .checkOp (_fda ,1,true );!_ddcd {_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ecff );return _ecff ;};_gga ,_gge :=_bgf .GetNumberAsFloat (_fda .Params [0]);
if _gge !=nil {_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gge );return _gge ;};_ggcb .setHorizScaling (_gga );case "\u0063\u006d":_ffc ._bfcf =_gbce .CTM ;if _ffc ._bfcf .Singular (){_fada :=_ee .IdentityMatrix ().Translate (_ffc ._bfcf .Translation ());
_bc .Log .Debug ("S\u0069n\u0067\u0075\u006c\u0061\u0072\u0020\u0063\u0074m\u003d\u0025\u0073\u2192%s",_ffc ._bfcf ,_fada );_ffc ._bfcf =_fada ;};if _bcfdb {_bc .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_ffc ._bfcf );};case "\u006d":if len (_fda .Params )!=2{_bc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_de );
return nil ;};_fecc ,_cace :=_bgf .GetNumbersAsFloat (_fda .Params );if _cace !=nil {return _cace ;};_ffc .moveTo (_fecc [0],_fecc [1]);case "\u006c":if len (_fda .Params )!=2{_bc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_de );
return nil ;};_baee ,_gbe :=_bgf .GetNumbersAsFloat (_fda .Params );if _gbe !=nil {return _gbe ;};_ffc .lineTo (_baee [0],_baee [1]);case "\u0063":if len (_fda .Params )!=6{return _de ;};_bfc ,_ddf :=_bgf .GetNumbersAsFloat (_fda .Params );if _ddf !=nil {return _ddf ;
};_bc .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_bfc );_ffc .cubicTo (_bfc [0],_bfc [1],_bfc [2],_bfc [3],_bfc [4],_bfc [5]);case "\u0076","\u0079":if len (_fda .Params )!=4{return _de ;
};_aegc ,_dcf :=_bgf .GetNumbersAsFloat (_fda .Params );if _dcf !=nil {return _dcf ;};_bc .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_aegc );_ffc .quadraticTo (_aegc [0],_aegc [1],_aegc [2],_aegc [3]);
case "\u0068":_ffc .closePath ();case "\u0072\u0065":if len (_fda .Params )!=4{return _de ;};_afe ,_ccg :=_bgf .GetNumbersAsFloat (_fda .Params );if _ccg !=nil {return _ccg ;};_ffc .drawRectangle (_afe [0],_afe [1],_afe [2],_afe [3]);_ffc .closePath ();
case "\u0053":_ffc .stroke (&_bgfb ._ded );_ffc .clearPath ();case "\u0073":_ffc .closePath ();_ffc .stroke (&_bgfb ._ded );_ffc .clearPath ();case "\u0046":_ffc .fill (&_bgfb ._afae );_ffc .clearPath ();case "\u0066","\u0066\u002a":_ffc .closePath ();
_ffc .fill (&_bgfb ._afae );_ffc .clearPath ();case "\u0042","\u0042\u002a":_ffc .fill (&_bgfb ._afae );_ffc .stroke (&_bgfb ._ded );_ffc .clearPath ();case "\u0062","\u0062\u002a":_ffc .closePath ();_ffc .fill (&_bgfb ._afae );_ffc .stroke (&_bgfb ._ded );
_ffc .clearPath ();case "\u006e":_ffc .clearPath ();case "\u0044\u006f":if len (_fda .Params )==0{_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0058\u004fbj\u0065c\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006f\u0070\u0065\u0072\u0061n\u0064\u0020\u0066\u006f\u0072\u0020\u0044\u006f\u0020\u006f\u0070\u0065\u0072\u0061\u0074\u006f\u0072.\u0020\u0047\u006f\u0074\u0020\u0025\u002b\u0076\u002e",_fda .Params );
return _bgf .ErrRangeError ;};_gbbe ,_ebc :=_bgf .GetName (_fda .Params [0]);if !_ebc {_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0044\u006f\u0020\u006f\u0070e\u0072a\u0074\u006f\u0072\u0020\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006fp\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u002b\u0076\u002e",_fda .Params [0]);
return _bgf .ErrTypeError ;};_ ,_aac :=_bfdd .GetXObjectByName (*_gbbe );if _aac !=_e .XObjectTypeForm {break ;};_agf ,_ebc :=_bfd ._bf [_gbbe .String ()];if !_ebc {_fdb ,_gac :=_bfdd .GetXObjectFormByName (*_gbbe );if _gac !=nil {_bc .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_gac );
return _gac ;};_cfdc ,_gac :=_fdb .GetContentStream ();if _gac !=nil {_bc .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_gac );return _gac ;};_feccc :=_fdb .Resources ;if _feccc ==nil {_feccc =_bfdd ;};_bec :=_gbce .CTM ;if _bfb ,_gda :=_bgf .GetArray (_fdb .Matrix );
_gda {_edb ,_ebe :=_bfb .GetAsFloat64Slice ();if _ebe !=nil {return _ebe ;};if len (_edb )!=6{return _de ;};_cee :=_ee .NewMatrix (_edb [0],_edb [1],_edb [2],_edb [3],_edb [4],_edb [5]);_bec =_gbce .CTM .Mult (_cee );};_bee ,_fgfd ,_bbda ,_gac :=_bfd .extractPageText (string (_cfdc ),_feccc ,_bgdb .Mult (_bec ),_bgg +1);
if _gac !=nil {_bc .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_gac );return _gac ;};_agf =textResult {*_bee ,_fgfd ,_bbda };_bfd ._bf [_gbbe .String ()]=_agf ;};_ffc ._bfcf =_gbce .CTM ;if _bcfdb {_bc .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_ffc ._bfcf );
};_bgfb ._cbcc =append (_bgfb ._cbcc ,_agf ._bcf ._cbcc ...);_bgfb ._ded =append (_bgfb ._ded ,_agf ._bcf ._ded ...);_bgfb ._afae =append (_bgfb ._afae ,_agf ._bcf ._afae ...);_dfgb ._aaf +=_agf ._dee ;_dfgb ._gcac +=_agf ._bffe ;case "\u0072\u0067","\u0067","\u006b","\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_ggcb ._gaca .ColorspaceNonStroking =_gbce .ColorspaceNonStroking ;
_ggcb ._gaca .ColorNonStroking =_gbce .ColorNonStroking ;case "\u0052\u0047","\u0047","\u004b","\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_ggcb ._gaca .ColorspaceStroking =_gbce .ColorspaceStroking ;_ggcb ._gaca .ColorStroking =_gbce .ColorStroking ;
};return nil ;});_gfe =_bdc .Process (_aba );return _bgfb ,_dfgb ._aaf ,_dfgb ._gcac ,_gfe ;};func (_eddf paraList )llyOrdering ()[]int {_efab :=make ([]int ,len (_eddf ));for _febc :=range _eddf {_efab [_febc ]=_febc ;};_d .SliceStable (_efab ,func (_aebd ,_bbfcb int )bool {_dbge ,_feecd :=_efab [_aebd ],_efab [_bbfcb ];
return _eddf [_dbge ].Lly < _eddf [_feecd ].Lly ;});return _efab ;};func _gead (_gcca func (*wordBag ,*textWord ,float64 )bool ,_gbdg float64 )func (*wordBag ,*textWord )bool {return func (_fgeb *wordBag ,_faeg *textWord )bool {return _gcca (_fgeb ,_faeg ,_gbdg )};
};type textTable struct{_e .PdfRectangle ;_afde ,_gaafe int ;_ffdbb bool ;_abgb map[uint64 ]*textPara ;_abaeg map[uint64 ]compositeCell ;};func _acb (_bgce *Extractor ,_eaf *_e .PdfPageResources ,_eea _ac .GraphicsState ,_aaae *textState ,_deeg *stateStack )*textObject {return &textObject {_faf :_bgce ,_bed :_eaf ,_gaca :_eea ,_afff :_deeg ,_degc :_aaae ,_edcb :_ee .IdentityMatrix (),_fde :_ee .IdentityMatrix ()};
};

// ExtractPageImages returns the image contents of the page extractor, including data
// and position, size information for each image.
// A set of options to control page image extraction can be passed in. The options
// parameter can be nil for the default options. By default, inline stencil masks
// are not extracted.
func (_fgad *Extractor )ExtractPageImages (options *ImageExtractOptions )(*PageImages ,error ){_cbc :=&imageExtractContext {_ccdc :options };_ggb :=_cbc .extractContentStreamImages (_fgad ._aa ,_fgad ._dbc );if _ggb !=nil {return nil ,_ggb ;};return &PageImages {Images :_cbc ._add },nil ;
};func _dfgcg (_agcga []*textLine ,_afdc string ,_cabbf []*list )*list {return &list {_caef :_agcga ,_cbcf :_afdc ,_dgac :_cabbf };};func (_feeb *textWord )bbox ()_e .PdfRectangle {return _feeb .PdfRectangle };func (_efcg *textTable )compositeColCorridors ()map[int ][]float64 {_gcbd :=make (map[int ][]float64 ,_efcg ._afde );
if _edeg {_bc .Log .Info ("\u0063\u006f\u006d\u0070o\u0073\u0069\u0074\u0065\u0043\u006f\u006c\u0043\u006f\u0072r\u0069d\u006f\u0072\u0073\u003a\u0020\u0077\u003d%\u0064\u0020",_efcg ._afde );};for _ceff :=0;_ceff < _efcg ._afde ;_ceff ++{_gcbd [_ceff ]=nil ;
};return _gcbd ;};func (_gcbb *textWord )appendMark (_gfbbdb *textMark ,_bdadb _e .PdfRectangle ){_gcbb ._ggegd =append (_gcbb ._ggegd ,_gfbbdb );_gcbb .PdfRectangle =_dbef (_gcbb .PdfRectangle ,_gfbbdb .PdfRectangle );if _gfbbdb ._ddgdb > _gcbb ._cfccf {_gcbb ._cfccf =_gfbbdb ._ddgdb ;
};_gcbb ._gbgab =_bdadb .Ury -_gcbb .PdfRectangle .Lly ;};func _acee (_ecbbd ,_eaea _ee .Point )bool {_cgcfa :=_bg .Abs (_ecbbd .X -_eaea .X );_baaec :=_bg .Abs (_ecbbd .Y -_eaea .Y );return _abgd (_cgcfa ,_baaec );};func (_befc *textLine )endsInHyphen ()bool {_aega :=_befc ._gdg [len (_befc ._gdg )-1];
_afaf :=_aega ._dgeda ;_beacd ,_efag :=_b .DecodeLastRuneInString (_afaf );if _efag <=0||!_ba .Is (_ba .Hyphen ,_beacd ){return false ;};if _aega ._ddbd &&_ddcfa (_afaf ){return true ;};return _ddcfa (_befc .text ());};func (_dgbgg paraList )findTextTables ()[]*textTable {var _acbe []*textTable ;
for _ ,_gcbf :=range _dgbgg {if _gcbf .taken ()||_gcbf .Width ()==0{continue ;};_bgbe :=_gcbf .isAtom ();if _bgbe ==nil {continue ;};_bgbe .growTable ();if _bgbe ._afde *_bgbe ._gaafe < _bdfd {continue ;};_bgbe .markCells ();_bgbe .log ("\u0067\u0072\u006fw\u006e");
_acbe =append (_acbe ,_bgbe );};return _acbe ;};func (_aacfd gridTile )contains (_ddbf _e .PdfRectangle )bool {if _aacfd .numBorders ()< 3{return false ;};if _aacfd ._agab &&_ddbf .Llx < _aacfd .Llx -_cgge {return false ;};if _aacfd ._edbag &&_ddbf .Urx > _aacfd .Urx +_cgge {return false ;
};if _aacfd ._ddab &&_ddbf .Lly < _aacfd .Lly -_cgge {return false ;};if _aacfd ._bfefb &&_ddbf .Ury > _aacfd .Ury +_cgge {return false ;};return true ;};func (_beaa *textWord )toTextMarks (_adaec *int )[]TextMark {var _bcfae []TextMark ;for _ ,_gdeag :=range _beaa ._ggegd {_bcfae =_fega (_bcfae ,_adaec ,_gdeag .ToTextMark ());
};return _bcfae ;};func (_cbgbg *textTable )log (_cgad string ){if !_edeg {return ;};_bc .Log .Info ("~\u007e\u007e\u0020\u0025\u0073\u003a \u0025\u0064\u0020\u0078\u0020\u0025d\u0020\u0067\u0072\u0069\u0064\u003d\u0025t\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0025\u0036\u002e2\u0066",_cgad ,_cbgbg ._afde ,_cbgbg ._gaafe ,_cbgbg ._ffdbb ,_cbgbg .PdfRectangle );
for _caeff :=0;_caeff < _cbgbg ._gaafe ;_caeff ++{for _agabd :=0;_agabd < _cbgbg ._afde ;_agabd ++{_gfcc :=_cbgbg .get (_agabd ,_caeff );if _gfcc ==nil {continue ;};_db .Printf ("%\u0034\u0064\u0020\u00252d\u003a \u0025\u0036\u002e\u0032\u0066 \u0025\u0071\u0020\u0025\u0064\u000a",_agabd ,_caeff ,_gfcc .PdfRectangle ,_agag (_gfcc .text (),50),_b .RuneCountInString (_gfcc .text ()));
};};};func (_agaf *textObject )getFontDict (_fedf string )(_agbe _bgf .PdfObject ,_abef error ){_cbce :=_agaf ._bed ;if _cbce ==nil {_bc .Log .Debug ("g\u0065\u0074\u0046\u006f\u006e\u0074D\u0069\u0063\u0074\u002e\u0020\u004eo\u0020\u0072\u0065\u0073\u006f\u0075\u0072c\u0065\u0073\u002e\u0020\u006e\u0061\u006d\u0065\u003d\u0025#\u0071",_fedf );
return nil ,nil ;};_agbe ,_bcd :=_cbce .GetFontByName (_bgf .PdfObjectName (_fedf ));if !_bcd {_bc .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0067\u0065t\u0046\u006f\u006et\u0044\u0069\u0063\u0074\u003a\u0020\u0046\u006f\u006et \u006e\u006f\u0074 \u0066\u006fu\u006e\u0064\u003a\u0020\u006e\u0061m\u0065\u003d%\u0023\u0071",_fedf );
return nil ,_c .New ("f\u006f\u006e\u0074\u0020no\u0074 \u0069\u006e\u0020\u0072\u0065s\u006f\u0075\u0072\u0063\u0065\u0073");};return _agbe ,nil ;};func _eebe (_bdeeg *list )[]*list {var _ecdd []*list ;for _ ,_dcdd :=range _bdeeg ._dgac {switch _dcdd ._cbcf {case "\u004c\u0049":_dddfa :=_ecaa (_dcdd );
_ccgc :=_eebe (_dcdd );_gacg :=_dfgcg (_dddfa ,"\u0062\u0075\u006c\u006c\u0065\u0074",_ccgc );_ddec :=_dgeb (_dddfa ,"");_gacg ._dgaf =_ddec ;_ecdd =append (_ecdd ,_gacg );case "\u004c\u0042\u006fd\u0079":return _eebe (_dcdd );case "\u004c":_ffgb :=_eebe (_dcdd );
_ecdd =append (_ecdd ,_ffgb ...);return _ecdd ;};};return _ecdd ;};func _cebf (_fceffd []*textLine ,_ecad ,_ddad float64 )[]*textLine {var _bfae []*textLine ;for _ ,_cggeg :=range _fceffd {if _ecad ==-1{if _cggeg ._ebee > _ddad {_bfae =append (_bfae ,_cggeg );
};}else {if _cggeg ._ebee > _ddad &&_cggeg ._ebee < _ecad {_bfae =append (_bfae ,_cggeg );};};};return _bfae ;};type textPara struct{_e .PdfRectangle ;_eddff _e .PdfRectangle ;_gcbc []*textLine ;_fbda *textTable ;_bdbc bool ;_ecfbe bool ;_faea *textPara ;
_gabd *textPara ;_bbgcc *textPara ;_gccaae *textPara ;_efabc []list ;};func _ccfdd (_afecf ,_ecgaf ,_dadeaa ,_afcac *textPara )*textTable {_cbea :=&textTable {_afde :2,_gaafe :2,_abgb :make (map[uint64 ]*textPara ,4)};_cbea .put (0,0,_afecf );_cbea .put (1,0,_ecgaf );
_cbea .put (0,1,_dadeaa );_cbea .put (1,1,_afcac );return _cbea ;};func _ebfg (_bfcaa ,_fgcg bounded )float64 {_defa :=_acdab (_bfcaa ,_fgcg );if !_ffagb (_defa ){return _defa ;};return _edbb (_bfcaa ,_fgcg );};func _ddcfa (_abec string )bool {if _b .RuneCountInString (_abec )< _agbef {return false ;
};_bdcd ,_faca :=_b .DecodeLastRuneInString (_abec );if _faca <=0||!_ba .Is (_ba .Hyphen ,_bdcd ){return false ;};_bdcd ,_faca =_b .DecodeLastRuneInString (_abec [:len (_abec )-_faca ]);return _faca > 0&&!_ba .IsSpace (_bdcd );};type compositeCell struct{_e .PdfRectangle ;
paraList ;};func _bffad (_ccfde []*textLine ,_fded map[float64 ][]*textLine )[]*list {_dcfdb :=_dfdg (_fded );_gcef :=[]*list {};if len (_dcfdb )==0{return _gcef ;};_egfa :=_dcfdb [0];_ffbad :=1;_gfeaf :=_fded [_egfa ];for _ebfa ,_afef :=range _gfeaf {var _eaag float64 ;
_gbff :=[]*list {};_cgdc :=_afef ._ebee ;_gbfe :=-1.0;if _ebfa < len (_gfeaf )-1{_gbfe =_gfeaf [_ebfa +1]._ebee ;};if _ffbad < len (_dcfdb ){_gbff =_dgfd (_ccfde ,_fded ,_dcfdb ,_ffbad ,_cgdc ,_gbfe );};_eaag =_gbfe ;if len (_gbff )> 0{_eegg :=_gbff [0];
if len (_eegg ._caef )> 0{_eaag =_eegg ._caef [0]._ebee ;};};_cafd :=[]*textLine {_afef };_dbdad :=_gebeb (_afef ,_ccfde ,_dcfdb ,_cgdc ,_eaag );_cafd =append (_cafd ,_dbdad ...);_aeda :=_dfgcg (_cafd ,"\u0062\u0075\u006c\u006c\u0065\u0074",_gbff );_aeda ._dgaf =_dgeb (_cafd ,"");
_gcef =append (_gcef ,_aeda );};return _gcef ;};func (_bgfeee rulingList )toTilings ()(rulingList ,[]gridTiling ){_bgfeee .log ("\u0074o\u0054\u0069\u006c\u0069\u006e\u0067s");if len (_bgfeee )==0{return nil ,nil ;};_bgfeee =_bgfeee .tidied ("\u0061\u006c\u006c");
_bgfeee .log ("\u0074\u0069\u0064\u0069\u0065\u0064");_cbdg :=_bgfeee .toGrids ();_becg :=make ([]gridTiling ,len (_cbdg ));for _dfcc ,_gcde :=range _cbdg {_becg [_dfcc ]=_gcde .asTiling ();};return _bgfeee ,_becg ;};func _ggfdb (_deafa *_e .Image ,_dggdb _dg .Color )_cec .Image {_eaccf ,_effcca :=int (_deafa .Width ),int (_deafa .Height );
_ccbbg :=_cec .NewRGBA (_cec .Rect (0,0,_eaccf ,_effcca ));for _acbff :=0;_acbff < _effcca ;_acbff ++{for _gegeeg :=0;_gegeeg < _eaccf ;_gegeeg ++{_bafe ,_afdg :=_deafa .ColorAt (_gegeeg ,_acbff );if _afdg !=nil {_bc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_gegeeg ,_acbff );
continue ;};_bgcg ,_deda ,_gbfd ,_ :=_bafe .RGBA ();var _bafcbc _dg .Color ;if _bgcg +_deda +_gbfd ==0{_bafcbc =_dg .Transparent ;}else {_bafcbc =_dggdb ;};_ccbbg .Set (_gegeeg ,_acbff ,_bafcbc );};};return _ccbbg ;};func _aebab (_gfda ,_cgca _ee .Point )bool {return _gfda .X ==_cgca .X &&_gfda .Y ==_cgca .Y };
func _gbbg (_gege ,_eaaa _e .PdfRectangle )bool {return _gege .Lly <=_eaaa .Ury &&_eaaa .Lly <=_gege .Ury ;};func (_adeg rulingList )vertsHorzs ()(rulingList ,rulingList ){var _bgcb ,_edfae rulingList ;for _ ,_acegb :=range _adeg {switch _acegb ._ffada {case _dfdb :_bgcb =append (_bgcb ,_acegb );
case _cgfba :_edfae =append (_edfae ,_acegb );};};return _bgcb ,_edfae ;};func _bcabb (_bbaa byte )bool {for _ ,_abbb :=range _fbafd {if []byte (_abbb )[0]==_bbaa {return true ;};};return false ;};

// String returns a description of `k`.
func (_fbfb markKind )String ()string {_gbgb ,_cded :=_fbcdg [_fbfb ];if !_cded {return _db .Sprintf ("\u004e\u006f\u0074\u0020\u0061\u0020\u006d\u0061\u0072k\u003a\u0020\u0025\u0064",_fbfb );};return _gbgb ;};func (_bccef rectRuling )asRuling ()(*ruling ,bool ){_cdfd :=ruling {_ffada :_bccef ._dage ,Color :_bccef .Color ,_dfcb :_dcgde };
switch _bccef ._dage {case _dfdb :_cdfd ._cbag =0.5*(_bccef .Llx +_bccef .Urx );_cdfd ._eagf =_bccef .Lly ;_cdfd ._adgg =_bccef .Ury ;_bbcf ,_cbfdc :=_bccef .checkWidth (_bccef .Llx ,_bccef .Urx );if !_cbfdc {if _effb {_bc .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067V\u0065\u0072\u0074\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_bccef );
};return nil ,false ;};_cdfd ._aabf =_bbcf ;case _cgfba :_cdfd ._cbag =0.5*(_bccef .Lly +_bccef .Ury );_cdfd ._eagf =_bccef .Llx ;_cdfd ._adgg =_bccef .Urx ;_fddb ,_cdbfb :=_bccef .checkWidth (_bccef .Lly ,_bccef .Ury );if !_cdbfb {if _effb {_bc .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067H\u006f\u0072\u007a\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_bccef );
};return nil ,false ;};_cdfd ._aabf =_fddb ;default:_bc .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_bccef ._dage );return nil ,false ;};return &_cdfd ,true ;};func (_gfbbd rulingList )findPrimSec (_fedgb ,_dacdb float64 )*ruling {for _ ,_afcd :=range _gfbbd {if _ffagb (_afcd ._cbag -_fedgb )&&_afcd ._eagf -_ddae <=_dacdb &&_dacdb <=_afcd ._adgg +_ddae {return _afcd ;
};};return nil ;};func (_edbg *ruling )gridIntersecting (_dcfdf *ruling )bool {return _afgb (_edbg ._eagf ,_dcfdf ._eagf )&&_afgb (_edbg ._adgg ,_dcfdf ._adgg );};func (_ebcd *wordBag )blocked (_cce *textWord )bool {if _cce .Urx < _ebcd .Llx {_ccade :=_ebab (_cce .PdfRectangle );
_agcd :=_efaf (_ebcd .PdfRectangle );if _ebcd ._cefg .blocks (_ccade ,_agcd ){if _eeafd {_bc .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0078\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_cce ,_ebcd );};return true ;};}else if _ebcd .Urx < _cce .Llx {_eede :=_ebab (_ebcd .PdfRectangle );
_ccdg :=_efaf (_cce .PdfRectangle );if _ebcd ._cefg .blocks (_eede ,_ccdg ){if _eeafd {_bc .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0078\u2192\u0020:\u0020\u0025\u0073\u0020%s",_cce ,_ebcd );};return true ;};};if _cce .Ury < _ebcd .Lly {_adaf :=_cagb (_cce .PdfRectangle );
_eece :=_egbb (_ebcd .PdfRectangle );if _ebcd ._ecga .blocks (_adaf ,_eece ){if _eeafd {_bc .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0079\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_cce ,_ebcd );};return true ;};}else if _ebcd .Ury < _cce .Lly {_agadc :=_cagb (_ebcd .PdfRectangle );
_aebb :=_egbb (_cce .PdfRectangle );if _ebcd ._ecga .blocks (_agadc ,_aebb ){if _eeafd {_bc .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0079\u2192\u0020:\u0020\u0025\u0073\u0020%s",_cce ,_ebcd );};return true ;};};return false ;};func (_cgff paraList )yNeighbours (_affd float64 )map[*textPara ][]int {_baeef :=make ([]event ,2*len (_cgff ));
if _affd ==0{for _efcfg ,_fcde :=range _cgff {_baeef [2*_efcfg ]=event {_fcde .Lly ,true ,_efcfg };_baeef [2*_efcfg +1]=event {_fcde .Ury ,false ,_efcfg };};}else {for _beabd ,_cbbdc :=range _cgff {_baeef [2*_beabd ]=event {_cbbdc .Lly -_affd *_cbbdc .fontsize (),true ,_beabd };
_baeef [2*_beabd +1]=event {_cbbdc .Ury +_affd *_cbbdc .fontsize (),false ,_beabd };};};return _cgff .eventNeighbours (_baeef );};func _gbbf (_dec _e .PdfRectangle ,_acfc bounded )float64 {return _dec .Ury -_acfc .bbox ().Lly };func (_fbef *wordBag )removeWord (_agbb *textWord ,_bcfc int ){_cdfb :=_fbef ._fdc [_bcfc ];
_cdfb =_fgba (_cdfb ,_agbb );if len (_cdfb )==0{delete (_fbef ._fdc ,_bcfc );}else {_fbef ._fdc [_bcfc ]=_cdfb ;};};