//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package extractor is used for quickly extracting PDF content through a simple interface.
// Currently offers functionality for extracting textual content.
package extractor ;import (_af "bytes";_bfb "errors";_deg "fmt";_d "github.com/unidoc/unipdf/v3/common";_gf "github.com/unidoc/unipdf/v3/contentstream";_cb "github.com/unidoc/unipdf/v3/core";_gc "github.com/unidoc/unipdf/v3/internal/license";_c "github.com/unidoc/unipdf/v3/internal/textencoding";
_ed "github.com/unidoc/unipdf/v3/internal/transform";_bf "github.com/unidoc/unipdf/v3/model";_f "golang.org/x/image/draw";_b "golang.org/x/text/unicode/norm";_de "image";_bcc "image/color";_bc "io";_aa "math";_ga "reflect";_fc "regexp";_bd "sort";_gb "strings";
_g "unicode";_a "unicode/utf8";);func (_abff *wordBag )getDepthIdx (_ccfcc float64 )int {_efca :=_abff .depthIndexes ();_fgcea :=_fdcc (_ccfcc );if _fgcea < _efca [0]{return _efca [0];};if _fgcea > _efca [len (_efca )-1]{return _efca [len (_efca )-1];};
return _fgcea ;};func _ddbd (_gdbb *textLine )float64 {return _gdbb ._bbfda [0].Llx };func (_agdba lineRuling )yMean ()float64 {return 0.5*(_agdba ._bffg .Y +_agdba ._cabeba .Y )};type lists []*list ;func (_adce paraList )log (_bfbca string ){if !_egbc {return ;
};_d .Log .Info ("%\u0038\u0073\u003a\u0020\u0025\u0064 \u0070\u0061\u0072\u0061\u0073\u0020=\u003d\u003d\u003d\u003d\u003d\u003d\u002d-\u002d\u002d\u002d\u002d\u002d\u003d\u003d\u003d\u003d\u003d=\u003d",_bfbca ,len (_adce ));for _bdefe ,_aead :=range _adce {if _aead ==nil {continue ;
};_edba :=_aead .text ();_fbaae :="\u0020\u0020";if _aead ._fcdge !=nil {_fbaae =_deg .Sprintf ("\u005b%\u0064\u0078\u0025\u0064\u005d",_aead ._fcdge ._ccfea ,_aead ._fcdge ._gecff );};_deg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0025s\u0020\u0025\u0071\u000a",_bdefe ,_aead .PdfRectangle ,_fbaae ,_bdfde (_edba ,50));
};};func (_edgdd rulingList )comp (_acab ,_bded int )bool {_bafc ,_gfddc :=_edgdd [_acab ],_edgdd [_bded ];_dbaf ,_afcef :=_bafc ._daea ,_gfddc ._daea ;if _dbaf !=_afcef {return _dbaf > _afcef ;};if _dbaf ==_acdg {return false ;};_cgfc :=func (_ebgfc bool )bool {if _dbaf ==_faec {return _ebgfc ;
};return !_ebgfc ;};_aebaf ,_gbefb :=_bafc ._gdge ,_gfddc ._gdge ;if _aebaf !=_gbefb {return _cgfc (_aebaf > _gbefb );};_aebaf ,_gbefb =_bafc ._ggbc ,_gfddc ._ggbc ;if _aebaf !=_gbefb {return _cgfc (_aebaf < _gbefb );};return _cgfc (_bafc ._agbd < _gfddc ._agbd );
};func _agbea (_dbba []*textLine ,_bacd map[float64 ][]*textLine )[]*list {_bfbcd :=_agfgg (_bacd );_ggfd :=[]*list {};if len (_bfbcd )==0{return _ggfd ;};_defc :=_bfbcd [0];_bfdg :=1;_daga :=_bacd [_defc ];for _abeg ,_ecdc :=range _daga {var _ceafg float64 ;
_dfegd :=[]*list {};_bbaa :=_ecdc ._eeage ;_gdac :=-1.0;if _abeg < len (_daga )-1{_gdac =_daga [_abeg +1]._eeage ;};if _bfdg < len (_bfbcd ){_dfegd =_egcb (_dbba ,_bacd ,_bfbcd ,_bfdg ,_bbaa ,_gdac );};_ceafg =_gdac ;if len (_dfegd )> 0{_bbbb :=_dfegd [0];
if len (_bbbb ._gead )> 0{_ceafg =_bbbb ._gead [0]._eeage ;};};_dddbfg :=[]*textLine {_ecdc };_gbeeb :=_cabeb (_ecdc ,_dbba ,_bfbcd ,_bbaa ,_ceafg );_dddbfg =append (_dddbfg ,_gbeeb ...);_ceca :=_dca (_dddbfg ,"\u0062\u0075\u006c\u006c\u0065\u0074",_dfegd );
_ceca ._gcbe =_fdea (_dddbfg ,"");_ggfd =append (_ggfd ,_ceca );};return _ggfd ;};func _dgcc (_effa []int ,_cfbc *TextMarkArray ,_eag string )(*TextMarkArray ,Box ,error ){_eaa :=Box {};_ebaa :=_effa [0];_bfef :=_effa [1];_gcf :=len (_eag )-len (_gb .TrimLeft (_eag ,"\u0020"));
_gfcd :=len (_eag )-len (_gb .TrimRight (_eag ,"\u0020\u000a"));_ebaa =_ebaa +_gcf ;_bfef =_bfef -_gfcd ;_dffa ,_ffg :=_cfbc .RangeOffset (_ebaa ,_bfef );if _ffg !=nil {return nil ,_eaa ,_ffg ;};_gfa ,_fcdb :=_dffa .BBox ();if !_fcdb {return nil ,_eaa ,_deg .Errorf ("\u0073\u0070\u0061\u006e\u004d\u0061\u0072\u006bs\u002e\u0042\u0042ox\u0020\u0068\u0061\u0073\u0020\u006eo\u0020\u0062\u006f\u0075\u006e\u0064\u0069\u006e\u0067\u0020\u0062\u006f\u0078\u002e\u0020s\u0070\u0061\u006e\u004d\u0061\u0072\u006b\u0073=\u0025\u0073",_dffa );
};_eaa =Box {BBox :_gfa };return _dffa ,_eaa ,nil ;};func (_bbaac *textTable )subdivide ()*textTable {_bbaac .logComposite ("\u0073u\u0062\u0064\u0069\u0076\u0069\u0064e");_fbcc :=_bbaac .compositeRowCorridors ();_cbfgc :=_bbaac .compositeColCorridors ();
if _cdgfc {_d .Log .Info ("\u0073u\u0062\u0064i\u0076\u0069\u0064\u0065:\u000a\u0009\u0072o\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s=\u0025\u0073\u000a\t\u0063\u006fl\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073=\u0025\u0073",_eaae (_fbcc ),_eaae (_cbfgc ));
};if len (_fbcc )==0||len (_cbfgc )==0{return _bbaac ;};_caef (_fbcc );_caef (_cbfgc );if _cdgfc {_d .Log .Info ("\u0073\u0075\u0062\u0064\u0069\u0076\u0069\u0064\u0065\u0020\u0066\u0069\u0078\u0065\u0064\u003a\u000a\u0009r\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073\u003d\u0025\u0073\u000a\u0009\u0063\u006f\u006cC\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d\u0025\u0073",_eaae (_fbcc ),_eaae (_cbfgc ));
};_dcdcd ,_fabebf :=_fdbed (_bbaac ._gecff ,_fbcc );_dbga ,_bbbea :=_fdbed (_bbaac ._ccfea ,_cbfgc );_dbgde :=make (map[uint64 ]*textPara ,_bbbea *_fabebf );_dccc :=&textTable {PdfRectangle :_bbaac .PdfRectangle ,_cgfe :_bbaac ._cgfe ,_gecff :_fabebf ,_ccfea :_bbbea ,_agcf :_dbgde };
if _cdgfc {_d .Log .Info ("\u0073\u0075b\u0064\u0069\u0076\u0069\u0064\u0065\u003a\u0020\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0063\u0065\u006c\u006c\u0073\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0079\u004f\u0066\u0066\u0073\u0065\u0074\u0073=\u0025\u002b\u0076\u000a"+"\u0009\u0078\u004f\u0066\u0066\u0073\u0065\u0074\u0073\u003d\u0025\u002b\u0076",_bbaac ._ccfea ,_bbaac ._gecff ,_bbbea ,_fabebf ,_eaae (_fbcc ),_eaae (_cbfgc ),_dcdcd ,_dbga );
};for _ebfcc :=0;_ebfcc < _bbaac ._gecff ;_ebfcc ++{_abddb :=_dcdcd [_ebfcc ];for _dcff :=0;_dcff < _bbaac ._ccfea ;_dcff ++{_eadfa :=_dbga [_dcff ];if _cdgfc {_deg .Printf ("\u0025\u0036\u0064\u002c %\u0032\u0064\u003a\u0020\u0078\u0030\u003d\u0025\u0064\u0020\u0079\u0030\u003d\u0025d\u000a",_dcff ,_ebfcc ,_eadfa ,_abddb );
};_bfgdg ,_eaad :=_bbaac ._ebcde [_dfdbcc (_dcff ,_ebfcc )];if !_eaad {continue ;};_bdace :=_bfgdg .split (_fbcc [_ebfcc ],_cbfgc [_dcff ]);for _faebd :=0;_faebd < _bdace ._gecff ;_faebd ++{for _aagafg :=0;_aagafg < _bdace ._ccfea ;_aagafg ++{_ffaee :=_bdace .get (_aagafg ,_faebd );
_dccc .put (_eadfa +_aagafg ,_abddb +_faebd ,_ffaee );if _cdgfc {_deg .Printf ("\u0025\u0038\u0064\u002c\u0020\u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_eadfa +_aagafg ,_abddb +_faebd ,_ffaee );};};};};};return _dccc ;};func (_bcccb *subpath )isQuadrilateral ()bool {if len (_bcccb ._egdag )< 4||len (_bcccb ._egdag )> 5{return false ;
};if len (_bcccb ._egdag )==5{_cabb :=_bcccb ._egdag [0];_acdea :=_bcccb ._egdag [4];if _cabb .X !=_acdea .X ||_cabb .Y !=_acdea .Y {return false ;};};return true ;};func _bbda (_eefa byte )bool {for _ ,_acecd :=range _egga {if []byte (_acecd )[0]==_eefa {return true ;
};};return false ;};type cachedImage struct{_dff *_bf .Image ;_dea _bf .PdfColorspace ;};

// Text gets the extracted text contained in `l`.
func (_aeae *list )Text ()string {_ecac :=&_gb .Builder {};_aaeg :="";_egac (_aeae ,_ecac ,&_aaeg );return _ecac .String ();};func _fbbd (_bed _bf .PdfRectangle )textState {return textState {_fge :100,_deca :RenderModeFill ,_cdef :_bed };};const (_caeg =1.0e-6;
_eadea =1.0e-4;_cgaaf =10;_eegd =6;_bdfd =0.5;_cgbg =0.12;_fgee =0.19;_abcf =0.04;_gdab =0.04;_cfcd =1.0;_gaba =0.04;_aade =12;_afbbg =0.4;_bdcgg =0.7;_fcacb =1.0;_egdg =0.1;_cfcf =1.4;_fdedb =0.46;_agecf =0.02;_gceg =0.2;_bfbf =0.5;_cfgd =4;_dedb =4.0;
_fcda =6;_dcdc =0.3;_fgbf =0.01;_dadd =0.02;_agfef =2;_efga =2;_edda =500;_fdccd =4.0;_fcgg =4.0;_aeeg =0.05;_fafbf =0.1;_afa =2.0;_gece =2.0;_fdbb =1.5;_cgbeb =3.0;_defaa =0.25;);func (_dcfe *textObject )getFontDirect (_cdeb string )(*_bf .PdfFont ,error ){_faeg ,_bcce :=_dcfe .getFontDict (_cdeb );
if _bcce !=nil {return nil ,_bcce ;};_cece ,_bcce :=_bf .NewPdfFontFromPdfObject (_faeg );if _bcce !=nil {_d .Log .Debug ("\u0067\u0065\u0074\u0046\u006f\u006e\u0074\u0044\u0069\u0072\u0065\u0063\u0074\u003a\u0020\u004e\u0065\u0077Pd\u0066F\u006f\u006e\u0074\u0046\u0072\u006f\u006d\u0050\u0064\u0066\u004f\u0062j\u0065\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u006e\u0061\u006d\u0065\u003d%\u0023\u0071\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cdeb ,_bcce );
};return _cece ,_bcce ;};func (_dcgfg paraList )llyRange (_gefd []int ,_beefdd ,_bcfd float64 )[]int {_abbf :=len (_dcgfg );if _bcfd < _dcgfg [_gefd [0]].Lly ||_beefdd > _dcgfg [_gefd [_abbf -1]].Lly {return nil ;};_aefb :=_bd .Search (_abbf ,func (_daacd int )bool {return _dcgfg [_gefd [_daacd ]].Lly >=_beefdd });
_agede :=_bd .Search (_abbf ,func (_ggbdg int )bool {return _dcgfg [_gefd [_ggbdg ]].Lly > _bcfd });return _gefd [_aefb :_agede ];};func _ccebf (_gecbf *wordBag ,_ccfa float64 ,_agaac ,_efcf rulingList ,_ecacd bool )[]*wordBag {var _abbbgg []*wordBag ;
for _ ,_afbg :=range _gecbf .depthIndexes (){_aaaf :=false ;for !_gecbf .empty (_afbg ){_bgeb :=_gecbf .firstReadingIndex (_afbg );_acgag :=_gecbf .firstWord (_bgeb );_efgba :=_ddc (_acgag ,_ccfa ,_agaac ,_efcf );_gecbf .removeWord (_acgag ,_bgeb );if _dgad {_d .Log .Info ("\u0066\u0069\u0072\u0073\u0074\u0057\u006f\u0072\u0064\u0020\u005e\u005e^\u005e\u0020\u0025\u0073",_acgag .String ());
};for _edb :=true ;_edb ;_edb =_aaaf {_aaaf =false ;_cbbb :=_fcacb *_efgba ._bcf ;_gcbf :=_afbbg *_efgba ._bcf ;if _ecacd {_gcbf =_aa .MaxFloat64 ;};_eggfa :=_cfcd *_efgba ._bcf ;if _dgad {_d .Log .Info ("\u0070a\u0072a\u0057\u006f\u0072\u0064\u0073\u0020\u0064\u0065\u0070\u0074\u0068 \u0025\u002e\u0032\u0066 \u002d\u0020\u0025\u002e\u0032f\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061\u0044\u0065\u0070\u0074\u0068\u0047\u0061\u0070\u003d\u0025\u002e\u0032\u0066\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061R\u0065\u0061\u0064\u0069\u006e\u0067\u0047\u0061p\u003d\u0025\u002e\u0032\u0066",_efgba .minDepth (),_efgba .maxDepth (),_eggfa ,_gcbf );
};if _gecbf .scanBand ("\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c",_efgba ,_cbaa (_ggbfd ,0),_efgba .minDepth ()-_eggfa ,_efgba .maxDepth ()+_eggfa ,_gaba ,false ,false )> 0{_aaaf =true ;};if _gecbf .scanBand ("\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_efgba ,_cbaa (_ggbfd ,_gcbf ),_efgba .minDepth (),_efgba .maxDepth (),_bdcgg ,false ,false )> 0{_aaaf =true ;
};if _aaaf {continue ;};_bedb :=_gecbf .scanBand ("",_efgba ,_cbaa (_ffc ,_cbbb ),_efgba .minDepth (),_efgba .maxDepth (),_egdg ,true ,false );if _bedb > 0{_feffc :=(_efgba .maxDepth ()-_efgba .minDepth ())/_efgba ._bcf ;if (_bedb > 1&&float64 (_bedb )> 0.3*_feffc )||_bedb <=10{if _gecbf .scanBand ("\u006f\u0074\u0068e\u0072",_efgba ,_cbaa (_ffc ,_cbbb ),_efgba .minDepth (),_efgba .maxDepth (),_egdg ,false ,true )> 0{_aaaf =true ;
};};};};_abbbgg =append (_abbbgg ,_efgba );};};return _abbbgg ;};func (_deec *stateStack )size ()int {return len (*_deec )};func (_aagbf *subpath )close (){if !_afcb (_aagbf ._egdag [0],_aagbf .last ()){_aagbf .add (_aagbf ._egdag [0]);};_aagbf ._ecefb =true ;
_aagbf .removeDuplicates ();};func (_ccac rulingList )snapToGroups ()rulingList {_dcdbg ,_eeedb :=_ccac .vertsHorzs ();if len (_dcdbg )> 0{_dcdbg =_dcdbg .snapToGroupsDirection ();};if len (_eeedb )> 0{_eeedb =_eeedb .snapToGroupsDirection ();};_gcdag :=append (_dcdbg ,_eeedb ...);
_gcdag .log ("\u0073\u006e\u0061p\u0054\u006f\u0047\u0072\u006f\u0075\u0070\u0073");return _gcdag ;};func (_geg *shapesState )lastpointEstablished ()(_ed .Point ,bool ){if _geg ._cfff {return _geg ._acbeg ,false ;};_fgbd :=len (_geg ._eccd );if _fgbd > 0&&_geg ._eccd [_fgbd -1]._ecefb {return _geg ._eccd [_fgbd -1].last (),false ;
};return _ed .Point {},true ;};

// PageTextOptions holds various options available in extraction process.
type PageTextOptions struct{_agea bool ;_cfg bool ;_beba bool ;};func _dfcgf (_debff _bf .PdfRectangle )*ruling {return &ruling {_daea :_acegd ,_gdge :_debff .Llx ,_ggbc :_debff .Lly ,_agbd :_debff .Ury };};func (_dac *textObject )setWordSpacing (_ddag float64 ){if _dac ==nil {return ;
};_dac ._gdga ._bfec =_ddag ;};

// ExtractTextWithStats works like ExtractText but returns the number of characters in the output
// (`numChars`) and the number of characters that were not decoded (`numMisses`).
func (_abag *Extractor )ExtractTextWithStats ()(_gfca string ,_dcef int ,_dgba int ,_adgg error ){_dddef ,_dcef ,_dgba ,_adgg :=_abag .ExtractPageText ();if _adgg !=nil {return "",_dcef ,_dgba ,_adgg ;};return _dddef .Text (),_dcef ,_dgba ,nil ;};func _bddfb (_dbce _bf .PdfRectangle )*ruling {return &ruling {_daea :_faec ,_gdge :_dbce .Lly ,_ggbc :_dbce .Llx ,_agbd :_dbce .Urx };
};func _bcda (_deff string ,_eae string )([][]int ,error ){_abg ,_aec :=_fc .Compile (_deff );if _aec !=nil {return nil ,_deg .Errorf ("\u0065\u0072\u0072\u006f\u0072\u0020c\u006f\u006d\u0070\u0069\u006c\u0069\u006e\u0067\u0020\u0072\u0065\u0067\u0065x\u0020\u0070\u0061\u0074\u0074\u0065\u0072n\u003a\u0020\u0025\u0077",_aec );
};_cab :=_abg .FindAllStringIndex (_eae ,-1);return _cab ,nil ;};

// Extractor stores and offers functionality for extracting content from PDF pages.
type Extractor struct{_gbb string ;_ac *_bf .PdfPageResources ;_gca _bf .PdfRectangle ;_gad *_bf .PdfRectangle ;_fca map[string ]fontEntry ;_bac map[string ]textResult ;_eda map[string ]textResult ;_bba int64 ;_efa int ;_aag *Options ;_geb *_cb .PdfObject ;
_dbg _cb .PdfObject ;_gec []*_bf .PdfAnnotation ;};

// String returns a description of `state`.
func (_dbfd *textState )String ()string {_bgac :="\u005bN\u004f\u0054\u0020\u0053\u0045\u0054]";if _dbfd ._bddc !=nil {_bgac =_dbfd ._bddc .BaseFont ();};return _deg .Sprintf ("\u0074\u0063\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0077\u003d\u0025\u002e\u0032\u0066 \u0074f\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u003d\u0025\u0071",_dbfd ._dbad ,_dbfd ._bfec ,_dbfd ._bbb ,_bgac );
};func (_cbbc *shapesState )cubicTo (_bdg ,_bfea ,_caeeg ,_ecgca ,_cagc ,_ecae float64 ){if _efcb {_d .Log .Info ("\u0063\u0075\u0062\u0069\u0063\u0054\u006f\u003a");};_cbbc .addPoint (_cagc ,_ecae );};func (_dcdfg *compositeCell )updateBBox (){for _ ,_bdbcd :=range _dcdfg .paraList {_dcdfg .PdfRectangle =_caddg (_dcdfg .PdfRectangle ,_bdbcd .PdfRectangle );
};};func _afcb (_ffece ,_dfff _ed .Point )bool {return _ffece .X ==_dfff .X &&_ffece .Y ==_dfff .Y };func _ccab (_fbdfg []pathSection ){if _eadea < 0.0{return ;};if _cfef {_d .Log .Info ("\u0067\u0072\u0061\u006e\u0075\u006c\u0061\u0072\u0069\u007a\u0065\u003a\u0020\u0025\u0064 \u0073u\u0062\u0070\u0061\u0074\u0068\u0020\u0073\u0065\u0063\u0074\u0069\u006f\u006e\u0073",len (_fbdfg ));
};for _bfga ,_aagbb :=range _fbdfg {for _cfbbdc ,_cgdeb :=range _aagbb ._cgdd {for _cbfebg ,_cecc :=range _cgdeb ._egdag {_cgdeb ._egdag [_cbfebg ]=_ed .Point {X :_fbdc (_cecc .X ),Y :_fbdc (_cecc .Y )};if _cfef {_feeac :=_cgdeb ._egdag [_cbfebg ];if !_afcb (_cecc ,_feeac ){_eedge :=_ed .Point {X :_feeac .X -_cecc .X ,Y :_feeac .Y -_cecc .Y };
_deg .Printf ("\u0025\u0034d \u002d\u0020\u00254\u0064\u0020\u002d\u0020%4d\u003a %\u002e\u0032\u0066\u0020\u2192\u0020\u0025.2\u0066\u0020\u0028\u0025\u0067\u0029\u000a",_bfga ,_cfbbdc ,_cbfebg ,_cecc ,_feeac ,_eedge );};};};};};};func _ecdb (_bdebf []*textWord ,_beag float64 ,_bebbb ,_adbf rulingList )*wordBag {_afbce :=_ddc (_bdebf [0],_beag ,_bebbb ,_adbf );
for _ ,_bfbgb :=range _bdebf [1:]{_efcg :=_fdcc (_bfbgb ._afefd );_afbce ._gecfd [_efcg ]=append (_afbce ._gecfd [_efcg ],_bfbgb );_afbce .PdfRectangle =_caddg (_afbce .PdfRectangle ,_bfbgb .PdfRectangle );};_afbce .sort ();return _afbce ;};func (_gfce *textPara )fontsize ()float64 {return _gfce ._efff [0]._cecg };
func (_fafg *textObject )moveTextSetLeading (_gdaf ,_dfea float64 ){_fafg ._gdga ._abf =-_dfea ;_fafg .moveLP (_gdaf ,_dfea );};func (_acfdb lineRuling )asRuling ()(*ruling ,bool ){_dbbf :=ruling {_daea :_acfdb ._ceece ,Color :_acfdb .Color ,_dfbf :_efgg };
switch _acfdb ._ceece {case _acegd :_dbbf ._gdge =_acfdb .xMean ();_dbbf ._ggbc =_aa .Min (_acfdb ._bffg .Y ,_acfdb ._cabeba .Y );_dbbf ._agbd =_aa .Max (_acfdb ._bffg .Y ,_acfdb ._cabeba .Y );case _faec :_dbbf ._gdge =_acfdb .yMean ();_dbbf ._ggbc =_aa .Min (_acfdb ._bffg .X ,_acfdb ._cabeba .X );
_dbbf ._agbd =_aa .Max (_acfdb ._bffg .X ,_acfdb ._cabeba .X );default:_d .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_acfdb ._ceece );return nil ,false ;};return &_dbbf ,true ;
};func (_gdcgg rulingList )sort (){_bd .Slice (_gdcgg ,_gdcgg .comp )};func _ecf (_fef []byte ,_gdgg *_bf .PdfFont )string {_efda :=_gdgg .BytesToCharcodes (_fef );_egfc ,_ggb ,_bfdc :=_gdgg .CharcodesToStrings (_efda ,"");if _bfdc > 0{_d .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_ggb ,_bfdc );
};_cgae :=_gb .Join (_egfc ,"");return _cgae ;};func (_bfaa rulingList )vertsHorzs ()(rulingList ,rulingList ){var _ffdb ,_gafaf rulingList ;for _ ,_aggdb :=range _bfaa {switch _aggdb ._daea {case _acegd :_ffdb =append (_ffdb ,_aggdb );case _faec :_gafaf =append (_gafaf ,_aggdb );
};};return _ffdb ,_gafaf ;};func _ffc (_ddbg *wordBag ,_dggf *textWord ,_agbaf float64 )bool {return _ddbg .Urx <=_dggf .Llx &&_dggf .Llx < _ddbg .Urx +_agbaf ;};func (_efgcc paraList )sortReadingOrder (){_d .Log .Trace ("\u0073\u006fr\u0074\u0052\u0065\u0061\u0064i\u006e\u0067\u004f\u0072\u0064e\u0072\u003a\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_efgcc ));
if len (_efgcc )<=1{return ;};_efgcc .computeEBBoxes ();_bd .Slice (_efgcc ,func (_geda ,_deae int )bool {return _facae (_efgcc [_geda ],_efgcc [_deae ])<=0});};

// ToTextMark returns the public view of `tm`.
func (_gdggb *textMark )ToTextMark ()TextMark {return TextMark {Text :_gdggb ._dbec ,Original :_gdggb ._gacg ,BBox :_gdggb ._cdff ,Font :_gdggb ._bgaa ,FontSize :_gdggb ._fegc ,FillColor :_gdggb ._dcdf ,StrokeColor :_gdggb ._gbdg ,Orientation :_gdggb ._acgg ,DirectObject :_gdggb ._edeg ,ObjString :_gdggb ._eabfe ,Tw :_gdggb .Tw ,Th :_gdggb .Th ,Tc :_gdggb ._dcfgg ,Index :_gdggb ._gfdce };
};func _adaf (_gbgd ,_afbda bounded )float64 {_gab :=_cedg (_gbgd ,_afbda );if !_bgfbd (_gab ){return _gab ;};return _agcb (_gbgd ,_afbda );};func (_cffa *textMark )inDiacriticArea (_egggeg *textMark )bool {_dafa :=_cffa .Llx -_egggeg .Llx ;_geag :=_cffa .Urx -_egggeg .Urx ;
_cbgcb :=_cffa .Lly -_egggeg .Lly ;return _aa .Abs (_dafa +_geag )< _cffa .Width ()*_bfbf &&_aa .Abs (_cbgcb )< _cffa .Height ()*_bfbf ;};func _beeg (_fadc ,_ebdf _ed .Point )bool {_fgddg :=_aa .Abs (_fadc .X -_ebdf .X );_cgbfa :=_aa .Abs (_fadc .Y -_ebdf .Y );
return _fefg (_cgbfa ,_fgddg );};func _agfdc (_abede structElement )[]structElement {_acdbf :=[]structElement {};for _ ,_dbfg :=range _abede ._ccbf {for _ ,_gbbdg :=range _dbfg ._ccbf {for _ ,_bacf :=range _gbbdg ._ccbf {if _bacf ._gffd =="\u004c"{_acdbf =append (_acdbf ,_bacf );
};};};};return _acdbf ;};

// PageFonts represents extracted fonts on a PDF page.
type PageFonts struct{Fonts []Font ;};func _cdfea (_bagc ,_bagf *textPara )bool {if _bagc ._afce ||_bagf ._afce {return true ;};return _bgfbd (_bagc .depth ()-_bagf .depth ());};func _bgdg (_cgg []*TextMarkArray ,_fdb ,_afed string )(string ,error ){_aafd :=0;
for _ ,_fed :=range _cgg {_abb :=_fed ._agfc [0].DirectObject ;if _abb ==nil {continue ;};_gaf :=_abb .String ();if len (_gaf )> 1{_eeb :=_cfdb (_fed ,&_fdb ,&_aafd ,_afed );if _eeb !=nil {return _fdb ,_eeb ;};}else if len (_gaf )==1{_afgc :=_dbeg (_fed ,&_fdb ,&_aafd ,_afed );
if _afgc !=nil {return _fdb ,_afgc ;};};};return _fdb ,nil ;};func (_ddbfda *textTable )growTable (){_cbdgc :=func (_gddd paraList ){_ddbfda ._gecff ++;for _abebb :=0;_abebb < _ddbfda ._ccfea ;_abebb ++{_bdade :=_gddd [_abebb ];_ddbfda .put (_abebb ,_ddbfda ._gecff -1,_bdade );
};};_fbgg :=func (_cdecc paraList ){_ddbfda ._ccfea ++;for _gabb :=0;_gabb < _ddbfda ._gecff ;_gabb ++{_ccgd :=_cdecc [_gabb ];_ddbfda .put (_ddbfda ._ccfea -1,_gabb ,_ccgd );};};if _caff {_ddbfda .log ("\u0067r\u006f\u0077\u0054\u0061\u0062\u006ce");};
for _feef :=0;;_feef ++{_bbeeb :=false ;_bgdb :=_ddbfda .getDown ();_agae :=_ddbfda .getRight ();if _caff {_deg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_feef ,_ddbfda );_deg .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0020\u0064\u006f\u0077\u006e\u003d\u0025\u0073\u000a",_bgdb );
_deg .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0072\u0069\u0067\u0068\u0074\u003d\u0025\u0073\u000a",_agae );};if _bgdb !=nil &&_agae !=nil {_aabcce :=_bgdb [len (_bgdb )-1];if !_aabcce .taken ()&&_aabcce ==_agae [len (_agae )-1]{_cbdgc (_bgdb );if _agae =_ddbfda .getRight ();
_agae !=nil {_fbgg (_agae );_ddbfda .put (_ddbfda ._ccfea -1,_ddbfda ._gecff -1,_aabcce );};_bbeeb =true ;};};if !_bbeeb &&_bgdb !=nil {_cbdgc (_bgdb );_bbeeb =true ;};if !_bbeeb &&_agae !=nil {_fbgg (_agae );_bbeeb =true ;};if !_bbeeb {break ;};};};

// TextMark represents extracted text on a page with information regarding both textual content,
// formatting (font and size) and positioning.
// It is the smallest unit of text on a PDF page, typically a single character.
//
// getBBox() in test_text.go shows how to compute bounding boxes of substrings of extracted text.
// The following code extracts the text on PDF page `page` into `text` then finds the bounding box
// `bbox` of substring `term` in `text`.
//
//	ex, _ := New(page)
//	// handle errors
//	pageText, _, _, err := ex.ExtractPageText()
//	// handle errors
//	text := pageText.Text()
//	textMarks := pageText.Marks()
//
//		start := strings.Index(text, term)
//	 end := start + len(term)
//	 spanMarks, err := textMarks.RangeOffset(start, end)
//	 // handle errors
//	 bbox, ok := spanMarks.BBox()
//	 // handle errors
type TextMark struct{

// Text is the extracted text.
Text string ;

// Original is the text in the PDF. It has not been decoded like `Text`.
Original string ;

// BBox is the bounding box of the text.
BBox _bf .PdfRectangle ;

// Font is the font the text was drawn with.
Font *_bf .PdfFont ;

// FontSize is the font size the text was drawn with.
FontSize float64 ;

// Offset is the offset of the start of TextMark.Text in the extracted text. If you do this
//   text, textMarks := pageText.Text(), pageText.Marks()
//   marks := textMarks.Elements()
// then marks[i].Offset is the offset of marks[i].Text in text.
Offset int ;

// Meta is set true for spaces and line breaks that we insert in the extracted text. We insert
// spaces (line breaks) when we see characters that are over a threshold horizontal (vertical)
//  distance  apart. See wordJoiner (lineJoiner) in PageText.computeViews().
Meta bool ;

// FillColor is the fill color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
FillColor _bcc .Color ;

// StrokeColor is the stroke color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
StrokeColor _bcc .Color ;

// Orientation is the text orientation
Orientation int ;

// DirectObject is the underlying PdfObject (Text Object) that represents the visible texts. This is introduced to get
// a simple access to the TextObject in case editing or replacment of some text is needed. E.g during redaction.
DirectObject _cb .PdfObject ;

// ObjString is a decoded string operand of a text-showing operator. It has the same value as `Text` attribute except
// when many glyphs are represented with the same Text Object that contains multiple length string operand in which case
// ObjString spans more than one character string that falls in different TextMark objects.
ObjString []string ;Tw float64 ;Th float64 ;Tc float64 ;Index int ;_bbcf bool ;_bbce *TextTable ;};func (_cbbcfg compositeCell )hasLines (_abdd []*textLine )bool {for _gaag ,_ecfca :=range _abdd {_gcee :=_aefc (_cbbcfg .PdfRectangle ,_ecfca .PdfRectangle );
if _cdgfc {_deg .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u005e\u005e\u005e\u0069\u006e\u0074\u0065\u0072\u0073e\u0063t\u0073\u003d\u0025\u0074\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u000a",_gcee ,_gaag ,len (_abdd ));_deg .Printf ("\u0020\u0020\u0020\u0020  \u005e\u005e\u005e\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025s\u000a",_cbbcfg );
_deg .Printf ("\u0020 \u0020 \u0020\u0020\u0020\u006c\u0069\u006e\u0065\u003d\u0025\u0073\u000a",_ecfca );};if _gcee {return true ;};};return false ;};func _febe (_cbdc ,_ede bounded )float64 {return _cbdc .bbox ().Llx -_ede .bbox ().Urx };func (_cdee *subpath )add (_dgd ..._ed .Point ){_cdee ._egdag =append (_cdee ._egdag ,_dgd ...)};
func _gbgcd (_cfca *PageText )error {_agffe :=_gc .GetLicenseKey ();if _agffe !=nil &&_agffe .IsLicensed ()||_bfa {return nil ;};_deg .Printf ("\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064\u0020c\u006f\u0070\u0079\u0020\u006f\u0066\u0020\u0055\u006e\u0069P\u0044\u0046\u000a");
_deg .Println ("-\u0020\u0047\u0065\u0074\u0020\u0061\u0020\u0066\u0072e\u0065\u0020\u0074\u0072\u0069\u0061\u006c l\u0069\u0063\u0065\u006es\u0065\u0020\u006f\u006e\u0020\u0068\u0074\u0074\u0070s:\u002f\u002fu\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f");
return _bfb .New ("\u0075\u006e\u0069\u0070d\u0066\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020c\u006fd\u0065\u0020\u0072\u0065\u0071\u0075\u0069r\u0065\u0064");};

// BBox returns the smallest axis-aligned rectangle that encloses all the TextMarks in `ma`.
func (_dcgf *TextMarkArray )BBox ()(_bf .PdfRectangle ,bool ){var _gcga _bf .PdfRectangle ;_dag :=false ;for _ ,_cgaa :=range _dcgf ._agfc {if _cgaa .Meta ||_eacce (_cgaa .Text ){continue ;};if _dag {_gcga =_caddg (_gcga ,_cgaa .BBox );}else {_gcga =_cgaa .BBox ;
_dag =true ;};};return _gcga ,_dag ;};func _beeba (_gcead ,_affb _bf .PdfRectangle )(_bf .PdfRectangle ,bool ){if !_aefc (_gcead ,_affb ){return _bf .PdfRectangle {},false ;};return _bf .PdfRectangle {Llx :_aa .Max (_gcead .Llx ,_affb .Llx ),Urx :_aa .Min (_gcead .Urx ,_affb .Urx ),Lly :_aa .Max (_gcead .Lly ,_affb .Lly ),Ury :_aa .Min (_gcead .Ury ,_affb .Ury )},true ;
};func (_begb *shapesState )addPoint (_dafd ,_baba float64 ){_dabd :=_begb .establishSubpath ();_dadce :=_begb .devicePoint (_dafd ,_baba );if _dabd ==nil {_begb ._cfff =true ;_begb ._acbeg =_dadce ;}else {_dabd .add (_dadce );};};func (_afae *textWord )absorb (_bcfaaf *textWord ){_afae .PdfRectangle =_caddg (_afae .PdfRectangle ,_bcfaaf .PdfRectangle );
_afae ._bdaeb =append (_afae ._bdaeb ,_bcfaaf ._bdaeb ...);};

// String returns a description of `p`.
func (_dedf *textPara )String ()string {if _dedf ._afce {return _deg .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u005b\u0045\u004d\u0050\u0054\u0059\u005d",_dedf .PdfRectangle );};_gfda :="";if _dedf ._fcdge !=nil {_gfda =_deg .Sprintf ("\u005b\u0025\u0064\u0078\u0025\u0064\u005d\u0020",_dedf ._fcdge ._ccfea ,_dedf ._fcdge ._gecff );
};return _deg .Sprintf ("\u0025\u0036\u002e\u0032f \u0025\u0073\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u0020\u0025\u0071",_dedf .PdfRectangle ,_gfda ,len (_dedf ._efff ),_bdfde (_dedf .text (),50));};func (_edc *imageExtractContext )extractFormImages (_bgb *_cb .PdfObjectName ,_ecdd _gf .GraphicsState ,_eafa *_bf .PdfPageResources )error {_defd ,_cae :=_eafa .GetXObjectFormByName (*_bgb );
if _cae !=nil {return _cae ;};if _defd ==nil {return nil ;};_acc ,_cae :=_defd .GetContentStream ();if _cae !=nil {return _cae ;};_bcd :=_defd .Resources ;if _bcd ==nil {_bcd =_eafa ;};_cae =_edc .extractContentStreamImages (string (_acc ),_bcd );if _cae !=nil {return _cae ;
};_edc ._gbce ++;return nil ;};func (_acabe paraList )addNeighbours (){_fccf :=func (_bdff []int ,_abbadd *textPara )([]*textPara ,[]*textPara ){_dacb :=make ([]*textPara ,0,len (_bdff )-1);_bcbf :=make ([]*textPara ,0,len (_bdff )-1);for _ ,_ggabd :=range _bdff {_fcaec :=_acabe [_ggabd ];
if _fcaec .Urx <=_abbadd .Llx {_dacb =append (_dacb ,_fcaec );}else if _fcaec .Llx >=_abbadd .Urx {_bcbf =append (_bcbf ,_fcaec );};};return _dacb ,_bcbf ;};_cacec :=func (_bbef []int ,_adbc *textPara )([]*textPara ,[]*textPara ){_cdfa :=make ([]*textPara ,0,len (_bbef )-1);
_cgcc :=make ([]*textPara ,0,len (_bbef )-1);for _ ,_debgc :=range _bbef {_cdca :=_acabe [_debgc ];if _cdca .Ury <=_adbc .Lly {_cgcc =append (_cgcc ,_cdca );}else if _cdca .Lly >=_adbc .Ury {_cdfa =append (_cdfa ,_cdca );};};return _cdfa ,_cgcc ;};_deeaf :=_acabe .yNeighbours (_dadd );
for _ ,_dbde :=range _acabe {_cfbae :=_deeaf [_dbde ];if len (_cfbae )==0{continue ;};_gbbca ,_bcge :=_fccf (_cfbae ,_dbde );if len (_gbbca )==0&&len (_bcge )==0{continue ;};if len (_gbbca )> 0{_bgbad :=_gbbca [0];for _ ,_bfdea :=range _gbbca [1:]{if _bfdea .Urx >=_bgbad .Urx {_bgbad =_bfdea ;
};};for _ ,_gbca :=range _gbbca {if _gbca !=_bgbad &&_gbca .Urx > _bgbad .Llx {_bgbad =nil ;break ;};};if _bgbad !=nil &&_eabf (_dbde .PdfRectangle ,_bgbad .PdfRectangle ){_dbde ._baec =_bgbad ;};};if len (_bcge )> 0{_ffad :=_bcge [0];for _ ,_bcac :=range _bcge [1:]{if _bcac .Llx <=_ffad .Llx {_ffad =_bcac ;
};};for _ ,_eeadf :=range _bcge {if _eeadf !=_ffad &&_eeadf .Llx < _ffad .Urx {_ffad =nil ;break ;};};if _ffad !=nil &&_eabf (_dbde .PdfRectangle ,_ffad .PdfRectangle ){_dbde ._dabb =_ffad ;};};};_deeaf =_acabe .xNeighbours (_fgbf );for _ ,_effaac :=range _acabe {_gbbbb :=_deeaf [_effaac ];
if len (_gbbbb )==0{continue ;};_daddc ,_gdef :=_cacec (_gbbbb ,_effaac );if len (_daddc )==0&&len (_gdef )==0{continue ;};if len (_gdef )> 0{_befcb :=_gdef [0];for _ ,_gcebe :=range _gdef [1:]{if _gcebe .Ury >=_befcb .Ury {_befcb =_gcebe ;};};for _ ,_cdcg :=range _gdef {if _cdcg !=_befcb &&_cdcg .Ury > _befcb .Lly {_befcb =nil ;
break ;};};if _befcb !=nil &&_aggg (_effaac .PdfRectangle ,_befcb .PdfRectangle ){_effaac ._bddf =_befcb ;};};if len (_daddc )> 0{_ccgg :=_daddc [0];for _ ,_bgebc :=range _daddc [1:]{if _bgebc .Lly <=_ccgg .Lly {_ccgg =_bgebc ;};};for _ ,_bdaa :=range _daddc {if _bdaa !=_ccgg &&_bdaa .Lly < _ccgg .Ury {_ccgg =nil ;
break ;};};if _ccgg !=nil &&_aggg (_effaac .PdfRectangle ,_ccgg .PdfRectangle ){_effaac ._defb =_ccgg ;};};};for _ ,_cecdc :=range _acabe {if _cecdc ._baec !=nil &&_cecdc ._baec ._dabb !=_cecdc {_cecdc ._baec =nil ;};if _cecdc ._defb !=nil &&_cecdc ._defb ._bddf !=_cecdc {_cecdc ._defb =nil ;
};if _cecdc ._dabb !=nil &&_cecdc ._dabb ._baec !=_cecdc {_cecdc ._dabb =nil ;};if _cecdc ._bddf !=nil &&_cecdc ._bddf ._defb !=_cecdc {_cecdc ._bddf =nil ;};};};func (_gbgc paraList )tables ()[]TextTable {var _eadag []TextTable ;if _cdgfc {_d .Log .Info ("\u0070\u0061\u0072\u0061\u0073\u002e\u0074\u0061\u0062\u006c\u0065\u0073\u003a");
};for _ ,_cedc :=range _gbgc {_afebd :=_cedc ._fcdge ;if _afebd !=nil &&_afebd .isExportable (){_eadag =append (_eadag ,_afebd .toTextTable ());};};return _eadag ;};const _abgf =20;func (_ffb *wordBag )depthRange (_ccdg ,_bfc int )[]int {var _efge []int ;
for _ccef :=range _ffb ._gecfd {if _ccdg <=_ccef &&_ccef <=_bfc {_efge =append (_efge ,_ccef );};};if len (_efge )==0{return nil ;};_bd .Ints (_efge );return _efge ;};func (_dbed *TextMarkArray )exists (_bbg TextMark )bool {for _ ,_ffec :=range _dbed .Elements (){if _ga .DeepEqual (_bbg .DirectObject ,_ffec .DirectObject )&&_ga .DeepEqual (_bbg .BBox ,_ffec .BBox )&&_ffec .Text ==_bbg .Text {return true ;
};};return false ;};func _afdgg (_bcceg *list )[]*list {var _ggde []*list ;for _ ,_bbcfa :=range _bcceg ._caede {switch _bbcfa ._degb {case "\u004c\u0049":_dgcgg :=_fdgec (_bbcfa );_fcgea :=_afdgg (_bbcfa );_gbcec :=_dca (_dgcgg ,"\u0062\u0075\u006c\u006c\u0065\u0074",_fcgea );
_gdca :=_fdea (_dgcgg ,"");_gbcec ._gcbe =_gdca ;_ggde =append (_ggde ,_gbcec );case "\u004c\u0042\u006fd\u0079":return _afdgg (_bbcfa );case "\u004c":_aegd :=_afdgg (_bbcfa );_ggde =append (_ggde ,_aegd ...);return _ggde ;};};return _ggde ;};type intSet map[int ]struct{};
func (_ebfg *textObject )setTextMatrix (_ecgc []float64 ){if len (_ecgc )!=6{_d .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u006c\u0065\u006e\u0028\u0066\u0029\u0020\u0021\u003d\u0020\u0036\u0020\u0028\u0025\u0064\u0029",len (_ecgc ));return ;};_dbgf ,_egc ,_gebb ,_bbfd ,_acbd ,_cbeg :=_ecgc [0],_ecgc [1],_ecgc [2],_ecgc [3],_ecgc [4],_ecgc [5];
_ebfg ._dcea =_ed .NewMatrix (_dbgf ,_egc ,_gebb ,_bbfd ,_acbd ,_cbeg );_ebfg ._dada =_ebfg ._dcea ;};func _gdafg (_afbgc ,_fcbdb int )int {if _afbgc > _fcbdb {return _afbgc ;};return _fcbdb ;};func (_fbge *textObject )setHorizScaling (_dfaa float64 ){if _fbge ==nil {return ;
};_fbge ._gdga ._fge =_dfaa ;};var _ce =[]string {"\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0053","\u0042","\u0053","\u0057\u0053","\u0042","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042","\u0042","\u0042","\u0053","\u0057\u0053","\u004f\u004e","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0045\u0053","\u0043\u0053","\u0045\u0053","\u0043\u0053","\u0043\u0053","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0043\u0053","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0043\u0053","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u0042\u004e","\u004f\u004e","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u004e","\u0045\u004e","\u004f\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0045\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c"};
type textLine struct{_bf .PdfRectangle ;_eeage float64 ;_bbfda []*textWord ;_cecg float64 ;};func (_eada *textMark )bbox ()_bf .PdfRectangle {return _eada .PdfRectangle };const _agcc =10;func (_fbagc *textTable )toTextTable ()TextTable {if _cdgfc {_d .Log .Info ("t\u006fT\u0065\u0078\u0074\u0054\u0061\u0062\u006c\u0065:\u0020\u0025\u0064\u0020x \u0025\u0064",_fbagc ._ccfea ,_fbagc ._gecff );
};_eagf :=make ([][]TableCell ,_fbagc ._gecff );for _ggbb :=0;_ggbb < _fbagc ._gecff ;_ggbb ++{_eagf [_ggbb ]=make ([]TableCell ,_fbagc ._ccfea );for _eafgf :=0;_eafgf < _fbagc ._ccfea ;_eafgf ++{_gbecb :=_fbagc .get (_eafgf ,_ggbb );if _gbecb ==nil {continue ;
};_dcca (_gbecb ._efff );if _cdgfc {_deg .Printf ("\u0025\u0034\u0064 \u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_eafgf ,_ggbb ,_gbecb );};_eagf [_ggbb ][_eafgf ].Text =_gbecb .text ();_gfcgg :=0;_eagf [_ggbb ][_eafgf ].Marks ._agfc =_gbecb .toTextMarks (&_gfcgg );
};};_eaedg :=TextTable {W :_fbagc ._ccfea ,H :_fbagc ._gecff ,Cells :_eagf };_eaedg .PdfRectangle =_fbagc .bbox ();return _eaedg ;};const (_acdg rulingKind =iota ;_faec ;_acegd ;);func (_adb *shapesState )lineTo (_gffg ,_gffca float64 ){if _efcb {_d .Log .Info ("\u006c\u0069\u006eeT\u006f\u0028\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0070\u003d\u0025\u002e\u0032\u0066",_gffg ,_gffca ,_adb .devicePoint (_gffg ,_gffca ));
};_adb .addPoint (_gffg ,_gffca );};type bounded interface{bbox ()_bf .PdfRectangle };

// ExtractFonts returns all font information from the page extractor, including
// font name, font type, the raw data of the embedded font file (if embedded), font descriptor and more.
//
// The argument `previousPageFonts` is used when trying to build a complete font catalog for multiple pages or the entire document.
// The entries from `previousPageFonts` are added to the returned result unless already included in the page, i.e. no duplicate entries.
//
// NOTE: If previousPageFonts is nil, all fonts from the page will be returned. Use it when building up a full list of fonts for a document or page range.
func (_egge *Extractor )ExtractFonts (previousPageFonts *PageFonts )(*PageFonts ,error ){_gba :=PageFonts {};_ege :=_gba .extractPageResourcesToFont (_egge ._ac );if _ege !=nil {return nil ,_ege ;};if previousPageFonts !=nil {for _ ,_ad :=range previousPageFonts .Fonts {if !_bda (_gba .Fonts ,_ad .FontName ){_gba .Fonts =append (_gba .Fonts ,_ad );
};};};return &PageFonts {Fonts :_gba .Fonts },nil ;};func (_eebed rulingList )blocks (_badcfc ,_cecd *ruling )bool {if _badcfc ._ggbc > _cecd ._agbd ||_cecd ._ggbc > _badcfc ._agbd {return false ;};_efag :=_aa .Max (_badcfc ._ggbc ,_cecd ._ggbc );_dgceg :=_aa .Min (_badcfc ._agbd ,_cecd ._agbd );
if _badcfc ._gdge > _cecd ._gdge {_badcfc ,_cecd =_cecd ,_badcfc ;};for _ ,_abgeb :=range _eebed {if _badcfc ._gdge <=_abgeb ._gdge +_gece &&_abgeb ._gdge <=_cecd ._gdge +_gece &&_abgeb ._ggbc <=_dgceg &&_efag <=_abgeb ._agbd {return true ;};};return false ;
};func _ddc (_fcgf *textWord ,_fgeag float64 ,_fecc ,_cabc rulingList )*wordBag {_adae :=_fdcc (_fcgf ._afefd );_beab :=[]*textWord {_fcgf };_dbab :=wordBag {_gecfd :map[int ][]*textWord {_adae :_beab },PdfRectangle :_fcgf .PdfRectangle ,_bcf :_fcgf ._gbaff ,_bdgd :_fgeag ,_affe :_fecc ,_fgea :_cabc };
return &_dbab ;};func _cbafcd (_befc string )bool {if _a .RuneCountInString (_befc )< _cfgd {return false ;};_fddbb ,_acbb :=_a .DecodeLastRuneInString (_befc );if _acbb <=0||!_g .Is (_g .Hyphen ,_fddbb ){return false ;};_fddbb ,_acbb =_a .DecodeLastRuneInString (_befc [:len (_befc )-_acbb ]);
return _acbb > 0&&!_g .IsSpace (_fddbb );};func _egac (_dabg *list ,_cdbb *_gb .Builder ,_fcbc *string ){_ebdcg :=_cgdb (_dabg ,_fcbc );_cdbb .WriteString (_ebdcg );for _ ,_aggff :=range _dabg ._caede {_cgaf :=*_fcbc +"\u0020\u0020\u0020";_egac (_aggff ,_cdbb ,&_cgaf );
};};func _agfgg (_bgddc map[float64 ][]*textLine )[]float64 {_baebb :=[]float64 {};for _bacec :=range _bgddc {_baebb =append (_baebb ,_bacec );};_bd .Float64s (_baebb );return _baebb ;};func _eacce (_gfcgf string )bool {for _ ,_dgbec :=range _gfcgf {if !_g .IsSpace (_dgbec ){return false ;
};};return true ;};func (_eagg *wordBag )firstReadingIndex (_bbdg int )int {_bbee :=_eagg .firstWord (_bbdg )._gbaff ;_gdgc :=float64 (_bbdg +1)*_eegd ;_fffg :=_gdgc +_dedb *_bbee ;_gfcff :=_bbdg ;for _ ,_cgggb :=range _eagg .depthBand (_gdgc ,_fffg ){if _cedg (_eagg .firstWord (_cgggb ),_eagg .firstWord (_gfcff ))< 0{_gfcff =_cgggb ;
};};return _gfcff ;};type rulingList []*ruling ;func (_gaffc *textObject )setTextRenderMode (_cgac int ){if _gaffc ==nil {return ;};_gaffc ._gdga ._deca =RenderMode (_cgac );};type textObject struct{_dgccb *Extractor ;_aaaa *_bf .PdfPageResources ;_cbge _gf .GraphicsState ;
_gdga *textState ;_cgdf *stateStack ;_dcea _ed .Matrix ;_dada _ed .Matrix ;_ebfd []*textMark ;_agba bool ;};func _agbe (_dadb []*textLine )map[float64 ][]*textLine {_bd .Slice (_dadb ,func (_bcdc ,_adaeg int )bool {return _dadb [_bcdc ]._eeage < _dadb [_adaeg ]._eeage });
_dbfgd :=map[float64 ][]*textLine {};for _ ,_bgad :=range _dadb {_faae :=_ddbd (_bgad );_faae =_aa .Round (_faae );_dbfgd [_faae ]=append (_dbfgd [_faae ],_bgad );};return _dbfgd ;};func (_bgdeb *PageText )getText ()string {_ccca :="";_gcfd :=len (_bgdeb ._afbb );
for _fcc :=0;_fcc < 360&&_gcfd > 0;_fcc +=90{_bdeb :=make ([]*textMark ,0,len (_bgdeb ._afbb )-_gcfd );for _ ,_bcgd :=range _bgdeb ._afbb {if _bcgd ._acgg ==_fcc {_bdeb =append (_bdeb ,_bcgd );};};if len (_bdeb )> 0{_ccca +=_ecbcb (_bdeb ,_bgdeb ._cffb );
_gcfd -=len (_bdeb );};};return _ccca ;};

// Elements returns the TextMarks in `ma`.
func (_ddb *TextMarkArray )Elements ()[]TextMark {return _ddb ._agfc };func (_aecbf *textWord )computeText ()string {_cfed :=make ([]string ,len (_aecbf ._bdaeb ));for _fgae ,_fcga :=range _aecbf ._bdaeb {_cfed [_fgae ]=_fcga ._dbec ;};return _gb .Join (_cfed ,"");
};type pathSection struct{_cgdd []*subpath ;_bcc .Color ;};func (_ecdaf *textTable )emptyCompositeRow (_gdbgf int )bool {for _gcccd :=0;_gcccd < _ecdaf ._ccfea ;_gcccd ++{if _faefd ,_abbd :=_ecdaf ._ebcde [_dfdbcc (_gcccd ,_gdbgf )];_abbd {if len (_faefd .paraList )> 0{return false ;
};};};return true ;};func _dbeg (_ebb *TextMarkArray ,_cgc *string ,_bdc *int ,_fcac string )error {var _abc TextMark ;for _ ,_ffa :=range _ebb .Elements (){_ffaa :=_ffa .Text ;_gbf :=_ffa .Font ;_dfca :="";_fced :=*_cgc ;if len (_fced )> *_bdc {_dfca =_fced [*_bdc :*_bdc +len (_ffaa )];
}else if *_bdc ==len (_fcac )-1&&len (_fced )> *_bdc {_dfca =_fced [*_bdc :];};_adga :=_ffa .DirectObject ;if _adga ==nil &&_ffa .Text =="\u0020"{_fbfb :=_abc .ObjString ;_dcf :=_fbfb [len (_fbfb )-1];if _dcf !=_ffa .Text {_adga =_abc .DirectObject ;_gbf =_abc .Font ;
_cace ,_fde :=_cb .GetString (_adga );if !_fde {return _deg .Errorf ("\u0075n\u0061\u0062l\u0065\u0020\u0074\u006f \u0067\u0065\u0074 \u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0042\u0079te\u0073\u0020\u0066r\u006f\u006d \u0064\u0069\u0072\u0065\u0063\u0074O\u0062\u006ae\u0063\u0074");
};_bcgbf ,_fde :=_cb .GetStringBytes (_adga );if !_fde {return _cb .ErrTypeError ;};_ged :=_ecf (_bcgbf ,_gbf );_dfca =_ged +_dfca ;_edab (_cace ,_dfca ,_gbf );*_bdc +=len (_ffaa );continue ;};};_dgcg ,_gbag :=_cb .GetString (_adga );if !_gbag {return _deg .Errorf ("\u0075n\u0061\u0062l\u0065\u0020\u0074\u006f \u0067\u0065\u0074 \u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0042\u0079te\u0073\u0020\u0066r\u006f\u006d \u0064\u0069\u0072\u0065\u0063\u0074O\u0062\u006ae\u0063\u0074");
};_eba :="";_fedf ,_gbag :=_cb .GetStringBytes (_adga );if !_gbag {return _cb .ErrTypeError ;};_gdee :=_ecf (_fedf ,_gbf );_eba =_gb .Replace (_gdee ,_ffaa ,_dfca ,1);_edab (_dgcg ,_eba ,_gbf );*_bdc +=len (_ffaa );_abc =_ffa ;};return nil ;};func _eaff (_bebf bounded )float64 {return -_bebf .bbox ().Lly };
func (_cfgde paraList )writeText (_bbada _bc .Writer ){for _ddee ,_dfdbg :=range _cfgde {if _dfdbg ._afce {continue ;};_dfdbg .writeText (_bbada );if _ddee !=len (_cfgde )-1{if _cdfea (_dfdbg ,_cfgde [_ddee +1]){_bbada .Write ([]byte ("\u0020"));}else {_bbada .Write ([]byte ("\u000a"));
_bbada .Write ([]byte ("\u000a"));};};};_bbada .Write ([]byte ("\u000a"));_bbada .Write ([]byte ("\u000a"));};const (_ee ="\u0045\u0052R\u004f\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u002c\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";
_eac ="\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0043a\u006e\u0027\u0074 g\u0065\u0074\u0020\u0066\u006f\u006et\u0020\u0070\u0072\u006f\u0070\u0065\u0072\u0074\u0069\u0065\u0073\u002c\u0020\u0066\u006fn\u0074\u0020\u006e\u006f\u0074\u0020\u0066\u006fu\u006e\u0064";
_eb ="\u0045\u0052\u0052O\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0067\u0065\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0074\u0072\u0065\u0061\u006d\u002c\u0020\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";_gff ="E\u0052R\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066o\u006e\u0074\u0020\u0066ou\u006e\u0064";
);

// ExtractText processes and extracts all text data in content streams and returns as a string.
// It takes into account character encodings in the PDF file, which are decoded by
// CharcodeBytesToUnicode.
// Characters that can't be decoded are replaced with MissingCodeRune ('\ufffd' = ï¿½).
func (_bab *Extractor )ExtractText ()(string ,error ){_eebe ,_ ,_ ,_gadb :=_bab .ExtractTextWithStats ();return _eebe ,_gadb ;};func (_gaege *textObject )nextLine (){_gaege .moveLP (0,-_gaege ._gdga ._abf )};func (_dbgff intSet )del (_edffe int ){delete (_dbgff ,_edffe )};


// RenderMode specifies the text rendering mode (Tmode), which determines whether showing text shall cause
// glyph outlines to be  stroked, filled, used as a clipping boundary, or some combination of the three.
// Stroking, filling, and clipping shall have the same effects for a text object as they do for a path object
// (see 8.5.3, "Path-Painting Operators" and 8.5.4, "Clipping Path Operators").
type RenderMode int ;

// String returns a description of `w`.
func (_dcaga *textWord )String ()string {return _deg .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_dcaga ._afefd ,_dcaga .PdfRectangle ,_dcaga ._gbaff ,_dcaga ._dfaee );
};func (_gfbd paraList )sortTopoOrder (){_gbef :=_gfbd .topoOrder ();_gfbd .reorder (_gbef )};func (_bedg *subpath )removeDuplicates (){if len (_bedg ._egdag )==0{return ;};_ebab :=[]_ed .Point {_bedg ._egdag [0]};for _ ,_fgdef :=range _bedg ._egdag [1:]{if !_afcb (_fgdef ,_ebab [len (_ebab )-1]){_ebab =append (_ebab ,_fgdef );
};};_bedg ._egdag =_ebab ;};func (_bcad *textObject )getFont (_gbee string )(*_bf .PdfFont ,error ){if _bcad ._dgccb ._fca !=nil {_daa ,_dbbd :=_bcad .getFontDict (_gbee );if _dbbd !=nil {_d .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0067\u0065\u0074\u0046\u006f\u006e\u0074:\u0020n\u0061m\u0065=\u0025\u0073\u002c\u0020\u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0073",_gbee ,_dbbd .Error ());
return nil ,_dbbd ;};_bcad ._dgccb ._bba ++;_aagca ,_egde :=_bcad ._dgccb ._fca [_daa .String ()];if _egde {_aagca ._aagb =_bcad ._dgccb ._bba ;return _aagca ._cdfd ,nil ;};};_gcea ,_acgd :=_bcad .getFontDict (_gbee );if _acgd !=nil {return nil ,_acgd ;
};_fgda ,_acgd :=_bcad .getFontDirect (_gbee );if _acgd !=nil {return nil ,_acgd ;};if _bcad ._dgccb ._fca !=nil {_gbfc :=fontEntry {_fgda ,_bcad ._dgccb ._bba };if len (_bcad ._dgccb ._fca )>=_agcc {var _edff []string ;for _bfbg :=range _bcad ._dgccb ._fca {_edff =append (_edff ,_bfbg );
};_bd .Slice (_edff ,func (_ceda ,_aga int )bool {return _bcad ._dgccb ._fca [_edff [_ceda ]]._aagb < _bcad ._dgccb ._fca [_edff [_aga ]]._aagb ;});delete (_bcad ._dgccb ._fca ,_edff [0]);};_bcad ._dgccb ._fca [_gcea .String ()]=_gbfc ;};return _fgda ,nil ;
};

// Tables returns the tables extracted from the page.
func (_egca PageText )Tables ()[]TextTable {if _cdgfc {_d .Log .Info ("\u0054\u0061\u0062\u006c\u0065\u0073\u003a\u0020\u0025\u0064",len (_egca ._aef ));};return _egca ._aef ;};func _ea (_cc []rune )BidiText {_bb :=-1;_cga :=false ;_cea :=true ;_efb :=len (_cc );
_agg :=make ([]string ,_efb );_gg :=make ([]string ,_efb );if _efb ==0||_cga {return _ae (string (_cc ),_cea ,_cga );};_cbf :=0;for _dc ,_cf :=range _cc {_agg [_dc ]=string (_cf );_gdg :="\u004c";if _cf <=0x00ff{_gdg =_ce [_cf ];}else if 0x0590<=_cf &&_cf <=0x05f4{_gdg ="\u0052";
}else if 0x0600<=_cf &&_cf <=0x06ff{_fga :=_cf &0xff;if int (_fga )>=len (_bdb ){_d .Log .Debug ("\u0042\u0069\u0064\u0069\u003a\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0055n\u0069c\u006f\u0064\u0065\u0020\u0063\u0068\u0061\u0072\u0061\u0063\u0074\u0065\u0072\u0020"+string (_cf ));
};_gdg =_bdb [_cf &0xff];}else if (0x0700<=_cf &&_cf <=0x08ac)||(0xfb50<=_cf &&_cf <=0xfdff)||(0xfe70<=_cf &&_cf <=0xfeff){_gdg ="\u0041\u004c";};if _gdg =="\u0052"||_gdg =="\u0041\u004c"||_gdg =="\u0041\u004e"{_cbf ++;};_gg [_dc ]=_gdg ;};if _cbf ==0{_cea =true ;
return _ae (string (_cc ),_cea ,false );};if _bb ==-1{if float64 (_cbf )/float64 (_efb )< 0.3&&_efb > 4{_cea =true ;_bb =0;}else {_cea =false ;_bb =1;};};var _ddg []int ;for range _cc {_ddg =append (_ddg ,_bb );};_gfg :="\u004c";if _dd (_bb ){_gfg ="\u0052";
};_ec :=_gfg ;_bca :=_ec ;_bde :=_ec ;for _ge :=range _cc {if _gg [_ge ]=="\u004e\u0053\u004d"{_gg [_ge ]=_bde ;}else {_bde =_gg [_ge ];};};_bde =_ec ;var _cbb string ;for _fac :=range _cc {_cbb =_gg [_fac ];if _cbb =="\u0045\u004e"{if _bde =="\u0041\u004c"{_gg [_fac ]="\u0041\u004e";
}else {_gg [_fac ]="\u0045\u004e";};}else if _cbb =="\u0052"||_cbb =="\u004c"||_cbb =="\u0041\u004c"{_bde =_cbb ;};};for _aab :=range _cc {_ddd :=_gg [_aab ];if _ddd =="\u0041\u004c"{_gg [_aab ]="\u0052";};};for _ecg :=1;_ecg < (len (_cc )-1);_ecg ++{if _gg [_ecg ]=="\u0045\u0053"&&_gg [_ecg -1]=="\u0045\u004e"&&_gg [_ecg +1]=="\u0045\u004e"{_gg [_ecg ]="\u0045\u004e";
};if _gg [_ecg ]=="\u0043\u0053"&&(_gg [_ecg -1]=="\u0045\u004e"||_gg [_ecg -1]=="\u0041\u004e")&&_gg [_ecg +1]==_gg [_ecg -1]{_gg [_ecg ]=_gg [_ecg -1];};};for _fce :=range _cc {if _gg [_fce ]=="\u0045\u004e"{for _ceaa :=_fce -1;_ceaa >=0;_ceaa --{if _gg [_ceaa ]!="\u0045\u0054"{break ;
};_gg [_ceaa ]="\u0045\u004e";};for _faf :=_fce +1;_faf < _efb ;_faf ++{if _gg [_faf ]!="\u0045\u0054"{break ;};_gg [_faf ]="\u0045\u004e";};};};for _debc :=range _cc {_agc :=_gg [_debc ];if _agc =="\u0057\u0053"||_agc =="\u0045\u0053"||_agc =="\u0045\u0054"||_agc =="\u0043\u0053"{_gg [_debc ]="\u004f\u004e";
};};_bde ="\u0073\u006f\u0072";for _cgd :=range _cc {_ceb :=_gg [_cgd ];if _ceb =="\u0045\u004e"{if _bde =="\u004c"{_gg [_cgd ]="\u004c";}else {_gg [_cgd ]="\u0045\u004e";};}else if _ceb =="\u0052"||_ceb =="\u004c"{_bde =_ceb ;};};for _bdd :=0;_bdd < len (_cc );
_bdd ++{if _gg [_bdd ]=="\u004f\u004e"{_cgb :=_ba (_gg ,_bdd +1,"\u004f\u004e");_ab :=_bca ;if _bdd > 0{_ab =_gg [_bdd -1];};_dfd :=_bca ;if _cgb +1< _efb {_dfd =_gg [_cgb +1];};if _ab !="\u004c"{_ab ="\u0052";};if _dfd !="\u004c"{_dfd ="\u0052";};if _ab ==_dfd {_fe (_gg ,_bdd ,_cgb ,_ab );
};_bdd =_cgb -1;};};for _cad :=range _cc {if _gg [_cad ]=="\u004f\u004e"{_gg [_cad ]=_gfg ;};};for _bfg :=range _cc {_fcd :=_gg [_bfg ];if _cd (_ddg [_bfg ]){if _fcd =="\u0052"{_ddg [_bfg ]++;}else if _fcd =="\u0041\u004e"||_fcd =="\u0045\u004e"{_ddg [_bfg ]+=2;
};}else if _fcd =="\u004c"||_fcd =="\u0041\u004e"||_fcd =="\u0045\u004e"{_ddg [_bfg ]++;};};_dege :=-1;_cce :=99;var _bg int ;for _dgg :=0;_dgg < len (_ddg );_dgg ++{_bg =_ddg [_dgg ];if _dege < _bg {_dege =_bg ;};if _cce > _bg &&_dd (_bg ){_cce =_bg ;
};};for _cba :=_dege ;_cba >=_cce ;_cba --{_bff :=-1;for _bbf :=0;_bbf < len (_ddg );_bbf ++{if _ddg [_bbf ]< _cba {if _bff >=0{_dda (_agg ,_bff ,_bbf );_bff =-1;};}else if _bff < 0{_bff =_bbf ;};};if _bff >=0{_dda (_agg ,_bff ,len (_ddg ));};};for _eab :=0;
_eab < len (_agg );_eab ++{_gae :=_agg [_eab ];if _gae =="\u003c"||_gae =="\u003e"{_agg [_eab ]="";};};return _ae (_gb .Join (_agg ,""),_cea ,false );};func (_defda *stateStack )pop ()*textState {if _defda .empty (){return nil ;};_gfe :=*(*_defda )[len (*_defda )-1];
*_defda =(*_defda )[:len (*_defda )-1];return &_gfe ;};var _bfcb *_fc .Regexp =_fc .MustCompile (_fbeee +"\u007c"+_cgdaf );var _bfa =false ;func (_gggg *ruling )alignsSec (_gedea *ruling )bool {const _abfcfc =_gece +1.0;return _gggg ._ggbc -_abfcfc <=_gedea ._agbd &&_gedea ._ggbc -_abfcfc <=_gggg ._agbd ;
};func (_cee *textObject )getCurrentFont ()*_bf .PdfFont {_bgg :=_cee ._gdga ._bddc ;if _bgg ==nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020U\u0073\u0069\u006e\u0067\u0020d\u0065\u0066a\u0075\u006c\u0074\u002e");
return _bf .DefaultFont ();};return _bgg ;};

// Text returns the text content of the `bulletLists`.
func (_fabf *lists )Text ()string {_aaac :=&_gb .Builder {};for _ ,_cgea :=range *_fabf {_bcfe :=_cgea .Text ();_aaac .WriteString (_bcfe );};return _aaac .String ();};func (_ffedg gridTile )contains (_ebgd _bf .PdfRectangle )bool {if _ffedg .numBorders ()< 3{return false ;
};if _ffedg ._cbegc &&_ebgd .Llx < _ffedg .Llx -_fdbb {return false ;};if _ffedg ._eeba &&_ebgd .Urx > _ffedg .Urx +_fdbb {return false ;};if _ffedg ._ffdg &&_ebgd .Lly < _ffedg .Lly -_fdbb {return false ;};if _ffedg ._egfbb &&_ebgd .Ury > _ffedg .Ury +_fdbb {return false ;
};return true ;};

// Append appends `mark` to the mark array.
func (_cccc *TextMarkArray )Append (mark TextMark ){_cccc ._agfc =append (_cccc ._agfc ,mark )};func _edab (_fgf *_cb .PdfObjectString ,_becb string ,_aagf *_bf .PdfFont ){_fgd ,_bfgdf :=_aagf .StringToCharcodeBytes (_becb );if _bfgdf !=0{_d .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0073\u006fm\u0065\u0020\u0072un\u0065\u0073\u0020\u0063\u006f\u0075l\u0064\u0020\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u0065\u006e\u0063\u006f\u0064\u0065d\u002e\u000a\u0009\u0025\u0073\u0020\u002d\u003e \u0025\u0076",_becb ,_fgd );
};_cge :=_cb .MakeStringFromBytes (_fgd );*_fgf =*_cge ;};func (_fcfd *textPara )bbox ()_bf .PdfRectangle {return _fcfd .PdfRectangle };func (_dgbd *structTreeRoot )parseStructTreeRoot (_abged _cb .PdfObject ){if _abged !=nil {_adac ,_ecddf :=_cb .GetDict (_abged );
if !_ecddf {_d .Log .Debug ("\u0070\u0061\u0072s\u0065\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u003a\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u006eo\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");
};K :=_adac .Get ("\u004b");_affef :=_adac .Get ("\u0054\u0079\u0070\u0065").String ();var _gffef *_cb .PdfObjectArray ;switch _ebcd :=K .(type ){case *_cb .PdfObjectArray :_gffef =_ebcd ;case *_cb .PdfObjectReference :_gffef =_cb .MakeArray (K );};_gbba :=[]structElement {};
for _ ,_afcg :=range _gffef .Elements (){_fbfba :=&structElement {};_fbfba .parseStructElement (_afcg );_gbba =append (_gbba ,*_fbfba );};_dgbd ._gbgb =_gbba ;_dgbd ._feaee =_affef ;};};func (_agdbf *textLine )bbox ()_bf .PdfRectangle {return _agdbf .PdfRectangle };
func (_eeeg *wordBag )depthIndexes ()[]int {if len (_eeeg ._gecfd )==0{return nil ;};_bbecg :=make ([]int ,len (_eeeg ._gecfd ));_ebc :=0;for _abac :=range _eeeg ._gecfd {_bbecg [_ebc ]=_abac ;_ebc ++;};_bd .Ints (_bbecg );return _bbecg ;};func _abad (_bgfb float64 )bool {return _aa .Abs (_bgfb )< _gece };
func (_afgff intSet )add (_dfcc int ){_afgff [_dfcc ]=struct{}{}};func (_gebd *subpath )last ()_ed .Point {return _gebd ._egdag [len (_gebd ._egdag )-1]};func (_dfbe paraList )inTile (_ccae gridTile )paraList {var _aedcd paraList ;for _ ,_beace :=range _dfbe {if _ccae .contains (_beace .PdfRectangle ){_aedcd =append (_aedcd ,_beace );
};};if _cdgfc {_deg .Printf ("\u0020 \u0020\u0069\u006e\u0054i\u006c\u0065\u003a\u0020\u0020%\u0073 \u0069n\u0073\u0069\u0064\u0065\u003d\u0025\u0064\n",_ccae ,len (_aedcd ));for _efdad ,_ccfaf :=range _aedcd {_deg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_efdad ,_ccfaf );
};_deg .Println ("");};return _aedcd ;};

// Marks returns the TextMark collection for a page. It represents all the text on the page.
func (_gdaa PageText )Marks ()*TextMarkArray {return &TextMarkArray {_agfc :_gdaa ._ecda }};func _cdde (_dbbbd []*textMark ,_fadd _bf .PdfRectangle )*textWord {_ffgef :=_dbbbd [0].PdfRectangle ;_afda :=_dbbbd [0]._fegc ;for _ ,_fecge :=range _dbbbd [1:]{_ffgef =_caddg (_ffgef ,_fecge .PdfRectangle );
if _fecge ._fegc > _afda {_afda =_fecge ._fegc ;};};return &textWord {PdfRectangle :_ffgef ,_bdaeb :_dbbbd ,_afefd :_fadd .Ury -_ffgef .Lly ,_gbaff :_afda };};var _fgeb =TextMark {Text :"\u005b\u0058\u005d",Original :"\u0020",Meta :true ,FillColor :_bcc .White ,StrokeColor :_bcc .White };
func (_fdbba rulingList )intersections ()map[int ]intSet {var _fgdd ,_gbad []int ;for _gdaceg ,_fbgeb :=range _fdbba {switch _fbgeb ._daea {case _acegd :_fgdd =append (_fgdd ,_gdaceg );case _faec :_gbad =append (_gbad ,_gdaceg );};};if len (_fgdd )< _agfef +1||len (_gbad )< _efga +1{return nil ;
};if len (_fgdd )+len (_gbad )> _edda {_d .Log .Debug ("\u0069\u006e\u0074\u0065\u0072\u0073e\u0063\u0074\u0069\u006f\u006e\u0073\u003a\u0020\u0054\u004f\u004f\u0020\u004d\u0041\u004e\u0059\u0020\u0072\u0075\u006ci\u006e\u0067\u0073\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u003d\u0020%\u0064 \u0078\u0020\u0025\u0064",len (_fdbba ),len (_fgdd ),len (_gbad ));
return nil ;};_ccad :=make (map[int ]intSet ,len (_fgdd )+len (_gbad ));for _ ,_deadd :=range _fgdd {for _ ,_ebff :=range _gbad {if _fdbba [_deadd ].intersects (_fdbba [_ebff ]){if _ ,_dfece :=_ccad [_deadd ];!_dfece {_ccad [_deadd ]=make (intSet );};if _ ,_aabcc :=_ccad [_ebff ];
!_aabcc {_ccad [_ebff ]=make (intSet );};_ccad [_deadd ].add (_ebff );_ccad [_ebff ].add (_deadd );};};};return _ccad ;};func (_adegc *textTable )getComposite (_edac ,_dgae int )(paraList ,_bf .PdfRectangle ){_bagdb ,_cfaa :=_adegc ._ebcde [_dfdbcc (_edac ,_dgae )];
if _cdgfc {_deg .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0067\u0065\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u002d\u003e\u0025\u0073\u000a",_edac ,_dgae ,_bagdb .String ());};if !_cfaa {return nil ,_bf .PdfRectangle {};
};return _bagdb .parasBBox ();};func _ggbfd (_fdab *wordBag ,_bgdda *textWord ,_fcdg float64 )bool {return _bgdda .Llx < _fdab .Urx +_fcdg &&_fdab .Llx -_fcdg < _bgdda .Urx ;};func (_adbe *textWord )toTextMarks (_afgafa *int )[]TextMark {var _gacf []TextMark ;
for _ ,_acba :=range _adbe ._bdaeb {_gacf =_bafff (_gacf ,_afgafa ,_acba .ToTextMark ());};return _gacf ;};func _agfb (_feaba map[int ][]float64 )[]int {_cbdcc :=make ([]int ,len (_feaba ));_gdde :=0;for _bcbca :=range _feaba {_cbdcc [_gdde ]=_bcbca ;_gdde ++;
};_bd .Ints (_cbdcc );return _cbdcc ;};func _fe (_bce []string ,_aff int ,_gfc int ,_cbd string ){for _dde :=_aff ;_dde < _gfc ;_dde ++{_bce [_dde ]=_cbd ;};};type markKind int ;func _gbac (_ggbfb *_gf .ContentStreamOperation )(float64 ,error ){if len (_ggbfb .Params )!=1{_aea :=_bfb .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");
_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_ggbfb .Operand ,1,len (_ggbfb .Params ),_ggbfb .Params );
return 0.0,_aea ;};return _cb .GetNumberAsFloat (_ggbfb .Params [0]);};func _fefg (_dgeb ,_gaaa float64 )bool {return _dgeb /_aa .Max (_fafbf ,_gaaa )< _aeeg };func _cadc (_fege _bf .PdfRectangle ,_bgba bounded )float64 {return _fege .Ury -_bgba .bbox ().Lly };
func (_eaea *shapesState )fill (_eedfc *[]pathSection ){_gecgf :=pathSection {_cgdd :_eaea ._eccd ,Color :_eaea ._ebaf .getFillColor ()};*_eedfc =append (*_eedfc ,_gecgf );if _cfef {_gedd :=_gecgf .bbox ();_deg .Printf ("\u0020 \u0020\u0020\u0046\u0049\u004c\u004c\u003a %\u0032\u0064\u0020\u0066\u0069\u006c\u006c\u0073\u0020\u0028\u0025\u0064\u0020\u006ee\u0077\u0029 \u0073\u0073\u003d%\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d\u0025\u0033\u0076\u0020\u0025\u0036\u002e\u0032f\u003d\u00256.\u0032\u0066\u0078%\u0036\u002e\u0032\u0066\u000a",len (*_eedfc ),len (_gecgf ._cgdd ),_eaea ,_gecgf .Color ,_gedd ,_gedd .Width (),_gedd .Height ());
if _cabe {for _feg ,_cbc :=range _gecgf ._cgdd {_deg .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_feg ,_cbc );if _feg ==10{break ;};};};};};func _ffcc (_debad map[float64 ]gridTile )[]float64 {_cefdb :=make ([]float64 ,0,len (_debad ));
for _gadg :=range _debad {_cefdb =append (_cefdb ,_gadg );};_bd .Float64s (_cefdb );return _cefdb ;};

// String returns a description of `tm`.
func (_cbfe *textMark )String ()string {return _deg .Sprintf ("\u0025\u002e\u0032f \u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\u0022\u0025\u0073\u0022",_cbfe .PdfRectangle ,_cbfe ._fegc ,_cbfe ._dbec );};func (_gabe rulingList )splitSec ()[]rulingList {_bd .Slice (_gabe ,func (_gggdc ,_daaa int )bool {_ggcg ,_ddab :=_gabe [_gggdc ],_gabe [_daaa ];
if _ggcg ._ggbc !=_ddab ._ggbc {return _ggcg ._ggbc < _ddab ._ggbc ;};return _ggcg ._agbd < _ddab ._agbd ;});_gbgbc :=make (map[*ruling ]struct{},len (_gabe ));_beea :=func (_baad *ruling )rulingList {_bbde :=rulingList {_baad };_gbgbc [_baad ]=struct{}{};
for _ ,_geeb :=range _gabe {if _ ,_dbbag :=_gbgbc [_geeb ];_dbbag {continue ;};for _ ,_bacb :=range _bbde {if _geeb .alignsSec (_bacb ){_bbde =append (_bbde ,_geeb );_gbgbc [_geeb ]=struct{}{};break ;};};};return _bbde ;};_bbeef :=[]rulingList {_beea (_gabe [0])};
for _ ,_efbfc :=range _gabe [1:]{if _ ,_ebbea :=_gbgbc [_efbfc ];_ebbea {continue ;};_bbeef =append (_bbeef ,_beea (_efbfc ));};return _bbeef ;};

// Box represents the bounding box of a given textMark on pdf page.
// This might be used for different kinds of high lighting after doing the search
type Box struct{BBox _bf .PdfRectangle ;};func (_afcag paraList )eventNeighbours (_cacd []event )map[*textPara ][]int {_bd .Slice (_cacd ,func (_gfea ,_afebg int )bool {_egcaa ,_adbgd :=_cacd [_gfea ],_cacd [_afebg ];_cfdg ,_defcg :=_egcaa ._gddf ,_adbgd ._gddf ;
if _cfdg !=_defcg {return _cfdg < _defcg ;};if _egcaa ._ebfae !=_adbgd ._ebfae {return _egcaa ._ebfae ;};return _gfea < _afebg ;});_abagc :=make (map[int ]intSet );_gaefec :=make (intSet );for _ ,_abgdgc :=range _cacd {if _abgdgc ._ebfae {_abagc [_abgdgc ._cffbf ]=make (intSet );
for _acabed :=range _gaefec {if _acabed !=_abgdgc ._cffbf {_abagc [_abgdgc ._cffbf ].add (_acabed );_abagc [_acabed ].add (_abgdgc ._cffbf );};};_gaefec .add (_abgdgc ._cffbf );}else {_gaefec .del (_abgdgc ._cffbf );};};_acecb :=map[*textPara ][]int {};
for _cbebf ,_egaed :=range _abagc {_bcfg :=_afcag [_cbebf ];if len (_egaed )==0{_acecb [_bcfg ]=nil ;continue ;};_dgagf :=make ([]int ,len (_egaed ));_bagce :=0;for _gdgcg :=range _egaed {_dgagf [_bagce ]=_gdgcg ;_bagce ++;};_acecb [_bcfg ]=_dgagf ;};return _acecb ;
};func _dca (_baef []*textLine ,_ddbf string ,_fgdge []*list )*list {return &list {_gead :_baef ,_degb :_ddbf ,_caede :_fgdge };};func (_eeadg *textPara )depth ()float64 {if _eeadg ._afce {return -1.0;};if len (_eeadg ._efff )> 0{return _eeadg ._efff [0]._eeage ;
};return _eeadg ._fcdge .depth ();};func (_afge *textObject )moveLP (_cdec ,_ebae float64 ){_afge ._dada .Concat (_ed .NewMatrix (1,0,0,1,_cdec ,_ebae ));_afge ._dcea =_afge ._dada ;};func (_ggaab paraList )topoOrder ()[]int {if _egbc {_d .Log .Info ("\u0074\u006f\u0070\u006f\u004f\u0072\u0064\u0065\u0072\u003a");
};_caaf :=len (_ggaab );_egacb :=make ([]bool ,_caaf );_gbcf :=make ([]int ,0,_caaf );_afebe :=_ggaab .llyOrdering ();var _ggcd func (_gafee int );_ggcd =func (_gdace int ){_egacb [_gdace ]=true ;for _bgebb :=0;_bgebb < _caaf ;_bgebb ++{if !_egacb [_bgebb ]{if _ggaab .readBefore (_afebe ,_gdace ,_bgebb ){_ggcd (_bgebb );
};};};_gbcf =append (_gbcf ,_gdace );};for _faefa :=0;_faefa < _caaf ;_faefa ++{if !_egacb [_faefa ]{_ggcd (_faefa );};};return _cdfeg (_gbcf );};

// ToText returns the page text as a single string.
// Deprecated: This function is deprecated and will be removed in a future major version. Please use
// Text() instead.
func (_cegd PageText )ToText ()string {return _cegd .Text ()};func (_babd *shapesState )newSubPath (){_babd .clearPath ();if _efcb {_d .Log .Info ("\u006e\u0065\u0077\u0053\u0075\u0062\u0050\u0061\u0074h\u003a\u0020\u0025\u0073",_babd );};};

// New returns an Extractor instance for extracting content from the input PDF page.
func New (page *_bf .PdfPage )(*Extractor ,error ){return NewWithOptions (page ,nil )};func _fdea (_dcdb []*textLine ,_ggbg string )string {var _fageb _gb .Builder ;_gcegd :=0.0;for _agfg ,_ebaeb :=range _dcdb {_cdgca :=_ebaeb .text ();_bccegd :=_ebaeb ._eeage ;
if _agfg < len (_dcdb )-1{_gcegd =_dcdb [_agfg +1]._eeage ;}else {_gcegd =0.0;};_fageb .WriteString (_ggbg );_fageb .WriteString (_cdgca );if _gcegd !=_bccegd {_fageb .WriteString ("\u000a");}else {_fageb .WriteString ("\u0020");};};return _fageb .String ();
};func _bade (_efgd *paraList )map[int ][]*textLine {_dcfc :=map[int ][]*textLine {};for _ ,_bdcd :=range *_efgd {for _ ,_fcde :=range _bdcd ._efff {if !_aaffd (_fcde ){_d .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_eeca :=_fcde ._bbfda [0]._bdaeb [0]._ebfcb ;_dcfc [_eeca ]=append (_dcfc [_eeca ],_fcde );};if _bdcd ._fcdge !=nil {_gcge :=_bdcd ._fcdge ._agcf ;for _ ,_eeeb :=range _gcge {for _ ,_dfaag :=range _eeeb ._efff {if !_aaffd (_dfaag ){_d .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_becba :=_dfaag ._bbfda [0]._bdaeb [0]._ebfcb ;_dcfc [_becba ]=append (_dcfc [_becba ],_dfaag );};};};};return _dcfc ;};func (_cacfb *textTable )isExportable ()bool {if _cacfb ._cgfe {return true ;};_bfbcc :=func (_egebf int )bool {_ddad :=_cacfb .get (0,_egebf );
if _ddad ==nil {return false ;};_ecddfd :=_ddad .text ();_fbec :=_a .RuneCountInString (_ecddfd );_cffg :=_cfcc .MatchString (_ecddfd );return _fbec <=1||_cffg ;};for _gefda :=0;_gefda < _cacfb ._gecff ;_gefda ++{if !_bfbcc (_gefda ){return true ;};};return false ;
};func (_cabd *textObject )getFillColor ()_bcc .Color {return _gceaba (_cabd ._cbge .ColorspaceNonStroking ,_cabd ._cbge .ColorNonStroking );};func (_bdee paraList )extractTables (_caagc []gridTiling )paraList {if _cdgfc {_d .Log .Debug ("\u0065\u0078\u0074r\u0061\u0063\u0074\u0054\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_bdee ));
};if len (_bdee )< _fcda {return _bdee ;};_edcgd :=_bdee .findTables (_caagc );if _cdgfc {_d .Log .Info ("c\u006f\u006d\u0062\u0069\u006e\u0065d\u0020\u0074\u0061\u0062\u006c\u0065s\u0020\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_edcgd ));
for _gdccf ,_ggga :=range _edcgd {_ggga .log (_deg .Sprintf ("c\u006f\u006d\u0062\u0069\u006e\u0065\u0064\u0020\u0025\u0064",_gdccf ));};};return _bdee .applyTables (_edcgd );};func _bdcge (_ffbc ,_afgg _bf .PdfRectangle )bool {return _ffbc .Llx <=_afgg .Llx &&_afgg .Urx <=_ffbc .Urx &&_ffbc .Lly <=_afgg .Lly &&_afgg .Ury <=_ffbc .Ury ;
};func (_ecbg *textLine )toTextMarks (_bbedc *int )[]TextMark {var _ecgd []TextMark ;for _ ,_eeega :=range _ecbg ._bbfda {if _eeega ._cfacf {_ecgd =_ecaf (_ecgd ,_bbedc ,"\u0020");};_aaga :=_eeega .toTextMarks (_bbedc );_ecgd =append (_ecgd ,_aaga ...);
};return _ecgd ;};func _gcae (_cadab []*textLine )[]*textLine {_gbbdf :=[]*textLine {};for _ ,_cbbg :=range _cadab {_dfee :=_cbbg .text ();_aceg :=_bfcb .Find ([]byte (_dfee ));if _aceg !=nil {_gbbdf =append (_gbbdf ,_cbbg );};};return _gbbdf ;};

// GetContentStreamOps returns the contentStreamOps field of `pt`.
func (_cbfa *PageText )GetContentStreamOps ()*_gf .ContentStreamOperations {return _cbfa ._ffab };func (_ccefe compositeCell )String ()string {_ebee :="";if len (_ccefe .paraList )> 0{_ebee =_bdfde (_ccefe .paraList .merge ().text (),50);};return _deg .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0070\u0061\u0072a\u0073\u0020\u0025\u0071",_ccefe .PdfRectangle ,len (_ccefe .paraList ),_ebee );
};func _fgde (_bage _ed .Point )_ed .Matrix {return _ed .TranslationMatrix (_bage .X ,_bage .Y )};func (_egee *structTreeRoot )buildList (_gbbf map[int ][]*textLine ,_gdgad _cb .PdfObject )[]*list {if _egee ==nil {_d .Log .Debug ("\u0062\u0075\u0069\u006c\u0064\u004c\u0069\u0073\u0074\u003a\u0020t\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0069\u0073 \u006e\u0069\u006c");
return nil ;};var _gfaa *structElement ;_fgcd :=[]structElement {};if len (_egee ._gbgb )==1{_bedf :=_egee ._gbgb [0]._gffd ;if _bedf =="\u0044\u006f\u0063\u0075\u006d\u0065\u006e\u0074"||_bedf =="\u0053\u0065\u0063\u0074"||_bedf =="\u0050\u0061\u0072\u0074"||_bedf =="\u0044\u0069\u0076"||_bedf =="\u0041\u0072\u0074"{_gfaa =&_egee ._gbgb [0];
};}else {_gfaa =&structElement {_ccbf :_egee ._gbgb ,_gffd :_egee ._feaee };};if _gfaa ==nil {_d .Log .Debug ("\u0062\u0075\u0069\u006cd\u004c\u0069\u0073\u0074\u003a\u0020\u0074\u006f\u0070\u0045l\u0065m\u0065\u006e\u0074\u0020\u0069\u0073\u0020n\u0069\u006c");
return nil ;};for _ ,_cfbf :=range _gfaa ._ccbf {if _cfbf ._gffd =="\u004c"{_fgcd =append (_fgcd ,_cfbf );}else if _cfbf ._gffd =="\u0054\u0061\u0062l\u0065"{_dffb :=_agfdc (_cfbf );_fgcd =append (_fgcd ,_dffb ...);};};_ffcdg :=_eggf (_fgcd ,_gbbf ,_gdgad );
var _cegb []*list ;for _ ,_bdbd :=range _ffcdg {_adfd :=_afdgg (_bdbd );_cegb =append (_cegb ,_adfd ...);};return _cegb ;};func (_face *textTable )putComposite (_efgcg ,_bfdbd int ,_aace paraList ,_bbgbc _bf .PdfRectangle ){if len (_aace )==0{_d .Log .Error ("\u0074\u0065xt\u0054\u0061\u0062l\u0065\u0029\u0020\u0070utC\u006fmp\u006f\u0073\u0069\u0074\u0065\u003a\u0020em\u0070\u0074\u0079\u0020\u0070\u0061\u0072a\u0073");
return ;};_daecd :=compositeCell {PdfRectangle :_bbgbc ,paraList :_aace };if _cdgfc {_deg .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0075\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u003c\u002d\u0025\u0073\u000a",_efgcg ,_bfdbd ,_daecd .String ());
};_daecd .updateBBox ();_face ._ebcde [_dfdbcc (_efgcg ,_bfdbd )]=_daecd ;};func (_fcdff gridTiling )log (_gbae string ){if !_bcde {return ;};_d .Log .Info ("\u0074i\u006ci\u006e\u0067\u003a\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0071",len (_fcdff ._cbeaa ),len (_fcdff ._bede ),_gbae );
_deg .Printf ("\u0020\u0020\u0020l\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a",_fcdff ._cbeaa );_deg .Printf ("\u0020\u0020\u0020l\u006c\u0079\u003d\u0025\u002e\u0032\u0066\u000a",_fcdff ._bede );for _edea ,_fega :=range _fcdff ._bede {_gdggc ,_efbc :=_fcdff ._efde [_fega ];
if !_efbc {continue ;};_deg .Printf ("%\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_edea ,_fega );for _cdaf ,_aebg :=range _fcdff ._cbeaa {_ffcg ,_acgbc :=_gdggc [_aebg ];if !_acgbc {continue ;};_deg .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_cdaf ,_ffcg .String ());
};};};func (_dcgc paraList )applyTables (_bafg []*textTable )paraList {var _facf paraList ;for _ ,_gdbc :=range _bafg {_facf =append (_facf ,_gdbc .newTablePara ());};for _ ,_acded :=range _dcgc {if _acded ._edca {continue ;};_facf =append (_facf ,_acded );
};return _facf ;};func _caaea (_aeec []pathSection )rulingList {_ccab (_aeec );if _cfef {_d .Log .Info ("\u006da\u006b\u0065\u0046\u0069l\u006c\u0052\u0075\u006c\u0069n\u0067s\u003a \u0025\u0064\u0020\u0066\u0069\u006c\u006cs",len (_aeec ));};var _abcg rulingList ;
for _ ,_gffa :=range _aeec {for _ ,_feag :=range _gffa ._cgdd {if !_feag .isQuadrilateral (){if _cfef {_d .Log .Error ("!\u0069s\u0051\u0075\u0061\u0064\u0072\u0069\u006c\u0061t\u0065\u0072\u0061\u006c: \u0025\u0073",_feag );};continue ;};if _fdac ,_egdd :=_feag .makeRectRuling (_gffa .Color );
_egdd {_abcg =append (_abcg ,_fdac );}else {if _bfdca {_d .Log .Error ("\u0021\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0073",_feag );};};};};if _cfef {_d .Log .Info ("\u006d\u0061\u006b\u0065Fi\u006c\u006c\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0073",_abcg .String ());
};return _abcg ;};func _cbfcf (_cgge *Extractor ,_dadf *_bf .PdfPageResources ,_cfda _gf .GraphicsState ,_afca *textState ,_cbaf *stateStack )*textObject {return &textObject {_dgccb :_cgge ,_aaaa :_dadf ,_cbge :_cfda ,_cgdf :_cbaf ,_gdga :_afca ,_dcea :_ed .IdentityMatrix (),_dada :_ed .IdentityMatrix ()};
};

// String returns a string describing the current state of the textState stack.
func (_fcee *stateStack )String ()string {_dga :=[]string {_deg .Sprintf ("\u002d\u002d\u002d\u002d f\u006f\u006e\u0074\u0020\u0073\u0074\u0061\u0063\u006b\u003a\u0020\u0025\u0064",len (*_fcee ))};for _eacd ,_ade :=range *_fcee {_bcaba :="\u003c\u006e\u0069l\u003e";
if _ade !=nil {_bcaba =_ade .String ();};_dga =append (_dga ,_deg .Sprintf ("\u0009\u0025\u0032\u0064\u003a\u0020\u0025\u0073",_eacd ,_bcaba ));};return _gb .Join (_dga ,"\u000a");};

// Editor represents a document editor object
type Editor struct{_cef *_bf .PdfReader };func (_cca *textObject )renderText (_ecff _cb .PdfObject ,_dfde []byte ,_baed int ,_ccb string )error {if _cca ._agba {_d .Log .Debug ("\u0072\u0065\u006e\u0064\u0065r\u0054\u0065\u0078\u0074\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069\u0064 \u0066\u006f\u006e\u0074\u002e\u0020\u004e\u006f\u0074\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u002e");
return nil ;};_aagd :=_cca .getCurrentFont ();_gfab :=_aagd .BytesToCharcodes (_dfde );_adggc ,_cdgc ,_acbe :=_aagd .CharcodesToStrings (_gfab ,_ccb );if _acbe > 0{_d .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_cdgc ,_acbe );
};_cca ._gdga ._egcg +=_cdgc ;_cca ._gdga ._acec +=_acbe ;_cbded :=_cca ._gdga ;_fgce :=_cbded ._bbb ;_dfeg :=_cbded ._fge /100.0;_gge :=_gebbg ;if _aagd .Subtype ()=="\u0054\u0079\u0070e\u0033"{_gge =1;};_cgdg ,_fdfc :=_aagd .GetRuneMetrics (' ');if !_fdfc {_cgdg ,_fdfc =_aagd .GetCharMetrics (32);
};if !_fdfc {_cgdg ,_ =_bf .DefaultFont ().GetRuneMetrics (' ');};_caed :=_cgdg .Wx *_gge ;_d .Log .Trace ("\u0073p\u0061\u0063e\u0057\u0069\u0064t\u0068\u003d\u0025\u002e\u0032\u0066\u0020t\u0065\u0078\u0074\u003d\u0025\u0071 \u0066\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0066\u006f\u006et\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",_caed ,_adggc ,_aagd ,_fgce );
_egab :=_ed .NewMatrix (_fgce *_dfeg ,0,0,_fgce ,0,_cbded ._cgbc );if _gecgff {_d .Log .Info ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0074\u0065\u0078t\u0073\u003d\u0025\u0071",len (_gfab ),_gfab ,_adggc );
};_d .Log .Trace ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0072\u0075\u006ee\u0073\u003d\u0025\u0071",len (_gfab ),_gfab ,len (_adggc ));_eega :=_cca .getFillColor ();
_fgad :=_cca .getStrokeColor ();for _bcbc ,_cgda :=range _adggc {_agcdf :=[]rune (_cgda );if len (_agcdf )==1&&_agcdf [0]=='\x00'{continue ;};_geba :=_gfab [_bcbc ];_abbb :=_cca ._cbge .CTM .Mult (_cca ._dcea ).Mult (_egab );_beadf :=0.0;if len (_agcdf )==1&&_agcdf [0]==32{_beadf =_cbded ._bfec ;
};_fbee ,_afgd :=_aagd .GetCharMetrics (_geba );if !_afgd {_d .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u004e\u006f \u006d\u0065\u0074r\u0069\u0063\u0020\u0066\u006f\u0072\u0020\u0063\u006fde\u003d\u0025\u0064 \u0072\u003d0\u0078\u0025\u0030\u0034\u0078\u003d%\u002b\u0071 \u0025\u0073",_geba ,_agcdf ,_agcdf ,_aagd );
return _deg .Errorf ("\u006e\u006f\u0020\u0063\u0068\u0061\u0072\u0020\u006d\u0065\u0074\u0072\u0069\u0063\u0073:\u0020f\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0063\u006f\u0064\u0065\u003d\u0025\u0064",_aagd .String (),_geba );};_fcea :=_ed .Point {X :_fbee .Wx *_gge ,Y :_fbee .Wy *_gge };
_cbbdc :=_ed .Point {X :(_fcea .X *_fgce +_beadf )*_dfeg };_fbgb :=_ed .Point {X :(_fcea .X *_fgce +_cbded ._dbad +_beadf )*_dfeg };if _gecgff {_d .Log .Info ("\u0074\u0066\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0063\u003d\u0025\u002e\u0032f\u0020t\u0077\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_fgce ,_cbded ._dbad ,_cbded ._bfec ,_dfeg );
_d .Log .Info ("\u0064x\u002c\u0064\u0079\u003d%\u002e\u0033\u0066\u0020\u00740\u003d%\u002e3\u0066\u0020\u0074\u003d\u0025\u002e\u0033f",_fcea ,_cbbdc ,_fbgb );};_cfdd :=_fgde (_cbbdc );_dbef :=_fgde (_fbgb );_dddefg :=_cca ._cbge .CTM .Mult (_cca ._dcea ).Mult (_cfdd );
if _gegb {_d .Log .Info ("e\u006e\u0064\u003a\u000a\tC\u0054M\u003d\u0025\u0073\u000a\u0009 \u0074\u006d\u003d\u0025\u0073\u000a"+"\u0009\u0020t\u0064\u003d\u0025s\u0020\u0078\u006c\u0061\u0074\u003d\u0025\u0073\u000a"+"\u0009t\u0064\u0030\u003d\u0025s\u000a\u0009\u0020\u0020\u2192 \u0025s\u0020x\u006c\u0061\u0074\u003d\u0025\u0073",_cca ._cbge .CTM ,_cca ._dcea ,_dbef ,_ceg (_cca ._cbge .CTM .Mult (_cca ._dcea ).Mult (_dbef )),_cfdd ,_dddefg ,_ceg (_dddefg ));
};_cff ,_afd :=_cca .newTextMark (_c .ExpandLigatures (_agcdf ),_abbb ,_ceg (_dddefg ),_aa .Abs (_caed *_abbb .ScalingFactorX ()),_aagd ,_cca ._gdga ._dbad ,_eega ,_fgad ,_ecff ,_adggc ,_bcbc ,_baed );if !_afd {_d .Log .Debug ("\u0054\u0065\u0078\u0074\u0020\u006d\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069d\u0065 \u0070\u0061\u0067\u0065\u002e\u0020\u0053\u006b\u0069\u0070\u0070\u0069\u006e\u0067");
continue ;};if _aagd ==nil {_d .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u002e");}else if _aagd .Encoder ()==nil {_d .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020N\u006f\u0020\u0065\u006e\u0063\u006f\u0064\u0069\u006eg\u002e\u0020\u0066o\u006et\u003d\u0025\u0073",_aagd );
}else {if _decac ,_bbcd :=_aagd .Encoder ().CharcodeToRune (_geba );_bbcd {_cff ._gacg =string (_decac );};};_d .Log .Trace ("i\u003d\u0025\u0064\u0020\u0063\u006fd\u0065\u003d\u0025\u0064\u0020\u006d\u0061\u0072\u006b=\u0025\u0073\u0020t\u0072m\u003d\u0025\u0073",_bcbc ,_geba ,_cff ,_abbb );
_cca ._ebfd =append (_cca ._ebfd ,&_cff );_cca ._dcea .Concat (_dbef );};return nil ;};func _cfdb (_acde *TextMarkArray ,_dbf *string ,_eebf *int ,_bfgd string )error {_bebb :=_acde .Elements ()[0].DirectObject ;_bec ,_fcdf :=_cb .GetString (_bebb );if !_fcdf {return _deg .Errorf ("\u0075n\u0061\u0062l\u0065\u0020\u0074\u006f \u0067\u0065\u0074 \u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0042\u0079te\u0073\u0020\u0066r\u006f\u006d \u0064\u0069\u0072\u0065\u0063\u0074O\u0062\u006ae\u0063\u0074");
};_eebb :=_add (_acde );_ddeaa ,_fcdf :=_cb .GetStringBytes (_bebb );if !_fcdf {return _cb .ErrTypeError ;};_egf :=_acde .Elements ()[0].Font ;_dgf :=_ecf (_ddeaa ,_egf );_gagf :="";_dae :=*_dbf ;if len (_dae )> *_eebf {_gagf =_dae [*_eebf :*_eebf +len (_eebb )];
}else if *_eebf ==len (_bfgd )-1&&len (_dae )> *_eebf {_gagf =_dae [*_eebf :];};_fgaa :="";_gfdd :=_gb .Split (_dgf ,"\u0020");_bdde :=_gfdd [len (_gfdd )-1];if _bdde ==_eebb &&*_eebf ==0{_dgbc :=_gb .LastIndex (_dgf ,_eebb );_fgaa =_dcfd (_dgf ,_dgbc ,len (_eebb )+_dgbc ,_gagf );
}else if *_eebf ==len (_bfgd )-1&&len (_dae )> *_eebf {_fgaa =_gb .Replace (_dgf ,_eebb ,_dae [*_eebf :],-1);}else {_fgaa =_gb .Replace (_dgf ,_eebb ,_gagf ,1);};_edab (_bec ,_fgaa ,_egf );*_eebf +=len (_eebb );return nil ;};func _ggcdg (_bffc []pathSection )rulingList {_ccab (_bffc );
if _cfef {_d .Log .Info ("\u006d\u0061k\u0065\u0053\u0074\u0072\u006f\u006b\u0065\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0064\u0020\u0073\u0074\u0072ok\u0065\u0073",len (_bffc ));};var _acfc rulingList ;for _ ,_egffd :=range _bffc {for _ ,_bedgd :=range _egffd ._cgdd {if len (_bedgd ._egdag )< 2{continue ;
};_cadg :=_bedgd ._egdag [0];for _ ,_fdff :=range _bedgd ._egdag [1:]{if _fdde ,_fcca :=_adcff (_cadg ,_fdff ,_egffd .Color );_fcca {_acfc =append (_acfc ,_fdde );};_cadg =_fdff ;};};};if _cfef {_d .Log .Info ("m\u0061\u006b\u0065\u0053tr\u006fk\u0065\u0052\u0075\u006c\u0069n\u0067\u0073\u003a\u0020\u0025\u0073",_acfc );
};return _acfc ;};func (_cgde *textObject )setTextRise (_gfbff float64 ){if _cgde ==nil {return ;};_cgde ._gdga ._cgbc =_gfbff ;};func (_afgf *textTable )getRight ()paraList {_fcbd :=make (paraList ,_afgf ._gecff );for _abgda :=0;_abgda < _afgf ._gecff ;
_abgda ++{_edabcd :=_afgf .get (_afgf ._ccfea -1,_abgda )._dabb ;if _edabcd .taken (){return nil ;};_fcbd [_abgda ]=_edabcd ;};for _ebedb :=0;_ebedb < _afgf ._gecff -1;_ebedb ++{if _fcbd [_ebedb ]._bddf !=_fcbd [_ebedb +1]{return nil ;};};return _fcbd ;
};func _gffgf (_cgbed _cb .PdfObject ,_eccga _bcc .Color )(_de .Image ,error ){_fbcbc ,_eadd :=_cb .GetStream (_cgbed );if !_eadd {return nil ,nil ;};_acgf ,_fbece :=_bf .NewXObjectImageFromStream (_fbcbc );if _fbece !=nil {return nil ,_fbece ;};_eaadd ,_fbece :=_acgf .ToImage ();
if _fbece !=nil {return nil ,_fbece ;};return _cacc (_eaadd ,_eccga ),nil ;};func (_cgaba rulingList )primaries ()[]float64 {_cfcbf :=make (map[float64 ]struct{},len (_cgaba ));for _ ,_cbbba :=range _cgaba {_cfcbf [_cbbba ._gdge ]=struct{}{};};_aedc :=make ([]float64 ,len (_cfcbf ));
_dfag :=0;for _cedd :=range _cfcbf {_aedc [_dfag ]=_cedd ;_dfag ++;};_bd .Float64s (_aedc );return _aedc ;};func _fdgec (_debg *list )[]*textLine {for _ ,_acef :=range _debg ._caede {switch _acef ._degb {case "\u004c\u0042\u006fd\u0079":if len (_acef ._gead )!=0{return _acef ._gead ;
};return _fdgec (_acef );case "\u0053\u0070\u0061\u006e":return _acef ._gead ;case "I\u006e\u006c\u0069\u006e\u0065\u0053\u0068\u0061\u0070\u0065":return _acef ._gead ;};};return nil ;};func _fbdaa (_feggg string )(string ,bool ){_dgcea :=[]rune (_feggg );
if len (_dgcea )!=1{return "",false ;};_cddgg ,_badbd :=_efede [_dgcea [0]];return _cddgg ,_badbd ;};func (_ggcda *textTable )markCells (){for _daege :=0;_daege < _ggcda ._gecff ;_daege ++{for _bfeae :=0;_bfeae < _ggcda ._ccfea ;_bfeae ++{_afac :=_ggcda .get (_bfeae ,_daege );
if _afac !=nil {_afac ._edca =true ;};};};};

// Text returns the extracted page text.
func (_fcece PageText )Text ()string {return _fcece ._ada };

// ImageExtractOptions contains options for controlling image extraction from
// PDF pages.
type ImageExtractOptions struct{IncludeInlineStencilMasks bool ;};func (_fadfc *structElement )parseStructElement (_gfbfa _cb .PdfObject ){_cgad ,_ggfg :=_cb .GetDict (_gfbfa );if !_ggfg {_d .Log .Debug ("\u0070\u0061\u0072\u0073\u0065\u0053\u0074\u0072u\u0063\u0074\u0045le\u006d\u0065\u006e\u0074\u003a\u0020d\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u002e");
return ;};_adba :=_cgad .Get ("\u0053");_caec :=_cgad .Get ("\u0050\u0067");_bdgg :="";if _adba !=nil {_bdgg =_adba .String ();};_ebfc :=_cgad .Get ("\u004b");_fadfc ._gffd =_bdgg ;_fadfc ._ecgce =_caec ;switch _caedb :=_ebfc .(type ){case *_cb .PdfObjectInteger :_fadfc ._gffd =_bdgg ;
_fadfc ._bagd =int64 (*_caedb );_fadfc ._ecgce =_caec ;case *_cb .PdfObjectReference :_adbg :=*_cb .MakeArray (_caedb );var _eedg int64 =-1;_fadfc ._bagd =_eedg ;if _adbg .Len ()==1{_eadf :=_adbg .Elements ()[0];_gffb ,_gbcb :=_eadf .(*_cb .PdfObjectInteger );
if _gbcb {_eedg =int64 (*_gffb );_fadfc ._bagd =_eedg ;_fadfc ._gffd =_bdgg ;_fadfc ._ecgce =_caec ;return ;};};_cbac :=[]structElement {};for _ ,_cbbca :=range _adbg .Elements (){_bcbec ,_gacb :=_cbbca .(*_cb .PdfObjectInteger );if _gacb {_eedg =int64 (*_bcbec );
_fadfc ._bagd =_eedg ;_fadfc ._gffd =_bdgg ;}else {_gebc :=&structElement {};_gebc .parseStructElement (_cbbca );_cbac =append (_cbac ,*_gebc );};_eedg =-1;};_fadfc ._ccbf =_cbac ;case *_cb .PdfObjectArray :_babg :=_ebfc .(*_cb .PdfObjectArray );var _afbe int64 =-1;
_fadfc ._bagd =_afbe ;if _babg .Len ()==1{_gcbea :=_babg .Elements ()[0];_bgdf ,_gfeg :=_gcbea .(*_cb .PdfObjectInteger );if _gfeg {_afbe =int64 (*_bgdf );_fadfc ._bagd =_afbe ;_fadfc ._gffd =_bdgg ;_fadfc ._ecgce =_caec ;return ;};};_fedd :=[]structElement {};
for _ ,_bdbg :=range _babg .Elements (){_fccb ,_eagge :=_bdbg .(*_cb .PdfObjectInteger );if _eagge {_afbe =int64 (*_fccb );_fadfc ._bagd =_afbe ;_fadfc ._gffd =_bdgg ;_fadfc ._ecgce =_caec ;}else {_dddfc :=&structElement {};_dddfc .parseStructElement (_bdbg );
_fedd =append (_fedd ,*_dddfc );};_afbe =-1;};_fadfc ._ccbf =_fedd ;};};func (_cfbbd *textTable )put (_ddfdc ,_bffae int ,_cfce *textPara ){_cfbbd ._agcf [_dfdbcc (_ddfdc ,_bffae )]=_cfce ;};

// String returns a description of `k`.
func (_ffeb rulingKind )String ()string {_aebc ,_efgcb :=_eccf [_ffeb ];if !_efgcb {return _deg .Sprintf ("\u004e\u006ft\u0020\u0061\u0020r\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_ffeb );};return _aebc ;};func _fffdb (_acda ,_aceed _ed .Point )rulingKind {_ffefa :=_aa .Abs (_acda .X -_aceed .X );
_cdga :=_aa .Abs (_acda .Y -_aceed .Y );return _ecefe (_ffefa ,_cdga ,_fdccd );};func _fedde (_fgfb ,_cdfeb _ed .Point )rulingKind {_fdged :=_aa .Abs (_fgfb .X -_cdfeb .X );_eceee :=_aa .Abs (_fgfb .Y -_cdfeb .Y );return _ecefe (_fdged ,_eceee ,_aeeg );
};var _egga =[]string {"\u2756","\u27a2","\u2713","\u2022","\uf0a7","\u25a1","\u2212","\u25a0","\u25aa","\u006f"};func (_efba *textPara )toTextMarks (_fcdag *int )[]TextMark {if _efba ._fcdge ==nil {return _efba .toCellTextMarks (_fcdag );};var _ccfb []TextMark ;
for _gfcabe :=0;_gfcabe < _efba ._fcdge ._gecff ;_gfcabe ++{for _gada :=0;_gada < _efba ._fcdge ._ccfea ;_gada ++{_bbbge :=_efba ._fcdge .get (_gada ,_gfcabe );if _bbbge ==nil {_ccfb =_ecaf (_ccfb ,_fcdag ,"\u0009");}else {_gdacb :=_bbbge .toCellTextMarks (_fcdag );
_ccfb =append (_ccfb ,_gdacb ...);};_ccfb =_ecaf (_ccfb ,_fcdag ,"\u0020");};if _gfcabe < _efba ._fcdge ._gecff -1{_ccfb =_ecaf (_ccfb ,_fcdag ,"\u000a");};};_dfecd :=_efba ._fcdge ;if _dfecd .isExportable (){_fecf :=_dfecd .toTextTable ();_ccfb =_cdccd (_ccfb ,&_fecf );
};return _ccfb ;};func (_egfcd *wordBag )sort (){for _ ,_abaga :=range _egfcd ._gecfd {_bd .Slice (_abaga ,func (_eeag ,_ebdc int )bool {return _cedg (_abaga [_eeag ],_abaga [_ebdc ])< 0});};};func (_aeacee gridTile )complete ()bool {return _aeacee .numBorders ()==4};
func (_eabfc gridTile )numBorders ()int {_bagfg :=0;if _eabfc ._cbegc {_bagfg ++;};if _eabfc ._eeba {_bagfg ++;};if _eabfc ._ffdg {_bagfg ++;};if _eabfc ._egfbb {_bagfg ++;};return _bagfg ;};const (RenderModeStroke RenderMode =1<<iota ;RenderModeFill ;
RenderModeClip ;);func _cedg (_cbafc ,_bddg bounded )float64 {return _cbafc .bbox ().Llx -_bddg .bbox ().Llx };func (_cgcd paraList )readBefore (_fceg []int ,_eacae ,_decfg int )bool {_dge ,_fdgb :=_cgcd [_eacae ],_cgcd [_decfg ];if _cdag (_dge ,_fdgb )&&_dge .Lly > _fdgb .Lly {return true ;
};if !(_dge ._ecddc .Urx < _fdgb ._ecddc .Llx ){return false ;};_cefe ,_gddc :=_dge .Lly ,_fdgb .Lly ;if _cefe > _gddc {_gddc ,_cefe =_cefe ,_gddc ;};_cdcc :=_aa .Max (_dge ._ecddc .Llx ,_fdgb ._ecddc .Llx );_cgf :=_aa .Min (_dge ._ecddc .Urx ,_fdgb ._ecddc .Urx );
_fggg :=_cgcd .llyRange (_fceg ,_cefe ,_gddc );for _ ,_adef :=range _fggg {if _adef ==_eacae ||_adef ==_decfg {continue ;};_afffe :=_cgcd [_adef ];if _afffe ._ecddc .Llx <=_cgf &&_cdcc <=_afffe ._ecddc .Urx {return false ;};};return true ;};func _adeg (_edfd ,_fbfec _ed .Point )bool {_efaac :=_aa .Abs (_edfd .X -_fbfec .X );
_gdcaf :=_aa .Abs (_edfd .Y -_fbfec .Y );return _fefg (_efaac ,_gdcaf );};func (_gbdb lineRuling )xMean ()float64 {return 0.5*(_gbdb ._bffg .X +_gbdb ._cabeba .X )};

// RangeOffset returns the TextMarks in `ma` that overlap text[start:end] in the extracted text.
// These are tm: `start` <= tm.Offset + len(tm.Text) && tm.Offset < `end` where
// `start` and `end` are offsets in the extracted text.
// NOTE: TextMarks can contain multiple characters. e.g. "ffi" for the ï¬ ligature so the first and
// last elements of the returned TextMarkArray may only partially overlap text[start:end].
func (_gbdd *TextMarkArray )RangeOffset (start ,end int )(*TextMarkArray ,error ){if _gbdd ==nil {return nil ,_bfb .New ("\u006da\u003d\u003d\u006e\u0069\u006c");};if end < start {return nil ,_deg .Errorf ("\u0065\u006e\u0064\u0020\u003c\u0020\u0073\u0074\u0061\u0072\u0074\u002e\u0020\u0052\u0061n\u0067\u0065\u004f\u0066\u0066\u0073\u0065\u0074\u0020\u006e\u006f\u0074\u0020d\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020\u0073\u0074\u0061\u0072t=\u0025\u0064\u0020\u0065\u006e\u0064\u003d\u0025\u0064\u0020",start ,end );
};_bdcg :=len (_gbdd ._agfc );if _bdcg ==0{return _gbdd ,nil ;};if start < _gbdd ._agfc [0].Offset {start =_gbdd ._agfc [0].Offset ;};if end > _gbdd ._agfc [_bdcg -1].Offset +1{end =_gbdd ._agfc [_bdcg -1].Offset +1;};_feaa :=_bd .Search (_bdcg ,func (_edaga int )bool {return _gbdd ._agfc [_edaga ].Offset +len (_gbdd ._agfc [_edaga ].Text )-1>=start });
if !(0<=_feaa &&_feaa < _bdcg ){_fage :=_deg .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020\u0072\u0061\u006e\u0067\u0065\u002e\u0020\u0073\u0074\u0061\u0072\u0074\u003d%\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009 \u006c\u0061\u0073\u0074\u003d%\u0076",start ,_feaa ,_bdcg ,_gbdd ._agfc [0],_gbdd ._agfc [_bdcg -1]);
return nil ,_fage ;};_ffd :=_bd .Search (_bdcg ,func (_ebfgf int )bool {return _gbdd ._agfc [_ebfgf ].Offset > end -1});if !(0<=_ffd &&_ffd < _bdcg ){_efgc :=_deg .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020r\u0061\u006e\u0067e\u002e\u0020\u0065n\u0064\u003d%\u0064\u0020\u0069\u0045\u006e\u0064=\u0025d \u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d\u0025\u0076",end ,_ffd ,_bdcg ,_gbdd ._agfc [0],_gbdd ._agfc [_bdcg -1]);
return nil ,_efgc ;};if _ffd <=_feaa {return nil ,_deg .Errorf ("\u0069\u0045\u006e\u0064\u0020\u003c=\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003a\u0020\u0073\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u0065\u006ed\u003d\u0025\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020i\u0045n\u0064\u003d\u0025\u0064",start ,end ,_feaa ,_ffd );
};return &TextMarkArray {_agfc :_gbdd ._agfc [_feaa :_ffd ]},nil ;};func (_ecacg *textTable )depth ()float64 {_dddd :=1e10;for _efbce :=0;_efbce < _ecacg ._ccfea ;_efbce ++{_bfab :=_ecacg .get (_efbce ,0);if _bfab ==nil ||_bfab ._afce {continue ;};_dddd =_aa .Min (_dddd ,_bfab .depth ());
};return _dddd ;};func (_bcga *textPara )toCellTextMarks (_dedff *int )[]TextMark {var _debe []TextMark ;for _eaffa ,_ebded :=range _bcga ._efff {_eadb :=_ebded .toTextMarks (_dedff );_eegca :=_bcbdc &&_ebded .endsInHyphen ()&&_eaffa !=len (_bcga ._efff )-1;
if _eegca {_eadb =_bfge (_eadb ,_dedff );};_debe =append (_debe ,_eadb ...);if !(_eegca ||_eaffa ==len (_bcga ._efff )-1){_debe =_ecaf (_debe ,_dedff ,_gdggf (_ebded ._eeage ,_bcga ._efff [_eaffa +1]._eeage ));};};return _debe ;};func _bcbee (_bcbdca float64 ,_cgeab int )int {if _cgeab ==0{_cgeab =1;
};_afeg :=float64 (_cgeab );return int (_aa .Round (_bcbdca /_afeg )*_afeg );};func _dfaac (_gaegc ,_egebe int )int {if _gaegc < _egebe {return _gaegc ;};return _egebe ;};func _edagc (_egea []compositeCell )[]float64 {var _ffbf []*textLine ;_acbdc :=0;
for _ ,_cgag :=range _egea {_acbdc +=len (_cgag .paraList );_ffbf =append (_ffbf ,_cgag .lines ()...);};_bd .Slice (_ffbf ,func (_bccbd ,_eecaf int )bool {_cefc ,_ggfcc :=_ffbf [_bccbd ],_ffbf [_eecaf ];_aafb ,_gfefe :=_cefc ._eeage ,_ggfcc ._eeage ;if !_bgfbd (_aafb -_gfefe ){return _aafb < _gfefe ;
};return _cefc .Llx < _ggfcc .Llx ;});if _cdgfc {_deg .Printf ("\u0020\u0020\u0020 r\u006f\u0077\u0042\u006f\u0072\u0064\u0065\u0072\u0073:\u0020%\u0064 \u0070a\u0072\u0061\u0073\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",_acbdc ,len (_ffbf ));
for _aeea ,_gbddd :=range _ffbf {_deg .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_aeea ,_gbddd );};};var _abfacc []float64 ;_ebdeb :=_ffbf [0];var _fccc [][]*textLine ;_faegd :=[]*textLine {_ebdeb };for _bfbb ,_fccag :=range _ffbf [1:]{if _fccag .Ury < _ebdeb .Lly {_ggccg :=0.5*(_fccag .Ury +_ebdeb .Lly );
if _cdgfc {_deg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u003c\u0020\u0025\u0036.\u0032f\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u003d\u0025\u0036\u002e\u0032\u0066\u000a"+"\u0009\u0020\u0071\u003d\u0025\u0073\u000a\u0009\u0020p\u003d\u0025\u0073\u000a",_bfbb ,_fccag .Ury ,_ebdeb .Lly ,_ggccg ,_ebdeb ,_fccag );
};_abfacc =append (_abfacc ,_ggccg );_fccc =append (_fccc ,_faegd );_faegd =nil ;};_faegd =append (_faegd ,_fccag );if _fccag .Lly < _ebdeb .Lly {_ebdeb =_fccag ;};};if len (_faegd )> 0{_fccc =append (_fccc ,_faegd );};if _cdgfc {_deg .Printf (" \u0020\u0020\u0020\u0020\u0020\u0020 \u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073\u003d%\u0036.\u0032\u0066\u000a",_abfacc );
};if _cdgfc {_d .Log .Info ("\u0072\u006f\u0077\u003d\u0025\u0064",len (_egea ));for _cbbgf ,_dgaad :=range _egea {_deg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cbbgf ,_dgaad );};_d .Log .Info ("\u0067r\u006f\u0075\u0070\u0073\u003d\u0025d",len (_fccc ));
for _efbad ,_cecf :=range _fccc {_deg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0064\u000a",_efbad ,len (_cecf ));for _dbfc ,_ddeae :=range _cecf {_deg .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_dbfc ,_ddeae );};};};_feadb :=true ;
for _abfgb ,_cggc :=range _fccc {_eggee :=true ;for _egebb ,_daag :=range _egea {if _cdgfc {_deg .Printf ("\u0020\u0020\u0020\u007e\u007e\u007e\u0067\u0072\u006f\u0075\u0070\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0020\u0063\u0065\u006cl\u0020\u0025\u0064\u0020\u006ff\u0020\u0025d\u0020\u0025\u0073\u000a",_abfgb ,len (_fccc ),_egebb ,len (_egea ),_daag );
};if !_daag .hasLines (_cggc ){if _cdgfc {_deg .Printf ("\u0020\u0020\u0020\u0021\u0021\u0021\u0067\u0072\u006f\u0075\u0070\u0020\u0025d\u0020\u006f\u0066\u0020\u0025\u0064 \u0063\u0065\u006c\u006c\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064 \u004f\u0055\u0054\u000a",_abfgb ,len (_fccc ),_egebb ,len (_egea ));
};_eggee =false ;break ;};};if !_eggee {_feadb =false ;break ;};};if !_feadb {if _cdgfc {_d .Log .Info ("\u0072\u006f\u0077\u0020\u0063o\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u0020\u0064\u006f\u006e\u0027\u0074 \u0073\u0070\u0061\u006e\u0020\u0061\u006c\u006c\u0020\u0063\u0065\u006c\u006c\u0073\u0020\u0069\u006e\u0020\u0072\u006f\u0077\u002e\u0020\u0069\u0067\u006e\u006f\u0072\u0069\u006eg");
};_abfacc =nil ;};if _cdgfc &&_abfacc !=nil {_deg .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u002a\u002a*\u0072\u006f\u0077\u0043\u006f\u0072\u0072i\u0064\u006f\u0072\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u000a",_abfacc );};return _abfacc ;
};

// NewEditor returns a new Editor object
func NewEditor (reader *_bf .PdfReader )*Editor {return &Editor {_cef :reader }};func (_baea *wordBag )blocked (_bbad *textWord )bool {if _bbad .Urx < _baea .Llx {_gafag :=_gdgb (_bbad .PdfRectangle );_bfbce :=_dfcgf (_baea .PdfRectangle );if _baea ._affe .blocks (_gafag ,_bfbce ){if _fabe {_d .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0078\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_bbad ,_baea );
};return true ;};}else if _baea .Urx < _bbad .Llx {_bfdb :=_gdgb (_baea .PdfRectangle );_ccda :=_dfcgf (_bbad .PdfRectangle );if _baea ._affe .blocks (_bfdb ,_ccda ){if _fabe {_d .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0078\u2192\u0020:\u0020\u0025\u0073\u0020%s",_bbad ,_baea );
};return true ;};};if _bbad .Ury < _baea .Lly {_ffgg :=_ebgf (_bbad .PdfRectangle );_bacc :=_bddfb (_baea .PdfRectangle );if _baea ._fgea .blocks (_ffgg ,_bacc ){if _fabe {_d .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0079\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_bbad ,_baea );
};return true ;};}else if _baea .Ury < _bbad .Lly {_ceaf :=_ebgf (_baea .PdfRectangle );_adgag :=_bddfb (_bbad .PdfRectangle );if _baea ._fgea .blocks (_ceaf ,_adgag ){if _fabe {_d .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0079\u2192\u0020:\u0020\u0025\u0073\u0020%s",_bbad ,_baea );
};return true ;};};return false ;};func (_bdae *textObject )setTextLeading (_dbc float64 ){if _bdae ==nil {return ;};_bdae ._gdga ._abf =_dbc ;};func (_adgd *textObject )reset (){_adgd ._dcea =_ed .IdentityMatrix ();_adgd ._dada =_ed .IdentityMatrix ();
_adgd ._ebfd =nil ;};func _eaae (_bcbb map[int ][]float64 )string {_cdba :=_agfb (_bcbb );_caacd :=make ([]string ,len (_bcbb ));for _geab ,_efaaf :=range _cdba {_caacd [_geab ]=_deg .Sprintf ("\u0025\u0064\u003a\u0020\u0025\u002e\u0032\u0066",_efaaf ,_bcbb [_efaaf ]);
};return _deg .Sprintf ("\u007b\u0025\u0073\u007d",_gb .Join (_caacd ,"\u002c\u0020"));};func (_adda *textPara )text ()string {_cfgc :=new (_af .Buffer );_adda .writeText (_cfgc );return _cfgc .String ();};type paraList []*textPara ;func _ggeb (_fcaag *_bf .Image ,_beadab _bcc .Color )_de .Image {_badea ,_cebg :=int (_fcaag .Width ),int (_fcaag .Height );
_ebfdd :=_de .NewRGBA (_de .Rect (0,0,_badea ,_cebg ));for _addd :=0;_addd < _cebg ;_addd ++{for _gcab :=0;_gcab < _badea ;_gcab ++{_ggdd ,_adead :=_fcaag .ColorAt (_gcab ,_addd );if _adead !=nil {_d .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_gcab ,_addd );
continue ;};_bffba ,_acfe ,_dfafe ,_ :=_ggdd .RGBA ();var _adecf _bcc .Color ;if _bffba +_acfe +_dfafe ==0{_adecf =_bcc .Transparent ;}else {_adecf =_beadab ;};_ebfdd .Set (_gcab ,_addd ,_adecf );};};return _ebfdd ;};func (_fdeg *textTable )compositeRowCorridors ()map[int ][]float64 {_fgff :=make (map[int ][]float64 ,_fdeg ._gecff );
if _cdgfc {_d .Log .Info ("c\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0052\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073:\u0020h\u003d\u0025\u0064",_fdeg ._gecff );};for _dafcb :=1;_dafcb < _fdeg ._gecff ;_dafcb ++{var _fbgde []compositeCell ;
for _gdcb :=0;_gdcb < _fdeg ._ccfea ;_gdcb ++{if _gefdb ,_deac :=_fdeg ._ebcde [_dfdbcc (_gdcb ,_dafcb )];_deac {_fbgde =append (_fbgde ,_gefdb );};};if len (_fbgde )==0{continue ;};_aefdc :=_edagc (_fbgde );_fgff [_dafcb ]=_aefdc ;if _cdgfc {_deg .Printf ("\u0020\u0020\u0020\u0025\u0032\u0064\u003a\u0020\u00256\u002e\u0032\u0066\u000a",_dafcb ,_aefdc );
};};return _fgff ;};const _gebbg =1.0/1000.0;

// ImageMark represents an image drawn on a page and its position in device coordinates.
// All coordinates are in device coordinates.
type ImageMark struct{Image *_bf .Image ;

// Dimensions of the image as displayed in the PDF.
Width float64 ;Height float64 ;

// Position of the image in PDF coordinates (lower left corner).
X float64 ;Y float64 ;

// Angle in degrees, if rotated.
Angle float64 ;};func _ddf (_aaf *TextMarkArray )[]*TextMarkArray {_bgf :=_aaf .Elements ();_aagc :=len (_bgf );var _bbed _cb .PdfObject ;_gaed :=[]*TextMarkArray {};_acb :=&TextMarkArray {};_ccd :=-1;for _edcd ,_eaba :=range _bgf {_fba :=_eaba .DirectObject ;
_ccd =_eaba .Index ;if _fba ==nil {_ace :=_gag (_aaf ,_edcd ,_ccd );if _bbed !=nil {if _ace ==-1||_ace > _edcd {_gaed =append (_gaed ,_acb );_acb =&TextMarkArray {};};};}else if _fba !=nil &&_bbed ==nil {if _ccd ==0&&_edcd > 0{_gaed =append (_gaed ,_acb );
_acb =&TextMarkArray {};};}else if _fba !=nil &&_bbed !=nil {if _fba !=_bbed {_gaed =append (_gaed ,_acb );_acb =&TextMarkArray {};};};_bbed =_fba ;_acb .Append (_eaba );if _edcd ==(_aagc -1){_gaed =append (_gaed ,_acb );};};return _gaed ;};func (_fbcf *textTable )reduce ()*textTable {_bddgd :=make ([]int ,0,_fbcf ._gecff );
_ecaef :=make ([]int ,0,_fbcf ._ccfea );for _gabf :=0;_gabf < _fbcf ._gecff ;_gabf ++{if !_fbcf .emptyCompositeRow (_gabf ){_bddgd =append (_bddgd ,_gabf );};};for _bgcb :=0;_bgcb < _fbcf ._ccfea ;_bgcb ++{if !_fbcf .emptyCompositeColumn (_bgcb ){_ecaef =append (_ecaef ,_bgcb );
};};if len (_bddgd )==_fbcf ._gecff &&len (_ecaef )==_fbcf ._ccfea {return _fbcf ;};_ffce :=textTable {_cgfe :_fbcf ._cgfe ,_ccfea :len (_ecaef ),_gecff :len (_bddgd ),_agcf :make (map[uint64 ]*textPara ,len (_ecaef )*len (_bddgd ))};if _cdgfc {_d .Log .Info ("\u0072\u0065\u0064\u0075ce\u003a\u0020\u0025\u0064\u0078\u0025\u0064\u0020\u002d\u003e\u0020\u0025\u0064\u0078%\u0064",_fbcf ._ccfea ,_fbcf ._gecff ,len (_ecaef ),len (_bddgd ));
_d .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_ecaef );_d .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_bddgd );};for _ceabf ,_cfgf :=range _bddgd {for _dbeeg ,_ebaad :=range _ecaef {_cbfac ,_ddebc :=_fbcf .getComposite (_ebaad ,_cfgf );
if _cbfac ==nil {continue ;};if _cdgfc {_deg .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_dbeeg ,_ceabf ,_ebaad ,_cfgf ,_bdfde (_cbfac .merge ().text (),50));};_ffce .putComposite (_dbeeg ,_ceabf ,_cbfac ,_ddebc );
};};return &_ffce ;};func (_ddfg *wordBag )maxDepth ()float64 {return _ddfg ._bdgd -_ddfg .Lly };func (_ecddcg rulingList )bbox ()_bf .PdfRectangle {var _gdbf _bf .PdfRectangle ;if len (_ecddcg )==0{_d .Log .Error ("r\u0075\u006c\u0069\u006e\u0067\u004ci\u0073\u0074\u002e\u0062\u0062\u006f\u0078\u003a\u0020n\u006f\u0020\u0072u\u006ci\u006e\u0067\u0073");
return _bf .PdfRectangle {};};if _ecddcg [0]._daea ==_faec {_gdbf .Llx ,_gdbf .Urx =_ecddcg .secMinMax ();_gdbf .Lly ,_gdbf .Ury =_ecddcg .primMinMax ();}else {_gdbf .Llx ,_gdbf .Urx =_ecddcg .primMinMax ();_gdbf .Lly ,_gdbf .Ury =_ecddcg .secMinMax ();
};return _gdbf ;};func _add (_edf *TextMarkArray )string {_bfbc :="";for _ ,_bae :=range _edf .Elements (){_bfbc +=_bae .Text ;};return _bfbc ;};func (_cdda *textWord )bbox ()_bf .PdfRectangle {return _cdda .PdfRectangle };func (_gcbg paraList )llyOrdering ()[]int {_edabg :=make ([]int ,len (_gcbg ));
for _aaege :=range _gcbg {_edabg [_aaege ]=_aaege ;};_bd .SliceStable (_edabg ,func (_acca ,_cabdb int )bool {_efecg ,_agab :=_edabg [_acca ],_edabg [_cabdb ];return _gcbg [_efecg ].Lly < _gcbg [_agab ].Lly ;});return _edabg ;};func _fbbfc (_eadfc []*textMark ,_aggb _bf .PdfRectangle ,_fbac rulingList ,_gbec []gridTiling ,_gage bool )paraList {_d .Log .Trace ("\u006d\u0061\u006b\u0065\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065\u003a \u0025\u0064\u0020\u0065\u006c\u0065m\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065=\u0025\u002e\u0032\u0066",len (_eadfc ),_aggb );
if len (_eadfc )==0{return nil ;};_dagg :=_fcfa (_eadfc ,_aggb );if len (_dagg )==0{return nil ;};_fbac .log ("\u006d\u0061\u006be\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065");_debfg ,_fbfd :=_fbac .vertsHorzs ();_cgdag :=_ecdb (_dagg ,_aggb .Ury ,_debfg ,_fbfd );
_cbaae :=_ccebf (_cgdag ,_aggb .Ury ,_debfg ,_fbfd ,_gage );_cbaae =_eaed (_cbaae );_geff :=make (paraList ,0,len (_cbaae ));for _ ,_cdbf :=range _cbaae {_dfecf :=_cdbf .arrangeText (_gage );if _dfecf !=nil {_geff =append (_geff ,_dfecf );};};if len (_geff )>=_fcda {_geff =_geff .extractTables (_gbec );
};_geff .sortReadingOrder ();_geff .sortTopoOrder ();_geff .log ("\u0073\u006f\u0072te\u0064\u0020\u0069\u006e\u0020\u0072\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u006f\u0072\u0064\u0065\u0072");return _geff ;};func _gadcd (_cdcee map[float64 ]map[float64 ]gridTile )[]float64 {_dafdb :=make ([]float64 ,0,len (_cdcee ));
_cbafd :=make (map[float64 ]struct{},len (_cdcee ));for _ ,_gcgd :=range _cdcee {for _abdgb :=range _gcgd {if _ ,_acedc :=_cbafd [_abdgb ];_acedc {continue ;};_dafdb =append (_dafdb ,_abdgb );_cbafd [_abdgb ]=struct{}{};};};_bd .Float64s (_dafdb );return _dafdb ;
};type textWord struct{_bf .PdfRectangle ;_afefd float64 ;_dfaee string ;_bdaeb []*textMark ;_gbaff float64 ;_cfacf bool ;};func _ba (_eg []string ,_egg int ,_fb string )int {_ca :=_egg ;for ;_ca < len (_eg );_ca ++{if _eg [_ca ]!=_fb {return _ca ;};};
return _ca ;};func (_eedgb *ruling )gridIntersecting (_abcff *ruling )bool {return _cffc (_eedgb ._ggbc ,_abcff ._ggbc )&&_cffc (_eedgb ._agbd ,_abcff ._agbd );};func _dda (_cg []string ,_ef int ,_db int ){for _dg ,_gfb :=_ef ,_db -1;_dg < _gfb ;_dg ,_gfb =_dg +1,_gfb -1{_df :=_cg [_dg ];
_cg [_dg ]=_cg [_gfb ];_cg [_gfb ]=_df ;};};func (_fbggg *textTable )get (_fegg ,_cbgd int )*textPara {return _fbggg ._agcf [_dfdbcc (_fegg ,_cbgd )]};func (_bdded paraList )reorder (_fgge []int ){_aegc :=make (paraList ,len (_bdded ));for _eceb ,_bafb :=range _fgge {_aegc [_eceb ]=_bdded [_bafb ];
};copy (_bdded ,_aegc );};

// PageText represents the layout of text on a device page.
type PageText struct{_afbb []*textMark ;_ada string ;_ecda []TextMark ;_aef []TextTable ;_cffb _bf .PdfRectangle ;_edag []pathSection ;_dffe []pathSection ;_fabb *_cb .PdfObject ;_dadc _cb .PdfObject ;_ffab *_gf .ContentStreamOperations ;_dcce PageTextOptions ;
};func (_cfga *textTable )log (_eabace string ){if !_cdgfc {return ;};_d .Log .Info ("~\u007e\u007e\u0020\u0025\u0073\u003a \u0025\u0064\u0020\u0078\u0020\u0025d\u0020\u0067\u0072\u0069\u0064\u003d\u0025t\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0025\u0036\u002e2\u0066",_eabace ,_cfga ._ccfea ,_cfga ._gecff ,_cfga ._cgfe ,_cfga .PdfRectangle );
for _ebga :=0;_ebga < _cfga ._gecff ;_ebga ++{for _agda :=0;_agda < _cfga ._ccfea ;_agda ++{_bageb :=_cfga .get (_agda ,_ebga );if _bageb ==nil {continue ;};_deg .Printf ("%\u0034\u0064\u0020\u00252d\u003a \u0025\u0036\u002e\u0032\u0066 \u0025\u0071\u0020\u0025\u0064\u000a",_agda ,_ebga ,_bageb .PdfRectangle ,_bdfde (_bageb .text (),50),_a .RuneCountInString (_bageb .text ()));
};};};func _gafae (_geddd []*textWord ,_dbea *textWord )[]*textWord {for _bgfg ,_ffde :=range _geddd {if _ffde ==_dbea {return _bfgcb (_geddd ,_bgfg );};};_d .Log .Error ("\u0072\u0065\u006d\u006f\u0076e\u0057\u006f\u0072\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u0073\u0020\u0064o\u0065\u0073\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",_dbea );
return nil ;};func (_ebbd *wordBag )makeRemovals ()map[int ]map[*textWord ]struct{}{_affa :=make (map[int ]map[*textWord ]struct{},len (_ebbd ._gecfd ));for _fbaf :=range _ebbd ._gecfd {_affa [_fbaf ]=make (map[*textWord ]struct{});};return _affa ;};func _eggf (_dead []structElement ,_faed map[int ][]*textLine ,_ddbfd _cb .PdfObject )[]*list {_dbfde :=[]*list {};
for _ ,_ccga :=range _dead {_gdcg :=_ccga ._ccbf ;_aeb :=int (_ccga ._bagd );_gcgc :=_ccga ._gffd ;_cceb :=[]*textLine {};_bacg :=[]*list {};_bbcdc :=_ccga ._ecgce ;_bdbb ,_cfac :=(_bbcdc .(*_cb .PdfObjectReference ));if !_cfac {_d .Log .Debug ("\u0066\u0061\u0069l\u0065\u0064\u0020\u006f\u0074\u0020\u0063\u0061\u0073\u0074\u0020\u0074\u006f\u0020\u002a\u0063\u006f\u0072\u0065\u002e\u0050\u0064\u0066\u004f\u0062\u006a\u0065\u0063\u0074R\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");
};if _aeb !=-1&&_bdbb !=nil {if _ffgea ,_cgbae :=_faed [_aeb ];_cgbae {if _aada ,_edee :=_ddbfd .(*_cb .PdfIndirectObject );_edee {_cfbb :=_aada .PdfObjectReference ;if _ga .DeepEqual (*_bdbb ,_cfbb ){_cceb =_ffgea ;};};};};if _gdcg !=nil {_bacg =_eggf (_gdcg ,_faed ,_ddbfd );
};_fcecc :=_dca (_cceb ,_gcgc ,_bacg );_dbfde =append (_dbfde ,_fcecc );};return _dbfde ;};func _agcb (_fgcf ,_egef bounded )float64 {return _eaff (_fgcf )-_eaff (_egef )};func (_begd rulingList )isActualGrid ()(rulingList ,bool ){_gfbbf ,_bdac :=_begd .augmentGrid ();
if !(len (_gfbbf )>=_agfef +1&&len (_bdac )>=_efga +1){if _cfef {_d .Log .Info ("\u0069s\u0041\u0063t\u0075\u0061\u006c\u0047r\u0069\u0064\u003a \u004e\u006f\u0074\u0020\u0061\u006c\u0069\u0067\u006eed\u002e\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u003c\u0020\u0025d\u0020\u0078 \u0025\u0064",len (_gfbbf ),len (_bdac ),_agfef +1,_efga +1);
};return nil ,false ;};if _cfef {_d .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075a\u006c\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0073\u0020\u003a\u0020\u0025t\u0020\u0026\u0020\u0025\u0074\u0020\u2192 \u0025\u0074",_begd ,len (_gfbbf )>=2,len (_bdac )>=2,len (_gfbbf )>=2&&len (_bdac )>=2);
for _eefg ,_bafbc :=range _begd {_deg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0076\u000a",_eefg ,_bafbc );};};if _dcbf {_aaaga ,_eaee :=_gfbbf [0],_gfbbf [len (_gfbbf )-1];_cagfg ,_gfbe :=_bdac [0],_bdac [len (_bdac )-1];if !(_abad (_aaaga ._gdge -_cagfg ._ggbc )&&_abad (_eaee ._gdge -_cagfg ._agbd )&&_abad (_cagfg ._gdge -_aaaga ._agbd )&&_abad (_gfbe ._gdge -_aaaga ._ggbc )){if _cfef {_d .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069d\u003a\u0020\u0020N\u006f\u0074 \u0061\u006c\u0069\u0067\u006e\u0065d\u002e\n\t\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0076\u0031\u003d\u0025\u0073\u000a\u0009\u0068\u0030\u003d\u0025\u0073\u000a\u0009\u0068\u0031\u003d\u0025\u0073",_aaaga ,_eaee ,_cagfg ,_gfbe );
};return nil ,false ;};}else {if !_gfbbf .aligned (){if _fafe {_d .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0076\u0065\u0072\u0074\u0073\u002e\u0020%\u0064",len (_gfbbf ));
};return nil ,false ;};if !_bdac .aligned (){if _cfef {_d .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0068\u006f\u0072\u007a\u0073\u002e\u0020%\u0064",len (_bdac ));
};return nil ,false ;};};_bdcc :=append (_gfbbf ,_bdac ...);return _bdcc ,true ;};

// BidiText represents a bidi text organized in its visual order
// with base direction of the text.
type BidiText struct{_bfe string ;_fa string ;};func _gdgb (_agee _bf .PdfRectangle )*ruling {return &ruling {_daea :_acegd ,_gdge :_agee .Urx ,_ggbc :_agee .Lly ,_agbd :_agee .Ury };};func (_eadc *ruling )intersects (_abaa *ruling )bool {_ddeaag :=(_eadc ._daea ==_acegd &&_abaa ._daea ==_faec )||(_abaa ._daea ==_acegd &&_eadc ._daea ==_faec );
_ecgg :=func (_abgcg ,_geca *ruling )bool {return _abgcg ._ggbc -_afa <=_geca ._gdge &&_geca ._gdge <=_abgcg ._agbd +_afa ;};_cfbdd :=_ecgg (_eadc ,_abaa );_gdgef :=_ecgg (_abaa ,_eadc );if _cfef {_deg .Printf ("\u0020\u0020\u0020\u0020\u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003a\u0020\u0020\u006fr\u0074\u0068\u006f\u0067\u006f\u006e\u0061l\u003d\u0025\u0074\u0020\u006f\u0031\u003d\u0025\u0074\u0020\u006f2\u003d\u0025\u0074\u0020\u2192\u0020\u0025\u0074\u000a"+"\u0020\u0020\u0020 \u0020\u0020\u0020\u0076\u003d\u0025\u0073\u000a"+" \u0020\u0020\u0020\u0020\u0020\u0077\u003d\u0025\u0073\u000a",_ddeaag ,_cfbdd ,_gdgef ,_ddeaag &&_cfbdd &&_gdgef ,_eadc ,_abaa );
};return _ddeaag &&_cfbdd &&_gdgef ;};

// String returns a human readable description of `vecs`.
func (_gbbdd rulingList )String ()string {if len (_gbbdd )==0{return "\u007b \u0045\u004d\u0050\u0054\u0059\u0020}";};_eede ,_fddg :=_gbbdd .vertsHorzs ();_ddfac :=len (_eede );_cagde :=len (_fddg );if _ddfac ==0||_cagde ==0{return _deg .Sprintf ("\u007b%\u0064\u0020\u0078\u0020\u0025\u0064}",_ddfac ,_cagde );
};_bgacb :=_bf .PdfRectangle {Llx :_eede [0]._gdge ,Urx :_eede [_ddfac -1]._gdge ,Lly :_fddg [_cagde -1]._gdge ,Ury :_fddg [0]._gdge };return _deg .Sprintf ("\u007b\u0025d\u0020\u0078\u0020%\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u007d",_ddfac ,_cagde ,_bgacb );
};func (_aaa *imageExtractContext )extractXObjectImage (_fec *_cb .PdfObjectName ,_ccc _gf .GraphicsState ,_affg *_bf .PdfPageResources )error {_ggd ,_ :=_affg .GetXObjectByName (*_fec );if _ggd ==nil {return nil ;};_cfb ,_gdc :=_aaa ._bag [_ggd ];if !_gdc {_bea ,_dgc :=_affg .GetXObjectImageByName (*_fec );
if _dgc !=nil {return _dgc ;};if _bea ==nil {return nil ;};_ggfa ,_dgc :=_bea .ToImage ();if _dgc !=nil {return _dgc ;};var _eecf _de .Image ;if _bea .Mask !=nil {if _eecf ,_dgc =_gffgf (_bea .Mask ,_bcc .Opaque );_dgc !=nil {_d .Log .Debug ("\u0057\u0041\u0052\u004e\u003a \u0063\u006f\u0075\u006c\u0064 \u006eo\u0074\u0020\u0067\u0065\u0074\u0020\u0065\u0078\u0070\u006c\u0069\u0063\u0069\u0074\u0020\u0069\u006d\u0061\u0067e\u0020\u006d\u0061\u0073\u006b\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e");
};}else if _bea .SMask !=nil {_eecf ,_dgc =_agdd (_bea .SMask ,_bcc .Opaque );if _dgc !=nil {_d .Log .Debug ("W\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0067\u0065\u0074\u0020\u0073\u006f\u0066\u0074\u0020\u0069\u006da\u0067e\u0020\u006d\u0061\u0073k\u002e\u0020O\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u002e");
};};if _eecf !=nil {_abd ,_daf :=_ggfa .ToGoImage ();if _daf !=nil {return _daf ;};_abd =_gcgb (_abd ,_eecf );switch _bea .ColorSpace .String (){case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0049n\u0064\u0065\u0078\u0065\u0064":_ggfa ,_daf =_bf .ImageHandling .NewGrayImageFromGoImage (_abd );
if _daf !=nil {return _daf ;};default:_ggfa ,_daf =_bf .ImageHandling .NewImageFromGoImage (_abd );if _daf !=nil {return _daf ;};};};_cfb =&cachedImage {_dff :_ggfa ,_dea :_bea .ColorSpace };_aaa ._bag [_ggd ]=_cfb ;};_dcc :=_cfb ._dff ;_bbe :=_cfb ._dea ;
_cac ,_deaa :=_bbe .ImageToRGB (*_dcc );if _deaa !=nil {return _deaa ;};_d .Log .Debug ("@\u0044\u006f\u0020\u0043\u0054\u004d\u003a\u0020\u0025\u0073",_ccc .CTM .String ());_febag :=ImageMark {Image :&_cac ,Width :_ccc .CTM .ScalingFactorX (),Height :_ccc .CTM .ScalingFactorY (),Angle :_ccc .CTM .Angle ()};
_febag .X ,_febag .Y =_ccc .CTM .Translation ();_aaa ._gcgg =append (_aaa ._gcgg ,_febag );_aaa ._aed ++;return nil ;};type structTreeRoot struct{_gbgb []structElement ;_feaee string ;};

// Options extractor options.
type Options struct{

// DisableDocumentTags specifies whether to use the document tags during list extraction.
DisableDocumentTags bool ;

// ApplyCropBox will extract page text based on page cropbox if set to `true`.
ApplyCropBox bool ;

// UseSimplerExtractionProcess will skip topological text ordering and table processing.
//
// NOTE: While normally the extra processing is beneficial, it can also lead to problems when it does not work.
// Thus it is a flag to allow the user to control this process.
//
// Skipping some extraction processes would also lead to the reduced processing time.
UseSimplerExtractionProcess bool ;

// IncludeAnnotations specifies whether to include annotations in the extraction process, default value is `false`.
IncludeAnnotations bool ;

// If enabled, this option prevents splitting of one line into several lines.
DisableMultiColumns bool ;};func (_ggfe compositeCell )split (_cfdce ,_gbcee []float64 )*textTable {_eegb :=len (_cfdce )+1;_dbda :=len (_gbcee )+1;if _cdgfc {_d .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0043\u0065l\u006c\u002e\u0073\u0070l\u0069\u0074\u003a\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a\u0009\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025\u0073\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073=\u0025\u0036\u002e\u0032\u0066\u000a\t\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d%\u0036\u002e\u0032\u0066",_dbda ,_eegb ,_ggfe ,_cfdce ,_gbcee );
_deg .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073\u000a",len (_ggfe .paraList ));for _bcfee ,_cegf :=range _ggfe .paraList {_deg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bcfee ,_cegf .String ());
};_deg .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",len (_ggfe .lines ()));for _bdgb ,_dgee :=range _ggfe .lines (){_deg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bdgb ,_dgee );};};_cfdce =_bcdab (_cfdce ,_ggfe .Ury ,_ggfe .Lly );
_gbcee =_bcdab (_gbcee ,_ggfe .Llx ,_ggfe .Urx );_aecbd :=make (map[uint64 ]*textPara ,_dbda *_eegb );_bffdb :=textTable {_ccfea :_dbda ,_gecff :_eegb ,_agcf :_aecbd };_begg :=_ggfe .paraList ;_bd .Slice (_begg ,func (_fbfg ,_fbdf int )bool {_ddeacd ,_fddd :=_begg [_fbfg ],_begg [_fbdf ];
_cefdd ,_abfc :=_ddeacd .Lly ,_fddd .Lly ;if _cefdd !=_abfc {return _cefdd < _abfc ;};return _ddeacd .Llx < _fddd .Llx ;});_ggfb :=make (map[uint64 ]_bf .PdfRectangle ,_dbda *_eegb );for _fbgd ,_egag :=range _cfdce [1:]{_fcede :=_cfdce [_fbgd ];for _egeg ,_abfg :=range _gbcee [1:]{_dadde :=_gbcee [_egeg ];
_ggfb [_dfdbcc (_egeg ,_fbgd )]=_bf .PdfRectangle {Llx :_dadde ,Urx :_abfg ,Lly :_egag ,Ury :_fcede };};};if _cdgfc {_d .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0043\u0065l\u006c\u002e\u0073\u0070\u006c\u0069\u0074\u003a\u0020\u0072e\u0063\u0074\u0073");
_deg .Printf ("\u0020\u0020\u0020\u0020");for _aggd :=0;_aggd < _dbda ;_aggd ++{_deg .Printf ("\u0025\u0033\u0030\u0064\u002c\u0020",_aggd );};_deg .Println ();for _cdae :=0;_cdae < _eegb ;_cdae ++{_deg .Printf ("\u0020\u0020\u0025\u0032\u0064\u003a",_cdae );
for _dfbd :=0;_dfbd < _dbda ;_dfbd ++{_deg .Printf ("\u00256\u002e\u0032\u0066\u002c\u0020",_ggfb [_dfdbcc (_dfbd ,_cdae )]);};_deg .Println ();};};_cagf :=func (_dbcba *textLine )(int ,int ){for _bcfac :=0;_bcfac < _eegb ;_bcfac ++{for _gcbeb :=0;_gcbeb < _dbda ;
_gcbeb ++{if _bdcge (_ggfb [_dfdbcc (_gcbeb ,_bcfac )],_dbcba .PdfRectangle ){return _gcbeb ,_bcfac ;};};};return -1,-1;};_eggea :=make (map[uint64 ][]*textLine ,_dbda *_eegb );for _ ,_bbecd :=range _begg .lines (){_acfg ,_cgcda :=_cagf (_bbecd );if _acfg < 0{continue ;
};_eggea [_dfdbcc (_acfg ,_cgcda )]=append (_eggea [_dfdbcc (_acfg ,_cgcda )],_bbecd );};for _cgdbf :=0;_cgdbf < len (_cfdce )-1;_cgdbf ++{_eabb :=_cfdce [_cgdbf ];_dcdfc :=_cfdce [_cgdbf +1];for _gadac :=0;_gadac < len (_gbcee )-1;_gadac ++{_abfda :=_gbcee [_gadac ];
_dfdbc :=_gbcee [_gadac +1];_ebfde :=_bf .PdfRectangle {Llx :_abfda ,Urx :_dfdbc ,Lly :_dcdfc ,Ury :_eabb };_aeac :=_eggea [_dfdbcc (_gadac ,_cgdbf )];if len (_aeac )==0{continue ;};_gcff :=_bada (_ebfde ,_aeac );_bffdb .put (_gadac ,_cgdbf ,_gcff );};
};return &_bffdb ;};var (_efede =map[rune ]string {0x0060:"\u0300",0x02CB:"\u0300",0x0027:"\u0301",0x00B4:"\u0301",0x02B9:"\u0301",0x02CA:"\u0301",0x005E:"\u0302",0x02C6:"\u0302",0x007E:"\u0303",0x02DC:"\u0303",0x00AF:"\u0304",0x02C9:"\u0304",0x02D8:"\u0306",0x02D9:"\u0307",0x00A8:"\u0308",0x00B0:"\u030a",0x02DA:"\u030a",0x02BA:"\u030b",0x02DD:"\u030b",0x02C7:"\u030c",0x02C8:"\u030d",0x0022:"\u030e",0x02BB:"\u0312",0x02BC:"\u0313",0x0486:"\u0313",0x055A:"\u0313",0x02BD:"\u0314",0x0485:"\u0314",0x0559:"\u0314",0x02D4:"\u031d",0x02D5:"\u031e",0x02D6:"\u031f",0x02D7:"\u0320",0x02B2:"\u0321",0x00B8:"\u0327",0x02CC:"\u0329",0x02B7:"\u032b",0x02CD:"\u0331",0x005F:"\u0332",0x204E:"\u0359"};
);type ruling struct{_daea rulingKind ;_dfbf markKind ;_bcc .Color ;_gdge float64 ;_ggbc float64 ;_agbd float64 ;_agcddd float64 ;};func (_cbdb *imageExtractContext )processOperand (_bace *_gf .ContentStreamOperation ,_ccf _gf .GraphicsState ,_gbbd *_bf .PdfPageResources )error {if _bace .Operand =="\u0042\u0049"&&len (_bace .Params )==1{_gcc ,_aba :=_bace .Params [0].(*_gf .ContentStreamInlineImage );
if !_aba {return nil ;};if _gccc ,_cdf :=_cb .GetBoolVal (_gcc .ImageMask );_cdf {if _gccc &&!_cbdb ._fgg .IncludeInlineStencilMasks {return nil ;};};return _cbdb .extractInlineImage (_gcc ,_ccf ,_gbbd );}else if _bace .Operand =="\u0044\u006f"&&len (_bace .Params )==1{_agf ,_fbf :=_cb .GetName (_bace .Params [0]);
if !_fbf {_d .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");return _efd ;};_ ,_adc :=_gbbd .GetXObjectByName (*_agf );switch _adc {case _bf .XObjectTypeImage :return _cbdb .extractXObjectImage (_agf ,_ccf ,_gbbd );case _bf .XObjectTypeForm :return _cbdb .extractFormImages (_agf ,_ccf ,_gbbd );
};}else if _cbdb ._ced &&(_bace .Operand =="\u0073\u0063\u006e"||_bace .Operand =="\u0053\u0043\u004e")&&len (_bace .Params )==1{_def ,_caa :=_cb .GetName (_bace .Params [0]);if !_caa {_d .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");
return _efd ;};_ecb ,_caa :=_gbbd .GetPatternByName (*_def );if !_caa {_d .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0050\u0061\u0074\u0074\u0065\u0072n\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");return nil ;};if _ecb .IsTiling (){_eec :=_ecb .GetAsTilingPattern ();
_aca ,_ebd :=_eec .GetContentStream ();if _ebd !=nil {return _ebd ;};_ebd =_cbdb .extractContentStreamImages (string (_aca ),_eec .Resources );if _ebd !=nil {return _ebd ;};};}else if (_bace .Operand =="\u0063\u0073"||_bace .Operand =="\u0043\u0053")&&len (_bace .Params )>=1{_cbdb ._ced =_bace .Params [0].String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e";
};return nil ;};

// Search searches the pages specified by `pages`.
func (_bgd *Editor )Search (pattern string ,pages []int )(map[int ]Match ,error ){_fda ,_ ,_fafa :=_bgd .getMatches (pattern ,pages );return _fda ,_fafa ;};func (_gaegf *textPara )writeText (_gdff _bc .Writer ){if _gaegf ._fcdge ==nil {_gaegf .writeCellText (_gdff );
return ;};for _begf :=0;_begf < _gaegf ._fcdge ._gecff ;_begf ++{for _ebg :=0;_ebg < _gaegf ._fcdge ._ccfea ;_ebg ++{_ddfe :=_gaegf ._fcdge .get (_ebg ,_begf );if _ddfe ==nil {_gdff .Write ([]byte ("\u0009"));}else {_dcca (_ddfe ._efff );_ddfe .writeCellText (_gdff );
};_gdff .Write ([]byte ("\u0020"));};if _begf < _gaegf ._fcdge ._gecff -1{_gdff .Write ([]byte ("\u000a"));};};};

// TextMarkArray is a collection of TextMarks.
type TextMarkArray struct{_agfc []TextMark };func _gcgb (_ddbb ,_cegcg _de .Image )_de .Image {_gdea ,_dgaed :=_cegcg .Bounds ().Size (),_ddbb .Bounds ().Size ();_cebcc ,_abgcc :=_gdea .X ,_gdea .Y ;if _dgaed .X > _cebcc {_cebcc =_dgaed .X ;};if _dgaed .Y > _abgcc {_abgcc =_dgaed .Y ;
};_ffea :=_de .Rect (0,0,_cebcc ,_abgcc );if _gdea .X !=_cebcc ||_gdea .Y !=_abgcc {_abfaa :=_de .NewRGBA (_ffea );_f .BiLinear .Scale (_abfaa ,_ffea ,_ddbb ,_cegcg .Bounds (),_f .Over ,nil );_cegcg =_abfaa ;};if _dgaed .X !=_cebcc ||_dgaed .Y !=_abgcc {_eacbb :=_de .NewRGBA (_ffea );
_f .BiLinear .Scale (_eacbb ,_ffea ,_ddbb ,_ddbb .Bounds (),_f .Over ,nil );_ddbb =_eacbb ;};_bgegf :=_de .NewRGBA (_ffea );_f .DrawMask (_bgegf ,_ffea ,_ddbb ,_de .Point {},_cegcg ,_de .Point {},_f .Over );return _bgegf ;};func _fdcc (_baee float64 )int {var _cafd int ;
if _baee >=0{_cafd =int (_baee /_eegd );}else {_cafd =int (_baee /_eegd )-1;};return _cafd ;};func (_cgdc rulingList )secMinMax ()(float64 ,float64 ){_dabda ,_fbca :=_cgdc [0]._ggbc ,_cgdc [0]._agbd ;for _ ,_cafbc :=range _cgdc [1:]{if _cafbc ._ggbc < _dabda {_dabda =_cafbc ._ggbc ;
};if _cafbc ._agbd > _fbca {_fbca =_cafbc ._agbd ;};};return _dabda ,_fbca ;};func (_gfabe gridTiling )complete ()bool {for _ ,_gceab :=range _gfabe ._efde {for _ ,_abfcf :=range _gceab {if !_abfcf .complete (){return false ;};};};return true ;};

// String returns a description of `l`.
func (_fgceg *textLine )String ()string {return _deg .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_fgceg ._eeage ,_fgceg .PdfRectangle ,_fgceg ._cecg ,_fgceg .text ());
};func _cdccd (_bfbfb []TextMark ,_bcaa *TextTable )[]TextMark {var _dgbb []TextMark ;for _ ,_fdcg :=range _bfbfb {_fdcg ._bbcf =true ;_fdcg ._bbce =_bcaa ;_dgbb =append (_dgbb ,_fdcg );};return _dgbb ;};func _egcb (_eaab []*textLine ,_gbbe map[float64 ][]*textLine ,_caac []float64 ,_fdad int ,_afaa ,_fadfe float64 )[]*list {_aafa :=[]*list {};
_faeb :=_fdad ;_fdad =_fdad +1;_affee :=_caac [_faeb ];_fbdg :=_gbbe [_affee ];_afee :=_bgga (_fbdg ,_fadfe ,_afaa );for _aeed ,_ebbb :=range _afee {var _cgggf float64 ;_abdg :=[]*list {};_febbg :=_ebbb ._eeage ;_gfbcg :=_fadfe ;if _aeed < len (_afee )-1{_gfbcg =_afee [_aeed +1]._eeage ;
};if _fdad < len (_caac ){_abdg =_egcb (_eaab ,_gbbe ,_caac ,_fdad ,_febbg ,_gfbcg );};_cgggf =_gfbcg ;if len (_abdg )> 0{_gaad :=_abdg [0];if len (_gaad ._gead )> 0{_cgggf =_gaad ._gead [0]._eeage ;};};_dbfge :=[]*textLine {_ebbb };_adcf :=_cabeb (_ebbb ,_eaab ,_caac ,_febbg ,_cgggf );
_dbfge =append (_dbfge ,_adcf ...);_decf :=_dca (_dbfge ,"\u0062\u0075\u006c\u006c\u0065\u0074",_abdg );_decf ._gcbe =_fdea (_dbfge ,"");_aafa =append (_aafa ,_decf );};return _aafa ;};func _adcff (_aded ,_acfgf _ed .Point ,_ddda _bcc .Color )(*ruling ,bool ){_gceb :=lineRuling {_bffg :_aded ,_cabeba :_acfgf ,_ceece :_fffdb (_aded ,_acfgf ),Color :_ddda };
if _gceb ._ceece ==_acdg {return nil ,false ;};return _gceb .asRuling ();};func (_bgcfc rulingList )tidied (_befd string )rulingList {_ecacf :=_bgcfc .removeDuplicates ();_ecacf .log ("\u0075n\u0069\u0071\u0075\u0065\u0073");_bcgdc :=_ecacf .snapToGroups ();
if _bcgdc ==nil {return nil ;};_bcgdc .sort ();if _cfef {_d .Log .Info ("\u0074\u0069\u0064i\u0065\u0064\u003a\u0020\u0025\u0071\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u0075\u006e\u0069\u0071\u0075\u0065\u0073\u003d\u0025\u0064\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0064\u003d\u0025\u0064",_befd ,len (_bgcfc ),len (_ecacf ),len (_bcgdc ));
};_bcgdc .log ("\u0063o\u0061\u006c\u0065\u0073\u0063\u0065d");return _bcgdc ;};func _dgec (_bdbbde map[int ]intSet )[]int {_egegb :=make ([]int ,0,len (_bdbbde ));for _dace :=range _bdbbde {_egegb =append (_egegb ,_dace );};_bd .Ints (_egegb );return _egegb ;
};func (_aagbg *subpath )makeRectRuling (_acge _bcc .Color )(*ruling ,bool ){if _bfdca {_d .Log .Info ("\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0070\u0061\u0074\u0068\u003d\u0025\u0076",_aagbg );};_cbfbbb :=_aagbg ._egdag [:4];
_bbbbf :=make (map[int ]rulingKind ,len (_cbfbbb ));for _deecf ,_egagf :=range _cbfbbb {_badb :=_aagbg ._egdag [(_deecf +1)%4];_bbbbf [_deecf ]=_fedde (_egagf ,_badb );if _bfdca {_deg .Printf ("\u0025\u0034\u0064: \u0025\u0073\u0020\u003d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066",_deecf ,_bbbbf [_deecf ],_egagf ,_badb );
};};if _bfdca {_deg .Printf ("\u0020\u0020\u0020\u006b\u0069\u006e\u0064\u0073\u003d\u0025\u002b\u0076\u000a",_bbbbf );};var _dcgga ,_dcgb []int ;for _bagg ,_dced :=range _bbbbf {switch _dced {case _faec :_dcgb =append (_dcgb ,_bagg );case _acegd :_dcgga =append (_dcgga ,_bagg );
};};if _bfdca {_deg .Printf ("\u0020\u0020 \u0068\u006f\u0072z\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_dcgb ),_dcgb );_deg .Printf ("\u0020\u0020 \u0076\u0065\u0072t\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_dcgga ),_dcgga );
};_fbgf :=(len (_dcgb )==2&&len (_dcgga )==2)||(len (_dcgb )==2&&len (_dcgga )==0&&_beeg (_cbfbbb [_dcgb [0]],_cbfbbb [_dcgb [1]]))||(len (_dcgga )==2&&len (_dcgb )==0&&_adeg (_cbfbbb [_dcgga [0]],_cbfbbb [_dcgga [1]]));if _bfdca {_deg .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_dcgb ),len (_dcgga ),_fbgf );
};if !_fbgf {if _bfdca {_d .Log .Error ("\u0021!\u006d\u0061\u006b\u0065R\u0065\u0063\u0074\u0052\u0075l\u0069n\u0067:\u0020\u0070\u0061\u0074\u0068\u003d\u0025v",_aagbg );_deg .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_dcgb ),len (_dcgga ),_fbgf );
};return &ruling {},false ;};if len (_dcgga )==0{for _cggeea ,_cadaa :=range _bbbbf {if _cadaa !=_faec {_dcgga =append (_dcgga ,_cggeea );};};};if len (_dcgb )==0{for _abbad ,_adea :=range _bbbbf {if _adea !=_acegd {_dcgb =append (_dcgb ,_abbad );};};};
if _bfdca {_d .Log .Info ("\u006da\u006b\u0065R\u0065\u0063\u0074\u0052u\u006c\u0069\u006eg\u003a\u0020\u0068\u006f\u0072\u007a\u0073\u003d\u0025d \u0076\u0065\u0072t\u0073\u003d%\u0064\u0020\u0070\u006f\u0069\u006et\u0073\u003d%\u0064\u000a"+"\u0009\u0020\u0068o\u0072\u007a\u0073\u003d\u0025\u002b\u0076\u000a"+"\u0009\u0020\u0076e\u0072\u0074\u0073\u003d\u0025\u002b\u0076\u000a"+"\t\u0070\u006f\u0069\u006e\u0074\u0073\u003d\u0025\u002b\u0076",len (_dcgb ),len (_dcgga ),len (_cbfbbb ),_dcgb ,_dcgga ,_cbfbbb );
};var _bfeg ,_agdg ,_fgfd ,_bgcfa _ed .Point ;if _cbfbbb [_dcgb [0]].Y > _cbfbbb [_dcgb [1]].Y {_fgfd ,_bgcfa =_cbfbbb [_dcgb [0]],_cbfbbb [_dcgb [1]];}else {_fgfd ,_bgcfa =_cbfbbb [_dcgb [1]],_cbfbbb [_dcgb [0]];};if _cbfbbb [_dcgga [0]].X > _cbfbbb [_dcgga [1]].X {_bfeg ,_agdg =_cbfbbb [_dcgga [0]],_cbfbbb [_dcgga [1]];
}else {_bfeg ,_agdg =_cbfbbb [_dcgga [1]],_cbfbbb [_dcgga [0]];};_gacea :=_bf .PdfRectangle {Llx :_bfeg .X ,Urx :_agdg .X ,Lly :_bgcfa .Y ,Ury :_fgfd .Y };if _gacea .Llx > _gacea .Urx {_gacea .Llx ,_gacea .Urx =_gacea .Urx ,_gacea .Llx ;};if _gacea .Lly > _gacea .Ury {_gacea .Lly ,_gacea .Ury =_gacea .Ury ,_gacea .Lly ;
};_cedb :=rectRuling {PdfRectangle :_gacea ,_deba :_deaf (_gacea ),Color :_acge };if _cedb ._deba ==_acdg {if _bfdca {_d .Log .Error ("\u006da\u006b\u0065\u0052\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006eg\u003a\u0020\u006b\u0069\u006e\u0064\u003d\u006e\u0069\u006c");
};return nil ,false ;};_cddc ,_bagb :=_cedb .asRuling ();if !_bagb {if _bfdca {_d .Log .Error ("\u006da\u006b\u0065\u0052\u0065c\u0074\u0052\u0075\u006c\u0069n\u0067:\u0020!\u0069\u0073\u0052\u0075\u006c\u0069\u006eg");};return nil ,false ;};if _cfef {_deg .Printf ("\u0020\u0020\u0020\u0072\u003d\u0025\u0073\u000a",_cddc .String ());
};return _cddc ,true ;};func _caef (_abebg map[int ][]float64 ){if len (_abebg )<=1{return ;};_fgfgg :=_agfb (_abebg );if _cdgfc {_d .Log .Info ("\u0066i\u0078C\u0065\u006c\u006c\u0073\u003a \u006b\u0065y\u0073\u003d\u0025\u002b\u0076",_fgfgg );};var _agggf ,_cgce int ;
for _agggf ,_cgce =range _fgfgg {if _abebg [_cgce ]!=nil {break ;};};for _dggcg ,_edecc :=range _fgfgg [_agggf :]{_bbge :=_abebg [_edecc ];if _bbge ==nil {continue ;};if _cdgfc {_deg .Printf ("\u0025\u0034\u0064\u003a\u0020\u006b\u0030\u003d\u0025\u0064\u0020\u006b1\u003d\u0025\u0064\u000a",_agggf +_dggcg ,_cgce ,_edecc );
};_ecdda :=_abebg [_edecc ];if _ecdda [len (_ecdda )-1]> _bbge [0]{_ecdda [len (_ecdda )-1]=_bbge [0];_abebg [_cgce ]=_ecdda ;};_cgce =_edecc ;};};var _cacgbc =map[markKind ]string {_efgg :"\u0073\u0074\u0072\u006f\u006b\u0065",_dgea :"\u0066\u0069\u006c\u006c",_caeegd :"\u0061u\u0067\u006d\u0065\u006e\u0074"};
func (_dbee paraList )lines ()[]*textLine {var _egfb []*textLine ;for _ ,_dggc :=range _dbee {_egfb =append (_egfb ,_dggc ._efff ...);};return _egfb ;};var _cgdaf string ="\u005e\u005b\u0061\u002d\u007a\u0041\u002dZ\u005d\u0028\u005c)\u007c\u005c\u002e)\u007c\u005e[\u005c\u0064\u005d\u002b\u0028\u005c)\u007c\\.\u0029\u007c\u005e\u005c\u0028\u005b\u0061\u002d\u007a\u0041\u002d\u005a\u005d\u005c\u0029\u007c\u005e\u005c\u0028\u005b\u005c\u0064\u005d\u002b\u005c\u0029";
func _cffc (_aage ,_agef float64 )bool {return _aa .Abs (_aage -_agef )<=_afa };func (_cgcb *textTable )newTablePara ()*textPara {_gbgg :=_cgcb .computeBbox ();_efdc :=&textPara {PdfRectangle :_gbgg ,_ecddc :_gbgg ,_fcdge :_cgcb };if _cdgfc {_d .Log .Info ("\u006e\u0065w\u0054\u0061\u0062l\u0065\u0050\u0061\u0072\u0061\u003a\u0020\u0025\u0073",_efdc );
};return _efdc ;};func (_gfbc *shapesState )stroke (_efae *[]pathSection ){_egdeb :=pathSection {_cgdd :_gfbc ._eccd ,Color :_gfbc ._ebaf .getStrokeColor ()};*_efae =append (*_efae ,_egdeb );if _cfef {_deg .Printf ("\u0020 \u0020\u0020S\u0054\u0052\u004fK\u0045\u003a\u0020\u0025\u0064\u0020\u0073t\u0072\u006f\u006b\u0065\u0073\u0020s\u0073\u003d\u0025\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d%\u002b\u0076\u0020\u0025\u0036\u002e\u0032\u0066\u000a",len (*_efae ),_gfbc ,_gfbc ._ebaf .getStrokeColor (),_egdeb .bbox ());
if _cabe {for _cafg ,_aafe :=range _gfbc ._eccd {_deg .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_cafg ,_aafe );if _cafg ==10{break ;};};};};};func (_ecee *ruling )equals (_dbgg *ruling )bool {return _ecee ._daea ==_dbgg ._daea &&_cffc (_ecee ._gdge ,_dbgg ._gdge )&&_cffc (_ecee ._ggbc ,_dbgg ._ggbc )&&_cffc (_ecee ._agbd ,_dbgg ._agbd );
};type imageExtractContext struct{_gcgg []ImageMark ;_cdc int ;_aed int ;_gbce int ;_bag map[*_cb .PdfObjectStream ]*cachedImage ;_fgg *ImageExtractOptions ;_ced bool ;};func (_bebaa paraList )computeEBBoxes (){if _fafbe {_d .Log .Info ("\u0063o\u006dp\u0075\u0074\u0065\u0045\u0042\u0042\u006f\u0078\u0065\u0073\u003a");
};for _ ,_eagd :=range _bebaa {_eagd ._ecddc =_eagd .PdfRectangle ;};_bdbbd :=_bebaa .yNeighbours (0);for _ffff ,_ccgb :=range _bebaa {_gadba :=_ccgb ._ecddc ;_efdg ,_cgbac :=-1.0e9,+1.0e9;for _ ,_fgdgg :=range _bdbbd [_ccgb ]{_facd :=_bebaa [_fgdgg ]._ecddc ;
if _facd .Urx < _gadba .Llx {_efdg =_aa .Max (_efdg ,_facd .Urx );}else if _gadba .Urx < _facd .Llx {_cgbac =_aa .Min (_cgbac ,_facd .Llx );};};for _ecaec ,_dgafc :=range _bebaa {_abfa :=_dgafc ._ecddc ;if _ffff ==_ecaec ||_abfa .Ury > _gadba .Lly {continue ;
};if _efdg <=_abfa .Llx &&_abfa .Llx < _gadba .Llx {_gadba .Llx =_abfa .Llx ;}else if _abfa .Urx <=_cgbac &&_gadba .Urx < _abfa .Urx {_gadba .Urx =_abfa .Urx ;};};if _fafbe {_deg .Printf ("\u0025\u0034\u0064\u003a %\u0036\u002e\u0032\u0066\u2192\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0071\u000a",_ffff ,_ccgb ._ecddc ,_gadba ,_bdfde (_ccgb .text (),50));
};_ccgb ._ecddc =_gadba ;};if _cgbfge {for _ ,_cacge :=range _bebaa {_cacge .PdfRectangle =_cacge ._ecddc ;};};};func (_ecbb *wordBag )applyRemovals (_bcccd map[int ]map[*textWord ]struct{}){for _egbdd ,_bdbeg :=range _bcccd {if len (_bdbeg )==0{continue ;
};_fdbg :=_ecbb ._gecfd [_egbdd ];_bebe :=len (_fdbg )-len (_bdbeg );if _bebe ==0{delete (_ecbb ._gecfd ,_egbdd );continue ;};_abcc :=make ([]*textWord ,_bebe );_bgcaa :=0;for _ ,_cccg :=range _fdbg {if _ ,_bgag :=_bdbeg [_cccg ];!_bgag {_abcc [_bgcaa ]=_cccg ;
_bgcaa ++;};};_ecbb ._gecfd [_egbdd ]=_abcc ;};};func (_eefgb *textWord )addDiacritic (_ggdb string ){_dabgf :=_eefgb ._bdaeb [len (_eefgb ._bdaeb )-1];_dabgf ._dbec +=_ggdb ;_dabgf ._dbec =_b .NFKC .String (_dabgf ._dbec );};

// String returns a description of `v`.
func (_edeb *ruling )String ()string {if _edeb ._daea ==_acdg {return "\u004e\u004f\u0054\u0020\u0052\u0055\u004c\u0049\u004e\u0047";};_ceab ,_acebf :="\u0078","\u0079";if _edeb ._daea ==_faec {_ceab ,_acebf ="\u0079","\u0078";};_abdga :="";if _edeb ._agcddd !=0.0{_abdga =_deg .Sprintf (" \u0077\u0069\u0064\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_edeb ._agcddd );
};return _deg .Sprintf ("\u0025\u00310\u0073\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0020\u0025\u0076\u0025\u0073",_edeb ._daea ,_ceab ,_edeb ._gdge ,_acebf ,_edeb ._ggbc ,_edeb ._agbd ,_edeb ._agbd -_edeb ._ggbc ,_edeb ._dfbf ,_edeb .Color ,_abdga );
};func (_ebef rulingList )sortStrict (){_bd .Slice (_ebef ,func (_aaaca ,_edcg int )bool {_caceg ,_gggb :=_ebef [_aaaca ],_ebef [_edcg ];_dcda ,_eegag :=_caceg ._daea ,_gggb ._daea ;if _dcda !=_eegag {return _dcda > _eegag ;};_dcbcb ,_gabc :=_caceg ._gdge ,_gggb ._gdge ;
if !_bgfbd (_dcbcb -_gabc ){return _dcbcb < _gabc ;};_dcbcb ,_gabc =_caceg ._ggbc ,_gggb ._ggbc ;if _dcbcb !=_gabc {return _dcbcb < _gabc ;};return _caceg ._agbd < _gggb ._agbd ;});};func (_aabg *textTable )logComposite (_aceddg string ){if !_cdgfc {return ;
};_d .Log .Info ("\u007e~\u007eP\u0061\u0072\u0061\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_aabg ._ccfea ,_aabg ._gecff ,_aceddg );_deg .Printf ("\u0025\u0035\u0073 \u007c","");for _bfdbf :=0;_bfdbf < _aabg ._ccfea ;_bfdbf ++{_deg .Printf ("\u0025\u0033\u0064 \u007c",_bfdbf );
};_deg .Println ("");_deg .Printf ("\u0025\u0035\u0073 \u002b","");for _bbecdd :=0;_bbecdd < _aabg ._ccfea ;_bbecdd ++{_deg .Printf ("\u0025\u0033\u0073 \u002b","\u002d\u002d\u002d");};_deg .Println ("");for _dfafd :=0;_dfafd < _aabg ._gecff ;_dfafd ++{_deg .Printf ("\u0025\u0035\u0064 \u007c",_dfafd );
for _ccdae :=0;_ccdae < _aabg ._ccfea ;_ccdae ++{_aacb ,_ :=_aabg ._ebcde [_dfdbcc (_ccdae ,_dfafd )].parasBBox ();_deg .Printf ("\u0025\u0033\u0064 \u007c",len (_aacb ));};_deg .Println ("");};_d .Log .Info ("\u007e~\u007eT\u0065\u0078\u0074\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_aabg ._ccfea ,_aabg ._gecff ,_aceddg );
_deg .Printf ("\u0025\u0035\u0073 \u007c","");for _gebbc :=0;_gebbc < _aabg ._ccfea ;_gebbc ++{_deg .Printf ("\u0025\u0031\u0032\u0064\u0020\u007c",_gebbc );};_deg .Println ("");_deg .Printf ("\u0025\u0035\u0073 \u002b","");for _dcdd :=0;_dcdd < _aabg ._ccfea ;
_dcdd ++{_deg .Print ("\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d-\u002d\u002d\u002d\u002b");};_deg .Println ("");for _ebcab :=0;_ebcab < _aabg ._gecff ;_ebcab ++{_deg .Printf ("\u0025\u0035\u0064 \u007c",_ebcab );for _fedgc :=0;_fedgc < _aabg ._ccfea ;
_fedgc ++{_dfbdg ,_ :=_aabg ._ebcde [_dfdbcc (_fedgc ,_ebcab )].parasBBox ();_fabea :="";_ebbga :=_dfbdg .merge ();if _ebbga !=nil {_fabea =_ebbga .text ();};_fabea =_deg .Sprintf ("\u0025\u0071",_bdfde (_fabea ,12));_fabea =_fabea [1:len (_fabea )-1];
_deg .Printf ("\u0025\u0031\u0032\u0073\u0020\u007c",_fabea );};_deg .Println ("");};};func _fcfa (_efbcb []*textMark ,_cbcg _bf .PdfRectangle )[]*textWord {var _cfdca []*textWord ;var _geaga *textWord ;if _befg {_d .Log .Info ("\u006d\u0061\u006beT\u0065\u0078\u0074\u0057\u006f\u0072\u0064\u0073\u003a\u0020\u0025\u0064\u0020\u006d\u0061\u0072\u006b\u0073",len (_efbcb ));
};_edbb :=func (){if _geaga !=nil {_fefc :=_geaga .computeText ();if !_eacce (_fefc ){_geaga ._dfaee =_fefc ;_cfdca =append (_cfdca ,_geaga );if _befg {_d .Log .Info ("\u0061\u0064\u0064Ne\u0077\u0057\u006f\u0072\u0064\u003a\u0020\u0025\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",len (_cfdca )-1,_geaga .String ());
for _badcg ,_edbbg :=range _geaga ._bdaeb {_deg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_badcg ,_edbbg .String ());};};};_geaga =nil ;};};for _ ,_addg :=range _efbcb {if _ebed &&_geaga !=nil &&len (_geaga ._bdaeb )> 0{_gagae :=_geaga ._bdaeb [len (_geaga ._bdaeb )-1];
_fggf ,_bdec :=_fbdaa (_addg ._dbec );_acdeae ,_bgea :=_fbdaa (_gagae ._dbec );if _bdec &&!_bgea &&_gagae .inDiacriticArea (_addg ){_geaga .addDiacritic (_fggf );continue ;};if _bgea &&!_bdec &&_addg .inDiacriticArea (_gagae ){_geaga ._bdaeb =_geaga ._bdaeb [:len (_geaga ._bdaeb )-1];
_geaga .appendMark (_addg ,_cbcg );_geaga .addDiacritic (_acdeae );continue ;};};_aagbfb :=_eacce (_addg ._dbec );if _aagbfb {_edbb ();continue ;};if _geaga ==nil &&!_aagbfb {_geaga =_cdde ([]*textMark {_addg },_cbcg );continue ;};_dgcf :=_geaga ._gbaff ;
_fcfg :=_aa .Abs (_cadc (_cbcg ,_addg )-_geaga ._afefd )/_dgcf ;_adedd :=_febe (_addg ,_geaga )/_dgcf ;if _adedd >=_cgbg ||!(-_fgee <=_adedd &&_fcfg <=_abcf ){_edbb ();_geaga =_cdde ([]*textMark {_addg },_cbcg );continue ;};_geaga .appendMark (_addg ,_cbcg );
};_edbb ();return _cfdca ;};

// String returns a human readable description of `ss`.
func (_cdfe *shapesState )String ()string {return _deg .Sprintf ("\u007b\u0025\u0064\u0020su\u0062\u0070\u0061\u0074\u0068\u0073\u0020\u0066\u0072\u0065\u0073\u0068\u003d\u0025t\u007d",len (_cdfe ._eccd ),_cdfe ._cfff );};func _afde (_ffedf string )string {_feaaa :=[]rune (_ffedf );
return string (_feaaa [:len (_feaaa )-1])};func _gbdcg (_eegaf []rulingList )(rulingList ,rulingList ){var _gdeee rulingList ;for _ ,_eegab :=range _eegaf {_gdeee =append (_gdeee ,_eegab ...);};return _gdeee .vertsHorzs ();};type rulingKind int ;type compositeCell struct{_bf .PdfRectangle ;
paraList ;};func (_dfeef rulingList )toGrids ()[]rulingList {if _cfef {_d .Log .Info ("t\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0025\u0073",_dfeef );};_befdg :=_dfeef .intersections ();if _cfef {_d .Log .Info ("\u0074\u006f\u0047r\u0069\u0064\u0073\u003a \u0076\u0065\u0063\u0073\u003d\u0025\u0064 \u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003d\u0025\u0064\u0020",len (_dfeef ),len (_befdg ));
for _ ,_aeeb :=range _dgec (_befdg ){_deg .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_aeeb ,_befdg [_aeeb ]);};};_eceg :=make (map[int ]intSet ,len (_dfeef ));for _cacf :=range _dfeef {_adeae :=_dfeef .connections (_befdg ,_cacf );if len (_adeae )> 0{_eceg [_cacf ]=_adeae ;
};};if _cfef {_d .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0063\u006fn\u006e\u0065\u0063\u0074s=\u0025\u0064",len (_eceg ));for _ ,_eacg :=range _dgec (_eceg ){_deg .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_eacg ,_eceg [_eacg ]);
};};_adeb :=_bfae (len (_dfeef ),func (_edgd ,_ffcf int )bool {_abgc ,_cabf :=len (_eceg [_edgd ]),len (_eceg [_ffcf ]);if _abgc !=_cabf {return _abgc > _cabf ;};return _dfeef .comp (_edgd ,_ffcf );});if _cfef {_d .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u006f\u0072d\u0065\u0072\u0069\u006eg=\u0025\u0076",_adeb );
};_faffb :=[][]int {{_adeb [0]}};_dgbca :for _ ,_feabg :=range _adeb [1:]{for _fcacc ,_dfaf :=range _faffb {for _ ,_ebbda :=range _dfaf {if _eceg [_ebbda ].has (_feabg ){_faffb [_fcacc ]=append (_dfaf ,_feabg );continue _dgbca ;};};};_faffb =append (_faffb ,[]int {_feabg });
};if _cfef {_d .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020i\u0067\u0072i\u0064\u0073\u003d\u0025\u0076",_faffb );};_bd .SliceStable (_faffb ,func (_aeecg ,_gcef int )bool {return len (_faffb [_aeecg ])> len (_faffb [_gcef ])});for _ ,_fafbc :=range _faffb {_bd .Slice (_fafbc ,func (_fcbce ,_caggc int )bool {return _dfeef .comp (_fafbc [_fcbce ],_fafbc [_caggc ])});
};_cddd :=make ([]rulingList ,len (_faffb ));for _febbd ,_ddcf :=range _faffb {_fbbc :=make (rulingList ,len (_ddcf ));for _fdgaa ,_aedbf :=range _ddcf {_fbbc [_fdgaa ]=_dfeef [_aedbf ];};_cddd [_febbd ]=_fbbc ;};if _cfef {_d .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020g\u0072\u0069d\u0073\u003d\u0025\u002b\u0076",_cddd );
};var _eabacd []rulingList ;for _ ,_cafga :=range _cddd {if _bgeg ,_baded :=_cafga .isActualGrid ();_baded {_cafga =_bgeg ;_cafga =_cafga .snapToGroups ();_eabacd =append (_eabacd ,_cafga );};};if _cfef {_bgec ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0061\u0063t\u0075\u0061\u006c\u0047ri\u0064\u0073",_eabacd );
_d .Log .Info ("\u0074\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0067\u0072\u0069\u0064\u0073\u003d%\u0064 \u0061\u0063\u0074\u0075\u0061\u006c\u0047\u0072\u0069\u0064\u0073\u003d\u0025\u0064",len (_cddd ),len (_eabacd ));};return _eabacd ;};

// String returns a description of `b`.
func (_dbcb *wordBag )String ()string {var _cfcb []string ;for _ ,_cgbfg :=range _dbcb .depthIndexes (){_fcff :=_dbcb ._gecfd [_cgbfg ];for _ ,_fagae :=range _fcff {_cfcb =append (_cfcb ,_fagae ._dfaee );};};return _deg .Sprintf ("\u0025.\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065=\u0025\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0025\u0071",_dbcb .PdfRectangle ,_dbcb ._bcf ,len (_cfcb ),_cfcb );
};func (_ccbd *ruling )encloses (_eccce ,_dagag float64 )bool {return _ccbd ._ggbc -_afa <=_eccce &&_dagag <=_ccbd ._agbd +_afa ;};func (_abae *textObject )getFontDict (_fafb string )(_eafd _cb .PdfObject ,_gdba error ){_eagb :=_abae ._aaaa ;if _eagb ==nil {_d .Log .Debug ("g\u0065\u0074\u0046\u006f\u006e\u0074D\u0069\u0063\u0074\u002e\u0020\u004eo\u0020\u0072\u0065\u0073\u006f\u0075\u0072c\u0065\u0073\u002e\u0020\u006e\u0061\u006d\u0065\u003d\u0025#\u0071",_fafb );
return nil ,nil ;};_eafd ,_gfdc :=_eagb .GetFontByName (_cb .PdfObjectName (_fafb ));if !_gfdc {_d .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0067\u0065t\u0046\u006f\u006et\u0044\u0069\u0063\u0074\u003a\u0020\u0046\u006f\u006et \u006e\u006f\u0074 \u0066\u006fu\u006e\u0064\u003a\u0020\u006e\u0061m\u0065\u003d%\u0023\u0071",_fafb );
return nil ,_bfb .New ("f\u006f\u006e\u0074\u0020no\u0074 \u0069\u006e\u0020\u0072\u0065s\u006f\u0075\u0072\u0063\u0065\u0073");};return _eafd ,nil ;};type stateStack []*textState ;func (_dfgd paraList )list ()[]*list {var _fgdb []*textLine ;var _feddf []*textLine ;
for _ ,_agfea :=range _dfgd {_afffd :=_agfea .getListLines ();_fgdb =append (_fgdb ,_afffd ...);_feddf =append (_feddf ,_agfea ._efff ...);};_aaag :=_agbe (_fgdb );_ebag :=_agbea (_feddf ,_aaag );return _ebag ;};var (_efd =_bfb .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");
_be =_bfb .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););func _bcdab (_agag []float64 ,_gbcff ,_gade float64 )[]float64 {_eaecd ,_faba :=_gbcff ,_gade ;if _faba < _eaecd {_eaecd ,_faba =_faba ,_eaecd ;
};_agcfb :=make ([]float64 ,0,len (_agag )+2);_agcfb =append (_agcfb ,_gbcff );for _ ,_fdgff :=range _agag {if _fdgff <=_eaecd {continue ;}else if _fdgff >=_faba {break ;};_agcfb =append (_agcfb ,_fdgff );};_agcfb =append (_agcfb ,_gade );return _agcfb ;
};func (_eaag *shapesState )establishSubpath ()*subpath {_ccfc ,_fdbe :=_eaag .lastpointEstablished ();if !_fdbe {_eaag ._eccd =append (_eaag ._eccd ,_effg (_ccfc ));};if len (_eaag ._eccd )==0{return nil ;};_eaag ._cfff =false ;return _eaag ._eccd [len (_eaag ._eccd )-1];
};func (_bgcf *textObject )showText (_egad _cb .PdfObject ,_fdf []byte ,_bfde int ,_adcb string )error {return _bgcf .renderText (_egad ,_fdf ,_bfde ,_adcb );};func (_dgbad paraList )merge ()*textPara {_d .Log .Trace ("\u006d\u0065\u0072\u0067\u0065:\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_dgbad ));
if len (_dgbad )==0{return nil ;};_dgbad .sortReadingOrder ();_dbbb :=_dgbad [0].PdfRectangle ;_fead :=_dgbad [0]._efff ;for _ ,_ccgcb :=range _dgbad [1:]{_dbbb =_caddg (_dbbb ,_ccgcb .PdfRectangle );_fead =append (_fead ,_ccgcb ._efff ...);};return _bada (_dbbb ,_fead );
};func (_eagbd rulingList )removeDuplicates ()rulingList {if len (_eagbd )==0{return nil ;};_eagbd .sort ();_eagga :=rulingList {_eagbd [0]};for _ ,_gbfb :=range _eagbd [1:]{if _gbfb .equals (_eagga [len (_eagga )-1]){continue ;};_eagga =append (_eagga ,_gbfb );
};return _eagga ;};func _agdd (_ggcf _cb .PdfObject ,_bfddb _bcc .Color )(_de .Image ,error ){_gbgag ,_dbbcd :=_cb .GetStream (_ggcf );if !_dbbcd {return nil ,nil ;};_cafff ,_cedbb :=_bf .NewXObjectImageFromStream (_gbgag );if _cedbb !=nil {return nil ,_cedbb ;
};_fgbfea ,_cedbb :=_cafff .ToImage ();if _cedbb !=nil {return nil ,_cedbb ;};return _ggeb (_fgbfea ,_bfddb ),nil ;};func (_ddae rulingList )toTilings ()(rulingList ,[]gridTiling ){_ddae .log ("\u0074o\u0054\u0069\u006c\u0069\u006e\u0067s");if len (_ddae )==0{return nil ,nil ;
};_ddae =_ddae .tidied ("\u0061\u006c\u006c");_ddae .log ("\u0074\u0069\u0064\u0069\u0065\u0064");_efcc :=_ddae .toGrids ();_gggd :=make ([]gridTiling ,len (_efcc ));for _efbg ,_abeb :=range _efcc {_gggd [_efbg ]=_abeb .asTiling ();};return _ddae ,_gggd ;
};func (_cefa rulingList )snapToGroupsDirection ()rulingList {_cefa .sortStrict ();_ddbde :=make (map[*ruling ]rulingList ,len (_cefa ));_cbbe :=_cefa [0];_cbbdg :=func (_dgebf *ruling ){_cbbe =_dgebf ;_ddbde [_cbbe ]=rulingList {_dgebf }};_cbbdg (_cefa [0]);
for _ ,_egcdb :=range _cefa [1:]{if _egcdb ._gdge < _cbbe ._gdge -_caeg {_d .Log .Error ("\u0073\u006e\u0061\u0070T\u006f\u0047\u0072\u006f\u0075\u0070\u0073\u0044\u0069r\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0057\u0072\u006f\u006e\u0067\u0020\u0070\u0072\u0069\u006da\u0072\u0079\u0020\u006f\u0072d\u0065\u0072\u002e\u000a\u0009\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0020\u0076\u003d\u0025\u0073",_cbbe ,_egcdb );
};if _egcdb ._gdge > _cbbe ._gdge +_gece {_cbbdg (_egcdb );}else {_ddbde [_cbbe ]=append (_ddbde [_cbbe ],_egcdb );};};_fbda :=make (map[*ruling ]float64 ,len (_ddbde ));_debcda :=make (map[*ruling ]*ruling ,len (_cefa ));for _ddfed ,_dffea :=range _ddbde {_fbda [_ddfed ]=_dffea .mergePrimary ();
for _ ,_bgfc :=range _dffea {_debcda [_bgfc ]=_ddfed ;};};for _ ,_facaa :=range _cefa {_facaa ._gdge =_fbda [_debcda [_facaa ]];};_ebddaf :=make (rulingList ,0,len (_cefa ));for _ ,_bbcde :=range _ddbde {_afgaf :=_bbcde .splitSec ();for _gdccc ,_dgeg :=range _afgaf {_cgbd :=_dgeg .merge ();
if len (_ebddaf )> 0{_cdbec :=_ebddaf [len (_ebddaf )-1];if _cdbec .alignsPrimary (_cgbd )&&_cdbec .alignsSec (_cgbd ){_d .Log .Error ("\u0073\u006e\u0061\u0070\u0054\u006fG\u0072\u006f\u0075\u0070\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0044\u0075\u0070\u006ci\u0063\u0061\u0074\u0065\u0020\u0069\u003d\u0025\u0064\u000a\u0009\u0077\u003d\u0025s\u000a\t\u0076\u003d\u0025\u0073",_gdccc ,_cdbec ,_cgbd );
continue ;};};_ebddaf =append (_ebddaf ,_cgbd );};};_ebddaf .sortStrict ();return _ebddaf ;};func _ecefe (_gbbc ,_aedg ,_ddcc float64 )rulingKind {if _gbbc >=_ddcc &&_fefg (_aedg ,_gbbc ){return _faec ;};if _aedg >=_ddcc &&_fefg (_gbbc ,_aedg ){return _acegd ;
};return _acdg ;};func (_ddcfg paraList )findTables (_cgggd []gridTiling )[]*textTable {_ddcfg .addNeighbours ();_bd .Slice (_ddcfg ,func (_fcecf ,_dccgdf int )bool {return _adaf (_ddcfg [_fcecf ],_ddcfg [_dccgdf ])< 0});var _ffeba []*textTable ;if _gegg {_dbgd :=_ddcfg .findGridTables (_cgggd );
_ffeba =append (_ffeba ,_dbgd ...);};if _cafb {_cfag :=_ddcfg .findTextTables ();_ffeba =append (_ffeba ,_cfag ...);};return _ffeba ;};

// NewWithOptions an Extractor instance for extracting content from the input PDF page with options.
func NewWithOptions (page *_bf .PdfPage ,options *Options )(*Extractor ,error ){const _aad ="\u0065x\u0074\u0072\u0061\u0063\u0074\u006f\u0072\u002e\u004e\u0065\u0077W\u0069\u0074\u0068\u004f\u0070\u0074\u0069\u006f\u006e\u0073";_afb ,_efgb :=page .GetAllContentStreams ();
if _efgb !=nil {return nil ,_efgb ;};_agce ,_gac :=page .GetStructTreeRoot ();if !_gac {_d .Log .Debug ("T\u0068\u0065\u0020\u0070\u0064\u0066\u0020\u0064\u006f\u0063\u0075\u006d\u0065\u006e\u0074\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0074\u0061\u0067g\u0065d\u002e\u0020\u0053\u0074r\u0075\u0063t\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e\u0027\u0074\u0020\u0065\u0078\u0069\u0073\u0074\u002e");
};_bffd :=page .GetContainingPdfObject ();_dfg ,_efgb :=page .GetMediaBox ();if _efgb !=nil {return nil ,_deg .Errorf ("\u0065\u0078\u0074r\u0061\u0063\u0074\u006fr\u0020\u0072\u0065\u0071\u0075\u0069\u0072e\u0073\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u002e\u0020\u0025\u0076",_efgb );
};_dggb :=&Extractor {_gbb :_afb ,_ac :page .Resources ,_gca :*_dfg ,_gad :page .CropBox ,_fca :map[string ]fontEntry {},_bac :map[string ]textResult {},_eda :map[string ]textResult {},_aag :options ,_geb :_agce ,_dbg :_bffd };if _dggb ._gca .Llx > _dggb ._gca .Urx {_d .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0058\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_dggb ._gca );
_dggb ._gca .Llx ,_dggb ._gca .Urx =_dggb ._gca .Urx ,_dggb ._gca .Llx ;};if _dggb ._gca .Lly > _dggb ._gca .Ury {_d .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0059\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_dggb ._gca );
_dggb ._gca .Lly ,_dggb ._gca .Ury =_dggb ._gca .Ury ,_dggb ._gca .Lly ;};if _dggb ._aag !=nil {if _dggb ._aag .IncludeAnnotations {_dggb ._gec ,_efgb =page .GetAnnotations ();if _efgb !=nil {_d .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0067\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0061\u006e\u006e\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0073: \u0025\u0076",_efgb );
};};};_gc .TrackUse (_aad );return _dggb ,nil ;};func (_afdg *wordBag )allWords ()[]*textWord {var _fceae []*textWord ;for _ ,_eccg :=range _afdg ._gecfd {_fceae =append (_fceae ,_eccg ...);};return _fceae ;};func (_fefa *textLine )appendWord (_abgef *textWord ){_fefa ._bbfda =append (_fefa ._bbfda ,_abgef );
_fefa .PdfRectangle =_caddg (_fefa .PdfRectangle ,_abgef .PdfRectangle );if _abgef ._gbaff > _fefa ._cecg {_fefa ._cecg =_abgef ._gbaff ;};if _abgef ._afefd > _fefa ._eeage {_fefa ._eeage =_abgef ._afefd ;};};

// String returns a human readable description of `path`.
func (_cbgg *subpath )String ()string {_dcfg :=_cbgg ._egdag ;_bcbd :=len (_dcfg );if _bcbd <=5{return _deg .Sprintf ("\u0025d\u003a\u0020\u0025\u0036\u002e\u0032f",_bcbd ,_dcfg );};return _deg .Sprintf ("\u0025d\u003a\u0020\u0025\u0036.\u0032\u0066\u0020\u0025\u0036.\u0032f\u0020.\u002e\u002e\u0020\u0025\u0036\u002e\u0032f",_bcbd ,_dcfg [0],_dcfg [1],_dcfg [_bcbd -1]);
};type wordBag struct{_bf .PdfRectangle ;_bcf float64 ;_affe ,_fgea rulingList ;_bdgd float64 ;_gecfd map[int ][]*textWord ;};func _bdfde (_agdfe string ,_dcgaf int )string {if len (_agdfe )< _dcgaf {return _agdfe ;};return _agdfe [:_dcgaf ];};func (_ccacg paraList )findTextTables ()[]*textTable {var _cbeac []*textTable ;
for _ ,_aadd :=range _ccacg {if _aadd .taken ()||_aadd .Width ()==0{continue ;};_cgdca :=_aadd .isAtom ();if _cgdca ==nil {continue ;};_cgdca .growTable ();if _cgdca ._ccfea *_cgdca ._gecff < _fcda {continue ;};_cgdca .markCells ();_cgdca .log ("\u0067\u0072\u006fw\u006e");
_cbeac =append (_cbeac ,_cgdca );};return _cbeac ;};func (_fgbb *Editor )getMatches (_cfd string ,_dgb []int )(map[int ]Match ,map[int ][]*TextMarkArray ,error ){_bga :=map[int ]Match {};_egb :=map[int ][]*TextMarkArray {};for _ ,_aae :=range _dgb {_gef ,_cdd :=_fgbb ._cef .GetPage (_aae );
if _cdd !=nil {return nil ,nil ,_cdd ;};_bbaf ,_cdd :=New (_gef );if _cdd !=nil {return nil ,nil ,_cdd ;};_ff ,_ ,_ ,_cdd :=_bbaf .ExtractPageText ();if _cdd !=nil {return nil ,nil ,_cdd ;};_dce :=_ff .Text ();_dec ,_cdd :=_bcda (_cfd ,_dce );if _cdd !=nil {return nil ,nil ,_cdd ;
};if len (_dec )==0{_d .Log .Info ("\u004e\u006f\u0020\u006d\u0061\u0074\u0063\u0068\u0020\u0066\u006f\u0075\u006e\u0064\u0020f\u006fr\u0020\u0025\u0073\u0020\u006f\u006e\u0020\u0070\u0061\u0067\u0065\u0020\u0025\u0064",_cfd ,_aae );};_dbe :=_ff .Marks ();
_dbd :=[]Box {};for _ ,_agb :=range _dec {_ ,_bffe ,_fbag :=_dgcc (_agb ,_dbe ,_cfd );if _fbag !=nil {return nil ,nil ,_fbag ;};_dbd =append (_dbd ,_bffe );};_acdf :=Match {Pattern :_cfd ,Indexes :_dec ,Locations :_dbd };_bga [_aae ]=_acdf ;};return _bga ,_egb ,nil ;
};

// TextTable represents a table.
// Cells are ordered top-to-bottom, left-to-right.
// Cells[y] is the (0-offset) y'th row in the table.
// Cells[y][x] is the (0-offset) x'th column in the table.
type TextTable struct{_bf .PdfRectangle ;W ,H int ;Cells [][]TableCell ;};func (_cdgf *PageText )getParagraphs ()paraList {var _acfb rulingList ;if _gebf {_fdge :=_ggcdg (_cdgf ._edag );_acfb =append (_acfb ,_fdge ...);};if _bcbe {_bbba :=_caaea (_cdgf ._dffe );
_acfb =append (_acfb ,_bbba ...);};_acfb ,_bbbg :=_acfb .toTilings ();var _cddg paraList ;_aggf :=len (_cdgf ._afbb );for _afbd :=0;_afbd < 360&&_aggf > 0;_afbd +=90{_gfde :=make ([]*textMark ,0,len (_cdgf ._afbb )-_aggf );for _ ,_gefa :=range _cdgf ._afbb {if _gefa ._acgg ==_afbd {_gfde =append (_gfde ,_gefa );
};};if len (_gfde )> 0{_gecb :=_fbbfc (_gfde ,_cdgf ._cffb ,_acfb ,_bbbg ,_cdgf ._dcce ._beba );_cddg =append (_cddg ,_gecb ...);_aggf -=len (_gfde );};};return _cddg ;};func (_ecec intSet )has (_fdbgd int )bool {_ ,_bbggb :=_ecec [_fdbgd ];return _bbggb };


// String returns a string describing `tm`.
func (_dgaf TextMark )String ()string {_gadd :=_dgaf .BBox ;var _fffd string ;if _dgaf .Font !=nil {_fffd =_dgaf .Font .String ();if len (_fffd )> 50{_fffd =_fffd [:50]+"\u002e\u002e\u002e";};};var _dffg string ;if _dgaf .Meta {_dffg ="\u0020\u002a\u004d\u002a";
};return _deg .Sprintf ("\u007b\u0054\u0065\u0078t\u004d\u0061\u0072\u006b\u003a\u0020\u0025\u0064\u0020%\u0071\u003d\u0025\u0030\u0032\u0078\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e2\u0066\u0029\u0020\u0028\u00256\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0025\u0073\u007d",_dgaf .Offset ,_dgaf .Text ,[]rune (_dgaf .Text ),_gadd .Llx ,_gadd .Lly ,_gadd .Urx ,_gadd .Ury ,_fffd ,_dffg );
};type event struct{_gddf float64 ;_ebfae bool ;_cffbf int ;};func (_eggdc *wordBag )removeDuplicates (){if _ebfga {_d .Log .Info ("r\u0065m\u006f\u0076\u0065\u0044\u0075\u0070\u006c\u0069c\u0061\u0074\u0065\u0073: \u0025\u0071",_eggdc .text ());};for _ ,_faefb :=range _eggdc .depthIndexes (){if len (_eggdc ._gecfd [_faefb ])==0{continue ;
};_efecc :=_eggdc ._gecfd [_faefb ][0];_gefcd :=_gceg *_efecc ._gbaff ;_aacd :=_efecc ._afefd ;for _ ,_acefd :=range _eggdc .depthBand (_aacd ,_aacd +_gefcd ){_ddbgf :=map[*textWord ]struct{}{};_cbea :=_eggdc ._gecfd [_acefd ];for _ ,_bebd :=range _cbea {if _ ,_abbg :=_ddbgf [_bebd ];
_abbg {continue ;};for _ ,_ecea :=range _cbea {if _ ,_fgcc :=_ddbgf [_ecea ];_fgcc {continue ;};if _ecea !=_bebd &&_ecea ._dfaee ==_bebd ._dfaee &&_aa .Abs (_ecea .Llx -_bebd .Llx )< _gefcd &&_aa .Abs (_ecea .Urx -_bebd .Urx )< _gefcd &&_aa .Abs (_ecea .Lly -_bebd .Lly )< _gefcd &&_aa .Abs (_ecea .Ury -_bebd .Ury )< _gefcd {_ddbgf [_ecea ]=struct{}{};
};};};if len (_ddbgf )> 0{_gcbgd :=0;for _ ,_acdc :=range _cbea {if _ ,_gfcae :=_ddbgf [_acdc ];!_gfcae {_cbea [_gcbgd ]=_acdc ;_gcbgd ++;};};_eggdc ._gecfd [_acefd ]=_cbea [:len (_cbea )-len (_ddbgf )];if len (_eggdc ._gecfd [_acefd ])==0{delete (_eggdc ._gecfd ,_acefd );
};};};};};func (_dfegb *textTable )computeBbox ()_bf .PdfRectangle {var _bbag _bf .PdfRectangle ;_eedb :=false ;for _acfga :=0;_acfga < _dfegb ._gecff ;_acfga ++{for _aegga :=0;_aegga < _dfegb ._ccfea ;_aegga ++{_bbbeg :=_dfegb .get (_aegga ,_acfga );if _bbbeg ==nil {continue ;
};if !_eedb {_bbag =_bbbeg .PdfRectangle ;_eedb =true ;}else {_bbag =_caddg (_bbag ,_bbbeg .PdfRectangle );};};};return _bbag ;};func _bgga (_gggeb []*textLine ,_bbgd ,_fdaf float64 )[]*textLine {var _bgaf []*textLine ;for _ ,_babef :=range _gggeb {if _bbgd ==-1{if _babef ._eeage > _fdaf {_bgaf =append (_bgaf ,_babef );
};}else {if _babef ._eeage > _fdaf &&_babef ._eeage < _bbgd {_bgaf =append (_bgaf ,_babef );};};};return _bgaf ;};func _dd (_deb int )bool {return (_deb &1)!=0};

// String returns a string descibing `i`.
func (_ccade gridTile )String ()string {_ggda :=func (_beefa bool ,_cdea string )string {if _beefa {return _cdea ;};return "\u005f";};return _deg .Sprintf ("\u00256\u002e2\u0066\u0020\u0025\u0031\u0073%\u0031\u0073%\u0031\u0073\u0025\u0031\u0073",_ccade .PdfRectangle ,_ggda (_ccade ._cbegc ,"\u004c"),_ggda (_ccade ._eeba ,"\u0052"),_ggda (_ccade ._ffdg ,"\u0042"),_ggda (_ccade ._egfbb ,"\u0054"));
};

// ApplyArea processes the page text only within the specified area `bbox`.
// Each time ApplyArea is called, it updates the result set in `pt`.
// Can be called multiple times in a row with different bounding boxes.
func (_cacb *PageText )ApplyArea (bbox _bf .PdfRectangle ){_cacgb :=make ([]*textMark ,0,len (_cacb ._afbb ));for _ ,_ccba :=range _cacb ._afbb {if _aefc (_ccba .bbox (),bbox ){_cacgb =append (_cacgb ,_ccba );};};var _afeb paraList ;_abceb :="";_gce :=len (_cacgb );
for _aaff :=0;_aaff < 360&&_gce > 0;_aaff +=90{_fbgbd :=make ([]*textMark ,0,len (_cacgb )-_gce );for _ ,_afga :=range _cacgb {if _afga ._acgg ==_aaff {_fbgbd =append (_fbgbd ,_afga );};};if len (_fbgbd )> 0{if _cacb ._dcce ._cfg {_abceb +=_ecbcb (_fbgbd ,_cacb ._cffb );
}else {_bef :=_fbbfc (_fbgbd ,_cacb ._cffb ,nil ,nil ,_cacb ._dcce ._beba );_afeb =append (_afeb ,_bef ...);};_gce -=len (_fbgbd );};};if _cacb ._dcce ._cfg {_cacb ._ada =_abceb ;}else {_fded :=new (_af .Buffer );_afeb .writeText (_fded );_cacb ._ada =_fded .String ();
_cacb ._ecda =_afeb .toTextMarks ();_cacb ._aef =_afeb .tables ();};};func (_efab *textLine )markWordBoundaries (){_ffdc :=_agecf *_efab ._cecg ;for _fbdb ,_daad :=range _efab ._bbfda [1:]{if _febe (_daad ,_efab ._bbfda [_fbdb ])>=_ffdc {_daad ._cfacf =true ;
};};};func _cbaa (_dgcgb func (*wordBag ,*textWord ,float64 )bool ,_cggee float64 )func (*wordBag ,*textWord )bool {return func (_cbcd *wordBag ,_cebd *textWord )bool {return _dgcgb (_cbcd ,_cebd ,_cggee )};};type fontEntry struct{_cdfd *_bf .PdfFont ;
_aagb int64 ;};func _dfdfa (_dbaa ,_ecgbc ,_acdd ,_fbce *textPara )*textTable {_gefg :=&textTable {_ccfea :2,_gecff :2,_agcf :make (map[uint64 ]*textPara ,4)};_gefg .put (0,0,_dbaa );_gefg .put (1,0,_ecgbc );_gefg .put (0,1,_acdd );_gefg .put (1,1,_fbce );
return _gefg ;};func (_agaa *shapesState )drawRectangle (_dfae ,_egcc ,_dcfb ,_cfffg float64 ){if _efcb {_bbec :=_agaa .devicePoint (_dfae ,_egcc );_faa :=_agaa .devicePoint (_dfae +_dcfb ,_egcc +_cfffg );_dfb :=_bf .PdfRectangle {Llx :_bbec .X ,Lly :_bbec .Y ,Urx :_faa .X ,Ury :_faa .Y };
_d .Log .Info ("d\u0072a\u0077\u0052\u0065\u0063\u0074\u0061\u006e\u0067l\u0065\u003a\u0020\u00256.\u0032\u0066",_dfb );};_agaa .newSubPath ();_agaa .moveTo (_dfae ,_egcc );_agaa .lineTo (_dfae +_dcfb ,_egcc );_agaa .lineTo (_dfae +_dcfb ,_egcc +_cfffg );
_agaa .lineTo (_dfae ,_egcc +_cfffg );_agaa .closePath ();};

// String returns a string describing `ma`.
func (_bbbgf TextMarkArray )String ()string {_acga :=len (_bbbgf ._agfc );if _acga ==0{return "\u0045\u004d\u0050T\u0059";};_ecdg :=_bbbgf ._agfc [0];_edg :=_bbbgf ._agfc [_acga -1];return _deg .Sprintf ("\u007b\u0054\u0045\u0058\u0054\u004d\u0041\u0052K\u0041\u0052\u0052AY\u003a\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025s\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d%\u0073\u007d",_acga ,_ecdg ,_edg );
};const (_bbfg markKind =iota ;_efgg ;_dgea ;_caeegd ;);func (_gfge *wordBag )removeWord (_bgfa *textWord ,_cbgc int ){_cegdf :=_gfge ._gecfd [_cbgc ];_cegdf =_gafae (_cegdf ,_bgfa );if len (_cegdf )==0{delete (_gfge ._gecfd ,_cbgc );}else {_gfge ._gecfd [_cbgc ]=_cegdf ;
};};func _cacc (_edfdc *_bf .Image ,_dbgc _bcc .Color )_de .Image {_gecae ,_ccde :=int (_edfdc .Width ),int (_edfdc .Height );_eage :=_de .NewRGBA (_de .Rect (0,0,_gecae ,_ccde ));for _degf :=0;_degf < _ccde ;_degf ++{for _geed :=0;_geed < _gecae ;_geed ++{_fagg ,_dfbad :=_edfdc .ColorAt (_geed ,_degf );
if _dfbad !=nil {_d .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_geed ,_degf );
continue ;};_efaeb ,_fcab ,_bbagd ,_ :=_fagg .RGBA ();var _cgced _bcc .Color ;if _efaeb +_fcab +_bbagd ==0{_cgced =_dbgc ;}else {_cgced =_bcc .Transparent ;};_eage .Set (_geed ,_degf ,_cgced );};};return _eage ;};func _cdag (_dbefb ,_gbeg *textPara )bool {return _aggg (_dbefb ._ecddc ,_gbeg ._ecddc )};
func (_dfagg *textWord )appendMark (_adbaf *textMark ,_adeec _bf .PdfRectangle ){_dfagg ._bdaeb =append (_dfagg ._bdaeb ,_adbaf );_dfagg .PdfRectangle =_caddg (_dfagg .PdfRectangle ,_adbaf .PdfRectangle );if _adbaf ._fegc > _dfagg ._gbaff {_dfagg ._gbaff =_adbaf ._fegc ;
};_dfagg ._afefd =_adeec .Ury -_dfagg .PdfRectangle .Lly ;};

// Len returns the number of TextMarks in `ma`.
func (_aadb *TextMarkArray )Len ()int {if _aadb ==nil {return 0;};return len (_aadb ._agfc );};func (_adf *imageExtractContext )extractContentStreamImages (_efee string ,_dfc *_bf .PdfPageResources )error {_cebf :=_gf .NewContentStreamParser (_efee );_dab ,_cgbf :=_cebf .Parse ();
if _cgbf !=nil {return _cgbf ;};if _adf ._bag ==nil {_adf ._bag =map[*_cb .PdfObjectStream ]*cachedImage {};};if _adf ._fgg ==nil {_adf ._fgg =&ImageExtractOptions {};};_fcb :=_gf .NewContentStreamProcessor (*_dab );_fcb .AddHandler (_gf .HandlerConditionEnumAllOperands ,"",_adf .processOperand );
return _fcb .Process (_dfc );};func (_cfeff rulingList )findPrimSec (_ebeb ,_gbdc float64 )*ruling {for _ ,_edcc :=range _cfeff {if _bgfbd (_edcc ._gdge -_ebeb )&&_edcc ._ggbc -_afa <=_gbdc &&_gbdc <=_edcc ._agbd +_afa {return _edcc ;};};return nil ;};
func (_cgbb *textTable )getDown ()paraList {_aadec :=make (paraList ,_cgbb ._ccfea );for _bbgb :=0;_bbgb < _cgbb ._ccfea ;_bbgb ++{_gdabc :=_cgbb .get (_bbgb ,_cgbb ._gecff -1)._bddf ;if _gdabc .taken (){return nil ;};_aadec [_bbgb ]=_gdabc ;};for _gfgad :=0;
_gfgad < _cgbb ._ccfea -1;_gfgad ++{if _aadec [_gfgad ]._dabb !=_aadec [_gfgad +1]{return nil ;};};return _aadec ;};func _bgec (_cfefc string ,_cfgg []rulingList ){_d .Log .Info ("\u0024\u0024 \u0025\u0064\u0020g\u0072\u0069\u0064\u0073\u0020\u002d\u0020\u0025\u0073",len (_cfgg ),_cfefc );
for _egfcg ,_eeec :=range _cfgg {_deg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_egfcg ,_eeec .String ());};};func (_feae *wordBag )firstWord (_fdce int )*textWord {return _feae ._gecfd [_fdce ][0]};func _bdgce (_gffcae []_cb .PdfObject )(_cgdge ,_ddgc float64 ,_gcaed error ){if len (_gffcae )!=2{return 0,0,_deg .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020o\u0066 \u0070\u0061\u0072\u0061\u006d\u0073\u003a \u0025\u0064",len (_gffcae ));
};_caefc ,_gcaed :=_cb .GetNumbersAsFloat (_gffcae );if _gcaed !=nil {return 0,0,_gcaed ;};return _caefc [0],_caefc [1],nil ;};

// TableInfo gets table information of the textmark `tm`.
func (_fbd *TextMark )TableInfo ()(*TextTable ,[][]int ){if !_fbd ._bbcf {return nil ,nil ;};_agdf :=_fbd ._bbce ;_gfga :=_agdf .getCellInfo (*_fbd );return _agdf ,_gfga ;};func (_acedd *textTable )reduceTiling (_gebe gridTiling ,_afef float64 )*textTable {_acgc :=make ([]int ,0,_acedd ._gecff );
_ecddcd :=make ([]int ,0,_acedd ._ccfea );_ffaf :=_gebe ._cbeaa ;_daffa :=_gebe ._bede ;for _gbbdfe :=0;_gbbdfe < _acedd ._gecff ;_gbbdfe ++{_cgcg :=_gbbdfe > 0&&_aa .Abs (_daffa [_gbbdfe -1]-_daffa [_gbbdfe ])< _afef &&_acedd .emptyCompositeRow (_gbbdfe );
if !_cgcg {_acgc =append (_acgc ,_gbbdfe );};};for _fbfecg :=0;_fbfecg < _acedd ._ccfea ;_fbfecg ++{_aggde :=_fbfecg < _acedd ._ccfea -1&&_aa .Abs (_ffaf [_fbfecg +1]-_ffaf [_fbfecg ])< _afef &&_acedd .emptyCompositeColumn (_fbfecg );if !_aggde {_ecddcd =append (_ecddcd ,_fbfecg );
};};if len (_acgc )==_acedd ._gecff &&len (_ecddcd )==_acedd ._ccfea {return _acedd ;};_afbad :=textTable {_cgfe :_acedd ._cgfe ,_ccfea :len (_ecddcd ),_gecff :len (_acgc ),_ebcde :make (map[uint64 ]compositeCell ,len (_ecddcd )*len (_acgc ))};if _cdgfc {_d .Log .Info ("\u0072\u0065\u0064\u0075c\u0065\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0025d\u0078%\u0064\u0020\u002d\u003e\u0020\u0025\u0064x\u0025\u0064",_acedd ._ccfea ,_acedd ._gecff ,len (_ecddcd ),len (_acgc ));
_d .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_ecddcd );_d .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_acgc );};for _dbabe ,_beecb :=range _acgc {for _dggbe ,_afcae :=range _ecddcd {_gfbfd ,_gded :=_acedd .getComposite (_afcae ,_beecb );
if len (_gfbfd )==0{continue ;};if _cdgfc {_deg .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_dggbe ,_dbabe ,_afcae ,_beecb ,_bdfde (_gfbfd .merge ().text (),50));};
_afbad .putComposite (_dggbe ,_dbabe ,_gfbfd ,_gded );};};return &_afbad ;};type rectRuling struct{_deba rulingKind ;_bbbe markKind ;_bcc .Color ;_bf .PdfRectangle ;};type list struct{_gead []*textLine ;_degb string ;_caede []*list ;_gcbe string ;};func _fefeg (_egbfb map[float64 ]map[float64 ]gridTile )[]float64 {_fgbgg :=make ([]float64 ,0,len (_egbfb ));
for _ddgdf :=range _egbfb {_fgbgg =append (_fgbgg ,_ddgdf );};_bd .Float64s (_fgbgg );_ecddg :=len (_fgbgg );for _feeab :=0;_feeab < _ecddg /2;_feeab ++{_fgbgg [_feeab ],_fgbgg [_ecddg -1-_feeab ]=_fgbgg [_ecddg -1-_feeab ],_fgbgg [_feeab ];};return _fgbgg ;
};func (_gbfg *textObject )newTextMark (_gefc string ,_agbf _ed .Matrix ,_ffae _ed .Point ,_cbbcf float64 ,_ggea *_bf .PdfFont ,_dcbc float64 ,_aeab ,_ffed _bcc .Color ,_ceac _cb .PdfObject ,_ecbca []string ,_ddgd int ,_ecdag int )(textMark ,bool ){_cegc :=_agbf .Angle ();
_gfcg :=_bcbee (_cegc ,_cgaaf );var _dbdb float64 ;if _gfcg %180!=90{_dbdb =_agbf .ScalingFactorY ();}else {_dbdb =_agbf .ScalingFactorX ();};_dfda :=_ceg (_agbf );_dgafa :=_bf .PdfRectangle {Llx :_dfda .X ,Lly :_dfda .Y ,Urx :_ffae .X ,Ury :_ffae .Y };
switch _gfcg %360{case 90:_dgafa .Urx -=_dbdb ;case 180:_dgafa .Ury -=_dbdb ;case 270:_dgafa .Urx +=_dbdb ;case 0:_dgafa .Ury +=_dbdb ;default:_gfcg =0;_dgafa .Ury +=_dbdb ;};if _dgafa .Llx > _dgafa .Urx {_dgafa .Llx ,_dgafa .Urx =_dgafa .Urx ,_dgafa .Llx ;
};if _dgafa .Lly > _dgafa .Ury {_dgafa .Lly ,_dgafa .Ury =_dgafa .Ury ,_dgafa .Lly ;};_cbce :=true ;if _gbfg ._dgccb ._gca .Width ()> 0{_aaggf ,_fggc :=_beeba (_dgafa ,_gbfg ._dgccb ._gca );if !_fggc {_cbce =false ;_d .Log .Debug ("\u0054\u0065\u0078\u0074\u0020m\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069\u0064\u0065\u0020\u0070a\u0067\u0065\u002e\u0020\u0062\u0062\u006f\u0078\u003d\u0025\u0067\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u003d\u0025\u0067\u0020\u0074\u0065\u0078\u0074\u003d\u0025q",_dgafa ,_gbfg ._dgccb ._gca ,_gefc );
};_dgafa =_aaggf ;};_adee :=_dgafa ;_dcbd :=_gbfg ._dgccb ._gca ;switch _gfcg %360{case 90:_dcbd .Urx ,_dcbd .Ury =_dcbd .Ury ,_dcbd .Urx ;_adee =_bf .PdfRectangle {Llx :_dcbd .Urx -_dgafa .Ury ,Urx :_dcbd .Urx -_dgafa .Lly ,Lly :_dgafa .Llx ,Ury :_dgafa .Urx };
case 180:_adee =_bf .PdfRectangle {Llx :_dcbd .Urx -_dgafa .Llx ,Urx :_dcbd .Urx -_dgafa .Urx ,Lly :_dcbd .Ury -_dgafa .Lly ,Ury :_dcbd .Ury -_dgafa .Ury };case 270:_dcbd .Urx ,_dcbd .Ury =_dcbd .Ury ,_dcbd .Urx ;_adee =_bf .PdfRectangle {Llx :_dgafa .Ury ,Urx :_dgafa .Lly ,Lly :_dcbd .Ury -_dgafa .Llx ,Ury :_dcbd .Ury -_dgafa .Urx };
};if _adee .Llx > _adee .Urx {_adee .Llx ,_adee .Urx =_adee .Urx ,_adee .Llx ;};if _adee .Lly > _adee .Ury {_adee .Lly ,_adee .Ury =_adee .Ury ,_adee .Lly ;};_bdfda :=textMark {_dbec :_gefc ,PdfRectangle :_adee ,_cdff :_dgafa ,_bgaa :_ggea ,_fegc :_dbdb ,_dcfgg :_dcbc ,_cagcg :_agbf ,_ccge :_ffae ,_acgg :_gfcg ,_dcdf :_aeab ,_gbdg :_ffed ,_edeg :_ceac ,_eabfe :_ecbca ,Th :_gbfg ._gdga ._fge ,Tw :_gbfg ._gdga ._bfec ,_ebfcb :_ecdag ,_gfdce :_ddgd };
if _befg {_d .Log .Info ("n\u0065\u0077\u0054\u0065\u0078\u0074M\u0061\u0072\u006b\u003a\u0020\u0073t\u0061\u0072\u0074\u003d\u0025\u002e\u0032f\u0020\u0065\u006e\u0064\u003d\u0025\u002e\u0032\u0066\u0020%\u0073",_dfda ,_ffae ,_bdfda .String ());};return _bdfda ,_cbce ;
};func _dcfd (_cgbe string ,_gaegg ,_bgbd int ,_eca string )string {if _bgbd > len (_cgbe )-1{return _cgbe [:_gaegg ]+_eca ;};return _cgbe [:_gaegg ]+_eca +_cgbe [_bgbd :];};func _bafff (_eagbc []TextMark ,_aagaf *int ,_gabg TextMark )[]TextMark {_gabg .Offset =*_aagaf ;
_eagbc =append (_eagbc ,_gabg );*_aagaf +=len (_gabg .Text );return _eagbc ;};func (_efec *wordBag )scanBand (_gfdcb string ,_dgafb *wordBag ,_eafg func (_dafg *wordBag ,_bbafb *textWord )bool ,_fgca ,_agfe ,_ebdda float64 ,_bebec ,_cdgfa bool )int {_fbcb :=_dgafb ._bcf ;
var _becf map[int ]map[*textWord ]struct{};if !_bebec {_becf =_efec .makeRemovals ();};_dbae :=_bdfd *_fbcb ;_ecgcd :=0;for _ ,_fcag :=range _efec .depthBand (_fgca -_dbae ,_agfe +_dbae ){if len (_efec ._gecfd [_fcag ])==0{continue ;};for _ ,_gbde :=range _efec ._gecfd [_fcag ]{if !(_fgca -_dbae <=_gbde ._afefd &&_gbde ._afefd <=_agfe +_dbae ){continue ;
};if !_eafg (_dgafb ,_gbde ){continue ;};_dbdd :=2.0*_aa .Abs (_gbde ._gbaff -_dgafb ._bcf )/(_gbde ._gbaff +_dgafb ._bcf );_gfbba :=_aa .Max (_gbde ._gbaff /_dgafb ._bcf ,_dgafb ._bcf /_gbde ._gbaff );_dbge :=_aa .Min (_dbdd ,_gfbba );if _ebdda > 0&&_dbge > _ebdda {continue ;
};if _dgafb .blocked (_gbde ){continue ;};if !_bebec {_dgafb .pullWord (_gbde ,_fcag ,_becf );};_ecgcd ++;if !_cdgfa {if _gbde ._afefd < _fgca {_fgca =_gbde ._afefd ;};if _gbde ._afefd > _agfe {_agfe =_gbde ._afefd ;};};if _bebec {break ;};};};if !_bebec {_efec .applyRemovals (_becf );
};return _ecgcd ;};func (_gfgd *textObject )getStrokeColor ()_bcc .Color {return _gceaba (_gfgd ._cbge .ColorspaceStroking ,_gfgd ._cbge .ColorStroking );};func (_eggge *textLine )endsInHyphen ()bool {_bdeae :=_eggge ._bbfda [len (_eggge ._bbfda )-1];_cedf :=_bdeae ._dfaee ;
_egeb ,_aeag :=_a .DecodeLastRuneInString (_cedf );if _aeag <=0||!_g .Is (_g .Hyphen ,_egeb ){return false ;};if _bdeae ._cfacf &&_cbafcd (_cedf ){return true ;};return _cbafcd (_eggge .text ());};func _effg (_eade _ed .Point )*subpath {return &subpath {_egdag :[]_ed .Point {_eade }}};
func (_cfc *shapesState )moveTo (_ccce ,_cgbce float64 ){_cfc ._cfff =true ;_cfc ._acbeg =_cfc .devicePoint (_ccce ,_cgbce );if _efcb {_d .Log .Info ("\u006d\u006fv\u0065\u0054\u006f\u003a\u0020\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0064\u0065\u0076\u0069\u0063\u0065\u003d%.\u0032\u0066",_ccce ,_cgbce ,_cfc ._acbeg );
};};func (_cbbd *textObject )setFont (_fgdg string ,_ggca float64 )error {if _cbbd ==nil {return nil ;};_cbbd ._gdga ._bbb =_ggca ;_gdcc ,_ebfe :=_cbbd .getFont (_fgdg );if _ebfe !=nil {return _ebfe ;};_cbbd ._gdga ._bddc =_gdcc ;return nil ;};

// Font represents the font properties on a PDF page.
type Font struct{PdfFont *_bf .PdfFont ;

// FontName represents Font Name from font properties.
FontName string ;

// FontType represents Font Subtype entry in the font dictionary inside page resources.
// Examples : type0, Type1, MMType1, Type3, TrueType, CIDFont.
FontType string ;

// ToUnicode is true if font provides a `ToUnicode` mapping.
ToUnicode bool ;

// IsCID is true if underlying font is a composite font.
// Composite font is represented by a font dictionary whose Subtype is `Type0`
IsCID bool ;

// IsSimple is true if font is simple font.
// A simple font is limited to only 8 bit (255) character codes.
IsSimple bool ;

// FontData represents the raw data of the embedded font file.
// It can have format TrueType (TTF), PostScript Font (PFB) or Compact Font Format (CCF).
// FontData value can be indicates from `FontFile`, `FontFile2` or `FontFile3` inside Font Descriptor.
// At most, only one of `FontFile`, `FontFile2` or `FontFile3` will be FontData value.
FontData []byte ;

// FontFileName is a name representing the font. it has format:
// (Font Name) + (Font Type Extension), example: helvetica.ttf.
FontFileName string ;

// FontDescriptor represents metrics and other attributes inside font properties from PDF Structure (Font Descriptor).
FontDescriptor *_bf .PdfFontDescriptor ;};func (_edaa paraList )toTextMarks ()[]TextMark {_cbeb :=0;var _cbdg []TextMark ;for _eead ,_bfcc :=range _edaa {if _bfcc ._afce {continue ;};_effgg :=_bfcc .toTextMarks (&_cbeb );_cbdg =append (_cbdg ,_effgg ...);
if _eead !=len (_edaa )-1{if _cdfea (_bfcc ,_edaa [_eead +1]){_cbdg =_ecaf (_cbdg ,&_cbeb ,"\u0020");}else {_cbdg =_ecaf (_cbdg ,&_cbeb ,"\u000a");_cbdg =_ecaf (_cbdg ,&_cbeb ,"\u000a");};};};_cbdg =_ecaf (_cbdg ,&_cbeb ,"\u000a");_cbdg =_ecaf (_cbdg ,&_cbeb ,"\u000a");
return _cbdg ;};func (_cgaec *wordBag )absorb (_dddbf *wordBag ){_gagg :=_dddbf .makeRemovals ();for _cffe ,_effgb :=range _dddbf ._gecfd {for _ ,_cfa :=range _effgb {_cgaec .pullWord (_cfa ,_cffe ,_gagg );};};_dddbf .applyRemovals (_gagg );};

// ExtractPageText returns the text contents of `e` (an Extractor for a page) as a PageText.
// TODO(peterwilliams97): The stats complicate this function signature and aren't very useful.
//
//	Replace with a function like Extract() (*PageText, error)
func (_fcba *Extractor )ExtractPageText ()(*PageText ,int ,int ,error ){_dcb ,_gee ,_baeb ,_bgab :=_fcba .extractPageText (_fcba ._gbb ,_fcba ._ac ,_ed .IdentityMatrix (),0,false );if _bgab !=nil &&_bgab !=_bf .ErrColorOutOfRange {return nil ,0,0,_bgab ;
};if _fcba ._aag !=nil {_dcb ._dcce ._cfg =_fcba ._aag .UseSimplerExtractionProcess ;_dcb ._dcce ._beba =_fcba ._aag .DisableMultiColumns ;};_dcb .computeViews ();_bgab =_gbgcd (_dcb );if _bgab !=nil {return nil ,0,0,_bgab ;};if _fcba ._aag !=nil {if _fcba ._aag .ApplyCropBox &&_fcba ._gad !=nil {_dcb .ApplyArea (*_fcba ._gad );
};_dcb ._dcce ._agea =_fcba ._aag .DisableDocumentTags ;};return _dcb ,_gee ,_baeb ,nil ;};func (_effc *wordBag )depthBand (_efgbb ,_bcfa float64 )[]int {if len (_effc ._gecfd )==0{return nil ;};return _effc .depthRange (_effc .getDepthIdx (_efgbb ),_effc .getDepthIdx (_bcfa ));
};func _cabeb (_deea *textLine ,_cfbd []*textLine ,_ecdba []float64 ,_adbaa ,_fdgac float64 )[]*textLine {_edec :=[]*textLine {};for _ ,_eaecb :=range _cfbd {if _eaecb ._eeage >=_adbaa {if _fdgac !=-1&&_eaecb ._eeage < _fdgac {if _eaecb .text ()!=_deea .text (){if _aa .Round (_eaecb .Llx )< _aa .Round (_deea .Llx ){break ;
};_edec =append (_edec ,_eaecb );};}else if _fdgac ==-1{if _eaecb ._eeage ==_deea ._eeage {if _eaecb .text ()!=_deea .text (){_edec =append (_edec ,_eaecb );};continue ;};_abfd :=_caag (_deea ,_cfbd ,_ecdba );if _abfd !=-1&&_eaecb ._eeage <=_abfd {_edec =append (_edec ,_eaecb );
};};};};return _edec ;};type subpath struct{_egdag []_ed .Point ;_ecefb bool ;};type structElement struct{_gffd string ;_ccbf []structElement ;_bagd int64 ;_ecgce _cb .PdfObject ;};func (_ageaf *wordBag )text ()string {_acgb :=_ageaf .allWords ();_bdef :=make ([]string ,len (_acgb ));
for _agcdd ,_cbdedg :=range _acgb {_bdef [_agcdd ]=_cbdedg ._dfaee ;};return _gb .Join (_bdef ,"\u0020");};func _dcca (_agcda []*textLine ){_bd .Slice (_agcda ,func (_cbfce ,_aface int )bool {_cdad ,_bgddb :=_agcda [_cbfce ],_agcda [_aface ];return _cdad ._eeage < _bgddb ._eeage ;
});};

// String returns a description of `t`.
func (_ddeaf *textTable )String ()string {return _deg .Sprintf ("\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0025\u0074",_ddeaf ._ccfea ,_ddeaf ._gecff ,_ddeaf ._cgfe );};func (_ccee *imageExtractContext )extractInlineImage (_beb *_gf .ContentStreamInlineImage ,_bfbd _gf .GraphicsState ,_gfd *_bf .PdfPageResources )error {_bcb ,_fdd :=_beb .ToImage (_gfd );
if _fdd !=nil {return _fdd ;};_adg ,_fdd :=_beb .GetColorSpace (_gfd );if _fdd !=nil {return _fdd ;};if _adg ==nil {_adg =_bf .NewPdfColorspaceDeviceGray ();};_acd ,_fdd :=_adg .ImageToRGB (*_bcb );if _fdd !=nil {return _fdd ;};_cdg :=ImageMark {Image :&_acd ,Width :_bfbd .CTM .ScalingFactorX (),Height :_bfbd .CTM .ScalingFactorY (),Angle :_bfbd .CTM .Angle ()};
_cdg .X ,_cdg .Y =_bfbd .CTM .Translation ();_ccee ._gcgg =append (_ccee ._gcgg ,_cdg );_ccee ._cdc ++;return nil ;};func _dcbe (_fgdf _bf .PdfRectangle ,_cgbfd ,_dfba ,_bbdc ,_ecadg *ruling )gridTile {_ggfce :=_fgdf .Llx ;_fgadf :=_fgdf .Urx ;_afcc :=_fgdf .Lly ;
_beada :=_fgdf .Ury ;return gridTile {PdfRectangle :_fgdf ,_cbegc :_cgbfd !=nil &&_cgbfd .encloses (_afcc ,_beada ),_eeba :_dfba !=nil &&_dfba .encloses (_afcc ,_beada ),_ffdg :_bbdc !=nil &&_bbdc .encloses (_ggfce ,_fgadf ),_egfbb :_ecadg !=nil &&_ecadg .encloses (_ggfce ,_fgadf )};
};func (_agd *Extractor )extractPageText (_egaf string ,_afff *_bf .PdfPageResources ,_gecg _ed .Matrix ,_cagd int ,_gaga bool )(*PageText ,int ,int ,error ){_d .Log .Trace ("\u0065x\u0074\u0072\u0061\u0063t\u0050\u0061\u0067\u0065\u0054e\u0078t\u003a \u006c\u0065\u0076\u0065\u006c\u003d\u0025d",_cagd );
_eaec :=&PageText {_cffb :_agd ._gca ,_fabb :_agd ._geb ,_dadc :_agd ._dbg };_edabe :=_fbbd (_agd ._gca );var _bgde stateStack ;_cdb :=_cbfcf (_agd ,_afff ,_gf .GraphicsState {},&_edabe ,&_bgde );_bgce :=shapesState {_gcfb :_gecg ,_daac :_ed .IdentityMatrix (),_ebaf :_cdb };
var _fbe bool ;_cdeg :=-1;_gbbb :="";if _cagd > _abgf {_gbg :=_bfb .New ("\u0066\u006f\u0072\u006d s\u0074\u0061\u0063\u006b\u0020\u006f\u0076\u0065\u0072\u0066\u006c\u006f\u0077");_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0065\u0078\u0074\u0072\u0061\u0063\u0074\u0050\u0061\u0067\u0065\u0054\u0065\u0078\u0074\u002e\u0020\u0072\u0065\u0063u\u0072\u0073\u0069\u006f\u006e\u0020\u006c\u0065\u0076\u0065\u006c\u003d\u0025\u0064 \u0065r\u0072\u003d\u0025\u0076",_cagd ,_gbg );
return _eaec ,_edabe ._egcg ,_edabe ._acec ,_gbg ;};_bffa :=_gf .NewContentStreamParser (_egaf );_eef ,_dafe :=_bffa .Parse ();if _dafe !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020e\u0078\u0074\u0072a\u0063\u0074\u0050\u0061g\u0065\u0054\u0065\u0078\u0074\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dafe );
return _eaec ,_edabe ._egcg ,_edabe ._acec ,_dafe ;};_eaec ._ffab =_eef ;_afbc :=_gf .NewContentStreamProcessor (*_eef );_afbc .AddHandler (_gf .HandlerConditionEnumAllOperands ,"",func (_cadd *_gf .ContentStreamOperation ,_ecag _gf .GraphicsState ,_dfgg *_bf .PdfPageResources )error {_gdb :=_cadd .Operand ;
if _bbbae {_d .Log .Info ("\u0026&\u0026\u0020\u006f\u0070\u003d\u0025s",_cadd );};switch _gdb {case "\u0071":if _efcb {_d .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_bgce ._daac );};_bgde .push (&_edabe );case "\u0051":if !_bgde .empty (){_edabe =*_bgde .pop ();
};_bgce ._daac =_ecag .CTM ;if _efcb {_d .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_bgce ._daac );};case "\u0042\u0044\u0043":_ecbc ,_gafc :=_cb .GetDict (_cadd .Params [1]);if !_gafc {_d .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0042D\u0043\u0020\u006f\u0070\u003d\u0025\u0073 \u0047\u0065\u0074\u0044\u0069\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_cadd );
return _dafe ;};_dgce :=_ecbc .Get ("\u004d\u0043\u0049\u0044");if _dgce !=nil {_eaca ,_afc :=_cb .GetIntVal (_dgce );if !_afc {_d .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0042\u0044C\u0020\u006f\u0070=\u0025\u0073\u002e\u0020\u0042\u0061\u0064\u0020\u006eum\u0065\u0072\u0069c\u0061\u006c \u006f\u0062\u006a\u0065\u0063\u0074.\u0020\u006f=\u0025\u0073",_cadd ,_dgce );
};_cdeg =_eaca ;}else {_cdeg =-1;};_fbc :=_ecbc .Get ("\u0041\u0063\u0074\u0075\u0061\u006c\u0054\u0065\u0078\u0074");if _fbc !=nil {_gbbb =_fbc .String ();};case "\u0045\u004d\u0043":_cdeg =-1;_gbbb ="";case "\u0042\u0054":if _fbe {_d .Log .Debug ("\u0042\u0054\u0020\u0063\u0061\u006c\u006c\u0065\u0064\u0020\u0077\u0068\u0069\u006c\u0065 \u0069n\u0020\u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
_eaec ._afbb =append (_eaec ._afbb ,_cdb ._ebfd ...);};_fbe =true ;_gbe :=_ecag ;if _gaga {_gbe =_gf .GraphicsState {};_gbe .CTM =_bgce ._daac ;};_gbe .CTM =_gecg .Mult (_gbe .CTM );_cdb =_cbfcf (_agd ,_dfgg ,_gbe ,&_edabe ,&_bgde );_bgce ._ebaf =_cdb ;
case "\u0045\u0054":if !_fbe {_d .Log .Debug ("\u0045\u0054\u0020ca\u006c\u006c\u0065\u0064\u0020\u006f\u0075\u0074\u0073i\u0064e\u0020o\u0066 \u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");};_fbe =false ;_eaec ._afbb =append (_eaec ._afbb ,_cdb ._ebfd ...);
_cdb .reset ();case "\u0054\u002a":_cdb .nextLine ();case "\u0054\u0064":if _abda ,_fdg :=_cdb .checkOp (_cadd ,2,true );!_abda {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fdg );return _fdg ;};_cbde ,_bbc ,_gfcab :=_bdgce (_cadd .Params );
if _gfcab !=nil {return _gfcab ;};_cdb .moveText (_cbde ,_bbc );case "\u0054\u0044":if _bece ,_efc :=_cdb .checkOp (_cadd ,2,true );!_bece {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_efc );return _efc ;
};_caca ,_baeg ,_ecc :=_bdgce (_cadd .Params );if _ecc !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ecc );return _ecc ;};_cdb .moveTextSetLeading (_caca ,_baeg );case "\u0054\u006a":if _cgab ,_ebba :=_cdb .checkOp (_cadd ,1,true );
!_cgab {_d .Log .Debug ("\u0045\u0052\u0052\u004fR:\u0020\u0054\u006a\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0065\u0072\u0072\u003d%\u0076",_cadd ,_ebba );return _ebba ;};_afba :=_cb .TraceToDirectObject (_cadd .Params [0]);_gecd ,_ecaa :=_cb .GetStringBytes (_afba );
if !_ecaa {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020T\u006a\u0020o\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074S\u0074\u0072\u0069\u006e\u0067\u0042\u0079\u0074\u0065\u0073\u0020\u0066a\u0069\u006c\u0065\u0064",_cadd );return _cb .ErrTypeError ;
};return _cdb .showText (_afba ,_gecd ,_cdeg ,_gbbb );case "\u0054\u004a":if _daff ,_fbed :=_cdb .checkOp (_cadd ,1,true );!_daff {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fbed );return _fbed ;
};_cda ,_faga :=_cb .GetArray (_cadd .Params [0]);if !_faga {_d .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_cadd );
return _dafe ;};return _cdb .showTextAdjusted (_cda ,_cdeg ,_gbbb );case "\u0027":if _bccc ,_ece :=_cdb .checkOp (_cadd ,1,true );!_bccc {_d .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0027\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ece );return _ece ;
};_ebe :=_cb .TraceToDirectObject (_cadd .Params [0]);_gfbf ,_aeg :=_cb .GetStringBytes (_ebe );if !_aeg {_d .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020'\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_cadd );
return _cb .ErrTypeError ;};_cdb .nextLine ();return _cdb .showText (_ebe ,_gfbf ,_cdeg ,_gbbb );case "\u0022":if _eed ,_ddeb :=_cdb .checkOp (_cadd ,3,true );!_eed {_d .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0022\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ddeb );
return _ddeb ;};_cbfc ,_eebba ,_cdaa :=_bdgce (_cadd .Params [:2]);if _cdaa !=nil {return _cdaa ;};_fcf :=_cb .TraceToDirectObject (_cadd .Params [2]);_fbfe ,_ggc :=_cb .GetStringBytes (_fcf );if !_ggc {_d .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020\"\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_cadd );
return _cb .ErrTypeError ;};_cdb .setCharSpacing (_cbfc );_cdb .setWordSpacing (_eebba );_cdb .nextLine ();return _cdb .showText (_fcf ,_fbfe ,_cdeg ,_gbbb );case "\u0054\u004c":_age ,_bead :=_gbac (_cadd );if _bead !=nil {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004c\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bead );
return _bead ;};_cdb .setTextLeading (_age );case "\u0054\u0063":_gfcf ,_abgd :=_gbac (_cadd );if _abgd !=nil {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0063\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_abgd );return _abgd ;};_cdb .setCharSpacing (_gfcf );
case "\u0054\u0066":if _ccecf ,_ccecd :=_cdb .checkOp (_cadd ,2,true );!_ccecf {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0066\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ccecd );return _ccecd ;};_agec ,_daee :=_cb .GetNameVal (_cadd .Params [0]);
if !_daee {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u004ea\u006d\u0065\u0056\u0061\u006c\u0020\u0066a\u0069\u006c\u0065\u0064",_cadd );return _cb .ErrTypeError ;};_fddb ,_dafc :=_cb .GetNumberAsFloat (_cadd .Params [1]);
if !_daee {_d .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u0046\u006c\u006f\u0061\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065d\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cadd ,_dafc );
return _dafc ;};_dafc =_cdb .setFont (_agec ,_fddb );_cdb ._agba =_bfb .Is (_dafc ,_cb .ErrNotSupported );if _dafc !=nil &&!_cdb ._agba {return _dafc ;};case "\u0054\u006d":if _fbb ,_egd :=_cdb .checkOp (_cadd ,6,true );!_fbb {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u006d\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_egd );
return _egd ;};_bdbf ,_efdag :=_cb .GetNumbersAsFloat (_cadd .Params );if _efdag !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_efdag );return _efdag ;};_cdb .setTextMatrix (_bdbf );case "\u0054\u0072":if _ggg ,_acf :=_cdb .checkOp (_cadd ,1,true );
!_ggg {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0072\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_acf );return _acf ;};_bfaf ,_dfa :=_cb .GetIntVal (_cadd .Params [0]);if !_dfa {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0072\u0020\u006f\u0070\u003d\u0025\u0073 \u0047e\u0074\u0049\u006e\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_cadd );
return _cb .ErrTypeError ;};_cdb .setTextRenderMode (_bfaf );case "\u0054\u0073":if _aceb ,_ceag :=_cdb .checkOp (_cadd ,1,true );!_aceb {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0073\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ceag );return _ceag ;
};_ecad ,_faff :=_cb .GetNumberAsFloat (_cadd .Params [0]);if _faff !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_faff );return _faff ;};_cdb .setTextRise (_ecad );case "\u0054\u0077":if _ccfe ,_gcb :=_cdb .checkOp (_cadd ,1,true );
!_ccfe {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gcb );return _gcb ;};_eacb ,_ggff :=_cb .GetNumberAsFloat (_cadd .Params [0]);if _ggff !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ggff );
return _ggff ;};_cdb .setWordSpacing (_eacb );case "\u0054\u007a":if _caee ,_dddb :=_cdb .checkOp (_cadd ,1,true );!_caee {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dddb );return _dddb ;};_cggg ,_gfgga :=_cb .GetNumberAsFloat (_cadd .Params [0]);
if _gfgga !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gfgga );return _gfgga ;};_cdb .setHorizScaling (_cggg );case "\u0063\u006d":if !_gaga {_bgce ._daac =_ecag .CTM ;};if _bgce ._daac .Singular (){_agfd :=_ed .IdentityMatrix ().Translate (_bgce ._daac .Translation ());
_d .Log .Debug ("S\u0069n\u0067\u0075\u006c\u0061\u0072\u0020\u0063\u0074m\u003d\u0025\u0073\u2192%s",_bgce ._daac ,_agfd );_bgce ._daac =_agfd ;};if _efcb {_d .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_bgce ._daac );};case "\u006d":if len (_cadd .Params )!=2{_d .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_be );
return nil ;};_cfe ,_gbd :=_cb .GetNumbersAsFloat (_cadd .Params );if _gbd !=nil {return _gbd ;};_bgce .moveTo (_cfe [0],_cfe [1]);case "\u006c":if len (_cadd .Params )!=2{_d .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_be );
return nil ;};_fcg ,_gdeb :=_cb .GetNumbersAsFloat (_cadd .Params );if _gdeb !=nil {return _gdeb ;};_bgce .lineTo (_fcg [0],_fcg [1]);case "\u0063":if len (_cadd .Params )!=6{return _be ;};_fea ,_cada :=_cb .GetNumbersAsFloat (_cadd .Params );if _cada !=nil {return _cada ;
};_d .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_fea );_bgce .cubicTo (_fea [0],_fea [1],_fea [2],_fea [3],_fea [4],_fea [5]);case "\u0076","\u0079":if len (_cadd .Params )!=4{return _be ;
};_ebdd ,_acdb :=_cb .GetNumbersAsFloat (_cadd .Params );if _acdb !=nil {return _acdb ;};_d .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_ebdd );_bgce .quadraticTo (_ebdd [0],_ebdd [1],_ebdd [2],_ebdd [3]);
case "\u0068":_bgce .closePath ();case "\u0072\u0065":if len (_cadd .Params )!=4{return _be ;};_egbd ,_defa :=_cb .GetNumbersAsFloat (_cadd .Params );if _defa !=nil {return _defa ;};_bgce .drawRectangle (_egbd [0],_egbd [1],_egbd [2],_egbd [3]);_bgce .closePath ();
case "\u0053":_bgce .stroke (&_eaec ._edag );_bgce .clearPath ();case "\u0073":_bgce .closePath ();_bgce .stroke (&_eaec ._edag );_bgce .clearPath ();case "\u0046":_bgce .fill (&_eaec ._dffe );_bgce .clearPath ();case "\u0066","\u0066\u002a":_bgce .closePath ();
_bgce .fill (&_eaec ._dffe );_bgce .clearPath ();case "\u0042","\u0042\u002a":_bgce .fill (&_eaec ._dffe );_bgce .stroke (&_eaec ._edag );_bgce .clearPath ();case "\u0062","\u0062\u002a":_bgce .closePath ();_bgce .fill (&_eaec ._dffe );_bgce .stroke (&_eaec ._edag );
_bgce .clearPath ();case "\u006e":_bgce .clearPath ();case "\u0044\u006f":if len (_cadd .Params )==0{_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0058\u004fbj\u0065c\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006f\u0070\u0065\u0072\u0061n\u0064\u0020\u0066\u006f\u0072\u0020\u0044\u006f\u0020\u006f\u0070\u0065\u0072\u0061\u0074\u006f\u0072.\u0020\u0047\u006f\u0074\u0020\u0025\u002b\u0076\u002e",_cadd .Params );
return _cb .ErrRangeError ;};_bgff ,_gfcda :=_cb .GetName (_cadd .Params [0]);if !_gfcda {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0044\u006f\u0020\u006f\u0070e\u0072a\u0074\u006f\u0072\u0020\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006fp\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u002b\u0076\u002e",_cadd .Params [0]);
return _cb .ErrTypeError ;};_ ,_acg :=_dfgg .GetXObjectByName (*_bgff );if _acg !=_bf .XObjectTypeForm {break ;};_feab ,_gfcda :=_agd ._bac [_bgff .String ()];if !_gfcda {_bgdd ,_dgcd :=_dfgg .GetXObjectFormByName (*_bgff );if _dgcd !=nil {_d .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_dgcd );
return _dgcd ;};_gdbg ,_dgcd :=_bgdd .GetContentStream ();if _dgcd !=nil {_d .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_dgcd );return _dgcd ;};_eagc :=_bgdd .Resources ;if _eagc ==nil {_eagc =_dfgg ;};_fgfg :=_ecag .CTM ;if _aee ,_agcd :=_cb .GetArray (_bgdd .Matrix );
_agcd {_dfad ,_egda :=_aee .GetAsFloat64Slice ();if _egda !=nil {return _egda ;};if len (_dfad )!=6{return _be ;};_cbe :=_ed .NewMatrix (_dfad [0],_dfad [1],_dfad [2],_dfad [3],_dfad [4],_dfad [5]);_fgfg =_ecag .CTM .Mult (_cbe );};_eea ,_ecce ,_ddac ,_dgcd :=_agd .extractPageText (string (_gdbg ),_eagc ,_gecg .Mult (_fgfg ),_cagd +1,false );
if _dgcd !=nil {_d .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_dgcd );return _dgcd ;};_feab =textResult {*_eea ,_ecce ,_ddac };_agd ._bac [_bgff .String ()]=_feab ;};_bgce ._daac =_ecag .CTM ;if _efcb {_d .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_bgce ._daac );
};_eaec ._afbb =append (_eaec ._afbb ,_feab ._ecef ._afbb ...);_eaec ._edag =append (_eaec ._edag ,_feab ._ecef ._edag ...);_eaec ._dffe =append (_eaec ._dffe ,_feab ._ecef ._dffe ...);_edabe ._egcg +=_feab ._abce ;_edabe ._acec +=_feab ._cec ;case "\u0072\u0067","\u0067","\u006b","\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_cdb ._cbge .ColorspaceNonStroking =_ecag .ColorspaceNonStroking ;
_cdb ._cbge .ColorNonStroking =_ecag .ColorNonStroking ;case "\u0052\u0047","\u0047","\u004b","\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_cdb ._cbge .ColorspaceStroking =_ecag .ColorspaceStroking ;_cdb ._cbge .ColorStroking =_ecag .ColorStroking ;
};return nil ;});_dafe =_afbc .Process (_afff );if _agd ._aag !=nil &&_agd ._aag .IncludeAnnotations &&!_gaga {for _ ,_bfbe :=range _agd ._gec {_egdf ,_ebbe :=_cb .GetDict (_bfbe .AP );if !_ebbe {continue ;};_effb ,_ebbe :=_egdf .Get ("\u004e").(*_cb .PdfObjectStream );
if !_ebbe {continue ;};_egdc ,_abe :=_cb .DecodeStream (_effb );if _abe !=nil {_d .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u006f\u006e\u0020\u0064\u0065c\u006f\u0064\u0065\u0020\u0073\u0074\u0072\u0065\u0061\u006d:\u0020\u0025\u0076",_abe );continue ;
};_abed :=_effb .PdfObjectDictionary .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s");_gbga ,_abe :=_bf .NewPdfPageResourcesFromDict (_abed .(*_cb .PdfObjectDictionary ));if _abe !=nil {_d .Log .Debug ("\u0045\u0072\u0072\u006f\u0072 \u006f\u006e\u0020\u0067\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0061\u006en\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0020\u0072\u0065\u0073\u006f\u0075\u0072\u0063\u0065\u0073\u003a\u0020\u0025\u0076",_abe );
continue ;};_agbg :=_ed .IdentityMatrix ();_gafe ,_ebbe :=_effb .PdfObjectDictionary .Get ("\u004d\u0061\u0074\u0072\u0069\u0078").(*_cb .PdfObjectArray );if _ebbe {_debf ,_gbcg :=_gafe .GetAsFloat64Slice ();if _gbcg !=nil {_d .Log .Debug ("\u0045\u0072\u0072or\u0020\u006f\u006e\u0020\u0067\u0065\u0074\u0074\u0069n\u0067 \u0066l\u006fa\u0074\u0036\u0034\u0020\u0073\u006c\u0069\u0063\u0065\u003a\u0020\u0025\u0076",_gbcg );
continue ;};if len (_debf )!=6{_d .Log .Debug ("I\u006e\u0076\u0061\u006c\u0069\u0064 \u006d\u0061\u0074\u0072\u0069\u0078\u0020\u0073\u006ci\u0063\u0065\u0020l\u0065n\u0067\u0074\u0068");continue ;};_agbg =_ed .NewMatrix (_debf [0],_debf [1],_debf [2],_debf [3],_debf [4],_debf [5]);
};_edd ,_ebbe :=_agd ._eda [_effb .String ()];if !_ebbe {_adde ,_fcdbb ,_caae ,_fff :=_agd .extractPageText (string (_egdc ),_gbga ,_agbg ,_cagd +1,true );if _fff !=nil {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u0020\u0065x\u0074\u0072a\u0063\u0074\u0069\u006e\u0067\u0020\u0061\u006en\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0020\u0074\u0065\u0078\u0074s\u003a\u0020\u0025\u0076",_fff );
continue ;};_edd =textResult {*_adde ,_fcdbb ,_caae };_agd ._eda [_effb .String ()]=_edd ;};_eaec ._afbb =append (_eaec ._afbb ,_edd ._ecef ._afbb ...);_eaec ._edag =append (_eaec ._edag ,_edd ._ecef ._edag ...);_eaec ._dffe =append (_eaec ._dffe ,_edd ._ecef ._dffe ...);
_edabe ._egcg +=_edd ._abce ;_edabe ._acec +=_edd ._cec ;};};return _eaec ,_edabe ._egcg ,_edabe ._acec ,_dafe ;};func _facae (_effe ,_agff bounded )float64 {_ggbe :=_agcb (_effe ,_agff );if !_bgfbd (_ggbe ){return _ggbe ;};return _cedg (_effe ,_agff );
};func (_feddb *wordBag )arrangeText (_aaab bool )*textPara {_feddb .sort ();if _ggge {_feddb .removeDuplicates ();};var _dffca []*textLine ;for _ ,_abedg :=range _feddb .depthIndexes (){for !_feddb .empty (_abedg ){_dffad :=_feddb .firstReadingIndex (_abedg );
_dedd :=_feddb .firstWord (_dffad );_ddgga :=_bfbded (_feddb ,_dffad );_eecg :=_dedd ._gbaff ;if _eecg < _aade {_eecg =_aade ;};_dggg :=_dedd ._afefd -_bdfd *_eecg ;_bbafg :=_dedd ._afefd +_bdfd *_eecg ;_adbb :=_cfcf *_eecg ;_dbfgg :=_fdedb *_eecg ;_ceed :for {var _ebcc *textWord ;
_afbaa :=0;for _ ,_ggbeg :=range _feddb .depthBand (_dggg ,_bbafg ){_bfbgg :=_feddb .highestWord (_ggbeg ,_dggg ,_bbafg );if _bfbgg ==nil {continue ;};_bdfb :=_febe (_bfbgg ,_ddgga ._bbfda [len (_ddgga ._bbfda )-1]);if _bdfb < -_dbfgg {break _ceed ;};if !_aaab &&_bdfb > _adbb {continue ;
};if _ebcc !=nil &&_cedg (_bfbgg ,_ebcc )>=0{continue ;};_ebcc =_bfbgg ;_afbaa =_ggbeg ;};if _ebcc ==nil {break ;};_ddgga .pullWord (_feddb ,_ebcc ,_afbaa );};_ddgga .markWordBoundaries ();_dffca =append (_dffca ,_ddgga );};};if len (_dffca )==0{return nil ;
};_bd .Slice (_dffca ,func (_bgef ,_ffef int )bool {return _facae (_dffca [_bgef ],_dffca [_ffef ])< 0});_acegb :=_bada (_feddb .PdfRectangle ,_dffca );if _ceff {_d .Log .Info ("\u0061\u0072\u0072an\u0067\u0065\u0054\u0065\u0078\u0074\u0020\u0021\u0021\u0021\u0020\u0070\u0061\u0072\u0061\u003d\u0025\u0073",_acegb .String ());
if _bfed {for _dgbe ,_caeea :=range _acegb ._efff {_deg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dgbe ,_caeea .String ());if _daffg {for _dedba ,_fcaab :=range _caeea ._bbfda {_deg .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_dedba ,_fcaab .String ());
for _cabg ,_abfac :=range _fcaab ._bdaeb {_deg .Printf ("\u00251\u0032\u0064\u003a\u0020\u0025\u0073\n",_cabg ,_abfac .String ());};};};};};};return _acegb ;};type textState struct{_dbad float64 ;_bfec float64 ;_fge float64 ;_abf float64 ;_bbb float64 ;
_deca RenderMode ;_cgbc float64 ;_bddc *_bf .PdfFont ;_cdef _bf .PdfRectangle ;_egcg int ;_acec int ;};func (_ddfd *textPara )writeCellText (_aeba _bc .Writer ){for _febbb ,_efdb :=range _ddfd ._efff {_ebca :=_efdb .text ();_cecea :=_bcbdc &&_efdb .endsInHyphen ()&&_febbb !=len (_ddfd ._efff )-1;
if _cecea {_ebca =_afde (_ebca );};_aeba .Write ([]byte (_ebca ));if !(_cecea ||_febbb ==len (_ddfd ._efff )-1){_aeba .Write ([]byte (_gdggf (_efdb ._eeage ,_ddfd ._efff [_febbb +1]._eeage )));};};};

// PageImages represents extracted images on a PDF page with spatial information:
// display position and size.
type PageImages struct{Images []ImageMark ;};func (_cbdeb *wordBag )empty (_accg int )bool {_ ,_bcdag :=_cbdeb ._gecfd [_accg ];return !_bcdag };

// ExtractPageImages returns the image contents of the page extractor, including data
// and position, size information for each image.
// A set of options to control page image extraction can be passed in. The options
// parameter can be nil for the default options. By default, inline stencil masks
// are not extracted.
func (_gbc *Extractor )ExtractPageImages (options *ImageExtractOptions )(*PageImages ,error ){_gcg :=&imageExtractContext {_fgg :options };_ggf :=_gcg .extractContentStreamImages (_gbc ._gbb ,_gbc ._ac );if _ggf !=nil {return nil ,_ggf ;};return &PageImages {Images :_gcg ._gcgg },nil ;
};func (_aeda *stateStack )push (_fdga *textState ){_fedg :=*_fdga ;*_aeda =append (*_aeda ,&_fedg )};

// String returns a description of `k`.
func (_dggbf markKind )String ()string {_agbge ,_caddd :=_cacgbc [_dggbf ];if !_caddd {return _deg .Sprintf ("\u004e\u006f\u0074\u0020\u0061\u0020\u006d\u0061\u0072k\u003a\u0020\u0025\u0064",_dggbf );};return _agbge ;};func _deaf (_eeaf _bf .PdfRectangle )rulingKind {_bfdd :=_eeaf .Width ();
_cdfdd :=_eeaf .Height ();if _bfdd > _cdfdd {if _bfdd >=_fdccd {return _faec ;};}else {if _cdfdd >=_fdccd {return _acegd ;};};return _acdg ;};func (_ecd *PageFonts )extractPageResourcesToFont (_efe *_bf .PdfPageResources )error {if _efe .Font ==nil {return _bfb .New (_gff );
};_bdbe ,_dbb :=_cb .GetDict (_efe .Font );if !_dbb {return _bfb .New (_ee );};for _ ,_feb :=range _bdbe .Keys (){var (_ded =true ;_da []byte ;_degec string ;);_gda ,_fee :=_efe .GetFontByName (_feb );if !_fee {return _bfb .New (_eac );};_fab ,_ebf :=_bf .NewPdfFontFromPdfObject (_gda );
if _ebf !=nil {return _ebf ;};_eee :=_fab .FontDescriptor ();_bbd :=_fab .FontDescriptor ().FontName .String ();_ead :=_fab .Subtype ();if _bda (_ecd .Fonts ,_bbd ){continue ;};if len (_fab .ToUnicode ())==0{_ded =false ;};if _eee .FontFile !=nil {if _beg ,_cbg :=_cb .GetStream (_eee .FontFile );
_cbg {_da ,_ebf =_cb .DecodeStream (_beg );if _ebf !=nil {return _ebf ;};_degec =_bbd +"\u002e\u0070\u0066\u0062";};}else if _eee .FontFile2 !=nil {if _bgc ,_gaeg :=_cb .GetStream (_eee .FontFile2 );_gaeg {_da ,_ebf =_cb .DecodeStream (_bgc );if _ebf !=nil {return _ebf ;
};_degec =_bbd +"\u002e\u0074\u0074\u0066";};}else if _eee .FontFile3 !=nil {if _fbg ,_ccg :=_cb .GetStream (_eee .FontFile3 );_ccg {_da ,_ebf =_cb .DecodeStream (_fbg );if _ebf !=nil {return _ebf ;};_degec =_bbd +"\u002e\u0063\u0066\u0066";};};if len (_degec )< 1{_d .Log .Debug (_eb );
};_fgc :=Font {FontName :_bbd ,PdfFont :_fab ,IsCID :_fab .IsCID (),IsSimple :_fab .IsSimple (),ToUnicode :_ded ,FontType :_ead ,FontData :_da ,FontFileName :_degec ,FontDescriptor :_eee };_ecd .Fonts =append (_ecd .Fonts ,_fgc );};return nil ;};func (_dcgg *shapesState )clearPath (){_dcgg ._eccd =nil ;
_dcgg ._cfff =false ;if _efcb {_d .Log .Info ("\u0043\u004c\u0045A\u0052\u003a\u0020\u0073\u0073\u003d\u0025\u0073",_dcgg );};};func _gceaba (_efbab _bf .PdfColorspace ,_abbga _bf .PdfColor )_bcc .Color {if _efbab ==nil ||_abbga ==nil {return _bcc .Black ;
};_ceba ,_bfgdb :=_efbab .ColorToRGB (_abbga );if _bfgdb !=nil {_d .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006fu\u006c\u0064\u0020no\u0074\u0020\u0063\u006f\u006e\u0076e\u0072\u0074\u0020\u0063\u006f\u006c\u006f\u0072\u0020\u0025\u0076\u0020\u0028\u0025\u0076)\u0020\u0074\u006f\u0020\u0052\u0047\u0042\u003a \u0025\u0073",_abbga ,_efbab ,_bfgdb );
return _bcc .Black ;};_adcg ,_adeaeb :=_ceba .(*_bf .PdfColorDeviceRGB );if !_adeaeb {_d .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0065\u0064 \u0063\u006f\u006c\u006f\u0072\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020i\u006e\u0020\u0074\u0068\u0065\u0020\u0052\u0047\u0042\u0020\u0063\u006flo\u0072\u0073\u0070\u0061\u0063\u0065\u003a\u0020\u0025\u0076",_ceba );
return _bcc .Black ;};return _bcc .NRGBA {R :uint8 (_adcg .R ()*255),G :uint8 (_adcg .G ()*255),B :uint8 (_adcg .B ()*255),A :uint8 (255)};};func _fbdc (_gfag float64 )float64 {return _eadea *_aa .Round (_gfag /_eadea )};func _bfgcb (_cggcc []*textWord ,_feee int )[]*textWord {_cdadd :=len (_cggcc );
copy (_cggcc [_feee :],_cggcc [_feee +1:]);return _cggcc [:_cdadd -1];};const (_fafbe =false ;_befg =false ;_bbbae =false ;_gegb =false ;_efcb =false ;_gecgff =false ;_dgad =false ;_egbc =false ;_ceff =false ;_bfed =_ceff &&true ;_daffg =_bfed &&false ;
_ebfga =_ceff &&true ;_cdgfc =false ;_caff =_cdgfc &&false ;_becd =_cdgfc &&true ;_cfef =false ;_cabe =_cfef &&false ;_fafe =_cfef &&false ;_bcde =_cfef &&true ;_bfdca =_cfef &&false ;_fabe =_cfef &&false ;);func _eaed (_deed []*wordBag )[]*wordBag {if len (_deed )<=1{return _deed ;
};if _ceff {_d .Log .Info ("\u006d\u0065\u0072\u0067\u0065\u0057\u006f\u0072\u0064B\u0061\u0067\u0073\u003a");};_bd .Slice (_deed ,func (_eced ,_fccg int )bool {_dbfe ,_cbgf :=_deed [_eced ],_deed [_fccg ];_aagg :=_dbfe .Width ()*_dbfe .Height ();_baff :=_cbgf .Width ()*_cbgf .Height ();
if _aagg !=_baff {return _aagg > _baff ;};if _dbfe .Height ()!=_cbgf .Height (){return _dbfe .Height ()> _cbgf .Height ();};return _eced < _fccg ;});var _ddgg []*wordBag ;_cgdab :=make (intSet );for _dabe :=0;_dabe < len (_deed );_dabe ++{if _cgdab .has (_dabe ){continue ;
};_feff :=_deed [_dabe ];for _faca :=_dabe +1;_faca < len (_deed );_faca ++{if _cgdab .has (_dabe ){continue ;};_gged :=_deed [_faca ];_gefe :=_feff .PdfRectangle ;_gefe .Llx -=_feff ._bcf ;if _bdcge (_gefe ,_gged .PdfRectangle ){_feff .absorb (_gged );
_cgdab .add (_faca );};};_ddgg =append (_ddgg ,_feff );};if len (_deed )!=len (_ddgg )+len (_cgdab ){_d .Log .Error ("\u006d\u0065\u0072ge\u0057\u006f\u0072\u0064\u0042\u0061\u0067\u0073\u003a \u0025d\u2192%\u0064 \u0061\u0062\u0073\u006f\u0072\u0062\u0065\u0064\u003d\u0025\u0064",len (_deed ),len (_ddgg ),len (_cgdab ));
};return _ddgg ;};func (_eaeaf *ruling )alignsPrimary (_faag *ruling )bool {return _eaeaf ._daea ==_faag ._daea &&_aa .Abs (_eaeaf ._gdge -_faag ._gdge )< _gece *0.5;};func (_dgbcb *textTable )bbox ()_bf .PdfRectangle {return _dgbcb .PdfRectangle };var _fbeee string ="\u0028\u003f\u0069\u0029\u005e\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028?\u003a\u0044\u007cM\u0029\u007c\u0044\u003f\u0043{\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028\u003f\u003a\u004c\u007c\u0043\u0029\u007cL\u003f\u0058\u007b\u0030\u002c\u0033}\u0029\u0028\u0049\u0028\u003f\u003a\u0056\u007c\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u005c\u0029\u007c\u005c\u002e\u0029\u007c\u005e\u005c\u0028\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028\u003f\u003aD\u007cM\u0029\u007c\u0044\u003f\u0043\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028?\u003a\u004c\u007c\u0043\u0029\u007c\u004c?\u0058\u007b0\u002c\u0033\u007d\u0029(\u0049\u0028\u003f\u003a\u0056|\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u005c\u0029";
func (_dccf rulingList )aligned ()bool {if len (_dccf )< 2{return false ;};_ffdff :=make (map[*ruling ]int );_ffdff [_dccf [0]]=0;for _ ,_gaffe :=range _dccf [1:]{_ebce :=false ;for _aefd :=range _ffdff {if _gaffe .gridIntersecting (_aefd ){_ffdff [_aefd ]++;
_ebce =true ;break ;};};if !_ebce {_ffdff [_gaffe ]=0;};};_efbgc :=0;for _ ,_fcgeg :=range _ffdff {if _fcgeg ==0{_efbgc ++;};};_gbfca :=float64 (_efbgc )/float64 (len (_dccf ));_afbef :=_gbfca <=1.0-_defaa ;if _cfef {_d .Log .Info ("\u0061\u006c\u0069\u0067\u006e\u0065\u0064\u003d\u0025\u0074\u0020\u0075\u006em\u0061\u0074\u0063\u0068\u0065\u0064=\u0025\u002e\u0032\u0066\u003d\u0025\u0064\u002f\u0025\u0064\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_afbef ,_gbfca ,_efbgc ,len (_dccf ),_dccf .String ());
};return _afbef ;};func _bgfbd (_fdbd float64 )bool {return _aa .Abs (_fdbd )< _caeg };func (_daec *textObject )setCharSpacing (_dgbg float64 ){if _daec ==nil {return ;};_daec ._gdga ._dbad =_dgbg ;if _gecgff {_d .Log .Info ("\u0073\u0065t\u0043\u0068\u0061\u0072\u0053\u0070\u0061\u0063\u0069\u006e\u0067\u003a\u0020\u0025\u002e\u0032\u0066\u0020\u0073\u0074\u0061\u0074e=\u0025\u0073",_dgbg ,_daec ._gdga .String ());
};};func _bada (_bfeac _bf .PdfRectangle ,_edce []*textLine )*textPara {return &textPara {PdfRectangle :_bfeac ,_efff :_edce };};const (_bcbdc =true ;_ggge =true ;_ebed =true ;_cgbfge =false ;_baae =false ;_ecede =6;_bge =3.0;_badc =200;_gegg =true ;_cafb =true ;
_gebf =true ;_bcbe =true ;_dcbf =false ;);func (_afdga rulingList )augmentGrid ()(rulingList ,rulingList ){_cdge ,_ggfc :=_afdga .vertsHorzs ();if len (_cdge )==0||len (_ggfc )==0{return _cdge ,_ggfc ;};_gcda ,_ccceg :=_cdge ,_ggfc ;_aagga :=_cdge .bbox ();
_fegf :=_ggfc .bbox ();if _cfef {_d .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0056\u003d\u0025\u0036\u002e\u0032\u0066",_aagga );_d .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0048\u003d\u0025\u0036\u002e\u0032\u0066",_fegf );
};var _dabf ,_abagd ,_egefc ,_dcde *ruling ;if _fegf .Llx < _aagga .Llx -_afa {_dabf =&ruling {_dfbf :_caeegd ,_daea :_acegd ,_gdge :_fegf .Llx ,_ggbc :_aagga .Lly ,_agbd :_aagga .Ury };_cdge =append (rulingList {_dabf },_cdge ...);};if _fegf .Urx > _aagga .Urx +_afa {_abagd =&ruling {_dfbf :_caeegd ,_daea :_acegd ,_gdge :_fegf .Urx ,_ggbc :_aagga .Lly ,_agbd :_aagga .Ury };
_cdge =append (_cdge ,_abagd );};if _aagga .Lly < _fegf .Lly -_afa {_egefc =&ruling {_dfbf :_caeegd ,_daea :_faec ,_gdge :_aagga .Lly ,_ggbc :_fegf .Llx ,_agbd :_fegf .Urx };_ggfc =append (rulingList {_egefc },_ggfc ...);};if _aagga .Ury > _fegf .Ury +_afa {_dcde =&ruling {_dfbf :_caeegd ,_daea :_faec ,_gdge :_aagga .Ury ,_ggbc :_fegf .Llx ,_agbd :_fegf .Urx };
_ggfc =append (_ggfc ,_dcde );};if len (_cdge )+len (_ggfc )==len (_afdga ){return _gcda ,_ccceg ;};_aadc :=append (_cdge ,_ggfc ...);_afdga .log ("u\u006e\u0061\u0075\u0067\u006d\u0065\u006e\u0074\u0065\u0064");_aadc .log ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0065d");
return _cdge ,_ggfc ;};func (_dfdf paraList )findGridTables (_daaf []gridTiling )[]*textTable {if _cdgfc {_d .Log .Info ("\u0066i\u006e\u0064\u0047\u0072\u0069\u0064\u0054\u0061\u0062\u006c\u0065s\u003a\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073",len (_dfdf ));
for _bfee ,_ebeg :=range _dfdf {_deg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bfee ,_ebeg );};};var _bfdcf []*textTable ;for _egdfc ,_fdgd :=range _daaf {_ecgb ,_aeaga :=_dfdf .findTableGrid (_fdgd );if _ecgb !=nil {_ecgb .log (_deg .Sprintf ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0057\u0069\u0074\u0068\u0047\u0072\u0069\u0064\u0073\u003a\u0020%\u0064",_egdfc ));
_bfdcf =append (_bfdcf ,_ecgb );_ecgb .markCells ();};for _gabgg :=range _aeaga {_gabgg ._edca =true ;};};if _cdgfc {_d .Log .Info ("\u0066i\u006e\u0064\u0047\u0072i\u0064\u0054\u0061\u0062\u006ce\u0073:\u0020%\u0064\u0020\u0074\u0061\u0062\u006c\u0065s",len (_bfdcf ));
};return _bfdcf ;};func (_eddf *shapesState )closePath (){if _eddf ._cfff {_eddf ._eccd =append (_eddf ._eccd ,_effg (_eddf ._acbeg ));_eddf ._cfff =false ;}else if len (_eddf ._eccd )==0{if _efcb {_d .Log .Debug ("\u0063\u006c\u006f\u0073eP\u0061\u0074\u0068\u0020\u0077\u0069\u0074\u0068\u0020\u006e\u006f\u0020\u0070\u0061t\u0068");
};_eddf ._cfff =false ;return ;};_eddf ._eccd [len (_eddf ._eccd )-1].close ();if _efcb {_d .Log .Info ("\u0063\u006c\u006f\u0073\u0065\u0050\u0061\u0074\u0068\u003a\u0020\u0025\u0073",_eddf );};};func (_ddfeb rulingList )connections (_aegg map[int ]intSet ,_ggab int )intSet {_ccgaa :=make (intSet );
_bfgb :=make (intSet );var _aaef func (int );_aaef =func (_abcgf int ){if !_bfgb .has (_abcgf ){_bfgb .add (_abcgf );for _ggfeg :=range _ddfeb {if _aegg [_ggfeg ].has (_abcgf ){_ccgaa .add (_ggfeg );};};for _gfbda :=range _ddfeb {if _ccgaa .has (_gfbda ){_aaef (_gfbda );
};};};};_aaef (_ggab );return _ccgaa ;};func _aaffd (_ggedf *textLine )bool {_gdcdf :=true ;_gecde :=-1;for _ ,_gaefe :=range _ggedf ._bbfda {for _ ,_ffga :=range _gaefe ._bdaeb {_ffcd :=_ffga ._ebfcb ;if _gecde ==-1{_gecde =_ffcd ;}else {if _gecde !=_ffcd {_gdcdf =false ;
break ;};};};};return _gdcdf ;};

// WriteToFile writes the edited content to `outputPath`.
func (_ddde *Editor )WriteToFile (outputPath string )error {_ccgc ,_efbf :=_ddde ._cef .ToWriter (nil );if _efbf !=nil {return _deg .Errorf ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0074\u006f\u0020c\u006f\u006e\u0076\u0065\u0072\u0074\u0020t\u006f\u0020\u0077\u0072\u0069\u0074\u0065\u0072\u0020\u0025\u0076",_efbf );
};_ccgc .WriteToFile (outputPath );return nil ;};var _cfcc =_fc .MustCompile ("\u005e\u005c\u0073\u002a\u0028\u005c\u0064\u002b\u005c\u002e\u003f|\u005b\u0049\u0069\u0076\u005d\u002b\u0029\u005c\u0073\u002a\\\u0029\u003f\u0024");func (_ebebc paraList )findTableGrid (_agggff gridTiling )(*textTable ,map[*textPara ]struct{}){_aagdg :=len (_agggff ._cbeaa );
_bbcc :=len (_agggff ._bede );_fcfc :=textTable {_cgfe :true ,_ccfea :_aagdg ,_gecff :_bbcc ,_agcf :make (map[uint64 ]*textPara ,_aagdg *_bbcc ),_ebcde :make (map[uint64 ]compositeCell ,_aagdg *_bbcc )};_fcfc .PdfRectangle =_agggff .PdfRectangle ;_cebc :=make (map[*textPara ]struct{});
_acea :=int ((1.0-_dcdc )*float64 (_aagdg *_bbcc ));_ecaag :=0;if _bcde {_d .Log .Info ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0064\u0020\u0078\u0020%\u0064",_aagdg ,_bbcc );};for _fbgc ,_edgc :=range _agggff ._bede {_bedd ,_fcaf :=_agggff ._efde [_edgc ];
if !_fcaf {continue ;};for _efed ,_fdbgc :=range _agggff ._cbeaa {_edgfb ,_fdgbc :=_bedd [_fdbgc ];if !_fdgbc {continue ;};_fgbdc :=_ebebc .inTile (_edgfb );if len (_fgbdc )==0{_ecaag ++;if _ecaag > _acea {if _bcde {_d .Log .Info ("\u0021\u006e\u0075m\u0045\u006d\u0070\u0074\u0079\u003d\u0025\u0064",_ecaag );
};return nil ,nil ;};}else {_fcfc .putComposite (_efed ,_fbgc ,_fgbdc ,_edgfb .PdfRectangle );for _ ,_bgee :=range _fgbdc {_cebc [_bgee ]=struct{}{};};};};};_eebeb :=0;for _aabff :=0;_aabff < _aagdg ;_aabff ++{_bgagd :=_fcfc .get (_aabff ,0);if _bgagd ==nil ||!_bgagd ._afce {_eebeb ++;
};};if _eebeb ==0{if _bcde {_d .Log .Info ("\u0021\u006e\u0075m\u0048\u0065\u0061\u0064\u0065\u0072\u003d\u0030");};return nil ,nil ;};_efcfg :=_fcfc .reduceTiling (_agggff ,_cgbeb );_efcfg =_efcfg .subdivide ();return _efcfg ,_cebc ;};func (_eegc *stateStack )top ()*textState {if _eegc .empty (){return nil ;
};return (*_eegc )[_eegc .size ()-1];};func _bda (_caf []Font ,_feba string )bool {for _ ,_bddd :=range _caf {if _bddd .FontName ==_feba {return true ;};};return false ;};func (_fdc *textObject )showTextAdjusted (_eaga *_cb .PdfObjectArray ,_gffe int ,_gaff string )error {_bdf :=false ;
for _ ,_fadf :=range _eaga .Elements (){switch _fadf .(type ){case *_cb .PdfObjectFloat ,*_cb .PdfObjectInteger :_ddeac ,_ffgd :=_cb .GetNumberAsFloat (_fadf );if _ffgd !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004fR\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078t\u0041\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0042\u0061\u0064\u0020\u006e\u0075\u006d\u0065r\u0069\u0063\u0061\u006c\u0020a\u0072\u0067\u002e\u0020\u006f\u003d\u0025\u0073\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_fadf ,_eaga );
return _ffgd ;};_ggbf ,_dddea :=-_ddeac *0.001*_fdc ._gdga ._bbb ,0.0;if _bdf {_dddea ,_ggbf =_ggbf ,_dddea ;};_ffe :=_fgde (_ed .Point {X :_ggbf ,Y :_dddea });_fdc ._dcea .Concat (_ffe );case *_cb .PdfObjectString :_aecb :=_cb .TraceToDirectObject (_fadf );
_ffge ,_dee :=_cb .GetStringBytes (_aecb );if !_dee {_d .Log .Trace ("s\u0068\u006f\u0077\u0054\u0065\u0078\u0074\u0041\u0064j\u0075\u0073\u0074\u0065\u0064\u003a\u0020Ba\u0064\u0020\u0073\u0074r\u0069\u006e\u0067\u0020\u0061\u0072\u0067\u002e\u0020o=\u0025\u0073 \u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_fadf ,_eaga );
return _cb .ErrTypeError ;};_fdc .renderText (_aecb ,_ffge ,_gffe ,_gaff );default:_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078\u0074A\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0055\u006e\u0065\u0078p\u0065\u0063\u0074\u0065\u0064\u0020\u0074\u0079\u0070\u0065\u0020\u0028%T\u0029\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_fadf ,_eaga );
return _cb .ErrTypeError ;};};return nil ;};func (_bddab *textTable )emptyCompositeColumn (_ggfgc int )bool {for _gdfb :=0;_gdfb < _bddab ._gecff ;_gdfb ++{if _fffa ,_ceacd :=_bddab ._ebcde [_dfdbcc (_ggfgc ,_gdfb )];_ceacd {if len (_fffa .paraList )> 0{return false ;
};};};return true ;};func (_bffb paraList )yNeighbours (_bdab float64 )map[*textPara ][]int {_ddga :=make ([]event ,2*len (_bffb ));if _bdab ==0{for _fadce ,_gfagc :=range _bffb {_ddga [2*_fadce ]=event {_gfagc .Lly ,true ,_fadce };_ddga [2*_fadce +1]=event {_gfagc .Ury ,false ,_fadce };
};}else {for _cbecb ,_eacdb :=range _bffb {_ddga [2*_cbecb ]=event {_eacdb .Lly -_bdab *_eacdb .fontsize (),true ,_cbecb };_ddga [2*_cbecb +1]=event {_eacdb .Ury +_bdab *_eacdb .fontsize (),false ,_cbecb };};};return _bffb .eventNeighbours (_ddga );};func (_dedfc *textPara )taken ()bool {return _dedfc ==nil ||_dedfc ._edca };
var _bdb =[]string {"\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u004f\u004e","\u004f\u004e","\u0041\u004c","\u0045\u0054","\u0045\u0054","\u0041\u004c","\u0043\u0053","\u0041\u004c","\u004f\u004e","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0045\u0054","\u0041\u004e","\u0041\u004e","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004e","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c"};
func (_fcaa *wordBag )minDepth ()float64 {return _fcaa ._bdgd -(_fcaa .Ury -_fcaa ._bcf )};func (_dgccc *textObject )moveText (_dfec ,_acce float64 ){_dgccc .moveLP (_dfec ,_acce )};func (_eggd *wordBag )pullWord (_ggcc *textWord ,_cccgg int ,_acee map[int ]map[*textWord ]struct{}){_eggd .PdfRectangle =_caddg (_eggd .PdfRectangle ,_ggcc .PdfRectangle );
if _ggcc ._gbaff > _eggd ._bcf {_eggd ._bcf =_ggcc ._gbaff ;};_eggd ._gecfd [_cccgg ]=append (_eggd ._gecfd [_cccgg ],_ggcc );_acee [_cccgg ][_ggcc ]=struct{}{};};

// Replace takes a pattern and replaces all the texts that much the pattern with `replacement`.
func (_beec *Editor )Replace (pattern string ,replacement string ,pages []int )error {_febb :=map[int ]Match {};for _ ,_eff :=range pages {_bcdg ,_cbdd :=_beec ._cef .GetPage (_eff );if _cbdd !=nil {return _cbdd ;};_ccec ,_cbdd :=New (_bcdg );if _cbdd !=nil {return _cbdd ;
};_ddea ,_ ,_ ,_cbdd :=_ccec .ExtractPageText ();if _cbdd !=nil {return _cbdd ;};_fag :="";_dba :=_ddea .Text ();_bccb ,_cbdd :=_bcda (pattern ,_dba );if _cbdd !=nil {return _cbdd ;};_fgag :=_ddea .Marks ();_gcd :=[]Box {};for _ ,_bcg :=range _bccb {_cadb ,_bcgb ,_abge :=_dgcc (_bcg ,_fgag ,pattern );
if _abge !=nil {return _abge ;};_gacd :=_ddf (_cadb );if _abge !=nil {return _abge ;};_gcd =append (_gcd ,_bcgb );replacement ,_abge =_bgdg (_gacd ,replacement ,pattern );if _abge !=nil {return _abge ;};};_fag =_ddea .GetContentStreamOps ().String ();_cde :=Match {Pattern :pattern ,Indexes :_bccb ,Locations :_gcd };
_bcdg .SetContentStreams ([]string {_fag },_cb .NewFlateEncoder ());_febb [_eff ]=_cde ;};return nil ;};func (_ddacf *PageText )computeViews (){if _ddacf ._dcce ._cfg {_ddacf ._ada =_ddacf .getText ();return ;};_fae :=_ddacf .getParagraphs ();_eabac :=new (_af .Buffer );
_fae .writeText (_eabac );_ddacf ._ada =_eabac .String ();_ddacf ._ecda =_fae .toTextMarks ();_ddacf ._aef =_fae .tables ();if _cdgfc {_d .Log .Info ("\u0063\u006f\u006dpu\u0074\u0065\u0056\u0069\u0065\u0077\u0073\u003a\u0020\u0074\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064",len (_ddacf ._aef ));
};};func (_gggc *textTable )compositeColCorridors ()map[int ][]float64 {_bbbd :=make (map[int ][]float64 ,_gggc ._ccfea );if _cdgfc {_d .Log .Info ("\u0063\u006f\u006d\u0070o\u0073\u0069\u0074\u0065\u0043\u006f\u006c\u0043\u006f\u0072r\u0069d\u006f\u0072\u0073\u003a\u0020\u0077\u003d%\u0064\u0020",_gggc ._ccfea );
};for _gagfa :=0;_gagfa < _gggc ._ccfea ;_gagfa ++{_bbbd [_gagfa ]=nil ;};return _bbbd ;};func (_cead *textLine )pullWord (_bbgg *wordBag ,_aged *textWord ,_eddbb int ){_cead .appendWord (_aged );_bbgg .removeWord (_aged ,_eddbb );};type shapesState struct{_daac _ed .Matrix ;
_gcfb _ed .Matrix ;_eccd []*subpath ;_cfff bool ;_acbeg _ed .Point ;_ebaf *textObject ;};func _gdggf (_aegbe ,_cfde float64 )string {_edabc :=!_bgfbd (_aegbe -_cfde );if _edabc {return "\u000a";};return "\u0020";};func _bfae (_baag int ,_ffdd func (int ,int )bool )[]int {_cgdee :=make ([]int ,_baag );
for _fdabf :=range _cgdee {_cgdee [_fdabf ]=_fdabf ;};_bd .Slice (_cgdee ,func (_bfff ,_ecbd int )bool {return _ffdd (_cgdee [_bfff ],_cgdee [_ecbd ])});return _cgdee ;};func (_dad *stateStack )empty ()bool {return len (*_dad )==0};func (_abbbg *textPara )getListLines ()[]*textLine {var _gga []*textLine ;
_ecge :=_gcae (_abbbg ._efff );for _ ,_fbbfg :=range _abbbg ._efff {_cabcd :=_fbbfg ._bbfda [0]._dfaee [0];if _bbda (_cabcd ){_gga =append (_gga ,_fbbfg );};};_gga =append (_gga ,_ecge ...);return _gga ;};func _ebgf (_dagf _bf .PdfRectangle )*ruling {return &ruling {_daea :_faec ,_gdge :_dagf .Ury ,_ggbc :_dagf .Llx ,_agbd :_dagf .Urx };
};func (_gfef *wordBag )highestWord (_addf int ,_fagc ,_fecg float64 )*textWord {for _ ,_gace :=range _gfef ._gecfd [_addf ]{if _fagc <=_gace ._afefd &&_gace ._afefd <=_fecg {return _gace ;};};return nil ;};func (_ceae *shapesState )devicePoint (_eaagg ,_ffag float64 )_ed .Point {_fbgbc :=_ceae ._gcfb .Mult (_ceae ._daac );
_eaagg ,_ffag =_fbgbc .Transform (_eaagg ,_ffag );return _ed .NewPoint (_eaagg ,_ffag );};func _cgdb (_gcega *list ,_ebcg *string )string {_ceec :=_gb .Split (_gcega ._gcbe ,"\u000a");_acaa :=&_gb .Builder {};for _ ,_bgace :=range _ceec {if _bgace !=""{_acaa .WriteString (*_ebcg );
_acaa .WriteString (_bgace );_acaa .WriteString ("\u000a");};};return _acaa .String ();};func (_fgeg rulingList )primMinMax ()(float64 ,float64 ){_cdgce ,_cggf :=_fgeg [0]._gdge ,_fgeg [0]._gdge ;for _ ,_afdee :=range _fgeg [1:]{if _afdee ._gdge < _cdgce {_cdgce =_afdee ._gdge ;
}else if _afdee ._gdge > _cggf {_cggf =_afdee ._gdge ;};};return _cdgce ,_cggf ;};func (_dgff rectRuling )checkWidth (_bdeag ,_fcgfg float64 )(float64 ,bool ){_dgaa :=_fcgfg -_bdeag ;_efeeb :=_dgaa <=_gece ;return _dgaa ,_efeeb ;};func _caddg (_eddb ,_effaa _bf .PdfRectangle )_bf .PdfRectangle {return _bf .PdfRectangle {Llx :_aa .Min (_eddb .Llx ,_effaa .Llx ),Lly :_aa .Min (_eddb .Lly ,_effaa .Lly ),Urx :_aa .Max (_eddb .Urx ,_effaa .Urx ),Ury :_aa .Max (_eddb .Ury ,_effaa .Ury )};
};func (_beac *textObject )checkOp (_efaa *_gf .ContentStreamOperation ,_eggg int ,_gdd bool )(_cgbfe bool ,_gcaa error ){if _beac ==nil {var _aedb []_cb .PdfObject ;if _eggg > 0{_aedb =_efaa .Params ;if len (_aedb )> _eggg {_aedb =_aedb [:_eggg ];};};
_d .Log .Debug ("\u0025\u0023q \u006f\u0070\u0065r\u0061\u006e\u0064\u0020out\u0073id\u0065\u0020\u0074\u0065\u0078\u0074\u002e p\u0061\u0072\u0061\u006d\u0073\u003d\u0025+\u0076",_efaa .Operand ,_aedb );};if _eggg >=0{if len (_efaa .Params )!=_eggg {if _gdd {_gcaa =_bfb .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");
};_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_efaa .Operand ,_eggg ,len (_efaa .Params ),_efaa .Params );
return false ,_gcaa ;};};return true ,nil ;};func (_ffggf rulingList )asTiling ()gridTiling {if _bcde {_d .Log .Info ("r\u0075\u006ci\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0063s\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u002b\u002b\u002b\u0020\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_ffggf ));
};for _fgbg ,_ceede :=range _ffggf [1:]{_bfdce :=_ffggf [_fgbg ];if _bfdce .alignsPrimary (_ceede )&&_bfdce .alignsSec (_ceede ){_d .Log .Error ("a\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0044\u0075\u0070\u006c\u0069\u0063\u0061\u0074\u0065 \u0072\u0075\u006c\u0069\u006e\u0067\u0073\u002e\u000a\u0009v=\u0025\u0073\u000a\t\u0077=\u0025\u0073",_ceede ,_bfdce );
};};_ffggf .sortStrict ();_ffggf .log ("\u0073n\u0061\u0070\u0070\u0065\u0064");_bcdgd ,_bdeagf :=_ffggf .vertsHorzs ();_afgdc :=_bcdgd .primaries ();_ccadd :=_bdeagf .primaries ();_ebfac :=len (_afgdc )-1;_bdebfb :=len (_ccadd )-1;if _ebfac ==0||_bdebfb ==0{return gridTiling {};
};_afgeb :=_bf .PdfRectangle {Llx :_afgdc [0],Urx :_afgdc [_ebfac ],Lly :_ccadd [0],Ury :_ccadd [_bdebfb ]};if _bcde {_d .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0072\u0074s=\u0025\u0064",len (_bcdgd ));
for _fecd ,_eggad :=range _bcdgd {_deg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fecd ,_eggad );};_d .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0068\u006f\u0072\u007as=\u0025\u0064",len (_bdeagf ));
for _bbab ,_dade :=range _bdeagf {_deg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bbab ,_dade );};_d .Log .Info ("\u0072\u0075\u006c\u0069\u006eg\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067:\u0020\u0020\u0077\u0078\u0068\u003d\u0025\u0064\u0078\u0025\u0064\u000a\u0009\u006c\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a\u0009\u006c\u006c\u0079\u003d\u0025\u002e\u0032f",_ebfac ,_bdebfb ,_afgdc ,_ccadd );
};_fgbfe :=make ([]gridTile ,_ebfac *_bdebfb );for _edegd :=_bdebfb -1;_edegd >=0;_edegd --{_fcgb :=_ccadd [_edegd ];_feea :=_ccadd [_edegd +1];for _ebafb :=0;_ebafb < _ebfac ;_ebafb ++{_gddb :=_afgdc [_ebafb ];_egeef :=_afgdc [_ebafb +1];_badf :=_bcdgd .findPrimSec (_gddb ,_fcgb );
_egbf :=_bcdgd .findPrimSec (_egeef ,_fcgb );_bfdef :=_bdeagf .findPrimSec (_fcgb ,_gddb );_cgbff :=_bdeagf .findPrimSec (_feea ,_gddb );_fgdbb :=_bf .PdfRectangle {Llx :_gddb ,Urx :_egeef ,Lly :_fcgb ,Ury :_feea };_abef :=_dcbe (_fgdbb ,_badf ,_egbf ,_bfdef ,_cgbff );
_fgbfe [_edegd *_ebfac +_ebafb ]=_abef ;if _bcde {_deg .Printf ("\u0020\u0020\u0078\u003d\u0025\u0032\u0064\u0020\u0079\u003d\u0025\u0032\u0064\u003a\u0020%\u0073 \u0025\u0036\u002e\u0032\u0066\u0020\u0078\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_ebafb ,_edegd ,_abef .String (),_abef .Width (),_abef .Height ());
};};};if _bcde {_d .Log .Info ("r\u0075\u006c\u0069\u006e\u0067\u004c\u0069\u0073\u0074.\u0061\u0073\u0054\u0069\u006c\u0069\u006eg:\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0020\u0068\u006f\u0072\u0069zo\u006e\u0074a\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_afgeb );
};_agcg :=make ([]map[float64 ]gridTile ,_bdebfb );for _debce :=_bdebfb -1;_debce >=0;_debce --{if _bcde {_deg .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_debce );};_agcg [_debce ]=make (map[float64 ]gridTile ,_ebfac );for _gceaa :=0;_gceaa < _ebfac ;
_gceaa ++{_agbgd :=_fgbfe [_debce *_ebfac +_gceaa ];if _bcde {_deg .Printf ("\u0020\u0020\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gceaa ,_agbgd );};if !_agbgd ._cbegc {continue ;};_fdca :=_gceaa ;for _deefe :=_gceaa +1;!_agbgd ._eeba &&_deefe < _ebfac ;
_deefe ++{_eccc :=_fgbfe [_debce *_ebfac +_deefe ];_agbgd .Urx =_eccc .Urx ;_agbgd ._egfbb =_agbgd ._egfbb ||_eccc ._egfbb ;_agbgd ._ffdg =_agbgd ._ffdg ||_eccc ._ffdg ;_agbgd ._eeba =_eccc ._eeba ;if _bcde {_deg .Printf ("\u0020 \u0020%\u0034\u0064\u003a\u0020\u0025s\u0020\u2192 \u0025\u0073\u000a",_deefe ,_eccc ,_agbgd );
};_fdca =_deefe ;};if _bcde {_deg .Printf (" \u0020 \u0025\u0032\u0064\u0020\u002d\u0020\u0025\u0032d\u0020\u2192\u0020\u0025s\n",_gceaa ,_fdca ,_agbgd );};_gceaa =_fdca ;_agcg [_debce ][_agbgd .Llx ]=_agbgd ;};};_cfgdef :=make (map[float64 ]map[float64 ]gridTile ,_bdebfb );
_bbbf :=make (map[float64 ]map[float64 ]struct{},_bdebfb );for _efcaa :=_bdebfb -1;_efcaa >=0;_efcaa --{_baffb :=_fgbfe [_efcaa *_ebfac ].Lly ;_cfgdef [_baffb ]=make (map[float64 ]gridTile ,_ebfac );_bbbf [_baffb ]=make (map[float64 ]struct{},_ebfac );
};if _bcde {_d .Log .Info ("\u0072u\u006c\u0069n\u0067\u004c\u0069s\u0074\u002e\u0061\u0073\u0054\u0069\u006ci\u006e\u0067\u003a\u0020\u0063\u006fa\u006c\u0065\u0073\u0063\u0065\u0020\u0076\u0065\u0072\u0074\u0069c\u0061\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_afgeb );
};for _fggb :=_bdebfb -1;_fggb >=0;_fggb --{_ccaa :=_fgbfe [_fggb *_ebfac ].Lly ;_eeegab :=_agcg [_fggb ];if _bcde {_deg .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_fggb );};for _ ,_cfee :=range _ffcc (_eeegab ){if _ ,_facc :=_bbbf [_ccaa ][_cfee ];
_facc {continue ;};_cfbfg :=_eeegab [_cfee ];if _bcde {_deg .Printf (" \u0020\u0020\u0020\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_cfbfg .String ());};for _gafbg :=_fggb -1;_gafbg >=0;_gafbg --{if _cfbfg ._ffdg {break ;};_bgffc :=_agcg [_gafbg ];_dcad ,_ebdcd :=_bgffc [_cfee ];
if !_ebdcd {break ;};if _dcad .Urx !=_cfbfg .Urx {break ;};_cfbfg ._ffdg =_dcad ._ffdg ;_cfbfg .Lly =_dcad .Lly ;if _bcde {_deg .Printf ("\u0020\u0020\u0020\u0020  \u0020\u0020\u0076\u003d\u0025\u0073\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_dcad .String (),_cfbfg .String ());
};_bbbf [_dcad .Lly ][_dcad .Llx ]=struct{}{};};if _fggb ==0{_cfbfg ._ffdg =true ;};if _cfbfg .complete (){_cfgdef [_ccaa ][_cfee ]=_cfbfg ;};};};_fcded :=gridTiling {PdfRectangle :_afgeb ,_cbeaa :_gadcd (_cfgdef ),_bede :_fefeg (_cfgdef ),_efde :_cfgdef };
_fcded .log ("\u0043r\u0065\u0061\u0074\u0065\u0064");return _fcded ;};func _aggg (_aaaae ,_dfcg _bf .PdfRectangle )bool {return _dfcg .Llx <=_aaaae .Urx &&_aaaae .Llx <=_dfcg .Urx ;};func _cdfeg (_bdgc []int )[]int {_ceace :=make ([]int ,len (_bdgc ));
for _egcd ,_dage :=range _bdgc {_ceace [len (_bdgc )-1-_egcd ]=_dage ;};return _ceace ;};func (_cfdc TextTable )getCellInfo (_ffdf TextMark )[][]int {for _gadc ,_gecdd :=range _cfdc .Cells {for _dfdb :=range _gecdd {_eedf :=&_gecdd [_dfdb ].Marks ;if _eedf .exists (_ffdf ){return [][]int {{_gadc },{_dfdb }};
};};};return nil ;};func _ae (_ag string ,_fd bool ,_fg bool )BidiText {_efg :="\u006c\u0074\u0072";if _fg {_efg ="\u0074\u0074\u0062";}else if !_fd {_efg ="\u0072\u0074\u006c";};return BidiText {_bfe :_ag ,_fa :_efg };};func (_ecdf rulingList )merge ()*ruling {_gfcaed :=_ecdf [0]._gdge ;
_deafa :=_ecdf [0]._ggbc ;_abbgd :=_ecdf [0]._agbd ;for _ ,_deeg :=range _ecdf [1:]{_gfcaed +=_deeg ._gdge ;if _deeg ._ggbc < _deafa {_deafa =_deeg ._ggbc ;};if _deeg ._agbd > _abbgd {_abbgd =_deeg ._agbd ;};};_eeda :=&ruling {_daea :_ecdf [0]._daea ,_dfbf :_ecdf [0]._dfbf ,Color :_ecdf [0].Color ,_gdge :_gfcaed /float64 (len (_ecdf )),_ggbc :_deafa ,_agbd :_abbgd };
if _fafe {_d .Log .Info ("\u006de\u0072g\u0065\u003a\u0020\u0025\u0032d\u0020\u0076e\u0063\u0073\u0020\u0025\u0073",len (_ecdf ),_eeda );for _fffe ,_ebdb :=range _ecdf {_deg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fffe ,_ebdb );};};
return _eeda ;};func (_deffb *textLine )text ()string {var _afcd []string ;for _ ,_dccg :=range _deffb ._bbfda {if _dccg ._cfacf {_afcd =append (_afcd ,"\u0020");};_afcd =append (_afcd ,_dccg ._dfaee );};_fgbc :=_gb .Join (_afcd ,"");_caegd :=_ea ([]rune (_fgbc ));
return _caegd ._bfe ;};type lineRuling struct{_ceece rulingKind ;_daecf markKind ;_bcc .Color ;_bffg ,_cabeba _ed .Point ;};func (_dbcf *shapesState )quadraticTo (_fbbf ,_baf ,_dcga ,_babe float64 ){if _efcb {_d .Log .Info ("\u0071\u0075\u0061d\u0072\u0061\u0074\u0069\u0063\u0054\u006f\u003a");
};_dbcf .addPoint (_dcga ,_babe );};var _eccf =map[rulingKind ]string {_acdg :"\u006e\u006f\u006e\u0065",_faec :"\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_acegd :"\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c"};

// Match defines the structure for each match, including pattern, indexes, and locations.
type Match struct{Pattern string ;Indexes [][]int ;Locations []Box ;};func _gag (_dddf *TextMarkArray ,_gfbb int ,_cag int )int {_ega :=_dddf .Elements ();_cdgd :=_gfbb -1;_bcab :=_gfbb +1;_defg :=-1;if _cdgd >=0{_gdcd :=_ega [_cdgd ];_cbfb :=_gdcd .ObjString ;
_dcd :=len (_cbfb );_baa :=_gdcd .Index ;if _baa +1< _dcd {return _cdgd ;};};if _bcab < len (_ega ){_eeg :=_ega [_bcab ];_ddgf :=_eeg .ObjString ;if _ddgf [0]!=_eeg .Text {return _bcab ;};};if _defg ==-1&&_ega [_gfbb ].Text =="\u0020"{return _cdgd ;};return _defg ;
};func _aefc (_gaa ,_cbec _bf .PdfRectangle )bool {return _aggg (_gaa ,_cbec )&&_eabf (_gaa ,_cbec )};func (_cdgdc rulingList )log (_aeace string ){if !_cfef {return ;};_d .Log .Info ("\u0023\u0023\u0023\u0020\u0025\u0031\u0030\u0073\u003a\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_aeace ,_cdgdc .String ());
for _dfce ,_aced :=range _cdgdc {_deg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dfce ,_aced .String ());};};

// String returns a string describing `pt`.
func (_gcag PageText )String ()string {_bgca :=_deg .Sprintf ("P\u0061\u0067\u0065\u0054ex\u0074:\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073",len (_gcag ._afbb ));_aeaa :=[]string {"\u002d"+_bgca };for _ ,_dfcd :=range _gcag ._afbb {_aeaa =append (_aeaa ,_dfcd .String ());
};_aeaa =append (_aeaa ,"\u002b"+_bgca );return _gb .Join (_aeaa ,"\u000a");};type textResult struct{_ecef PageText ;_abce int ;_cec int ;};func _bfbded (_dbgfg *wordBag ,_gaef int )*textLine {_fgga :=_dbgfg .firstWord (_gaef );_ebfef :=textLine {PdfRectangle :_fgga .PdfRectangle ,_cecg :_fgga ._gbaff ,_eeage :_fgga ._afefd };
_ebfef .pullWord (_dbgfg ,_fgga ,_gaef );return &_ebfef ;};func _dfdbcc (_edgf ,_fadb int )uint64 {return uint64 (_edgf )*0x1000000+uint64 (_fadb )};func _bfge (_bfdga []TextMark ,_agcee *int )[]TextMark {_eeac :=_bfdga [len (_bfdga )-1];_dbfa :=[]rune (_eeac .Text );
if len (_dbfa )==1{_bfdga =_bfdga [:len (_bfdga )-1];_ebgc :=_bfdga [len (_bfdga )-1];*_agcee =_ebgc .Offset +len (_ebgc .Text );}else {_fcae :=_afde (_eeac .Text );*_agcee +=len (_fcae )-len (_eeac .Text );_eeac .Text =_fcae ;};return _bfdga ;};func (_cbfg *textPara )isAtom ()*textTable {_dcaf :=_cbfg ;
_edge :=_cbfg ._dabb ;_gbbg :=_cbfg ._bddf ;if _edge .taken ()||_gbbg .taken (){return nil ;};_gcgf :=_edge ._bddf ;if _gcgf .taken ()||_gcgf !=_gbbg ._dabb {return nil ;};return _dfdfa (_dcaf ,_edge ,_gbbg ,_gcgf );};func (_debcd rectRuling )asRuling ()(*ruling ,bool ){_egbg :=ruling {_daea :_debcd ._deba ,Color :_debcd .Color ,_dfbf :_dgea };
switch _debcd ._deba {case _acegd :_egbg ._gdge =0.5*(_debcd .Llx +_debcd .Urx );_egbg ._ggbc =_debcd .Lly ;_egbg ._agbd =_debcd .Ury ;_gdgfc ,_fcead :=_debcd .checkWidth (_debcd .Llx ,_debcd .Urx );if !_fcead {if _bfdca {_d .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067V\u0065\u0072\u0074\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_debcd );
};return nil ,false ;};_egbg ._agcddd =_gdgfc ;case _faec :_egbg ._gdge =0.5*(_debcd .Lly +_debcd .Ury );_egbg ._ggbc =_debcd .Llx ;_egbg ._agbd =_debcd .Urx ;_gcdg ,_cdbc :=_debcd .checkWidth (_debcd .Lly ,_debcd .Ury );if !_cdbc {if _bfdca {_d .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067H\u006f\u0072\u007a\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_debcd );
};return nil ,false ;};_egbg ._agcddd =_gcdg ;default:_d .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_debcd ._deba );return nil ,false ;};return &_egbg ,true ;};func _fdbed (_dabgd int ,_egae map[int ][]float64 )([]int ,int ){_cfbg :=make ([]int ,_dabgd );
_cgec :=0;for _bggd :=0;_bggd < _dabgd ;_bggd ++{_cfbg [_bggd ]=_cgec ;_cgec +=len (_egae [_bggd ])+1;};return _cfbg ,_cgec ;};func (_cagg *TextMarkArray )getTextMarkAtOffset (_gafa int )*TextMark {for _ ,_edcdd :=range _cagg ._agfc {if _edcdd .Offset ==_gafa {return &_edcdd ;
};};return nil ;};

// List returns all the list objects detected on the page.
// It detects all the bullet point Lists from a given pdf page and builds a slice of bullet list objects.
// A given bullet list object has a tree structure.
// Each bullet point list is extracted with the text content it contains and all the sub lists found under it as children in the tree.
// The rest content of the pdf is ignored and only text in the bullet point lists are extracted.
// The list extraction is done in two ways.
// 1. If the document is tagged then the lists are extracted using the tags provided in the document.
// 2. Otherwise the bullet lists are extracted from the raw text using regex matching.
// By default the document tag is used if available.
// However this can be disabled using `DisableDocumentTags` in the `Options` object.
// Sometimes disabling document tags option might give a better bullet list extraction if the document was tagged incorrectly.
//
//	    options := &Options{
//		     DisableDocumentTags: false, // this means use document tag if available
//	    }
//	    ex, err := NewWithOptions(page, options)
//	    // handle error
//	    pageText, _, _, err := ex.ExtractPageText()
//	    // handle error
//	    lists := pageText.List()
//	    txt := lists.Text()
func (_cdce PageText )List ()lists {_badcf :=!_cdce ._dcce ._agea ;_ebafe :=_cdce .getParagraphs ();_eabe :=true ;if _cdce ._fabb ==nil ||*_cdce ._fabb ==nil {_eabe =false ;};_fefeba :=_ebafe .list ();if _eabe &&_badcf {_eecb :=_bade (&_ebafe );_gede :=&structTreeRoot {};
_gede .parseStructTreeRoot (*_cdce ._fabb );if _gede ._gbgb ==nil {_d .Log .Debug ("\u004c\u0069\u0073\u0074\u003a\u0020\u0073t\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e'\u0074\u0020\u0068\u0061\u0076e\u0020\u0061\u006e\u0079\u0020\u0063\u006f\u006e\u0074e\u006e\u0074\u002c\u0020\u0075\u0073\u0069\u006e\u0067\u0020\u0074\u0065\u0078\u0074\u0020\u006d\u0061\u0074\u0063\u0068\u0069\u006e\u0067\u0020\u006d\u0065\u0074\u0068\u006f\u0064\u0020\u0069\u006e\u0073\u0074\u0065\u0061\u0064\u002e");
return _fefeba ;};_fefeba =_gede .buildList (_eecb ,_cdce ._dadc );};return _fefeba ;};type textMark struct{_bf .PdfRectangle ;_acgg int ;_dbec string ;_gacg string ;_bgaa *_bf .PdfFont ;_fegc float64 ;_dcfgg float64 ;_cagcg _ed .Matrix ;_ccge _ed .Point ;
_cdff _bf .PdfRectangle ;_dcdf _bcc .Color ;_gbdg _bcc .Color ;_edeg _cb .PdfObject ;_eabfe []string ;Tw float64 ;Th float64 ;_ebfcb int ;_gfdce int ;};func (_agfdb rulingList )mergePrimary ()float64 {_aegbg :=_agfdb [0]._gdge ;for _ ,_adge :=range _agfdb [1:]{_aegbg +=_adge ._gdge ;
};return _aegbg /float64 (len (_agfdb ));};func _ceg (_aabc _ed .Matrix )_ed .Point {_gdf ,_bdea :=_aabc .Translation ();return _ed .Point {X :_gdf ,Y :_bdea };};

// NewFromContents creates a new extractor from contents and page resources.
func NewFromContents (contents string ,resources *_bf .PdfPageResources )(*Extractor ,error ){const _afg ="\u0065x\u0074\u0072\u0061\u0063t\u006f\u0072\u002e\u004e\u0065w\u0046r\u006fm\u0043\u006f\u006e\u0074\u0065\u006e\u0074s";_bee :=&Extractor {_gbb :contents ,_ac :resources ,_fca :map[string ]fontEntry {},_bac :map[string ]textResult {}};
_gc .TrackUse (_afg );return _bee ,nil ;};func (_bfaed paraList )xNeighbours (_bdeg float64 )map[*textPara ][]int {_gdcga :=make ([]event ,2*len (_bfaed ));if _bdeg ==0{for _ggbfbg ,_ecdfg :=range _bfaed {_gdcga [2*_ggbfbg ]=event {_ecdfg .Llx ,true ,_ggbfbg };
_gdcga [2*_ggbfbg +1]=event {_ecdfg .Urx ,false ,_ggbfbg };};}else {for _acbc ,_dadeb :=range _bfaed {_gdcga [2*_acbc ]=event {_dadeb .Llx -_bdeg *_dadeb .fontsize (),true ,_acbc };_gdcga [2*_acbc +1]=event {_dadeb .Urx +_bdeg *_dadeb .fontsize (),false ,_acbc };
};};return _bfaed .eventNeighbours (_gdcga );};func _ecaf (_gbaf []TextMark ,_cbfbb *int ,_ebea string )[]TextMark {_bdad :=_fgeb ;_bdad .Text =_ebea ;return _bafff (_gbaf ,_cbfbb ,_bdad );};type textPara struct{_bf .PdfRectangle ;_ecddc _bf .PdfRectangle ;
_efff []*textLine ;_fcdge *textTable ;_edca bool ;_afce bool ;_baec *textPara ;_dabb *textPara ;_defb *textPara ;_bddf *textPara ;_dgafg []list ;};type textTable struct{_bf .PdfRectangle ;_ccfea ,_gecff int ;_cgfe bool ;_agcf map[uint64 ]*textPara ;_ebcde map[uint64 ]compositeCell ;
};func (_acfd compositeCell )parasBBox ()(paraList ,_bf .PdfRectangle ){return _acfd .paraList ,_acfd .PdfRectangle ;};func (_ffgb *subpath )clear (){*_ffgb =subpath {}};func _eabf (_ebabg ,_fcge _bf .PdfRectangle )bool {return _ebabg .Lly <=_fcge .Ury &&_fcge .Lly <=_ebabg .Ury ;
};

// String returns a human readable description of `s`.
func (_aaacd intSet )String ()string {var _edgff []int ;for _egbdf :=range _aaacd {if _aaacd .has (_egbdf ){_edgff =append (_edgff ,_egbdf );};};_bd .Ints (_edgff );return _deg .Sprintf ("\u0025\u002b\u0076",_edgff );};func _ecbcb (_efcgf []*textMark ,_ggaa _bf .PdfRectangle )string {_d .Log .Trace ("\u006d\u0061\u006b\u0065\u0053i\u006d\u0070\u006c\u0065\u0054\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020e\u006c\u0065\u006d\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",len (_efcgf ),_ggaa );
_aeaaa :="";if len (_efcgf )==0{return _aeaaa ;};_eaagf :=_fcfa (_efcgf ,_ggaa );if len (_eaagf )==0{return _aeaaa ;};_eeegc :=0.0;_ggaf :=true ;_aaec :="";for _ ,_dgag :=range _eaagf {_ebbg :=_dgag ._gbaff ;if _ebbg > _aade {_ebbg =_aade ;};if (_dgag ._afefd -_eeegc > _bdfd *_ebbg &&_eeegc !=0.0)||(_eeegc -_dgag ._afefd > _ebbg *10){_dagc :=_ea ([]rune (_aaec ));
_aaec =_dagc ._bfe ;_aaec +="\u000a";_aeaaa +=_aaec ;_aaec ="";}else {if !_ggaf {_aaec +="\u0020";};};_aaec +=_dgag ._dfaee ;_ggaf =false ;_eeegc =_dgag ._afefd ;};if _aaec !=""{_cfeb :=_ea ([]rune (_aaec ));_aaec =_cfeb ._bfe ;_aaec +="\u000a";_aeaaa +=_aaec ;
};return _aeaaa ;};func _cd (_gd int )bool {return (_gd &1)==0};func _caag (_afbag *textLine ,_gdfa []*textLine ,_agccg []float64 )float64 {var _fabeb float64 =-1;for _ ,_fdae :=range _gdfa {if _fdae ._eeage > _afbag ._eeage {if _aa .Round (_fdae .Llx )>=_aa .Round (_afbag .Llx ){_fabeb =_fdae ._eeage ;
}else {break ;};};};return _fabeb ;};

// TableCell is a cell in a TextTable.
type TableCell struct{_bf .PdfRectangle ;

// Text is the extracted text.
Text string ;

// Marks returns the TextMarks corresponding to the text in Text.
Marks TextMarkArray ;};type gridTiling struct{_bf .PdfRectangle ;_cbeaa []float64 ;_bede []float64 ;_efde map[float64 ]map[float64 ]gridTile ;};func (_effbc pathSection )bbox ()_bf .PdfRectangle {_dadg :=_effbc ._cgdd [0]._egdag [0];_defdac :=_bf .PdfRectangle {Llx :_dadg .X ,Urx :_dadg .X ,Lly :_dadg .Y ,Ury :_dadg .Y };
_ccced :=func (_bfgc _ed .Point ){if _bfgc .X < _defdac .Llx {_defdac .Llx =_bfgc .X ;}else if _bfgc .X > _defdac .Urx {_defdac .Urx =_bfgc .X ;};if _bfgc .Y < _defdac .Lly {_defdac .Lly =_bfgc .Y ;}else if _bfgc .Y > _defdac .Ury {_defdac .Ury =_bfgc .Y ;
};};for _ ,_ggbd :=range _effbc ._cgdd [0]._egdag [1:]{_ccced (_ggbd );};for _ ,_gdce :=range _effbc ._cgdd [1:]{for _ ,_cfba :=range _gdce ._egdag {_ccced (_cfba );};};return _defdac ;};type gridTile struct{_bf .PdfRectangle ;_egfbb ,_cbegc ,_ffdg ,_eeba bool ;
};