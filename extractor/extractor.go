//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package extractor is used for quickly extracting PDF content through a simple interface.
// Currently offers functionality for extracting textual content.
package extractor ;import (_fg "bytes";_da "errors";_cbg "fmt";_fb "github.com/unidoc/unipdf/v3/common";_ad "github.com/unidoc/unipdf/v3/contentstream";_cf "github.com/unidoc/unipdf/v3/core";_ba "github.com/unidoc/unipdf/v3/internal/license";_dd "github.com/unidoc/unipdf/v3/internal/textencoding";
_ga "github.com/unidoc/unipdf/v3/internal/transform";_bd "github.com/unidoc/unipdf/v3/model";_cc "golang.org/x/image/draw";_fga "golang.org/x/text/unicode/norm";_d "image";_gf "image/color";_cb "io";_b "log";_e "math";_fd "reflect";_f "regexp";_a "sort";
_bb "strings";_cg "unicode";_g "unicode/utf8";);func _eed (_caecb ,_fffa _bd .PdfRectangle )bool {return _caecb .Lly <=_fffa .Ury &&_fffa .Lly <=_caecb .Ury ;};func (_dddg *PageFonts )extractPageResourcesToFont (_gca *_bd .PdfPageResources )error {if _gca .Font ==nil {return _da .New (_gef );
};_ag ,_gbc :=_cf .GetDict (_gca .Font );if !_gbc {return _da .New (_bdg );};for _ ,_aag :=range _ag .Keys (){var (_bbd =true ;_fbe []byte ;_ecf string ;);_gafb ,_fgf :=_gca .GetFontByName (_aag );if !_fgf {return _da .New (_aed );};_fdc ,_fbg :=_bd .NewPdfFontFromPdfObject (_gafb );
if _fbg !=nil {return _fbg ;};_edd :=_fdc .FontDescriptor ();_fabe :=_fdc .FontDescriptor ().FontName .String ();_cad :=_fdc .Subtype ();if _baf (_dddg .Fonts ,_fabe ){continue ;};if len (_fdc .ToUnicode ())==0{_bbd =false ;};if _edd .FontFile !=nil {if _gbed ,_aaf :=_cf .GetStream (_edd .FontFile );
_aaf {_fbe ,_fbg =_cf .DecodeStream (_gbed );if _fbg !=nil {return _fbg ;};_ecf =_fabe +"\u002e\u0070\u0066\u0062";};}else if _edd .FontFile2 !=nil {if _aaa ,_cae :=_cf .GetStream (_edd .FontFile2 );_cae {_fbe ,_fbg =_cf .DecodeStream (_aaa );if _fbg !=nil {return _fbg ;
};_ecf =_fabe +"\u002e\u0074\u0074\u0066";};}else if _edd .FontFile3 !=nil {if _gbb ,_gbgb :=_cf .GetStream (_edd .FontFile3 );_gbgb {_fbe ,_fbg =_cf .DecodeStream (_gbb );if _fbg !=nil {return _fbg ;};_ecf =_fabe +"\u002e\u0063\u0066\u0066";};};if len (_ecf )< 1{_fb .Log .Debug (_cbc );
};_fecd :=Font {FontName :_fabe ,PdfFont :_fdc ,IsCID :_fdc .IsCID (),IsSimple :_fdc .IsSimple (),ToUnicode :_bbd ,FontType :_cad ,FontData :_fbe ,FontFileName :_ecf ,FontDescriptor :_edd };_dddg .Fonts =append (_dddg .Fonts ,_fecd );};return nil ;};func (_dcb *imageExtractContext )extractContentStreamImages (_gdc string ,_ece *_bd .PdfPageResources )error {_dgc :=_ad .NewContentStreamParser (_gdc );
_fca ,_fgg :=_dgc .Parse ();if _fgg !=nil {return _fgg ;};if _dcb ._ffg ==nil {_dcb ._ffg =map[*_cf .PdfObjectStream ]*cachedImage {};};if _dcb ._cee ==nil {_dcb ._cee =&ImageExtractOptions {};};_eac :=_ad .NewContentStreamProcessor (*_fca );_eac .AddHandler (_ad .HandlerConditionEnumAllOperands ,"",_dcb .processOperand );
return _eac .Process (_ece );};func (_acabe *textTable )reduce ()*textTable {_gbdeb :=make ([]int ,0,_acabe ._gfcf );_cefdg :=make ([]int ,0,_acabe ._bbfgf );for _eccfa :=0;_eccfa < _acabe ._gfcf ;_eccfa ++{if !_acabe .emptyCompositeRow (_eccfa ){_gbdeb =append (_gbdeb ,_eccfa );
};};for _baaf :=0;_baaf < _acabe ._bbfgf ;_baaf ++{if !_acabe .emptyCompositeColumn (_baaf ){_cefdg =append (_cefdg ,_baaf );};};if len (_gbdeb )==_acabe ._gfcf &&len (_cefdg )==_acabe ._bbfgf {return _acabe ;};_afdec :=textTable {_deagb :_acabe ._deagb ,_bbfgf :len (_cefdg ),_gfcf :len (_gbdeb ),_fdbac :make (map[uint64 ]*textPara ,len (_cefdg )*len (_gbdeb ))};
if _deef {_fb .Log .Info ("\u0072\u0065\u0064\u0075ce\u003a\u0020\u0025\u0064\u0078\u0025\u0064\u0020\u002d\u003e\u0020\u0025\u0064\u0078%\u0064",_acabe ._bbfgf ,_acabe ._gfcf ,len (_cefdg ),len (_gbdeb ));_fb .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_cefdg );
_fb .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_gbdeb );};for _aeee ,_baaac :=range _gbdeb {for _dfcb ,_aadc :=range _cefdg {_edeaff ,_gaadf :=_acabe .getComposite (_aadc ,_baaac );if _edeaff ==nil {continue ;
};if _deef {_cbg .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_dfcb ,_aeee ,_aadc ,_baaac ,_ddfcg (_edeaff .merge ().text (),50));};_afdec .putComposite (_dfcb ,_aeee ,_edeaff ,_gaadf );
};};return &_afdec ;};func _bfcbg (_baceg *list ,_ebaeg *_bb .Builder ,_eadc *string ){_gcca :=_ccdbg (_baceg ,_eadc );_ebaeg .WriteString (_gcca );for _ ,_dbga :=range _baceg ._fgcb {_dggd :=*_eadc +"\u0020\u0020\u0020";_bfcbg (_dbga ,_ebaeg ,&_dggd );
};};func (_dgca *textTable )reduceTiling (_cgcbc gridTiling ,_geeg float64 )*textTable {_caaed :=make ([]int ,0,_dgca ._gfcf );_dfae :=make ([]int ,0,_dgca ._bbfgf );_adbbb :=_cgcbc ._cebc ;_gefbb :=_cgcbc ._adfdb ;for _bgbca :=0;_bgbca < _dgca ._gfcf ;
_bgbca ++{_ggefe :=_bgbca > 0&&_e .Abs (_gefbb [_bgbca -1]-_gefbb [_bgbca ])< _geeg &&_dgca .emptyCompositeRow (_bgbca );if !_ggefe {_caaed =append (_caaed ,_bgbca );};};for _fcdc :=0;_fcdc < _dgca ._bbfgf ;_fcdc ++{_gbgc :=_fcdc < _dgca ._bbfgf -1&&_e .Abs (_adbbb [_fcdc +1]-_adbbb [_fcdc ])< _geeg &&_dgca .emptyCompositeColumn (_fcdc );
if !_gbgc {_dfae =append (_dfae ,_fcdc );};};if len (_caaed )==_dgca ._gfcf &&len (_dfae )==_dgca ._bbfgf {return _dgca ;};_aadg :=textTable {_deagb :_dgca ._deagb ,_bbfgf :len (_dfae ),_gfcf :len (_caaed ),_bfeb :make (map[uint64 ]compositeCell ,len (_dfae )*len (_caaed ))};
if _deef {_fb .Log .Info ("\u0072\u0065\u0064\u0075c\u0065\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0025d\u0078%\u0064\u0020\u002d\u003e\u0020\u0025\u0064x\u0025\u0064",_dgca ._bbfgf ,_dgca ._gfcf ,len (_dfae ),len (_caaed ));_fb .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_dfae );
_fb .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_caaed );};for _bgcf ,_gdac :=range _caaed {for _aadbd ,_adaef :=range _dfae {_eeac ,_fcggg :=_dgca .getComposite (_adaef ,_gdac );if len (_eeac )==0{continue ;
};if _deef {_cbg .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_aadbd ,_bgcf ,_adaef ,_gdac ,_ddfcg (_eeac .merge ().text (),50));};_aadg .putComposite (_aadbd ,_bgcf ,_eeac ,_fcggg );
};};return &_aadg ;};type structElement struct{_cfdg string ;_dgcbf []structElement ;_eeba int64 ;_bbfd _cf .PdfObject ;};func _fbeb (_acd []*textLine ,_ebceg string ,_cccad []*list )*list {return &list {_ggcfb :_acd ,_dfb :_ebceg ,_fgcb :_cccad };};

// String returns a string describing `ma`.
func (_ggde TextMarkArray )String ()string {_gbedf :=len (_ggde ._acag );if _gbedf ==0{return "\u0045\u004d\u0050T\u0059";};_debbb :=_ggde ._acag [0];_fbcaf :=_ggde ._acag [_gbedf -1];return _cbg .Sprintf ("\u007b\u0054\u0045\u0058\u0054\u004d\u0041\u0052K\u0041\u0052\u0052AY\u003a\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025s\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d%\u0073\u007d",_gbedf ,_debbb ,_fbcaf );
};func (_ggacd intSet )has (_acfgg int )bool {_ ,_eebbb :=_ggacd [_acfgg ];return _eebbb };func (_aeabd *textPara )isAtom ()*textTable {_gfff :=_aeabd ;_fgea :=_aeabd ._bbbge ;_bddg :=_aeabd ._dffd ;if _fgea .taken ()||_bddg .taken (){return nil ;};_cdab :=_fgea ._dffd ;
if _cdab .taken ()||_cdab !=_bddg ._bbbge {return nil ;};return _fedcd (_gfff ,_fgea ,_bddg ,_cdab );};

// ToTextMark returns the public view of `tm`.
func (_bdcc *textMark )ToTextMark ()TextMark {return TextMark {Text :_bdcc ._becfb ,Original :_bdcc ._ecde ,BBox :_bdcc ._dgde ,Font :_bdcc ._ecfc ,FontSize :_bdcc ._afbae ,FillColor :_bdcc ._fcbd ,StrokeColor :_bdcc ._decad ,Orientation :_bdcc ._cbacf ,DirectObject :_bdcc ._abbeg ,ObjString :_bdcc ._abffe ,Tw :_bdcc .Tw ,Th :_bdcc .Th ,Tc :_bdcc ._efege ,Index :_bdcc ._fcba };
};

// String returns a human readable description of `vecs`.
func (_caadg rulingList )String ()string {if len (_caadg )==0{return "\u007b \u0045\u004d\u0050\u0054\u0059\u0020}";};_bbeff ,_deaad :=_caadg .vertsHorzs ();_abgbd :=len (_bbeff );_cdaa :=len (_deaad );if _abgbd ==0||_cdaa ==0{return _cbg .Sprintf ("\u007b%\u0064\u0020\u0078\u0020\u0025\u0064}",_abgbd ,_cdaa );
};_efbc :=_bd .PdfRectangle {Llx :_bbeff [0]._gabcd ,Urx :_bbeff [_abgbd -1]._gabcd ,Lly :_deaad [_cdaa -1]._gabcd ,Ury :_deaad [0]._gabcd };return _cbg .Sprintf ("\u007b\u0025d\u0020\u0078\u0020%\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u007d",_abgbd ,_cdaa ,_efbc );
};func _gcac (_efef *list )[]*textLine {for _ ,_fdcc :=range _efef ._fgcb {switch _fdcc ._dfb {case "\u004c\u0042\u006fd\u0079":if len (_fdcc ._ggcfb )!=0{return _fdcc ._ggcfb ;};return _gcac (_fdcc );case "\u0053\u0070\u0061\u006e":return _fdcc ._ggcfb ;
case "I\u006e\u006c\u0069\u006e\u0065\u0053\u0068\u0061\u0070\u0065":return _fdcc ._ggcfb ;};};return nil ;};

// String returns a string descibing `i`.
func (_gedgff gridTile )String ()string {_efgb :=func (_gbdd bool ,_fbeag string )string {if _gbdd {return _fbeag ;};return "\u005f";};return _cbg .Sprintf ("\u00256\u002e2\u0066\u0020\u0025\u0031\u0073%\u0031\u0073%\u0031\u0073\u0025\u0031\u0073",_gedgff .PdfRectangle ,_efgb (_gedgff ._acda ,"\u004c"),_efgb (_gedgff ._aedfa ,"\u0052"),_efgb (_gedgff ._dbbe ,"\u0042"),_efgb (_gedgff ._ffcfe ,"\u0054"));
};func (_afde *textLine )bbox ()_bd .PdfRectangle {return _afde .PdfRectangle };func _bggfa (_gbbce *wordBag ,_cfcc *textWord ,_egag float64 )bool {return _gbbce .Urx <=_cfcc .Llx &&_cfcc .Llx < _gbbce .Urx +_egag ;};

// ImageExtractOptions contains options for controlling image extraction from
// PDF pages.
type ImageExtractOptions struct{IncludeInlineStencilMasks bool ;};func (_ggcbe gridTiling )complete ()bool {for _ ,_dagg :=range _ggcbe ._adga {for _ ,_efdda :=range _dagg {if !_efdda .complete (){return false ;};};};return true ;};type cachedImage struct{_deb *_bd .Image ;
_aef _bd .PdfColorspace ;};

// NewFromContents creates a new extractor from contents and page resources.
func NewFromContents (contents string ,resources *_bd .PdfPageResources )(*Extractor ,error ){const _aadd ="\u0065x\u0074\u0072\u0061\u0063t\u006f\u0072\u002e\u004e\u0065w\u0046r\u006fm\u0043\u006f\u006e\u0074\u0065\u006e\u0074s";_fda :=&Extractor {_fbc :contents ,_fed :resources ,_bgc :map[string ]fontEntry {},_ceg :map[string ]textResult {}};
_ba .TrackUse (_aadd );return _fda ,nil ;};

// String returns a description of `l`.
func (_fcgg *textLine )String ()string {return _cbg .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_fcgg ._becg ,_fcgg .PdfRectangle ,_fcgg ._efba ,_fcgg .text ());
};var _debc string ="\u0028\u003f\u0069\u0029\u005e\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028?\u003a\u0044\u007cM\u0029\u007c\u0044\u003f\u0043{\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028\u003f\u003a\u004c\u007c\u0043\u0029\u007cL\u003f\u0058\u007b\u0030\u002c\u0033}\u0029\u0028\u0049\u0028\u003f\u003a\u0056\u007c\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u005c\u0029\u007c\u005c\u002e\u0029\u007c\u005e\u005c\u0028\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028\u003f\u003aD\u007cM\u0029\u007c\u0044\u003f\u0043\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028?\u003a\u004c\u007c\u0043\u0029\u007c\u004c?\u0058\u007b0\u002c\u0033\u007d\u0029(\u0049\u0028\u003f\u003a\u0056|\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u005c\u0029";
func (_gbedg rulingList )asTiling ()gridTiling {if _fdbd {_fb .Log .Info ("r\u0075\u006ci\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0063s\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u002b\u002b\u002b\u0020\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_gbedg ));
};for _beea ,_eddb :=range _gbedg [1:]{_bfgg :=_gbedg [_beea ];if _bfgg .alignsPrimary (_eddb )&&_bfgg .alignsSec (_eddb ){_fb .Log .Error ("a\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0044\u0075\u0070\u006c\u0069\u0063\u0061\u0074\u0065 \u0072\u0075\u006c\u0069\u006e\u0067\u0073\u002e\u000a\u0009v=\u0025\u0073\u000a\t\u0077=\u0025\u0073",_eddb ,_bfgg );
};};_gbedg .sortStrict ();_gbedg .log ("\u0073n\u0061\u0070\u0070\u0065\u0064");_cade ,_dfebb :=_gbedg .vertsHorzs ();_ebdf :=_cade .primaries ();_eagf :=_dfebb .primaries ();_fecgb :=len (_ebdf )-1;_aege :=len (_eagf )-1;if _fecgb ==0||_aege ==0{return gridTiling {};
};_eefgb :=_bd .PdfRectangle {Llx :_ebdf [0],Urx :_ebdf [_fecgb ],Lly :_eagf [0],Ury :_eagf [_aege ]};if _fdbd {_fb .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0072\u0074s=\u0025\u0064",len (_cade ));
for _ebdcfb ,_fdfc :=range _cade {_cbg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ebdcfb ,_fdfc );};_fb .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0068\u006f\u0072\u007as=\u0025\u0064",len (_dfebb ));
for _bcbce ,_febf :=range _dfebb {_cbg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bcbce ,_febf );};_fb .Log .Info ("\u0072\u0075\u006c\u0069\u006eg\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067:\u0020\u0020\u0077\u0078\u0068\u003d\u0025\u0064\u0078\u0025\u0064\u000a\u0009\u006c\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a\u0009\u006c\u006c\u0079\u003d\u0025\u002e\u0032f",_fecgb ,_aege ,_ebdf ,_eagf );
};_aged :=make ([]gridTile ,_fecgb *_aege );for _eafa :=_aege -1;_eafa >=0;_eafa --{_dbgcf :=_eagf [_eafa ];_egbbf :=_eagf [_eafa +1];for _cgea :=0;_cgea < _fecgb ;_cgea ++{_fafc :=_ebdf [_cgea ];_fggd :=_ebdf [_cgea +1];_cabb :=_cade .findPrimSec (_fafc ,_dbgcf );
_ggedg :=_cade .findPrimSec (_fggd ,_dbgcf );_gbegc :=_dfebb .findPrimSec (_dbgcf ,_fafc );_fdcb :=_dfebb .findPrimSec (_egbbf ,_fafc );_bbefa :=_bd .PdfRectangle {Llx :_fafc ,Urx :_fggd ,Lly :_dbgcf ,Ury :_egbbf };_ddafe :=_baab (_bbefa ,_cabb ,_ggedg ,_gbegc ,_fdcb );
_aged [_eafa *_fecgb +_cgea ]=_ddafe ;if _fdbd {_cbg .Printf ("\u0020\u0020\u0078\u003d\u0025\u0032\u0064\u0020\u0079\u003d\u0025\u0032\u0064\u003a\u0020%\u0073 \u0025\u0036\u002e\u0032\u0066\u0020\u0078\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_cgea ,_eafa ,_ddafe .String (),_ddafe .Width (),_ddafe .Height ());
};};};if _fdbd {_fb .Log .Info ("r\u0075\u006c\u0069\u006e\u0067\u004c\u0069\u0073\u0074.\u0061\u0073\u0054\u0069\u006c\u0069\u006eg:\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0020\u0068\u006f\u0072\u0069zo\u006e\u0074a\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_eefgb );
};_eecfe :=make ([]map[float64 ]gridTile ,_aege );for _fefdb :=_aege -1;_fefdb >=0;_fefdb --{if _fdbd {_cbg .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_fefdb );};_eecfe [_fefdb ]=make (map[float64 ]gridTile ,_fecgb );for _cfcf :=0;_cfcf < _fecgb ;
_cfcf ++{_dcebd :=_aged [_fefdb *_fecgb +_cfcf ];if _fdbd {_cbg .Printf ("\u0020\u0020\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cfcf ,_dcebd );};if !_dcebd ._acda {continue ;};_gfdd :=_cfcf ;for _gbdb :=_cfcf +1;!_dcebd ._aedfa &&_gbdb < _fecgb ;
_gbdb ++{_abgde :=_aged [_fefdb *_fecgb +_gbdb ];_dcebd .Urx =_abgde .Urx ;_dcebd ._ffcfe =_dcebd ._ffcfe ||_abgde ._ffcfe ;_dcebd ._dbbe =_dcebd ._dbbe ||_abgde ._dbbe ;_dcebd ._aedfa =_abgde ._aedfa ;if _fdbd {_cbg .Printf ("\u0020 \u0020%\u0034\u0064\u003a\u0020\u0025s\u0020\u2192 \u0025\u0073\u000a",_gbdb ,_abgde ,_dcebd );
};_gfdd =_gbdb ;};if _fdbd {_cbg .Printf (" \u0020 \u0025\u0032\u0064\u0020\u002d\u0020\u0025\u0032d\u0020\u2192\u0020\u0025s\n",_cfcf ,_gfdd ,_dcebd );};_cfcf =_gfdd ;_eecfe [_fefdb ][_dcebd .Llx ]=_dcebd ;};};_afdc :=make (map[float64 ]map[float64 ]gridTile ,_aege );
_dbaa :=make (map[float64 ]map[float64 ]struct{},_aege );for _dbff :=_aege -1;_dbff >=0;_dbff --{_adag :=_aged [_dbff *_fecgb ].Lly ;_afdc [_adag ]=make (map[float64 ]gridTile ,_fecgb );_dbaa [_adag ]=make (map[float64 ]struct{},_fecgb );};if _fdbd {_fb .Log .Info ("\u0072u\u006c\u0069n\u0067\u004c\u0069s\u0074\u002e\u0061\u0073\u0054\u0069\u006ci\u006e\u0067\u003a\u0020\u0063\u006fa\u006c\u0065\u0073\u0063\u0065\u0020\u0076\u0065\u0072\u0074\u0069c\u0061\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_eefgb );
};for _gbaead :=_aege -1;_gbaead >=0;_gbaead --{_ddce :=_aged [_gbaead *_fecgb ].Lly ;_eabe :=_eecfe [_gbaead ];if _fdbd {_cbg .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_gbaead );};for _ ,_fedg :=range _gfaa (_eabe ){if _ ,_aafca :=_dbaa [_ddce ][_fedg ];
_aafca {continue ;};_edgbc :=_eabe [_fedg ];if _fdbd {_cbg .Printf (" \u0020\u0020\u0020\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_edgbc .String ());};for _adcfe :=_gbaead -1;_adcfe >=0;_adcfe --{if _edgbc ._dbbe {break ;};_dggbc :=_eecfe [_adcfe ];_aaabg ,_bfggd :=_dggbc [_fedg ];
if !_bfggd {break ;};if _aaabg .Urx !=_edgbc .Urx {break ;};_edgbc ._dbbe =_aaabg ._dbbe ;_edgbc .Lly =_aaabg .Lly ;if _fdbd {_cbg .Printf ("\u0020\u0020\u0020\u0020  \u0020\u0020\u0076\u003d\u0025\u0073\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_aaabg .String (),_edgbc .String ());
};_dbaa [_aaabg .Lly ][_aaabg .Llx ]=struct{}{};};if _gbaead ==0{_edgbc ._dbbe =true ;};if _edgbc .complete (){_afdc [_ddce ][_fedg ]=_edgbc ;};};};_fdba :=gridTiling {PdfRectangle :_eefgb ,_cebc :_adaec (_afdc ),_adfdb :_ccbg (_afdc ),_adga :_afdc };_fdba .log ("\u0043r\u0065\u0061\u0074\u0065\u0064");
return _fdba ;};func (_afce rulingList )sort (){_a .Slice (_afce ,_afce .comp )};func (_abeb *textObject )checkOp (_egcc *_ad .ContentStreamOperation ,_ccdb int ,_bdcd bool )(_aaddb bool ,_dacf error ){if _abeb ==nil {var _fcc []_cf .PdfObject ;if _ccdb > 0{_fcc =_egcc .Params ;
if len (_fcc )> _ccdb {_fcc =_fcc [:_ccdb ];};};_fb .Log .Debug ("\u0025\u0023q \u006f\u0070\u0065r\u0061\u006e\u0064\u0020out\u0073id\u0065\u0020\u0074\u0065\u0078\u0074\u002e p\u0061\u0072\u0061\u006d\u0073\u003d\u0025+\u0076",_egcc .Operand ,_fcc );
};if _ccdb >=0{if len (_egcc .Params )!=_ccdb {if _bdcd {_dacf =_da .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");};_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_egcc .Operand ,_ccdb ,len (_egcc .Params ),_egcc .Params );
return false ,_dacf ;};};return true ,nil ;};const (RenderModeStroke RenderMode =1<<iota ;RenderModeFill ;RenderModeClip ;);func (_adec *textObject )showTextAdjusted (_gcae *_cf .PdfObjectArray ,_ccd int ,_febc string )error {_cdc :=false ;for _ ,_aeaa :=range _gcae .Elements (){switch _aeaa .(type ){case *_cf .PdfObjectFloat ,*_cf .PdfObjectInteger :_dfc ,_eggc :=_cf .GetNumberAsFloat (_aeaa );
if _eggc !=nil {_fb .Log .Debug ("\u0045\u0052\u0052\u004fR\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078t\u0041\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0042\u0061\u0064\u0020\u006e\u0075\u006d\u0065r\u0069\u0063\u0061\u006c\u0020a\u0072\u0067\u002e\u0020\u006f\u003d\u0025\u0073\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_aeaa ,_gcae );
return _eggc ;};_ebfg ,_fdgc :=-_dfc *0.001*_adec ._beg ._fge ,0.0;if _cdc {_fdgc ,_ebfg =_ebfg ,_fdgc ;};_dfda :=_eea (_ga .Point {X :_ebfg ,Y :_fdgc });_adec ._efa .Concat (_dfda );case *_cf .PdfObjectString :_becf :=_cf .TraceToDirectObject (_aeaa );
_adeb ,_fagf :=_cf .GetStringBytes (_becf );if !_fagf {_fb .Log .Trace ("s\u0068\u006f\u0077\u0054\u0065\u0078\u0074\u0041\u0064j\u0075\u0073\u0074\u0065\u0064\u003a\u0020Ba\u0064\u0020\u0073\u0074r\u0069\u006e\u0067\u0020\u0061\u0072\u0067\u002e\u0020o=\u0025\u0073 \u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_aeaa ,_gcae );
return _cf .ErrTypeError ;};_adec .renderText (_becf ,_adeb ,_ccd ,_febc );default:_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078\u0074A\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0055\u006e\u0065\u0078p\u0065\u0063\u0074\u0065\u0064\u0020\u0074\u0079\u0070\u0065\u0020\u0028%T\u0029\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_aeaa ,_gcae );
return _cf .ErrTypeError ;};};return nil ;};func _ddaga (_efbb ,_gaeae int )int {if _efbb > _gaeae {return _efbb ;};return _gaeae ;};func (_ggcad rulingList )removeDuplicates ()rulingList {if len (_ggcad )==0{return nil ;};_ggcad .sort ();_eacdg :=rulingList {_ggcad [0]};
for _ ,_aafdf :=range _ggcad [1:]{if _aafdf .equals (_eacdg [len (_eacdg )-1]){continue ;};_eacdg =append (_eacdg ,_aafdf );};return _eacdg ;};func (_dbcfe *textPara )toCellTextMarks (_bbeca *int )[]TextMark {var _aagae []TextMark ;for _dedb ,_deda :=range _dbcfe ._bgcc {_gddgf :=_deda .toTextMarks (_bbeca );
_eefb :=_bacg &&_deda .endsInHyphen ()&&_dedb !=len (_dbcfe ._bgcc )-1;if _eefb {_gddgf =_facg (_gddgf ,_bbeca );};_aagae =append (_aagae ,_gddgf ...);if !(_eefb ||_dedb ==len (_dbcfe ._bgcc )-1){_aagae =_dbgab (_aagae ,_bbeca ,_fcda (_deda ._becg ,_dbcfe ._bgcc [_dedb +1]._becg ));
};};return _aagae ;};func (_dacge *textTable )getDown ()paraList {_ddge :=make (paraList ,_dacge ._bbfgf );for _cbae :=0;_cbae < _dacge ._bbfgf ;_cbae ++{_dcabe :=_dacge .get (_cbae ,_dacge ._gfcf -1)._dffd ;if _dcabe .taken (){return nil ;};_ddge [_cbae ]=_dcabe ;
};for _eegdc :=0;_eegdc < _dacge ._bbfgf -1;_eegdc ++{if _ddge [_eegdc ]._bbbge !=_ddge [_eegdc +1]{return nil ;};};return _ddge ;};func (_fea *wordBag )depthBand (_abadg ,_gbcb float64 )[]int {if len (_fea ._acfg )==0{return nil ;};return _fea .depthRange (_fea .getDepthIdx (_abadg ),_fea .getDepthIdx (_gbcb ));
};func _adab (_gega bounded )float64 {return -_gega .bbox ().Lly };func _dfab (_cbab []*textLine )[]*textLine {_dgcf :=[]*textLine {};for _ ,_ebbe :=range _cbab {_ffdb :=_ebbe .text ();_bada :=_ebbc .Find ([]byte (_ffdb ));if _bada !=nil {_dgcf =append (_dgcf ,_ebbe );
};};return _dgcf ;};func _gdged (_ccca ,_egca bounded )float64 {_edga :=_fcdf (_ccca ,_egca );if !_bfaeb (_edga ){return _edga ;};return _bcbd (_ccca ,_egca );};func (_ffed *textPara )getListLines ()[]*textLine {var _gcgg []*textLine ;_cefce :=_dfab (_ffed ._bgcc );
for _ ,_fdgb :=range _ffed ._bgcc {_edbcc :=_fdgb ._abcg [0]._ffdcg [0];if _eecgb (_edbcc ){_gcgg =append (_gcgg ,_fdgb );};};_gcgg =append (_gcgg ,_cefce ...);return _gcgg ;};func _ggab (_ecce *textWord ,_cfdd float64 ,_bffc ,_faff rulingList )*wordBag {_deccb :=_fadcb (_ecce ._gabaag );
_bggc :=[]*textWord {_ecce };_cadc :=wordBag {_acfg :map[int ][]*textWord {_deccb :_bggc },PdfRectangle :_ecce .PdfRectangle ,_dagd :_ecce ._efce ,_gcbg :_cfdd ,_gab :_bffc ,_bcabd :_faff };return &_cadc ;};func (_gabb *wordBag )makeRemovals ()map[int ]map[*textWord ]struct{}{_ggfd :=make (map[int ]map[*textWord ]struct{},len (_gabb ._acfg ));
for _ggcfa :=range _gabb ._acfg {_ggfd [_ggcfa ]=make (map[*textWord ]struct{});};return _ggfd ;};func (_eeaf *wordBag )firstWord (_gefdb int )*textWord {return _eeaf ._acfg [_gefdb ][0]};func _bcbd (_afbac ,_efgce bounded )float64 {return _adab (_afbac )-_adab (_efgce )};
func (_bebdf rulingList )blocks (_eggbb ,_cece *ruling )bool {if _eggbb ._cdcd > _cece ._dcgf ||_cece ._cdcd > _eggbb ._dcgf {return false ;};_edgba :=_e .Max (_eggbb ._cdcd ,_cece ._cdcd );_bcgd :=_e .Min (_eggbb ._dcgf ,_cece ._dcgf );if _eggbb ._gabcd > _cece ._gabcd {_eggbb ,_cece =_cece ,_eggbb ;
};for _ ,_aebab :=range _bebdf {if _eggbb ._gabcd <=_aebab ._gabcd +_ebgc &&_aebab ._gabcd <=_cece ._gabcd +_ebgc &&_aebab ._cdcd <=_bcgd &&_edgba <=_aebab ._dcgf {return true ;};};return false ;};func (_agdc *shapesState )lastpointEstablished ()(_ga .Point ,bool ){if _agdc ._dgbb {return _agdc ._gdee ,false ;
};_dggb :=len (_agdc ._eaaf );if _dggb > 0&&_agdc ._eaaf [_dggb -1]._ffbag {return _agdc ._eaaf [_dggb -1].last (),false ;};return _ga .Point {},true ;};func (_gbef *textLine )text ()string {var _gaag []string ;for _ ,_efgd :=range _gbef ._abcg {if _efgd ._cgbdf {_gaag =append (_gaag ,"\u0020");
};_gaag =append (_gaag ,_efgd ._ffdcg );};_eccc :=_bb .Join (_gaag ,"");_cgdce :=_afd ([]rune (_eccc ));return _cgdce ._gdg ;};var _ebbc *_f .Regexp =_f .MustCompile (_debc +"\u007c"+_gccb );func _bbba (_agec *textLine ,_fegd []*textLine ,_aecbd []float64 )float64 {var _adff float64 =-1;
for _ ,_bgee :=range _fegd {if _bgee ._becg > _agec ._becg {if _e .Round (_bgee .Llx )>=_e .Round (_agec .Llx ){_adff =_bgee ._becg ;}else {break ;};};};return _adff ;};type stateStack []*textState ;type fontEntry struct{_eeea *_bd .PdfFont ;_cac int64 ;
};func _cdf (_bbaaf ,_adbdb _ga .Point )rulingKind {_ebdd :=_e .Abs (_bbaaf .X -_adbdb .X );_bfdd :=_e .Abs (_bbaaf .Y -_adbdb .Y );return _cbacfe (_ebdd ,_bfdd ,_gbbef );};func (_cecc *textPara )text ()string {_gbcgg :=new (_fg .Buffer );_cecc .writeText (_gbcgg );
return _gbcgg .String ();};func (_gfdcc *textTable )getComposite (_abdbb ,_cgbc int )(paraList ,_bd .PdfRectangle ){_dfac ,_dccgb :=_gfdcc ._bfeb [_eebg (_abdbb ,_cgbc )];if _deef {_cbg .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0067\u0065\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u002d\u003e\u0025\u0073\u000a",_abdbb ,_cgbc ,_dfac .String ());
};if !_dccgb {return nil ,_bd .PdfRectangle {};};return _dfac .parasBBox ();};func (_aegg *wordBag )scanBand (_gdcb string ,_dbdd *wordBag ,_abdb func (_adba *wordBag ,_fcgf *textWord )bool ,_gaba ,_dbabcc ,_gdfb float64 ,_cedf ,_ecdgd bool )int {_edfa :=_dbdd ._dagd ;
var _daag map[int ]map[*textWord ]struct{};if !_cedf {_daag =_aegg .makeRemovals ();};_feecg :=_fede *_edfa ;_efda :=0;for _ ,_eca :=range _aegg .depthBand (_gaba -_feecg ,_dbabcc +_feecg ){if len (_aegg ._acfg [_eca ])==0{continue ;};for _ ,_dfgd :=range _aegg ._acfg [_eca ]{if !(_gaba -_feecg <=_dfgd ._gabaag &&_dfgd ._gabaag <=_dbabcc +_feecg ){continue ;
};if !_abdb (_dbdd ,_dfgd ){continue ;};_efag :=2.0*_e .Abs (_dfgd ._efce -_dbdd ._dagd )/(_dfgd ._efce +_dbdd ._dagd );_ecga :=_e .Max (_dfgd ._efce /_dbdd ._dagd ,_dbdd ._dagd /_dfgd ._efce );_cead :=_e .Min (_efag ,_ecga );if _gdfb > 0&&_cead > _gdfb {continue ;
};if _dbdd .blocked (_dfgd ){continue ;};if !_cedf {_dbdd .pullWord (_dfgd ,_eca ,_daag );};_efda ++;if !_ecdgd {if _dfgd ._gabaag < _gaba {_gaba =_dfgd ._gabaag ;};if _dfgd ._gabaag > _dbabcc {_dbabcc =_dfgd ._gabaag ;};};if _cedf {break ;};};};if !_cedf {_aegg .applyRemovals (_daag );
};return _efda ;};

// String returns a human readable description of `s`.
func (_gbaeadd intSet )String ()string {var _dffdf []int ;for _cdaac :=range _gbaeadd {if _gbaeadd .has (_cdaac ){_dffdf =append (_dffdf ,_cdaac );};};_a .Ints (_dffdf );return _cbg .Sprintf ("\u0025\u002b\u0076",_dffdf );};func (_daaf *wordBag )applyRemovals (_abebc map[int ]map[*textWord ]struct{}){for _abbf ,_efb :=range _abebc {if len (_efb )==0{continue ;
};_adbde :=_daaf ._acfg [_abbf ];_agfc :=len (_adbde )-len (_efb );if _agfc ==0{delete (_daaf ._acfg ,_abbf );continue ;};_fceg :=make ([]*textWord ,_agfc );_cgde :=0;for _ ,_caga :=range _adbde {if _ ,_eggg :=_efb [_caga ];!_eggg {_fceg [_cgde ]=_caga ;
_cgde ++;};};_daaf ._acfg [_abbf ]=_fceg ;};};func (_dfgf *structElement )parseStructElement (_gedgf _cf .PdfObject ){_acfgc ,_gede :=_cf .GetDict (_gedgf );if !_gede {_fb .Log .Debug ("\u0070\u0061\u0072\u0073\u0065\u0053\u0074\u0072u\u0063\u0074\u0045le\u006d\u0065\u006e\u0074\u003a\u0020d\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u002e");
return ;};_gaab :=_acfgc .Get ("\u0053");_fcegb :=_acfgc .Get ("\u0050\u0067");_bgbb :="";if _gaab !=nil {_bgbb =_gaab .String ();};_ggdae :=_acfgc .Get ("\u004b");_dfgf ._cfdg =_bgbb ;_dfgf ._bbfd =_fcegb ;switch _fbdff :=_ggdae .(type ){case *_cf .PdfObjectInteger :_dfgf ._cfdg =_bgbb ;
_dfgf ._eeba =int64 (*_fbdff );_dfgf ._bbfd =_fcegb ;case *_cf .PdfObjectReference :_fdeg :=*_cf .MakeArray (_fbdff );var _edcdg int64 =-1;_dfgf ._eeba =_edcdg ;if _fdeg .Len ()==1{_abebe :=_fdeg .Elements ()[0];_caab ,_aabgc :=_abebe .(*_cf .PdfObjectInteger );
if _aabgc {_edcdg =int64 (*_caab );_dfgf ._eeba =_edcdg ;_dfgf ._cfdg =_bgbb ;_dfgf ._bbfd =_fcegb ;return ;};};_edde :=[]structElement {};for _ ,_cagg :=range _fdeg .Elements (){_bdbfe ,_fdbea :=_cagg .(*_cf .PdfObjectInteger );if _fdbea {_edcdg =int64 (*_bdbfe );
_dfgf ._eeba =_edcdg ;_dfgf ._cfdg =_bgbb ;}else {_abdg :=&structElement {};_abdg .parseStructElement (_cagg );_edde =append (_edde ,*_abdg );};_edcdg =-1;};_dfgf ._dgcbf =_edde ;case *_cf .PdfObjectArray :_bdada :=_ggdae .(*_cf .PdfObjectArray );var _eagb int64 =-1;
_dfgf ._eeba =_eagb ;if _bdada .Len ()==1{_gce :=_bdada .Elements ()[0];_edecc ,_fdac :=_gce .(*_cf .PdfObjectInteger );if _fdac {_eagb =int64 (*_edecc );_dfgf ._eeba =_eagb ;_dfgf ._cfdg =_bgbb ;_dfgf ._bbfd =_fcegb ;return ;};};_aeab :=[]structElement {};
for _ ,_gccg :=range _bdada .Elements (){_aded ,_bage :=_gccg .(*_cf .PdfObjectInteger );if _bage {_eagb =int64 (*_aded );_dfgf ._eeba =_eagb ;_dfgf ._cfdg =_bgbb ;_dfgf ._bbfd =_fcegb ;}else {_ddec :=&structElement {};_ddec .parseStructElement (_gccg );
_aeab =append (_aeab ,*_ddec );};_eagb =-1;};_dfgf ._dgcbf =_aeab ;};};func (_dgee *ruling )alignsSec (_ggad *ruling )bool {const _ecge =_ebgc +1.0;return _dgee ._cdcd -_ecge <=_ggad ._dcgf &&_ggad ._cdcd -_ecge <=_dgee ._dcgf ;};func (_bedg rulingList )primaries ()[]float64 {_egcaa :=make (map[float64 ]struct{},len (_bedg ));
for _ ,_dbgf :=range _bedg {_egcaa [_dbgf ._gabcd ]=struct{}{};};_gdceb :=make ([]float64 ,len (_egcaa ));_edeec :=0;for _ccac :=range _egcaa {_gdceb [_edeec ]=_ccac ;_edeec ++;};_a .Float64s (_gdceb );return _gdceb ;};func _bfde (_dcee func (*wordBag ,*textWord ,float64 )bool ,_faef float64 )func (*wordBag ,*textWord )bool {return func (_ecbge *wordBag ,_bcbf *textWord )bool {return _dcee (_ecbge ,_bcbf ,_faef )};
};type textResult struct{_ebf PageText ;_bfd int ;_gddb int ;};

// ApplyArea processes the page text only within the specified area `bbox`.
// Each time ApplyArea is called, it updates the result set in `pt`.
// Can be called multiple times in a row with different bounding boxes.
func (_gba *PageText )ApplyArea (bbox _bd .PdfRectangle ){_aff :=make ([]*textMark ,0,len (_gba ._accb ));for _ ,_baag :=range _gba ._accb {if _efec (_baag .bbox (),bbox ){_aff =append (_aff ,_baag );};};var _agee paraList ;_bggd :=len (_aff );for _fgfe :=0;
_fgfe < 360&&_bggd > 0;_fgfe +=90{_fadc :=make ([]*textMark ,0,len (_aff )-_bggd );for _ ,_ggca :=range _aff {if _ggca ._cbacf ==_fgfe {_fadc =append (_fadc ,_ggca );};};if len (_fadc )> 0{_gfcga :=_bbbg (_fadc ,_gba ._edf ,nil ,nil ,_gba ._efc ._ageb );
_agee =append (_agee ,_gfcga ...);_bggd -=len (_fadc );};};_ggfa :=new (_fg .Buffer );_agee .writeText (_ggfa );_gba ._eced =_ggfa .String ();_gba ._bdeg =_agee .toTextMarks ();_gba ._eaab =_agee .tables ();};

// New returns an Extractor instance for extracting content from the input PDF page.
func New (page *_bd .PdfPage )(*Extractor ,error ){return NewWithOptions (page ,nil )};

// String returns a description of `v`.
func (_aacc *ruling )String ()string {if _aacc ._egagd ==_febb {return "\u004e\u004f\u0054\u0020\u0052\u0055\u004c\u0049\u004e\u0047";};_gggf ,_abgbe :="\u0078","\u0079";if _aacc ._egagd ==_fdec {_gggf ,_abgbe ="\u0079","\u0078";};_egbf :="";if _aacc ._dagdf !=0.0{_egbf =_cbg .Sprintf (" \u0077\u0069\u0064\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_aacc ._dagdf );
};return _cbg .Sprintf ("\u0025\u00310\u0073\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0020\u0025\u0076\u0025\u0073",_aacc ._egagd ,_gggf ,_aacc ._gabcd ,_abgbe ,_aacc ._cdcd ,_aacc ._dcgf ,_aacc ._dcgf -_aacc ._cdcd ,_aacc ._aeecd ,_aacc .Color ,_egbf );
};func (_ddde *textTable )growTable (){_cfaac :=func (_ecbff paraList ){_ddde ._gfcf ++;for _abde :=0;_abde < _ddde ._bbfgf ;_abde ++{_bcbdd :=_ecbff [_abde ];_ddde .put (_abde ,_ddde ._gfcf -1,_bcbdd );};};_caefb :=func (_bcdfd paraList ){_ddde ._bbfgf ++;
for _aggfa :=0;_aggfa < _ddde ._gfcf ;_aggfa ++{_dbde :=_bcdfd [_aggfa ];_ddde .put (_ddde ._bbfgf -1,_aggfa ,_dbde );};};if _faga {_ddde .log ("\u0067r\u006f\u0077\u0054\u0061\u0062\u006ce");};for _bdebe :=0;;_bdebe ++{_fcfg :=false ;_acfe :=_ddde .getDown ();
_gbgbg :=_ddde .getRight ();if _faga {_cbg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bdebe ,_ddde );_cbg .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0020\u0064\u006f\u0077\u006e\u003d\u0025\u0073\u000a",_acfe );_cbg .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0072\u0069\u0067\u0068\u0074\u003d\u0025\u0073\u000a",_gbgbg );
};if _acfe !=nil &&_gbgbg !=nil {_abbgc :=_acfe [len (_acfe )-1];if !_abbgc .taken ()&&_abbgc ==_gbgbg [len (_gbgbg )-1]{_cfaac (_acfe );if _gbgbg =_ddde .getRight ();_gbgbg !=nil {_caefb (_gbgbg );_ddde .put (_ddde ._bbfgf -1,_ddde ._gfcf -1,_abbgc );
};_fcfg =true ;};};if !_fcfg &&_acfe !=nil {_cfaac (_acfe );_fcfg =true ;};if !_fcfg &&_gbgbg !=nil {_caefb (_gbgbg );_fcfg =true ;};if !_fcfg {break ;};};};func (_bgdg *subpath )removeDuplicates (){if len (_bgdg ._gcgc )==0{return ;};_acfa :=[]_ga .Point {_bgdg ._gcgc [0]};
for _ ,_eecg :=range _bgdg ._gcgc [1:]{if !_bdag (_eecg ,_acfa [len (_acfa )-1]){_acfa =append (_acfa ,_eecg );};};_bgdg ._gcgc =_acfa ;};func _bbcf (_ggbc float64 )bool {return _e .Abs (_ggbc )< _ebgc };func (_ffdee rulingList )augmentGrid ()(rulingList ,rulingList ){_aadee ,_dade :=_ffdee .vertsHorzs ();
if len (_aadee )==0||len (_dade )==0{return _aadee ,_dade ;};_dbgag ,_aefeb :=_aadee ,_dade ;_daba :=_aadee .bbox ();_dfcc :=_dade .bbox ();if _babf {_fb .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0056\u003d\u0025\u0036\u002e\u0032\u0066",_daba );
_fb .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0048\u003d\u0025\u0036\u002e\u0032\u0066",_dfcc );};var _adfc ,_agad ,_agea ,_beda *ruling ;if _dfcc .Llx < _daba .Llx -_dgbg {_adfc =&ruling {_aeecd :_dgdb ,_egagd :_bbee ,_gabcd :_dfcc .Llx ,_cdcd :_daba .Lly ,_dcgf :_daba .Ury };
_aadee =append (rulingList {_adfc },_aadee ...);};if _dfcc .Urx > _daba .Urx +_dgbg {_agad =&ruling {_aeecd :_dgdb ,_egagd :_bbee ,_gabcd :_dfcc .Urx ,_cdcd :_daba .Lly ,_dcgf :_daba .Ury };_aadee =append (_aadee ,_agad );};if _daba .Lly < _dfcc .Lly -_dgbg {_agea =&ruling {_aeecd :_dgdb ,_egagd :_fdec ,_gabcd :_daba .Lly ,_cdcd :_dfcc .Llx ,_dcgf :_dfcc .Urx };
_dade =append (rulingList {_agea },_dade ...);};if _daba .Ury > _dfcc .Ury +_dgbg {_beda =&ruling {_aeecd :_dgdb ,_egagd :_fdec ,_gabcd :_daba .Ury ,_cdcd :_dfcc .Llx ,_dcgf :_dfcc .Urx };_dade =append (_dade ,_beda );};if len (_aadee )+len (_dade )==len (_ffdee ){return _dbgag ,_aefeb ;
};_egdae :=append (_aadee ,_dade ...);_ffdee .log ("u\u006e\u0061\u0075\u0067\u006d\u0065\u006e\u0074\u0065\u0064");_egdae .log ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0065d");return _aadee ,_dade ;};func _ebec (_dadga map[float64 ][]*textLine )[]float64 {_caebb :=[]float64 {};
for _bbad :=range _dadga {_caebb =append (_caebb ,_bbad );};_a .Float64s (_caebb );return _caebb ;};var (_ecbc =_da .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");_ff =_da .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072");
);func (_addc paraList )topoOrder ()[]int {if _abg {_fb .Log .Info ("\u0074\u006f\u0070\u006f\u004f\u0072\u0064\u0065\u0072\u003a");};_fedeb :=len (_addc );_bbefg :=make ([]bool ,_fedeb );_cede :=make ([]int ,0,_fedeb );_cdefe :=_addc .llyOrdering ();var _gbebg func (_befcd int );
_gbebg =func (_eecge int ){_bbefg [_eecge ]=true ;for _fgga :=0;_fgga < _fedeb ;_fgga ++{if !_bbefg [_fgga ]{if _addc .readBefore (_cdefe ,_eecge ,_fgga ){_gbebg (_fgga );};};};_cede =append (_cede ,_eecge );};for _efcg :=0;_efcg < _fedeb ;_efcg ++{if !_bbefg [_efcg ]{_gbebg (_efcg );
};};return _cfcba (_cede );};func (_febbb paraList )addNeighbours (){_cbdb :=func (_geef []int ,_fgcc *textPara )([]*textPara ,[]*textPara ){_fadeb :=make ([]*textPara ,0,len (_geef )-1);_eggbd :=make ([]*textPara ,0,len (_geef )-1);for _ ,_ddab :=range _geef {_eceb :=_febbb [_ddab ];
if _eceb .Urx <=_fgcc .Llx {_fadeb =append (_fadeb ,_eceb );}else if _eceb .Llx >=_fgcc .Urx {_eggbd =append (_eggbd ,_eceb );};};return _fadeb ,_eggbd ;};_ffbd :=func (_cdbc []int ,_cdaf *textPara )([]*textPara ,[]*textPara ){_ffaac :=make ([]*textPara ,0,len (_cdbc )-1);
_gfbb :=make ([]*textPara ,0,len (_cdbc )-1);for _ ,_acgb :=range _cdbc {_ceaae :=_febbb [_acgb ];if _ceaae .Ury <=_cdaf .Lly {_gfbb =append (_gfbb ,_ceaae );}else if _ceaae .Lly >=_cdaf .Ury {_ffaac =append (_ffaac ,_ceaae );};};return _ffaac ,_gfbb ;
};_gfdda :=_febbb .yNeighbours (_cgbf );for _ ,_bfgea :=range _febbb {_ccdbc :=_gfdda [_bfgea ];if len (_ccdbc )==0{continue ;};_ggfafc ,_gfcdb :=_cbdb (_ccdbc ,_bfgea );if len (_ggfafc )==0&&len (_gfcdb )==0{continue ;};if len (_ggfafc )> 0{_ebddb :=_ggfafc [0];
for _ ,_eeeg :=range _ggfafc [1:]{if _eeeg .Urx >=_ebddb .Urx {_ebddb =_eeeg ;};};for _ ,_aaag :=range _ggfafc {if _aaag !=_ebddb &&_aaag .Urx > _ebddb .Llx {_ebddb =nil ;break ;};};if _ebddb !=nil &&_eed (_bfgea .PdfRectangle ,_ebddb .PdfRectangle ){_bfgea ._ebeb =_ebddb ;
};};if len (_gfcdb )> 0{_dgfca :=_gfcdb [0];for _ ,_fgdbe :=range _gfcdb [1:]{if _fgdbe .Llx <=_dgfca .Llx {_dgfca =_fgdbe ;};};for _ ,_bbgd :=range _gfcdb {if _bbgd !=_dgfca &&_bbgd .Llx < _dgfca .Urx {_dgfca =nil ;break ;};};if _dgfca !=nil &&_eed (_bfgea .PdfRectangle ,_dgfca .PdfRectangle ){_bfgea ._bbbge =_dgfca ;
};};};_gfdda =_febbb .xNeighbours (_fcca );for _ ,_efcfb :=range _febbb {_dcaed :=_gfdda [_efcfb ];if len (_dcaed )==0{continue ;};_afad ,_bdagb :=_ffbd (_dcaed ,_efcfb );if len (_afad )==0&&len (_bdagb )==0{continue ;};if len (_bdagb )> 0{_fefg :=_bdagb [0];
for _ ,_bgcd :=range _bdagb [1:]{if _bgcd .Ury >=_fefg .Ury {_fefg =_bgcd ;};};for _ ,_aafbf :=range _bdagb {if _aafbf !=_fefg &&_aafbf .Ury > _fefg .Lly {_fefg =nil ;break ;};};if _fefg !=nil &&_eccg (_efcfb .PdfRectangle ,_fefg .PdfRectangle ){_efcfb ._dffd =_fefg ;
};};if len (_afad )> 0{_dcaee :=_afad [0];for _ ,_geba :=range _afad [1:]{if _geba .Lly <=_dcaee .Lly {_dcaee =_geba ;};};for _ ,_caegg :=range _afad {if _caegg !=_dcaee &&_caegg .Lly < _dcaee .Ury {_dcaee =nil ;break ;};};if _dcaee !=nil &&_eccg (_efcfb .PdfRectangle ,_dcaee .PdfRectangle ){_efcfb ._cedb =_dcaee ;
};};};for _ ,_egbc :=range _febbb {if _egbc ._ebeb !=nil &&_egbc ._ebeb ._bbbge !=_egbc {_egbc ._ebeb =nil ;};if _egbc ._cedb !=nil &&_egbc ._cedb ._dffd !=_egbc {_egbc ._cedb =nil ;};if _egbc ._bbbge !=nil &&_egbc ._bbbge ._ebeb !=_egbc {_egbc ._bbbge =nil ;
};if _egbc ._dffd !=nil &&_egbc ._dffd ._cedb !=_egbc {_egbc ._dffd =nil ;};};};

// String returns a human readable description of `ss`.
func (_caec *shapesState )String ()string {return _cbg .Sprintf ("\u007b\u0025\u0064\u0020su\u0062\u0070\u0061\u0074\u0068\u0073\u0020\u0066\u0072\u0065\u0073\u0068\u003d\u0025t\u007d",len (_caec ._eaaf ),_caec ._dgbb );};

// PageFonts represents extracted fonts on a PDF page.
type PageFonts struct{Fonts []Font ;};func (_cdea *subpath )clear (){*_cdea =subpath {}};func (_aagd *subpath )makeRectRuling (_cfabd _gf .Color )(*ruling ,bool ){if _ggeg {_fb .Log .Info ("\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0070\u0061\u0074\u0068\u003d\u0025\u0076",_aagd );
};_cdeb :=_aagd ._gcgc [:4];_gbbab :=make (map[int ]rulingKind ,len (_cdeb ));for _gegf ,_bccb :=range _cdeb {_ecdec :=_aagd ._gcgc [(_gegf +1)%4];_gbbab [_gegf ]=_aacdg (_bccb ,_ecdec );if _ggeg {_cbg .Printf ("\u0025\u0034\u0064: \u0025\u0073\u0020\u003d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066",_gegf ,_gbbab [_gegf ],_bccb ,_ecdec );
};};if _ggeg {_cbg .Printf ("\u0020\u0020\u0020\u006b\u0069\u006e\u0064\u0073\u003d\u0025\u002b\u0076\u000a",_gbbab );};var _dffgf ,_gebd []int ;for _dggfe ,_eeadb :=range _gbbab {switch _eeadb {case _fdec :_gebd =append (_gebd ,_dggfe );case _bbee :_dffgf =append (_dffgf ,_dggfe );
};};if _ggeg {_cbg .Printf ("\u0020\u0020 \u0068\u006f\u0072z\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_gebd ),_gebd );_cbg .Printf ("\u0020\u0020 \u0076\u0065\u0072t\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_dffgf ),_dffgf );
};_ccfbf :=(len (_gebd )==2&&len (_dffgf )==2)||(len (_gebd )==2&&len (_dffgf )==0&&_affc (_cdeb [_gebd [0]],_cdeb [_gebd [1]]))||(len (_dffgf )==2&&len (_gebd )==0&&_gcaff (_cdeb [_dffgf [0]],_cdeb [_dffgf [1]]));if _ggeg {_cbg .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_gebd ),len (_dffgf ),_ccfbf );
};if !_ccfbf {if _ggeg {_fb .Log .Error ("\u0021!\u006d\u0061\u006b\u0065R\u0065\u0063\u0074\u0052\u0075l\u0069n\u0067:\u0020\u0070\u0061\u0074\u0068\u003d\u0025v",_aagd );_cbg .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_gebd ),len (_dffgf ),_ccfbf );
};return &ruling {},false ;};if len (_dffgf )==0{for _dfeda ,_dacbd :=range _gbbab {if _dacbd !=_fdec {_dffgf =append (_dffgf ,_dfeda );};};};if len (_gebd )==0{for _acaa ,_dggfb :=range _gbbab {if _dggfb !=_bbee {_gebd =append (_gebd ,_acaa );};};};if _ggeg {_fb .Log .Info ("\u006da\u006b\u0065R\u0065\u0063\u0074\u0052u\u006c\u0069\u006eg\u003a\u0020\u0068\u006f\u0072\u007a\u0073\u003d\u0025d \u0076\u0065\u0072t\u0073\u003d%\u0064\u0020\u0070\u006f\u0069\u006et\u0073\u003d%\u0064\u000a"+"\u0009\u0020\u0068o\u0072\u007a\u0073\u003d\u0025\u002b\u0076\u000a"+"\u0009\u0020\u0076e\u0072\u0074\u0073\u003d\u0025\u002b\u0076\u000a"+"\t\u0070\u006f\u0069\u006e\u0074\u0073\u003d\u0025\u002b\u0076",len (_gebd ),len (_dffgf ),len (_cdeb ),_gebd ,_dffgf ,_cdeb );
};var _agae ,_bcfb ,_dedf ,_beaed _ga .Point ;if _cdeb [_gebd [0]].Y > _cdeb [_gebd [1]].Y {_dedf ,_beaed =_cdeb [_gebd [0]],_cdeb [_gebd [1]];}else {_dedf ,_beaed =_cdeb [_gebd [1]],_cdeb [_gebd [0]];};if _cdeb [_dffgf [0]].X > _cdeb [_dffgf [1]].X {_agae ,_bcfb =_cdeb [_dffgf [0]],_cdeb [_dffgf [1]];
}else {_agae ,_bcfb =_cdeb [_dffgf [1]],_cdeb [_dffgf [0]];};_ebbce :=_bd .PdfRectangle {Llx :_agae .X ,Urx :_bcfb .X ,Lly :_beaed .Y ,Ury :_dedf .Y };if _ebbce .Llx > _ebbce .Urx {_ebbce .Llx ,_ebbce .Urx =_ebbce .Urx ,_ebbce .Llx ;};if _ebbce .Lly > _ebbce .Ury {_ebbce .Lly ,_ebbce .Ury =_ebbce .Ury ,_ebbce .Lly ;
};_abae :=rectRuling {PdfRectangle :_ebbce ,_ffcef :_fffe (_ebbce ),Color :_cfabd };if _abae ._ffcef ==_febb {if _ggeg {_fb .Log .Error ("\u006da\u006b\u0065\u0052\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006eg\u003a\u0020\u006b\u0069\u006e\u0064\u003d\u006e\u0069\u006c");
};return nil ,false ;};_eeebg ,_aggd :=_abae .asRuling ();if !_aggd {if _ggeg {_fb .Log .Error ("\u006da\u006b\u0065\u0052\u0065c\u0074\u0052\u0075\u006c\u0069n\u0067:\u0020!\u0069\u0073\u0052\u0075\u006c\u0069\u006eg");};return nil ,false ;};if _babf {_cbg .Printf ("\u0020\u0020\u0020\u0072\u003d\u0025\u0073\u000a",_eeebg .String ());
};return _eeebg ,true ;};var _deccbb =map[rulingKind ]string {_febb :"\u006e\u006f\u006e\u0065",_fdec :"\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_bbee :"\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c"};func (_eacg *wordBag )sort (){for _ ,_dabgf :=range _eacg ._acfg {_a .Slice (_dabgf ,func (_fefb ,_baagc int )bool {return _fcdf (_dabgf [_fefb ],_dabgf [_baagc ])< 0});
};};func (_ddaa *shapesState )stroke (_gdeg *[]pathSection ){_gcd :=pathSection {_ecea :_ddaa ._eaaf ,Color :_ddaa ._bcgcb .getStrokeColor ()};*_gdeg =append (*_gdeg ,_gcd );if _babf {_cbg .Printf ("\u0020 \u0020\u0020S\u0054\u0052\u004fK\u0045\u003a\u0020\u0025\u0064\u0020\u0073t\u0072\u006f\u006b\u0065\u0073\u0020s\u0073\u003d\u0025\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d%\u002b\u0076\u0020\u0025\u0036\u002e\u0032\u0066\u000a",len (*_gdeg ),_ddaa ,_ddaa ._bcgcb .getStrokeColor (),_gcd .bbox ());
if _efbf {for _gdb ,_ddfg :=range _ddaa ._eaaf {_cbg .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_gdb ,_ddfg );if _gdb ==10{break ;};};};};};

// Len returns the number of TextMarks in `ma`.
func (_faec *TextMarkArray )Len ()int {if _faec ==nil {return 0;};return len (_faec ._acag );};

// String returns a description of `b`.
func (_cdef *wordBag )String ()string {var _fcge []string ;for _ ,_dfaa :=range _cdef .depthIndexes (){_cdag :=_cdef ._acfg [_dfaa ];for _ ,_cedc :=range _cdag {_fcge =append (_fcge ,_cedc ._ffdcg );};};return _cbg .Sprintf ("\u0025.\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065=\u0025\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0025\u0071",_cdef .PdfRectangle ,_cdef ._dagd ,len (_fcge ),_fcge );
};func (_feed *textObject )setTextMatrix (_gfbf []float64 ){if len (_gfbf )!=6{_fb .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u006c\u0065\u006e\u0028\u0066\u0029\u0020\u0021\u003d\u0020\u0036\u0020\u0028\u0025\u0064\u0029",len (_gfbf ));return ;};_cfad ,_bacc ,_ddcb ,_ffcc ,_aedf ,_bfcd :=_gfbf [0],_gfbf [1],_gfbf [2],_gfbf [3],_gfbf [4],_gfbf [5];
_feed ._efa =_ga .NewMatrix (_cfad ,_bacc ,_ddcb ,_ffcc ,_aedf ,_bfcd );_feed ._fdce =_feed ._efa ;};func _dffg (_ggaf *Extractor ,_ffe *_bd .PdfPageResources ,_gecg _ad .GraphicsState ,_dee *textState ,_fcbf *stateStack )*textObject {return &textObject {_fcb :_ggaf ,_afgf :_ffe ,_dcd :_gecg ,_ecfd :_fcbf ,_beg :_dee ,_efa :_ga .IdentityMatrix (),_fdce :_ga .IdentityMatrix ()};
};const (_dcge markKind =iota ;_fafd ;_ecae ;_dgdb ;);func _bdaf (_acbca []*textLine ,_bbfg map[float64 ][]*textLine )[]*list {_feccb :=_ebec (_bbfg );_fbgg :=[]*list {};if len (_feccb )==0{return _fbgg ;};_cbea :=_feccb [0];_bgad :=1;_ebfeg :=_bbfg [_cbea ];
for _bgab ,_cbaf :=range _ebfeg {var _daff float64 ;_baef :=[]*list {};_edgg :=_cbaf ._becg ;_agdd :=-1.0;if _bgab < len (_ebfeg )-1{_agdd =_ebfeg [_bgab +1]._becg ;};if _bgad < len (_feccb ){_baef =_eacde (_acbca ,_bbfg ,_feccb ,_bgad ,_edgg ,_agdd );
};_daff =_agdd ;if len (_baef )> 0{_ecec :=_baef [0];if len (_ecec ._ggcfb )> 0{_daff =_ecec ._ggcfb [0]._becg ;};};_ddace :=[]*textLine {_cbaf };_eecbe :=_adae (_cbaf ,_acbca ,_feccb ,_edgg ,_daff );_ddace =append (_ddace ,_eecbe ...);_aggg :=_fbeb (_ddace ,"\u0062\u0075\u006c\u006c\u0065\u0074",_baef );
_aggg ._fcgc =_egdd (_ddace ,"");_fbgg =append (_fbgg ,_aggg );};return _fbgg ;};type compositeCell struct{_bd .PdfRectangle ;paraList ;};func (_bee *stateStack )top ()*textState {if _bee .empty (){return nil ;};return (*_bee )[_bee .size ()-1];};func (_efee *shapesState )lineTo (_eaf ,_efcb float64 ){if _gcc {_fb .Log .Info ("\u006c\u0069\u006eeT\u006f\u0028\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0070\u003d\u0025\u002e\u0032\u0066",_eaf ,_efcb ,_efee .devicePoint (_eaf ,_efcb ));
};_efee .addPoint (_eaf ,_efcb );};func (_ecbg *shapesState )devicePoint (_fdaga ,_afgcf float64 )_ga .Point {_fada :=_ecbg ._cacd .Mult (_ecbg ._aefb );_fdaga ,_afgcf =_fada .Transform (_fdaga ,_afgcf );return _ga .NewPoint (_fdaga ,_afgcf );};func (_gbegd *textTable )isExportable ()bool {if _gbegd ._deagb {return true ;
};_dede :=func (_ccbag int )bool {_cccab :=_gbegd .get (0,_ccbag );if _cccab ==nil {return false ;};_aabgg :=_cccab .text ();_bccbg :=_g .RuneCountInString (_aabgg );_faafa :=_fdee .MatchString (_aabgg );return _bccbg <=1||_faafa ;};for _bdgbf :=0;_bdgbf < _gbegd ._gfcf ;
_bdgbf ++{if !_dede (_bdgbf ){return true ;};};return false ;};func (_beaa lineRuling )yMean ()float64 {return 0.5*(_beaa ._affd .Y +_beaa ._ceea .Y )};func (_eaec *compositeCell )updateBBox (){for _ ,_gdgag :=range _eaec .paraList {_eaec .PdfRectangle =_agcf (_eaec .PdfRectangle ,_gdgag .PdfRectangle );
};};func (_gdcg *PageText )computeViews (){_efe :=_gdcg .getParagraphs ();_gfcg :=new (_fg .Buffer );_efe .writeText (_gfcg );_gdcg ._eced =_gfcg .String ();_gdcg ._bdeg =_efe .toTextMarks ();_gdcg ._eaab =_efe .tables ();if _deef {_fb .Log .Info ("\u0063\u006f\u006dpu\u0074\u0065\u0056\u0069\u0065\u0077\u0073\u003a\u0020\u0074\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064",len (_gdcg ._eaab ));
};};func (_ddbec *TextMarkArray )exists (_ebae TextMark )bool {for _ ,_bcea :=range _ddbec .Elements (){if _fd .DeepEqual (_ebae .DirectObject ,_bcea .DirectObject )&&_fd .DeepEqual (_ebae .BBox ,_bcea .BBox )&&_bcea .Text ==_ebae .Text {return true ;};
};return false ;};type rulingList []*ruling ;func (_bgadc *textObject )newTextMark (_cbbce string ,_agddd _ga .Matrix ,_gcab _ga .Point ,_bbec float64 ,_bgcgc *_bd .PdfFont ,_aedb float64 ,_edgee ,_dfba _gf .Color ,_dgga _cf .PdfObject ,_ddef []string ,_ggdf int ,_cdb int )(textMark ,bool ){_gbca :=_agddd .Angle ();
_cdca :=_gbbdd (_gbca ,_ddccb );var _fcfd float64 ;if _cdca %180!=90{_fcfd =_agddd .ScalingFactorY ();}else {_fcfd =_agddd .ScalingFactorX ();};_bcfe :=_egdf (_agddd );_cfeg :=_bd .PdfRectangle {Llx :_bcfe .X ,Lly :_bcfe .Y ,Urx :_gcab .X ,Ury :_gcab .Y };
switch _cdca %360{case 90:_cfeg .Urx -=_fcfd ;case 180:_cfeg .Ury -=_fcfd ;case 270:_cfeg .Urx +=_fcfd ;case 0:_cfeg .Ury +=_fcfd ;default:_cdca =0;_cfeg .Ury +=_fcfd ;};if _cfeg .Llx > _cfeg .Urx {_cfeg .Llx ,_cfeg .Urx =_cfeg .Urx ,_cfeg .Llx ;};if _cfeg .Lly > _cfeg .Ury {_cfeg .Lly ,_cfeg .Ury =_cfeg .Ury ,_cfeg .Lly ;
};_caee :=true ;if _bgadc ._fcb ._ccag .Width ()> 0{_adfga ,_cfba :=_gfbc (_cfeg ,_bgadc ._fcb ._ccag );if !_cfba {_caee =false ;_fb .Log .Debug ("\u0054\u0065\u0078\u0074\u0020m\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069\u0064\u0065\u0020\u0070a\u0067\u0065\u002e\u0020\u0062\u0062\u006f\u0078\u003d\u0025\u0067\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u003d\u0025\u0067\u0020\u0074\u0065\u0078\u0074\u003d\u0025q",_cfeg ,_bgadc ._fcb ._ccag ,_cbbce );
};_cfeg =_adfga ;};_ebab :=_cfeg ;_gabc :=_bgadc ._fcb ._ccag ;switch _cdca %360{case 90:_gabc .Urx ,_gabc .Ury =_gabc .Ury ,_gabc .Urx ;_ebab =_bd .PdfRectangle {Llx :_gabc .Urx -_cfeg .Ury ,Urx :_gabc .Urx -_cfeg .Lly ,Lly :_cfeg .Llx ,Ury :_cfeg .Urx };
case 180:_ebab =_bd .PdfRectangle {Llx :_gabc .Urx -_cfeg .Llx ,Urx :_gabc .Urx -_cfeg .Urx ,Lly :_gabc .Ury -_cfeg .Lly ,Ury :_gabc .Ury -_cfeg .Ury };case 270:_gabc .Urx ,_gabc .Ury =_gabc .Ury ,_gabc .Urx ;_ebab =_bd .PdfRectangle {Llx :_cfeg .Ury ,Urx :_cfeg .Lly ,Lly :_gabc .Ury -_cfeg .Llx ,Ury :_gabc .Ury -_cfeg .Urx };
};if _ebab .Llx > _ebab .Urx {_ebab .Llx ,_ebab .Urx =_ebab .Urx ,_ebab .Llx ;};if _ebab .Lly > _ebab .Ury {_ebab .Lly ,_ebab .Ury =_ebab .Ury ,_ebab .Lly ;};_deggd :=textMark {_becfb :_cbbce ,PdfRectangle :_ebab ,_dgde :_cfeg ,_ecfc :_bgcgc ,_afbae :_fcfd ,_efege :_aedb ,_debg :_agddd ,_cbaac :_gcab ,_cbacf :_cdca ,_fcbd :_edgee ,_decad :_dfba ,_abbeg :_dgga ,_abffe :_ddef ,Th :_bgadc ._beg ._cgec ,Tw :_bgadc ._beg ._eef ,_cefd :_cdb ,_fcba :_ggdf };
if _bega {_fb .Log .Info ("n\u0065\u0077\u0054\u0065\u0078\u0074M\u0061\u0072\u006b\u003a\u0020\u0073t\u0061\u0072\u0074\u003d\u0025\u002e\u0032f\u0020\u0065\u006e\u0064\u003d\u0025\u002e\u0032\u0066\u0020%\u0073",_bcfe ,_gcab ,_deggd .String ());};return _deggd ,_caee ;
};func _ggdg (_afgc _bd .PdfRectangle )textState {return textState {_cgec :100,_gbgg :RenderModeFill ,_beac :_afgc };};var _gfg =[]string {"\u2756","\u27a2","\u2713","\u2022","\uf0a7","\u25a1","\u2212","\u25a0","\u25aa","\u006f"};

// String returns a description of `p`.
func (_cbd *textPara )String ()string {if _cbd ._ddda {return _cbg .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u005b\u0045\u004d\u0050\u0054\u0059\u005d",_cbd .PdfRectangle );};_fadac :="";if _cbd ._dgega !=nil {_fadac =_cbg .Sprintf ("\u005b\u0025\u0064\u0078\u0025\u0064\u005d\u0020",_cbd ._dgega ._bbfgf ,_cbd ._dgega ._gfcf );
};return _cbg .Sprintf ("\u0025\u0036\u002e\u0032f \u0025\u0073\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u0020\u0025\u0071",_cbd .PdfRectangle ,_fadac ,len (_cbd ._bgcc ),_ddfcg (_cbd .text (),50));};type textTable struct{_bd .PdfRectangle ;_bbfgf ,_gfcf int ;
_deagb bool ;_fdbac map[uint64 ]*textPara ;_bfeb map[uint64 ]compositeCell ;};

// PageText represents the layout of text on a device page.
type PageText struct{_accb []*textMark ;_eced string ;_bdeg []TextMark ;_eaab []TextTable ;_edf _bd .PdfRectangle ;_bbgb []pathSection ;_fdf []pathSection ;_cadfe *_cf .PdfObject ;_edee _cf .PdfObject ;_cgcb *_ad .ContentStreamOperations ;_efc PageTextOptions ;
};const (_bdg ="\u0045\u0052R\u004f\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u002c\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";
_aed ="\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0043a\u006e\u0027\u0074 g\u0065\u0074\u0020\u0066\u006f\u006et\u0020\u0070\u0072\u006f\u0070\u0065\u0072\u0074\u0069\u0065\u0073\u002c\u0020\u0066\u006fn\u0074\u0020\u006e\u006f\u0074\u0020\u0066\u006fu\u006e\u0064";
_cbc ="\u0045\u0052\u0052O\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0067\u0065\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0074\u0072\u0065\u0061\u006d\u002c\u0020\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";_gef ="E\u0052R\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066o\u006e\u0074\u0020\u0066ou\u006e\u0064";
);func _facg (_adbgg []TextMark ,_bcdd *int )[]TextMark {_dfgc :=_adbgg [len (_adbgg )-1];_cbad :=[]rune (_dfgc .Text );if len (_cbad )==1{_adbgg =_adbgg [:len (_adbgg )-1];_caea :=_adbgg [len (_adbgg )-1];*_bcdd =_caea .Offset +len (_caea .Text );}else {_cbgff :=_degge (_dfgc .Text );
*_bcdd +=len (_cbgff )-len (_dfgc .Text );_dfgc .Text =_cbgff ;};return _adbgg ;};func (_gggb *ruling )alignsPrimary (_ggga *ruling )bool {return _gggb ._egagd ==_ggga ._egagd &&_e .Abs (_gggb ._gabcd -_ggga ._gabcd )< _ebgc *0.5;};func _eddd (_cdg *_ad .ContentStreamOperation )(float64 ,error ){if len (_cdg .Params )!=1{_adcb :=_da .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");
_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_cdg .Operand ,1,len (_cdg .Params ),_cdg .Params );
return 0.0,_adcb ;};return _cf .GetNumberAsFloat (_cdg .Params [0]);};func (_eebd rulingList )mergePrimary ()float64 {_baeb :=_eebd [0]._gabcd ;for _ ,_gfgc :=range _eebd [1:]{_baeb +=_gfgc ._gabcd ;};return _baeb /float64 (len (_eebd ));};func (_cfcbg paraList )reorder (_ffcf []int ){_ecdgc :=make (paraList ,len (_cfcbg ));
for _gabcg ,_fgef :=range _ffcf {_ecdgc [_gabcg ]=_cfcbg [_fgef ];};copy (_cfcbg ,_ecdgc );};

// Marks returns the TextMark collection for a page. It represents all the text on the page.
func (_ggec PageText )Marks ()*TextMarkArray {return &TextMarkArray {_acag :_ggec ._bdeg }};

// ExtractFonts returns all font information from the page extractor, including
// font name, font type, the raw data of the embedded font file (if embedded), font descriptor and more.
//
// The argument `previousPageFonts` is used when trying to build a complete font catalog for multiple pages or the entire document.
// The entries from `previousPageFonts` are added to the returned result unless already included in the page, i.e. no duplicate entries.
//
// NOTE: If previousPageFonts is nil, all fonts from the page will be returned. Use it when building up a full list of fonts for a document or page range.
func (_eg *Extractor )ExtractFonts (previousPageFonts *PageFonts )(*PageFonts ,error ){_gbe :=PageFonts {};_fab :=_gbe .extractPageResourcesToFont (_eg ._fed );if _fab !=nil {return nil ,_fab ;};if previousPageFonts !=nil {for _ ,_gbg :=range previousPageFonts .Fonts {if !_baf (_gbe .Fonts ,_gbg .FontName ){_gbe .Fonts =append (_gbe .Fonts ,_gbg );
};};};return &PageFonts {Fonts :_gbe .Fonts },nil ;};type gridTiling struct{_bd .PdfRectangle ;_cebc []float64 ;_adfdb []float64 ;_adga map[float64 ]map[float64 ]gridTile ;};

// Tables returns the tables extracted from the page.
func (_acab PageText )Tables ()[]TextTable {if _deef {_fb .Log .Info ("\u0054\u0061\u0062\u006c\u0065\u0073\u003a\u0020\u0025\u0064",len (_acab ._eaab ));};return _acab ._eaab ;};func (_addbg *ruling )equals (_cfgf *ruling )bool {return _addbg ._egagd ==_cfgf ._egagd &&_abgd (_addbg ._gabcd ,_cfgf ._gabcd )&&_abgd (_addbg ._cdcd ,_cfgf ._cdcd )&&_abgd (_addbg ._dcgf ,_cfgf ._dcgf );
};func _bfab (_cabfe ,_gdcc *textPara )bool {if _cabfe ._ddda ||_gdcc ._ddda {return true ;};return _bfaeb (_cabfe .depth ()-_gdcc .depth ());};func (_feec *subpath )last ()_ga .Point {return _feec ._gcgc [len (_feec ._gcgc )-1]};func _gbbdd (_gege float64 ,_ggbg int )int {if _ggbg ==0{_ggbg =1;
};_ebegc :=float64 (_ggbg );return int (_e .Round (_gege /_ebegc )*_ebegc );};func (_bcf *imageExtractContext )extractInlineImage (_aaab *_ad .ContentStreamInlineImage ,_eece _ad .GraphicsState ,_cddg *_bd .PdfPageResources )error {_eeg ,_aab :=_aaab .ToImage (_cddg );
if _aab !=nil {return _aab ;};_dcbb ,_aab :=_aaab .GetColorSpace (_cddg );if _aab !=nil {return _aab ;};if _dcbb ==nil {_dcbb =_bd .NewPdfColorspaceDeviceGray ();};_fecc ,_aab :=_dcbb .ImageToRGB (*_eeg );if _aab !=nil {return _aab ;};_ead :=ImageMark {Image :&_fecc ,Width :_eece .CTM .ScalingFactorX (),Height :_eece .CTM .ScalingFactorY (),Angle :_eece .CTM .Angle ()};
_ead .X ,_ead .Y =_eece .CTM .Translation ();_bcf ._babe =append (_bcf ._babe ,_ead );_bcf ._fff ++;return nil ;};func (_aced *wordBag )highestWord (_efgc int ,_caae ,_edcac float64 )*textWord {for _ ,_bgcg :=range _aced ._acfg [_efgc ]{if _caae <=_bgcg ._gabaag &&_bgcg ._gabaag <=_edcac {return _bgcg ;
};};return nil ;};func (_dbda *shapesState )moveTo (_bbdb ,_ecfbg float64 ){_dbda ._dgbb =true ;_dbda ._gdee =_dbda .devicePoint (_bbdb ,_ecfbg );if _gcc {_fb .Log .Info ("\u006d\u006fv\u0065\u0054\u006f\u003a\u0020\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0064\u0065\u0076\u0069\u0063\u0065\u003d%.\u0032\u0066",_bbdb ,_ecfbg ,_dbda ._gdee );
};};func (_dege *textMark )bbox ()_bd .PdfRectangle {return _dege .PdfRectangle };func (_gbd *shapesState )fill (_eead *[]pathSection ){_cbgfd :=pathSection {_ecea :_gbd ._eaaf ,Color :_gbd ._bcgcb .getFillColor ()};*_eead =append (*_eead ,_cbgfd );if _babf {_dace :=_cbgfd .bbox ();
_cbg .Printf ("\u0020 \u0020\u0020\u0046\u0049\u004c\u004c\u003a %\u0032\u0064\u0020\u0066\u0069\u006c\u006c\u0073\u0020\u0028\u0025\u0064\u0020\u006ee\u0077\u0029 \u0073\u0073\u003d%\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d\u0025\u0033\u0076\u0020\u0025\u0036\u002e\u0032f\u003d\u00256.\u0032\u0066\u0078%\u0036\u002e\u0032\u0066\u000a",len (*_eead ),len (_cbgfd ._ecea ),_gbd ,_cbgfd .Color ,_dace ,_dace .Width (),_dace .Height ());
if _efbf {for _gcgf ,_ced :=range _cbgfd ._ecea {_cbg .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_gcgf ,_ced );if _gcgf ==10{break ;};};};};};func (_eefc *textObject )getFontDict (_egef string )(_ccda _cf .PdfObject ,_ecca error ){_gcgd :=_eefc ._afgf ;
if _gcgd ==nil {_fb .Log .Debug ("g\u0065\u0074\u0046\u006f\u006e\u0074D\u0069\u0063\u0074\u002e\u0020\u004eo\u0020\u0072\u0065\u0073\u006f\u0075\u0072c\u0065\u0073\u002e\u0020\u006e\u0061\u006d\u0065\u003d\u0025#\u0071",_egef );return nil ,nil ;};_ccda ,_beae :=_gcgd .GetFontByName (_cf .PdfObjectName (_egef ));
if !_beae {_fb .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0067\u0065t\u0046\u006f\u006et\u0044\u0069\u0063\u0074\u003a\u0020\u0046\u006f\u006et \u006e\u006f\u0074 \u0066\u006fu\u006e\u0064\u003a\u0020\u006e\u0061m\u0065\u003d%\u0023\u0071",_egef );
return nil ,_da .New ("f\u006f\u006e\u0074\u0020no\u0074 \u0069\u006e\u0020\u0072\u0065s\u006f\u0075\u0072\u0063\u0065\u0073");};return _ccda ,nil ;};type structTreeRoot struct{_gagg []structElement ;_cbee string ;};func (_dccge *textPara )depth ()float64 {if _dccge ._ddda {return -1.0;
};if len (_dccge ._bgcc )> 0{return _dccge ._bgcc [0]._becg ;};return _dccge ._dgega .depth ();};const _bfcda =1.0/1000.0;func (_eegc *textObject )getFillColor ()_gf .Color {return _bdgg (_eegc ._dcd .ColorspaceNonStroking ,_eegc ._dcd .ColorNonStroking );
};func (_gfcc rectRuling )asRuling ()(*ruling ,bool ){_fdcec :=ruling {_egagd :_gfcc ._ffcef ,Color :_gfcc .Color ,_aeecd :_ecae };switch _gfcc ._ffcef {case _bbee :_fdcec ._gabcd =0.5*(_gfcc .Llx +_gfcc .Urx );_fdcec ._cdcd =_gfcc .Lly ;_fdcec ._dcgf =_gfcc .Ury ;
_bdac ,_geaf :=_gfcc .checkWidth (_gfcc .Llx ,_gfcc .Urx );if !_geaf {if _ggeg {_fb .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067V\u0065\u0072\u0074\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_gfcc );
};return nil ,false ;};_fdcec ._dagdf =_bdac ;case _fdec :_fdcec ._gabcd =0.5*(_gfcc .Lly +_gfcc .Ury );_fdcec ._cdcd =_gfcc .Llx ;_fdcec ._dcgf =_gfcc .Urx ;_dacae ,_bfac :=_gfcc .checkWidth (_gfcc .Lly ,_gfcc .Ury );if !_bfac {if _ggeg {_fb .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067H\u006f\u0072\u007a\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_gfcc );
};return nil ,false ;};_fdcec ._dagdf =_dacae ;default:_fb .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_gfcc ._ffcef );return nil ,false ;};return &_fdcec ,true ;};func (_deeg *wordBag )depthRange (_ebadd ,_fgacd int )[]int {var _aaad []int ;
for _abcd :=range _deeg ._acfg {if _ebadd <=_abcd &&_abcd <=_fgacd {_aaad =append (_aaad ,_abcd );};};if len (_aaad )==0{return nil ;};_a .Ints (_aaad );return _aaad ;};func _cfca (_ffdad ,_gafff _d .Image )_d .Image {_faccg ,_cecgb :=_gafff .Bounds ().Size (),_ffdad .Bounds ().Size ();
_afeb ,_eecaf :=_faccg .X ,_faccg .Y ;if _cecgb .X > _afeb {_afeb =_cecgb .X ;};if _cecgb .Y > _eecaf {_eecaf =_cecgb .Y ;};_gbcdc :=_d .Rect (0,0,_afeb ,_eecaf );if _faccg .X !=_afeb ||_faccg .Y !=_eecaf {_afggd :=_d .NewRGBA (_gbcdc );_cc .BiLinear .Scale (_afggd ,_gbcdc ,_ffdad ,_gafff .Bounds (),_cc .Over ,nil );
_gafff =_afggd ;};if _cecgb .X !=_afeb ||_cecgb .Y !=_eecaf {_bdea :=_d .NewRGBA (_gbcdc );_cc .BiLinear .Scale (_bdea ,_gbcdc ,_ffdad ,_ffdad .Bounds (),_cc .Over ,nil );_ffdad =_bdea ;};_aabc :=_d .NewRGBA (_gbcdc );_cc .DrawMask (_aabc ,_gbcdc ,_ffdad ,_d .Point {},_gafff ,_d .Point {},_cc .Over );
return _aabc ;};type rulingKind int ;func (_afe compositeCell )parasBBox ()(paraList ,_bd .PdfRectangle ){return _afe .paraList ,_afe .PdfRectangle ;};func (_bcfeg rulingList )splitSec ()[]rulingList {_a .Slice (_bcfeg ,func (_fgega ,_abcf int )bool {_dbaee ,_ecaa :=_bcfeg [_fgega ],_bcfeg [_abcf ];
if _dbaee ._cdcd !=_ecaa ._cdcd {return _dbaee ._cdcd < _ecaa ._cdcd ;};return _dbaee ._dcgf < _ecaa ._dcgf ;});_bfabb :=make (map[*ruling ]struct{},len (_bcfeg ));_ffaa :=func (_dgfe *ruling )rulingList {_cgbg :=rulingList {_dgfe };_bfabb [_dgfe ]=struct{}{};
for _ ,_decba :=range _bcfeg {if _ ,_edgd :=_bfabb [_decba ];_edgd {continue ;};for _ ,_bcddg :=range _cgbg {if _decba .alignsSec (_bcddg ){_cgbg =append (_cgbg ,_decba );_bfabb [_decba ]=struct{}{};break ;};};};return _cgbg ;};_cdce :=[]rulingList {_ffaa (_bcfeg [0])};
for _ ,_dcab :=range _bcfeg [1:]{if _ ,_acef :=_bfabb [_dcab ];_acef {continue ;};_cdce =append (_cdce ,_ffaa (_dcab ));};return _cdce ;};const (_decb =1.0e-6;_fcgd =1.0e-4;_ddccb =10;_bgbd =6;_fede =0.5;_aecc =0.12;_gefdc =0.19;_gfeg =0.04;_gdab =0.04;
_ebbd =1.0;_gdbb =0.04;_cbf =0.4;_gcdd =0.7;_bebb =1.0;_cgga =0.1;_adbg =1.4;_fccc =0.46;_cgeg =0.02;_bfbg =0.2;_ebdca =0.5;_dafe =4;_aeggg =4.0;_cabe =6;_ffgg =0.3;_fcca =0.01;_cgbf =0.02;_bcde =2;_fbfa =2;_fgb =500;_gbbef =4.0;_egf =4.0;_bcbc =0.05;_gcbad =0.1;
_dgbg =2.0;_ebgc =2.0;_aabg =1.5;_defb =3.0;_egda =0.25;);func (_fdbg *textWord )toTextMarks (_gfea *int )[]TextMark {var _dccga []TextMark ;for _ ,_fdcdb :=range _fdbg ._gfdga {_dccga =_eagbg (_dccga ,_gfea ,_fdcdb .ToTextMark ());};return _dccga ;};func (_fbae *wordBag )absorb (_dgbdc *wordBag ){_ggg :=_dgbdc .makeRemovals ();
for _ada ,_gbea :=range _dgbdc ._acfg {for _ ,_gda :=range _gbea {_fbae .pullWord (_gda ,_ada ,_ggg );};};_dgbdc .applyRemovals (_ggg );};func (_bgdd *textObject )setCharSpacing (_dbcb float64 ){if _bgdd ==nil {return ;};_bgdd ._beg ._ged =_dbcb ;if _bbcb {_fb .Log .Info ("\u0073\u0065t\u0043\u0068\u0061\u0072\u0053\u0070\u0061\u0063\u0069\u006e\u0067\u003a\u0020\u0025\u002e\u0032\u0066\u0020\u0073\u0074\u0061\u0074e=\u0025\u0073",_dbcb ,_bgdd ._beg .String ());
};};func (_badg *wordBag )removeWord (_cgdea *textWord ,_abaf int ){_ageba :=_badg ._acfg [_abaf ];_ageba =_gecf (_ageba ,_cgdea );if len (_ageba )==0{delete (_badg ._acfg ,_abaf );}else {_badg ._acfg [_abaf ]=_ageba ;};};func _cgaee (_ceecc _bd .PdfRectangle ,_gabe []*textLine )*textPara {return &textPara {PdfRectangle :_ceecc ,_bgcc :_gabe };
};func (_adcf *textObject )renderText (_bced _cf .PdfObject ,_aafdd []byte ,_cegcf int ,_dfdab string )error {if _adcf ._caad {_fb .Log .Debug ("\u0072\u0065\u006e\u0064\u0065r\u0054\u0065\u0078\u0074\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069\u0064 \u0066\u006f\u006e\u0074\u002e\u0020\u004e\u006f\u0074\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u002e");
return nil ;};_fcee :=_adcf .getCurrentFont ();_gge :=_fcee .BytesToCharcodes (_aafdd );_egcb ,_bfgf ,_acfb :=_fcee .CharcodesToStrings (_gge ,_dfdab );if _acfb > 0{_fb .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_bfgf ,_acfb );
};_adcf ._beg ._abce +=_bfgf ;_adcf ._beg ._eag +=_acfb ;_eeceg :=_adcf ._beg ;_dgcb :=_eeceg ._fge ;_gedg :=_eeceg ._cgec /100.0;_dcca :=_bfcda ;if _fcee .Subtype ()=="\u0054\u0079\u0070e\u0033"{_dcca =1;};_dcfb ,_fad :=_fcee .GetRuneMetrics (' ');if !_fad {_dcfb ,_fad =_fcee .GetCharMetrics (32);
};if !_fad {_dcfb ,_ =_bd .DefaultFont ().GetRuneMetrics (' ');};_bbc :=_dcfb .Wx *_dcca ;_fb .Log .Trace ("\u0073p\u0061\u0063e\u0057\u0069\u0064t\u0068\u003d\u0025\u002e\u0032\u0066\u0020t\u0065\u0078\u0074\u003d\u0025\u0071 \u0066\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0066\u006f\u006et\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",_bbc ,_egcb ,_fcee ,_dgcb );
_ebfe :=_ga .NewMatrix (_dgcb *_gedg ,0,0,_dgcb ,0,_eeceg ._geff );if _bbcb {_fb .Log .Info ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0074\u0065\u0078t\u0073\u003d\u0025\u0071",len (_gge ),_gge ,_egcb );
};_fb .Log .Trace ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0072\u0075\u006ee\u0073\u003d\u0025\u0071",len (_gge ),_gge ,len (_egcb ));_fbd :=_adcf .getFillColor ();
_bfgb :=_adcf .getStrokeColor ();for _edddg ,_aeff :=range _egcb {_edec :=[]rune (_aeff );if len (_edec )==1&&_edec [0]=='\x00'{continue ;};_adbf :=_gge [_edddg ];_cgd :=_adcf ._dcd .CTM .Mult (_adcf ._efa ).Mult (_ebfe );_fba :=0.0;if len (_edec )==1&&_edec [0]==32{_fba =_eeceg ._eef ;
};_aaga ,_agf :=_fcee .GetCharMetrics (_adbf );if !_agf {_fb .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u004e\u006f \u006d\u0065\u0074r\u0069\u0063\u0020\u0066\u006f\u0072\u0020\u0063\u006fde\u003d\u0025\u0064 \u0072\u003d0\u0078\u0025\u0030\u0034\u0078\u003d%\u002b\u0071 \u0025\u0073",_adbf ,_edec ,_edec ,_fcee );
return _cbg .Errorf ("\u006e\u006f\u0020\u0063\u0068\u0061\u0072\u0020\u006d\u0065\u0074\u0072\u0069\u0063\u0073:\u0020f\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0063\u006f\u0064\u0065\u003d\u0025\u0064",_fcee .String (),_adbf );};_gbbe :=_ga .Point {X :_aaga .Wx *_dcca ,Y :_aaga .Wy *_dcca };
_fdef :=_ga .Point {X :(_gbbe .X *_dgcb +_fba )*_gedg };_edg :=_ga .Point {X :(_gbbe .X *_dgcb +_eeceg ._ged +_fba )*_gedg };if _bbcb {_fb .Log .Info ("\u0074\u0066\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0063\u003d\u0025\u002e\u0032f\u0020t\u0077\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_dgcb ,_eeceg ._ged ,_eeceg ._eef ,_gedg );
_fb .Log .Info ("\u0064x\u002c\u0064\u0079\u003d%\u002e\u0033\u0066\u0020\u00740\u003d%\u002e3\u0066\u0020\u0074\u003d\u0025\u002e\u0033f",_gbbe ,_fdef ,_edg );};_gdgb :=_eea (_fdef );_ebda :=_eea (_edg );_gbf :=_adcf ._dcd .CTM .Mult (_adcf ._efa ).Mult (_gdgb );
if _eagc {_fb .Log .Info ("e\u006e\u0064\u003a\u000a\tC\u0054M\u003d\u0025\u0073\u000a\u0009 \u0074\u006d\u003d\u0025\u0073\u000a"+"\u0009\u0020t\u0064\u003d\u0025s\u0020\u0078\u006c\u0061\u0074\u003d\u0025\u0073\u000a"+"\u0009t\u0064\u0030\u003d\u0025s\u000a\u0009\u0020\u0020\u2192 \u0025s\u0020x\u006c\u0061\u0074\u003d\u0025\u0073",_adcf ._dcd .CTM ,_adcf ._efa ,_ebda ,_egdf (_adcf ._dcd .CTM .Mult (_adcf ._efa ).Mult (_ebda )),_gdgb ,_gbf ,_egdf (_gbf ));
};_gafe ,_egcg :=_adcf .newTextMark (_dd .ExpandLigatures (_edec ),_cgd ,_egdf (_gbf ),_e .Abs (_bbc *_cgd .ScalingFactorX ()),_fcee ,_adcf ._beg ._ged ,_fbd ,_bfgb ,_bced ,_egcb ,_edddg ,_cegcf );if !_egcg {_fb .Log .Debug ("\u0054\u0065\u0078\u0074\u0020\u006d\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069d\u0065 \u0070\u0061\u0067\u0065\u002e\u0020\u0053\u006b\u0069\u0070\u0070\u0069\u006e\u0067");
continue ;};if _fcee ==nil {_fb .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u002e");}else if _fcee .Encoder ()==nil {_fb .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020N\u006f\u0020\u0065\u006e\u0063\u006f\u0064\u0069\u006eg\u002e\u0020\u0066o\u006et\u003d\u0025\u0073",_fcee );
}else {if _egde ,_bcgc :=_fcee .Encoder ().CharcodeToRune (_adbf );_bcgc {_gafe ._ecde =string (_egde );};};_fb .Log .Trace ("i\u003d\u0025\u0064\u0020\u0063\u006fd\u0065\u003d\u0025\u0064\u0020\u006d\u0061\u0072\u006b=\u0025\u0073\u0020t\u0072m\u003d\u0025\u0073",_edddg ,_adbf ,_gafe ,_cgd );
_adcf ._cag =append (_adcf ._cag ,&_gafe );_adcf ._efa .Concat (_ebda );};return nil ;};func _gfdba (_faba []*textMark ,_aeffcd _bd .PdfRectangle )[]*textWord {var _dgge []*textWord ;var _dbdbdd *textWord ;if _bega {_fb .Log .Info ("\u006d\u0061\u006beT\u0065\u0078\u0074\u0057\u006f\u0072\u0064\u0073\u003a\u0020\u0025\u0064\u0020\u006d\u0061\u0072\u006b\u0073",len (_faba ));
};_acee :=func (){if _dbdbdd !=nil {_bfec :=_dbdbdd .computeText ();if !_bggg (_bfec ){_dbdbdd ._ffdcg =_bfec ;_dgge =append (_dgge ,_dbdbdd );if _bega {_fb .Log .Info ("\u0061\u0064\u0064Ne\u0077\u0057\u006f\u0072\u0064\u003a\u0020\u0025\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",len (_dgge )-1,_dbdbdd .String ());
for _baaacb ,_ffcff :=range _dbdbdd ._gfdga {_cbg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_baaacb ,_ffcff .String ());};};};_dbdbdd =nil ;};};for _ ,_geae :=range _faba {if _ddac &&_dbdbdd !=nil &&len (_dbdbdd ._gfdga )> 0{_eacb :=_dbdbdd ._gfdga [len (_dbdbdd ._gfdga )-1];
_afdg ,_caabe :=_bgfdd (_geae ._becfb );_febe ,_fefgd :=_bgfdd (_eacb ._becfb );if _caabe &&!_fefgd &&_eacb .inDiacriticArea (_geae ){_dbdbdd .addDiacritic (_afdg );continue ;};if _fefgd &&!_caabe &&_geae .inDiacriticArea (_eacb ){_dbdbdd ._gfdga =_dbdbdd ._gfdga [:len (_dbdbdd ._gfdga )-1];
_dbdbdd .appendMark (_geae ,_aeffcd );_dbdbdd .addDiacritic (_febe );continue ;};};_egcad :=_bggg (_geae ._becfb );if _egcad {_acee ();continue ;};if _dbdbdd ==nil &&!_egcad {_dbdbdd =_egebe ([]*textMark {_geae },_aeffcd );continue ;};_gedde :=_dbdbdd ._efce ;
_bceg :=_e .Abs (_fbcfa (_aeffcd ,_geae )-_dbdbdd ._gabaag )/_gedde ;_dggg :=_ceda (_geae ,_dbdbdd )/_gedde ;if _dggg >=_aecc ||!(-_gefdc <=_dggg &&_bceg <=_gfeg ){_acee ();_dbdbdd =_egebe ([]*textMark {_geae },_aeffcd );continue ;};_dbdbdd .appendMark (_geae ,_aeffcd );
};_acee ();return _dgge ;};func (_ddgf *textObject )setTextLeading (_dea float64 ){if _ddgf ==nil {return ;};_ddgf ._beg ._dgcg =_dea ;};func _bga (_edbc ,_cdad _bd .PdfRectangle )bool {return _edbc .Llx <=_cdad .Llx &&_cdad .Urx <=_edbc .Urx &&_edbc .Lly <=_cdad .Lly &&_cdad .Ury <=_edbc .Ury ;
};

// ExtractPageImages returns the image contents of the page extractor, including data
// and position, size information for each image.
// A set of options to control page image extraction can be passed in. The options
// parameter can be nil for the default options. By default, inline stencil masks
// are not extracted.
func (_ggcb *Extractor )ExtractPageImages (options *ImageExtractOptions )(*PageImages ,error ){_ddg :=&imageExtractContext {_cee :options };_fbfd :=_ddg .extractContentStreamImages (_ggcb ._fbc ,_ggcb ._fed );if _fbfd !=nil {return nil ,_fbfd ;};return &PageImages {Images :_ddg ._babe },nil ;
};func _eggb (_feca _bd .PdfRectangle )*ruling {return &ruling {_egagd :_fdec ,_gabcd :_feca .Ury ,_cdcd :_feca .Llx ,_dcgf :_feca .Urx };};func (_dbaf *textObject )getFontDirect (_eebb string )(*_bd .PdfFont ,error ){_ceae ,_dgd :=_dbaf .getFontDict (_eebb );
if _dgd !=nil {return nil ,_dgd ;};_ffba ,_dgd :=_bd .NewPdfFontFromPdfObject (_ceae );if _dgd !=nil {_fb .Log .Debug ("\u0067\u0065\u0074\u0046\u006f\u006e\u0074\u0044\u0069\u0072\u0065\u0063\u0074\u003a\u0020\u004e\u0065\u0077Pd\u0066F\u006f\u006e\u0074\u0046\u0072\u006f\u006d\u0050\u0064\u0066\u004f\u0062j\u0065\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u006e\u0061\u006d\u0065\u003d%\u0023\u0071\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_eebb ,_dgd );
};return _ffba ,_dgd ;};func (_aeef paraList )tables ()[]TextTable {var _dceg []TextTable ;if _deef {_fb .Log .Info ("\u0070\u0061\u0072\u0061\u0073\u002e\u0074\u0061\u0062\u006c\u0065\u0073\u003a");};for _ ,_caf :=range _aeef {_eacdf :=_caf ._dgega ;if _eacdf !=nil &&_eacdf .isExportable (){_dceg =append (_dceg ,_eacdf .toTextTable ());
};};return _dceg ;};func _fa (_cd []string ,_bea int ,_aba int ){for _ec ,_bac :=_bea ,_aba -1;_ec < _bac ;_ec ,_bac =_ec +1,_bac -1{_cbb :=_cd [_ec ];_cd [_ec ]=_cd [_bac ];_cd [_bac ]=_cbb ;};};func _aaadg (_gece *textLine )float64 {return _gece ._abcg [0].Llx };
func _gfbc (_aafc ,_gfec _bd .PdfRectangle )(_bd .PdfRectangle ,bool ){if !_efec (_aafc ,_gfec ){return _bd .PdfRectangle {},false ;};return _bd .PdfRectangle {Llx :_e .Max (_aafc .Llx ,_gfec .Llx ),Urx :_e .Min (_aafc .Urx ,_gfec .Urx ),Lly :_e .Max (_aafc .Lly ,_gfec .Lly ),Ury :_e .Min (_aafc .Ury ,_gfec .Ury )},true ;
};func (_aeec *textPara )fontsize ()float64 {return _aeec ._bgcc [0]._efba };var _bf =[]string {"\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0053","\u0042","\u0053","\u0057\u0053","\u0042","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042","\u0042","\u0042","\u0053","\u0057\u0053","\u004f\u004e","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0045\u0053","\u0043\u0053","\u0045\u0053","\u0043\u0053","\u0043\u0053","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0043\u0053","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0043\u0053","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u0042\u004e","\u004f\u004e","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u004e","\u0045\u004e","\u004f\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0045\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c"};
func _egfeb (_bdbd *_bd .Image ,_ebade _gf .Color )_d .Image {_cfecg ,_abbfb :=int (_bdbd .Width ),int (_bdbd .Height );_cegca :=_d .NewRGBA (_d .Rect (0,0,_cfecg ,_abbfb ));for _gdbf :=0;_gdbf < _abbfb ;_gdbf ++{for _abfdf :=0;_abfdf < _cfecg ;_abfdf ++{_bdab ,_cccf :=_bdbd .ColorAt (_abfdf ,_gdbf );
if _cccf !=nil {_fb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_abfdf ,_gdbf );
continue ;};_efabf ,_fecb ,_ffeba ,_ :=_bdab .RGBA ();var _cebce _gf .Color ;if _efabf +_fecb +_ffeba ==0{_cebce =_ebade ;}else {_cebce =_gf .Transparent ;};_cegca .Set (_abfdf ,_gdbf ,_cebce );};};return _cegca ;};type paraList []*textPara ;func (_gceb *textWord )appendMark (_dgcff *textMark ,_dcad _bd .PdfRectangle ){_gceb ._gfdga =append (_gceb ._gfdga ,_dgcff );
_gceb .PdfRectangle =_agcf (_gceb .PdfRectangle ,_dgcff .PdfRectangle );if _dgcff ._afbae > _gceb ._efce {_gceb ._efce =_dgcff ._afbae ;};_gceb ._gabaag =_dcad .Ury -_gceb .PdfRectangle .Lly ;};func _afbb (_becbg string )bool {if _g .RuneCountInString (_becbg )< _dafe {return false ;
};_afccc ,_bggcf :=_g .DecodeLastRuneInString (_becbg );if _bggcf <=0||!_cg .Is (_cg .Hyphen ,_afccc ){return false ;};_afccc ,_bggcf =_g .DecodeLastRuneInString (_becbg [:len (_becbg )-_bggcf ]);return _bggcf > 0&&!_cg .IsSpace (_afccc );};func (_accg paraList )writeText (_bbaa _cb .Writer ){for _abcdb ,_ffbbb :=range _accg {if _ffbbb ._ddda {continue ;
};_ffbbb .writeText (_bbaa );if _abcdb !=len (_accg )-1{if _bfab (_ffbbb ,_accg [_abcdb +1]){_bbaa .Write ([]byte ("\u0020"));}else {_bbaa .Write ([]byte ("\u000a"));_bbaa .Write ([]byte ("\u000a"));};};};_bbaa .Write ([]byte ("\u000a"));_bbaa .Write ([]byte ("\u000a"));
};func (_efdab rulingList )tidied (_fbfae string )rulingList {_ddccba :=_efdab .removeDuplicates ();_ddccba .log ("\u0075n\u0069\u0071\u0075\u0065\u0073");_ddfc :=_ddccba .snapToGroups ();if _ddfc ==nil {return nil ;};_ddfc .sort ();if _babf {_fb .Log .Info ("\u0074\u0069\u0064i\u0065\u0064\u003a\u0020\u0025\u0071\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u0075\u006e\u0069\u0071\u0075\u0065\u0073\u003d\u0025\u0064\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0064\u003d\u0025\u0064",_fbfae ,len (_efdab ),len (_ddccba ),len (_ddfc ));
};_ddfc .log ("\u0063o\u0061\u006c\u0065\u0073\u0063\u0065d");return _ddfc ;};func _dacgg (_edcf map[int ]intSet )[]int {_dggag :=make ([]int ,0,len (_edcf ));for _dfcbb :=range _edcf {_dggag =append (_dggag ,_dfcbb );};_a .Ints (_dggag );return _dggag ;
};

// ExtractPageText returns the text contents of `e` (an Extractor for a page) as a PageText.
// TODO(peterwilliams97): The stats complicate this function signature and aren't very useful.
//
//	Replace with a function like Extract() (*PageText, error)
func (_adfb *Extractor )ExtractPageText ()(*PageText ,int ,int ,error ){_cga ,_cfbb ,_bgd ,_bfa :=_adfb .extractPageText (_adfb ._fbc ,_adfb ._fed ,_ga .IdentityMatrix (),0,false );if _bfa !=nil &&_bfa !=_bd .ErrColorOutOfRange {return nil ,0,0,_bfa ;};
if _adfb ._gaae !=nil {_cga ._efc ._ageb =_adfb ._gaae .UseSimplerExtractionProcess ;};_cga .computeViews ();_bfa =_ggeab (_cga );if _bfa !=nil {return nil ,0,0,_bfa ;};if _adfb ._gaae !=nil {if _adfb ._gaae .ApplyCropBox &&_adfb ._gec !=nil {_cga .ApplyArea (*_adfb ._gec );
};_cga ._efc ._fbec =_adfb ._gaae .DisableDocumentTags ;};return _cga ,_cfbb ,_bgd ,nil ;};

// TextMarkArray is a collection of TextMarks.
type TextMarkArray struct{_acag []TextMark };func (_ecad rulingList )log (_dddgb string ){if !_babf {return ;};_fb .Log .Info ("\u0023\u0023\u0023\u0020\u0025\u0031\u0030\u0073\u003a\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_dddgb ,_ecad .String ());
for _daade ,_edbe :=range _ecad {_cbg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_daade ,_edbe .String ());};};func _eccg (_dbf ,_bcbda _bd .PdfRectangle )bool {return _bcbda .Llx <=_dbf .Urx &&_dbf .Llx <=_bcbda .Urx ;};func _ccdbg (_faeb *list ,_ddfdg *string )string {_dbcf :=_bb .Split (_faeb ._fcgc ,"\u000a");
_ecda :=&_bb .Builder {};for _ ,_egfc :=range _dbcf {if _egfc !=""{_ecda .WriteString (*_ddfdg );_ecda .WriteString (_egfc );_ecda .WriteString ("\u000a");};};return _ecda .String ();};func (_bdfad *textWord )addDiacritic (_dgcgb string ){_bdbc :=_bdfad ._gfdga [len (_bdfad ._gfdga )-1];
_bdbc ._becfb +=_dgcgb ;_bdbc ._becfb =_fga .NFKC .String (_bdbc ._becfb );};

// List returns all the list objects detected on the page.
// It detects all the bullet point Lists from a given pdf page and builds a slice of bullet list objects.
// A given bullet list object has a tree structure.
// Each bullet point list is extracted with the text content it contains and all the sub lists found under it as children in the tree.
// The rest content of the pdf is ignored and only text in the bullet point lists are extracted.
// The list extraction is done in two ways.
// 1. If the document is tagged then the lists are extracted using the tags provided in the document.
// 2. Otherwise the bullet lists are extracted from the raw text using regex matching.
// By default the document tag is used if available.
// However this can be disabled using `DisableDocumentTags` in the `Options` object.
// Sometimes disabling document tags option might give a better bullet list extraction if the document was tagged incorrectly.
//
//	    options := &Options{
//		     DisableDocumentTags: false, // this means use document tag if available
//	    }
//	    ex, err := NewWithOptions(page, options)
//	    // handle error
//	    pageText, _, _, err := ex.ExtractPageText()
//	    // handle error
//	    lists := pageText.List()
//	    txt := lists.Text()
func (_edfg PageText )List ()lists {_ggge :=!_edfg ._efc ._fbec ;_dbggd :=_edfg .getParagraphs ();_cbcfe :=true ;if _edfg ._cadfe ==nil ||*_edfg ._cadfe ==nil {_cbcfe =false ;};_ebdcf :=_dbggd .list ();if _cbcfe &&_ggge {_fdaa :=_eadag (&_dbggd );_ccba :=&structTreeRoot {};
_ccba .parseStructTreeRoot (*_edfg ._cadfe );if _ccba ._gagg ==nil {_fb .Log .Debug ("\u004c\u0069\u0073\u0074\u003a\u0020\u0073t\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e'\u0074\u0020\u0068\u0061\u0076e\u0020\u0061\u006e\u0079\u0020\u0063\u006f\u006e\u0074e\u006e\u0074\u002c\u0020\u0075\u0073\u0069\u006e\u0067\u0020\u0074\u0065\u0078\u0074\u0020\u006d\u0061\u0074\u0063\u0068\u0069\u006e\u0067\u0020\u006d\u0065\u0074\u0068\u006f\u0064\u0020\u0069\u006e\u0073\u0074\u0065\u0061\u0064\u002e");
return _ebdcf ;};_ebdcf =_ccba .buildList (_fdaa ,_edfg ._edee );};return _ebdcf ;};func (_gedd *textPara )toTextMarks (_ggfg *int )[]TextMark {if _gedd ._dgega ==nil {return _gedd .toCellTextMarks (_ggfg );};var _abeg []TextMark ;for _fedc :=0;_fedc < _gedd ._dgega ._gfcf ;
_fedc ++{for _bfgcf :=0;_bfgcf < _gedd ._dgega ._bbfgf ;_bfgcf ++{_aedcc :=_gedd ._dgega .get (_bfgcf ,_fedc );if _aedcc ==nil {_abeg =_dbgab (_abeg ,_ggfg ,"\u0009");}else {_eacgf :=_aedcc .toCellTextMarks (_ggfg );_abeg =append (_abeg ,_eacgf ...);};
_abeg =_dbgab (_abeg ,_ggfg ,"\u0020");};if _fedc < _gedd ._dgega ._gfcf -1{_abeg =_dbgab (_abeg ,_ggfg ,"\u000a");};};_ecedf :=_gedd ._dgega ;if _ecedf .isExportable (){_ddaca :=_ecedf .toTextTable ();_abeg =_gafdg (_abeg ,&_ddaca );};return _abeg ;};
func _ededdg (_gafa []pathSection )rulingList {_dddb (_gafa );if _babf {_fb .Log .Info ("\u006d\u0061k\u0065\u0053\u0074\u0072\u006f\u006b\u0065\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0064\u0020\u0073\u0074\u0072ok\u0065\u0073",len (_gafa ));
};var _cfbbc rulingList ;for _ ,_dfed :=range _gafa {for _ ,_adecb :=range _dfed ._ecea {if len (_adecb ._gcgc )< 2{continue ;};_bcdef :=_adecb ._gcgc [0];for _ ,_ebacd :=range _adecb ._gcgc [1:]{if _fbgdf ,_bbag :=_fcdae (_bcdef ,_ebacd ,_dfed .Color );
_bbag {_cfbbc =append (_cfbbc ,_fbgdf );};_bcdef =_ebacd ;};};};if _babf {_fb .Log .Info ("m\u0061\u006b\u0065\u0053tr\u006fk\u0065\u0052\u0075\u006c\u0069n\u0067\u0073\u003a\u0020\u0025\u0073",_cfbbc );};return _cfbbc ;};func _ceda (_fdbc ,_bgb bounded )float64 {return _fdbc .bbox ().Llx -_bgb .bbox ().Urx };
type shapesState struct{_aefb _ga .Matrix ;_cacd _ga .Matrix ;_eaaf []*subpath ;_dgbb bool ;_gdee _ga .Point ;_bcgcb *textObject ;};func (_edbec *textWord )computeText ()string {_ddcgg :=make ([]string ,len (_edbec ._gfdga ));for _bccc ,_dfgfa :=range _edbec ._gfdga {_ddcgg [_bccc ]=_dfgfa ._becfb ;
};return _bb .Join (_ddcgg ,"");};func _bggg (_ddaaa string )bool {for _ ,_gefe :=range _ddaaa {if !_cg .IsSpace (_gefe ){return false ;};};return true ;};func (_abfb *textTable )emptyCompositeRow (_cbaec int )bool {for _fceeb :=0;_fceeb < _abfb ._bbfgf ;
_fceeb ++{if _deaba ,_fdfd :=_abfb ._bfeb [_eebg (_fceeb ,_cbaec )];_fdfd {if len (_deaba .paraList )> 0{return false ;};};};return true ;};func (_gcfg *wordBag )blocked (_becff *textWord )bool {if _becff .Urx < _gcfg .Llx {_dca :=_begg (_becff .PdfRectangle );
_cef :=_cbfg (_gcfg .PdfRectangle );if _gcfg ._gab .blocks (_dca ,_cef ){if _gbfg {_fb .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0078\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_becff ,_gcfg );};return true ;};}else if _gcfg .Urx < _becff .Llx {_dfe :=_begg (_gcfg .PdfRectangle );
_caecc :=_cbfg (_becff .PdfRectangle );if _gcfg ._gab .blocks (_dfe ,_caecc ){if _gbfg {_fb .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0078\u2192\u0020:\u0020\u0025\u0073\u0020%s",_becff ,_gcfg );};return true ;};};if _becff .Ury < _gcfg .Lly {_bged :=_eggb (_becff .PdfRectangle );
_facc :=_efcgf (_gcfg .PdfRectangle );if _gcfg ._bcabd .blocks (_bged ,_facc ){if _gbfg {_fb .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0079\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_becff ,_gcfg );};return true ;};}else if _gcfg .Ury < _becff .Lly {_bceb :=_eggb (_gcfg .PdfRectangle );
_egdc :=_efcgf (_becff .PdfRectangle );if _gcfg ._bcabd .blocks (_bceb ,_egdc ){if _gbfg {_fb .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0079\u2192\u0020:\u0020\u0025\u0073\u0020%s",_becff ,_gcfg );};return true ;};};return false ;};func (_edegd *textPara )taken ()bool {return _edegd ==nil ||_edegd ._cecbe };
func (_bfddd *textTable )compositeColCorridors ()map[int ][]float64 {_edgc :=make (map[int ][]float64 ,_bfddd ._bbfgf );if _deef {_fb .Log .Info ("\u0063\u006f\u006d\u0070o\u0073\u0069\u0074\u0065\u0043\u006f\u006c\u0043\u006f\u0072r\u0069d\u006f\u0072\u0073\u003a\u0020\u0077\u003d%\u0064\u0020",_bfddd ._bbfgf );
};for _efeee :=0;_efeee < _bfddd ._bbfgf ;_efeee ++{_edgc [_efeee ]=nil ;};return _edgc ;};func _gecf (_dgdeb []*textWord ,_bgbdc *textWord )[]*textWord {for _cbbba ,_cdcec :=range _dgdeb {if _cdcec ==_bgbdc {return _fegaeg (_dgdeb ,_cbbba );};};_fb .Log .Error ("\u0072\u0065\u006d\u006f\u0076e\u0057\u006f\u0072\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u0073\u0020\u0064o\u0065\u0073\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",_bgbdc );
return nil ;};func _gbddb (_edbga float64 )float64 {return _fcgd *_e .Round (_edbga /_fcgd )};func (_ecffd paraList )findTables (_gfef []gridTiling )[]*textTable {_ecffd .addNeighbours ();_a .Slice (_ecffd ,func (_abbdc ,_ebgf int )bool {return _gdged (_ecffd [_abbdc ],_ecffd [_ebgf ])< 0});
var _agbcg []*textTable ;if _eefg {_bfcc :=_ecffd .findGridTables (_gfef );_agbcg =append (_agbcg ,_bfcc ...);};if _bfgc {_ecdb :=_ecffd .findTextTables ();_agbcg =append (_agbcg ,_ecdb ...);};return _agbcg ;};func (_ebcd *wordBag )depthIndexes ()[]int {if len (_ebcd ._acfg )==0{return nil ;
};_adbfb :=make ([]int ,len (_ebcd ._acfg ));_cfaf :=0;for _dcea :=range _ebcd ._acfg {_adbfb [_cfaf ]=_dcea ;_cfaf ++;};_a .Ints (_adbfb );return _adbfb ;};func _eagbg (_cabf []TextMark ,_cdgg *int ,_bdba TextMark )[]TextMark {_bdba .Offset =*_cdgg ;_cabf =append (_cabf ,_bdba );
*_cdgg +=len (_bdba .Text );return _cabf ;};func _ccaa (_gaga []float64 ,_dfbfe ,_gffb float64 )[]float64 {_dfcfa ,_cebab :=_dfbfe ,_gffb ;if _cebab < _dfcfa {_dfcfa ,_cebab =_cebab ,_dfcfa ;};_gdda :=make ([]float64 ,0,len (_gaga )+2);_gdda =append (_gdda ,_dfbfe );
for _ ,_cbggd :=range _gaga {if _cbggd <=_dfcfa {continue ;}else if _cbggd >=_cebab {break ;};_gdda =append (_gdda ,_cbggd );};_gdda =append (_gdda ,_gffb );return _gdda ;};

// String returns a human readable description of `path`.
func (_cdge *subpath )String ()string {_dabg :=_cdge ._gcgc ;_bfaa :=len (_dabg );if _bfaa <=5{return _cbg .Sprintf ("\u0025d\u003a\u0020\u0025\u0036\u002e\u0032f",_bfaa ,_dabg );};return _cbg .Sprintf ("\u0025d\u003a\u0020\u0025\u0036.\u0032\u0066\u0020\u0025\u0036.\u0032f\u0020.\u002e\u002e\u0020\u0025\u0036\u002e\u0032f",_bfaa ,_dabg [0],_dabg [1],_dabg [_bfaa -1]);
};

// PageImages represents extracted images on a PDF page with spatial information:
// display position and size.
type PageImages struct{Images []ImageMark ;};func _egaf (_ggba int ,_ffbc func (int ,int )bool )[]int {_dbcbc :=make ([]int ,_ggba );for _fffd :=range _dbcbc {_dbcbc [_fffd ]=_fffd ;};_a .Slice (_dbcbc ,func (_fccd ,_cbbbd int )bool {return _ffbc (_dbcbc [_fccd ],_dbcbc [_cbbbd ])});
return _dbcbc ;};func _eea (_ffce _ga .Point )_ga .Matrix {return _ga .TranslationMatrix (_ffce .X ,_ffce .Y )};func (_geb *imageExtractContext )extractFormImages (_edb *_cf .PdfObjectName ,_gbebc _ad .GraphicsState ,_dfa *_bd .PdfPageResources )error {_abee ,_ccb :=_dfa .GetXObjectFormByName (*_edb );
if _ccb !=nil {return _ccb ;};if _abee ==nil {return nil ;};_eee ,_ccb :=_abee .GetContentStream ();if _ccb !=nil {return _ccb ;};_aadb :=_abee .Resources ;if _aadb ==nil {_aadb =_dfa ;};_ccb =_geb .extractContentStreamImages (string (_eee ),_aadb );if _ccb !=nil {return _ccb ;
};_geb ._aeg ++;return nil ;};func (_dfbd rulingList )connections (_geea map[int ]intSet ,_cbbg int )intSet {_agegf :=make (intSet );_bgff :=make (intSet );var _cfce func (int );_cfce =func (_ecceg int ){if !_bgff .has (_ecceg ){_bgff .add (_ecceg );for _dfec :=range _dfbd {if _geea [_dfec ].has (_ecceg ){_agegf .add (_dfec );
};};for _abfd :=range _dfbd {if _agegf .has (_abfd ){_cfce (_abfd );};};};};_cfce (_cbbg );return _agegf ;};

// String returns a description of `k`.
func (_dbbab markKind )String ()string {_ccgg ,_geab :=_aecef [_dbbab ];if !_geab {return _cbg .Sprintf ("\u004e\u006f\u0074\u0020\u0061\u0020\u006d\u0061\u0072k\u003a\u0020\u0025\u0064",_dbbab );};return _ccgg ;};func (_dgfb *wordBag )empty (_gbbee int )bool {_ ,_bebg :=_dgfb ._acfg [_gbbee ];
return !_bebg };func _ccc (_be int )bool {return (_be &1)!=0};func _aaedd (_fecce map[int ][]float64 ){if len (_fecce )<=1{return ;};_gdbdd :=_bdgcb (_fecce );if _deef {_fb .Log .Info ("\u0066i\u0078C\u0065\u006c\u006c\u0073\u003a \u006b\u0065y\u0073\u003d\u0025\u002b\u0076",_gdbdd );
};var _aede ,_dfefa int ;for _aede ,_dfefa =range _gdbdd {if _fecce [_dfefa ]!=nil {break ;};};for _abcad ,_afdb :=range _gdbdd [_aede :]{_cabde :=_fecce [_afdb ];if _cabde ==nil {continue ;};if _deef {_cbg .Printf ("\u0025\u0034\u0064\u003a\u0020\u006b\u0030\u003d\u0025\u0064\u0020\u006b1\u003d\u0025\u0064\u000a",_aede +_abcad ,_dfefa ,_afdb );
};_fbgcb :=_fecce [_afdb ];if _fbgcb [len (_fbgcb )-1]> _cabde [0]{_fbgcb [len (_fbgcb )-1]=_cabde [0];_fecce [_dfefa ]=_fbgcb ;};_dfefa =_afdb ;};};var _aecef =map[markKind ]string {_fafd :"\u0073\u0074\u0072\u006f\u006b\u0065",_ecae :"\u0066\u0069\u006c\u006c",_dgdb :"\u0061u\u0067\u006d\u0065\u006e\u0074"};
func _egebe (_bgade []*textMark ,_dccf _bd .PdfRectangle )*textWord {_fcde :=_bgade [0].PdfRectangle ;_ecffb :=_bgade [0]._afbae ;for _ ,_dfcfc :=range _bgade [1:]{_fcde =_agcf (_fcde ,_dfcfc .PdfRectangle );if _dfcfc ._afbae > _ecffb {_ecffb =_dfcfc ._afbae ;
};};return &textWord {PdfRectangle :_fcde ,_gfdga :_bgade ,_gabaag :_dccf .Ury -_fcde .Lly ,_efce :_ecffb };};func _ggeab (_dega *PageText )error {_afgfg :=_ba .GetLicenseKey ();if _afgfg !=nil &&_afgfg .IsLicensed ()||_cfb {return nil ;};_cbg .Printf ("\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064\u0020c\u006f\u0070\u0079\u0020\u006f\u0066\u0020\u0055\u006e\u0069P\u0044\u0046\u000a");
_cbg .Println ("-\u0020\u0047\u0065\u0074\u0020\u0061\u0020\u0066\u0072e\u0065\u0020\u0074\u0072\u0069\u0061\u006c l\u0069\u0063\u0065\u006es\u0065\u0020\u006f\u006e\u0020\u0068\u0074\u0074\u0070s:\u002f\u002fu\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f");
return _da .New ("\u0075\u006e\u0069\u0070d\u0066\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020c\u006fd\u0065\u0020\u0072\u0065\u0071\u0075\u0069r\u0065\u0064");};func _eacde (_cgaec []*textLine ,_fgfg map[float64 ][]*textLine ,_ccgac []float64 ,_ebac int ,_fdbcf ,_agb float64 )[]*list {_dafd :=[]*list {};
_dgda :=_ebac ;_ebac =_ebac +1;_dcaf :=_ccgac [_dgda ];_fcfc :=_fgfg [_dcaf ];_gadb :=_gedc (_fcfc ,_agb ,_fdbcf );for _cccd ,_befg :=range _gadb {var _cegb float64 ;_fdfbe :=[]*list {};_efagc :=_befg ._becg ;_dfcd :=_agb ;if _cccd < len (_gadb )-1{_dfcd =_gadb [_cccd +1]._becg ;
};if _ebac < len (_ccgac ){_fdfbe =_eacde (_cgaec ,_fgfg ,_ccgac ,_ebac ,_efagc ,_dfcd );};_cegb =_dfcd ;if len (_fdfbe )> 0{_ebfd :=_fdfbe [0];if len (_ebfd ._ggcfb )> 0{_cegb =_ebfd ._ggcfb [0]._becg ;};};_cecb :=[]*textLine {_befg };_dfbc :=_adae (_befg ,_cgaec ,_ccgac ,_efagc ,_cegb );
_cecb =append (_cecb ,_dfbc ...);_cbfe :=_fbeb (_cecb ,"\u0062\u0075\u006c\u006c\u0065\u0074",_fdfbe );_cbfe ._fcgc =_egdd (_cecb ,"");_dafd =append (_dafd ,_cbfe );};return _dafd ;};func (_fbgdd intSet )del (_dacfc int ){delete (_fbgdd ,_dacfc )};func _aacdg (_cgcbd ,_ggfdd _ga .Point )rulingKind {_febdc :=_e .Abs (_cgcbd .X -_ggfdd .X );
_cacg :=_e .Abs (_cgcbd .Y -_ggfdd .Y );return _cbacfe (_febdc ,_cacg ,_bcbc );};

// TableCell is a cell in a TextTable.
type TableCell struct{_bd .PdfRectangle ;

// Text is the extracted text.
Text string ;

// Marks returns the TextMarks corresponding to the text in Text.
Marks TextMarkArray ;};

// Text gets the extracted text contained in `l`.
func (_deggf *list )Text ()string {_dgdg :=&_bb .Builder {};_fddac :="";_bfcbg (_deggf ,_dgdg ,&_fddac );return _dgdg .String ();};type textPara struct{_bd .PdfRectangle ;_fcegg _bd .PdfRectangle ;_bgcc []*textLine ;_dgega *textTable ;_cecbe bool ;_ddda bool ;
_ebeb *textPara ;_bbbge *textPara ;_cedb *textPara ;_dffd *textPara ;_bgeed []list ;};func (_gdfa paraList )sortReadingOrder (){_fb .Log .Trace ("\u0073\u006fr\u0074\u0052\u0065\u0061\u0064i\u006e\u0067\u004f\u0072\u0064e\u0072\u003a\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_gdfa ));
if len (_gdfa )<=1{return ;};_gdfa .computeEBBoxes ();_a .Slice (_gdfa ,func (_eagbb ,_afaba int )bool {return _fgd (_gdfa [_eagbb ],_gdfa [_afaba ])<=0});};func (_gbaf *wordBag )arrangeText ()*textPara {_gbaf .sort ();if _aead {_gbaf .removeDuplicates ();
};var _feee []*textLine ;for _ ,_badd :=range _gbaf .depthIndexes (){for !_gbaf .empty (_badd ){_facd :=_gbaf .firstReadingIndex (_badd );_gac :=_gbaf .firstWord (_facd );_dffa :=_gbcc (_gbaf ,_facd );_ddeea :=_gac ._efce ;_agdb :=_gac ._gabaag -_fede *_ddeea ;
_fgae :=_gac ._gabaag +_fede *_ddeea ;_eeef :=_adbg *_ddeea ;_aceg :=_fccc *_ddeea ;_adebf :for {var _baea *textWord ;_deab :=0;for _ ,_gbda :=range _gbaf .depthBand (_agdb ,_fgae ){_adea :=_gbaf .highestWord (_gbda ,_agdb ,_fgae );if _adea ==nil {continue ;
};_cecd :=_ceda (_adea ,_dffa ._abcg [len (_dffa ._abcg )-1]);if _cecd < -_aceg {break _adebf ;};if _cecd > _eeef {continue ;};if _baea !=nil &&_fcdf (_adea ,_baea )>=0{continue ;};_baea =_adea ;_deab =_gbda ;};if _baea ==nil {break ;};_dffa .pullWord (_gbaf ,_baea ,_deab );
};_dffa .markWordBoundaries ();_feee =append (_feee ,_dffa );};};if len (_feee )==0{return nil ;};_a .Slice (_feee ,func (_fgec ,_fdgd int )bool {return _fgd (_feee [_fgec ],_feee [_fdgd ])< 0});_caef :=_cgaee (_gbaf .PdfRectangle ,_feee );if _fdff {_fb .Log .Info ("\u0061\u0072\u0072an\u0067\u0065\u0054\u0065\u0078\u0074\u0020\u0021\u0021\u0021\u0020\u0070\u0061\u0072\u0061\u003d\u0025\u0073",_caef .String ());
if _deed {for _faefd ,_gegc :=range _caef ._bgcc {_cbg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_faefd ,_gegc .String ());if _gbbbb {for _fddbad ,_gcag :=range _gegc ._abcg {_cbg .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_fddbad ,_gcag .String ());
for _bfgcc ,_ccea :=range _gcag ._gfdga {_cbg .Printf ("\u00251\u0032\u0064\u003a\u0020\u0025\u0073\n",_bfgcc ,_ccea .String ());};};};};};};return _caef ;};func (_eccf *wordBag )allWords ()[]*textWord {var _ffa []*textWord ;for _ ,_caca :=range _eccf ._acfg {_ffa =append (_ffa ,_caca ...);
};return _ffa ;};type gridTile struct{_bd .PdfRectangle ;_ffcfe ,_acda ,_dbbe ,_aedfa bool ;};func (_egcbf rulingList )vertsHorzs ()(rulingList ,rulingList ){var _facga ,_edea rulingList ;for _ ,_gefg :=range _egcbf {switch _gefg ._egagd {case _bbee :_facga =append (_facga ,_gefg );
case _fdec :_edea =append (_edea ,_gefg );};};return _facga ,_edea ;};type intSet map[int ]struct{};func _egdd (_badf []*textLine ,_dcdb string )string {var _cbgec _bb .Builder ;_cbcfc :=0.0;for _gfdg ,_ebaa :=range _badf {_ggea :=_ebaa .text ();_gbcba :=_ebaa ._becg ;
if _gfdg < len (_badf )-1{_cbcfc =_badf [_gfdg +1]._becg ;}else {_cbcfc =0.0;};_cbgec .WriteString (_dcdb );_cbgec .WriteString (_ggea );if _cbcfc !=_gbcba {_cbgec .WriteString ("\u000a");}else {_cbgec .WriteString ("\u0020");};};return _cbgec .String ();
};func (_bgde *textObject )setFont (_dfcf string ,_gbba float64 )error {if _bgde ==nil {return nil ;};_bgde ._beg ._fge =_gbba ;_dbe ,_bge :=_bgde .getFont (_dfcf );if _bge !=nil {return _bge ;};_bgde ._beg ._bfb =_dbe ;return nil ;};

// RangeOffset returns the TextMarks in `ma` that overlap text[start:end] in the extracted text.
// These are tm: `start` <= tm.Offset + len(tm.Text) && tm.Offset < `end` where
// `start` and `end` are offsets in the extracted text.
// NOTE: TextMarks can contain multiple characters. e.g. "ffi" for the  ligature so the first and
// last elements of the returned TextMarkArray may only partially overlap text[start:end].
func (_abd *TextMarkArray )RangeOffset (start ,end int )(*TextMarkArray ,error ){if _abd ==nil {return nil ,_da .New ("\u006da\u003d\u003d\u006e\u0069\u006c");};if end < start {return nil ,_cbg .Errorf ("\u0065\u006e\u0064\u0020\u003c\u0020\u0073\u0074\u0061\u0072\u0074\u002e\u0020\u0052\u0061n\u0067\u0065\u004f\u0066\u0066\u0073\u0065\u0074\u0020\u006e\u006f\u0074\u0020d\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020\u0073\u0074\u0061\u0072t=\u0025\u0064\u0020\u0065\u006e\u0064\u003d\u0025\u0064\u0020",start ,end );
};_dad :=len (_abd ._acag );if _dad ==0{return _abd ,nil ;};if start < _abd ._acag [0].Offset {start =_abd ._acag [0].Offset ;};if end > _abd ._acag [_dad -1].Offset +1{end =_abd ._acag [_dad -1].Offset +1;};_bdad :=_a .Search (_dad ,func (_cfefg int )bool {return _abd ._acag [_cfefg ].Offset +len (_abd ._acag [_cfefg ].Text )-1>=start });
if !(0<=_bdad &&_bdad < _dad ){_ebdc :=_cbg .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020\u0072\u0061\u006e\u0067\u0065\u002e\u0020\u0073\u0074\u0061\u0072\u0074\u003d%\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009 \u006c\u0061\u0073\u0074\u003d%\u0076",start ,_bdad ,_dad ,_abd ._acag [0],_abd ._acag [_dad -1]);
return nil ,_ebdc ;};_bggb :=_a .Search (_dad ,func (_fecg int )bool {return _abd ._acag [_fecg ].Offset > end -1});if !(0<=_bggb &&_bggb < _dad ){_bffe :=_cbg .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020r\u0061\u006e\u0067e\u002e\u0020\u0065n\u0064\u003d%\u0064\u0020\u0069\u0045\u006e\u0064=\u0025d \u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d\u0025\u0076",end ,_bggb ,_dad ,_abd ._acag [0],_abd ._acag [_dad -1]);
return nil ,_bffe ;};if _bggb <=_bdad {return nil ,_cbg .Errorf ("\u0069\u0045\u006e\u0064\u0020\u003c=\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003a\u0020\u0073\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u0065\u006ed\u003d\u0025\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020i\u0045n\u0064\u003d\u0025\u0064",start ,end ,_bdad ,_bggb );
};return &TextMarkArray {_acag :_abd ._acag [_bdad :_bggb ]},nil ;};func _fedcd (_dfbe ,_dfbg ,_cfdc ,_dffgd *textPara )*textTable {_afbbc :=&textTable {_bbfgf :2,_gfcf :2,_fdbac :make (map[uint64 ]*textPara ,4)};_afbbc .put (0,0,_dfbe );_afbbc .put (1,0,_dfbg );
_afbbc .put (0,1,_cfdc );_afbbc .put (1,1,_dffgd );return _afbbc ;};func (_cfc *stateStack )empty ()bool {return len (*_cfc )==0};func _eadag (_bbbf *paraList )map[int ][]*textLine {_dgeg :=map[int ][]*textLine {};for _ ,_gbdg :=range *_bbbf {for _ ,_aecb :=range _gbdg ._bgcc {if !_fagbg (_aecb ){_fb .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_fccb :=_aecb ._abcg [0]._gfdga [0]._cefd ;_dgeg [_fccb ]=append (_dgeg [_fccb ],_aecb );};if _gbdg ._dgega !=nil {_gfda :=_gbdg ._dgega ._fdbac ;for _ ,_ggece :=range _gfda {for _ ,_bfgd :=range _ggece ._bgcc {if !_fagbg (_bfgd ){_fb .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_aade :=_bfgd ._abcg [0]._gfdga [0]._cefd ;_dgeg [_aade ]=append (_dgeg [_aade ],_bfgd );};};};};return _dgeg ;};type markKind int ;var (_gbebf =map[rune ]string {0x0060:"\u0300",0x02CB:"\u0300",0x0027:"\u0301",0x00B4:"\u0301",0x02B9:"\u0301",0x02CA:"\u0301",0x005E:"\u0302",0x02C6:"\u0302",0x007E:"\u0303",0x02DC:"\u0303",0x00AF:"\u0304",0x02C9:"\u0304",0x02D8:"\u0306",0x02D9:"\u0307",0x00A8:"\u0308",0x00B0:"\u030a",0x02DA:"\u030a",0x02BA:"\u030b",0x02DD:"\u030b",0x02C7:"\u030c",0x02C8:"\u030d",0x0022:"\u030e",0x02BB:"\u0312",0x02BC:"\u0313",0x0486:"\u0313",0x055A:"\u0313",0x02BD:"\u0314",0x0485:"\u0314",0x0559:"\u0314",0x02D4:"\u031d",0x02D5:"\u031e",0x02D6:"\u031f",0x02D7:"\u0320",0x02B2:"\u0321",0x00B8:"\u0327",0x02CC:"\u0329",0x02B7:"\u032b",0x02CD:"\u0331",0x005F:"\u0332",0x204E:"\u0359"};
);func (_adge paraList )findTextTables ()[]*textTable {var _ccedd []*textTable ;for _ ,_fdcaa :=range _adge {if _fdcaa .taken ()||_fdcaa .Width ()==0{continue ;};_dggaa :=_fdcaa .isAtom ();if _dggaa ==nil {continue ;};_dggaa .growTable ();if _dggaa ._bbfgf *_dggaa ._gfcf < _cabe {continue ;
};_dggaa .markCells ();_dggaa .log ("\u0067\u0072\u006fw\u006e");_ccedd =append (_ccedd ,_dggaa );};return _ccedd ;};func (_abcb *textWord )bbox ()_bd .PdfRectangle {return _abcb .PdfRectangle };func (_efgf *shapesState )cubicTo (_gagbf ,_gcaeb ,_gfca ,_dcbba ,_ddgg ,_aegd float64 ){if _gcc {_fb .Log .Info ("\u0063\u0075\u0062\u0069\u0063\u0054\u006f\u003a");
};_efgf .addPoint (_ddgg ,_aegd );};func (_fedcc *subpath )isQuadrilateral ()bool {if len (_fedcc ._gcgc )< 4||len (_fedcc ._gcgc )> 5{return false ;};if len (_fedcc ._gcgc )==5{_cbba :=_fedcc ._gcgc [0];_fddfc :=_fedcc ._gcgc [4];if _cbba .X !=_fddfc .X ||_cbba .Y !=_fddfc .Y {return false ;
};};return true ;};func (_abbb *textObject )setTextRise (_ebad float64 ){if _abbb ==nil {return ;};_abbb ._beg ._geff =_ebad ;};func (_eebee paraList )yNeighbours (_abcc float64 )map[*textPara ][]int {_aegag :=make ([]event ,2*len (_eebee ));if _abcc ==0{for _ffdbc ,_dcead :=range _eebee {_aegag [2*_ffdbc ]=event {_dcead .Lly ,true ,_ffdbc };
_aegag [2*_ffdbc +1]=event {_dcead .Ury ,false ,_ffdbc };};}else {for _aceba ,_eedb :=range _eebee {_aegag [2*_aceba ]=event {_eedb .Lly -_abcc *_eedb .fontsize (),true ,_aceba };_aegag [2*_aceba +1]=event {_eedb .Ury +_abcc *_eedb .fontsize (),false ,_aceba };
};};return _eebee .eventNeighbours (_aegag );};func (_bcdec rulingList )intersections ()map[int ]intSet {var _egga ,_egee []int ;for _dcag ,_dbabf :=range _bcdec {switch _dbabf ._egagd {case _bbee :_egga =append (_egga ,_dcag );case _fdec :_egee =append (_egee ,_dcag );
};};if len (_egga )< _bcde +1||len (_egee )< _fbfa +1{return nil ;};if len (_egga )+len (_egee )> _fgb {_fb .Log .Debug ("\u0069\u006e\u0074\u0065\u0072\u0073e\u0063\u0074\u0069\u006f\u006e\u0073\u003a\u0020\u0054\u004f\u004f\u0020\u004d\u0041\u004e\u0059\u0020\u0072\u0075\u006ci\u006e\u0067\u0073\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u003d\u0020%\u0064 \u0078\u0020\u0025\u0064",len (_bcdec ),len (_egga ),len (_egee ));
return nil ;};_gcagg :=make (map[int ]intSet ,len (_egga )+len (_egee ));for _ ,_dgbdcg :=range _egga {for _ ,_gbec :=range _egee {if _bcdec [_dgbdcg ].intersects (_bcdec [_gbec ]){if _ ,_ebbbc :=_gcagg [_dgbdcg ];!_ebbbc {_gcagg [_dgbdcg ]=make (intSet );
};if _ ,_ggdgg :=_gcagg [_gbec ];!_ggdgg {_gcagg [_gbec ]=make (intSet );};_gcagg [_dgbdcg ].add (_gbec );_gcagg [_gbec ].add (_dgbdcg );};};};return _gcagg ;};func (_dfbdb rulingList )comp (_edeaf ,_eabf int )bool {_fdca ,_bfca :=_dfbdb [_edeaf ],_dfbdb [_eabf ];
_bfaad ,_efdd :=_fdca ._egagd ,_bfca ._egagd ;if _bfaad !=_efdd {return _bfaad > _efdd ;};if _bfaad ==_febb {return false ;};_fbgdfe :=func (_ebcg bool )bool {if _bfaad ==_fdec {return _ebcg ;};return !_ebcg ;};_addfa ,_adcd :=_fdca ._gabcd ,_bfca ._gabcd ;
if _addfa !=_adcd {return _fbgdfe (_addfa > _adcd );};_addfa ,_adcd =_fdca ._cdcd ,_bfca ._cdcd ;if _addfa !=_adcd {return _fbgdfe (_addfa < _adcd );};return _fbgdfe (_fdca ._dcgf < _bfca ._dcgf );};func _eafd (_gfgf string ,_efeb []rulingList ){_fb .Log .Info ("\u0024\u0024 \u0025\u0064\u0020g\u0072\u0069\u0064\u0073\u0020\u002d\u0020\u0025\u0073",len (_efeb ),_gfgf );
for _aedd ,_gbedb :=range _efeb {_cbg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_aedd ,_gbedb .String ());};};func (_cgef *subpath )close (){if !_bdag (_cgef ._gcgc [0],_cgef .last ()){_cgef .add (_cgef ._gcgc [0]);};_cgef ._ffbag =true ;
_cgef .removeDuplicates ();};func (_gdfd *textTable )compositeRowCorridors ()map[int ][]float64 {_efgfb :=make (map[int ][]float64 ,_gdfd ._gfcf );if _deef {_fb .Log .Info ("c\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0052\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073:\u0020h\u003d\u0025\u0064",_gdfd ._gfcf );
};for _cceg :=1;_cceg < _gdfd ._gfcf ;_cceg ++{var _ffdea []compositeCell ;for _dfgg :=0;_dfgg < _gdfd ._bbfgf ;_dfgg ++{if _gcfa ,_bddgf :=_gdfd ._bfeb [_eebg (_dfgg ,_cceg )];_bddgf {_ffdea =append (_ffdea ,_gcfa );};};if len (_ffdea )==0{continue ;};
_aeffb :=_ceba (_ffdea );_efgfb [_cceg ]=_aeffb ;if _deef {_cbg .Printf ("\u0020\u0020\u0020\u0025\u0032\u0064\u003a\u0020\u00256\u002e\u0032\u0066\u000a",_cceg ,_aeffb );};};return _efgfb ;};func _bdag (_ccaf ,_baabe _ga .Point )bool {return _ccaf .X ==_baabe .X &&_ccaf .Y ==_baabe .Y };
func (_afbad *wordBag )minDepth ()float64 {return _afbad ._gcbg -(_afbad .Ury -_afbad ._dagd )};func _aedc (_ffbb structElement )[]structElement {_edcacb :=[]structElement {};for _ ,_abbc :=range _ffbb ._dgcbf {for _ ,_agcbd :=range _abbc ._dgcbf {for _ ,_gfee :=range _agcbd ._dgcbf {if _gfee ._cfdg =="\u004c"{_edcacb =append (_edcacb ,_gfee );
};};};};return _edcacb ;};func (_gfdc *textObject )moveLP (_cdgf ,_dbdb float64 ){_gfdc ._fdce .Concat (_ga .NewMatrix (1,0,0,1,_cdgf ,_dbdb ));_gfdc ._efa =_gfdc ._fdce ;};func _egdf (_gged _ga .Matrix )_ga .Point {_dag ,_afgcb :=_gged .Translation ();
return _ga .Point {X :_dag ,Y :_afgcb };};type textMark struct{_bd .PdfRectangle ;_cbacf int ;_becfb string ;_ecde string ;_ecfc *_bd .PdfFont ;_afbae float64 ;_efege float64 ;_debg _ga .Matrix ;_cbaac _ga .Point ;_dgde _bd .PdfRectangle ;_fcbd _gf .Color ;
_decad _gf .Color ;_abbeg _cf .PdfObject ;_abffe []string ;Tw float64 ;Th float64 ;_cefd int ;_fcba int ;};func _dae (_fddc ,_fbeggg *textPara )bool {return _eccg (_fddc ._fcegg ,_fbeggg ._fcegg )};func (_cabc *textTable )putComposite (_caaf ,_cgcc int ,_aedfe paraList ,_fbffb _bd .PdfRectangle ){if len (_aedfe )==0{_fb .Log .Error ("\u0074\u0065xt\u0054\u0061\u0062l\u0065\u0029\u0020\u0070utC\u006fmp\u006f\u0073\u0069\u0074\u0065\u003a\u0020em\u0070\u0074\u0079\u0020\u0070\u0061\u0072a\u0073");
return ;};_ddefc :=compositeCell {PdfRectangle :_fbffb ,paraList :_aedfe };if _deef {_cbg .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0075\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u003c\u002d\u0025\u0073\u000a",_caaf ,_cgcc ,_ddefc .String ());
};_ddefc .updateBBox ();_cabc ._bfeb [_eebg (_caaf ,_cgcc )]=_ddefc ;};func _dbgab (_gfeda []TextMark ,_eacgc *int ,_badcb string )[]TextMark {_gdbe :=_dacb ;_gdbe .Text =_badcb ;return _eagbg (_gfeda ,_eacgc ,_gdbe );};const _cfa =20;func (_gdbd paraList )sortTopoOrder (){_gfab :=_gdbd .topoOrder ();
_gdbd .reorder (_gfab )};func (_bgf *shapesState )establishSubpath ()*subpath {_acfd ,_agd :=_bgf .lastpointEstablished ();if !_agd {_bgf ._eaaf =append (_bgf ._eaaf ,_gfag (_acfd ));};if len (_bgf ._eaaf )==0{return nil ;};_bgf ._dgbb =false ;return _bgf ._eaaf [len (_bgf ._eaaf )-1];
};func _agcf (_dabb ,_fgffe _bd .PdfRectangle )_bd .PdfRectangle {return _bd .PdfRectangle {Llx :_e .Min (_dabb .Llx ,_fgffe .Llx ),Lly :_e .Min (_dabb .Lly ,_fgffe .Lly ),Urx :_e .Max (_dabb .Urx ,_fgffe .Urx ),Ury :_e .Max (_dabb .Ury ,_fgffe .Ury )};
};func _fbcfa (_caceb _bd .PdfRectangle ,_egeg bounded )float64 {return _caceb .Ury -_egeg .bbox ().Lly };func (_aadeg rulingList )snapToGroupsDirection ()rulingList {_aadeg .sortStrict ();_babc :=make (map[*ruling ]rulingList ,len (_aadeg ));_cbafb :=_aadeg [0];
_bbea :=func (_gfdb *ruling ){_cbafb =_gfdb ;_babc [_cbafb ]=rulingList {_gfdb }};_bbea (_aadeg [0]);for _ ,_bgeb :=range _aadeg [1:]{if _bgeb ._gabcd < _cbafb ._gabcd -_decb {_fb .Log .Error ("\u0073\u006e\u0061\u0070T\u006f\u0047\u0072\u006f\u0075\u0070\u0073\u0044\u0069r\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0057\u0072\u006f\u006e\u0067\u0020\u0070\u0072\u0069\u006da\u0072\u0079\u0020\u006f\u0072d\u0065\u0072\u002e\u000a\u0009\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0020\u0076\u003d\u0025\u0073",_cbafb ,_bgeb );
};if _bgeb ._gabcd > _cbafb ._gabcd +_ebgc {_bbea (_bgeb );}else {_babc [_cbafb ]=append (_babc [_cbafb ],_bgeb );};};_bcedg :=make (map[*ruling ]float64 ,len (_babc ));_ebbeaa :=make (map[*ruling ]*ruling ,len (_aadeg ));for _fgcf ,_bbcfb :=range _babc {_bcedg [_fgcf ]=_bbcfb .mergePrimary ();
for _ ,_bbbac :=range _bbcfb {_ebbeaa [_bbbac ]=_fgcf ;};};for _ ,_gbde :=range _aadeg {_gbde ._gabcd =_bcedg [_ebbeaa [_gbde ]];};_dbafb :=make (rulingList ,0,len (_aadeg ));for _ ,_fbag :=range _babc {_fagae :=_fbag .splitSec ();for _dbef ,_eddf :=range _fagae {_cbcb :=_eddf .merge ();
if len (_dbafb )> 0{_gdae :=_dbafb [len (_dbafb )-1];if _gdae .alignsPrimary (_cbcb )&&_gdae .alignsSec (_cbcb ){_fb .Log .Error ("\u0073\u006e\u0061\u0070\u0054\u006fG\u0072\u006f\u0075\u0070\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0044\u0075\u0070\u006ci\u0063\u0061\u0074\u0065\u0020\u0069\u003d\u0025\u0064\u000a\u0009\u0077\u003d\u0025s\u000a\t\u0076\u003d\u0025\u0073",_dbef ,_gdae ,_cbcb );
continue ;};};_dbafb =append (_dbafb ,_cbcb );};};_dbafb .sortStrict ();return _dbafb ;};func _baf (_gdd []Font ,_dab string )bool {for _ ,_ace :=range _gdd {if _ace .FontName ==_dab {return true ;};};return false ;};type textObject struct{_fcb *Extractor ;
_afgf *_bd .PdfPageResources ;_dcd _ad .GraphicsState ;_beg *textState ;_ecfd *stateStack ;_efa _ga .Matrix ;_fdce _ga .Matrix ;_cag []*textMark ;_caad bool ;};func (_bfdf *textObject )moveTextSetLeading (_add ,_bbef float64 ){_bfdf ._beg ._dgcg =-_bbef ;
_bfdf .moveLP (_add ,_bbef );};func (_beca paraList )computeEBBoxes (){if _ageec {_fb .Log .Info ("\u0063o\u006dp\u0075\u0074\u0065\u0045\u0042\u0042\u006f\u0078\u0065\u0073\u003a");};for _ ,_bdeb :=range _beca {_bdeb ._fcegg =_bdeb .PdfRectangle ;};_febd :=_beca .yNeighbours (0);
for _dffgg ,_babg :=range _beca {_bgddg :=_babg ._fcegg ;_bdegf ,_ebegf :=-1.0e9,+1.0e9;for _ ,_gdbdg :=range _febd [_babg ]{_dfgfc :=_beca [_gdbdg ]._fcegg ;if _dfgfc .Urx < _bgddg .Llx {_bdegf =_e .Max (_bdegf ,_dfgfc .Urx );}else if _bgddg .Urx < _dfgfc .Llx {_ebegf =_e .Min (_ebegf ,_dfgfc .Llx );
};};for _cfbc ,_baae :=range _beca {_efcf :=_baae ._fcegg ;if _dffgg ==_cfbc ||_efcf .Ury > _bgddg .Lly {continue ;};if _bdegf <=_efcf .Llx &&_efcf .Llx < _bgddg .Llx {_bgddg .Llx =_efcf .Llx ;}else if _efcf .Urx <=_ebegf &&_bgddg .Urx < _efcf .Urx {_bgddg .Urx =_efcf .Urx ;
};};if _ageec {_cbg .Printf ("\u0025\u0034\u0064\u003a %\u0036\u002e\u0032\u0066\u2192\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0071\u000a",_dffgg ,_babg ._fcegg ,_bgddg ,_ddfcg (_babg .text (),50));};_babg ._fcegg =_bgddg ;};if _eedf {for _ ,_fece :=range _beca {_fece .PdfRectangle =_fece ._fcegg ;
};};};func _babga (_ccfac map[int ][]float64 )string {_bbccf :=_bdgcb (_ccfac );_gaec :=make ([]string ,len (_ccfac ));for _ddgfg ,_aagbf :=range _bbccf {_gaec [_ddgfg ]=_cbg .Sprintf ("\u0025\u0064\u003a\u0020\u0025\u002e\u0032\u0066",_aagbf ,_ccfac [_aagbf ]);
};return _cbg .Sprintf ("\u007b\u0025\u0073\u007d",_bb .Join (_gaec ,"\u002c\u0020"));};type textWord struct{_bd .PdfRectangle ;_gabaag float64 ;_ffdcg string ;_gfdga []*textMark ;_efce float64 ;_cgbdf bool ;};

// String returns a description of `tm`.
func (_dacbb *textMark )String ()string {return _cbg .Sprintf ("\u0025\u002e\u0032f \u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\u0022\u0025\u0073\u0022",_dacbb .PdfRectangle ,_dacbb ._afbae ,_dacbb ._becfb );};var _cfb =false ;
func (_aebcd compositeCell )String ()string {_bgaf :="";if len (_aebcd .paraList )> 0{_bgaf =_ddfcg (_aebcd .paraList .merge ().text (),50);};return _cbg .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0070\u0061\u0072a\u0073\u0020\u0025\u0071",_aebcd .PdfRectangle ,len (_aebcd .paraList ),_bgaf );
};func (_aac *structTreeRoot )parseStructTreeRoot (_acgea _cf .PdfObject ){if _acgea !=nil {_cgdcf ,_abgb :=_cf .GetDict (_acgea );if !_abgb {_fb .Log .Debug ("\u0070\u0061\u0072s\u0065\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u003a\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u006eo\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");
};K :=_cgdcf .Get ("\u004b");_deee :=_cgdcf .Get ("\u0054\u0079\u0070\u0065").String ();var _fbfgd *_cf .PdfObjectArray ;switch _bdcf :=K .(type ){case *_cf .PdfObjectArray :_fbfgd =_bdcf ;case *_cf .PdfObjectReference :_fbfgd =_cf .MakeArray (K );};_cbgfe :=[]structElement {};
for _ ,_bddc :=range _fbfgd .Elements (){_gbeg :=&structElement {};_gbeg .parseStructElement (_bddc );_cbgfe =append (_cbgfe ,*_gbeg );};_aac ._gagg =_cbgfe ;_aac ._cbee =_deee ;};};func (_bad *textObject )reset (){_bad ._efa =_ga .IdentityMatrix ();_bad ._fdce =_ga .IdentityMatrix ();
_bad ._cag =nil ;};func (_dacfa *textWord )absorb (_cbcec *textWord ){_dacfa .PdfRectangle =_agcf (_dacfa .PdfRectangle ,_cbcec .PdfRectangle );_dacfa ._gfdga =append (_dacfa ._gfdga ,_cbcec ._gfdga ...);};

// TextTable represents a table.
// Cells are ordered top-to-bottom, left-to-right.
// Cells[y] is the (0-offset) y'th row in the table.
// Cells[y][x] is the (0-offset) x'th column in the table.
type TextTable struct{_bd .PdfRectangle ;W ,H int ;Cells [][]TableCell ;};func _dg (_db []string ,_aa int ,_aad int ,_ea string ){for _bc :=_aa ;_bc < _aad ;_bc ++{_db [_bc ]=_ea ;};};type lists []*list ;func (_cfcb *wordBag )text ()string {_eabc :=_cfcb .allWords ();
_dga :=make ([]string ,len (_eabc ));for _dbed ,_bbcd :=range _eabc {_dga [_dbed ]=_bbcd ._ffdcg ;};return _bb .Join (_dga ,"\u0020");};func (_dgea paraList )findTableGrid (_cbeac gridTiling )(*textTable ,map[*textPara ]struct{}){_efae :=len (_cbeac ._cebc );
_gbga :=len (_cbeac ._adfdb );_aebca :=textTable {_deagb :true ,_bbfgf :_efae ,_gfcf :_gbga ,_fdbac :make (map[uint64 ]*textPara ,_efae *_gbga ),_bfeb :make (map[uint64 ]compositeCell ,_efae *_gbga )};_aebca .PdfRectangle =_cbeac .PdfRectangle ;_fffc :=make (map[*textPara ]struct{});
_cgad :=int ((1.0-_ffgg )*float64 (_efae *_gbga ));_eeeae :=0;if _fdbd {_fb .Log .Info ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0064\u0020\u0078\u0020%\u0064",_efae ,_gbga );};for _ecdfg ,_aefga :=range _cbeac ._adfdb {_bdcda ,_eadg :=_cbeac ._adga [_aefga ];
if !_eadg {continue ;};for _bfafg ,_gbfb :=range _cbeac ._cebc {_bedf ,_afceg :=_bdcda [_gbfb ];if !_afceg {continue ;};_efac :=_dgea .inTile (_bedf );if len (_efac )==0{_eeeae ++;if _eeeae > _cgad {if _fdbd {_fb .Log .Info ("\u0021\u006e\u0075m\u0045\u006d\u0070\u0074\u0079\u003d\u0025\u0064",_eeeae );
};return nil ,nil ;};}else {_aebca .putComposite (_bfafg ,_ecdfg ,_efac ,_bedf .PdfRectangle );for _ ,_fbcfae :=range _efac {_fffc [_fbcfae ]=struct{}{};};};};};_afdbf :=0;for _bcdcc :=0;_bcdcc < _efae ;_bcdcc ++{_fcgeb :=_aebca .get (_bcdcc ,0);if _fcgeb ==nil ||!_fcgeb ._ddda {_afdbf ++;
};};if _afdbf ==0{if _fdbd {_fb .Log .Info ("\u0021\u006e\u0075m\u0048\u0065\u0061\u0064\u0065\u0072\u003d\u0030");};return nil ,nil ;};_bebcd :=_aebca .reduceTiling (_cbeac ,_defb );_bebcd =_bebcd .subdivide ();return _bebcd ,_fffc ;};func (_bae *imageExtractContext )processOperand (_aee *_ad .ContentStreamOperation ,_bdc _ad .GraphicsState ,_ffc *_bd .PdfPageResources )error {if _aee .Operand =="\u0042\u0049"&&len (_aee .Params )==1{_dfd ,_gfb :=_aee .Params [0].(*_ad .ContentStreamInlineImage );
if !_gfb {return nil ;};if _afcc ,_adg :=_cf .GetBoolVal (_dfd .ImageMask );_adg {if _afcc &&!_bae ._cee .IncludeInlineStencilMasks {return nil ;};};return _bae .extractInlineImage (_dfd ,_bdc ,_ffc );}else if _aee .Operand =="\u0044\u006f"&&len (_aee .Params )==1{_becb ,_ade :=_cf .GetName (_aee .Params [0]);
if !_ade {_fb .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");return _ecbc ;};_ ,_feb :=_ffc .GetXObjectByName (*_becb );switch _feb {case _bd .XObjectTypeImage :return _bae .extractXObjectImage (_becb ,_bdc ,_ffc );case _bd .XObjectTypeForm :return _bae .extractFormImages (_becb ,_bdc ,_ffc );
};}else if _bae ._dfg &&(_aee .Operand =="\u0073\u0063\u006e"||_aee .Operand =="\u0053\u0043\u004e")&&len (_aee .Params )==1{_dcf ,_bca :=_cf .GetName (_aee .Params [0]);if !_bca {_fb .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");
return _ecbc ;};_agc ,_bca :=_ffc .GetPatternByName (*_dcf );if !_bca {_fb .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0050\u0061\u0074\u0074\u0065\u0072n\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");return nil ;};if _agc .IsTiling (){_cbcf :=_agc .GetAsTilingPattern ();
_bce ,_dgbf :=_cbcf .GetContentStream ();if _dgbf !=nil {return _dgbf ;};_dgbf =_bae .extractContentStreamImages (string (_bce ),_cbcf .Resources );if _dgbf !=nil {return _dgbf ;};};}else if (_aee .Operand =="\u0063\u0073"||_aee .Operand =="\u0043\u0053")&&len (_aee .Params )>=1{_bae ._dfg =_aee .Params [0].String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e";
};return nil ;};

// ExtractText processes and extracts all text data in content streams and returns as a string.
// It takes into account character encodings in the PDF file, which are decoded by
// CharcodeBytesToUnicode.
// Characters that can't be decoded are replaced with MissingCodeRune ('\ufffd' = ).
func (_gaac *Extractor )ExtractText ()(string ,error ){_efg ,_ ,_ ,_afcg :=_gaac .ExtractTextWithStats ();return _efg ,_afcg ;};func (_dda *textObject )setHorizScaling (_gaaf float64 ){if _dda ==nil {return ;};_dda ._beg ._cgec =_gaaf ;};func (_bcbgg *textPara )writeCellText (_afgd _cb .Writer ){for _ffdc ,_bfce :=range _bcbgg ._bgcc {_egcdb :=_bfce .text ();
_bgadcc :=_bacg &&_bfce .endsInHyphen ()&&_ffdc !=len (_bcbgg ._bgcc )-1;if _bgadcc {_egcdb =_degge (_egcdb );};_afgd .Write ([]byte (_egcdb ));if !(_bgadcc ||_ffdc ==len (_bcbgg ._bgcc )-1){_afgd .Write ([]byte (_fcda (_bfce ._becg ,_bcbgg ._bgcc [_ffdc +1]._becg )));
};};};

// Append appends `mark` to the mark array.
func (_fbfec *TextMarkArray )Append (mark TextMark ){_fbfec ._acag =append (_fbfec ._acag ,mark )};func (_cedbb rulingList )primMinMax ()(float64 ,float64 ){_addbc ,_dbcee :=_cedbb [0]._gabcd ,_cedbb [0]._gabcd ;for _ ,_bfeg :=range _cedbb [1:]{if _bfeg ._gabcd < _addbc {_addbc =_bfeg ._gabcd ;
}else if _bfeg ._gabcd > _dbcee {_dbcee =_bfeg ._gabcd ;};};return _addbc ,_dbcee ;};func (_dbeb compositeCell )hasLines (_bege []*textLine )bool {for _gggcf ,_dacg :=range _bege {_ffbe :=_efec (_dbeb .PdfRectangle ,_dacg .PdfRectangle );if _deef {_cbg .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u005e\u005e\u005e\u0069\u006e\u0074\u0065\u0072\u0073e\u0063t\u0073\u003d\u0025\u0074\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u000a",_ffbe ,_gggcf ,len (_bege ));
_cbg .Printf ("\u0020\u0020\u0020\u0020  \u005e\u005e\u005e\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025s\u000a",_dbeb );_cbg .Printf ("\u0020 \u0020 \u0020\u0020\u0020\u006c\u0069\u006e\u0065\u003d\u0025\u0073\u000a",_dacg );};if _ffbe {return true ;
};};return false ;};

// Text returns the extracted page text.
func (_egb PageText )Text ()string {return _egb ._eced };type subpath struct{_gcgc []_ga .Point ;_ffbag bool ;};

// TableInfo gets table information of the textmark `tm`.
func (_accbc *TextMark )TableInfo ()(*TextTable ,[][]int ){if !_accbc ._ffgac {return nil ,nil ;};_bfea :=_accbc ._ggecd ;_cea :=_bfea .getCellInfo (*_accbc );return _bfea ,_cea ;};func _fcdf (_fbegg ,_fcf bounded )float64 {return _fbegg .bbox ().Llx -_fcf .bbox ().Llx };
func (_gad *shapesState )clearPath (){_gad ._eaaf =nil ;_gad ._dgbb =false ;if _gcc {_fb .Log .Info ("\u0043\u004c\u0045A\u0052\u003a\u0020\u0073\u0073\u003d\u0025\u0073",_gad );};};func _efcgf (_ffde _bd .PdfRectangle )*ruling {return &ruling {_egagd :_fdec ,_gabcd :_ffde .Lly ,_cdcd :_ffde .Llx ,_dcgf :_ffde .Urx };
};func (_dfea gridTiling )log (_dddfa string ){if !_fdbd {return ;};_fb .Log .Info ("\u0074i\u006ci\u006e\u0067\u003a\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0071",len (_dfea ._cebc ),len (_dfea ._adfdb ),_dddfa );_cbg .Printf ("\u0020\u0020\u0020l\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a",_dfea ._cebc );
_cbg .Printf ("\u0020\u0020\u0020l\u006c\u0079\u003d\u0025\u002e\u0032\u0066\u000a",_dfea ._adfdb );for _cfefe ,_dcgbc :=range _dfea ._adfdb {_eagd ,_aegc :=_dfea ._adga [_dcgbc ];if !_aegc {continue ;};_cbg .Printf ("%\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_cfefe ,_dcgbc );
for _cagb ,_cbbaa :=range _dfea ._cebc {_ffdef ,_dbeda :=_eagd [_cbbaa ];if !_dbeda {continue ;};_cbg .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_cagb ,_ffdef .String ());};};};func (_def *textObject )showText (_baaa _cf .PdfObject ,_dcbd []byte ,_bcbg int ,_bagf string )error {return _def .renderText (_baaa ,_dcbd ,_bcbg ,_bagf );
};func (_fcea rulingList )secMinMax ()(float64 ,float64 ){_becgd ,_dbfc :=_fcea [0]._cdcd ,_fcea [0]._dcgf ;for _ ,_dgfdf :=range _fcea [1:]{if _dgfdf ._cdcd < _becgd {_becgd =_dgfdf ._cdcd ;};if _dgfdf ._dcgf > _dbfc {_dbfc =_dgfdf ._dcgf ;};};return _becgd ,_dbfc ;
};func (_bgfa rulingList )merge ()*ruling {_gcaea :=_bgfa [0]._gabcd ;_bfag :=_bgfa [0]._cdcd ;_fffec :=_bgfa [0]._dcgf ;for _ ,_bbae :=range _bgfa [1:]{_gcaea +=_bbae ._gabcd ;if _bbae ._cdcd < _bfag {_bfag =_bbae ._cdcd ;};if _bbae ._dcgf > _fffec {_fffec =_bbae ._dcgf ;
};};_dgfc :=&ruling {_egagd :_bgfa [0]._egagd ,_aeecd :_bgfa [0]._aeecd ,Color :_bgfa [0].Color ,_gabcd :_gcaea /float64 (len (_bgfa )),_cdcd :_bfag ,_dcgf :_fffec };if _bcbb {_fb .Log .Info ("\u006de\u0072g\u0065\u003a\u0020\u0025\u0032d\u0020\u0076e\u0063\u0073\u0020\u0025\u0073",len (_bgfa ),_dgfc );
for _ecadd ,_gabaf :=range _bgfa {_cbg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ecadd ,_gabaf );};};return _dgfc ;};func (_dbabc *shapesState )quadraticTo (_fgab ,_egad ,_afcd ,_geg float64 ){if _gcc {_fb .Log .Info ("\u0071\u0075\u0061d\u0072\u0061\u0074\u0069\u0063\u0054\u006f\u003a");
};_dbabc .addPoint (_afcd ,_geg );};func (_decc *textObject )nextLine (){_decc .moveLP (0,-_decc ._beg ._dgcg )};

// String returns a string describing `pt`.
func (_gagb PageText )String ()string {_afa :=_cbg .Sprintf ("P\u0061\u0067\u0065\u0054ex\u0074:\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073",len (_gagb ._accb ));_dgbd :=[]string {"\u002d"+_afa };for _ ,_cdcb :=range _gagb ._accb {_dgbd =append (_dgbd ,_cdcb .String ());
};_dgbd =append (_dgbd ,"\u002b"+_afa );return _bb .Join (_dgbd ,"\u000a");};func (_ddc *textObject )moveText (_egeb ,_gfe float64 ){_ddc .moveLP (_egeb ,_gfe )};func (_cgg *textObject )setWordSpacing (_eada float64 ){if _cgg ==nil {return ;};_cgg ._beg ._eef =_eada ;
};

// TextMark represents extracted text on a page with information regarding both textual content,
// formatting (font and size) and positioning.
// It is the smallest unit of text on a PDF page, typically a single character.
//
// getBBox() in test_text.go shows how to compute bounding boxes of substrings of extracted text.
// The following code extracts the text on PDF page `page` into `text` then finds the bounding box
// `bbox` of substring `term` in `text`.
//
//	ex, _ := New(page)
//	// handle errors
//	pageText, _, _, err := ex.ExtractPageText()
//	// handle errors
//	text := pageText.Text()
//	textMarks := pageText.Marks()
//
//		start := strings.Index(text, term)
//	 end := start + len(term)
//	 spanMarks, err := textMarks.RangeOffset(start, end)
//	 // handle errors
//	 bbox, ok := spanMarks.BBox()
//	 // handle errors
type TextMark struct{

// Text is the extracted text.
Text string ;

// Original is the text in the PDF. It has not been decoded like `Text`.
Original string ;

// BBox is the bounding box of the text.
BBox _bd .PdfRectangle ;

// Font is the font the text was drawn with.
Font *_bd .PdfFont ;

// FontSize is the font size the text was drawn with.
FontSize float64 ;

// Offset is the offset of the start of TextMark.Text in the extracted text. If you do this
//   text, textMarks := pageText.Text(), pageText.Marks()
//   marks := textMarks.Elements()
// then marks[i].Offset is the offset of marks[i].Text in text.
Offset int ;

// Meta is set true for spaces and line breaks that we insert in the extracted text. We insert
// spaces (line breaks) when we see characters that are over a threshold horizontal (vertical)
//  distance  apart. See wordJoiner (lineJoiner) in PageText.computeViews().
Meta bool ;

// FillColor is the fill color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
FillColor _gf .Color ;

// StrokeColor is the stroke color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
StrokeColor _gf .Color ;

// Orientation is the text orientation
Orientation int ;

// DirectObject is the underlying PdfObject (Text Object) that represents the visible texts. This is introduced to get
// a simple access to the TextObject in case editing or replacment of some text is needed. E.g during redaction.
DirectObject _cf .PdfObject ;

// ObjString is a decoded string operand of a text-showing operator. It has the same value as `Text` attribute except
// when many glyphs are represented with the same Text Object that contains multiple length string operand in which case
// ObjString spans more than one character string that falls in different TextMark objects.
ObjString []string ;Tw float64 ;Th float64 ;Tc float64 ;Index int ;_ffgac bool ;_ggecd *TextTable ;};func (_bgea *textTable )getRight ()paraList {_cccac :=make (paraList ,_bgea ._gfcf );for _dggbg :=0;_dggbg < _bgea ._gfcf ;_dggbg ++{_dccggd :=_bgea .get (_bgea ._bbfgf -1,_dggbg )._bbbge ;
if _dccggd .taken (){return nil ;};_cccac [_dggbg ]=_dccggd ;};for _bccf :=0;_bccf < _bgea ._gfcf -1;_bccf ++{if _cccac [_bccf ]._dffd !=_cccac [_bccf +1]{return nil ;};};return _cccac ;};func (_agcb *textLine )pullWord (_dbca *wordBag ,_cfec *textWord ,_adfd int ){_agcb .appendWord (_cfec );
_dbca .removeWord (_cfec ,_adfd );};func (_gebf *textPara )writeText (_defd _cb .Writer ){if _gebf ._dgega ==nil {_gebf .writeCellText (_defd );return ;};for _cdbf :=0;_cdbf < _gebf ._dgega ._gfcf ;_cdbf ++{for _bfcdc :=0;_bfcdc < _gebf ._dgega ._bbfgf ;
_bfcdc ++{_aega :=_gebf ._dgega .get (_bfcdc ,_cdbf );if _aega ==nil {_defd .Write ([]byte ("\u0009"));}else {_aega .writeCellText (_defd );};_defd .Write ([]byte ("\u0020"));};if _cdbf < _gebf ._dgega ._gfcf -1{_defd .Write ([]byte ("\u000a"));};};};func _efca (_eebdf int ,_ccgad map[int ][]float64 )([]int ,int ){_fdgfc :=make ([]int ,_eebdf );
_bedb :=0;for _gaeg :=0;_gaeg < _eebdf ;_gaeg ++{_fdgfc [_gaeg ]=_bedb ;_bedb +=len (_ccgad [_gaeg ])+1;};return _fdgfc ,_bedb ;};

// String returns a description of `k`.
func (_gffg rulingKind )String ()string {_dcgb ,_gcef :=_deccbb [_gffg ];if !_gcef {return _cbg .Sprintf ("\u004e\u006ft\u0020\u0061\u0020r\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_gffg );};return _dcgb ;};func _bbbg (_aaae []*textMark ,_dagc _bd .PdfRectangle ,_dcdg rulingList ,_bdca []gridTiling ,_cabd bool )paraList {_fb .Log .Trace ("\u006d\u0061\u006b\u0065\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065\u003a \u0025\u0064\u0020\u0065\u006c\u0065m\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065=\u0025\u002e\u0032\u0066",len (_aaae ),_dagc );
if len (_aaae )==0{return nil ;};_beaf :=_gfdba (_aaae ,_dagc );if len (_beaf )==0{return nil ;};_dcdg .log ("\u006d\u0061\u006be\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065");_ggeac ,_dbdbd :=_dcdg .vertsHorzs ();_ecgg :=_bfdc (_beaf ,_dagc .Ury ,_ggeac ,_dbdbd );
_gafba :=_cddf (_ecgg ,_dagc .Ury ,_ggeac ,_dbdbd );_gafba =_ddcc (_gafba );_agcc :=make (paraList ,0,len (_gafba ));for _ ,_efagcc :=range _gafba {_feac :=_efagcc .arrangeText ();if _feac !=nil {_agcc =append (_agcc ,_feac );};};if !_cabd &&len (_agcc )>=_cabe {_agcc =_agcc .extractTables (_bdca );
};_agcc .sortReadingOrder ();if !_cabd {_agcc .sortTopoOrder ();};_agcc .log ("\u0073\u006f\u0072te\u0064\u0020\u0069\u006e\u0020\u0072\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u006f\u0072\u0064\u0065\u0072");return _agcc ;};func _eecgb (_aeb byte )bool {for _ ,_bcbfb :=range _gfg {if []byte (_bcbfb )[0]==_aeb {return true ;
};};return false ;};func _gedc (_dadg []*textLine ,_faecc ,_efgcb float64 )[]*textLine {var _faag []*textLine ;for _ ,_fddf :=range _dadg {if _faecc ==-1{if _fddf ._becg > _efgcb {_faag =append (_faag ,_fddf );};}else {if _fddf ._becg > _efgcb &&_fddf ._becg < _faecc {_faag =append (_faag ,_fddf );
};};};return _faag ;};func (_agba *textTable )logComposite (_gcfd string ){if !_deef {return ;};_fb .Log .Info ("\u007e~\u007eP\u0061\u0072\u0061\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_agba ._bbfgf ,_agba ._gfcf ,_gcfd );_cbg .Printf ("\u0025\u0035\u0073 \u007c","");
for _dccde :=0;_dccde < _agba ._bbfgf ;_dccde ++{_cbg .Printf ("\u0025\u0033\u0064 \u007c",_dccde );};_cbg .Println ("");_cbg .Printf ("\u0025\u0035\u0073 \u002b","");for _bfdb :=0;_bfdb < _agba ._bbfgf ;_bfdb ++{_cbg .Printf ("\u0025\u0033\u0073 \u002b","\u002d\u002d\u002d");
};_cbg .Println ("");for _eebba :=0;_eebba < _agba ._gfcf ;_eebba ++{_cbg .Printf ("\u0025\u0035\u0064 \u007c",_eebba );for _cfff :=0;_cfff < _agba ._bbfgf ;_cfff ++{_ddfce ,_ :=_agba ._bfeb [_eebg (_cfff ,_eebba )].parasBBox ();_cbg .Printf ("\u0025\u0033\u0064 \u007c",len (_ddfce ));
};_cbg .Println ("");};_fb .Log .Info ("\u007e~\u007eT\u0065\u0078\u0074\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_agba ._bbfgf ,_agba ._gfcf ,_gcfd );_cbg .Printf ("\u0025\u0035\u0073 \u007c","");for _eeab :=0;_eeab < _agba ._bbfgf ;_eeab ++{_cbg .Printf ("\u0025\u0031\u0032\u0064\u0020\u007c",_eeab );
};_cbg .Println ("");_cbg .Printf ("\u0025\u0035\u0073 \u002b","");for _eafee :=0;_eafee < _agba ._bbfgf ;_eafee ++{_cbg .Print ("\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d-\u002d\u002d\u002d\u002b");};_cbg .Println ("");for _fdad :=0;_fdad < _agba ._gfcf ;
_fdad ++{_cbg .Printf ("\u0025\u0035\u0064 \u007c",_fdad );for _ffccd :=0;_ffccd < _agba ._bbfgf ;_ffccd ++{_abgc ,_ :=_agba ._bfeb [_eebg (_ffccd ,_fdad )].parasBBox ();_aeggge :="";_bfff :=_abgc .merge ();if _bfff !=nil {_aeggge =_bfff .text ();};_aeggge =_cbg .Sprintf ("\u0025\u0071",_ddfcg (_aeggge ,12));
_aeggge =_aeggge [1:len (_aeggge )-1];_cbg .Printf ("\u0025\u0031\u0032\u0073\u0020\u007c",_aeggge );};_cbg .Println ("");};};func (_egbg *textLine )toTextMarks (_aefc *int )[]TextMark {var _cgge []TextMark ;for _ ,_gdde :=range _egbg ._abcg {if _gdde ._cgbdf {_cgge =_dbgab (_cgge ,_aefc ,"\u0020");
};_adde :=_gdde .toTextMarks (_aefc );_cgge =append (_cgge ,_adde ...);};return _cgge ;};type textLine struct{_bd .PdfRectangle ;_becg float64 ;_abcg []*textWord ;_efba float64 ;};const _fdcdd =10;func _fcbae (_afdd []pathSection )rulingList {_dddb (_afdd );
if _babf {_fb .Log .Info ("\u006da\u006b\u0065\u0046\u0069l\u006c\u0052\u0075\u006c\u0069n\u0067s\u003a \u0025\u0064\u0020\u0066\u0069\u006c\u006cs",len (_afdd ));};var _edbcg rulingList ;for _ ,_aaaeb :=range _afdd {for _ ,_afge :=range _aaaeb ._ecea {if !_afge .isQuadrilateral (){if _babf {_fb .Log .Error ("!\u0069s\u0051\u0075\u0061\u0064\u0072\u0069\u006c\u0061t\u0065\u0072\u0061\u006c: \u0025\u0073",_afge );
};continue ;};if _bdf ,_daec :=_afge .makeRectRuling (_aaaeb .Color );_daec {_edbcg =append (_edbcg ,_bdf );}else {if _ggeg {_fb .Log .Error ("\u0021\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0073",_afge );
};};};};if _babf {_fb .Log .Info ("\u006d\u0061\u006b\u0065Fi\u006c\u006c\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0073",_edbcg .String ());};return _edbcg ;};func _eebg (_fadd ,_eebbc int )uint64 {return uint64 (_fadd )*0x1000000+uint64 (_eebbc )};
func (_gccag *textTable )put (_cgbfea ,_ddga int ,_gebb *textPara ){_gccag ._fdbac [_eebg (_cgbfea ,_ddga )]=_gebb ;};func _fcdae (_deabe ,_gbgga _ga .Point ,_dccaa _gf .Color )(*ruling ,bool ){_bbcdf :=lineRuling {_affd :_deabe ,_ceea :_gbgga ,_addf :_cdf (_deabe ,_gbgga ),Color :_dccaa };
if _bbcdf ._addf ==_febb {return nil ,false ;};return _bbcdf .asRuling ();};func _degge (_ecff string )string {_caebf :=[]rune (_ecff );return string (_caebf [:len (_caebf )-1])};

// ExtractTextWithStats works like ExtractText but returns the number of characters in the output
// (`numChars`) and the number of characters that were not decoded (`numMisses`).
func (_dba *Extractor )ExtractTextWithStats ()(_abb string ,_faaf int ,_ebg int ,_acg error ){_deg ,_faaf ,_ebg ,_acg :=_dba .ExtractPageText ();if _acg !=nil {return "",_faaf ,_ebg ,_acg ;};return _deg .Text (),_faaf ,_ebg ,nil ;};func (_aafe TextTable )getCellInfo (_abf TextMark )[][]int {for _afga ,_gcf :=range _aafe .Cells {for _aeda :=range _gcf {_abfc :=&_gcf [_aeda ].Marks ;
if _abfc .exists (_abf ){return [][]int {{_afga },{_aeda }};};};};return nil ;};const (_bacg =true ;_aead =true ;_ddac =true ;_eedf =false ;_dgfbe =false ;_gecb =6;_begf =3.0;_ecbcb =200;_eefg =true ;_bfgc =true ;_efcbd =true ;_fade =true ;_fgdc =false ;
);func (_gdgda rulingList )sortStrict (){_a .Slice (_gdgda ,func (_fabc ,_acde int )bool {_bdfa ,_cdbfc :=_gdgda [_fabc ],_gdgda [_acde ];_ceef ,_beab :=_bdfa ._egagd ,_cdbfc ._egagd ;if _ceef !=_beab {return _ceef > _beab ;};_daeca ,_bdcfc :=_bdfa ._gabcd ,_cdbfc ._gabcd ;
if !_bfaeb (_daeca -_bdcfc ){return _daeca < _bdcfc ;};_daeca ,_bdcfc =_bdfa ._cdcd ,_cdbfc ._cdcd ;if _daeca !=_bdcfc {return _daeca < _bdcfc ;};return _bdfa ._dcgf < _cdbfc ._dcgf ;});};func (_cabg rulingList )isActualGrid ()(rulingList ,bool ){_ffgb ,_ggabg :=_cabg .augmentGrid ();
if !(len (_ffgb )>=_bcde +1&&len (_ggabg )>=_fbfa +1){if _babf {_fb .Log .Info ("\u0069s\u0041\u0063t\u0075\u0061\u006c\u0047r\u0069\u0064\u003a \u004e\u006f\u0074\u0020\u0061\u006c\u0069\u0067\u006eed\u002e\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u003c\u0020\u0025d\u0020\u0078 \u0025\u0064",len (_ffgb ),len (_ggabg ),_bcde +1,_fbfa +1);
};return nil ,false ;};if _babf {_fb .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075a\u006c\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0073\u0020\u003a\u0020\u0025t\u0020\u0026\u0020\u0025\u0074\u0020\u2192 \u0025\u0074",_cabg ,len (_ffgb )>=2,len (_ggabg )>=2,len (_ffgb )>=2&&len (_ggabg )>=2);
for _cdec ,_aggf :=range _cabg {_cbg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0076\u000a",_cdec ,_aggf );};};if _fgdc {_ecfe ,_aefa :=_ffgb [0],_ffgb [len (_ffgb )-1];_bceag ,_dcgd :=_ggabg [0],_ggabg [len (_ggabg )-1];if !(_bbcf (_ecfe ._gabcd -_bceag ._cdcd )&&_bbcf (_aefa ._gabcd -_bceag ._dcgf )&&_bbcf (_bceag ._gabcd -_ecfe ._dcgf )&&_bbcf (_dcgd ._gabcd -_ecfe ._cdcd )){if _babf {_fb .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069d\u003a\u0020\u0020N\u006f\u0074 \u0061\u006c\u0069\u0067\u006e\u0065d\u002e\n\t\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0076\u0031\u003d\u0025\u0073\u000a\u0009\u0068\u0030\u003d\u0025\u0073\u000a\u0009\u0068\u0031\u003d\u0025\u0073",_ecfe ,_aefa ,_bceag ,_dcgd );
};return nil ,false ;};}else {if !_ffgb .aligned (){if _bcbb {_fb .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0076\u0065\u0072\u0074\u0073\u002e\u0020%\u0064",len (_ffgb ));
};return nil ,false ;};if !_ggabg .aligned (){if _babf {_fb .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0068\u006f\u0072\u007a\u0073\u002e\u0020%\u0064",len (_ggabg ));
};return nil ,false ;};};_agff :=append (_ffgb ,_ggabg ...);return _agff ,true ;};func (_dafec rulingList )snapToGroups ()rulingList {_bfacc ,_gfgb :=_dafec .vertsHorzs ();if len (_bfacc )> 0{_bfacc =_bfacc .snapToGroupsDirection ();};if len (_gfgb )> 0{_gfgb =_gfgb .snapToGroupsDirection ();
};_ceaf :=append (_bfacc ,_gfgb ...);_ceaf .log ("\u0073\u006e\u0061p\u0054\u006f\u0047\u0072\u006f\u0075\u0070\u0073");return _ceaf ;};func (_afab pathSection )bbox ()_bd .PdfRectangle {_bba :=_afab ._ecea [0]._gcgc [0];_beee :=_bd .PdfRectangle {Llx :_bba .X ,Urx :_bba .X ,Lly :_bba .Y ,Ury :_bba .Y };
_fddb :=func (_dggc _ga .Point ){if _dggc .X < _beee .Llx {_beee .Llx =_dggc .X ;}else if _dggc .X > _beee .Urx {_beee .Urx =_dggc .X ;};if _dggc .Y < _beee .Lly {_beee .Lly =_dggc .Y ;}else if _dggc .Y > _beee .Ury {_beee .Ury =_dggc .Y ;};};for _ ,_daab :=range _afab ._ecea [0]._gcgc [1:]{_fddb (_daab );
};for _ ,_eace :=range _afab ._ecea [1:]{for _ ,_eacd :=range _eace ._gcgc {_fddb (_eacd );};};return _beee ;};func _bfdc (_fdgf []*textWord ,_affa float64 ,_fcef ,_fbcf rulingList )*wordBag {_fbcb :=_ggab (_fdgf [0],_affa ,_fcef ,_fbcf );for _ ,_fcaf :=range _fdgf [1:]{_ccga :=_fadcb (_fcaf ._gabaag );
_fbcb ._acfg [_ccga ]=append (_fbcb ._acfg [_ccga ],_fcaf );_fbcb .PdfRectangle =_agcf (_fbcb .PdfRectangle ,_fcaf .PdfRectangle );};_fbcb .sort ();return _fbcb ;};func (_ggbgc *textTable )markCells (){for _fecag :=0;_fecag < _ggbgc ._gfcf ;_fecag ++{for _cdfd :=0;
_cdfd < _ggbgc ._bbfgf ;_cdfd ++{_dada :=_ggbgc .get (_cdfd ,_fecag );if _dada !=nil {_dada ._cecbe =true ;};};};};func (_adfa *PageText )getParagraphs ()paraList {var _gdge rulingList ;if _efcbd {_deag :=_ededdg (_adfa ._bbgb );_gdge =append (_gdge ,_deag ...);
};if _fade {_abeef :=_fcbae (_adfa ._fdf );_gdge =append (_gdge ,_abeef ...);};_gdge ,_cbcd :=_gdge .toTilings ();var _gcb paraList ;_ebge :=len (_adfa ._accb );for _fbea :=0;_fbea < 360&&_ebge > 0;_fbea +=90{_dccd :=make ([]*textMark ,0,len (_adfa ._accb )-_ebge );
for _ ,_fbfg :=range _adfa ._accb {if _fbfg ._cbacf ==_fbea {_dccd =append (_dccd ,_fbfg );};};if len (_dccd )> 0{_aegfe :=_bbbg (_dccd ,_adfa ._edf ,_gdge ,_cbcd ,_adfa ._efc ._ageb );_gcb =append (_gcb ,_aegfe ...);_ebge -=len (_dccd );};};return _gcb ;
};func (_ffagc paraList )readBefore (_fadg []int ,_gbee ,_ecccb int )bool {_bfaaa ,_cdeg :=_ffagc [_gbee ],_ffagc [_ecccb ];if _dae (_bfaaa ,_cdeg )&&_bfaaa .Lly > _cdeg .Lly {return true ;};if !(_bfaaa ._fcegg .Urx < _cdeg ._fcegg .Llx ){return false ;
};_ceec ,_dcbc :=_bfaaa .Lly ,_cdeg .Lly ;if _ceec > _dcbc {_dcbc ,_ceec =_ceec ,_dcbc ;};_eedc :=_e .Max (_bfaaa ._fcegg .Llx ,_cdeg ._fcegg .Llx );_cgfg :=_e .Min (_bfaaa ._fcegg .Urx ,_cdeg ._fcegg .Urx );_ceag :=_ffagc .llyRange (_fadg ,_ceec ,_dcbc );
for _ ,_fagg :=range _ceag {if _fagg ==_gbee ||_fagg ==_ecccb {continue ;};_abbge :=_ffagc [_fagg ];if _abbge ._fcegg .Llx <=_cgfg &&_eedc <=_abbge ._fcegg .Urx {return false ;};};return true ;};func _fegaeg (_afded []*textWord ,_cacge int )[]*textWord {_gdbdb :=len (_afded );
copy (_afded [_cacge :],_afded [_cacge +1:]);return _afded [:_gdbdb -1];};type list struct{_ggcfb []*textLine ;_dfb string ;_fgcb []*list ;_fcgc string ;};func _fadcb (_bdbf float64 )int {var _fabb int ;if _bdbf >=0{_fabb =int (_bdbf /_bgbd );}else {_fabb =int (_bdbf /_bgbd )-1;
};return _fabb ;};func (_begfed *textTable )depth ()float64 {_bfcbd :=1e10;for _fccgce :=0;_fccgce < _begfed ._bbfgf ;_fccgce ++{_bfed :=_begfed .get (_fccgce ,0);if _bfed ==nil ||_bfed ._ddda {continue ;};_bfcbd =_e .Min (_bfcbd ,_bfed .depth ());};return _bfcbd ;
};func _ge (_ab int )bool {return (_ab &1)==0};func (_gbbcea *textTable )bbox ()_bd .PdfRectangle {return _gbbcea .PdfRectangle };func (_bebf rulingList )aligned ()bool {if len (_bebf )< 2{return false ;};_ddeff :=make (map[*ruling ]int );_ddeff [_bebf [0]]=0;
for _ ,_cbeec :=range _bebf [1:]{_ebcc :=false ;for _adbdc :=range _ddeff {if _cbeec .gridIntersecting (_adbdc ){_ddeff [_adbdc ]++;_ebcc =true ;break ;};};if !_ebcc {_ddeff [_cbeec ]=0;};};_fbgc :=0;for _ ,_gfac :=range _ddeff {if _gfac ==0{_fbgc ++;};
};_bdga :=float64 (_fbgc )/float64 (len (_bebf ));_aeba :=_bdga <=1.0-_egda ;if _babf {_fb .Log .Info ("\u0061\u006c\u0069\u0067\u006e\u0065\u0064\u003d\u0025\u0074\u0020\u0075\u006em\u0061\u0074\u0063\u0068\u0065\u0064=\u0025\u002e\u0032\u0066\u003d\u0025\u0064\u002f\u0025\u0064\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_aeba ,_bdga ,_fbgc ,len (_bebf ),_bebf .String ());
};return _aeba ;};func (_accfe gridTile )numBorders ()int {_dfgb :=0;if _accfe ._acda {_dfgb ++;};if _accfe ._aedfa {_dfgb ++;};if _accfe ._dbbe {_dfgb ++;};if _accfe ._ffcfe {_dfgb ++;};return _dfgb ;};

// GetContentStreamOps returns the contentStreamOps field of `pt`.
func (_dbb *PageText )GetContentStreamOps ()*_ad .ContentStreamOperations {return _dbb ._cgcb };func _affc (_bedd ,_decag _ga .Point )bool {_gfdgc :=_e .Abs (_bedd .X -_decag .X );_ccbb :=_e .Abs (_bedd .Y -_decag .Y );return _gbabb (_ccbb ,_gfdgc );};
func _cbacfe (_cedbg ,_faggb ,_bcce float64 )rulingKind {if _cedbg >=_bcce &&_gbabb (_faggb ,_cedbg ){return _fdec ;};if _faggb >=_bcce &&_gbabb (_cedbg ,_faggb ){return _bbee ;};return _febb ;};type rectRuling struct{_ffcef rulingKind ;_adfaf markKind ;
_gf .Color ;_bd .PdfRectangle ;};func _afcda (_eccb []*textLine )map[float64 ][]*textLine {_a .Slice (_eccb ,func (_fggcf ,_acgf int )bool {return _eccb [_fggcf ]._becg < _eccb [_acgf ]._becg });_fced :=map[float64 ][]*textLine {};for _ ,_gafdf :=range _eccb {_aacg :=_aaadg (_gafdf );
_aacg =_e .Round (_aacg );_fced [_aacg ]=append (_fced [_aacg ],_gafdf );};return _fced ;};func _cbfg (_ffagb _bd .PdfRectangle )*ruling {return &ruling {_egagd :_bbee ,_gabcd :_ffagb .Llx ,_cdcd :_ffagb .Lly ,_dcgf :_ffagb .Ury };};func (_fdffb *textTable )subdivide ()*textTable {_fdffb .logComposite ("\u0073u\u0062\u0064\u0069\u0076\u0069\u0064e");
_cabbg :=_fdffb .compositeRowCorridors ();_dccdd :=_fdffb .compositeColCorridors ();if _deef {_fb .Log .Info ("\u0073u\u0062\u0064i\u0076\u0069\u0064\u0065:\u000a\u0009\u0072o\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s=\u0025\u0073\u000a\t\u0063\u006fl\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073=\u0025\u0073",_babga (_cabbg ),_babga (_dccdd ));
};if len (_cabbg )==0||len (_dccdd )==0{return _fdffb ;};_aaedd (_cabbg );_aaedd (_dccdd );if _deef {_fb .Log .Info ("\u0073\u0075\u0062\u0064\u0069\u0076\u0069\u0064\u0065\u0020\u0066\u0069\u0078\u0065\u0064\u003a\u000a\u0009r\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073\u003d\u0025\u0073\u000a\u0009\u0063\u006f\u006cC\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d\u0025\u0073",_babga (_cabbg ),_babga (_dccdd ));
};_dacd ,_cgfb :=_efca (_fdffb ._gfcf ,_cabbg );_eccdb ,_aadef :=_efca (_fdffb ._bbfgf ,_dccdd );_aafea :=make (map[uint64 ]*textPara ,_aadef *_cgfb );_dfgdf :=&textTable {PdfRectangle :_fdffb .PdfRectangle ,_deagb :_fdffb ._deagb ,_gfcf :_cgfb ,_bbfgf :_aadef ,_fdbac :_aafea };
if _deef {_fb .Log .Info ("\u0073\u0075b\u0064\u0069\u0076\u0069\u0064\u0065\u003a\u0020\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0063\u0065\u006c\u006c\u0073\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0079\u004f\u0066\u0066\u0073\u0065\u0074\u0073=\u0025\u002b\u0076\u000a"+"\u0009\u0078\u004f\u0066\u0066\u0073\u0065\u0074\u0073\u003d\u0025\u002b\u0076",_fdffb ._bbfgf ,_fdffb ._gfcf ,_aadef ,_cgfb ,_babga (_cabbg ),_babga (_dccdd ),_dacd ,_eccdb );
};for _cfbe :=0;_cfbe < _fdffb ._gfcf ;_cfbe ++{_ccdc :=_dacd [_cfbe ];for _aebaf :=0;_aebaf < _fdffb ._bbfgf ;_aebaf ++{_deecg :=_eccdb [_aebaf ];if _deef {_cbg .Printf ("\u0025\u0036\u0064\u002c %\u0032\u0064\u003a\u0020\u0078\u0030\u003d\u0025\u0064\u0020\u0079\u0030\u003d\u0025d\u000a",_aebaf ,_cfbe ,_deecg ,_ccdc );
};_fcgee ,_adgfb :=_fdffb ._bfeb [_eebg (_aebaf ,_cfbe )];if !_adgfb {continue ;};_eeca :=_fcgee .split (_cabbg [_cfbe ],_dccdd [_aebaf ]);for _fgdb :=0;_fgdb < _eeca ._gfcf ;_fgdb ++{for _gccbe :=0;_gccbe < _eeca ._bbfgf ;_gccbe ++{_defgf :=_eeca .get (_gccbe ,_fgdb );
_dfgdf .put (_deecg +_gccbe ,_ccdc +_fgdb ,_defgf );if _deef {_cbg .Printf ("\u0025\u0038\u0064\u002c\u0020\u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_deecg +_gccbe ,_ccdc +_fgdb ,_defgf );};};};};};return _dfgdf ;};func (_edae paraList )merge ()*textPara {_fb .Log .Trace ("\u006d\u0065\u0072\u0067\u0065:\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_edae ));
if len (_edae )==0{return nil ;};_edae .sortReadingOrder ();_bdge :=_edae [0].PdfRectangle ;_feab :=_edae [0]._bgcc ;for _ ,_fgadc :=range _edae [1:]{_bdge =_agcf (_bdge ,_fgadc .PdfRectangle );_feab =append (_feab ,_fgadc ._bgcc ...);};return _cgaee (_bdge ,_feab );
};func _egcd (_gfcd *list )[]*list {var _dggf []*list ;for _ ,_gabbd :=range _gfcd ._fgcb {switch _gabbd ._dfb {case "\u004c\u0049":_edeg :=_gcac (_gabbd );_bfdec :=_egcd (_gabbd );_gccbg :=_fbeb (_edeg ,"\u0062\u0075\u006c\u006c\u0065\u0074",_bfdec );
_effe :=_egdd (_edeg ,"");_gccbg ._fcgc =_effe ;_dggf =append (_dggf ,_gccbg );case "\u004c\u0042\u006fd\u0079":return _egcd (_gabbd );case "\u004c":_adbb :=_egcd (_gabbd );_dggf =append (_dggf ,_adbb ...);return _dggf ;};};return _dggf ;};func (_acdf paraList )llyOrdering ()[]int {_dgaa :=make ([]int ,len (_acdf ));
for _ededd :=range _acdf {_dgaa [_ededd ]=_ededd ;};_a .SliceStable (_dgaa ,func (_aagb ,_agcca int )bool {_cecg ,_dadd :=_dgaa [_aagb ],_dgaa [_agcca ];return _acdf [_cecg ].Lly < _acdf [_dadd ].Lly ;});return _dgaa ;};func (_gefdcg *textLine )endsInHyphen ()bool {_deafe :=_gefdcg ._abcg [len (_gefdcg ._abcg )-1];
_ggda :=_deafe ._ffdcg ;_gbae ,_ecgb :=_g .DecodeLastRuneInString (_ggda );if _ecgb <=0||!_cg .Is (_cg .Hyphen ,_gbae ){return false ;};if _deafe ._cgbdf &&_afbb (_ggda ){return true ;};return _afbb (_gefdcg .text ());};func (_caead rulingList )toGrids ()[]rulingList {if _babf {_fb .Log .Info ("t\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0025\u0073",_caead );
};_eeade :=_caead .intersections ();if _babf {_fb .Log .Info ("\u0074\u006f\u0047r\u0069\u0064\u0073\u003a \u0076\u0065\u0063\u0073\u003d\u0025\u0064 \u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003d\u0025\u0064\u0020",len (_caead ),len (_eeade ));
for _ ,_bccg :=range _dacgg (_eeade ){_cbg .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_bccg ,_eeade [_bccg ]);};};_fcgb :=make (map[int ]intSet ,len (_caead ));for _ebbad :=range _caead {_gbeec :=_caead .connections (_eeade ,_ebbad );if len (_gbeec )> 0{_fcgb [_ebbad ]=_gbeec ;
};};if _babf {_fb .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0063\u006fn\u006e\u0065\u0063\u0074s=\u0025\u0064",len (_fcgb ));for _ ,_debd :=range _dacgg (_fcgb ){_cbg .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_debd ,_fcgb [_debd ]);
};};_bdgc :=_egaf (len (_caead ),func (_gdgdc ,_cgff int )bool {_dbbac ,_cdfc :=len (_fcgb [_gdgdc ]),len (_fcgb [_cgff ]);if _dbbac !=_cdfc {return _dbbac > _cdfc ;};return _caead .comp (_gdgdc ,_cgff );});if _babf {_fb .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u006f\u0072d\u0065\u0072\u0069\u006eg=\u0025\u0076",_bdgc );
};_bfgcb :=[][]int {{_bdgc [0]}};_abfca :for _ ,_ebfeb :=range _bdgc [1:]{for _aadf ,_cgacb :=range _bfgcb {for _ ,_cddc :=range _cgacb {if _fcgb [_cddc ].has (_ebfeb ){_bfgcb [_aadf ]=append (_cgacb ,_ebfeb );continue _abfca ;};};};_bfgcb =append (_bfgcb ,[]int {_ebfeb });
};if _babf {_fb .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020i\u0067\u0072i\u0064\u0073\u003d\u0025\u0076",_bfgcb );};_a .SliceStable (_bfgcb ,func (_cedfd ,_gfcae int )bool {return len (_bfgcb [_cedfd ])> len (_bfgcb [_gfcae ])});for _ ,_dcdc :=range _bfgcb {_a .Slice (_dcdc ,func (_fgee ,_ffgdc int )bool {return _caead .comp (_dcdc [_fgee ],_dcdc [_ffgdc ])});
};_bbcc :=make ([]rulingList ,len (_bfgcb ));for _deaa ,_cbfgg :=range _bfgcb {_fgaa :=make (rulingList ,len (_cbfgg ));for _cgbfe ,_ccdac :=range _cbfgg {_fgaa [_cgbfe ]=_caead [_ccdac ];};_bbcc [_deaa ]=_fgaa ;};if _babf {_fb .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020g\u0072\u0069d\u0073\u003d\u0025\u002b\u0076",_bbcc );
};var _eeefg []rulingList ;for _ ,_dbag :=range _bbcc {if _ffab ,_ebdaf :=_dbag .isActualGrid ();_ebdaf {_dbag =_ffab ;_dbag =_dbag .snapToGroups ();_eeefg =append (_eeefg ,_dbag );};};if _babf {_eafd ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0061\u0063t\u0075\u0061\u006c\u0047ri\u0064\u0073",_eeefg );
_fb .Log .Info ("\u0074\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0067\u0072\u0069\u0064\u0073\u003d%\u0064 \u0061\u0063\u0074\u0075\u0061\u006c\u0047\u0072\u0069\u0064\u0073\u003d\u0025\u0064",len (_bbcc ),len (_eeefg ));};return _eeefg ;};func (_edfc *textTable )newTablePara ()*textPara {_dged :=_edfc .computeBbox ();
_bgcef :=&textPara {PdfRectangle :_dged ,_fcegg :_dged ,_dgega :_edfc };if _deef {_fb .Log .Info ("\u006e\u0065w\u0054\u0061\u0062l\u0065\u0050\u0061\u0072\u0061\u003a\u0020\u0025\u0073",_bgcef );};return _bgcef ;};func (_caeee paraList )list ()[]*list {var _ebfgc []*textLine ;
var _cccg []*textLine ;for _ ,_dgbbd :=range _caeee {_agbc :=_dgbbd .getListLines ();_ebfgc =append (_ebfgc ,_agbc ...);_cccg =append (_cccg ,_dgbbd ._bgcc ...);};_bcc :=_afcda (_ebfgc );_ffda :=_bdaf (_cccg ,_bcc );return _ffda ;};var _gd =[]string {"\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u004f\u004e","\u004f\u004e","\u0041\u004c","\u0045\u0054","\u0045\u0054","\u0041\u004c","\u0043\u0053","\u0041\u004c","\u004f\u004e","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0045\u0054","\u0041\u004e","\u0041\u004e","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004e","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c"};
func (_fbcg *subpath )add (_bbcg ..._ga .Point ){_fbcg ._gcgc =append (_fbcg ._gcgc ,_bbcg ...)};func (_bcee *ruling )gridIntersecting (_aaec *ruling )bool {return _abgd (_bcee ._cdcd ,_aaec ._cdcd )&&_abgd (_bcee ._dcgf ,_aaec ._dcgf );};func _fagbg (_eddc *textLine )bool {_gdbg :=true ;
_edebd :=-1;for _ ,_acbc :=range _eddc ._abcg {for _ ,_gdga :=range _acbc ._gfdga {_afabg :=_gdga ._cefd ;if _edebd ==-1{_edebd =_afabg ;}else {if _edebd !=_afabg {_gdbg =false ;break ;};};};};return _gdbg ;};func (_cbgd paraList )eventNeighbours (_cccc []event )map[*textPara ][]int {_a .Slice (_cccc ,func (_aeffc ,_cggac int )bool {_bfdda ,_gddea :=_cccc [_aeffc ],_cccc [_cggac ];
_ccfab ,_fbbae :=_bfdda ._gcgb ,_gddea ._gcgb ;if _ccfab !=_fbbae {return _ccfab < _fbbae ;};if _bfdda ._egefd !=_gddea ._egefd {return _bfdda ._egefd ;};return _aeffc < _cggac ;});_bbbb :=make (map[int ]intSet );_adbcb :=make (intSet );for _ ,_fdab :=range _cccc {if _fdab ._egefd {_bbbb [_fdab ._fagac ]=make (intSet );
for _fcaa :=range _adbcb {if _fcaa !=_fdab ._fagac {_bbbb [_fdab ._fagac ].add (_fcaa );_bbbb [_fcaa ].add (_fdab ._fagac );};};_adbcb .add (_fdab ._fagac );}else {_adbcb .del (_fdab ._fagac );};};_aeeba :=map[*textPara ][]int {};for _ggac ,_egec :=range _bbbb {_gebfb :=_cbgd [_ggac ];
if len (_egec )==0{_aeeba [_gebfb ]=nil ;continue ;};_befa :=make ([]int ,len (_egec ));_gddgff :=0;for _ebcef :=range _egec {_befa [_gddgff ]=_ebcef ;_gddgff ++;};_aeeba [_gebfb ]=_befa ;};return _aeeba ;};

// Options extractor options.
type Options struct{

// DisableDocumentTags specifies whether to use the document tags during list extraction.
DisableDocumentTags bool ;

// ApplyCropBox will extract page text based on page cropbox if set to `true`.
ApplyCropBox bool ;

// UseSimplerExtractionProcess will skip topological text ordering and table processing.
//
// NOTE: While normally the extra processing is beneficial, it can also lead to problems when it does not work.
// Thus it is a flag to allow the user to control this process.
//
// Skipping some extraction processes would also lead to the reduced processing time.
UseSimplerExtractionProcess bool ;

// IncludeAnnotations specifies whether to include annotations in the extraction process, default value is `false`.
IncludeAnnotations bool ;};var _gccb string ="\u005e\u005b\u0061\u002d\u007a\u0041\u002dZ\u005d\u0028\u005c)\u007c\u005c\u002e)\u007c\u005e[\u005c\u0064\u005d\u002b\u0028\u005c)\u007c\\.\u0029\u007c\u005e\u005c\u0028\u005b\u0061\u002d\u007a\u0041\u002d\u005a\u005d\u005c\u0029\u007c\u005e\u005c\u0028\u005b\u005c\u0064\u005d\u002b\u005c\u0029";
func _gafdg (_egbb []TextMark ,_eddeg *TextTable )[]TextMark {var _dddf []TextMark ;for _ ,_adad :=range _egbb {_adad ._ffgac =true ;_adad ._ggecd =_eddeg ;_dddf =append (_dddf ,_adad );};return _dddf ;};func _gbcc (_edeb *wordBag ,_ffec int )*textLine {_bdae :=_edeb .firstWord (_ffec );
_cced :=textLine {PdfRectangle :_bdae .PdfRectangle ,_efba :_bdae ._efce ,_becg :_bdae ._gabaag };_cced .pullWord (_edeb ,_bdae ,_ffec );return &_cced ;};func _ddcc (_fadf []*wordBag )[]*wordBag {if len (_fadf )<=1{return _fadf ;};if _fdff {_fb .Log .Info ("\u006d\u0065\u0072\u0067\u0065\u0057\u006f\u0072\u0064B\u0061\u0067\u0073\u003a");
};_a .Slice (_fadf ,func (_dbac ,_bbce int )bool {_dceb ,_aece :=_fadf [_dbac ],_fadf [_bbce ];_cbce :=_dceb .Width ()*_dceb .Height ();_ggcde :=_aece .Width ()*_aece .Height ();if _cbce !=_ggcde {return _cbce > _ggcde ;};if _dceb .Height ()!=_aece .Height (){return _dceb .Height ()> _aece .Height ();
};return _dbac < _bbce ;});var _gefb []*wordBag ;_ccbd :=make (intSet );for _daca :=0;_daca < len (_fadf );_daca ++{if _ccbd .has (_daca ){continue ;};_dabe :=_fadf [_daca ];for _baac :=_daca +1;_baac < len (_fadf );_baac ++{if _ccbd .has (_daca ){continue ;
};_bcdc :=_fadf [_baac ];_cceeg :=_dabe .PdfRectangle ;_cceeg .Llx -=_dabe ._dagd ;if _bga (_cceeg ,_bcdc .PdfRectangle ){_dabe .absorb (_bcdc );_ccbd .add (_baac );};};_gefb =append (_gefb ,_dabe );};if len (_fadf )!=len (_gefb )+len (_ccbd ){_fb .Log .Error ("\u006d\u0065\u0072ge\u0057\u006f\u0072\u0064\u0042\u0061\u0067\u0073\u003a \u0025d\u2192%\u0064 \u0061\u0062\u0073\u006f\u0072\u0062\u0065\u0064\u003d\u0025\u0064",len (_fadf ),len (_gefb ),len (_ccbd ));
};return _gefb ;};func _gfaa (_bgfd map[float64 ]gridTile )[]float64 {_eeed :=make ([]float64 ,0,len (_bgfd ));for _ebgb :=range _bgfd {_eeed =append (_eeed ,_ebgb );};_a .Float64s (_eeed );return _eeed ;};func _ceba (_caggf []compositeCell )[]float64 {var _aaedg []*textLine ;
_ebfc :=0;for _ ,_defe :=range _caggf {_ebfc +=len (_defe .paraList );_aaedg =append (_aaedg ,_defe .lines ()...);};_a .Slice (_aaedg ,func (_gbag ,_ffagg int )bool {_deefe ,_cfde :=_aaedg [_gbag ],_aaedg [_ffagg ];_affce ,_cded :=_deefe ._becg ,_cfde ._becg ;
if !_bfaeb (_affce -_cded ){return _affce < _cded ;};return _deefe .Llx < _cfde .Llx ;});if _deef {_cbg .Printf ("\u0020\u0020\u0020 r\u006f\u0077\u0042\u006f\u0072\u0064\u0065\u0072\u0073:\u0020%\u0064 \u0070a\u0072\u0061\u0073\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",_ebfc ,len (_aaedg ));
for _bfcbf ,_cgbff :=range _aaedg {_cbg .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_bfcbf ,_cgbff );};};var _cfee []float64 ;_dfgcf :=_aaedg [0];var _gedf [][]*textLine ;_cgcg :=[]*textLine {_dfgcf };for _gdbbb ,_cagd :=range _aaedg [1:]{if _cagd .Ury < _dfgcf .Lly {_feabg :=0.5*(_cagd .Ury +_dfgcf .Lly );
if _deef {_cbg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u003c\u0020\u0025\u0036.\u0032f\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u003d\u0025\u0036\u002e\u0032\u0066\u000a"+"\u0009\u0020\u0071\u003d\u0025\u0073\u000a\u0009\u0020p\u003d\u0025\u0073\u000a",_gdbbb ,_cagd .Ury ,_dfgcf .Lly ,_feabg ,_dfgcf ,_cagd );
};_cfee =append (_cfee ,_feabg );_gedf =append (_gedf ,_cgcg );_cgcg =nil ;};_cgcg =append (_cgcg ,_cagd );if _cagd .Lly < _dfgcf .Lly {_dfgcf =_cagd ;};};if len (_cgcg )> 0{_gedf =append (_gedf ,_cgcg );};if _deef {_cbg .Printf (" \u0020\u0020\u0020\u0020\u0020\u0020 \u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073\u003d%\u0036.\u0032\u0066\u000a",_cfee );
};if _deef {_fb .Log .Info ("\u0072\u006f\u0077\u003d\u0025\u0064",len (_caggf ));for _cgdd ,_ffeaf :=range _caggf {_cbg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cgdd ,_ffeaf );};_fb .Log .Info ("\u0067r\u006f\u0075\u0070\u0073\u003d\u0025d",len (_gedf ));
for _fdccd ,_cdgce :=range _gedf {_cbg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0064\u000a",_fdccd ,len (_cdgce ));for _ffeb ,_gdbbe :=range _cdgce {_cbg .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_ffeb ,_gdbbe );};};};_bfacca :=true ;
for _fbbc ,_deff :=range _gedf {_dgcfe :=true ;for _bfebd ,_cddcc :=range _caggf {if _deef {_cbg .Printf ("\u0020\u0020\u0020\u007e\u007e\u007e\u0067\u0072\u006f\u0075\u0070\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0020\u0063\u0065\u006cl\u0020\u0025\u0064\u0020\u006ff\u0020\u0025d\u0020\u0025\u0073\u000a",_fbbc ,len (_gedf ),_bfebd ,len (_caggf ),_cddcc );
};if !_cddcc .hasLines (_deff ){if _deef {_cbg .Printf ("\u0020\u0020\u0020\u0021\u0021\u0021\u0067\u0072\u006f\u0075\u0070\u0020\u0025d\u0020\u006f\u0066\u0020\u0025\u0064 \u0063\u0065\u006c\u006c\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064 \u004f\u0055\u0054\u000a",_fbbc ,len (_gedf ),_bfebd ,len (_caggf ));
};_dgcfe =false ;break ;};};if !_dgcfe {_bfacca =false ;break ;};};if !_bfacca {if _deef {_fb .Log .Info ("\u0072\u006f\u0077\u0020\u0063o\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u0020\u0064\u006f\u006e\u0027\u0074 \u0073\u0070\u0061\u006e\u0020\u0061\u006c\u006c\u0020\u0063\u0065\u006c\u006c\u0073\u0020\u0069\u006e\u0020\u0072\u006f\u0077\u002e\u0020\u0069\u0067\u006e\u006f\u0072\u0069\u006eg");
};_cfee =nil ;};if _deef &&_cfee !=nil {_cbg .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u002a\u002a*\u0072\u006f\u0077\u0043\u006f\u0072\u0072i\u0064\u006f\u0072\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u000a",_cfee );};return _cfee ;};
func _bdgcb (_bbda map[int ][]float64 )[]int {_debdd :=make ([]int ,len (_bbda ));_bffg :=0;for _agcbde :=range _bbda {_debdd [_bffg ]=_agcbde ;_bffg ++;};_a .Ints (_debdd );return _debdd ;};func _begg (_gfaga _bd .PdfRectangle )*ruling {return &ruling {_egagd :_bbee ,_gabcd :_gfaga .Urx ,_cdcd :_gfaga .Lly ,_dcgf :_gfaga .Ury };
};func (_gfedb *textTable )emptyCompositeColumn (_dfcfd int )bool {for _cagfa :=0;_cagfa < _gfedb ._gfcf ;_cagfa ++{if _eggfa ,_fdecb :=_gfedb ._bfeb [_eebg (_dfcfd ,_cagfa )];_fdecb {if len (_eggfa .paraList )> 0{return false ;};};};return true ;};

// String returns a description of `w`.
func (_gffdb *textWord )String ()string {return _cbg .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_gffdb ._gabaag ,_gffdb .PdfRectangle ,_gffdb ._efce ,_gffdb ._ffdcg );
};

// Extractor stores and offers functionality for extracting content from PDF pages.
type Extractor struct{_fbc string ;_fed *_bd .PdfPageResources ;_ccag _bd .PdfRectangle ;_gec *_bd .PdfRectangle ;_bgc map[string ]fontEntry ;_ceg map[string ]textResult ;_afc map[string ]textResult ;_ae int64 ;_gag int ;_gaae *Options ;_bcb *_cf .PdfObject ;
_bbe _cf .PdfObject ;_adf []*_bd .PdfAnnotation ;};func (_afgcbb paraList )log (_eaef string ){if !_abg {return ;};_fb .Log .Info ("%\u0038\u0073\u003a\u0020\u0025\u0064 \u0070\u0061\u0072\u0061\u0073\u0020=\u003d\u003d\u003d\u003d\u003d\u003d\u002d-\u002d\u002d\u002d\u002d\u002d\u003d\u003d\u003d\u003d\u003d=\u003d",_eaef ,len (_afgcbb ));
for _dfef ,_abbgf :=range _afgcbb {if _abbgf ==nil {continue ;};_gcgec :=_abbgf .text ();_gbegg :="\u0020\u0020";if _abbgf ._dgega !=nil {_gbegg =_cbg .Sprintf ("\u005b%\u0064\u0078\u0025\u0064\u005d",_abbgf ._dgega ._bbfgf ,_abbgf ._dgega ._gfcf );};_cbg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0025s\u0020\u0025\u0071\u000a",_dfef ,_abbgf .PdfRectangle ,_gbegg ,_ddfcg (_gcgec ,50));
};};func _bgfdd (_fbcac string )(string ,bool ){_aeea :=[]rune (_fbcac );if len (_aeea )!=1{return "",false ;};_gabaa ,_gfgd :=_gbebf [_aeea [0]];return _gabaa ,_gfgd ;};func _baab (_eedfe _bd .PdfRectangle ,_gdeeg ,_fgadf ,_cbdd ,_edgacb *ruling )gridTile {_gecgg :=_eedfe .Llx ;
_ecag :=_eedfe .Urx ;_edbg :=_eedfe .Lly ;_fccce :=_eedfe .Ury ;return gridTile {PdfRectangle :_eedfe ,_acda :_gdeeg !=nil &&_gdeeg .encloses (_edbg ,_fccce ),_aedfa :_fgadf !=nil &&_fgadf .encloses (_edbg ,_fccce ),_dbbe :_cbdd !=nil &&_cbdd .encloses (_gecgg ,_ecag ),_ffcfe :_edgacb !=nil &&_edgacb .encloses (_gecgg ,_ecag )};
};func (_ecggd lineRuling )asRuling ()(*ruling ,bool ){_gfedaf :=ruling {_egagd :_ecggd ._addf ,Color :_ecggd .Color ,_aeecd :_fafd };switch _ecggd ._addf {case _bbee :_gfedaf ._gabcd =_ecggd .xMean ();_gfedaf ._cdcd =_e .Min (_ecggd ._affd .Y ,_ecggd ._ceea .Y );
_gfedaf ._dcgf =_e .Max (_ecggd ._affd .Y ,_ecggd ._ceea .Y );case _fdec :_gfedaf ._gabcd =_ecggd .yMean ();_gfedaf ._cdcd =_e .Min (_ecggd ._affd .X ,_ecggd ._ceea .X );_gfedaf ._dcgf =_e .Max (_ecggd ._affd .X ,_ecggd ._ceea .X );default:_fb .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_ecggd ._addf );
return nil ,false ;};return &_gfedaf ,true ;};func _cfcba (_ecgbb []int )[]int {_cbafa :=make ([]int ,len (_ecgbb ));for _baec ,_dafg :=range _ecgbb {_cbafa [len (_ecgbb )-1-_baec ]=_dafg ;};return _cbafa ;};func (_dgg *shapesState )newSubPath (){_dgg .clearPath ();
if _gcc {_fb .Log .Info ("\u006e\u0065\u0077\u0053\u0075\u0062\u0050\u0061\u0074h\u003a\u0020\u0025\u0073",_dgg );};};func (_dgbde gridTile )contains (_degee _bd .PdfRectangle )bool {if _dgbde .numBorders ()< 3{return false ;};if _dgbde ._acda &&_degee .Llx < _dgbde .Llx -_aabg {return false ;
};if _dgbde ._aedfa &&_degee .Urx > _dgbde .Urx +_aabg {return false ;};if _dgbde ._dbbe &&_degee .Lly < _dgbde .Lly -_aabg {return false ;};if _dgbde ._ffcfe &&_degee .Ury > _dgbde .Ury +_aabg {return false ;};return true ;};func _bfaeb (_fgce float64 )bool {return _e .Abs (_fgce )< _decb };
func _fgd (_gaafg ,_cbcc bounded )float64 {_faac :=_bcbd (_gaafg ,_cbcc );if !_bfaeb (_faac ){return _faac ;};return _fcdf (_gaafg ,_cbcc );};

// String returns a description of `t`.
func (_ggfdda *textTable )String ()string {return _cbg .Sprintf ("\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0025\u0074",_ggfdda ._bbfgf ,_ggfdda ._gfcf ,_ggfdda ._deagb );};

// NewWithOptions an Extractor instance for extracting content from the input PDF page with options.
func NewWithOptions (page *_bd .PdfPage ,options *Options )(*Extractor ,error ){const _daf ="\u0065x\u0074\u0072\u0061\u0063\u0074\u006f\u0072\u002e\u004e\u0065\u0077W\u0069\u0074\u0068\u004f\u0070\u0074\u0069\u006f\u006e\u0073";_bgg ,_dce :=page .GetAllContentStreams ();
if _dce !=nil {return nil ,_dce ;};_fce ,_edcd :=page .GetStructTreeRoot ();if !_edcd {_fb .Log .Debug ("T\u0068\u0065\u0020\u0070\u0064\u0066\u0020\u0064\u006f\u0063\u0075\u006d\u0065\u006e\u0074\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0074\u0061\u0067g\u0065d\u002e\u0020\u0053\u0074r\u0075\u0063t\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e\u0027\u0074\u0020\u0065\u0078\u0069\u0073\u0074\u002e");
};_bbfcf :=page .GetContainingPdfObject ();_fbb ,_dce :=page .GetMediaBox ();if _dce !=nil {return nil ,_cbg .Errorf ("\u0065\u0078\u0074r\u0061\u0063\u0074\u006fr\u0020\u0072\u0065\u0071\u0075\u0069\u0072e\u0073\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u002e\u0020\u0025\u0076",_dce );
};_eec :=&Extractor {_fbc :_bgg ,_fed :page .Resources ,_ccag :*_fbb ,_gec :page .CropBox ,_bgc :map[string ]fontEntry {},_ceg :map[string ]textResult {},_afc :map[string ]textResult {},_gaae :options ,_bcb :_fce ,_bbe :_bbfcf };if _eec ._ccag .Llx > _eec ._ccag .Urx {_fb .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0058\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_eec ._ccag );
_eec ._ccag .Llx ,_eec ._ccag .Urx =_eec ._ccag .Urx ,_eec ._ccag .Llx ;};if _eec ._ccag .Lly > _eec ._ccag .Ury {_fb .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0059\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_eec ._ccag );
_eec ._ccag .Lly ,_eec ._ccag .Ury =_eec ._ccag .Ury ,_eec ._ccag .Lly ;};if _eec ._gaae !=nil {if _eec ._gaae .IncludeAnnotations {_eec ._adf ,_dce =page .GetAnnotations ();if _dce !=nil {_fb .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0067\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0061\u006e\u006e\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0073: \u0025\u0076",_dce );
};};};_ba .TrackUse (_daf );return _eec ,nil ;};func _cdd (_bace string ,_af bool ,_ac bool )BidiText {_de :="\u006c\u0074\u0072";if _ac {_de ="\u0074\u0074\u0062";}else if !_af {_de ="\u0072\u0074\u006c";};return BidiText {_gdg :_bace ,_fc :_de };};func (_faggg *wordBag )removeDuplicates (){if _adfg {_fb .Log .Info ("r\u0065m\u006f\u0076\u0065\u0044\u0075\u0070\u006c\u0069c\u0061\u0074\u0065\u0073: \u0025\u0071",_faggg .text ());
};for _ ,_aaca :=range _faggg .depthIndexes (){if len (_faggg ._acfg [_aaca ])==0{continue ;};_fdbf :=_faggg ._acfg [_aaca ][0];_fbba :=_bfbg *_fdbf ._efce ;_bcabg :=_fdbf ._gabaag ;for _ ,_gffd :=range _faggg .depthBand (_bcabg ,_bcabg +_fbba ){_bbbga :=map[*textWord ]struct{}{};
_badca :=_faggg ._acfg [_gffd ];for _ ,_bdcb :=range _badca {if _ ,_aebc :=_bbbga [_bdcb ];_aebc {continue ;};for _ ,_adebg :=range _badca {if _ ,_eeceb :=_bbbga [_adebg ];_eeceb {continue ;};if _adebg !=_bdcb &&_adebg ._ffdcg ==_bdcb ._ffdcg &&_e .Abs (_adebg .Llx -_bdcb .Llx )< _fbba &&_e .Abs (_adebg .Urx -_bdcb .Urx )< _fbba &&_e .Abs (_adebg .Lly -_bdcb .Lly )< _fbba &&_e .Abs (_adebg .Ury -_bdcb .Ury )< _fbba {_bbbga [_adebg ]=struct{}{};
};};};if len (_bbbga )> 0{_fadb :=0;for _ ,_befcg :=range _badca {if _ ,_fgeg :=_bbbga [_befcg ];!_fgeg {_badca [_fadb ]=_befcg ;_fadb ++;};};_faggg ._acfg [_gffd ]=_badca [:len (_badca )-len (_bbbga )];if len (_faggg ._acfg [_gffd ])==0{delete (_faggg ._acfg ,_gffd );
};};};};};func _ddfcg (_fbebe string ,_fggb int )string {if len (_fbebe )< _fggb {return _fbebe ;};return _fbebe [:_fggb ];};func _adaec (_cefdf map[float64 ]map[float64 ]gridTile )[]float64 {_bcfc :=make ([]float64 ,0,len (_cefdf ));_dddd :=make (map[float64 ]struct{},len (_cefdf ));
for _ ,_fdbag :=range _cefdf {for _edabd :=range _fdbag {if _ ,_cff :=_dddd [_edabd ];_cff {continue ;};_bcfc =append (_bcfc ,_edabd );_dddd [_edabd ]=struct{}{};};};_a .Float64s (_bcfc );return _bcfc ;};func (_gdca *textTable )toTextTable ()TextTable {if _deef {_fb .Log .Info ("t\u006fT\u0065\u0078\u0074\u0054\u0061\u0062\u006c\u0065:\u0020\u0025\u0064\u0020x \u0025\u0064",_gdca ._bbfgf ,_gdca ._gfcf );
};_dgfa :=make ([][]TableCell ,_gdca ._gfcf );for _fcfae :=0;_fcfae < _gdca ._gfcf ;_fcfae ++{_dgfa [_fcfae ]=make ([]TableCell ,_gdca ._bbfgf );for _deccd :=0;_deccd < _gdca ._bbfgf ;_deccd ++{_gbgee :=_gdca .get (_deccd ,_fcfae );if _gbgee ==nil {continue ;
};if _deef {_cbg .Printf ("\u0025\u0034\u0064 \u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_deccd ,_fcfae ,_gbgee );};_dgfa [_fcfae ][_deccd ].Text =_gbgee .text ();_deabb :=0;_dgfa [_fcfae ][_deccd ].Marks ._acag =_gbgee .toTextMarks (&_deabb );};
};_dgbe :=TextTable {W :_gdca ._bbfgf ,H :_gdca ._gfcf ,Cells :_dgfa };_dgbe .PdfRectangle =_gdca .bbox ();return _dgbe ;};func (_dffda *ruling )encloses (_ebbea ,_dddfe float64 )bool {return _dffda ._cdcd -_dgbg <=_ebbea &&_dddfe <=_dffda ._dcgf +_dgbg ;
};

// Elements returns the TextMarks in `ma`.
func (_ebe *TextMarkArray )Elements ()[]TextMark {return _ebe ._acag };var _fdee =_f .MustCompile ("\u005e\u005c\u0073\u002a\u0028\u005c\u0064\u002b\u005c\u002e\u003f|\u005b\u0049\u0069\u0076\u005d\u002b\u0029\u005c\u0073\u002a\\\u0029\u003f\u0024");func (_aeffa *wordBag )pullWord (_cefc *textWord ,_cace int ,_gcge map[int ]map[*textWord ]struct{}){_aeffa .PdfRectangle =_agcf (_aeffa .PdfRectangle ,_cefc .PdfRectangle );
if _cefc ._efce > _aeffa ._dagd {_aeffa ._dagd =_cefc ._efce ;};_aeffa ._acfg [_cace ]=append (_aeffa ._acfg [_cace ],_cefc );_gcge [_cace ][_cefc ]=struct{}{};};func (_fbff rulingList )toTilings ()(rulingList ,[]gridTiling ){_fbff .log ("\u0074o\u0054\u0069\u006c\u0069\u006e\u0067s");
if len (_fbff )==0{return nil ,nil ;};_fbff =_fbff .tidied ("\u0061\u006c\u006c");_fbff .log ("\u0074\u0069\u0064\u0069\u0065\u0064");_beaag :=_fbff .toGrids ();_baed :=make ([]gridTiling ,len (_beaag ));for _fegdb ,_fdfg :=range _beaag {_baed [_fegdb ]=_fdfg .asTiling ();
};return _fbff ,_baed ;};func (_eaga *wordBag )firstReadingIndex (_fbdf int )int {_dbbf :=_eaga .firstWord (_fbdf )._efce ;_ccabg :=float64 (_fbdf +1)*_bgbd ;_eaea :=_ccabg +_aeggg *_dbbf ;_cedfe :=_fbdf ;for _ ,_fddbd :=range _eaga .depthBand (_ccabg ,_eaea ){if _fcdf (_eaga .firstWord (_fddbd ),_eaga .firstWord (_cedfe ))< 0{_cedfe =_fddbd ;
};};return _cedfe ;};func (_ebacdc paraList )extractTables (_fded []gridTiling )paraList {if _deef {_fb .Log .Debug ("\u0065\u0078\u0074r\u0061\u0063\u0074\u0054\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_ebacdc ));
};if len (_ebacdc )< _cabe {return _ebacdc ;};_gbdbf :=_ebacdc .findTables (_fded );if _deef {_fb .Log .Info ("c\u006f\u006d\u0062\u0069\u006e\u0065d\u0020\u0074\u0061\u0062\u006c\u0065s\u0020\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_gbdbf ));
for _dggae ,_bfbgd :=range _gbdbf {_bfbgd .log (_cbg .Sprintf ("c\u006f\u006d\u0062\u0069\u006e\u0065\u0064\u0020\u0025\u0064",_dggae ));};};return _ebacdc .applyTables (_gbdbf );};

// PageTextOptions holds various options available in extraction process.
type PageTextOptions struct{_fbec bool ;_ageb bool ;};func (_cgda *textTable )computeBbox ()_bd .PdfRectangle {var _ecac _bd .PdfRectangle ;_dfbb :=false ;for _eeee :=0;_eeee < _cgda ._gfcf ;_eeee ++{for _gbaeb :=0;_gbaeb < _cgda ._bbfgf ;_gbaeb ++{_fgace :=_cgda .get (_gbaeb ,_eeee );
if _fgace ==nil {continue ;};if !_dfbb {_ecac =_fgace .PdfRectangle ;_dfbb =true ;}else {_ecac =_agcf (_ecac ,_fgace .PdfRectangle );};};};return _ecac ;};type textState struct{_ged float64 ;_eef float64 ;_cgec float64 ;_dgcg float64 ;_fge float64 ;_gbgg RenderMode ;
_geff float64 ;_bfb *_bd .PdfFont ;_beac _bd .PdfRectangle ;_abce int ;_eag int ;};func (_ebgbd *textTable )get (_eegg ,_bgddd int )*textPara {return _ebgbd ._fdbac [_eebg (_eegg ,_bgddd )]};func (_acdb rectRuling )checkWidth (_gagbd ,_edgac float64 )(float64 ,bool ){_fbggc :=_edgac -_gagbd ;
_egdb :=_fbggc <=_ebgc ;return _fbggc ,_egdb ;};func (_aaba *stateStack )push (_gde *textState ){_dbgg :=*_gde ;*_aaba =append (*_aaba ,&_dbgg )};func _gbgf (_gcgeb []structElement ,_eggcb map[int ][]*textLine ,_cagf _cf .PdfObject )[]*list {_ceab :=[]*list {};
for _ ,_bcdb :=range _gcgeb {_eggd :=_bcdb ._dgcbf ;_egfg :=int (_bcdb ._eeba );_abbg :=_bcdb ._cfdg ;_dabbf :=[]*textLine {};_ccfb :=[]*list {};_daad :=_bcdb ._bbfd ;_fbde ,_bgeca :=(_daad .(*_cf .PdfObjectReference ));if !_bgeca {_fb .Log .Debug ("\u0066\u0061\u0069l\u0065\u0064\u0020\u006f\u0074\u0020\u0063\u0061\u0073\u0074\u0020\u0074\u006f\u0020\u002a\u0063\u006f\u0072\u0065\u002e\u0050\u0064\u0066\u004f\u0062\u006a\u0065\u0063\u0074R\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");
};if _egfg !=-1&&_fbde !=nil {if _ddfd ,_dbcc :=_eggcb [_egfg ];_dbcc {if _dgbgb ,_bcdf :=_cagf .(*_cf .PdfIndirectObject );_bcdf {_bbbd :=_dgbgb .PdfObjectReference ;if _fd .DeepEqual (*_fbde ,_bbbd ){_dabbf =_ddfd ;};};};};if _eggd !=nil {_ccfb =_gbgf (_eggd ,_eggcb ,_cagf );
};_defg :=_fbeb (_dabbf ,_abbg ,_ccfb );_ceab =append (_ceab ,_defg );};return _ceab ;};func (_ebce *TextMarkArray )getTextMarkAtOffset (_feef int )*TextMark {for _ ,_dbab :=range _ebce ._acag {if _dbab .Offset ==_feef {return &_dbab ;};};return nil ;};
func _gcaff (_ccdf ,_gefgf _ga .Point )bool {_ebgeb :=_e .Abs (_ccdf .X -_gefgf .X );_gaff :=_e .Abs (_ccdf .Y -_gefgf .Y );return _gbabb (_ebgeb ,_gaff );};func (_dgaf paraList )llyRange (_gcga []int ,_gdbgc ,_gbab float64 )[]int {_gafge :=len (_dgaf );
if _gbab < _dgaf [_gcga [0]].Lly ||_gdbgc > _dgaf [_gcga [_gafge -1]].Lly {return nil ;};_fcdff :=_a .Search (_gafge ,func (_dgcc int )bool {return _dgaf [_gcga [_dgcc ]].Lly >=_gdbgc });_defc :=_a .Search (_gafge ,func (_eecd int )bool {return _dgaf [_gcga [_eecd ]].Lly > _gbab });
return _gcga [_fcdff :_defc ];};

// String returns a string describing `tm`.
func (_fefd TextMark )String ()string {_abbe :=_fefd .BBox ;var _eda string ;if _fefd .Font !=nil {_eda =_fefd .Font .String ();if len (_eda )> 50{_eda =_eda [:50]+"\u002e\u002e\u002e";};};var _bgdc string ;if _fefd .Meta {_bgdc ="\u0020\u002a\u004d\u002a";
};return _cbg .Sprintf ("\u007b\u0054\u0065\u0078t\u004d\u0061\u0072\u006b\u003a\u0020\u0025\u0064\u0020%\u0071\u003d\u0025\u0030\u0032\u0078\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e2\u0066\u0029\u0020\u0028\u00256\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0025\u0073\u007d",_fefd .Offset ,_fefd .Text ,[]rune (_fefd .Text ),_abbe .Llx ,_abbe .Lly ,_abbe .Urx ,_abbe .Ury ,_eda ,_bgdc );
};func (_efeg *shapesState )addPoint (_aec ,_cggc float64 ){_gbbd :=_efeg .establishSubpath ();_eecb :=_efeg .devicePoint (_aec ,_cggc );if _gbbd ==nil {_efeg ._dgbb =true ;_efeg ._gdee =_eecb ;}else {_gbbd .add (_eecb );};};func (_eedfa intSet )add (_bgeag int ){_eedfa [_bgeag ]=struct{}{}};
func _cdega (_adeg []_cf .PdfObject )(_fbbdff ,_befaa float64 ,_edfef error ){if len (_adeg )!=2{return 0,0,_cbg .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020o\u0066 \u0070\u0061\u0072\u0061\u006d\u0073\u003a \u0025\u0064",len (_adeg ));
};_cfffg ,_edfef :=_cf .GetNumbersAsFloat (_adeg );if _edfef !=nil {return 0,0,_edfef ;};return _cfffg [0],_cfffg [1],nil ;};func _afd (_ccg []rune )BidiText {_fac :=-1;_afg :=false ;_ddd :=true ;_gb :=len (_ccg );_ef :=make ([]string ,_gb );_bec :=make ([]string ,_gb );
if _gb ==0||_afg {return _cdd (string (_ccg ),_ddd ,_afg );};_fgac :=0;for _gaf ,_gg :=range _ccg {_ef [_gaf ]=string (_gg );_fe :="\u004c";if _gg <=0x00ff{_fe =_bf [_gg ];}else if 0x0590<=_gg &&_gg <=0x05f4{_fe ="\u0052";}else if 0x0600<=_gg &&_gg <=0x06ff{_bfg :=_gg &0xff;
if int (_bfg )>=len (_gd ){_b .Printf ("\u0042\u0069\u0064\u0069\u003a\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0055n\u0069c\u006f\u0064\u0065\u0020\u0063\u0068\u0061\u0072\u0061\u0063\u0074\u0065\u0072\u0020"+string (_gg ));};_fe =_gd [_gg &0xff];
}else if (0x0700<=_gg &&_gg <=0x08ac)||(0xfb50<=_gg &&_gg <=0xfdff)||(0xfe70<=_gg &&_gg <=0xfeff){_fe ="\u0041\u004c";};if _fe =="\u0052"||_fe =="\u0041\u004c"||_fe =="\u0041\u004e"{_fgac ++;};_bec [_gaf ]=_fe ;};if _fgac ==0{_ddd =true ;return _cdd (string (_ccg ),_ddd ,false );
};if _fac ==-1{if float64 (_fgac )/float64 (_gb )< 0.3&&_gb > 4{_ddd =true ;_fac =0;}else {_ddd =false ;_fac =1;};};var _eb []int ;for range _ccg {_eb =append (_eb ,_fac );};_abad :="\u004c";if _ccc (_fac ){_abad ="\u0052";};_bab :=_abad ;_dgb :=_bab ;
_fae :=_bab ;for _faa :=range _ccg {if _bec [_faa ]=="\u004e\u0053\u004d"{_bec [_faa ]=_fae ;}else {_fae =_bec [_faa ];};};_fae =_bab ;var _ecb string ;for _gaa :=range _ccg {_ecb =_bec [_gaa ];if _ecb =="\u0045\u004e"{if _fae =="\u0041\u004c"{_bec [_gaa ]="\u0041\u004e";
}else {_bec [_gaa ]="\u0045\u004e";};}else if _ecb =="\u0052"||_ecb =="\u004c"||_ecb =="\u0041\u004c"{_fae =_ecb ;};};for _dc :=range _ccg {_cca :=_bec [_dc ];if _cca =="\u0041\u004c"{_bec [_dc ]="\u0052";};};for _dbc :=1;_dbc < (len (_ccg )-1);_dbc ++{if _bec [_dbc ]=="\u0045\u0053"&&_bec [_dbc -1]=="\u0045\u004e"&&_bec [_dbc +1]=="\u0045\u004e"{_bec [_dbc ]="\u0045\u004e";
};if _bec [_dbc ]=="\u0043\u0053"&&(_bec [_dbc -1]=="\u0045\u004e"||_bec [_dbc -1]=="\u0041\u004e")&&_bec [_dbc +1]==_bec [_dbc -1]{_bec [_dbc ]=_bec [_dbc -1];};};for _ed :=range _ccg {if _bec [_ed ]=="\u0045\u004e"{for _cge :=_ed -1;_cge >=0;_cge --{if _bec [_cge ]!="\u0045\u0054"{break ;
};_bec [_cge ]="\u0045\u004e";};for _ecg :=_ed +1;_ecg < _gb ;_ecg ++{if _bec [_ecg ]!="\u0045\u0054"{break ;};_bec [_ecg ]="\u0045\u004e";};};};for _bg :=range _ccg {_dec :=_bec [_bg ];if _dec =="\u0057\u0053"||_dec =="\u0045\u0053"||_dec =="\u0045\u0054"||_dec =="\u0043\u0053"{_bec [_bg ]="\u004f\u004e";
};};_fae ="\u0073\u006f\u0072";for _gc :=range _ccg {_ca :=_bec [_gc ];if _ca =="\u0045\u004e"{if _fae =="\u004c"{_bec [_gc ]="\u004c";}else {_bec [_gc ]="\u0045\u004e";};}else if _ca =="\u0052"||_ca =="\u004c"{_fae =_ca ;};};for _ggb :=0;_ggb < len (_ccg );
_ggb ++{if _bec [_ggb ]=="\u004f\u004e"{_fbf :=_cfe (_bec ,_ggb +1,"\u004f\u004e");_ce :=_dgb ;if _ggb > 0{_ce =_bec [_ggb -1];};_ebb :=_dgb ;if _fbf +1< _gb {_ebb =_bec [_fbf +1];};if _ce !="\u004c"{_ce ="\u0052";};if _ebb !="\u004c"{_ebb ="\u0052";};
if _ce ==_ebb {_dg (_bec ,_ggb ,_fbf ,_ce );};_ggb =_fbf -1;};};for _edc :=range _ccg {if _bec [_edc ]=="\u004f\u004e"{_bec [_edc ]=_abad ;};};for _cba :=range _ccg {_fec :=_bec [_cba ];if _ge (_eb [_cba ]){if _fec =="\u0052"{_eb [_cba ]++;}else if _fec =="\u0041\u004e"||_fec =="\u0045\u004e"{_eb [_cba ]+=2;
};}else if _fec =="\u004c"||_fec =="\u0041\u004e"||_fec =="\u0045\u004e"{_eb [_cba ]++;};};_abe :=-1;_ggf :=99;var _ggd int ;for _cbac :=0;_cbac < len (_eb );_cbac ++{_ggd =_eb [_cbac ];if _abe < _ggd {_abe =_ggd ;};if _ggf > _ggd &&_ccc (_ggd ){_ggf =_ggd ;
};};for _ggc :=_abe ;_ggc >=_ggf ;_ggc --{_cce :=-1;for _gfa :=0;_gfa < len (_eb );_gfa ++{if _eb [_gfa ]< _ggc {if _cce >=0{_fa (_ef ,_cce ,_gfa );_cce =-1;};}else if _cce < 0{_cce =_gfa ;};};if _cce >=0{_fa (_ef ,_cce ,len (_eb ));};};for _bbfc :=0;_bbfc < len (_ef );
_bbfc ++{_eba :=_ef [_bbfc ];if _eba =="\u003c"||_eba =="\u003e"{_ef [_bbfc ]="";};};return _cdd (_bb .Join (_ef ,""),_ddd ,false );};

// ToText returns the page text as a single string.
// Deprecated: This function is deprecated and will be removed in a future major version. Please use
// Text() instead.
func (_acb PageText )ToText ()string {return _acb .Text ()};

// String returns a string describing the current state of the textState stack.
func (_dedd *stateStack )String ()string {_fega :=[]string {_cbg .Sprintf ("\u002d\u002d\u002d\u002d f\u006f\u006e\u0074\u0020\u0073\u0074\u0061\u0063\u006b\u003a\u0020\u0025\u0064",len (*_dedd ))};for _ecdc ,_fedf :=range *_dedd {_gff :="\u003c\u006e\u0069l\u003e";
if _fedf !=nil {_gff =_fedf .String ();};_fega =append (_fega ,_cbg .Sprintf ("\u0009\u0025\u0032\u0064\u003a\u0020\u0025\u0073",_ecdc ,_gff ));};return _bb .Join (_fega ,"\u000a");};

// BidiText represents a bidi text organized in its visual order
// with base direction of the text.
type BidiText struct{_gdg string ;_fc string ;};func (_gddgg *wordBag )maxDepth ()float64 {return _gddgg ._gcbg -_gddgg .Lly };

// RenderMode specifies the text rendering mode (Tmode), which determines whether showing text shall cause
// glyph outlines to be  stroked, filled, used as a clipping boundary, or some combination of the three.
// Stroking, filling, and clipping shall have the same effects for a text object as they do for a path object
// (see 8.5.3, "Path-Painting Operators" and 8.5.4, "Clipping Path Operators").
type RenderMode int ;func (_bgafd compositeCell )split (_gdfe ,_cafg []float64 )*textTable {_gbaea :=len (_gdfe )+1;_cbfc :=len (_cafg )+1;if _deef {_fb .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0043\u0065l\u006c\u002e\u0073\u0070l\u0069\u0074\u003a\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a\u0009\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025\u0073\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073=\u0025\u0036\u002e\u0032\u0066\u000a\t\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d%\u0036\u002e\u0032\u0066",_cbfc ,_gbaea ,_bgafd ,_gdfe ,_cafg );
_cbg .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073\u000a",len (_bgafd .paraList ));for _ffdbe ,_fefbb :=range _bgafd .paraList {_cbg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ffdbe ,_fefbb .String ());
};_cbg .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",len (_bgafd .lines ()));for _agdcb ,_fdgg :=range _bgafd .lines (){_cbg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_agdcb ,_fdgg );};};_gdfe =_ccaa (_gdfe ,_bgafd .Ury ,_bgafd .Lly );
_cafg =_ccaa (_cafg ,_bgafd .Llx ,_bgafd .Urx );_fcab :=make (map[uint64 ]*textPara ,_cbfc *_gbaea );_efgg :=textTable {_bbfgf :_cbfc ,_gfcf :_gbaea ,_fdbac :_fcab };_bcga :=_bgafd .paraList ;_a .Slice (_bcga ,func (_gebg ,_baad int )bool {_bcffc ,_deec :=_bcga [_gebg ],_bcga [_baad ];
_acaea ,_gecef :=_bcffc .Lly ,_deec .Lly ;if _acaea !=_gecef {return _acaea < _gecef ;};return _bcffc .Llx < _deec .Llx ;});_afbg :=make (map[uint64 ]_bd .PdfRectangle ,_cbfc *_gbaea );for _gadd ,_abca :=range _gdfe [1:]{_fbab :=_gdfe [_gadd ];for _eefe ,_eccd :=range _cafg [1:]{_cfaa :=_cafg [_eefe ];
_afbg [_eebg (_eefe ,_gadd )]=_bd .PdfRectangle {Llx :_cfaa ,Urx :_eccd ,Lly :_abca ,Ury :_fbab };};};if _deef {_fb .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0043\u0065l\u006c\u002e\u0073\u0070\u006c\u0069\u0074\u003a\u0020\u0072e\u0063\u0074\u0073");
_cbg .Printf ("\u0020\u0020\u0020\u0020");for _gcagf :=0;_gcagf < _cbfc ;_gcagf ++{_cbg .Printf ("\u0025\u0033\u0030\u0064\u002c\u0020",_gcagf );};_cbg .Println ();for _fefbbd :=0;_fefbbd < _gbaea ;_fefbbd ++{_cbg .Printf ("\u0020\u0020\u0025\u0032\u0064\u003a",_fefbbd );
for _dgfg :=0;_dgfg < _cbfc ;_dgfg ++{_cbg .Printf ("\u00256\u002e\u0032\u0066\u002c\u0020",_afbg [_eebg (_dgfg ,_fefbbd )]);};_cbg .Println ();};};_cedff :=func (_dbdf *textLine )(int ,int ){for _aaaec :=0;_aaaec < _gbaea ;_aaaec ++{for _aedba :=0;_aedba < _cbfc ;
_aedba ++{if _bga (_afbg [_eebg (_aedba ,_aaaec )],_dbdf .PdfRectangle ){return _aedba ,_aaaec ;};};};return -1,-1;};_edbb :=make (map[uint64 ][]*textLine ,_cbfc *_gbaea );for _ ,_agfe :=range _bcga .lines (){_bagfd ,_cfab :=_cedff (_agfe );if _bagfd < 0{continue ;
};_edbb [_eebg (_bagfd ,_cfab )]=append (_edbb [_eebg (_bagfd ,_cfab )],_agfe );};for _cgee :=0;_cgee < len (_gdfe )-1;_cgee ++{_gbbeb :=_gdfe [_cgee ];_cacf :=_gdfe [_cgee +1];for _gcde :=0;_gcde < len (_cafg )-1;_gcde ++{_debcf :=_cafg [_gcde ];_dbba :=_cafg [_gcde +1];
_bcba :=_bd .PdfRectangle {Llx :_debcf ,Urx :_dbba ,Lly :_cacf ,Ury :_gbbeb };_dbeg :=_edbb [_eebg (_gcde ,_cgee )];if len (_dbeg )==0{continue ;};_egfe :=_cgaee (_bcba ,_dbeg );_efgg .put (_gcde ,_cgee ,_egfe );};};return &_efgg ;};type pathSection struct{_ecea []*subpath ;
_gf .Color ;};func (_gbff rulingList )findPrimSec (_ageab ,_acbb float64 )*ruling {for _ ,_bece :=range _gbff {if _bfaeb (_bece ._gabcd -_ageab )&&_bece ._cdcd -_dgbg <=_acbb &&_acbb <=_bece ._dcgf +_dgbg {return _bece ;};};return nil ;};func _gbgab (_ffgba ,_gbcbg int )int {if _ffgba < _gbcbg {return _ffgba ;
};return _gbcbg ;};

// BBox returns the smallest axis-aligned rectangle that encloses all the TextMarks in `ma`.
func (_bacb *TextMarkArray )BBox ()(_bd .PdfRectangle ,bool ){var _fceea _bd .PdfRectangle ;_accc :=false ;for _ ,_egce :=range _bacb ._acag {if _egce .Meta ||_bggg (_egce .Text ){continue ;};if _accc {_fceea =_agcf (_fceea ,_egce .BBox );}else {_fceea =_egce .BBox ;
_accc =true ;};};return _fceea ,_accc ;};func (_fbbdd lineRuling )xMean ()float64 {return 0.5*(_fbbdd ._affd .X +_fbbdd ._ceea .X )};func (_dgff *textMark )inDiacriticArea (_gcgcb *textMark )bool {_ddeb :=_dgff .Llx -_gcgcb .Llx ;_ebbcf :=_dgff .Urx -_gcgcb .Urx ;
_dgcbc :=_dgff .Lly -_gcgcb .Lly ;return _e .Abs (_ddeb +_ebbcf )< _dgff .Width ()*_ebdca &&_e .Abs (_dgcbc )< _dgff .Height ()*_ebdca ;};func (_aagbg rulingList )bbox ()_bd .PdfRectangle {var _babge _bd .PdfRectangle ;if len (_aagbg )==0{_fb .Log .Error ("r\u0075\u006c\u0069\u006e\u0067\u004ci\u0073\u0074\u002e\u0062\u0062\u006f\u0078\u003a\u0020n\u006f\u0020\u0072u\u006ci\u006e\u0067\u0073");
return _bd .PdfRectangle {};};if _aagbg [0]._egagd ==_fdec {_babge .Llx ,_babge .Urx =_aagbg .secMinMax ();_babge .Lly ,_babge .Ury =_aagbg .primMinMax ();}else {_babge .Llx ,_babge .Urx =_aagbg .primMinMax ();_babge .Lly ,_babge .Ury =_aagbg .secMinMax ();
};return _babge ;};func (_adfca gridTile )complete ()bool {return _adfca .numBorders ()==4};func (_cfg *textObject )getFont (_ggcd string )(*_bd .PdfFont ,error ){if _cfg ._fcb ._bgc !=nil {_agce ,_ffd :=_cfg .getFontDict (_ggcd );if _ffd !=nil {_fb .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0067\u0065\u0074\u0046\u006f\u006e\u0074:\u0020n\u0061m\u0065=\u0025\u0073\u002c\u0020\u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0073",_ggcd ,_ffd .Error ());
return nil ,_ffd ;};_cfg ._fcb ._ae ++;_gaaef ,_cbgg :=_cfg ._fcb ._bgc [_agce .String ()];if _cbgg {_gaaef ._cac =_cfg ._fcb ._ae ;return _gaaef ._eeea ,nil ;};};_daa ,_cec :=_cfg .getFontDict (_ggcd );if _cec !=nil {return nil ,_cec ;};_cfbg ,_cec :=_cfg .getFontDirect (_ggcd );
if _cec !=nil {return nil ,_cec ;};if _cfg ._fcb ._bgc !=nil {_cgdc :=fontEntry {_cfbg ,_cfg ._fcb ._ae };if len (_cfg ._fcb ._bgc )>=_fdcdd {var _ddee []string ;for _badc :=range _cfg ._fcb ._bgc {_ddee =append (_ddee ,_badc );};_a .Slice (_ddee ,func (_fcg ,_bed int )bool {return _cfg ._fcb ._bgc [_ddee [_fcg ]]._cac < _cfg ._fcb ._bgc [_ddee [_bed ]]._cac });
delete (_cfg ._fcb ._bgc ,_ddee [0]);};_cfg ._fcb ._bgc [_daa .String ()]=_cgdc ;};return _cfbg ,nil ;};type bounded interface{bbox ()_bd .PdfRectangle };func _dbae (_aada *wordBag ,_fccg *textWord ,_abba float64 )bool {return _fccg .Llx < _aada .Urx +_abba &&_aada .Llx -_abba < _fccg .Urx ;
};func _gbabb (_fdbb ,_cecgf float64 )bool {return _fdbb /_e .Max (_gcbad ,_cecgf )< _bcbc };func _fbfdd (_gddad _cf .PdfObject ,_gagae _gf .Color )(_d .Image ,error ){_dafb ,_bebca :=_cf .GetStream (_gddad );if !_bebca {return nil ,nil ;};_edceb ,_fbfdg :=_bd .NewXObjectImageFromStream (_dafb );
if _fbfdg !=nil {return nil ,_fbfdg ;};_egdaed ,_fbfdg :=_edceb .ToImage ();if _fbfdg !=nil {return nil ,_fbfdg ;};return _ggacb (_egdaed ,_gagae ),nil ;};func (_ggef *textPara )bbox ()_bd .PdfRectangle {return _ggef .PdfRectangle };func (_debb *Extractor )extractPageText (_cfda string ,_eegd *_bd .PdfPageResources ,_acge _ga .Matrix ,_ebc int ,_ega bool )(*PageText ,int ,int ,error ){_fb .Log .Trace ("\u0065x\u0074\u0072\u0061\u0063t\u0050\u0061\u0067\u0065\u0054e\u0078t\u003a \u006c\u0065\u0076\u0065\u006c\u003d\u0025d",_ebc );
_edca :=&PageText {_edf :_debb ._ccag ,_cadfe :_debb ._bcb ,_edee :_debb ._bbe };_dgf :=_ggdg (_debb ._ccag );var _bgce stateStack ;_cgac :=_dffg (_debb ,_eegd ,_ad .GraphicsState {},&_dgf ,&_bgce );_fbfe :=shapesState {_cacd :_acge ,_aefb :_ga .IdentityMatrix (),_bcgcb :_cgac };
var _bbg bool ;_aae :=-1;_eeb :="";if _ebc > _cfa {_eae :=_da .New ("\u0066\u006f\u0072\u006d s\u0074\u0061\u0063\u006b\u0020\u006f\u0076\u0065\u0072\u0066\u006c\u006f\u0077");_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0065\u0078\u0074\u0072\u0061\u0063\u0074\u0050\u0061\u0067\u0065\u0054\u0065\u0078\u0074\u002e\u0020\u0072\u0065\u0063u\u0072\u0073\u0069\u006f\u006e\u0020\u006c\u0065\u0076\u0065\u006c\u003d\u0025\u0064 \u0065r\u0072\u003d\u0025\u0076",_ebc ,_eae );
return _edca ,_dgf ._abce ,_dgf ._eag ,_eae ;};_bcg :=_ad .NewContentStreamParser (_cfda );_fbcc ,_aabf :=_bcg .Parse ();if _aabf !=nil {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020e\u0078\u0074\u0072a\u0063\u0074\u0050\u0061g\u0065\u0054\u0065\u0078\u0074\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_aabf );
return _edca ,_dgf ._abce ,_dgf ._eag ,_aabf ;};_edca ._cgcb =_fbcc ;_cegc :=_ad .NewContentStreamProcessor (*_fbcc );_cegc .AddHandler (_ad .HandlerConditionEnumAllOperands ,"",func (_abbd *_ad .ContentStreamOperation ,_bde _ad .GraphicsState ,_acf *_bd .PdfPageResources )error {_bag :=_abbd .Operand ;
if _dddgf {_fb .Log .Info ("\u0026&\u0026\u0020\u006f\u0070\u003d\u0025s",_abbd );};switch _bag {case "\u0071":if _gcc {_fb .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_fbfe ._aefb );};_bgce .push (&_dgf );case "\u0051":if !_bgce .empty (){_dgf =*_bgce .pop ();
};_fbfe ._aefb =_bde .CTM ;if _gcc {_fb .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_fbfe ._aefb );};case "\u0042\u0044\u0043":_age ,_fde :=_cf .GetDict (_abbd .Params [1]);if !_fde {_fb .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0042D\u0043\u0020\u006f\u0070\u003d\u0025\u0073 \u0047\u0065\u0074\u0044\u0069\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_abbd );
return _aabf ;};_ded :=_age .Get ("\u004d\u0043\u0049\u0044");if _ded !=nil {_fbca ,_aea :=_cf .GetIntVal (_ded );if !_aea {_fb .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0042\u0044C\u0020\u006f\u0070=\u0025\u0073\u002e\u0020\u0042\u0061\u0064\u0020\u006eum\u0065\u0072\u0069c\u0061\u006c \u006f\u0062\u006a\u0065\u0063\u0074.\u0020\u006f=\u0025\u0073",_abbd ,_ded );
};_aae =_fbca ;}else {_aae =-1;};_eff :=_age .Get ("\u0041\u0063\u0074\u0075\u0061\u006c\u0054\u0065\u0078\u0074");if _eff !=nil {_eeb =_eff .String ();};case "\u0045\u004d\u0043":_aae =-1;_eeb ="";case "\u0042\u0054":if _bbg {_fb .Log .Debug ("\u0042\u0054\u0020\u0063\u0061\u006c\u006c\u0065\u0064\u0020\u0077\u0068\u0069\u006c\u0065 \u0069n\u0020\u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
_edca ._accb =append (_edca ._accb ,_cgac ._cag ...);};_bbg =true ;_dde :=_bde ;if _ega {_dde =_ad .GraphicsState {};_dde .CTM =_fbfe ._aefb ;};_dde .CTM =_acge .Mult (_dde .CTM );_cgac =_dffg (_debb ,_acf ,_dde ,&_dgf ,&_bgce );_fbfe ._bcgcb =_cgac ;case "\u0045\u0054":if !_bbg {_fb .Log .Debug ("\u0045\u0054\u0020ca\u006c\u006c\u0065\u0064\u0020\u006f\u0075\u0074\u0073i\u0064e\u0020o\u0066 \u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
};_bbg =false ;_edca ._accb =append (_edca ._accb ,_cgac ._cag ...);_cgac .reset ();case "\u0054\u002a":_cgac .nextLine ();case "\u0054\u0064":if _fdg ,_gcg :=_cgac .checkOp (_abbd ,2,true );!_fdg {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gcg );
return _gcg ;};_fcae ,_ageg ,_eaaa :=_cdega (_abbd .Params );if _eaaa !=nil {return _eaaa ;};_cgac .moveText (_fcae ,_ageg );case "\u0054\u0044":if _bfc ,_befb :=_cgac .checkOp (_abbd ,2,true );!_bfc {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_befb );
return _befb ;};_aegf ,_fdb ,_ebd :=_cdega (_abbd .Params );if _ebd !=nil {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ebd );return _ebd ;};_cgac .moveTextSetLeading (_aegf ,_fdb );case "\u0054\u006a":if _acc ,_cadf :=_cgac .checkOp (_abbd ,1,true );
!_acc {_fb .Log .Debug ("\u0045\u0052\u0052\u004fR:\u0020\u0054\u006a\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0065\u0072\u0072\u003d%\u0076",_abbd ,_cadf );return _cadf ;};_cgf :=_cf .TraceToDirectObject (_abbd .Params [0]);_dbd ,_ebbb :=_cf .GetStringBytes (_cgf );
if !_ebbb {_fb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020T\u006a\u0020o\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074S\u0074\u0072\u0069\u006e\u0067\u0042\u0079\u0074\u0065\u0073\u0020\u0066a\u0069\u006c\u0065\u0064",_abbd );return _cf .ErrTypeError ;
};return _cgac .showText (_cgf ,_dbd ,_aae ,_eeb );case "\u0054\u004a":if _dge ,_gaaec :=_cgac .checkOp (_abbd ,1,true );!_dge {_fb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gaaec );return _gaaec ;
};_fdcd ,_egd :=_cf .GetArray (_abbd .Params [0]);if !_egd {_fb .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_abbd );
return _aabf ;};return _cgac .showTextAdjusted (_fdcd ,_aae ,_eeb );case "\u0027":if _bfcb ,_bfaf :=_cgac .checkOp (_abbd ,1,true );!_bfcb {_fb .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0027\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bfaf );return _bfaf ;
};_bdgb :=_cf .TraceToDirectObject (_abbd .Params [0]);_gdf ,_accf :=_cf .GetStringBytes (_bdgb );if !_accf {_fb .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020'\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_abbd );
return _cf .ErrTypeError ;};_cgac .nextLine ();return _cgac .showText (_bdgb ,_gdf ,_aae ,_eeb );case "\u0022":if _ddbc ,_ecdf :=_cgac .checkOp (_abbd ,3,true );!_ddbc {_fb .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0022\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ecdf );
return _ecdf ;};_dcg ,_cda ,_aeaf :=_cdega (_abbd .Params [:2]);if _aeaf !=nil {return _aeaf ;};_cdae :=_cf .TraceToDirectObject (_abbd .Params [2]);_gcaf ,_adc :=_cf .GetStringBytes (_cdae );if !_adc {_fb .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020\"\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_abbd );
return _cf .ErrTypeError ;};_cgac .setCharSpacing (_dcg );_cgac .setWordSpacing (_cda );_cgac .nextLine ();return _cgac .showText (_cdae ,_gcaf ,_aae ,_eeb );case "\u0054\u004c":_ede ,_aafd :=_eddd (_abbd );if _aafd !=nil {_fb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004c\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_aafd );
return _aafd ;};_cgac .setTextLeading (_ede );case "\u0054\u0063":_gfc ,_fgff :=_eddd (_abbd );if _fgff !=nil {_fb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0063\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fgff );return _fgff ;};_cgac .setCharSpacing (_gfc );
case "\u0054\u0066":if _aeae ,_cgb :=_cgac .checkOp (_abbd ,2,true );!_aeae {_fb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0066\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cgb );return _cgb ;};_edcaf ,_gee :=_cf .GetNameVal (_abbd .Params [0]);
if !_gee {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u004ea\u006d\u0065\u0056\u0061\u006c\u0020\u0066a\u0069\u006c\u0065\u0064",_abbd );return _cf .ErrTypeError ;};_bbdg ,_ggcf :=_cf .GetNumberAsFloat (_abbd .Params [1]);
if !_gee {_fb .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u0046\u006c\u006f\u0061\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065d\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_abbd ,_ggcf );
return _ggcf ;};_ggcf =_cgac .setFont (_edcaf ,_bbdg );_cgac ._caad =_da .Is (_ggcf ,_cf .ErrNotSupported );if _ggcf !=nil &&!_cgac ._caad {return _ggcf ;};case "\u0054\u006d":if _ecfb ,_fdge :=_cgac .checkOp (_abbd ,6,true );!_ecfb {_fb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u006d\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fdge );
return _fdge ;};_fdda ,_ccf :=_cf .GetNumbersAsFloat (_abbd .Params );if _ccf !=nil {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ccf );return _ccf ;};_cgac .setTextMatrix (_fdda );case "\u0054\u0072":if _gdfc ,_cgc :=_cgac .checkOp (_abbd ,1,true );
!_gdfc {_fb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0072\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cgc );return _cgc ;};_aca ,_beb :=_cf .GetIntVal (_abbd .Params [0]);if !_beb {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0072\u0020\u006f\u0070\u003d\u0025\u0073 \u0047e\u0074\u0049\u006e\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_abbd );
return _cf .ErrTypeError ;};_cgac .setTextRenderMode (_aca );case "\u0054\u0073":if _fag ,_fee :=_cgac .checkOp (_abbd ,1,true );!_fag {_fb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0073\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fee );return _fee ;
};_fbcd ,_fdbe :=_cf .GetNumberAsFloat (_abbd .Params [0]);if _fdbe !=nil {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fdbe );return _fdbe ;};_cgac .setTextRise (_fbcd );case "\u0054\u0077":if _bcab ,_fcac :=_cgac .checkOp (_abbd ,1,true );
!_bcab {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fcac );return _fcac ;};_aaed ,_ecc :=_cf .GetNumberAsFloat (_abbd .Params [0]);if _ecc !=nil {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ecc );
return _ecc ;};_cgac .setWordSpacing (_aaed );case "\u0054\u007a":if _cdde ,_aga :=_cgac .checkOp (_abbd ,1,true );!_cdde {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_aga );return _aga ;};_gbcg ,_agg :=_cf .GetNumberAsFloat (_abbd .Params [0]);
if _agg !=nil {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_agg );return _agg ;};_cgac .setHorizScaling (_gbcg );case "\u0063\u006d":if !_ega {_fbfe ._aefb =_bde .CTM ;};if _fbfe ._aefb .Singular (){_dac :=_ga .IdentityMatrix ().Translate (_fbfe ._aefb .Translation ());
_fb .Log .Debug ("S\u0069n\u0067\u0075\u006c\u0061\u0072\u0020\u0063\u0074m\u003d\u0025\u0073\u2192%s",_fbfe ._aefb ,_dac );_fbfe ._aefb =_dac ;};if _gcc {_fb .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_fbfe ._aefb );};case "\u006d":if len (_abbd .Params )!=2{_fb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_ff );
return nil ;};_ffb ,_gafg :=_cf .GetNumbersAsFloat (_abbd .Params );if _gafg !=nil {return _gafg ;};_fbfe .moveTo (_ffb [0],_ffb [1]);case "\u006c":if len (_abbd .Params )!=2{_fb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_ff );
return nil ;};_gae ,_afb :=_cf .GetNumbersAsFloat (_abbd .Params );if _afb !=nil {return _afb ;};_fbfe .lineTo (_gae [0],_gae [1]);case "\u0063":if len (_abbd .Params )!=6{return _ff ;};_bebd ,_gdgg :=_cf .GetNumbersAsFloat (_abbd .Params );if _gdgg !=nil {return _gdgg ;
};_fb .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_bebd );_fbfe .cubicTo (_bebd [0],_bebd [1],_bebd [2],_bebd [3],_bebd [4],_bebd [5]);case "\u0076","\u0079":if len (_abbd .Params )!=4{return _ff ;
};_gga ,_cbge :=_cf .GetNumbersAsFloat (_abbd .Params );if _cbge !=nil {return _cbge ;};_fb .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_gga );_fbfe .quadraticTo (_gga [0],_gga [1],_gga [2],_gga [3]);
case "\u0068":_fbfe .closePath ();case "\u0072\u0065":if len (_abbd .Params )!=4{return _ff ;};_ege ,_bbb :=_cf .GetNumbersAsFloat (_abbd .Params );if _bbb !=nil {return _bbb ;};_fbfe .drawRectangle (_ege [0],_ege [1],_ege [2],_ege [3]);_fbfe .closePath ();
case "\u0053":_fbfe .stroke (&_edca ._bbgb );_fbfe .clearPath ();case "\u0073":_fbfe .closePath ();_fbfe .stroke (&_edca ._bbgb );_fbfe .clearPath ();case "\u0046":_fbfe .fill (&_edca ._fdf );_fbfe .clearPath ();case "\u0066","\u0066\u002a":_fbfe .closePath ();
_fbfe .fill (&_edca ._fdf );_fbfe .clearPath ();case "\u0042","\u0042\u002a":_fbfe .fill (&_edca ._fdf );_fbfe .stroke (&_edca ._bbgb );_fbfe .clearPath ();case "\u0062","\u0062\u002a":_fbfe .closePath ();_fbfe .fill (&_edca ._fdf );_fbfe .stroke (&_edca ._bbgb );
_fbfe .clearPath ();case "\u006e":_fbfe .clearPath ();case "\u0044\u006f":if len (_abbd .Params )==0{_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0058\u004fbj\u0065c\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006f\u0070\u0065\u0072\u0061n\u0064\u0020\u0066\u006f\u0072\u0020\u0044\u006f\u0020\u006f\u0070\u0065\u0072\u0061\u0074\u006f\u0072.\u0020\u0047\u006f\u0074\u0020\u0025\u002b\u0076\u002e",_abbd .Params );
return _cf .ErrRangeError ;};_aafb ,_bcfa :=_cf .GetName (_abbd .Params [0]);if !_bcfa {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0044\u006f\u0020\u006f\u0070e\u0072a\u0074\u006f\u0072\u0020\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006fp\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u002b\u0076\u002e",_abbd .Params [0]);
return _cf .ErrTypeError ;};_ ,_dbce :=_acf .GetXObjectByName (*_aafb );if _dbce !=_bd .XObjectTypeForm {break ;};_ccee ,_bcfa :=_debb ._ceg [_aafb .String ()];if !_bcfa {_bebc ,_caeb :=_acf .GetXObjectFormByName (*_aafb );if _caeb !=nil {_fb .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_caeb );
return _caeb ;};_ccfa ,_caeb :=_bebc .GetContentStream ();if _caeb !=nil {_fb .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_caeb );return _caeb ;};_ddgd :=_bebc .Resources ;if _ddgd ==nil {_ddgd =_acf ;};_caeg :=_bde .CTM ;if _ceeg ,_gefd :=_cf .GetArray (_bebc .Matrix );
_gefd {_cfbf ,_cbgc :=_ceeg .GetAsFloat64Slice ();if _cbgc !=nil {return _cbgc ;};if len (_cfbf )!=6{return _ff ;};_bgca :=_ga .NewMatrix (_cfbf [0],_cfbf [1],_cfbf [2],_cfbf [3],_cfbf [4],_cfbf [5]);_caeg =_bde .CTM .Mult (_bgca );};_afba ,_efd ,_ffff ,_caeb :=_debb .extractPageText (string (_ccfa ),_ddgd ,_acge .Mult (_caeg ),_ebc +1,false );
if _caeb !=nil {_fb .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_caeb );return _caeb ;};_ccee =textResult {*_afba ,_efd ,_ffff };_debb ._ceg [_aafb .String ()]=_ccee ;};_fbfe ._aefb =_bde .CTM ;if _gcc {_fb .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_fbfe ._aefb );
};_edca ._accb =append (_edca ._accb ,_ccee ._ebf ._accb ...);_edca ._bbgb =append (_edca ._bbgb ,_ccee ._ebf ._bbgb ...);_edca ._fdf =append (_edca ._fdf ,_ccee ._ebf ._fdf ...);_dgf ._abce +=_ccee ._bfd ;_dgf ._eag +=_ccee ._gddb ;case "\u0072\u0067","\u0067","\u006b","\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_cgac ._dcd .ColorspaceNonStroking =_bde .ColorspaceNonStroking ;
_cgac ._dcd .ColorNonStroking =_bde .ColorNonStroking ;case "\u0052\u0047","\u0047","\u004b","\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_cgac ._dcd .ColorspaceStroking =_bde .ColorspaceStroking ;_cgac ._dcd .ColorStroking =_bde .ColorStroking ;
};return nil ;});_aabf =_cegc .Process (_eegd );if _debb ._gaae !=nil &&_debb ._gaae .IncludeAnnotations &&!_ega {for _ ,_ffgd :=range _debb ._adf {_bdb ,_bfe :=_cf .GetDict (_ffgd .AP );if !_bfe {continue ;};_fbeg ,_bfe :=_bdb .Get ("\u004e").(*_cf .PdfObjectStream );
if !_bfe {continue ;};_dff ,_bfae :=_cf .DecodeStream (_fbeg );if _bfae !=nil {_fb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u006f\u006e\u0020\u0064\u0065c\u006f\u0064\u0065\u0020\u0073\u0074\u0072\u0065\u0061\u006d:\u0020\u0025\u0076",_bfae );
continue ;};_aegfg :=_fbeg .PdfObjectDictionary .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s");_cbgf ,_bfae :=_bd .NewPdfPageResourcesFromDict (_aegfg .(*_cf .PdfObjectDictionary ));if _bfae !=nil {_fb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072 \u006f\u006e\u0020\u0067\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0061\u006en\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0020\u0072\u0065\u0073\u006f\u0075\u0072\u0063\u0065\u0073\u003a\u0020\u0025\u0076",_bfae );
continue ;};_egc :=_ga .IdentityMatrix ();_fcd ,_bfe :=_fbeg .PdfObjectDictionary .Get ("\u004d\u0061\u0074\u0072\u0069\u0078").(*_cf .PdfObjectArray );if _bfe {_gea ,_dbg :=_fcd .GetAsFloat64Slice ();if _dbg !=nil {_fb .Log .Debug ("\u0045\u0072\u0072or\u0020\u006f\u006e\u0020\u0067\u0065\u0074\u0074\u0069n\u0067 \u0066l\u006fa\u0074\u0036\u0034\u0020\u0073\u006c\u0069\u0063\u0065\u003a\u0020\u0025\u0076",_dbg );
continue ;};if len (_gea )!=6{_fb .Log .Debug ("I\u006e\u0076\u0061\u006c\u0069\u0064 \u006d\u0061\u0074\u0072\u0069\u0078\u0020\u0073\u006ci\u0063\u0065\u0020l\u0065n\u0067\u0074\u0068");continue ;};_egc =_ga .NewMatrix (_gea [0],_gea [1],_gea [2],_gea [3],_gea [4],_gea [5]);
};_fdag ,_bfe :=_debb ._afc [_fbeg .String ()];if !_bfe {_deca ,_gfbd ,_baa ,_fbbd :=_debb .extractPageText (string (_dff ),_cbgf ,_egc ,_ebc +1,true );if _fbbd !=nil {_fb .Log .Debug ("\u0045\u0052R\u004f\u0052\u0020\u0065x\u0074\u0072a\u0063\u0074\u0069\u006e\u0067\u0020\u0061\u006en\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0020\u0074\u0065\u0078\u0074s\u003a\u0020\u0025\u0076",_fbbd );
continue ;};_fdag =textResult {*_deca ,_gfbd ,_baa };_debb ._afc [_fbeg .String ()]=_fdag ;};_edca ._accb =append (_edca ._accb ,_fdag ._ebf ._accb ...);_edca ._bbgb =append (_edca ._bbgb ,_fdag ._ebf ._bbgb ...);_edca ._fdf =append (_edca ._fdf ,_fdag ._ebf ._fdf ...);
_dgf ._abce +=_fdag ._bfd ;_dgf ._eag +=_fdag ._gddb ;};};return _edca ,_dgf ._abce ,_dgf ._eag ,_aabf ;};func (_cde *imageExtractContext )extractXObjectImage (_caa *_cf .PdfObjectName ,_ggdc _ad .GraphicsState ,_ebba *_bd .PdfPageResources )error {_dcc ,_ :=_ebba .GetXObjectByName (*_caa );
if _dcc ==nil {return nil ;};_feg ,_ddb :=_cde ._ffg [_dcc ];if !_ddb {_eaa ,_adb :=_ebba .GetXObjectImageByName (*_caa );if _adb !=nil {return _adb ;};if _eaa ==nil {return nil ;};_ffga ,_adb :=_eaa .ToImage ();if _adb !=nil {return _adb ;};var _cbaa _d .Image ;
if _eaa .Mask !=nil {if _cbaa ,_adb =_dccdg (_eaa .Mask ,_gf .Opaque );_adb !=nil {_fb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a \u0063\u006f\u0075\u006c\u0064 \u006eo\u0074\u0020\u0067\u0065\u0074\u0020\u0065\u0078\u0070\u006c\u0069\u0063\u0069\u0074\u0020\u0069\u006d\u0061\u0067e\u0020\u006d\u0061\u0073\u006b\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e");
};}else if _eaa .SMask !=nil {_cbaa ,_adb =_fbfdd (_eaa .SMask ,_gf .Opaque );if _adb !=nil {_fb .Log .Debug ("W\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0067\u0065\u0074\u0020\u0073\u006f\u0066\u0074\u0020\u0069\u006da\u0067e\u0020\u006d\u0061\u0073k\u002e\u0020O\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u002e");
};};if _cbaa !=nil {_egg ,_ceb :=_ffga .ToGoImage ();if _ceb !=nil {return _ceb ;};_egg =_cfca (_egg ,_cbaa );switch _eaa .ColorSpace .String (){case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0049n\u0064\u0065\u0078\u0065\u0064":_ffga ,_ceb =_bd .ImageHandling .NewGrayImageFromGoImage (_egg );
if _ceb !=nil {return _ceb ;};default:_ffga ,_ceb =_bd .ImageHandling .NewImageFromGoImage (_egg );if _ceb !=nil {return _ceb ;};};};_feg =&cachedImage {_deb :_ffga ,_aef :_eaa .ColorSpace };_cde ._ffg [_dcc ]=_feg ;};_gfd :=_feg ._deb ;_fbge :=_feg ._aef ;
_fgad ,_abc :=_fbge .ImageToRGB (*_gfd );if _abc !=nil {return _abc ;};_fb .Log .Debug ("@\u0044\u006f\u0020\u0043\u0054\u004d\u003a\u0020\u0025\u0073",_ggdc .CTM .String ());_dfdf :=ImageMark {Image :&_fgad ,Width :_ggdc .CTM .ScalingFactorX (),Height :_ggdc .CTM .ScalingFactorY (),Angle :_ggdc .CTM .Angle ()};
_dfdf .X ,_dfdf .Y =_ggdc .CTM .Translation ();_cde ._babe =append (_cde ._babe ,_dfdf );_cde ._fdd ++;return nil ;};type wordBag struct{_bd .PdfRectangle ;_dagd float64 ;_gab ,_bcabd rulingList ;_gcbg float64 ;_acfg map[int ][]*textWord ;};func (_fbbdf paraList )lines ()[]*textLine {var _egcdba []*textLine ;
for _ ,_ecbf :=range _fbbdf {_egcdba =append (_egcdba ,_ecbf ._bgcc ...);};return _egcdba ;};func (_dgfd *textObject )getStrokeColor ()_gf .Color {return _bdgg (_dgfd ._dcd .ColorspaceStroking ,_dgfd ._dcd .ColorStroking );};func (_ebef *shapesState )drawRectangle (_ggff ,_edfb ,_gbcd ,_ecdg float64 ){if _gcc {_fbgee :=_ebef .devicePoint (_ggff ,_edfb );
_fggc :=_ebef .devicePoint (_ggff +_gbcd ,_edfb +_ecdg );_cfgg :=_bd .PdfRectangle {Llx :_fbgee .X ,Lly :_fbgee .Y ,Urx :_fggc .X ,Ury :_fggc .Y };_fb .Log .Info ("d\u0072a\u0077\u0052\u0065\u0063\u0074\u0061\u006e\u0067l\u0065\u003a\u0020\u00256.\u0032\u0066",_cfgg );
};_ebef .newSubPath ();_ebef .moveTo (_ggff ,_edfb );_ebef .lineTo (_ggff +_gbcd ,_edfb );_ebef .lineTo (_ggff +_gbcd ,_edfb +_ecdg );_ebef .lineTo (_ggff ,_edfb +_ecdg );_ebef .closePath ();};func _fffe (_afbga _bd .PdfRectangle )rulingKind {_beaec :=_afbga .Width ();
_cceag :=_afbga .Height ();if _beaec > _cceag {if _beaec >=_gbbef {return _fdec ;};}else {if _cceag >=_gbbef {return _bbee ;};};return _febb ;};const (_ageec =false ;_bega =false ;_dddgf =false ;_eagc =false ;_gcc =false ;_bbcb =false ;_ddca =false ;_abg =false ;
_fdff =false ;_deed =_fdff &&true ;_gbbbb =_deed &&false ;_adfg =_fdff &&true ;_deef =false ;_faga =_deef &&false ;_gcba =_deef &&true ;_babf =false ;_efbf =_babf &&false ;_bcbb =_babf &&false ;_fdbd =_babf &&true ;_ggeg =_babf &&false ;_gbfg =_babf &&false ;
);func (_degg *structTreeRoot )buildList (_eggf map[int ][]*textLine ,_efdf _cf .PdfObject )[]*list {if _degg ==nil {_fb .Log .Debug ("\u0062\u0075\u0069\u006c\u0064\u004c\u0069\u0073\u0074\u003a\u0020t\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0069\u0073 \u006e\u0069\u006c");
return nil ;};var _adbc *structElement ;_bfcg :=[]structElement {};if len (_degg ._gagg )==1{_dfdc :=_degg ._gagg [0]._cfdg ;if _dfdc =="\u0044\u006f\u0063\u0075\u006d\u0065\u006e\u0074"||_dfdc =="\u0053\u0065\u0063\u0074"||_dfdc =="\u0050\u0061\u0072\u0074"||_dfdc =="\u0044\u0069\u0076"||_dfdc =="\u0041\u0072\u0074"{_adbc =&_degg ._gagg [0];
};}else {_adbc =&structElement {_dgcbf :_degg ._gagg ,_cfdg :_degg ._cbee };};if _adbc ==nil {_fb .Log .Debug ("\u0062\u0075\u0069\u006cd\u004c\u0069\u0073\u0074\u003a\u0020\u0074\u006f\u0070\u0045l\u0065m\u0065\u006e\u0074\u0020\u0069\u0073\u0020n\u0069\u006c");
return nil ;};for _ ,_abff :=range _adbc ._dgcbf {if _abff ._cfdg =="\u004c"{_bfcg =append (_bfcg ,_abff );}else if _abff ._cfdg =="\u0054\u0061\u0062l\u0065"{_eecf :=_aedc (_abff );_bfcg =append (_bfcg ,_eecf ...);};};_deega :=_gbgf (_bfcg ,_eggf ,_efdf );
var _gabg []*list ;for _ ,_acae :=range _deega {_befc :=_egcd (_acae );_gabg =append (_gabg ,_befc ...);};return _gabg ;};func _dddb (_gggbc []pathSection ){if _fcgd < 0.0{return ;};if _babf {_fb .Log .Info ("\u0067\u0072\u0061\u006e\u0075\u006c\u0061\u0072\u0069\u007a\u0065\u003a\u0020\u0025\u0064 \u0073u\u0062\u0070\u0061\u0074\u0068\u0020\u0073\u0065\u0063\u0074\u0069\u006f\u006e\u0073",len (_gggbc ));
};for _afbfe ,_dggdf :=range _gggbc {for _gbecd ,_efggg :=range _dggdf ._ecea {for _fcfb ,_deeca :=range _efggg ._gcgc {_efggg ._gcgc [_fcfb ]=_ga .Point {X :_gbddb (_deeca .X ),Y :_gbddb (_deeca .Y )};if _babf {_edgf :=_efggg ._gcgc [_fcfb ];if !_bdag (_deeca ,_edgf ){_fdccc :=_ga .Point {X :_edgf .X -_deeca .X ,Y :_edgf .Y -_deeca .Y };
_cbg .Printf ("\u0025\u0034d \u002d\u0020\u00254\u0064\u0020\u002d\u0020%4d\u003a %\u002e\u0032\u0066\u0020\u2192\u0020\u0025.2\u0066\u0020\u0028\u0025\u0067\u0029\u000a",_afbfe ,_gbecd ,_fcfb ,_deeca ,_edgf ,_fdccc );};};};};};};func (_cfef *stateStack )size ()int {return len (*_cfef )};
type imageExtractContext struct{_babe []ImageMark ;_fff int ;_fdd int ;_aeg int ;_ffg map[*_cf .PdfObjectStream ]*cachedImage ;_cee *ImageExtractOptions ;_dfg bool ;};type event struct{_gcgb float64 ;_egefd bool ;_fagac int ;};func (_debe *textLine )markWordBoundaries (){_ebee :=_cgeg *_debe ._efba ;
for _gabf ,_gggc :=range _debe ._abcg [1:]{if _ceda (_gggc ,_debe ._abcg [_gabf ])>=_ebee {_gggc ._cgbdf =true ;};};};func _gfag (_bggf _ga .Point )*subpath {return &subpath {_gcgc :[]_ga .Point {_bggf }}};func (_dfdabc *textObject )getCurrentFont ()*_bd .PdfFont {_ddcg :=_dfdabc ._beg ._bfb ;
if _ddcg ==nil {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020U\u0073\u0069\u006e\u0067\u0020d\u0065\u0066a\u0075\u006c\u0074\u002e");return _bd .DefaultFont ();
};return _ddcg ;};

// Text returns the text content of the `bulletLists`.
func (_fagb *lists )Text ()string {_fceb :=&_bb .Builder {};for _ ,_egbe :=range *_fagb {_gfae :=_egbe .Text ();_fceb .WriteString (_gfae );};return _fceb .String ();};func _dccdg (_efdfa _cf .PdfObject ,_ceadb _gf .Color )(_d .Image ,error ){_gcbaf ,_feae :=_cf .GetStream (_efdfa );
if !_feae {return nil ,nil ;};_gfeed ,_dacff :=_bd .NewXObjectImageFromStream (_gcbaf );if _dacff !=nil {return nil ,_dacff ;};_eceac ,_dacff :=_gfeed .ToImage ();if _dacff !=nil {return nil ,_dacff ;};return _egfeb (_eceac ,_ceadb ),nil ;};func _bdgg (_ebbec _bd .PdfColorspace ,_ccced _bd .PdfColor )_gf .Color {if _ebbec ==nil ||_ccced ==nil {return _gf .Black ;
};_gbdeg ,_fecf :=_ebbec .ColorToRGB (_ccced );if _fecf !=nil {_fb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006fu\u006c\u0064\u0020no\u0074\u0020\u0063\u006f\u006e\u0076e\u0072\u0074\u0020\u0063\u006f\u006c\u006f\u0072\u0020\u0025\u0076\u0020\u0028\u0025\u0076)\u0020\u0074\u006f\u0020\u0052\u0047\u0042\u003a \u0025\u0073",_ccced ,_ebbec ,_fecf );
return _gf .Black ;};_abbbd ,_gfaaf :=_gbdeg .(*_bd .PdfColorDeviceRGB );if !_gfaaf {_fb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0065\u0064 \u0063\u006f\u006c\u006f\u0072\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020i\u006e\u0020\u0074\u0068\u0065\u0020\u0052\u0047\u0042\u0020\u0063\u006flo\u0072\u0073\u0070\u0061\u0063\u0065\u003a\u0020\u0025\u0076",_gbdeg );
return _gf .Black ;};return _gf .NRGBA {R :uint8 (_abbbd .R ()*255),G :uint8 (_abbbd .G ()*255),B :uint8 (_abbbd .B ()*255),A :uint8 (255)};};func (_egfd *textTable )log (_faedc string ){if !_deef {return ;};_fb .Log .Info ("~\u007e\u007e\u0020\u0025\u0073\u003a \u0025\u0064\u0020\u0078\u0020\u0025d\u0020\u0067\u0072\u0069\u0064\u003d\u0025t\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0025\u0036\u002e2\u0066",_faedc ,_egfd ._bbfgf ,_egfd ._gfcf ,_egfd ._deagb ,_egfd .PdfRectangle );
for _gdba :=0;_gdba < _egfd ._gfcf ;_gdba ++{for _bcaa :=0;_bcaa < _egfd ._bbfgf ;_bcaa ++{_bbbde :=_egfd .get (_bcaa ,_gdba );if _bbbde ==nil {continue ;};_cbg .Printf ("%\u0034\u0064\u0020\u00252d\u003a \u0025\u0036\u002e\u0032\u0066 \u0025\u0071\u0020\u0025\u0064\u000a",_bcaa ,_gdba ,_bbbde .PdfRectangle ,_ddfcg (_bbbde .text (),50),_g .RuneCountInString (_bbbde .text ()));
};};};func _adae (_cfcd *textLine ,_aeeb []*textLine ,_cbbb []float64 ,_ccce ,_dgec float64 )[]*textLine {_cbbc :=[]*textLine {};for _ ,_cgca :=range _aeeb {if _cgca ._becg >=_ccce {if _dgec !=-1&&_cgca ._becg < _dgec {if _cgca .text ()!=_cfcd .text (){if _e .Round (_cgca .Llx )< _e .Round (_cfcd .Llx ){break ;
};_cbbc =append (_cbbc ,_cgca );};}else if _dgec ==-1{if _cgca ._becg ==_cfcd ._becg {if _cgca .text ()!=_cfcd .text (){_cbbc =append (_cbbc ,_cgca );};continue ;};_gdgd :=_bbba (_cfcd ,_aeeb ,_cbbb );if _gdgd !=-1&&_cgca ._becg <=_gdgd {_cbbc =append (_cbbc ,_cgca );
};};};};return _cbbc ;};func _cfe (_ee []string ,_bbf int ,_cfd string )int {_df :=_bbf ;for ;_df < len (_ee );_df ++{if _ee [_df ]!=_cfd {return _df ;};};return _df ;};func (_cbgfg paraList )findGridTables (_bafd []gridTiling )[]*textTable {if _deef {_fb .Log .Info ("\u0066i\u006e\u0064\u0047\u0072\u0069\u0064\u0054\u0061\u0062\u006c\u0065s\u003a\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073",len (_cbgfg ));
for _fgada ,_gbge :=range _cbgfg {_cbg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fgada ,_gbge );};};var _eafe []*textTable ;for _eccbg ,_dgdd :=range _bafd {_gdabf ,_defac :=_cbgfg .findTableGrid (_dgdd );if _gdabf !=nil {_gdabf .log (_cbg .Sprintf ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0057\u0069\u0074\u0068\u0047\u0072\u0069\u0064\u0073\u003a\u0020%\u0064",_eccbg ));
_eafe =append (_eafe ,_gdabf );_gdabf .markCells ();};for _egbfc :=range _defac {_egbfc ._cecbe =true ;};};if _deef {_fb .Log .Info ("\u0066i\u006e\u0064\u0047\u0072i\u0064\u0054\u0061\u0062\u006ce\u0073:\u0020%\u0064\u0020\u0074\u0061\u0062\u006c\u0065s",len (_eafe ));
};return _eafe ;};func (_dabf *shapesState )closePath (){if _dabf ._dgbb {_dabf ._eaaf =append (_dabf ._eaaf ,_gfag (_dabf ._gdee ));_dabf ._dgbb =false ;}else if len (_dabf ._eaaf )==0{if _gcc {_fb .Log .Debug ("\u0063\u006c\u006f\u0073eP\u0061\u0074\u0068\u0020\u0077\u0069\u0074\u0068\u0020\u006e\u006f\u0020\u0070\u0061t\u0068");
};_dabf ._dgbb =false ;return ;};_dabf ._eaaf [len (_dabf ._eaaf )-1].close ();if _gcc {_fb .Log .Info ("\u0063\u006c\u006f\u0073\u0065\u0050\u0061\u0074\u0068\u003a\u0020\u0025\u0073",_dabf );};};func _aebcc (_ffccb []rulingList )(rulingList ,rulingList ){var _bfcf rulingList ;
for _ ,_cggf :=range _ffccb {_bfcf =append (_bfcf ,_cggf ...);};return _bfcf .vertsHorzs ();};func (_ebcb *textObject )setTextRenderMode (_fgc int ){if _ebcb ==nil {return ;};_ebcb ._beg ._gbgg =RenderMode (_fgc );};func (_cbggf paraList )inTile (_acea gridTile )paraList {var _dggbd paraList ;
for _ ,_efga :=range _cbggf {if _acea .contains (_efga .PdfRectangle ){_dggbd =append (_dggbd ,_efga );};};if _deef {_cbg .Printf ("\u0020 \u0020\u0069\u006e\u0054i\u006c\u0065\u003a\u0020\u0020%\u0073 \u0069n\u0073\u0069\u0064\u0065\u003d\u0025\u0064\n",_acea ,len (_dggbd ));
for _dcbdg ,_gbage :=range _dggbd {_cbg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dcbdg ,_gbage );};_cbg .Println ("");};return _dggbd ;};var _dacb =TextMark {Text :"\u005b\u0058\u005d",Original :"\u0020",Meta :true ,FillColor :_gf .White ,StrokeColor :_gf .White };
func (_bgbbb paraList )applyTables (_bgbbd []*textTable )paraList {var _ecdd paraList ;for _ ,_dcce :=range _bgbbd {_ecdd =append (_ecdd ,_dcce .newTablePara ());};for _ ,_abeee :=range _bgbbb {if _abeee ._cecbe {continue ;};_ecdd =append (_ecdd ,_abeee );
};return _ecdd ;};type lineRuling struct{_addf rulingKind ;_fcedg markKind ;_gf .Color ;_affd ,_ceea _ga .Point ;};

// ImageMark represents an image drawn on a page and its position in device coordinates.
// All coordinates are in device coordinates.
type ImageMark struct{Image *_bd .Image ;

// Dimensions of the image as displayed in the PDF.
Width float64 ;Height float64 ;

// Position of the image in PDF coordinates (lower left corner).
X float64 ;Y float64 ;

// Angle in degrees, if rotated.
Angle float64 ;};

// Font represents the font properties on a PDF page.
type Font struct{PdfFont *_bd .PdfFont ;

// FontName represents Font Name from font properties.
FontName string ;

// FontType represents Font Subtype entry in the font dictionary inside page resources.
// Examples : type0, Type1, MMType1, Type3, TrueType, CIDFont.
FontType string ;

// ToUnicode is true if font provides a `ToUnicode` mapping.
ToUnicode bool ;

// IsCID is true if underlying font is a composite font.
// Composite font is represented by a font dictionary whose Subtype is `Type0`
IsCID bool ;

// IsSimple is true if font is simple font.
// A simple font is limited to only 8 bit (255) character codes.
IsSimple bool ;

// FontData represents the raw data of the embedded font file.
// It can have format TrueType (TTF), PostScript Font (PFB) or Compact Font Format (CCF).
// FontData value can be indicates from `FontFile`, `FontFile2` or `FontFile3` inside Font Descriptor.
// At most, only one of `FontFile`, `FontFile2` or `FontFile3` will be FontData value.
FontData []byte ;

// FontFileName is a name representing the font. it has format:
// (Font Name) + (Font Type Extension), example: helvetica.ttf.
FontFileName string ;

// FontDescriptor represents metrics and other attributes inside font properties from PDF Structure (Font Descriptor).
FontDescriptor *_bd .PdfFontDescriptor ;};const (_febb rulingKind =iota ;_fdec ;_bbee ;);func (_ecgef paraList )xNeighbours (_fdcag float64 )map[*textPara ][]int {_dadb :=make ([]event ,2*len (_ecgef ));if _fdcag ==0{for _dbacc ,_ffbef :=range _ecgef {_dadb [2*_dbacc ]=event {_ffbef .Llx ,true ,_dbacc };
_dadb [2*_dbacc +1]=event {_ffbef .Urx ,false ,_dbacc };};}else {for _cbcfee ,_ccfe :=range _ecgef {_dadb [2*_cbcfee ]=event {_ccfe .Llx -_fdcag *_ccfe .fontsize (),true ,_cbcfee };_dadb [2*_cbcfee +1]=event {_ccfe .Urx +_fdcag *_ccfe .fontsize (),false ,_cbcfee };
};};return _ecgef .eventNeighbours (_dadb );};func _fcda (_bdegg ,_ggfaf float64 )string {_gbcdb :=!_bfaeb (_bdegg -_ggfaf );if _gbcdb {return "\u000a";};return "\u0020";};func _ccbg (_cbggg map[float64 ]map[float64 ]gridTile )[]float64 {_gbega :=make ([]float64 ,0,len (_cbggg ));
for _caddg :=range _cbggg {_gbega =append (_gbega ,_caddg );};_a .Float64s (_gbega );_cggg :=len (_gbega );for _eadcg :=0;_eadcg < _cggg /2;_eadcg ++{_gbega [_eadcg ],_gbega [_cggg -1-_eadcg ]=_gbega [_cggg -1-_eadcg ],_gbega [_eadcg ];};return _gbega ;
};

// String returns a description of `state`.
func (_gbbb *textState )String ()string {_aceb :="\u005bN\u004f\u0054\u0020\u0053\u0045\u0054]";if _gbbb ._bfb !=nil {_aceb =_gbbb ._bfb .BaseFont ();};return _cbg .Sprintf ("\u0074\u0063\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0077\u003d\u0025\u002e\u0032\u0066 \u0074f\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u003d\u0025\u0071",_gbbb ._ged ,_gbbb ._eef ,_gbbb ._fge ,_aceb );
};func (_dfbf *ruling )intersects (_fcfa *ruling )bool {_dbad :=(_dfbf ._egagd ==_bbee &&_fcfa ._egagd ==_fdec )||(_fcfa ._egagd ==_bbee &&_dfbf ._egagd ==_fdec );_abdf :=func (_aafeg ,_eegf *ruling )bool {return _aafeg ._cdcd -_dgbg <=_eegf ._gabcd &&_eegf ._gabcd <=_aafeg ._dcgf +_dgbg ;
};_bgaa :=_abdf (_dfbf ,_fcfa );_ggfc :=_abdf (_fcfa ,_dfbf );if _babf {_cbg .Printf ("\u0020\u0020\u0020\u0020\u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003a\u0020\u0020\u006fr\u0074\u0068\u006f\u0067\u006f\u006e\u0061l\u003d\u0025\u0074\u0020\u006f\u0031\u003d\u0025\u0074\u0020\u006f2\u003d\u0025\u0074\u0020\u2192\u0020\u0025\u0074\u000a"+"\u0020\u0020\u0020 \u0020\u0020\u0020\u0076\u003d\u0025\u0073\u000a"+" \u0020\u0020\u0020\u0020\u0020\u0077\u003d\u0025\u0073\u000a",_dbad ,_bgaa ,_ggfc ,_dbad &&_bgaa &&_ggfc ,_dfbf ,_fcfa );
};return _dbad &&_bgaa &&_ggfc ;};func _efec (_ggaff ,_edge _bd .PdfRectangle )bool {return _eccg (_ggaff ,_edge )&&_eed (_ggaff ,_edge )};func _ggacb (_dfccg *_bd .Image ,_acad _gf .Color )_d .Image {_gffc ,_gcggg :=int (_dfccg .Width ),int (_dfccg .Height );
_bbadc :=_d .NewRGBA (_d .Rect (0,0,_gffc ,_gcggg ));for _badfc :=0;_badfc < _gcggg ;_badfc ++{for _afdce :=0;_afdce < _gffc ;_afdce ++{_eaece ,_ddgc :=_dfccg .ColorAt (_afdce ,_badfc );if _ddgc !=nil {_fb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_afdce ,_badfc );
continue ;};_ebcf ,_gcggb ,_cbbd ,_ :=_eaece .RGBA ();var _fcbg _gf .Color ;if _ebcf +_gcggb +_cbbd ==0{_fcbg =_gf .Transparent ;}else {_fcbg =_acad ;};_bbadc .Set (_afdce ,_badfc ,_fcbg );};};return _bbadc ;};func (_adbd *stateStack )pop ()*textState {if _adbd .empty (){return nil ;
};_ddbe :=*(*_adbd )[len (*_adbd )-1];*_adbd =(*_adbd )[:len (*_adbd )-1];return &_ddbe ;};func (_edgb *wordBag )getDepthIdx (_ebeg float64 )int {_eab :=_edgb .depthIndexes ();_fegae :=_fadcb (_ebeg );if _fegae < _eab [0]{return _eab [0];};if _fegae > _eab [len (_eab )-1]{return _eab [len (_eab )-1];
};return _fegae ;};func (_dccgc *textLine )appendWord (_cadd *textWord ){_dccgc ._abcg =append (_dccgc ._abcg ,_cadd );_dccgc .PdfRectangle =_agcf (_dccgc .PdfRectangle ,_cadd .PdfRectangle );if _cadd ._efce > _dccgc ._efba {_dccgc ._efba =_cadd ._efce ;
};if _cadd ._gabaag > _dccgc ._becg {_dccgc ._becg =_cadd ._gabaag ;};};func _cddf (_agddda *wordBag ,_fcgdc float64 ,_bagea ,_dfeb rulingList )[]*wordBag {var _cdee []*wordBag ;for _ ,_cadbe :=range _agddda .depthIndexes (){_agcfa :=false ;for !_agddda .empty (_cadbe ){_eeeb :=_agddda .firstReadingIndex (_cadbe );
_gabd :=_agddda .firstWord (_eeeb );_dacea :=_ggab (_gabd ,_fcgdc ,_bagea ,_dfeb );_agddda .removeWord (_gabd ,_eeeb );if _ddca {_fb .Log .Info ("\u0066\u0069\u0072\u0073\u0074\u0057\u006f\u0072\u0064\u0020\u005e\u005e^\u005e\u0020\u0025\u0073",_gabd .String ());
};for _gfgaf :=true ;_gfgaf ;_gfgaf =_agcfa {_agcfa =false ;_cbeb :=_bebb *_dacea ._dagd ;_aeed :=_cbf *_dacea ._dagd ;_eded :=_ebbd *_dacea ._dagd ;if _ddca {_fb .Log .Info ("\u0070a\u0072a\u0057\u006f\u0072\u0064\u0073\u0020\u0064\u0065\u0070\u0074\u0068 \u0025\u002e\u0032\u0066 \u002d\u0020\u0025\u002e\u0032f\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061\u0044\u0065\u0070\u0074\u0068\u0047\u0061\u0070\u003d\u0025\u002e\u0032\u0066\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061R\u0065\u0061\u0064\u0069\u006e\u0067\u0047\u0061p\u003d\u0025\u002e\u0032\u0066",_dacea .minDepth (),_dacea .maxDepth (),_eded ,_aeed );
};if _agddda .scanBand ("\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c",_dacea ,_bfde (_dbae ,0),_dacea .minDepth ()-_eded ,_dacea .maxDepth ()+_eded ,_gdbb ,false ,false )> 0{_agcfa =true ;};if _agddda .scanBand ("\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_dacea ,_bfde (_dbae ,_aeed ),_dacea .minDepth (),_dacea .maxDepth (),_gcdd ,false ,false )> 0{_agcfa =true ;
};if _agcfa {continue ;};_defa :=_agddda .scanBand ("",_dacea ,_bfde (_bggfa ,_cbeb ),_dacea .minDepth (),_dacea .maxDepth (),_cgga ,true ,false );if _defa > 0{_fbgd :=(_dacea .maxDepth ()-_dacea .minDepth ())/_dacea ._dagd ;if (_defa > 1&&float64 (_defa )> 0.3*_fbgd )||_defa <=10{if _agddda .scanBand ("\u006f\u0074\u0068e\u0072",_dacea ,_bfde (_bggfa ,_cbeb ),_dacea .minDepth (),_dacea .maxDepth (),_cgga ,false ,true )> 0{_agcfa =true ;
};};};};_cdee =append (_cdee ,_dacea );};};return _cdee ;};type ruling struct{_egagd rulingKind ;_aeecd markKind ;_gf .Color ;_gabcd float64 ;_cdcd float64 ;_dcgf float64 ;_dagdf float64 ;};func _abgd (_edfe ,_abab float64 )bool {return _e .Abs (_edfe -_abab )<=_dgbg };
func (_gffa paraList )toTextMarks ()[]TextMark {_ffced :=0;var _gdce []TextMark ;for _gcgfc ,_edab :=range _gffa {if _edab ._ddda {continue ;};_fecgd :=_edab .toTextMarks (&_ffced );_gdce =append (_gdce ,_fecgd ...);if _gcgfc !=len (_gffa )-1{if _bfab (_edab ,_gffa [_gcgfc +1]){_gdce =_dbgab (_gdce ,&_ffced ,"\u0020");
}else {_gdce =_dbgab (_gdce ,&_ffced ,"\u000a");_gdce =_dbgab (_gdce ,&_ffced ,"\u000a");};};};_gdce =_dbgab (_gdce ,&_ffced ,"\u000a");_gdce =_dbgab (_gdce ,&_ffced ,"\u000a");return _gdce ;};