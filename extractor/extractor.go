//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package extractor is used for quickly extracting PDF content through a simple interface.
// Currently offers functionality for extracting textual content.
package extractor ;import (_ca "bytes";_caa "errors";_ga "fmt";_fb "github.com/unidoc/unipdf/v4/common";_ad "github.com/unidoc/unipdf/v4/contentstream";_e "github.com/unidoc/unipdf/v4/core";_cb "github.com/unidoc/unipdf/v4/internal/license";_ac "github.com/unidoc/unipdf/v4/internal/textencoding";
_ge "github.com/unidoc/unipdf/v4/internal/transform";_dc "github.com/unidoc/unipdf/v4/model";_cf "golang.org/x/image/draw";_fbd "golang.org/x/text/unicode/norm";_cd "image";_cc "image/color";_f "io";_bff "math";_c "reflect";_d "regexp";_a "sort";_ba "strings";
_bf "unicode";_g "unicode/utf8";);

// ApplyArea processes the page text only within the specified area `bbox`.
// Each time ApplyArea is called, it updates the result set in `pt`.
// Can be called multiple times in a row with different bounding boxes.
func (_bgc *PageText )ApplyArea (bbox _dc .PdfRectangle ){_abaa :=make ([]*textMark ,0,len (_bgc ._aaaa ));for _ ,_eab :=range _bgc ._aaaa {if _efdg (_eab .bbox (),bbox ){_abaa =append (_abaa ,_eab );};};var _fecac paraList ;_ccccf :="";_ffga :=len (_abaa );
for _gage :=0;_gage < 360&&_ffga > 0;_gage +=90{_ggcf :=make ([]*textMark ,0,len (_abaa )-_ffga );for _ ,_gdee :=range _abaa {if _gdee ._efdgf ==_gage {_ggcf =append (_ggcf ,_gdee );};};if len (_ggcf )> 0{if _bgc ._fgga ._cgda ==ExtractionModePlain {_ccccf +=_ecce (_ggcf ,_bgc ._becab );
}else {_eced :=_afafd (_ggcf ,_bgc ._becab ,nil ,nil ,_bgc ._fgga ._cgda ==ExtractionModeLayoutNoBreaks );_fecac =append (_fecac ,_eced ...);};_ffga -=len (_ggcf );};};if _bgc ._fgga ._cgda ==ExtractionModePlain {_bgc ._faaa =_ccccf ;}else {_egce :=new (_ca .Buffer );
_bbgb :=&textContext {_bdfeb :_bgc ._fgga ._dacb };_fecac .writeText (_egce ,_bbgb );_bgc ._faaa =_egce .String ();_bgc ._dfeeb =_fecac .toTextMarks (_bbgb );_bgc ._dbga =_fecac .tables (_bbgb );};};func _gbacc (_dafa ,_cgeg bounded )float64 {_dgfe :=_ccefe (_dafa ,_cgeg );
if !_ggdae (_dgfe ){return _dgfe ;};return _cagg (_dafa ,_cgeg );};func (_fdab *textTable )logComposite (_efcd string ){if !_feed {return ;};_fb .Log .Info ("\u007e~\u007eP\u0061\u0072\u0061\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_fdab ._dgbf ,_fdab ._gfdgb ,_efcd );
_ga .Printf ("\u0025\u0035\u0073 \u007c","");for _ccfd :=0;_ccfd < _fdab ._dgbf ;_ccfd ++{_ga .Printf ("\u0025\u0033\u0064 \u007c",_ccfd );};_ga .Println ("");_ga .Printf ("\u0025\u0035\u0073 \u002b","");for _ceada :=0;_ceada < _fdab ._dgbf ;_ceada ++{_ga .Printf ("\u0025\u0033\u0073 \u002b","\u002d\u002d\u002d");
};_ga .Println ("");for _baeccg :=0;_baeccg < _fdab ._gfdgb ;_baeccg ++{_ga .Printf ("\u0025\u0035\u0064 \u007c",_baeccg );for _acadb :=0;_acadb < _fdab ._dgbf ;_acadb ++{_acdad ,_ :=_fdab ._dffge [_egfde (_acadb ,_baeccg )].parasBBox ();_ga .Printf ("\u0025\u0033\u0064 \u007c",len (_acdad ));
};_ga .Println ("");};_fb .Log .Info ("\u007e~\u007eT\u0065\u0078\u0074\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_fdab ._dgbf ,_fdab ._gfdgb ,_efcd );_ga .Printf ("\u0025\u0035\u0073 \u007c","");for _gddfc :=0;_gddfc < _fdab ._dgbf ;_gddfc ++{_ga .Printf ("\u0025\u0031\u0032\u0064\u0020\u007c",_gddfc );
};_ga .Println ("");_ga .Printf ("\u0025\u0035\u0073 \u002b","");for _gbaceg :=0;_gbaceg < _fdab ._dgbf ;_gbaceg ++{_ga .Print ("\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d-\u002d\u002d\u002d\u002b");};_ga .Println ("");for _cbdag :=0;_cbdag < _fdab ._gfdgb ;
_cbdag ++{_ga .Printf ("\u0025\u0035\u0064 \u007c",_cbdag );for _gaab :=0;_gaab < _fdab ._dgbf ;_gaab ++{_dffeb ,_ :=_fdab ._dffge [_egfde (_gaab ,_cbdag )].parasBBox ();_fcdee :="";_cfagcd :=_dffeb .merge ();if _cfagcd !=nil {_fcdee =_cfagcd .text ();
};_fcdee =_ga .Sprintf ("\u0025\u0071",_adbcg (_fcdee ,12));_fcdee =_fcdee [1:len (_fcdee )-1];_ga .Printf ("\u0025\u0031\u0032\u0073\u0020\u007c",_fcdee );};_ga .Println ("");};};func _bd (_bfa []string ,_cg int ,_fe int ,_bdd string ){for _fbb :=_cg ;
_fbb < _fe ;_fbb ++{_bfa [_fbb ]=_bdd ;};};func (_ggec *wordBag )firstReadingIndex (_acbd int )int {_bcfbg :=_ggec .firstWord (_acbd )._ffagg ;_baef :=float64 (_acbd +1)*_fbbf ;_afbd :=_baef +_dadcg *_bcfbg ;_ebcf :=_acbd ;for _ ,_fcae :=range _ggec .depthBand (_baef ,_afbd ){if _ccefe (_ggec .firstWord (_fcae ),_ggec .firstWord (_ebcf ))< 0{_ebcf =_fcae ;
};};return _ebcf ;};func (_edcag lineRuling )yMean ()float64 {return 0.5*(_edcag ._dabae .Y +_edcag ._cebaf .Y )};func _fbeg (_beab *Extractor ,_beca *_dc .PdfPageResources ,_gfabg _ad .GraphicsState ,_beea *textState ,_afbgb *stateStack )*textObject {return &textObject {_ccee :_beab ,_fadg :_beca ,_gefga :_gfabg ,_egfd :_afbgb ,_fbab :_beea ,_ddge :_ge .IdentityMatrix (),_ffcc :_ge .IdentityMatrix ()};
};func _cedf (_ccbb _ge .Matrix )_ge .Point {_gbaa ,_baed :=_ccbb .Translation ();return _ge .Point {X :_gbaa ,Y :_baed };};func (_gbbcd *textTable )get (_ebea ,_ecceg int )*textPara {return _gbbcd ._ddbd [_egfde (_ebea ,_ecceg )]};

// Font represents the font properties on a PDF page.
type Font struct{PdfFont *_dc .PdfFont ;

// FontName represents Font Name from font properties.
FontName string ;

// FontType represents Font Subtype entry in the font dictionary inside page resources.
// Examples : type0, Type1, MMType1, Type3, TrueType, CIDFont.
FontType string ;

// ToUnicode is true if font provides a `ToUnicode` mapping.
ToUnicode bool ;

// IsCID is true if underlying font is a composite font.
// Composite font is represented by a font dictionary whose Subtype is `Type0`
IsCID bool ;

// IsSimple is true if font is simple font.
// A simple font is limited to only 8 bit (255) character codes.
IsSimple bool ;

// FontData represents the raw data of the embedded font file.
// It can have format TrueType (TTF), PostScript Font (PFB) or Compact Font Format (CCF).
// FontData value can be indicates from `FontFile`, `FontFile2` or `FontFile3` inside Font Descriptor.
// At most, only one of `FontFile`, `FontFile2` or `FontFile3` will be FontData value.
FontData []byte ;

// FontFileName is a name representing the font. it has format:
// (Font Name) + (Font Type Extension), example: helvetica.ttf.
FontFileName string ;

// FontDescriptor represents metrics and other attributes inside font properties from PDF Structure (Font Descriptor).
FontDescriptor *_dc .PdfFontDescriptor ;};func _cged (_febaf int ,_daca map[int ][]float64 )([]int ,int ){_cgeaa :=make ([]int ,_febaf );_dagf :=0;for _cfebd :=0;_cfebd < _febaf ;_cfebd ++{_cgeaa [_cfebd ]=_dagf ;_dagf +=len (_daca [_cfebd ])+1;};return _cgeaa ,_dagf ;
};func (_abfgc *wordBag )allWords ()[]*textWord {var _dbcc []*textWord ;for _ ,_eaac :=range _abfgc ._bdde {_dbcc =append (_dbcc ,_eaac ...);};return _dbcc ;};func (_facbg *textWord )appendMark (_cgagf *textMark ,_cdfffc _dc .PdfRectangle ){_facbg ._fbgfg =append (_facbg ._fbgfg ,_cgagf );
_facbg .PdfRectangle =_bddd (_facbg .PdfRectangle ,_cgagf .PdfRectangle );if _cgagf ._ggfcd > _facbg ._ffagg {_facbg ._ffagg =_cgagf ._ggfcd ;};_facbg ._dcced =_cdfffc .Ury -_facbg .Lly ;};func (_ddgeg *shapesState )drawRectangle (_efae ,_gdbe ,_eabg ,_fbdb float64 ){if _aaaef {_dcgd :=_ddgeg .devicePoint (_efae ,_gdbe );
_bdee :=_ddgeg .devicePoint (_efae +_eabg ,_gdbe +_fbdb );_ecbg :=_dc .PdfRectangle {Llx :_dcgd .X ,Lly :_dcgd .Y ,Urx :_bdee .X ,Ury :_bdee .Y };_fb .Log .Info ("d\u0072a\u0077\u0052\u0065\u0063\u0074\u0061\u006e\u0067l\u0065\u003a\u0020\u00256.\u0032\u0066",_ecbg );
};_ddgeg .newSubPath ();_ddgeg .moveTo (_efae ,_gdbe );_ddgeg .lineTo (_efae +_eabg ,_gdbe );_ddgeg .lineTo (_efae +_eabg ,_gdbe +_fbdb );_ddgeg .lineTo (_efae ,_gdbe +_fbdb );_ddgeg .closePath ();};func _fgded (_ebgg func (*wordBag ,*textWord ,float64 )bool ,_cgcc float64 )func (*wordBag ,*textWord )bool {return func (_cadb *wordBag ,_gabf *textWord )bool {return _ebgg (_cadb ,_gabf ,_cgcc )};
};func _cgb (_eegeb *textLine ,_eaag []*textLine ,_gdeb ,_gdffd float64 )[]*textLine {_fece :=[]*textLine {};for _ ,_gacd :=range _eaag {if _gacd ._bfbe >=_gdeb {if _gdffd !=-1&&_gacd ._bfbe < _gdffd {if _gacd .text ()!=_eegeb .text (){if _bff .Round (_gacd .Llx )< _bff .Round (_eegeb .Llx ){break ;
};_fece =append (_fece ,_gacd );};}else if _gdffd ==-1{if _gacd ._bfbe ==_eegeb ._bfbe {if _gacd .text ()!=_eegeb .text (){_fece =append (_fece ,_gacd );};continue ;};_efff :=_ebbb (_eegeb ,_eaag );if _efff !=-1&&_gacd ._bfbe <=_efff {_fece =append (_fece ,_gacd );
};};};};return _fece ;};func (_gbff *PageText )getParagraphs ()paraList {var _cag rulingList ;if _efda {_bebbg :=_bcgcf (_gbff ._gdafg );_cag =append (_cag ,_bebbg ...);};if _baab {_ffb :=_bafd (_gbff ._dcaag );_cag =append (_cag ,_ffb ...);};_cag ,_bfbg :=_cag .toTilings ();
var _fgab paraList ;_fbfd :=len (_gbff ._aaaa );for _bbea :=0;_bbea < 360&&_fbfd > 0;_bbea +=90{_ggce :=make ([]*textMark ,0,len (_gbff ._aaaa )-_fbfd );for _ ,_faca :=range _gbff ._aaaa {if _faca ._efdgf ==_bbea {_ggce =append (_ggce ,_faca );};};if len (_ggce )> 0{_edb :=_afafd (_ggce ,_gbff ._becab ,_cag ,_bfbg ,_gbff ._fgga ._cgda ==ExtractionModeLayoutNoBreaks );
_fgab =append (_fgab ,_edb ...);_fbfd -=len (_ggce );};};return _fgab ;};func _ggadg (_ceac *list ,_fccg *string )string {_egaf :=_ba .Split (_ceac ._cddg ,"\u000a");_faabc :=&_ba .Builder {};for _ ,_gbde :=range _egaf {if _gbde !=""{_faabc .WriteString (*_fccg );
_faabc .WriteString (_gbde );_faabc .WriteString ("\u000a");};};return _faabc .String ();};func (_gffb *textObject )checkOp (_bdbd *_ad .ContentStreamOperation ,_adcc int ,_gefcg bool )(_bbbf bool ,_agba error ){if _gffb ==nil {var _gbdd []_e .PdfObject ;
if _adcc > 0{_gbdd =_bdbd .Params ;if len (_gbdd )> _adcc {_gbdd =_gbdd [:_adcc ];};};_fb .Log .Debug ("\u0025\u0023q \u006f\u0070\u0065r\u0061\u006e\u0064\u0020out\u0073id\u0065\u0020\u0074\u0065\u0078\u0074\u002e p\u0061\u0072\u0061\u006d\u0073\u003d\u0025+\u0076",_bdbd .Operand ,_gbdd );
};if _adcc >=0{if len (_bdbd .Params )!=_adcc {if _gefcg {_agba =_caa .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");};_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_bdbd .Operand ,_adcc ,len (_bdbd .Params ),_bdbd .Params );
return false ,_agba ;};};return true ,nil ;};

// Search searches the pages specified by `pages`.
func (_dcdb *Editor )Search (pattern string ,pages []int )(map[int ]Match ,error ){_cbgf ,_ ,_cea :=_dcdb .getMatches (pattern ,pages );return _cbgf ,_cea ;};var _ccb =false ;func (_egeda *textTable )bbox ()_dc .PdfRectangle {return _egeda .PdfRectangle };


// Elements returns the TextMarks in `ma`.
func (_dcgb *TextMarkArray )Elements ()[]TextMark {return _dcgb ._dadfg };func (_ebff *textPara )getListLines ()[]*textLine {var _degb []*textLine ;_gccb :=_gegd (_ebff ._bdea );for _ ,_dcef :=range _ebff ._bdea {_ccbd :=_dcef ._cfad [0]._eagba [0];if _baec (_ccbd ){_degb =append (_degb ,_dcef );
};};_degb =append (_degb ,_gccb ...);return _degb ;};func _abee (_aeead _ge .Point )_ge .Matrix {return _ge .TranslationMatrix (_aeead .X ,_aeead .Y )};func _dgfc (_eagd _dc .PdfRectangle )*ruling {return &ruling {_caefd :_dagd ,_fdbaa :_eagd .Lly ,_ddgcef :_eagd .Llx ,_afcga :_eagd .Urx };
};func (_eged *wordBag )empty (_dddbc int )bool {_ ,_cddd :=_eged ._bdde [_dddbc ];return !_cddd };func _ffbaa (_efab ,_fcag ,_ccgcd ,_fdagb *textPara )*textTable {_ccfe :=&textTable {_dgbf :2,_gfdgb :2,_ddbd :make (map[uint64 ]*textPara ,4)};_ccfe .put (0,0,_efab );
_ccfe .put (1,0,_fcag );_ccfe .put (0,1,_ccgcd );_ccfe .put (1,1,_fdagb );return _ccfe ;};func (_adae *textObject )moveText (_fed ,_fgbc float64 ){_adae .moveLP (_fed ,_fgbc )};func (_ae *imageExtractContext )extractXObjectImage (_dgc *_e .PdfObjectName ,_ffa _ad .GraphicsState ,_cgf *_dc .PdfPageResources )error {_cdf ,_ :=_cgf .GetXObjectByName (*_dgc );
if _cdf ==nil {return nil ;};_ega ,_faf :=_ae ._cgde [_cdf ];if !_faf {_cae ,_bbeb :=_cgf .GetXObjectImageByName (*_dgc );if _bbeb !=nil {return _bbeb ;};if _cae ==nil {return nil ;};_feac ,_bbeb :=_cae .ToImage ();if _bbeb !=nil {return _bbeb ;};var _fgd _cd .Image ;
if _cae .Mask !=nil {if _fgd ,_bbeb =_feagf (_cae .Mask ,_cc .Opaque );_bbeb !=nil {_fb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a \u0063\u006f\u0075\u006c\u0064 \u006eo\u0074\u0020\u0067\u0065\u0074\u0020\u0065\u0078\u0070\u006c\u0069\u0063\u0069\u0074\u0020\u0069\u006d\u0061\u0067e\u0020\u006d\u0061\u0073\u006b\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e");
};}else if _cae .SMask !=nil {_fgd ,_bbeb =_bcba (_cae .SMask ,_cc .Opaque );if _bbeb !=nil {_fb .Log .Debug ("W\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0067\u0065\u0074\u0020\u0073\u006f\u0066\u0074\u0020\u0069\u006da\u0067e\u0020\u006d\u0061\u0073k\u002e\u0020O\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u002e");
};};if _fgd !=nil {_dgg ,_bgf :=_feac .ToGoImage ();if _bgf !=nil {return _bgf ;};_dgg =_ebegb (_dgg ,_fgd );switch _cae .ColorSpace .String (){case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0049n\u0064\u0065\u0078\u0065\u0064":_feac ,_bgf =_dc .ImageHandling .NewGrayImageFromGoImage (_dgg );
if _bgf !=nil {return _bgf ;};default:_feac ,_bgf =_dc .ImageHandling .NewImageFromGoImage (_dgg );if _bgf !=nil {return _bgf ;};};};_ega =&cachedImage {_bece :_feac ,_gbeg :_cae .ColorSpace };_ae ._cgde [_cdf ]=_ega ;};_cbee :=_ega ._bece ;_acbg :=_ega ._gbeg ;
_aaag ,_aed :=_acbg .ImageToRGB (*_cbee );if _aed !=nil {return _aed ;};_fb .Log .Debug ("@\u0044\u006f\u0020\u0043\u0054\u004d\u003a\u0020\u0025\u0073",_ffa .CTM .String ());_dbg :=ImageMark {Image :&_aaag ,Width :_ffa .CTM .ScalingFactorX (),Height :_ffa .CTM .ScalingFactorY (),Angle :_ffa .CTM .Angle ()};
_dbg .X ,_dbg .Y =_ffa .CTM .Translation ();_ae ._ebb =append (_ae ._ebb ,_dbg );_ae ._cbde ++;return nil ;};func (_gfce *textObject )reset (){_gfce ._ddge =_ge .IdentityMatrix ();_gfce ._ffcc =_ge .IdentityMatrix ();_gfce ._bgab =nil ;};func (_adcfe compositeCell )hasLines (_dcgcd []*textLine )bool {for _efgd ,_gbdc :=range _dcgcd {_baafe :=_efdg (_adcfe .PdfRectangle ,_gbdc .PdfRectangle );
if _feed {_ga .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u005e\u005e\u005e\u0069\u006e\u0074\u0065\u0072\u0073e\u0063t\u0073\u003d\u0025\u0074\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u000a",_baafe ,_efgd ,len (_dcgcd ));_ga .Printf ("\u0020\u0020\u0020\u0020  \u005e\u005e\u005e\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025s\u000a",_adcfe );
_ga .Printf ("\u0020 \u0020 \u0020\u0020\u0020\u006c\u0069\u006e\u0065\u003d\u0025\u0073\u000a",_gbdc );};if _baafe {return true ;};};return false ;};

// List returns all the list objects detected on the page.
// It detects all the bullet point Lists from a given pdf page and builds a slice of bullet list objects.
// A given bullet list object has a tree structure.
// Each bullet point list is extracted with the text content it contains and all the sub lists found under it as children in the tree.
// The rest content of the pdf is ignored and only text in the bullet point lists are extracted.
// The list extraction is done in two ways.
// 1. If the document is tagged then the lists are extracted using the tags provided in the document.
// 2. Otherwise the bullet lists are extracted from the raw text using regex matching.
// By default the document tag is used if available.
// However this can be disabled using `DisableDocumentTags` in the `Options` object.
// Sometimes disabling document tags option might give a better bullet list extraction if the document was tagged incorrectly.
//
//	    options := &Options{
//		     DisableDocumentTags: false, // this means use document tag if available
//	    }
//	    ex, err := NewWithOptions(page, options)
//	    // handle error
//	    pageText, _, _, err := ex.ExtractPageText()
//	    // handle error
//	    lists := pageText.List()
//	    txt := lists.Text()
func (_dcda PageText )List ()lists {_gcgd :=!_dcda ._fgga ._edff ;_bfec :=_dcda .getParagraphs ();_bfacd :=_bfec .list ();if _dcda ._ceea !=nil &&_gcgd {_aaeea :=_caef (&_bfec );if len (_dcda ._ceea .K )==0{_fb .Log .Debug ("\u004c\u0069\u0073\u0074\u003a\u0020\u0073t\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e'\u0074\u0020\u0068\u0061\u0076e\u0020\u0061\u006e\u0079\u0020\u0063\u006f\u006e\u0074e\u006e\u0074\u002c\u0020\u0075\u0073\u0069\u006e\u0067\u0020\u0074\u0065\u0078\u0074\u0020\u006d\u0061\u0074\u0063\u0068\u0069\u006e\u0067\u0020\u006d\u0065\u0074\u0068\u006f\u0064\u0020\u0069\u006e\u0073\u0074\u0065\u0061\u0064\u002e");
return _bfacd ;};_bfacd =_eagb (_dcda ._ceea ,_aaeea ,_dcda ._debec );};return _bfacd ;};func _becgg (_caga _dc .PdfRectangle ,_ecafd ,_degf ,_ddba ,_dcgae *ruling )gridTile {_ebbbb :=_caga .Llx ;_bbbc :=_caga .Urx ;_cgabf :=_caga .Lly ;_ebgb :=_caga .Ury ;
return gridTile {PdfRectangle :_caga ,_eaead :_ecafd !=nil &&_ecafd .encloses (_cgabf ,_ebgb ),_gggfa :_degf !=nil &&_degf .encloses (_cgabf ,_ebgb ),_adffd :_ddba !=nil &&_ddba .encloses (_ebbbb ,_bbbc ),_abcae :_dcgae !=nil &&_dcgae .encloses (_ebbbb ,_bbbc )};
};func _adeg (_deec ,_cdad float64 )bool {return _deec /_bff .Max (_fcbfe ,_cdad )< _gecc };type textState struct{_ebe float64 ;_eafb float64 ;_cggfd float64 ;_cdcd float64 ;_eadb float64 ;_gdg RenderMode ;_edfd float64 ;_fbafg *_dc .PdfFont ;_cacf _dc .PdfRectangle ;
_accc int ;_gfgb int ;};func _cgfga (_baebg ,_egff *textPara )bool {return _ebggb (_baebg ._fcfaa ,_egff ._fcfaa )};func (_dcde rulingList )comp (_gcee ,_gafac int )bool {_eagaf ,_dbbae :=_dcde [_gcee ],_dcde [_gafac ];_faebb ,_aafad :=_eagaf ._caefd ,_dbbae ._caefd ;
if _faebb !=_aafad {return _faebb > _aafad ;};if _faebb ==_ebecb {return false ;};_acaf :=func (_bbdec bool )bool {if _faebb ==_dagd {return _bbdec ;};return !_bbdec ;};_cdgg ,_cbbe :=_eagaf ._fdbaa ,_dbbae ._fdbaa ;if _cdgg !=_cbbe {return _acaf (_cdgg > _cbbe );
};_cdgg ,_cbbe =_eagaf ._ddgcef ,_dbbae ._ddgcef ;if _cdgg !=_cbbe {return _acaf (_cdgg < _cbbe );};return _acaf (_eagaf ._afcga < _dbbae ._afcga );};func _baec (_agfd byte )bool {for _ ,_cfff :=range _gfeb {if []byte (_cfff )[0]==_agfd {return true ;};
};return false ;};func _cbede (_ceeb ,_ddbb *textPara )bool {if _ceeb ._fcgc ||_ddbb ._fcgc {return true ;};return _ggdae (_ceeb .depth ()-_ddbb .depth ());};type textContext struct{_bdfeb bool };type lineRuling struct{_dbafgb rulingKind ;_aaea markKind ;
_cc .Color ;_dabae ,_cebaf _ge .Point ;};func (_dcb *imageExtractContext )extractContentStreamImages (_bgdf string ,_dfc *_dc .PdfPageResources )error {_aba :=_ad .NewContentStreamParser (_bgdf );_cfbb ,_bfd :=_aba .Parse ();if _bfd !=nil {return _bfd ;
};if _dcb ._cgde ==nil {_dcb ._cgde =map[*_e .PdfObjectStream ]*cachedImage {};};if _dcb ._bcf ==nil {_dcb ._bcf =&ImageExtractOptions {};};_gagb :=_ad .NewContentStreamProcessor (*_cfbb );_gagb .AddHandler (_ad .HandlerConditionEnumAllOperands ,"",_dcb .processOperand );
return _gagb .Process (_dfc );};func (_gbga *subpath )clear (){*_gbga =subpath {}};func _cbcg (_aeff ,_gbaf float64 )string {_aceg :=!_ggdae (_aeff -_gbaf );if _aceg {return "\u000a";};return "\u0020";};func (_afcb compositeCell )split (_fagc ,_cebdf []float64 )*textTable {_dbaf :=len (_fagc )+1;
_bfge :=len (_cebdf )+1;if _feed {_fb .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0043\u0065l\u006c\u002e\u0073\u0070l\u0069\u0074\u003a\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a\u0009\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025\u0073\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073=\u0025\u0036\u002e\u0032\u0066\u000a\t\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d%\u0036\u002e\u0032\u0066",_bfge ,_dbaf ,_afcb ,_fagc ,_cebdf );
_ga .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073\u000a",len (_afcb .paraList ));for _ffcgb ,_fdcg :=range _afcb .paraList {_ga .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ffcgb ,_fdcg .String ());};
_ga .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",len (_afcb .lines ()));for _fffg ,_gfba :=range _afcb .lines (){_ga .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fffg ,_gfba );};};_fagc =_beeg (_fagc ,_afcb .Ury ,_afcb .Lly );
_cebdf =_beeg (_cebdf ,_afcb .Llx ,_afcb .Urx );_ggga :=make (map[uint64 ]*textPara ,_bfge *_dbaf );_cadga :=textTable {_dgbf :_bfge ,_gfdgb :_dbaf ,_ddbd :_ggga };_cbgd :=_afcb .paraList ;_a .Slice (_cbgd ,func (_deac ,_adca int )bool {_fcfgg ,_deaf :=_cbgd [_deac ],_cbgd [_adca ];
_gbbdf ,_cgebe :=_fcfgg .Lly ,_deaf .Lly ;if _gbbdf !=_cgebe {return _gbbdf < _cgebe ;};return _fcfgg .Llx < _deaf .Llx ;});_dbafg :=make (map[uint64 ]_dc .PdfRectangle ,_bfge *_dbaf );for _gcbbg ,_egeg :=range _fagc [1:]{_acecc :=_fagc [_gcbbg ];for _cdfc ,_fcgce :=range _cebdf [1:]{_cccb :=_cebdf [_cdfc ];
_dbafg [_egfde (_cdfc ,_gcbbg )]=_dc .PdfRectangle {Llx :_cccb ,Urx :_fcgce ,Lly :_egeg ,Ury :_acecc };};};if _feed {_fb .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0043\u0065l\u006c\u002e\u0073\u0070\u006c\u0069\u0074\u003a\u0020\u0072e\u0063\u0074\u0073");
_ga .Printf ("\u0020\u0020\u0020\u0020");for _cgdg :=0;_cgdg < _bfge ;_cgdg ++{_ga .Printf ("\u0025\u0033\u0030\u0064\u002c\u0020",_cgdg );};_ga .Println ();for _gfabbc :=0;_gfabbc < _dbaf ;_gfabbc ++{_ga .Printf ("\u0020\u0020\u0025\u0032\u0064\u003a",_gfabbc );
for _daada :=0;_daada < _bfge ;_daada ++{_ga .Printf ("\u00256\u002e\u0032\u0066\u002c\u0020",_dbafg [_egfde (_daada ,_gfabbc )]);};_ga .Println ();};};_gefac :=func (_bede *textLine )(int ,int ){for _caead :=0;_caead < _dbaf ;_caead ++{for _decd :=0;_decd < _bfge ;
_decd ++{if _afabd (_dbafg [_egfde (_decd ,_caead )],_bede .PdfRectangle ){return _decd ,_caead ;};};};return -1,-1;};_cegcd :=make (map[uint64 ][]*textLine ,_bfge *_dbaf );for _ ,_defbd :=range _cbgd .lines (){_efcg ,_egdd :=_gefac (_defbd );if _efcg < 0{continue ;
};_cegcd [_egfde (_efcg ,_egdd )]=append (_cegcd [_egfde (_efcg ,_egdd )],_defbd );};for _gcde :=0;_gcde < len (_fagc )-1;_gcde ++{_eace :=_fagc [_gcde ];_bdce :=_fagc [_gcde +1];for _cbabb :=0;_cbabb < len (_cebdf )-1;_cbabb ++{_dfgbd :=_cebdf [_cbabb ];
_agfgd :=_cebdf [_cbabb +1];_fbfg :=_dc .PdfRectangle {Llx :_dfgbd ,Urx :_agfgd ,Lly :_bdce ,Ury :_eace };_gcac :=_cegcd [_egfde (_cbabb ,_gcde )];if len (_gcac )==0{continue ;};_dedbe :=_bgedf (_fbfg ,_gcac );_cadga .put (_cbabb ,_gcde ,_dedbe );};};return &_cadga ;
};var _aa =[]string {"\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u004f\u004e","\u004f\u004e","\u0041\u004c","\u0045\u0054","\u0045\u0054","\u0041\u004c","\u0043\u0053","\u0041\u004c","\u004f\u004e","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0041\u004e","\u0045\u0054","\u0041\u004e","\u0041\u004e","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004e","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004f\u004e","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u004e\u0053\u004d","\u0041\u004c","\u0041\u004c","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c","\u0041\u004c"};
func (_fggg *textObject )renderText (_cgga _e .PdfObject ,_agee []byte ,_gcef int ,_debe string )error {if _fggg ._cead {_fb .Log .Debug ("\u0072\u0065\u006e\u0064\u0065r\u0054\u0065\u0078\u0074\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069\u0064 \u0066\u006f\u006e\u0074\u002e\u0020\u004e\u006f\u0074\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u002e");
return nil ;};_fgbb :=_fggg .getCurrentFont ();_cccc :=_fgbb .BytesToCharcodes (_agee );var (_dcbe []string ;_aaded int ;_dbef int ;);if _debe !=""{_dcbe =[]string {_e .MakeString (_debe ).Decoded ()};_aaded =1;}else {_dcbe ,_aaded ,_dbef =_fgbb .CharcodesToStrings (_cccc ,"");
if _dbef > 0{_fb .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_aaded ,_dbef );};};_fggg ._fbab ._accc +=_aaded ;_fggg ._fbab ._gfgb +=_dbef ;
_gacf :=_fggg ._fbab ;_fege :=_gacf ._eadb ;_fbdd :=_gacf ._cggfd /100.0;_fffc :=_bfacf ;if _fgbb .Subtype ()=="\u0054\u0079\u0070e\u0033"{_fffc =1;};_aecg ,_adgb :=_fgbb .GetRuneMetrics (' ');if !_adgb {_aecg ,_adgb =_fgbb .GetCharMetrics (32);};if !_adgb {_aecg ,_ =_dc .DefaultFont ().GetRuneMetrics (' ');
};_gcdc :=_aecg .Wx *_fffc ;_fb .Log .Trace ("\u0073p\u0061\u0063e\u0057\u0069\u0064t\u0068\u003d\u0025\u002e\u0032\u0066\u0020t\u0065\u0078\u0074\u003d\u0025\u0071 \u0066\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0066\u006f\u006et\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",_gcdc ,_dcbe ,_fgbb ,_fege );
_ddc :=_ge .NewMatrix (_fege *_fbdd ,0,0,_fege ,0,_gacf ._edfd );if _ecbc {_fb .Log .Info ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0074\u0065\u0078t\u0073\u003d\u0025\u0071",len (_cccc ),_cccc ,_dcbe );
};_fb .Log .Trace ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0072\u0075\u006ee\u0073\u003d\u0025\u0071",len (_cccc ),_cccc ,len (_dcbe ));_gfabb :=_fggg .getFillColor ();
_eegee :=_fggg .getStrokeColor ();for _dcaa ,_edda :=range _dcbe {_beed :=[]rune (_edda );if len (_beed )==1&&_beed [0]=='\x00'{continue ;};_ebc :=_cccc [_dcaa ];_ecaf :=_fggg ._gefga .CTM .Mult (_fggg ._ddge ).Mult (_ddc );_caafc :=0.0;if len (_beed )==1&&_beed [0]==32{_caafc =_gacf ._eafb ;
};_ecad ,_dfb :=_fgbb .GetCharMetrics (_ebc );if !_dfb {_fb .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u004e\u006f \u006d\u0065\u0074r\u0069\u0063\u0020\u0066\u006f\u0072\u0020\u0063\u006fde\u003d\u0025\u0064 \u0072\u003d0\u0078\u0025\u0030\u0034\u0078\u003d%\u002b\u0071 \u0025\u0073",_ebc ,_beed ,_beed ,_fgbb );
return _ga .Errorf ("\u006e\u006f\u0020\u0063\u0068\u0061\u0072\u0020\u006d\u0065\u0074\u0072\u0069\u0063\u0073:\u0020f\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0063\u006f\u0064\u0065\u003d\u0025\u0064",_fgbb .String (),_ebc );};_gaf :=_ge .Point {X :_ecad .Wx *_fffc ,Y :_ecad .Wy *_fffc };
_ecd :=_ge .Point {X :(_gaf .X *_fege +_caafc )*_fbdd };_gead :=_ge .Point {X :(_gaf .X *_fege +_gacf ._ebe +_caafc )*_fbdd };if _ecbc {_fb .Log .Info ("\u0074\u0066\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0063\u003d\u0025\u002e\u0032f\u0020t\u0077\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_fege ,_gacf ._ebe ,_gacf ._eafb ,_fbdd );
_fb .Log .Info ("\u0064x\u002c\u0064\u0079\u003d%\u002e\u0033\u0066\u0020\u00740\u003d%\u002e3\u0066\u0020\u0074\u003d\u0025\u002e\u0033f",_gaf ,_ecd ,_gead );};_agbg :=_abee (_ecd );_bcfb :=_abee (_gead );_dfgb :=_fggg ._gefga .CTM .Mult (_fggg ._ddge ).Mult (_agbg );
if _aaca {_fb .Log .Info ("e\u006e\u0064\u003a\u000a\tC\u0054M\u003d\u0025\u0073\u000a\u0009 \u0074\u006d\u003d\u0025\u0073\u000a"+"\u0009\u0020t\u0064\u003d\u0025s\u0020\u0078\u006c\u0061\u0074\u003d\u0025\u0073\u000a"+"\u0009t\u0064\u0030\u003d\u0025s\u000a\u0009\u0020\u0020\u2192 \u0025s\u0020x\u006c\u0061\u0074\u003d\u0025\u0073",_fggg ._gefga .CTM ,_fggg ._ddge ,_bcfb ,_cedf (_fggg ._gefga .CTM .Mult (_fggg ._ddge ).Mult (_bcfb )),_agbg ,_dfgb ,_cedf (_dfgb ));
};_eea ,_afeb :=_fggg .newTextMark (_ac .ExpandLigatures (_beed ),_ecaf ,_cedf (_dfgb ),_bff .Abs (_gcdc *_ecaf .ScalingFactorX ()),_fgbb ,_fggg ._fbab ._ebe ,_gfabb ,_eegee ,_cgga ,_dcbe ,_dcaa ,_gcef );if !_afeb {_fb .Log .Debug ("\u0054\u0065\u0078\u0074\u0020\u006d\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069d\u0065 \u0070\u0061\u0067\u0065\u002e\u0020\u0053\u006b\u0069\u0070\u0070\u0069\u006e\u0067");
continue ;};if _fgbb ==nil {_fb .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u002e");}else if _fgbb .Encoder ()==nil {_fb .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020N\u006f\u0020\u0065\u006e\u0063\u006f\u0064\u0069\u006eg\u002e\u0020\u0066o\u006et\u003d\u0025\u0073",_fgbb );
}else {if _beeag ,_eadc :=_fgbb .Encoder ().CharcodeToRune (_ebc );_eadc {_eea ._ddad =string (_beeag );};};_fb .Log .Trace ("i\u003d\u0025\u0064\u0020\u0063\u006fd\u0065\u003d\u0025\u0064\u0020\u006d\u0061\u0072\u006b=\u0025\u0073\u0020t\u0072m\u003d\u0025\u0073",_dcaa ,_ebc ,_eea ,_ecaf );
_fggg ._bgab =append (_fggg ._bgab ,&_eea );_fggg ._ddge .Concat (_bcfb );};return nil ;};func _bdff (_dbbe *wordBag ,_baagg *textWord ,_dggea float64 )bool {return _baagg .Llx < _dbbe .Urx +_dggea &&_dbbe .Llx -_dggea < _baagg .Urx ;};func (_dfec *subpath )last ()_ge .Point {return _dfec ._eaea [len (_dfec ._eaea )-1]};
func (_baca *textObject )setWordSpacing (_gge float64 ){if _baca ==nil {return ;};_baca ._fbab ._eafb =_gge ;};func _abbfg (_eebd []compositeCell )[]float64 {var _geeb []*textLine ;_abdad :=0;for _ ,_ffcefa :=range _eebd {_abdad +=len (_ffcefa .paraList );
_geeb =append (_geeb ,_ffcefa .lines ()...);};_a .Slice (_geeb ,func (_dfaee ,_bbec int )bool {_fcffg ,_cbdce :=_geeb [_dfaee ],_geeb [_bbec ];_gbfb ,_cceg :=_fcffg ._bfbe ,_cbdce ._bfbe ;if !_ggdae (_gbfb -_cceg ){return _gbfb < _cceg ;};return _fcffg .Llx < _cbdce .Llx ;
});if _feed {_ga .Printf ("\u0020\u0020\u0020 r\u006f\u0077\u0042\u006f\u0072\u0064\u0065\u0072\u0073:\u0020%\u0064 \u0070a\u0072\u0061\u0073\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",_abdad ,len (_geeb ));for _eadfa ,_geea :=range _geeb {_ga .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_eadfa ,_geea );
};};var _debgf []float64 ;_cadgf :=_geeb [0];var _dgdfc [][]*textLine ;_bade :=[]*textLine {_cadgf };for _ebggd ,_eefc :=range _geeb [1:]{if _eefc .Ury < _cadgf .Lly {_dbfee :=0.5*(_eefc .Ury +_cadgf .Lly );if _feed {_ga .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u003c\u0020\u0025\u0036.\u0032f\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u003d\u0025\u0036\u002e\u0032\u0066\u000a"+"\u0009\u0020\u0071\u003d\u0025\u0073\u000a\u0009\u0020p\u003d\u0025\u0073\u000a",_ebggd ,_eefc .Ury ,_cadgf .Lly ,_dbfee ,_cadgf ,_eefc );
};_debgf =append (_debgf ,_dbfee );_dgdfc =append (_dgdfc ,_bade );_bade =nil ;};_bade =append (_bade ,_eefc );if _eefc .Lly < _cadgf .Lly {_cadgf =_eefc ;};};if len (_bade )> 0{_dgdfc =append (_dgdfc ,_bade );};if _feed {_ga .Printf (" \u0020\u0020\u0020\u0020\u0020\u0020 \u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073\u003d%\u0036.\u0032\u0066\u000a",_debgf );
};if _feed {_fb .Log .Info ("\u0072\u006f\u0077\u003d\u0025\u0064",len (_eebd ));for _egfa ,_cegeg :=range _eebd {_ga .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_egfa ,_cegeg );};_fb .Log .Info ("\u0067r\u006f\u0075\u0070\u0073\u003d\u0025d",len (_dgdfc ));
for _dagdd ,_ggacbg :=range _dgdfc {_ga .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0064\u000a",_dagdd ,len (_ggacbg ));for _bfffc ,_dabf :=range _ggacbg {_ga .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_bfffc ,_dabf );};};};_fefag :=true ;
for _gacab ,_ggdcb :=range _dgdfc {_cfgef :=true ;for _bcfa ,_egec :=range _eebd {if _feed {_ga .Printf ("\u0020\u0020\u0020\u007e\u007e\u007e\u0067\u0072\u006f\u0075\u0070\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0020\u0063\u0065\u006cl\u0020\u0025\u0064\u0020\u006ff\u0020\u0025d\u0020\u0025\u0073\u000a",_gacab ,len (_dgdfc ),_bcfa ,len (_eebd ),_egec );
};if !_egec .hasLines (_ggdcb ){if _feed {_ga .Printf ("\u0020\u0020\u0020\u0021\u0021\u0021\u0067\u0072\u006f\u0075\u0070\u0020\u0025d\u0020\u006f\u0066\u0020\u0025\u0064 \u0063\u0065\u006c\u006c\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064 \u004f\u0055\u0054\u000a",_gacab ,len (_dgdfc ),_bcfa ,len (_eebd ));
};_cfgef =false ;break ;};};if !_cfgef {_fefag =false ;break ;};};if !_fefag {if _feed {_fb .Log .Info ("\u0072\u006f\u0077\u0020\u0063o\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u0020\u0064\u006f\u006e\u0027\u0074 \u0073\u0070\u0061\u006e\u0020\u0061\u006c\u006c\u0020\u0063\u0065\u006c\u006c\u0073\u0020\u0069\u006e\u0020\u0072\u006f\u0077\u002e\u0020\u0069\u0067\u006e\u006f\u0072\u0069\u006eg");
};_debgf =nil ;};if _feed &&_debgf !=nil {_ga .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u002a\u002a*\u0072\u006f\u0077\u0043\u006f\u0072\u0072i\u0064\u006f\u0072\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u000a",_debgf );};return _debgf ;
};const (_fecg ="\u0045\u0052R\u004f\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u002c\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";
_fea ="\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0043a\u006e\u0027\u0074 g\u0065\u0074\u0020\u0066\u006f\u006et\u0020\u0070\u0072\u006f\u0070\u0065\u0072\u0074\u0069\u0065\u0073\u002c\u0020\u0066\u006fn\u0074\u0020\u006e\u006f\u0074\u0020\u0066\u006fu\u006e\u0064";
_fda ="\u0045\u0052\u0052O\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0067\u0065\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0074\u0072\u0065\u0061\u006d\u002c\u0020\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";_agb ="E\u0052R\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066o\u006e\u0074\u0020\u0066ou\u006e\u0064";
);func (_aeed *shapesState )newSubPath (){_aeed .clearPath ();if _aaaef {_fb .Log .Info ("\u006e\u0065\u0077\u0053\u0075\u0062\u0050\u0061\u0074h\u003a\u0020\u0025\u0073",_aeed );};};func (_ddff *shapesState )lastpointEstablished ()(_ge .Point ,bool ){if _ddff ._fcfg {return _ddff ._dfea ,false ;
};_ecag :=len (_ddff ._facg );if _ecag > 0&&_ddff ._facg [_ecag -1]._dcfc {return _ddff ._facg [_ecag -1].last (),false ;};return _ge .Point {},true ;};func (_efcce paraList )xNeighbours (_cefbca float64 )map[*textPara ][]int {_babe :=make ([]event ,2*len (_efcce ));
if _cefbca ==0{for _ggcb ,_dfce :=range _efcce {_babe [2*_ggcb ]=event {_dfce .Llx ,true ,_ggcb };_babe [2*_ggcb +1]=event {_dfce .Urx ,false ,_ggcb };};}else {for _fgbfd ,_egdaa :=range _efcce {_babe [2*_fgbfd ]=event {_egdaa .Llx -_cefbca *_egdaa .fontsize (),true ,_fgbfd };
_babe [2*_fgbfd +1]=event {_egdaa .Urx +_cefbca *_egdaa .fontsize (),false ,_fgbfd };};};return _efcce .eventNeighbours (_babe );};

// TextTable represents a table.
// Cells are ordered top-to-bottom, left-to-right.
// Cells[y] is the (0-offset) y'th row in the table.
// Cells[y][x] is the (0-offset) x'th column in the table.
type TextTable struct{_dc .PdfRectangle ;W ,H int ;Cells [][]TableCell ;};func (_gbgg *shapesState )lineTo (_acbf ,_dced float64 ){if _aaaef {_fb .Log .Info ("\u006c\u0069\u006eeT\u006f\u0028\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0070\u003d\u0025\u002e\u0032\u0066",_acbf ,_dced ,_gbgg .devicePoint (_acbf ,_dced ));
};_gbgg .addPoint (_acbf ,_dced );};func (_cbdd *PageFonts )extractPageResourcesToFont (_dbb *_dc .PdfPageResources )error {if _dbb .Font ==nil {return _caa .New (_agb );};_ggff ,_ceb :=_e .GetDict (_dbb .Font );if !_ceb {return _caa .New (_fecg );};for _ ,_gdf :=range _ggff .Keys (){var (_ddd =true ;
_bbd []byte ;_gbe string ;);_fdg ,_cga :=_dbb .GetFontByName (_gdf );if !_cga {return _caa .New (_fea );};_cfa ,_cbddb :=_dc .NewPdfFontFromPdfObject (_fdg );if _cbddb !=nil {return _cbddb ;};_fbg :=_cfa .FontDescriptor ();_fg :=_cfa .FontDescriptor ().FontName .String ();
_agd :=_cfa .Subtype ();if _dcd (_cbdd .Fonts ,_fg ){continue ;};if len (_cfa .ToUnicode ())==0{_ddd =false ;};if _fbg .FontFile !=nil {if _bcb ,_fgc :=_e .GetStream (_fbg .FontFile );_fgc {_bbd ,_cbddb =_e .DecodeStream (_bcb );if _cbddb !=nil {return _cbddb ;
};_gbe =_fg +"\u002e\u0070\u0066\u0062";};}else if _fbg .FontFile2 !=nil {if _bec ,_bge :=_e .GetStream (_fbg .FontFile2 );_bge {_bbd ,_cbddb =_e .DecodeStream (_bec );if _cbddb !=nil {return _cbddb ;};_gbe =_fg +"\u002e\u0074\u0074\u0066";};}else if _fbg .FontFile3 !=nil {if _gab ,_gfc :=_e .GetStream (_fbg .FontFile3 );
_gfc {_bbd ,_cbddb =_e .DecodeStream (_gab );if _cbddb !=nil {return _cbddb ;};_gbe =_fg +"\u002e\u0063\u0066\u0066";};};if len (_gbe )< 1{_fb .Log .Debug (_fda );};_gba :=Font {FontName :_fg ,PdfFont :_cfa ,IsCID :_cfa .IsCID (),IsSimple :_cfa .IsSimple (),ToUnicode :_ddd ,FontType :_agd ,FontData :_bbd ,FontFileName :_gbe ,FontDescriptor :_fbg };
_cbdd .Fonts =append (_cbdd .Fonts ,_gba );};return nil ;};

// ExtractFonts returns all font information from the page extractor, including
// font name, font type, the raw data of the embedded font file (if embedded), font descriptor and more.
//
// The argument `previousPageFonts` is used when trying to build a complete font catalog for multiple pages or the entire document.
// The entries from `previousPageFonts` are added to the returned result unless already included in the page, i.e. no duplicate entries.
//
// NOTE: If previousPageFonts is nil, all fonts from the page will be returned. Use it when building up a full list of fonts for a document or page range.
func (_eee *Extractor )ExtractFonts (previousPageFonts *PageFonts )(*PageFonts ,error ){_ebd :=PageFonts {};_egb :=_ebd .extractPageResourcesToFont (_eee ._cfb );if _egb !=nil {return nil ,_egb ;};if previousPageFonts !=nil {for _ ,_bbc :=range previousPageFonts .Fonts {if !_dcd (_ebd .Fonts ,_bbc .FontName ){_ebd .Fonts =append (_ebd .Fonts ,_bbc );
};};};return &PageFonts {Fonts :_ebd .Fonts },nil ;};

// Text returns the extracted page text.
func (_bead PageText )Text ()string {return _bead ._faaa };func _cdda (_cdbc []*textLine ,_cfag map[float64 ][]*textLine ,_agda []float64 ,_ebfg int ,_bcaf ,_fefe float64 )[]*list {_bced :=[]*list {};_dafg :=_ebfg ;_ebfg =_ebfg +1;_ddgb :=_agda [_dafg ];
_accda :=_cfag [_ddgb ];_cfdc :=_gebgg (_accda ,_fefe ,_bcaf );for _ecec ,_fcbfc :=range _cfdc {var _efcc float64 ;_ccfb :=[]*list {};_baaba :=_fcbfc ._bfbe ;_bdgba :=_fefe ;if _ecec < len (_cfdc )-1{_bdgba =_cfdc [_ecec +1]._bfbe ;};if _ebfg < len (_agda ){_ccfb =_cdda (_cdbc ,_cfag ,_agda ,_ebfg ,_baaba ,_bdgba );
};_efcc =_bdgba ;if len (_ccfb )> 0{_fedbg :=_ccfb [0];if len (_fedbg ._gdaa )> 0{_efcc =_fedbg ._gdaa [0]._bfbe ;};};_ceec :=[]*textLine {_fcbfc };_afbab :=_cgb (_fcbfc ,_cdbc ,_baaba ,_efcc );_ceec =append (_ceec ,_afbab ...);_afecb :=_dcccd (_ceec ,"\u0062\u0075\u006c\u006c\u0065\u0074",_ccfb );
_afecb ._cddg =_beff (_ceec ,"");_bced =append (_bced ,_afecb );};return _bced ;};func (_daadb *textMark )inDiacriticArea (_caeaf *textMark )bool {_egge :=_daadb .Llx -_caeaf .Llx ;_bbab :=_daadb .Urx -_caeaf .Urx ;_ggbb :=_daadb .Lly -_caeaf .Lly ;return _bff .Abs (_egge +_bbab )< _daadb .Width ()*_accb &&_bff .Abs (_ggbb )< _daadb .Height ()*_accb ;
};func (_ddga paraList )merge ()*textPara {_fb .Log .Trace ("\u006d\u0065\u0072\u0067\u0065:\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_ddga ));
if len (_ddga )==0{return nil ;};_ddga .sortReadingOrder ();_eacgef :=_ddga [0].PdfRectangle ;_afcf :=_ddga [0]._bdea ;for _ ,_abab :=range _ddga [1:]{_eacgef =_bddd (_eacgef ,_abab .PdfRectangle );_afcf =append (_afcf ,_abab ._bdea ...);};return _bgedf (_eacgef ,_afcf );
};type wordBag struct{_dc .PdfRectangle ;_fgcf float64 ;_ceeaa ,_accd rulingList ;_gdda float64 ;_bdde map[int ][]*textWord ;};func (_caee *textObject )setTextLeading (_ccd float64 ){if _caee ==nil {return ;};_caee ._fbab ._cdcd =_ccd ;};func _geca (_bgec *wordBag ,_fefba float64 ,_adda ,_ceef rulingList ,_gdfef bool )[]*wordBag {var _cbdab []*wordBag ;
for _ ,_gegc :=range _bgec .depthIndexes (){_daba :=false ;for !_bgec .empty (_gegc ){_cegad :=_bgec .firstReadingIndex (_gegc );_efef :=_bgec .firstWord (_cegad );_gegb :=_deagcg (_efef ,_fefba ,_adda ,_ceef );_bgec .removeWord (_efef ,_cegad );if _gbcg {_fb .Log .Info ("\u0066\u0069\u0072\u0073\u0074\u0057\u006f\u0072\u0064\u0020\u005e\u005e^\u005e\u0020\u0025\u0073",_efef .String ());
};for _bada :=true ;_bada ;_bada =_daba {_daba =false ;_bfde :=_beag *_gegb ._fgcf ;_dfge :=_ddcd *_gegb ._fgcf ;if _gdfef {_dfge =_bff .MaxFloat64 ;};_bbff :=_agbcb *_gegb ._fgcf ;if _gbcg {_fb .Log .Info ("\u0070a\u0072a\u0057\u006f\u0072\u0064\u0073\u0020\u0064\u0065\u0070\u0074\u0068 \u0025\u002e\u0032\u0066 \u002d\u0020\u0025\u002e\u0032f\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061\u0044\u0065\u0070\u0074\u0068\u0047\u0061\u0070\u003d\u0025\u002e\u0032\u0066\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061R\u0065\u0061\u0064\u0069\u006e\u0067\u0047\u0061p\u003d\u0025\u002e\u0032\u0066",_gegb .minDepth (),_gegb .maxDepth (),_bbff ,_dfge );
};if _bgec .scanBand ("\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c",_gegb ,_fgded (_bdff ,0),_gegb .minDepth ()-_bbff ,_gegb .maxDepth ()+_bbff ,_eedce ,false ,false )> 0{_daba =true ;};if _bgec .scanBand ("\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_gegb ,_fgded (_bdff ,_dfge ),_gegb .minDepth (),_gegb .maxDepth (),_dead ,false ,false )> 0{_daba =true ;
};if _daba {continue ;};_fgaa :=_bgec .scanBand ("",_gegb ,_fgded (_dfaf ,_bfde ),_gegb .minDepth (),_gegb .maxDepth (),_effa ,true ,false );if _fgaa > 0{_fcbcg :=(_gegb .maxDepth ()-_gegb .minDepth ())/_gegb ._fgcf ;if (_fgaa > 1&&float64 (_fgaa )> 0.3*_fcbcg )||_fgaa <=10{if _bgec .scanBand ("\u006f\u0074\u0068e\u0072",_gegb ,_fgded (_dfaf ,_bfde ),_gegb .minDepth (),_gegb .maxDepth (),_effa ,false ,true )> 0{_daba =true ;
};};};};_cbdab =append (_cbdab ,_gegb );};};return _cbdab ;};func (_aeg pathSection )bbox ()_dc .PdfRectangle {_gffg :=_aeg ._eafba [0]._eaea [0];_dbadd :=_dc .PdfRectangle {Llx :_gffg .X ,Urx :_gffg .X ,Lly :_gffg .Y ,Ury :_gffg .Y };_gded :=func (_fgeg _ge .Point ){if _fgeg .X < _dbadd .Llx {_dbadd .Llx =_fgeg .X ;
}else if _fgeg .X > _dbadd .Urx {_dbadd .Urx =_fgeg .X ;};if _fgeg .Y < _dbadd .Lly {_dbadd .Lly =_fgeg .Y ;}else if _fgeg .Y > _dbadd .Ury {_dbadd .Ury =_fgeg .Y ;};};for _ ,_baf :=range _aeg ._eafba [0]._eaea [1:]{_gded (_baf );};for _ ,_aebgd :=range _aeg ._eafba [1:]{for _ ,_dgfd :=range _aebgd ._eaea {_gded (_dgfd );
};};return _dbadd ;};func (_efa *stateStack )empty ()bool {return len (*_efa )==0};func (_edcg *stateStack )size ()int {return len (*_edcg )};func (_ccfgb *textLine )pullWord (_ffba *wordBag ,_fegfa *textWord ,_aeaf int ){_ccfgb .appendWord (_fegfa );_ffba .removeWord (_fegfa ,_aeaf );
};var _aabb =TextMark {Text :"\u005b\u0058\u005d",Original :"\u0020",Meta :true ,FillColor :_cc .White ,StrokeColor :_cc .White };func (_aeeca *textTable )emptyCompositeRow (_cffa int )bool {for _gbded :=0;_gbded < _aeeca ._dgbf ;_gbded ++{if _aefeb ,_bgge :=_aeeca ._dffge [_egfde (_gbded ,_cffa )];
_bgge {if len (_aefeb .paraList )> 0{return false ;};};};return true ;};func _afafd (_egac []*textMark ,_fcdfc _dc .PdfRectangle ,_bege rulingList ,_defd []gridTiling ,_agac bool )paraList {_fb .Log .Trace ("\u006d\u0061\u006b\u0065\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065\u003a \u0025\u0064\u0020\u0065\u006c\u0065m\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065=\u0025\u002e\u0032\u0066",len (_egac ),_fcdfc );
if len (_egac )==0{return nil ;};_ccbe :=_geef (_egac ,_fcdfc ,false );if len (_ccbe )==0{return nil ;};_bege .log ("\u006d\u0061\u006be\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065");_dec ,_cdbg :=_bege .vertsHorzs ();_ffca :=_bdgb (_ccbe ,_fcdfc .Ury ,_dec ,_cdbg );
_cdbge :=_geca (_ffca ,_fcdfc .Ury ,_dec ,_cdbg ,_agac );_cdbge =_eeea (_cdbge );_ebcef :=make (paraList ,0,len (_cdbge ));for _ ,_ebfgb :=range _cdbge {_fbacc :=_ebfgb .arrangeText (_agac );if _fbacc !=nil {_ebcef =append (_ebcef ,_fbacc );};};if len (_ebcef )>=_dfgf {_ebcef =_ebcef .extractTables (_defd );
};_ebcef .sortReadingOrder ();_ebcef .sortTopoOrder ();_ebcef .log ("\u0073\u006f\u0072te\u0064\u0020\u0069\u006e\u0020\u0072\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u006f\u0072\u0064\u0065\u0072");return _ebcef ;};

// String returns a human readable description of `vecs`.
func (_eafaea rulingList )String ()string {if len (_eafaea )==0{return "\u007b \u0045\u004d\u0050\u0054\u0059\u0020}";};_ecfg ,_ccbbc :=_eafaea .vertsHorzs ();_dfca :=len (_ecfg );_cgfc :=len (_ccbbc );if _dfca ==0||_cgfc ==0{return _ga .Sprintf ("\u007b%\u0064\u0020\u0078\u0020\u0025\u0064}",_dfca ,_cgfc );
};_afacg :=_dc .PdfRectangle {Llx :_ecfg [0]._fdbaa ,Urx :_ecfg [_dfca -1]._fdbaa ,Lly :_ccbbc [_cgfc -1]._fdbaa ,Ury :_ccbbc [0]._fdbaa };return _ga .Sprintf ("\u007b\u0025d\u0020\u0078\u0020%\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u007d",_dfca ,_cgfc ,_afacg );
};type list struct{_gdaa []*textLine ;_ggdb string ;_dadg []*list ;_cddg string ;};func _ccefe (_fagg ,_beede bounded )float64 {return _fagg .bbox ().Llx -_beede .bbox ().Llx };const (_ebecb rulingKind =iota ;_dagd ;_aedgg ;);func _eba (_agbc bounded )float64 {return -_agbc .bbox ().Lly };
func _cagg (_fcgd ,_bgeff bounded )float64 {return _eba (_fcgd )-_eba (_bgeff )};var _cgcbd =_d .MustCompile ("\u005e\u005c\u0073\u002a\u0028\u005c\u0064\u002b\u005c\u002e\u003f|\u005b\u0049\u0069\u0076\u005d\u002b\u0029\u005c\u0073\u002a\\\u0029\u003f\u0024");
func _gdade (_deabd map[float64 ]gridTile )[]float64 {_ccbbb :=make ([]float64 ,0,len (_deabd ));for _gagce :=range _deabd {_ccbbb =append (_ccbbb ,_gagce );};_a .Float64s (_ccbbb );return _ccbbb ;};type rulingList []*ruling ;func _gda (_ade *TextMarkArray )string {_cedg :="";
for _ ,_egfb :=range _ade .Elements (){_cedg +=_egfb .Text ;};return _cedg ;};func (_ffc *imageExtractContext )processOperand (_cbea *_ad .ContentStreamOperation ,_cef _ad .GraphicsState ,_acec *_dc .PdfPageResources )error {if _cbea .Operand =="\u0042\u0049"&&len (_cbea .Params )==1{_ea ,_bbg :=_cbea .Params [0].(*_ad .ContentStreamInlineImage );
if !_bbg {return nil ;};if _ebg ,_ecb :=_e .GetBoolVal (_ea .ImageMask );_ecb {if _ebg &&!_ffc ._bcf .IncludeInlineStencilMasks {return nil ;};};return _ffc .extractInlineImage (_ea ,_cef ,_acec );}else if _cbea .Operand =="\u0044\u006f"&&len (_cbea .Params )==1{_bef ,_ecc :=_e .GetName (_cbea .Params [0]);
if !_ecc {_fb .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");return _bea ;};_ ,_cdd :=_acec .GetXObjectByName (*_bef );switch _cdd {case _dc .XObjectTypeImage :return _ffc .extractXObjectImage (_bef ,_cef ,_acec );case _dc .XObjectTypeForm :return _ffc .extractFormImages (_bef ,_cef ,_acec );
};}else if _ffc ._cccd &&(_cbea .Operand =="\u0073\u0063\u006e"||_cbea .Operand =="\u0053\u0043\u004e")&&len (_cbea .Params )==1{_abg ,_aca :=_e .GetName (_cbea .Params [0]);if !_aca {_fb .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");
return _bea ;};_gbg ,_aca :=_acec .GetPatternByName (*_abg );if !_aca {_fb .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0050\u0061\u0074\u0074\u0065\u0072n\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");return nil ;};if _gbg .IsTiling (){_bae :=_gbg .GetAsTilingPattern ();
_def ,_ggd :=_bae .GetContentStream ();if _ggd !=nil {return _ggd ;};_ggd =_ffc .extractContentStreamImages (string (_def ),_bae .Resources );if _ggd !=nil {return _ggd ;};};}else if (_cbea .Operand =="\u0063\u0073"||_cbea .Operand =="\u0043\u0053")&&len (_cbea .Params )>=1{_ffc ._cccd =_cbea .Params [0].String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e";
};return nil ;};func _afabd (_gbbcf ,_abaaf _dc .PdfRectangle )bool {return _gbbcf .Llx <=_abaaf .Llx &&_abaaf .Urx <=_gbbcf .Urx &&_gbbcf .Lly <=_abaaf .Lly &&_abaaf .Ury <=_gbbcf .Ury ;};func (_cedgd *wordBag )absorb (_bebf *wordBag ){_abde :=_bebf .makeRemovals ();
for _cecg ,_ecfc :=range _bebf ._bdde {for _ ,_fcecb :=range _ecfc {_cedgd .pullWord (_fcecb ,_cecg ,_abde );};};_bebf .applyRemovals (_abde );};func _eegf (_ecfcb []TextMark ,_gcgag *int )[]TextMark {_cabed :=_ecfcb [len (_ecfcb )-1];_cdbe :=[]rune (_cabed .Text );
if len (_cdbe )==1{_ecfcb =_ecfcb [:len (_ecfcb )-1];_aggcg :=_ecfcb [len (_ecfcb )-1];*_gcgag =_aggcg .Offset +len (_aggcg .Text );}else {_bbdf :=_feffc (_cabed .Text );*_gcgag +=len (_bbdf )-len (_cabed .Text );_cabed .Text =_bbdf ;};return _ecfcb ;};
func _abbf (_bddag map[float64 ]map[float64 ]gridTile )[]float64 {_aecd :=make ([]float64 ,0,len (_bddag ));for _bdfcb :=range _bddag {_aecd =append (_aecd ,_bdfcb );};_a .Float64s (_aecd );_cfgc :=len (_aecd );for _eeeba :=0;_eeeba < _cfgc /2;_eeeba ++{_aecd [_eeeba ],_aecd [_cfgc -1-_eeeba ]=_aecd [_cfgc -1-_eeeba ],_aecd [_eeeba ];
};return _aecd ;};func _feffc (_ddgcd string )string {_bbcb :=[]rune (_ddgcd );return string (_bbcb [:len (_bbcb )-1])};func (_eggb rulingList )mergePrimary ()float64 {_cggfb :=_eggb [0]._fdbaa ;for _ ,_fcbe :=range _eggb [1:]{_cggfb +=_fcbe ._fdbaa ;};
return _cggfb /float64 (len (_eggb ));};

// TableInfo gets table information of the textmark `tm`.
func (_abff *TextMark )TableInfo ()(*TextTable ,[][]int ){if !_abff ._dgff {return nil ,nil ;};_abec :=_abff ._ebcg ;_eae :=_abec .getCellInfo (*_abff );return _abec ,_eae ;};func (_afaff paraList )topoOrder ()[]int {if _adeaf {_fb .Log .Info ("\u0074\u006f\u0070\u006f\u004f\u0072\u0064\u0065\u0072\u003a");
};_deab :=len (_afaff );_edbg :=make ([]bool ,_deab );_dbccd :=make ([]int ,0,_deab );_egdc :=_afaff .llyOrdering ();var _aggce func (_bbdc int );_aggce =func (_gfff int ){_edbg [_gfff ]=true ;for _bagad :=0;_bagad < _deab ;_bagad ++{if !_edbg [_bagad ]{if _afaff .readBefore (_egdc ,_gfff ,_bagad ){_aggce (_bagad );
};};};_dbccd =append (_dbccd ,_gfff );};for _cddfb :=0;_cddfb < _deab ;_cddfb ++{if !_edbg [_cddfb ]{_aggce (_cddfb );};};return _bgdff (_dbccd );};type lists []*list ;func _gddbe (_fdgeg *_dc .Image ,_deagb _cc .Color )_cd .Image {_cfgdc ,_gbagf :=int (_fdgeg .Width ),int (_fdgeg .Height );
_egcfa :=_cd .NewRGBA (_cd .Rect (0,0,_cfgdc ,_gbagf ));for _cbfc :=0;_cbfc < _gbagf ;_cbfc ++{for _efgba :=0;_efgba < _cfgdc ;_efgba ++{_gadbc ,_bbgfb :=_fdgeg .ColorAt (_efgba ,_cbfc );if _bbgfb !=nil {_fb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_efgba ,_cbfc );
continue ;};_ageac ,_fbgdc ,_efbd ,_ :=_gadbc .RGBA ();var _ggde _cc .Color ;if _ageac +_fbgdc +_efbd ==0{_ggde =_cc .Transparent ;}else {_ggde =_deagb ;};_egcfa .Set (_efgba ,_cbfc ,_ggde );};};return _egcfa ;};func (_gefe *textObject )setTextRenderMode (_gabg int ){if _gefe ==nil {return ;
};_gefe ._fbab ._gdg =RenderMode (_gabg );};func _abgg (_bgde *list )[]*list {var _fagfa []*list ;for _ ,_dgfg :=range _bgde ._dadg {switch _dgfg ._ggdb {case "\u004c\u0049":_fdbb :=_gbcfa (_dgfg );_bffbe :=_abgg (_dgfg );_feea :=_dcccd (_fdbb ,"\u0062\u0075\u006c\u006c\u0065\u0074",_bffbe );
_baba :=_beff (_fdbb ,"");_feea ._cddg =_baba ;_fagfa =append (_fagfa ,_feea );case "\u004c\u0042\u006fd\u0079":return _abgg (_dgfg );case "\u004c":_faaba :=_abgg (_dgfg );_fagfa =append (_fagfa ,_faaba ...);return _fagfa ;};};return _fagfa ;};

// WriteToFile writes the edited content to `outputPath`.
func (_fde *Editor )WriteToFile (outputPath string )error {_fbdc ,_afg :=_fde ._dfe .ToWriter (nil );if _afg !=nil {return _ga .Errorf ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0074\u006f\u0020c\u006f\u006e\u0076\u0065\u0072\u0074\u0020t\u006f\u0020\u0077\u0072\u0069\u0074\u0065\u0072\u0020\u0025\u0076",_afg );
};_fbdc .WriteToFile (outputPath );return nil ;};type rectRuling struct{_debc rulingKind ;_egbg markKind ;_cc .Color ;_dc .PdfRectangle ;};type cachedImage struct{_bece *_dc .Image ;_gbeg _dc .PdfColorspace ;};func _bceg (_cfbc ,_eeedg _ge .Point )rulingKind {_fcgec :=_bff .Abs (_cfbc .X -_eeedg .X );
_bfafa :=_bff .Abs (_cfbc .Y -_eeedg .Y );return _bfca (_fcgec ,_bfafa ,_gecc );};

// String returns a string describing `ma`.
func (_aaff TextMarkArray )String ()string {_cdff :=len (_aaff ._dadfg );if _cdff ==0{return "\u0045\u004d\u0050T\u0059";};_aeee :=_aaff ._dadfg [0];_ggae :=_aaff ._dadfg [_cdff -1];return _ga .Sprintf ("\u007b\u0054\u0045\u0058\u0054\u004d\u0041\u0052K\u0041\u0052\u0052AY\u003a\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025s\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d%\u0073\u007d",_cdff ,_aeee ,_ggae );
};func _gfgg (_bdcc []*textLine )map[float64 ][]*textLine {_a .Slice (_bdcc ,func (_egcf ,_ccdec int )bool {return _bdcc [_egcf ]._bfbe < _bdcc [_ccdec ]._bfbe });_cbbf :=map[float64 ][]*textLine {};for _ ,_acdc :=range _bdcc {_dagc :=_ggea (_acdc );_dagc =_bff .Round (_dagc );
_cbbf [_dagc ]=append (_cbbf [_dagc ],_acdc );};return _cbbf ;};func _edec (_gbgf ,_bgfee _dc .PdfRectangle )bool {return _gbgf .Lly <=_bgfee .Ury &&_bgfee .Lly <=_gbgf .Ury ;};func (_dbae paraList )llyOrdering ()[]int {_feee :=make ([]int ,len (_dbae ));
for _gbcge :=range _dbae {_feee [_gbcge ]=_gbcge ;};_a .SliceStable (_feee ,func (_aace ,_eccac int )bool {_adcgf ,_faaef :=_feee [_aace ],_feee [_eccac ];return _dbae [_adcgf ].Lly < _dbae [_faaef ].Lly ;});return _feee ;};func (_feb *shapesState )devicePoint (_dcbf ,_efag float64 )_ge .Point {_acdf :=_feb ._cgee .Mult (_feb ._cca );
_dcbf ,_efag =_acdf .Transform (_dcbf ,_efag );return _ge .NewPoint (_dcbf ,_efag );};type shapesState struct{_cca _ge .Matrix ;_cgee _ge .Matrix ;_facg []*subpath ;_fcfg bool ;_dfea _ge .Point ;_gcba *textObject ;};func _eg (_caf int )bool {return (_caf &1)==0};
func _feca (_fee *TextMarkArray ,_eag *string ,_dbeg *int ,_fcg string )error {var _edaa TextMark ;for _ ,_bgfe :=range _fee .Elements (){_ggfb :=_bgfe .Text ;_ceba :=_bgfe .Font ;_ggaca :="";_geda :=*_eag ;if len (_geda )> *_dbeg {_ggaca =_geda [*_dbeg :*_dbeg +len (_ggfb )];
}else if *_dbeg ==len (_fcg )-1&&len (_geda )> *_dbeg {_ggaca =_geda [*_dbeg :];};_gbea :=_bgfe .DirectObject ;if _gbea ==nil &&_bgfe .Text =="\u0020"{_gec :=_edaa .ObjString ;_bffe :=_gec [len (_gec )-1];if _bffe !=_bgfe .Text {_gbea =_edaa .DirectObject ;
_ceba =_edaa .Font ;_gfaa ,_dggd :=_e .GetString (_gbea );if !_dggd {return _ga .Errorf ("\u0075n\u0061\u0062l\u0065\u0020\u0074\u006f \u0067\u0065\u0074 \u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0042\u0079te\u0073\u0020\u0066r\u006f\u006d \u0064\u0069\u0072\u0065\u0063\u0074O\u0062\u006ae\u0063\u0074");
};_cbed ,_dggd :=_e .GetStringBytes (_gbea );if !_dggd {return _e .ErrTypeError ;};_aebg :=_eefd (_cbed ,_ceba );_ggaca =_aebg +_ggaca ;_bbeg (_gfaa ,_ggaca ,_ceba );*_dbeg +=len (_ggfb );continue ;};};_bbcf ,_dfgg :=_e .GetString (_gbea );if !_dfgg {return _ga .Errorf ("\u0075n\u0061\u0062l\u0065\u0020\u0074\u006f \u0067\u0065\u0074 \u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0042\u0079te\u0073\u0020\u0066r\u006f\u006d \u0064\u0069\u0072\u0065\u0063\u0074O\u0062\u006ae\u0063\u0074");
};_eegg :="";_ffcg ,_dfgg :=_e .GetStringBytes (_gbea );if !_dfgg {return _e .ErrTypeError ;};_agde :=_eefd (_ffcg ,_ceba );_eegg =_ba .Replace (_agde ,_ggfb ,_ggaca ,1);_bbeg (_bbcf ,_eegg ,_ceba );*_dbeg +=len (_ggfb );_edaa =_bgfe ;};return nil ;};func (_bfcc rulingList )isActualGrid ()(rulingList ,bool ){_edgbc ,_dafaf :=_bfcc .augmentGrid ();
if !(len (_edgbc )>=_aebd +1&&len (_dafaf )>=_bdfeg +1){if _efgc {_fb .Log .Info ("\u0069s\u0041\u0063t\u0075\u0061\u006c\u0047r\u0069\u0064\u003a \u004e\u006f\u0074\u0020\u0061\u006c\u0069\u0067\u006eed\u002e\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u003c\u0020\u0025d\u0020\u0078 \u0025\u0064",len (_edgbc ),len (_dafaf ),_aebd +1,_bdfeg +1);
};return nil ,false ;};if _efgc {_fb .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075a\u006c\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0073\u0020\u003a\u0020\u0025t\u0020\u0026\u0020\u0025\u0074\u0020\u2192 \u0025\u0074",_bfcc ,len (_edgbc )>=2,len (_dafaf )>=2,len (_edgbc )>=2&&len (_dafaf )>=2);
for _fcbd ,_dgegg :=range _bfcc {_ga .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0076\u000a",_fcbd ,_dgegg );};};if _cfdf {_gecg ,_fbfa :=_edgbc [0],_edgbc [len (_edgbc )-1];_agabb ,_fefee :=_dafaf [0],_dafaf [len (_dafaf )-1];if !(_caeb (_gecg ._fdbaa -_agabb ._ddgcef )&&_caeb (_fbfa ._fdbaa -_agabb ._afcga )&&_caeb (_agabb ._fdbaa -_gecg ._afcga )&&_caeb (_fefee ._fdbaa -_gecg ._ddgcef )){if _efgc {_fb .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069d\u003a\u0020\u0020N\u006f\u0074 \u0061\u006c\u0069\u0067\u006e\u0065d\u002e\n\t\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0076\u0031\u003d\u0025\u0073\u000a\u0009\u0068\u0030\u003d\u0025\u0073\u000a\u0009\u0068\u0031\u003d\u0025\u0073",_gecg ,_fbfa ,_agabb ,_fefee );
};return nil ,false ;};}else {if !_edgbc .aligned (){if _afecc {_fb .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0076\u0065\u0072\u0074\u0073\u002e\u0020%\u0064",len (_edgbc ));
};return nil ,false ;};if !_dafaf .aligned (){if _efgc {_fb .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0068\u006f\u0072\u007a\u0073\u002e\u0020%\u0064",len (_dafaf ));
};return nil ,false ;};};_bagac :=append (_edgbc ,_dafaf ...);return _bagac ,true ;};

// String returns a description of `tm`.
func (_dbab *textMark )String ()string {return _ga .Sprintf ("\u0025\u002e\u0032f \u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\u0022\u0025\u0073\u0022",_dbab .PdfRectangle ,_dbab ._ggfcd ,_dbab ._fceec );};func (_gcdce gridTile )contains (_abaec _dc .PdfRectangle )bool {if _gcdce .numBorders ()< 3{return false ;
};if _gcdce ._eaead &&_abaec .Llx < _gcdce .Llx -_adad {return false ;};if _gcdce ._gggfa &&_abaec .Urx > _gcdce .Urx +_adad {return false ;};if _gcdce ._adffd &&_abaec .Lly < _gcdce .Lly -_adad {return false ;};if _gcdce ._abcae &&_abaec .Ury > _gcdce .Ury +_adad {return false ;
};return true ;};func (_fgbfa paraList )computeEBBoxes (){if _gdfa {_fb .Log .Info ("\u0063o\u006dp\u0075\u0074\u0065\u0045\u0042\u0042\u006f\u0078\u0065\u0073\u003a");};for _ ,_bcca :=range _fgbfa {_bcca ._fcfaa =_bcca .PdfRectangle ;};_bfefe :=_fgbfa .yNeighbours (0);
for _fdfba ,_eacge :=range _fgbfa {_gdcd :=_eacge ._fcfaa ;_abeef ,_faacc :=-1.0e9,+1.0e9;for _ ,_fccaa :=range _bfefe [_eacge ]{_dage :=_fgbfa [_fccaa ]._fcfaa ;if _dage .Urx < _gdcd .Llx {_abeef =_bff .Max (_abeef ,_dage .Urx );}else if _gdcd .Urx < _dage .Llx {_faacc =_bff .Min (_faacc ,_dage .Llx );
};};for _ggfff ,_agbgd :=range _fgbfa {_cacb :=_agbgd ._fcfaa ;if _fdfba ==_ggfff ||_cacb .Ury > _gdcd .Lly {continue ;};if _abeef <=_cacb .Llx &&_cacb .Llx < _gdcd .Llx {_gdcd .Llx =_cacb .Llx ;}else if _cacb .Urx <=_faacc &&_gdcd .Urx < _cacb .Urx {_gdcd .Urx =_cacb .Urx ;
};};if _gdfa {_ga .Printf ("\u0025\u0034\u0064\u003a %\u0036\u002e\u0032\u0066\u2192\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0071\u000a",_fdfba ,_eacge ._fcfaa ,_gdcd ,_adbcg (_eacge .text (),50));};_eacge ._fcfaa =_gdcd ;};if _ecae {for _ ,_dgbg :=range _fgbfa {_dgbg .PdfRectangle =_dgbg ._fcfaa ;
};};};

// Extractor stores and offers functionality for extracting content from PDF pages.
type Extractor struct{_fdf string ;_cfb *_dc .PdfPageResources ;_bac _dc .PdfRectangle ;_dga *_dc .PdfRectangle ;_cgdc int ;_aff map[string ]fontEntry ;_baa map[string ]textResult ;_bgd map[string ]textResult ;_eb int64 ;_dfg *Options ;_bcge *_dc .StructTreeRoot ;
_cdg _e .PdfObject ;_dadd []*_dc .PdfAnnotation ;};

// String returns a human readable description of `path`.
func (_ddgce *subpath )String ()string {_agdcg :=_ddgce ._eaea ;_eafc :=len (_agdcg );if _eafc <=5{return _ga .Sprintf ("\u0025d\u003a\u0020\u0025\u0036\u002e\u0032f",_eafc ,_agdcg );};return _ga .Sprintf ("\u0025d\u003a\u0020\u0025\u0036.\u0032\u0066\u0020\u0025\u0036.\u0032f\u0020.\u002e\u002e\u0020\u0025\u0036\u002e\u0032f",_eafc ,_agdcg [0],_agdcg [1],_agdcg [_eafc -1]);
};type imageExtractContext struct{_ebb []ImageMark ;_cac int ;_cbde int ;_dcc int ;_cgde map[*_e .PdfObjectStream ]*cachedImage ;_bcf *ImageExtractOptions ;_cccd bool ;};func (_gcga *textPara )toTextMarks (_eeae *int ,_eeebd *textContext )[]TextMark {if _gcga ._fdfd ==nil {return _gcga .toCellTextMarks (_eeae ,_eeebd );
};var _beefc []TextMark ;for _afbea :=0;_afbea < _gcga ._fdfd ._gfdgb ;_afbea ++{for _becbd :=0;_becbd < _gcga ._fdfd ._dgbf ;_becbd ++{_ceeg :=_gcga ._fdfd .get (_becbd ,_afbea );if _ceeg ==nil {_beefc =_cace (_beefc ,_eeae ,"\u0009");}else {_adefb :=_ceeg .toCellTextMarks (_eeae ,_eeebd );
_beefc =append (_beefc ,_adefb ...);};_beefc =_cace (_beefc ,_eeae ,"\u0020");};if _afbea < _gcga ._fdfd ._gfdgb -1{_beefc =_cace (_beefc ,_eeae ,"\u000a");};};_gdec :=_gcga ._fdfd ;if _gdec .isExportable (){_fafaf :=_gdec .toTextTable (_eeebd );_beefc =_fedc (_beefc ,&_fafaf );
};return _beefc ;};func (_gfde *textObject )getStrokeColor ()_cc .Color {return _fafag (_gfde ._gefga .ColorspaceStroking ,_gfde ._gefga .ColorStroking );};var _gfeb =[]string {"\u2756","\u27a2","\u2713","\u2022","\uf0a7","\u25a1","\u2212","\u25a0","\u25aa","\u006f"};


// String returns a string describing the current state of the textState stack.
func (_acg *stateStack )String ()string {_bcbbf :=[]string {_ga .Sprintf ("\u002d\u002d\u002d\u002d f\u006f\u006e\u0074\u0020\u0073\u0074\u0061\u0063\u006b\u003a\u0020\u0025\u0064",len (*_acg ))};for _gfbd ,_fcaa :=range *_acg {_egbc :="\u003c\u006e\u0069l\u003e";
if _fcaa !=nil {_egbc =_fcaa .String ();};_bcbbf =append (_bcbbf ,_ga .Sprintf ("\u0009\u0025\u0032\u0064\u003a\u0020\u0025\u0073",_gfbd ,_egbc ));};return _ba .Join (_bcbbf ,"\u000a");};func (_gbbe *textLine )markWordBoundaries (){_eaaa :=_agbdd *_gbbe ._cggfe ;
for _gagc ,_dfcb :=range _gbbe ._cfad [1:]{if _dcbbc (_dfcb ,_gbbe ._cfad [_gagc ])>=_eaaa {_dfcb ._eeggf =true ;};};};func _gf (_gag int )bool {return (_gag &1)!=0};func (_egeb *stateStack )pop ()*textState {if _egeb .empty (){return nil ;};_eaa :=*(*_egeb )[len (*_egeb )-1];
*_egeb =(*_egeb )[:len (*_egeb )-1];return &_eaa ;};func _bddd (_bccc ,_bbaa _dc .PdfRectangle )_dc .PdfRectangle {return _dc .PdfRectangle {Llx :_bff .Min (_bccc .Llx ,_bbaa .Llx ),Lly :_bff .Min (_bccc .Lly ,_bbaa .Lly ),Urx :_bff .Max (_bccc .Urx ,_bbaa .Urx ),Ury :_bff .Max (_bccc .Ury ,_bbaa .Ury )};
};var _ag =[]string {"\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0053","\u0042","\u0053","\u0057\u0053","\u0042","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042","\u0042","\u0042","\u0053","\u0057\u0053","\u004f\u004e","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0045\u0053","\u0043\u0053","\u0045\u0053","\u0043\u0053","\u0043\u0053","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0045\u004e","\u0043\u0053","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0042\u004e","\u0043\u0053","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u0045\u0054","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u0042\u004e","\u004f\u004e","\u004f\u004e","\u0045\u0054","\u0045\u0054","\u0045\u004e","\u0045\u004e","\u004f\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u0045\u004e","\u004c","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004f\u004e","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c","\u004c"};
func (_ggge *shapesState )moveTo (_fffcg ,_dcdg float64 ){_ggge ._fcfg =true ;_ggge ._dfea =_ggge .devicePoint (_fffcg ,_dcdg );if _aaaef {_fb .Log .Info ("\u006d\u006fv\u0065\u0054\u006f\u003a\u0020\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0064\u0065\u0076\u0069\u0063\u0065\u003d%.\u0032\u0066",_fffcg ,_dcdg ,_ggge ._dfea );
};};func _fcbg (_cbf *TextMarkArray ,_agc *string ,_gef *int ,_eef string )error {_faec :=_cbf .Elements ()[0].DirectObject ;_dgf ,_ecbb :=_e .GetString (_faec );if !_ecbb {return _ga .Errorf ("\u0075n\u0061\u0062l\u0065\u0020\u0074\u006f \u0067\u0065\u0074 \u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0042\u0079te\u0073\u0020\u0066r\u006f\u006d \u0064\u0069\u0072\u0065\u0063\u0074O\u0062\u006ae\u0063\u0074");
};_bfag :=_gda (_cbf );_abf ,_ecbb :=_e .GetStringBytes (_faec );if !_ecbb {return _e .ErrTypeError ;};_ceg :=_cbf .Elements ()[0].Font ;_baee :=_eefd (_abf ,_ceg );_fga :="";_bbef :=*_agc ;if len (_bbef )> *_gef {_fga =_bbef [*_gef :*_gef +len (_bfag )];
}else if *_gef ==len (_eef )-1&&len (_bbef )> *_gef {_fga =_bbef [*_gef :];};_bdbb :="";_abb :=_ba .Split (_baee ,"\u0020");_cee :=_abb [len (_abb )-1];if _cee ==_bfag &&*_gef ==0{_dae :=_ba .LastIndex (_baee ,_bfag );_bdbb =_cfbg (_baee ,_dae ,len (_bfag )+_dae ,_fga );
}else if *_gef ==len (_eef )-1&&len (_bbef )> *_gef {_bdbb =_ba .ReplaceAll (_baee ,_bfag ,_bbef [*_gef :]);}else {_bdbb =_ba .Replace (_baee ,_bfag ,_fga ,1);};_bbeg (_dgf ,_bdbb ,_ceg );*_gef +=len (_bfag );return nil ;};func (_ecbcf *textTable )putComposite (_ceafc ,_ccbba int ,_geab paraList ,_aceb _dc .PdfRectangle ){if len (_geab )==0{_fb .Log .Error ("\u0074\u0065xt\u0054\u0061\u0062l\u0065\u0029\u0020\u0070utC\u006fmp\u006f\u0073\u0069\u0074\u0065\u003a\u0020em\u0070\u0074\u0079\u0020\u0070\u0061\u0072a\u0073");
return ;};_dffe :=compositeCell {PdfRectangle :_aceb ,paraList :_geab };if _feed {_ga .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0075\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u003c\u002d\u0025\u0073\u000a",_ceafc ,_ccbba ,_dffe .String ());
};_dffe .updateBBox ();_ecbcf ._dffge [_egfde (_ceafc ,_ccbba )]=_dffe ;};func (_cfdee rulingList )intersections ()map[int ]intSet {var _eafd ,_dgag []int ;for _baeae ,_gdfag :=range _cfdee {switch _gdfag ._caefd {case _aedgg :_eafd =append (_eafd ,_baeae );
case _dagd :_dgag =append (_dgag ,_baeae );};};if len (_eafd )< _aebd +1||len (_dgag )< _bdfeg +1{return nil ;};if len (_eafd )+len (_dgag )> _effb {_fb .Log .Debug ("\u0069\u006e\u0074\u0065\u0072\u0073e\u0063\u0074\u0069\u006f\u006e\u0073\u003a\u0020\u0054\u004f\u004f\u0020\u004d\u0041\u004e\u0059\u0020\u0072\u0075\u006ci\u006e\u0067\u0073\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u003d\u0020%\u0064 \u0078\u0020\u0025\u0064",len (_cfdee ),len (_eafd ),len (_dgag ));
return nil ;};_bdbf :=make (map[int ]intSet ,len (_eafd )+len (_dgag ));for _ ,_gege :=range _eafd {for _ ,_abagd :=range _dgag {if _cfdee [_gege ].intersects (_cfdee [_abagd ]){if _ ,_bbbb :=_bdbf [_gege ];!_bbbb {_bdbf [_gege ]=make (intSet );};if _ ,_cfge :=_bdbf [_abagd ];
!_cfge {_bdbf [_abagd ]=make (intSet );};_bdbf [_gege ].add (_abagd );_bdbf [_abagd ].add (_gege );};};};return _bdbf ;};

// RangeOffset returns the TextMarks in `ma` that overlap text[start:end] in the extracted text.
// These are tm: `start` <= tm.Offset + len(tm.Text) && tm.Offset < `end` where
// `start` and `end` are offsets in the extracted text.
// NOTE: TextMarks can contain multiple characters. e.g. "ffi" for the  ligature so the first and
// last elements of the returned TextMarkArray may only partially overlap text[start:end].
func (_dffg *TextMarkArray )RangeOffset (start ,end int )(*TextMarkArray ,error ){if _dffg ==nil {return nil ,_caa .New ("\u006da\u003d\u003d\u006e\u0069\u006c");};if end < start {return nil ,_ga .Errorf ("\u0065\u006e\u0064\u0020\u003c\u0020\u0073\u0074\u0061\u0072\u0074\u002e\u0020\u0052\u0061n\u0067\u0065\u004f\u0066\u0066\u0073\u0065\u0074\u0020\u006e\u006f\u0074\u0020d\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020\u0073\u0074\u0061\u0072t=\u0025\u0064\u0020\u0065\u006e\u0064\u003d\u0025\u0064\u0020",start ,end );
};_dgac :=len (_dffg ._dadfg );if _dgac ==0{return _dffg ,nil ;};if start < _dffg ._dadfg [0].Offset {start =_dffg ._dadfg [0].Offset ;};if end > _dffg ._dadfg [_dgac -1].Offset +1{end =_dffg ._dadfg [_dgac -1].Offset +1;};_dceg :=_a .Search (_dgac ,func (_cfgd int )bool {return _dffg ._dadfg [_cfgd ].Offset +len (_dffg ._dadfg [_cfgd ].Text )-1>=start });
if !(0<=_dceg &&_dceg < _dgac ){_cebc :=_ga .Errorf ("\u006f\u0075\u0074\u0020\u006f\u0066\u0020\u0072\u0061\u006e\u0067\u0065\u002e\u0020\u0073\u0074\u0061\u0072\u0074\u003d%\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009 \u006c\u0061\u0073\u0074\u003d%\u0076",start ,_dceg ,_dgac ,_dffg ._dadfg [0],_dffg ._dadfg [_dgac -1]);
return nil ,_cebc ;};_aged :=_a .Search (_dgac ,func (_fgge int )bool {return _dffg ._dadfg [_fgge ].Offset > end -1});if !(0<=_aged &&_aged < _dgac ){_ffee :=_ga .Errorf ("\u006f\u0075\u0074\u0020\u006f\u0066\u0020r\u0061\u006e\u0067e\u002e\u0020\u0065n\u0064\u003d%\u0064\u0020\u0069\u0045\u006e\u0064=\u0025d \u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d\u0025\u0076",end ,_aged ,_dgac ,_dffg ._dadfg [0],_dffg ._dadfg [_dgac -1]);
return nil ,_ffee ;};if _aged <=_dceg {return nil ,_ga .Errorf ("\u0069\u0045\u006e\u0064\u0020\u003c=\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003a\u0020\u0073\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u0065\u006ed\u003d\u0025\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020i\u0045n\u0064\u003d\u0025\u0064",start ,end ,_dceg ,_aged );
};return &TextMarkArray {_dadfg :_dffg ._dadfg [_dceg :_aged ]},nil ;};func (_afeee rulingList )bbox ()_dc .PdfRectangle {var _gcbf _dc .PdfRectangle ;if len (_afeee )==0{_fb .Log .Error ("r\u0075\u006c\u0069\u006e\u0067\u004ci\u0073\u0074\u002e\u0062\u0062\u006f\u0078\u003a\u0020n\u006f\u0020\u0072u\u006ci\u006e\u0067\u0073");
return _dc .PdfRectangle {};};if _afeee [0]._caefd ==_dagd {_gcbf .Llx ,_gcbf .Urx =_afeee .secMinMax ();_gcbf .Lly ,_gcbf .Ury =_afeee .primMinMax ();}else {_gcbf .Llx ,_gcbf .Urx =_afeee .primMinMax ();_gcbf .Lly ,_gcbf .Ury =_afeee .secMinMax ();};return _gcbf ;
};func (_aedf *textObject )setHorizScaling (_dbca float64 ){if _aedf ==nil {return ;};_aedf ._fbab ._cggfd =_dbca ;};func (_abggf *textTable )computeBbox ()_dc .PdfRectangle {var _dbedf _dc .PdfRectangle ;_bcbfc :=false ;for _ddcg :=0;_ddcg < _abggf ._gfdgb ;
_ddcg ++{for _baaag :=0;_baaag < _abggf ._dgbf ;_baaag ++{_gaff :=_abggf .get (_baaag ,_ddcg );if _gaff ==nil {continue ;};if !_bcbfc {_dbedf =_gaff .PdfRectangle ;_bcbfc =true ;}else {_dbedf =_bddd (_dbedf ,_gaff .PdfRectangle );};};};return _dbedf ;};
func (_eece paraList )readBefore (_dcbc []int ,_gede ,_cfc int )bool {_efca ,_gbdgf :=_eece [_gede ],_eece [_cfc ];if _cgfga (_efca ,_gbdgf )&&_efca .Lly > _gbdgf .Lly {return true ;};if !(_efca ._fcfaa .Urx < _gbdgf ._fcfaa .Llx ){return false ;};_fdfea ,_egee :=_efca .Lly ,_gbdgf .Lly ;
if _fdfea > _egee {_egee ,_fdfea =_fdfea ,_egee ;};_gffa :=_bff .Max (_efca ._fcfaa .Llx ,_gbdgf ._fcfaa .Llx );_ggdag :=_bff .Min (_efca ._fcfaa .Urx ,_gbdgf ._fcfaa .Urx );_bdgbc :=_eece .llyRange (_dcbc ,_fdfea ,_egee );for _ ,_bddc :=range _bdgbc {if _bddc ==_gede ||_bddc ==_cfc {continue ;
};_gggc :=_eece [_bddc ];if _gggc ._fcfaa .Llx <=_ggdag &&_gffa <=_gggc ._fcfaa .Urx {return false ;};};return true ;};func _gcbae (_fdaa ,_fdgfe _ge .Point )rulingKind {_gced :=_bff .Abs (_fdaa .X -_fdgfe .X );_cfee :=_bff .Abs (_fdaa .Y -_fdgfe .Y );
return _bfca (_gced ,_cfee ,_dgca );};func (_ebgd rectRuling )checkWidth (_gbgfc ,_bbdeb float64 )(float64 ,bool ){_gfac :=_bbdeb -_gbgfc ;_ebba :=_gfac <=_ebce ;return _gfac ,_ebba ;};func (_bbdd *textObject )moveTextSetLeading (_dacg ,_abce float64 ){_bbdd ._fbab ._cdcd =-_abce ;
_bbdd .moveLP (_dacg ,_abce );};func _caeb (_bcabf float64 )bool {return _bff .Abs (_bcabf )< _ebce };func _dcd (_fecd []Font ,_faa string )bool {for _ ,_fab :=range _fecd {if _fab .FontName ==_faa {return true ;};};return false ;};func (_gfdc compositeCell )parasBBox ()(paraList ,_dc .PdfRectangle ){return _gfdc .paraList ,_gfdc .PdfRectangle ;
};

// Editor represents a document editor object
type Editor struct{_dfe *_dc .PdfReader };

// GetContentStreamOps returns the contentStreamOps field of `pt`.
func (_ffec *PageText )GetContentStreamOps ()*_ad .ContentStreamOperations {return _ffec ._ffgg };

// String returns a description of `k`.
func (_gebd markKind )String ()string {_dfgbg ,_fcbce :=_ddgd [_gebd ];if !_fcbce {return _ga .Sprintf ("\u004e\u006f\u0074\u0020\u0061\u0020\u006d\u0061\u0072k\u003a\u0020\u0025\u0064",_gebd );};return _dfgbg ;};func _efdg (_beabd ,_fcdf _dc .PdfRectangle )bool {return _ebggb (_beabd ,_fcdf )&&_edec (_beabd ,_fcdf )};
const (_badd =1.0e-6;_ddbg =1.0e-4;_cdfad =10;_fbbf =6;_gfge =0.5;_bbee =0.12;_eaege =0.19;_cgcd =0.04;_agbcb =1.0;_eedce =0.04;_geee =12;_ddcd =0.4;_dead =0.7;_beag =1.0;_effa =0.1;_aecf =1.4;_feef =0.46;_agbdd =0.02;_fedb =0.2;_accb =0.5;_cfefd =4;_dadcg =4.0;
_dfgf =6;_bcgga =0.3;_bgcg =0.01;_aadda =0.02;_aebd =2;_bdfeg =2;_effb =500;_dgca =4.0;_gecc =0.05;_fcbfe =0.1;_cggac =2.0;_ebce =2.0;_adad =1.5;_gcfd =3.0;_dbefc =0.25;);const _gdag =20;func _ebegb (_aadcg ,_eddac _cd .Image )_cd .Image {_gdadg ,_acgbg :=_eddac .Bounds ().Size (),_aadcg .Bounds ().Size ();
_eddgg ,_dcbgd :=_gdadg .X ,_gdadg .Y ;if _acgbg .X > _eddgg {_eddgg =_acgbg .X ;};if _acgbg .Y > _dcbgd {_dcbgd =_acgbg .Y ;};_fbgcg :=_cd .Rect (0,0,_eddgg ,_dcbgd );if _gdadg .X !=_eddgg ||_gdadg .Y !=_dcbgd {_dfaab :=_cd .NewRGBA (_fbgcg );_cf .BiLinear .Scale (_dfaab ,_fbgcg ,_aadcg ,_eddac .Bounds (),_cf .Over ,nil );
_eddac =_dfaab ;};if _acgbg .X !=_eddgg ||_acgbg .Y !=_dcbgd {_ededf :=_cd .NewRGBA (_fbgcg );_cf .BiLinear .Scale (_ededf ,_fbgcg ,_aadcg ,_aadcg .Bounds (),_cf .Over ,nil );_aadcg =_ededf ;};_dgaaf :=_cd .NewRGBA (_fbgcg );_cf .DrawMask (_dgaaf ,_fbgcg ,_aadcg ,_cd .Point {},_eddac ,_cd .Point {},_cf .Over );
return _dgaaf ;};func (_dcac *subpath )removeDuplicates (){if len (_dcac ._eaea )==0{return ;};_cdef :=[]_ge .Point {_dcac ._eaea [0]};for _ ,_aaac :=range _dcac ._eaea [1:]{if !_bddaa (_aaac ,_cdef [len (_cdef )-1]){_cdef =append (_cdef ,_aaac );};};_dcac ._eaea =_cdef ;
};func (_cbce *textPara )depth ()float64 {if _cbce ._fcgc {return -1.0;};if len (_cbce ._bdea )> 0{return _cbce ._bdea [0]._bfbe ;};return _cbce ._fdfd .depth ();};func (_ccef *textObject )showTextAdjusted (_dcce *_e .PdfObjectArray ,_bce int ,_efb string )error {_beg :=false ;
for _ ,_dce :=range _dcce .Elements (){switch _dce .(type ){case *_e .PdfObjectFloat ,*_e .PdfObjectInteger :_bdg ,_cefb :=_e .GetNumberAsFloat (_dce );if _cefb !=nil {_fb .Log .Debug ("\u0045\u0052\u0052\u004fR\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078t\u0041\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0042\u0061\u0064\u0020\u006e\u0075\u006d\u0065r\u0069\u0063\u0061\u006c\u0020a\u0072\u0067\u002e\u0020\u006f\u003d\u0025\u0073\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_dce ,_dcce );
return _cefb ;};_dddac ,_fff :=-_bdg *0.001*_ccef ._fbab ._eadb ,0.0;if _beg {_fff ,_dddac =_dddac ,_fff ;};_cegb :=_abee (_ge .Point {X :_dddac ,Y :_fff });_ccef ._ddge .Concat (_cegb );case *_e .PdfObjectString :_deed :=_e .TraceToDirectObject (_dce );
_fgdb ,_dccaf :=_e .GetStringBytes (_deed );if !_dccaf {_fb .Log .Trace ("s\u0068\u006f\u0077\u0054\u0065\u0078\u0074\u0041\u0064j\u0075\u0073\u0074\u0065\u0064\u003a\u0020Ba\u0064\u0020\u0073\u0074r\u0069\u006e\u0067\u0020\u0061\u0072\u0067\u002e\u0020o=\u0025\u0073 \u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_dce ,_dcce );
return _e .ErrTypeError ;};_ccef .renderText (_deed ,_fgdb ,_bce ,_efb );default:_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078\u0074A\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0055\u006e\u0065\u0078p\u0065\u0063\u0074\u0065\u0064\u0020\u0074\u0079\u0070\u0065\u0020\u0028%T\u0029\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_dce ,_dcce );
return _e .ErrTypeError ;};};return nil ;};

// String returns a string describing `tm`.
func (_adaea TextMark )String ()string {_beedg :=_adaea .BBox ;var _fbeb string ;if _adaea .Font !=nil {_fbeb =_adaea .Font .String ();if len (_fbeb )> 50{_fbeb =_fbeb [:50]+"\u002e\u002e\u002e";};};var _gcea string ;if _adaea .Meta {_gcea ="\u0020\u002a\u004d\u002a";
};return _ga .Sprintf ("\u007b\u0054\u0065\u0078t\u004d\u0061\u0072\u006b\u003a\u0020\u0025\u0064\u0020%\u0071\u003d\u0025\u0030\u0032\u0078\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e2\u0066\u0029\u0020\u0028\u00256\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0025\u0073\u007d",_adaea .Offset ,_adaea .Text ,[]rune (_adaea .Text ),_beedg .Llx ,_beedg .Lly ,_beedg .Urx ,_beedg .Ury ,_fbeb ,_gcea );
};func _ebbb (_gfef *textLine ,_gbbg []*textLine )float64 {var _fefa float64 =-1;for _ ,_adcga :=range _gbbg {if _adcga ._bfbe > _gfef ._bfbe {if _bff .Round (_adcga .Llx )>=_bff .Round (_gfef .Llx ){_fefa =_adcga ._bfbe ;}else {break ;};};};return _fefa ;
};

// PageText represents the layout of text on a device page.
type PageText struct{_aaaa []*textMark ;_faaa string ;_dfeeb []TextMark ;_dbga []TextTable ;_becab _dc .PdfRectangle ;_gdafg []pathSection ;_dcaag []pathSection ;_ceea *_dc .StructTreeRoot ;_debec _e .PdfObject ;_ffgg *_ad .ContentStreamOperations ;_fgga PageTextOptions ;
};func _ab (_agf []rune )BidiText {_cda :=-1;_abc :=false ;_aad :=true ;_cbd :=len (_agf );_gd :=make ([]string ,_cbd );_egf :=make ([]string ,_cbd );if _cbd ==0||_abc {return _db (string (_agf ),_aad ,_abc );};_ee :=0;for _bed ,_agg :=range _agf {_gd [_bed ]=string (_agg );
_bdf :="\u004c";if _agg <=0x00ff{_bdf =_ag [_agg ];}else if 0x0590<=_agg &&_agg <=0x05f4{_bdf ="\u0052";}else if 0x0600<=_agg &&_agg <=0x06ff{_bg :=_agg &0xff;if int (_bg )>=len (_aa ){_fb .Log .Debug ("\u0042\u0069\u0064\u0069\u003a\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0055n\u0069c\u006f\u0064\u0065\u0020\u0063\u0068\u0061\u0072\u0061\u0063\u0074\u0065\u0072\u0020"+string (_agg ));
};_bdf =_aa [_agg &0xff];}else if (0x0700<=_agg &&_agg <=0x08ac)||(0xfb50<=_agg &&_agg <=0xfdff)||(0xfe70<=_agg &&_agg <=0xfeff){_bdf ="\u0041\u004c";};if _bdf =="\u0052"||_bdf =="\u0041\u004c"||_bdf =="\u0041\u004e"{_ee ++;};_egf [_bed ]=_bdf ;};if _ee ==0{_aad =true ;
return _db (string (_agf ),_aad ,false );};if _cda ==-1{if float64 (_ee )/float64 (_cbd )< 0.3&&_cbd > 4{_aad =true ;_cda =0;}else {_aad =false ;_cda =1;};};var _da []int ;for range _agf {_da =append (_da ,_cda );};_fbbe :="\u004c";if _gf (_cda ){_fbbe ="\u0052";
};_cbe :=_fbbe ;_gacb :=_cbe ;_gdc :=_cbe ;for _fbe :=range _agf {if _egf [_fbe ]=="\u004e\u0053\u004d"{_egf [_fbe ]=_gdc ;}else {_gdc =_egf [_fbe ];};};_gdc =_cbe ;var _cad string ;for _ec :=range _agf {_cad =_egf [_ec ];switch _cad {case "\u0045\u004e":if _gdc =="\u0041\u004c"{_egf [_ec ]="\u0041\u004e";
}else {_egf [_ec ]="\u0045\u004e";};case "\u0052","\u004c","\u0041\u004c":_gdc =_cad ;};};for _bcgg :=range _agf {_dg :=_egf [_bcgg ];if _dg =="\u0041\u004c"{_egf [_bcgg ]="\u0052";};};for _bab :=1;_bab < (len (_agf )-1);_bab ++{if _egf [_bab ]=="\u0045\u0053"&&_egf [_bab -1]=="\u0045\u004e"&&_egf [_bab +1]=="\u0045\u004e"{_egf [_bab ]="\u0045\u004e";
};if _egf [_bab ]=="\u0043\u0053"&&(_egf [_bab -1]=="\u0045\u004e"||_egf [_bab -1]=="\u0041\u004e")&&_egf [_bab +1]==_egf [_bab -1]{_egf [_bab ]=_egf [_bab -1];};};for _fag :=range _agf {if _egf [_fag ]=="\u0045\u004e"{for _bcd :=_fag -1;_bcd >=0;_bcd --{if _egf [_bcd ]!="\u0045\u0054"{break ;
};_egf [_bcd ]="\u0045\u004e";};for _aac :=_fag +1;_aac < _cbd ;_aac ++{if _egf [_aac ]!="\u0045\u0054"{break ;};_egf [_aac ]="\u0045\u004e";};};};for _ddf :=range _agf {_daf :=_egf [_ddf ];if _daf =="\u0057\u0053"||_daf =="\u0045\u0053"||_daf =="\u0045\u0054"||_daf =="\u0043\u0053"{_egf [_ddf ]="\u004f\u004e";
};};_gdc ="\u0073\u006f\u0072";for _cgd :=range _agf {_age :=_egf [_cgd ];switch _age {case "\u0045\u004e":if _gdc =="\u004c"{_egf [_cgd ]="\u004c";}else {_egf [_cgd ]="\u0045\u004e";};case "\u0052","\u004c":_gdc =_age ;};};for _gc :=0;_gc < len (_agf );
_gc ++{if _egf [_gc ]=="\u004f\u004e"{_deb :=_bfc (_egf ,_gc +1,"\u004f\u004e");_adgg :=_gacb ;if _gc > 0{_adgg =_egf [_gc -1];};_bbe :=_gacb ;if _deb +1< _cbd {_bbe =_egf [_deb +1];};if _adgg !="\u004c"{_adgg ="\u0052";};if _bbe !="\u004c"{_bbe ="\u0052";
};if _adgg ==_bbe {_bd (_egf ,_gc ,_deb ,_adgg );};_gc =_deb -1;};};for _dad :=range _agf {if _egf [_dad ]=="\u004f\u004e"{_egf [_dad ]=_fbbe ;};};for _ggf :=range _agf {_cce :=_egf [_ggf ];if _eg (_da [_ggf ]){switch _cce {case "\u0052":_da [_ggf ]++;
case "\u0041\u004e","\u0045\u004e":_da [_ggf ]+=2;};}else if _cce =="\u004c"||_cce =="\u0041\u004e"||_cce =="\u0045\u004e"{_da [_ggf ]++;};};_df :=-1;_bdfe :=99;var _fad int ;for _fd :=0;_fd < len (_da );_fd ++{_fad =_da [_fd ];if _df < _fad {_df =_fad ;
};if _bdfe > _fad &&_gf (_fad ){_bdfe =_fad ;};};for _babd :=_df ;_babd >=_bdfe ;_babd --{_beb :=-1;for _fc :=0;_fc < len (_da );_fc ++{if _da [_fc ]< _babd {if _beb >=0{_dd (_gd ,_beb ,_fc );_beb =-1;};}else if _beb < 0{_beb =_fc ;};};if _beb >=0{_dd (_gd ,_beb ,len (_da ));
};};for _ed :=0;_ed < len (_gd );_ed ++{_gca :=_gd [_ed ];if _gca =="\u003c"||_gca =="\u003e"{_gd [_ed ]="";};};return _db (_ba .Join (_gd ,""),_aad ,false );};func (_faaf *wordBag )highestWord (_bbaee int ,_gada ,_fgcbb float64 )*textWord {for _ ,_efge :=range _faaf ._bdde [_bbaee ]{if _gada <=_efge ._dcced &&_efge ._dcced <=_fgcbb {return _efge ;
};};return nil ;};func _bgbgd (_bcgage []*textWord ,_dbbg int )[]*textWord {_aedd :=len (_bcgage );copy (_bcgage [_dbbg :],_bcgage [_dbbg +1:]);return _bcgage [:_aedd -1];};func _ecff (_ebbg _ge .Point )*subpath {return &subpath {_eaea :[]_ge .Point {_ebbg }}};
func (_dfeee rulingList )removeDuplicates ()rulingList {if len (_dfeee )==0{return nil ;};_dfeee .sort ();_ggcdg :=rulingList {_dfeee [0]};for _ ,_cgad :=range _dfeee [1:]{if _cgad .equals (_ggcdg [len (_ggcdg )-1]){continue ;};_ggcdg =append (_ggcdg ,_cgad );
};return _ggcdg ;};func (_dabe rulingList )primMinMax ()(float64 ,float64 ){_cegbf ,_adffb :=_dabe [0]._fdbaa ,_dabe [0]._fdbaa ;for _ ,_dgega :=range _dabe [1:]{if _dgega ._fdbaa < _cegbf {_cegbf =_dgega ._fdbaa ;}else if _dgega ._fdbaa > _adffb {_adffb =_dgega ._fdbaa ;
};};return _cegbf ,_adffb ;};

// ImageMark represents an image drawn on a page and its position in device coordinates.
// All coordinates are in device coordinates.
type ImageMark struct{Image *_dc .Image ;

// Dimensions of the image as displayed in the PDF.
Width float64 ;Height float64 ;

// Position of the image in PDF coordinates (lower left corner).
X float64 ;Y float64 ;

// Angle in degrees, if rotated.
Angle float64 ;};func (_efafg lineRuling )asRuling ()(*ruling ,bool ){_fggea :=ruling {_caefd :_efafg ._dbafgb ,Color :_efafg .Color ,_ebee :_efaa };switch _efafg ._dbafgb {case _aedgg :_fggea ._fdbaa =_efafg .xMean ();_fggea ._ddgcef =_bff .Min (_efafg ._dabae .Y ,_efafg ._cebaf .Y );
_fggea ._afcga =_bff .Max (_efafg ._dabae .Y ,_efafg ._cebaf .Y );case _dagd :_fggea ._fdbaa =_efafg .yMean ();_fggea ._ddgcef =_bff .Min (_efafg ._dabae .X ,_efafg ._cebaf .X );_fggea ._afcga =_bff .Max (_efafg ._dabae .X ,_efafg ._cebaf .X );default:_fb .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_efafg ._dbafgb );
return nil ,false ;};return &_fggea ,true ;};type stateStack []*textState ;func (_fbdca *shapesState )quadraticTo (_fdae ,_bde ,_gffc ,_dacga float64 ){if _aaaef {_fb .Log .Info ("\u0071\u0075\u0061d\u0072\u0061\u0074\u0069\u0063\u0054\u006f\u003a");};
_fbdca .addPoint (_gffc ,_dacga );};func _dgeg (_gbffa *wordBag ,_gcagec int )*textLine {_acda :=_gbffa .firstWord (_gcagec );_gcff :=textLine {PdfRectangle :_acda .PdfRectangle ,_cggfe :_acda ._ffagg ,_bfbe :_acda ._dcced };_gcff .pullWord (_gbffa ,_acda ,_gcagec );
return &_gcff ;};func _fdecf (_ggadb *list ,_debecf *_ba .Builder ,_cdec *string ){_bddb :=_ggadg (_ggadb ,_cdec );_debecf .WriteString (_bddb );for _ ,_ebfe :=range _ggadb ._dadg {_ffdf :=*_cdec +"\u0020\u0020\u0020";_fdecf (_ebfe ,_debecf ,&_ffdf );};
};

// String returns a description of `v`.
func (_fgdae *ruling )String ()string {if _fgdae ._caefd ==_ebecb {return "\u004e\u004f\u0054\u0020\u0052\u0055\u004c\u0049\u004e\u0047";};_dfed ,_agfe :="\u0078","\u0079";if _fgdae ._caefd ==_dagd {_dfed ,_agfe ="\u0079","\u0078";};_aeeade :="";if _fgdae ._aaffb !=0.0{_aeeade =_ga .Sprintf (" \u0077\u0069\u0064\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_fgdae ._aaffb );
};return _ga .Sprintf ("\u0025\u00310\u0073\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0020\u0025\u0076\u0025\u0073",_fgdae ._caefd ,_dfed ,_fgdae ._fdbaa ,_agfe ,_fgdae ._ddgcef ,_fgdae ._afcga ,_fgdae ._afcga -_fgdae ._ddgcef ,_fgdae ._ebee ,_fgdae .Color ,_aeeade );
};func (_eegdd *textWord )toTextMarks (_ecfaa *int )[]TextMark {var _eecb []TextMark ;for _ ,_ggef :=range _eegdd ._fbgfg {_eecb =_ccag (_eecb ,_ecfaa ,_ggef .ToTextMark ());};return _eecb ;};

// NewEditor returns a new Editor object
func NewEditor (reader *_dc .PdfReader )*Editor {return &Editor {_dfe :reader }};type intSet map[int ]struct{};func (_ddeg *textLine )text ()string {var _fdd []string ;for _ ,_gbffad :=range _ddeg ._cfad {if _gbffad ._eeggf {_fdd =append (_fdd ,"\u0020");
};_fdd =append (_fdd ,_gbffad ._eagba );};_acdfg :=_ba .Join (_fdd ,"");_ebdg :=_ab ([]rune (_acdfg ));return _ebdg ._ef ;};func (_ffbf *textWord )bbox ()_dc .PdfRectangle {return _ffbf .PdfRectangle };func (_egfga *ruling )alignsPrimary (_aegf *ruling )bool {return _egfga ._caefd ==_aegf ._caefd &&_bff .Abs (_egfga ._fdbaa -_aegf ._fdbaa )< _ebce *0.5;
};var _fbdda =map[rulingKind ]string {_ebecb :"\u006e\u006f\u006e\u0065",_dagd :"\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_aedgg :"\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c"};func (_ffe *textObject )setTextMatrix (_gbbdc []float64 ){if len (_gbbdc )!=6{_fb .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u006c\u0065\u006e\u0028\u0066\u0029\u0020\u0021\u003d\u0020\u0036\u0020\u0028\u0025\u0064\u0029",len (_gbbdc ));
return ;};_bged ,_faae ,_adga ,_bfaf ,_dbba ,_afac :=_gbbdc [0],_gbbdc [1],_gbbdc [2],_gbbdc [3],_gbbdc [4],_gbbdc [5];_ffe ._ddge =_ge .NewMatrix (_bged ,_faae ,_adga ,_bfaf ,_dbba ,_afac );_ffe ._ffcc =_ffe ._ddge ;};const _cbef =10;func (_aecgc *textPara )isAtom ()*textTable {_aaaff :=_aecgc ;
_afbcf :=_aecgc ._becf ;_fceaf :=_aecgc ._ddgea ;if _afbcf .taken ()||_fceaf .taken (){return nil ;};_edecg :=_afbcf ._ddgea ;if _edecg .taken ()||_edecg !=_fceaf ._becf {return nil ;};return _ffbaa (_aaaff ,_afbcf ,_fceaf ,_edecg );};

// String returns a string describing `pt`.
func (_gaa PageText )String ()string {_aaef :=_ga .Sprintf ("P\u0061\u0067\u0065\u0054ex\u0074:\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073",len (_gaa ._aaaa ));_afff :=[]string {"\u002d"+_aaef };for _ ,_fcga :=range _gaa ._aaaa {_afff =append (_afff ,_fcga .String ());
};_afff =append (_afff ,"\u002b"+_aaef );return _ba .Join (_afff ,"\u000a");};func (_geec *textTable )toTextTable (_feefe *textContext )TextTable {if _feed {_fb .Log .Info ("t\u006fT\u0065\u0078\u0074\u0054\u0061\u0062\u006c\u0065:\u0020\u0025\u0064\u0020x \u0025\u0064",_geec ._dgbf ,_geec ._gfdgb );
};_cfagg :=make ([][]TableCell ,_geec ._gfdgb );for _ceecg :=0;_ceecg < _geec ._gfdgb ;_ceecg ++{_cfagg [_ceecg ]=make ([]TableCell ,_geec ._dgbf );for _ddea :=0;_ddea < _geec ._dgbf ;_ddea ++{_aegde :=_geec .get (_ddea ,_ceecg );if _aegde ==nil {continue ;
};_bbefd (_aegde ._bdea );if _feed {_ga .Printf ("\u0025\u0034\u0064 \u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_ddea ,_ceecg ,_aegde );};_cfagg [_ceecg ][_ddea ].Text =_aegde .text ();_eggad :=0;_cfagg [_ceecg ][_ddea ].Marks ._dadfg =_aegde .toTextMarks (&_eggad ,_feefe );
};};_dfcfe :=TextTable {W :_geec ._dgbf ,H :_geec ._gfdgb ,Cells :_cfagg };_dfcfe .PdfRectangle =_geec .bbox ();return _dfcfe ;};func _dace (_cdeg *textLine )bool {_eeef :=true ;_fgbae :=-1;for _ ,_gbaae :=range _cdeg ._cfad {for _ ,_bbfg :=range _gbaae ._fbgfg {_gfaea :=_bbfg ._ggbg ;
if _fgbae ==-1{_fgbae =_gfaea ;}else {if _fgbae !=_gfaea {_eeef =false ;break ;};};};};return _eeef ;};func (_gbefe gridTile )complete ()bool {return _gbefe .numBorders ()==4};type textTable struct{_dc .PdfRectangle ;_dgbf ,_gfdgb int ;_dabaf bool ;_ddbd map[uint64 ]*textPara ;
_dffge map[uint64 ]compositeCell ;};func _abfb (_dgef string )bool {if _g .RuneCountInString (_dgef )< _cfefd {return false ;};_beba ,_gfdga :=_g .DecodeLastRuneInString (_dgef );if _gfdga <=0||!_bf .Is (_bf .Hyphen ,_beba ){return false ;};_beba ,_gfdga =_g .DecodeLastRuneInString (_dgef [:len (_dgef )-_gfdga ]);
return _gfdga > 0&&!_bf .IsSpace (_beba );};func (_gcbb *textObject )nextLine (){_gcbb .moveLP (0,-_gcbb ._fbab ._cdcd )};func (_caab *wordBag )arrangeText (_dbeb bool )*textPara {_caab .sort ();if _bdfb {_caab .removeDuplicates ();};var _edfce []*textLine ;
for _ ,_fgac :=range _caab .depthIndexes (){for !_caab .empty (_fgac ){_fdgf :=_caab .firstReadingIndex (_fgac );_cgff :=_caab .firstWord (_fdgf );_cgcdd :=_dgeg (_caab ,_fdgf );_gbec :=_cgff ._ffagg ;if _gbec < _geee {_gbec =_geee ;};_gggeg :=_cgff ._dcced -_gfge *_gbec ;
_dfdfg :=_cgff ._dcced +_gfge *_gbec ;_becfb :=_aecf *_gbec ;_begf :=_feef *_gbec ;_ageb :for {var _faef *textWord ;_caae :=0;for _ ,_efeb :=range _caab .depthBand (_gggeg ,_dfdfg ){_ggaf :=_caab .highestWord (_efeb ,_gggeg ,_dfdfg );if _ggaf ==nil {continue ;
};_caffb :=_dcbbc (_ggaf ,_cgcdd ._cfad [len (_cgcdd ._cfad )-1]);if _caffb < -_begf {break _ageb ;};if !_dbeb &&_caffb > _becfb {continue ;};if _faef !=nil &&_ccefe (_ggaf ,_faef )>=0{continue ;};_faef =_ggaf ;_caae =_efeb ;};if _faef ==nil {break ;};
_cgcdd .pullWord (_caab ,_faef ,_caae );};_cgcdd .markWordBoundaries ();_edfce =append (_edfce ,_cgcdd );};};if len (_edfce )==0{return nil ;};_a .Slice (_edfce ,func (_afga ,_aacfd int )bool {return _gcadd (_edfce [_afga ],_edfce [_aacfd ])< 0});_agef :=_bgedf (_caab .PdfRectangle ,_edfce );
if _cbeed {_fb .Log .Info ("\u0061\u0072\u0072an\u0067\u0065\u0054\u0065\u0078\u0074\u0020\u0021\u0021\u0021\u0020\u0070\u0061\u0072\u0061\u003d\u0025\u0073",_agef .String ());if _gbcf {for _dafe ,_efgf :=range _agef ._bdea {_ga .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dafe ,_efgf .String ());
if _addg {for _cedfb ,_agbag :=range _efgf ._cfad {_ga .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_cedfb ,_agbag .String ());for _ffgb ,_bfed :=range _agbag ._fbgfg {_ga .Printf ("\u00251\u0032\u0064\u003a\u0020\u0025\u0073\n",_ffgb ,_bfed .String ());
};};};};};};return _agef ;};func (_beaab rulingList )asTiling ()gridTiling {if _ceee {_fb .Log .Info ("r\u0075\u006ci\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0063s\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u002b\u002b\u002b\u0020\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_beaab ));
};for _eggeg ,_baaa :=range _beaab [1:]{_fbabb :=_beaab [_eggeg ];if _fbabb .alignsPrimary (_baaa )&&_fbabb .alignsSec (_baaa ){_fb .Log .Error ("a\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0044\u0075\u0070\u006c\u0069\u0063\u0061\u0074\u0065 \u0072\u0075\u006c\u0069\u006e\u0067\u0073\u002e\u000a\u0009v=\u0025\u0073\u000a\t\u0077=\u0025\u0073",_baaa ,_fbabb );
};};_beaab .sortStrict ();_beaab .log ("\u0073n\u0061\u0070\u0070\u0065\u0064");_eafdf ,_agaa :=_beaab .vertsHorzs ();_fecb :=_eafdf .primaries ();_bbca :=_agaa .primaries ();_bfdaa :=len (_fecb )-1;_cfcc :=len (_bbca )-1;if _bfdaa ==0||_cfcc ==0{return gridTiling {};
};_edeg :=_dc .PdfRectangle {Llx :_fecb [0],Urx :_fecb [_bfdaa ],Lly :_bbca [0],Ury :_bbca [_cfcc ]};if _ceee {_fb .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0072\u0074s=\u0025\u0064",len (_eafdf ));
for _gfdgd ,_ecage :=range _eafdf {_ga .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gfdgd ,_ecage );};_fb .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0068\u006f\u0072\u007as=\u0025\u0064",len (_agaa ));
for _bdgc ,_dffa :=range _agaa {_ga .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bdgc ,_dffa );};_fb .Log .Info ("\u0072\u0075\u006c\u0069\u006eg\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067:\u0020\u0020\u0077\u0078\u0068\u003d\u0025\u0064\u0078\u0025\u0064\u000a\u0009\u006c\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a\u0009\u006c\u006c\u0079\u003d\u0025\u002e\u0032f",_bfdaa ,_cfcc ,_fecb ,_bbca );
};_geafb :=make ([]gridTile ,_bfdaa *_cfcc );for _dbbb :=_cfcc -1;_dbbb >=0;_dbbb --{_bfafc :=_bbca [_dbbb ];_gedgf :=_bbca [_dbbb +1];for _gccf :=0;_gccf < _bfdaa ;_gccf ++{_cbeb :=_fecb [_gccf ];_gbbaf :=_fecb [_gccf +1];_dbge :=_eafdf .findPrimSec (_cbeb ,_bfafc );
_adde :=_eafdf .findPrimSec (_gbbaf ,_bfafc );_gdgab :=_agaa .findPrimSec (_bfafc ,_cbeb );_dabge :=_agaa .findPrimSec (_gedgf ,_cbeb );_bbgcc :=_dc .PdfRectangle {Llx :_cbeb ,Urx :_gbbaf ,Lly :_bfafc ,Ury :_gedgf };_ecadb :=_becgg (_bbgcc ,_dbge ,_adde ,_gdgab ,_dabge );
_geafb [_dbbb *_bfdaa +_gccf ]=_ecadb ;if _ceee {_ga .Printf ("\u0020\u0020\u0078\u003d\u0025\u0032\u0064\u0020\u0079\u003d\u0025\u0032\u0064\u003a\u0020%\u0073 \u0025\u0036\u002e\u0032\u0066\u0020\u0078\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_gccf ,_dbbb ,_ecadb .String (),_ecadb .Width (),_ecadb .Height ());
};};};if _ceee {_fb .Log .Info ("r\u0075\u006c\u0069\u006e\u0067\u004c\u0069\u0073\u0074.\u0061\u0073\u0054\u0069\u006c\u0069\u006eg:\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0020\u0068\u006f\u0072\u0069zo\u006e\u0074a\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_edeg );
};_bgfa :=make ([]map[float64 ]gridTile ,_cfcc );for _bbdfa :=_cfcc -1;_bbdfa >=0;_bbdfa --{if _ceee {_ga .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_bbdfa );};_bgfa [_bbdfa ]=make (map[float64 ]gridTile ,_bfdaa );for _egead :=0;_egead < _bfdaa ;
_egead ++{_ggacb :=_geafb [_bbdfa *_bfdaa +_egead ];if _ceee {_ga .Printf ("\u0020\u0020\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_egead ,_ggacb );};if !_ggacb ._eaead {continue ;};_fcac :=_egead ;for _aaecd :=_egead +1;!_ggacb ._gggfa &&_aaecd < _bfdaa ;
_aaecd ++{_dafcf :=_geafb [_bbdfa *_bfdaa +_aaecd ];_ggacb .Urx =_dafcf .Urx ;_ggacb ._abcae =_ggacb ._abcae ||_dafcf ._abcae ;_ggacb ._adffd =_ggacb ._adffd ||_dafcf ._adffd ;_ggacb ._gggfa =_dafcf ._gggfa ;if _ceee {_ga .Printf ("\u0020 \u0020%\u0034\u0064\u003a\u0020\u0025s\u0020\u2192 \u0025\u0073\u000a",_aaecd ,_dafcf ,_ggacb );
};_fcac =_aaecd ;};if _ceee {_ga .Printf (" \u0020 \u0025\u0032\u0064\u0020\u002d\u0020\u0025\u0032d\u0020\u2192\u0020\u0025s\n",_egead ,_fcac ,_ggacb );};_egead =_fcac ;_bgfa [_bbdfa ][_ggacb .Llx ]=_ggacb ;};};_dbadde :=make (map[float64 ]map[float64 ]gridTile ,_cfcc );
_gfag :=make (map[float64 ]map[float64 ]struct{},_cfcc );for _eecd :=_cfcc -1;_eecd >=0;_eecd --{_cdcde :=_geafb [_eecd *_bfdaa ].Lly ;_dbadde [_cdcde ]=make (map[float64 ]gridTile ,_bfdaa );_gfag [_cdcde ]=make (map[float64 ]struct{},_bfdaa );};if _ceee {_fb .Log .Info ("\u0072u\u006c\u0069n\u0067\u004c\u0069s\u0074\u002e\u0061\u0073\u0054\u0069\u006ci\u006e\u0067\u003a\u0020\u0063\u006fa\u006c\u0065\u0073\u0063\u0065\u0020\u0076\u0065\u0072\u0074\u0069c\u0061\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_edeg );
};for _agfa :=_cfcc -1;_agfa >=0;_agfa --{_eadca :=_geafb [_agfa *_bfdaa ].Lly ;_ggade :=_bgfa [_agfa ];if _ceee {_ga .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_agfa );};for _ ,_edgbb :=range _gdade (_ggade ){if _ ,_fgce :=_gfag [_eadca ][_edgbb ];
_fgce {continue ;};_dfcaf :=_ggade [_edgbb ];if _ceee {_ga .Printf (" \u0020\u0020\u0020\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_dfcaf .String ());};for _dadfb :=_agfa -1;_dadfb >=0;_dadfb --{if _dfcaf ._adffd {break ;};_gdac :=_bgfa [_dadfb ];_deeec ,_fgcfg :=_gdac [_edgbb ];
if !_fgcfg {break ;};if _deeec .Urx !=_dfcaf .Urx {break ;};_dfcaf ._adffd =_deeec ._adffd ;_dfcaf .Lly =_deeec .Lly ;if _ceee {_ga .Printf ("\u0020\u0020\u0020\u0020  \u0020\u0020\u0076\u003d\u0025\u0073\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_deeec .String (),_dfcaf .String ());
};_gfag [_deeec .Lly ][_deeec .Llx ]=struct{}{};};if _agfa ==0{_dfcaf ._adffd =true ;};if _dfcaf .complete (){_dbadde [_eadca ][_edgbb ]=_dfcaf ;};};};_cded :=gridTiling {PdfRectangle :_edeg ,_egfg :_fdcd (_dbadde ),_facfb :_abbf (_dbadde ),_gddd :_dbadde };
_cded .log ("\u0043r\u0065\u0061\u0074\u0065\u0064");return _cded ;};func (_gdbg *textObject )getCurrentFont ()*_dc .PdfFont {_gebb :=_gdbg ._fbab ._fbafg ;if _gebb ==nil {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020U\u0073\u0069\u006e\u0067\u0020d\u0065\u0066a\u0075\u006c\u0074\u002e");
return _dc .DefaultFont ();};return _gebb ;};

// String returns a description of `state`.
func (_ggeg *textState )String ()string {_dedb :="\u005bN\u004f\u0054\u0020\u0053\u0045\u0054]";if _ggeg ._fbafg !=nil {_dedb =_ggeg ._fbafg .BaseFont ();};return _ga .Sprintf ("\u0074\u0063\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0077\u003d\u0025\u002e\u0032\u0066 \u0074f\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u003d\u0025\u0071",_ggeg ._ebe ,_ggeg ._eafb ,_ggeg ._eadb ,_dedb );
};func (_agbdf *textObject )newTextMark (_ggfcc string ,_ecaee _ge .Matrix ,_cdfeb _ge .Point ,_gagge float64 ,_afffa *_dc .PdfFont ,_daegd float64 ,_gffd ,_accf _cc .Color ,_gbfaf _e .PdfObject ,_gbcb []string ,_cbab int ,_acggb int )(textMark ,bool ){_bfcb :=_ecaee .Angle ();
_dggag :=_aebdc (_bfcb ,_cdfad );var _fbcd float64 ;if _dggag %180!=90{_fbcd =_ecaee .ScalingFactorY ();}else {_fbcd =_ecaee .ScalingFactorX ();};_ggfe :=_cedf (_ecaee );_afbe :=_dc .PdfRectangle {Llx :_ggfe .X ,Lly :_ggfe .Y ,Urx :_cdfeb .X ,Ury :_cdfeb .Y };
switch _dggag %360{case 90:_afbe .Urx -=_fbcd ;case 180:_afbe .Ury -=_fbcd ;case 270:_afbe .Urx +=_fbcd ;case 0:_afbe .Ury +=_fbcd ;default:_dggag =0;_afbe .Ury +=_fbcd ;};if _afbe .Llx > _afbe .Urx {_afbe .Llx ,_afbe .Urx =_afbe .Urx ,_afbe .Llx ;};if _afbe .Lly > _afbe .Ury {_afbe .Lly ,_afbe .Ury =_afbe .Ury ,_afbe .Lly ;
};_fcfa :=true ;if _agbdf ._ccee ._bac .Width ()> 0{_bgbc ,_adef :=_ffgf (_afbe ,_agbdf ._ccee ._bac );if !_adef {_fcfa =false ;_fb .Log .Debug ("\u0054\u0065\u0078\u0074\u0020m\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069\u0064\u0065\u0020\u0070a\u0067\u0065\u002e\u0020\u0062\u0062\u006f\u0078\u003d\u0025\u0067\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u003d\u0025\u0067\u0020\u0074\u0065\u0078\u0074\u003d\u0025q",_afbe ,_agbdf ._ccee ._bac ,_ggfcc );
};_afbe =_bgbc ;};_afbcb :=_afbe ;_dfbg :=_agbdf ._ccee ._bac ;switch _dggag %360{case 90:_dfbg .Urx ,_dfbg .Ury =_dfbg .Ury ,_dfbg .Urx ;_afbcb =_dc .PdfRectangle {Llx :_dfbg .Urx -_afbe .Ury ,Urx :_dfbg .Urx -_afbe .Lly ,Lly :_afbe .Llx ,Ury :_afbe .Urx };
case 180:_afbcb =_dc .PdfRectangle {Llx :_dfbg .Urx -_afbe .Llx ,Urx :_dfbg .Urx -_afbe .Urx ,Lly :_dfbg .Ury -_afbe .Lly ,Ury :_dfbg .Ury -_afbe .Ury };case 270:_dfbg .Urx ,_dfbg .Ury =_dfbg .Ury ,_dfbg .Urx ;_afbcb =_dc .PdfRectangle {Llx :_afbe .Ury ,Urx :_afbe .Lly ,Lly :_dfbg .Ury -_afbe .Llx ,Ury :_dfbg .Ury -_afbe .Urx };
};if _afbcb .Llx > _afbcb .Urx {_afbcb .Llx ,_afbcb .Urx =_afbcb .Urx ,_afbcb .Llx ;};if _afbcb .Lly > _afbcb .Ury {_afbcb .Lly ,_afbcb .Ury =_afbcb .Ury ,_afbcb .Lly ;};_ddfc :=textMark {_fceec :_ggfcc ,PdfRectangle :_afbcb ,_bgeb :_afbe ,_agcdc :_afffa ,_ggfcd :_fbcd ,_agdcgb :_daegd ,_cgbf :_ecaee ,_deeb :_cdfeb ,_efdgf :_dggag ,_gccca :_gffd ,_ddca :_accf ,_ffcfd :_gbfaf ,_gbfa :_gbcb ,Th :_agbdf ._fbab ._cggfd ,Tw :_agbdf ._fbab ._eafb ,_ggbg :_acggb ,_cbad :_cbab };
if _dccc {_fb .Log .Info ("n\u0065\u0077\u0054\u0065\u0078\u0074M\u0061\u0072\u006b\u003a\u0020\u0073t\u0061\u0072\u0074\u003d\u0025\u002e\u0032f\u0020\u0065\u006e\u0064\u003d\u0025\u002e\u0032\u0066\u0020%\u0073",_ggfe ,_cdfeb ,_ddfc .String ());};return _ddfc ,_fcfa ;
};func _bcgcf (_abcc []pathSection )rulingList {_cfeeaf (_abcc );if _efgc {_fb .Log .Info ("\u006d\u0061k\u0065\u0053\u0074\u0072\u006f\u006b\u0065\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0064\u0020\u0073\u0074\u0072ok\u0065\u0073",len (_abcc ));
};var _gdbecd rulingList ;for _ ,_gggf :=range _abcc {for _ ,_cefbc :=range _gggf ._eafba {if len (_cefbc ._eaea )< 2{continue ;};_afabe :=_cefbc ._eaea [0];for _ ,_fgabb :=range _cefbc ._eaea [1:]{if _faea ,_becc :=_eeab (_afabe ,_fgabb ,_gggf .Color );
_becc {_gdbecd =append (_gdbecd ,_faea );};_afabe =_fgabb ;};};};if _efgc {_fb .Log .Info ("m\u0061\u006b\u0065\u0053tr\u006fk\u0065\u0052\u0075\u006c\u0069n\u0067\u0073\u003a\u0020\u0025\u0073",_gdbecd );};return _gdbecd ;};func (_bfcff *ruling )alignsSec (_bcef *ruling )bool {const _egba =_ebce +1.0;
return _bfcff ._ddgcef -_egba <=_bcef ._afcga &&_bcef ._ddgcef -_egba <=_bfcff ._afcga ;};func _abcf (_aeea []*TextMarkArray ,_bcgef ,_ddda string )(string ,error ){_ead :=0;for _ ,_cdaf :=range _aeea {_dde :=_cdaf ._dadfg [0].DirectObject ;if _dde ==nil {continue ;
};_cced :=_dde .String ();if len (_cced )> 1{_ebbd :=_fcbg (_cdaf ,&_bcgef ,&_ead ,_ddda );if _ebbd !=nil {return _bcgef ,_ebbd ;};}else if len (_cced )==1{_dafc :=_feca (_cdaf ,&_bcgef ,&_ead ,_ddda );if _dafc !=nil {return _bcgef ,_dafc ;};};};return _bcgef ,nil ;
};

// BidiText represents a bidi text organized in its visual order
// with base direction of the text.
type BidiText struct{_ef string ;_adg string ;};const (RenderModeStroke RenderMode =1<<iota ;RenderModeFill ;RenderModeClip ;);

// TextMark represents extracted text on a page with information regarding both textual content,
// formatting (font and size) and positioning.
// It is the smallest unit of text on a PDF page, typically a single character.
//
// getBBox() in test_text.go shows how to compute bounding boxes of substrings of extracted text.
// The following code extracts the text on PDF page `page` into `text` then finds the bounding box
// `bbox` of substring `term` in `text`.
//
//	ex, _ := New(page)
//	// handle errors
//	pageText, _, _, err := ex.ExtractPageText()
//	// handle errors
//	text := pageText.Text()
//	textMarks := pageText.Marks()
//
//		start := strings.Index(text, term)
//	 end := start + len(term)
//	 spanMarks, err := textMarks.RangeOffset(start, end)
//	 // handle errors
//	 bbox, ok := spanMarks.BBox()
//	 // handle errors
type TextMark struct{

// Text is the extracted text.
Text string ;

// Original is the text in the PDF. It has not been decoded like `Text`.
Original string ;

// BBox is the bounding box of the text.
BBox _dc .PdfRectangle ;

// Font is the font the text was drawn with.
Font *_dc .PdfFont ;

// FontSize is the font size the text was drawn with.
FontSize float64 ;

// Offset is the offset of the start of TextMark.Text in the extracted text. If you do this
//   text, textMarks := pageText.Text(), pageText.Marks()
//   marks := textMarks.Elements()
// then marks[i].Offset is the offset of marks[i].Text in text.
Offset int ;

// Meta is set true for spaces and line breaks that we insert in the extracted text. We insert
// spaces (line breaks) when we see characters that are over a threshold horizontal (vertical)
//  distance  apart. See wordJoiner (lineJoiner) in PageText.computeViews().
Meta bool ;

// FillColor is the fill color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
FillColor _cc .Color ;

// StrokeColor is the stroke color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
StrokeColor _cc .Color ;

// Orientation is the text orientation
Orientation int ;

// DirectObject is the underlying PdfObject (Text Object) that represents the visible texts. This is introduced to get
// a simple access to the TextObject in case editing or replacment of some text is needed. E.g during redaction.
DirectObject _e .PdfObject ;

// ObjString is a decoded string operand of a text-showing operator. It has the same value as `Text` attribute except
// when many glyphs are represented with the same Text Object that contains multiple length string operand in which case
// ObjString spans more than one character string that falls in different TextMark objects.
ObjString []string ;Tw float64 ;Th float64 ;Tc float64 ;Index int ;_dgff bool ;_ebcg *TextTable ;};

// Text returns the text content of the `bulletLists`.
func (_cacg *lists )Text ()string {_ffcef :=&_ba .Builder {};for _ ,_cgcb :=range *_cacg {_gbddg :=_cgcb .Text ();_ffcef .WriteString (_gbddg );};return _ffcef .String ();};func (_eggcf lineRuling )xMean ()float64 {return 0.5*(_eggcf ._dabae .X +_eggcf ._cebaf .X )};
func _dgfde (_cgfd []*textLine ,_bfad map[float64 ][]*textLine )[]*list {_cadg :=_bega (_bfad );_dfdb :=[]*list {};if len (_cadg )==0{return _dfdb ;};_fgbac :=_cadg [0];_gagg :=1;_abbe :=_bfad [_fgbac ];for _dgb ,_egdag :=range _abbe {var _cebf float64 ;
_ecagd :=[]*list {};_gcfgc :=_egdag ._bfbe ;_cebd :=-1.0;if _dgb < len (_abbe )-1{_cebd =_abbe [_dgb +1]._bfbe ;};if _gagg < len (_cadg ){_ecagd =_cdda (_cgfd ,_bfad ,_cadg ,_gagg ,_gcfgc ,_cebd );};_cebf =_cebd ;if len (_ecagd )> 0{_cgab :=_ecagd [0];
if len (_cgab ._gdaa )> 0{_cebf =_cgab ._gdaa [0]._bfbe ;};};_cbge :=[]*textLine {_egdag };_dcgc :=_cgb (_egdag ,_cgfd ,_gcfgc ,_cebf );_cbge =append (_cbge ,_dcgc ...);_efdb :=_dcccd (_cbge ,"\u0062\u0075\u006c\u006c\u0065\u0074",_ecagd );_efdb ._cddg =_beff (_cbge ,"");
_dfdb =append (_dfdb ,_efdb );};return _dfdb ;};func (_ecbd paraList )findTextTables ()[]*textTable {var _ceed []*textTable ;for _ ,_acbe :=range _ecbd {if _acbe .taken ()||_acbe .Width ()==0{continue ;};_cacc :=_acbe .isAtom ();if _cacc ==nil {continue ;
};_cacc .growTable ();if _cacc ._dgbf *_cacc ._gfdgb < _dfgf {continue ;};_cacc .markCells ();_cacc .log ("\u0067\u0072\u006fw\u006e");_ceed =append (_ceed ,_cacc );};return _ceed ;};

// Marks returns the TextMark collection for a page. It represents all the text on the page.
func (_debb PageText )Marks ()*TextMarkArray {return &TextMarkArray {_dadfg :_debb ._dfeeb }};func _gbcfa (_cba *list )[]*textLine {for _ ,_cgge :=range _cba ._dadg {switch _cgge ._ggdb {case "\u004c\u0042\u006fd\u0079":if len (_cgge ._gdaa )!=0{return _cgge ._gdaa ;
};return _gbcfa (_cgge );case "\u0053\u0070\u0061\u006e":return _cgge ._gdaa ;case "I\u006e\u006c\u0069\u006e\u0065\u0053\u0068\u0061\u0070\u0065":return _cgge ._gdaa ;};};return nil ;};func _deagcg (_gfcf *textWord ,_cfef float64 ,_afee ,_caeea rulingList )*wordBag {_dgdf :=_acea (_gfcf ._dcced );
_aaade :=[]*textWord {_gfcf };_dbcg :=wordBag {_bdde :map[int ][]*textWord {_dgdf :_aaade },PdfRectangle :_gfcf .PdfRectangle ,_fgcf :_gfcf ._ffagg ,_gdda :_cfef ,_ceeaa :_afee ,_accd :_caeea };return &_dbcg ;};func (_ageea rulingList )primaries ()[]float64 {_acef :=make (map[float64 ]struct{},len (_ageea ));
for _ ,_bccff :=range _ageea {_acef [_bccff ._fdbaa ]=struct{}{};};_gfcg :=make ([]float64 ,len (_acef ));_babg :=0;for _fafb :=range _acef {_gfcg [_babg ]=_fafb ;_babg ++;};_a .Float64s (_gfcg );return _gfcg ;};func _dd (_bb []string ,_bc int ,_bcg int ){for _fa ,_fba :=_bc ,_bcg -1;
_fa < _fba ;_fa ,_fba =_fa +1,_fba -1{_bdb :=_bb [_fa ];_bb [_fa ]=_bb [_fba ];_bb [_fba ]=_bdb ;};};const (_cbgg markKind =iota ;_efaa ;_gbef ;_cddc ;);

// String returns a human readable description of `s`.
func (_bgbce intSet )String ()string {var _eeff []int ;for _gabfa :=range _bgbce {if _bgbce .has (_gabfa ){_eeff =append (_eeff ,_gabfa );};};_a .Ints (_eeff );return _ga .Sprintf ("\u0025\u002b\u0076",_eeff );};func _caca (_ggggf _dc .PdfRectangle )*ruling {return &ruling {_caefd :_aedgg ,_fdbaa :_ggggf .Urx ,_ddgcef :_ggggf .Lly ,_afcga :_ggggf .Ury };
};

// BBox returns the smallest axis-aligned rectangle that encloses all the TextMarks in `ma`.
func (_cdgb *TextMarkArray )BBox ()(_dc .PdfRectangle ,bool ){var _gbeb _dc .PdfRectangle ;_bcgbc :=false ;for _ ,_aafa :=range _cdgb ._dadfg {if _aafa .Meta ||_fecf (_aafa .Text ){continue ;};if _bcgbc {_gbeb =_bddd (_gbeb ,_aafa .BBox );}else {_gbeb =_aafa .BBox ;
_bcgbc =true ;};};return _gbeb ,_bcgbc ;};func _gebgg (_eefdg []*textLine ,_eccce ,_abbc float64 )[]*textLine {var _agaf []*textLine ;for _ ,_bfgg :=range _eefdg {if _eccce ==-1{if _bfgg ._bfbe > _abbc {_agaf =append (_agaf ,_bfgg );};}else {if _bfgg ._bfbe > _abbc &&_bfgg ._bfbe < _eccce {_agaf =append (_agaf ,_bfgg );
};};};return _agaf ;};type textWord struct{_dc .PdfRectangle ;_dcced float64 ;_eagba string ;_fbgfg []*textMark ;_ffagg float64 ;_eeggf bool ;};func (_dfbcg *textTable )getRight ()paraList {_fagb :=make (paraList ,_dfbcg ._gfdgb );for _adfc :=0;_adfc < _dfbcg ._gfdgb ;
_adfc ++{_abbfa :=_dfbcg .get (_dfbcg ._dgbf -1,_adfc )._becf ;if _abbfa .taken (){return nil ;};_fagb [_adfc ]=_abbfa ;};for _fdbc :=0;_fdbc < _dfbcg ._gfdgb -1;_fdbc ++{if _fagb [_fdbc ]._ddgea !=_fagb [_fdbc +1]{return nil ;};};return _fagb ;};type textObject struct{_ccee *Extractor ;
_fadg *_dc .PdfPageResources ;_gefga _ad .GraphicsState ;_fbab *textState ;_egfd *stateStack ;_ddge _ge .Matrix ;_ffcc _ge .Matrix ;_bgab []*textMark ;_cead bool ;};func (_eebbb gridTile )numBorders ()int {_aaaf :=0;if _eebbb ._eaead {_aaaf ++;};if _eebbb ._gggfa {_aaaf ++;
};if _eebbb ._adffd {_aaaf ++;};if _eebbb ._abcae {_aaaf ++;};return _aaaf ;};func _bdgb (_aefe []*textWord ,_geaab float64 ,_fccd ,_fcde rulingList )*wordBag {_egbd :=_deagcg (_aefe [0],_geaab ,_fccd ,_fcde );for _ ,_cafef :=range _aefe [1:]{_agcfe :=_acea (_cafef ._dcced );
_egbd ._bdde [_agcfe ]=append (_egbd ._bdde [_agcfe ],_cafef );_egbd .PdfRectangle =_bddd (_egbd .PdfRectangle ,_cafef .PdfRectangle );};_egbd .sort ();return _egbd ;};

// String returns a human readable description of `ss`.
func (_aaadf *shapesState )String ()string {return _ga .Sprintf ("\u007b\u0025\u0064\u0020su\u0062\u0070\u0061\u0074\u0068\u0073\u0020\u0066\u0072\u0065\u0073\u0068\u003d\u0025t\u007d",len (_aaadf ._facg ),_aaadf ._fcfg );};func _gaddb (_geaff ,_eeec _ge .Point )bool {_ggbc :=_bff .Abs (_geaff .X -_eeec .X );
_bbgge :=_bff .Abs (_geaff .Y -_eeec .Y );return _adeg (_bbgge ,_ggbc );};func (_deee rulingList )aligned ()bool {if len (_deee )< 2{return false ;};_befaf :=make (map[*ruling ]int );_befaf [_deee [0]]=0;for _ ,_fgff :=range _deee [1:]{_cbcd :=false ;for _gecgg :=range _befaf {if _fgff .gridIntersecting (_gecgg ){_befaf [_gecgg ]++;
_cbcd =true ;break ;};};if !_cbcd {_befaf [_fgff ]=0;};};_bfgb :=0;for _ ,_dcfd :=range _befaf {if _dcfd ==0{_bfgb ++;};};_fceb :=float64 (_bfgb )/float64 (len (_deee ));_ebaa :=_fceb <=1.0-_dbefc ;if _efgc {_fb .Log .Info ("\u0061\u006c\u0069\u0067\u006e\u0065\u0064\u003d\u0025\u0074\u0020\u0075\u006em\u0061\u0074\u0063\u0068\u0065\u0064=\u0025\u002e\u0032\u0066\u003d\u0025\u0064\u002f\u0025\u0064\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_ebaa ,_fceb ,_bfgb ,len (_deee ),_deee .String ());
};return _ebaa ;};func (_dacgg paraList )sortReadingOrder (){_fb .Log .Trace ("\u0073\u006fr\u0074\u0052\u0065\u0061\u0064i\u006e\u0067\u004f\u0072\u0064e\u0072\u003a\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_dacgg ));
if len (_dacgg )<=1{return ;};_dacgg .computeEBBoxes ();_a .Slice (_dacgg ,func (_cdfff ,_abda int )bool {return _gcadd (_dacgg [_cdfff ],_dacgg [_abda ])<=0});};func (_babf *textContext )isDehyphenationDisabled ()bool {if _babf ==nil {return false ;};
return _babf ._bdfeb ;};func _cfeeaf (_ffgc []pathSection ){if _ddbg < 0.0{return ;};if _efgc {_fb .Log .Info ("\u0067\u0072\u0061\u006e\u0075\u006c\u0061\u0072\u0069\u007a\u0065\u003a\u0020\u0025\u0064 \u0073u\u0062\u0070\u0061\u0074\u0068\u0020\u0073\u0065\u0063\u0074\u0069\u006f\u006e\u0073",len (_ffgc ));
};for _abefg ,_fbeeg :=range _ffgc {for _geged ,_fbec :=range _fbeeg ._eafba {for _cdaec ,_fagba :=range _fbec ._eaea {_fbec ._eaea [_cdaec ]=_ge .Point {X :_bbcd (_fagba .X ),Y :_bbcd (_fagba .Y )};if _efgc {_ccgd :=_fbec ._eaea [_cdaec ];if !_bddaa (_fagba ,_ccgd ){_ccfc :=_ge .Point {X :_ccgd .X -_fagba .X ,Y :_ccgd .Y -_fagba .Y };
_ga .Printf ("\u0025\u0034d \u002d\u0020\u00254\u0064\u0020\u002d\u0020%4d\u003a %\u002e\u0032\u0066\u0020\u2192\u0020\u0025.2\u0066\u0020\u0028\u0025\u0067\u0029\u000a",_abefg ,_geged ,_cdaec ,_fagba ,_ccgd ,_ccfc );};};};};};};

// NewFromContents creates a new extractor from contents and page resources.
func NewFromContents (contents string ,resources *_dc .PdfPageResources )(*Extractor ,error ){const _gga ="\u0065x\u0074\u0072\u0061\u0063t\u006f\u0072\u002e\u004e\u0065w\u0046r\u006fm\u0043\u006f\u006e\u0074\u0065\u006e\u0074s";_edd :=&Extractor {_fdf :contents ,_cfb :resources ,_aff :map[string ]fontEntry {},_baa :map[string ]textResult {}};
_cb .TrackUse (_gga );return _edd ,nil ;};func (_efgga rulingList )log (_dcff string ){if !_efgc {return ;};_fb .Log .Info ("\u0023\u0023\u0023\u0020\u0025\u0031\u0030\u0073\u003a\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_dcff ,_efgga .String ());for _gaeg ,_cegg :=range _efgga {_ga .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gaeg ,_cegg .String ());
};};func _bafd (_decdc []pathSection )rulingList {_cfeeaf (_decdc );if _efgc {_fb .Log .Info ("\u006da\u006b\u0065\u0046\u0069l\u006c\u0052\u0075\u006c\u0069n\u0067s\u003a \u0025\u0064\u0020\u0066\u0069\u006c\u006cs",len (_decdc ));};var _ebbda rulingList ;
for _ ,_cabdf :=range _decdc {for _ ,_ccffd :=range _cabdf ._eafba {if !_ccffd .isQuadrilateral (){if _efgc {_fb .Log .Error ("!\u0069s\u0051\u0075\u0061\u0064\u0072\u0069\u006c\u0061t\u0065\u0072\u0061\u006c: \u0025\u0073",_ccffd );};continue ;};if _gbba ,_cface :=_ccffd .makeRectRuling (_cabdf .Color );
_cface {_ebbda =append (_ebbda ,_gbba );}else {if _cege {_fb .Log .Error ("\u0021\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0073",_ccffd );};};};};if _efgc {_fb .Log .Info ("\u006d\u0061\u006b\u0065Fi\u006c\u006c\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0073",_ebbda .String ());
};return _ebbda ;};func (_cab *textObject )setTextRise (_cbdf float64 ){if _cab ==nil {return ;};_cab ._fbab ._edfd =_cbdf ;};func (_bgcgf *subpath )isQuadrilateral ()bool {if len (_bgcgf ._eaea )< 4||len (_bgcgf ._eaea )> 5{return false ;};if len (_bgcgf ._eaea )==5{_dfagc :=_bgcgf ._eaea [0];
_gbdgb :=_bgcgf ._eaea [4];if _dfagc .X !=_gbdgb .X ||_dfagc .Y !=_gbdgb .Y {return false ;};};return true ;};func (_bgdb *PageText )computeViews (){if _bgdb ._fgga ._cgda ==ExtractionModePlain {_bgdb ._faaa =_bgdb .getText ();return ;};_fgfa :=_bgdb .getParagraphs ();
_bbgf :=new (_ca .Buffer );_dfcc :=&textContext {_bdfeb :_bgdb ._fgga ._dacb };_fgfa .writeText (_bbgf ,_dfcc );_bgdb ._faaa =_bbgf .String ();_bgdb ._dfeeb =_fgfa .toTextMarks (_dfcc );_bgdb ._dbga =_fgfa .tables (_dfcc );if _feed {_fb .Log .Info ("\u0063\u006f\u006dpu\u0074\u0065\u0056\u0069\u0065\u0077\u0073\u003a\u0020\u0074\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064",len (_bgdb ._dbga ));
};};func (_deagc *subpath )add (_eggd ..._ge .Point ){_deagc ._eaea =append (_deagc ._eaea ,_eggd ...)};func _fedc (_fcgf []TextMark ,_ddfg *TextTable )[]TextMark {var _dacef []TextMark ;for _ ,_cfac :=range _fcgf {_cfac ._dgff =true ;_cfac ._ebcg =_ddfg ;
_dacef =append (_dacef ,_cfac );};return _dacef ;};type ruling struct{_caefd rulingKind ;_ebee markKind ;_cc .Color ;_fdbaa float64 ;_ddgcef float64 ;_afcga float64 ;_aaffb float64 ;};func (_aaedf rulingList )sortStrict (){_a .Slice (_aaedf ,func (_fcaaea ,_cece int )bool {_gbfaa ,_cfeea :=_aaedf [_fcaaea ],_aaedf [_cece ];
_gfcbg ,_affb :=_gbfaa ._caefd ,_cfeea ._caefd ;if _gfcbg !=_affb {return _gfcbg > _affb ;};_daff ,_gdce :=_gbfaa ._fdbaa ,_cfeea ._fdbaa ;if !_ggdae (_daff -_gdce ){return _daff < _gdce ;};_daff ,_gdce =_gbfaa ._ddgcef ,_cfeea ._ddgcef ;if _daff !=_gdce {return _daff < _gdce ;
};return _gbfaa ._afcga < _cfeea ._afcga ;});};func _fcc (_feab string ,_bdba string )([][]int ,error ){_gagf ,_dee :=_d .Compile (_feab );if _dee !=nil {return nil ,_ga .Errorf ("\u0065\u0072\u0072\u006f\u0072\u0020c\u006f\u006d\u0070\u0069\u006c\u0069\u006e\u0067\u0020\u0072\u0065\u0067\u0065x\u0020\u0070\u0061\u0074\u0074\u0065\u0072n\u003a\u0020\u0025\u0077",_dee );
};_dbd :=_gagf .FindAllStringIndex (_bdba ,-1);return _dbd ,nil ;};func _daed (_gebgd []*textWord ,_gabgc *textWord )[]*textWord {for _eacgec ,_dgccb :=range _gebgd {if _dgccb ==_gabgc {return _bgbgd (_gebgd ,_eacgec );};};_fb .Log .Error ("\u0072\u0065\u006d\u006f\u0076e\u0057\u006f\u0072\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u0073\u0020\u0064o\u0065\u0073\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",_gabgc );
return nil ;};func (_fggef paraList )writeText (_abaga _f .Writer ,_ccda *textContext ){for _cgfgd ,_ccff :=range _fggef {if _ccff ._fcgc {continue ;};_ccff .writeText (_abaga ,_ccda );if _cgfgd !=len (_fggef )-1{if _cbede (_ccff ,_fggef [_cgfgd +1]){_abaga .Write ([]byte ("\u0020"));
}else {_abaga .Write ([]byte ("\u000a"));_abaga .Write ([]byte ("\u000a"));};};};_abaga .Write ([]byte ("\u000a"));_abaga .Write ([]byte ("\u000a"));};func _bgdff (_bgdbf []int )[]int {_adb :=make ([]int ,len (_bgdbf ));for _cdegd ,_fcaae :=range _bgdbf {_adb [len (_bgdbf )-1-_cdegd ]=_fcaae ;
};return _adb ;};func _cace (_gedg []TextMark ,_defb *int ,_cebb string )[]TextMark {_ebfee :=_aabb ;_ebfee .Text =_cebb ;return _ccag (_gedg ,_defb ,_ebfee );};

// Match defines the structure for each match, including pattern, indexes, and locations.
type Match struct{Pattern string ;Indexes [][]int ;Locations []Box ;};func _cfbg (_ffag string ,_bdbg ,_cfbbe int ,_affe string )string {if _cfbbe > len (_ffag )-1{return _ffag [:_bdbg ]+_affe ;};return _ffag [:_bdbg ]+_affe +_ffag [_cfbbe :];};func (_bdae *textLine )bbox ()_dc .PdfRectangle {return _bdae .PdfRectangle };
type rulingKind int ;func (_faaeb rulingList )vertsHorzs ()(rulingList ,rulingList ){var _bcfgf ,_bcab rulingList ;for _ ,_gfefe :=range _faaeb {switch _gfefe ._caefd {case _aedgg :_bcfgf =append (_bcfgf ,_gfefe );case _dagd :_bcab =append (_bcab ,_gfefe );
};};return _bcfgf ,_bcab ;};func _ffeed (_efefa ,_geafa int )int {if _efefa > _geafa {return _efefa ;};return _geafa ;};func _eeea (_bcfe []*wordBag )[]*wordBag {if len (_bcfe )<=1{return _bcfe ;};if _cbeed {_fb .Log .Info ("\u006d\u0065\u0072\u0067\u0065\u0057\u006f\u0072\u0064B\u0061\u0067\u0073\u003a");
};_a .Slice (_bcfe ,func (_dfab ,_bbgc int )bool {_ggdg ,_cec :=_bcfe [_dfab ],_bcfe [_bbgc ];_bffbg :=_ggdg .Width ()*_ggdg .Height ();_aegd :=_cec .Width ()*_cec .Height ();if _bffbg !=_aegd {return _bffbg > _aegd ;};if _ggdg .Height ()!=_cec .Height (){return _ggdg .Height ()> _cec .Height ();
};return _dfab < _bbgc ;});var _ccdg []*wordBag ;_ffebe :=make (intSet );for _baeb :=0;_baeb < len (_bcfe );_baeb ++{if _ffebe .has (_baeb ){continue ;};_bbbd :=_bcfe [_baeb ];for _gaeb :=_baeb +1;_gaeb < len (_bcfe );_gaeb ++{if _ffebe .has (_baeb ){continue ;
};_bdda :=_bcfe [_gaeb ];_dcad :=_bbbd .PdfRectangle ;_dcad .Llx -=_bbbd ._fgcf ;if _afabd (_dcad ,_bdda .PdfRectangle ){_bbbd .absorb (_bdda );_ffebe .add (_gaeb );};};_ccdg =append (_ccdg ,_bbbd );};if len (_bcfe )!=len (_ccdg )+len (_ffebe ){_fb .Log .Error ("\u006d\u0065\u0072ge\u0057\u006f\u0072\u0064\u0042\u0061\u0067\u0073\u003a \u0025d\u2192%\u0064 \u0061\u0062\u0073\u006f\u0072\u0062\u0065\u0064\u003d\u0025\u0064",len (_bcfe ),len (_ccdg ),len (_ffebe ));
};return _ccdg ;};type compositeCell struct{_dc .PdfRectangle ;paraList ;};func _ggdae (_eeebb float64 )bool {return _bff .Abs (_eeebb )< _badd };func (_dede *Extractor )extractPageText (_gce string ,_cfbe *_dc .PdfPageResources ,_fgeb _ge .Matrix ,_gfab int ,_fac bool )(*PageText ,int ,int ,error ){_fb .Log .Trace ("\u0065x\u0074\u0072\u0061\u0063t\u0050\u0061\u0067\u0065\u0054e\u0078t\u003a \u006c\u0065\u0076\u0065\u006c\u003d\u0025d",_gfab );
_bebg :=&PageText {_becab :_dede ._bac ,_ceea :_dede ._bcge ,_debec :_dede ._cdg };_aacb :=_gdeg (_dede ._bac );var _bbde stateStack ;_egea :=_fbeg (_dede ,_cfbe ,_ad .GraphicsState {},&_aacb ,&_bbde );_ccg :=shapesState {_cgee :_fgeb ,_cca :_ge .IdentityMatrix (),_gcba :_egea };
var _abfg bool ;_agbdg :=-1;_edfg :="";if _gfab > _gdag {_adea :=_caa .New ("\u0066\u006f\u0072\u006d s\u0074\u0061\u0063\u006b\u0020\u006f\u0076\u0065\u0072\u0066\u006c\u006f\u0077");_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0065\u0078\u0074\u0072\u0061\u0063\u0074\u0050\u0061\u0067\u0065\u0054\u0065\u0078\u0074\u002e\u0020\u0072\u0065\u0063u\u0072\u0073\u0069\u006f\u006e\u0020\u006c\u0065\u0076\u0065\u006c\u003d\u0025\u0064 \u0065r\u0072\u003d\u0025\u0076",_gfab ,_adea );
return _bebg ,_aacb ._accc ,_aacb ._gfgb ,_adea ;};_aggg :=_ad .NewContentStreamParser (_gce );_dca ,_cdaa :=_aggg .Parse ();if _cdaa !=nil {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020e\u0078\u0074\u0072a\u0063\u0074\u0050\u0061g\u0065\u0054\u0065\u0078\u0074\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cdaa );
return _bebg ,_aacb ._accc ,_aacb ._gfgb ,_cdaa ;};_bebg ._ffgg =_dca ;_cdca :=_ad .NewContentStreamProcessor (*_dca );if _dede ._dfg !=nil {_cdca .SetRelaxedMode (_dede ._dfg .RelaxedMode );};_cdca .AddHandler (_ad .HandlerConditionEnumAllOperands ,"",func (_bfga *_ad .ContentStreamOperation ,_aec _ad .GraphicsState ,_eccf *_dc .PdfPageResources )error {_efc :=_bfga .Operand ;
if _bbgg {_fb .Log .Info ("\u0026&\u0026\u0020\u006f\u0070\u003d\u0025s",_bfga );};switch _efc {case "\u0071":if _aaaef {_fb .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_ccg ._cca );};_bbde .push (&_aacb );case "\u0051":if !_bbde .empty (){_aacb =*_bbde .pop ();
};_ccg ._cca =_aec .CTM ;if _aaaef {_fb .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_ccg ._cca );};case "\u0042\u0044\u0043":_egg ,_acd :=_e .GetDict (_bfga .Params [1]);if !_acd {_fb .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0042D\u0043\u0020\u006f\u0070\u003d\u0025\u0073 \u0047\u0065\u0074\u0044\u0069\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_bfga );
return _cdaa ;};_dfgc :=_egg .Get ("\u004d\u0043\u0049\u0044");if _dfgc !=nil {_cebab ,_debg :=_e .GetIntVal (_dfgc );if !_debg {_fb .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0042\u0044C\u0020\u006f\u0070=\u0025\u0073\u002e\u0020\u0042\u0061\u0064\u0020\u006eum\u0065\u0072\u0069c\u0061\u006c \u006f\u0062\u006a\u0065\u0063\u0074.\u0020\u006f=\u0025\u0073",_bfga ,_dfgc );
};_agbdg =_cebab ;}else {_agbdg =-1;};if _dede ._bcge !=nil &&_agbdg !=-1&&_dede ._cgdc !=-1&&_dede ._bcge .ParentTree !=nil {_fgcd :=_dede ._cgdc ;var _gbac func (_bagg []*_dc .KValue )bool ;_gbac =func (_gfae []*_dc .KValue )bool {for _ ,_dcca :=range _gfae {if _fegf :=_dcca .GetKDict ();
_fegf !=nil {_deag :=_fegf .GetChildren ();if len (_deag )==1&&_deag [0].GetMCID ()!=nil {if *_deag [0].GetMCID ()==_agbdg {if _fegf .ActualText !=nil {_edfg =_ba .TrimSpace (_fegf .ActualText .Str ());return true ;};return false ;};}else {return _gbac (_deag );
};};};return false ;};if _bfcf :=_dede ._bcge .ParentTree .Get ("\u004e\u0075\u006d\u0073");_bfcf !=nil {_bcgb ,_cafa :=_e .GetArray (_bfcf );if !_cafa {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0042\u0044\u0043\u0020\u006f\u0070\u003d\u0025\u0073\u002e\u0020\u0042\u0061\u0064\u0020\u004e\u0075m\u0073\u0020\u0061\u0072\u0072a\u0079\u002e \u006f\u003d\u0025\u0073",_bfga ,_bfcf );
}else {for _dcg :=0;_dcg < _bcgb .Len ();_dcg +=2{if _fdba ,_dbad :=_e .GetInt (_bcgb .Get (_dcg ));_dbad {if int (*_fdba )==_fgcd {if _cfd :=_bcgb .Get (_dcg +1);_cfd !=nil {if _bdab ,_bad :=_e .GetArray (_cfd );_bad {for _ ,_cbfa :=range _bdab .Elements (){_badc ,_gcca :=_dc .NewKDictFromPdfObject (_cbfa );
if _gcca !=nil {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0042\u0044\u0043\u0020\u006f\u0070\u003d\u0025\u0073\u002e\u0020\u0042\u0061d\u0020\u004b\u0044\u0069\u0063\u0074\u002e \u006f\u003d\u0025\u0073",_bfga ,_cbfa );continue ;};_bcaa :=_badc .GetChildren ();
if len (_bcaa )==1&&_bcaa [0].GetMCID ()!=nil {if *_bcaa [0].GetMCID ()==_agbdg {if _badc .ActualText !=nil {_edfg =_ba .TrimSpace (_badc .ActualText .Str ());};break ;}else if _gbac (_bcaa ){break ;};};};};};};};};};};};if _edfg ==""{_gfg :=_egg .Get ("\u0041\u0063\u0074\u0075\u0061\u006c\u0054\u0065\u0078\u0074");
if _gfg !=nil {_edfg =_ba .TrimSpace (_gfg .String ());};};case "\u0045\u004d\u0043":_agbdg =-1;_edfg ="";case "\u0042\u0054":if _abfg {_fb .Log .Debug ("\u0042\u0054\u0020\u0063\u0061\u006c\u006c\u0065\u0064\u0020\u0077\u0068\u0069\u006c\u0065 \u0069n\u0020\u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
_bebg ._aaaa =append (_bebg ._aaaa ,_egea ._bgab ...);};_abfg =true ;_gbb :=_aec ;if _fac {_gbb =_ad .GraphicsState {};_gbb .CTM =_ccg ._cca ;};_gbb .CTM =_fgeb .Mult (_gbb .CTM );_egea =_fbeg (_dede ,_eccf ,_gbb ,&_aacb ,&_bbde );_ccg ._gcba =_egea ;case "\u0045\u0054":if !_abfg {_fb .Log .Debug ("\u0045\u0054\u0020ca\u006c\u006c\u0065\u0064\u0020\u006f\u0075\u0074\u0073i\u0064e\u0020o\u0066 \u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
};_abfg =false ;_bebg ._aaaa =append (_bebg ._aaaa ,_egea ._bgab ...);_egea .reset ();case "\u0054\u002a":_egea .nextLine ();case "\u0054\u0064":if _gbbd ,_cdfa :=_egea .checkOp (_bfga ,2,true );!_gbbd {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cdfa );
return _cdfa ;};_gcb ,_gbc ,_gbf :=_gbdbf (_bfga .Params );if _gbf !=nil {return _gbf ;};_egea .moveText (_gcb ,_gbc );case "\u0054\u0044":if _gdb ,_geaf :=_egea .checkOp (_bfga ,2,true );!_gdb {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_geaf );
return _geaf ;};_abea ,_dgcc ,_edfc :=_gbdbf (_bfga .Params );if _edfc !=nil {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_edfc );return _edfc ;};_egea .moveTextSetLeading (_abea ,_dgcc );case "\u0054\u006a":if _gbad ,_ggb :=_egea .checkOp (_bfga ,1,true );
!_gbad {_fb .Log .Debug ("\u0045\u0052\u0052\u004fR:\u0020\u0054\u006a\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0065\u0072\u0072\u003d%\u0076",_bfga ,_ggb );return _ggb ;};_caea :=_e .TraceToDirectObject (_bfga .Params [0]);_bgfb ,_ecf :=_e .GetStringBytes (_caea );
if !_ecf {_fb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020T\u006a\u0020o\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074S\u0074\u0072\u0069\u006e\u0067\u0042\u0079\u0074\u0065\u0073\u0020\u0066a\u0069\u006c\u0065\u0064",_bfga );return _e .ErrTypeError ;
};return _egea .showText (_caea ,_bgfb ,_agbdg ,_edfg );case "\u0054\u004a":if _ggda ,_baag :=_egea .checkOp (_bfga ,1,true );!_ggda {_fb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_baag );return _baag ;
};_gae ,_bga :=_e .GetArray (_bfga .Params [0]);if !_bga {_fb .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_bfga );
return _cdaa ;};return _egea .showTextAdjusted (_gae ,_agbdg ,_edfg );case "\u0027":if _fabb ,_fce :=_egea .checkOp (_bfga ,1,true );!_fabb {_fb .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0027\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fce );return _fce ;
};_gcd :=_e .TraceToDirectObject (_bfga .Params [0]);_dbf ,_cccf :=_e .GetStringBytes (_gcd );if !_cccf {_fb .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020'\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_bfga );
return _e .ErrTypeError ;};_egea .nextLine ();return _egea .showText (_gcd ,_dbf ,_agbdg ,_edfg );case "\u0022":if _eac ,_dac :=_egea .checkOp (_bfga ,3,true );!_eac {_fb .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0022\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dac );
return _dac ;};_fbag ,_cbedf ,_gdagc :=_gbdbf (_bfga .Params [:2]);if _gdagc !=nil {return _gdagc ;};_cefe :=_e .TraceToDirectObject (_bfga .Params [2]);_defa ,_cggf :=_e .GetStringBytes (_cefe );if !_cggf {_fb .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020\"\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_bfga );
return _e .ErrTypeError ;};_egea .setCharSpacing (_fbag );_egea .setWordSpacing (_cbedf );_egea .nextLine ();return _egea .showText (_cefe ,_defa ,_agbdg ,_edfg );case "\u0054\u004c":_dedeg ,_cega :=_acba (_bfga );if _cega !=nil {_fb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004c\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cega );
return _cega ;};_egea .setTextLeading (_dedeg );case "\u0054\u0063":_eafa ,_gdbb :=_acba (_bfga );if _gdbb !=nil {_fb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0063\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gdbb );return _gdbb ;};_egea .setCharSpacing (_eafa );
case "\u0054\u0066":if _acee ,_gbgc :=_egea .checkOp (_bfga ,2,true );!_acee {_fb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0066\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gbgc );return _gbgc ;};_add ,_cbfd :=_e .GetNameVal (_bfga .Params [0]);
if !_cbfd {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u004ea\u006d\u0065\u0056\u0061\u006c\u0020\u0066a\u0069\u006c\u0065\u0064",_bfga );return _e .ErrTypeError ;};_cefea ,_cbead :=_e .GetNumberAsFloat (_bfga .Params [1]);
if !_cbfd {_fb .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u0046\u006c\u006f\u0061\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065d\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bfga ,_cbead );
return _cbead ;};_cbead =_egea .setFont (_add ,_cefea );_egea ._cead =_caa .Is (_cbead ,_e .ErrNotSupported );if _cbead !=nil &&!_egea ._cead {return _cbead ;};case "\u0054\u006d":if _bdad ,_adcf :=_egea .checkOp (_bfga ,6,true );!_bdad {_fb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u006d\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_adcf );
return _adcf ;};_bffd ,_fcd :=_e .GetNumbersAsFloat (_bfga .Params );if _fcd !=nil {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fcd );return _fcd ;};_egea .setTextMatrix (_bffd );case "\u0054\u0072":if _fdbd ,_dfee :=_egea .checkOp (_bfga ,1,true );
!_fdbd {_fb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0072\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dfee );return _dfee ;};_bffg ,_cge :=_e .GetIntVal (_bfga .Params [0]);if !_cge {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0072\u0020\u006f\u0070\u003d\u0025\u0073 \u0047e\u0074\u0049\u006e\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_bfga );
return _e .ErrTypeError ;};_egea .setTextRenderMode (_bffg );case "\u0054\u0073":if _bffgf ,_cbba :=_egea .checkOp (_bfga ,1,true );!_bffgf {_fb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0073\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cbba );
return _cbba ;};_egd ,_gad :=_e .GetNumberAsFloat (_bfga .Params [0]);if _gad !=nil {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gad );return _gad ;};_egea .setTextRise (_egd );case "\u0054\u0077":if _gfdg ,_ggfc :=_egea .checkOp (_bfga ,1,true );
!_gfdg {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ggfc );return _ggfc ;};_gdd ,_facf :=_e .GetNumberAsFloat (_bfga .Params [0]);if _facf !=nil {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_facf );
return _facf ;};_egea .setWordSpacing (_gdd );case "\u0054\u007a":if _bbag ,_bgfbb :=_egea .checkOp (_bfga ,1,true );!_bbag {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bgfbb );return _bgfbb ;};_dbdb ,_bgbg :=_e .GetNumberAsFloat (_bfga .Params [0]);
if _bgbg !=nil {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bgbg );return _bgbg ;};_egea .setHorizScaling (_dbdb );case "\u0063\u006d":if !_fac {_ccg ._cca =_aec .CTM ;};if _ccg ._cca .Singular (){_aedg :=_ge .IdentityMatrix ().Translate (_ccg ._cca .Translation ());
_fb .Log .Debug ("S\u0069n\u0067\u0075\u006c\u0061\u0072\u0020\u0063\u0074m\u003d\u0025\u0073\u2192%s",_ccg ._cca ,_aedg );_ccg ._cca =_aedg ;};if _aaaef {_fb .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_ccg ._cca );};case "\u006d":if len (_bfga .Params )!=2{_fb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_cafe );
return nil ;};_edag ,_fbba :=_e .GetNumbersAsFloat (_bfga .Params );if _fbba !=nil {return _fbba ;};_ccg .moveTo (_edag [0],_edag [1]);case "\u006c":if len (_bfga .Params )!=2{_fb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_cafe );
return nil ;};_abdc ,_eeb :=_e .GetNumbersAsFloat (_bfga .Params );if _eeb !=nil {return _eeb ;};_ccg .lineTo (_abdc [0],_abdc [1]);case "\u0063":if len (_bfga .Params )!=6{return _cafe ;};_eacg ,_dbff :=_e .GetNumbersAsFloat (_bfga .Params );if _dbff !=nil {return _dbff ;
};_fb .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_eacg );_ccg .cubicTo (_eacg [0],_eacg [1],_eacg [2],_eacg [3],_eacg [4],_eacg [5]);case "\u0076","\u0079":if len (_bfga .Params )!=4{return _cafe ;
};_dfdf ,_gbbc :=_e .GetNumbersAsFloat (_bfga .Params );if _gbbc !=nil {return _gbbc ;};_fb .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_dfdf );_ccg .quadraticTo (_dfdf [0],_dfdf [1],_dfdf [2],_dfdf [3]);
case "\u0068":_ccg .closePath ();case "\u0072\u0065":if len (_bfga .Params )!=4{return _cafe ;};_aacbc ,_cccdc :=_e .GetNumbersAsFloat (_bfga .Params );if _cccdc !=nil {return _cccdc ;};_ccg .drawRectangle (_aacbc [0],_aacbc [1],_aacbc [2],_aacbc [3]);
_ccg .closePath ();case "\u0053":_ccg .stroke (&_bebg ._gdafg );_ccg .clearPath ();case "\u0073":_ccg .closePath ();_ccg .stroke (&_bebg ._gdafg );_ccg .clearPath ();case "\u0046":_ccg .fill (&_bebg ._dcaag );_ccg .clearPath ();case "\u0066","\u0066\u002a":_ccg .closePath ();
_ccg .fill (&_bebg ._dcaag );_ccg .clearPath ();case "\u0042","\u0042\u002a":_ccg .fill (&_bebg ._dcaag );_ccg .stroke (&_bebg ._gdafg );_ccg .clearPath ();case "\u0062","\u0062\u002a":_ccg .closePath ();_ccg .fill (&_bebg ._dcaag );_ccg .stroke (&_bebg ._gdafg );
_ccg .clearPath ();case "\u006e":_ccg .clearPath ();case "\u0044\u006f":if len (_bfga .Params )==0{_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0058\u004fbj\u0065c\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006f\u0070\u0065\u0072\u0061n\u0064\u0020\u0066\u006f\u0072\u0020\u0044\u006f\u0020\u006f\u0070\u0065\u0072\u0061\u0074\u006f\u0072.\u0020\u0047\u006f\u0074\u0020\u0025\u002b\u0076\u002e",_bfga .Params );
return _e .ErrRangeError ;};_bcbe ,_gddf :=_e .GetName (_bfga .Params [0]);if !_gddf {_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0044\u006f\u0020\u006f\u0070e\u0072a\u0074\u006f\u0072\u0020\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006fp\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u002b\u0076\u002e",_bfga .Params [0]);
return _e .ErrTypeError ;};_ ,_edde :=_eccf .GetXObjectByName (*_bcbe );if _edde !=_dc .XObjectTypeForm {break ;};_edaf ,_gddf :=_dede ._baa [_bcbe .String ()];if !_gddf {_dcdd ,_gdbbe :=_eccf .GetXObjectFormByName (*_bcbe );if _gdbbe !=nil {_fb .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_gdbbe );
return _gdbbe ;};_dcbb ,_gdbbe :=_dcdd .GetContentStream ();if _gdbbe !=nil {_fb .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_gdbbe );return _gdbbe ;};_fggd :=_dcdd .Resources ;if _fggd ==nil {_fggd =_eccf ;};_fgbf :=_aec .CTM ;if _aacf ,_aab :=_e .GetArray (_dcdd .Matrix );
_aab {_gfbc ,_daeg :=_aacf .GetAsFloat64Slice ();if _daeg !=nil {return _daeg ;};if len (_gfbc )!=6{return _cafe ;};_fdgd :=_ge .NewMatrix (_gfbc [0],_gfbc [1],_gfbc [2],_gfbc [3],_gfbc [4],_gfbc [5]);_fgbf =_aec .CTM .Mult (_fdgd );};_cegc ,_fbff ,_faab ,_gdbbe :=_dede .extractPageText (string (_dcbb ),_fggd ,_fgeb .Mult (_fgbf ),_gfab +1,false );
if _gdbbe !=nil {_fb .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_gdbbe );return _gdbbe ;};_edaf =textResult {*_cegc ,_fbff ,_faab };_dede ._baa [_bcbe .String ()]=_edaf ;};_ccg ._cca =_aec .CTM ;if _aaaef {_fb .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_ccg ._cca );
};_bebg ._aaaa =append (_bebg ._aaaa ,_edaf ._aade ._aaaa ...);_bebg ._gdafg =append (_bebg ._gdafg ,_edaf ._aade ._gdafg ...);_bebg ._dcaag =append (_bebg ._dcaag ,_edaf ._aade ._dcaag ...);_aacb ._accc +=_edaf ._daa ;_aacb ._gfgb +=_edaf ._gfbf ;case "\u0072\u0067","\u0067","\u006b","\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_egea ._gefga .ColorspaceNonStroking =_aec .ColorspaceNonStroking ;
_egea ._gefga .ColorNonStroking =_aec .ColorNonStroking ;case "\u0052\u0047","\u0047","\u004b","\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_egea ._gefga .ColorspaceStroking =_aec .ColorspaceStroking ;_egea ._gefga .ColorStroking =_aec .ColorStroking ;
};return nil ;});_cdaa =_cdca .Process (_cfbe );if _dede ._dfg !=nil &&_dede ._dfg .IncludeAnnotations &&!_fac {for _ ,_gdad :=range _dede ._dadd {_afba ,_gcaa :=_e .GetDict (_gdad .AP );if !_gcaa {continue ;};_aga ,_gcaa :=_afba .Get ("\u004e").(*_e .PdfObjectStream );
if !_gcaa {continue ;};_bcbf ,_aadd :=_e .DecodeStream (_aga );if _aadd !=nil {_fb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u006f\u006e\u0020\u0064\u0065c\u006f\u0064\u0065\u0020\u0073\u0074\u0072\u0065\u0061\u006d:\u0020\u0025\u0076",_aadd );
continue ;};_egdg :=_aga .PdfObjectDictionary .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s");_deeg ,_aadd :=_dc .NewPdfPageResourcesFromDict (_egdg .(*_e .PdfObjectDictionary ));if _aadd !=nil {_fb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072 \u006f\u006e\u0020\u0067\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0061\u006en\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0020\u0072\u0065\u0073\u006f\u0075\u0072\u0063\u0065\u0073\u003a\u0020\u0025\u0076",_aadd );
continue ;};_ece :=_ge .IdentityMatrix ();_cafaa ,_gcaa :=_aga .PdfObjectDictionary .Get ("\u004d\u0061\u0074\u0072\u0069\u0078").(*_e .PdfObjectArray );if _gcaa {_egda ,_ffd :=_cafaa .GetAsFloat64Slice ();if _ffd !=nil {_fb .Log .Debug ("\u0045\u0072\u0072or\u0020\u006f\u006e\u0020\u0067\u0065\u0074\u0074\u0069n\u0067 \u0066l\u006fa\u0074\u0036\u0034\u0020\u0073\u006c\u0069\u0063\u0065\u003a\u0020\u0025\u0076",_ffd );
continue ;};if len (_egda )!=6{_fb .Log .Debug ("I\u006e\u0076\u0061\u006c\u0069\u0064 \u006d\u0061\u0074\u0072\u0069\u0078\u0020\u0073\u006ci\u0063\u0065\u0020l\u0065n\u0067\u0074\u0068");continue ;};_ece =_ge .NewMatrix (_egda [0],_egda [1],_egda [2],_egda [3],_egda [4],_egda [5]);
};_becgb ,_gcaa :=_dede ._bgd [_aga .String ()];if !_gcaa {_dbfe ,_eca ,_baeg ,_bbba :=_dede .extractPageText (string (_bcbf ),_deeg ,_ece ,_gfab +1,true );if _bbba !=nil {_fb .Log .Debug ("\u0045\u0052R\u004f\u0052\u0020\u0065x\u0074\u0072a\u0063\u0074\u0069\u006e\u0067\u0020\u0061\u006en\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0020\u0074\u0065\u0078\u0074s\u003a\u0020\u0025\u0076",_bbba );
continue ;};_becgb =textResult {*_dbfe ,_eca ,_baeg };_dede ._bgd [_aga .String ()]=_becgb ;};_bebg ._aaaa =append (_bebg ._aaaa ,_becgb ._aade ._aaaa ...);_bebg ._gdafg =append (_bebg ._gdafg ,_becgb ._aade ._gdafg ...);_bebg ._dcaag =append (_bebg ._dcaag ,_becgb ._aade ._dcaag ...);
_aacb ._accc +=_becgb ._daa ;_aacb ._gfgb +=_becgb ._gfbf ;};};return _bebg ,_aacb ._accc ,_aacb ._gfgb ,_cdaa ;};func (_fcda *ruling )intersects (_gbdf *ruling )bool {_abcg :=(_fcda ._caefd ==_aedgg &&_gbdf ._caefd ==_dagd )||(_gbdf ._caefd ==_aedgg &&_fcda ._caefd ==_dagd );
_baecg :=func (_afdf ,_efde *ruling )bool {return _afdf ._ddgcef -_cggac <=_efde ._fdbaa &&_efde ._fdbaa <=_afdf ._afcga +_cggac ;};_baecc :=_baecg (_fcda ,_gbdf );_bdcd :=_baecg (_gbdf ,_fcda );if _efgc {_ga .Printf ("\u0020\u0020\u0020\u0020\u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003a\u0020\u0020\u006fr\u0074\u0068\u006f\u0067\u006f\u006e\u0061l\u003d\u0025\u0074\u0020\u006f\u0031\u003d\u0025\u0074\u0020\u006f2\u003d\u0025\u0074\u0020\u2192\u0020\u0025\u0074\u000a"+"\u0020\u0020\u0020 \u0020\u0020\u0020\u0076\u003d\u0025\u0073\u000a"+" \u0020\u0020\u0020\u0020\u0020\u0077\u003d\u0025\u0073\u000a",_abcg ,_baecc ,_bdcd ,_abcg &&_baecc &&_bdcd ,_fcda ,_gbdf );
};return _abcg &&_baecc &&_bdcd ;};func (_bfagcf intSet )del (_dccbc int ){delete (_bfagcf ,_dccbc )};func _bddaa (_abccd ,_gdafc _ge .Point )bool {return _abccd .X ==_gdafc .X &&_abccd .Y ==_gdafc .Y };func (_bgccb *ruling )encloses (_dagbe ,_eadf float64 )bool {return _bgccb ._ddgcef -_cggac <=_dagbe &&_eadf <=_bgccb ._afcga +_cggac ;
};

// Box represents the bounding box of a given textMark on pdf page.
// This might be used for different kinds of high lighting after doing the search
type Box struct{BBox _dc .PdfRectangle ;};

// ExtractionMode defines different types of extraction mode.
type ExtractionMode int ;func (_agfc *wordBag )firstWord (_dge int )*textWord {return _agfc ._bdde [_dge ][0]};type textPara struct{_dc .PdfRectangle ;_fcfaa _dc .PdfRectangle ;_bdea []*textLine ;_fdfd *textTable ;_ggag bool ;_fcgc bool ;_cdga *textPara ;
_becf *textPara ;_ccage *textPara ;_ddgea *textPara ;_bafb []list ;};func _bffcc (_gggg _dc .PdfRectangle ,_eaga bounded )float64 {return _gggg .Ury -_eaga .bbox ().Lly };func (_fafdb rulingList )toTilings ()(rulingList ,[]gridTiling ){_fafdb .log ("\u0074o\u0054\u0069\u006c\u0069\u006e\u0067s");
if len (_fafdb )==0{return nil ,nil ;};_fafdb =_fafdb .tidied ("\u0061\u006c\u006c");_fafdb .log ("\u0074\u0069\u0064\u0069\u0065\u0064");_bbggb :=_fafdb .toGrids ();_dcga :=make ([]gridTiling ,len (_bbggb ));for _bbfb ,_edeb :=range _bbggb {_dcga [_bbfb ]=_edeb .asTiling ();
};return _fafdb ,_dcga ;};func (_cffd paraList )toTextMarks (_bagbd *textContext )[]TextMark {_eeefb :=0;var _gbcfd []TextMark ;for _agbf ,_dfccb :=range _cffd {if _dfccb ._fcgc {continue ;};_acf :=_dfccb .toTextMarks (&_eeefb ,_bagbd );_gbcfd =append (_gbcfd ,_acf ...);
if _agbf !=len (_cffd )-1{if _cbede (_dfccb ,_cffd [_agbf +1]){_gbcfd =_cace (_gbcfd ,&_eeefb ,"\u0020");}else {_gbcfd =_cace (_gbcfd ,&_eeefb ,"\u000a");_gbcfd =_cace (_gbcfd ,&_eeefb ,"\u000a");};};};_gbcfd =_cace (_gbcfd ,&_eeefb ,"\u000a");_gbcfd =_cace (_gbcfd ,&_eeefb ,"\u000a");
return _gbcfd ;};func _acba (_agcd *_ad .ContentStreamOperation )(float64 ,error ){if len (_agcd .Params )!=1{_bdbc :=_caa .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");
_fb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_agcd .Operand ,1,len (_agcd .Params ),_agcd .Params );
return 0.0,_bdbc ;};return _e .GetNumberAsFloat (_agcd .Params [0]);};var _bfee string ="\u0028\u003f\u0069\u0029\u005e\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028?\u003a\u0044\u007cM\u0029\u007c\u0044\u003f\u0043{\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028\u003f\u003a\u004c\u007c\u0043\u0029\u007cL\u003f\u0058\u007b\u0030\u002c\u0033}\u0029\u0028\u0049\u0028\u003f\u003a\u0056\u007c\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u005c\u0029\u007c\u005c\u002e\u0029\u007c\u005e\u005c\u0028\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028\u003f\u003aD\u007cM\u0029\u007c\u0044\u003f\u0043\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028?\u003a\u004c\u007c\u0043\u0029\u007c\u004c?\u0058\u007b0\u002c\u0033\u007d\u0029(\u0049\u0028\u003f\u003a\u0056|\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u005c\u0029";
func (_cdcg *textTable )reduceTiling (_adeaa gridTiling ,_dcgf float64 )*textTable {_dgacb :=make ([]int ,0,_cdcg ._gfdgb );_edgc :=make ([]int ,0,_cdcg ._dgbf );_fgbde :=_adeaa ._egfg ;_acbb :=_adeaa ._facfb ;for _agbae :=0;_agbae < _cdcg ._gfdgb ;_agbae ++{_fcba :=_agbae > 0&&_bff .Abs (_acbb [_agbae -1]-_acbb [_agbae ])< _dcgf &&_cdcg .emptyCompositeRow (_agbae );
if !_fcba {_dgacb =append (_dgacb ,_agbae );};};for _abeg :=0;_abeg < _cdcg ._dgbf ;_abeg ++{_dfeda :=_abeg < _cdcg ._dgbf -1&&_bff .Abs (_fgbde [_abeg +1]-_fgbde [_abeg ])< _dcgf &&_cdcg .emptyCompositeColumn (_abeg );if !_dfeda {_edgc =append (_edgc ,_abeg );
};};if len (_dgacb )==_cdcg ._gfdgb &&len (_edgc )==_cdcg ._dgbf {return _cdcg ;};_fedd :=textTable {_dabaf :_cdcg ._dabaf ,_dgbf :len (_edgc ),_gfdgb :len (_dgacb ),_dffge :make (map[uint64 ]compositeCell ,len (_edgc )*len (_dgacb ))};if _feed {_fb .Log .Info ("\u0072\u0065\u0064\u0075c\u0065\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0025d\u0078%\u0064\u0020\u002d\u003e\u0020\u0025\u0064x\u0025\u0064",_cdcg ._dgbf ,_cdcg ._gfdgb ,len (_edgc ),len (_dgacb ));
_fb .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_edgc );_fb .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_dgacb );};for _dgcegf ,_bbabe :=range _dgacb {for _eaaag ,_aeaef :=range _edgc {_adac ,_ebegcf :=_cdcg .getComposite (_aeaef ,_bbabe );
if len (_adac )==0{continue ;};if _feed {_ga .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_eaaag ,_dgcegf ,_aeaef ,_bbabe ,_adbcg (_adac .merge ().text (),50));};_fedd .putComposite (_eaaag ,_dgcegf ,_adac ,_ebegcf );
};};return &_fedd ;};func (_feedg *textPara )writeText (_egacc _f .Writer ,_adbc *textContext ){if _feedg ._fdfd ==nil {_feedg .writeCellText (_egacc ,_adbc );return ;};for _cbedg :=0;_cbedg < _feedg ._fdfd ._gfdgb ;_cbedg ++{for _dfbc :=0;_dfbc < _feedg ._fdfd ._dgbf ;
_dfbc ++{_ggaaf :=_feedg ._fdfd .get (_dfbc ,_cbedg );if _ggaaf ==nil {_egacc .Write ([]byte ("\u0009"));}else {_bbefd (_ggaaf ._bdea );_ggaaf .writeCellText (_egacc ,_adbc );};_egacc .Write ([]byte ("\u0020"));};if _cbedg < _feedg ._fdfd ._gfdgb -1{_egacc .Write ([]byte ("\u000a"));
};};};func (_abef *textObject )getFontDirect (_fbc string )(*_dc .PdfFont ,error ){_dgd ,_ccde :=_abef .getFontDict (_fbc );if _ccde !=nil {return nil ,_ccde ;};_dggg ,_ccde :=_dc .NewPdfFontFromPdfObject (_dgd );if _ccde !=nil {_fb .Log .Debug ("\u0067\u0065\u0074\u0046\u006f\u006e\u0074\u0044\u0069\u0072\u0065\u0063\u0074\u003a\u0020\u004e\u0065\u0077Pd\u0066F\u006f\u006e\u0074\u0046\u0072\u006f\u006d\u0050\u0064\u0066\u004f\u0062j\u0065\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u006e\u0061\u006d\u0065\u003d%\u0023\u0071\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fbc ,_ccde );
};return _dggg ,_ccde ;};func _fdcd (_gfeed map[float64 ]map[float64 ]gridTile )[]float64 {_dagbc :=make ([]float64 ,0,len (_gfeed ));_dedc :=make (map[float64 ]struct{},len (_gfeed ));for _ ,_aceeg :=range _gfeed {for _edbf :=range _aceeg {if _ ,_degad :=_dedc [_edbf ];
_degad {continue ;};_dagbc =append (_dagbc ,_edbf );_dedc [_edbf ]=struct{}{};};};_a .Float64s (_dagbc );return _dagbc ;};

// String returns a description of `p`.
func (_dgcba *textPara )String ()string {if _dgcba ._fcgc {return _ga .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u005b\u0045\u004d\u0050\u0054\u0059\u005d",_dgcba .PdfRectangle );};_aagg :="";if _dgcba ._fdfd !=nil {_aagg =_ga .Sprintf ("\u005b\u0025\u0064\u0078\u0025\u0064\u005d\u0020",_dgcba ._fdfd ._dgbf ,_dgcba ._fdfd ._gfdgb );
};return _ga .Sprintf ("\u0025\u0036\u002e\u0032f \u0025\u0073\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u0020\u0025\u0071",_dgcba .PdfRectangle ,_aagg ,len (_dgcba ._bdea ),_adbcg (_dgcba .text (),50));};func _edfe (_debge string )(string ,bool ){_fbbff :=[]rune (_debge );
if len (_fbbff )!=1{return "",false ;};_agca ,_fdef :=_feffcb [_fbbff [0]];return _agca ,_fdef ;};func (_abagg *compositeCell )updateBBox (){for _ ,_acece :=range _abagg .paraList {_abagg .PdfRectangle =_bddd (_abagg .PdfRectangle ,_acece .PdfRectangle );
};};func (_aaccf paraList )extractTables (_fdeb []gridTiling )paraList {if _feed {_fb .Log .Debug ("\u0065\u0078\u0074r\u0061\u0063\u0074\u0054\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_aaccf ));
};if len (_aaccf )< _dfgf {return _aaccf ;};_fefd :=_aaccf .findTables (_fdeb );if _feed {_fb .Log .Info ("c\u006f\u006d\u0062\u0069\u006e\u0065d\u0020\u0074\u0061\u0062\u006c\u0065s\u0020\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_fefd ));
for _aadee ,_ecef :=range _fefd {_ecef .log (_ga .Sprintf ("c\u006f\u006d\u0062\u0069\u006e\u0065\u0064\u0020\u0025\u0064",_aadee ));};};return _aaccf .applyTables (_fefd );};func _cbg (_baga *TextMarkArray ,_fgb int )int {_cbb :=_baga .Elements ();_ced :=_fgb -1;
_gde :=_fgb +1;_bebe :=-1;if _ced >=0{_ggdf :=_cbb [_ced ];_dbc :=_ggdf .ObjString ;_cacd :=len (_dbc );_edab :=_ggdf .Index ;if _edab +1< _cacd {return _ced ;};};if _gde < len (_cbb ){_aee :=_cbb [_gde ];_fafa :=_aee .ObjString ;if _fafa [0]!=_aee .Text {return _gde ;
};};if _bebe ==-1&&_cbb [_fgb ].Text =="\u0020"{return _ced ;};return _bebe ;};func (_dgga *wordBag )depthIndexes ()[]int {if len (_dgga ._bdde )==0{return nil ;};_dbac :=make ([]int ,len (_dgga ._bdde ));_efgg :=0;for _fbgd :=range _dgga ._bdde {_dbac [_efgg ]=_fbgd ;
_efgg ++;};_a .Ints (_dbac );return _dbac ;};func (_cgaa *textObject )moveLP (_aadf ,_efd float64 ){_cgaa ._ffcc .Concat (_ge .NewMatrix (1,0,0,1,_aadf ,_efd ));_cgaa ._ddge =_cgaa ._ffcc ;};func _bbefd (_ffbaab []*textLine ){_a .Slice (_ffbaab ,func (_efaff ,_cfca int )bool {_edcgg ,_deafb :=_ffbaab [_efaff ],_ffbaab [_cfca ];
return _edcgg ._bfbe < _deafb ._bfbe ;});};func (_gggcg *textTable )compositeColCorridors ()map[int ][]float64 {_fcdec :=make (map[int ][]float64 ,_gggcg ._dgbf );if _feed {_fb .Log .Info ("\u0063\u006f\u006d\u0070o\u0073\u0069\u0074\u0065\u0043\u006f\u006c\u0043\u006f\u0072r\u0069d\u006f\u0072\u0073\u003a\u0020\u0077\u003d%\u0064\u0020",_gggcg ._dgbf );
};for _dbgca :=0;_dbgca < _gggcg ._dgbf ;_dbgca ++{_fcdec [_dbgca ]=nil ;};return _fcdec ;};func _bbcd (_beac float64 )float64 {return _ddbg *_bff .Round (_beac /_ddbg )};

// Tables returns the tables extracted from the page.
func (_abgc PageText )Tables ()[]TextTable {if _feed {_fb .Log .Info ("\u0054\u0061\u0062\u006c\u0065\u0073\u003a\u0020\u0025\u0064",len (_abgc ._dbga ));};return _abgc ._dbga ;};func (_eaeg *shapesState )addPoint (_bbdg ,_ffce float64 ){_gcage :=_eaeg .establishSubpath ();
_bacf :=_eaeg .devicePoint (_bbdg ,_ffce );if _gcage ==nil {_eaeg ._fcfg =true ;_eaeg ._dfea =_bacf ;}else {_gcage .add (_bacf );};};func (_acbge *wordBag )depthRange (_fefb ,_fbcf int )[]int {var _ccgf []int ;for _cff :=range _acbge ._bdde {if _fefb <=_cff &&_cff <=_fbcf {_ccgf =append (_ccgf ,_cff );
};};if len (_ccgf )==0{return nil ;};_a .Ints (_ccgf );return _ccgf ;};func (_dccf *ruling )equals (_ddcad *ruling )bool {return _dccf ._caefd ==_ddcad ._caefd &&_abfgb (_dccf ._fdbaa ,_ddcad ._fdbaa )&&_abfgb (_dccf ._ddgcef ,_ddcad ._ddgcef )&&_abfgb (_dccf ._afcga ,_ddcad ._afcga );
};func _eeab (_gedc ,_fbdg _ge .Point ,_fbaag _cc .Color )(*ruling ,bool ){_dcgba :=lineRuling {_dabae :_gedc ,_cebaf :_fbdg ,_dbafgb :_gcbae (_gedc ,_fbdg ),Color :_fbaag };if _dcgba ._dbafgb ==_ebecb {return nil ,false ;};return _dcgba .asRuling ();};
func (_cfec *textPara )taken ()bool {return _cfec ==nil ||_cfec ._ggag };type gridTile struct{_dc .PdfRectangle ;_abcae ,_eaead ,_adffd ,_gggfa bool ;};func (_fbbd rulingList )blocks (_fffa ,_dcgdf *ruling )bool {if _fffa ._ddgcef > _dcgdf ._afcga ||_dcgdf ._ddgcef > _fffa ._afcga {return false ;
};_bbgfd :=_bff .Max (_fffa ._ddgcef ,_dcgdf ._ddgcef );_bfdb :=_bff .Min (_fffa ._afcga ,_dcgdf ._afcga );if _fffa ._fdbaa > _dcgdf ._fdbaa {_fffa ,_dcgdf =_dcgdf ,_fffa ;};for _ ,_gbab :=range _fbbd {if _fffa ._fdbaa <=_gbab ._fdbaa +_ebce &&_gbab ._fdbaa <=_dcgdf ._fdbaa +_ebce &&_gbab ._ddgcef <=_bfdb &&_bbgfd <=_gbab ._afcga {return true ;
};};return false ;};

// TextMarkArray is a collection of TextMarks.
type TextMarkArray struct{_dadfg []TextMark };func (_bggc *wordBag )text ()string {_cabe :=_bggc .allWords ();_cgae :=make ([]string ,len (_cabe ));for _gafa ,_dgcbb :=range _cabe {_cgae [_gafa ]=_dgcbb ._eagba ;};return _ba .Join (_cgae ,"\u0020");};func (_ccdb rulingList )sort (){_a .Slice (_ccdb ,_ccdb .comp )};
func (_gee *PageText )getText ()string {_cdb :="";_bffee :=len (_gee ._aaaa );for _ceab :=0;_ceab < 360&&_bffee > 0;_ceab +=90{_bgfc :=make ([]*textMark ,0,len (_gee ._aaaa )-_bffee );for _ ,_gadd :=range _gee ._aaaa {if _gadd ._efdgf ==_ceab {_bgfc =append (_bgfc ,_gadd );
};};if len (_bgfc )> 0{_cdb +=_ecce (_bgfc ,_gee ._becab );_bffee -=len (_bgfc );};};return _cdb ;};func _gbdbf (_dbdf []_e .PdfObject )(_ebfa ,_bgbaa float64 ,_cabcg error ){if len (_dbdf )!=2{return 0,0,_ga .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020o\u0066 \u0070\u0061\u0072\u0061\u006d\u0073\u003a \u0025\u0064",len (_dbdf ));
};_dgced ,_cabcg :=_e .GetNumbersAsFloat (_dbdf );if _cabcg !=nil {return 0,0,_cabcg ;};return _dgced [0],_dgced [1],nil ;};type subpath struct{_eaea []_ge .Point ;_dcfc bool ;};func (_fdga *wordBag )sort (){for _ ,_adgf :=range _fdga ._bdde {_a .Slice (_adgf ,func (_gebg ,_bfbc int )bool {return _ccefe (_adgf [_gebg ],_adgf [_bfbc ])< 0});
};};func _dfeaa (_dcacd ,_bfdc _ge .Point )bool {_eecf :=_bff .Abs (_dcacd .X -_bfdc .X );_eaeb :=_bff .Abs (_dcacd .Y -_bfdc .Y );return _adeg (_eecf ,_eaeb );};func (_fgcg *textTable )markCells (){for _gdafb :=0;_gdafb < _fgcg ._gfdgb ;_gdafb ++{for _bcafa :=0;
_bcafa < _fgcg ._dgbf ;_bcafa ++{_fcfeg :=_fgcg .get (_bcafa ,_gdafb );if _fcfeg !=nil {_fcfeg ._ggag =true ;};};};};func (_ecfgd paraList )applyTables (_fefeb []*textTable )paraList {var _abcfe paraList ;for _ ,_bbaeb :=range _fefeb {_abcfe =append (_abcfe ,_bbaeb .newTablePara ());
};for _ ,_bbddf :=range _ecfgd {if _bbddf ._ggag {continue ;};_abcfe =append (_abcfe ,_bbddf );};return _abcfe ;};

// String returns a string descibing `i`.
func (_fgcba gridTile )String ()string {_edbge :=func (_caba bool ,_cccac string )string {if _caba {return _cccac ;};return "\u005f";};return _ga .Sprintf ("\u00256\u002e2\u0066\u0020\u0025\u0031\u0073%\u0031\u0073%\u0031\u0073\u0025\u0031\u0073",_fgcba .PdfRectangle ,_edbge (_fgcba ._eaead ,"\u004c"),_edbge (_fgcba ._gggfa ,"\u0052"),_edbge (_fgcba ._adffd ,"\u0042"),_edbge (_fgcba ._abcae ,"\u0054"));
};func (_gdge *textTable )compositeRowCorridors ()map[int ][]float64 {_dggf :=make (map[int ][]float64 ,_gdge ._gfdgb );if _feed {_fb .Log .Info ("c\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0052\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073:\u0020h\u003d\u0025\u0064",_gdge ._gfdgb );
};for _decbe :=1;_decbe < _gdge ._gfdgb ;_decbe ++{var _fbfcf []compositeCell ;for _eaef :=0;_eaef < _gdge ._dgbf ;_eaef ++{if _fgad ,_ccagea :=_gdge ._dffge [_egfde (_eaef ,_decbe )];_ccagea {_fbfcf =append (_fbfcf ,_fgad );};};if len (_fbfcf )==0{continue ;
};_fcbee :=_abbfg (_fbfcf );_dggf [_decbe ]=_fcbee ;if _feed {_ga .Printf ("\u0020\u0020\u0020\u0025\u0032\u0064\u003a\u0020\u00256\u002e\u0032\u0066\u000a",_decbe ,_fcbee );};};return _dggf ;};func _affa (_acaa map[int ][]float64 )string {_aefd :=_decb (_acaa );
_bcbbe :=make ([]string ,len (_acaa ));for _daefa ,_gcfcb :=range _aefd {_bcbbe [_daefa ]=_ga .Sprintf ("\u0025\u0064\u003a\u0020\u0025\u002e\u0032\u0066",_gcfcb ,_acaa [_gcfcb ]);};return _ga .Sprintf ("\u007b\u0025\u0073\u007d",_ba .Join (_bcbbe ,"\u002c\u0020"));
};func _ggea (_ccab *textLine )float64 {return _ccab ._cfad [0].Llx };func _aebb (_deeaf ,_caefc int )int {if _deeaf < _caefc {return _deeaf ;};return _caefc ;};func (_dddd *ruling )gridIntersecting (_dbcf *ruling )bool {return _abfgb (_dddd ._ddgcef ,_dbcf ._ddgcef )&&_abfgb (_dddd ._afcga ,_dbcf ._afcga );
};func _fdgb (_babc _dc .PdfRectangle )*ruling {return &ruling {_caefd :_aedgg ,_fdbaa :_babc .Llx ,_ddgcef :_babc .Lly ,_afcga :_babc .Ury };};func _decb (_edfbd map[int ][]float64 )[]int {_gdffa :=make ([]int ,len (_edfbd ));_beae :=0;for _fbgc :=range _edfbd {_gdffa [_beae ]=_fbgc ;
_beae ++;};_a .Ints (_gdffa );return _gdffa ;};

// Text gets the extracted text contained in `l`.
func (_cabef *list )Text ()string {_aead :=&_ba .Builder {};_abeae :="";_fdecf (_cabef ,_aead ,&_abeae );return _aead .String ();};func _afda (_gfaf map[int ][]float64 ){if len (_gfaf )<=1{return ;};_fcgea :=_decb (_gfaf );if _feed {_fb .Log .Info ("\u0066i\u0078C\u0065\u006c\u006c\u0073\u003a \u006b\u0065y\u0073\u003d\u0025\u002b\u0076",_fcgea );
};var _efdc ,_agcg int ;for _efdc ,_agcg =range _fcgea {if _gfaf [_agcg ]!=nil {break ;};};for _bdgd ,_dbbec :=range _fcgea [_efdc :]{_ffdfc :=_gfaf [_dbbec ];if _ffdfc ==nil {continue ;};if _feed {_ga .Printf ("\u0025\u0034\u0064\u003a\u0020\u006b\u0030\u003d\u0025\u0064\u0020\u006b1\u003d\u0025\u0064\u000a",_efdc +_bdgd ,_agcg ,_dbbec );
};_aaaeg :=_gfaf [_dbbec ];if _aaaeg [len (_aaaeg )-1]> _ffdfc [0]{_aaaeg [len (_aaaeg )-1]=_ffdfc [0];_gfaf [_agcg ]=_aaaeg ;};_agcg =_dbbec ;};};func _acfd (_abeab _dc .PdfRectangle )rulingKind {_cacee :=_abeab .Width ();_gcbd :=_abeab .Height ();if _cacee > _gcbd {if _cacee >=_dgca {return _dagd ;
};}else {if _gcbd >=_dgca {return _aedgg ;};};return _ebecb ;};func (_ffea *textTable )growTable (){_ffbe :=func (_bgcga paraList ){_ffea ._gfdgb ++;for _bbcaa :=0;_bbcaa < _ffea ._dgbf ;_bbcaa ++{_gaeaa :=_bgcga [_bbcaa ];_ffea .put (_bbcaa ,_ffea ._gfdgb -1,_gaeaa );
};};_gbdef :=func (_addb paraList ){_ffea ._dgbf ++;for _eagda :=0;_eagda < _ffea ._gfdgb ;_eagda ++{_cdaee :=_addb [_eagda ];_ffea .put (_ffea ._dgbf -1,_eagda ,_cdaee );};};if _dffd {_ffea .log ("\u0067r\u006f\u0077\u0054\u0061\u0062\u006ce");};for _gecgb :=0;
;_gecgb ++{_fceg :=false ;_bfdf :=_ffea .getDown ();_efdbf :=_ffea .getRight ();if _dffd {_ga .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gecgb ,_ffea );_ga .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0020\u0064\u006f\u0077\u006e\u003d\u0025\u0073\u000a",_bfdf );
_ga .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0072\u0069\u0067\u0068\u0074\u003d\u0025\u0073\u000a",_efdbf );};if _bfdf !=nil &&_efdbf !=nil {_bbbdb :=_bfdf [len (_bfdf )-1];if !_bbbdb .taken ()&&_bbbdb ==_efdbf [len (_efdbf )-1]{_ffbe (_bfdf );if _efdbf =_ffea .getRight ();
_efdbf !=nil {_gbdef (_efdbf );_ffea .put (_ffea ._dgbf -1,_ffea ._gfdgb -1,_bbbdb );};_fceg =true ;};};if !_fceg &&_bfdf !=nil {_ffbe (_bfdf );_fceg =true ;};if !_fceg &&_efdbf !=nil {_gbdef (_efdbf );_fceg =true ;};if !_fceg {break ;};};};func (_gbgd paraList )list ()[]*list {var _afbec []*textLine ;
var _eddf []*textLine ;for _ ,_geaac :=range _gbgd {_geed :=_geaac .getListLines ();_afbec =append (_afbec ,_geed ...);_eddf =append (_eddf ,_geaac ._bdea ...);};_dggdc :=_gfgg (_afbec );_bcgab :=_dgfde (_eddf ,_dggdc );return _bcgab ;};func (_eeed *textObject )getFillColor ()_cc .Color {return _fafag (_eeed ._gefga .ColorspaceNonStroking ,_eeed ._gefga .ColorNonStroking );
};func (_dfd *imageExtractContext )extractFormImages (_cdcb *_e .PdfObjectName ,_aaf _ad .GraphicsState ,_geb *_dc .PdfPageResources )error {_cgg ,_aae :=_geb .GetXObjectFormByName (*_cdcb );if _aae !=nil {return _aae ;};if _cgg ==nil {return nil ;};_gff ,_aae :=_cgg .GetContentStream ();
if _aae !=nil {return _aae ;};_bffc :=_cgg .Resources ;if _bffc ==nil {_bffc =_geb ;};_aae =_dfd .extractContentStreamImages (string (_gff ),_bffc );if _aae !=nil {return _aae ;};_dfd ._dcc ++;return nil ;};func (_ccgc rulingList )tidied (_aefg string )rulingList {_ffbad :=_ccgc .removeDuplicates ();
_ffbad .log ("\u0075n\u0069\u0071\u0075\u0065\u0073");_gdde :=_ffbad .snapToGroups ();if _gdde ==nil {return nil ;};_gdde .sort ();if _efgc {_fb .Log .Info ("\u0074\u0069\u0064i\u0065\u0064\u003a\u0020\u0025\u0071\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u0075\u006e\u0069\u0071\u0075\u0065\u0073\u003d\u0025\u0064\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0064\u003d\u0025\u0064",_aefg ,len (_ccgc ),len (_ffbad ),len (_gdde ));
};_gdde .log ("\u0063o\u0061\u006c\u0065\u0073\u0063\u0065d");return _gdde ;};func _beeg (_adee []float64 ,_ceda ,_acad float64 )[]float64 {_fgdbfe ,_gbcbe :=_ceda ,_acad ;if _gbcbe < _fgdbfe {_fgdbfe ,_gbcbe =_gbcbe ,_fgdbfe ;};_aacbe :=make ([]float64 ,0,len (_adee )+2);
_aacbe =append (_aacbe ,_ceda );for _ ,_gbceb :=range _adee {if _gbceb <=_fgdbfe {continue ;}else if _gbceb >=_gbcbe {break ;};_aacbe =append (_aacbe ,_gbceb );};_aacbe =append (_aacbe ,_acad );return _aacbe ;};

// Replace takes a pattern and replaces all the texts that much the pattern with `replacement`.
func (_fadb *Editor )Replace (pattern string ,replacement string ,pages []int )error {_bba :=map[int ]Match {};for _ ,_bbb :=range pages {_agbd ,_gfa :=_fadb ._dfe .GetPage (_bbb );if _gfa !=nil {return _gfa ;};_bcgd ,_gfa :=New (_agbd );if _gfa !=nil {return _gfa ;
};_afe ,_ ,_ ,_gfa :=_bcgd .ExtractPageText ();if _gfa !=nil {return _gfa ;};_ggg :="";_aeb :=_afe .Text ();_gcfg ,_gfa :=_fcc (pattern ,_aeb );if _gfa !=nil {return _gfa ;};_egc :=_afe .Marks ();_gcad :=[]Box {};for _ ,_cfg :=range _gcfg {_dffb ,_gedd ,_dcf :=_fdee (_cfg ,_egc ,pattern );
if _dcf !=nil {return _dcf ;};_bbf :=_eda (_dffb );_gcad =append (_gcad ,_gedd );replacement ,_dcf =_abcf (_bbf ,replacement ,pattern );if _dcf !=nil {return _dcf ;};};_ggg =_afe .GetContentStreamOps ().String ();_bagb :=Match {Pattern :pattern ,Indexes :_gcfg ,Locations :_gcad };
_agbd .SetContentStreams ([]string {_ggg },_e .NewFlateEncoder ());_bba [_bbb ]=_bagb ;};return nil ;};func (_ffded paraList )yNeighbours (_afgc float64 )map[*textPara ][]int {_geaae :=make ([]event ,2*len (_ffded ));if _afgc ==0{for _gafb ,_gace :=range _ffded {_geaae [2*_gafb ]=event {_gace .Lly ,true ,_gafb };
_geaae [2*_gafb +1]=event {_gace .Ury ,false ,_gafb };};}else {for _cbdfe ,_ffacc :=range _ffded {_geaae [2*_cbdfe ]=event {_ffacc .Lly -_afgc *_ffacc .fontsize (),true ,_cbdfe };_geaae [2*_cbdfe +1]=event {_ffacc .Ury +_afgc *_ffacc .fontsize (),false ,_cbdfe };
};};return _ffded .eventNeighbours (_geaae );};

// NewWithOptions an Extractor instance for extracting content from the input PDF page with options.
func NewWithOptions (page *_dc .PdfPage ,options *Options )(*Extractor ,error ){const _ace ="\u0065x\u0074\u0072\u0061\u0063\u0074\u006f\u0072\u002e\u004e\u0065\u0077W\u0069\u0074\u0068\u004f\u0070\u0074\u0069\u006f\u006e\u0073";_dff ,_bca :=page .GetAllContentStreams ();
if _bca !=nil {return nil ,_bca ;};var _dadf *_dc .StructTreeRoot ;_ff ,_gb :=page .GetStructTreeRoot ();if !_gb {_fb .Log .Debug ("T\u0068\u0065\u0020\u0070\u0064\u0066\u0020\u0064\u006f\u0063\u0075\u006d\u0065\u006e\u0074\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0074\u0061\u0067g\u0065d\u002e\u0020\u0053\u0074r\u0075\u0063t\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e\u0027\u0074\u0020\u0065\u0078\u0069\u0073\u0074\u002e");
}else {_dadf ,_bca =_dc .NewStructTreeRootFromPdfObject (*_ff );if _bca !=nil {return nil ,_ga .Errorf ("\u0065\u0072\u0072or\u0020\u006c\u006f\u0061\u0064\u0069\u006e\u0067\u0020s\u0074r\u0075c\u0074 \u0074\u0072\u0065\u0065\u0020\u0072\u006f\u006f\u0074\u003a\u0020\u0025\u0076",_bca );
};};_fae :=page .GetContainingPdfObject ();_acb ,_bca :=page .GetMediaBox ();if _bca !=nil {return nil ,_ga .Errorf ("\u0065\u0078\u0074r\u0061\u0063\u0074\u006fr\u0020\u0072\u0065\u0071\u0075\u0069\u0072e\u0073\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u002e\u0020\u0025\u0076",_bca );
};_fec :=&Extractor {_fdf :_dff ,_cfb :page .Resources ,_bac :*_acb ,_dga :page .CropBox ,_cgdc :page .GetStructParentsKey (),_aff :map[string ]fontEntry {},_baa :map[string ]textResult {},_bgd :map[string ]textResult {},_dfg :options ,_bcge :_dadf ,_cdg :_fae };
if _fec ._bac .Llx > _fec ._bac .Urx {_fb .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0058\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_fec ._bac );
_fec ._bac .Llx ,_fec ._bac .Urx =_fec ._bac .Urx ,_fec ._bac .Llx ;};if _fec ._bac .Lly > _fec ._bac .Ury {_fb .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0059\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_fec ._bac );
_fec ._bac .Lly ,_fec ._bac .Ury =_fec ._bac .Ury ,_fec ._bac .Lly ;};if _fec ._dfg !=nil {if _fec ._dfg .IncludeAnnotations {_fec ._dadd ,_bca =page .GetAnnotations ();if _bca !=nil {_fb .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0067\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0061\u006e\u006e\u006f\u0074\u0061\u0074\u0069\u006f\u006e\u0073: \u0025\u0076",_bca );
};};};_cb .TrackUse (_ace );return _fec ,nil ;};func _bbeg (_fgda *_e .PdfObjectString ,_gbd string ,_aaae *_dc .PdfFont ){_fgg ,_acc :=_aaae .StringToCharcodeBytes (_gbd );if _acc !=0{_fb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0073\u006fm\u0065\u0020\u0072un\u0065\u0073\u0020\u0063\u006f\u0075l\u0064\u0020\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u0065\u006e\u0063\u006f\u0064\u0065d\u002e\u000a\u0009\u0025\u0073\u0020\u002d\u003e \u0025\u0076",_gbd ,_fgg );
};_fdea :=_e .MakeStringFromBytes (_fgg );*_fgda =*_fdea ;};

// TableCell is a cell in a TextTable.
type TableCell struct{_dc .PdfRectangle ;

// Text is the extracted text.
Text string ;

// Marks returns the TextMarks corresponding to the text in Text.
Marks TextMarkArray ;};func (_egdf rulingList )augmentGrid ()(rulingList ,rulingList ){_bfbeg ,_abga :=_egdf .vertsHorzs ();if len (_bfbeg )==0||len (_abga )==0{return _bfbeg ,_abga ;};_dgbd ,_cfebc :=_bfbeg ,_abga ;_dbgc :=_bfbeg .bbox ();_feeb :=_abga .bbox ();
if _efgc {_fb .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0056\u003d\u0025\u0036\u002e\u0032\u0066",_dbgc );_fb .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0048\u003d\u0025\u0036\u002e\u0032\u0066",_feeb );
};var _dggc ,_bdca ,_cddb ,_gcadb *ruling ;if _feeb .Llx < _dbgc .Llx -_cggac {_dggc =&ruling {_ebee :_cddc ,_caefd :_aedgg ,_fdbaa :_feeb .Llx ,_ddgcef :_dbgc .Lly ,_afcga :_dbgc .Ury };_bfbeg =append (rulingList {_dggc },_bfbeg ...);};if _feeb .Urx > _dbgc .Urx +_cggac {_bdca =&ruling {_ebee :_cddc ,_caefd :_aedgg ,_fdbaa :_feeb .Urx ,_ddgcef :_dbgc .Lly ,_afcga :_dbgc .Ury };
_bfbeg =append (_bfbeg ,_bdca );};if _dbgc .Lly < _feeb .Lly -_cggac {_cddb =&ruling {_ebee :_cddc ,_caefd :_dagd ,_fdbaa :_dbgc .Lly ,_ddgcef :_feeb .Llx ,_afcga :_feeb .Urx };_abga =append (rulingList {_cddb },_abga ...);};if _dbgc .Ury > _feeb .Ury +_cggac {_gcadb =&ruling {_ebee :_cddc ,_caefd :_dagd ,_fdbaa :_dbgc .Ury ,_ddgcef :_feeb .Llx ,_afcga :_feeb .Urx };
_abga =append (_abga ,_gcadb );};if len (_bfbeg )+len (_abga )==len (_egdf ){return _dgbd ,_cfebc ;};_befbe :=append (_bfbeg ,_abga ...);_egdf .log ("u\u006e\u0061\u0075\u0067\u006d\u0065\u006e\u0074\u0065\u0064");_befbe .log ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0065d");
return _bfbeg ,_abga ;};func (_ecbf *textTable )reduce ()*textTable {_ggcdb :=make ([]int ,0,_ecbf ._gfdgb );_cbcdg :=make ([]int ,0,_ecbf ._dgbf );for _abdfc :=0;_abdfc < _ecbf ._gfdgb ;_abdfc ++{if !_ecbf .emptyCompositeRow (_abdfc ){_ggcdb =append (_ggcdb ,_abdfc );
};};for _ccea :=0;_ccea < _ecbf ._dgbf ;_ccea ++{if !_ecbf .emptyCompositeColumn (_ccea ){_cbcdg =append (_cbcdg ,_ccea );};};if len (_ggcdb )==_ecbf ._gfdgb &&len (_cbcdg )==_ecbf ._dgbf {return _ecbf ;};_cccacf :=textTable {_dabaf :_ecbf ._dabaf ,_dgbf :len (_cbcdg ),_gfdgb :len (_ggcdb ),_ddbd :make (map[uint64 ]*textPara ,len (_cbcdg )*len (_ggcdb ))};
if _feed {_fb .Log .Info ("\u0072\u0065\u0064\u0075ce\u003a\u0020\u0025\u0064\u0078\u0025\u0064\u0020\u002d\u003e\u0020\u0025\u0064\u0078%\u0064",_ecbf ._dgbf ,_ecbf ._gfdgb ,len (_cbcdg ),len (_ggcdb ));_fb .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_cbcdg );
_fb .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_ggcdb );};for _dbgbc ,_bgfd :=range _ggcdb {for _gddg ,_eeaa :=range _cbcdg {_eagge ,_gdddg :=_ecbf .getComposite (_eeaa ,_bgfd );if _eagge ==nil {continue ;
};if _feed {_ga .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_gddg ,_dbgbc ,_eeaa ,_bgfd ,_adbcg (_eagge .merge ().text (),50));};_cccacf .putComposite (_gddg ,_dbgbc ,_eagge ,_gdddg );
};};return &_cccacf ;};func (_cefc paraList )findTables (_bebc []gridTiling )[]*textTable {_cefc .addNeighbours ();_a .Slice (_cefc ,func (_cgeef ,_gecge int )bool {return _gbacc (_cefc [_cgeef ],_cefc [_gecge ])< 0});var _gcadc []*textTable ;if _fafg {_affff :=_cefc .findGridTables (_bebc );
_gcadc =append (_gcadc ,_affff ...);};if _dccg {_eecc :=_cefc .findTextTables ();_gcadc =append (_gcadc ,_eecc ...);};return _gcadc ;};func _db (_af string ,_ce bool ,_be bool )BidiText {_gac :="\u006c\u0074\u0072";if _be {_gac ="\u0074\u0074\u0062";}else if !_ce {_gac ="\u0072\u0074\u006c";
};return BidiText {_ef :_af ,_adg :_gac };};func _geef (_ecefa []*textMark ,_aabe _dc .PdfRectangle ,_ffff bool )[]*textWord {var _cbgda []*textWord ;var _beccd *textWord ;if _dccc {_fb .Log .Info ("\u006d\u0061\u006beT\u0065\u0078\u0074\u0057\u006f\u0072\u0064\u0073\u003a\u0020\u0025\u0064\u0020\u006d\u0061\u0072\u006b\u0073",len (_ecefa ));
};_cgebb :=func (){if _beccd !=nil {_gbbgb :=_beccd .computeText ();if !_fecf (_gbbgb ){_beccd ._eagba =_gbbgb ;_cbgda =append (_cbgda ,_beccd );if _dccc {_fb .Log .Info ("\u0061\u0064\u0064Ne\u0077\u0057\u006f\u0072\u0064\u003a\u0020\u0025\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",len (_cbgda )-1,_beccd .String ());
for _bedc ,_dffgec :=range _beccd ._fbgfg {_ga .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bedc ,_dffgec .String ());};};};_beccd =nil ;};};for _ ,_dbegg :=range _ecefa {if _daaf &&_beccd !=nil &&len (_beccd ._fbgfg )> 0{_acadc :=_beccd ._fbgfg [len (_beccd ._fbgfg )-1];
_gebgf ,_gbbcb :=_edfe (_dbegg ._fceec );_dcee ,_deacd :=_edfe (_acadc ._fceec );if _gbbcb &&!_deacd &&_acadc .inDiacriticArea (_dbegg ){_beccd .addDiacritic (_gebgf );continue ;};if _deacd &&!_gbbcb &&_dbegg .inDiacriticArea (_acadc ){_beccd ._fbgfg =_beccd ._fbgfg [:len (_beccd ._fbgfg )-1];
_beccd .appendMark (_dbegg ,_aabe );_beccd .addDiacritic (_dcee );continue ;};};_edgbg :=_fecf (_dbegg ._fceec );if _edgbg {_cgebb ();continue ;};if _beccd ==nil &&!_edgbg {_beccd =_gfga ([]*textMark {_dbegg },_aabe );continue ;};_fega :=_beccd ._ffagg ;
_cfaba :=_bff .Abs (_bffcc (_aabe ,_dbegg )-_beccd ._dcced )/_fega ;_aggdd :=_dcbbc (_dbegg ,_beccd )/_fega ;_bfaa :=_beccd .Width ()+_dbegg .Width ();if _ffff &&_dbegg ._cgbf .Angle ()!=0.0{_egace :=_bff .Abs (_bfaa *_bff .Tan (_dbegg ._cgbf .Angle ())/_fega );
if _cfaba > _egace {_cfaba -=_egace ;}else {_cfaba =0.0;};};if _aggdd >=_bbee ||!(-_eaege <=_aggdd &&_cfaba <=_cgcd ){_cgebb ();_beccd =_gfga ([]*textMark {_dbegg },_aabe );continue ;};_beccd .appendMark (_dbegg ,_aabe );};_cgebb ();return _cbgda ;};func (_bbbag *shapesState )fill (_bccg *[]pathSection ){_gcgf :=pathSection {_eafba :_bbbag ._facg ,Color :_bbbag ._gcba .getFillColor ()};
*_bccg =append (*_bccg ,_gcgf );if _efgc {_eddc :=_gcgf .bbox ();_ga .Printf ("\u0020 \u0020\u0020\u0046\u0049\u004c\u004c\u003a %\u0032\u0064\u0020\u0066\u0069\u006c\u006c\u0073\u0020\u0028\u0025\u0064\u0020\u006ee\u0077\u0029 \u0073\u0073\u003d%\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d\u0025\u0033\u0076\u0020\u0025\u0036\u002e\u0032f\u003d\u00256.\u0032\u0066\u0078%\u0036\u002e\u0032\u0066\u000a",len (*_bccg ),len (_gcgf ._eafba ),_bbbag ,_gcgf .Color ,_eddc ,_eddc .Width (),_eddc .Height ());
if _fdfe {for _fcgaf ,_baedb :=range _gcgf ._eafba {_ga .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_fcgaf ,_baedb );if _fcgaf ==10{break ;};};};};};const (_bdfb =true ;_daaf =true ;_ecae =false ;_fafg =true ;_dccg =true ;_efda =true ;_baab =true ;
_cfdf =false ;);func (_gdbc *stateStack )top ()*textState {if _gdbc .empty (){return nil ;};return (*_gdbc )[_gdbc .size ()-1];};var (_feffcb =map[rune ]string {0x0060:"\u0300",0x02CB:"\u0300",0x0027:"\u0301",0x00B4:"\u0301",0x02B9:"\u0301",0x02CA:"\u0301",0x005E:"\u0302",0x02C6:"\u0302",0x007E:"\u0303",0x02DC:"\u0303",0x00AF:"\u0304",0x02C9:"\u0304",0x02D8:"\u0306",0x02D9:"\u0307",0x00A8:"\u0308",0x00B0:"\u030a",0x02DA:"\u030a",0x02BA:"\u030b",0x02DD:"\u030b",0x02C7:"\u030c",0x02C8:"\u030d",0x0022:"\u030e",0x02BB:"\u0312",0x02BC:"\u0313",0x0486:"\u0313",0x055A:"\u0313",0x02BD:"\u0314",0x0485:"\u0314",0x0559:"\u0314",0x02D4:"\u031d",0x02D5:"\u031e",0x02D6:"\u031f",0x02D7:"\u0320",0x02B2:"\u0321",0x00B8:"\u0327",0x02CC:"\u0329",0x02B7:"\u032b",0x02CD:"\u0331",0x005F:"\u0332",0x204E:"\u0359"};
);type fontEntry struct{_efgb *_dc .PdfFont ;_fdec int64 ;};type event struct{_cddae float64 ;_afca bool ;_ecda int ;};

// Append appends `mark` to the mark array.
func (_bcga *TextMarkArray )Append (mark TextMark ){_bcga ._dadfg =append (_bcga ._dadfg ,mark )};func _ccag (_cdcf []TextMark ,_ecac *int ,_caec TextMark )[]TextMark {_caec .Offset =*_ecac ;_cdcf =append (_cdcf ,_caec );*_ecac +=len (_caec .Text );return _cdcf ;
};func (_aebc rulingList )findPrimSec (_dddf ,_eaff float64 )*ruling {for _ ,_dece :=range _aebc {if _ggdae (_dece ._fdbaa -_dddf )&&_dece ._ddgcef -_cggac <=_eaff &&_eaff <=_dece ._afcga +_cggac {return _dece ;};};return nil ;};func (_adfcg *textTable )subdivide ()*textTable {_adfcg .logComposite ("\u0073u\u0062\u0064\u0069\u0076\u0069\u0064e");
_dfbge :=_adfcg .compositeRowCorridors ();_fddb :=_adfcg .compositeColCorridors ();if _feed {_fb .Log .Info ("\u0073u\u0062\u0064i\u0076\u0069\u0064\u0065:\u000a\u0009\u0072o\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s=\u0025\u0073\u000a\t\u0063\u006fl\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073=\u0025\u0073",_affa (_dfbge ),_affa (_fddb ));
};if len (_dfbge )==0||len (_fddb )==0{return _adfcg ;};_afda (_dfbge );_afda (_fddb );if _feed {_fb .Log .Info ("\u0073\u0075\u0062\u0064\u0069\u0076\u0069\u0064\u0065\u0020\u0066\u0069\u0078\u0065\u0064\u003a\u000a\u0009r\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073\u003d\u0025\u0073\u000a\u0009\u0063\u006f\u006cC\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d\u0025\u0073",_affa (_dfbge ),_affa (_fddb ));
};_gadg ,_feba :=_cged (_adfcg ._gfdgb ,_dfbge );_cdcbe ,_cdbfe :=_cged (_adfcg ._dgbf ,_fddb );_dabag :=make (map[uint64 ]*textPara ,_cdbfe *_feba );_cgabe :=&textTable {PdfRectangle :_adfcg .PdfRectangle ,_dabaf :_adfcg ._dabaf ,_gfdgb :_feba ,_dgbf :_cdbfe ,_ddbd :_dabag };
if _feed {_fb .Log .Info ("\u0073\u0075b\u0064\u0069\u0076\u0069\u0064\u0065\u003a\u0020\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0063\u0065\u006c\u006c\u0073\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0079\u004f\u0066\u0066\u0073\u0065\u0074\u0073=\u0025\u002b\u0076\u000a"+"\u0009\u0078\u004f\u0066\u0066\u0073\u0065\u0074\u0073\u003d\u0025\u002b\u0076",_adfcg ._dgbf ,_adfcg ._gfdgb ,_cdbfe ,_feba ,_affa (_dfbge ),_affa (_fddb ),_gadg ,_cdcbe );
};for _aaadfg :=0;_aaadfg < _adfcg ._gfdgb ;_aaadfg ++{_ecfa :=_gadg [_aaadfg ];for _gegf :=0;_gegf < _adfcg ._dgbf ;_gegf ++{_adfb :=_cdcbe [_gegf ];if _feed {_ga .Printf ("\u0025\u0036\u0064\u002c %\u0032\u0064\u003a\u0020\u0078\u0030\u003d\u0025\u0064\u0020\u0079\u0030\u003d\u0025d\u000a",_gegf ,_aaadfg ,_adfb ,_ecfa );
};_eaec ,_ffbgf :=_adfcg ._dffge [_egfde (_gegf ,_aaadfg )];if !_ffbgf {continue ;};_bgcb :=_eaec .split (_dfbge [_aaadfg ],_fddb [_gegf ]);for _dfaef :=0;_dfaef < _bgcb ._gfdgb ;_dfaef ++{for _gddba :=0;_gddba < _bgcb ._dgbf ;_gddba ++{_bgac :=_bgcb .get (_gddba ,_dfaef );
_cgabe .put (_adfb +_gddba ,_ecfa +_dfaef ,_bgac );if _feed {_ga .Printf ("\u0025\u0038\u0064\u002c\u0020\u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_adfb +_gddba ,_ecfa +_dfaef ,_bgac );};};};};};return _cgabe ;};func (_ccdbe *textTable )newTablePara ()*textPara {_ddgcde :=_ccdbe .computeBbox ();
_cbff :=&textPara {PdfRectangle :_ddgcde ,_fcfaa :_ddgcde ,_fdfd :_ccdbe };if _feed {_fb .Log .Info ("\u006e\u0065w\u0054\u0061\u0062l\u0065\u0050\u0061\u0072\u0061\u003a\u0020\u0025\u0073",_cbff );};return _cbff ;};func (_fdge *textTable )getComposite (_cddbd ,_ddcdb int )(paraList ,_dc .PdfRectangle ){_ecdf ,_cfgdg :=_fdge ._dffge [_egfde (_cddbd ,_ddcdb )];
if _feed {_ga .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0067\u0065\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u002d\u003e\u0025\u0073\u000a",_cddbd ,_ddcdb ,_ecdf .String ());};if !_cfgdg {return nil ,_dc .PdfRectangle {};
};return _ecdf .parasBBox ();};func _defc (_dcba map[int ]intSet )[]int {_eaaea :=make ([]int ,0,len (_dcba ));for _eeeg :=range _dcba {_eaaea =append (_eaaea ,_eeeg );};_a .Ints (_eaaea );return _eaaea ;};func _dfaaf (_gedge *PageText )error {_fgebf :=_cb .GetLicenseKey ();
if _fgebf !=nil &&_fgebf .IsLicensed ()||_ccb {return nil ;};_ga .Printf ("\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064\u0020c\u006f\u0070\u0079\u0020\u006f\u0066\u0020\u0055\u006e\u0069P\u0044\u0046\u000a");_ga .Println ("-\u0020\u0047\u0065\u0074\u0020\u0061\u0020\u0066\u0072e\u0065\u0020\u0074\u0072\u0069\u0061\u006c l\u0069\u0063\u0065\u006es\u0065\u0020\u006f\u006e\u0020\u0068\u0074\u0074\u0070s:\u002f\u002fu\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f");
return _caa .New ("\u0075\u006e\u0069\u0070d\u0066\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020c\u006fd\u0065\u0020\u0072\u0065\u0071\u0075\u0069r\u0065\u0064");};func (_adgbd paraList )log (_bdeg string ){if !_adeaf {return ;};_fb .Log .Info ("%\u0038\u0073\u003a\u0020\u0025\u0064 \u0070\u0061\u0072\u0061\u0073\u0020=\u003d\u003d\u003d\u003d\u003d\u003d\u002d-\u002d\u002d\u002d\u002d\u002d\u003d\u003d\u003d\u003d\u003d=\u003d",_bdeg ,len (_adgbd ));
for _gdgf ,_acgc :=range _adgbd {if _acgc ==nil {continue ;};_aeef :=_acgc .text ();_fgaf :="\u0020\u0020";if _acgc ._fdfd !=nil {_fgaf =_ga .Sprintf ("\u005b%\u0064\u0078\u0025\u0064\u005d",_acgc ._fdfd ._dgbf ,_acgc ._fdfd ._gfdgb );};_ga .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0025s\u0020\u0025\u0071\u000a",_gdgf ,_acgc .PdfRectangle ,_fgaf ,_adbcg (_aeef ,50));
};};func _ffgf (_afab ,_afeg _dc .PdfRectangle )(_dc .PdfRectangle ,bool ){if !_efdg (_afab ,_afeg ){return _dc .PdfRectangle {},false ;};return _dc .PdfRectangle {Llx :_bff .Max (_afab .Llx ,_afeg .Llx ),Urx :_bff .Min (_afab .Urx ,_afeg .Urx ),Lly :_bff .Max (_afab .Lly ,_afeg .Lly ),Ury :_bff .Min (_afab .Ury ,_afeg .Ury )},true ;
};func (_dfdaa intSet )has (_bcdb int )bool {_ ,_gccab :=_dfdaa [_bcdb ];return _gccab };func _fafag (_gegcag _dc .PdfColorspace ,_faaae _dc .PdfColor )_cc .Color {if _gegcag ==nil ||_faaae ==nil {return _cc .Black ;};_cgaf ,_befe :=_gegcag .ColorToRGB (_faaae );
if _befe !=nil {_fb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006fu\u006c\u0064\u0020no\u0074\u0020\u0063\u006f\u006e\u0076e\u0072\u0074\u0020\u0063\u006f\u006c\u006f\u0072\u0020\u0025\u0076\u0020\u0028\u0025\u0076)\u0020\u0074\u006f\u0020\u0052\u0047\u0042\u003a \u0025\u0073",_faaae ,_gegcag ,_befe );
return _cc .Black ;};_bbfcd ,_fagd :=_cgaf .(*_dc .PdfColorDeviceRGB );if !_fagd {_fb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0065\u0064 \u0063\u006f\u006c\u006f\u0072\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020i\u006e\u0020\u0074\u0068\u0065\u0020\u0052\u0047\u0042\u0020\u0063\u006flo\u0072\u0073\u0070\u0061\u0063\u0065\u003a\u0020\u0025\u0076",_cgaf );
return _cc .Black ;};return _cc .NRGBA {R :uint8 (_bbfcd .R ()*255),G :uint8 (_bbfcd .G ()*255),B :uint8 (_bbfcd .B ()*255),A :uint8 (255)};};func _dfaf (_fecc *wordBag ,_eadd *textWord ,_afbc float64 )bool {return _fecc .Urx <=_eadd .Llx &&_eadd .Llx < _fecc .Urx +_afbc ;
};func _gegd (_bfcg []*textLine )[]*textLine {_cbgfc :=[]*textLine {};for _ ,_affd :=range _bfcg {_dfda :=_affd .text ();_fbgf :=_fbac .Find ([]byte (_dfda ));if _fbgf !=nil {_cbgfc =append (_cbgfc ,_affd );};};return _cbgfc ;};func (_eabe gridTiling )complete ()bool {for _ ,_bfagc :=range _eabe ._gddd {for _ ,_cbgdc :=range _bfagc {if !_cbgdc .complete (){return false ;
};};};return true ;};func _caef (_effge *paraList )map[int ][]*textLine {_bdddg :=map[int ][]*textLine {};for _ ,_dbed :=range *_effge {for _ ,_dgeff :=range _dbed ._bdea {if !_dace (_dgeff ){_fb .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_dbacb :=_dgeff ._cfad [0]._fbgfg [0]._ggbg ;_bdddg [_dbacb ]=append (_bdddg [_dbacb ],_dgeff );};if _dbed ._fdfd !=nil {_febg :=_dbed ._fdfd ._ddbd ;for _ ,_adcg :=range _febg {for _ ,_cabd :=range _adcg ._bdea {if !_dace (_cabd ){_fb .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_fbaa :=_cabd ._cfad [0]._fbgfg [0]._ggbg ;_bdddg [_fbaa ]=append (_bdddg [_fbaa ],_cabd );};};};};return _bdddg ;};func _eefd (_bfe []byte ,_afec *_dc .PdfFont )string {_dfcf :=_afec .BytesToCharcodes (_bfe );_faga ,_gea ,_bbae :=_afec .CharcodesToStrings (_dfcf ,"");
if _bbae > 0{_fb .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_gea ,_bbae );};_gfd :=_ba .Join (_faga ,"");return _gfd ;
};func (_gfcc rulingList )secMinMax ()(float64 ,float64 ){_cfbea ,_edgb :=_gfcc [0]._ddgcef ,_gfcc [0]._afcga ;for _ ,_bddad :=range _gfcc [1:]{if _bddad ._ddgcef < _cfbea {_cfbea =_bddad ._ddgcef ;};if _bddad ._afcga > _edgb {_edgb =_bddad ._afcga ;};
};return _cfbea ,_edgb ;};func (_egfba *textPara )bbox ()_dc .PdfRectangle {return _egfba .PdfRectangle };

// String returns a description of `w`.
func (_afacgc *textWord )String ()string {return _ga .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_afacgc ._dcced ,_afacgc .PdfRectangle ,_afacgc ._ffagg ,_afacgc ._eagba );
};func _bfc (_ccc []string ,_gg int ,_cdc string )int {_de :=_gg ;for ;_de < len (_ccc );_de ++{if _ccc [_de ]!=_cdc {return _de ;};};return _de ;};func (_febe *wordBag )blocked (_gaea *textWord )bool {if _gaea .Urx < _febe .Llx {_dceb :=_caca (_gaea .PdfRectangle );
_ggcc :=_fdgb (_febe .PdfRectangle );if _febe ._ceeaa .blocks (_dceb ,_ggcc ){if _dcdbb {_fb .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0078\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_gaea ,_febe );};return true ;};}else if _febe .Urx < _gaea .Llx {_dcfg :=_caca (_febe .PdfRectangle );
_fagf :=_fdgb (_gaea .PdfRectangle );if _febe ._ceeaa .blocks (_dcfg ,_fagf ){if _dcdbb {_fb .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0078\u2192\u0020:\u0020\u0025\u0073\u0020%s",_gaea ,_febe );};return true ;};};if _gaea .Ury < _febe .Lly {_dbec :=_cgbc (_gaea .PdfRectangle );
_gebc :=_dgfc (_febe .PdfRectangle );if _febe ._accd .blocks (_dbec ,_gebc ){if _dcdbb {_fb .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0079\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_gaea ,_febe );};return true ;};}else if _febe .Ury < _gaea .Lly {_bagd :=_cgbc (_febe .PdfRectangle );
_fbebc :=_dgfc (_gaea .PdfRectangle );if _febe ._accd .blocks (_bagd ,_fbebc ){if _dcdbb {_fb .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0079\u2192\u0020:\u0020\u0025\u0073\u0020%s",_gaea ,_febe );};return true ;};};return false ;};type bounded interface{bbox ()_dc .PdfRectangle };
func _acca (_ddae []rulingList )(rulingList ,rulingList ){var _ddbe rulingList ;for _ ,_agdad :=range _ddae {_ddbe =append (_ddbe ,_agdad ...);};return _ddbe .vertsHorzs ();};func _beff (_aebe []*textLine ,_fdc string )string {var _afcg _ba .Builder ;_bcgc :=0.0;
for _ggbd ,_dfgd :=range _aebe {_cdbf :=_dfgd .text ();_gfed :=_dfgd ._bfbe ;if _ggbd < len (_aebe )-1{_bcgc =_aebe [_ggbd +1]._bfbe ;}else {_bcgc =0.0;};_afcg .WriteString (_fdc );_afcg .WriteString (_cdbf );if _bcgc !=_gfed {_afcg .WriteString ("\u000a");
}else {_afcg .WriteString ("\u0020");};};return _afcg .String ();};func (_fbdga rulingList )snapToGroupsDirection ()rulingList {_fbdga .sortStrict ();_fgdf :=make (map[*ruling ]rulingList ,len (_fbdga ));_bagc :=_fbdga [0];_eedd :=func (_ccbbca *ruling ){_bagc =_ccbbca ;
_fgdf [_bagc ]=rulingList {_ccbbca }};_eedd (_fbdga [0]);for _ ,_dafd :=range _fbdga [1:]{if _dafd ._fdbaa < _bagc ._fdbaa -_badd {_fb .Log .Error ("\u0073\u006e\u0061\u0070T\u006f\u0047\u0072\u006f\u0075\u0070\u0073\u0044\u0069r\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0057\u0072\u006f\u006e\u0067\u0020\u0070\u0072\u0069\u006da\u0072\u0079\u0020\u006f\u0072d\u0065\u0072\u002e\u000a\u0009\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0020\u0076\u003d\u0025\u0073",_bagc ,_dafd );
};if _dafd ._fdbaa > _bagc ._fdbaa +_ebce {_eedd (_dafd );}else {_fgdf [_bagc ]=append (_fgdf [_bagc ],_dafd );};};_becd :=make (map[*ruling ]float64 ,len (_fgdf ));_fedg :=make (map[*ruling ]*ruling ,len (_fbdga ));for _ggegd ,_bafg :=range _fgdf {_becd [_ggegd ]=_bafg .mergePrimary ();
for _ ,_eggff :=range _bafg {_fedg [_eggff ]=_ggegd ;};};for _ ,_eegd :=range _fbdga {_eegd ._fdbaa =_becd [_fedg [_eegd ]];};_eebgd :=make (rulingList ,0,len (_fbdga ));for _ ,_ccbdf :=range _fgdf {_ffgbc :=_ccbdf .splitSec ();for _ceeac ,_cfcgd :=range _ffgbc {_ggcg :=_cfcgd .merge ();
if len (_eebgd )> 0{_dfedg :=_eebgd [len (_eebgd )-1];if _dfedg .alignsPrimary (_ggcg )&&_dfedg .alignsSec (_ggcg ){_fb .Log .Error ("\u0073\u006e\u0061\u0070\u0054\u006fG\u0072\u006f\u0075\u0070\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0044\u0075\u0070\u006ci\u0063\u0061\u0074\u0065\u0020\u0069\u003d\u0025\u0064\u000a\u0009\u0077\u003d\u0025s\u000a\t\u0076\u003d\u0025\u0073",_ceeac ,_dfedg ,_ggcg );
continue ;};};_eebgd =append (_eebgd ,_ggcg );};};_eebgd .sortStrict ();return _eebgd ;};func (_bgef *Editor )getMatches (_fbf string ,_feaf []int )(map[int ]Match ,map[int ][]*TextMarkArray ,error ){_bfb :=map[int ]Match {};_gfb :=map[int ][]*TextMarkArray {};
for _ ,_bee :=range _feaf {_fcb ,_edc :=_bgef ._dfe .GetPage (_bee );if _edc !=nil {return nil ,nil ,_edc ;};_gcc ,_edc :=New (_fcb );if _edc !=nil {return nil ,nil ,_edc ;};_deg ,_ ,_ ,_edc :=_gcc .ExtractPageText ();if _edc !=nil {return nil ,nil ,_edc ;
};_bcfg :=_deg .Text ();_dgcb ,_edc :=_fcc (_fbf ,_bcfg );if _edc !=nil {return nil ,nil ,_edc ;};if len (_dgcb )==0{_fb .Log .Info ("\u004e\u006f\u0020\u006d\u0061\u0074\u0063\u0068\u0020\u0066\u006f\u0075\u006e\u0064\u0020f\u006fr\u0020\u0025\u0073\u0020\u006f\u006e\u0020\u0070\u0061\u0067\u0065\u0020\u0025\u0064",_fbf ,_bee );
};_afb :=_deg .Marks ();_abd :=[]Box {};for _ ,_bgb :=range _dgcb {_ ,_fead ,_dfa :=_fdee (_bgb ,_afb ,_fbf );if _dfa !=nil {return nil ,nil ,_dfa ;};_abd =append (_abd ,_fead );};_ggfd :=Match {Pattern :_fbf ,Indexes :_dgcb ,Locations :_abd };_bfb [_bee ]=_ggfd ;
};return _bfb ,_gfb ,nil ;};type gridTiling struct{_dc .PdfRectangle ;_egfg []float64 ;_facfb []float64 ;_gddd map[float64 ]map[float64 ]gridTile ;};func (_abca *shapesState )clearPath (){_abca ._facg =nil ;_abca ._fcfg =false ;if _aaaef {_fb .Log .Info ("\u0043\u004c\u0045A\u0052\u003a\u0020\u0073\u0073\u003d\u0025\u0073",_abca );
};};

// Options extractor options.
type Options struct{

// DisableDocumentTags specifies whether to use the document tags during list extraction.
DisableDocumentTags bool ;

// ApplyCropBox will extract page text based on page cropbox if set to `true`.
ApplyCropBox bool ;

// Text extraction mode, default is ExtractionModeLayout.
ExtractionMode ExtractionMode ;

// IncludeAnnotations specifies whether to include annotations in the extraction process, default value is `false`.
IncludeAnnotations bool ;

// RelaxedMode specifies whether to use relaxed mode for processing the objects,
// If enabled UniPDF will automatically try to fix invalid parameters length and value.
// Default is `false`.
RelaxedMode bool ;

// DisableDehyphenation specifies whether to disable de-hyphenation of words that are split across lines.
// If `true`, words ending in a hyphen will not be combined with the next line.
// Default is `false` (de-hyphenation enabled).
DisableDehyphenation bool ;};func (_bbdgf *textLine )toTextMarks (_afea *int )[]TextMark {var _acge []TextMark ;for _ ,_gegg :=range _bbdgf ._cfad {if _gegg ._eeggf {_acge =_cace (_acge ,_afea ,"\u0020");};_dabg :=_gegg .toTextMarks (_afea );_acge =append (_acge ,_dabg ...);
};return _acge ;};func _bdc (_fdfbg []*_dc .KValue ,_dgegb map[int ][]*textLine ,_aebf _e .PdfObject )[]*list {_fbfc :=[]*list {};for _ ,_geddb :=range _fdfbg {_affed :=_geddb .GetKDict ();_fcca :=_affed .GetChildren ();_fgcbfb :=[]*textLine {};_ggad :=[]*list {};
_bedg :=_affed .S .(*_e .PdfObjectName ).String ();_cdaef :=_fcca [0];_cfde :=_cdaef .GetMCID ();if len (_fcca )==1&&_cfde !=nil &&*_cfde !=-1{if _affed .Pg ==_aebf {_fgcbfb =_dgegb [*_cfde ];};}else {_ggad =_bdc (_fcca ,_dgegb ,_aebf );};_fcbc :=_dcccd (_fgcbfb ,_bedg ,_ggad );
_fbfc =append (_fbfc ,_fcbc );};return _fbfc ;};

// ToText returns the page text as a single string.
// Deprecated: This function is deprecated and will be removed in a future major version. Please use
// Text() instead.
func (_gcg PageText )ToText ()string {return _gcg .Text ()};func (_cgfdd paraList )addNeighbours (){_ecab :=func (_befbf []int ,_egcdd *textPara )([]*textPara ,[]*textPara ){_feefg :=make ([]*textPara ,0,len (_befbf )-1);_eaebf :=make ([]*textPara ,0,len (_befbf )-1);
for _ ,_aefb :=range _befbf {_aadde :=_cgfdd [_aefb ];if _aadde .Urx <=_egcdd .Llx {_feefg =append (_feefg ,_aadde );}else if _aadde .Llx >=_egcdd .Urx {_eaebf =append (_eaebf ,_aadde );};};return _feefg ,_eaebf ;};_bddeb :=func (_ddcae []int ,_ddaa *textPara )([]*textPara ,[]*textPara ){_fdece :=make ([]*textPara ,0,len (_ddcae )-1);
_affc :=make ([]*textPara ,0,len (_ddcae )-1);for _ ,_dacf :=range _ddcae {_faefd :=_cgfdd [_dacf ];if _faefd .Ury <=_ddaa .Lly {_affc =append (_affc ,_faefd );}else if _faefd .Lly >=_ddaa .Ury {_fdece =append (_fdece ,_faefd );};};return _fdece ,_affc ;
};_ceacd :=_cgfdd .yNeighbours (_aadda );for _ ,_cgade :=range _cgfdd {_dcagc :=_ceacd [_cgade ];if len (_dcagc )==0{continue ;};_dbdc ,_bcae :=_ecab (_dcagc ,_cgade );if len (_dbdc )==0&&len (_bcae )==0{continue ;};if len (_dbdc )> 0{_fffb :=_dbdc [0];
for _ ,_abgee :=range _dbdc [1:]{if _abgee .Urx >=_fffb .Urx {_fffb =_abgee ;};};for _ ,_dgbdf :=range _dbdc {if _dgbdf !=_fffb &&_dgbdf .Urx > _fffb .Llx {_fffb =nil ;break ;};};if _fffb !=nil &&_edec (_cgade .PdfRectangle ,_fffb .PdfRectangle ){_cgade ._cdga =_fffb ;
};};if len (_bcae )> 0{_bdacf :=_bcae [0];for _ ,_cddac :=range _bcae [1:]{if _cddac .Llx <=_bdacf .Llx {_bdacf =_cddac ;};};for _ ,_ecfcbc :=range _bcae {if _ecfcbc !=_bdacf &&_ecfcbc .Llx < _bdacf .Urx {_bdacf =nil ;break ;};};if _bdacf !=nil &&_edec (_cgade .PdfRectangle ,_bdacf .PdfRectangle ){_cgade ._becf =_bdacf ;
};};};_ceacd =_cgfdd .xNeighbours (_bgcg );for _ ,_ccec :=range _cgfdd {_decc :=_ceacd [_ccec ];if len (_decc )==0{continue ;};_geccf ,_egbca :=_bddeb (_decc ,_ccec );if len (_geccf )==0&&len (_egbca )==0{continue ;};if len (_egbca )> 0{_bbfbf :=_egbca [0];
for _ ,_fbffg :=range _egbca [1:]{if _fbffg .Ury >=_bbfbf .Ury {_bbfbf =_fbffg ;};};for _ ,_ebbbbb :=range _egbca {if _ebbbbb !=_bbfbf &&_ebbbbb .Ury > _bbfbf .Lly {_bbfbf =nil ;break ;};};if _bbfbf !=nil &&_ebggb (_ccec .PdfRectangle ,_bbfbf .PdfRectangle ){_ccec ._ddgea =_bbfbf ;
};};if len (_geccf )> 0{_gegca :=_geccf [0];for _ ,_caebf :=range _geccf [1:]{if _caebf .Lly <=_gegca .Lly {_gegca =_caebf ;};};for _ ,_cafed :=range _geccf {if _cafed !=_gegca &&_cafed .Lly < _gegca .Ury {_gegca =nil ;break ;};};if _gegca !=nil &&_ebggb (_ccec .PdfRectangle ,_gegca .PdfRectangle ){_ccec ._ccage =_gegca ;
};};};for _ ,_acded :=range _cgfdd {if _acded ._cdga !=nil &&_acded ._cdga ._becf !=_acded {_acded ._cdga =nil ;};if _acded ._ccage !=nil &&_acded ._ccage ._ddgea !=_acded {_acded ._ccage =nil ;};if _acded ._becf !=nil &&_acded ._becf ._cdga !=_acded {_acded ._becf =nil ;
};if _acded ._ddgea !=nil &&_acded ._ddgea ._ccage !=_acded {_acded ._ddgea =nil ;};};};func (_efdd *textObject )getFontDict (_fcge string )(_badce _e .PdfObject ,_fgcb error ){_fcf :=_efdd ._fadg ;if _fcf ==nil {_fb .Log .Debug ("g\u0065\u0074\u0046\u006f\u006e\u0074D\u0069\u0063\u0074\u002e\u0020\u004eo\u0020\u0072\u0065\u0073\u006f\u0075\u0072c\u0065\u0073\u002e\u0020\u006e\u0061\u006d\u0065\u003d\u0025#\u0071",_fcge );
return nil ,nil ;};_badce ,_adfd :=_fcf .GetFontByName (_e .PdfObjectName (_fcge ));if !_adfd {_fb .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0067\u0065t\u0046\u006f\u006et\u0044\u0069\u0063\u0074\u003a\u0020\u0046\u006f\u006et \u006e\u006f\u0074 \u0066\u006fu\u006e\u0064\u003a\u0020\u006e\u0061m\u0065\u003d%\u0023\u0071",_fcge );
return nil ,_caa .New ("f\u006f\u006e\u0074\u0020no\u0074 \u0069\u006e\u0020\u0072\u0065s\u006f\u0075\u0072\u0063\u0065\u0073");};return _badce ,nil ;};

// String returns a description of `b`.
func (_abffa *wordBag )String ()string {var _bacb []string ;for _ ,_bafa :=range _abffa .depthIndexes (){_ceaf :=_abffa ._bdde [_bafa ];for _ ,_ebegc :=range _ceaf {_bacb =append (_bacb ,_ebegc ._eagba );};};return _ga .Sprintf ("\u0025.\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065=\u0025\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0025\u0071",_abffa .PdfRectangle ,_abffa ._fgcf ,len (_bacb ),_bacb );
};func (_edba rulingList )snapToGroups ()rulingList {_fcgb ,_daac :=_edba .vertsHorzs ();if len (_fcgb )> 0{_fcgb =_fcgb .snapToGroupsDirection ();};if len (_daac )> 0{_daac =_daac .snapToGroupsDirection ();};_ddag :=append (_fcgb ,_daac ...);_ddag .log ("\u0073\u006e\u0061p\u0054\u006f\u0047\u0072\u006f\u0075\u0070\u0073");
return _ddag ;};func (_fdgc compositeCell )String ()string {_bbaad :="";if len (_fdgc .paraList )> 0{_bbaad =_adbcg (_fdgc .paraList .merge ().text (),50);};return _ga .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0070\u0061\u0072a\u0073\u0020\u0025\u0071",_fdgc .PdfRectangle ,len (_fdgc .paraList ),_bbaad );
};func _bcba (_bdef _e .PdfObject ,_fcbda _cc .Color )(_cd .Image ,error ){_eddeg ,_efeff :=_e .GetStream (_bdef );if !_efeff {return nil ,nil ;};_dgfab ,_aadded :=_dc .NewXObjectImageFromStream (_eddeg );if _aadded !=nil {return nil ,_aadded ;};_cgfb ,_aadded :=_dgfab .ToImage ();
if _aadded !=nil {return nil ,_aadded ;};return _gddbe (_cgfb ,_fcbda ),nil ;};

// New returns an Extractor instance for extracting content from the input PDF page.
func New (page *_dc .PdfPage )(*Extractor ,error ){return NewWithOptions (page ,nil )};

// String returns a description of `k`.
func (_aaab rulingKind )String ()string {_dbeba ,_gabcg :=_fbdda [_aaab ];if !_gabcg {return _ga .Sprintf ("\u004e\u006ft\u0020\u0061\u0020r\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_aaab );};return _dbeba ;};var _fbac *_d .Regexp =_d .MustCompile (_bfee +"\u007c"+_bbfa );
func (_dgcac *textWord )computeText ()string {_fbde :=make ([]string ,len (_dgcac ._fbgfg ));for _eddfg ,_dcbfd :=range _dgcac ._fbgfg {_fbde [_eddfg ]=_dcbfd ._fceec ;};return _ba .Join (_fbde ,"");};func (_ceabf intSet )add (_eddgf int ){_ceabf [_eddgf ]=struct{}{}};
func _aebdc (_edfb float64 ,_bbce int )int {if _bbce ==0{_bbce =1;};_gfbe :=float64 (_bbce );return int (_bff .Round (_edfb /_gfbe )*_gfbe );};func (_efbf *wordBag )pullWord (_bgg *textWord ,_befa int ,_feff map[int ]map[*textWord ]struct{}){_efbf .PdfRectangle =_bddd (_efbf .PdfRectangle ,_bgg .PdfRectangle );
if _bgg ._ffagg > _efbf ._fgcf {_efbf ._fgcf =_bgg ._ffagg ;};_efbf ._bdde [_befa ]=append (_efbf ._bdde [_befa ],_bgg );_feff [_befa ][_bgg ]=struct{}{};};func (_fged *textWord )addDiacritic (_ebgdc string ){_eebgdg :=_fged ._fbgfg [len (_fged ._fbgfg )-1];
_eebgdg ._fceec +=_ebgdc ;_eebgdg ._fceec =_fbd .NFKC .String (_eebgdg ._fceec );};func _adbcg (_gfcef string ,_gcdcb int )string {if len (_gfcef )< _gcdcb {return _gfcef ;};return _gfcef [:_gcdcb ];};

// StrokePath is a stroked path.
type StrokePath struct{Points []_ge .Point ;_cc .Color ;};

// PageImages represents extracted images on a PDF page with spatial information:
// display position and size.
type PageImages struct{Images []ImageMark ;};func (_aef *textObject )showText (_cefa _e .PdfObject ,_gefg []byte ,_gbce int ,_dbffd string )error {return _aef .renderText (_cefa ,_gefg ,_gbce ,_dbffd );};func _bega (_eeeea map[float64 ][]*textLine )[]float64 {_daad :=[]float64 {};
for _eagbd :=range _eeeea {_daad =append (_daad ,_eagbd );};_a .Float64s (_daad );return _daad ;};func (_ccbf *subpath )close (){if !_bddaa (_ccbf ._eaea [0],_ccbf .last ()){_ccbf .add (_ccbf ._eaea [0]);};_ccbf ._dcfc =true ;_ccbf .removeDuplicates ();
};func _eagb (_becae *_dc .StructTreeRoot ,_aeecb map[int ][]*textLine ,_deede _e .PdfObject )[]*list {if _becae ==nil {_fb .Log .Debug ("\u0062\u0075\u0069\u006c\u0064\u004c\u0069\u0073\u0074\u003a\u0020t\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0069\u0073 \u006e\u0069\u006c");
return nil ;};_cgce :=[]*_dc .KValue {};var _eeeb func (_daab *_dc .KValue );_eeeb =func (_aecbg *_dc .KValue ){if _ccae :=_aecbg .GetKDict ();_ccae !=nil {if _ccae .S .String ()=="\u004c"{_cgce =append (_cgce ,_aecbg );}else {for _ ,_egad :=range _ccae .GetChildren (){_eeeb (_egad );
};};};};for _ ,_eagc :=range _becae .K {_ebca :=_dc .NewKValue ();_ebca .SetKDict (_eagc );_eeeb (_ebca );};_gdbec :=_bdc (_cgce ,_aeecb ,_deede );var _gbbea []*list ;for _ ,_efga :=range _gdbec {_gega :=_abgg (_efga );_gbbea =append (_gbbea ,_gega ...);
};return _gbbea ;};

// ExtractPageImages returns the image contents of the page extractor, including data
// and position, size information for each image.
// A set of options to control page image extraction can be passed in. The options
// parameter can be nil for the default options. By default, inline stencil masks
// are not extracted.
func (_agfg *Extractor )ExtractPageImages (options *ImageExtractOptions )(*PageImages ,error ){_bcbb :=&imageExtractContext {_bcf :options };_bebd :=_bcbb .extractContentStreamImages (_agfg ._fdf ,_agfg ._cfb );if _bebd !=nil {return nil ,_bebd ;};return &PageImages {Images :_bcbb ._ebb },nil ;
};func (_ecg *textPara )writeCellText (_afd _f .Writer ,_gaad *textContext ){for _ccbbf ,_gcfe :=range _ecg ._bdea {_dbgb :=_gcfe .text ();_cdaae :=!_gaad .isDehyphenationDisabled ()&&_gcfe .endsInHyphen ()&&_ccbbf !=len (_ecg ._bdea )-1;if _cdaae {_dbgb =_feffc (_dbgb );
};_afd .Write ([]byte (_dbgb ));if !(_cdaae ||_ccbbf ==len (_ecg ._bdea )-1){_afd .Write ([]byte (_cbcg (_gcfe ._bfbe ,_ecg ._bdea [_ccbbf +1]._bfbe )));};};};func _acea (_fbee float64 )int {var _ecdc int ;if _fbee >=0{_ecdc =int (_fbee /_fbbf );}else {_ecdc =int (_fbee /_fbbf )-1;
};return _ecdc ;};func (_eaed *wordBag )scanBand (_cfeb string ,_edbe *wordBag ,_becb func (_afaf *wordBag ,_abaf *textWord )bool ,_eedc ,_fbfdf ,_befb float64 ,_cbedd ,_dacc bool )int {_caff :=_edbe ._fgcf ;var _bagf map[int ]map[*textWord ]struct{};if !_cbedd {_bagf =_eaed .makeRemovals ();
};_acgb :=_gfge *_caff ;_aeae :=0;for _ ,_bace :=range _eaed .depthBand (_eedc -_acgb ,_fbfdf +_acgb ){if len (_eaed ._bdde [_bace ])==0{continue ;};for _ ,_gfe :=range _eaed ._bdde [_bace ]{if !(_eedc -_acgb <=_gfe ._dcced &&_gfe ._dcced <=_fbfdf +_acgb ){continue ;
};if !_becb (_edbe ,_gfe ){continue ;};_bbda :=2.0*_bff .Abs (_gfe ._ffagg -_edbe ._fgcf )/(_gfe ._ffagg +_edbe ._fgcf );_gfcff :=_bff .Max (_gfe ._ffagg /_edbe ._fgcf ,_edbe ._fgcf /_gfe ._ffagg );_gadb :=_bff .Min (_bbda ,_gfcff );if _befb > 0&&_gadb > _befb {continue ;
};if _edbe .blocked (_gfe ){continue ;};if !_cbedd {_edbe .pullWord (_gfe ,_bace ,_bagf );};_aeae ++;if !_dacc {if _gfe ._dcced < _eedc {_eedc =_gfe ._dcced ;};if _gfe ._dcced > _fbfdf {_fbfdf =_gfe ._dcced ;};};if _cbedd {break ;};};};if !_cbedd {_eaed .applyRemovals (_bagf );
};return _aeae ;};func (_eebb rulingList )connections (_eecg map[int ]intSet ,_cdgf int )intSet {_cebae :=make (intSet );_cbbb :=make (intSet );var _accba func (int );_accba =func (_gdfd int ){if !_cbbb .has (_gdfd ){_cbbb .add (_gdfd );for _gcbdb :=range _eebb {if _eecg [_gcbdb ].has (_gdfd ){_cebae .add (_gcbdb );
};};for _dgceg :=range _eebb {if _cebae .has (_dgceg ){_accba (_dgceg );};};};};_accba (_cdgf );return _cebae ;};func (_dcdbc *wordBag )maxDepth ()float64 {return _dcdbc ._gdda -_dcdbc .Lly };func _bcabb (_eeabf string ,_feffb []rulingList ){_fb .Log .Info ("\u0024\u0024 \u0025\u0064\u0020g\u0072\u0069\u0064\u0073\u0020\u002d\u0020\u0025\u0073",len (_feffb ),_eeabf );
for _gcce ,_fegg :=range _feffb {_ga .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gcce ,_fegg .String ());};};func _gcadd (_eafae ,_acde bounded )float64 {_fgde :=_cagg (_eafae ,_acde );if !_ggdae (_fgde ){return _fgde ;};return _ccefe (_eafae ,_acde );
};func (_cbga *shapesState )establishSubpath ()*subpath {_fbcg ,_aagd :=_cbga .lastpointEstablished ();if !_aagd {_cbga ._facg =append (_cbga ._facg ,_ecff (_fbcg ));};if len (_cbga ._facg )==0{return nil ;};_cbga ._fcfg =false ;return _cbga ._facg [len (_cbga ._facg )-1];
};func (_fdeae paraList )lines ()[]*textLine {var _gdgd []*textLine ;for _ ,_egcee :=range _fdeae {_gdgd =append (_gdgd ,_egcee ._bdea ...);};return _gdgd ;};func (_bgaaf *wordBag )depthBand (_abbd ,_fcab float64 )[]int {if len (_bgaaf ._bdde )==0{return nil ;
};return _bgaaf .depthRange (_bgaaf .getDepthIdx (_abbd ),_bgaaf .getDepthIdx (_fcab ));};func (_abad *textPara )toCellTextMarks (_ccaa *int ,_edfgd *textContext )[]TextMark {var _bbcfc []TextMark ;for _cbdc ,_cabf :=range _abad ._bdea {_bccd :=_cabf .toTextMarks (_ccaa );
_bgdbe :=!_edfgd .isDehyphenationDisabled ()&&_cabf .endsInHyphen ()&&_cbdc !=len (_abad ._bdea )-1;if _bgdbe {_bccd =_eegf (_bccd ,_ccaa );};_bbcfc =append (_bbcfc ,_bccd ...);if !(_bgdbe ||_cbdc ==len (_abad ._bdea )-1){_bbcfc =_cace (_bbcfc ,_ccaa ,_cbcg (_cabf ._bfbe ,_abad ._bdea [_cbdc +1]._bfbe ));
};};return _bbcfc ;};func (_cebe paraList )reorder (_cedgda []int ){_afaa :=make (paraList ,len (_cebe ));for _baac ,_fbcgc :=range _cedgda {_afaa [_baac ]=_cebe [_fbcgc ];};copy (_cebe ,_afaa );};func _ebggb (_cbc ,_befaa _dc .PdfRectangle )bool {return _befaa .Llx <=_cbc .Urx &&_cbc .Llx <=_befaa .Urx ;
};

// ToTextMark returns the public view of `tm`.
func (_cadd *textMark )ToTextMark ()TextMark {return TextMark {Text :_cadd ._fceec ,Original :_cadd ._ddad ,BBox :_cadd ._bgeb ,Font :_cadd ._agcdc ,FontSize :_cadd ._ggfcd ,FillColor :_cadd ._gccca ,StrokeColor :_cadd ._ddca ,Orientation :_cadd ._efdgf ,DirectObject :_cadd ._ffcfd ,ObjString :_cadd ._gbfa ,Tw :_cadd .Tw ,Th :_cadd .Th ,Tc :_cadd ._agdcgb ,Index :_cadd ._cbad };
};var _bbfa string ="\u005e\u005b\u0061\u002d\u007a\u0041\u002dZ\u005d\u0028\u005c)\u007c\u005c\u002e)\u007c\u005e[\u005c\u0064\u005d\u002b\u0028\u005c)\u007c\\.\u0029\u007c\u005e\u005c\u0028\u005b\u0061\u002d\u007a\u0041\u002d\u005a\u005d\u005c\u0029\u007c\u005e\u005c\u0028\u005b\u005c\u0064\u005d\u002b\u005c\u0029";
func (_abbg *textPara )text ()string {_gbdb :=new (_ca .Buffer );_abbg .writeText (_gbdb ,&textContext {});return _gbdb .String ();};func (_cgeb *textLine )appendWord (_bcde *textWord ){_cgeb ._cfad =append (_cgeb ._cfad ,_bcde );_cgeb .PdfRectangle =_bddd (_cgeb .PdfRectangle ,_bcde .PdfRectangle );
if _bcde ._ffagg > _cgeb ._cggfe {_cgeb ._cggfe =_bcde ._ffagg ;};if _bcde ._dcced > _cgeb ._bfbe {_cgeb ._bfbe =_bcde ._dcced ;};};

// PageTextOptions holds various options available in extraction process.
type PageTextOptions struct{_edff bool ;_cgda ExtractionMode ;_dacb bool ;};type textResult struct{_aade PageText ;_daa int ;_gfbf int ;};func _bfca (_acbc ,_cfebg ,_afbee float64 )rulingKind {if _acbc >=_afbee &&_adeg (_cfebg ,_acbc ){return _dagd ;};
if _cfebg >=_afbee &&_adeg (_acbc ,_cfebg ){return _aedgg ;};return _ebecb ;};func (_fegd *textObject )getFont (_edca string )(*_dc .PdfFont ,error ){if _fegd ._ccee ._aff !=nil {_faeb ,_gdfe :=_fegd .getFontDict (_edca );if _gdfe !=nil {_fb .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0067\u0065\u0074\u0046\u006f\u006e\u0074:\u0020n\u0061m\u0065=\u0025\u0073\u002c\u0020\u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0073",_edca ,_gdfe .Error ());
return nil ,_gdfe ;};_fegd ._ccee ._eb ++;_faad ,_ccf :=_fegd ._ccee ._aff [_faeb .String ()];if _ccf {_faad ._fdec =_fegd ._ccee ._eb ;return _faad ._efgb ,nil ;};};_efaf ,_cdce :=_fegd .getFontDict (_edca );if _cdce !=nil {return nil ,_cdce ;};_eebg ,_cdce :=_fegd .getFontDirect (_edca );
if _cdce !=nil {return nil ,_cdce ;};if _fegd ._ccee ._aff !=nil {_acgg :=fontEntry {_eebg ,_fegd ._ccee ._eb };if len (_fegd ._ccee ._aff )>=_cbef {var _aabbf []string ;for _ecca :=range _fegd ._ccee ._aff {_aabbf =append (_aabbf ,_ecca );};_a .Slice (_aabbf ,func (_cgfg ,_cddf int )bool {return _fegd ._ccee ._aff [_aabbf [_cgfg ]]._fdec < _fegd ._ccee ._aff [_aabbf [_cddf ]]._fdec ;
});delete (_fegd ._ccee ._aff ,_aabbf [0]);};_fegd ._ccee ._aff [_efaf .String ()]=_acgg ;};return _eebg ,nil ;};

// ExtractStrokePaths processes and extracts all stroke paths in content streams.
func (_edf *Extractor )ExtractStrokePaths ()([]StrokePath ,error ){_efe ,_ ,_ ,_bffb :=_edf .ExtractPageText ();if _bffb !=nil {return nil ,_bffb ;};_deea :=[]StrokePath {};for _ ,_aacc :=range _efe ._gdafg {_bfdd :=StrokePath {Color :_aacc .Color ,Points :[]_ge .Point {}};
for _ ,_aaed :=range _aacc ._eafba {_bfdd .Points =append (_bfdd .Points ,_aaed ._eaea ...);};_deea =append (_deea ,_bfdd );};return _deea ,nil ;};func (_cgef rectRuling )asRuling ()(*ruling ,bool ){_eddcc :=ruling {_caefd :_cgef ._debc ,Color :_cgef .Color ,_ebee :_gbef };
switch _cgef ._debc {case _aedgg :_eddcc ._fdbaa =0.5*(_cgef .Llx +_cgef .Urx );_eddcc ._ddgcef =_cgef .Lly ;_eddcc ._afcga =_cgef .Ury ;_ggdc ,_adff :=_cgef .checkWidth (_cgef .Llx ,_cgef .Urx );if !_adff {if _cege {_fb .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067V\u0065\u0072\u0074\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_cgef );
};return nil ,false ;};_eddcc ._aaffb =_ggdc ;case _dagd :_eddcc ._fdbaa =0.5*(_cgef .Lly +_cgef .Ury );_eddcc ._ddgcef =_cgef .Llx ;_eddcc ._afcga =_cgef .Urx ;_eggc ,_bfadg :=_cgef .checkWidth (_cgef .Lly ,_cgef .Ury );if !_bfadg {if _cege {_fb .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067H\u006f\u0072\u007a\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_cgef );
};return nil ,false ;};_eddcc ._aaffb =_eggc ;default:_fb .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_cgef ._debc );return nil ,false ;};return &_eddcc ,true ;};func (_dcacg *wordBag )removeDuplicates (){if _ebge {_fb .Log .Info ("r\u0065m\u006f\u0076\u0065\u0044\u0075\u0070\u006c\u0069c\u0061\u0074\u0065\u0073: \u0025\u0071",_dcacg .text ());
};for _ ,_gfabbf :=range _dcacg .depthIndexes (){if len (_dcacg ._bdde [_gfabbf ])==0{continue ;};_cabg :=_dcacg ._bdde [_gfabbf ][0];_adbd :=_fedb *_cabg ._ffagg ;_gcfeb :=_cabg ._dcced ;for _ ,_acfe :=range _dcacg .depthBand (_gcfeb ,_gcfeb +_adbd ){_aeba :=map[*textWord ]struct{}{};
_ebdb :=_dcacg ._bdde [_acfe ];for _ ,_fabf :=range _ebdb {if _ ,_ffde :=_aeba [_fabf ];_ffde {continue ;};for _ ,_edcf :=range _ebdb {if _ ,_cgag :=_aeba [_edcf ];_cgag {continue ;};if _edcf !=_fabf &&_edcf ._eagba ==_fabf ._eagba &&_bff .Abs (_edcf .Llx -_fabf .Llx )< _adbd &&_bff .Abs (_edcf .Urx -_fabf .Urx )< _adbd &&_bff .Abs (_edcf .Lly -_fabf .Lly )< _adbd &&_bff .Abs (_edcf .Ury -_fabf .Ury )< _adbd {_aeba [_edcf ]=struct{}{};
};};};if len (_aeba )> 0{_bbdgb :=0;for _ ,_ffaa :=range _ebdb {if _ ,_degc :=_aeba [_ffaa ];!_degc {_ebdb [_bbdgb ]=_ffaa ;_bbdgb ++;};};_dcacg ._bdde [_acfe ]=_ebdb [:len (_ebdb )-len (_aeba )];if len (_dcacg ._bdde [_acfe ])==0{delete (_dcacg ._bdde ,_acfe );
};};};};};func (_cedd paraList )findTableGrid (_dggfc gridTiling )(*textTable ,map[*textPara ]struct{}){_bbbfd :=len (_dggfc ._egfg );_dfbgee :=len (_dggfc ._facfb );_gbggg :=textTable {_dabaf :true ,_dgbf :_bbbfd ,_gfdgb :_dfbgee ,_ddbd :make (map[uint64 ]*textPara ,_bbbfd *_dfbgee ),_dffge :make (map[uint64 ]compositeCell ,_bbbfd *_dfbgee )};
_gbggg .PdfRectangle =_dggfc .PdfRectangle ;_fbed :=make (map[*textPara ]struct{});_dgaa :=int ((1.0-_bcgga )*float64 (_bbbfd *_dfbgee ));_beabda :=0;if _ceee {_fb .Log .Info ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0064\u0020\u0078\u0020%\u0064",_bbbfd ,_dfbgee );
};for _eded ,_gafg :=range _dggfc ._facfb {_gfec ,_gaeba :=_dggfc ._gddd [_gafg ];if !_gaeba {continue ;};for _geecd ,_dfece :=range _dggfc ._egfg {_fbbb ,_bbac :=_gfec [_dfece ];if !_bbac {continue ;};_abdadd :=_cedd .inTile (_fbbb );if len (_abdadd )==0{_beabda ++;
if _beabda > _dgaa {if _ceee {_fb .Log .Info ("\u0021\u006e\u0075m\u0045\u006d\u0070\u0074\u0079\u003d\u0025\u0064",_beabda );};return nil ,nil ;};}else {_gbggg .putComposite (_geecd ,_eded ,_abdadd ,_fbbb .PdfRectangle );for _ ,_gece :=range _abdadd {_fbed [_gece ]=struct{}{};
};};};};_gecee :=0;for _begd :=0;_begd < _bbbfd ;_begd ++{_cfeeb :=_gbggg .get (_begd ,0);if _cfeeb ==nil ||!_cfeeb ._fcgc {_gecee ++;};};if _gecee ==0{if _ceee {_fb .Log .Info ("\u0021\u006e\u0075m\u0048\u0065\u0061\u0064\u0065\u0072\u003d\u0030");};return nil ,nil ;
};_cdcff :=_gbggg .reduceTiling (_dggfc ,_gcfd );_cdcff =_cdcff .subdivide ();return _cdcff ,_fbed ;};func (_fcfef *textTable )put (_gcaaa ,_debfc int ,_deef *textPara ){_fcfef ._ddbd [_egfde (_gcaaa ,_debfc )]=_deef ;};type textLine struct{_dc .PdfRectangle ;
_bfbe float64 ;_cfad []*textWord ;_cggfe float64 ;};func (_daef paraList )sortTopoOrder (){_fgbd :=_daef .topoOrder ();_daef .reorder (_fgbd )};func (_dfbb *textTable )isExportable ()bool {if _dfbb ._dabaf {return true ;};_bcfed :=func (_baeeb int )bool {_aaaaa :=_dfbb .get (0,_baeeb );
if _aaaaa ==nil {return false ;};_fgcgb :=_aaaaa .text ();_cefaf :=_g .RuneCountInString (_fgcgb );_baegd :=_cgcbd .MatchString (_fgcgb );return _cefaf <=1||_baegd ;};for _cfbf :=0;_cfbf < _dfbb ._gfdgb ;_cfbf ++{if !_bcfed (_cfbf ){return true ;};};return false ;
};func (_fcfe paraList )llyRange (_fcea []int ,_afbb ,_fggae float64 )[]int {_agae :=len (_fcfe );if _fggae < _fcfe [_fcea [0]].Lly ||_afbb > _fcfe [_fcea [_agae -1]].Lly {return nil ;};_bcdg :=_a .Search (_agae ,func (_agbda int )bool {return _fcfe [_fcea [_agbda ]].Lly >=_afbb });
_ccca :=_a .Search (_agae ,func (_fcff int )bool {return _fcfe [_fcea [_fcff ]].Lly > _fggae });return _fcea [_bcdg :_ccca ];};func (_fbae paraList )inTile (_dcgfg gridTile )paraList {var _geecg paraList ;for _ ,_ecaff :=range _fbae {if _dcgfg .contains (_ecaff .PdfRectangle ){_geecg =append (_geecg ,_ecaff );
};};if _feed {_ga .Printf ("\u0020 \u0020\u0069\u006e\u0054i\u006c\u0065\u003a\u0020\u0020%\u0073 \u0069n\u0073\u0069\u0064\u0065\u003d\u0025\u0064\n",_dcgfg ,len (_geecg ));for _ebbf ,_eabd :=range _geecg {_ga .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ebbf ,_eabd );
};_ga .Println ("");};return _geecg ;};var (_bea =_caa .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");_cafe =_caa .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072");
);func _gfga (_eggffb []*textMark ,_bbfc _dc .PdfRectangle )*textWord {_eefe :=_eggffb [0].PdfRectangle ;_gdfc :=_eggffb [0]._ggfcd ;for _ ,_dfeb :=range _eggffb [1:]{_eefe =_bddd (_eefe ,_dfeb .PdfRectangle );if _dfeb ._ggfcd > _gdfc {_gdfc =_dfeb ._ggfcd ;
};};return &textWord {PdfRectangle :_eefe ,_fbgfg :_eggffb ,_dcced :_bbfc .Ury -_eefe .Lly ,_ffagg :_gdfc };};func (_afcc paraList )eventNeighbours (_ggca []event )map[*textPara ][]int {_a .Slice (_ggca ,func (_gaec ,_dgaca int )bool {_aafg ,_dgaf :=_ggca [_gaec ],_ggca [_dgaca ];
_gfffb ,_dgcca :=_aafg ._cddae ,_dgaf ._cddae ;if _gfffb !=_dgcca {return _gfffb < _dgcca ;};if _aafg ._afca !=_dgaf ._afca {return _aafg ._afca ;};return _gaec < _dgaca ;});_ggfef :=make (map[int ]intSet );_aaaffa :=make (intSet );for _ ,_addbg :=range _ggca {if _addbg ._afca {_ggfef [_addbg ._ecda ]=make (intSet );
for _fcgg :=range _aaaffa {if _fcgg !=_addbg ._ecda {_ggfef [_addbg ._ecda ].add (_fcgg );_ggfef [_fcgg ].add (_addbg ._ecda );};};_aaaffa .add (_addbg ._ecda );}else {_aaaffa .del (_addbg ._ecda );};};_dgda :=map[*textPara ][]int {};for _agfb ,_bccfe :=range _ggfef {_gcbc :=_afcc [_agfb ];
if len (_bccfe )==0{_dgda [_gcbc ]=nil ;continue ;};_beda :=make ([]int ,len (_bccfe ));_eeccc :=0;for _gggca :=range _bccfe {_beda [_eeccc ]=_gggca ;_eeccc ++;};_dgda [_gcbc ]=_beda ;};return _dgda ;};func (_agab *wordBag )removeWord (_cgfa *textWord ,_aecb int ){_cdfd :=_agab ._bdde [_aecb ];
_cdfd =_daed (_cdfd ,_cgfa );if len (_cdfd )==0{delete (_agab ._bdde ,_aecb );}else {_agab ._bdde [_aecb ]=_cdfd ;};};var _ddgd =map[markKind ]string {_efaa :"\u0073\u0074\u0072\u006f\u006b\u0065",_gbef :"\u0066\u0069\u006c\u006c",_cddc :"\u0061u\u0067\u006d\u0065\u006e\u0074"};
type markKind int ;func _ecce (_gdbeg []*textMark ,_dcag _dc .PdfRectangle )string {_fb .Log .Trace ("\u006d\u0061\u006b\u0065\u0053i\u006d\u0070\u006c\u0065\u0054\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020e\u006c\u0065\u006d\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",len (_gdbeg ),_dcag );
_gafe :="";if len (_gdbeg )==0{return _gafe ;};_gefa :=_geef (_gdbeg ,_dcag ,true );if len (_gefa )==0{return _gafe ;};_cebbe :=0.0;_cfdcb :=true ;_ggbe :="";for _ ,_beef :=range _gefa {_begaf :=_beef ._ffagg ;if _begaf > _geee {_begaf =_geee ;};if (_beef ._dcced -_cebbe > _gfge *_begaf &&_cebbe !=0.0)||(_cebbe -_beef ._dcced > _begaf *10){_gddad :=_ab ([]rune (_ggbe ));
_ggbe =_gddad ._ef ;_ggbe +="\u000a";_gafe +=_ggbe ;_ggbe ="";}else {if !_cfdcb {_ggbe +="\u0020";};};_ggbe +=_beef ._eagba ;_cfdcb =false ;_cebbe =_beef ._dcced ;};if _ggbe !=""{_geade :=_ab ([]rune (_ggbe ));_ggbe =_geade ._ef ;_ggbe +="\u000a";_gafe +=_ggbe ;
};return _gafe ;};func (_cbgec *subpath )makeRectRuling (_eddg _cc .Color )(*ruling ,bool ){if _cege {_fb .Log .Info ("\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0070\u0061\u0074\u0068\u003d\u0025\u0076",_cbgec );
};_cffdc :=_cbgec ._eaea [:4];_baea :=make (map[int ]rulingKind ,len (_cffdc ));for _ccdd ,_dfggd :=range _cffdc {_adccf :=_cbgec ._eaea [(_ccdd +1)%4];_baea [_ccdd ]=_bceg (_dfggd ,_adccf );if _cege {_ga .Printf ("\u0025\u0034\u0064: \u0025\u0073\u0020\u003d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066",_ccdd ,_baea [_ccdd ],_dfggd ,_adccf );
};};if _cege {_ga .Printf ("\u0020\u0020\u0020\u006b\u0069\u006e\u0064\u0073\u003d\u0025\u002b\u0076\u000a",_baea );};var _eaaaf ,_fdeaed []int ;for _edg ,_edee :=range _baea {switch _edee {case _dagd :_fdeaed =append (_fdeaed ,_edg );case _aedgg :_eaaaf =append (_eaaaf ,_edg );
};};if _cege {_ga .Printf ("\u0020\u0020 \u0068\u006f\u0072z\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_fdeaed ),_fdeaed );_ga .Printf ("\u0020\u0020 \u0076\u0065\u0072t\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_eaaaf ),_eaaaf );
};_decf :=(len (_fdeaed )==2&&len (_eaaaf )==2)||(len (_fdeaed )==2&&len (_eaaaf )==0&&_gaddb (_cffdc [_fdeaed [0]],_cffdc [_fdeaed [1]]))||(len (_eaaaf )==2&&len (_fdeaed )==0&&_dfeaa (_cffdc [_eaaaf [0]],_cffdc [_eaaaf [1]]));if _cege {_ga .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_fdeaed ),len (_eaaaf ),_decf );
};if !_decf {if _cege {_fb .Log .Error ("\u0021!\u006d\u0061\u006b\u0065R\u0065\u0063\u0074\u0052\u0075l\u0069n\u0067:\u0020\u0070\u0061\u0074\u0068\u003d\u0025v",_cbgec );_ga .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_fdeaed ),len (_eaaaf ),_decf );
};return &ruling {},false ;};if len (_eaaaf )==0{for _cdgab ,_agefb :=range _baea {if _agefb !=_dagd {_eaaaf =append (_eaaaf ,_cdgab );};};};if len (_fdeaed )==0{for _bagfg ,_efdda :=range _baea {if _efdda !=_aedgg {_fdeaed =append (_fdeaed ,_bagfg );};
};};if _cege {_fb .Log .Info ("\u006da\u006b\u0065R\u0065\u0063\u0074\u0052u\u006c\u0069\u006eg\u003a\u0020\u0068\u006f\u0072\u007a\u0073\u003d\u0025d \u0076\u0065\u0072t\u0073\u003d%\u0064\u0020\u0070\u006f\u0069\u006et\u0073\u003d%\u0064\u000a"+"\u0009\u0020\u0068o\u0072\u007a\u0073\u003d\u0025\u002b\u0076\u000a"+"\u0009\u0020\u0076e\u0072\u0074\u0073\u003d\u0025\u002b\u0076\u000a"+"\t\u0070\u006f\u0069\u006e\u0074\u0073\u003d\u0025\u002b\u0076",len (_fdeaed ),len (_eaaaf ),len (_cffdc ),_fdeaed ,_eaaaf ,_cffdc );
};var _agdg ,_fccc ,_ebceg ,_gdab _ge .Point ;if _cffdc [_fdeaed [0]].Y > _cffdc [_fdeaed [1]].Y {_ebceg ,_gdab =_cffdc [_fdeaed [0]],_cffdc [_fdeaed [1]];}else {_ebceg ,_gdab =_cffdc [_fdeaed [1]],_cffdc [_fdeaed [0]];};if _cffdc [_eaaaf [0]].X > _cffdc [_eaaaf [1]].X {_agdg ,_fccc =_cffdc [_eaaaf [0]],_cffdc [_eaaaf [1]];
}else {_agdg ,_fccc =_cffdc [_eaaaf [1]],_cffdc [_eaaaf [0]];};_eeag :=_dc .PdfRectangle {Llx :_agdg .X ,Urx :_fccc .X ,Lly :_gdab .Y ,Ury :_ebceg .Y };if _eeag .Llx > _eeag .Urx {_eeag .Llx ,_eeag .Urx =_eeag .Urx ,_eeag .Llx ;};if _eeag .Lly > _eeag .Ury {_eeag .Lly ,_eeag .Ury =_eeag .Ury ,_eeag .Lly ;
};_gcdeb :=rectRuling {PdfRectangle :_eeag ,_debc :_acfd (_eeag ),Color :_eddg };if _gcdeb ._debc ==_ebecb {if _cege {_fb .Log .Error ("\u006da\u006b\u0065\u0052\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006eg\u003a\u0020\u006b\u0069\u006e\u0064\u003d\u006e\u0069\u006c");
};return nil ,false ;};_faecb ,_gdga :=_gcdeb .asRuling ();if !_gdga {if _cege {_fb .Log .Error ("\u006da\u006b\u0065\u0052\u0065c\u0074\u0052\u0075\u006c\u0069n\u0067:\u0020!\u0069\u0073\u0052\u0075\u006c\u0069\u006eg");};return nil ,false ;};if _efgc {_ga .Printf ("\u0020\u0020\u0020\u0072\u003d\u0025\u0073\u000a",_faecb .String ());
};return _faecb ,true ;};func (_ecee paraList )findGridTables (_fefbb []gridTiling )[]*textTable {if _feed {_fb .Log .Info ("\u0066i\u006e\u0064\u0047\u0072\u0069\u0064\u0054\u0061\u0062\u006c\u0065s\u003a\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073",len (_ecee ));
for _fffca ,_bfdg :=range _ecee {_ga .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fffca ,_bfdg );};};var _fdfef []*textTable ;for _fgdbf ,_debbb :=range _fefbb {_agea ,_eagafd :=_ecee .findTableGrid (_debbb );if _agea !=nil {_agea .log (_ga .Sprintf ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0057\u0069\u0074\u0068\u0047\u0072\u0069\u0064\u0073\u003a\u0020%\u0064",_fgdbf ));
_fdfef =append (_fdfef ,_agea );_agea .markCells ();};for _cfagf :=range _eagafd {_cfagf ._ggag =true ;};};if _feed {_fb .Log .Info ("\u0066i\u006e\u0064\u0047\u0072i\u0064\u0054\u0061\u0062\u006ce\u0073:\u0020%\u0064\u0020\u0074\u0061\u0062\u006c\u0065s",len (_fdfef ));
};return _fdfef ;};const _bfacf =1.0/1000.0;func _feagf (_eddccf _e .PdfObject ,_gdecc _cc .Color )(_cd .Image ,error ){_fcgff ,_bbbae :=_e .GetStream (_eddccf );if !_bbbae {return nil ,nil ;};_gfadc ,_ffbd :=_dc .NewXObjectImageFromStream (_fcgff );if _ffbd !=nil {return nil ,_ffbd ;
};_ecadd ,_ffbd :=_gfadc .ToImage ();if _ffbd !=nil {return nil ,_ffbd ;};return _edea (_ecadd ,_gdecc ),nil ;};type paraList []*textPara ;const (_gdfa =false ;_dccc =false ;_bbgg =false ;_aaca =false ;_aaaef =false ;_ecbc =false ;_gbcg =false ;_adeaf =false ;
_cbeed =false ;_gbcf =_cbeed &&true ;_addg =_gbcf &&false ;_ebge =_cbeed &&true ;_feed =false ;_dffd =_feed &&false ;_dcddf =_feed &&true ;_efgc =false ;_fdfe =_efgc &&false ;_afecc =_efgc &&false ;_ceee =_efgc &&true ;_cege =_efgc &&false ;_dcdbb =_efgc &&false ;
);func _cgbc (_gfcb _dc .PdfRectangle )*ruling {return &ruling {_caefd :_dagd ,_fdbaa :_gfcb .Ury ,_ddgcef :_gfcb .Llx ,_afcga :_gfcb .Urx };};

// String returns a description of `t`.
func (_eecee *textTable )String ()string {return _ga .Sprintf ("\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0025\u0074",_eecee ._dgbf ,_eecee ._gfdgb ,_eecee ._dabaf );};func (_ccfg *shapesState )closePath (){if _ccfg ._fcfg {_ccfg ._facg =append (_ccfg ._facg ,_ecff (_ccfg ._dfea ));
_ccfg ._fcfg =false ;}else if len (_ccfg ._facg )==0{if _aaaef {_fb .Log .Debug ("\u0063\u006c\u006f\u0073eP\u0061\u0074\u0068\u0020\u0077\u0069\u0074\u0068\u0020\u006e\u006f\u0020\u0070\u0061t\u0068");};_ccfg ._fcfg =false ;return ;};_ccfg ._facg [len (_ccfg ._facg )-1].close ();
if _aaaef {_fb .Log .Info ("\u0063\u006c\u006f\u0073\u0065\u0050\u0061\u0074\u0068\u003a\u0020\u0025\u0073",_ccfg );};};func (_efea rulingList )splitSec ()[]rulingList {_a .Slice (_efea ,func (_gdbbc ,_gecgc int )bool {_daged ,_cfga :=_efea [_gdbbc ],_efea [_gecgc ];
if _daged ._ddgcef !=_cfga ._ddgcef {return _daged ._ddgcef < _cfga ._ddgcef ;};return _daged ._afcga < _cfga ._afcga ;});_abdae :=make (map[*ruling ]struct{},len (_efea ));_gcab :=func (_gdbgf *ruling )rulingList {_cggd :=rulingList {_gdbgf };_abdae [_gdbgf ]=struct{}{};
for _ ,_ddcac :=range _efea {if _ ,_cadf :=_abdae [_ddcac ];_cadf {continue ;};for _ ,_cabgc :=range _cggd {if _ddcac .alignsSec (_cabgc ){_cggd =append (_cggd ,_ddcac );_abdae [_ddcac ]=struct{}{};break ;};};};return _cggd ;};_bbbe :=[]rulingList {_gcab (_efea [0])};
for _ ,_gadab :=range _efea [1:]{if _ ,_ebde :=_abdae [_gadab ];_ebde {continue ;};_bbbe =append (_bbbe ,_gcab (_gadab ));};return _bbbe ;};func _bgedf (_aegdb _dc .PdfRectangle ,_deca []*textLine )*textPara {return &textPara {PdfRectangle :_aegdb ,_bdea :_deca };
};

// Len returns the number of TextMarks in `ma`.
func (_cdae *TextMarkArray )Len ()int {if _cdae ==nil {return 0;};return len (_cdae ._dadfg );};

// RenderMode specifies the text rendering mode (Tmode), which determines whether showing text shall cause
// glyph outlines to be  stroked, filled, used as a clipping boundary, or some combination of the three.
// Stroking, filling, and clipping shall have the same effects for a text object as they do for a path object
// (see 8.5.3, "Path-Painting Operators" and 8.5.4, "Clipping Path Operators").
type RenderMode int ;func (_fcgcea *textTable )emptyCompositeColumn (_gbcdb int )bool {for _gebe :=0;_gebe < _fcgcea ._gfdgb ;_gebe ++{if _eaca ,_eacgf :=_fcgcea ._dffge [_egfde (_gbcdb ,_gebe )];_eacgf {if len (_eaca .paraList )> 0{return false ;};};};
return true ;};func (_aabc *wordBag )minDepth ()float64 {return _aabc ._gdda -(_aabc .Ury -_aabc ._fgcf )};func (_gefgaf rulingList )merge ()*ruling {_gddb :=_gefgaf [0]._fdbaa ;_bcefb :=_gefgaf [0]._ddgcef ;_eddca :=_gefgaf [0]._afcga ;for _ ,_bfcfg :=range _gefgaf [1:]{_gddb +=_bfcfg ._fdbaa ;
if _bfcfg ._ddgcef < _bcefb {_bcefb =_bfcfg ._ddgcef ;};if _bfcfg ._afcga > _eddca {_eddca =_bfcfg ._afcga ;};};_dfae :=&ruling {_caefd :_gefgaf [0]._caefd ,_ebee :_gefgaf [0]._ebee ,Color :_gefgaf [0].Color ,_fdbaa :_gddb /float64 (len (_gefgaf )),_ddgcef :_bcefb ,_afcga :_eddca };
if _afecc {_fb .Log .Info ("\u006de\u0072g\u0065\u003a\u0020\u0025\u0032d\u0020\u0076e\u0063\u0073\u0020\u0025\u0073",len (_gefgaf ),_dfae );for _bbade ,_eabed :=range _gefgaf {_ga .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bbade ,_eabed );
};};return _dfae ;};func _dcbbc (_cefd ,_aggd bounded )float64 {return _cefd .bbox ().Llx -_aggd .bbox ().Urx };func _edea (_gdfcg *_dc .Image ,_egeae _cc .Color )_cd .Image {_bdddb ,_ffcga :=int (_gdfcg .Width ),int (_gdfcg .Height );_gfdge :=_cd .NewRGBA (_cd .Rect (0,0,_bdddb ,_ffcga ));
for _abgf :=0;_abgf < _ffcga ;_abgf ++{for _gccce :=0;_gccce < _bdddb ;_gccce ++{_cbbed ,_fgbbf :=_gdfcg .ColorAt (_gccce ,_abgf );if _fgbbf !=nil {_fb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_gccce ,_abgf );
continue ;};_feag ,_gefd ,_bfaab ,_ :=_cbbed .RGBA ();var _aeag _cc .Color ;if _feag +_gefd +_bfaab ==0{_aeag =_egeae ;}else {_aeag =_cc .Transparent ;};_gfdge .Set (_gccce ,_abgf ,_aeag );};};return _gfdge ;};func (_beaa *textMark )bbox ()_dc .PdfRectangle {return _beaa .PdfRectangle };


// ExtractText processes and extracts all text data in content streams and returns as a string.
// It takes into account character encodings in the PDF file, which are decoded by
// CharcodeBytesToUnicode.
// Characters that can't be decoded are replaced with MissingCodeRune ('\ufffd' = ).
func (_dba *Extractor )ExtractText ()(string ,error ){_ege ,_ ,_ ,_bebb :=_dba .ExtractTextWithStats ();return _ege ,_bebb ;};func (_dabd TextTable )getCellInfo (_baaf TextMark )[][]int {for _dddb ,_ddb :=range _dabd .Cells {for _ffeb :=range _ddb {_gecf :=&_ddb [_ffeb ].Marks ;
if _gecf .exists (_baaf ){return [][]int {{_dddb },{_ffeb }};};};};return nil ;};func (_eege *textObject )setCharSpacing (_debf float64 ){if _eege ==nil {return ;};_eege ._fbab ._ebe =_debf ;if _ecbc {_fb .Log .Info ("\u0073\u0065t\u0043\u0068\u0061\u0072\u0053\u0070\u0061\u0063\u0069\u006e\u0067\u003a\u0020\u0025\u002e\u0032\u0066\u0020\u0073\u0074\u0061\u0074e=\u0025\u0073",_debf ,_eege ._fbab .String ());
};};func (_eeee *shapesState )stroke (_cgac *[]pathSection ){_ddfb :=pathSection {_eafba :_eeee ._facg ,Color :_eeee ._gcba .getStrokeColor ()};*_cgac =append (*_cgac ,_ddfb );if _efgc {_ga .Printf ("\u0020 \u0020\u0020S\u0054\u0052\u004fK\u0045\u003a\u0020\u0025\u0064\u0020\u0073t\u0072\u006f\u006b\u0065\u0073\u0020s\u0073\u003d\u0025\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d%\u002b\u0076\u0020\u0025\u0036\u002e\u0032\u0066\u000a",len (*_cgac ),_eeee ,_eeee ._gcba .getStrokeColor (),_ddfb .bbox ());
if _fdfe {for _gcaf ,_abae :=range _eeee ._facg {_ga .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_gcaf ,_abae );if _gcaf ==10{break ;};};};};};

// PageFonts represents extracted fonts on a PDF page.
type PageFonts struct{Fonts []Font ;};func (_fgcfb paraList )tables (_cbfg *textContext )[]TextTable {var _abfa []TextTable ;if _feed {_fb .Log .Info ("\u0070\u0061\u0072\u0061\u0073\u002e\u0074\u0061\u0062\u006c\u0065\u0073\u003a");};for _ ,_ceeae :=range _fgcfb {_daea :=_ceeae ._fdfd ;
if _daea !=nil &&_daea .isExportable (){_abfa =append (_abfa ,_daea .toTextTable (_cbfg ));};};return _abfa ;};func _fecf (_eefg string )bool {for _ ,_aecgf :=range _eefg {if !_bf .IsSpace (_aecgf ){return false ;};};return true ;};type textMark struct{_dc .PdfRectangle ;
_efdgf int ;_fceec string ;_ddad string ;_agcdc *_dc .PdfFont ;_ggfcd float64 ;_agdcgb float64 ;_cgbf _ge .Matrix ;_deeb _ge .Point ;_bgeb _dc .PdfRectangle ;_gccca _cc .Color ;_ddca _cc .Color ;_ffcfd _e .PdfObject ;_gbfa []string ;Tw float64 ;Th float64 ;
_ggbg int ;_cbad int ;};func _fdee (_fca []int ,_adc *TextMarkArray ,_eff string )(*TextMarkArray ,Box ,error ){_fbaf :=Box {};_cfe :=_fca [0];_ddgc :=_fca [1];_egag :=len (_eff )-len (_ba .TrimLeft (_eff ,"\u0020"));_eaf :=len (_eff )-len (_ba .TrimRight (_eff ,"\u0020\u000a"));
_cfe =_cfe +_egag ;_ddgc =_ddgc -_eaf ;_fge ,_bfff :=_adc .RangeOffset (_cfe ,_ddgc );if _bfff !=nil {return nil ,_fbaf ,_bfff ;};_bdag ,_edcc :=_fge .BBox ();if !_edcc {return nil ,_fbaf ,_ga .Errorf ("\u0073\u0070\u0061\u006e\u004d\u0061\u0072\u006bs\u002e\u0042\u0042ox\u0020\u0068\u0061\u0073\u0020\u006eo\u0020\u0062\u006f\u0075\u006e\u0064\u0069\u006e\u0067\u0020\u0062\u006f\u0078\u002e\u0020s\u0070\u0061\u006e\u004d\u0061\u0072\u006b\u0073=\u0025\u0073",_fge );
};_fbaf =Box {BBox :_bdag };return _fge ,_fbaf ,nil ;};func (_ebab *textLine )endsInHyphen ()bool {_abfc :=_ebab ._cfad [len (_ebab ._cfad )-1];_eada :=_abfc ._eagba ;_gabc ,_bded :=_g .DecodeLastRuneInString (_eada );if _bded <=0||!_bf .Is (_bf .Hyphen ,_gabc ){return false ;
};if _abfc ._eeggf &&_abfb (_eada ){return true ;};return _abfb (_ebab .text ());};

// String returns a description of `l`.
func (_effg *textLine )String ()string {return _ga .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_effg ._bfbe ,_effg .PdfRectangle ,_effg ._cggfe ,_effg .text ());
};const (ExtractionModeLayout =iota ;ExtractionModePlain ;ExtractionModeLayoutNoBreaks ;);func (_gbcd *textObject )setFont (_gbdg string ,_aggc float64 )error {if _gbcd ==nil {return nil ;};_gbcd ._fbab ._eadb =_aggc ;_abba ,_gbee :=_gbcd .getFont (_gbdg );
if _gbee !=nil {return _gbee ;};_gbcd ._fbab ._fbafg =_abba ;return nil ;};type pathSection struct{_eafba []*subpath ;_cc .Color ;};func (_bgfcc gridTiling )log (_abeb string ){if !_ceee {return ;};_fb .Log .Info ("\u0074i\u006ci\u006e\u0067\u003a\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0071",len (_bgfcc ._egfg ),len (_bgfcc ._facfb ),_abeb );
_ga .Printf ("\u0020\u0020\u0020l\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a",_bgfcc ._egfg );_ga .Printf ("\u0020\u0020\u0020l\u006c\u0079\u003d\u0025\u002e\u0032\u0066\u000a",_bgfcc ._facfb );for _aacd ,_gbced :=range _bgfcc ._facfb {_efad ,_bebdb :=_bgfcc ._gddd [_gbced ];
if !_bebdb {continue ;};_ga .Printf ("%\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_aacd ,_gbced );for _bbgga ,_ccedf :=range _bgfcc ._egfg {_bbad ,_ccfgc :=_efad [_ccedf ];if !_ccfgc {continue ;};_ga .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_bbgga ,_bbad .String ());
};};};func (_gcge rulingList )toGrids ()[]rulingList {if _efgc {_fb .Log .Info ("t\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0025\u0073",_gcge );};_gdffc :=_gcge .intersections ();if _efgc {_fb .Log .Info ("\u0074\u006f\u0047r\u0069\u0064\u0073\u003a \u0076\u0065\u0063\u0073\u003d\u0025\u0064 \u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003d\u0025\u0064\u0020",len (_gcge ),len (_gdffc ));
for _ ,_fabd :=range _defc (_gdffc ){_ga .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_fabd ,_gdffc [_fabd ]);};};_gegba :=make (map[int ]intSet ,len (_gcge ));for _aecbc :=range _gcge {_bdcee :=_gcge .connections (_gdffc ,_aecbc );if len (_bdcee )> 0{_gegba [_aecbc ]=_bdcee ;
};};if _efgc {_fb .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0063\u006fn\u006e\u0065\u0063\u0074s=\u0025\u0064",len (_gegba ));for _ ,_cffdg :=range _defc (_gegba ){_ga .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_cffdg ,_gegba [_cffdg ]);
};};_gffe :=_dbdd (len (_gcge ),func (_gadag ,_ffgbd int )bool {_cgbb ,_dcgg :=len (_gegba [_gadag ]),len (_gegba [_ffgbd ]);if _cgbb !=_dcgg {return _cgbb > _dcgg ;};return _gcge .comp (_gadag ,_ffgbd );});if _efgc {_fb .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u006f\u0072d\u0065\u0072\u0069\u006eg=\u0025\u0076",_gffe );
};_ecbga :=[][]int {{_gffe [0]}};_ecde :for _ ,_cgca :=range _gffe [1:]{for _bbagb ,_dgfae :=range _ecbga {for _ ,_edfdc :=range _dgfae {if _gegba [_edfdc ].has (_cgca ){_ecbga [_bbagb ]=append (_dgfae ,_cgca );continue _ecde ;};};};_ecbga =append (_ecbga ,[]int {_cgca });
};if _efgc {_fb .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020i\u0067\u0072i\u0064\u0073\u003d\u0025\u0076",_ecbga );};_a .SliceStable (_ecbga ,func (_aded ,_baddg int )bool {return len (_ecbga [_aded ])> len (_ecbga [_baddg ])});for _ ,_adba :=range _ecbga {_a .Slice (_adba ,func (_fabcf ,_dacgb int )bool {return _gcge .comp (_adba [_fabcf ],_adba [_dacgb ])});
};_cfdcf :=make ([]rulingList ,len (_ecbga ));for _addgd ,_dcaf :=range _ecbga {_gbacd :=make (rulingList ,len (_dcaf ));for _bdgbe ,_gaga :=range _dcaf {_gbacd [_bdgbe ]=_gcge [_gaga ];};_cfdcf [_addgd ]=_gbacd ;};if _efgc {_fb .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020g\u0072\u0069d\u0073\u003d\u0025\u002b\u0076",_cfdcf );
};var _cbgde []rulingList ;for _ ,_fgcbe :=range _cfdcf {if _cfea ,_cabc :=_fgcbe .isActualGrid ();_cabc {_fgcbe =_cfea ;_fgcbe =_fgcbe .snapToGroups ();_cbgde =append (_cbgde ,_fgcbe );};};if _efgc {_bcabb ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0061\u0063t\u0075\u0061\u006c\u0047ri\u0064\u0073",_cbgde );
_fb .Log .Info ("\u0074\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0067\u0072\u0069\u0064\u0073\u003d%\u0064 \u0061\u0063\u0074\u0075\u0061\u006c\u0047\u0072\u0069\u0064\u0073\u003d\u0025\u0064",len (_cfdcf ),len (_cbgde ));};return _cbgde ;};func _eda (_dgge *TextMarkArray )[]*TextMarkArray {_afa :=_dgge .Elements ();
_dag :=len (_afa );var _ede _e .PdfObject ;_bfg :=[]*TextMarkArray {};_fdfb :=&TextMarkArray {};_dbe :=-1;for _ded ,_aaad :=range _afa {_eed :=_aaad .DirectObject ;_dbe =_aaad .Index ;if _eed ==nil {_abag :=_cbg (_dgge ,_ded );if _ede !=nil {if _abag ==-1||_abag > _ded {_bfg =append (_bfg ,_fdfb );
_fdfb =&TextMarkArray {};};};}else if _ede ==nil {if _dbe ==0&&_ded > 0{_bfg =append (_bfg ,_fdfb );_fdfb =&TextMarkArray {};};}else {if _eed !=_ede {_bfg =append (_bfg ,_fdfb );_fdfb =&TextMarkArray {};};};_ede =_eed ;_fdfb .Append (_aaad );if _ded ==(_dag -1){_bfg =append (_bfg ,_fdfb );
};};return _bfg ;};func (_aega *textTable )log (_egecb string ){if !_feed {return ;};_fb .Log .Info ("~\u007e\u007e\u0020\u0025\u0073\u003a \u0025\u0064\u0020\u0078\u0020\u0025d\u0020\u0067\u0072\u0069\u0064\u003d\u0025t\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0025\u0036\u002e2\u0066",_egecb ,_aega ._dgbf ,_aega ._gfdgb ,_aega ._dabaf ,_aega .PdfRectangle );
for _fafe :=0;_fafe < _aega ._gfdgb ;_fafe ++{for _bfdfd :=0;_bfdfd < _aega ._dgbf ;_bfdfd ++{_gabd :=_aega .get (_bfdfd ,_fafe );if _gabd ==nil {continue ;};_ga .Printf ("%\u0034\u0064\u0020\u00252d\u003a \u0025\u0036\u002e\u0032\u0066 \u0025\u0071\u0020\u0025\u0064\u000a",_bfdfd ,_fafe ,_gabd .PdfRectangle ,_adbcg (_gabd .text (),50),_g .RuneCountInString (_gabd .text ()));
};};};func (_dab *stateStack )push (_afbg *textState ){_bfce :=*_afbg ;*_dab =append (*_dab ,&_bfce )};

// ExtractTextWithStats works like ExtractText but returns the number of characters in the output
// (`numChars`) and the number of characters that were not decoded (`numMisses`).
func (_agcf *Extractor )ExtractTextWithStats ()(_efg string ,_fafc int ,_agdc int ,_caed error ){_afeca ,_fafc ,_agdc ,_caed :=_agcf .ExtractPageText ();if _caed !=nil {return "",_fafc ,_agdc ,_caed ;};return _afeca .Text (),_fafc ,_agdc ,nil ;};func (_ggdagg *textTable )depth ()float64 {_daffc :=1e10;
for _aeeb :=0;_aeeb < _ggdagg ._dgbf ;_aeeb ++{_cggbf :=_ggdagg .get (_aeeb ,0);if _cggbf ==nil ||_cggbf ._fcgc {continue ;};_daffc =_bff .Min (_daffc ,_cggbf .depth ());};return _daffc ;};func (_ebbe *wordBag )applyRemovals (_bgbe map[int ]map[*textWord ]struct{}){for _facb ,_ebf :=range _bgbe {if len (_ebf )==0{continue ;
};_cedb :=_ebbe ._bdde [_facb ];_bdfc :=len (_cedb )-len (_ebf );if _bdfc ==0{delete (_ebbe ._bdde ,_facb );continue ;};_gaca :=make ([]*textWord ,_bdfc );_cgdad :=0;for _ ,_bgcc :=range _cedb {if _ ,_caad :=_ebf [_bgcc ];!_caad {_gaca [_cgdad ]=_bgcc ;
_cgdad ++;};};_ebbe ._bdde [_facb ]=_gaca ;};};func (_ggeb *textTable )getDown ()paraList {_cbae :=make (paraList ,_ggeb ._dgbf );for _ebfef :=0;_ebfef < _ggeb ._dgbf ;_ebfef ++{_cdcfd :=_ggeb .get (_ebfef ,_ggeb ._gfdgb -1)._ddgea ;if _cdcfd .taken (){return nil ;
};_cbae [_ebfef ]=_cdcfd ;};for _cfagc :=0;_cfagc < _ggeb ._dgbf -1;_cfagc ++{if _cbae [_cfagc ]._becf !=_cbae [_cfagc +1]{return nil ;};};return _cbae ;};func (_gbag *wordBag )makeRemovals ()map[int ]map[*textWord ]struct{}{_aaee :=make (map[int ]map[*textWord ]struct{},len (_gbag ._bdde ));
for _cbda :=range _gbag ._bdde {_aaee [_cbda ]=make (map[*textWord ]struct{});};return _aaee ;};func (_bcgag *TextMarkArray )exists (_bgaa TextMark )bool {for _ ,_faaag :=range _bcgag .Elements (){if _c .DeepEqual (_bgaa .DirectObject ,_faaag .DirectObject )&&_c .DeepEqual (_bgaa .BBox ,_faaag .BBox )&&_faaag .Text ==_bgaa .Text {return true ;
};};return false ;};func (_cde *imageExtractContext )extractInlineImage (_aaa *_ad .ContentStreamInlineImage ,_feg _ad .GraphicsState ,_acab *_dc .PdfPageResources )error {_gcf ,_bcc :=_aaa .ToImage (_acab );if _bcc !=nil {return _bcc ;};_aadc ,_bcc :=_aaa .GetColorSpace (_acab );
if _bcc !=nil {return _bcc ;};if _aadc ==nil {_aadc =_dc .NewPdfColorspaceDeviceGray ();};_ged ,_bcc :=_aadc .ImageToRGB (*_gcf );if _bcc !=nil {return _bcc ;};_ggac :=ImageMark {Image :&_ged ,Width :_feg .CTM .ScalingFactorX (),Height :_feg .CTM .ScalingFactorY (),Angle :_feg .CTM .Angle ()};
_ggac .X ,_ggac .Y =_feg .CTM .Translation ();_cde ._ebb =append (_cde ._ebb ,_ggac );_cde ._cac ++;return nil ;};func _abfgb (_dbfa ,_cgea float64 )bool {return _bff .Abs (_dbfa -_cgea )<=_cggac };func _egfde (_agag ,_egaa int )uint64 {return uint64 (_agag )*0x1000000+uint64 (_egaa )};
func _gdeg (_cfab _dc .PdfRectangle )textState {return textState {_cggfd :100,_gdg :RenderModeFill ,_cacf :_cfab };};func _dcccd (_fgcbf []*textLine ,_dcbg string ,_ggcd []*list )*list {return &list {_gdaa :_fgcbf ,_ggdb :_dcbg ,_dadg :_ggcd };};func _dbdd (_abcec int ,_gadaa func (int ,int )bool )[]int {_bgba :=make ([]int ,_abcec );
for _eaae :=range _bgba {_bgba [_eaae ]=_eaae ;};_a .Slice (_bgba ,func (_gddbf ,_dacd int )bool {return _gadaa (_bgba [_gddbf ],_bgba [_dacd ])});return _bgba ;};func (_cggb *TextMarkArray )getTextMarkAtOffset (_bgea int )*TextMark {for _ ,_fef :=range _cggb ._dadfg {if _fef .Offset ==_bgea {return &_fef ;
};};return nil ;};func (_gfad *wordBag )getDepthIdx (_geg float64 )int {_bfeb :=_gfad .depthIndexes ();_edaac :=_acea (_geg );if _edaac < _bfeb [0]{return _bfeb [0];};if _edaac > _bfeb [len (_bfeb )-1]{return _bfeb [len (_bfeb )-1];};return _edaac ;};

// ImageExtractOptions contains options for controlling image extraction from
// PDF pages.
type ImageExtractOptions struct{IncludeInlineStencilMasks bool ;};

// ExtractPageText returns the text contents of `e` (an Extractor for a page) as a PageText.
// TODO(peterwilliams97): The stats complicate this function signature and aren't very useful.
//
//	Replace with a function like Extract() (*PageText, error)
func (_fdag *Extractor )ExtractPageText ()(*PageText ,int ,int ,error ){_abdf ,_fgf ,_dda ,_fcbf :=_fdag .extractPageText (_fdag ._fdf ,_fdag ._cfb ,_ge .IdentityMatrix (),0,false );if _fcbf !=nil &&_fcbf !=_dc .ErrColorOutOfRange {return nil ,0,0,_fcbf ;
};if _fdag ._dfg !=nil {_abdf ._fgga ._cgda =_fdag ._dfg .ExtractionMode ;_abdf ._fgga ._edff =_fdag ._dfg .DisableDocumentTags ;_abdf ._fgga ._dacb =_fdag ._dfg .DisableDehyphenation ;};_abdf .computeViews ();_fcbf =_dfaaf (_abdf );if _fcbf !=nil {return nil ,0,0,_fcbf ;
};if _fdag ._dfg !=nil {if _fdag ._dfg .ApplyCropBox &&_fdag ._dga !=nil {_abdf .ApplyArea (*_fdag ._dga );};};return _abdf ,_fgf ,_dda ,nil ;};func (_fgbe *shapesState )cubicTo (_gecfg ,_fdad ,_ffbg ,_aeec ,_ebeg ,_dagb float64 ){if _aaaef {_fb .Log .Info ("\u0063\u0075\u0062\u0069\u0063\u0054\u006f\u003a");
};_fgbe .addPoint (_ebeg ,_dagb );};func (_gdcg *textPara )fontsize ()float64 {return _gdcg ._bdea [0]._cggfe };