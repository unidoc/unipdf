//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

//
// Package extractor is used for quickly extracting PDF content through a simple interface.
// Currently offers functionality for extracting textual content.
//
package extractor ;import (_cde "bytes";_e "errors";_cc "fmt";_ce "github.com/unidoc/unipdf/v3/common";_g "github.com/unidoc/unipdf/v3/contentstream";_ff "github.com/unidoc/unipdf/v3/core";_ad "github.com/unidoc/unipdf/v3/internal/license";_ec "github.com/unidoc/unipdf/v3/internal/textencoding";
_aa "github.com/unidoc/unipdf/v3/internal/transform";_ea "github.com/unidoc/unipdf/v3/model";_a "golang.org/x/image/draw";_cb "golang.org/x/text/unicode/norm";_bf "golang.org/x/xerrors";_ed "image";_be "image/color";_d "io";_dg "math";_ef "reflect";_cd "regexp";
_f "sort";_dbe "strings";_b "unicode";_db "unicode/utf8";);func _dgdb (_acgd *textLine )float64 {return _acgd ._aeeb [0].Llx };

// Text returns the extracted page text.
func (_bfb PageText )Text ()string {return _bfb ._dce };func _bgcbd (_dfgc _ea .PdfRectangle ,_bcgd []*textLine )*textPara {return &textPara {PdfRectangle :_dfgc ,_efde :_bcgd };};type textState struct{_fbbf float64 ;_cffe float64 ;_egf float64 ;_ccc float64 ;
_dfg float64 ;_efgd RenderMode ;_gcc float64 ;_bbbb *_ea .PdfFont ;_fee _ea .PdfRectangle ;_ggdgd int ;_bgb int ;};func (_egae *textTable )compositeColCorridors ()map[int ][]float64 {_gbegdd :=make (map[int ][]float64 ,_egae ._fdaegd );if _gfde {_ce .Log .Info ("\u0063\u006f\u006d\u0070o\u0073\u0069\u0074\u0065\u0043\u006f\u006c\u0043\u006f\u0072r\u0069d\u006f\u0072\u0073\u003a\u0020\u0077\u003d%\u0064\u0020",_egae ._fdaegd );
};for _gede :=0;_gede < _egae ._fdaegd ;_gede ++{_gbegdd [_gede ]=nil ;};return _gbegdd ;};const (_cfbaa =true ;_ccfga =true ;_abaf =true ;_agaf =false ;_caea =false ;_aaeb =6;_fgga =3.0;_aecd =200;_egdf =true ;_dea =true ;_fcb =true ;_bgge =true ;_cgef =false ;
);func (_edb *shapesState )lineTo (_gdag ,_cgbc float64 ){if _ageb {_ce .Log .Info ("\u006c\u0069\u006eeT\u006f\u0028\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0070\u003d\u0025\u002e\u0032\u0066",_gdag ,_cgbc ,_edb .devicePoint (_gdag ,_cgbc ));
};_edb .addPoint (_gdag ,_cgbc );};func _gdga (_fdba _ff .PdfObject ,_dfaab _be .Color )(_ed .Image ,error ){_fbff ,_fegbg :=_ff .GetStream (_fdba );if !_fegbg {return nil ,nil ;};_fbad ,_fefg :=_ea .NewXObjectImageFromStream (_fbff );if _fefg !=nil {return nil ,_fefg ;
};_cbfge ,_fefg :=_fbad .ToImage ();if _fefg !=nil {return nil ,_fefg ;};return _edbab (_cbfge ,_dfaab ),nil ;};func (_bdf *shapesState )devicePoint (_dgaf ,_ceda float64 )_aa .Point {_bdca :=_bdf ._gfae .Mult (_bdf ._gae );_dgaf ,_ceda =_bdca .Transform (_dgaf ,_ceda );
return _aa .NewPoint (_dgaf ,_ceda );};func (_gbgc *wordBag )makeRemovals ()map[int ]map[*textWord ]struct{}{_cbge :=make (map[int ]map[*textWord ]struct{},len (_gbgc ._edfa ));for _dfcg :=range _gbgc ._edfa {_cbge [_dfcg ]=make (map[*textWord ]struct{});
};return _cbge ;};func (_dfbe *shapesState )addPoint (_gadf ,_cdgfgb float64 ){_baba :=_dfbe .establishSubpath ();_bcfd :=_dfbe .devicePoint (_gadf ,_cdgfgb );if _baba ==nil {_dfbe ._ddgb =true ;_dfbe ._cgac =_bcfd ;}else {_baba .add (_bcfd );};};

// TextTable represents a table.
// Cells are ordered top-to-bottom, left-to-right.
// Cells[y] is the (0-offset) y'th row in the table.
// Cells[y][x] is the (0-offset) x'th column in the table.
type TextTable struct{_ea .PdfRectangle ;W ,H int ;Cells [][]TableCell ;};func (_cgbb *textObject )moveText (_fgf ,_fabd float64 ){_cgbb .moveLP (_fgf ,_fabd )};

// String returns a description of `l`.
func (_aed *textLine )String ()string {return _cc .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_aed ._bacaf ,_aed .PdfRectangle ,_aed ._aeff ,_aed .text ());
};func _cfbg (_daac []TextMark ,_cabe *int ,_bbbbd string )[]TextMark {_ggda :=_becb ;_ggda .Text =_bbbbd ;return _faec (_daac ,_cabe ,_ggda );};func (_acfe lineRuling )yMean ()float64 {return 0.5*(_acfe ._fcff .Y +_acfe ._bgag .Y )};func (_bfe *subpath )clear (){*_bfe =subpath {}};


// Elements returns the TextMarks in `ma`.
func (_ceab *TextMarkArray )Elements ()[]TextMark {return _ceab ._ddgg };func (_eafb *wordBag )blocked (_bafe *textWord )bool {if _bafe .Urx < _eafb .Llx {_gaf :=_feag (_bafe .PdfRectangle );_caab :=_eaab (_eafb .PdfRectangle );if _eafb ._agac .blocks (_gaf ,_caab ){if _ffcd {_ce .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0078\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_bafe ,_eafb );
};return true ;};}else if _eafb .Urx < _bafe .Llx {_gbfc :=_feag (_eafb .PdfRectangle );_ccfe :=_eaab (_bafe .PdfRectangle );if _eafb ._agac .blocks (_gbfc ,_ccfe ){if _ffcd {_ce .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0078\u2192\u0020:\u0020\u0025\u0073\u0020%s",_bafe ,_eafb );
};return true ;};};if _bafe .Ury < _eafb .Lly {_dfe :=_fbeg (_bafe .PdfRectangle );_bdec :=_fgeg (_eafb .PdfRectangle );if _eafb ._dfbf .blocks (_dfe ,_bdec ){if _ffcd {_ce .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0079\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_bafe ,_eafb );
};return true ;};}else if _eafb .Ury < _bafe .Lly {_dabf :=_fbeg (_eafb .PdfRectangle );_gbec :=_fgeg (_bafe .PdfRectangle );if _eafb ._dfbf .blocks (_dabf ,_gbec ){if _ffcd {_ce .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0079\u2192\u0020:\u0020\u0025\u0073\u0020%s",_bafe ,_eafb );
};return true ;};};return false ;};func (_ffeba *ruling )alignsPrimary (_abccc *ruling )bool {return _ffeba ._deecb ==_abccc ._deecb &&_dg .Abs (_ffeba ._bbdbe -_abccc ._bbdbe )< _fbge *0.5;};func _ecdb (_fgfd ,_dfae _ea .PdfRectangle )bool {return _dfae .Llx <=_fgfd .Urx &&_fgfd .Llx <=_dfae .Urx ;
};func (_gfea *textWord )addDiacritic (_bebac string ){_eaffg :=_gfea ._fcac [len (_gfea ._fcac )-1];_eaffg ._face +=_bebac ;_eaffg ._face =_cb .NFKC .String (_eaffg ._face );};func (_ddcfc *textTable )put (_adcac ,_bfgbg int ,_aeccd *textPara ){_ddcfc ._bfeg [_cbaga (_adcac ,_bfgbg )]=_aeccd ;
};func (_egebdd pathSection )bbox ()_ea .PdfRectangle {_cebbe :=_egebdd ._aggc [0]._fbca [0];_dfbg :=_ea .PdfRectangle {Llx :_cebbe .X ,Urx :_cebbe .X ,Lly :_cebbe .Y ,Ury :_cebbe .Y };_ddf :=func (_gcee _aa .Point ){if _gcee .X < _dfbg .Llx {_dfbg .Llx =_gcee .X ;
}else if _gcee .X > _dfbg .Urx {_dfbg .Urx =_gcee .X ;};if _gcee .Y < _dfbg .Lly {_dfbg .Lly =_gcee .Y ;}else if _gcee .Y > _dfbg .Ury {_dfbg .Ury =_gcee .Y ;};};for _ ,_gddg :=range _egebdd ._aggc [0]._fbca [1:]{_ddf (_gddg );};for _ ,_dfdg :=range _egebdd ._aggc [1:]{for _ ,_dgae :=range _dfdg ._fbca {_ddf (_dgae );
};};return _dfbg ;};type textTable struct{_ea .PdfRectangle ;_fdaegd ,_bgdf int ;_cadg bool ;_bfeg map[uint64 ]*textPara ;_ebddd map[uint64 ]compositeCell ;};type lineRuling struct{_cfaab rulingKind ;_bedbd markKind ;_be .Color ;_fcff ,_bgag _aa .Point ;
};var (_cdfb =map[rune ]string {0x0060:"\u0300",0x02CB:"\u0300",0x0027:"\u0301",0x00B4:"\u0301",0x02B9:"\u0301",0x02CA:"\u0301",0x005E:"\u0302",0x02C6:"\u0302",0x007E:"\u0303",0x02DC:"\u0303",0x00AF:"\u0304",0x02C9:"\u0304",0x02D8:"\u0306",0x02D9:"\u0307",0x00A8:"\u0308",0x00B0:"\u030a",0x02DA:"\u030a",0x02BA:"\u030b",0x02DD:"\u030b",0x02C7:"\u030c",0x02C8:"\u030d",0x0022:"\u030e",0x02BB:"\u0312",0x02BC:"\u0313",0x0486:"\u0313",0x055A:"\u0313",0x02BD:"\u0314",0x0485:"\u0314",0x0559:"\u0314",0x02D4:"\u031d",0x02D5:"\u031e",0x02D6:"\u031f",0x02D7:"\u0320",0x02B2:"\u0321",0x00B8:"\u0327",0x02CC:"\u0329",0x02B7:"\u032b",0x02CD:"\u0331",0x005F:"\u0332",0x204E:"\u0359"};
);func (_ffca *textObject )moveTextSetLeading (_ggaa ,_abb float64 ){_ffca ._aeg ._ccc =-_abb ;_ffca .moveLP (_ggaa ,_abb );};func _fdag (_fbbb []Font ,_bbc string )bool {for _ ,_becg :=range _fbbb {if _becg .FontName ==_bbc {return true ;};};return false ;
};

// TextMarkArray is a collection of TextMarks.
type TextMarkArray struct{_ddgg []TextMark };type textResult struct{_gbd PageText ;_ebc int ;_bbba int ;};func (_ebce compositeCell )parasBBox ()(paraList ,_ea .PdfRectangle ){return _ebce .paraList ,_ebce .PdfRectangle ;};func (_cffg rulingList )findPrimSec (_cccd ,_efgf float64 )*ruling {for _ ,_edefc :=range _cffg {if _geef (_edefc ._bbdbe -_cccd )&&_edefc ._caafe -_deab <=_efgf &&_efgf <=_edefc ._feeg +_deab {return _edefc ;
};};return nil ;};func (_bbgf paraList )list ()[]*list {var _fefaa []*textLine ;var _bgbf []*textLine ;for _ ,_fbfc :=range _bbgf {_agea :=_fbfc .getListLines ();_fefaa =append (_fefaa ,_agea ...);_bgbf =append (_bgbf ,_fbfc ._efde ...);};_gaagb :=_gbga (_fefaa );
_gdae :=_adbfe (_bgbf ,_gaagb );return _gdae ;};func _fgeg (_edgc _ea .PdfRectangle )*ruling {return &ruling {_deecb :_dbdde ,_bbdbe :_edgc .Lly ,_caafe :_edgc .Llx ,_feeg :_edgc .Urx };};func (_gcbfb paraList )topoOrder ()[]int {if _adag {_ce .Log .Info ("\u0074\u006f\u0070\u006f\u004f\u0072\u0064\u0065\u0072\u003a");
};_egggf :=len (_gcbfb );_bede :=make ([]bool ,_egggf );_aeceb :=make ([]int ,0,_egggf );_beff :=_gcbfb .llyOrdering ();var _fdcd func (_gfcae int );_fdcd =func (_ebba int ){_bede [_ebba ]=true ;for _baac :=0;_baac < _egggf ;_baac ++{if !_bede [_baac ]{if _gcbfb .readBefore (_beff ,_ebba ,_baac ){_fdcd (_baac );
};};};_aeceb =append (_aeceb ,_ebba );};for _ebaad :=0;_ebaad < _egggf ;_ebaad ++{if !_bede [_ebaad ]{_fdcd (_ebaad );};};return _begfc (_aeceb );};const (_gfcfc =false ;_egeba =false ;_geaa =false ;_daff =false ;_ageb =false ;_eaaca =false ;_ebef =false ;
_adag =false ;_ebd =false ;_eaca =_ebd &&true ;_bcdd =_eaca &&false ;_dabd =_ebd &&true ;_gfde =false ;_aegc =_gfde &&false ;_fgcd =_gfde &&true ;_fdee =false ;_agdc =_fdee &&false ;_dbcg =_fdee &&false ;_gafd =_fdee &&true ;_edaa =_fdee &&false ;_ffcd =_fdee &&false ;
);func (_gfaa paraList )lines ()[]*textLine {var _ggecg []*textLine ;for _ ,_abeda :=range _gfaa {_ggecg =append (_ggecg ,_abeda ._efde ...);};return _ggecg ;};func _aaca (_dffc ,_ccfg _ea .PdfRectangle )bool {return _ecdb (_dffc ,_ccfg )&&_bece (_dffc ,_ccfg )};
func (_fdfa gridTiling )log (_bcada string ){if !_gafd {return ;};_ce .Log .Info ("\u0074i\u006ci\u006e\u0067\u003a\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0071",len (_fdfa ._fdbf ),len (_fdfa ._eebc ),_bcada );_cc .Printf ("\u0020\u0020\u0020l\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a",_fdfa ._fdbf );
_cc .Printf ("\u0020\u0020\u0020l\u006c\u0079\u003d\u0025\u002e\u0032\u0066\u000a",_fdfa ._eebc );for _accbg ,_ccge :=range _fdfa ._eebc {_baef ,_affb :=_fdfa ._bgdd [_ccge ];if !_affb {continue ;};_cc .Printf ("%\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_accbg ,_ccge );
for _ccagc ,_eebg :=range _fdfa ._fdbf {_adcae ,_adab :=_baef [_eebg ];if !_adab {continue ;};_cc .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_ccagc ,_adcae .String ());};};};func _faed (_baee float64 )bool {return _dg .Abs (_baee )< _fbge };
func (_eafg *textLine )endsInHyphen ()bool {_dede :=_eafg ._aeeb [len (_eafg ._aeeb )-1];_bedb :=_dede ._baea ;_bfcfd ,_fage :=_db .DecodeLastRuneInString (_bedb );if _fage <=0||!_b .Is (_b .Hyphen ,_bfcfd ){return false ;};if _dede ._aegfg &&_dead (_bedb ){return true ;
};return _dead (_eafg .text ());};const (_cbd ="\u0045\u0052R\u004f\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u002c\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";
_cebc ="\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0043a\u006e\u0027\u0074 g\u0065\u0074\u0020\u0066\u006f\u006et\u0020\u0070\u0072\u006f\u0070\u0065\u0072\u0074\u0069\u0065\u0073\u002c\u0020\u0066\u006fn\u0074\u0020\u006e\u006f\u0074\u0020\u0066\u006fu\u006e\u0064";
_fe ="\u0045\u0052\u0052O\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0067\u0065\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0074\u0072\u0065\u0061\u006d\u002c\u0020\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";);
type gridTiling struct{_ea .PdfRectangle ;_fdbf []float64 ;_eebc []float64 ;_bgdd map[float64 ]map[float64 ]gridTile ;};type cachedImage struct{_adb *_ea .Image ;_dae _ea .PdfColorspace ;};

// PageText represents the layout of text on a device page.
type PageText struct{_cacb []*textMark ;_dce string ;_aba []TextMark ;_fdf []TextTable ;_gag _ea .PdfRectangle ;_agab []pathSection ;_bfcf []pathSection ;_cda *_ff .PdfObject ;_gdc _ff .PdfObject ;_dggd *_g .ContentStreamOperations ;_feda PageTextOptions ;
};func (_abgfd rulingList )tidied (_gbgdf string )rulingList {_gefg :=_abgfd .removeDuplicates ();_gefg .log ("\u0075n\u0069\u0071\u0075\u0065\u0073");_fcbb :=_gefg .snapToGroups ();if _fcbb ==nil {return nil ;};_fcbb .sort ();if _fdee {_ce .Log .Info ("\u0074\u0069\u0064i\u0065\u0064\u003a\u0020\u0025\u0071\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u0075\u006e\u0069\u0071\u0075\u0065\u0073\u003d\u0025\u0064\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0064\u003d\u0025\u0064",_gbgdf ,len (_abgfd ),len (_gefg ),len (_fcbb ));
};_fcbb .log ("\u0063o\u0061\u006c\u0065\u0073\u0063\u0065d");return _fcbb ;};func (_ffcbg *textMark )bbox ()_ea .PdfRectangle {return _ffcbg .PdfRectangle };func (_gfbe lineRuling )xMean ()float64 {return 0.5*(_gfbe ._fcff .X +_gfbe ._bgag .X )};func (_acbfg paraList )findGridTables (_egfeg []gridTiling )[]*textTable {if _gfde {_ce .Log .Info ("\u0066i\u006e\u0064\u0047\u0072\u0069\u0064\u0054\u0061\u0062\u006c\u0065s\u003a\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073",len (_acbfg ));
for _fdfcf ,_ddad :=range _acbfg {_cc .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fdfcf ,_ddad );};};var _defa []*textTable ;for _eaafc ,_eaeef :=range _egfeg {_feeb ,_dddce :=_acbfg .findTableGrid (_eaeef );if _feeb !=nil {_feeb .log (_cc .Sprintf ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0057\u0069\u0074\u0068\u0047\u0072\u0069\u0064\u0073\u003a\u0020%\u0064",_eaafc ));
_defa =append (_defa ,_feeb );_feeb .markCells ();};for _cabge :=range _dddce {_cabge ._agdga =true ;};};if _gfde {_ce .Log .Info ("\u0066i\u006e\u0064\u0047\u0072i\u0064\u0054\u0061\u0062\u006ce\u0073:\u0020%\u0064\u0020\u0074\u0061\u0062\u006c\u0065s",len (_defa ));
};return _defa ;};func (_cfffc paraList )sortReadingOrder (){_ce .Log .Trace ("\u0073\u006fr\u0074\u0052\u0065\u0061\u0064i\u006e\u0067\u004f\u0072\u0064e\u0072\u003a\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_cfffc ));
if len (_cfffc )<=1{return ;};_cfffc .computeEBBoxes ();_f .Slice (_cfffc ,func (_cgafa ,_ccfgf int )bool {return _acfc (_cfffc [_cgafa ],_cfffc [_ccfgf ])<=0});};func (_gdge *textObject )setTextMatrix (_bfg []float64 ){if len (_bfg )!=6{_ce .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u006c\u0065\u006e\u0028\u0066\u0029\u0020\u0021\u003d\u0020\u0036\u0020\u0028\u0025\u0064\u0029",len (_bfg ));
return ;};_adfg ,_cceg ,_abff ,_cfe ,_fgba ,_cfba :=_bfg [0],_bfg [1],_bfg [2],_bfg [3],_bfg [4],_bfg [5];_gdge ._eafe =_aa .NewMatrix (_adfg ,_cceg ,_abff ,_cfe ,_fgba ,_cfba );_gdge ._gcdg =_gdge ._eafe ;};func (_ffad gridTile )numBorders ()int {_dgfe :=0;
if _ffad ._edaac {_dgfe ++;};if _ffad ._aefc {_dgfe ++;};if _ffad ._dfgg {_dgfe ++;};if _ffad ._cgab {_dgfe ++;};return _dgfe ;};func (_debcf *wordBag )depthIndexes ()[]int {if len (_debcf ._edfa )==0{return nil ;};_aefd :=make ([]int ,len (_debcf ._edfa ));
_cbde :=0;for _cfgb :=range _debcf ._edfa {_aefd [_cbde ]=_cfgb ;_cbde ++;};_f .Ints (_aefd );return _aefd ;};

// String returns a human readable description of `path`.
func (_dggde *subpath )String ()string {_beee :=_dggde ._fbca ;_bfdd :=len (_beee );if _bfdd <=5{return _cc .Sprintf ("\u0025d\u003a\u0020\u0025\u0036\u002e\u0032f",_bfdd ,_beee );};return _cc .Sprintf ("\u0025d\u003a\u0020\u0025\u0036.\u0032\u0066\u0020\u0025\u0036.\u0032f\u0020.\u002e\u002e\u0020\u0025\u0036\u002e\u0032f",_bfdd ,_beee [0],_beee [1],_beee [_bfdd -1]);
};func (_ebbe rulingList )merge ()*ruling {_gaee :=_ebbe [0]._bbdbe ;_ffcfd :=_ebbe [0]._caafe ;_bebea :=_ebbe [0]._feeg ;for _ ,_abgfa :=range _ebbe [1:]{_gaee +=_abgfa ._bbdbe ;if _abgfa ._caafe < _ffcfd {_ffcfd =_abgfa ._caafe ;};if _abgfa ._feeg > _bebea {_bebea =_abgfa ._feeg ;
};};_efbg :=&ruling {_deecb :_ebbe [0]._deecb ,_geed :_ebbe [0]._geed ,Color :_ebbe [0].Color ,_bbdbe :_gaee /float64 (len (_ebbe )),_caafe :_ffcfd ,_feeg :_bebea };if _dbcg {_ce .Log .Info ("\u006de\u0072g\u0065\u003a\u0020\u0025\u0032d\u0020\u0076e\u0063\u0073\u0020\u0025\u0073",len (_ebbe ),_efbg );
for _adebe ,_fbag :=range _ebbe {_cc .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_adebe ,_fbag );};};return _efbg ;};type lists []*list ;func _bbaf (_dded string )string {_abfda :=[]rune (_dded );return string (_abfda [:len (_abfda )-1])};


// String returns a description of `state`.
func (_afd *textState )String ()string {_fedg :="\u005bN\u004f\u0054\u0020\u0053\u0045\u0054]";if _afd ._bbbb !=nil {_fedg =_afd ._bbbb .BaseFont ();};return _cc .Sprintf ("\u0074\u0063\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0077\u003d\u0025\u002e\u0032\u0066 \u0074f\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u003d\u0025\u0071",_afd ._fbbf ,_afd ._cffe ,_afd ._dfg ,_fedg );
};func (_cgagd *wordBag )allWords ()[]*textWord {var _ggcf []*textWord ;for _ ,_eccg :=range _cgagd ._edfa {_ggcf =append (_ggcf ,_eccg ...);};return _ggcf ;};func (_ecfg *textPara )taken ()bool {return _ecfg ==nil ||_ecfg ._agdga };func (_bgeea paraList )merge ()*textPara {_ce .Log .Trace ("\u006d\u0065\u0072\u0067\u0065:\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_bgeea ));
if len (_bgeea )==0{return nil ;};_bgeea .sortReadingOrder ();_aefe :=_bgeea [0].PdfRectangle ;_decf :=_bgeea [0]._efde ;for _ ,_bfcg :=range _bgeea [1:]{_aefe =_aaafc (_aefe ,_bfcg .PdfRectangle );_decf =append (_decf ,_bfcg ._efde ...);};return _bgcbd (_aefe ,_decf );
};func _edee (_fedgc map[float64 ]map[float64 ]gridTile )[]float64 {_edeb :=make ([]float64 ,0,len (_fedgc ));_cfabe :=make (map[float64 ]struct{},len (_fedgc ));for _ ,_edefa :=range _fedgc {for _dbbc :=range _edefa {if _ ,_dfbdd :=_cfabe [_dbbc ];_dfbdd {continue ;
};_edeb =append (_edeb ,_dbbc );_cfabe [_dbbc ]=struct{}{};};};_f .Float64s (_edeb );return _edeb ;};func (_dedg paraList )reorder (_bgcb []int ){_aagf :=make (paraList ,len (_dedg ));for _gcef ,_gdgef :=range _bgcb {_aagf [_gcef ]=_dedg [_gdgef ];};copy (_dedg ,_aagf );
};

// PageImages represents extracted images on a PDF page with spatial information:
// display position and size.
type PageImages struct{Images []ImageMark ;};func (_bfbb *wordBag )removeWord (_feca *textWord ,_ggbg int ){_gebc :=_bfbb ._edfa [_ggbg ];_gebc =_agada (_gebc ,_feca );if len (_gebc )==0{delete (_bfbb ._edfa ,_ggbg );}else {_bfbb ._edfa [_ggbg ]=_gebc ;
};};func _cdcb (_caaf *list ,_cdd *_dbe .Builder ,_fafc *string ){_gead :=_eabga (_caaf ,_fafc );_cdd .WriteString (_gead );for _ ,_dbdf :=range _caaf ._daffa {_bcg :=*_fafc +"\u0020\u0020\u0020";_cdcb (_dbdf ,_cdd ,&_bcg );};};func _ecdg (_cfdb ,_gbag _ea .PdfRectangle )bool {return _cfdb .Llx <=_gbag .Llx &&_gbag .Urx <=_cfdb .Urx &&_cfdb .Lly <=_gbag .Lly &&_gbag .Ury <=_cfdb .Ury ;
};func _gbab (_gcbe []structElement ,_cbfc map[int ][]*textLine ,_efae _ff .PdfObject )[]*list {_efffb :=[]*list {};for _ ,_cabd :=range _gcbe {_dbdd :=_cabd ._bdfb ;_ccefc :=int (_cabd ._bcee );_gagd :=_cabd ._gabd ;_cecc :=[]*textLine {};_feab :=[]*list {};
_dgca :=_cabd ._bafed ;_fefa ,_fbdeg :=(_dgca .(*_ff .PdfObjectReference ));if !_fbdeg {_ce .Log .Debug ("\u0066\u0061\u0069l\u0065\u0064\u0020\u006f\u0074\u0020\u0063\u0061\u0073\u0074\u0020\u0074\u006f\u0020\u002a\u0063\u006f\u0072\u0065\u002e\u0050\u0064\u0066\u004f\u0062\u006a\u0065\u0063\u0074R\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");
};if _ccefc !=-1&&_fefa !=nil {if _acace ,_aage :=_cbfc [_ccefc ];_aage {if _cdfd ,_bfaf :=_efae .(*_ff .PdfIndirectObject );_bfaf {_daee :=_cdfd .PdfObjectReference ;if _ef .DeepEqual (*_fefa ,_daee ){_cecc =_acace ;};};};};if _dbdd !=nil {_feab =_gbab (_dbdd ,_cbfc ,_efae );
};_cedac :=_dfeec (_cecc ,_gagd ,_feab );_efffb =append (_efffb ,_cedac );};return _efffb ;};func (_bfdc *textTable )get (_eccgf ,_afdf int )*textPara {return _bfdc ._bfeg [_cbaga (_eccgf ,_afdf )]};func (_dcbef rulingList )primaries ()[]float64 {_ggadd :=make (map[float64 ]struct{},len (_dcbef ));
for _ ,_fgfa :=range _dcbef {_ggadd [_fgfa ._bbdbe ]=struct{}{};};_abgb :=make ([]float64 ,len (_ggadd ));_ggfeg :=0;for _eccbe :=range _ggadd {_abgb [_ggfeg ]=_eccbe ;_ggfeg ++;};_f .Float64s (_abgb );return _abgb ;};

// String returns a description of `v`.
func (_decbf *ruling )String ()string {if _decbf ._deecb ==_aaebd {return "\u004e\u004f\u0054\u0020\u0052\u0055\u004c\u0049\u004e\u0047";};_acfb ,_bgcf :="\u0078","\u0079";if _decbf ._deecb ==_dbdde {_acfb ,_bgcf ="\u0079","\u0078";};_aedc :="";if _decbf ._ggde !=0.0{_aedc =_cc .Sprintf (" \u0077\u0069\u0064\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_decbf ._ggde );
};return _cc .Sprintf ("\u0025\u00310\u0073\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0020\u0025\u0076\u0025\u0073",_decbf ._deecb ,_acfb ,_decbf ._bbdbe ,_bgcf ,_decbf ._caafe ,_decbf ._feeg ,_decbf ._feeg -_decbf ._caafe ,_decbf ._geed ,_decbf .Color ,_aedc );
};func (_deded paraList )readBefore (_aebef []int ,_ccce ,_fbae int )bool {_becea ,_afabb :=_deded [_ccce ],_deded [_fbae ];if _cdebb (_becea ,_afabb )&&_becea .Lly > _afabb .Lly {return true ;};if !(_becea ._edd .Urx < _afabb ._edd .Llx ){return false ;
};_cfaaa ,_bega :=_becea .Lly ,_afabb .Lly ;if _cfaaa > _bega {_bega ,_cfaaa =_cfaaa ,_bega ;};_aeag :=_dg .Max (_becea ._edd .Llx ,_afabb ._edd .Llx );_gdgeb :=_dg .Min (_becea ._edd .Urx ,_afabb ._edd .Urx );_faee :=_deded .llyRange (_aebef ,_cfaaa ,_bega );
for _ ,_bcgf :=range _faee {if _bcgf ==_ccce ||_bcgf ==_fbae {continue ;};_dagd :=_deded [_bcgf ];if _dagd ._edd .Llx <=_gdgeb &&_aeag <=_dagd ._edd .Urx {return false ;};};return true ;};func (_ggga *textWord )absorb (_cgdeb *textWord ){_ggga .PdfRectangle =_aaafc (_ggga .PdfRectangle ,_cgdeb .PdfRectangle );
_ggga ._fcac =append (_ggga ._fcac ,_cgdeb ._fcac ...);};func (_abg *stateStack )size ()int {return len (*_abg )};func (_daa *textObject )getCurrentFont ()*_ea .PdfFont {_dbga :=_daa ._aeg ._bbbb ;if _dbga ==nil {_ce .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020U\u0073\u0069\u006e\u0067\u0020d\u0065\u0066a\u0075\u006c\u0074\u002e");
return _ea .DefaultFont ();};return _dbga ;};func (_bege *wordBag )minDepth ()float64 {return _bege ._baag -(_bege .Ury -_bege ._cdfcc )};func _begf (_bgga *list )[]*textLine {for _ ,_aagge :=range _bgga ._daffa {switch _aagge ._aegd {case "\u004c\u0042\u006fd\u0079":if len (_aagge ._dcbb )!=0{return _aagge ._dcbb ;
};return _begf (_aagge );case "\u0053\u0070\u0061\u006e":return _aagge ._dcbb ;case "I\u006e\u006c\u0069\u006e\u0065\u0053\u0068\u0061\u0070\u0065":return _aagge ._dcbb ;};};return nil ;};func _debf (_abbeg _ea .PdfRectangle ,_dad ,_ecebg ,_dcfb ,_cfeb *ruling )gridTile {_cdga :=_abbeg .Llx ;
_ccgdca :=_abbeg .Urx ;_gcde :=_abbeg .Lly ;_cfeff :=_abbeg .Ury ;return gridTile {PdfRectangle :_abbeg ,_edaac :_dad !=nil &&_dad .encloses (_gcde ,_cfeff ),_aefc :_ecebg !=nil &&_ecebg .encloses (_gcde ,_cfeff ),_dfgg :_dcfb !=nil &&_dcfb .encloses (_cdga ,_ccgdca ),_cgab :_cfeb !=nil &&_cfeb .encloses (_cdga ,_ccgdca )};
};func (_ebaga *textTable )depth ()float64 {_fcfge :=1e10;for _deffc :=0;_deffc < _ebaga ._fdaegd ;_deffc ++{_gefc :=_ebaga .get (_deffc ,0);if _gefc ==nil ||_gefc ._adfda {continue ;};_fcfge =_dg .Min (_fcfge ,_gefc .depth ());};return _fcfge ;};func (_addc *TextMarkArray )getTextMarkAtOffset (_fabf int )*TextMark {for _ ,_dgbcc :=range _addc ._ddgg {if _dgbcc .Offset ==_fabf {return &_dgbcc ;
};};return nil ;};func (_bbggc *textPara )fontsize ()float64 {return _bbggc ._efde [0]._aeff };func (_fefcf *textObject )newTextMark (_cdba string ,_dfbfg _aa .Matrix ,_gbdf _aa .Point ,_egdb float64 ,_fbba *_ea .PdfFont ,_faddf float64 ,_efbe ,_ecgc _be .Color ,_ceddg _ff .PdfObject ,_dfab []string ,_ebfe int ,_efccg int )(textMark ,bool ){_adfb :=_dfbfg .Angle ();
_dfad :=_agdgb (_adfb ,_dgbg );var _bggbd float64 ;if _dfad %180!=90{_bggbd =_dfbfg .ScalingFactorY ();}else {_bggbd =_dfbfg .ScalingFactorX ();};_bbga :=_fefc (_dfbfg );_bbge :=_ea .PdfRectangle {Llx :_bbga .X ,Lly :_bbga .Y ,Urx :_gbdf .X ,Ury :_gbdf .Y };
switch _dfad %360{case 90:_bbge .Urx -=_bggbd ;case 180:_bbge .Ury -=_bggbd ;case 270:_bbge .Urx +=_bggbd ;case 0:_bbge .Ury +=_bggbd ;default:_dfad =0;_bbge .Ury +=_bggbd ;};if _bbge .Llx > _bbge .Urx {_bbge .Llx ,_bbge .Urx =_bbge .Urx ,_bbge .Llx ;};
if _bbge .Lly > _bbge .Ury {_bbge .Lly ,_bbge .Ury =_bbge .Ury ,_bbge .Lly ;};_ffbd :=true ;if _fefcf ._bddd ._aab .Width ()> 0{_aefdd ,_dceb :=_dgcc (_bbge ,_fefcf ._bddd ._aab );if !_dceb {_ffbd =false ;_ce .Log .Debug ("\u0054\u0065\u0078\u0074\u0020m\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069\u0064\u0065\u0020\u0070a\u0067\u0065\u002e\u0020\u0062\u0062\u006f\u0078\u003d\u0025\u0067\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u003d\u0025\u0067\u0020\u0074\u0065\u0078\u0074\u003d\u0025q",_bbge ,_fefcf ._bddd ._aab ,_cdba );
};_bbge =_aefdd ;};_egge :=_bbge ;_dcae :=_fefcf ._bddd ._aab ;switch _dfad %360{case 90:_dcae .Urx ,_dcae .Ury =_dcae .Ury ,_dcae .Urx ;_egge =_ea .PdfRectangle {Llx :_dcae .Urx -_bbge .Ury ,Urx :_dcae .Urx -_bbge .Lly ,Lly :_bbge .Llx ,Ury :_bbge .Urx };
case 180:_egge =_ea .PdfRectangle {Llx :_dcae .Urx -_bbge .Llx ,Urx :_dcae .Urx -_bbge .Urx ,Lly :_dcae .Ury -_bbge .Lly ,Ury :_dcae .Ury -_bbge .Ury };case 270:_dcae .Urx ,_dcae .Ury =_dcae .Ury ,_dcae .Urx ;_egge =_ea .PdfRectangle {Llx :_bbge .Ury ,Urx :_bbge .Lly ,Lly :_dcae .Ury -_bbge .Llx ,Ury :_dcae .Ury -_bbge .Urx };
};if _egge .Llx > _egge .Urx {_egge .Llx ,_egge .Urx =_egge .Urx ,_egge .Llx ;};if _egge .Lly > _egge .Ury {_egge .Lly ,_egge .Ury =_egge .Ury ,_egge .Lly ;};_agbg :=textMark {_face :_cdba ,PdfRectangle :_egge ,_ddbb :_bbge ,_fdfcd :_fbba ,_gfdeb :_bggbd ,_fcfg :_faddf ,_aedg :_dfbfg ,_gfaf :_gbdf ,_acdg :_dfad ,_gegg :_efbe ,_dfcdf :_ecgc ,_cbfg :_ceddg ,_dagec :_dfab ,Th :_fefcf ._aeg ._egf ,Tw :_fefcf ._aeg ._cffe ,_gbeg :_efccg ,_accbe :_ebfe };
if _egeba {_ce .Log .Info ("n\u0065\u0077\u0054\u0065\u0078\u0074M\u0061\u0072\u006b\u003a\u0020\u0073t\u0061\u0072\u0074\u003d\u0025\u002e\u0032f\u0020\u0065\u006e\u0064\u003d\u0025\u002e\u0032\u0066\u0020%\u0073",_bbga ,_gbdf ,_agbg .String ());};return _agbg ,_ffbd ;
};var _egdd =_cd .MustCompile ("\u005e\u005c\u0073\u002a\u0028\u005c\u0064\u002b\u005c\u002e\u003f|\u005b\u0049\u0069\u0076\u005d\u002b\u0029\u005c\u0073\u002a\\\u0029\u003f\u0024");func _geef (_fegg float64 )bool {return _dg .Abs (_fegg )< _dfdf };func (_fadd *shapesState )establishSubpath ()*subpath {_ccb ,_ccde :=_fadd .lastpointEstablished ();
if !_ccde {_fadd ._fbfe =append (_fadd ._fbfe ,_gefa (_ccb ));};if len (_fadd ._fbfe )==0{return nil ;};_fadd ._ddgb =false ;return _fadd ._fbfe [len (_fadd ._fbfe )-1];};func _bbce (_fef _ea .PdfRectangle )textState {return textState {_egf :100,_efgd :RenderModeFill ,_fee :_fef };
};func (_bgd *textObject )reset (){_bgd ._eafe =_aa .IdentityMatrix ();_bgd ._gcdg =_aa .IdentityMatrix ();_bgd ._gfbg =nil ;};func _aaafc (_faded ,_dfcd _ea .PdfRectangle )_ea .PdfRectangle {return _ea .PdfRectangle {Llx :_dg .Min (_faded .Llx ,_dfcd .Llx ),Lly :_dg .Min (_faded .Lly ,_dfcd .Lly ),Urx :_dg .Max (_faded .Urx ,_dfcd .Urx ),Ury :_dg .Max (_faded .Ury ,_dfcd .Ury )};
};func (_fegcd *textMark )inDiacriticArea (_ccdf *textMark )bool {_eaaad :=_fegcd .Llx -_ccdf .Llx ;_gdad :=_fegcd .Urx -_ccdf .Urx ;_efgbd :=_fegcd .Lly -_ccdf .Lly ;return _dg .Abs (_eaaad +_gdad )< _fegcd .Width ()*_bfgf &&_dg .Abs (_efgbd )< _fegcd .Height ()*_bfgf ;
};func _agdg (_bcece []*textLine )[]*textLine {_daag :=[]*textLine {};for _ ,_ccbf :=range _bcece {_acbf :=_ccbf .text ();_bbfa :=_efdc .Find ([]byte (_acbf ));if _bbfa !=nil {_daag =append (_daag ,_ccbf );};};return _daag ;};func (_bdd *stateStack )empty ()bool {return len (*_bdd )==0};
func (_aabd *wordBag )sort (){for _ ,_ecgd :=range _aabd ._edfa {_f .Slice (_ecgd ,func (_bged ,_gec int )bool {return _cdec (_ecgd [_bged ],_ecgd [_gec ])< 0});};};func _bgdff (_cecce _ea .PdfColorspace ,_ccff _ea .PdfColor )_be .Color {if _cecce ==nil ||_ccff ==nil {return _be .Black ;
};_cgeb ,_egfee :=_cecce .ColorToRGB (_ccff );if _egfee !=nil {_ce .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006fu\u006c\u0064\u0020no\u0074\u0020\u0063\u006f\u006e\u0076e\u0072\u0074\u0020\u0063\u006f\u006c\u006f\u0072\u0020\u0025\u0076\u0020\u0028\u0025\u0076)\u0020\u0074\u006f\u0020\u0052\u0047\u0042\u003a \u0025\u0073",_ccff ,_cecce ,_egfee );
return _be .Black ;};_badg ,_acae :=_cgeb .(*_ea .PdfColorDeviceRGB );if !_acae {_ce .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0065\u0064 \u0063\u006f\u006c\u006f\u0072\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020i\u006e\u0020\u0074\u0068\u0065\u0020\u0052\u0047\u0042\u0020\u0063\u006flo\u0072\u0073\u0070\u0061\u0063\u0065\u003a\u0020\u0025\u0076",_cgeb );
return _be .Black ;};return _be .NRGBA {R :uint8 (_badg .R ()*255),G :uint8 (_badg .G ()*255),B :uint8 (_badg .B ()*255),A :uint8 (255)};};func (_gcda *textObject )setFont (_aaab string ,_gaa float64 )error {if _gcda ==nil {return nil ;};_gcda ._aeg ._dfg =_gaa ;
_acbb ,_ggdg :=_gcda .getFont (_aaab );if _ggdg !=nil {return _ggdg ;};_gcda ._aeg ._bbbb =_acbb ;return nil ;};func _cbbe (_fbfb ,_eaeac *textPara )bool {if _fbfb ._adfda ||_eaeac ._adfda {return true ;};return _geef (_fbfb .depth ()-_eaeac .depth ());
};func (_fgg *textObject )getFont (_fced string )(*_ea .PdfFont ,error ){if _fgg ._bddd ._fc !=nil {_egce ,_edcd :=_fgg .getFontDict (_fced );if _edcd !=nil {_ce .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0067\u0065\u0074\u0046\u006f\u006e\u0074:\u0020n\u0061m\u0065=\u0025\u0073\u002c\u0020\u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0073",_fced ,_edcd .Error ());
return nil ,_edcd ;};_fgg ._bddd ._eae ++;_cdgfg ,_bddf :=_fgg ._bddd ._fc [_egce .String ()];if _bddf {_cdgfg ._gddd =_fgg ._bddd ._eae ;return _cdgfg ._ccd ,nil ;};};_fgdc ,_bdeg :=_fgg .getFontDict (_fced );if _bdeg !=nil {return nil ,_bdeg ;};_bgac ,_bdeg :=_fgg .getFontDirect (_fced );
if _bdeg !=nil {return nil ,_bdeg ;};if _fgg ._bddd ._fc !=nil {_faa :=fontEntry {_bgac ,_fgg ._bddd ._eae };if len (_fgg ._bddd ._fc )>=_faac {var _dgec []string ;for _edfd :=range _fgg ._bddd ._fc {_dgec =append (_dgec ,_edfd );};_f .Slice (_dgec ,func (_cdgb ,_cbgda int )bool {return _fgg ._bddd ._fc [_dgec [_cdgb ]]._gddd < _fgg ._bddd ._fc [_dgec [_cbgda ]]._gddd ;
});delete (_fgg ._bddd ._fc ,_dgec [0]);};_fgg ._bddd ._fc [_fgdc .String ()]=_faa ;};return _bgac ,nil ;};func _eefg (_bebe ,_eefaf _aa .Point )bool {_dcdf :=_dg .Abs (_bebe .X -_eefaf .X );_gcdf :=_dg .Abs (_bebe .Y -_eefaf .Y );return _agfge (_dcdf ,_gcdf );
};

// New returns an Extractor instance for extracting content from the input PDF page.
func New (page *_ea .PdfPage )(*Extractor ,error ){return NewWithOptions (page ,nil )};func (_efcfa *subpath )add (_bfccg ..._aa .Point ){_efcfa ._fbca =append (_efcfa ._fbca ,_bfccg ...)};

// ExtractPageText returns the text contents of `e` (an Extractor for a page) as a PageText.
// TODO(peterwilliams97): The stats complicate this function signature and aren't very useful.
//
//	Replace with a function like Extract() (*PageText, error)
func (_bab *Extractor )ExtractPageText ()(*PageText ,int ,int ,error ){_fbe ,_eaf ,_fcf ,_dac :=_bab .extractPageText (_bab ._ceb ,_bab ._bc ,_aa .IdentityMatrix (),0);if _dac !=nil &&_dac !=_ea .ErrColorOutOfRange {return nil ,0,0,_dac ;};if _bab ._bfc !=nil {_fbe ._feda ._ecg =_bab ._bfc .UseSimplerExtractionProcess ;
};_fbe .computeViews ();_dac =_dcgdg (_fbe );if _dac !=nil {return nil ,0,0,_dac ;};if _bab ._bfc !=nil {if _bab ._bfc .ApplyCropBox &&_bab ._bec !=nil {_fbe .ApplyArea (*_bab ._bec );};_fbe ._feda ._agaa =_bab ._bfc .DisableDocumentTags ;};return _fbe ,_eaf ,_fcf ,nil ;
};func _eaag (_daef bounded )float64 {return -_daef .bbox ().Lly };func (_ddbd rulingList )splitSec ()[]rulingList {_f .Slice (_ddbd ,func (_dbbf ,_cbfdc int )bool {_egbb ,_dbeac :=_ddbd [_dbbf ],_ddbd [_cbfdc ];if _egbb ._caafe !=_dbeac ._caafe {return _egbb ._caafe < _dbeac ._caafe ;
};return _egbb ._feeg < _dbeac ._feeg ;});_ceeg :=make (map[*ruling ]struct{},len (_ddbd ));_efce :=func (_ecfff *ruling )rulingList {_cgade :=rulingList {_ecfff };_ceeg [_ecfff ]=struct{}{};for _ ,_cgeed :=range _ddbd {if _ ,_fcca :=_ceeg [_cgeed ];_fcca {continue ;
};for _ ,_bgccd :=range _cgade {if _cgeed .alignsSec (_bgccd ){_cgade =append (_cgade ,_cgeed );_ceeg [_cgeed ]=struct{}{};break ;};};};return _cgade ;};_dgef :=[]rulingList {_efce (_ddbd [0])};for _ ,_ggadb :=range _ddbd [1:]{if _ ,_dfdfa :=_ceeg [_ggadb ];
_dfdfa {continue ;};_dgef =append (_dgef ,_efce (_ggadb ));};return _dgef ;};

// Marks returns the TextMark collection for a page. It represents all the text on the page.
func (_cace PageText )Marks ()*TextMarkArray {return &TextMarkArray {_ddgg :_cace ._aba }};func (_agce rulingList )log (_eedb string ){if !_fdee {return ;};_ce .Log .Info ("\u0023\u0023\u0023\u0020\u0025\u0031\u0030\u0073\u003a\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_eedb ,_agce .String ());
for _fcbd ,_agdgag :=range _agce {_cc .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fcbd ,_agdgag .String ());};};func (_gfcfb paraList )toTextMarks ()[]TextMark {_edff :=0;var _gcbea []TextMark ;for _bgbcf ,_bgfe :=range _gfcfb {if _bgfe ._adfda {continue ;
};_gadec :=_bgfe .toTextMarks (&_edff );_gcbea =append (_gcbea ,_gadec ...);if _bgbcf !=len (_gfcfb )-1{if _cbbe (_bgfe ,_gfcfb [_bgbcf +1]){_gcbea =_cfbg (_gcbea ,&_edff ,"\u0020");}else {_gcbea =_cfbg (_gcbea ,&_edff ,"\u000a");_gcbea =_cfbg (_gcbea ,&_edff ,"\u000a");
};};};_gcbea =_cfbg (_gcbea ,&_edff ,"\u000a");_gcbea =_cfbg (_gcbea ,&_edff ,"\u000a");return _gcbea ;};type ruling struct{_deecb rulingKind ;_geed markKind ;_be .Color ;_bbdbe float64 ;_caafe float64 ;_feeg float64 ;_ggde float64 ;};func _facfd (_gadef []rulingList )(rulingList ,rulingList ){var _cdcff rulingList ;
for _ ,_cdeba :=range _gadef {_cdcff =append (_cdcff ,_cdeba ...);};return _cdcff .vertsHorzs ();};var _cdf =false ;var _ecec =[]string {"\u2756","\u27a2","\u2713","\u2022","\uf0a7","\u25a1","\u2212","\u25a0","\u25aa","\u006f"};

// String returns a description of `w`.
func (_cfdbbd *textWord )String ()string {return _cc .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_cfdbbd ._bcded ,_cfdbbd .PdfRectangle ,_cfdbbd ._cfdf ,_cfdbbd ._baea );
};func _ebab (_ggba _aa .Point )_aa .Matrix {return _aa .TranslationMatrix (_ggba .X ,_ggba .Y )};type list struct{_dcbb []*textLine ;_aegd string ;_daffa []*list ;_cdag string ;};func (_ebf *shapesState )moveTo (_afed ,_gcfb float64 ){_ebf ._ddgb =true ;
_ebf ._cgac =_ebf .devicePoint (_afed ,_gcfb );if _ageb {_ce .Log .Info ("\u006d\u006fv\u0065\u0054\u006f\u003a\u0020\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0064\u0065\u0076\u0069\u0063\u0065\u003d%.\u0032\u0066",_afed ,_gcfb ,_ebf ._cgac );
};};func _cbaga (_agecb ,_eecd int )uint64 {return uint64 (_agecb )*0x1000000+uint64 (_eecd )};type structTreeRoot struct{_cdgg []structElement ;_edcg string ;};func (_dgbac *textTable )getDown ()paraList {_abeb :=make (paraList ,_dgbac ._fdaegd );for _gbegd :=0;
_gbegd < _dgbac ._fdaegd ;_gbegd ++{_gaef :=_dgbac .get (_gbegd ,_dgbac ._bgdf -1)._bcgc ;if _gaef .taken (){return nil ;};_abeb [_gbegd ]=_gaef ;};for _gbcf :=0;_gbcf < _dgbac ._fdaegd -1;_gbcf ++{if _abeb [_gbcf ]._abbf !=_abeb [_gbcf +1]{return nil ;
};};return _abeb ;};func _cgba (_dcfbf int ,_adbbb func (int ,int )bool )[]int {_gcfba :=make ([]int ,_dcfbf );for _ecbd :=range _gcfba {_gcfba [_ecbd ]=_ecbd ;};_f .Slice (_gcfba ,func (_fgbee ,_fbfddf int )bool {return _adbbb (_gcfba [_fgbee ],_gcfba [_fbfddf ])});
return _gcfba ;};func _fefc (_bac _aa .Matrix )_aa .Point {_efgde ,_feb :=_bac .Translation ();return _aa .Point {X :_efgde ,Y :_feb };};

// String returns a string describing `tm`.
func (_dccg TextMark )String ()string {_daf :=_dccg .BBox ;var _cfee string ;if _dccg .Font !=nil {_cfee =_dccg .Font .String ();if len (_cfee )> 50{_cfee =_cfee [:50]+"\u002e\u002e\u002e";};};var _aafb string ;if _dccg .Meta {_aafb ="\u0020\u002a\u004d\u002a";
};return _cc .Sprintf ("\u007b\u0054\u0065\u0078t\u004d\u0061\u0072\u006b\u003a\u0020\u0025\u0064\u0020%\u0071\u003d\u0025\u0030\u0032\u0078\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e2\u0066\u0029\u0020\u0028\u00256\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0025\u0073\u007d",_dccg .Offset ,_dccg .Text ,[]rune (_dccg .Text ),_daf .Llx ,_daf .Lly ,_daf .Urx ,_daf .Ury ,_cfee ,_aafb );
};func _acba (_gfca []*textWord ,_abcg float64 ,_fbfee ,_bdcc rulingList )*wordBag {_aaae :=_ffea (_gfca [0],_abcg ,_fbfee ,_bdcc );for _ ,_efbc :=range _gfca [1:]{_bgaf :=_gcec (_efbc ._bcded );_aaae ._edfa [_bgaf ]=append (_aaae ._edfa [_bgaf ],_efbc );
_aaae .PdfRectangle =_aaafc (_aaae .PdfRectangle ,_efbc .PdfRectangle );};_aaae .sort ();return _aaae ;};func _cfef (_cbgde ,_cbeb float64 )string {_cfda :=!_geef (_cbgde -_cbeb );if _cfda {return "\u000a";};return "\u0020";};func (_ffcg rectRuling )asRuling ()(*ruling ,bool ){_ceece :=ruling {_deecb :_ffcg ._bgad ,Color :_ffcg .Color ,_geed :_gdb };
switch _ffcg ._bgad {case _efcab :_ceece ._bbdbe =0.5*(_ffcg .Llx +_ffcg .Urx );_ceece ._caafe =_ffcg .Lly ;_ceece ._feeg =_ffcg .Ury ;_gadga ,_bceeg :=_ffcg .checkWidth (_ffcg .Llx ,_ffcg .Urx );if !_bceeg {if _edaa {_ce .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067V\u0065\u0072\u0074\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_ffcg );
};return nil ,false ;};_ceece ._ggde =_gadga ;case _dbdde :_ceece ._bbdbe =0.5*(_ffcg .Lly +_ffcg .Ury );_ceece ._caafe =_ffcg .Llx ;_ceece ._feeg =_ffcg .Urx ;_cgcg ,_bgcd :=_ffcg .checkWidth (_ffcg .Lly ,_ffcg .Ury );if !_bgcd {if _edaa {_ce .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067H\u006f\u0072\u007a\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_ffcg );
};return nil ,false ;};_ceece ._ggde =_cgcg ;default:_ce .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_ffcg ._bgad );return nil ,false ;};return &_ceece ,true ;};func _ccgc (_aaef ,_cgff float64 )bool {return _dg .Abs (_aaef -_cgff )<=_deab };
func (_efeg *textLine )markWordBoundaries (){_gfcfe :=_ddcg *_efeg ._aeff ;for _abbb ,_abfg :=range _efeg ._aeeb [1:]{if _ggfd (_abfg ,_efeg ._aeeb [_abbb ])>=_gfcfe {_abfg ._aegfg =true ;};};};func (_agdda *textTable )logComposite (_eceab string ){if !_gfde {return ;
};_ce .Log .Info ("\u007e~\u007eP\u0061\u0072\u0061\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_agdda ._fdaegd ,_agdda ._bgdf ,_eceab );_cc .Printf ("\u0025\u0035\u0073 \u007c","");for _ecbe :=0;_ecbe < _agdda ._fdaegd ;_ecbe ++{_cc .Printf ("\u0025\u0033\u0064 \u007c",_ecbe );
};_cc .Println ("");_cc .Printf ("\u0025\u0035\u0073 \u002b","");for _dfge :=0;_dfge < _agdda ._fdaegd ;_dfge ++{_cc .Printf ("\u0025\u0033\u0073 \u002b","\u002d\u002d\u002d");};_cc .Println ("");for _bfdda :=0;_bfdda < _agdda ._bgdf ;_bfdda ++{_cc .Printf ("\u0025\u0035\u0064 \u007c",_bfdda );
for _eaeg :=0;_eaeg < _agdda ._fdaegd ;_eaeg ++{_ggfa ,_ :=_agdda ._ebddd [_cbaga (_eaeg ,_bfdda )].parasBBox ();_cc .Printf ("\u0025\u0033\u0064 \u007c",len (_ggfa ));};_cc .Println ("");};_ce .Log .Info ("\u007e~\u007eT\u0065\u0078\u0074\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_agdda ._fdaegd ,_agdda ._bgdf ,_eceab );
_cc .Printf ("\u0025\u0035\u0073 \u007c","");for _bead :=0;_bead < _agdda ._fdaegd ;_bead ++{_cc .Printf ("\u0025\u0031\u0032\u0064\u0020\u007c",_bead );};_cc .Println ("");_cc .Printf ("\u0025\u0035\u0073 \u002b","");for _adgg :=0;_adgg < _agdda ._fdaegd ;
_adgg ++{_cc .Print ("\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d-\u002d\u002d\u002d\u002b");};_cc .Println ("");for _effc :=0;_effc < _agdda ._bgdf ;_effc ++{_cc .Printf ("\u0025\u0035\u0064 \u007c",_effc );for _gdbde :=0;_gdbde < _agdda ._fdaegd ;
_gdbde ++{_gbafe ,_ :=_agdda ._ebddd [_cbaga (_gdbde ,_effc )].parasBBox ();_gfcg :="";_agdaa :=_gbafe .merge ();if _agdaa !=nil {_gfcg =_agdaa .text ();};_gfcg =_cc .Sprintf ("\u0025\u0071",_efcb (_gfcg ,12));_gfcg =_gfcg [1:len (_gfcg )-1];_cc .Printf ("\u0025\u0031\u0032\u0073\u0020\u007c",_gfcg );
};_cc .Println ("");};};func (_fbc *imageExtractContext )extractXObjectImage (_ege *_ff .PdfObjectName ,_abf _g .GraphicsState ,_aec *_ea .PdfPageResources )error {_bbg ,_ :=_aec .GetXObjectByName (*_ege );if _bbg ==nil {return nil ;};_cdfc ,_eb :=_fbc ._ab [_bbg ];
if !_eb {_gcd ,_bgg :=_aec .GetXObjectImageByName (*_ege );if _bgg !=nil {return _bgg ;};if _gcd ==nil {return nil ;};_ffce ,_bgg :=_gcd .ToImage ();if _bgg !=nil {return _bgg ;};var _bef _ed .Image ;if _gcd .SMask !=nil {_bef ,_bgg =_gdga (_gcd .SMask ,_be .Opaque );
if _bgg !=nil {_ce .Log .Debug ("W\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0067\u0065\u0074\u0020\u0073\u006f\u0066\u0074\u0020\u0069\u006da\u0067e\u0020\u006d\u0061\u0073k\u002e\u0020O\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u002e");
};};if _bef !=nil {_fdea ,_ba :=_ffce .ToGoImage ();if _ba !=nil {return _ba ;};_fdea =_dgfcd (_fdea ,_bef );switch _gcd .ColorSpace .String (){case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0049n\u0064\u0065\u0078\u0065\u0064":_ffce ,_ba =_ea .ImageHandling .NewGrayImageFromGoImage (_fdea );
if _ba !=nil {return _ba ;};default:_ffce ,_ba =_ea .ImageHandling .NewImageFromGoImage (_fdea );if _ba !=nil {return _ba ;};};};_cdfc =&cachedImage {_adb :_ffce ,_dae :_gcd .ColorSpace };_fbc ._ab [_bbg ]=_cdfc ;};_ffee :=_cdfc ._adb ;_geg :=_cdfc ._dae ;
_fgd ,_baa :=_geg .ImageToRGB (*_ffee );if _baa !=nil {return _baa ;};_ce .Log .Debug ("@\u0044\u006f\u0020\u0043\u0054\u004d\u003a\u0020\u0025\u0073",_abf .CTM .String ());_bce :=ImageMark {Image :&_fgd ,Width :_abf .CTM .ScalingFactorX (),Height :_abf .CTM .ScalingFactorY (),Angle :_abf .CTM .Angle ()};
_bce .X ,_bce .Y =_abf .CTM .Translation ();_fbc ._cga =append (_fbc ._cga ,_bce );_fbc ._cf ++;return nil ;};func (_dfeeg *structTreeRoot )parseStructTreeRoot (_ffeag _ff .PdfObject ){if _ffeag !=nil {_cege ,_ecfa :=_ff .GetDict (_ffeag );if !_ecfa {_ce .Log .Debug ("\u0070\u0061\u0072s\u0065\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u003a\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u006eo\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");
};K :=_cege .Get ("\u004b");_afb :=_cege .Get ("\u0054\u0079\u0070\u0065").String ();var _bda *_ff .PdfObjectArray ;switch _fbbd :=K .(type ){case *_ff .PdfObjectArray :_bda =_fbbd ;case *_ff .PdfObjectReference :_bda =_ff .MakeArray (K );};_fgfe :=[]structElement {};
for _ ,_bbeg :=range _bda .Elements (){_fgbd :=&structElement {};_fgbd .parseStructElement (_bbeg );_fgfe =append (_fgfe ,*_fgbd );};_dfeeg ._cdgg =_fgfe ;_dfeeg ._edcg =_afb ;};};func _fedb (_ggeg byte )bool {for _ ,_fbfdd :=range _ecec {if []byte (_fbfdd )[0]==_ggeg {return true ;
};};return false ;};func (_dfeg *textPara )getListLines ()[]*textLine {var _feee []*textLine ;_fbdc :=_agdg (_dfeg ._efde );for _ ,_fgcc :=range _dfeg ._efde {_edbf :=_fgcc ._aeeb [0]._baea [0];if _fedb (_edbf ){_feee =append (_feee ,_fgcc );};};_feee =append (_feee ,_fbdc ...);
return _feee ;};

// String returns a human readable description of `ss`.
func (_gcdgf *shapesState )String ()string {return _cc .Sprintf ("\u007b\u0025\u0064\u0020su\u0062\u0070\u0061\u0074\u0068\u0073\u0020\u0066\u0072\u0065\u0073\u0068\u003d\u0025t\u007d",len (_gcdgf ._fbfe ),_gcdgf ._ddgb );};func _gcec (_cdebd float64 )int {var _faga int ;
if _cdebd >=0{_faga =int (_cdebd /_gdfg );}else {_faga =int (_cdebd /_gdfg )-1;};return _faga ;};func (_gcf *textObject )moveLP (_aeeg ,_cfag float64 ){_gcf ._gcdg .Concat (_aa .NewMatrix (1,0,0,1,_aeeg ,_cfag ));_gcf ._eafe =_gcf ._gcdg ;};func (_fgbe *textObject )getFontDirect (_dec string )(*_ea .PdfFont ,error ){_ebaae ,_babb :=_fgbe .getFontDict (_dec );
if _babb !=nil {return nil ,_babb ;};_gfbb ,_babb :=_ea .NewPdfFontFromPdfObject (_ebaae );if _babb !=nil {_ce .Log .Debug ("\u0067\u0065\u0074\u0046\u006f\u006e\u0074\u0044\u0069\u0072\u0065\u0063\u0074\u003a\u0020\u004e\u0065\u0077Pd\u0066F\u006f\u006e\u0074\u0046\u0072\u006f\u006d\u0050\u0064\u0066\u004f\u0062j\u0065\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u006e\u0061\u006d\u0065\u003d%\u0023\u0071\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dec ,_babb );
};return _gfbb ,_babb ;};var _abed string ="\u005e\u005b\u0061\u002d\u007a\u0041\u002dZ\u005d\u0028\u005c)\u007c\u005c\u002e)\u007c\u005e[\u005c\u0064\u005d\u002b\u0028\u005c)\u007c\\.\u0029\u007c\u005e\u005c\u0028\u005b\u0061\u002d\u007a\u0041\u002d\u005a\u005d\u005c\u0029\u007c\u005e\u005c\u0028\u005b\u005c\u0064\u005d\u002b\u005c\u0029";
func _gefa (_ddgdg _aa .Point )*subpath {return &subpath {_fbca :[]_aa .Point {_ddgdg }}};type rectRuling struct{_bgad rulingKind ;_ffgg markKind ;_be .Color ;_ea .PdfRectangle ;};func (_efcad paraList )findTextTables ()[]*textTable {var _cgeee []*textTable ;
for _ ,_ggcc :=range _efcad {if _ggcc .taken ()||_ggcc .Width ()==0{continue ;};_acgaa :=_ggcc .isAtom ();if _acgaa ==nil {continue ;};_acgaa .growTable ();if _acgaa ._fdaegd *_acgaa ._bgdf < _ecb {continue ;};_acgaa .markCells ();_acgaa .log ("\u0067\u0072\u006fw\u006e");
_cgeee =append (_cgeee ,_acgaa );};return _cgeee ;};type textLine struct{_ea .PdfRectangle ;_bacaf float64 ;_aeeb []*textWord ;_aeff float64 ;};func _ffea (_ccaf *textWord ,_eadc float64 ,_cfaa ,_fbdf rulingList )*wordBag {_ddge :=_gcec (_ccaf ._bcded );
_bagd :=[]*textWord {_ccaf };_bcec :=wordBag {_edfa :map[int ][]*textWord {_ddge :_bagd },PdfRectangle :_ccaf .PdfRectangle ,_cdfcc :_ccaf ._cfdf ,_baag :_eadc ,_agac :_cfaa ,_dfbf :_fbdf };return &_bcec ;};func (_efg *textObject )checkOp (_dfd *_g .ContentStreamOperation ,_efda int ,_edef bool )(_aea bool ,_cgd error ){if _efg ==nil {var _bge []_ff .PdfObject ;
if _efda > 0{_bge =_dfd .Params ;if len (_bge )> _efda {_bge =_bge [:_efda ];};};_ce .Log .Debug ("\u0025\u0023q \u006f\u0070\u0065r\u0061\u006e\u0064\u0020out\u0073id\u0065\u0020\u0074\u0065\u0078\u0074\u002e p\u0061\u0072\u0061\u006d\u0073\u003d\u0025+\u0076",_dfd .Operand ,_bge );
};if _efda >=0{if len (_dfd .Params )!=_efda {if _edef {_cgd =_e .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");};_ce .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_dfd .Operand ,_efda ,len (_dfd .Params ),_dfd .Params );
return false ,_cgd ;};};return true ,nil ;};func _ggfd (_acg ,_dcdg bounded )float64 {return _acg .bbox ().Llx -_dcdg .bbox ().Urx };func _efea (_eacgf []pathSection )rulingList {_fcdc (_eacgf );if _fdee {_ce .Log .Info ("\u006da\u006b\u0065\u0046\u0069l\u006c\u0052\u0075\u006c\u0069n\u0067s\u003a \u0025\u0064\u0020\u0066\u0069\u006c\u006cs",len (_eacgf ));
};var _cdgbc rulingList ;for _ ,_gdcb :=range _eacgf {for _ ,_edga :=range _gdcb ._aggc {if !_edga .isQuadrilateral (){if _fdee {_ce .Log .Error ("!\u0069s\u0051\u0075\u0061\u0064\u0072\u0069\u006c\u0061t\u0065\u0072\u0061\u006c: \u0025\u0073",_edga );
};continue ;};if _gfac ,_aebfc :=_edga .makeRectRuling (_gdcb .Color );_aebfc {_cdgbc =append (_cdgbc ,_gfac );}else {if _edaa {_ce .Log .Error ("\u0021\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0073",_edga );
};};};};if _fdee {_ce .Log .Info ("\u006d\u0061\u006b\u0065Fi\u006c\u006c\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0073",_cdgbc .String ());};return _cdgbc ;};

// NewFromContents creates a new extractor from contents and page resources.
func NewFromContents (contents string ,resources *_ea .PdfPageResources )(*Extractor ,error ){const _fff ="\u0065x\u0074\u0072\u0061\u0063t\u006f\u0072\u002e\u004e\u0065w\u0046r\u006fm\u0043\u006f\u006e\u0074\u0065\u006e\u0074s";_ffe :=&Extractor {_ceb :contents ,_bc :resources ,_fc :map[string ]fontEntry {},_aae :map[string ]textResult {}};
_ad .TrackUse (_fff );return _ffe ,nil ;};func (_bceg *textObject )getStrokeColor ()_be .Color {return _bgdff (_bceg ._gbb .ColorspaceStroking ,_bceg ._gbb .ColorStroking );};func _bfec (_bdbe structElement )[]structElement {_feae :=[]structElement {};
for _ ,_ebdc :=range _bdbe ._bdfb {for _ ,_dddcf :=range _ebdc ._bdfb {for _ ,_efac :=range _dddcf ._bdfb {if _efac ._gabd =="\u004c"{_feae =append (_feae ,_efac );};};};};return _feae ;};var _ggecb string ="\u0028\u003f\u0069\u0029\u005e\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028?\u003a\u0044\u007cM\u0029\u007c\u0044\u003f\u0043{\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028\u003f\u003a\u004c\u007c\u0043\u0029\u007cL\u003f\u0058\u007b\u0030\u002c\u0033}\u0029\u0028\u0049\u0028\u003f\u003a\u0056\u007c\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u005c\u0029\u007c\u005c\u002e\u0029\u007c\u005e\u005c\u0028\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028\u003f\u003aD\u007cM\u0029\u007c\u0044\u003f\u0043\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028?\u003a\u004c\u007c\u0043\u0029\u007c\u004c?\u0058\u007b0\u002c\u0033\u007d\u0029(\u0049\u0028\u003f\u003a\u0056|\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u005c\u0029";
func (_dbgfb paraList )eventNeighbours (_dbddf []event )map[*textPara ][]int {_f .Slice (_dbddf ,func (_fedab ,_ccga int )bool {_dafec ,_gdfbg :=_dbddf [_fedab ],_dbddf [_ccga ];_aacaf ,_baff :=_dafec ._gdbb ,_gdfbg ._gdbb ;if _aacaf !=_baff {return _aacaf < _baff ;
};if _dafec ._eeaee !=_gdfbg ._eeaee {return _dafec ._eeaee ;};return _fedab < _ccga ;});_gbadc :=make (map[int ]intSet );_afgd :=make (intSet );for _ ,_ebcef :=range _dbddf {if _ebcef ._eeaee {_gbadc [_ebcef ._dcbbd ]=make (intSet );for _egea :=range _afgd {if _egea !=_ebcef ._dcbbd {_gbadc [_ebcef ._dcbbd ].add (_egea );
_gbadc [_egea ].add (_ebcef ._dcbbd );};};_afgd .add (_ebcef ._dcbbd );}else {_afgd .del (_ebcef ._dcbbd );};};_ecdec :=map[*textPara ][]int {};for _bbab ,_dedc :=range _gbadc {_afcgb :=_dbgfb [_bbab ];if len (_dedc )==0{_ecdec [_afcgb ]=nil ;continue ;
};_affg :=make ([]int ,len (_dedc ));_ggebg :=0;for _fadda :=range _dedc {_affg [_ggebg ]=_fadda ;_ggebg ++;};_ecdec [_afcgb ]=_affg ;};return _ecdec ;};func (_gebb gridTiling )complete ()bool {for _ ,_fcfe :=range _gebb ._bgdd {for _ ,_gbfbg :=range _fcfe {if !_gbfbg .complete (){return false ;
};};};return true ;};func (_bgf *textLine )text ()string {var _fdfb []string ;for _ ,_befbe :=range _bgf ._aeeb {if _befbe ._aegfg {_fdfb =append (_fdfb ,"\u0020");};_fdfb =append (_fdfb ,_befbe ._baea );};return _dbe .Join (_fdfb ,"");};

// Text returns the text content of the `bulletLists`.
func (_aagc *lists )Text ()string {_bafdb :=&_dbe .Builder {};for _ ,_bfebg :=range *_aagc {_baga :=_bfebg .Text ();_bafdb .WriteString (_baga );};return _bafdb .String ();};func (_adaf *textTable )toTextTable ()TextTable {if _gfde {_ce .Log .Info ("t\u006fT\u0065\u0078\u0074\u0054\u0061\u0062\u006c\u0065:\u0020\u0025\u0064\u0020x \u0025\u0064",_adaf ._fdaegd ,_adaf ._bgdf );
};_cddcc :=make ([][]TableCell ,_adaf ._bgdf );for _aebg :=0;_aebg < _adaf ._bgdf ;_aebg ++{_cddcc [_aebg ]=make ([]TableCell ,_adaf ._fdaegd );for _geab :=0;_geab < _adaf ._fdaegd ;_geab ++{_eefd :=_adaf .get (_geab ,_aebg );if _eefd ==nil {continue ;
};if _gfde {_cc .Printf ("\u0025\u0034\u0064 \u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_geab ,_aebg ,_eefd );};_cddcc [_aebg ][_geab ].Text =_eefd .text ();_cbadg :=0;_cddcc [_aebg ][_geab ].Marks ._ddgg =_eefd .toTextMarks (&_cbadg );};};_eegf :=TextTable {W :_adaf ._fdaegd ,H :_adaf ._bgdf ,Cells :_cddcc };
_eegf .PdfRectangle =_adaf .bbox ();return _eegf ;};func (_aaaba paraList )findTableGrid (_geeeb gridTiling )(*textTable ,map[*textPara ]struct{}){_ccccd :=len (_geeeb ._fdbf );_bgefg :=len (_geeeb ._eebc );_eebb :=textTable {_cadg :true ,_fdaegd :_ccccd ,_bgdf :_bgefg ,_bfeg :make (map[uint64 ]*textPara ,_ccccd *_bgefg ),_ebddd :make (map[uint64 ]compositeCell ,_ccccd *_bgefg )};
_eebb .PdfRectangle =_geeeb .PdfRectangle ;_caae :=make (map[*textPara ]struct{});_gafe :=int ((1.0-_dcf )*float64 (_ccccd *_bgefg ));_edcf :=0;if _gafd {_ce .Log .Info ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0064\u0020\u0078\u0020%\u0064",_ccccd ,_bgefg );
};for _gada ,_gccg :=range _geeeb ._eebc {_fddae ,_abec :=_geeeb ._bgdd [_gccg ];if !_abec {continue ;};for _aaffgf ,_aegba :=range _geeeb ._fdbf {_cedb ,_cdda :=_fddae [_aegba ];if !_cdda {continue ;};_gccc :=_aaaba .inTile (_cedb );if len (_gccc )==0{_edcf ++;
if _edcf > _gafe {if _gafd {_ce .Log .Info ("\u0021\u006e\u0075m\u0045\u006d\u0070\u0074\u0079\u003d\u0025\u0064",_edcf );};return nil ,nil ;};}else {_eebb .putComposite (_aaffgf ,_gada ,_gccc ,_cedb .PdfRectangle );for _ ,_gabbc :=range _gccc {_caae [_gabbc ]=struct{}{};
};};};};_bdaa :=0;for _ecfe :=0;_ecfe < _ccccd ;_ecfe ++{_ccebf :=_eebb .get (_ecfe ,0);if _ccebf ==nil ||!_ccebf ._adfda {_bdaa ++;};};if _bdaa ==0{if _gafd {_ce .Log .Info ("\u0021\u006e\u0075m\u0048\u0065\u0061\u0064\u0065\u0072\u003d\u0030");};return nil ,nil ;
};_geedg :=_eebb .reduceTiling (_geeeb ,_faeg );_geedg =_geedg .subdivide ();return _geedg ,_caae ;};

// String returns a description of `p`.
func (_fcbe *textPara )String ()string {if _fcbe ._adfda {return _cc .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u005b\u0045\u004d\u0050\u0054\u0059\u005d",_fcbe .PdfRectangle );};_gaeaf :="";if _fcbe ._geeb !=nil {_gaeaf =_cc .Sprintf ("\u005b\u0025\u0064\u0078\u0025\u0064\u005d\u0020",_fcbe ._geeb ._fdaegd ,_fcbe ._geeb ._bgdf );
};return _cc .Sprintf ("\u0025\u0036\u002e\u0032f \u0025\u0073\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u0020\u0025\u0071",_fcbe .PdfRectangle ,_gaeaf ,len (_fcbe ._efde ),_efcb (_fcbe .text (),50));};func (_fffd *textPara )text ()string {_dcad :=new (_cde .Buffer );
_fffd .writeText (_dcad );return _dcad .String ();};type compositeCell struct{_ea .PdfRectangle ;paraList ;};type imageExtractContext struct{_cga []ImageMark ;_fg int ;_cf int ;_dbg int ;_ab map[*_ff .PdfObjectStream ]*cachedImage ;_df *ImageExtractOptions ;
_cff bool ;};

// TableInfo gets table information of the textmark `tm`.
func (_cdb *TextMark )TableInfo ()(*TextTable ,[][]int ){if !_cdb ._ebe {return nil ,nil ;};_bbdc :=_cdb ._ddgd ;_bag :=_bbdc .getCellInfo (*_cdb );return _bbdc ,_bag ;};func (_acbac *textLine )pullWord (_daga *wordBag ,_ebde *textWord ,_afac int ){_acbac .appendWord (_ebde );
_daga .removeWord (_ebde ,_afac );};func (_gcg *stateStack )pop ()*textState {if _gcg .empty (){return nil ;};_edag :=*(*_gcg )[len (*_gcg )-1];*_gcg =(*_gcg )[:len (*_gcg )-1];return &_edag ;};func (_bfccd paraList )log (_gage string ){if !_adag {return ;
};_ce .Log .Info ("%\u0038\u0073\u003a\u0020\u0025\u0064 \u0070\u0061\u0072\u0061\u0073\u0020=\u003d\u003d\u003d\u003d\u003d\u003d\u002d-\u002d\u002d\u002d\u002d\u002d\u003d\u003d\u003d\u003d\u003d=\u003d",_gage ,len (_bfccd ));for _gac ,_cgafg :=range _bfccd {if _cgafg ==nil {continue ;
};_accf :=_cgafg .text ();_gcgf :="\u0020\u0020";if _cgafg ._geeb !=nil {_gcgf =_cc .Sprintf ("\u005b%\u0064\u0078\u0025\u0064\u005d",_cgafg ._geeb ._fdaegd ,_cgafg ._geeb ._bgdf );};_cc .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0025s\u0020\u0025\u0071\u000a",_gac ,_cgafg .PdfRectangle ,_gcgf ,_efcb (_accf ,50));
};};

// String returns a string describing `ma`.
func (_gagac TextMarkArray )String ()string {_ffga :=len (_gagac ._ddgg );if _ffga ==0{return "\u0045\u004d\u0050T\u0059";};_ebg :=_gagac ._ddgg [0];_efcf :=_gagac ._ddgg [_ffga -1];return _cc .Sprintf ("\u007b\u0054\u0045\u0058\u0054\u004d\u0041\u0052K\u0041\u0052\u0052AY\u003a\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025s\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d%\u0073\u007d",_ffga ,_ebg ,_efcf );
};func (_cbbb *wordBag )depthBand (_aaga ,_dda float64 )[]int {if len (_cbbb ._edfa )==0{return nil ;};return _cbbb .depthRange (_cbbb .getDepthIdx (_aaga ),_cbbb .getDepthIdx (_dda ));};func _ggea (_edcgb []*textMark ,_cebcb _ea .PdfRectangle ,_aff rulingList ,_fcba []gridTiling ,_eega bool )paraList {_ce .Log .Trace ("\u006d\u0061\u006b\u0065\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065\u003a \u0025\u0064\u0020\u0065\u006c\u0065m\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065=\u0025\u002e\u0032\u0066",len (_edcgb ),_cebcb );
if len (_edcgb )==0{return nil ;};_dgfd :=_dade (_edcgb ,_cebcb );if len (_dgfd )==0{return nil ;};_aff .log ("\u006d\u0061\u006be\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065");_dabb ,_adage :=_aff .vertsHorzs ();_fggad :=_acba (_dgfd ,_cebcb .Ury ,_dabb ,_adage );
_gaea :=_aaac (_fggad ,_cebcb .Ury ,_dabb ,_adage );_gaea =_bddb (_gaea );_dafe :=make (paraList ,0,len (_gaea ));for _ ,_aebec :=range _gaea {_ceaa :=_aebec .arrangeText ();if _ceaa !=nil {_dafe =append (_dafe ,_ceaa );};};if !_eega &&len (_dafe )>=_ecb {_dafe =_dafe .extractTables (_fcba );
};_dafe .sortReadingOrder ();if !_eega {_dafe .sortTopoOrder ();};_dafe .log ("\u0073\u006f\u0072te\u0064\u0020\u0069\u006e\u0020\u0072\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u006f\u0072\u0064\u0065\u0072");return _dafe ;};func (_dcgdc *textTable )subdivide ()*textTable {_dcgdc .logComposite ("\u0073u\u0062\u0064\u0069\u0076\u0069\u0064e");
_ggef :=_dcgdc .compositeRowCorridors ();_ffdgd :=_dcgdc .compositeColCorridors ();if _gfde {_ce .Log .Info ("\u0073u\u0062\u0064i\u0076\u0069\u0064\u0065:\u000a\u0009\u0072o\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s=\u0025\u0073\u000a\t\u0063\u006fl\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073=\u0025\u0073",_ebdfb (_ggef ),_ebdfb (_ffdgd ));
};if len (_ggef )==0||len (_ffdgd )==0{return _dcgdc ;};_ceecc (_ggef );_ceecc (_ffdgd );if _gfde {_ce .Log .Info ("\u0073\u0075\u0062\u0064\u0069\u0076\u0069\u0064\u0065\u0020\u0066\u0069\u0078\u0065\u0064\u003a\u000a\u0009r\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073\u003d\u0025\u0073\u000a\u0009\u0063\u006f\u006cC\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d\u0025\u0073",_ebdfb (_ggef ),_ebdfb (_ffdgd ));
};_aegdf ,_ecgdc :=_debfd (_dcgdc ._bgdf ,_ggef );_gbfca ,_bfgaa :=_debfd (_dcgdc ._fdaegd ,_ffdgd );_gggb :=make (map[uint64 ]*textPara ,_bfgaa *_ecgdc );_eafge :=&textTable {PdfRectangle :_dcgdc .PdfRectangle ,_cadg :_dcgdc ._cadg ,_bgdf :_ecgdc ,_fdaegd :_bfgaa ,_bfeg :_gggb };
if _gfde {_ce .Log .Info ("\u0073\u0075b\u0064\u0069\u0076\u0069\u0064\u0065\u003a\u0020\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0063\u0065\u006c\u006c\u0073\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0079\u004f\u0066\u0066\u0073\u0065\u0074\u0073=\u0025\u002b\u0076\u000a"+"\u0009\u0078\u004f\u0066\u0066\u0073\u0065\u0074\u0073\u003d\u0025\u002b\u0076",_dcgdc ._fdaegd ,_dcgdc ._bgdf ,_bfgaa ,_ecgdc ,_ebdfb (_ggef ),_ebdfb (_ffdgd ),_aegdf ,_gbfca );
};for _edfc :=0;_edfc < _dcgdc ._bgdf ;_edfc ++{_eeccd :=_aegdf [_edfc ];for _abac :=0;_abac < _dcgdc ._fdaegd ;_abac ++{_gggbe :=_gbfca [_abac ];if _gfde {_cc .Printf ("\u0025\u0036\u0064\u002c %\u0032\u0064\u003a\u0020\u0078\u0030\u003d\u0025\u0064\u0020\u0079\u0030\u003d\u0025d\u000a",_abac ,_edfc ,_gggbe ,_eeccd );
};_ggdge ,_bcagf :=_dcgdc ._ebddd [_cbaga (_abac ,_edfc )];if !_bcagf {continue ;};_ceac :=_ggdge .split (_ggef [_edfc ],_ffdgd [_abac ]);for _edcda :=0;_edcda < _ceac ._bgdf ;_edcda ++{for _edafd :=0;_edafd < _ceac ._fdaegd ;_edafd ++{_cdcc :=_ceac .get (_edafd ,_edcda );
_eafge .put (_gggbe +_edafd ,_eeccd +_edcda ,_cdcc );if _gfde {_cc .Printf ("\u0025\u0038\u0064\u002c\u0020\u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_gggbe +_edafd ,_eeccd +_edcda ,_cdcc );};};};};};return _eafge ;};func _fgfc (_egaa *textLine ,_dffa []*textLine ,_dgbbe []float64 ,_fdeef ,_eafed float64 )[]*textLine {_bagdg :=[]*textLine {};
for _ ,_dgdegg :=range _dffa {if _dgdegg ._bacaf >=_fdeef {if _eafed !=-1&&_dgdegg ._bacaf < _eafed {if _dgdegg .text ()!=_egaa .text (){if _dg .Round (_dgdegg .Llx )< _dg .Round (_egaa .Llx ){break ;};_bagdg =append (_bagdg ,_dgdegg );};}else if _eafed ==-1{if _dgdegg ._bacaf ==_egaa ._bacaf {if _dgdegg .text ()!=_egaa .text (){_bagdg =append (_bagdg ,_dgdegg );
};continue ;};_dgdd :=_aabab (_egaa ,_dffa ,_dgbbe );if _dgdd !=-1&&_dgdegg ._bacaf <=_dgdd {_bagdg =append (_bagdg ,_dgdegg );};};};};return _bagdg ;};func (_fbbab rulingList )snapToGroupsDirection ()rulingList {_fbbab .sortStrict ();_bccbe :=make (map[*ruling ]rulingList ,len (_fbbab ));
_adbd :=_fbbab [0];_aeab :=func (_dgdf *ruling ){_adbd =_dgdf ;_bccbe [_adbd ]=rulingList {_dgdf }};_aeab (_fbbab [0]);for _ ,_ebdf :=range _fbbab [1:]{if _ebdf ._bbdbe < _adbd ._bbdbe -_dfdf {_ce .Log .Error ("\u0073\u006e\u0061\u0070T\u006f\u0047\u0072\u006f\u0075\u0070\u0073\u0044\u0069r\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0057\u0072\u006f\u006e\u0067\u0020\u0070\u0072\u0069\u006da\u0072\u0079\u0020\u006f\u0072d\u0065\u0072\u002e\u000a\u0009\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0020\u0076\u003d\u0025\u0073",_adbd ,_ebdf );
};if _ebdf ._bbdbe > _adbd ._bbdbe +_fbge {_aeab (_ebdf );}else {_bccbe [_adbd ]=append (_bccbe [_adbd ],_ebdf );};};_geca :=make (map[*ruling ]float64 ,len (_bccbe ));_begc :=make (map[*ruling ]*ruling ,len (_fbbab ));for _cadfc ,_dcbeb :=range _bccbe {_geca [_cadfc ]=_dcbeb .mergePrimary ();
for _ ,_eede :=range _dcbeb {_begc [_eede ]=_cadfc ;};};for _ ,_gacg :=range _fbbab {_gacg ._bbdbe =_geca [_begc [_gacg ]];};_baeee :=make (rulingList ,0,len (_fbbab ));for _ ,_begb :=range _bccbe {_ggff :=_begb .splitSec ();for _fcfcc ,_gcce :=range _ggff {_adda :=_gcce .merge ();
if len (_baeee )> 0{_efgbe :=_baeee [len (_baeee )-1];if _efgbe .alignsPrimary (_adda )&&_efgbe .alignsSec (_adda ){_ce .Log .Error ("\u0073\u006e\u0061\u0070\u0054\u006fG\u0072\u006f\u0075\u0070\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0044\u0075\u0070\u006ci\u0063\u0061\u0074\u0065\u0020\u0069\u003d\u0025\u0064\u000a\u0009\u0077\u003d\u0025s\u000a\t\u0076\u003d\u0025\u0073",_fcfcc ,_efgbe ,_adda );
continue ;};};_baeee =append (_baeee ,_adda );};};_baeee .sortStrict ();return _baeee ;};func (_cbga intSet )add (_eddbg int ){_cbga [_eddbg ]=struct{}{}};func _edbab (_bbbf *_ea .Image ,_dbbd _be .Color )_ed .Image {_adgbe ,_eeaff :=int (_bbbf .Width ),int (_bbbf .Height );
_bdbfc :=_ed .NewRGBA (_ed .Rect (0,0,_adgbe ,_eeaff ));for _gdddc :=0;_gdddc < _eeaff ;_gdddc ++{for _fgeea :=0;_fgeea < _adgbe ;_fgeea ++{_cfdfd ,_ccgf :=_bbbf .ColorAt (_fgeea ,_gdddc );if _ccgf !=nil {_ce .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_fgeea ,_gdddc );
continue ;};_dgeaf ,_eacdg ,_afada ,_ :=_cfdfd .RGBA ();var _afcdf _be .Color ;if _dgeaf +_eacdg +_afada ==0{_afcdf =_be .Transparent ;}else {_afcdf =_dbbd ;};_bdbfc .Set (_fgeea ,_gdddc ,_afcdf );};};return _bdbfc ;};func (_dabfed paraList )llyRange (_aabe []int ,_bcce ,_egdcd float64 )[]int {_facfe :=len (_dabfed );
if _egdcd < _dabfed [_aabe [0]].Lly ||_bcce > _dabfed [_aabe [_facfe -1]].Lly {return nil ;};_beb :=_f .Search (_facfe ,func (_dgedb int )bool {return _dabfed [_aabe [_dgedb ]].Lly >=_bcce });_bdfg :=_f .Search (_facfe ,func (_aeed int )bool {return _dabfed [_aabe [_aeed ]].Lly > _egdcd });
return _aabe [_beb :_bdfg ];};func _adgc (_feec map[int ]intSet )[]int {_agfd :=make ([]int ,0,len (_feec ));for _dace :=range _feec {_agfd =append (_agfd ,_dace );};_f .Ints (_agfd );return _agfd ;};func (_gafcc *ruling )alignsSec (_ceabc *ruling )bool {const _cdab =_fbge +1.0;
return _gafcc ._caafe -_cdab <=_ceabc ._feeg &&_ceabc ._caafe -_cdab <=_gafcc ._feeg ;};func _cdec (_dddc ,_ged bounded )float64 {return _dddc .bbox ().Llx -_ged .bbox ().Llx };func _fgdbbg (_abceb []*textWord ,_fede int )[]*textWord {_adbbf :=len (_abceb );
copy (_abceb [_fede :],_abceb [_fede +1:]);return _abceb [:_adbbf -1];};

// ImageExtractOptions contains options for controlling image extraction from
// PDF pages.
type ImageExtractOptions struct{IncludeInlineStencilMasks bool ;};

// ExtractText processes and extracts all text data in content streams and returns as a string.
// It takes into account character encodings in the PDF file, which are decoded by
// CharcodeBytesToUnicode.
// Characters that can't be decoded are replaced with MissingCodeRune ('\ufffd' = ).
func (_ecd *Extractor )ExtractText ()(string ,error ){_cgc ,_ ,_ ,_fdec :=_ecd .ExtractTextWithStats ();return _cgc ,_fdec ;};func (_aacf rulingList )secMinMax ()(float64 ,float64 ){_bcbb ,_bfcfda :=_aacf [0]._caafe ,_aacf [0]._feeg ;for _ ,_dfbd :=range _aacf [1:]{if _dfbd ._caafe < _bcbb {_bcbb =_dfbd ._caafe ;
};if _dfbd ._feeg > _bfcfda {_bfcfda =_dfbd ._feeg ;};};return _bcbb ,_bfcfda ;};

// ImageMark represents an image drawn on a page and its position in device coordinates.
// All coordinates are in device coordinates.
type ImageMark struct{Image *_ea .Image ;

// Dimensions of the image as displayed in the PDF.
Width float64 ;Height float64 ;

// Position of the image in PDF coordinates (lower left corner).
X float64 ;Y float64 ;

// Angle in degrees, if rotated.
Angle float64 ;};func _gbga (_adgb []*textLine )map[float64 ][]*textLine {_f .Slice (_adgb ,func (_gde ,_geec int )bool {return _adgb [_gde ]._bacaf < _adgb [_geec ]._bacaf });_fbfg :=map[float64 ][]*textLine {};for _ ,_bcfb :=range _adgb {_geee :=_dgdb (_bcfb );
_geee =_dg .Round (_geee );_fbfg [_geee ]=append (_fbfg [_geee ],_bcfb );};return _fbfg ;};func _cdff (_cceb ,_dafef _aa .Point )bool {_dggg :=_dg .Abs (_cceb .X -_dafef .X );_abfgb :=_dg .Abs (_cceb .Y -_dafef .Y );return _agfge (_abfgb ,_dggg );};func _eegec (_efcfb []_ff .PdfObject )(_afcgg ,_cdcag float64 ,_geff error ){if len (_efcfb )!=2{return 0,0,_cc .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020o\u0066 \u0070\u0061\u0072\u0061\u006d\u0073\u003a \u0025\u0064",len (_efcfb ));
};_cgbd ,_geff :=_ff .GetNumbersAsFloat (_efcfb );if _geff !=nil {return 0,0,_geff ;};return _cgbd [0],_cgbd [1],nil ;};type paraList []*textPara ;func (_fgc *textObject )showText (_dgdeb _ff .PdfObject ,_egg []byte ,_bba int )error {return _fgc .renderText (_dgdeb ,_egg ,_bba );
};

// String returns a description of `k`.
func (_fabba markKind )String ()string {_befa ,_cag :=_fadcg [_fabba ];if !_cag {return _cc .Sprintf ("\u004e\u006f\u0074\u0020\u0061\u0020\u006d\u0061\u0072k\u003a\u0020\u0025\u0064",_fabba );};return _befa ;};

// String returns a human readable description of `s`.
func (_begfg intSet )String ()string {var _fdded []int ;for _bdff :=range _begfg {if _begfg .has (_bdff ){_fdded =append (_fdded ,_bdff );};};_f .Ints (_fdded );return _cc .Sprintf ("\u0025\u002b\u0076",_fdded );};func (_bcef *textObject )setCharSpacing (_eba float64 ){if _bcef ==nil {return ;
};_bcef ._aeg ._fbbf =_eba ;if _eaaca {_ce .Log .Info ("\u0073\u0065t\u0043\u0068\u0061\u0072\u0053\u0070\u0061\u0063\u0069\u006e\u0067\u003a\u0020\u0025\u002e\u0032\u0066\u0020\u0073\u0074\u0061\u0074e=\u0025\u0073",_eba ,_bcef ._aeg .String ());};};func _agdgd (_fafba string )bool {for _ ,_gcfbac :=range _fafba {if !_b .IsSpace (_gcfbac ){return false ;
};};return true ;};func (_aca *shapesState )newSubPath (){_aca .clearPath ();if _ageb {_ce .Log .Info ("\u006e\u0065\u0077\u0053\u0075\u0062\u0050\u0061\u0074h\u003a\u0020\u0025\u0073",_aca );};};func (_bdcba *wordBag )arrangeText ()*textPara {_bdcba .sort ();
if _ccfga {_bdcba .removeDuplicates ();};var _ddaf []*textLine ;for _ ,_gddbb :=range _bdcba .depthIndexes (){for !_bdcba .empty (_gddbb ){_geag :=_bdcba .firstReadingIndex (_gddbb );_acefc :=_bdcba .firstWord (_geag );_agdd :=_bdb (_bdcba ,_geag );_eeac :=_acefc ._cfdf ;
_fefe :=_acefc ._bcded -_abdc *_eeac ;_fagg :=_acefc ._bcded +_abdc *_eeac ;_cffad :=_aaafcf *_eeac ;_cacc :=_bfgc *_eeac ;_cedaf :for {var _fbaf *textWord ;_gcbb :=0;for _ ,_ffbda :=range _bdcba .depthBand (_fefe ,_fagg ){_ffed :=_bdcba .highestWord (_ffbda ,_fefe ,_fagg );
if _ffed ==nil {continue ;};_fceb :=_ggfd (_ffed ,_agdd ._aeeb [len (_agdd ._aeeb )-1]);if _fceb < -_cacc {break _cedaf ;};if _fceb > _cffad {continue ;};if _fbaf !=nil &&_cdec (_ffed ,_fbaf )>=0{continue ;};_fbaf =_ffed ;_gcbb =_ffbda ;};if _fbaf ==nil {break ;
};_agdd .pullWord (_bdcba ,_fbaf ,_gcbb );};_agdd .markWordBoundaries ();_ddaf =append (_ddaf ,_agdd );};};if len (_ddaf )==0{return nil ;};_f .Slice (_ddaf ,func (_dgeg ,_ecea int )bool {return _acfc (_ddaf [_dgeg ],_ddaf [_ecea ])< 0});_efgdef :=_bgcbd (_bdcba .PdfRectangle ,_ddaf );
if _ebd {_ce .Log .Info ("\u0061\u0072\u0072an\u0067\u0065\u0054\u0065\u0078\u0074\u0020\u0021\u0021\u0021\u0020\u0070\u0061\u0072\u0061\u003d\u0025\u0073",_efgdef .String ());if _eaca {for _afgaa ,_bfaed :=range _efgdef ._efde {_cc .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_afgaa ,_bfaed .String ());
if _bcdd {for _bgea ,_fgcdd :=range _bfaed ._aeeb {_cc .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_bgea ,_fgcdd .String ());for _cbfb ,_eeaac :=range _fgcdd ._fcac {_cc .Printf ("\u00251\u0032\u0064\u003a\u0020\u0025\u0073\n",_cbfb ,_eeaac .String ());
};};};};};};return _efgdef ;};func _aeac (_gbff []TextMark ,_feaf *int )[]TextMark {_befg :=_gbff [len (_gbff )-1];_gcdge :=[]rune (_befg .Text );if len (_gcdge )==1{_gbff =_gbff [:len (_gbff )-1];_gcffd :=_gbff [len (_gbff )-1];*_feaf =_gcffd .Offset +len (_gcffd .Text );
}else {_eabd :=_bbaf (_befg .Text );*_feaf +=len (_eabd )-len (_befg .Text );_befg .Text =_eabd ;};return _gbff ;};func _begfc (_beca []int )[]int {_feaec :=make ([]int ,len (_beca ));for _edefb ,_bada :=range _beca {_feaec [len (_beca )-1-_edefb ]=_bada ;
};return _feaec ;};func (_aecac paraList )findTables (_egcf []gridTiling )[]*textTable {_aecac .addNeighbours ();_f .Slice (_aecac ,func (_bdce ,_ecgee int )bool {return _fadc (_aecac [_bdce ],_aecac [_ecgee ])< 0});var _ggcff []*textTable ;if _egdf {_gecf :=_aecac .findGridTables (_egcf );
_ggcff =append (_ggcff ,_gecf ...);};if _dea {_dcgc :=_aecac .findTextTables ();_ggcff =append (_ggcff ,_dcgc ...);};return _ggcff ;};func (_ggec *subpath )close (){if !_eacge (_ggec ._fbca [0],_ggec .last ()){_ggec .add (_ggec ._fbca [0]);};_ggec ._dbad =true ;
_ggec .removeDuplicates ();};func (_bceb *shapesState )fill (_bdcb *[]pathSection ){_ccac :=pathSection {_aggc :_bceb ._fbfe ,Color :_bceb ._debc .getFillColor ()};*_bdcb =append (*_bdcb ,_ccac );if _fdee {_eag :=_ccac .bbox ();_cc .Printf ("\u0020 \u0020\u0020\u0046\u0049\u004c\u004c\u003a %\u0032\u0064\u0020\u0066\u0069\u006c\u006c\u0073\u0020\u0028\u0025\u0064\u0020\u006ee\u0077\u0029 \u0073\u0073\u003d%\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d\u0025\u0033\u0076\u0020\u0025\u0036\u002e\u0032f\u003d\u00256.\u0032\u0066\u0078%\u0036\u002e\u0032\u0066\u000a",len (*_bdcb ),len (_ccac ._aggc ),_bceb ,_ccac .Color ,_eag ,_eag .Width (),_eag .Height ());
if _agdc {for _eed ,_dbf :=range _ccac ._aggc {_cc .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_eed ,_dbf );if _eed ==10{break ;};};};};};type event struct{_gdbb float64 ;_eeaee bool ;_dcbbd int ;};func (_fdeb paraList )sortTopoOrder (){_faefa :=_fdeb .topoOrder ();
_fdeb .reorder (_faefa )};func (_abdbf rulingList )comp (_eeaaca ,_ggce int )bool {_bggac ,_gbcc :=_abdbf [_eeaaca ],_abdbf [_ggce ];_afcg ,_bfgb :=_bggac ._deecb ,_gbcc ._deecb ;if _afcg !=_bfgb {return _afcg > _bfgb ;};if _afcg ==_aaebd {return false ;
};_cefef :=func (_ddcdd bool )bool {if _afcg ==_dbdde {return _ddcdd ;};return !_ddcdd ;};_dagc ,_gdcg :=_bggac ._bbdbe ,_gbcc ._bbdbe ;if _dagc !=_gdcg {return _cefef (_dagc > _gdcg );};_dagc ,_gdcg =_bggac ._caafe ,_gbcc ._caafe ;if _dagc !=_gdcg {return _cefef (_dagc < _gdcg );
};return _cefef (_bggac ._feeg < _gbcc ._feeg );};func _gcff (_bfea *list )[]*list {var _dgdgd []*list ;for _ ,_cfab :=range _bfea ._daffa {switch _cfab ._aegd {case "\u004c\u0049":_dfaa :=_begf (_cfab );_dddd :=_gcff (_cfab );_afgf :=_dfeec (_dfaa ,"\u0062\u0075\u006c\u006c\u0065\u0074",_dddd );
_abcdd :=_aegb (_dfaa ,"");_afgf ._cdag =_abcdd ;_dgdgd =append (_dgdgd ,_afgf );case "\u004c\u0042\u006fd\u0079":return _gcff (_cfab );case "\u004c":_bgee :=_gcff (_cfab );_dgdgd =append (_dgdgd ,_bgee ...);return _dgdgd ;};};return _dgdgd ;};func (_aecc *stateStack )top ()*textState {if _aecc .empty (){return nil ;
};return (*_aecc )[_aecc .size ()-1];};func _agdgb (_bbde float64 ,_fbdg int )int {if _fbdg ==0{_fbdg =1;};_edfg :=float64 (_fbdg );return int (_dg .Round (_bbde /_edfg )*_edfg );};func (_agc *textObject )renderText (_gcac _ff .PdfObject ,_gfcf []byte ,_gef int )error {if _agc ._dagf {_ce .Log .Debug ("\u0072\u0065\u006e\u0064\u0065r\u0054\u0065\u0078\u0074\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069\u0064 \u0066\u006f\u006e\u0074\u002e\u0020\u004e\u006f\u0074\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u002e");
return nil ;};_aef :=_agc .getCurrentFont ();_cbe :=_aef .BytesToCharcodes (_gfcf );_abcd ,_acc ,_gaae :=_aef .CharcodesToStrings (_cbe );if _gaae > 0{_ce .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_acc ,_gaae );
};_agc ._aeg ._ggdgd +=_acc ;_agc ._aeg ._bgb +=_gaae ;_bad :=_agc ._aeg ;_gfa :=_bad ._dfg ;_cfc :=_bad ._egf /100.0;_dbc :=_adfc ;if _aef .Subtype ()=="\u0054\u0079\u0070e\u0033"{_dbc =1;};_gabe ,_geba :=_aef .GetRuneMetrics (' ');if !_geba {_gabe ,_geba =_aef .GetCharMetrics (32);
};if !_geba {_gabe ,_ =_ea .DefaultFont ().GetRuneMetrics (' ');};_caacb :=_gabe .Wx *_dbc ;_ce .Log .Trace ("\u0073p\u0061\u0063e\u0057\u0069\u0064t\u0068\u003d\u0025\u002e\u0032\u0066\u0020t\u0065\u0078\u0074\u003d\u0025\u0071 \u0066\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0066\u006f\u006et\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",_caacb ,_abcd ,_aef ,_gfa );
_cbc :=_aa .NewMatrix (_gfa *_cfc ,0,0,_gfa ,0,_bad ._gcc );if _eaaca {_ce .Log .Info ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0074\u0065\u0078t\u0073\u003d\u0025\u0071",len (_cbe ),_cbe ,_abcd );
};_ce .Log .Trace ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0072\u0075\u006ee\u0073\u003d\u0025\u0071",len (_cbe ),_cbe ,len (_abcd ));_bbd :=_agc .getFillColor ();
_ffg :=_agc .getStrokeColor ();for _cbfd ,_bfcc :=range _abcd {_gabb :=[]rune (_bfcc );if len (_gabb )==1&&_gabb [0]=='\x00'{continue ;};_bgcc :=_cbe [_cbfd ];_fcd :=_agc ._gbb .CTM .Mult (_agc ._eafe ).Mult (_cbc );_ace :=0.0;if len (_gabb )==1&&_gabb [0]==32{_ace =_bad ._cffe ;
};_bbac ,_ada :=_aef .GetCharMetrics (_bgcc );if !_ada {_ce .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u004e\u006f \u006d\u0065\u0074r\u0069\u0063\u0020\u0066\u006f\u0072\u0020\u0063\u006fde\u003d\u0025\u0064 \u0072\u003d0\u0078\u0025\u0030\u0034\u0078\u003d%\u002b\u0071 \u0025\u0073",_bgcc ,_gabb ,_gabb ,_aef );
return _cc .Errorf ("\u006e\u006f\u0020\u0063\u0068\u0061\u0072\u0020\u006d\u0065\u0074\u0072\u0069\u0063\u0073:\u0020f\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0063\u006f\u0064\u0065\u003d\u0025\u0064",_aef .String (),_bgcc );};_eecc :=_aa .Point {X :_bbac .Wx *_dbc ,Y :_bbac .Wy *_dbc };
_effg :=_aa .Point {X :(_eecc .X *_gfa +_ace )*_cfc };_adg :=_aa .Point {X :(_eecc .X *_gfa +_bad ._fbbf +_ace )*_cfc };if _eaaca {_ce .Log .Info ("\u0074\u0066\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0063\u003d\u0025\u002e\u0032f\u0020t\u0077\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_gfa ,_bad ._fbbf ,_bad ._cffe ,_cfc );
_ce .Log .Info ("\u0064x\u002c\u0064\u0079\u003d%\u002e\u0033\u0066\u0020\u00740\u003d%\u002e3\u0066\u0020\u0074\u003d\u0025\u002e\u0033f",_eecc ,_effg ,_adg );};_debb :=_ebab (_effg );_aag :=_ebab (_adg );_eaaaa :=_agc ._gbb .CTM .Mult (_agc ._eafe ).Mult (_debb );
if _daff {_ce .Log .Info ("e\u006e\u0064\u003a\u000a\tC\u0054M\u003d\u0025\u0073\u000a\u0009 \u0074\u006d\u003d\u0025\u0073\u000a"+"\u0009\u0020t\u0064\u003d\u0025s\u0020\u0078\u006c\u0061\u0074\u003d\u0025\u0073\u000a"+"\u0009t\u0064\u0030\u003d\u0025s\u000a\u0009\u0020\u0020\u2192 \u0025s\u0020x\u006c\u0061\u0074\u003d\u0025\u0073",_agc ._gbb .CTM ,_agc ._eafe ,_aag ,_fefc (_agc ._gbb .CTM .Mult (_agc ._eafe ).Mult (_aag )),_debb ,_eaaaa ,_fefc (_eaaaa ));
};_cdca ,_cfff :=_agc .newTextMark (_ec .ExpandLigatures (_gabb ),_fcd ,_fefc (_eaaaa ),_dg .Abs (_caacb *_fcd .ScalingFactorX ()),_aef ,_agc ._aeg ._fbbf ,_bbd ,_ffg ,_gcac ,_abcd ,_cbfd ,_gef );if !_cfff {_ce .Log .Debug ("\u0054\u0065\u0078\u0074\u0020\u006d\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069d\u0065 \u0070\u0061\u0067\u0065\u002e\u0020\u0053\u006b\u0069\u0070\u0070\u0069\u006e\u0067");
continue ;};if _aef ==nil {_ce .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u002e");}else if _aef .Encoder ()==nil {_ce .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020N\u006f\u0020\u0065\u006e\u0063\u006f\u0064\u0069\u006eg\u002e\u0020\u0066o\u006et\u003d\u0025\u0073",_aef );
}else {if _gdf ,_bbbg :=_aef .Encoder ().CharcodeToRune (_bgcc );_bbbg {_cdca ._efgc =string (_gdf );};};_ce .Log .Trace ("i\u003d\u0025\u0064\u0020\u0063\u006fd\u0065\u003d\u0025\u0064\u0020\u006d\u0061\u0072\u006b=\u0025\u0073\u0020t\u0072m\u003d\u0025\u0073",_cbfd ,_bgcc ,_cdca ,_fcd );
_agc ._gfbg =append (_agc ._gfbg ,&_cdca );_agc ._eafe .Concat (_aag );};return nil ;};func _dfee (_ffba _ea .PdfRectangle ,_fbfa bounded )float64 {return _ffba .Ury -_fbfa .bbox ().Lly };func (_dedb compositeCell )String ()string {_bcdf :="";if len (_dedb .paraList )> 0{_bcdf =_efcb (_dedb .paraList .merge ().text (),50);
};return _cc .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0070\u0061\u0072a\u0073\u0020\u0025\u0071",_dedb .PdfRectangle ,len (_dedb .paraList ),_bcdf );};func (_gcfbb *shapesState )quadraticTo (_dbea ,_bfdeg ,_feed ,_fgbac float64 ){if _ageb {_ce .Log .Info ("\u0071\u0075\u0061d\u0072\u0061\u0074\u0069\u0063\u0054\u006f\u003a");
};_gcfbb .addPoint (_feed ,_fgbac );};func _dgg (_eggd *Extractor ,_cged *_ea .PdfPageResources ,_fdda _g .GraphicsState ,_ddea *textState ,_egebd *stateStack )*textObject {return &textObject {_bddd :_eggd ,_abfe :_cged ,_gbb :_fdda ,_defc :_egebd ,_aeg :_ddea ,_eafe :_aa .IdentityMatrix (),_gcdg :_aa .IdentityMatrix ()};
};func _dcgdg (_fdbc *PageText )error {_agaaf :=_ad .GetLicenseKey ();if _agaaf !=nil &&_agaaf .IsLicensed ()||_cdf {return nil ;};_cc .Printf ("\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064\u0020c\u006f\u0070\u0079\u0020\u006f\u0066\u0020\u0055\u006e\u0069P\u0044\u0046\u000a");
_cc .Println ("-\u0020\u0047\u0065\u0074\u0020\u0061\u0020\u0066\u0072e\u0065\u0020\u0074\u0072\u0069\u0061\u006c l\u0069\u0063\u0065\u006es\u0065\u0020\u006f\u006e\u0020\u0068\u0074\u0074\u0070s:\u002f\u002fu\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f");
return _e .New ("\u0075\u006e\u0069\u0070d\u0066\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020c\u006fd\u0065\u0020\u0072\u0065\u0071\u0075\u0069r\u0065\u0064");};func (_facbf *textPara )writeText (_gaaf _d .Writer ){if _facbf ._geeb ==nil {_facbf .writeCellText (_gaaf );
return ;};for _eece :=0;_eece < _facbf ._geeb ._bgdf ;_eece ++{for _fbfac :=0;_fbfac < _facbf ._geeb ._fdaegd ;_fbfac ++{_ccegf :=_facbf ._geeb .get (_fbfac ,_eece );if _ccegf ==nil {_gaaf .Write ([]byte ("\u0009"));}else {_ccegf .writeCellText (_gaaf );
};_gaaf .Write ([]byte ("\u0020"));};if _eece < _facbf ._geeb ._bgdf -1{_gaaf .Write ([]byte ("\u000a"));};};};func (_agfg *textObject )nextLine (){_agfg .moveLP (0,-_agfg ._aeg ._ccc )};func _cggb (_ccgad []*textMark ,_eeed _ea .PdfRectangle )*textWord {_aaaa :=_ccgad [0].PdfRectangle ;
_dedge :=_ccgad [0]._gfdeb ;for _ ,_acfcf :=range _ccgad [1:]{_aaaa =_aaafc (_aaaa ,_acfcf .PdfRectangle );if _acfcf ._gfdeb > _dedge {_dedge =_acfcf ._gfdeb ;};};return &textWord {PdfRectangle :_aaaa ,_fcac :_ccgad ,_bcded :_eeed .Ury -_aaaa .Lly ,_cfdf :_dedge };
};var _fadcg =map[markKind ]string {_ebcfg :"\u0073\u0074\u0072\u006f\u006b\u0065",_gdb :"\u0066\u0069\u006c\u006c",_bdba :"\u0061u\u0067\u006d\u0065\u006e\u0074"};func (_gfbbb *textPara )bbox ()_ea .PdfRectangle {return _gfbbb .PdfRectangle };

// ExtractTextWithStats works like ExtractText but returns the number of characters in the output
// (`numChars`) and the number of characters that were not decoded (`numMisses`).
func (_abc *Extractor )ExtractTextWithStats ()(_bbgb string ,_fba int ,_fffe int ,_dfc error ){_de ,_fba ,_fffe ,_dfc :=_abc .ExtractPageText ();if _dfc !=nil {return "",_fba ,_fffe ,_dfc ;};return _de .Text (),_fba ,_fffe ,nil ;};func (_dcdgb rulingList )blocks (_baeb ,_edgab *ruling )bool {if _baeb ._caafe > _edgab ._feeg ||_edgab ._caafe > _baeb ._feeg {return false ;
};_ecge :=_dg .Max (_baeb ._caafe ,_edgab ._caafe );_fagef :=_dg .Min (_baeb ._feeg ,_edgab ._feeg );if _baeb ._bbdbe > _edgab ._bbdbe {_baeb ,_edgab =_edgab ,_baeb ;};for _ ,_fdcfa :=range _dcdgb {if _baeb ._bbdbe <=_fdcfa ._bbdbe +_fbge &&_fdcfa ._bbdbe <=_edgab ._bbdbe +_fbge &&_fdcfa ._caafe <=_fagef &&_ecge <=_fdcfa ._feeg {return true ;
};};return false ;};type textObject struct{_bddd *Extractor ;_abfe *_ea .PdfPageResources ;_gbb _g .GraphicsState ;_aeg *textState ;_defc *stateStack ;_eafe _aa .Matrix ;_gcdg _aa .Matrix ;_gfbg []*textMark ;_dagf bool ;};func _dade (_eefe []*textMark ,_fgdfe _ea .PdfRectangle )[]*textWord {var _egcce []*textWord ;
var _cecdc *textWord ;if _egeba {_ce .Log .Info ("\u006d\u0061\u006beT\u0065\u0078\u0074\u0057\u006f\u0072\u0064\u0073\u003a\u0020\u0025\u0064\u0020\u006d\u0061\u0072\u006b\u0073",len (_eefe ));};_abfde :=func (){if _cecdc !=nil {_dccc :=_cecdc .computeText ();
if !_agdgd (_dccc ){_cecdc ._baea =_dccc ;_egcce =append (_egcce ,_cecdc );if _egeba {_ce .Log .Info ("\u0061\u0064\u0064Ne\u0077\u0057\u006f\u0072\u0064\u003a\u0020\u0025\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",len (_egcce )-1,_cecdc .String ());
for _cgaga ,_eeafe :=range _cecdc ._fcac {_cc .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cgaga ,_eeafe .String ());};};};_cecdc =nil ;};};for _ ,_gfdd :=range _eefe {if _abaf &&_cecdc !=nil &&len (_cecdc ._fcac )> 0{_aaggd :=_cecdc ._fcac [len (_cecdc ._fcac )-1];
_aedba ,_gedc :=_aefea (_gfdd ._face );_eecgb ,_fdbga :=_aefea (_aaggd ._face );if _gedc &&!_fdbga &&_aaggd .inDiacriticArea (_gfdd ){_cecdc .addDiacritic (_aedba );continue ;};if _fdbga &&!_gedc &&_gfdd .inDiacriticArea (_aaggd ){_cecdc ._fcac =_cecdc ._fcac [:len (_cecdc ._fcac )-1];
_cecdc .appendMark (_gfdd ,_fgdfe );_cecdc .addDiacritic (_eecgb );continue ;};};_bfcbf :=_agdgd (_gfdd ._face );if _bfcbf {_abfde ();continue ;};if _cecdc ==nil &&!_bfcbf {_cecdc =_cggb ([]*textMark {_gfdd },_fgdfe );continue ;};_aggf :=_cecdc ._cfdf ;
_fddea :=_dg .Abs (_dfee (_fgdfe ,_gfdd )-_cecdc ._bcded )/_aggf ;_aeedd :=_ggfd (_gfdd ,_cecdc )/_aggf ;if _aeedd >=_ccbc ||!(-_cedag <=_aeedd &&_fddea <=_eccd ){_abfde ();_cecdc =_cggb ([]*textMark {_gfdd },_fgdfe );continue ;};_cecdc .appendMark (_gfdd ,_fgdfe );
};_abfde ();return _egcce ;};func _adbfe (_beaa []*textLine ,_caabd map[float64 ][]*textLine )[]*list {_gadc :=_cggc (_caabd );_gaaec :=[]*list {};if len (_gadc )==0{return _gaaec ;};_fggf :=_gadc [0];_gcge :=1;_gdef :=_caabd [_fggf ];for _gcgd ,_dffdd :=range _gdef {var _debg float64 ;
_eege :=[]*list {};_bbbca :=_dffdd ._bacaf ;_ccefd :=-1.0;if _gcgd < len (_gdef )-1{_ccefd =_gdef [_gcgd +1]._bacaf ;};if _gcge < len (_gadc ){_eege =_cbab (_beaa ,_caabd ,_gadc ,_gcge ,_bbbca ,_ccefd );};_debg =_ccefd ;if len (_eege )> 0{_efca :=_eege [0];
if len (_efca ._dcbb )> 0{_debg =_efca ._dcbb [0]._bacaf ;};};_fggd :=[]*textLine {_dffdd };_bfgd :=_fgfc (_dffdd ,_beaa ,_gadc ,_bbbca ,_debg );_fggd =append (_fggd ,_bfgd ...);_gcca :=_dfeec (_fggd ,"\u0062\u0075\u006c\u006c\u0065\u0074",_eege );_gcca ._cdag =_aegb (_fggd ,"");
_gaaec =append (_gaaec ,_gcca );};return _gaaec ;};func (_dgbbc rulingList )snapToGroups ()rulingList {_bbcf ,_fgdfg :=_dgbbc .vertsHorzs ();if len (_bbcf )> 0{_bbcf =_bbcf .snapToGroupsDirection ();};if len (_fgdfg )> 0{_fgdfg =_fgdfg .snapToGroupsDirection ();
};_fcfbe :=append (_bbcf ,_fgdfg ...);_fcfbe .log ("\u0073\u006e\u0061p\u0054\u006f\u0047\u0072\u006f\u0075\u0070\u0073");return _fcfbe ;};func (_ddbba *textTable )reduceTiling (_caag gridTiling ,_dcce float64 )*textTable {_abgfb :=make ([]int ,0,_ddbba ._bgdf );
_dfbgd :=make ([]int ,0,_ddbba ._fdaegd );_bgdaa :=_caag ._fdbf ;_ccgb :=_caag ._eebc ;for _abba :=0;_abba < _ddbba ._bgdf ;_abba ++{_fdbfc :=_abba > 0&&_dg .Abs (_ccgb [_abba -1]-_ccgb [_abba ])< _dcce &&_ddbba .emptyCompositeRow (_abba );if !_fdbfc {_abgfb =append (_abgfb ,_abba );
};};for _ddedg :=0;_ddedg < _ddbba ._fdaegd ;_ddedg ++{_abda :=_ddedg < _ddbba ._fdaegd -1&&_dg .Abs (_bgdaa [_ddedg +1]-_bgdaa [_ddedg ])< _dcce &&_ddbba .emptyCompositeColumn (_ddedg );if !_abda {_dfbgd =append (_dfbgd ,_ddedg );};};if len (_abgfb )==_ddbba ._bgdf &&len (_dfbgd )==_ddbba ._fdaegd {return _ddbba ;
};_dgdc :=textTable {_cadg :_ddbba ._cadg ,_fdaegd :len (_dfbgd ),_bgdf :len (_abgfb ),_ebddd :make (map[uint64 ]compositeCell ,len (_dfbgd )*len (_abgfb ))};if _gfde {_ce .Log .Info ("\u0072\u0065\u0064\u0075c\u0065\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0025d\u0078%\u0064\u0020\u002d\u003e\u0020\u0025\u0064x\u0025\u0064",_ddbba ._fdaegd ,_ddbba ._bgdf ,len (_dfbgd ),len (_abgfb ));
_ce .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_dfbgd );_ce .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_abgfb );};for _gcdfa ,_ebdcg :=range _abgfb {for _ebdbg ,_cgeef :=range _dfbgd {_cfbf ,_efcfe :=_ddbba .getComposite (_cgeef ,_ebdcg );
if len (_cfbf )==0{continue ;};if _gfde {_cc .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_ebdbg ,_gcdfa ,_cgeef ,_ebdcg ,_efcb (_cfbf .merge ().text (),50));};_dgdc .putComposite (_ebdbg ,_gcdfa ,_cfbf ,_efcfe );
};};return &_dgdc ;};func _baaec (_dfabg ,_bcfbg _aa .Point )rulingKind {_gfce :=_dg .Abs (_dfabg .X -_bcfbg .X );_fcad :=_dg .Abs (_dfabg .Y -_bcfbg .Y );return _bgbg (_gfce ,_fcad ,_ccef );};func _aaaf (_eeda *wordBag ,_fgdb *textWord ,_dcee float64 )bool {return _eeda .Urx <=_fgdb .Llx &&_fgdb .Llx < _eeda .Urx +_dcee ;
};func (_ecca *textTable )bbox ()_ea .PdfRectangle {return _ecca .PdfRectangle };func (_ebdd rulingList )toGrids ()[]rulingList {if _fdee {_ce .Log .Info ("t\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0025\u0073",_ebdd );};_eedd :=_ebdd .intersections ();
if _fdee {_ce .Log .Info ("\u0074\u006f\u0047r\u0069\u0064\u0073\u003a \u0076\u0065\u0063\u0073\u003d\u0025\u0064 \u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003d\u0025\u0064\u0020",len (_ebdd ),len (_eedd ));for _ ,_badf :=range _adgc (_eedd ){_cc .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_badf ,_eedd [_badf ]);
};};_cgcd :=make (map[int ]intSet ,len (_ebdd ));for _fdagd :=range _ebdd {_debgg :=_ebdd .connections (_eedd ,_fdagd );if len (_debgg )> 0{_cgcd [_fdagd ]=_debgg ;};};if _fdee {_ce .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0063\u006fn\u006e\u0065\u0063\u0074s=\u0025\u0064",len (_cgcd ));
for _ ,_afabg :=range _adgc (_cgcd ){_cc .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_afabg ,_cgcd [_afabg ]);};};_bagac :=_cgba (len (_ebdd ),func (_dcea ,_facg int )bool {_ffde ,_ecacd :=len (_cgcd [_dcea ]),len (_cgcd [_facg ]);if _ffde !=_ecacd {return _ffde > _ecacd ;
};return _ebdd .comp (_dcea ,_facg );});if _fdee {_ce .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u006f\u0072d\u0065\u0072\u0069\u006eg=\u0025\u0076",_bagac );};_bffe :=[][]int {{_bagac [0]}};_accbc :for _ ,_agfb :=range _bagac [1:]{for _fccc ,_eddd :=range _bffe {for _ ,_gagc :=range _eddd {if _cgcd [_gagc ].has (_agfb ){_bffe [_fccc ]=append (_eddd ,_agfb );
continue _accbc ;};};};_bffe =append (_bffe ,[]int {_agfb });};if _fdee {_ce .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020i\u0067\u0072i\u0064\u0073\u003d\u0025\u0076",_bffe );};_f .SliceStable (_bffe ,func (_afbg ,_ccfeg int )bool {return len (_bffe [_afbg ])> len (_bffe [_ccfeg ])});
for _ ,_ebgd :=range _bffe {_f .Slice (_ebgd ,func (_cbffg ,_ebdb int )bool {return _ebdd .comp (_ebgd [_cbffg ],_ebgd [_ebdb ])});};_fcag :=make ([]rulingList ,len (_bffe ));for _gcaa ,_deaf :=range _bffe {_gbfcg :=make (rulingList ,len (_deaf ));for _bgbb ,_aaged :=range _deaf {_gbfcg [_bgbb ]=_ebdd [_aaged ];
};_fcag [_gcaa ]=_gbfcg ;};if _fdee {_ce .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020g\u0072\u0069d\u0073\u003d\u0025\u002b\u0076",_fcag );};var _bcac []rulingList ;for _ ,_afcd :=range _fcag {if _cfdbb ,_edaag :=_afcd .isActualGrid ();_edaag {_afcd =_cfdbb ;
_afcd =_afcd .snapToGroups ();_bcac =append (_bcac ,_afcd );};};if _fdee {_dfcf ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0061\u0063t\u0075\u0061\u006c\u0047ri\u0064\u0073",_bcac );_ce .Log .Info ("\u0074\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0067\u0072\u0069\u0064\u0073\u003d%\u0064 \u0061\u0063\u0074\u0075\u0061\u006c\u0047\u0072\u0069\u0064\u0073\u003d\u0025\u0064",len (_fcag ),len (_bcac ));
};return _bcac ;};func (_cabg *ruling )equals (_acab *ruling )bool {return _cabg ._deecb ==_acab ._deecb &&_ccgc (_cabg ._bbdbe ,_acab ._bbdbe )&&_ccgc (_cabg ._caafe ,_acab ._caafe )&&_ccgc (_cabg ._feeg ,_acab ._feeg );};func (_bdde *shapesState )closePath (){if _bdde ._ddgb {_bdde ._fbfe =append (_bdde ._fbfe ,_gefa (_bdde ._cgac ));
_bdde ._ddgb =false ;}else if len (_bdde ._fbfe )==0{if _ageb {_ce .Log .Debug ("\u0063\u006c\u006f\u0073eP\u0061\u0074\u0068\u0020\u0077\u0069\u0074\u0068\u0020\u006e\u006f\u0020\u0070\u0061t\u0068");};_bdde ._ddgb =false ;return ;};_bdde ._fbfe [len (_bdde ._fbfe )-1].close ();
if _ageb {_ce .Log .Info ("\u0063\u006c\u006f\u0073\u0065\u0050\u0061\u0074\u0068\u003a\u0020\u0025\u0073",_bdde );};};func (_dcafd rulingList )intersections ()map[int ]intSet {var _dfdb ,_agcg []int ;for _gcgb ,_dafge :=range _dcafd {switch _dafge ._deecb {case _efcab :_dfdb =append (_dfdb ,_gcgb );
case _dbdde :_agcg =append (_agcg ,_gcgb );};};if len (_dfdb )< _eafa +1||len (_agcg )< _gbafc +1{return nil ;};if len (_dfdb )+len (_agcg )> _edaf {_ce .Log .Debug ("\u0069\u006e\u0074\u0065\u0072\u0073e\u0063\u0074\u0069\u006f\u006e\u0073\u003a\u0020\u0054\u004f\u004f\u0020\u004d\u0041\u004e\u0059\u0020\u0072\u0075\u006ci\u006e\u0067\u0073\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u003d\u0020%\u0064 \u0078\u0020\u0025\u0064",len (_dcafd ),len (_dfdb ),len (_agcg ));
return nil ;};_fbfbc :=make (map[int ]intSet ,len (_dfdb )+len (_agcg ));for _ ,_agfc :=range _dfdb {for _ ,_gbeega :=range _agcg {if _dcafd [_agfc ].intersects (_dcafd [_gbeega ]){if _ ,_bgdg :=_fbfbc [_agfc ];!_bgdg {_fbfbc [_agfc ]=make (intSet );};
if _ ,_fbaa :=_fbfbc [_gbeega ];!_fbaa {_fbfbc [_gbeega ]=make (intSet );};_fbfbc [_agfc ].add (_gbeega );_fbfbc [_gbeega ].add (_agfc );};};};return _fbfbc ;};func (_cfdg *ruling )encloses (_acced ,_cdfe float64 )bool {return _cfdg ._caafe -_deab <=_acced &&_cdfe <=_cfdg ._feeg +_deab ;
};const _faac =10;func _fdacg (_bcag ,_cfcg bounded )float64 {return _eaag (_bcag )-_eaag (_cfcg )};func (_gbagg *structTreeRoot )buildList (_gdde map[int ][]*textLine ,_daeg _ff .PdfObject )[]*list {if _gbagg ==nil {_ce .Log .Debug ("\u0062\u0075\u0069\u006c\u0064\u004c\u0069\u0073\u0074\u003a\u0020t\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0069\u0073 \u006e\u0069\u006c");
return nil ;};var _bdfd *structElement ;_abgfg :=[]structElement {};if len (_gbagg ._cdgg )==1{_dbed :=_gbagg ._cdgg [0]._gabd ;if _dbed =="\u0044\u006f\u0063\u0075\u006d\u0065\u006e\u0074"||_dbed =="\u0053\u0065\u0063\u0074"||_dbed =="\u0050\u0061\u0072\u0074"||_dbed =="\u0044\u0069\u0076"||_dbed =="\u0041\u0072\u0074"{_bdfd =&_gbagg ._cdgg [0];
};}else {_bdfd =&structElement {_bdfb :_gbagg ._cdgg ,_gabd :_gbagg ._edcg };};if _bdfd ==nil {_ce .Log .Debug ("\u0062\u0075\u0069\u006cd\u004c\u0069\u0073\u0074\u003a\u0020\u0074\u006f\u0070\u0045l\u0065m\u0065\u006e\u0074\u0020\u0069\u0073\u0020n\u0069\u006c");
return nil ;};for _ ,_cfcgg :=range _bdfd ._bdfb {if _cfcgg ._gabd =="\u004c"{_abgfg =append (_abgfg ,_cfcgg );}else if _cfcgg ._gabd =="\u0054\u0061\u0062l\u0065"{_addf :=_bfec (_cfcgg );_abgfg =append (_abgfg ,_addf ...);};};_facba :=_gbab (_abgfg ,_gdde ,_daeg );
var _aebc []*list ;for _ ,_ebcf :=range _facba {_adge :=_gcff (_ebcf );_aebc =append (_aebc ,_adge ...);};return _aebc ;};

// Tables returns the tables extracted from the page.
func (_acbd PageText )Tables ()[]TextTable {if _gfde {_ce .Log .Info ("\u0054\u0061\u0062\u006c\u0065\u0073\u003a\u0020\u0025\u0064",len (_acbd ._fdf ));};return _acbd ._fdf ;};func (_eaeb *subpath )removeDuplicates (){if len (_eaeb ._fbca )==0{return ;
};_bfeb :=[]_aa .Point {_eaeb ._fbca [0]};for _ ,_gee :=range _eaeb ._fbca [1:]{if !_eacge (_gee ,_bfeb [len (_bfeb )-1]){_bfeb =append (_bfeb ,_gee );};};_eaeb ._fbca =_bfeb ;};func (_dfaec *textWord )computeText ()string {_egcg :=make ([]string ,len (_dfaec ._fcac ));
for _ccedb ,_cdcd :=range _dfaec ._fcac {_egcg [_ccedb ]=_cdcd ._face ;};return _dbe .Join (_egcg ,"");};

// GetContentStreamOps returns the contentStreamOps field of `pt`.
func (_ffdd *PageText )GetContentStreamOps ()*_g .ContentStreamOperations {return _ffdd ._dggd };

// String returns a human readable description of `vecs`.
func (_cebf rulingList )String ()string {if len (_cebf )==0{return "\u007b \u0045\u004d\u0050\u0054\u0059\u0020}";};_cbabb ,_eabgd :=_cebf .vertsHorzs ();_fffa :=len (_cbabb );_cfcgd :=len (_eabgd );if _fffa ==0||_cfcgd ==0{return _cc .Sprintf ("\u007b%\u0064\u0020\u0078\u0020\u0025\u0064}",_fffa ,_cfcgd );
};_bbcc :=_ea .PdfRectangle {Llx :_cbabb [0]._bbdbe ,Urx :_cbabb [_fffa -1]._bbdbe ,Lly :_eabgd [_cfcgd -1]._bbdbe ,Ury :_eabgd [0]._bbdbe };return _cc .Sprintf ("\u007b\u0025d\u0020\u0078\u0020%\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u007d",_fffa ,_cfcgd ,_bbcc );
};func (_dagfa *textTable )reduce ()*textTable {_cbadf :=make ([]int ,0,_dagfa ._bgdf );_bfabg :=make ([]int ,0,_dagfa ._fdaegd );for _faggd :=0;_faggd < _dagfa ._bgdf ;_faggd ++{if !_dagfa .emptyCompositeRow (_faggd ){_cbadf =append (_cbadf ,_faggd );
};};for _dbda :=0;_dbda < _dagfa ._fdaegd ;_dbda ++{if !_dagfa .emptyCompositeColumn (_dbda ){_bfabg =append (_bfabg ,_dbda );};};if len (_cbadf )==_dagfa ._bgdf &&len (_bfabg )==_dagfa ._fdaegd {return _dagfa ;};_adad :=textTable {_cadg :_dagfa ._cadg ,_fdaegd :len (_bfabg ),_bgdf :len (_cbadf ),_bfeg :make (map[uint64 ]*textPara ,len (_bfabg )*len (_cbadf ))};
if _gfde {_ce .Log .Info ("\u0072\u0065\u0064\u0075ce\u003a\u0020\u0025\u0064\u0078\u0025\u0064\u0020\u002d\u003e\u0020\u0025\u0064\u0078%\u0064",_dagfa ._fdaegd ,_dagfa ._bgdf ,len (_bfabg ),len (_cbadf ));_ce .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_bfabg );
_ce .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_cbadf );};for _gafccc ,_cbbg :=range _cbadf {for _gffdc ,_cfgg :=range _bfabg {_cgeddb ,_ddadb :=_dagfa .getComposite (_cfgg ,_cbbg );if _cgeddb ==nil {continue ;
};if _gfde {_cc .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_gffdc ,_gafccc ,_cfgg ,_cbbg ,_efcb (_cgeddb .merge ().text (),50));};_adad .putComposite (_gffdc ,_gafccc ,_cgeddb ,_ddadb );
};};return &_adad ;};func (_ccdg *structElement )parseStructElement (_fbef _ff .PdfObject ){_adfd ,_bcffa :=_ff .GetDict (_fbef );if !_bcffa {_ce .Log .Debug ("\u0070\u0061\u0072\u0073\u0065\u0053\u0074\u0072u\u0063\u0074\u0045le\u006d\u0065\u006e\u0074\u003a\u0020d\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u002e");
return ;};_bbbad :=_adfd .Get ("\u0053");_egdc :=_adfd .Get ("\u0050\u0067");_agbc :="";if _bbbad !=nil {_agbc =_bbbad .String ();};_bgef :=_adfd .Get ("\u004b");_ccdg ._gabd =_agbc ;_ccdg ._bafed =_egdc ;switch _fafe :=_bgef .(type ){case *_ff .PdfObjectInteger :_ccdg ._gabd =_agbc ;
_ccdg ._bcee =int64 (*_fafe );_ccdg ._bafed =_egdc ;case *_ff .PdfObjectReference :_gdgdb :=*_ff .MakeArray (_fafe );var _dgad int64 =-1;_ccdg ._bcee =_dgad ;if _gdgdb .Len ()==1{_fgcf :=_gdgdb .Elements ()[0];_bfa ,_aefff :=_fgcf .(*_ff .PdfObjectInteger );
if _aefff {_dgad =int64 (*_bfa );_ccdg ._bcee =_dgad ;_ccdg ._gabd =_agbc ;_ccdg ._bafed =_egdc ;return ;};};_afga :=[]structElement {};for _ ,_beac :=range _gdgdb .Elements (){_afebc ,_ffeg :=_beac .(*_ff .PdfObjectInteger );if _ffeg {_dgad =int64 (*_afebc );
_ccdg ._bcee =_dgad ;_ccdg ._gabd =_agbc ;}else {_acgg :=&structElement {};_acgg .parseStructElement (_beac );_afga =append (_afga ,*_acgg );};_dgad =-1;};_ccdg ._bdfb =_afga ;case *_ff .PdfObjectArray :_eedg :=_bgef .(*_ff .PdfObjectArray );var _cdfcf int64 =-1;
_ccdg ._bcee =_cdfcf ;if _eedg .Len ()==1{_cffee :=_eedg .Elements ()[0];_aeba ,_ecac :=_cffee .(*_ff .PdfObjectInteger );if _ecac {_cdfcf =int64 (*_aeba );_ccdg ._bcee =_cdfcf ;_ccdg ._gabd =_agbc ;_ccdg ._bafed =_egdc ;return ;};};_fgbba :=[]structElement {};
for _ ,_ebeb :=range _eedg .Elements (){_cgaf ,_fcab :=_ebeb .(*_ff .PdfObjectInteger );if _fcab {_cdfcf =int64 (*_cgaf );_ccdg ._bcee =_cdfcf ;_ccdg ._gabd =_agbc ;_ccdg ._bafed =_egdc ;}else {_dgee :=&structElement {};_dgee .parseStructElement (_ebeb );
_fgbba =append (_fgbba ,*_dgee );};_cdfcf =-1;};_ccdg ._bdfb =_fgbba ;};};func (_facbd *textTable )computeBbox ()_ea .PdfRectangle {var _dafee _ea .PdfRectangle ;_acbbf :=false ;for _cced :=0;_cced < _facbd ._bgdf ;_cced ++{for _eaabd :=0;_eaabd < _facbd ._fdaegd ;
_eaabd ++{_ccbfa :=_facbd .get (_eaabd ,_cced );if _ccbfa ==nil {continue ;};if !_acbbf {_dafee =_ccbfa .PdfRectangle ;_acbbf =true ;}else {_dafee =_aaafc (_dafee ,_ccbfa .PdfRectangle );};};};return _dafee ;};

// Text gets the extracted text contained in `l`.
func (_befbf *list )Text ()string {_bded :=&_dbe .Builder {};_dcdc :="";_cdcb (_befbf ,_bded ,&_dcdc );return _bded .String ();};func (_ddd *wordBag )empty (_facfb int )bool {_ ,_cdeb :=_ddd ._edfa [_facfb ];return !_cdeb };

// ExtractPageImages returns the image contents of the page extractor, including data
// and position, size information for each image.
// A set of options to control page image extraction can be passed in. The options
// parameter can be nil for the default options. By default, inline stencil masks
// are not extracted.
func (_gge *Extractor )ExtractPageImages (options *ImageExtractOptions )(*PageImages ,error ){_ee :=&imageExtractContext {_df :options };_dde :=_ee .extractContentStreamImages (_gge ._ceb ,_gge ._bc );if _dde !=nil {return nil ,_dde ;};return &PageImages {Images :_ee ._cga },nil ;
};func _cbab (_dfcae []*textLine ,_fegc map[float64 ][]*textLine ,_egef []float64 ,_bdbf int ,_dcgd ,_ddaa float64 )[]*list {_ddeb :=[]*list {};_agdeb :=_bdbf ;_bdbf =_bdbf +1;_bfac :=_egef [_agdeb ];_fddfc :=_fegc [_bfac ];_cbeg :=_efga (_fddfc ,_ddaa ,_dcgd );
for _eedc ,_ebea :=range _cbeg {var _gadfe float64 ;_gdff :=[]*list {};_cadd :=_ebea ._bacaf ;_cdcfa :=_ddaa ;if _eedc < len (_cbeg )-1{_cdcfa =_cbeg [_eedc +1]._bacaf ;};if _bdbf < len (_egef ){_gdff =_cbab (_dfcae ,_fegc ,_egef ,_bdbf ,_cadd ,_cdcfa );
};_gadfe =_cdcfa ;if len (_gdff )> 0{_bdg :=_gdff [0];if len (_bdg ._dcbb )> 0{_gadfe =_bdg ._dcbb [0]._bacaf ;};};_aaeg :=[]*textLine {_ebea };_agaab :=_fgfc (_ebea ,_dfcae ,_egef ,_cadd ,_gadfe );_aaeg =append (_aaeg ,_agaab ...);_ggdb :=_dfeec (_aaeg ,"\u0062\u0075\u006c\u006c\u0065\u0074",_gdff );
_ggdb ._cdag =_aegb (_aaeg ,"");_ddeb =append (_ddeb ,_ggdb );};return _ddeb ;};func _bddb (_cdeeg []*wordBag )[]*wordBag {if len (_cdeeg )<=1{return _cdeeg ;};if _ebd {_ce .Log .Info ("\u006d\u0065\u0072\u0067\u0065\u0057\u006f\u0072\u0064B\u0061\u0067\u0073\u003a");
};_f .Slice (_cdeeg ,func (_gbgd ,_beaf int )bool {_gfcb ,_feg :=_cdeeg [_gbgd ],_cdeeg [_beaf ];_ffgfg :=_gfcb .Width ()*_gfcb .Height ();_cadf :=_feg .Width ()*_feg .Height ();if _ffgfg !=_cadf {return _ffgfg > _cadf ;};if _gfcb .Height ()!=_feg .Height (){return _gfcb .Height ()> _feg .Height ();
};return _gbgd < _beaf ;});var _dafg []*wordBag ;_efcc :=make (intSet );for _daaa :=0;_daaa < len (_cdeeg );_daaa ++{if _efcc .has (_daaa ){continue ;};_dged :=_cdeeg [_daaa ];for _faab :=_daaa +1;_faab < len (_cdeeg );_faab ++{if _efcc .has (_daaa ){continue ;
};_eaae :=_cdeeg [_faab ];_fdecb :=_dged .PdfRectangle ;_fdecb .Llx -=_dged ._cdfcc ;if _ecdg (_fdecb ,_eaae .PdfRectangle ){_dged .absorb (_eaae );_efcc .add (_faab );};};_dafg =append (_dafg ,_dged );};if len (_cdeeg )!=len (_dafg )+len (_efcc ){_ce .Log .Error ("\u006d\u0065\u0072ge\u0057\u006f\u0072\u0064\u0042\u0061\u0067\u0073\u003a \u0025d\u2192%\u0064 \u0061\u0062\u0073\u006f\u0072\u0062\u0065\u0064\u003d\u0025\u0064",len (_cdeeg ),len (_dafg ),len (_efcc ));
};return _dafg ;};

// String returns a description of `t`.
func (_dfcaf *textTable )String ()string {return _cc .Sprintf ("\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0025\u0074",_dfcaf ._fdaegd ,_dfcaf ._bgdf ,_dfcaf ._cadg );};func _faega (_fgcdce []pathSection )rulingList {_fcdc (_fgcdce );if _fdee {_ce .Log .Info ("\u006d\u0061k\u0065\u0053\u0074\u0072\u006f\u006b\u0065\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0064\u0020\u0073\u0074\u0072ok\u0065\u0073",len (_fgcdce ));
};var _aaffg rulingList ;for _ ,_bdfe :=range _fgcdce {for _ ,_dgea :=range _bdfe ._aggc {if len (_dgea ._fbca )< 2{continue ;};_fbeb :=_dgea ._fbca [0];for _ ,_eccda :=range _dgea ._fbca [1:]{if _fbcg ,_bccef :=_fdeeb (_fbeb ,_eccda ,_bdfe .Color );_bccef {_aaffg =append (_aaffg ,_fbcg );
};_fbeb =_eccda ;};};};if _fdee {_ce .Log .Info ("m\u0061\u006b\u0065\u0053tr\u006fk\u0065\u0052\u0075\u006c\u0069n\u0067\u0073\u003a\u0020\u0025\u0073",_aaffg );};return _aaffg ;};

// BBox returns the smallest axis-aligned rectangle that encloses all the TextMarks in `ma`.
func (_gfgb *TextMarkArray )BBox ()(_ea .PdfRectangle ,bool ){var _cdae _ea .PdfRectangle ;_fbfd :=false ;for _ ,_bbef :=range _gfgb ._ddgg {if _bbef .Meta ||_agdgd (_bbef .Text ){continue ;};if _fbfd {_cdae =_aaafc (_cdae ,_bbef .BBox );}else {_cdae =_bbef .BBox ;
_fbfd =true ;};};return _cdae ,_fbfd ;};func _cdebb (_bbgag ,_cgad *textPara )bool {return _ecdb (_bbgag ._edd ,_cgad ._edd )};func (_bgdc *textPara )depth ()float64 {if _bgdc ._adfda {return -1.0;};if len (_bgdc ._efde )> 0{return _bgdc ._efde [0]._bacaf ;
};return _bgdc ._geeb .depth ();};func _eaab (_bbbge _ea .PdfRectangle )*ruling {return &ruling {_deecb :_efcab ,_bbdbe :_bbbge .Llx ,_caafe :_bbbge .Lly ,_feeg :_bbbge .Ury };};func (_bbegg *textTable )getRight ()paraList {_fcef :=make (paraList ,_bbegg ._bgdf );
for _cgggg :=0;_cgggg < _bbegg ._bgdf ;_cgggg ++{_eagc :=_bbegg .get (_bbegg ._fdaegd -1,_cgggg )._abbf ;if _eagc .taken (){return nil ;};_fcef [_cgggg ]=_eagc ;};for _affc :=0;_affc < _bbegg ._bgdf -1;_affc ++{if _fcef [_affc ]._bcgc !=_fcef [_affc +1]{return nil ;
};};return _fcef ;};func _dfeec (_dcfg []*textLine ,_bcfea string ,_eeaa []*list )*list {return &list {_dcbb :_dcfg ,_aegd :_bcfea ,_daffa :_eeaa };};var _becb =TextMark {Text :"\u005b\u0058\u005d",Original :"\u0020",Meta :true ,FillColor :_be .White ,StrokeColor :_be .White };
func (_ddbe *textObject )setTextRenderMode (_bcf int ){if _ddbe ==nil {return ;};_ddbe ._aeg ._efgd =RenderMode (_bcf );};func (_ceba *wordBag )absorb (_dbgg *wordBag ){_abcc :=_dbgg .makeRemovals ();for _bcegc ,_abca :=range _dbgg ._edfa {for _ ,_dabfe :=range _abca {_ceba .pullWord (_dabfe ,_bcegc ,_abcc );
};};_dbgg .applyRemovals (_abcc );};func (_ecf *imageExtractContext )processOperand (_fdb *_g .ContentStreamOperation ,_dba _g .GraphicsState ,_edg *_ea .PdfPageResources )error {if _fdb .Operand =="\u0042\u0049"&&len (_fdb .Params )==1{_bbe ,_afe :=_fdb .Params [0].(*_g .ContentStreamInlineImage );
if !_afe {return nil ;};if _gdd ,_eda :=_ff .GetBoolVal (_bbe .ImageMask );_eda {if _gdd &&!_ecf ._df .IncludeInlineStencilMasks {return nil ;};};return _ecf .extractInlineImage (_bbe ,_dba ,_edg );}else if _fdb .Operand =="\u0044\u006f"&&len (_fdb .Params )==1{_bed ,_gga :=_ff .GetName (_fdb .Params [0]);
if !_gga {_ce .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");return _fb ;};_ ,_ffc :=_edg .GetXObjectByName (*_bed );switch _ffc {case _ea .XObjectTypeImage :return _ecf .extractXObjectImage (_bed ,_dba ,_edg );case _ea .XObjectTypeForm :return _ecf .extractFormImages (_bed ,_dba ,_edg );
};}else if _ecf ._cff &&(_fdb .Operand =="\u0073\u0063\u006e"||_fdb .Operand =="\u0053\u0043\u004e")&&len (_fdb .Params )==1{_dbb ,_caa :=_ff .GetName (_fdb .Params [0]);if !_caa {_ce .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");
return _fb ;};_cgb ,_caa :=_edg .GetPatternByName (*_dbb );if !_caa {_ce .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0050\u0061\u0074\u0074\u0065\u0072n\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");return nil ;};if _cgb .IsTiling (){_bg :=_cgb .GetAsTilingPattern ();
_cgg ,_fcg :=_bg .GetContentStream ();if _fcg !=nil {return _fcg ;};_fcg =_ecf .extractContentStreamImages (string (_cgg ),_bg .Resources );if _fcg !=nil {return _fcg ;};};}else if (_fdb .Operand =="\u0063\u0073"||_fdb .Operand =="\u0043\u0053")&&len (_fdb .Params )>=1{_ecf ._cff =_fdb .Params [0].String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e";
};return nil ;};

// PageTextOptions holds various options available in extraction process.
type PageTextOptions struct{_agaa bool ;_ecg bool ;};func (_gdbdc paraList )yNeighbours (_ddfc float64 )map[*textPara ][]int {_gbfgdf :=make ([]event ,2*len (_gdbdc ));if _ddfc ==0{for _aeea ,_acda :=range _gdbdc {_gbfgdf [2*_aeea ]=event {_acda .Lly ,true ,_aeea };
_gbfgdf [2*_aeea +1]=event {_acda .Ury ,false ,_aeea };};}else {for _dacag ,_cgggd :=range _gdbdc {_gbfgdf [2*_dacag ]=event {_cgggd .Lly -_ddfc *_cgggd .fontsize (),true ,_dacag };_gbfgdf [2*_dacag +1]=event {_cgggd .Ury +_ddfc *_cgggd .fontsize (),false ,_dacag };
};};return _gdbdc .eventNeighbours (_gbfgdf );};func (_cdfg rulingList )connections (_ffbb map[int ]intSet ,_ddee int )intSet {_ggbf :=make (intSet );_cfcb :=make (intSet );var _gcddg func (int );_gcddg =func (_fccd int ){if !_cfcb .has (_fccd ){_cfcb .add (_fccd );
for _eeaf :=range _cdfg {if _ffbb [_eeaf ].has (_fccd ){_ggbf .add (_eeaf );};};for _bcb :=range _cdfg {if _ggbf .has (_bcb ){_gcddg (_bcb );};};};};_gcddg (_ddee );return _ggbf ;};

// NewWithOptions an Extractor instance for extracting content from the input PDF page with options.
func NewWithOptions (page *_ea .PdfPage ,options *Options )(*Extractor ,error ){const _ffd ="\u0065x\u0074\u0072\u0061\u0063\u0074\u006f\u0072\u002e\u004e\u0065\u0077W\u0069\u0074\u0068\u004f\u0070\u0074\u0069\u006f\u006e\u0073";_fbb ,_dd :=page .GetAllContentStreams ();
if _dd !=nil {return nil ,_dd ;};_eaa ,_cbf :=page .GetStructTreeRoot ();if !_cbf {_ce .Log .Info ("T\u0068\u0065\u0020\u0070\u0064\u0066\u0020\u0064\u006f\u0063\u0075\u006d\u0065\u006e\u0074\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0074\u0061\u0067g\u0065d\u002e\u0020\u0053\u0074r\u0075\u0063t\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e\u0027\u0074\u0020\u0065\u0078\u0069\u0073\u0074\u002e");
};_dgf :=page .GetContainingPdfObject ();_dc ,_dd :=page .GetMediaBox ();if _dd !=nil {return nil ,_cc .Errorf ("\u0065\u0078\u0074r\u0061\u0063\u0074\u006fr\u0020\u0072\u0065\u0071\u0075\u0069\u0072e\u0073\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u002e\u0020\u0025\u0076",_dd );
};_ddg :=&Extractor {_ceb :_fbb ,_bc :page .Resources ,_aab :*_dc ,_bec :page .CropBox ,_fc :map[string ]fontEntry {},_aae :map[string ]textResult {},_bfc :options ,_gg :_eaa ,_ag :_dgf };if _ddg ._aab .Llx > _ddg ._aab .Urx {_ce .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0058\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_ddg ._aab );
_ddg ._aab .Llx ,_ddg ._aab .Urx =_ddg ._aab .Urx ,_ddg ._aab .Llx ;};if _ddg ._aab .Lly > _ddg ._aab .Ury {_ce .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0059\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_ddg ._aab );
_ddg ._aab .Lly ,_ddg ._aab .Ury =_ddg ._aab .Ury ,_ddg ._aab .Lly ;};_ad .TrackUse (_ffd );return _ddg ,nil ;};func _eacge (_fgdd ,_bbbgc _aa .Point )bool {return _fgdd .X ==_bbbgc .X &&_fgdd .Y ==_bbbgc .Y };

// String returns a description of `b`.
func (_cedd *wordBag )String ()string {var _adgd []string ;for _ ,_bgda :=range _cedd .depthIndexes (){_accb :=_cedd ._edfa [_bgda ];for _ ,_ccacc :=range _accb {_adgd =append (_adgd ,_ccacc ._baea );};};return _cc .Sprintf ("\u0025.\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065=\u0025\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0025\u0071",_cedd .PdfRectangle ,_cedd ._cdfcc ,len (_adgd ),_adgd );
};func (_deecbc *textTable )getComposite (_eeafb ,_bbdab int )(paraList ,_ea .PdfRectangle ){_afgc ,_cffcb :=_deecbc ._ebddd [_cbaga (_eeafb ,_bbdab )];if _gfde {_cc .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0067\u0065\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u002d\u003e\u0025\u0073\u000a",_eeafb ,_bbdab ,_afgc .String ());
};if !_cffcb {return nil ,_ea .PdfRectangle {};};return _afgc .parasBBox ();};const (_faae markKind =iota ;_ebcfg ;_gdb ;_bdba ;);func _ecbg (_gddb *paraList )map[int ][]*textLine {_eefa :=map[int ][]*textLine {};for _ ,_adeg :=range *_gddb {for _ ,_accd :=range _adeg ._efde {if !_beag (_accd ){_ce .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_fdfc :=_accd ._aeeb [0]._fcac [0]._gbeg ;_eefa [_fdfc ]=append (_eefa [_fdfc ],_accd );};if _adeg ._geeb !=nil {_ddcd :=_adeg ._geeb ._bfeg ;for _ ,_cbagd :=range _ddcd {for _ ,_bfbe :=range _cbagd ._efde {if !_beag (_bfbe ){_ce .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_gffc :=_bfbe ._aeeb [0]._fcac [0]._gbeg ;_eefa [_gffc ]=append (_eefa [_gffc ],_bfbe );};};};};return _eefa ;};type intSet map[int ]struct{};func (_dbca rulingList )removeDuplicates ()rulingList {if len (_dbca )==0{return nil ;};_dbca .sort ();
_fdfcg :=rulingList {_dbca [0]};for _ ,_fgge :=range _dbca [1:]{if _fgge .equals (_fdfcg [len (_fdfcg )-1]){continue ;};_fdfcg =append (_fdfcg ,_fgge );};return _fdfcg ;};func _dffd (_gadg func (*wordBag ,*textWord ,float64 )bool ,_ebcdd float64 )func (*wordBag ,*textWord )bool {return func (_deeb *wordBag ,_gbaa *textWord )bool {return _gadg (_deeb ,_gbaa ,_ebcdd )};
};func (_dedd *textPara )toTextMarks (_caceg *int )[]TextMark {if _dedd ._geeb ==nil {return _dedd .toCellTextMarks (_caceg );};var _bdfgg []TextMark ;for _aege :=0;_aege < _dedd ._geeb ._bgdf ;_aege ++{for _bfbbb :=0;_bfbbb < _dedd ._geeb ._fdaegd ;_bfbbb ++{_agbcb :=_dedd ._geeb .get (_bfbbb ,_aege );
if _agbcb ==nil {_bdfgg =_cfbg (_bdfgg ,_caceg ,"\u0009");}else {_edggf :=_agbcb .toCellTextMarks (_caceg );_bdfgg =append (_bdfgg ,_edggf ...);};_bdfgg =_cfbg (_bdfgg ,_caceg ,"\u0020");};if _aege < _dedd ._geeb ._bgdf -1{_bdfgg =_cfbg (_bdfgg ,_caceg ,"\u000a");
};};_dacac :=_dedd ._geeb ;if _dacac .isExportable (){_ggdgb :=_dacac .toTextTable ();_bdfgg =_fbdff (_bdfgg ,&_ggdgb );};return _bdfgg ;};func (_gbee *wordBag )getDepthIdx (_fbgge float64 )int {_abgf :=_gbee .depthIndexes ();_ccgdc :=_gcec (_fbgge );if _ccgdc < _abgf [0]{return _abgf [0];
};if _ccgdc > _abgf [len (_abgf )-1]{return _abgf [len (_abgf )-1];};return _ccgdc ;};func _debfd (_gedb int ,_efcg map[int ][]float64 )([]int ,int ){_gbge :=make ([]int ,_gedb );_badfc :=0;for _abcb :=0;_abcb < _gedb ;_abcb ++{_gbge [_abcb ]=_badfc ;_badfc +=len (_efcg [_abcb ])+1;
};return _gbge ,_badfc ;};func (_fccf *Extractor )extractPageText (_cefg string ,_dca *_ea .PdfPageResources ,_fdac _aa .Matrix ,_eab int )(*PageText ,int ,int ,error ){_ce .Log .Trace ("\u0065x\u0074\u0072\u0061\u0063t\u0050\u0061\u0067\u0065\u0054e\u0078t\u003a \u006c\u0065\u0076\u0065\u006c\u003d\u0025d",_eab );
_gad :=&PageText {_gag :_fccf ._aab ,_cda :_fccf ._gg ,_gdc :_fccf ._ag };_agb :=_bbce (_fccf ._aab );var _bccb stateStack ;_ggf :=_dgg (_fccf ,_dca ,_g .GraphicsState {},&_agb ,&_bccb );_ffdg :=shapesState {_gfae :_fdac ,_gae :_aa .IdentityMatrix (),_debc :_ggf };
var _dgbe bool ;_ggee :=-1;if _eab > _befb {_cdgf :=_e .New ("\u0066\u006f\u0072\u006d s\u0074\u0061\u0063\u006b\u0020\u006f\u0076\u0065\u0072\u0066\u006c\u006f\u0077");_ce .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0065\u0078\u0074\u0072\u0061\u0063\u0074\u0050\u0061\u0067\u0065\u0054\u0065\u0078\u0074\u002e\u0020\u0072\u0065\u0063u\u0072\u0073\u0069\u006f\u006e\u0020\u006c\u0065\u0076\u0065\u006c\u003d\u0025\u0064 \u0065r\u0072\u003d\u0025\u0076",_eab ,_cdgf );
return _gad ,_agb ._ggdgd ,_agb ._bgb ,_cdgf ;};_aee :=_g .NewContentStreamParser (_cefg );_eged ,_ggg :=_aee .Parse ();if _ggg !=nil {_ce .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020e\u0078\u0074\u0072a\u0063\u0074\u0050\u0061g\u0065\u0054\u0065\u0078\u0074\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ggg );
return _gad ,_agb ._ggdgd ,_agb ._bgb ,_ggg ;};_gad ._dggd =_eged ;_cfg :=_g .NewContentStreamProcessor (*_eged );_cfg .AddHandler (_g .HandlerConditionEnumAllOperands ,"",func (_gba *_g .ContentStreamOperation ,_ceg _g .GraphicsState ,_fdae *_ea .PdfPageResources )error {_eee :=_gba .Operand ;
if _geaa {_ce .Log .Info ("\u0026&\u0026\u0020\u006f\u0070\u003d\u0025s",_gba );};switch _eee {case "\u0071":if _ageb {_ce .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_ffdg ._gae );};_bccb .push (&_agb );case "\u0051":if !_bccb .empty (){_agb =*_bccb .pop ();
};_ffdg ._gae =_ceg .CTM ;if _ageb {_ce .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_ffdg ._gae );};case "\u0042\u0044\u0043":_gf ,_aaff :=_ff .GetDict (_gba .Params [1]);if !_aaff {_ce .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0042D\u0043\u0020\u006f\u0070\u003d\u0025\u0073 \u0047\u0065\u0074\u0044\u0069\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_gba );
return _ggg ;};_add :=_gf .Get ("\u004d\u0043\u0049\u0044");if _add !=nil {_dcg ,_dgd :=_ff .GetIntVal (_add );if !_dgd {_ce .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0042\u0044C\u0020\u006f\u0070=\u0025\u0073\u002e\u0020\u0042\u0061\u0064\u0020\u006eum\u0065\u0072\u0069c\u0061\u006c \u006f\u0062\u006a\u0065\u0063\u0074.\u0020\u006f=\u0025\u0073",_gba ,_add );
};_ggee =_dcg ;}else {_ggee =-1;};case "\u0045\u004d\u0043":_ggee =-1;case "\u0042\u0054":if _dgbe {_ce .Log .Debug ("\u0042\u0054\u0020\u0063\u0061\u006c\u006c\u0065\u0064\u0020\u0077\u0068\u0069\u006c\u0065 \u0069n\u0020\u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
_gad ._cacb =append (_gad ._cacb ,_ggf ._gfbg ...);};_dgbe =true ;_bbb :=_ceg ;_bbb .CTM =_fdac .Mult (_bbb .CTM );_ggf =_dgg (_fccf ,_fdae ,_bbb ,&_agb ,&_bccb );_ffdg ._debc =_ggf ;case "\u0045\u0054":if !_dgbe {_ce .Log .Debug ("\u0045\u0054\u0020ca\u006c\u006c\u0065\u0064\u0020\u006f\u0075\u0074\u0073i\u0064e\u0020o\u0066 \u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
};_dgbe =false ;_gad ._cacb =append (_gad ._cacb ,_ggf ._gfbg ...);_ggf .reset ();case "\u0054\u002a":_ggf .nextLine ();case "\u0054\u0064":if _dgc ,_dab :=_ggf .checkOp (_gba ,2,true );!_dgc {_ce .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dab );
return _dab ;};_fbg ,_fae ,_gbe :=_eegec (_gba .Params );if _gbe !=nil {return _gbe ;};_ggf .moveText (_fbg ,_fae );case "\u0054\u0044":if _eaac ,_gab :=_ggf .checkOp (_gba ,2,true );!_eaac {_ce .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gab );
return _gab ;};_fag ,_gff ,_cee :=_eegec (_gba .Params );if _cee !=nil {_ce .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cee );return _cee ;};_ggf .moveTextSetLeading (_fag ,_gff );case "\u0054\u006a":if _gfc ,_ecdd :=_ggf .checkOp (_gba ,1,true );
!_gfc {_ce .Log .Debug ("\u0045\u0052\u0052\u004fR:\u0020\u0054\u006a\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0065\u0072\u0072\u003d%\u0076",_gba ,_ecdd );return _ecdd ;};_bfd :=_ff .TraceToDirectObject (_gba .Params [0]);_cfgd ,_fdd :=_ff .GetStringBytes (_bfd );
if !_fdd {_ce .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020T\u006a\u0020o\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074S\u0074\u0072\u0069\u006e\u0067\u0042\u0079\u0074\u0065\u0073\u0020\u0066a\u0069\u006c\u0065\u0064",_gba );return _ff .ErrTypeError ;
};return _ggf .showText (_bfd ,_cfgd ,_ggee );case "\u0054\u004a":if _cebb ,_dcb :=_ggf .checkOp (_gba ,1,true );!_cebb {_ce .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dcb );return _dcb ;};_egb ,_gca :=_ff .GetArray (_gba .Params [0]);
if !_gca {_ce .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_gba );return _ggg ;};return _ggf .showTextAdjusted (_egb ,_ggee );
case "\u0027":if _fed ,_dga :=_ggf .checkOp (_gba ,1,true );!_fed {_ce .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0027\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dga );return _dga ;};_fgb :=_ff .TraceToDirectObject (_gba .Params [0]);_cbg ,_ecc :=_ff .GetStringBytes (_fgb );
if !_ecc {_ce .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020'\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_gba );return _ff .ErrTypeError ;};_ggf .nextLine ();return _ggf .showText (_fgb ,_cbg ,_ggee );
case "\u0022":if _cfa ,_ccg :=_ggf .checkOp (_gba ,3,true );!_cfa {_ce .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0022\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ccg );return _ccg ;};_fddd ,_def ,_ffcb :=_eegec (_gba .Params [:2]);if _ffcb !=nil {return _ffcb ;
};_abd :=_ff .TraceToDirectObject (_gba .Params [2]);_ecag ,_ega :=_ff .GetStringBytes (_abd );if !_ega {_ce .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020\"\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_gba );
return _ff .ErrTypeError ;};_ggf .setCharSpacing (_fddd );_ggf .setWordSpacing (_def );_ggf .nextLine ();return _ggf .showText (_abd ,_ecag ,_ggee );case "\u0054\u004c":_cac ,_aga :=_ggad (_gba );if _aga !=nil {_ce .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004c\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_aga );
return _aga ;};_ggf .setTextLeading (_cac );case "\u0054\u0063":_cba ,_bea :=_ggad (_gba );if _bea !=nil {_ce .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0063\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bea );return _bea ;};_ggf .setCharSpacing (_cba );
case "\u0054\u0066":if _ffdgb ,_eec :=_ggf .checkOp (_gba ,2,true );!_ffdgb {_ce .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0066\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_eec );return _eec ;};_cec ,_edgg :=_ff .GetNameVal (_gba .Params [0]);
if !_edgg {_ce .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u004ea\u006d\u0065\u0056\u0061\u006c\u0020\u0066a\u0069\u006c\u0065\u0064",_gba );return _ff .ErrTypeError ;};_baf ,_bga :=_ff .GetNumberAsFloat (_gba .Params [1]);
if !_edgg {_ce .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u0046\u006c\u006f\u0061\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065d\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gba ,_bga );
return _bga ;};_bga =_ggf .setFont (_cec ,_baf );_ggf ._dagf =_bf .Is (_bga ,_ff .ErrNotSupported );if _bga !=nil &&!_ggf ._dagf {return _bga ;};case "\u0054\u006d":if _afa ,_cca :=_ggf .checkOp (_gba ,6,true );!_afa {_ce .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u006d\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cca );
return _cca ;};_eaaa ,_ede :=_ff .GetNumbersAsFloat (_gba .Params );if _ede !=nil {_ce .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ede );return _ede ;};_ggf .setTextMatrix (_eaaa );case "\u0054\u0072":if _defe ,_dcab :=_ggf .checkOp (_gba ,1,true );
!_defe {_ce .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0072\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dcab );return _dcab ;};_cae ,_bee :=_ff .GetIntVal (_gba .Params [0]);if !_bee {_ce .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0072\u0020\u006f\u0070\u003d\u0025\u0073 \u0047e\u0074\u0049\u006e\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_gba );
return _ff .ErrTypeError ;};_ggf .setTextRenderMode (_cae );case "\u0054\u0073":if _deb ,_caac :=_ggf .checkOp (_gba ,1,true );!_deb {_ce .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0073\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_caac );return _caac ;
};_bd ,_efc :=_ff .GetNumberAsFloat (_gba .Params [0]);if _efc !=nil {_ce .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_efc );return _efc ;};_ggf .setTextRise (_bd );case "\u0054\u0077":if _eacg ,_cbb :=_ggf .checkOp (_gba ,1,true );
!_eacg {_ce .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cbb );return _cbb ;};_bff ,_fafd :=_ff .GetNumberAsFloat (_gba .Params [0]);if _fafd !=nil {_ce .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fafd );
return _fafd ;};_ggf .setWordSpacing (_bff );case "\u0054\u007a":if _gfb ,_eff :=_ggf .checkOp (_gba ,1,true );!_gfb {_ce .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_eff );return _eff ;};_babd ,_cbac :=_ff .GetNumberAsFloat (_gba .Params [0]);
if _cbac !=nil {_ce .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cbac );return _cbac ;};_ggf .setHorizScaling (_babd );case "\u0063\u006d":_ffdg ._gae =_ceg .CTM ;if _ffdg ._gae .Singular (){_efd :=_aa .IdentityMatrix ().Translate (_ffdg ._gae .Translation ());
_ce .Log .Debug ("S\u0069n\u0067\u0075\u006c\u0061\u0072\u0020\u0063\u0074m\u003d\u0025\u0073\u2192%s",_ffdg ._gae ,_efd );_ffdg ._gae =_efd ;};if _ageb {_ce .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_ffdg ._gae );};case "\u006d":if len (_gba .Params )!=2{_ce .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_fd );
return nil ;};_cgce ,_gbaf :=_ff .GetNumbersAsFloat (_gba .Params );if _gbaf !=nil {return _gbaf ;};_ffdg .moveTo (_cgce [0],_cgce [1]);case "\u006c":if len (_gba .Params )!=2{_ce .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_fd );
return nil ;};_agf ,_bcd :=_ff .GetNumbersAsFloat (_gba .Params );if _bcd !=nil {return _bcd ;};_ffdg .lineTo (_agf [0],_agf [1]);case "\u0063":if len (_gba .Params )!=6{return _fd ;};_bbf ,_cad :=_ff .GetNumbersAsFloat (_gba .Params );if _cad !=nil {return _cad ;
};_ce .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_bbf );_ffdg .cubicTo (_bbf [0],_bbf [1],_bbf [2],_bbf [3],_bbf [4],_bbf [5]);case "\u0076","\u0079":if len (_gba .Params )!=4{return _fd ;
};_cfd ,_gfg :=_ff .GetNumbersAsFloat (_gba .Params );if _gfg !=nil {return _gfg ;};_ce .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_cfd );_ffdg .quadraticTo (_cfd [0],_cfd [1],_cfd [2],_cfd [3]);
case "\u0068":_ffdg .closePath ();case "\u0072\u0065":if len (_gba .Params )!=4{return _fd ;};_dag ,_aaa :=_ff .GetNumbersAsFloat (_gba .Params );if _aaa !=nil {return _aaa ;};_ffdg .drawRectangle (_dag [0],_dag [1],_dag [2],_dag [3]);_ffdg .closePath ();
case "\u0053":_ffdg .stroke (&_gad ._agab );_ffdg .clearPath ();case "\u0073":_ffdg .closePath ();_ffdg .stroke (&_gad ._agab );_ffdg .clearPath ();case "\u0046":_ffdg .fill (&_gad ._bfcf );_ffdg .clearPath ();case "\u0066","\u0066\u002a":_ffdg .closePath ();
_ffdg .fill (&_gad ._bfcf );_ffdg .clearPath ();case "\u0042","\u0042\u002a":_ffdg .fill (&_gad ._bfcf );_ffdg .stroke (&_gad ._agab );_ffdg .clearPath ();case "\u0062","\u0062\u002a":_ffdg .closePath ();_ffdg .fill (&_gad ._bfcf );_ffdg .stroke (&_gad ._agab );
_ffdg .clearPath ();case "\u006e":_ffdg .clearPath ();case "\u0044\u006f":if len (_gba .Params )==0{_ce .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0058\u004fbj\u0065c\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006f\u0070\u0065\u0072\u0061n\u0064\u0020\u0066\u006f\u0072\u0020\u0044\u006f\u0020\u006f\u0070\u0065\u0072\u0061\u0074\u006f\u0072.\u0020\u0047\u006f\u0074\u0020\u0025\u002b\u0076\u002e",_gba .Params );
return _ff .ErrRangeError ;};_gfbd ,_dgde :=_ff .GetName (_gba .Params [0]);if !_dgde {_ce .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0044\u006f\u0020\u006f\u0070e\u0072a\u0074\u006f\u0072\u0020\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006fp\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u002b\u0076\u002e",_gba .Params [0]);
return _ff .ErrTypeError ;};_ ,_bde :=_fdae .GetXObjectByName (*_gfbd );if _bde !=_ea .XObjectTypeForm {break ;};_bbbc ,_dgde :=_fccf ._aae [_gfbd .String ()];if !_dgde {_dgdg ,_bgcg :=_fdae .GetXObjectFormByName (*_gfbd );if _bgcg !=nil {_ce .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_bgcg );
return _bgcg ;};_bfca ,_bgcg :=_dgdg .GetContentStream ();if _bgcg !=nil {_ce .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_bgcg );return _bgcg ;};_fdad :=_dgdg .Resources ;if _fdad ==nil {_fdad =_fdae ;};_caef :=_ceg .CTM ;if _cgag ,_cfb :=_ff .GetArray (_dgdg .Matrix );
_cfb {_abce ,_fbf :=_cgag .GetAsFloat64Slice ();if _fbf !=nil {return _fbf ;};if len (_abce )!=6{return _fd ;};_fdgec :=_aa .NewMatrix (_abce [0],_abce [1],_abce [2],_abce [3],_abce [4],_abce [5]);_caef =_ceg .CTM .Mult (_fdgec );};_ecee ,_beg ,_fab ,_bgcg :=_fccf .extractPageText (string (_bfca ),_fdad ,_fdac .Mult (_caef ),_eab +1);
if _bgcg !=nil {_ce .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_bgcg );return _bgcg ;};_bbbc =textResult {*_ecee ,_beg ,_fab };_fccf ._aae [_gfbd .String ()]=_bbbc ;};_ffdg ._gae =_ceg .CTM ;if _ageb {_ce .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_ffdg ._gae );
};_gad ._cacb =append (_gad ._cacb ,_bbbc ._gbd ._cacb ...);_gad ._agab =append (_gad ._agab ,_bbbc ._gbd ._agab ...);_gad ._bfcf =append (_gad ._bfcf ,_bbbc ._gbd ._bfcf ...);_agb ._ggdgd +=_bbbc ._ebc ;_agb ._bgb +=_bbbc ._bbba ;case "\u0072\u0067","\u0067","\u006b","\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_ggf ._gbb .ColorspaceNonStroking =_ceg .ColorspaceNonStroking ;
_ggf ._gbb .ColorNonStroking =_ceg .ColorNonStroking ;case "\u0052\u0047","\u0047","\u004b","\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_ggf ._gbb .ColorspaceStroking =_ceg .ColorspaceStroking ;_ggf ._gbb .ColorStroking =_ceg .ColorStroking ;};return nil ;
});_ggg =_cfg .Process (_dca );return _gad ,_agb ._ggdgd ,_agb ._bgb ,_ggg ;};func (_dcge *textObject )setWordSpacing (_cea float64 ){if _dcge ==nil {return ;};_dcge ._aeg ._cffe =_cea ;};func (_daca *wordBag )highestWord (_gdfc int ,_cbcg ,_cfed float64 )*textWord {for _ ,_afef :=range _daca ._edfa [_gdfc ]{if _cbcg <=_afef ._bcded &&_afef ._bcded <=_cfed {return _afef ;
};};return nil ;};func _fbdff (_aeege []TextMark ,_bdgc *TextTable )[]TextMark {var _bdddb []TextMark ;for _ ,_gebf :=range _aeege {_gebf ._ebe =true ;_gebf ._ddgd =_bdgc ;_bdddb =append (_bdddb ,_gebf );};return _bdddb ;};const _befb =20;func (_baca *wordBag )depthRange (_dgfa ,_ccdb int )[]int {var _gdgd []int ;
for _eafeb :=range _baca ._edfa {if _dgfa <=_eafeb &&_eafeb <=_ccdb {_gdgd =append (_gdgd ,_eafeb );};};if len (_gdgd )==0{return nil ;};_f .Ints (_gdgd );return _gdgd ;};func _feag (_gegb _ea .PdfRectangle )*ruling {return &ruling {_deecb :_efcab ,_bbdbe :_gegb .Urx ,_caafe :_gegb .Lly ,_feeg :_gegb .Ury };
};

// ApplyArea processes the page text only within the specified area `bbox`.
// Each time ApplyArea is called, it updates the result set in `pt`.
// Can be called multiple times in a row with different bounding boxes.
func (_gbg *PageText )ApplyArea (bbox _ea .PdfRectangle ){_ebaa :=make ([]*textMark ,0,len (_gbg ._cacb ));for _ ,_egbc :=range _gbg ._cacb {if _aaca (_egbc .bbox (),bbox ){_ebaa =append (_ebaa ,_egbc );};};var _gfbde paraList ;_adbb :=len (_ebaa );for _ffgf :=0;
_ffgf < 360&&_adbb > 0;_ffgf +=90{_fbgg :=make ([]*textMark ,0,len (_ebaa )-_adbb );for _ ,_ffced :=range _ebaa {if _ffced ._acdg ==_ffgf {_fbgg =append (_fbgg ,_ffced );};};if len (_fbgg )> 0{_facb :=_ggea (_fbgg ,_gbg ._gag ,nil ,nil ,_gbg ._feda ._ecg );
_gfbde =append (_gfbde ,_facb ...);_adbb -=len (_fbgg );};};_adbf :=new (_cde .Buffer );_gfbde .writeText (_adbf );_gbg ._dce =_adbf .String ();_gbg ._aba =_gfbde .toTextMarks ();_gbg ._fdf =_gfbde .tables ();};func (_gbfd *textWord )appendMark (_cffb *textMark ,_fdcg _ea .PdfRectangle ){_gbfd ._fcac =append (_gbfd ._fcac ,_cffb );
_gbfd .PdfRectangle =_aaafc (_gbfd .PdfRectangle ,_cffb .PdfRectangle );if _cffb ._gfdeb > _gbfd ._cfdf {_gbfd ._cfdf =_cffb ._gfdeb ;};_gbfd ._bcded =_fdcg .Ury -_gbfd .PdfRectangle .Lly ;};

// String returns a string descibing `i`.
func (_cbdg gridTile )String ()string {_bafg :=func (_fcadb bool ,_cdffg string )string {if _fcadb {return _cdffg ;};return "\u005f";};return _cc .Sprintf ("\u00256\u002e2\u0066\u0020\u0025\u0031\u0073%\u0031\u0073%\u0031\u0073\u0025\u0031\u0073",_cbdg .PdfRectangle ,_bafg (_cbdg ._edaac ,"\u004c"),_bafg (_cbdg ._aefc ,"\u0052"),_bafg (_cbdg ._dfgg ,"\u0042"),_bafg (_cbdg ._cgab ,"\u0054"));
};func (_fgce paraList )applyTables (_ebbdd []*textTable )paraList {var _fbee paraList ;for _ ,_fcge :=range _ebbdd {_fbee =append (_fbee ,_fcge .newTablePara ());};for _ ,_ffcee :=range _fgce {if _ffcee ._agdga {continue ;};_fbee =append (_fbee ,_ffcee );
};return _fbee ;};func _fdeeb (_ffbg ,_cede _aa .Point ,_gfgcf _be .Color )(*ruling ,bool ){_bbbd :=lineRuling {_fcff :_ffbg ,_bgag :_cede ,_cfaab :_baaec (_ffbg ,_cede ),Color :_gfgcf };if _bbbd ._cfaab ==_aaebd {return nil ,false ;};return _bbbd .asRuling ();
};func _ebdfb (_gdadf map[int ][]float64 )string {_cceba :=_ccgdg (_gdadf );_dddga :=make ([]string ,len (_gdadf ));for _ceeb ,_fgee :=range _cceba {_dddga [_ceeb ]=_cc .Sprintf ("\u0025\u0064\u003a\u0020\u0025\u002e\u0032\u0066",_fgee ,_gdadf [_fgee ]);
};return _cc .Sprintf ("\u007b\u0025\u0073\u007d",_dbe .Join (_dddga ,"\u002c\u0020"));};func _agfge (_aeca ,_bfbd float64 )bool {return _aeca /_dg .Max (_dgdeg ,_bfbd )< _deec };const (RenderModeStroke RenderMode =1<<iota ;RenderModeFill ;RenderModeClip ;
);func (_gdefb paraList )tables ()[]TextTable {var _daea []TextTable ;if _gfde {_ce .Log .Info ("\u0070\u0061\u0072\u0061\u0073\u002e\u0074\u0061\u0062\u006c\u0065\u0073\u003a");};for _ ,_facbc :=range _gdefb {_dfga :=_facbc ._geeb ;if _dfga !=nil &&_dfga .isExportable (){_daea =append (_daea ,_dfga .toTextTable ());
};};return _daea ;};func (_ggccb *textTable )putComposite (_decba ,_feccd int ,_gdfb paraList ,_dfeca _ea .PdfRectangle ){if len (_gdfb )==0{_ce .Log .Error ("\u0074\u0065xt\u0054\u0061\u0062l\u0065\u0029\u0020\u0070utC\u006fmp\u006f\u0073\u0069\u0074\u0065\u003a\u0020em\u0070\u0074\u0079\u0020\u0070\u0061\u0072a\u0073");
return ;};_edfgb :=compositeCell {PdfRectangle :_dfeca ,paraList :_gdfb };if _gfde {_cc .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0075\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u003c\u002d\u0025\u0073\u000a",_decba ,_feccd ,_edfgb .String ());
};_edfgb .updateBBox ();_ggccb ._ebddd [_cbaga (_decba ,_feccd )]=_edfgb ;};func _dbag (_fgcg ,_cbgb ,_cabgb ,_dfecd *textPara )*textTable {_dfegg :=&textTable {_fdaegd :2,_bgdf :2,_bfeg :make (map[uint64 ]*textPara ,4)};_dfegg .put (0,0,_fgcg );_dfegg .put (1,0,_cbgb );
_dfegg .put (0,1,_cabgb );_dfegg .put (1,1,_dfecd );return _dfegg ;};func (_gbbd *textTable )isExportable ()bool {if _gbbd ._cadg {return true ;};_ffcaa :=func (_gdfd int )bool {_fccb :=_gbbd .get (0,_gdfd );if _fccb ==nil {return false ;};_daffc :=_fccb .text ();
_abab :=_db .RuneCountInString (_daffc );_bfce :=_egdd .MatchString (_daffc );return _abab <=1||_bfce ;};for _bbfbc :=0;_bbfbc < _gbbd ._bgdf ;_bbfbc ++{if !_ffcaa (_bbfbc ){return true ;};};return false ;};func (_daab *textLine )bbox ()_ea .PdfRectangle {return _daab .PdfRectangle };
func _acfc (_cfec ,_fecd bounded )float64 {_gbaeg :=_fdacg (_cfec ,_fecd );if !_geef (_gbaeg ){return _gbaeg ;};return _cdec (_cfec ,_fecd );};func (_abfa *textTable )newTablePara ()*textPara {_degcd :=_abfa .computeBbox ();_addfe :=&textPara {PdfRectangle :_degcd ,_edd :_degcd ,_geeb :_abfa };
if _gfde {_ce .Log .Info ("\u006e\u0065w\u0054\u0061\u0062l\u0065\u0050\u0061\u0072\u0061\u003a\u0020\u0025\u0073",_addfe );};return _addfe ;};func (_dadg *textTable )growTable (){_gefef :=func (_dced paraList ){_dadg ._bgdf ++;for _dbeb :=0;_dbeb < _dadg ._fdaegd ;
_dbeb ++{_bbbaf :=_dced [_dbeb ];_dadg .put (_dbeb ,_dadg ._bgdf -1,_bbbaf );};};_gabg :=func (_aagaa paraList ){_dadg ._fdaegd ++;for _gbad :=0;_gbad < _dadg ._bgdf ;_gbad ++{_afca :=_aagaa [_gbad ];_dadg .put (_dadg ._fdaegd -1,_gbad ,_afca );};};if _aegc {_dadg .log ("\u0067r\u006f\u0077\u0054\u0061\u0062\u006ce");
};for _cbbc :=0;;_cbbc ++{_bgaa :=false ;_dbff :=_dadg .getDown ();_bgeeb :=_dadg .getRight ();if _aegc {_cc .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cbbc ,_dadg );_cc .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0020\u0064\u006f\u0077\u006e\u003d\u0025\u0073\u000a",_dbff );
_cc .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0072\u0069\u0067\u0068\u0074\u003d\u0025\u0073\u000a",_bgeeb );};if _dbff !=nil &&_bgeeb !=nil {_bfgee :=_dbff [len (_dbff )-1];if !_bfgee .taken ()&&_bfgee ==_bgeeb [len (_bgeeb )-1]{_gefef (_dbff );if _bgeeb =_dadg .getRight ();
_bgeeb !=nil {_gabg (_bgeeb );_dadg .put (_dadg ._fdaegd -1,_dadg ._bgdf -1,_bfgee );};_bgaa =true ;};};if !_bgaa &&_dbff !=nil {_gefef (_dbff );_bgaa =true ;};if !_bgaa &&_bgeeb !=nil {_gabg (_bgeeb );_bgaa =true ;};if !_bgaa {break ;};};};type wordBag struct{_ea .PdfRectangle ;
_cdfcc float64 ;_agac ,_dfbf rulingList ;_baag float64 ;_edfa map[int ][]*textWord ;};func _dcga (_afdd map[float64 ]map[float64 ]gridTile )[]float64 {_gbgf :=make ([]float64 ,0,len (_afdd ));for _ggegc :=range _afdd {_gbgf =append (_gbgf ,_ggegc );};_f .Float64s (_gbgf );
_ddgc :=len (_gbgf );for _agebc :=0;_agebc < _ddgc /2;_agebc ++{_gbgf [_agebc ],_gbgf [_ddgc -1-_agebc ]=_gbgf [_ddgc -1-_agebc ],_gbgf [_agebc ];};return _gbgf ;};func _bgbg (_cbfga ,_gbgb ,_decc float64 )rulingKind {if _cbfga >=_decc &&_agfge (_gbgb ,_cbfga ){return _dbdde ;
};if _gbgb >=_decc &&_agfge (_cbfga ,_gbgb ){return _efcab ;};return _aaebd ;};func (_ffff lineRuling )asRuling ()(*ruling ,bool ){_eced :=ruling {_deecb :_ffff ._cfaab ,Color :_ffff .Color ,_geed :_ebcfg };switch _ffff ._cfaab {case _efcab :_eced ._bbdbe =_ffff .xMean ();
_eced ._caafe =_dg .Min (_ffff ._fcff .Y ,_ffff ._bgag .Y );_eced ._feeg =_dg .Max (_ffff ._fcff .Y ,_ffff ._bgag .Y );case _dbdde :_eced ._bbdbe =_ffff .yMean ();_eced ._caafe =_dg .Min (_ffff ._fcff .X ,_ffff ._bgag .X );_eced ._feeg =_dg .Max (_ffff ._fcff .X ,_ffff ._bgag .X );
default:_ce .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_ffff ._cfaab );return nil ,false ;};return &_eced ,true ;};func _aebea (_adgdg ,_fgege int )int {if _adgdg > _fgege {return _adgdg ;
};return _fgege ;};func (_gcdd rulingList )toTilings ()(rulingList ,[]gridTiling ){_gcdd .log ("\u0074o\u0054\u0069\u006c\u0069\u006e\u0067s");if len (_gcdd )==0{return nil ,nil ;};_gcdd =_gcdd .tidied ("\u0061\u006c\u006c");_gcdd .log ("\u0074\u0069\u0064\u0069\u0065\u0064");
_dbdg :=_gcdd .toGrids ();_bggda :=make ([]gridTiling ,len (_dbdg ));for _ccdc ,_cefeg :=range _dbdg {_bggda [_ccdc ]=_cefeg .asTiling ();};return _gcdd ,_bggda ;};func _aefea (_gdbbg string )(string ,bool ){_egfc :=[]rune (_gdbbg );if len (_egfc )!=1{return "",false ;
};_ecaf ,_aadee :=_cdfb [_egfc [0]];return _ecaf ,_aadee ;};func _dgfcd (_cbcgb ,_ggece _ed .Image )_ed .Image {_egdac ,_fegb :=_ggece .Bounds ().Size (),_cbcgb .Bounds ().Size ();_eaed ,_bdddf :=_egdac .X ,_egdac .Y ;if _fegb .X > _eaed {_eaed =_fegb .X ;
};if _fegb .Y > _bdddf {_bdddf =_fegb .Y ;};_gcad :=_ed .Rect (0,0,_eaed ,_bdddf );if _egdac .X !=_eaed ||_egdac .Y !=_bdddf {_cfgf :=_ed .NewRGBA (_gcad );_a .BiLinear .Scale (_cfgf ,_gcad ,_cbcgb ,_ggece .Bounds (),_a .Over ,nil );_ggece =_cfgf ;};if _fegb .X !=_eaed ||_fegb .Y !=_bdddf {_dagde :=_ed .NewRGBA (_gcad );
_a .BiLinear .Scale (_dagde ,_gcad ,_cbcgb ,_cbcgb .Bounds (),_a .Over ,nil );_cbcgb =_dagde ;};_cacd :=_ed .NewRGBA (_gcad );_a .DrawMask (_cacd ,_gcad ,_cbcgb ,_ed .Point {},_ggece ,_ed .Point {},_a .Over );return _cacd ;};func (_bfae paraList )computeEBBoxes (){if _gfcfc {_ce .Log .Info ("\u0063o\u006dp\u0075\u0074\u0065\u0045\u0042\u0042\u006f\u0078\u0065\u0073\u003a");
};for _ ,_efdb :=range _bfae {_efdb ._edd =_efdb .PdfRectangle ;};_fdgf :=_bfae .yNeighbours (0);for _cefe ,_gcdc :=range _bfae {_gddde :=_gcdc ._edd ;_fead ,_gfeg :=-1.0e9,+1.0e9;for _ ,_egcd :=range _fdgf [_gcdc ]{_cbff :=_bfae [_egcd ]._edd ;if _cbff .Urx < _gddde .Llx {_fead =_dg .Max (_fead ,_cbff .Urx );
}else if _gddde .Urx < _cbff .Llx {_gfeg =_dg .Min (_gfeg ,_cbff .Llx );};};for _gadd ,_dgcf :=range _bfae {_abfd :=_dgcf ._edd ;if _cefe ==_gadd ||_abfd .Ury > _gddde .Lly {continue ;};if _fead <=_abfd .Llx &&_abfd .Llx < _gddde .Llx {_gddde .Llx =_abfd .Llx ;
}else if _abfd .Urx <=_gfeg &&_gddde .Urx < _abfd .Urx {_gddde .Urx =_abfd .Urx ;};};if _gfcfc {_cc .Printf ("\u0025\u0034\u0064\u003a %\u0036\u002e\u0032\u0066\u2192\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0071\u000a",_cefe ,_gcdc ._edd ,_gddde ,_efcb (_gcdc .text (),50));
};_gcdc ._edd =_gddde ;};if _agaf {for _ ,_cgf :=range _bfae {_cgf .PdfRectangle =_cgf ._edd ;};};};func (_eccf *textWord )bbox ()_ea .PdfRectangle {return _eccf .PdfRectangle };func _dfcf (_ffbde string ,_bcde []rulingList ){_ce .Log .Info ("\u0024\u0024 \u0025\u0064\u0020g\u0072\u0069\u0064\u0073\u0020\u002d\u0020\u0025\u0073",len (_bcde ),_ffbde );
for _eaagfc ,_ecgg :=range _bcde {_cc .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_eaagfc ,_ecgg .String ());};};func (_cgbf *subpath )last ()_aa .Point {return _cgbf ._fbca [len (_cgbf ._fbca )-1]};func _eabga (_bacd *list ,_bgde *string )string {_ebbd :=_dbe .Split (_bacd ._cdag ,"\u000a");
_efge :=&_dbe .Builder {};for _ ,_aede :=range _ebbd {if _aede !=""{_efge .WriteString (*_bgde );_efge .WriteString (_aede );_efge .WriteString ("\u000a");};};return _efge .String ();};func (_cdcad *textTable )log (_agff string ){if !_gfde {return ;};_ce .Log .Info ("~\u007e\u007e\u0020\u0025\u0073\u003a \u0025\u0064\u0020\u0078\u0020\u0025d\u0020\u0067\u0072\u0069\u0064\u003d\u0025t\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0025\u0036\u002e2\u0066",_agff ,_cdcad ._fdaegd ,_cdcad ._bgdf ,_cdcad ._cadg ,_cdcad .PdfRectangle );
for _ggfb :=0;_ggfb < _cdcad ._bgdf ;_ggfb ++{for _bgcac :=0;_bgcac < _cdcad ._fdaegd ;_bgcac ++{_eecb :=_cdcad .get (_bgcac ,_ggfb );if _eecb ==nil {continue ;};_cc .Printf ("%\u0034\u0064\u0020\u00252d\u003a \u0025\u0036\u002e\u0032\u0066 \u0025\u0071\u0020\u0025\u0064\u000a",_bgcac ,_ggfb ,_eecb .PdfRectangle ,_efcb (_eecb .text (),50),_db .RuneCountInString (_eecb .text ()));
};};};func _aaac (_fafb *wordBag ,_dggb float64 ,_beef ,_gegf rulingList )[]*wordBag {var _gefe []*wordBag ;for _ ,_faaa :=range _fafb .depthIndexes (){_dgba :=false ;for !_fafb .empty (_faaa ){_dgga :=_fafb .firstReadingIndex (_faaa );_deag :=_fafb .firstWord (_dgga );
_dgbbb :=_ffea (_deag ,_dggb ,_beef ,_gegf );_fafb .removeWord (_deag ,_dgga );if _ebef {_ce .Log .Info ("\u0066\u0069\u0072\u0073\u0074\u0057\u006f\u0072\u0064\u0020\u005e\u005e^\u005e\u0020\u0025\u0073",_deag .String ());};for _acgb :=true ;_acgb ;_acgb =_dgba {_dgba =false ;
_cefgf :=_eaagf *_dgbbb ._cdfcc ;_cffeef :=_fgbb *_dgbbb ._cdfcc ;_eecf :=_aafc *_dgbbb ._cdfcc ;if _ebef {_ce .Log .Info ("\u0070a\u0072a\u0057\u006f\u0072\u0064\u0073\u0020\u0064\u0065\u0070\u0074\u0068 \u0025\u002e\u0032\u0066 \u002d\u0020\u0025\u002e\u0032f\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061\u0044\u0065\u0070\u0074\u0068\u0047\u0061\u0070\u003d\u0025\u002e\u0032\u0066\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061R\u0065\u0061\u0064\u0069\u006e\u0067\u0047\u0061p\u003d\u0025\u002e\u0032\u0066",_dgbbb .minDepth (),_dgbbb .maxDepth (),_eecf ,_cffeef );
};if _fafb .scanBand ("\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c",_dgbbb ,_dffd (_faef ,0),_dgbbb .minDepth ()-_eecf ,_dgbbb .maxDepth ()+_eecf ,_ebccf ,false ,false )> 0{_dgba =true ;};if _fafb .scanBand ("\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_dgbbb ,_dffd (_faef ,_cffeef ),_dgbbb .minDepth (),_dgbbb .maxDepth (),_fafdb ,false ,false )> 0{_dgba =true ;
};if _dgba {continue ;};_daed :=_fafb .scanBand ("",_dgbbb ,_dffd (_aaaf ,_cefgf ),_dgbbb .minDepth (),_dgbbb .maxDepth (),_aggcd ,true ,false );if _daed > 0{_fgdbb :=(_dgbbb .maxDepth ()-_dgbbb .minDepth ())/_dgbbb ._cdfcc ;if (_daed > 1&&float64 (_daed )> 0.3*_fgdbb )||_daed <=10{if _fafb .scanBand ("\u006f\u0074\u0068e\u0072",_dgbbb ,_dffd (_aaaf ,_cefgf ),_dgbbb .minDepth (),_dgbbb .maxDepth (),_aggcd ,false ,true )> 0{_dgba =true ;
};};};};_gefe =append (_gefe ,_dgbbb );};};return _gefe ;};func _gedeg (_cagd []float64 ,_gbfgd ,_eggb float64 )[]float64 {_eggda ,_abdbd :=_gbfgd ,_eggb ;if _abdbd < _eggda {_eggda ,_abdbd =_abdbd ,_eggda ;};_eecg :=make ([]float64 ,0,len (_cagd )+2);
_eecg =append (_eecg ,_gbfgd );for _ ,_ffbad :=range _cagd {if _ffbad <=_eggda {continue ;}else if _ffbad >=_abdbd {break ;};_eecg =append (_eecg ,_ffbad );};_eecg =append (_eecg ,_eggb );return _eecg ;};func (_cfgcd rulingList )sort (){_f .Slice (_cfgcd ,_cfgcd .comp )};
type fontEntry struct{_ccd *_ea .PdfFont ;_gddd int64 ;};func (_afg *shapesState )cubicTo (_eggc ,_fddf ,_afab ,_agdec ,_decb ,_aceb float64 ){if _ageb {_ce .Log .Info ("\u0063\u0075\u0062\u0069\u0063\u0054\u006f\u003a");};_afg .addPoint (_decb ,_aceb );
};type textMark struct{_ea .PdfRectangle ;_acdg int ;_face string ;_efgc string ;_fdfcd *_ea .PdfFont ;_gfdeb float64 ;_fcfg float64 ;_aedg _aa .Matrix ;_gfaf _aa .Point ;_ddbb _ea .PdfRectangle ;_gegg _be .Color ;_dfcdf _be .Color ;_cbfg _ff .PdfObject ;
_dagec []string ;Tw float64 ;Th float64 ;_gbeg int ;_accbe int ;};func _cggc (_efad map[float64 ][]*textLine )[]float64 {_cedc :=[]float64 {};for _beea :=range _efad {_cedc =append (_cedc ,_beea );};_f .Float64s (_cedc );return _cedc ;};func (_ggdd *wordBag )firstWord (_cdee int )*textWord {return _ggdd ._edfa [_cdee ][0]};
func (_cbbf *wordBag )maxDepth ()float64 {return _cbbf ._baag -_cbbf .Lly };func (_bbcac *textObject )setHorizScaling (_ffcef float64 ){if _bbcac ==nil {return ;};_bbcac ._aeg ._egf =_ffcef ;};func _acde (_gbdc ,_fgca int )int {if _gbdc < _fgca {return _gbdc ;
};return _fgca ;};func (_efff *TextMarkArray )exists (_ade TextMark )bool {for _ ,_fffg :=range _efff .Elements (){if _ef .DeepEqual (_ade .DirectObject ,_fffg .DirectObject )&&_ef .DeepEqual (_ade .BBox ,_fffg .BBox )&&_fffg .Text ==_ade .Text {return true ;
};};return false ;};type shapesState struct{_gae _aa .Matrix ;_gfae _aa .Matrix ;_fbfe []*subpath ;_ddgb bool ;_cgac _aa .Point ;_debc *textObject ;};type stateStack []*textState ;func (_ffbdd paraList )extractTables (_gfff []gridTiling )paraList {if _gfde {_ce .Log .Debug ("\u0065\u0078\u0074r\u0061\u0063\u0074\u0054\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_ffbdd ));
};if len (_ffbdd )< _ecb {return _ffbdd ;};_beed :=_ffbdd .findTables (_gfff );if _gfde {_ce .Log .Info ("c\u006f\u006d\u0062\u0069\u006e\u0065d\u0020\u0074\u0061\u0062\u006c\u0065s\u0020\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_beed ));
for _egfec ,_aaec :=range _beed {_aaec .log (_cc .Sprintf ("c\u006f\u006d\u0062\u0069\u006e\u0065\u0064\u0020\u0025\u0064",_egfec ));};};return _ffbdd .applyTables (_beed );};func (_ccfegd rulingList )primMinMax ()(float64 ,float64 ){_gdcdf ,_debbf :=_ccfegd [0]._bbdbe ,_ccfegd [0]._bbdbe ;
for _ ,_gdab :=range _ccfegd [1:]{if _gdab ._bbdbe < _gdcdf {_gdcdf =_gdab ._bbdbe ;}else if _gdab ._bbdbe > _debbf {_debbf =_gdab ._bbdbe ;};};return _gdcdf ,_debbf ;};func (_ccdd intSet )del (_edad int ){delete (_ccdd ,_edad )};

// Font represents the font properties on a PDF page.
type Font struct{PdfFont *_ea .PdfFont ;

// FontName represents Font Name from font properties.
FontName string ;

// FontType represents Font Subtype entry in the font dictionary inside page resources.
// Examples : type0, Type1, MMType1, Type3, TrueType, CIDFont.
FontType string ;

// ToUnicode is true if font provides a `ToUnicode` mapping.
ToUnicode bool ;

// IsCID is true if underlying font is a composite font.
// Composite font is represented by a font dictionary whose Subtype is `Type0`
IsCID bool ;

// IsSimple is true if font is simple font.
// A simple font is limited to only 8 bit (255) character codes.
IsSimple bool ;

// FontData represents the raw data of the embedded font file.
// It can have format TrueType (TTF), PostScript Font (PFB) or Compact Font Format (CCF).
// FontData value can be indicates from `FontFile`, `FontFile2` or `FontFile3` inside Font Descriptor.
// At most, only one of `FontFile`, `FontFile2` or `FontFile3` will be FontData value.
FontData []byte ;

// FontFileName is a name representing the font. it has format:
// (Font Name) + (Font Type Extension), example: helvetica.ttf.
FontFileName string ;

// FontDescriptor represents metrics and other attributes inside font properties from PDF Structure (Font Descriptor).
FontDescriptor *_ea .PdfFontDescriptor ;};func _fbeg (_cedg _ea .PdfRectangle )*ruling {return &ruling {_deecb :_dbdde ,_bbdbe :_cedg .Ury ,_caafe :_cedg .Llx ,_feeg :_cedg .Urx };};func (_eaec *textObject )setTextLeading (_ggd float64 ){if _eaec ==nil {return ;
};_eaec ._aeg ._ccc =_ggd ;};type gridTile struct{_ea .PdfRectangle ;_cgab ,_edaac ,_dfgg ,_aefc bool ;};type textPara struct{_ea .PdfRectangle ;_edd _ea .PdfRectangle ;_efde []*textLine ;_geeb *textTable ;_agdga bool ;_adfda bool ;_cegb *textPara ;_abbf *textPara ;
_bdea *textPara ;_bcgc *textPara ;_fadgg []list ;};func (_fcbf *ruling )gridIntersecting (_aegg *ruling )bool {return _ccgc (_fcbf ._caafe ,_aegg ._caafe )&&_ccgc (_fcbf ._feeg ,_aegg ._feeg );};type rulingKind int ;

// ExtractFonts returns all font information from the page extractor, including
// font name, font type, the raw data of the embedded font file (if embedded), font descriptor and more.
//
// The argument `previousPageFonts` is used when trying to build a complete font catalog for multiple pages or the entire document.
// The entries from `previousPageFonts` are added to the returned result unless already included in the page, i.e. no duplicate entries.
//
// NOTE: If previousPageFonts is nil, all fonts from the page will be returned. Use it when building up a full list of fonts for a document or page range.
func (_eg *Extractor )ExtractFonts (previousPageFonts *PageFonts )(*PageFonts ,error ){_dgb :=PageFonts {};_da :=_dgb .extractPageResourcesToFont (_eg ._bc );if _da !=nil {return nil ,_da ;};if previousPageFonts !=nil {for _ ,_ead :=range previousPageFonts .Fonts {if !_fdag (_dgb .Fonts ,_ead .FontName ){_dgb .Fonts =append (_dgb .Fonts ,_ead );
};};};return &PageFonts {Fonts :_dgb .Fonts },nil ;};var _efdc *_cd .Regexp =_cd .MustCompile (_ggecb +"\u007c"+_abed );func (_fbcgf *textPara )isAtom ()*textTable {_dbfe :=_fbcgf ;_fdaca :=_fbcgf ._abbf ;_eacb :=_fbcgf ._bcgc ;if _fdaca .taken ()||_eacb .taken (){return nil ;
};_aecdd :=_fdaca ._bcgc ;if _aecdd .taken ()||_aecdd !=_eacb ._abbf {return nil ;};return _dbag (_dbfe ,_fdaca ,_eacb ,_aecdd );};

// PageFonts represents extracted fonts on a PDF page.
type PageFonts struct{Fonts []Font ;};func (_fggc *textLine )appendWord (_bcea *textWord ){_fggc ._aeeb =append (_fggc ._aeeb ,_bcea );_fggc .PdfRectangle =_aaafc (_fggc .PdfRectangle ,_bcea .PdfRectangle );if _bcea ._cfdf > _fggc ._aeff {_fggc ._aeff =_bcea ._cfdf ;
};if _bcea ._bcded > _fggc ._bacaf {_fggc ._bacaf =_bcea ._bcded ;};};

// String returns a description of `tm`.
func (_bdbea *textMark )String ()string {return _cc .Sprintf ("\u0025\u002e\u0032f \u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\u0022\u0025\u0073\u0022",_bdbea .PdfRectangle ,_bdbea ._gfdeb ,_bdbea ._face );};func (_fce *PageFonts )extractPageResourcesToFont (_fa *_ea .PdfPageResources )error {_gc ,_fcc :=_ff .GetDict (_fa .Font );
if !_fcc {return _e .New (_cbd );};for _ ,_fec :=range _gc .Keys (){var (_aaba =true ;_cef []byte ;_ced string ;);_fbd ,_gd :=_fa .GetFontByName (_fec );if !_gd {return _e .New (_cebc );};_cdc ,_fde :=_ea .NewPdfFontFromPdfObject (_fbd );if _fde !=nil {return _fde ;
};_adc :=_cdc .FontDescriptor ();_ge :=_cdc .FontDescriptor ().FontName .String ();_fda :=_cdc .Subtype ();if _fdag (_fce .Fonts ,_ge ){continue ;};if len (_cdc .ToUnicode ())==0{_aaba =false ;};if _adc .FontFile !=nil {if _ece ,_ae :=_ff .GetStream (_adc .FontFile );
_ae {_cef ,_fde =_ff .DecodeStream (_ece );if _fde !=nil {return _fde ;};_ced =_ge +"\u002e\u0070\u0066\u0062";};}else if _adc .FontFile2 !=nil {if _dge ,_ca :=_ff .GetStream (_adc .FontFile2 );_ca {_cef ,_fde =_ff .DecodeStream (_dge );if _fde !=nil {return _fde ;
};_ced =_ge +"\u002e\u0074\u0074\u0066";};}else if _adc .FontFile3 !=nil {if _ac ,_edc :=_ff .GetStream (_adc .FontFile3 );_edc {_cef ,_fde =_ff .DecodeStream (_ac );if _fde !=nil {return _fde ;};_ced =_ge +"\u002e\u0063\u0066\u0066";};};if len (_ced )< 1{_ce .Log .Debug (_fe );
};_af :=Font {FontName :_ge ,PdfFont :_cdc ,IsCID :_cdc .IsCID (),IsSimple :_cdc .IsSimple (),ToUnicode :_aaba ,FontType :_fda ,FontData :_cef ,FontFileName :_ced ,FontDescriptor :_adc };_fce .Fonts =append (_fce .Fonts ,_af );};return nil ;};func (_afeb TextTable )getCellInfo (_dcaf TextMark )[][]int {for _agde ,_egd :=range _afeb .Cells {for _bdda ,_ddggc :=range _egd {_gda :=&_ddggc .Marks ;
if _gda .exists (_dcaf ){return [][]int {{_agde },{_bdda }};};};};return nil ;};type pathSection struct{_aggc []*subpath ;_be .Color ;};func _aabab (_gfdg *textLine ,_bgeg []*textLine ,_fbcff []float64 )float64 {var _agbcg float64 =-1;for _ ,_gbc :=range _bgeg {if _gbc ._bacaf > _gfdg ._bacaf {if _dg .Round (_gbc .Llx )>=_dg .Round (_gfdg .Llx ){_agbcg =_gbc ._bacaf ;
}else {break ;};};};return _agbcg ;};func _bdb (_abga *wordBag ,_ffeb int )*textLine {_dfec :=_abga .firstWord (_ffeb );_cdgd :=textLine {PdfRectangle :_dfec .PdfRectangle ,_aeff :_dfec ._cfdf ,_bacaf :_dfec ._bcded };_cdgd .pullWord (_abga ,_dfec ,_ffeb );
return &_cdgd ;};func (_bbgd rulingList )isActualGrid ()(rulingList ,bool ){_fbdab ,_dcgdd :=_bbgd .augmentGrid ();if !(len (_fbdab )>=_eafa +1&&len (_dcgdd )>=_gbafc +1){if _fdee {_ce .Log .Info ("\u0069s\u0041\u0063t\u0075\u0061\u006c\u0047r\u0069\u0064\u003a \u004e\u006f\u0074\u0020\u0061\u006c\u0069\u0067\u006eed\u002e\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u003c\u0020\u0025d\u0020\u0078 \u0025\u0064",len (_fbdab ),len (_dcgdd ),_eafa +1,_gbafc +1);
};return nil ,false ;};if _fdee {_ce .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075a\u006c\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0073\u0020\u003a\u0020\u0025t\u0020\u0026\u0020\u0025\u0074\u0020\u2192 \u0025\u0074",_bbgd ,len (_fbdab )>=2,len (_dcgdd )>=2,len (_fbdab )>=2&&len (_dcgdd )>=2);
for _ccafb ,_cbfce :=range _bbgd {_cc .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0076\u000a",_ccafb ,_cbfce );};};if _cgef {_dbgf ,_aggb :=_fbdab [0],_fbdab [len (_fbdab )-1];_bgadg ,_agfbc :=_dcgdd [0],_dcgdd [len (_dcgdd )-1];if !(_faed (_dbgf ._bbdbe -_bgadg ._caafe )&&_faed (_aggb ._bbdbe -_bgadg ._feeg )&&_faed (_bgadg ._bbdbe -_dbgf ._feeg )&&_faed (_agfbc ._bbdbe -_dbgf ._caafe )){if _fdee {_ce .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069d\u003a\u0020\u0020N\u006f\u0074 \u0061\u006c\u0069\u0067\u006e\u0065d\u002e\n\t\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0076\u0031\u003d\u0025\u0073\u000a\u0009\u0068\u0030\u003d\u0025\u0073\u000a\u0009\u0068\u0031\u003d\u0025\u0073",_dbgf ,_aggb ,_bgadg ,_agfbc );
};return nil ,false ;};}else {if !_fbdab .aligned (){if _dbcg {_ce .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0076\u0065\u0072\u0074\u0073\u002e\u0020%\u0064",len (_fbdab ));
};return nil ,false ;};if !_dcgdd .aligned (){if _fdee {_ce .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0068\u006f\u0072\u007a\u0073\u002e\u0020%\u0064",len (_dcgdd ));
};return nil ,false ;};};_deef :=append (_fbdab ,_dcgdd ...);return _deef ,true ;};func (_gbce *ruling )intersects (_dgcaf *ruling )bool {_ffeda :=(_gbce ._deecb ==_efcab &&_dgcaf ._deecb ==_dbdde )||(_dgcaf ._deecb ==_efcab &&_gbce ._deecb ==_dbdde );
_aebcg :=func (_gbfe ,_abcdc *ruling )bool {return _gbfe ._caafe -_deab <=_abcdc ._bbdbe &&_abcdc ._bbdbe <=_gbfe ._feeg +_deab ;};_ebda :=_aebcg (_gbce ,_dgcaf );_feaa :=_aebcg (_dgcaf ,_gbce );if _fdee {_cc .Printf ("\u0020\u0020\u0020\u0020\u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003a\u0020\u0020\u006fr\u0074\u0068\u006f\u0067\u006f\u006e\u0061l\u003d\u0025\u0074\u0020\u006f\u0031\u003d\u0025\u0074\u0020\u006f2\u003d\u0025\u0074\u0020\u2192\u0020\u0025\u0074\u000a"+"\u0020\u0020\u0020 \u0020\u0020\u0020\u0076\u003d\u0025\u0073\u000a"+" \u0020\u0020\u0020\u0020\u0020\u0077\u003d\u0025\u0073\u000a",_ffeda ,_ebda ,_feaa ,_ffeda &&_ebda &&_feaa ,_gbce ,_dgcaf );
};return _ffeda &&_ebda &&_feaa ;};

// Options extractor options.
type Options struct{

// DisableDocumentTags specifies whether to use the document tags during list extraction.
DisableDocumentTags bool ;

// ApplyCropBox will extract page text based on page cropbox if set to `true`.
ApplyCropBox bool ;

// UseSimplerExtractionProcess will skip topological text ordering and table processing.
//
// NOTE: While normally the extra processing is beneficial, it can also lead to problems when it does not work.
// Thus it is a flag to allow the user to control this process.
//
// Skipping some extraction processes would also lead to the reduced processing time.
UseSimplerExtractionProcess bool ;};func (_cbag *PageText )computeViews (){_bgbc :=_cbag .getParagraphs ();_dfa :=new (_cde .Buffer );_bgbc .writeText (_dfa );_cbag ._dce =_dfa .String ();_cbag ._aba =_bgbc .toTextMarks ();_cbag ._fdf =_bgbc .tables ();
if _gfde {_ce .Log .Info ("\u0063\u006f\u006dpu\u0074\u0065\u0056\u0069\u0065\u0077\u0073\u003a\u0020\u0074\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064",len (_cbag ._fdf ));};};func _ccgdg (_daec map[int ][]float64 )[]int {_eabcb :=make ([]int ,len (_daec ));
_dgfb :=0;for _cadfe :=range _daec {_eabcb [_dgfb ]=_cadfe ;_dgfb ++;};_f .Ints (_eabcb );return _eabcb ;};

// String returns a description of `k`.
func (_bacdb rulingKind )String ()string {_fegcde ,_dgbf :=_cecd [_bacdb ];if !_dgbf {return _cc .Sprintf ("\u004e\u006ft\u0020\u0061\u0020r\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_bacdb );};return _fegcde ;};func (_efe *imageExtractContext )extractInlineImage (_gb *_g .ContentStreamInlineImage ,_eac _g .GraphicsState ,_eada *_ea .PdfPageResources )error {_dgbc ,_fdg :=_gb .ToImage (_eada );
if _fdg !=nil {return _fdg ;};_faf ,_fdg :=_gb .GetColorSpace (_eada );if _fdg !=nil {return _fdg ;};if _faf ==nil {_faf =_ea .NewPdfColorspaceDeviceGray ();};_cge ,_fdg :=_faf .ImageToRGB (*_dgbc );if _fdg !=nil {return _fdg ;};_cce :=ImageMark {Image :&_cge ,Width :_eac .CTM .ScalingFactorX (),Height :_eac .CTM .ScalingFactorY (),Angle :_eac .CTM .Angle ()};
_cce .X ,_cce .Y =_eac .CTM .Translation ();_efe ._cga =append (_efe ._cga ,_cce );_efe ._fg ++;return nil ;};func (_cega paraList )addNeighbours (){_acdc :=func (_dfba []int ,_dbdfb *textPara )([]*textPara ,[]*textPara ){_dgead :=make ([]*textPara ,0,len (_dfba )-1);
_gbabd :=make ([]*textPara ,0,len (_dfba )-1);for _ ,_febga :=range _dfba {_ggffc :=_cega [_febga ];if _ggffc .Urx <=_dbdfb .Llx {_dgead =append (_dgead ,_ggffc );}else if _ggffc .Llx >=_dbdfb .Urx {_gbabd =append (_gbabd ,_ggffc );};};return _dgead ,_gbabd ;
};_eegb :=func (_ffdge []int ,_gceeb *textPara )([]*textPara ,[]*textPara ){_fggcg :=make ([]*textPara ,0,len (_ffdge )-1);_cade :=make ([]*textPara ,0,len (_ffdge )-1);for _ ,_bfef :=range _ffdge {_gebg :=_cega [_bfef ];if _gebg .Ury <=_gceeb .Lly {_cade =append (_cade ,_gebg );
}else if _gebg .Lly >=_gceeb .Ury {_fggcg =append (_fggcg ,_gebg );};};return _fggcg ,_cade ;};_fffea :=_cega .yNeighbours (_ebb );for _ ,_aead :=range _cega {_eage :=_fffea [_aead ];if len (_eage )==0{continue ;};_dgfae ,_fcfed :=_acdc (_eage ,_aead );
if len (_dgfae )==0&&len (_fcfed )==0{continue ;};if len (_dgfae )> 0{_agbe :=_dgfae [0];for _ ,_eccae :=range _dgfae [1:]{if _eccae .Urx >=_agbe .Urx {_agbe =_eccae ;};};for _ ,_egab :=range _dgfae {if _egab !=_agbe &&_egab .Urx > _agbe .Llx {_agbe =nil ;
break ;};};if _agbe !=nil &&_bece (_aead .PdfRectangle ,_agbe .PdfRectangle ){_aead ._cegb =_agbe ;};};if len (_fcfed )> 0{_ebaaeb :=_fcfed [0];for _ ,_cafe :=range _fcfed [1:]{if _cafe .Llx <=_ebaaeb .Llx {_ebaaeb =_cafe ;};};for _ ,_gggf :=range _fcfed {if _gggf !=_ebaaeb &&_gggf .Llx < _ebaaeb .Urx {_ebaaeb =nil ;
break ;};};if _ebaaeb !=nil &&_bece (_aead .PdfRectangle ,_ebaaeb .PdfRectangle ){_aead ._abbf =_ebaaeb ;};};};_fffea =_cega .xNeighbours (_fbed );for _ ,_dgded :=range _cega {_gagcb :=_fffea [_dgded ];if len (_gagcb )==0{continue ;};_ebgfa ,_eafcg :=_eegb (_gagcb ,_dgded );
if len (_ebgfa )==0&&len (_eafcg )==0{continue ;};if len (_eafcg )> 0{_begfb :=_eafcg [0];for _ ,_egbbc :=range _eafcg [1:]{if _egbbc .Ury >=_begfb .Ury {_begfb =_egbbc ;};};for _ ,_dgbga :=range _eafcg {if _dgbga !=_begfb &&_dgbga .Ury > _begfb .Lly {_begfb =nil ;
break ;};};if _begfb !=nil &&_ecdb (_dgded .PdfRectangle ,_begfb .PdfRectangle ){_dgded ._bcgc =_begfb ;};};if len (_ebgfa )> 0{_egda :=_ebgfa [0];for _ ,_ecaca :=range _ebgfa [1:]{if _ecaca .Lly <=_egda .Lly {_egda =_ecaca ;};};for _ ,_bdgf :=range _ebgfa {if _bdgf !=_egda &&_bdgf .Lly < _egda .Ury {_egda =nil ;
break ;};};if _egda !=nil &&_ecdb (_dgded .PdfRectangle ,_egda .PdfRectangle ){_dgded ._bdea =_egda ;};};};for _ ,_gaeef :=range _cega {if _gaeef ._cegb !=nil &&_gaeef ._cegb ._abbf !=_gaeef {_gaeef ._cegb =nil ;};if _gaeef ._bdea !=nil &&_gaeef ._bdea ._bcgc !=_gaeef {_gaeef ._bdea =nil ;
};if _gaeef ._abbf !=nil &&_gaeef ._abbf ._cegb !=_gaeef {_gaeef ._abbf =nil ;};if _gaeef ._bcgc !=nil &&_gaeef ._bcgc ._bdea !=_gaeef {_gaeef ._bcgc =nil ;};};};func (_gffd *textObject )getFontDict (_gfe string )(_deba _ff .PdfObject ,_ffge error ){_agbb :=_gffd ._abfe ;
if _agbb ==nil {_ce .Log .Debug ("g\u0065\u0074\u0046\u006f\u006e\u0074D\u0069\u0063\u0074\u002e\u0020\u004eo\u0020\u0072\u0065\u0073\u006f\u0075\u0072c\u0065\u0073\u002e\u0020\u006e\u0061\u006d\u0065\u003d\u0025#\u0071",_gfe );return nil ,nil ;};_deba ,_fbea :=_agbb .GetFontByName (_ff .PdfObjectName (_gfe ));
if !_fbea {_ce .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0067\u0065t\u0046\u006f\u006et\u0044\u0069\u0063\u0074\u003a\u0020\u0046\u006f\u006et \u006e\u006f\u0074 \u0066\u006fu\u006e\u0064\u003a\u0020\u006e\u0061m\u0065\u003d%\u0023\u0071",_gfe );
return nil ,_e .New ("f\u006f\u006e\u0074\u0020no\u0074 \u0069\u006e\u0020\u0072\u0065s\u006f\u0075\u0072\u0063\u0065\u0073");};return _deba ,nil ;};func (_dgddb paraList )llyOrdering ()[]int {_eeae :=make ([]int ,len (_dgddb ));for _fadg :=range _dgddb {_eeae [_fadg ]=_fadg ;
};_f .SliceStable (_eeae ,func (_ebbf ,_ddcc int )bool {_gccd ,_acebe :=_eeae [_ebbf ],_eeae [_ddcc ];return _dgddb [_gccd ].Lly < _dgddb [_acebe ].Lly ;});return _eeae ;};func (_bagab *textTable )emptyCompositeRow (_gdefbc int )bool {for _dffdc :=0;_dffdc < _bagab ._fdaegd ;
_dffdc ++{if _gegfc ,_gaac :=_bagab ._ebddd [_cbaga (_dffdc ,_gdefbc )];_gaac {if len (_gegfc .paraList )> 0{return false ;};};};return true ;};func _dgcc (_fdfe ,_cccc _ea .PdfRectangle )(_ea .PdfRectangle ,bool ){if !_aaca (_fdfe ,_cccc ){return _ea .PdfRectangle {},false ;
};return _ea .PdfRectangle {Llx :_dg .Max (_fdfe .Llx ,_cccc .Llx ),Urx :_dg .Min (_fdfe .Urx ,_cccc .Urx ),Lly :_dg .Max (_fdfe .Lly ,_cccc .Lly ),Ury :_dg .Min (_fdfe .Ury ,_cccc .Ury )},true ;};

// Len returns the number of TextMarks in `ma`.
func (_acd *TextMarkArray )Len ()int {if _acd ==nil {return 0;};return len (_acd ._ddgg );};func (_fcaf *textPara )writeCellText (_dgade _d .Writer ){for _abcgf ,_fdbg :=range _fcaf ._efde {_ecde :=_fdbg .text ();_ccdbb :=_cfbaa &&_fdbg .endsInHyphen ()&&_abcgf !=len (_fcaf ._efde )-1;
if _ccdbb {_ecde =_bbaf (_ecde );};_dgade .Write ([]byte (_ecde ));if !(_ccdbb ||_abcgf ==len (_fcaf ._efde )-1){_dgade .Write ([]byte (_cfef (_fdbg ._bacaf ,_fcaf ._efde [_abcgf +1]._bacaf )));};};};func _eaaf (_acbbb map[float64 ]gridTile )[]float64 {_gcdb :=make ([]float64 ,0,len (_acbbb ));
for _ddba :=range _acbbb {_gcdb =append (_gcdb ,_ddba );};_f .Float64s (_gcdb );return _gcdb ;};func (_cbggc *wordBag )removeDuplicates (){if _dabd {_ce .Log .Info ("r\u0065m\u006f\u0076\u0065\u0044\u0075\u0070\u006c\u0069c\u0061\u0074\u0065\u0073: \u0025\u0071",_cbggc .text ());
};for _ ,_fgcdc :=range _cbggc .depthIndexes (){if len (_cbggc ._edfa [_fgcdc ])==0{continue ;};_cfecf :=_cbggc ._edfa [_fgcdc ][0];_bcae :=_cacbg *_cfecf ._cfdf ;_dfdc :=_cfecf ._bcded ;for _ ,_cfge :=range _cbggc .depthBand (_dfdc ,_dfdc +_bcae ){_fabb :=map[*textWord ]struct{}{};
_gdfa :=_cbggc ._edfa [_cfge ];for _ ,_gbgae :=range _gdfa {if _ ,_gaagc :=_fabb [_gbgae ];_gaagc {continue ;};for _ ,_cfeda :=range _gdfa {if _ ,_agcf :=_fabb [_cfeda ];_agcf {continue ;};if _cfeda !=_gbgae &&_cfeda ._baea ==_gbgae ._baea &&_dg .Abs (_cfeda .Llx -_gbgae .Llx )< _bcae &&_dg .Abs (_cfeda .Urx -_gbgae .Urx )< _bcae &&_dg .Abs (_cfeda .Lly -_gbgae .Lly )< _bcae &&_dg .Abs (_cfeda .Ury -_gbgae .Ury )< _bcae {_fabb [_cfeda ]=struct{}{};
};};};if len (_fabb )> 0{_edba :=0;for _ ,_eeccg :=range _gdfa {if _ ,_aabeg :=_fabb [_eeccg ];!_aabeg {_gdfa [_edba ]=_eeccg ;_edba ++;};};_cbggc ._edfa [_cfge ]=_gdfa [:len (_gdfa )-len (_fabb )];if len (_cbggc ._edfa [_cfge ])==0{delete (_cbggc ._edfa ,_cfge );
};};};};};func (_fade *shapesState )clearPath (){_fade ._fbfe =nil ;_fade ._ddgb =false ;if _ageb {_ce .Log .Info ("\u0043\u004c\u0045A\u0052\u003a\u0020\u0073\u0073\u003d\u0025\u0073",_fade );};};func _dgbfc (_ebcdf _ea .PdfRectangle )rulingKind {_bgdcc :=_ebcdf .Width ();
_bfaa :=_ebcdf .Height ();if _bgdcc > _bfaa {if _bgdcc >=_ccef {return _dbdde ;};}else {if _bfaa >=_ccef {return _efcab ;};};return _aaebd ;};func (_fcaff compositeCell )split (_afag ,_cgea []float64 )*textTable {_fadf :=len (_afag )+1;_ebcdg :=len (_cgea )+1;
if _gfde {_ce .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0043\u0065l\u006c\u002e\u0073\u0070l\u0069\u0074\u003a\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a\u0009\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025\u0073\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073=\u0025\u0036\u002e\u0032\u0066\u000a\t\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d%\u0036\u002e\u0032\u0066",_ebcdg ,_fadf ,_fcaff ,_afag ,_cgea );
_cc .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073\u000a",len (_fcaff .paraList ));for _fdaa ,_ecad :=range _fcaff .paraList {_cc .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fdaa ,_ecad .String ());};
_cc .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",len (_fcaff .lines ()));for _faacg ,_dfcb :=range _fcaff .lines (){_cc .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_faacg ,_dfcb );};};_afag =_gedeg (_afag ,_fcaff .Ury ,_fcaff .Lly );
_cgea =_gedeg (_cgea ,_fcaff .Llx ,_fcaff .Urx );_aacdb :=make (map[uint64 ]*textPara ,_ebcdg *_fadf );_ebdg :=textTable {_fdaegd :_ebcdg ,_bgdf :_fadf ,_bfeg :_aacdb };_ecda :=_fcaff .paraList ;_f .Slice (_ecda ,func (_ffgc ,_ggdc int )bool {_ebgg ,_eafd :=_ecda [_ffgc ],_ecda [_ggdc ];
_dddb ,_edge :=_ebgg .Lly ,_eafd .Lly ;if _dddb !=_edge {return _dddb < _edge ;};return _ebgg .Llx < _eafd .Llx ;});_fadef :=make (map[uint64 ]_ea .PdfRectangle ,_ebcdg *_fadf );for _fdgbf ,_defg :=range _afag [1:]{_ecbgb :=_afag [_fdgbf ];for _gcdgg ,_ffa :=range _cgea [1:]{_bcaec :=_cgea [_gcdgg ];
_fadef [_cbaga (_gcdgg ,_fdgbf )]=_ea .PdfRectangle {Llx :_bcaec ,Urx :_ffa ,Lly :_defg ,Ury :_ecbgb };};};if _gfde {_ce .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0043\u0065l\u006c\u002e\u0073\u0070\u006c\u0069\u0074\u003a\u0020\u0072e\u0063\u0074\u0073");
_cc .Printf ("\u0020\u0020\u0020\u0020");for _ebac :=0;_ebac < _ebcdg ;_ebac ++{_cc .Printf ("\u0025\u0033\u0030\u0064\u002c\u0020",_ebac );};_cc .Println ();for _egac :=0;_egac < _fadf ;_egac ++{_cc .Printf ("\u0020\u0020\u0025\u0032\u0064\u003a",_egac );
for _fcafc :=0;_fcafc < _ebcdg ;_fcafc ++{_cc .Printf ("\u00256\u002e\u0032\u0066\u002c\u0020",_fadef [_cbaga (_fcafc ,_egac )]);};_cc .Println ();};};_egfe :=func (_gfef *textLine )(int ,int ){for _cegf :=0;_cegf < _fadf ;_cegf ++{for _cbfe :=0;_cbfe < _ebcdg ;
_cbfe ++{if _ecdg (_fadef [_cbaga (_cbfe ,_cegf )],_gfef .PdfRectangle ){return _cbfe ,_cegf ;};};};return -1,-1;};_bbfb :=make (map[uint64 ][]*textLine ,_ebcdg *_fadf );for _ ,_eddg :=range _ecda .lines (){_bfbbg ,_fbga :=_egfe (_eddg );if _bfbbg < 0{continue ;
};_bbfb [_cbaga (_bfbbg ,_fbga )]=append (_bbfb [_cbaga (_bfbbg ,_fbga )],_eddg );};for _gagacd :=0;_gagacd < len (_afag )-1;_gagacd ++{_faeea :=_afag [_gagacd ];_eacd :=_afag [_gagacd +1];for _effb :=0;_effb < len (_cgea )-1;_effb ++{_acfa :=_cgea [_effb ];
_acfab :=_cgea [_effb +1];_dddg :=_ea .PdfRectangle {Llx :_acfa ,Urx :_acfab ,Lly :_eacd ,Ury :_faeea };_feaba :=_bbfb [_cbaga (_effb ,_gagacd )];if len (_feaba )==0{continue ;};_faeb :=_bgcbd (_dddg ,_feaba );_ebdg .put (_effb ,_gagacd ,_faeb );};};return &_ebdg ;
};func _fcdc (_ddfd []pathSection ){if _agbf < 0.0{return ;};if _fdee {_ce .Log .Info ("\u0067\u0072\u0061\u006e\u0075\u006c\u0061\u0072\u0069\u007a\u0065\u003a\u0020\u0025\u0064 \u0073u\u0062\u0070\u0061\u0074\u0068\u0020\u0073\u0065\u0063\u0074\u0069\u006f\u006e\u0073",len (_ddfd ));
};for _bcegg ,_ddgbdd :=range _ddfd {for _gagad ,_fdagc :=range _ddgbdd ._aggc {for _edebf ,_fdgbb :=range _fdagc ._fbca {_fdagc ._fbca [_edebf ]=_aa .Point {X :_bfddc (_fdgbb .X ),Y :_bfddc (_fdgbb .Y )};if _fdee {_fccde :=_fdagc ._fbca [_edebf ];if !_eacge (_fdgbb ,_fccde ){_gdfbe :=_aa .Point {X :_fccde .X -_fdgbb .X ,Y :_fccde .Y -_fdgbb .Y };
_cc .Printf ("\u0025\u0034d \u002d\u0020\u00254\u0064\u0020\u002d\u0020%4d\u003a %\u002e\u0032\u0066\u0020\u2192\u0020\u0025.2\u0066\u0020\u0028\u0025\u0067\u0029\u000a",_bcegg ,_gagad ,_edebf ,_fdgbb ,_fccde ,_gdfbe );};};};};};};func _abbe (_egcc ,_acga _aa .Point )rulingKind {_edgcb :=_dg .Abs (_egcc .X -_acga .X );
_badb :=_dg .Abs (_egcc .Y -_acga .Y );return _bgbg (_edgcb ,_badb ,_deec );};func (_deg *wordBag )applyRemovals (_acac map[int ]map[*textWord ]struct{}){for _gaed ,_degc :=range _acac {if len (_degc )==0{continue ;};_cab :=_deg ._edfa [_gaed ];_dfac :=len (_cab )-len (_degc );
if _dfac ==0{delete (_deg ._edfa ,_gaed );continue ;};_dcgee :=make ([]*textWord ,_dfac );_aced :=0;for _ ,_dfca :=range _cab {if _ ,_gade :=_degc [_dfca ];!_gade {_dcgee [_aced ]=_dfca ;_aced ++;};};_deg ._edfa [_gaed ]=_dcgee ;};};func (_efffe *subpath )makeRectRuling (_bfbbc _be .Color )(*ruling ,bool ){if _edaa {_ce .Log .Info ("\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0070\u0061\u0074\u0068\u003d\u0025\u0076",_efffe );
};_dafd :=_efffe ._fbca [:4];_gbfff :=make (map[int ]rulingKind ,len (_dafd ));for _dafed ,_dggf :=range _dafd {_ccag :=_efffe ._fbca [(_dafed +1)%4];_gbfff [_dafed ]=_abbe (_dggf ,_ccag );if _edaa {_cc .Printf ("\u0025\u0034\u0064: \u0025\u0073\u0020\u003d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066",_dafed ,_gbfff [_dafed ],_dggf ,_ccag );
};};if _edaa {_cc .Printf ("\u0020\u0020\u0020\u006b\u0069\u006e\u0064\u0073\u003d\u0025\u002b\u0076\u000a",_gbfff );};var _dcbe ,_abae []int ;for _gcbd ,_bfag :=range _gbfff {switch _bfag {case _dbdde :_abae =append (_abae ,_gcbd );case _efcab :_dcbe =append (_dcbe ,_gcbd );
};};if _edaa {_cc .Printf ("\u0020\u0020 \u0068\u006f\u0072z\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_abae ),_abae );_cc .Printf ("\u0020\u0020 \u0076\u0065\u0072t\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_dcbe ),_dcbe );
};_adfgc :=(len (_abae )==2&&len (_dcbe )==2)||(len (_abae )==2&&len (_dcbe )==0&&_cdff (_dafd [_abae [0]],_dafd [_abae [1]]))||(len (_dcbe )==2&&len (_abae )==0&&_eefg (_dafd [_dcbe [0]],_dafd [_dcbe [1]]));if _edaa {_cc .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_abae ),len (_dcbe ),_adfgc );
};if !_adfgc {if _edaa {_ce .Log .Error ("\u0021!\u006d\u0061\u006b\u0065R\u0065\u0063\u0074\u0052\u0075l\u0069n\u0067:\u0020\u0070\u0061\u0074\u0068\u003d\u0025v",_efffe );_cc .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_abae ),len (_dcbe ),_adfgc );
};return &ruling {},false ;};if len (_dcbe )==0{for _caeg ,_bbdd :=range _gbfff {if _bbdd !=_dbdde {_dcbe =append (_dcbe ,_caeg );};};};if len (_abae )==0{for _fecb ,_cfdc :=range _gbfff {if _cfdc !=_efcab {_abae =append (_abae ,_fecb );};};};if _edaa {_ce .Log .Info ("\u006da\u006b\u0065R\u0065\u0063\u0074\u0052u\u006c\u0069\u006eg\u003a\u0020\u0068\u006f\u0072\u007a\u0073\u003d\u0025d \u0076\u0065\u0072t\u0073\u003d%\u0064\u0020\u0070\u006f\u0069\u006et\u0073\u003d%\u0064\u000a"+"\u0009\u0020\u0068o\u0072\u007a\u0073\u003d\u0025\u002b\u0076\u000a"+"\u0009\u0020\u0076e\u0072\u0074\u0073\u003d\u0025\u002b\u0076\u000a"+"\t\u0070\u006f\u0069\u006e\u0074\u0073\u003d\u0025\u002b\u0076",len (_abae ),len (_dcbe ),len (_dafd ),_abae ,_dcbe ,_dafd );
};var _gbeee ,_ffegc ,_gdce ,_gaca _aa .Point ;if _dafd [_abae [0]].Y > _dafd [_abae [1]].Y {_gdce ,_gaca =_dafd [_abae [0]],_dafd [_abae [1]];}else {_gdce ,_gaca =_dafd [_abae [1]],_dafd [_abae [0]];};if _dafd [_dcbe [0]].X > _dafd [_dcbe [1]].X {_gbeee ,_ffegc =_dafd [_dcbe [0]],_dafd [_dcbe [1]];
}else {_gbeee ,_ffegc =_dafd [_dcbe [1]],_dafd [_dcbe [0]];};_fecf :=_ea .PdfRectangle {Llx :_gbeee .X ,Urx :_ffegc .X ,Lly :_gaca .Y ,Ury :_gdce .Y };if _fecf .Llx > _fecf .Urx {_fecf .Llx ,_fecf .Urx =_fecf .Urx ,_fecf .Llx ;};if _fecf .Lly > _fecf .Ury {_fecf .Lly ,_fecf .Ury =_fecf .Ury ,_fecf .Lly ;
};_cddc :=rectRuling {PdfRectangle :_fecf ,_bgad :_dgbfc (_fecf ),Color :_bfbbc };if _cddc ._bgad ==_aaebd {if _edaa {_ce .Log .Error ("\u006da\u006b\u0065\u0052\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006eg\u003a\u0020\u006b\u0069\u006e\u0064\u003d\u006e\u0069\u006c");
};return nil ,false ;};_ebdec ,_fffc :=_cddc .asRuling ();if !_fffc {if _edaa {_ce .Log .Error ("\u006da\u006b\u0065\u0052\u0065c\u0074\u0052\u0075\u006c\u0069n\u0067:\u0020!\u0069\u0073\u0052\u0075\u006c\u0069\u006eg");};return nil ,false ;};if _fdee {_cc .Printf ("\u0020\u0020\u0020\u0072\u003d\u0025\u0073\u000a",_ebdec .String ());
};return _ebdec ,true ;};func _agada (_fdcfd []*textWord ,_aeede *textWord )[]*textWord {for _gbccc ,_ecffa :=range _fdcfd {if _ecffa ==_aeede {return _fgdbbg (_fdcfd ,_gbccc );};};_ce .Log .Error ("\u0072\u0065\u006d\u006f\u0076e\u0057\u006f\u0072\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u0073\u0020\u0064o\u0065\u0073\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",_aeede );
return nil ;};func _faec (_ddfe []TextMark ,_gadb *int ,_bcdc TextMark )[]TextMark {_bcdc .Offset =*_gadb ;_ddfe =append (_ddfe ,_bcdc );*_gadb +=len (_bcdc .Text );return _ddfe ;};func (_aabf *shapesState )stroke (_faca *[]pathSection ){_fgfb :=pathSection {_aggc :_aabf ._fbfe ,Color :_aabf ._debc .getStrokeColor ()};
*_faca =append (*_faca ,_fgfb );if _fdee {_cc .Printf ("\u0020 \u0020\u0020S\u0054\u0052\u004fK\u0045\u003a\u0020\u0025\u0064\u0020\u0073t\u0072\u006f\u006b\u0065\u0073\u0020s\u0073\u003d\u0025\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d%\u002b\u0076\u0020\u0025\u0036\u002e\u0032\u0066\u000a",len (*_faca ),_aabf ,_aabf ._debc .getStrokeColor (),_fgfb .bbox ());
if _agdc {for _dgbb ,_cece :=range _aabf ._fbfe {_cc .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_dgbb ,_cece );if _dgbb ==10{break ;};};};};};func _bece (_acgc ,_ffceg _ea .PdfRectangle )bool {return _acgc .Lly <=_ffceg .Ury &&_ffceg .Lly <=_acgc .Ury ;
};func _ggad (_agd *_g .ContentStreamOperation )(float64 ,error ){if len (_agd .Params )!=1{_ccea :=_e .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");_ce .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_agd .Operand ,1,len (_agd .Params ),_agd .Params );
return 0.0,_ccea ;};return _ff .GetNumberAsFloat (_agd .Params [0]);};func (_bdegg rulingList )augmentGrid ()(rulingList ,rulingList ){_cccg ,_dddbg :=_bdegg .vertsHorzs ();if len (_cccg )==0||len (_dddbg )==0{return _cccg ,_dddbg ;};_ddec ,_ecff :=_cccg ,_dddbg ;
_efba :=_cccg .bbox ();_fdgfa :=_dddbg .bbox ();if _fdee {_ce .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0056\u003d\u0025\u0036\u002e\u0032\u0066",_efba );_ce .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0048\u003d\u0025\u0036\u002e\u0032\u0066",_fdgfa );
};var _gfgd ,_befc ,_cdagg ,_bbbdg *ruling ;if _fdgfa .Llx < _efba .Llx -_deab {_gfgd =&ruling {_geed :_bdba ,_deecb :_efcab ,_bbdbe :_fdgfa .Llx ,_caafe :_efba .Lly ,_feeg :_efba .Ury };_cccg =append (rulingList {_gfgd },_cccg ...);};if _fdgfa .Urx > _efba .Urx +_deab {_befc =&ruling {_geed :_bdba ,_deecb :_efcab ,_bbdbe :_fdgfa .Urx ,_caafe :_efba .Lly ,_feeg :_efba .Ury };
_cccg =append (_cccg ,_befc );};if _efba .Lly < _fdgfa .Lly -_deab {_cdagg =&ruling {_geed :_bdba ,_deecb :_dbdde ,_bbdbe :_efba .Lly ,_caafe :_fdgfa .Llx ,_feeg :_fdgfa .Urx };_dddbg =append (rulingList {_cdagg },_dddbg ...);};if _efba .Ury > _fdgfa .Ury +_deab {_bbbdg =&ruling {_geed :_bdba ,_deecb :_dbdde ,_bbdbe :_efba .Ury ,_caafe :_fdgfa .Llx ,_feeg :_fdgfa .Urx };
_dddbg =append (_dddbg ,_bbbdg );};if len (_cccg )+len (_dddbg )==len (_bdegg ){return _ddec ,_ecff ;};_eeee :=append (_cccg ,_dddbg ...);_bdegg .log ("u\u006e\u0061\u0075\u0067\u006d\u0065\u006e\u0074\u0065\u0064");_eeee .log ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0065d");
return _cccg ,_dddbg ;};type subpath struct{_fbca []_aa .Point ;_dbad bool ;};func _ceecc (_eddba map[int ][]float64 ){if len (_eddba )<=1{return ;};_bcfa :=_ccgdg (_eddba );if _gfde {_ce .Log .Info ("\u0066i\u0078C\u0065\u006c\u006c\u0073\u003a \u006b\u0065y\u0073\u003d\u0025\u002b\u0076",_bcfa );
};var _cffc ,_cbage int ;for _cffc ,_cbage =range _bcfa {if _eddba [_cbage ]!=nil {break ;};};for _dgggf ,_aecag :=range _bcfa [_cffc :]{_ebcde :=_eddba [_aecag ];if _ebcde ==nil {continue ;};if _gfde {_cc .Printf ("\u0025\u0034\u0064\u003a\u0020\u006b\u0030\u003d\u0025\u0064\u0020\u006b1\u003d\u0025\u0064\u000a",_cffc +_dgggf ,_cbage ,_aecag );
};_abbd :=_eddba [_aecag ];if _abbd [len (_abbd )-1]> _ebcde [0]{_abbd [len (_abbd )-1]=_ebcde [0];_eddba [_cbage ]=_abbd ;};_cbage =_aecag ;};};type textWord struct{_ea .PdfRectangle ;_bcded float64 ;_baea string ;_fcac []*textMark ;_cfdf float64 ;_aegfg bool ;
};func _efcb (_daefb string ,_cdecd int )string {if len (_daefb )< _cdecd {return _daefb ;};return _daefb [:_cdecd ];};func _fadc (_aadb ,_cbaf bounded )float64 {_bffb :=_cdec (_aadb ,_cbaf );if !_geef (_bffb ){return _bffb ;};return _fdacg (_aadb ,_cbaf );
};func (_bfebe compositeCell )hasLines (_agba []*textLine )bool {for _beaaf ,_cedcf :=range _agba {_fdcc :=_aaca (_bfebe .PdfRectangle ,_cedcf .PdfRectangle );if _gfde {_cc .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u005e\u005e\u005e\u0069\u006e\u0074\u0065\u0072\u0073e\u0063t\u0073\u003d\u0025\u0074\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u000a",_fdcc ,_beaaf ,len (_agba ));
_cc .Printf ("\u0020\u0020\u0020\u0020  \u005e\u005e\u005e\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025s\u000a",_bfebe );_cc .Printf ("\u0020 \u0020 \u0020\u0020\u0020\u006c\u0069\u006e\u0065\u003d\u0025\u0073\u000a",_cedcf );};if _fdcc {return true ;
};};return false ;};

// ToTextMark returns the public view of `tm`.
func (_eafgb *textMark )ToTextMark ()TextMark {return TextMark {Text :_eafgb ._face ,Original :_eafgb ._efgc ,BBox :_eafgb ._ddbb ,Font :_eafgb ._fdfcd ,FontSize :_eafgb ._gfdeb ,FillColor :_eafgb ._gegg ,StrokeColor :_eafgb ._dfcdf ,Orientation :_eafgb ._acdg ,DirectObject :_eafgb ._cbfg ,ObjString :_eafgb ._dagec ,Tw :_eafgb .Tw ,Th :_eafgb .Th ,Tc :_eafgb ._fcfg ,Index :_eafgb ._accbe };
};func (_fdga rulingList )mergePrimary ()float64 {_gccab :=_fdga [0]._bbdbe ;for _ ,_dcbbe :=range _fdga [1:]{_gccab +=_dcbbe ._bbdbe ;};return _gccab /float64 (len (_fdga ));};

// Append appends `mark` to the mark array.
func (_cbacc *TextMarkArray )Append (mark TextMark ){_cbacc ._ddgg =append (_cbacc ._ddgg ,mark )};

// List returns all the list objects detected on the page.
// It detects all the bullet point Lists from a given pdf page and builds a slice of bullet list objects.
// A given bullet list object has a tree structure.
// Each bullet point list is extracted with the text content it contains and all the sub lists found under it as children in the tree.
// The rest content of the pdf is ignored and only text in the bullet point lists are extracted.
// The list extraction is done in two ways.
// 1. If the document is tagged then the lists are extracted using the tags provided in the document.
// 2. Otherwise the bullet lists are extracted from the raw text using regex matching.
// By default the document tag is used if available.
// However this can be disabled using `DisableDocumentTags` in the `Options` object.
// Sometimes disabling document tags option might give a better bullet list extraction if the document was tagged incorrectly.
//     options := &Options{
//	     DisableDocumentTags: false, // this means use document tag if available
//     }
//     ex, err := NewWithOptions(page, options)
//     // handle error
//     pageText, _, _, err := ex.ExtractPageText()
//     // handle error
//     lists := pageText.List()
//     txt := lists.Text()
func (_eeea PageText )List ()lists {_bedc :=!_eeea ._feda ._agaa ;_ageba :=_eeea .getParagraphs ();_dfeb :=true ;if _eeea ._cda ==nil ||*_eeea ._cda ==nil {_dfeb =false ;};_fedgb :=_ageba .list ();if _dfeb &&_bedc {_ceed :=_ecbg (&_ageba );_bccf :=&structTreeRoot {};
_bccf .parseStructTreeRoot (*_eeea ._cda );if _bccf ._cdgg ==nil {_ce .Log .Debug ("\u004c\u0069\u0073\u0074\u003a\u0020\u0073t\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e'\u0074\u0020\u0068\u0061\u0076e\u0020\u0061\u006e\u0079\u0020\u0063\u006f\u006e\u0074e\u006e\u0074\u002c\u0020\u0075\u0073\u0069\u006e\u0067\u0020\u0074\u0065\u0078\u0074\u0020\u006d\u0061\u0074\u0063\u0068\u0069\u006e\u0067\u0020\u006d\u0065\u0074\u0068\u006f\u0064\u0020\u0069\u006e\u0073\u0074\u0065\u0061\u0064\u002e");
return _fedgb ;};_fedgb =_bccf .buildList (_ceed ,_eeea ._gdc );};return _fedgb ;};func (_abde *shapesState )lastpointEstablished ()(_aa .Point ,bool ){if _abde ._ddgb {return _abde ._cgac ,false ;};_ebag :=len (_abde ._fbfe );if _ebag > 0&&_abde ._fbfe [_ebag -1]._dbad {return _abde ._fbfe [_ebag -1].last (),false ;
};return _aa .Point {},true ;};func _aegb (_fdaeg []*textLine ,_gbac string )string {var _gcgaf _dbe .Builder ;_dbgb :=0.0;for _ddgbd ,_cfca :=range _fdaeg {_afeg :=_cfca .text ();_bbfe :=_cfca ._bacaf ;if _ddgbd < len (_fdaeg )-1{_dbgb =_fdaeg [_ddgbd +1]._bacaf ;
}else {_dbgb =0.0;};_gcgaf .WriteString (_gbac );_gcgaf .WriteString (_afeg );if _dbgb !=_bbfe {_gcgaf .WriteString ("\u000a");}else {_gcgaf .WriteString ("\u0020");};};return _gcgaf .String ();};func (_dfeee rulingList )vertsHorzs ()(rulingList ,rulingList ){var _bgca ,_agec rulingList ;
for _ ,_fdfbd :=range _dfeee {switch _fdfbd ._deecb {case _efcab :_bgca =append (_bgca ,_fdfbd );case _dbdde :_agec =append (_agec ,_fdfbd );};};return _bgca ,_agec ;};func (_adca *textPara )toCellTextMarks (_bcgdb *int )[]TextMark {var _ddac []TextMark ;
for _agbgf ,_bbad :=range _adca ._efde {_gfee :=_bbad .toTextMarks (_bcgdb );_daefa :=_cfbaa &&_bbad .endsInHyphen ()&&_agbgf !=len (_adca ._efde )-1;if _daefa {_gfee =_aeac (_gfee ,_bcgdb );};_ddac =append (_ddac ,_gfee ...);if !(_daefa ||_agbgf ==len (_adca ._efde )-1){_ddac =_cfbg (_ddac ,_bcgdb ,_cfef (_bbad ._bacaf ,_adca ._efde [_agbgf +1]._bacaf ));
};};return _ddac ;};

// String returns a string describing `pt`.
func (_gbae PageText )String ()string {_egeg :=_cc .Sprintf ("P\u0061\u0067\u0065\u0054ex\u0074:\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073",len (_gbae ._cacb ));_acef :=[]string {"\u002d"+_egeg };for _ ,_eaff :=range _gbae ._cacb {_acef =append (_acef ,_eaff .String ());
};_acef =append (_acef ,"\u002b"+_egeg );return _dbe .Join (_acef ,"\u000a");};

// String returns a string describing the current state of the textState stack.
func (_bfge *stateStack )String ()string {_ffb :=[]string {_cc .Sprintf ("\u002d\u002d\u002d\u002d f\u006f\u006e\u0074\u0020\u0073\u0074\u0061\u0063\u006b\u003a\u0020\u0025\u0064",len (*_bfge ))};for _fbcf ,_cgage :=range *_bfge {_bca :="\u003c\u006e\u0069l\u003e";
if _cgage !=nil {_bca =_cgage .String ();};_ffb =append (_ffb ,_cc .Sprintf ("\u0009\u0025\u0032\u0064\u003a\u0020\u0025\u0073",_fbcf ,_bca ));};return _dbe .Join (_ffb ,"\u000a");};func (_aafff *stateStack )push (_gfd *textState ){_dbef :=*_gfd ;*_aafff =append (*_aafff ,&_dbef )};
const _adfc =1.0/1000.0;func (_febg rectRuling )checkWidth (_egfa ,_cgada float64 )(float64 ,bool ){_aedf :=_cgada -_egfa ;_ddggb :=_aedf <=_fbge ;return _aedf ,_ddggb ;};func _beag (_adff *textLine )bool {_ceec :=true ;_baae :=-1;for _ ,_bggb :=range _adff ._aeeb {for _ ,_bfab :=range _bggb ._fcac {_cbgc :=_bfab ._gbeg ;
if _baae ==-1{_baae =_cbgc ;}else {if _baae !=_cbgc {_ceec =false ;break ;};};};};return _ceec ;};const (_aaebd rulingKind =iota ;_dbdde ;_efcab ;);

// ToText returns the page text as a single string.
// Deprecated: This function is deprecated and will be removed in a future major version. Please use
// Text() instead.
func (_aece PageText )ToText ()string {return _aece .Text ()};func (_eeb *textObject )getFillColor ()_be .Color {return _bgdff (_eeb ._gbb .ColorspaceNonStroking ,_eeb ._gbb .ColorNonStroking );};type rulingList []*ruling ;func (_agee rulingList )sortStrict (){_f .Slice (_agee ,func (_aagcd ,_gfeee int )bool {_cbdd ,_geebg :=_agee [_aagcd ],_agee [_gfeee ];
_eaee ,_dcebb :=_cbdd ._deecb ,_geebg ._deecb ;if _eaee !=_dcebb {return _eaee > _dcebb ;};_ffbded ,_dgeb :=_cbdd ._bbdbe ,_geebg ._bbdbe ;if !_geef (_ffbded -_dgeb ){return _ffbded < _dgeb ;};_ffbded ,_dgeb =_cbdd ._caafe ,_geebg ._caafe ;if _ffbded !=_dgeb {return _ffbded < _dgeb ;
};return _cbdd ._feeg < _geebg ._feeg ;});};func (_fggb *shapesState )drawRectangle (_ccgd ,_fcdd ,_bafd ,_bfcca float64 ){if _ageb {_acf :=_fggb .devicePoint (_ccgd ,_fcdd );_gbf :=_fggb .devicePoint (_ccgd +_bafd ,_fcdd +_bfcca );_dbeee :=_ea .PdfRectangle {Llx :_acf .X ,Lly :_acf .Y ,Urx :_gbf .X ,Ury :_gbf .Y };
_ce .Log .Info ("d\u0072a\u0077\u0052\u0065\u0063\u0074\u0061\u006e\u0067l\u0065\u003a\u0020\u00256.\u0032\u0066",_dbeee );};_fggb .newSubPath ();_fggb .moveTo (_ccgd ,_fcdd );_fggb .lineTo (_ccgd +_bafd ,_fcdd );_fggb .lineTo (_ccgd +_bafd ,_fcdd +_bfcca );
_fggb .lineTo (_ccgd ,_fcdd +_bfcca );_fggb .closePath ();};var _cecd =map[rulingKind ]string {_aaebd :"\u006e\u006f\u006e\u0065",_dbdde :"\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_efcab :"\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c"};


// TextMark represents extracted text on a page with information regarding both textual content,
// formatting (font and size) and positioning.
// It is the smallest unit of text on a PDF page, typically a single character.
//
// getBBox() in test_text.go shows how to compute bounding boxes of substrings of extracted text.
// The following code extracts the text on PDF page `page` into `text` then finds the bounding box
// `bbox` of substring `term` in `text`.
//
//	ex, _ := New(page)
//	// handle errors
//	pageText, _, _, err := ex.ExtractPageText()
//	// handle errors
//	text := pageText.Text()
//	textMarks := pageText.Marks()
//
//		start := strings.Index(text, term)
//	 end := start + len(term)
//	 spanMarks, err := textMarks.RangeOffset(start, end)
//	 // handle errors
//	 bbox, ok := spanMarks.BBox()
//	 // handle errors
type TextMark struct{

// Text is the extracted text.
Text string ;

// Original is the text in the PDF. It has not been decoded like `Text`.
Original string ;

// BBox is the bounding box of the text.
BBox _ea .PdfRectangle ;

// Font is the font the text was drawn with.
Font *_ea .PdfFont ;

// FontSize is the font size the text was drawn with.
FontSize float64 ;

// Offset is the offset of the start of TextMark.Text in the extracted text. If you do this
//   text, textMarks := pageText.Text(), pageText.Marks()
//   marks := textMarks.Elements()
// then marks[i].Offset is the offset of marks[i].Text in text.
Offset int ;

// Meta is set true for spaces and line breaks that we insert in the extracted text. We insert
// spaces (line breaks) when we see characters that are over a threshold horizontal (vertical)
//  distance  apart. See wordJoiner (lineJoiner) in PageText.computeViews().
Meta bool ;

// FillColor is the fill color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
FillColor _be .Color ;

// StrokeColor is the stroke color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
StrokeColor _be .Color ;

// Orientation is the text orientation
Orientation int ;

// DirectObject is the underlying PdfObject (Text Object) that represents the visible texts. This is introduced to get
// a simple access to the TextObject in case editing or replacment of some text is needed. E.g during redaction.
DirectObject _ff .PdfObject ;

// ObjString is a decoded string operand of a text-showing operator. It has the same value as `Text` attribute except
// when many glyphs are represented with the same Text Object that contains multiple length string operand in which case
// ObjString spans more than one character string that falls in different TextMark objects.
ObjString []string ;Tw float64 ;Th float64 ;Tc float64 ;Index int ;_ebe bool ;_ddgd *TextTable ;};func (_ded *wordBag )scanBand (_bcad string ,_bbbe *wordBag ,_bfcb func (_ggfe *wordBag ,_ddgga *textWord )bool ,_bbdb ,_dcd ,_adde float64 ,_edac ,_abad bool )int {_ddc :=_bbbe ._cdfcc ;
var _ccfea map[int ]map[*textWord ]struct{};if !_edac {_ccfea =_ded .makeRemovals ();};_accc :=_abdc *_ddc ;_cfcf :=0;for _ ,_eccb :=range _ded .depthBand (_bbdb -_accc ,_dcd +_accc ){if len (_ded ._edfa [_eccb ])==0{continue ;};for _ ,_gcga :=range _ded ._edfa [_eccb ]{if !(_bbdb -_accc <=_gcga ._bcded &&_gcga ._bcded <=_dcd +_accc ){continue ;
};if !_bfcb (_bbbe ,_gcga ){continue ;};_afae :=2.0*_dg .Abs (_gcga ._cfdf -_bbbe ._cdfcc )/(_gcga ._cfdf +_bbbe ._cdfcc );_gbfb :=_dg .Max (_gcga ._cfdf /_bbbe ._cdfcc ,_bbbe ._cdfcc /_gcga ._cfdf );_gggc :=_dg .Min (_afae ,_gbfb );if _adde > 0&&_gggc > _adde {continue ;
};if _bbbe .blocked (_gcga ){continue ;};if !_edac {_bbbe .pullWord (_gcga ,_eccb ,_ccfea );};_cfcf ++;if !_abad {if _gcga ._bcded < _bbdb {_bbdb =_gcga ._bcded ;};if _gcga ._bcded > _dcd {_dcd =_gcga ._bcded ;};};if _edac {break ;};};};if !_edac {_ded .applyRemovals (_ccfea );
};return _cfcf ;};func (_efb *textObject )showTextAdjusted (_ffef *_ff .PdfObjectArray ,_efdd int )error {_cfgc :=false ;for _ ,_dff :=range _ffef .Elements (){switch _dff .(type ){case *_ff .PdfObjectFloat ,*_ff .PdfObjectInteger :_fac ,_ggb :=_ff .GetNumberAsFloat (_dff );
if _ggb !=nil {_ce .Log .Debug ("\u0045\u0052\u0052\u004fR\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078t\u0041\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0042\u0061\u0064\u0020\u006e\u0075\u006d\u0065r\u0069\u0063\u0061\u006c\u0020a\u0072\u0067\u002e\u0020\u006f\u003d\u0025\u0073\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_dff ,_ffef );
return _ggb ;};_egeb ,_geb :=-_fac *0.001*_efb ._aeg ._dfg ,0.0;if _cfgc {_geb ,_egeb =_egeb ,_geb ;};_aacd :=_ebab (_aa .Point {X :_egeb ,Y :_geb });_efb ._eafe .Concat (_aacd );case *_ff .PdfObjectString :_acb :=_ff .TraceToDirectObject (_dff );_gce ,_fea :=_ff .GetStringBytes (_acb );
if !_fea {_ce .Log .Trace ("s\u0068\u006f\u0077\u0054\u0065\u0078\u0074\u0041\u0064j\u0075\u0073\u0074\u0065\u0064\u003a\u0020Ba\u0064\u0020\u0073\u0074r\u0069\u006e\u0067\u0020\u0061\u0072\u0067\u002e\u0020o=\u0025\u0073 \u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_dff ,_ffef );
return _ff .ErrTypeError ;};_efb .renderText (_acb ,_gce ,_efdd );default:_ce .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078\u0074A\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0055\u006e\u0065\u0078p\u0065\u0063\u0074\u0065\u0064\u0020\u0074\u0079\u0070\u0065\u0020\u0028%T\u0029\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_dff ,_ffef );
return _ff .ErrTypeError ;};};return nil ;};func (_fcea *textLine )toTextMarks (_eadcf *int )[]TextMark {var _fgbea []TextMark ;for _ ,_fadeb :=range _fcea ._aeeb {if _fadeb ._aegfg {_fgbea =_cfbg (_fgbea ,_eadcf ,"\u0020");};_gafg :=_fadeb .toTextMarks (_eadcf );
_fgbea =append (_fgbea ,_gafg ...);};return _fgbea ;};func (_ggade paraList )inTile (_gbdb gridTile )paraList {var _fffb paraList ;for _ ,_ageae :=range _ggade {if _gbdb .contains (_ageae .PdfRectangle ){_fffb =append (_fffb ,_ageae );};};if _gfde {_cc .Printf ("\u0020 \u0020\u0069\u006e\u0054i\u006c\u0065\u003a\u0020\u0020%\u0073 \u0069n\u0073\u0069\u0064\u0065\u003d\u0025\u0064\n",_gbdb ,len (_fffb ));
for _effca ,_bcfab :=range _fffb {_cc .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_effca ,_bcfab );};_cc .Println ("");};return _fffb ;};func (_cgdb *wordBag )pullWord (_cdef *textWord ,_fdde int ,_fcga map[int ]map[*textWord ]struct{}){_cgdb .PdfRectangle =_aaafc (_cgdb .PdfRectangle ,_cdef .PdfRectangle );
if _cdef ._cfdf > _cgdb ._cdfcc {_cgdb ._cdfcc =_cdef ._cfdf ;};_cgdb ._edfa [_fdde ]=append (_cgdb ._edfa [_fdde ],_cdef );_fcga [_fdde ][_cdef ]=struct{}{};};func (_babc *textObject )setTextRise (_bdc float64 ){if _babc ==nil {return ;};_babc ._aeg ._gcc =_bdc ;
};func _ddbf (_faff []compositeCell )[]float64 {var _bdceb []*textLine ;_fefb :=0;for _ ,_eafbe :=range _faff {_fefb +=len (_eafbe .paraList );_bdceb =append (_bdceb ,_eafbe .lines ()...);};_f .Slice (_bdceb ,func (_agcga ,_gbbg int )bool {_ddcf ,_gdea :=_bdceb [_agcga ],_bdceb [_gbbg ];
_dgecc ,_eadaf :=_ddcf ._bacaf ,_gdea ._bacaf ;if !_geef (_dgecc -_eadaf ){return _dgecc < _eadaf ;};return _ddcf .Llx < _gdea .Llx ;});if _gfde {_cc .Printf ("\u0020\u0020\u0020 r\u006f\u0077\u0042\u006f\u0072\u0064\u0065\u0072\u0073:\u0020%\u0064 \u0070a\u0072\u0061\u0073\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",_fefb ,len (_bdceb ));
for _fbgb ,_gaagcf :=range _bdceb {_cc .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_fbgb ,_gaagcf );};};var _afce []float64 ;_edec :=_bdceb [0];var _bgfg [][]*textLine ;_dgafd :=[]*textLine {_edec };for _bdfc ,_caf :=range _bdceb [1:]{if _caf .Ury < _edec .Lly {_adfbc :=0.5*(_caf .Ury +_edec .Lly );
if _gfde {_cc .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u003c\u0020\u0025\u0036.\u0032f\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u003d\u0025\u0036\u002e\u0032\u0066\u000a"+"\u0009\u0020\u0071\u003d\u0025\u0073\u000a\u0009\u0020p\u003d\u0025\u0073\u000a",_bdfc ,_caf .Ury ,_edec .Lly ,_adfbc ,_edec ,_caf );
};_afce =append (_afce ,_adfbc );_bgfg =append (_bgfg ,_dgafd );_dgafd =nil ;};_dgafd =append (_dgafd ,_caf );if _caf .Lly < _edec .Lly {_edec =_caf ;};};if len (_dgafd )> 0{_bgfg =append (_bgfg ,_dgafd );};if _gfde {_cc .Printf (" \u0020\u0020\u0020\u0020\u0020\u0020 \u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073\u003d%\u0036.\u0032\u0066\u000a",_afce );
};if _gfde {_ce .Log .Info ("\u0072\u006f\u0077\u003d\u0025\u0064",len (_faff ));for _bgdee ,_dcfc :=range _faff {_cc .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bgdee ,_dcfc );};_ce .Log .Info ("\u0067r\u006f\u0075\u0070\u0073\u003d\u0025d",len (_bgfg ));
for _cefga ,_cbffc :=range _bgfg {_cc .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0064\u000a",_cefga ,len (_cbffc ));for _acag ,_cdaa :=range _cbffc {_cc .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_acag ,_cdaa );};};};_dada :=true ;
for _bgacc ,_bbbgb :=range _bgfg {_egcef :=true ;for _bdfcc ,_eegea :=range _faff {if _gfde {_cc .Printf ("\u0020\u0020\u0020\u007e\u007e\u007e\u0067\u0072\u006f\u0075\u0070\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0020\u0063\u0065\u006cl\u0020\u0025\u0064\u0020\u006ff\u0020\u0025d\u0020\u0025\u0073\u000a",_bgacc ,len (_bgfg ),_bdfcc ,len (_faff ),_eegea );
};if !_eegea .hasLines (_bbbgb ){if _gfde {_cc .Printf ("\u0020\u0020\u0020\u0021\u0021\u0021\u0067\u0072\u006f\u0075\u0070\u0020\u0025d\u0020\u006f\u0066\u0020\u0025\u0064 \u0063\u0065\u006c\u006c\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064 \u004f\u0055\u0054\u000a",_bgacc ,len (_bgfg ),_bdfcc ,len (_faff ));
};_egcef =false ;break ;};};if !_egcef {_dada =false ;break ;};};if !_dada {if _gfde {_ce .Log .Info ("\u0072\u006f\u0077\u0020\u0063o\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u0020\u0064\u006f\u006e\u0027\u0074 \u0073\u0070\u0061\u006e\u0020\u0061\u006c\u006c\u0020\u0063\u0065\u006c\u006c\u0073\u0020\u0069\u006e\u0020\u0072\u006f\u0077\u002e\u0020\u0069\u0067\u006e\u006f\u0072\u0069\u006eg");
};_afce =nil ;};if _gfde &&_afce !=nil {_cc .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u002a\u002a*\u0072\u006f\u0077\u0043\u006f\u0072\u0072i\u0064\u006f\u0072\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u000a",_afce );};return _afce ;};
func (_ebcddb *textWord )toTextMarks (_bcdb *int )[]TextMark {var _gfaaa []TextMark ;for _ ,_agead :=range _ebcddb ._fcac {_gfaaa =_faec (_gfaaa ,_bcdb ,_agead .ToTextMark ());};return _gfaaa ;};func (_gfgbb *subpath )isQuadrilateral ()bool {if len (_gfgbb ._fbca )< 4||len (_gfgbb ._fbca )> 5{return false ;
};if len (_gfgbb ._fbca )==5{_deff :=_gfgbb ._fbca [0];_dgaeg :=_gfgbb ._fbca [4];if _deff .X !=_dgaeg .X ||_deff .Y !=_dgaeg .Y {return false ;};};return true ;};

// TableCell is a cell in a TextTable.
type TableCell struct{_ea .PdfRectangle ;

// Text is the extracted text.
Text string ;

// Marks returns the TextMarks corresponding to the text in Text.
Marks TextMarkArray ;};func (_abgag *textTable )emptyCompositeColumn (_edecd int )bool {for _fbeba :=0;_fbeba < _abgag ._bgdf ;_fbeba ++{if _cebbg ,_dafc :=_abgag ._ebddd [_cbaga (_edecd ,_fbeba )];_dafc {if len (_cebbg .paraList )> 0{return false ;};};
};return true ;};func (_dfb *PageText )getParagraphs ()paraList {var _agg rulingList ;if _fcb {_fbde :=_faega (_dfb ._agab );_agg =append (_agg ,_fbde ...);};if _bgge {_gaga :=_efea (_dfb ._bfcf );_agg =append (_agg ,_gaga ...);};_agg ,_ccf :=_agg .toTilings ();
var _aebe paraList ;_egc :=len (_dfb ._cacb );for _gaag :=0;_gaag < 360&&_egc > 0;_gaag +=90{_eafc :=make ([]*textMark ,0,len (_dfb ._cacb )-_egc );for _ ,_age :=range _dfb ._cacb {if _age ._acdg ==_gaag {_eafc =append (_eafc ,_age );};};if len (_eafc )> 0{_fdc :=_ggea (_eafc ,_dfb ._gag ,_agg ,_ccf ,_dfb ._feda ._ecg );
_aebe =append (_aebe ,_fdc ...);_egc -=len (_eafc );};};return _aebe ;};func _efga (_fdef []*textLine ,_adgbc ,_fcgac float64 )[]*textLine {var _aedeb []*textLine ;for _ ,_bbgga :=range _fdef {if _adgbc ==-1{if _bbgga ._bacaf > _fcgac {_aedeb =append (_aedeb ,_bbgga );
};}else {if _bbgga ._bacaf > _fcgac &&_bbgga ._bacaf < _adgbc {_aedeb =append (_aedeb ,_bbgga );};};};return _aedeb ;};func (_fgfae intSet )has (_gfcc int )bool {_ ,_deccf :=_fgfae [_gfcc ];return _deccf };func (_dcgeb *wordBag )text ()string {_gdaa :=_dcgeb .allWords ();
_ceabg :=make ([]string ,len (_gdaa ));for _afgb ,_gea :=range _gdaa {_ceabg [_afgb ]=_gea ._baea ;};return _dbe .Join (_ceabg ,"\u0020");};func (_aac *imageExtractContext )extractContentStreamImages (_edf string ,_eef *_ea .PdfPageResources )error {_adf :=_g .NewContentStreamParser (_edf );
_bbca ,_aaf :=_adf .Parse ();if _aaf !=nil {return _aaf ;};if _aac ._ab ==nil {_aac ._ab =map[*_ff .PdfObjectStream ]*cachedImage {};};if _aac ._df ==nil {_aac ._df =&ImageExtractOptions {};};_dbee :=_g .NewContentStreamProcessor (*_bbca );_dbee .AddHandler (_g .HandlerConditionEnumAllOperands ,"",_aac .processOperand );
return _dbee .Process (_eef );};type markKind int ;func (_edfff *textTable )compositeRowCorridors ()map[int ][]float64 {_aabef :=make (map[int ][]float64 ,_edfff ._bgdf );if _gfde {_ce .Log .Info ("c\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0052\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073:\u0020h\u003d\u0025\u0064",_edfff ._bgdf );
};for _cddd :=1;_cddd < _edfff ._bgdf ;_cddd ++{var _gbeeb []compositeCell ;for _gdbf :=0;_gdbf < _edfff ._fdaegd ;_gdbf ++{if _fdecc ,_ddeg :=_edfff ._ebddd [_cbaga (_gdbf ,_cddd )];_ddeg {_gbeeb =append (_gbeeb ,_fdecc );};};if len (_gbeeb )==0{continue ;
};_cbdgb :=_ddbf (_gbeeb );_aabef [_cddd ]=_cbdgb ;if _gfde {_cc .Printf ("\u0020\u0020\u0020\u0025\u0032\u0064\u003a\u0020\u00256\u002e\u0032\u0066\u000a",_cddd ,_cbdgb );};};return _aabef ;};type structElement struct{_gabd string ;_bdfb []structElement ;
_bcee int64 ;_bafed _ff .PdfObject ;};

// RenderMode specifies the text rendering mode (Tmode), which determines whether showing text shall cause
// glyph outlines to be  stroked, filled, used as a clipping boundary, or some combination of the three.
// Stroking, filling, and clipping shall have the same effects for a text object as they do for a path object
// (see 8.5.3, "Path-Painting Operators" and 8.5.4, "Clipping Path Operators").
type RenderMode int ;func _dead (_adebd string )bool {if _db .RuneCountInString (_adebd )< _agad {return false ;};_bcfef ,_acfd :=_db .DecodeLastRuneInString (_adebd );if _acfd <=0||!_b .Is (_b .Hyphen ,_bcfef ){return false ;};_bcfef ,_acfd =_db .DecodeLastRuneInString (_adebd [:len (_adebd )-_acfd ]);
return _acfd > 0&&!_b .IsSpace (_bcfef );};func (_dafa *textTable )markCells (){for _dafba :=0;_dafba < _dafa ._bgdf ;_dafba ++{for _gabge :=0;_gabge < _dafa ._fdaegd ;_gabge ++{_fbgf :=_dafa .get (_gabge ,_dafba );if _fbgf !=nil {_fbgf ._agdga =true ;
};};};};

// RangeOffset returns the TextMarks in `ma` that overlap text[start:end] in the extracted text.
// These are tm: `start` <= tm.Offset + len(tm.Text) && tm.Offset < `end` where
// `start` and `end` are offsets in the extracted text.
// NOTE: TextMarks can contain multiple characters. e.g. "ffi" for the  ligature so the first and
// last elements of the returned TextMarkArray may only partially overlap text[start:end].
func (_efgb *TextMarkArray )RangeOffset (start ,end int )(*TextMarkArray ,error ){if _efgb ==nil {return nil ,_e .New ("\u006da\u003d\u003d\u006e\u0069\u006c");};if end < start {return nil ,_cc .Errorf ("\u0065\u006e\u0064\u0020\u003c\u0020\u0073\u0074\u0061\u0072\u0074\u002e\u0020\u0052\u0061n\u0067\u0065\u004f\u0066\u0066\u0073\u0065\u0074\u0020\u006e\u006f\u0074\u0020d\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020\u0073\u0074\u0061\u0072t=\u0025\u0064\u0020\u0065\u006e\u0064\u003d\u0025\u0064\u0020",start ,end );
};_fcfc :=len (_efgb ._ddgg );if _fcfc ==0{return _efgb ,nil ;};if start < _efgb ._ddgg [0].Offset {start =_efgb ._ddgg [0].Offset ;};if end > _efgb ._ddgg [_fcfc -1].Offset +1{end =_efgb ._ddgg [_fcfc -1].Offset +1;};_bae :=_f .Search (_fcfc ,func (_ffcf int )bool {return _efgb ._ddgg [_ffcf ].Offset +len (_efgb ._ddgg [_ffcf ].Text )-1>=start });
if !(0<=_bae &&_bae < _fcfc ){_aebf :=_cc .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020\u0072\u0061\u006e\u0067\u0065\u002e\u0020\u0073\u0074\u0061\u0072\u0074\u003d%\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009 \u006c\u0061\u0073\u0074\u003d%\u0076",start ,_bae ,_fcfc ,_efgb ._ddgg [0],_efgb ._ddgg [_fcfc -1]);
return nil ,_aebf ;};_dcc :=_f .Search (_fcfc ,func (_cbgd int )bool {return _efgb ._ddgg [_cbgd ].Offset > end -1});if !(0<=_dcc &&_dcc < _fcfc ){_dbd :=_cc .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020r\u0061\u006e\u0067e\u002e\u0020\u0065n\u0064\u003d%\u0064\u0020\u0069\u0045\u006e\u0064=\u0025d \u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d\u0025\u0076",end ,_dcc ,_fcfc ,_efgb ._ddgg [0],_efgb ._ddgg [_fcfc -1]);
return nil ,_dbd ;};if _dcc <=_bae {return nil ,_cc .Errorf ("\u0069\u0045\u006e\u0064\u0020\u003c=\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003a\u0020\u0073\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u0065\u006ed\u003d\u0025\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020i\u0045n\u0064\u003d\u0025\u0064",start ,end ,_bae ,_dcc );
};return &TextMarkArray {_ddgg :_efgb ._ddgg [_bae :_dcc ]},nil ;};func (_bbeca paraList )writeText (_afad _d .Writer ){for _bddbd ,_efee :=range _bbeca {if _efee ._adfda {continue ;};_efee .writeText (_afad );if _bddbd !=len (_bbeca )-1{if _cbbe (_efee ,_bbeca [_bddbd +1]){_afad .Write ([]byte ("\u0020"));
}else {_afad .Write ([]byte ("\u000a"));_afad .Write ([]byte ("\u000a"));};};};_afad .Write ([]byte ("\u000a"));_afad .Write ([]byte ("\u000a"));};func (_cfedc rulingList )bbox ()_ea .PdfRectangle {var _eedab _ea .PdfRectangle ;if len (_cfedc )==0{_ce .Log .Error ("r\u0075\u006c\u0069\u006e\u0067\u004ci\u0073\u0074\u002e\u0062\u0062\u006f\u0078\u003a\u0020n\u006f\u0020\u0072u\u006ci\u006e\u0067\u0073");
return _ea .PdfRectangle {};};if _cfedc [0]._deecb ==_dbdde {_eedab .Llx ,_eedab .Urx =_cfedc .secMinMax ();_eedab .Lly ,_eedab .Ury =_cfedc .primMinMax ();}else {_eedab .Llx ,_eedab .Urx =_cfedc .primMinMax ();_eedab .Lly ,_eedab .Ury =_cfedc .secMinMax ();
};return _eedab ;};func (_cffd *imageExtractContext )extractFormImages (_fdge *_ff .PdfObjectName ,_bgc _g .GraphicsState ,_aeb *_ea .PdfPageResources )error {_cdg ,_fbcb :=_aeb .GetXObjectFormByName (*_fdge );if _fbcb !=nil {return _fbcb ;};if _cdg ==nil {return nil ;
};_bcc ,_fbcb :=_cdg .GetContentStream ();if _fbcb !=nil {return _fbcb ;};_ggc :=_cdg .Resources ;if _ggc ==nil {_ggc =_aeb ;};_fbcb =_cffd .extractContentStreamImages (string (_bcc ),_ggc );if _fbcb !=nil {return _fbcb ;};_cffd ._dbg ++;return nil ;};
const (_dfdf =1.0e-6;_agbf =1.0e-4;_dgbg =10;_gdfg =6;_abdc =0.5;_ccbc =0.12;_cedag =0.19;_eccd =0.04;_ebcc =0.04;_aafc =1.0;_ebccf =0.04;_fgbb =0.4;_fafdb =0.7;_eaagf =1.0;_aggcd =0.1;_aaafcf =1.4;_bfgc =0.46;_ddcg =0.02;_cacbg =0.2;_bfgf =0.5;_agad =4;
_ebgc =4.0;_ecb =6;_dcf =0.3;_fbed =0.01;_ebb =0.02;_eafa =2;_gbafc =2;_edaf =500;_ccef =4.0;_bcaf =4.0;_deec =0.05;_dgdeg =0.1;_deab =2.0;_fbge =2.0;_aade =1.5;_faeg =3.0;_eabg =0.25;);func _faef (_ebfb *wordBag ,_agfab *textWord ,_ebgf float64 )bool {return _agfab .Llx < _ebfb .Urx +_ebgf &&_ebfb .Llx -_ebgf < _agfab .Urx ;
};var (_fb =_e .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");_fd =_e .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););func (_bfbc rulingList )asTiling ()gridTiling {if _gafd {_ce .Log .Info ("r\u0075\u006ci\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0063s\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u002b\u002b\u002b\u0020\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_bfbc ));
};for _cbec ,_adgec :=range _bfbc [1:]{_gbagd :=_bfbc [_cbec ];if _gbagd .alignsPrimary (_adgec )&&_gbagd .alignsSec (_adgec ){_ce .Log .Error ("a\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0044\u0075\u0070\u006c\u0069\u0063\u0061\u0074\u0065 \u0072\u0075\u006c\u0069\u006e\u0067\u0073\u002e\u000a\u0009v=\u0025\u0073\u000a\t\u0077=\u0025\u0073",_adgec ,_gbagd );
};};_bfbc .sortStrict ();_bfbc .log ("\u0073n\u0061\u0070\u0070\u0065\u0064");_gdbd ,_deaa :=_bfbc .vertsHorzs ();_cbce :=_gdbd .primaries ();_ggab :=_deaa .primaries ();_bgbcfa :=len (_cbce )-1;_dgfc :=len (_ggab )-1;if _bgbcfa ==0||_dgfc ==0{return gridTiling {};
};_gccac :=_ea .PdfRectangle {Llx :_cbce [0],Urx :_cbce [_bgbcfa ],Lly :_ggab [0],Ury :_ggab [_dgfc ]};if _gafd {_ce .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0072\u0074s=\u0025\u0064",len (_gdbd ));
for _cccgb ,_gbegb :=range _gdbd {_cc .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cccgb ,_gbegb );};_ce .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0068\u006f\u0072\u007as=\u0025\u0064",len (_deaa ));
for _gcgg ,_bedca :=range _deaa {_cc .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gcgg ,_bedca );};_ce .Log .Info ("\u0072\u0075\u006c\u0069\u006eg\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067:\u0020\u0020\u0077\u0078\u0068\u003d\u0025\u0064\u0078\u0025\u0064\u000a\u0009\u006c\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a\u0009\u006c\u006c\u0079\u003d\u0025\u002e\u0032f",_bgbcfa ,_dgfc ,_cbce ,_ggab );
};_febf :=make ([]gridTile ,_bgbcfa *_dgfc );for _aecg :=_dgfc -1;_aecg >=0;_aecg --{_degd :=_ggab [_aecg ];_dfgae :=_ggab [_aecg +1];for _cggg :=0;_cggg < _bgbcfa ;_cggg ++{_gcfbbg :=_cbce [_cggg ];_adagc :=_cbce [_cggg +1];_aecb :=_gdbd .findPrimSec (_gcfbbg ,_degd );
_cgbe :=_gdbd .findPrimSec (_adagc ,_degd );_gffg :=_deaa .findPrimSec (_degd ,_gcfbbg );_eegc :=_deaa .findPrimSec (_dfgae ,_gcfbbg );_gcab :=_ea .PdfRectangle {Llx :_gcfbbg ,Urx :_adagc ,Lly :_degd ,Ury :_dfgae };_adee :=_debf (_gcab ,_aecb ,_cgbe ,_gffg ,_eegc );
_febf [_aecg *_bgbcfa +_cggg ]=_adee ;if _gafd {_cc .Printf ("\u0020\u0020\u0078\u003d\u0025\u0032\u0064\u0020\u0079\u003d\u0025\u0032\u0064\u003a\u0020%\u0073 \u0025\u0036\u002e\u0032\u0066\u0020\u0078\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_cggg ,_aecg ,_adee .String (),_adee .Width (),_adee .Height ());
};};};if _gafd {_ce .Log .Info ("r\u0075\u006c\u0069\u006e\u0067\u004c\u0069\u0073\u0074.\u0061\u0073\u0054\u0069\u006c\u0069\u006eg:\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0020\u0068\u006f\u0072\u0069zo\u006e\u0074a\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_gccac );
};_beba :=make ([]map[float64 ]gridTile ,_dgfc );for _cgfde :=_dgfc -1;_cgfde >=0;_cgfde --{if _gafd {_cc .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_cgfde );};_beba [_cgfde ]=make (map[float64 ]gridTile ,_bgbcfa );for _ecddb :=0;_ecddb < _bgbcfa ;
_ecddb ++{_beeef :=_febf [_cgfde *_bgbcfa +_ecddb ];if _gafd {_cc .Printf ("\u0020\u0020\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ecddb ,_beeef );};if !_beeef ._edaac {continue ;};_ggdgbd :=_ecddb ;for _ecedg :=_ecddb +1;!_beeef ._aefc &&_ecedg < _bgbcfa ;
_ecedg ++{_adfe :=_febf [_cgfde *_bgbcfa +_ecedg ];_beeef .Urx =_adfe .Urx ;_beeef ._cgab =_beeef ._cgab ||_adfe ._cgab ;_beeef ._dfgg =_beeef ._dfgg ||_adfe ._dfgg ;_beeef ._aefc =_adfe ._aefc ;if _gafd {_cc .Printf ("\u0020 \u0020%\u0034\u0064\u003a\u0020\u0025s\u0020\u2192 \u0025\u0073\u000a",_ecedg ,_adfe ,_beeef );
};_ggdgbd =_ecedg ;};if _gafd {_cc .Printf (" \u0020 \u0025\u0032\u0064\u0020\u002d\u0020\u0025\u0032d\u0020\u2192\u0020\u0025s\n",_ecddb ,_ggdgbd ,_beeef );};_ecddb =_ggdgbd ;_beba [_cgfde ][_beeef .Llx ]=_beeef ;};};_eecff :=make (map[float64 ]map[float64 ]gridTile ,_dgfc );
_gacab :=make (map[float64 ]map[float64 ]struct{},_dgfc );for _cdfdf :=_dgfc -1;_cdfdf >=0;_cdfdf --{_dfea :=_febf [_cdfdf *_bgbcfa ].Lly ;_eecff [_dfea ]=make (map[float64 ]gridTile ,_bgbcfa );_gacab [_dfea ]=make (map[float64 ]struct{},_bgbcfa );};if _gafd {_ce .Log .Info ("\u0072u\u006c\u0069n\u0067\u004c\u0069s\u0074\u002e\u0061\u0073\u0054\u0069\u006ci\u006e\u0067\u003a\u0020\u0063\u006fa\u006c\u0065\u0073\u0063\u0065\u0020\u0076\u0065\u0072\u0074\u0069c\u0061\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_gccac );
};for _bgcbda :=_dgfc -1;_bgcbda >=0;_bgcbda --{_fdcca :=_febf [_bgcbda *_bgbcfa ].Lly ;_fbfec :=_beba [_bgcbda ];if _gafd {_cc .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_bgcbda );};for _ ,_dgcd :=range _eaaf (_fbfec ){if _ ,_dfeede :=_gacab [_fdcca ][_dgcd ];
_dfeede {continue ;};_dafb :=_fbfec [_dgcd ];if _gafd {_cc .Printf (" \u0020\u0020\u0020\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_dafb .String ());};for _dagaa :=_bgcbda -1;_dagaa >=0;_dagaa --{if _dafb ._dfgg {break ;};_abcgb :=_beba [_dagaa ];_gafc ,_bedg :=_abcgb [_dgcd ];
if !_bedg {break ;};if _gafc .Urx !=_dafb .Urx {break ;};_dafb ._dfgg =_gafc ._dfgg ;_dafb .Lly =_gafc .Lly ;if _gafd {_cc .Printf ("\u0020\u0020\u0020\u0020  \u0020\u0020\u0076\u003d\u0025\u0073\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_gafc .String (),_dafb .String ());
};_gacab [_gafc .Lly ][_gafc .Llx ]=struct{}{};};if _bgcbda ==0{_dafb ._dfgg =true ;};if _dafb .complete (){_eecff [_fdcca ][_dgcd ]=_dafb ;};};};_cbad :=gridTiling {PdfRectangle :_gccac ,_fdbf :_edee (_eecff ),_eebc :_dcga (_eecff ),_bgdd :_eecff };_cbad .log ("\u0043r\u0065\u0061\u0074\u0065\u0064");
return _cbad ;};type bounded interface{bbox ()_ea .PdfRectangle };func (_fbbfd *compositeCell )updateBBox (){for _ ,_fcfd :=range _fbbfd .paraList {_fbbfd .PdfRectangle =_aaafc (_fbbfd .PdfRectangle ,_fcfd .PdfRectangle );};};func (_eddb gridTile )contains (_ddgaa _ea .PdfRectangle )bool {if _eddb .numBorders ()< 3{return false ;
};if _eddb ._edaac &&_ddgaa .Llx < _eddb .Llx -_aade {return false ;};if _eddb ._aefc &&_ddgaa .Urx > _eddb .Urx +_aade {return false ;};if _eddb ._dfgg &&_ddgaa .Lly < _eddb .Lly -_aade {return false ;};if _eddb ._cgab &&_ddgaa .Ury > _eddb .Ury +_aade {return false ;
};return true ;};func (_cgee *wordBag )firstReadingIndex (_acbbc int )int {_facf :=_cgee .firstWord (_acbbc )._cfdf ;_bbcd :=float64 (_acbbc +1)*_gdfg ;_cgbbg :=_bbcd +_ebgc *_facf ;_gfec :=_acbbc ;for _ ,_aad :=range _cgee .depthBand (_bbcd ,_cgbbg ){if _cdec (_cgee .firstWord (_aad ),_cgee .firstWord (_gfec ))< 0{_gfec =_aad ;
};};return _gfec ;};func (_acgcb gridTile )complete ()bool {return _acgcb .numBorders ()==4};func (_bcdaa paraList )xNeighbours (_bbdg float64 )map[*textPara ][]int {_dffe :=make ([]event ,2*len (_bcdaa ));if _bbdg ==0{for _gfcga ,_bbegb :=range _bcdaa {_dffe [2*_gfcga ]=event {_bbegb .Llx ,true ,_gfcga };
_dffe [2*_gfcga +1]=event {_bbegb .Urx ,false ,_gfcga };};}else {for _fecfg ,_bcbc :=range _bcdaa {_dffe [2*_fecfg ]=event {_bcbc .Llx -_bbdg *_bcbc .fontsize (),true ,_fecfg };_dffe [2*_fecfg +1]=event {_bcbc .Urx +_bbdg *_bcbc .fontsize (),false ,_fecfg };
};};return _bcdaa .eventNeighbours (_dffe );};func (_ggeaf rulingList )aligned ()bool {if len (_ggeaf )< 2{return false ;};_befgg :=make (map[*ruling ]int );_befgg [_ggeaf [0]]=0;for _ ,_eceb :=range _ggeaf [1:]{_fafde :=false ;for _aeae :=range _befgg {if _eceb .gridIntersecting (_aeae ){_befgg [_aeae ]++;
_fafde =true ;break ;};};if !_fafde {_befgg [_eceb ]=0;};};_bbcb :=0;for _ ,_eabc :=range _befgg {if _eabc ==0{_bbcb ++;};};_acaf :=float64 (_bbcb )/float64 (len (_ggeaf ));_edab :=_acaf <=1.0-_eabg ;if _fdee {_ce .Log .Info ("\u0061\u006c\u0069\u0067\u006e\u0065\u0064\u003d\u0025\u0074\u0020\u0075\u006em\u0061\u0074\u0063\u0068\u0065\u0064=\u0025\u002e\u0032\u0066\u003d\u0025\u0064\u002f\u0025\u0064\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_edab ,_acaf ,_bbcb ,len (_ggeaf ),_ggeaf .String ());
};return _edab ;};

// Extractor stores and offers functionality for extracting content from PDF pages.
type Extractor struct{_ceb string ;_bc *_ea .PdfPageResources ;_aab _ea .PdfRectangle ;_bec *_ea .PdfRectangle ;_fc map[string ]fontEntry ;_aae map[string ]textResult ;_eae int64 ;_cg int ;_bfc *Options ;_gg *_ff .PdfObject ;_ag _ff .PdfObject ;};func _bfddc (_beeg float64 )float64 {return _agbf *_dg .Round (_beeg /_agbf )};
