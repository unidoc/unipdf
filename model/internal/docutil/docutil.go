//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package docutil ;import (_a "errors";_cf "fmt";_e "github.com/unidoc/unipdf/v4/common";_f "github.com/unidoc/unipdf/v4/core";);func (_fcf Page )GetResources ()(*_f .PdfObjectDictionary ,bool ){return _f .GetDict (_fcf .Object .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));
};func (_fgf *Catalog )SetOutputIntents (outputIntents *OutputIntents ){if _beb :=_fgf .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");_beb !=nil {for _gb ,_ef :=range _fgf ._ad .Objects {if _ef ==_beb {if outputIntents ._gbb ==_beb {return ;
};_fgf ._ad .Objects =append (_fgf ._ad .Objects [:_gb ],_fgf ._ad .Objects [_gb +1:]...);break ;};};};_af :=outputIntents ._gbb ;if _af ==nil {_af =_f .MakeIndirectObject (outputIntents ._cc );};_fgf .Object .Set ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073",_af );
_fgf ._ad .Objects =append (_fgf ._ad .Objects ,_af );};func (_gfb Page )FindXObjectImages ()([]*Image ,error ){_ce ,_gae :=_gfb .GetResourcesXObject ();if !_gae {return nil ,nil ;};var _bg []*Image ;var _bbd error ;_ccd :=map[*_f .PdfObjectStream ]int {};
_fga :=map[*_f .PdfObjectStream ]struct{}{};var _gfcfd int ;for _ ,_cef :=range _ce .Keys (){_dga ,_ceg :=_f .GetStream (_ce .Get (_cef ));if !_ceg {continue ;};if _ ,_bfb :=_ccd [_dga ];_bfb {continue ;};_dab ,_ggg :=_f .GetName (_dga .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));
if !_ggg ||_dab .String ()!="\u0049\u006d\u0061g\u0065"{continue ;};_gaab :=Image {BitsPerComponent :8,Stream :_dga ,Name :string (_cef )};if _gaab .Colorspace ,_bbd =_cdg (_dga .Get ("\u0043\u006f\u006c\u006f\u0072\u0053\u0070\u0061\u0063\u0065"));_bbd !=nil {_e .Log .Error ("\u0045\u0072\u0072\u006f\u0072\u0020\u0064\u0065\u0074\u0065r\u006d\u0069\u006e\u0065\u0020\u0063\u006fl\u006f\u0072\u0020\u0073\u0070\u0061\u0063\u0065\u0020\u0025\u0073",_bbd );
continue ;};if _egc ,_dea :=_f .GetIntVal (_dga .Get ("\u0042\u0069t\u0073\u0050\u0065r\u0043\u006f\u006d\u0070\u006f\u006e\u0065\u006e\u0074"));_dea {_gaab .BitsPerComponent =_egc ;};if _adgg ,_cb :=_f .GetIntVal (_dga .Get ("\u0057\u0069\u0064t\u0068"));
_cb {_gaab .Width =_adgg ;};if _agg ,_ec :=_f .GetIntVal (_dga .Get ("\u0048\u0065\u0069\u0067\u0068\u0074"));_ec {_gaab .Height =_agg ;};if _fgg ,_ed :=_f .GetStream (_dga .Get ("\u0053\u004d\u0061s\u006b"));_ed {_gaab .SMask =&ImageSMask {Image :&_gaab ,Stream :_fgg };
_fga [_fgg ]=struct{}{};};switch _gaab .Colorspace {case "\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B":_gaab .ColorComponents =3;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079":_gaab .ColorComponents =1;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":_gaab .ColorComponents =4;
default:_gaab .ColorComponents =-1;};_ccd [_dga ]=_gfcfd ;_bg =append (_bg ,&_gaab );_gfcfd ++;};var _efd []int ;for _ ,_bbg :=range _bg {if _bbg .SMask !=nil {_gacg ,_ebe :=_ccd [_bbg .SMask .Stream ];if _ebe {_efd =append (_efd ,_gacg );};};};_cga :=make ([]*Image ,len (_bg )-len (_efd ));
_gfcfd =0;_fdb :for _eef ,_fdbd :=range _bg {for _ ,_bbdb :=range _efd {if _eef ==_bbdb {continue _fdb ;};};_cga [_gfcfd ]=_fdbd ;_gfcfd ++;};return _bg ,nil ;};func (_ag *Catalog )GetMetadata ()(*_f .PdfObjectStream ,bool ){return _f .GetStream (_ag .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));
};func (_ee *Catalog )SetVersion (){_ee .Object .Set ("\u0056e\u0072\u0073\u0069\u006f\u006e",_f .MakeName (_cf .Sprintf ("\u0025\u0064\u002e%\u0064",_ee ._ad .Version .Major ,_ee ._ad .Version .Minor )));};func _cdg (_bfef _f .PdfObject )(_f .PdfObjectName ,error ){var _gdd *_f .PdfObjectName ;
var _aaf *_f .PdfObjectArray ;if _afe ,_ged :=_bfef .(*_f .PdfIndirectObject );_ged {if _gbe ,_gebd :=_afe .PdfObject .(*_f .PdfObjectArray );_gebd {_aaf =_gbe ;}else if _eeb ,_ac :=_afe .PdfObject .(*_f .PdfObjectName );_ac {_gdd =_eeb ;};}else if _gag ,_bebb :=_bfef .(*_f .PdfObjectArray );
_bebb {_aaf =_gag ;}else if _gda ,_fff :=_bfef .(*_f .PdfObjectName );_fff {_gdd =_gda ;};if _gdd !=nil {switch *_gdd {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":return *_gdd ,nil ;
case "\u0050a\u0074\u0074\u0065\u0072\u006e":return *_gdd ,nil ;};};if _aaf !=nil &&_aaf .Len ()> 0{if _dff ,_fae :=_aaf .Get (0).(*_f .PdfObjectName );_fae {switch *_dff {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":if _aaf .Len ()==1{return *_dff ,nil ;
};case "\u0043a\u006c\u0047\u0072\u0061\u0079","\u0043\u0061\u006c\u0052\u0047\u0042","\u004c\u0061\u0062":return *_dff ,nil ;case "\u0049\u0043\u0043\u0042\u0061\u0073\u0065\u0064","\u0050a\u0074\u0074\u0065\u0072\u006e","\u0049n\u0064\u0065\u0078\u0065\u0064":return *_dff ,nil ;
case "\u0053\u0065\u0070\u0061\u0072\u0061\u0074\u0069\u006f\u006e","\u0044e\u0076\u0069\u0063\u0065\u004e":return *_dff ,nil ;};};};return "",nil ;};func (_fage *Content )SetData (data []byte )error {_bece ,_dda :=_f .MakeStream (data ,_f .NewFlateEncoder ());
if _dda !=nil {return _dda ;};_egd ,_acg :=_f .GetArray (_fage ._dbg .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_acg &&_fage ._fge ==0{_fage ._dbg .Object .Set ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073",_bece );}else {if _dda =_egd .Set (_fage ._fge ,_bece );
_dda !=nil {return _dda ;};};_fage ._dbg ._dd .Objects =append (_fage ._dbg ._dd .Objects ,_bece );return nil ;};func (_dbb Page )GetResourcesXObject ()(*_f .PdfObjectDictionary ,bool ){_ca ,_faee :=_dbb .GetResources ();if !_faee {return nil ,false ;};
return _f .GetDict (_ca .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));};func (_eee *Catalog )SetMarkInfo (mi _f .PdfObject ){if mi ==nil {_eee .Object .Remove ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f");return ;};_da :=_f .MakeIndirectObject (mi );
_eee .Object .Set ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f",_da );_eee ._ad .Objects =append (_eee ._ad .Objects ,_da );};func (_bbf *Page )Number ()int {return _bbf ._gbg };type Document struct{ID [2]string ;Version _f .Version ;Objects []_f .PdfObject ;
Info _f .PdfObject ;Crypt *_f .PdfCrypt ;UseHashBasedID bool ;};func (_aa *Catalog )GetStructTreeRoot ()(*_f .PdfObjectDictionary ,bool ){return _f .GetDict (_aa .Object .Get ("\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065e\u0052\u006f\u006f\u0074"));
};func (_bda *OutputIntents )Add (oi _f .PdfObject )error {_fca ,_fe :=oi .(*_f .PdfObjectDictionary );if !_fe {return _a .New ("\u0069\u006e\u0070\u0075\u0074\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020\u0069\u006e\u0074\u0065\u006et\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u0062\u0065\u0020\u0061\u006e\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};if _cdb ,_bb :=_f .GetStream (_fca .Get ("\u0044\u0065\u0073\u0074\u004f\u0075\u0074\u0070\u0075\u0074\u0050\u0072o\u0066\u0069\u006c\u0065"));_bb {_bda ._eaf .Objects =append (_bda ._eaf .Objects ,_cdb );};_gf ,_bec :=oi .(*_f .PdfIndirectObject );if !_bec {_gf =_f .MakeIndirectObject (oi );
};if _bda ._cc ==nil {_bda ._cc =_f .MakeArray (_gf );}else {_bda ._cc .Append (_gf );};_bda ._eaf .Objects =append (_bda ._eaf .Objects ,_gf );return nil ;};func (_db *Catalog )SetStructTreeRoot (structTreeRoot _f .PdfObject ){if structTreeRoot ==nil {_db .Object .Remove ("\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065e\u0052\u006f\u006f\u0074");
return ;};_be :=_f .MakeIndirectObject (structTreeRoot );_db .Object .Set ("\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065e\u0052\u006f\u006f\u0074",_be );_db ._ad .Objects =append (_db ._ad .Objects ,_be );};func (_ge *Catalog )NewOutputIntents ()*OutputIntents {return &OutputIntents {_eaf :_ge ._ad }};
type OutputIntent struct{Object *_f .PdfObjectDictionary ;};type Catalog struct{Object *_f .PdfObjectDictionary ;_ad *Document ;};func (_de *OutputIntents )Len ()int {return _de ._cc .Len ()};func (_ccg *Document )AddStream (stream *_f .PdfObjectStream ){for _ ,_ead :=range _ccg .Objects {if _ead ==stream {return ;
};};_ccg .Objects =append (_ccg .Objects ,stream );};func (_dbf *OutputIntents )Get (i int )(OutputIntent ,bool ){if _dbf ._cc ==nil {return OutputIntent {},false ;};if i >=_dbf ._cc .Len (){return OutputIntent {},false ;};_abfd :=_dbf ._cc .Get (i );_gfc ,_ae :=_f .GetIndirect (_abfd );
if !_ae {_gaa ,_dgf :=_f .GetDict (_abfd );return OutputIntent {Object :_gaa },_dgf ;};_fcc ,_bc :=_f .GetDict (_gfc .PdfObject );return OutputIntent {Object :_fcc },_bc ;};func (_cg *Document )AddIndirectObject (indirect *_f .PdfIndirectObject ){for _ ,_fab :=range _cg .Objects {if _fab ==indirect {return ;
};};_cg .Objects =append (_cg .Objects ,indirect );};func (_ffb Page )FindXObjectForms ()[]*_f .PdfObjectStream {_aea ,_bgd :=_ffb .GetResourcesXObject ();if !_bgd {return nil ;};_edb :=map[*_f .PdfObjectStream ]struct{}{};var _eec func (_bea *_f .PdfObjectDictionary ,_gdb map[*_f .PdfObjectStream ]struct{});
_eec =func (_cdc *_f .PdfObjectDictionary ,_fcfd map[*_f .PdfObjectStream ]struct{}){for _ ,_dgc :=range _cdc .Keys (){_edbb ,_gbec :=_f .GetStream (_cdc .Get (_dgc ));if !_gbec {continue ;};if _ ,_dc :=_fcfd [_edbb ];_dc {continue ;};_gbbc ,_geba :=_f .GetName (_edbb .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));
if !_geba ||_gbbc .String ()!="\u0046\u006f\u0072\u006d"{continue ;};_fcfd [_edbb ]=struct{}{};_eacb ,_geba :=_f .GetDict (_edbb .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));if !_geba {continue ;};_ade ,_cdgb :=_f .GetDict (_eacb .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));
if _cdgb {_eec (_ade ,_fcfd );};};};_eec (_aea ,_edb );var _ggd []*_f .PdfObjectStream ;for _fdc :=range _edb {_ggd =append (_ggd ,_fdc );};return _ggd ;};func (_dfb Page )GetContents ()([]Content ,bool ){_eg ,_fd :=_f .GetArray (_dfb .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));
if !_fd {_ege ,_egeb :=_f .GetStream (_dfb .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_egeb {return nil ,false ;};return []Content {{Stream :_ege ,_dbg :_dfb ,_fge :0}},true ;};_bfc :=make ([]Content ,_eg .Len ());for _egea ,_bfee :=range _eg .Elements (){_gedc ,_bfa :=_f .GetStream (_bfee );
if !_bfa {continue ;};_bfc [_egea ]=Content {Stream :_gedc ,_dbg :_dfb ,_fge :_egea };};return _bfc ,true ;};type OutputIntents struct{_cc *_f .PdfObjectArray ;_eaf *Document ;_gbb *_f .PdfIndirectObject ;};func (_ba *Catalog )SetMetadata (data []byte )error {_ab ,_abf :=_f .MakeStream (data ,nil );
if _abf !=nil {return _abf ;};_ab .Set ("\u0054\u0079\u0070\u0065",_f .MakeName ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));_ab .Set ("\u0053u\u0062\u0074\u0079\u0070\u0065",_f .MakeName ("\u0058\u004d\u004c"));_ba .Object .Set ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061",_ab );
_ba ._ad .Objects =append (_ba ._ad .Objects ,_ab );return nil ;};func (_bd *Catalog )GetOutputIntents ()(*OutputIntents ,bool ){_eff :=_bd .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");if _eff ==nil {return nil ,false ;
};_fc ,_fgd :=_f .GetIndirect (_eff );if !_fgd {return nil ,false ;};_gab ,_gea :=_f .GetArray (_fc .PdfObject );if !_gea {return nil ,false ;};return &OutputIntents {_gbb :_fc ,_cc :_gab ,_eaf :_bd ._ad },true ;};func (_bfe *Document )GetPages ()([]Page ,bool ){_gde ,_fec :=_bfe .FindCatalog ();
if !_fec {return nil ,false ;};return _gde .GetPages ();};func (_ff *Catalog )GetPages ()([]Page ,bool ){_fa ,_g :=_f .GetDict (_ff .Object .Get ("\u0050\u0061\u0067e\u0073"));if !_g {return nil ,false ;};_ga ,_ea :=_f .GetArray (_fa .Get ("\u004b\u0069\u0064\u0073"));
if !_ea {return nil ,false ;};_d :=make ([]Page ,_ga .Len ());for _b ,_adg :=range _ga .Elements (){_bf ,_fg :=_f .GetDict (_adg );if !_fg {continue ;};_d [_b ]=Page {Object :_bf ,_gbg :_b +1,_dd :_ff ._ad };};return _d ,true ;};type ImageSMask struct{Image *Image ;
Stream *_f .PdfObjectStream ;};func (_dcg Content )GetData ()([]byte ,error ){_cffg ,_cbe :=_f .NewEncoderFromStream (_dcg .Stream );if _cbe !=nil {return nil ,_cbe ;};_adc ,_cbe :=_cffg .DecodeStream (_dcg .Stream );if _cbe !=nil {return nil ,_cbe ;};
return _adc ,nil ;};func (_cd *Catalog )HasMetadata ()bool {_gac :=_cd .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061");return _gac !=nil ;};type Page struct{_gbg int ;Object *_f .PdfObjectDictionary ;_dd *Document ;};func (_gfcf *Document )FindCatalog ()(*Catalog ,bool ){var _df *_f .PdfObjectDictionary ;
for _ ,_geb :=range _gfcf .Objects {_agf ,_aae :=_f .GetDict (_geb );if !_aae {continue ;};if _eac ,_aeg :=_f .GetName (_agf .Get ("\u0054\u0079\u0070\u0065"));_aeg &&*_eac =="\u0043a\u0074\u0061\u006c\u006f\u0067"{_df =_agf ;break ;};};if _df ==nil {return nil ,false ;
};return &Catalog {Object :_df ,_ad :_gfcf },true ;};type Image struct{Name string ;Width int ;Height int ;Colorspace _f .PdfObjectName ;ColorComponents int ;BitsPerComponent int ;SMask *ImageSMask ;Stream *_f .PdfObjectStream ;};func (_gd *Catalog )GetMarkInfo ()(*_f .PdfObjectDictionary ,bool ){_dg ,_eb :=_f .GetDict (_gd .Object .Get ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f"));
return _dg ,_eb ;};type Content struct{Stream *_f .PdfObjectStream ;_fge int ;_dbg Page ;};