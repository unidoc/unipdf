//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package docutil ;import (_bb "errors";_a "fmt";_e "github.com/unidoc/unipdf/v4/common";_ad "github.com/unidoc/unipdf/v4/core";);type OutputIntent struct{Object *_ad .PdfObjectDictionary ;};type OutputIntents struct{_ee *_ad .PdfObjectArray ;_fb *Document ;
_fbe *_ad .PdfIndirectObject ;};type Content struct{Stream *_ad .PdfObjectStream ;_ega int ;_edd Page ;};func _eeb (_fge _ad .PdfObject )(_ad .PdfObjectName ,error ){var _ecc *_ad .PdfObjectName ;var _ffe *_ad .PdfObjectArray ;if _cca ,_ccc :=_fge .(*_ad .PdfIndirectObject );
_ccc {if _cag ,_dcd :=_cca .PdfObject .(*_ad .PdfObjectArray );_dcd {_ffe =_cag ;}else if _eb ,_bfc :=_cca .PdfObject .(*_ad .PdfObjectName );_bfc {_ecc =_eb ;};}else if _geb ,_acg :=_fge .(*_ad .PdfObjectArray );_acg {_ffe =_geb ;}else if _eee ,_fbgc :=_fge .(*_ad .PdfObjectName );
_fbgc {_ecc =_eee ;};if _ecc !=nil {switch *_ecc {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":return *_ecc ,nil ;case "\u0050a\u0074\u0074\u0065\u0072\u006e":return *_ecc ,nil ;
};};if _ffe !=nil &&_ffe .Len ()> 0{if _dbgg ,_ggb :=_ffe .Get (0).(*_ad .PdfObjectName );_ggb {switch *_dbgg {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":if _ffe .Len ()==1{return *_dbgg ,nil ;
};case "\u0043a\u006c\u0047\u0072\u0061\u0079","\u0043\u0061\u006c\u0052\u0047\u0042","\u004c\u0061\u0062":return *_dbgg ,nil ;case "\u0049\u0043\u0043\u0042\u0061\u0073\u0065\u0064","\u0050a\u0074\u0074\u0065\u0072\u006e","\u0049n\u0064\u0065\u0078\u0065\u0064":return *_dbgg ,nil ;
case "\u0053\u0065\u0070\u0061\u0072\u0061\u0074\u0069\u006f\u006e","\u0044e\u0076\u0069\u0063\u0065\u004e":return *_dbgg ,nil ;};};};return "",nil ;};func (_ceg *Document )GetPages ()([]Page ,bool ){_bf ,_fgg :=_ceg .FindCatalog ();if !_fgg {return nil ,false ;
};return _bf .GetPages ();};func (_fa *Catalog )GetMetadata ()(*_ad .PdfObjectStream ,bool ){return _ad .GetStream (_fa .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));};func (_fd *Catalog )GetPages ()([]Page ,bool ){_ab ,_ac :=_ad .GetDict (_fd .Object .Get ("\u0050\u0061\u0067e\u0073"));
if !_ac {return nil ,false ;};_af ,_d :=_ad .GetArray (_ab .Get ("\u004b\u0069\u0064\u0073"));if !_d {return nil ,false ;};_fg :=make ([]Page ,_af .Len ());for _abf ,_ec :=range _af .Elements (){_da ,_aa :=_ad .GetDict (_ec );if !_aa {continue ;};_fg [_abf ]=Page {Object :_da ,_fcf :_abf +1,_cd :_fd ._bd };
};return _fg ,true ;};type Document struct{ID [2]string ;Version _ad .Version ;Objects []_ad .PdfObject ;Info _ad .PdfObject ;Crypt *_ad .PdfCrypt ;UseHashBasedID bool ;};func (_caeg Page )GetResourcesXObject ()(*_ad .PdfObjectDictionary ,bool ){_ffd ,_gda :=_caeg .GetResources ();
if !_gda {return nil ,false ;};return _ad .GetDict (_ffd .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));};func (_dfb Page )FindXObjectImages ()([]*Image ,error ){_fcc ,_def :=_dfb .GetResourcesXObject ();if !_def {return nil ,nil ;};var _fef []*Image ;
var _egd error ;_feb :=map[*_ad .PdfObjectStream ]int {};_cg :=map[*_ad .PdfObjectStream ]struct{}{};var _eadg int ;for _ ,_ed :=range _fcc .Keys (){_gbf ,_fag :=_ad .GetStream (_fcc .Get (_ed ));if !_fag {continue ;};if _ ,_fbf :=_feb [_gbf ];_fbf {continue ;
};_dce ,_eea :=_ad .GetName (_gbf .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_eea ||_dce .String ()!="\u0049\u006d\u0061g\u0065"{continue ;};_ggbc :=Image {BitsPerComponent :8,Stream :_gbf ,Name :string (_ed )};if _ggbc .Colorspace ,_egd =_eeb (_gbf .Get ("\u0043\u006f\u006c\u006f\u0072\u0053\u0070\u0061\u0063\u0065"));
_egd !=nil {_e .Log .Error ("\u0045\u0072\u0072\u006f\u0072\u0020\u0064\u0065\u0074\u0065r\u006d\u0069\u006e\u0065\u0020\u0063\u006fl\u006f\u0072\u0020\u0073\u0070\u0061\u0063\u0065\u0020\u0025\u0073",_egd );continue ;};if _dfe ,_ba :=_ad .GetIntVal (_gbf .Get ("\u0042\u0069t\u0073\u0050\u0065r\u0043\u006f\u006d\u0070\u006f\u006e\u0065\u006e\u0074"));
_ba {_ggbc .BitsPerComponent =_dfe ;};if _dea ,_defg :=_ad .GetIntVal (_gbf .Get ("\u0057\u0069\u0064t\u0068"));_defg {_ggbc .Width =_dea ;};if _ege ,_fcdc :=_ad .GetIntVal (_gbf .Get ("\u0048\u0065\u0069\u0067\u0068\u0074"));_fcdc {_ggbc .Height =_ege ;
};if _dcb ,_cdc :=_ad .GetStream (_gbf .Get ("\u0053\u004d\u0061s\u006b"));_cdc {_ggbc .SMask =&ImageSMask {Image :&_ggbc ,Stream :_dcb };_cg [_dcb ]=struct{}{};};switch _ggbc .Colorspace {case "\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B":_ggbc .ColorComponents =3;
case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079":_ggbc .ColorComponents =1;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":_ggbc .ColorComponents =4;default:_ggbc .ColorComponents =-1;};_feb [_gbf ]=_eadg ;_fef =append (_fef ,&_ggbc );
_eadg ++;};var _gc []int ;for _ ,_gad :=range _fef {if _gad .SMask !=nil {_bfce ,_cea :=_feb [_gad .SMask .Stream ];if _cea {_gc =append (_gc ,_bfce );};};};_bdc :=make ([]*Image ,len (_fef )-len (_gc ));_eadg =0;_aea :for _aac ,_faa :=range _fef {for _ ,_fba :=range _gc {if _aac ==_fba {continue _aea ;
};};_bdc [_eadg ]=_faa ;_eadg ++;};return _fef ,nil ;};func (_fda *Catalog )HasMetadata ()bool {_bdd :=_fda .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061");return _bdd !=nil ;};func (_aead *Content )SetData (data []byte )error {_cgc ,_fbdf :=_ad .MakeStream (data ,_ad .NewFlateEncoder ());
if _fbdf !=nil {return _fbdf ;};_cdb ,_bfcec :=_ad .GetArray (_aead ._edd .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_bfcec &&_aead ._ega ==0{_aead ._edd .Object .Set ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073",_cgc );
}else {if _fbdf =_cdb .Set (_aead ._ega ,_cgc );_fbdf !=nil {return _fbdf ;};};_aead ._edd ._cd .Objects =append (_aead ._edd ._cd .Objects ,_cgc );return nil ;};func (_ce *OutputIntents )Add (oi _ad .PdfObject )error {_dee ,_ead :=oi .(*_ad .PdfObjectDictionary );
if !_ead {return _bb .New ("\u0069\u006e\u0070\u0075\u0074\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020\u0069\u006e\u0074\u0065\u006et\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u0062\u0065\u0020\u0061\u006e\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};if _gde ,_ceb :=_ad .GetStream (_dee .Get ("\u0044\u0065\u0073\u0074\u004f\u0075\u0074\u0070\u0075\u0074\u0050\u0072o\u0066\u0069\u006c\u0065"));_ceb {_ce ._fb .Objects =append (_ce ._fb .Objects ,_gde );};_ged ,_gg :=oi .(*_ad .PdfIndirectObject );if !_gg {_ged =_ad .MakeIndirectObject (oi );
};if _ce ._ee ==nil {_ce ._ee =_ad .MakeArray (_ged );}else {_ce ._ee .Append (_ged );};_ce ._fb .Objects =append (_ce ._fb .Objects ,_ged );return nil ;};func (_cc *Catalog )GetMarkInfo ()(*_ad .PdfObjectDictionary ,bool ){_db ,_fcd :=_ad .GetDict (_cc .Object .Get ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f"));
return _db ,_fcd ;};func (_g *Catalog )SetStructTreeRoot (structTreeRoot _ad .PdfObject ){if structTreeRoot ==nil {_g .Object .Remove ("\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065e\u0052\u006f\u006f\u0074");return ;};_ga :=_ad .MakeIndirectObject (structTreeRoot );
_g .Object .Set ("\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065e\u0052\u006f\u006f\u0074",_ga );_g ._bd .Objects =append (_g ._bd .Objects ,_ga );};func (_cae *Document )FindCatalog ()(*Catalog ,bool ){var _eg *_ad .PdfObjectDictionary ;for _ ,_caa :=range _cae .Objects {_fbg ,_dbg :=_ad .GetDict (_caa );
if !_dbg {continue ;};if _cb ,_fe :=_ad .GetName (_fbg .Get ("\u0054\u0079\u0070\u0065"));_fe &&*_cb =="\u0043a\u0074\u0061\u006c\u006f\u0067"{_eg =_fbg ;break ;};};if _eg ==nil {return nil ,false ;};return &Catalog {Object :_eg ,_bd :_cae },true ;};func (_bbd Page )FindXObjectForms ()[]*_ad .PdfObjectStream {_bag ,_bbb :=_bbd .GetResourcesXObject ();
if !_bbb {return nil ;};_deeg :=map[*_ad .PdfObjectStream ]struct{}{};var _gdf func (_ebd *_ad .PdfObjectDictionary ,_gcd map[*_ad .PdfObjectStream ]struct{});_gdf =func (_dd *_ad .PdfObjectDictionary ,_debg map[*_ad .PdfObjectStream ]struct{}){for _ ,_aef :=range _dd .Keys (){_bffe ,_gbd :=_ad .GetStream (_dd .Get (_aef ));
if !_gbd {continue ;};if _ ,_gdea :=_debg [_bffe ];_gdea {continue ;};_faf ,_gea :=_ad .GetName (_bffe .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_gea ||_faf .String ()!="\u0046\u006f\u0072\u006d"{continue ;};_debg [_bffe ]=struct{}{};_agf ,_gea :=_ad .GetDict (_bffe .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));
if !_gea {continue ;};_gdc ,_faga :=_ad .GetDict (_agf .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));if _faga {_gdf (_gdc ,_debg );};};};_gdf (_bag ,_deeg );var _ccb []*_ad .PdfObjectStream ;for _edf :=range _deeg {_ccb =append (_ccb ,_edf );};return _ccb ;
};func (_dc *Catalog )GetStructTreeRoot ()(*_ad .PdfObjectDictionary ,bool ){return _ad .GetDict (_dc .Object .Get ("\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065e\u0052\u006f\u006f\u0074"));};func (_f *Catalog )SetVersion (){_f .Object .Set ("\u0056e\u0072\u0073\u0069\u006f\u006e",_ad .MakeName (_a .Sprintf ("\u0025\u0064\u002e%\u0064",_f ._bd .Version .Major ,_f ._bd .Version .Minor )));
};type Page struct{_fcf int ;Object *_ad .PdfObjectDictionary ;_cd *Document ;};func (_ddf Content )GetData ()([]byte ,error ){_cf ,_be :=_ad .NewEncoderFromStream (_ddf .Stream );if _be !=nil {return nil ,_be ;};_eba ,_be :=_cf .DecodeStream (_ddf .Stream );
if _be !=nil {return nil ,_be ;};return _eba ,nil ;};type Catalog struct{Object *_ad .PdfObjectDictionary ;_bd *Document ;};func (_gaf *OutputIntents )Len ()int {return _gaf ._ee .Len ()};func (_fbd *Document )AddIndirectObject (indirect *_ad .PdfIndirectObject ){for _ ,_bdg :=range _fbd .Objects {if _bdg ==indirect {return ;
};};_fbd .Objects =append (_fbd .Objects ,indirect );};func (_aaf *Catalog )NewOutputIntents ()*OutputIntents {return &OutputIntents {_fb :_aaf ._bd }};func (_ffa *OutputIntents )Get (i int )(OutputIntent ,bool ){if _ffa ._ee ==nil {return OutputIntent {},false ;
};if i >=_ffa ._ee .Len (){return OutputIntent {},false ;};_fae :=_ffa ._ee .Get (i );_gee ,_gedb :=_ad .GetIndirect (_fae );if !_gedb {_ca ,_eca :=_ad .GetDict (_fae );return OutputIntent {Object :_ca },_eca ;};_gf ,_deb :=_ad .GetDict (_gee .PdfObject );
return OutputIntent {Object :_gf },_deb ;};func (_c *Catalog )SetMetadata (data []byte )error {_bc ,_fc :=_ad .MakeStream (data ,nil );if _fc !=nil {return _fc ;};_bc .Set ("\u0054\u0079\u0070\u0065",_ad .MakeName ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));
_bc .Set ("\u0053u\u0062\u0074\u0079\u0070\u0065",_ad .MakeName ("\u0058\u004d\u004c"));_c .Object .Set ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061",_bc );_c ._bd .Objects =append (_c ._bd .Objects ,_bc );return nil ;};func (_gd *Catalog )SetMarkInfo (mi _ad .PdfObject ){if mi ==nil {_gd .Object .Remove ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f");
return ;};_bbe :=_ad .MakeIndirectObject (mi );_gd .Object .Set ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f",_bbe );_gd ._bd .Objects =append (_gd ._bd .Objects ,_bbe );};func (_ae *Catalog )SetOutputIntents (outputIntents *OutputIntents ){if _ea :=_ae .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");
_ea !=nil {for _afe ,_ecf :=range _ae ._bd .Objects {if _ecf ==_ea {if outputIntents ._fbe ==_ea {return ;};_ae ._bd .Objects =append (_ae ._bd .Objects [:_afe ],_ae ._bd .Objects [_afe +1:]...);break ;};};};_bcg :=outputIntents ._fbe ;if _bcg ==nil {_bcg =_ad .MakeIndirectObject (outputIntents ._ee );
};_ae .Object .Set ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073",_bcg );_ae ._bd .Objects =append (_ae ._bd .Objects ,_bcg );};func (_abff *Page )Number ()int {return _abff ._fcf };func (_de *Catalog )GetOutputIntents ()(*OutputIntents ,bool ){_ge :=_de .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");
if _ge ==nil {return nil ,false ;};_df ,_ff :=_ad .GetIndirect (_ge );if !_ff {return nil ,false ;};_cce ,_fgc :=_ad .GetArray (_df .PdfObject );if !_fgc {return nil ,false ;};return &OutputIntents {_fbe :_df ,_ee :_cce ,_fb :_de ._bd },true ;};type ImageSMask struct{Image *Image ;
Stream *_ad .PdfObjectStream ;};func (_bce Page )GetContents ()([]Content ,bool ){_fce ,_bcb :=_ad .GetArray (_bce .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_bcb {_ag ,_fdd :=_ad .GetStream (_bce .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));
if !_fdd {return nil ,false ;};return []Content {{Stream :_ag ,_edd :_bce ,_ega :0}},true ;};_ggc :=make ([]Content ,_fce .Len ());for _gb ,_cbd :=range _fce .Elements (){_agc ,_bfd :=_ad .GetStream (_cbd );if !_bfd {continue ;};_ggc [_gb ]=Content {Stream :_agc ,_edd :_bce ,_ega :_gb };
};return _ggc ,true ;};func (_efc Page )GetResources ()(*_ad .PdfObjectDictionary ,bool ){return _ad .GetDict (_efc .Object .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));};func (_dbe *Document )AddStream (stream *_ad .PdfObjectStream ){for _ ,_cba :=range _dbe .Objects {if _cba ==stream {return ;
};};_dbe .Objects =append (_dbe .Objects ,stream );};type Image struct{Name string ;Width int ;Height int ;Colorspace _ad .PdfObjectName ;ColorComponents int ;BitsPerComponent int ;SMask *ImageSMask ;Stream *_ad .PdfObjectStream ;};