//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package docutil ;import (_d "errors";_fe "fmt";_e "github.com/unidoc/unipdf/v3/common";_a "github.com/unidoc/unipdf/v3/core";);func (_gac *OutputIntents )Len ()int {return _gac ._ddg .Len ()};type Image struct{Name string ;Width int ;Height int ;Colorspace _a .PdfObjectName ;
ColorComponents int ;BitsPerComponent int ;SMask *ImageSMask ;Stream *_a .PdfObjectStream ;};func (_ad *Catalog )GetMetadata ()(*_a .PdfObjectStream ,bool ){_ec ,_edg :=_a .GetStream (_ad .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));
return _ec ,_edg ;};type Document struct{ID [2]string ;Version _a .Version ;Objects []_a .PdfObject ;Info _a .PdfObject ;Crypt *_a .PdfCrypt ;UseHashBasedID bool ;};func (_eae *Catalog )SetOutputIntents (outputIntents *OutputIntents ){if _eg :=_eae .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");
_eg !=nil {for _db ,_ef :=range _eae ._dc .Objects {if _ef ==_eg {if outputIntents ._ddf ==_eg {return ;};_eae ._dc .Objects =append (_eae ._dc .Objects [:_db ],_eae ._dc .Objects [_db +1:]...);break ;};};};_ff :=outputIntents ._ddf ;if _ff ==nil {_ff =_a .MakeIndirectObject (outputIntents ._ddg );
};_eae .Object .Set ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073",_ff );_eae ._dc .Objects =append (_eae ._dc .Objects ,_ff );};type OutputIntents struct{_ddg *_a .PdfObjectArray ;_bd *Document ;_ddf *_a .PdfIndirectObject ;
};type Page struct{_ddfc int ;Object *_a .PdfObjectDictionary ;_fdga *Document ;};func (_cbc Page )GetResources ()(*_a .PdfObjectDictionary ,bool ){return _a .GetDict (_cbc .Object .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));};func (_bca Page )GetContents ()([]Content ,bool ){_bae ,_aea :=_a .GetArray (_bca .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));
if !_aea {_cag ,_da :=_a .GetStream (_bca .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_da {return nil ,false ;};return []Content {{Stream :_cag ,_cbbf :_bca ,_efa :0}},true ;};_gff :=make ([]Content ,_bae .Len ());for _degf ,_dbc :=range _bae .Elements (){_ged ,_bba :=_a .GetStream (_dbc );
if !_bba {continue ;};_gff [_degf ]=Content {Stream :_ged ,_cbbf :_bca ,_efa :_degf };};return _gff ,true ;};func (_feb *Page )Number ()int {return _feb ._ddfc };func (_fec *Catalog )GetMarkInfo ()(*_a .PdfObjectDictionary ,bool ){_dd ,_ag :=_a .GetDict (_fec .Object .Get ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f"));
return _dd ,_ag ;};type Catalog struct{Object *_a .PdfObjectDictionary ;_dc *Document ;};func (_gc *Document )FindCatalog ()(*Catalog ,bool ){var _bdf *_a .PdfObjectDictionary ;for _ ,_bgc :=range _gc .Objects {_dcc ,_gcf :=_a .GetDict (_bgc );if !_gcf {continue ;
};if _dea ,_dgf :=_a .GetName (_dcc .Get ("\u0054\u0079\u0070\u0065"));_dgf &&*_dea =="\u0043a\u0074\u0061\u006c\u006f\u0067"{_bdf =_dcc ;break ;};};if _bdf ==nil {return nil ,false ;};return &Catalog {Object :_bdf ,_dc :_gc },true ;};func (_baa Page )GetResourcesXObject ()(*_a .PdfObjectDictionary ,bool ){_acf ,_aabd :=_baa .GetResources ();
if !_aabd {return nil ,false ;};return _a .GetDict (_acf .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));};func (_fa *Catalog )SetMarkInfo (mi _a .PdfObject ){_ee :=_a .MakeIndirectObject (mi );_fa .Object .Set ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f",_ee );
_fa ._dc .Objects =append (_fa ._dc .Objects ,_ee );};func (_gg *OutputIntents )Get (i int )(OutputIntent ,bool ){if _gg ._ddg ==nil {return OutputIntent {},false ;};if i >=_gg ._ddg .Len (){return OutputIntent {},false ;};_ge :=_gg ._ddg .Get (i );_agd ,_fg :=_a .GetIndirect (_ge );
if !_fg {_de ,_deg :=_a .GetDict (_ge );return OutputIntent {Object :_de },_deg ;};_ccg ,_acc :=_a .GetDict (_agd .PdfObject );return OutputIntent {Object :_ccg },_acc ;};func (_cf Page )FindXObjectImages ()([]*Image ,error ){_bbag ,_eed :=_cf .GetResourcesXObject ();
if !_eed {return nil ,nil ;};var _ccd []*Image ;var _fcg error ;_be :=map[*_a .PdfObjectStream ]int {};_gaca :=map[*_a .PdfObjectStream ]struct{}{};var _add int ;for _ ,_cd :=range _bbag .Keys (){_gge ,_cca :=_a .GetStream (_bbag .Get (_cd ));if !_cca {continue ;
};if _ ,_ggeg :=_be [_gge ];_ggeg {continue ;};_eadc ,_fff :=_a .GetName (_gge .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_fff ||_eadc .String ()!="\u0049\u006d\u0061g\u0065"{continue ;};_fdc :=Image {BitsPerComponent :8,Stream :_gge ,Name :string (_cd )};
if _fdc .Colorspace ,_fcg =_dbd (_gge .PdfObjectDictionary .Get ("\u0043\u006f\u006c\u006f\u0072\u0053\u0070\u0061\u0063\u0065"));_fcg !=nil {_e .Log .Error ("\u0045\u0072\u0072\u006f\u0072\u0020\u0064\u0065\u0074\u0065r\u006d\u0069\u006e\u0065\u0020\u0063\u006fl\u006f\u0072\u0020\u0073\u0070\u0061\u0063\u0065\u0020\u0025\u0073",_fcg );
continue ;};if _ebf ,_bab :=_a .GetIntVal (_gge .PdfObjectDictionary .Get ("\u0042\u0069t\u0073\u0050\u0065r\u0043\u006f\u006d\u0070\u006f\u006e\u0065\u006e\u0074"));_bab {_fdc .BitsPerComponent =_ebf ;};if _fcgd ,_gd :=_a .GetIntVal (_gge .PdfObjectDictionary .Get ("\u0057\u0069\u0064t\u0068"));
_gd {_fdc .Width =_fcgd ;};if _fcb ,_cgc :=_a .GetIntVal (_gge .PdfObjectDictionary .Get ("\u0048\u0065\u0069\u0067\u0068\u0074"));_cgc {_fdc .Height =_fcb ;};if _acca ,_fbd :=_a .GetStream (_gge .Get ("\u0053\u004d\u0061s\u006b"));_fbd {_fdc .SMask =&ImageSMask {Image :&_fdc ,Stream :_acca };
_gaca [_acca ]=struct{}{};};switch _fdc .Colorspace {case "\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B":_fdc .ColorComponents =3;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079":_fdc .ColorComponents =1;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":_fdc .ColorComponents =4;
default:_fdc .ColorComponents =-1;};_be [_gge ]=_add ;_ccd =append (_ccd ,&_fdc );_add ++;};var _cfe []int ;for _ ,_fdd :=range _ccd {if _fdd .SMask !=nil {_cbe ,_fae :=_be [_fdd .SMask .Stream ];if _fae {_cfe =append (_cfe ,_cbe );};};};_fed :=make ([]*Image ,len (_ccd )-len (_cfe ));
_add =0;_gcc :for _aec ,_fca :=range _ccd {for _ ,_ggc :=range _cfe {if _aec ==_ggc {continue _gcc ;};};_fed [_add ]=_fca ;_add ++;};return _ccd ,nil ;};func _dbd (_edf _a .PdfObject )(_a .PdfObjectName ,error ){var _geg *_a .PdfObjectName ;var _fda *_a .PdfObjectArray ;
if _ead ,_fbc :=_edf .(*_a .PdfIndirectObject );_fbc {if _aee ,_bde :=_ead .PdfObject .(*_a .PdfObjectArray );_bde {_fda =_aee ;}else if _gcfa ,_ecd :=_ead .PdfObject .(*_a .PdfObjectName );_ecd {_geg =_gcfa ;};}else if _fge ,_af :=_edf .(*_a .PdfObjectArray );
_af {_fda =_fge ;}else if _gegg ,_cgb :=_edf .(*_a .PdfObjectName );_cgb {_geg =_gegg ;};if _geg !=nil {switch *_geg {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":return *_geg ,nil ;
case "\u0050a\u0074\u0074\u0065\u0072\u006e":return *_geg ,nil ;};};if _fda !=nil &&_fda .Len ()> 0{if _aabe ,_cbb :=_fda .Get (0).(*_a .PdfObjectName );_cbb {switch *_aabe {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":if _fda .Len ()==1{return *_aabe ,nil ;
};case "\u0043a\u006c\u0047\u0072\u0061\u0079","\u0043\u0061\u006c\u0052\u0047\u0042","\u004c\u0061\u0062":return *_aabe ,nil ;case "\u0049\u0043\u0043\u0042\u0061\u0073\u0065\u0064","\u0050a\u0074\u0074\u0065\u0072\u006e","\u0049n\u0064\u0065\u0078\u0065\u0064":return *_aabe ,nil ;
case "\u0053\u0065\u0070\u0061\u0072\u0061\u0074\u0069\u006f\u006e","\u0044e\u0076\u0069\u0063\u0065\u004e":return *_aabe ,nil ;};};};return "",nil ;};func (_fba Content )GetData ()([]byte ,error ){_cff ,_cffe :=_a .NewEncoderFromStream (_fba .Stream );
if _cffe !=nil {return nil ,_cffe ;};_gda ,_cffe :=_cff .DecodeStream (_fba .Stream );if _cffe !=nil {return nil ,_cffe ;};return _gda ,nil ;};func (_bf Page )FindXObjectForms ()[]*_a .PdfObjectStream {_adc ,_gffe :=_bf .GetResourcesXObject ();if !_gffe {return nil ;
};_bfb :=map[*_a .PdfObjectStream ]struct{}{};var _cac func (_bcf *_a .PdfObjectDictionary ,_cgfd map[*_a .PdfObjectStream ]struct{});_cac =func (_dfa *_a .PdfObjectDictionary ,_cba map[*_a .PdfObjectStream ]struct{}){for _ ,_fcbg :=range _dfa .Keys (){_adg ,_dce :=_a .GetStream (_dfa .Get (_fcbg ));
if !_dce {continue ;};if _ ,_efd :=_cba [_adg ];_efd {continue ;};_gcd ,_fgf :=_a .GetName (_adg .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_fgf ||_gcd .String ()!="\u0046\u006f\u0072\u006d"{continue ;};_cba [_adg ]=struct{}{};_agdc ,_fgf :=_a .GetDict (_adg .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));
if !_fgf {continue ;};_fga ,_bbd :=_a .GetDict (_agdc .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));if _bbd {_cac (_fga ,_cba );};};};_cac (_adc ,_bfb );var _gbc []*_a .PdfObjectStream ;for _adca :=range _bfb {_gbc =append (_gbc ,_adca );};return _gbc ;
};func (_c *Catalog )SetMetadata (data []byte )error {_fc ,_ga :=_a .MakeStream (data ,nil );if _ga !=nil {return _ga ;};_fc .Set ("\u0054\u0079\u0070\u0065",_a .MakeName ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));_fc .Set ("\u0053u\u0062\u0074\u0079\u0070\u0065",_a .MakeName ("\u0058\u004d\u004c"));
_c .Object .Set ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061",_fc );_c ._dc .Objects =append (_c ._dc .Objects ,_fc );return nil ;};func (_baef *Content )SetData (data []byte )error {_ce ,_ecg :=_a .MakeStream (data ,_a .NewFlateEncoder ());if _ecg !=nil {return _ecg ;
};_fdgd ,_cdg :=_a .GetArray (_baef ._cbbf .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_cdg &&_baef ._efa ==0{_baef ._cbbf .Object .Set ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073",_ce );}else {if _ecg =_fdgd .Set (_baef ._efa ,_ce );
_ecg !=nil {return _ecg ;};};_baef ._cbbf ._fdga .Objects =append (_baef ._cbbf ._fdga .Objects ,_ce );return nil ;};func (_bg *Catalog )GetPages ()([]Page ,bool ){_g ,_ac :=_a .GetDict (_bg .Object .Get ("\u0050\u0061\u0067e\u0073"));if !_ac {return nil ,false ;
};_ba ,_fb :=_a .GetArray (_g .Get ("\u004b\u0069\u0064\u0073"));if !_fb {return nil ,false ;};_dg :=make ([]Page ,_ba .Len ());for _ea ,_aa :=range _ba .Elements (){_bc ,_ed :=_a .GetDict (_aa );if !_ed {continue ;};_dg [_ea ]=Page {Object :_bc ,_ddfc :_ea +1,_fdga :_bg ._dc };
};return _dg ,true ;};type Content struct{Stream *_a .PdfObjectStream ;_efa int ;_cbbf Page ;};func (_fd *Catalog )NewOutputIntents ()*OutputIntents {return &OutputIntents {_bd :_fd ._dc }};type ImageSMask struct{Image *Image ;Stream *_a .PdfObjectStream ;
};func (_dfg *Document )GetPages ()([]Page ,bool ){_aad ,_fdg :=_dfg .FindCatalog ();if !_fdg {return nil ,false ;};return _aad .GetPages ();};func (_cg *Document )AddStream (stream *_a .PdfObjectStream ){for _ ,_bdfe :=range _cg .Objects {if _bdfe ==stream {return ;
};};_cg .Objects =append (_cg .Objects ,stream );};func (_b *Catalog )SetVersion (){_b .Object .Set ("\u0056e\u0072\u0073\u0069\u006f\u006e",_a .MakeName (_fe .Sprintf ("\u0025\u0064\u002e%\u0064",_b ._dc .Version .Major ,_b ._dc .Version .Minor )));};
func (_ca *Catalog )GetOutputIntents ()(*OutputIntents ,bool ){_egg :=_ca .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");if _egg ==nil {return nil ,false ;};_ae ,_efe :=_a .GetIndirect (_egg );if !_efe {return nil ,false ;
};_gfd ,_aab :=_a .GetArray (_ae .PdfObject );if !_aab {return nil ,false ;};return &OutputIntents {_ddf :_ae ,_ddg :_gfd ,_bd :_ca ._dc },true ;};func (_gb *Document )AddIndirectObject (indirect *_a .PdfIndirectObject ){for _ ,_cgf :=range _gb .Objects {if _cgf ==indirect {return ;
};};_gb .Objects =append (_gb .Objects ,indirect );};func (_eab *Catalog )HasMetadata ()bool {_gf :=_eab .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061");return _gf !=nil ;};type OutputIntent struct{Object *_a .PdfObjectDictionary ;};func (_cc *OutputIntents )Add (oi _a .PdfObject )error {_bgf ,_age :=oi .(*_a .PdfObjectDictionary );
if !_age {return _d .New ("\u0069\u006e\u0070\u0075\u0074\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020\u0069\u006e\u0074\u0065\u006et\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u0062\u0065\u0020\u0061\u006e\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};if _df ,_eb :=_a .GetStream (_bgf .Get ("\u0044\u0065\u0073\u0074\u004f\u0075\u0074\u0070\u0075\u0074\u0050\u0072o\u0066\u0069\u006c\u0065"));_eb {_cc ._bd .Objects =append (_cc ._bd .Objects ,_df );};_cb ,_bad :=oi .(*_a .PdfIndirectObject );if !_bad {_cb =_a .MakeIndirectObject (oi );
};if _cc ._ddg ==nil {_cc ._ddg =_a .MakeArray (_cb );}else {_cc ._ddg .Append (_cb );};_cc ._bd .Objects =append (_cc ._bd .Objects ,_cb );return nil ;};