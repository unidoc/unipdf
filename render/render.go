//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package render ;import (_c "errors";_e "fmt";_afb "github.com/adrg/sysfont";_db "github.com/unidoc/unipdf/v4/annotator";_eg "github.com/unidoc/unipdf/v4/common";_bf "github.com/unidoc/unipdf/v4/contentstream";_ag "github.com/unidoc/unipdf/v4/contentstream/draw";
_ga "github.com/unidoc/unipdf/v4/core";_gg "github.com/unidoc/unipdf/v4/internal/license";_bg "github.com/unidoc/unipdf/v4/internal/transform";_fc "github.com/unidoc/unipdf/v4/model";_cec "github.com/unidoc/unipdf/v4/render/internal/context";_df "github.com/unidoc/unipdf/v4/render/internal/context/imagerender";
_cd "golang.org/x/image/draw";_ca "image";_fd "image/color";_a "image/draw";_af "image/jpeg";_b "image/png";_cg "math";_g "os";_f "path/filepath";_ce "strings";);func _aabg (_aecfg string ,_bdd _ca .Image ,_edab int )error {_bec ,_cgae :=_g .Create (_aecfg );
if _cgae !=nil {return _cgae ;};defer _bec .Close ();return _af .Encode (_bec ,_bdd ,&_af .Options {Quality :_edab });};func _adgb (_gcgb ,_dedb _ca .Image ,_dag _cd .Interpolator )_ca .Image {_fcec ,_add :=_dedb .Bounds ().Size (),_gcgb .Bounds ().Size ();
_dedg ,_ccb :=_fcec .X ,_fcec .Y ;if _add .X > _dedg {_dedg =_add .X ;};if _add .Y > _ccb {_ccb =_add .Y ;};_adfa :=_ca .Rect (0,0,_dedg ,_ccb );if _fcec .X !=_dedg ||_fcec .Y !=_ccb {_fgae :=_ca .NewRGBA (_adfa );_dag .Scale (_fgae ,_adfa ,_dedb ,_dedb .Bounds (),_cd .Over ,nil );
_dedb =_fgae ;};if _add .X !=_dedg ||_add .Y !=_ccb {_gfag :=_ca .NewRGBA (_adfa );_dag .Scale (_gfag ,_adfa ,_gcgb ,_gcgb .Bounds (),_cd .Over ,nil );_gcgb =_gfag ;};_fdba :=_ca .NewRGBA (_adfa );_cd .DrawMask (_fdba ,_adfa ,_gcgb ,_ca .Point {},_dedb ,_ca .Point {},_cd .Over );
return _fdba ;};func (_fb *renderer )renderContentStream (_gef _cec .Context ,_fcc string ,_gdb *_fc .PdfPageResources )error {_bc ,_geda :=_bf .NewContentStreamParser (_fcc ).Parse ();if _geda !=nil {return _geda ;};if _fb ._bba ==nil {_fb ._bba =map[string ]*_cec .TextFont {};
};if _fb ._dfgf ==nil {_fb ._dfgf =map[string ]*_cec .TextFont {};};_fcca :=_gef .TextState ();_fcca .GlobalScale =_fb ._gfb ;if _fb ._agf ==nil {_fb ._agf =_afb .NewFinder (&_afb .FinderOpts {Extensions :[]string {"\u002e\u0074\u0074\u0066","\u002e\u0074\u0074\u0063"}});
};var _agfc *_bf .ContentStreamOperation ;var _dga bool ;var _agg _cec .FillRule ;_gdd :=_bf .NewContentStreamProcessor (*_bc );_gdd .AddHandler (_bf .HandlerConditionEnumAllOperands ,"",func (_cf *_bf .ContentStreamOperation ,_aec _bf .GraphicsState ,_dde *_fc .PdfPageResources )error {_eg .Log .Debug ("\u0050\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0025\u0073",_cf .Operand );
switch _cf .Operand {case "\u0071":_gef .Push ();case "\u0051":_gef .Pop ();_fcca =_gef .TextState ();case "\u0063\u006d":if len (_cf .Params )!=6{return _ggd ;};_bbg ,_cc :=_ga .GetNumbersAsFloat (_cf .Params );if _cc !=nil {return _cc ;};_ac :=_bg .NewMatrix (_bbg [0],_bbg [1],_bbg [2],_bbg [3],_bbg [4],_bbg [5]);
_eg .Log .Debug ("\u0047\u0072\u0061\u0070\u0068\u0069\u0063\u0073\u0020\u0073\u0074a\u0074\u0065\u0020\u006d\u0061\u0074\u0072\u0069\u0078\u003a \u0025\u002b\u0076",_ac );_gef .SetMatrix (_gef .Matrix ().Mult (_ac ));case "\u0077":if len (_cf .Params )!=1{return _ggd ;
};_bca ,_bdb :=_ga .GetNumbersAsFloat (_cf .Params );if _bdb !=nil {return _bdb ;};_gef .SetLineWidth (_bca [0]);case "\u004a":if len (_cf .Params )!=1{return _ggd ;};_eaa ,_baf :=_ga .GetIntVal (_cf .Params [0]);if !_baf {return _cga ;};switch _eaa {case 0:_gef .SetLineCap (_cec .LineCapButt );
case 1:_gef .SetLineCap (_cec .LineCapRound );case 2:_gef .SetLineCap (_cec .LineCapSquare );default:_eg .Log .Debug ("\u0049\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006c\u0069\u006ee\u0020\u0063\u0061\u0070\u0020\u0073\u0074\u0079\u006c\u0065:\u0020\u0025\u0064",_eaa );
return _ggd ;};case "\u006a":if len (_cf .Params )!=1{return _ggd ;};_gce ,_ddd :=_ga .GetIntVal (_cf .Params [0]);if !_ddd {return _cga ;};switch _gce {case 0:_gef .SetLineJoin (_cec .LineJoinBevel );case 1:_gef .SetLineJoin (_cec .LineJoinRound );case 2:_gef .SetLineJoin (_cec .LineJoinBevel );
default:_eg .Log .Debug ("I\u006e\u0076\u0061\u006c\u0069\u0064 \u006c\u0069\u006e\u0065\u0020\u006a\u006f\u0069\u006e \u0073\u0074\u0079l\u0065:\u0020\u0025\u0064",_gce );return _ggd ;};case "\u004d":if len (_cf .Params )!=1{return _ggd ;};_dce ,_bbaf :=_ga .GetNumbersAsFloat (_cf .Params );
if _bbaf !=nil {return _bbaf ;};_ =_dce ;_eg .Log .Debug ("\u004di\u0074\u0065\u0072\u0020l\u0069\u006d\u0069\u0074\u0020n\u006ft\u0020s\u0075\u0070\u0070\u006f\u0072\u0074\u0065d");case "\u0064":if len (_cf .Params )!=2{return _ggd ;};_gca ,_gae :=_ga .GetArray (_cf .Params [0]);
if !_gae {return _cga ;};_ced ,_gae :=_ga .GetIntVal (_cf .Params [1]);if !_gae {_ ,_bbf :=_ga .GetFloatVal (_cf .Params [1]);if !_bbf {return _cga ;};};_ggg ,_fg :=_ga .GetNumbersAsFloat (_gca .Elements ());if _fg !=nil {return _fg ;};_gef .SetDash (_ggg ...);
_ =_ced ;_eg .Log .Debug ("\u004c\u0069n\u0065\u0020\u0064\u0061\u0073\u0068\u0020\u0070\u0068\u0061\u0073\u0065\u0020\u006e\u006f\u0074\u0020\u0073\u0075\u0070\u0070\u006frt\u0065\u0064");case "\u0072\u0069":_eg .Log .Debug ("\u0052\u0065\u006e\u0064\u0065\u0072\u0069\u006e\u0067\u0020i\u006e\u0074\u0065\u006e\u0074\u0020\u006eo\u0074\u0020\u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0065\u0064");
case "\u0069":_eg .Log .Debug ("\u0046\u006c\u0061\u0074\u006e\u0065\u0073\u0073\u0020\u0074\u006f\u006c\u0065\u0072\u0061n\u0063e\u0020\u006e\u006f\u0074\u0020\u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0065\u0064");case "\u0067\u0073":if len (_cf .Params )!=1{return _ggd ;
};_bab ,_gfa :=_ga .GetName (_cf .Params [0]);if !_gfa {return _cga ;};if _bab ==nil {return _ggd ;};_dcc ,_gfa :=_dde .GetExtGState (*_bab );if !_gfa {_eg .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006eo\u0074 \u0066i\u006ed\u0020\u0072\u0065\u0073\u006f\u0075\u0072\u0063\u0065\u003a\u0020\u0025\u0073",*_bab );
return _c .New ("\u0072e\u0073o\u0075\u0072\u0063\u0065\u0020n\u006f\u0074 \u0066\u006f\u0075\u006e\u0064");};_cgd ,_gfa :=_ga .GetDict (_dcc );if !_gfa {_eg .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020c\u006f\u0075\u006c\u0064 ge\u0074 g\u0072\u0061\u0070\u0068\u0069\u0063\u0073 s\u0074\u0061\u0074\u0065\u0020\u0064\u0069c\u0074");
return _cga ;};_eg .Log .Debug ("G\u0053\u0020\u0064\u0069\u0063\u0074\u003a\u0020\u0025\u0073",_cgd .String ());_gaee :=_cgd .Get ("\u0063\u0061");if _gaee !=nil {_dbg ,_bgc :=_ga .GetNumberAsFloat (_gaee );if _bgc ==nil {_cgef ,_eag :=_aec .ColorspaceNonStroking .ColorToRGB (_aec .ColorNonStroking );
if _eag !=nil {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_eag );return _eag ;};_dbb ,_efc :=_cgef .(*_fc .PdfColorDeviceRGB );if !_efc {_eg .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");
return _eag ;};_gef .SetFillRGBA (_dbb .R (),_dbb .G (),_dbb .B (),_dbg );};};case "\u006d":if len (_cf .Params )!=2{_eg .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0073\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_ggd );
return nil ;};_edf ,_fdf :=_ga .GetNumbersAsFloat (_cf .Params );if _fdf !=nil {return _fdf ;};_eg .Log .Debug ("M\u006f\u0076\u0065\u0020\u0074\u006f\u003a\u0020\u0025\u0076",_edf );_gef .NewSubPath ();_gef .MoveTo (_edf [0],_edf [1]);case "\u006c":if len (_cf .Params )!=2{_eg .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0073\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_ggd );
return nil ;};_cfe ,_fbf :=_ga .GetNumbersAsFloat (_cf .Params );if _fbf !=nil {return _fbf ;};_gef .LineTo (_cfe [0],_cfe [1]);case "\u0063":if len (_cf .Params )!=6{return _ggd ;};_dfgfg ,_aga :=_ga .GetNumbersAsFloat (_cf .Params );if _aga !=nil {return _aga ;
};_eg .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020\u0062\u0065\u007a\u0069\u0065\u0072\u0020p\u0061\u0072\u0061\u006d\u0073\u003a\u0020\u0025\u002b\u0076",_dfgfg );_gef .CubicTo (_dfgfg [0],_dfgfg [1],_dfgfg [2],_dfgfg [3],_dfgfg [4],_dfgfg [5]);case "\u0076","\u0079":if len (_cf .Params )!=4{return _ggd ;
};_cbc ,_gbf :=_ga .GetNumbersAsFloat (_cf .Params );if _gbf !=nil {return _gbf ;};_eg .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020\u0062\u0065\u007a\u0069\u0065\u0072\u0020p\u0061\u0072\u0061\u006d\u0073\u003a\u0020\u0025\u002b\u0076",_cbc );_gef .QuadraticTo (_cbc [0],_cbc [1],_cbc [2],_cbc [3]);
case "\u0068":_gef .ClosePath ();_gef .NewSubPath ();case "\u0072\u0065":if len (_cf .Params )!=4{return _ggd ;};_gfg ,_ecf :=_ga .GetNumbersAsFloat (_cf .Params );if _ecf !=nil {return _ecf ;};_gef .DrawRectangle (_gfg [0],_gfg [1],_gfg [2],_gfg [3]);
_gef .NewSubPath ();case "\u0053":_gcg ,_fcd :=_aec .ColorspaceStroking .ColorToRGB (_aec .ColorStroking );if _fcd !=nil {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fcd );
return _fcd ;};_aacb ,_ega :=_gcg .(*_fc .PdfColorDeviceRGB );if !_ega {_eg .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _fcd ;};_gef .SetRGBA (_aacb .R (),_aacb .G (),_aacb .B (),1);
_gef .Stroke ();case "\u0073":_ff ,_cedb :=_aec .ColorspaceStroking .ColorToRGB (_aec .ColorStroking );if _cedb !=nil {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cedb );
return _cedb ;};_dgaa ,_fbb :=_ff .(*_fc .PdfColorDeviceRGB );if !_fbb {_eg .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _cedb ;};_gef .ClosePath ();_gef .NewSubPath ();
_gef .SetRGBA (_dgaa .R (),_dgaa .G (),_dgaa .B (),1);_gef .Stroke ();case "\u0066","\u0046":_dgf ,_dff :=_aec .ColorspaceNonStroking .ColorToRGB (_aec .ColorNonStroking );if _dff !=nil {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dff );
return _dff ;};switch _edd :=_dgf .(type ){case *_fc .PdfColorDeviceRGB :_gef .SetRGBA (_edd .R (),_edd .G (),_edd .B (),1);_gef .SetFillRule (_cec .FillRuleWinding );_gef .Fill ();case *_fc .PdfColorPattern :_gef .Fill ();};_eg .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");
case "\u0066\u002a":_abc ,_bfc :=_aec .ColorspaceNonStroking .ColorToRGB (_aec .ColorNonStroking );if _bfc !=nil {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bfc );
return _bfc ;};_fceg ,_bde :=_abc .(*_fc .PdfColorDeviceRGB );if !_bde {_eg .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _bfc ;};_gef .SetRGBA (_fceg .R (),_fceg .G (),_fceg .B (),1);
_gef .SetFillRule (_cec .FillRuleEvenOdd );_gef .Fill ();case "\u0042":_aba ,_dded :=_aec .ColorspaceNonStroking .ColorToRGB (_aec .ColorNonStroking );if _dded !=nil {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dded );
return _dded ;};switch _gde :=_aba .(type ){case *_fc .PdfColorDeviceRGB :_gef .SetRGBA (_gde .R (),_gde .G (),_gde .B (),1);_gef .SetFillRule (_cec .FillRuleWinding );_gef .FillPreserve ();_aba ,_dded =_aec .ColorspaceStroking .ColorToRGB (_aec .ColorStroking );
if _dded !=nil {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dded );return _dded ;};if _ebb ,_bfd :=_aba .(*_fc .PdfColorDeviceRGB );
_bfd {_gef .SetRGBA (_ebb .R (),_ebb .G (),_ebb .B (),1);_gef .Stroke ();};case *_fc .PdfColorPattern :_gef .SetFillRule (_cec .FillRuleWinding );_gef .Fill ();_gef .StrokePattern ();};case "\u0042\u002a":_ebe ,_dgd :=_aec .ColorspaceNonStroking .ColorToRGB (_aec .ColorNonStroking );
if _dgd !=nil {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dgd );return _dgd ;};switch _aaa :=_ebe .(type ){case *_fc .PdfColorDeviceRGB :_gef .SetRGBA (_aaa .R (),_aaa .G (),_aaa .B (),1);
_gef .SetFillRule (_cec .FillRuleEvenOdd );_gef .FillPreserve ();_ebe ,_dgd =_aec .ColorspaceStroking .ColorToRGB (_aec .ColorStroking );if _dgd !=nil {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dgd );
return _dgd ;};if _aab ,_ead :=_ebe .(*_fc .PdfColorDeviceRGB );_ead {_gef .SetRGBA (_aab .R (),_aab .G (),_aab .B (),1);_gef .Stroke ();};case *_fc .PdfColorPattern :_gef .SetFillRule (_cec .FillRuleEvenOdd );_gef .Fill ();_gef .StrokePattern ();};case "\u0062":_gef .ClosePath ();
_gcgd ,_dfc :=_aec .ColorspaceNonStroking .ColorToRGB (_aec .ColorNonStroking );if _dfc !=nil {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dfc );
return _dfc ;};switch _eada :=_gcgd .(type ){case *_fc .PdfColorDeviceRGB :_gef .SetRGBA (_eada .R (),_eada .G (),_eada .B (),1);_gef .NewSubPath ();_gef .SetFillRule (_cec .FillRuleWinding );_gef .FillPreserve ();_gcgd ,_dfc =_aec .ColorspaceStroking .ColorToRGB (_aec .ColorStroking );
if _dfc !=nil {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dfc );return _dfc ;};if _cbcb ,_cef :=_gcgd .(*_fc .PdfColorDeviceRGB );
_cef {_gef .SetRGBA (_cbcb .R (),_cbcb .G (),_cbcb .B (),1);_gef .Stroke ();};case *_fc .PdfColorPattern :_gef .NewSubPath ();_gef .SetFillRule (_cec .FillRuleWinding );_gef .Fill ();_gef .StrokePattern ();};case "\u0062\u002a":_gef .ClosePath ();_bbff ,_dae :=_aec .ColorspaceNonStroking .ColorToRGB (_aec .ColorNonStroking );
if _dae !=nil {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dae );return _dae ;};switch _cdb :=_bbff .(type ){case *_fc .PdfColorDeviceRGB :_gef .SetRGBA (_cdb .R (),_cdb .G (),_cdb .B (),1);
_gef .NewSubPath ();_gef .SetFillRule (_cec .FillRuleEvenOdd );_gef .FillPreserve ();_bbff ,_dae =_aec .ColorspaceStroking .ColorToRGB (_aec .ColorStroking );if _dae !=nil {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dae );
return _dae ;};if _ecd ,_fae :=_bbff .(*_fc .PdfColorDeviceRGB );_fae {_gef .SetRGBA (_ecd .R (),_ecd .G (),_ecd .B (),1);_gef .Stroke ();};case *_fc .PdfColorPattern :_gef .NewSubPath ();_gef .SetFillRule (_cec .FillRuleEvenOdd );_gef .Fill ();_gef .StrokePattern ();
};case "\u006e":if _dga {_gef .SetFillRule (_agg );_gef .ClipPreserve ();_dga =false ;};_gef .ClearPath ();case "\u0057":_dga =true ;_agg =_cec .FillRuleWinding ;case "\u0057\u002a":_dga =true ;_agg =_cec .FillRuleEvenOdd ;case "\u0072\u0067":_aecf ,_ceg :=_aec .ColorNonStroking .(*_fc .PdfColorDeviceRGB );
if !_ceg {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_aec .ColorNonStroking );return nil ;};_gef .SetFillRGBA (_aecf .R (),_aecf .G (),_aecf .B (),1);
case "\u0052\u0047":_aabc ,_cda :=_aec .ColorStroking .(*_fc .PdfColorDeviceRGB );if !_cda {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_aec .ColorStroking );
return nil ;};_gef .SetStrokeRGBA (_aabc .R (),_aabc .G (),_aabc .B (),1);case "\u006b":_fdc ,_aeg :=_aec .ColorNonStroking .(*_fc .PdfColorDeviceCMYK );if !_aeg {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_aec .ColorNonStroking );
return nil ;};_cag ,_fgf :=_aec .ColorspaceNonStroking .ColorToRGB (_fdc );if _fgf !=nil {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_aec .ColorNonStroking );
return nil ;};_gaf ,_aeg :=_cag .(*_fc .PdfColorDeviceRGB );if !_aeg {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cag );return nil ;
};_gef .SetFillRGBA (_gaf .R (),_gaf .G (),_gaf .B (),1);case "\u004b":_ddee ,_cca :=_aec .ColorStroking .(*_fc .PdfColorDeviceCMYK );if !_cca {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_aec .ColorStroking );
return nil ;};_bac ,_fbfg :=_aec .ColorspaceStroking .ColorToRGB (_ddee );if _fbfg !=nil {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_aec .ColorStroking );
return nil ;};_ddg ,_cca :=_bac .(*_fc .PdfColorDeviceRGB );if !_cca {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bac );return nil ;
};_gef .SetStrokeRGBA (_ddg .R (),_ddg .G (),_ddg .B (),1);case "\u0067":_gbb ,_bbfg :=_aec .ColorNonStroking .(*_fc .PdfColorDeviceGray );if !_bbfg {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_aec .ColorNonStroking );
return nil ;};_gbd ,_caf :=_aec .ColorspaceNonStroking .ColorToRGB (_gbb );if _caf !=nil {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_aec .ColorNonStroking );
return nil ;};_fcf ,_bbfg :=_gbd .(*_fc .PdfColorDeviceRGB );if !_bbfg {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gbd );return nil ;
};_gef .SetFillRGBA (_fcf .R (),_fcf .G (),_fcf .B (),1);case "\u0047":_dbbc ,_ee :=_aec .ColorStroking .(*_fc .PdfColorDeviceGray );if !_ee {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_aec .ColorStroking );
return nil ;};_aff ,_cace :=_aec .ColorspaceStroking .ColorToRGB (_dbbc );if _cace !=nil {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_aec .ColorStroking );
return nil ;};_efff ,_ee :=_aff .(*_fc .PdfColorDeviceRGB );if !_ee {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_aff );return nil ;
};_gef .SetStrokeRGBA (_efff .R (),_efff .G (),_efff .B (),1);case "\u0063\u0073":if len (_cf .Params )> 0{if _faa ,_ffc :=_ga .GetName (_cf .Params [0]);_ffc &&_faa .String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e"{break ;};};_dbgb ,_age :=_aec .ColorspaceNonStroking .ColorToRGB (_aec .ColorNonStroking );
if _age !=nil {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_aec .ColorNonStroking );return nil ;};_cbg ,_dgdb :=_dbgb .(*_fc .PdfColorDeviceRGB );
if !_dgdb {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dbgb );return nil ;};_gef .SetFillRGBA (_cbg .R (),_cbg .G (),_cbg .B (),1);
case "\u0073\u0063":_dcd ,_ffa :=_aec .ColorspaceNonStroking .ColorToRGB (_aec .ColorNonStroking );if _ffa !=nil {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_aec .ColorNonStroking );
return nil ;};_baff ,_dcg :=_dcd .(*_fc .PdfColorDeviceRGB );if !_dcg {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dcd );return nil ;
};_gef .SetFillRGBA (_baff .R (),_baff .G (),_baff .B (),1);case "\u0073\u0063\u006e":if len (_cf .Params )> 0&&len (_agfc .Params )> 0{if _fba ,_aacg :=_ga .GetName (_agfc .Params [0]);_aacg &&_fba .String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e"{if _bacf ,_gaa :=_ga .GetName (_cf .Params [0]);
_gaa {_gbba ,_feb :=_fb .processGradient (_gef ,_cf ,_dde ,_bacf );if _feb !=nil {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0077\u0068\u0065\u006e\u0020\u0070\u0072o\u0063\u0065\u0073\u0073\u0069\u006eg\u0020\u0067\u0072\u0061\u0064\u0069\u0065\u006e\u0074\u0020\u0064\u0061\u0074a\u003a\u0020\u0025\u0076",_feb );
break ;};if _gbba ==nil {_eg .Log .Debug ("\u0055\u006ek\u006e\u006f\u0077n\u0020\u0067\u0072\u0061\u0064\u0069\u0065\u006e\u0074");break ;};_gef .SetFillStyle (_gbba );_gef .SetStrokeStyle (_gbba );break ;};};};_dba ,_fbc :=_aec .ColorspaceNonStroking .ColorToRGB (_aec .ColorNonStroking );
if _fbc !=nil {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_aec .ColorNonStroking );return nil ;};_dfge ,_cgdd :=_dba .(*_fc .PdfColorDeviceRGB );
if !_cgdd {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dba );return nil ;};_gef .SetFillRGBA (_dfge .R (),_dfge .G (),_dfge .B (),1);
case "\u0043\u0053":if len (_cf .Params )> 0{if _fcda ,_dfea :=_ga .GetName (_cf .Params [0]);_dfea &&_fcda .String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e"{break ;};};_gdg ,_gea :=_aec .ColorspaceStroking .ColorToRGB (_aec .ColorStroking );if _gea !=nil {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_aec .ColorStroking );
return nil ;};_cgg ,_cae :=_gdg .(*_fc .PdfColorDeviceRGB );if !_cae {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gdg );return nil ;
};_gef .SetStrokeRGBA (_cgg .R (),_cgg .G (),_cgg .B (),1);case "\u0053\u0043":_deb ,_aee :=_aec .ColorspaceStroking .ColorToRGB (_aec .ColorStroking );if _aee !=nil {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_aec .ColorStroking );
return nil ;};_dcb ,_fdab :=_deb .(*_fc .PdfColorDeviceRGB );if !_fdab {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_deb );return nil ;
};_gef .SetStrokeRGBA (_dcb .R (),_dcb .G (),_dcb .B (),1);case "\u0053\u0043\u004e":if len (_cf .Params )> 0&&len (_agfc .Params )> 0{if _gdbe ,_fbe :=_ga .GetName (_agfc .Params [0]);_fbe &&_gdbe .String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e"{if _acc ,_gbe :=_ga .GetName (_cf .Params [0]);
_gbe {_bdbf ,_bdbfe :=_fb .processGradient (_gef ,_cf ,_dde ,_acc );if _bdbfe !=nil {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0077\u0068\u0065\u006e\u0020\u0070\u0072o\u0063\u0065\u0073\u0073\u0069\u006eg\u0020\u0067\u0072\u0061\u0064\u0069\u0065\u006e\u0074\u0020\u0064\u0061\u0074a\u003a\u0020\u0025\u0076",_bdbfe );
break ;};if _bdbf ==nil {_eg .Log .Debug ("\u0055\u006ek\u006e\u006f\u0077n\u0020\u0067\u0072\u0061\u0064\u0069\u0065\u006e\u0074");break ;};_gef .SetFillStyle (_bdbf );_gef .SetStrokeStyle (_bdbf );break ;};};};_fga ,_aed :=_aec .ColorspaceStroking .ColorToRGB (_aec .ColorStroking );
if _aed !=nil {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_aec .ColorStroking );return nil ;};_daf ,_gefe :=_fga .(*_fc .PdfColorDeviceRGB );
if !_gefe {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fga );return nil ;};_gef .SetStrokeRGBA (_daf .R (),_daf .G (),_daf .B (),1);
case "\u0073\u0068":if len (_cf .Params )!=1{_eg .Log .Debug ("\u0049n\u0076\u0061\u006c\u0069\u0064\u0020\u0073\u0068\u0020\u0070\u0061r\u0061\u006d\u0073\u0020\u0066\u006f\u0072\u006d\u0061\u0074");break ;};_ad ,_fdbb :=_ga .GetName (_cf .Params [0]);
if !_fdbb {_eg .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020g\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0073\u0068a\u0064\u0069\u006eg\u0020n\u0061\u006d\u0065");break ;};_ceb ,_fdbb :=_dde .GetShadingByName (*_ad );if !_fdbb {_eg .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020g\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0073\u0068a\u0064\u0069\u006eg\u0020d\u0061\u0074\u0061");
break ;};_fab ,_egcc ,_aeca :=_fb .processShading (_gef ,_ceb );if _aeca !=nil {_eg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0077\u0068\u0065\u006e\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0073\u0068a\u0064\u0069\u006e\u0067\u0020d\u0061\u0074a\u003a\u0020\u0025\u0076",_aeca );
break ;};if _fab ==nil {_eg .Log .Debug ("\u0055\u006ek\u006e\u006f\u0077n\u0020\u0067\u0072\u0061\u0064\u0069\u0065\u006e\u0074");break ;};_cff ,_aeca :=_egcc .ToFloat64Array ();if _aeca !=nil {_eg .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073: \u0025\u0076",_aeca );
break ;};_gef .DrawRectangle (_cff [0],_cff [1],_cff [2],_cff [3]);_gef .NewSubPath ();_gef .SetFillStyle (_fab );_gef .SetStrokeStyle (_fab );_gef .Fill ();case "\u0044\u006f":if len (_cf .Params )!=1{return _ggd ;};_aeb ,_bdbfb :=_ga .GetName (_cf .Params [0]);
if !_bdbfb {return _cga ;};_ ,_fgb :=_dde .GetXObjectByName (*_aeb );switch _fgb {case _fc .XObjectTypeImage :_eg .Log .Debug ("\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u0069\u006d\u0061\u0067e\u003a\u0020\u0025\u0073",_aeb .String ());_eeg ,_afef :=_dde .GetXObjectImageByName (*_aeb );
if _afef !=nil {return _afef ;};_eaaf ,_afef :=_eeg .ToImage ();if _afef !=nil {_eg .Log .Debug ("\u0052\u0065\u006e\u0064\u0065\u0072\u0069\u006e\u0067\u0020\u0072\u0065\u0073\u0075\u006c\u0074\u0020\u006day\u0020b\u0065\u0020\u0069\u006e\u0063\u006f\u006d\u0070\u006c\u0065\u0074\u0065.\u0020\u0049\u006d\u0061\u0067\u0065\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0073\u0069\u006f\u006e \u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0076",_afef );
return nil ;};if _bgd :=_eeg .ColorSpace ;_bgd !=nil {var _dab bool ;switch _bgd .(type ){case *_fc .PdfColorspaceSpecialIndexed :_dab =true ;};if _dab {if _cea ,_fcfc :=_bgd .ImageToRGB (*_eaaf );_fcfc !=nil {_eg .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0063\u006fnv\u0065r\u0074\u0020\u0069\u006d\u0061\u0067\u0065\u0020\u0074\u006f\u0020\u0052G\u0042\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020i\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u002e");
}else {_eaaf =&_cea ;};};};_gefg :=_gef .FillPattern ().ColorAt (0,0);var _agfd _ca .Image ;if _eeg .Mask !=nil {if _agfd ,_afef =_afed (_eeg .Mask ,_gefg );_afef !=nil {_eg .Log .Debug ("\u0057\u0041\u0052\u004e\u003a \u0063\u006f\u0075\u006c\u0064 \u006eo\u0074\u0020\u0067\u0065\u0074\u0020\u0065\u0078\u0070\u006c\u0069\u0063\u0069\u0074\u0020\u0069\u006d\u0061\u0067e\u0020\u006d\u0061\u0073\u006b\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e");
_agfd =nil ;};}else if _eeg .SMask !=nil {if _agfd ,_afef =_gfd (_eeg .SMask );_afef !=nil {_eg .Log .Debug ("W\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0067\u0065\u0074\u0020\u0073\u006f\u0066\u0074\u0020\u0069\u006da\u0067e\u0020\u006d\u0061\u0073k\u002e\u0020O\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u002e");
_agfd =nil ;};};var _ccc _ca .Image ;if _efd ,_ :=_ga .GetBoolVal (_eeg .ImageMask );_efd {_ccc =_acba (_eaaf ,_gefg );}else {_ccc ,_afef =_eaaf .ToGoImage ();if _afef !=nil {_eg .Log .Debug ("\u0052\u0065\u006e\u0064\u0065\u0072\u0069\u006e\u0067\u0020\u0072\u0065\u0073\u0075\u006c\u0074\u0020\u006day\u0020b\u0065\u0020\u0069\u006e\u0063\u006f\u006d\u0070\u006c\u0065\u0074\u0065.\u0020\u0049\u006d\u0061\u0067\u0065\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0073\u0069\u006f\u006e \u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0076",_afef );
return nil ;};};if _agfd !=nil {var _aeea _cd .Interpolator =_cd .BiLinear ;if _cacf ,_fbbf :=_gef .(*_df .Context );_fbbf {_aeea =_cacf .Interpolator ();};_ccc =_adgb (_ccc ,_agfd ,_aeea );};_fcg :=_ccc .Bounds ();_gef .Push ();_gef .Scale (1.0/float64 (_fcg .Dx ()),-1.0/float64 (_fcg .Dy ()));
_gef .DrawImageAnchored (_ccc ,0,0,0,1);_gef .Pop ();case _fc .XObjectTypeForm :_eg .Log .Debug ("\u0058\u004fb\u006a\u0065\u0063t\u0020\u0066\u006f\u0072\u006d\u003a\u0020\u0025\u0073",_aeb .String ());_aea ,_eda :=_dde .GetXObjectFormByName (*_aeb );
if _eda !=nil {return _eda ;};_ccab ,_eda :=_aea .GetContentStream ();if _eda !=nil {return _eda ;};_dgg :=_aea .Resources ;if _dgg ==nil {_dgg =_dde ;};_gef .Push ();if _aea .Matrix !=nil {_dgae ,_bdad :=_ga .GetArray (_aea .Matrix );if !_bdad {return _cga ;
};_abcg ,_geae :=_ga .GetNumbersAsFloat (_dgae .Elements ());if _geae !=nil {return _geae ;};if len (_abcg )!=6{return _ggd ;};_bfg :=_bg .NewMatrix (_abcg [0],_abcg [1],_abcg [2],_abcg [3],_abcg [4],_abcg [5]);_gef .SetMatrix (_gef .Matrix ().Mult (_bfg ));
};if _aea .BBox !=nil {_fdgd ,_dfgeg :=_ga .GetArray (_aea .BBox );if !_dfgeg {return _cga ;};_fcgc ,_eed :=_ga .GetNumbersAsFloat (_fdgd .Elements ());if _eed !=nil {return _eed ;};if len (_fcgc )!=4{_eg .Log .Debug ("\u004c\u0065\u006e\u0020\u003d\u0020\u0025\u0064",len (_fcgc ));
return _ggd ;};_gef .DrawRectangle (_fcgc [0],_fcgc [1],_fcgc [2]-_fcgc [0],_fcgc [3]-_fcgc [1]);_gef .SetRGBA (1,0,0,1);_gef .Clip ();}else {_eg .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0052\u0065q\u0075\u0069\u0072e\u0064\u0020\u0042\u0042\u006f\u0078\u0020\u006d\u0069ss\u0069\u006e\u0067 \u006f\u006e \u0058\u004f\u0062\u006a\u0065\u0063t\u0020\u0046o\u0072\u006d");
};_eda =_fb .renderContentStream (_gef ,string (_ccab ),_dgg );if _eda !=nil {return _eda ;};_gef .Pop ();};case "\u0042\u0049":if len (_cf .Params )!=1{return _ggd ;};_aca ,_bfb :=_cf .Params [0].(*_bf .ContentStreamInlineImage );if !_bfb {return nil ;
};_cfed ,_aedc :=_aca .ToImage (_dde );if _aedc !=nil {_eg .Log .Debug ("\u0052\u0065\u006e\u0064\u0065\u0072\u0069\u006e\u0067\u0020\u0072\u0065\u0073\u0075\u006c\u0074\u0020\u006day\u0020b\u0065\u0020\u0069\u006e\u0063\u006f\u006d\u0070\u006c\u0065\u0074\u0065.\u0020\u0049\u006d\u0061\u0067\u0065\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0073\u0069\u006f\u006e \u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0076",_aedc );
return nil ;};_dac ,_aedc :=_cfed .ToGoImage ();if _aedc !=nil {_eg .Log .Debug ("\u0052\u0065\u006e\u0064\u0065\u0072\u0069\u006e\u0067\u0020\u0072\u0065\u0073\u0075\u006c\u0074\u0020\u006day\u0020b\u0065\u0020\u0069\u006e\u0063\u006f\u006d\u0070\u006c\u0065\u0074\u0065.\u0020\u0049\u006d\u0061\u0067\u0065\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0073\u0069\u006f\u006e \u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0076",_aedc );
return nil ;};_gefa :=_dac .Bounds ();_gef .Push ();_gef .Scale (1.0/float64 (_gefa .Dx ()),-1.0/float64 (_gefa .Dy ()));_gef .DrawImageAnchored (_dac ,0,0,0,1);_gef .Pop ();case "\u0042\u0054":_fcca .Reset ();case "\u0045\u0054":_fcca .Reset ();case "\u0054\u0072":if len (_cf .Params )!=1{return _ggd ;
};_cffa ,_faef :=_ga .GetNumberAsFloat (_cf .Params [0]);if _faef !=nil {return _faef ;};_fcca .Tr =_cec .TextRenderingMode (_cffa );case "\u0054\u004c":if len (_cf .Params )!=1{return _ggd ;};_bfe ,_acb :=_ga .GetNumberAsFloat (_cf .Params [0]);if _acb !=nil {return _acb ;
};_fcca .Tl =_bfe ;case "\u0054\u0063":if len (_cf .Params )!=1{return _ggd ;};_ddf ,_accc :=_ga .GetNumberAsFloat (_cf .Params [0]);if _accc !=nil {return _accc ;};_eg .Log .Debug ("\u0054\u0063\u003a\u0020\u0025\u0076",_ddf );_fcca .Tc =_ddf ;case "\u0054\u0077":if len (_cf .Params )!=1{return _ggd ;
};_bae ,_cacd :=_ga .GetNumberAsFloat (_cf .Params [0]);if _cacd !=nil {return _cacd ;};_eg .Log .Debug ("\u0054\u0077\u003a\u0020\u0025\u0076",_bae );_fcca .Tw =_bae ;case "\u0054\u007a":if len (_cf .Params )!=1{return _ggd ;};_eab ,_bdg :=_ga .GetNumberAsFloat (_cf .Params [0]);
if _bdg !=nil {return _bdg ;};_fcca .Th =_eab ;case "\u0054\u0073":if len (_cf .Params )!=1{return _ggd ;};_abg ,_fea :=_ga .GetNumberAsFloat (_cf .Params [0]);if _fea !=nil {return _fea ;};_fcca .Ts =_abg ;case "\u0054\u0064":if len (_cf .Params )!=2{return _ggd ;
};_bcf ,_gbg :=_ga .GetNumbersAsFloat (_cf .Params );if _gbg !=nil {return _gbg ;};_eg .Log .Debug ("\u0054\u0064\u003a\u0020\u0025\u0076",_bcf );_fcca .ProcTd (_bcf [0],_bcf [1]);case "\u0054\u0044":if len (_cf .Params )!=2{return _ggd ;};_cdfc ,_fde :=_ga .GetNumbersAsFloat (_cf .Params );
if _fde !=nil {return _fde ;};_eg .Log .Debug ("\u0054\u0044\u003a\u0020\u0025\u0076",_cdfc );_fcca .ProcTD (_cdfc [0],_cdfc [1]);case "\u0054\u002a":_fcca .ProcTStar ();case "\u0054\u006d":if len (_cf .Params )!=6{return _ggd ;};_ddbc ,_abad :=_ga .GetNumbersAsFloat (_cf .Params );
if _abad !=nil {return _abad ;};_eg .Log .Debug ("\u0054\u0065x\u0074\u0020\u006da\u0074\u0072\u0069\u0078\u003a\u0020\u0025\u002b\u0076",_ddbc );_fcca .ProcTm (_ddbc [0],_ddbc [1],_ddbc [2],_ddbc [3],_ddbc [4],_ddbc [5]);case "\u0027":if len (_cf .Params )!=1{return _ggd ;
};_dcbe ,_dfd :=_ga .GetStringBytes (_cf .Params [0]);if !_dfd {return _cga ;};_eg .Log .Debug ("\u0027\u0020\u0073t\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_dcbe ));_fcca .ProcQ (_dcbe ,_gef );case "\u0022":if len (_cf .Params )!=3{return _ggd ;
};_caeb ,_aead :=_ga .GetNumberAsFloat (_cf .Params [0]);if _aead !=nil {return _aead ;};_bafg ,_aead :=_ga .GetNumberAsFloat (_cf .Params [1]);if _aead !=nil {return _aead ;};_dcf ,_dec :=_ga .GetStringBytes (_cf .Params [2]);if !_dec {return _cga ;};
_fcca .ProcDQ (_dcf ,_caeb ,_bafg ,_gef );case "\u0054\u006a":if len (_cf .Params )!=1{return _ggd ;};_eac ,_ccd :=_ga .GetStringBytes (_cf .Params [0]);if !_ccd {return _cga ;};_eg .Log .Debug ("\u0054j\u0020s\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0060\u0025\u0073\u0060",string (_eac ));
_fcca .ProcTj (_eac ,_gef );case "\u0054\u004a":if len (_cf .Params )!=1{return _ggd ;};_dabd ,_fef :=_ga .GetArray (_cf .Params [0]);if !_fef {_eg .Log .Debug ("\u0054\u0079\u0070\u0065\u003a\u0020\u0025\u0054",_dabd );return _cga ;};_eg .Log .Debug ("\u0054\u004a\u0020\u0061\u0072\u0072\u0061\u0079\u003a\u0020\u0025\u002b\u0076",_dabd );
for _ ,_edg :=range _dabd .Elements (){switch _cba :=_edg .(type ){case *_ga .PdfObjectString :if _cba !=nil {_fcca .ProcTj (_cba .Bytes (),_gef );};case *_ga .PdfObjectFloat ,*_ga .PdfObjectInteger :_decc ,_aef :=_ga .GetNumberAsFloat (_cba );if _aef ==nil {_fcca .Translate (-_decc *0.001*_fcca .Tf .Size *_fcca .Th /100.0,0);
};};};case "\u0054\u0066":if len (_cf .Params )!=2{return _ggd ;};_eg .Log .Debug ("\u0025\u0023\u0076",_cf .Params );_afg ,_ccdf :=_ga .GetName (_cf .Params [0]);if !_ccdf ||_afg ==nil {_eg .Log .Debug ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0066\u006f\u006e\u0074\u0020\u006e\u0061m\u0065 \u006f\u0062\u006a\u0065\u0063\u0074\u003a \u0025\u0076",_cf .Params [0]);
return _cga ;};_eg .Log .Debug ("\u0046\u006f\u006e\u0074\u0020\u006e\u0061\u006d\u0065\u003a\u0020\u0025\u0073",_afg .String ());_eeb ,_cdc :=_ga .GetNumberAsFloat (_cf .Params [1]);if _cdc !=nil {_eg .Log .Debug ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0069z\u0065 \u006f\u0062\u006a\u0065\u0063\u0074\u003a \u0025\u0076",_cf .Params [1]);
return _cga ;};_fgac :=_gef .Width ();if _gef .Height ()> _fgac {_fgac =_gef .Height ();};_cecg :=float64 (_fgac );if _eeb > _cecg {_eg .Log .Debug ("\u0046\u006f\u006e\u0074\u0020\u0073\u0069\u007a\u0065 \u0065\u0078\u0063\u0065\u0065\u0064\u0073\u0020\u0069\u006d\u0061\u0067\u0065\u0020\u0064\u0069\u006d\u0065\u006e\u0073\u0069\u006f\u006e,\u0020\u0073c\u0061\u006ci\u006e\u0067\u0020\u0064\u006f\u0077\u006e\u0020\u0066\u006f\u006e\u0074\u0020si\u007a\u0065\u0020\u0066\u0072\u006f\u006d\u0020\u0025v\u0020\u0074\u006f\u0020\u0025\u0076",_eeb ,_cecg );
_eeb =_cecg ;};_eg .Log .Debug ("\u0046\u006f\u006e\u0074\u0020\u0073\u0069\u007a\u0065\u003a\u0020\u0025\u0076",_eeb );_baba ,_dgc :=_dde .GetFontByName (*_afg );if !_dgc {_eg .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0046\u006f\u006e\u0074\u0020\u0025s\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064",_afg .String ());
return _c .New ("\u0066\u006f\u006e\u0074\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};_eg .Log .Debug ("\u0046\u006f\u006e\u0074\u003a\u0020\u0025\u0054",_baba );_cbf ,_ccdf :=_ga .GetDict (_baba );if !_ccdf {_eg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075l\u0064\u0020\u006e\u006f\u0074\u0020\u0067e\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0069\u0063\u0074");
return _cga ;};_dbc ,_cdc :=_fc .NewPdfFontFromPdfObject (_cbf );if _cdc !=nil {_eg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u006c\u006f\u0061\u0064\u0020\u0066\u006fn\u0074\u0020\u0066\u0072\u006fm\u0020\u006fb\u006a\u0065\u0063\u0074");
return _cdc ;};_be :=_dbc .BaseFont ();if _be ==""{_be =_afg .String ();};_efg ,_ccdf :=_fb ._bba [_be ];if !_ccdf {_efg ,_cdc =_cec .NewTextFont (_dbc ,_eeb );if _cdc !=nil {_eg .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_cdc );};};if _efg ==nil {if len (_be )> 7&&_be [6]=='+'{_be =_be [7:];
};_fbd :=[]string {_be ,"\u0054i\u006de\u0073\u0020\u004e\u0065\u0077\u0020\u0052\u006f\u006d\u0061\u006e","\u0041\u0072\u0069a\u006c","D\u0065\u006a\u0061\u0056\u0075\u0020\u0053\u0061\u006e\u0073"};for _ ,_eef :=range _fbd {_eg .Log .Debug ("\u0044\u0045\u0042\u0055\u0047\u003a \u0073\u0065\u0061\u0072\u0063\u0068\u0069\u006e\u0067\u0020\u0073\u0079\u0073t\u0065\u006d\u0020\u0066\u006f\u006e\u0074 \u0060\u0025\u0073\u0060",_eef );
if _efg ,_ccdf =_fb ._bba [_eef ];_ccdf {if _efg ==nil {continue ;};break ;};_ddgb :=_fb ._agf .Match (_eef );if _ddgb ==nil {_eg .Log .Debug ("c\u006f\u0075\u006c\u0064\u0020\u006eo\u0074\u0020\u0066\u0069\u006e\u0064\u0020\u0066\u006fn\u0074\u0020\u0066i\u006ce\u0020\u0025\u0073",_eef );
continue ;};if _gbfe ,_bce :=_fb ._dfgf [_ddgb .Filename ];_bce {_efg =_gbfe ;}else {_efg ,_cdc =_cec .NewTextFontFromPath (_ddgb .Filename ,_eeb );if _cdc !=nil {_eg .Log .Debug ("c\u006f\u0075\u006c\u0064\u0020\u006eo\u0074\u0020\u006c\u006f\u0061\u0064\u0020\u0066\u006fn\u0074\u0020\u0066i\u006ce\u0020\u0025\u0073",_ddgb .Filename );
_fb ._bba [_eef ]=nil ;continue ;};_fb ._dfgf [_ddgb .Filename ]=_efg ;};_eg .Log .Debug ("\u0053\u0075\u0062\u0073\u0074\u0069t\u0075\u0074\u0069\u006e\u0067\u0020\u0066\u006f\u006e\u0074\u0020\u0025\u0073 \u0077\u0069\u0074\u0068\u0020\u0025\u0073 \u0028\u0025\u0073\u0029",_be ,_ddgb .Name ,_ddgb .Filename );
_fb ._bba [_eef ]=_efg ;break ;};};if _efg ==nil {_eg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020n\u006f\u0074\u0020\u0066\u0069\u006ed\u0020\u0061\u006e\u0079\u0020\u0073\u0075\u0069\u0074\u0061\u0062\u006c\u0065 \u0066\u006f\u006e\u0074");
return _c .New ("\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0066\u0069\u006e\u0064\u0020a\u006ey\u0020\u0073\u0075\u0069\u0074\u0061\u0062\u006c\u0065\u0020\u0066\u006f\u006e\u0074");};_fcca .ProcTf (_efg .WithSize (_eeb ,_dbc ));case "\u0042\u004d\u0043","\u0042\u0044\u0043":if len (_cf .Params )==2&&_cf .Params [0].String ()=="\u0041\u0072\u0074\u0069\u0066\u0061\u0063\u0074"{_afa ,_cegb :=_ga .GetDict (_cf .Params [1]);
if _cegb {if _afa .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065")!=nil &&_afa .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065").String ()=="\u0057a\u0074\u0065\u0072\u006d\u0061\u0072k"{_fcca .Tr =_cec .TextRenderingModeInvisible ;};};};case "\u0045\u004d\u0043":default:_eg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0073u\u0070\u0070\u006f\u0072\u0074\u0065\u0064 \u006f\u0070\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u0073",_cf .Operand );
};_agfc =_cf ;return nil ;});_geda =_gdd .Process (_gdb );if _geda !=nil {return _geda ;};return nil ;};func (_ada *renderer )processRadialShading (_ded _cec .Context ,_egaf *_fc .PdfShading )(_cec .Gradient ,*_ga .PdfObjectArray ,error ){_abf :=_egaf .GetContext ().(*_fc .PdfShadingType3 );
if len (_abf .Function )==0{return nil ,nil ,_c .New ("\u006e\u006f\u0020\u0067\u0072\u0061\u0064i\u0065\u006e\u0074 \u0066\u0075\u006e\u0063t\u0069\u006f\u006e\u0020\u0066\u006f\u0075\u006e\u0064\u002c\u0020\u0073\u006b\u0069\u0070\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0073\u0069\u006f\u006e");
};_ecg ,_dee :=_abf .Coords .ToFloat64Array ();if _dee !=nil {return nil ,nil ,_c .New ("\u0066\u0061\u0069l\u0065\u0064\u0020\u0067e\u0074\u0074\u0069\u006e\u0067\u0020\u0073h\u0061\u0064\u0069\u006e\u0067\u0020\u0070\u006f\u0073\u0069\u0074\u0069\u006f\u006e");
};_cfef :=_egaf .ColorSpace ;_fcdb :=_ga .MakeArrayFromFloats ([]float64 {0,0,1,1});var _fbg ,_gab ,_adab ,_feda ,_ace ,_bdec float64 ;_fbg ,_gab =_ded .Matrix ().Transform (_ecg [0],_ecg [1]);_adab ,_feda =_ded .Matrix ().Transform (_ecg [3],_ecg [4]);
_ace ,_ =_ded .Matrix ().Transform (_ecg [2],0);_bdec ,_ =_ded .Matrix ().Transform (_ecg [5],0);_cab ,_ :=_ded .Matrix ().Translation ();_ace -=_cab ;_bdec -=_cab ;for _daeg ,_eaf :=range _ecg {if _daeg ==2||_daeg ==5{continue ;};if _eaf > 1.0{_bad :=_cg .Min (_fbg -_ace ,_adab -_bdec );
_fbfge :=_cg .Min (_gab -_ace ,_feda -_bdec );_ebc :=_cg .Max (_fbg +_ace ,_adab +_bdec );_afgb :=_cg .Max (_gab +_ace ,_feda +_bdec );_ddbb :=_ebc -_bad ;_cbca :=_fbfge -_afgb ;_fcdb =_ga .MakeArrayFromFloats ([]float64 {_bad ,_fbfge ,_ddbb ,_cbca });
break ;};};_fgg :=_df .NewRadialGradient (_fbg ,_gab ,_ace ,_adab ,_feda ,_bdec );if _agec ,_dfdb :=_abf .Function [0].(*_fc .PdfFunctionType2 );_dfdb {_fgg ,_dee =_cfg (_fgg ,_agec ,_cfef ,1.0,true );}else if _fgc ,_dccb :=_abf .Function [0].(*_fc .PdfFunctionType3 );
_dccb {_fee :=append ([]float64 {0},_fgc .Bounds ...);_fee =append (_fee ,1.0);_fgg ,_dee =_bcfa (_fgg ,_fgc ,_cfef ,_fee );};if _dee !=nil {return nil ,nil ,_dee ;};return _fgg ,_fcdb ,nil ;};

// SetInterpolator sets the interpolation algorithm to use for image scaling and transformations.
// The interpolator determines the quality of image scaling. Available interpolators from
// golang.org/x/image/draw include:
//   - draw.NearestNeighbor (fastest, lowest quality)
//   - draw.ApproxBiLinear (fast, good quality)
//   - draw.BiLinear (balanced, default)
//   - draw.CatmullRom (high quality, slower)
func (_gb *ImageDevice )SetInterpolator (interpolator _cd .Interpolator ){_gb ._bb =interpolator };

// Render converts the specified PDF page into an image, flattens annotations by default and returns the result.
func (_gc *ImageDevice )Render (page *_fc .PdfPage )(_ca .Image ,error ){return _gc .RenderWithOpts (page ,false );};func _gfd (_bef _ga .PdfObject )(_ca .Image ,error ){_fec ,_fdfc :=_ga .GetStream (_bef );if !_fdfc {return nil ,nil ;};_gad ,_fdae :=_fc .NewXObjectImageFromStream (_fec );
if _fdae !=nil {return nil ,_fdae ;};_dfcd ,_fdae :=_gad .ToImage ();if _fdae !=nil {return nil ,_fdae ;};if _dfcd .Width ==0||_dfcd .Height ==0{_eg .Log .Debug ("\u0073o\u0066t\u0020\u006d\u0061\u0073\u006b\u0020\u0069\u006d\u0061\u0067\u0065 \u0068\u0061\u0073\u0020i\u006e\u0076\u0061\u006c\u0069d\u0020\u0064\u0069\u006d\u0065\u006e\u0073\u0069\u006f\u006e\u0073\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061y\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006fr\u0072\u0065\u0063\u0074\u002e",_dfcd .Width ,_dfcd .Height );
return nil ,nil ;};return _ebee (_dfcd ),nil ;};func (_bda *renderer )renderPage (_ba _cec .Context ,_da *_fc .PdfPage ,_ec _bg .Matrix ,_ea bool )error {if !_ea {_bbd :=_fc .FieldFlattenOpts {AnnotFilterFunc :func (_egc *_fc .PdfAnnotation )bool {switch _egc .GetContext ().(type ){case *_fc .PdfAnnotationLine :return true ;
case *_fc .PdfAnnotationSquare :return true ;case *_fc .PdfAnnotationCircle :return true ;case *_fc .PdfAnnotationPolygon :return true ;case *_fc .PdfAnnotationPolyLine :return true ;};return false ;}};_eff :=_db .FieldAppearance {};_fe :=_da .FlattenFieldsWithOpts (_eff ,&_bbd );
if _fe !=nil {_eg .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0064u\u0072\u0069n\u0067\u0020\u0061\u006e\u006e\u006f\u0074\u0061t\u0069\u006f\u006e\u0020\u0066\u006c\u0061\u0074\u0074\u0065\u006e\u0069n\u0067\u0020\u0025\u0076",_fe );};};_dfe ,_cge :=_da .GetAllContentStreams ();
if _cge !=nil {return _cge ;};if _ged :=_ec ;!_ged .Identity (){_dfe =_e .Sprintf ("%\u002e\u0032\u0066\u0020\u0025\u002e2\u0066\u0020\u0025\u002e\u0032\u0066 \u0025\u002e\u0032\u0066\u0020\u0025\u002e2\u0066\u0020\u0025\u002e\u0032\u0066\u0020\u0063\u006d\u0020%\u0073",_ged [0],_ged [1],_ged [3],_ged [4],_ged [6],_ged [7],_dfe );
};_ba .Translate (0,float64 (_ba .Height ()));_ba .Scale (1,-1);_ba .Push ();_ba .SetRGBA (1,1,1,1);_ba .DrawRectangle (0,0,float64 (_ba .Width ()),float64 (_ba .Height ()));_ba .Fill ();_ba .Pop ();_ba .SetLineWidth (1.0);_ba .SetRGBA (0,0,0,1);return _bda .renderContentStream (_ba ,_dfe ,_da .Resources );
};

// RenderToPath converts the specified PDF page into an image and saves the
// result at the specified location.
func (_eba *ImageDevice )RenderToPath (page *_fc .PdfPage ,outputPath string )error {_aad ,_cac :=_eba .Render (page );if _cac !=nil {return _cac ;};_dc :=_ce .ToLower (_f .Ext (outputPath ));if _dc ==""{return _c .New ("\u0063\u006ful\u0064\u0020\u006eo\u0074\u0020\u0072\u0065cog\u006eiz\u0065\u0020\u006f\u0075\u0074\u0070\u0075t \u0066\u0069\u006c\u0065\u0020\u0074\u0079p\u0065");
};switch _dc {case "\u002e\u0070\u006e\u0067":return _fdabb (outputPath ,_aad );case "\u002e\u006a\u0070\u0067","\u002e\u006a\u0070e\u0067":return _aabg (outputPath ,_aad ,100);};return _e .Errorf ("\u0075\u006e\u0072\u0065\u0063\u006fg\u006e\u0069\u007a\u0065\u0064\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020f\u0069\u006c\u0065\u0020\u0074\u0079\u0070e\u003a\u0020\u0025\u0073",_dc );
};func (_cgaf *renderer )processGradient (_aggg _cec .Context ,_cde *_bf .ContentStreamOperation ,_adg *_fc .PdfPageResources ,_gefed *_ga .PdfObjectName )(_cec .Gradient ,error ){if _faab ,_cdfd :=_adg .GetPatternByName (*_gefed );_cdfd &&_faab .IsShading (){_bdeg :=_faab .GetAsShadingPattern ().Shading ;
_dccd ,_ ,_fefg :=_cgaf .processShading (_aggg ,_bdeg );if _fefg !=nil {return nil ,_fefg ;};return _dccd ,nil ;};return nil ,nil ;};func _beca (_cgea ,_gec ,_ddgg float64 )_ag .BoundingBox {return _ag .Path {Points :[]_ag .Point {_ag .NewPoint (0,0).Rotate (_ddgg ),_ag .NewPoint (_cgea ,0).Rotate (_ddgg ),_ag .NewPoint (0,_gec ).Rotate (_ddgg ),_ag .NewPoint (_cgea ,_gec ).Rotate (_ddgg )}}.GetBoundingBox ();
};func (_decd *renderer )processShading (_ggc _cec .Context ,_bcb *_fc .PdfShading )(_cec .Gradient ,*_ga .PdfObjectArray ,error ){_gfc :=int64 (*_bcb .ShadingType );if _gfc ==int64 (ShadingTypeAxial ){return _decd .processLinearShading (_ggc ,_bcb );}else if _gfc ==int64 (ShadingTypeRadial ){return _decd .processRadialShading (_ggc ,_bcb );
}else {_eg .Log .Debug (_e .Sprintf ("\u0050r\u006f\u0063e\u0073\u0073\u0069n\u0067\u0020\u0067\u0072\u0061\u0064\u0069e\u006e\u0074\u0020\u0074\u0079\u0070e\u0020\u0025\u0064\u0020\u006e\u006f\u0074\u0020\u0079\u0065\u0074 \u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0065\u0064",_gfc ));
};return nil ,nil ,nil ;};func _ebee (_ecbf *_fc .Image )_ca .Image {_eegc ,_gcf :=int (_ecbf .Width ),int (_ecbf .Height );if _eegc <=0||_gcf <=0{_eg .Log .Debug ("\u0069\u006e\u0076\u0061\u006c\u0069d\u0020\u0069\u006d\u0061\u0067\u0065\u0020\u0064\u0069\u006d\u0065\u006e\u0073i\u006f\u006e\u0073\u0020\u0028\u0025\u0064,\u0020\u0025\u0064\u0029",_eegc ,_gcf );
return nil ;};_efb :=_ca .NewRGBA (_ca .Rect (0,0,_eegc ,_gcf ));for _afgc :=0;_afgc < _gcf ;_afgc ++{for _dgda :=0;_dgda < _eegc ;_dgda ++{_fgbb ,_cdag :=_ecbf .ColorAt (_dgda ,_afgc );if _cdag !=nil {_eg .Log .Debug ("\u0063o\u0075l\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069e\u0076\u0065\u0020\u0069m\u0061\u0067\u0065\u0020\u006da\u0073\u006b\u0020\u0076\u0061\u006c\u0075\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061y\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006fr\u0072\u0065\u0063\u0074\u002e",_dgda ,_afgc );
continue ;};_ebbg ,_afd ,_afdf ,_ :=_fgbb .RGBA ();var _cbbf _fd .Color ;if _ebbg +_afd +_afdf ==0{_cbbf =_fd .Transparent ;}else {_gafg :=uint8 (_ga .RGBToGrayscale (int (_ebbg >>8),int (_afd >>8),int (_afdf >>8)));_cbbf =_fd .RGBA {R :255,G :255,B :255,A :_gafg };
};_efb .Set (_dgda ,_afgc ,_cbbf );};};return _efb ;};func (_ffg *renderer )processLinearShading (_bfdb _cec .Context ,_gbdc *_fc .PdfShading )(_cec .Gradient ,*_ga .PdfObjectArray ,error ){_geag :=_gbdc .GetContext ().(*_fc .PdfShadingType2 );if len (_geag .Function )==0{return nil ,nil ,_c .New ("\u006e\u006f\u0020\u0067\u0072\u0061\u0064i\u0065\u006e\u0074 \u0066\u0075\u006e\u0063t\u0069\u006f\u006e\u0020\u0066\u006f\u0075\u006e\u0064\u002c\u0020\u0073\u006b\u0069\u0070\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0073\u0069\u006f\u006e");
};_bga ,_dggg :=_geag .Coords .ToFloat64Array ();if _dggg !=nil {return nil ,nil ,_c .New ("\u0066\u0061\u0069l\u0065\u0064\u0020\u0067e\u0074\u0074\u0069\u006e\u0067\u0020\u0073h\u0061\u0064\u0069\u006e\u0067\u0020\u0070\u006f\u0073\u0069\u0074\u0069\u006f\u006e");
};_bgb :=_gbdc .ColorSpace ;_abb ,_dbaf :=_bfdb .Matrix ().Transform (_bga [0],_bga [1]);_ccdg ,_fdge :=_bfdb .Matrix ().Transform (_bga [2],_bga [3]);_geba :=_df .NewLinearGradient (_abb ,_dbaf ,_ccdg ,_fdge );_febf :=_ga .MakeArrayFromFloats ([]float64 {0,0,1,1});
for _ ,_fed :=range _bga {if _fed > 1{_febf =_geag .Coords ;break ;};};if _beb ,_caag :=_geag .Function [0].(*_fc .PdfFunctionType2 );_caag {_geba ,_dggg =_cfg (_geba ,_beb ,_bgb ,1.0,true );}else if _bedd ,_efa :=_geag .Function [0].(*_fc .PdfFunctionType3 );
_efa {_def :=append ([]float64 {0},_bedd .Bounds ...);_def =append (_def ,1.0);_geba ,_dggg =_bcfa (_geba ,_bedd ,_bgb ,_def );};return _geba ,_febf ,_dggg ;};func _bcfa (_dfdc _cec .Gradient ,_cebd *_fc .PdfFunctionType3 ,_ccae _fc .PdfColorspace ,_geagb []float64 )(_cec .Gradient ,error ){var _aefa error ;
for _fbec :=0;_fbec < len (_cebd .Functions );_fbec ++{if _ecb ,_badd :=_cebd .Functions [_fbec ].(*_fc .PdfFunctionType2 );_badd {_dfdc ,_aefa =_cfg (_dfdc ,_ecb ,_ccae ,_geagb [_fbec +1],_fbec ==0);if _aefa !=nil {return nil ,_aefa ;};};};return _dfdc ,nil ;
};var (_cga =_c .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");_ggd =_c .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););const (ShadingTypeFunctionBased PdfShadingType =1;
ShadingTypeAxial PdfShadingType =2;ShadingTypeRadial PdfShadingType =3;ShadingTypeFreeForm PdfShadingType =4;ShadingTypeLatticeForm PdfShadingType =5;ShadingTypeCoons PdfShadingType =6;ShadingTypeTensorProduct PdfShadingType =7;);func _cfg (_cfb _cec .Gradient ,_fggf *_fc .PdfFunctionType2 ,_dbf _fc .PdfColorspace ,_ccg float64 ,_eebb bool )(_cec .Gradient ,error ){switch _dbf .(type ){case *_fc .PdfColorspaceDeviceRGB :if len (_fggf .C0 )!=3||len (_fggf .C1 )!=3{return nil ,_c .New ("\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u0020\u0052\u0047\u0042\u0020\u0063o\u006co\u0072\u0020\u0061\u0072\u0072\u0061\u0079\u0020\u006c\u0065\u006e\u0067\u0074\u0068");
};_adf :=_fggf .C0 ;_efab :=_fggf .C1 ;if _eebb {_cfb .AddColorStop (0.0,_fd .RGBA {R :uint8 (_adf [0]*255),G :uint8 (_adf [1]*255),B :uint8 (_adf [2]*255),A :255});};_cfb .AddColorStop (_ccg ,_fd .RGBA {R :uint8 (_efab [0]*255),G :uint8 (_efab [1]*255),B :uint8 (_efab [2]*255),A :255});
case *_fc .PdfColorspaceDeviceCMYK :if len (_fggf .C0 )!=4||len (_fggf .C1 )!=4{return nil ,_c .New ("\u0069\u006e\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0043\u004d\u0059\u004b\u0020\u0063\u006f\u006c\u006f\u0072 \u0061\u0072\u0072\u0061\u0079\u0020\u006ce\u006e\u0067\u0074\u0068");
};_faf :=_fggf .C0 ;_gdc :=_fggf .C1 ;if _eebb {_cfb .AddColorStop (0.0,_fd .CMYK {C :uint8 (_faf [0]*255),M :uint8 (_faf [1]*255),Y :uint8 (_faf [2]*255),K :uint8 (_faf [3]*255)});};_cfb .AddColorStop (_ccg ,_fd .CMYK {C :uint8 (_gdc [0]*255),M :uint8 (_gdc [1]*255),Y :uint8 (_gdc [2]*255),K :uint8 (_gdc [3]*255)});
default:return nil ,_e .Errorf ("u\u006e\u0073\u0075\u0070\u0070\u006fr\u0074\u0065\u0064\u0020\u0063\u006f\u006c\u006f\u0072 \u0073\u0070\u0061c\u0065:\u0020\u0025\u0073",_dbf .String ());};return _cfb ,nil ;};func _acba (_ggf *_fc .Image ,_caff _fd .Color )_ca .Image {_fag ,_eca :=int (_ggf .Width ),int (_ggf .Height );
_dcfa :=_ca .NewRGBA (_ca .Rect (0,0,_fag ,_eca ));for _acg :=0;_acg < _eca ;_acg ++{for _abcf :=0;_abcf < _fag ;_abcf ++{_dbcg ,_bgg :=_ggf .ColorAt (_abcf ,_acg );if _bgg !=nil {_eg .Log .Debug ("\u0063o\u0075l\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069e\u0076\u0065\u0020\u0069m\u0061\u0067\u0065\u0020\u006da\u0073\u006b\u0020\u0076\u0061\u006c\u0075\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061y\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006fr\u0072\u0065\u0063\u0074\u002e",_abcf ,_acg );
continue ;};_eaba ,_gbc ,_bfag ,_ :=_dbcg .RGBA ();var _edfe _fd .Color ;if _eaba +_gbc +_bfag ==0{_edfe =_caff ;}else {_edfe =_fd .Transparent ;};_dcfa .Set (_abcf ,_acg ,_edfe );};};return _dcfa ;};

// ImageDevice is used to render PDF pages to image targets.
type ImageDevice struct{*renderer ;

// OutputWidth represents the width of the rendered images in pixels.
// The heights of the output images are calculated based on the selected
// width and the original height of each rendered page.
OutputWidth int ;_bb _cd .Interpolator ;};type renderer struct{_gfb float64 ;_bba map[string ]*_cec .TextFont ;_dfgf map[string ]*_cec .TextFont ;_agf *_afb .Finder ;};

// RenderWithOpts converts the specified PDF page into an image, optionally flattens annotations and returns the result.
func (_aa *ImageDevice )RenderWithOpts (page *_fc .PdfPage ,skipFlattening bool )(_ca .Image ,error ){_fa ,_dd :=page .GetMediaBox ();if _dd !=nil {return nil ,_dd ;};_fa .Normalize ();_agb :=page .CropBox ;var _ab ,_cdf float64 ;if _agb !=nil {_agb .Normalize ();
_ab ,_cdf =_agb .Width (),_agb .Height ();};_eb :=page .Rotate ;_bd ,_dg ,_ae ,_afe :=_fa .Llx ,_fa .Lly ,_fa .Width (),_fa .Height ();_bbb :=_bg .IdentityMatrix ();if _eb !=nil &&*_eb %360!=0&&*_eb %90==0{_ge :=-float64 (*_eb );_aac :=_beca (_ae ,_afe ,_ge );
_bbb =_bbb .Translate ((_aac .Width -_ae )/2+_ae /2,(_aac .Height -_afe )/2+_afe /2).Rotate (_ge *_cg .Pi /180).Translate (-_ae /2,-_afe /2);_ae ,_afe =_aac .Width ,_aac .Height ;if _agb !=nil {_gf :=_beca (_ab ,_cdf ,_ge );_ab ,_cdf =_gf .Width ,_gf .Height ;
};};if _bd !=0||_dg !=0{_bbb =_bbb .Translate (-_bd ,-_dg );};_aa ._gfb =1.0;if _aa .OutputWidth !=0{_cb :=_ae ;if _agb !=nil {_cb =_ab ;};_aa ._gfb =float64 (_aa .OutputWidth )/_cb ;_ae ,_afe ,_ab ,_cdf =_ae *_aa ._gfb ,_afe *_aa ._gfb ,_ab *_aa ._gfb ,_cdf *_aa ._gfb ;
_bbb =_bg .ScaleMatrix (_aa ._gfb ,_aa ._gfb ).Mult (_bbb );};_ddb :=_df .NewContext (int (_ae ),int (_afe ));_ddb .SetInterpolator (_aa ._bb );if _fda :=_aa .renderPage (_ddb ,page ,_bbb ,skipFlattening );_fda !=nil {return nil ,_fda ;};_ef :=_ddb .Image ();
if _agb !=nil {_geb ,_dfg :=(_agb .Llx -_bd )*_aa ._gfb ,(_agb .Lly -_dg )*_aa ._gfb ;_de :=_ca .Rect (0,0,int (_ab ),int (_cdf ));_gd :=_ca .Pt (int (_geb ),int (_afe -_dfg -_cdf ));_fce :=_ca .NewRGBA (_de );_a .Draw (_fce ,_de ,_ef ,_gd ,_a .Src );_ef =_fce ;
};return _ef ,nil ;};

// PdfShadingType defines PDF shading types.
// Source: PDF32000_2008.pdf. Chapter 8.7.4.5
type PdfShadingType int64 ;

// NewImageDevice returns a new image device.
func NewImageDevice ()*ImageDevice {const _fdg ="r\u0065\u006e\u0064\u0065r.\u004ee\u0077\u0049\u006d\u0061\u0067e\u0044\u0065\u0076\u0069\u0063\u0065";_gg .TrackUse (_fdg );_fdb :=&ImageDevice {renderer :&renderer {},_bb :_cd .BiLinear };return _fdb ;
};func _fdabb (_faeb string ,_bbafd _ca .Image )error {_fggd ,_dbe :=_g .Create (_faeb );if _dbe !=nil {return _dbe ;};defer _fggd .Close ();return _b .Encode (_fggd ,_bbafd );};func _afed (_ecfd _ga .PdfObject ,_bea _fd .Color )(_ca .Image ,error ){_fbab ,_cccg :=_ga .GetStream (_ecfd );
if !_cccg {return nil ,nil ;};_gbgc ,_gdeb :=_fc .NewXObjectImageFromStream (_fbab );if _gdeb !=nil {return nil ,_gdeb ;};_bcg ,_gdeb :=_gbgc .ToImage ();if _gdeb !=nil {return nil ,_gdeb ;};return _acba (_bcg ,_bea ),nil ;};