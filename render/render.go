//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package render ;import (_g "errors";_e "fmt";_bd "github.com/adrg/sysfont";_fge "github.com/unidoc/unipdf/v4/annotator";_gaa "github.com/unidoc/unipdf/v4/common";_bc "github.com/unidoc/unipdf/v4/contentstream";_fg "github.com/unidoc/unipdf/v4/contentstream/draw";
_ccf "github.com/unidoc/unipdf/v4/core";_f "github.com/unidoc/unipdf/v4/internal/license";_cd "github.com/unidoc/unipdf/v4/internal/transform";_ca "github.com/unidoc/unipdf/v4/model";_fe "github.com/unidoc/unipdf/v4/render/internal/context";_fa "github.com/unidoc/unipdf/v4/render/internal/context/imagerender";
_de "golang.org/x/image/draw";_dfd "image";_a "image/color";_b "image/draw";_df "image/jpeg";_ga "image/png";_gf "math";_cc "os";_d "path/filepath";_gc "strings";);func (_ecg *renderer )renderContentStream (_abg _fe .Context ,_cfd string ,_dea *_ca .PdfPageResources )error {_cfag ,_fcf :=_bc .NewContentStreamParser (_cfd ).Parse ();
if _fcf !=nil {return _fcf ;};if _ecg ._beb ==nil {_ecg ._beb =map[string ]*_fe .TextFont {};};if _ecg ._bcd ==nil {_ecg ._bcd =map[string ]*_fe .TextFont {};};_fb :=_abg .TextState ();_fb .GlobalScale =_ecg ._gg ;if _ecg ._ceaf ==nil {_ecg ._ceaf =_bd .NewFinder (&_bd .FinderOpts {Extensions :[]string {"\u002e\u0074\u0074\u0066","\u002e\u0074\u0074\u0063"}});
};var _gd *_bc .ContentStreamOperation ;var _cbe bool ;var _ba _fe .FillRule ;_ege :=_bc .NewContentStreamProcessor (*_cfag );_ege .AddHandler (_bc .HandlerConditionEnumAllOperands ,"",func (_bce *_bc .ContentStreamOperation ,_bae _bc .GraphicsState ,_ade *_ca .PdfPageResources )error {_gaa .Log .Debug ("\u0050\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0025\u0073",_bce .Operand );
switch _bce .Operand {case "\u0071":_abg .Push ();case "\u0051":_abg .Pop ();_fb =_abg .TextState ();case "\u0063\u006d":if len (_bce .Params )!=6{return _gba ;};_cfab ,_gce :=_ccf .GetNumbersAsFloat (_bce .Params );if _gce !=nil {return _gce ;};_gdc :=_cd .NewMatrix (_cfab [0],_cfab [1],_cfab [2],_cfab [3],_cfab [4],_cfab [5]);
_gaa .Log .Debug ("\u0047\u0072\u0061\u0070\u0068\u0069\u0063\u0073\u0020\u0073\u0074a\u0074\u0065\u0020\u006d\u0061\u0074\u0072\u0069\u0078\u003a \u0025\u002b\u0076",_gdc );_abg .SetMatrix (_abg .Matrix ().Mult (_gdc ));case "\u0077":if len (_bce .Params )!=1{return _gba ;
};_dbb ,_dc :=_ccf .GetNumbersAsFloat (_bce .Params );if _dc !=nil {return _dc ;};_abg .SetLineWidth (_dbb [0]);case "\u004a":if len (_bce .Params )!=1{return _gba ;};_baf ,_adg :=_ccf .GetIntVal (_bce .Params [0]);if !_adg {return _bbb ;};switch _baf {case 0:_abg .SetLineCap (_fe .LineCapButt );
case 1:_abg .SetLineCap (_fe .LineCapRound );case 2:_abg .SetLineCap (_fe .LineCapSquare );default:_gaa .Log .Debug ("\u0049\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006c\u0069\u006ee\u0020\u0063\u0061\u0070\u0020\u0073\u0074\u0079\u006c\u0065:\u0020\u0025\u0064",_baf );
return _gba ;};case "\u006a":if len (_bce .Params )!=1{return _gba ;};_ggg ,_cag :=_ccf .GetIntVal (_bce .Params [0]);if !_cag {return _bbb ;};switch _ggg {case 0:_abg .SetLineJoin (_fe .LineJoinBevel );case 1:_abg .SetLineJoin (_fe .LineJoinRound );case 2:_abg .SetLineJoin (_fe .LineJoinBevel );
default:_gaa .Log .Debug ("I\u006e\u0076\u0061\u006c\u0069\u0064 \u006c\u0069\u006e\u0065\u0020\u006a\u006f\u0069\u006e \u0073\u0074\u0079l\u0065:\u0020\u0025\u0064",_ggg );return _gba ;};case "\u004d":if len (_bce .Params )!=1{return _gba ;};_dbbe ,_bdb :=_ccf .GetNumbersAsFloat (_bce .Params );
if _bdb !=nil {return _bdb ;};_ =_dbbe ;_gaa .Log .Debug ("\u004di\u0074\u0065\u0072\u0020l\u0069\u006d\u0069\u0074\u0020n\u006ft\u0020s\u0075\u0070\u0070\u006f\u0072\u0074\u0065d");case "\u0064":if len (_bce .Params )!=2{return _gba ;};_ggc ,_cef :=_ccf .GetArray (_bce .Params [0]);
if !_cef {return _bbb ;};_gcee ,_cef :=_ccf .GetIntVal (_bce .Params [1]);if !_cef {_ ,_gdd :=_ccf .GetFloatVal (_bce .Params [1]);if !_gdd {return _bbb ;};};_dfeb ,_bde :=_ccf .GetNumbersAsFloat (_ggc .Elements ());if _bde !=nil {return _bde ;};_abg .SetDash (_dfeb ...);
_ =_gcee ;_gaa .Log .Debug ("\u004c\u0069n\u0065\u0020\u0064\u0061\u0073\u0068\u0020\u0070\u0068\u0061\u0073\u0065\u0020\u006e\u006f\u0074\u0020\u0073\u0075\u0070\u0070\u006frt\u0065\u0064");case "\u0072\u0069":_gaa .Log .Debug ("\u0052\u0065\u006e\u0064\u0065\u0072\u0069\u006e\u0067\u0020i\u006e\u0074\u0065\u006e\u0074\u0020\u006eo\u0074\u0020\u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0065\u0064");
case "\u0069":_gaa .Log .Debug ("\u0046\u006c\u0061\u0074\u006e\u0065\u0073\u0073\u0020\u0074\u006f\u006c\u0065\u0072\u0061n\u0063e\u0020\u006e\u006f\u0074\u0020\u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0065\u0064");case "\u0067\u0073":if len (_bce .Params )!=1{return _gba ;
};_gbe ,_dbd :=_ccf .GetName (_bce .Params [0]);if !_dbd {return _bbb ;};if _gbe ==nil {return _gba ;};_bgb ,_dbd :=_ade .GetExtGState (*_gbe );if !_dbd {_gaa .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006eo\u0074 \u0066i\u006ed\u0020\u0072\u0065\u0073\u006f\u0075\u0072\u0063\u0065\u003a\u0020\u0025\u0073",*_gbe );
return _g .New ("\u0072e\u0073o\u0075\u0072\u0063\u0065\u0020n\u006f\u0074 \u0066\u006f\u0075\u006e\u0064");};_gbaa ,_dbd :=_ccf .GetDict (_bgb );if !_dbd {_gaa .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020c\u006f\u0075\u006c\u0064 ge\u0074 g\u0072\u0061\u0070\u0068\u0069\u0063\u0073 s\u0074\u0061\u0074\u0065\u0020\u0064\u0069c\u0074");
return _bbb ;};_gaa .Log .Debug ("G\u0053\u0020\u0064\u0069\u0063\u0074\u003a\u0020\u0025\u0073",_gbaa .String ());_ded :=_gbaa .Get ("\u0063\u0061");if _ded !=nil {_edf ,_cdf :=_ccf .GetNumberAsFloat (_ded );_aag :=_gbaa .Get ("\u0042\u004d");if _aag !=nil {if _ea ,_bf :=_ccf .GetName (_aag );
_bf {if _ea .String ()=="\u004d\u0075\u006c\u0074\u0069\u0070\u006c\u0079"{_edf =0.01;};};};if _cdf ==nil {_dg ,_ccb :=_bae .ColorspaceNonStroking .ColorToRGB (_bae .ColorNonStroking );if _ccb !=nil {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ccb );
return _ccb ;};_dd ,_bda :=_dg .(*_ca .PdfColorDeviceRGB );if !_bda {_gaa .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _ccb ;};_abg .SetFillRGBA (_dd .R (),_dd .G (),_dd .B (),_edf );
};};case "\u006d":if len (_bce .Params )!=2{_gaa .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0073\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_gba );
return nil ;};_dcg ,_gge :=_ccf .GetNumbersAsFloat (_bce .Params );if _gge !=nil {return _gge ;};_gaa .Log .Debug ("M\u006f\u0076\u0065\u0020\u0074\u006f\u003a\u0020\u0025\u0076",_dcg );_abg .NewSubPath ();_abg .MoveTo (_dcg [0],_dcg [1]);case "\u006c":if len (_bce .Params )!=2{_gaa .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0073\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_gba );
return nil ;};_gfe ,_gbgc :=_ccf .GetNumbersAsFloat (_bce .Params );if _gbgc !=nil {return _gbgc ;};_abg .LineTo (_gfe [0],_gfe [1]);case "\u0063":if len (_bce .Params )!=6{return _gba ;};_eaa ,_dfc :=_ccf .GetNumbersAsFloat (_bce .Params );if _dfc !=nil {return _dfc ;
};_gaa .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020\u0062\u0065\u007a\u0069\u0065\u0072\u0020p\u0061\u0072\u0061\u006d\u0073\u003a\u0020\u0025\u002b\u0076",_eaa );_abg .CubicTo (_eaa [0],_eaa [1],_eaa [2],_eaa [3],_eaa [4],_eaa [5]);case "\u0076","\u0079":if len (_bce .Params )!=4{return _gba ;
};_cefa ,_fda :=_ccf .GetNumbersAsFloat (_bce .Params );if _fda !=nil {return _fda ;};_gaa .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020\u0062\u0065\u007a\u0069\u0065\u0072\u0020p\u0061\u0072\u0061\u006d\u0073\u003a\u0020\u0025\u002b\u0076",_cefa );_abg .QuadraticTo (_cefa [0],_cefa [1],_cefa [2],_cefa [3]);
case "\u0068":_abg .ClosePath ();_abg .NewSubPath ();case "\u0072\u0065":if len (_bce .Params )!=4{return _gba ;};_bcf ,_ag :=_ccf .GetNumbersAsFloat (_bce .Params );if _ag !=nil {return _ag ;};_abg .DrawRectangle (_bcf [0],_bcf [1],_bcf [2],_bcf [3]);
_abg .NewSubPath ();case "\u0053":_da ,_gfg :=_bae .ColorspaceStroking .ColorToRGB (_bae .ColorStroking );if _gfg !=nil {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gfg );
return _gfg ;};_gab ,_cfe :=_da .(*_ca .PdfColorDeviceRGB );if !_cfe {_gaa .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _gfg ;};_abg .SetRGBA (_gab .R (),_gab .G (),_gab .B (),1);
_abg .Stroke ();case "\u0073":_gfea ,_aac :=_bae .ColorspaceStroking .ColorToRGB (_bae .ColorStroking );if _aac !=nil {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_aac );
return _aac ;};_cagb ,_cgc :=_gfea .(*_ca .PdfColorDeviceRGB );if !_cgc {_gaa .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _aac ;};_abg .ClosePath ();_abg .NewSubPath ();
_abg .SetRGBA (_cagb .R (),_cagb .G (),_cagb .B (),1);_abg .Stroke ();case "\u0066","\u0046":_gbab ,_aad :=_bae .ColorspaceNonStroking .ColorToRGB (_bae .ColorNonStroking );if _aad !=nil {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_aad );
return _aad ;};switch _dbg :=_gbab .(type ){case *_ca .PdfColorDeviceRGB :_abg .SetRGBA (_dbg .R (),_dbg .G (),_dbg .B (),1);_abg .SetFillRule (_fe .FillRuleWinding );_abg .Fill ();case *_ca .PdfColorPattern :_abg .Fill ();};_gaa .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");
case "\u0066\u002a":_bga ,_dfee :=_bae .ColorspaceNonStroking .ColorToRGB (_bae .ColorNonStroking );if _dfee !=nil {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dfee );
return _dfee ;};_gdf ,_ffa :=_bga .(*_ca .PdfColorDeviceRGB );if !_ffa {_gaa .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _dfee ;};_abg .SetRGBA (_gdf .R (),_gdf .G (),_gdf .B (),1);
_abg .SetFillRule (_fe .FillRuleEvenOdd );_abg .Fill ();case "\u0042":_fad ,_ccc :=_bae .ColorspaceNonStroking .ColorToRGB (_bae .ColorNonStroking );if _ccc !=nil {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ccc );
return _ccc ;};switch _ac :=_fad .(type ){case *_ca .PdfColorDeviceRGB :_abg .SetRGBA (_ac .R (),_ac .G (),_ac .B (),1);_abg .SetFillRule (_fe .FillRuleWinding );_abg .FillPreserve ();_fad ,_ccc =_bae .ColorspaceStroking .ColorToRGB (_bae .ColorStroking );
if _ccc !=nil {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ccc );return _ccc ;};if _bec ,_dgb :=_fad .(*_ca .PdfColorDeviceRGB );
_dgb {_abg .SetRGBA (_bec .R (),_bec .G (),_bec .B (),1);_abg .Stroke ();};case *_ca .PdfColorPattern :_abg .SetFillRule (_fe .FillRuleWinding );_abg .Fill ();_abg .StrokePattern ();};case "\u0042\u002a":_bcea ,_fec :=_bae .ColorspaceNonStroking .ColorToRGB (_bae .ColorNonStroking );
if _fec !=nil {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fec );return _fec ;};switch _adc :=_bcea .(type ){case *_ca .PdfColorDeviceRGB :_abg .SetRGBA (_adc .R (),_adc .G (),_adc .B (),1);
_abg .SetFillRule (_fe .FillRuleEvenOdd );_abg .FillPreserve ();_bcea ,_fec =_bae .ColorspaceStroking .ColorToRGB (_bae .ColorStroking );if _fec !=nil {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fec );
return _fec ;};if _ede ,_cae :=_bcea .(*_ca .PdfColorDeviceRGB );_cae {_abg .SetRGBA (_ede .R (),_ede .G (),_ede .B (),1);_abg .Stroke ();};case *_ca .PdfColorPattern :_abg .SetFillRule (_fe .FillRuleEvenOdd );_abg .Fill ();_abg .StrokePattern ();};case "\u0062":_abg .ClosePath ();
_fdf ,_dbgd :=_bae .ColorspaceNonStroking .ColorToRGB (_bae .ColorNonStroking );if _dbgd !=nil {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dbgd );
return _dbgd ;};switch _dfca :=_fdf .(type ){case *_ca .PdfColorDeviceRGB :_abg .SetRGBA (_dfca .R (),_dfca .G (),_dfca .B (),1);_abg .NewSubPath ();_abg .SetFillRule (_fe .FillRuleWinding );_abg .FillPreserve ();_fdf ,_dbgd =_bae .ColorspaceStroking .ColorToRGB (_bae .ColorStroking );
if _dbgd !=nil {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dbgd );return _dbgd ;};if _cceb ,_eca :=_fdf .(*_ca .PdfColorDeviceRGB );
_eca {_abg .SetRGBA (_cceb .R (),_cceb .G (),_cceb .B (),1);_abg .Stroke ();};case *_ca .PdfColorPattern :_abg .NewSubPath ();_abg .SetFillRule (_fe .FillRuleWinding );_abg .Fill ();_abg .StrokePattern ();};case "\u0062\u002a":_abg .ClosePath ();_bab ,_dga :=_bae .ColorspaceNonStroking .ColorToRGB (_bae .ColorNonStroking );
if _dga !=nil {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dga );return _dga ;};switch _cgd :=_bab .(type ){case *_ca .PdfColorDeviceRGB :_abg .SetRGBA (_cgd .R (),_cgd .G (),_cgd .B (),1);
_abg .NewSubPath ();_abg .SetFillRule (_fe .FillRuleEvenOdd );_abg .FillPreserve ();_bab ,_dga =_bae .ColorspaceStroking .ColorToRGB (_bae .ColorStroking );if _dga !=nil {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dga );
return _dga ;};if _dge ,_gaf :=_bab .(*_ca .PdfColorDeviceRGB );_gaf {_abg .SetRGBA (_dge .R (),_dge .G (),_dge .B (),1);_abg .Stroke ();};case *_ca .PdfColorPattern :_abg .NewSubPath ();_abg .SetFillRule (_fe .FillRuleEvenOdd );_abg .Fill ();_abg .StrokePattern ();
};case "\u006e":if _cbe {_abg .SetFillRule (_ba );_abg .ClipPreserve ();_cbe =false ;};_abg .ClearPath ();case "\u0057":_cbe =true ;_ba =_fe .FillRuleWinding ;case "\u0057\u002a":_cbe =true ;_ba =_fe .FillRuleEvenOdd ;case "\u0072\u0067":_dcgf ,_cgfb :=_bae .ColorNonStroking .(*_ca .PdfColorDeviceRGB );
if !_cgfb {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bae .ColorNonStroking );return nil ;};_abg .SetFillRGBA (_dcgf .R (),_dcgf .G (),_dcgf .B (),1);
case "\u0052\u0047":_egc ,_fdb :=_bae .ColorStroking .(*_ca .PdfColorDeviceRGB );if !_fdb {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bae .ColorStroking );
return nil ;};_abg .SetStrokeRGBA (_egc .R (),_egc .G (),_egc .B (),1);case "\u006b":_gbabf ,_abc :=_bae .ColorNonStroking .(*_ca .PdfColorDeviceCMYK );if !_abc {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bae .ColorNonStroking );
return nil ;};_gad ,_deb :=_bae .ColorspaceNonStroking .ColorToRGB (_gbabf );if _deb !=nil {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bae .ColorNonStroking );
return nil ;};_gfeb ,_abc :=_gad .(*_ca .PdfColorDeviceRGB );if !_abc {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gad );return nil ;
};_abg .SetFillRGBA (_gfeb .R (),_gfeb .G (),_gfeb .B (),1);case "\u004b":_ggeb ,_gda :=_bae .ColorStroking .(*_ca .PdfColorDeviceCMYK );if !_gda {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bae .ColorStroking );
return nil ;};_ddf ,_edg :=_bae .ColorspaceStroking .ColorToRGB (_ggeb );if _edg !=nil {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bae .ColorStroking );
return nil ;};_aea ,_gda :=_ddf .(*_ca .PdfColorDeviceRGB );if !_gda {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ddf );return nil ;
};_abg .SetStrokeRGBA (_aea .R (),_aea .G (),_aea .B (),1);case "\u0067":_ggge ,_fecf :=_bae .ColorNonStroking .(*_ca .PdfColorDeviceGray );if !_fecf {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bae .ColorNonStroking );
return nil ;};_cab ,_gfc :=_bae .ColorspaceNonStroking .ColorToRGB (_ggge );if _gfc !=nil {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bae .ColorNonStroking );
return nil ;};_ef ,_fecf :=_cab .(*_ca .PdfColorDeviceRGB );if !_fecf {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cab );return nil ;
};_abg .SetFillRGBA (_ef .R (),_ef .G (),_ef .B (),1);case "\u0047":_fcfb ,_becd :=_bae .ColorStroking .(*_ca .PdfColorDeviceGray );if !_becd {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bae .ColorStroking );
return nil ;};_aaa ,_dead :=_bae .ColorspaceStroking .ColorToRGB (_fcfb );if _dead !=nil {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bae .ColorStroking );
return nil ;};_dfa ,_becd :=_aaa .(*_ca .PdfColorDeviceRGB );if !_becd {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_aaa );return nil ;
};_abg .SetStrokeRGBA (_dfa .R (),_dfa .G (),_dfa .B (),1);case "\u0063\u0073":if len (_bce .Params )> 0{if _afb ,_fdab :=_ccf .GetName (_bce .Params [0]);_fdab &&_afb .String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e"{break ;};};_cdc ,_bfe :=_bae .ColorspaceNonStroking .ColorToRGB (_bae .ColorNonStroking );
if _bfe !=nil {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bae .ColorNonStroking );return nil ;};_bbe ,_dfb :=_cdc .(*_ca .PdfColorDeviceRGB );
if !_dfb {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cdc );return nil ;};_abg .SetFillRGBA (_bbe .R (),_bbe .G (),_bbe .B (),1);
case "\u0073\u0063":_eee ,_fgg :=_bae .ColorspaceNonStroking .ColorToRGB (_bae .ColorNonStroking );if _fgg !=nil {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bae .ColorNonStroking );
return nil ;};_eab ,_dda :=_eee .(*_ca .PdfColorDeviceRGB );if !_dda {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_eee );return nil ;
};_abg .SetFillRGBA (_eab .R (),_eab .G (),_eab .B (),1);case "\u0073\u0063\u006e":if len (_bce .Params )> 0&&len (_gd .Params )> 0{if _dfcg ,_bbbb :=_ccf .GetName (_gd .Params [0]);_bbbb &&_dfcg .String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e"{if _cbf ,_gdff :=_ccf .GetName (_bce .Params [0]);
_gdff {_cdb ,_fgf :=_ecg .processGradient (_abg ,_bce ,_ade ,_cbf );if _fgf !=nil {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0077\u0068\u0065\u006e\u0020\u0070\u0072o\u0063\u0065\u0073\u0073\u0069\u006eg\u0020\u0067\u0072\u0061\u0064\u0069\u0065\u006e\u0074\u0020\u0064\u0061\u0074a\u003a\u0020\u0025\u0076",_fgf );
break ;};if _cdb ==nil {_gaa .Log .Debug ("\u0055\u006ek\u006e\u006f\u0077n\u0020\u0067\u0072\u0061\u0064\u0069\u0065\u006e\u0074");break ;};_abg .SetFillStyle (_cdb );_abg .SetStrokeStyle (_cdb );break ;};};};_dgaf ,_aff :=_bae .ColorspaceNonStroking .ColorToRGB (_bae .ColorNonStroking );
if _aff !=nil {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bae .ColorNonStroking );return nil ;};_ddg ,_fbe :=_dgaf .(*_ca .PdfColorDeviceRGB );
if !_fbe {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dgaf );return nil ;};_abg .SetFillRGBA (_ddg .R (),_ddg .G (),_ddg .B (),1);
case "\u0043\u0053":if len (_bce .Params )> 0{if _gfgc ,_fee :=_ccf .GetName (_bce .Params [0]);_fee &&_gfgc .String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e"{break ;};};_fba ,_dgf :=_bae .ColorspaceStroking .ColorToRGB (_bae .ColorStroking );if _dgf !=nil {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bae .ColorStroking );
return nil ;};_bdg ,_dcb :=_fba .(*_ca .PdfColorDeviceRGB );if !_dcb {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fba );return nil ;
};_abg .SetStrokeRGBA (_bdg .R (),_bdg .G (),_bdg .B (),1);case "\u0053\u0043":_eba ,_edfb :=_bae .ColorspaceStroking .ColorToRGB (_bae .ColorStroking );if _edfb !=nil {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bae .ColorStroking );
return nil ;};_eea ,_edb :=_eba .(*_ca .PdfColorDeviceRGB );if !_edb {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_eba );return nil ;
};_abg .SetStrokeRGBA (_eea .R (),_eea .G (),_eea .B (),1);case "\u0053\u0043\u004e":if len (_bce .Params )> 0&&len (_gd .Params )> 0{if _ffc ,_dgbc :=_ccf .GetName (_gd .Params [0]);_dgbc &&_ffc .String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e"{if _eed ,_bcb :=_ccf .GetName (_bce .Params [0]);
_bcb {_bdf ,_ffca :=_ecg .processGradient (_abg ,_bce ,_ade ,_eed );if _ffca !=nil {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0077\u0068\u0065\u006e\u0020\u0070\u0072o\u0063\u0065\u0073\u0073\u0069\u006eg\u0020\u0067\u0072\u0061\u0064\u0069\u0065\u006e\u0074\u0020\u0064\u0061\u0074a\u003a\u0020\u0025\u0076",_ffca );
break ;};if _bdf ==nil {_gaa .Log .Debug ("\u0055\u006ek\u006e\u006f\u0077n\u0020\u0067\u0072\u0061\u0064\u0069\u0065\u006e\u0074");break ;};_abg .SetFillStyle (_bdf );_abg .SetStrokeStyle (_bdf );break ;};};};_ggb ,_fdc :=_bae .ColorspaceStroking .ColorToRGB (_bae .ColorStroking );
if _fdc !=nil {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bae .ColorStroking );return nil ;};_gff ,_cfeb :=_ggb .(*_ca .PdfColorDeviceRGB );
if !_cfeb {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ggb );return nil ;};_abg .SetStrokeRGBA (_gff .R (),_gff .G (),_gff .B (),1);
case "\u0073\u0068":if len (_bce .Params )!=1{_gaa .Log .Debug ("\u0049n\u0076\u0061\u006c\u0069\u0064\u0020\u0073\u0068\u0020\u0070\u0061r\u0061\u006d\u0073\u0020\u0066\u006f\u0072\u006d\u0061\u0074");break ;};_dce ,_gfgca :=_ccf .GetName (_bce .Params [0]);
if !_gfgca {_gaa .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020g\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0073\u0068a\u0064\u0069\u006eg\u0020n\u0061\u006d\u0065");break ;};_bcbb ,_gfgca :=_ade .GetShadingByName (*_dce );if !_gfgca {_gaa .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020g\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0073\u0068a\u0064\u0069\u006eg\u0020d\u0061\u0074\u0061");
break ;};_gde ,_aafd ,_gfdg :=_ecg .processShading (_abg ,_bcbb );if _gfdg !=nil {_gaa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0077\u0068\u0065\u006e\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0073\u0068a\u0064\u0069\u006e\u0067\u0020d\u0061\u0074a\u003a\u0020\u0025\u0076",_gfdg );
break ;};if _gde ==nil {_gaa .Log .Debug ("\u0055\u006ek\u006e\u006f\u0077n\u0020\u0067\u0072\u0061\u0064\u0069\u0065\u006e\u0074");break ;};_eeac ,_gfdg :=_aafd .ToFloat64Array ();if _gfdg !=nil {_gaa .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073: \u0025\u0076",_gfdg );
break ;};_abg .DrawRectangle (_eeac [0],_eeac [1],_eeac [2],_eeac [3]);_abg .NewSubPath ();_abg .SetFillStyle (_gde );_abg .SetStrokeStyle (_gde );_abg .Fill ();case "\u0044\u006f":if len (_bce .Params )!=1{return _gba ;};_bfg ,_fdaf :=_ccf .GetName (_bce .Params [0]);
if !_fdaf {return _bbb ;};_ ,_abe :=_ade .GetXObjectByName (*_bfg );switch _abe {case _ca .XObjectTypeImage :_gaa .Log .Debug ("\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u0069\u006d\u0061\u0067e\u003a\u0020\u0025\u0073",_bfg .String ());_gdcd ,_bfec :=_ade .GetXObjectImageByName (*_bfg );
if _bfec !=nil {return _bfec ;};_daa ,_bfec :=_gdcd .ToImage ();if _bfec !=nil {_gaa .Log .Debug ("\u0052\u0065\u006e\u0064\u0065\u0072\u0069\u006e\u0067\u0020\u0072\u0065\u0073\u0075\u006c\u0074\u0020\u006day\u0020b\u0065\u0020\u0069\u006e\u0063\u006f\u006d\u0070\u006c\u0065\u0074\u0065.\u0020\u0049\u006d\u0061\u0067\u0065\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0073\u0069\u006f\u006e \u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0076",_bfec );
return nil ;};if _beca :=_gdcd .ColorSpace ;_beca !=nil {var _agb bool ;switch _beca .(type ){case *_ca .PdfColorspaceSpecialIndexed :_agb =true ;};if _agb {if _age ,_aagg :=_beca .ImageToRGB (*_daa );_aagg !=nil {_gaa .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0063\u006fnv\u0065r\u0074\u0020\u0069\u006d\u0061\u0067\u0065\u0020\u0074\u006f\u0020\u0052G\u0042\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020i\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u002e");
}else {_daa =&_age ;};};};_gef :=_abg .FillPattern ().ColorAt (0,0);var _fgfa _dfd .Image ;if _gdcd .Mask !=nil {if _fgfa ,_bfec =_dff (_gdcd .Mask ,_gef );_bfec !=nil {_gaa .Log .Debug ("\u0057\u0041\u0052\u004e\u003a \u0063\u006f\u0075\u006c\u0064 \u006eo\u0074\u0020\u0067\u0065\u0074\u0020\u0065\u0078\u0070\u006c\u0069\u0063\u0069\u0074\u0020\u0069\u006d\u0061\u0067e\u0020\u006d\u0061\u0073\u006b\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e");
_fgfa =nil ;};}else if _gdcd .SMask !=nil {if _fgfa ,_bfec =_eaeg (_gdcd .SMask );_bfec !=nil {_gaa .Log .Debug ("W\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0067\u0065\u0074\u0020\u0073\u006f\u0066\u0074\u0020\u0069\u006da\u0067e\u0020\u006d\u0061\u0073k\u002e\u0020O\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u002e");
_fgfa =nil ;};};var _efa _dfd .Image ;if _fdd ,_ :=_ccf .GetBoolVal (_gdcd .ImageMask );_fdd {_efa =_bebg (_daa ,_gef );}else {_efa ,_bfec =_daa .ToGoImage ();if _bfec !=nil {_gaa .Log .Debug ("\u0052\u0065\u006e\u0064\u0065\u0072\u0069\u006e\u0067\u0020\u0072\u0065\u0073\u0075\u006c\u0074\u0020\u006day\u0020b\u0065\u0020\u0069\u006e\u0063\u006f\u006d\u0070\u006c\u0065\u0074\u0065.\u0020\u0049\u006d\u0061\u0067\u0065\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0073\u0069\u006f\u006e \u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0076",_bfec );
return nil ;};};if _fgfa !=nil {var _dgc _de .Interpolator =_de .BiLinear ;if _cbg ,_eeg :=_abg .(*_fa .Context );_eeg {_dgc =_cbg .Interpolator ();};_efa =_abgg (_efa ,_fgfa ,_dgc );};_gbgce :=_efa .Bounds ();_abg .Push ();_abg .Scale (1.0/float64 (_gbgce .Dx ()),-1.0/float64 (_gbgce .Dy ()));
_abg .DrawImageAnchored (_efa ,0,0,0,1);_abg .Pop ();case _ca .XObjectTypeForm :_gaa .Log .Debug ("\u0058\u004fb\u006a\u0065\u0063t\u0020\u0066\u006f\u0072\u006d\u003a\u0020\u0025\u0073",_bfg .String ());_edbf ,_fdba :=_ade .GetXObjectFormByName (*_bfg );
if _fdba !=nil {return _fdba ;};_edga ,_fdba :=_edbf .GetContentStream ();if _fdba !=nil {return _fdba ;};_bgc :=_edbf .Resources ;if _bgc ==nil {_bgc =_ade ;};_abg .Push ();if _edbf .Matrix !=nil {_cfc ,_bgca :=_ccf .GetArray (_edbf .Matrix );if !_bgca {return _bbb ;
};_acb ,_gcb :=_ccf .GetNumbersAsFloat (_cfc .Elements ());if _gcb !=nil {return _gcb ;};if len (_acb )!=6{return _gba ;};_ddc :=_cd .NewMatrix (_acb [0],_acb [1],_acb [2],_acb [3],_acb [4],_acb [5]);_abg .SetMatrix (_abg .Matrix ().Mult (_ddc ));};if _edbf .BBox !=nil {_gbd ,_adge :=_ccf .GetArray (_edbf .BBox );
if !_adge {return _bbb ;};_dfbc ,_bfc :=_ccf .GetNumbersAsFloat (_gbd .Elements ());if _bfc !=nil {return _bfc ;};if len (_dfbc )!=4{_gaa .Log .Debug ("\u004c\u0065\u006e\u0020\u003d\u0020\u0025\u0064",len (_dfbc ));return _gba ;};_abg .DrawRectangle (_dfbc [0],_dfbc [1],_dfbc [2]-_dfbc [0],_dfbc [3]-_dfbc [1]);
_abg .SetRGBA (1,0,0,1);_abg .Clip ();}else {_gaa .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0052\u0065q\u0075\u0069\u0072e\u0064\u0020\u0042\u0042\u006f\u0078\u0020\u006d\u0069ss\u0069\u006e\u0067 \u006f\u006e \u0058\u004f\u0062\u006a\u0065\u0063t\u0020\u0046o\u0072\u006d");
};_fdba =_ecg .renderContentStream (_abg ,string (_edga ),_bgc );if _fdba !=nil {return _fdba ;};_abg .Pop ();};case "\u0042\u0049":if len (_bce .Params )!=1{return _gba ;};_ecf ,_dgd :=_bce .Params [0].(*_bc .ContentStreamInlineImage );if !_dgd {return nil ;
};_dbda ,_efe :=_ecf .ToImage (_ade );if _efe !=nil {_gaa .Log .Debug ("\u0052\u0065\u006e\u0064\u0065\u0072\u0069\u006e\u0067\u0020\u0072\u0065\u0073\u0075\u006c\u0074\u0020\u006day\u0020b\u0065\u0020\u0069\u006e\u0063\u006f\u006d\u0070\u006c\u0065\u0074\u0065.\u0020\u0049\u006d\u0061\u0067\u0065\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0073\u0069\u006f\u006e \u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0076",_efe );
return nil ;};_ggbb ,_efe :=_dbda .ToGoImage ();if _efe !=nil {_gaa .Log .Debug ("\u0052\u0065\u006e\u0064\u0065\u0072\u0069\u006e\u0067\u0020\u0072\u0065\u0073\u0075\u006c\u0074\u0020\u006day\u0020b\u0065\u0020\u0069\u006e\u0063\u006f\u006d\u0070\u006c\u0065\u0074\u0065.\u0020\u0049\u006d\u0061\u0067\u0065\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0073\u0069\u006f\u006e \u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0076",_efe );
return nil ;};_aab :=_ggbb .Bounds ();_abg .Push ();_abg .Scale (1.0/float64 (_aab .Dx ()),-1.0/float64 (_aab .Dy ()));_abg .DrawImageAnchored (_ggbb ,0,0,0,1);_abg .Pop ();case "\u0042\u0054":_fb .Reset ();case "\u0045\u0054":_fb .Reset ();case "\u0054\u0072":if len (_bce .Params )!=1{return _gba ;
};_ffe ,_bbbc :=_ccf .GetNumberAsFloat (_bce .Params [0]);if _bbbc !=nil {return _bbbc ;};_fb .Tr =_fe .TextRenderingMode (_ffe );case "\u0054\u004c":if len (_bce .Params )!=1{return _gba ;};_egf ,_aed :=_ccf .GetNumberAsFloat (_bce .Params [0]);if _aed !=nil {return _aed ;
};_fb .Tl =_egf ;case "\u0054\u0063":if len (_bce .Params )!=1{return _gba ;};_dca ,_bcdb :=_ccf .GetNumberAsFloat (_bce .Params [0]);if _bcdb !=nil {return _bcdb ;};_gaa .Log .Debug ("\u0054\u0063\u003a\u0020\u0025\u0076",_dca );_fb .Tc =_dca ;case "\u0054\u0077":if len (_bce .Params )!=1{return _gba ;
};_aaba ,_ggf :=_ccf .GetNumberAsFloat (_bce .Params [0]);if _ggf !=nil {return _ggf ;};_gaa .Log .Debug ("\u0054\u0077\u003a\u0020\u0025\u0076",_aaba );_fb .Tw =_aaba ;case "\u0054\u007a":if len (_bce .Params )!=1{return _gba ;};_gfec ,_eege :=_ccf .GetNumberAsFloat (_bce .Params [0]);
if _eege !=nil {return _eege ;};_fb .Th =_gfec ;case "\u0054\u0073":if len (_bce .Params )!=1{return _gba ;};_edgc ,_dceb :=_ccf .GetNumberAsFloat (_bce .Params [0]);if _dceb !=nil {return _dceb ;};_fb .Ts =_edgc ;case "\u0054\u0064":if len (_bce .Params )!=2{return _gba ;
};_cec ,_fgb :=_ccf .GetNumbersAsFloat (_bce .Params );if _fgb !=nil {return _fgb ;};_gaa .Log .Debug ("\u0054\u0064\u003a\u0020\u0025\u0076",_cec );_fb .ProcTd (_cec [0],_cec [1]);case "\u0054\u0044":if len (_bce .Params )!=2{return _gba ;};_adgb ,_afe :=_ccf .GetNumbersAsFloat (_bce .Params );
if _afe !=nil {return _afe ;};_gaa .Log .Debug ("\u0054\u0044\u003a\u0020\u0025\u0076",_adgb );_fb .ProcTD (_adgb [0],_adgb [1]);case "\u0054\u002a":_fb .ProcTStar ();case "\u0054\u006d":if len (_bce .Params )!=6{return _gba ;};_eag ,_geee :=_ccf .GetNumbersAsFloat (_bce .Params );
if _geee !=nil {return _geee ;};_gaa .Log .Debug ("\u0054\u0065x\u0074\u0020\u006da\u0074\u0072\u0069\u0078\u003a\u0020\u0025\u002b\u0076",_eag );_fb .ProcTm (_eag [0],_eag [1],_eag [2],_eag [3],_eag [4],_eag [5]);case "\u0027":if len (_bce .Params )!=1{return _gba ;
};_dcgfe ,_bfd :=_ccf .GetStringBytes (_bce .Params [0]);if !_bfd {return _bbb ;};_gaa .Log .Debug ("\u0027\u0020\u0073t\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_dcgfe ));_fb .ProcQ (_dcgfe ,_abg );case "\u0022":if len (_bce .Params )!=3{return _gba ;
};_cfca ,_ece :=_ccf .GetNumberAsFloat (_bce .Params [0]);if _ece !=nil {return _ece ;};_gaag ,_ece :=_ccf .GetNumberAsFloat (_bce .Params [1]);if _ece !=nil {return _ece ;};_dcd ,_ebf :=_ccf .GetStringBytes (_bce .Params [2]);if !_ebf {return _bbb ;};
_fb .ProcDQ (_dcd ,_cfca ,_gaag ,_abg );case "\u0054\u006a":if len (_bce .Params )!=1{return _gba ;};_dgbe ,_edd :=_ccf .GetStringBytes (_bce .Params [0]);if !_edd {return _bbb ;};_gaa .Log .Debug ("\u0054j\u0020s\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0060\u0025\u0073\u0060",string (_dgbe ));
_fb .ProcTj (_dgbe ,_abg );case "\u0054\u004a":if len (_bce .Params )!=1{return _gba ;};_fff ,_edgg :=_ccf .GetArray (_bce .Params [0]);if !_edgg {_gaa .Log .Debug ("\u0054\u0079\u0070\u0065\u003a\u0020\u0025\u0054",_fff );return _bbb ;};_gaa .Log .Debug ("\u0054\u004a\u0020\u0061\u0072\u0072\u0061\u0079\u003a\u0020\u0025\u002b\u0076",_fff );
for _ ,_fbee :=range _fff .Elements (){switch _gfcf :=_fbee .(type ){case *_ccf .PdfObjectString :if _gfcf !=nil {_fb .ProcTj (_gfcf .Bytes (),_abg );};case *_ccf .PdfObjectFloat ,*_ccf .PdfObjectInteger :_bge ,_cgb :=_ccf .GetNumberAsFloat (_gfcf );if _cgb ==nil {_fb .Translate (-_bge *0.001*_fb .Tf .Size *_fb .Th /100.0,0);
};};};case "\u0054\u0066":if len (_bce .Params )!=2{return _gba ;};_gaa .Log .Debug ("\u0025\u0023\u0076",_bce .Params );_fce ,_daag :=_ccf .GetName (_bce .Params [0]);if !_daag ||_fce ==nil {_gaa .Log .Debug ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0066\u006f\u006e\u0074\u0020\u006e\u0061m\u0065 \u006f\u0062\u006a\u0065\u0063\u0074\u003a \u0025\u0076",_bce .Params [0]);
return _bbb ;};_gaa .Log .Debug ("\u0046\u006f\u006e\u0074\u0020\u006e\u0061\u006d\u0065\u003a\u0020\u0025\u0073",_fce .String ());_ddb ,_dfdb :=_ccf .GetNumberAsFloat (_bce .Params [1]);if _dfdb !=nil {_gaa .Log .Debug ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0069z\u0065 \u006f\u0062\u006a\u0065\u0063\u0074\u003a \u0025\u0076",_bce .Params [1]);
return _bbb ;};_gfcg :=_abg .Width ();if _abg .Height ()> _gfcg {_gfcg =_abg .Height ();};_bbec :=float64 (_gfcg );if _ddb > _bbec {_gaa .Log .Debug ("\u0046\u006f\u006e\u0074\u0020\u0073\u0069\u007a\u0065 \u0065\u0078\u0063\u0065\u0065\u0064\u0073\u0020\u0069\u006d\u0061\u0067\u0065\u0020\u0064\u0069\u006d\u0065\u006e\u0073\u0069\u006f\u006e,\u0020\u0073c\u0061\u006ci\u006e\u0067\u0020\u0064\u006f\u0077\u006e\u0020\u0066\u006f\u006e\u0074\u0020si\u007a\u0065\u0020\u0066\u0072\u006f\u006d\u0020\u0025v\u0020\u0074\u006f\u0020\u0025\u0076",_ddb ,_bbec );
_ddb =_bbec ;};_gaa .Log .Debug ("\u0046\u006f\u006e\u0074\u0020\u0073\u0069\u007a\u0065\u003a\u0020\u0025\u0076",_ddb );_abed ,_ebfd :=_ade .GetFontByName (*_fce );if !_ebfd {_gaa .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0046\u006f\u006e\u0074\u0020\u0025s\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064",_fce .String ());
return _g .New ("\u0066\u006f\u006e\u0074\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};_gaa .Log .Debug ("\u0046\u006f\u006e\u0074\u003a\u0020\u0025\u0054",_abed );_fgee ,_daag :=_ccf .GetDict (_abed );if !_daag {_gaa .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075l\u0064\u0020\u006e\u006f\u0074\u0020\u0067e\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0069\u0063\u0074");
return _bbb ;};_ebe ,_dfdb :=_ca .NewPdfFontFromPdfObject (_fgee );if _dfdb !=nil {_gaa .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u006c\u006f\u0061\u0064\u0020\u0066\u006fn\u0074\u0020\u0066\u0072\u006fm\u0020\u006fb\u006a\u0065\u0063\u0074");
return _dfdb ;};_cdg :=_ebe .BaseFont ();if _cdg ==""{_cdg =_fce .String ();};_fdde ,_daag :=_ecg ._beb [_cdg ];if !_daag {_fdde ,_dfdb =_fe .NewTextFont (_ebe ,_ddb );if _dfdb !=nil {_gaa .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_dfdb );
};};if _fdde ==nil {if len (_cdg )> 7&&_cdg [6]=='+'{_cdg =_cdg [7:];};_gefc :=[]string {_cdg ,"\u0054i\u006de\u0073\u0020\u004e\u0065\u0077\u0020\u0052\u006f\u006d\u0061\u006e","\u0041\u0072\u0069a\u006c","D\u0065\u006a\u0061\u0056\u0075\u0020\u0053\u0061\u006e\u0073"};
for _ ,_aaggb :=range _gefc {_gaa .Log .Debug ("\u0044\u0045\u0042\u0055\u0047\u003a \u0073\u0065\u0061\u0072\u0063\u0068\u0069\u006e\u0067\u0020\u0073\u0079\u0073t\u0065\u006d\u0020\u0066\u006f\u006e\u0074 \u0060\u0025\u0073\u0060",_aaggb );if _fdde ,_daag =_ecg ._beb [_aaggb ];
_daag {if _fdde ==nil {continue ;};break ;};_gbb :=_ecg ._ceaf .Match (_aaggb );if _gbb ==nil {_gaa .Log .Debug ("c\u006f\u0075\u006c\u0064\u0020\u006eo\u0074\u0020\u0066\u0069\u006e\u0064\u0020\u0066\u006fn\u0074\u0020\u0066i\u006ce\u0020\u0025\u0073",_aaggb );
continue ;};if _aec ,_fgd :=_ecg ._bcd [_gbb .Filename ];_fgd {_fdde =_aec ;}else {_fdde ,_dfdb =_fe .NewTextFontFromPath (_gbb .Filename ,_ddb );if _dfdb !=nil {_gaa .Log .Debug ("c\u006f\u0075\u006c\u0064\u0020\u006eo\u0074\u0020\u006c\u006f\u0061\u0064\u0020\u0066\u006fn\u0074\u0020\u0066i\u006ce\u0020\u0025\u0073",_gbb .Filename );
_ecg ._beb [_aaggb ]=nil ;continue ;};_ecg ._bcd [_gbb .Filename ]=_fdde ;};_gaa .Log .Debug ("\u0053\u0075\u0062\u0073\u0074\u0069t\u0075\u0074\u0069\u006e\u0067\u0020\u0066\u006f\u006e\u0074\u0020\u0025\u0073 \u0077\u0069\u0074\u0068\u0020\u0025\u0073 \u0028\u0025\u0073\u0029",_cdg ,_gbb .Name ,_gbb .Filename );
_ecg ._beb [_aaggb ]=_fdde ;break ;};};if _fdde ==nil {_gaa .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020n\u006f\u0074\u0020\u0066\u0069\u006ed\u0020\u0061\u006e\u0079\u0020\u0073\u0075\u0069\u0074\u0061\u0062\u006c\u0065 \u0066\u006f\u006e\u0074");
return _g .New ("\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0066\u0069\u006e\u0064\u0020a\u006ey\u0020\u0073\u0075\u0069\u0074\u0061\u0062\u006c\u0065\u0020\u0066\u006f\u006e\u0074");};_fb .ProcTf (_fdde .WithSize (_ddb ,_ebe ));case "\u0042\u004d\u0043","\u0042\u0044\u0043":if len (_bce .Params )==2&&_bce .Params [0].String ()=="\u0041\u0072\u0074\u0069\u0066\u0061\u0063\u0074"{_dgg ,_bbf :=_ccf .GetDict (_bce .Params [1]);
if _bbf {if _dgg .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065")!=nil &&_dgg .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065").String ()=="\u0057a\u0074\u0065\u0072\u006d\u0061\u0072k"{_fb .Tr =_fe .TextRenderingModeInvisible ;};};};case "\u0045\u004d\u0043":default:_gaa .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0073u\u0070\u0070\u006f\u0072\u0074\u0065\u0064 \u006f\u0070\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u0073",_bce .Operand );
};_gd =_bce ;return nil ;});_fcf =_ege .Process (_dea );if _fcf !=nil {return _fcf ;};return nil ;};func _eaeg (_cgfa _ccf .PdfObject )(_dfd .Image ,error ){_fbcc ,_dccf :=_ccf .GetStream (_cgfa );if !_dccf {return nil ,nil ;};_gbde ,_dbf :=_ca .NewXObjectImageFromStream (_fbcc );
if _dbf !=nil {return nil ,_dbf ;};_bgbd ,_dbf :=_gbde .ToImage ();if _dbf !=nil {return nil ,_dbf ;};if _bgbd .Width ==0||_bgbd .Height ==0{_gaa .Log .Debug ("\u0073o\u0066t\u0020\u006d\u0061\u0073\u006b\u0020\u0069\u006d\u0061\u0067\u0065 \u0068\u0061\u0073\u0020i\u006e\u0076\u0061\u006c\u0069d\u0020\u0064\u0069\u006d\u0065\u006e\u0073\u0069\u006f\u006e\u0073\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061y\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006fr\u0072\u0065\u0063\u0074\u002e",_bgbd .Width ,_bgbd .Height );
return nil ,nil ;};return _dcf (_bgbd ),nil ;};func _eedga (_fcc string ,_ddcb _dfd .Image )error {_dgce ,_beg :=_cc .Create (_fcc );if _beg !=nil {return _beg ;};defer _dgce .Close ();return _ga .Encode (_dgce ,_ddcb );};var (_bbb =_g .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");
_gba =_g .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););

// NewImageDevice returns a new image device.
func NewImageDevice ()*ImageDevice {const _ce ="r\u0065\u006e\u0064\u0065r.\u004ee\u0077\u0049\u006d\u0061\u0067e\u0044\u0065\u0076\u0069\u0063\u0065";_f .TrackUse (_ce );_eg :=&ImageDevice {renderer :&renderer {},_bca :_de .BiLinear };return _eg ;};

// SetInterpolator sets the interpolation algorithm to use for image scaling and transformations.
// The interpolator determines the quality of image scaling. Available interpolators from
// golang.org/x/image/draw include:
//   - draw.NearestNeighbor (fastest, lowest quality)
//   - draw.ApproxBiLinear (fast, good quality)
//   - draw.BiLinear (balanced, default)
//   - draw.CatmullRom (high quality, slower)
func (_aa *ImageDevice )SetInterpolator (interpolator _de .Interpolator ){_aa ._bca =interpolator };

// PdfShadingType defines PDF shading types.
// Source: PDF32000_2008.pdf. Chapter 8.7.4.5
type PdfShadingType int64 ;func _gadb (_bfgd _fe .Gradient ,_gdcf *_ca .PdfFunctionType2 ,_geg _ca .PdfColorspace ,_cbad float64 ,_dbcd bool )(_fe .Gradient ,error ){switch _geg .(type ){case *_ca .PdfColorspaceDeviceRGB :if len (_gdcf .C0 )!=3||len (_gdcf .C1 )!=3{return nil ,_g .New ("\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u0020\u0052\u0047\u0042\u0020\u0063o\u006co\u0072\u0020\u0061\u0072\u0072\u0061\u0079\u0020\u006c\u0065\u006e\u0067\u0074\u0068");
};_aeac :=_gdcf .C0 ;_dae :=_gdcf .C1 ;if _dbcd {_bfgd .AddColorStop (0.0,_a .RGBA {R :uint8 (_aeac [0]*255),G :uint8 (_aeac [1]*255),B :uint8 (_aeac [2]*255),A :255});};_bfgd .AddColorStop (_cbad ,_a .RGBA {R :uint8 (_dae [0]*255),G :uint8 (_dae [1]*255),B :uint8 (_dae [2]*255),A :255});
case *_ca .PdfColorspaceDeviceCMYK :if len (_gdcf .C0 )!=4||len (_gdcf .C1 )!=4{return nil ,_g .New ("\u0069\u006e\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0043\u004d\u0059\u004b\u0020\u0063\u006f\u006c\u006f\u0072 \u0061\u0072\u0072\u0061\u0079\u0020\u006ce\u006e\u0067\u0074\u0068");
};_affc :=_gdcf .C0 ;_dcdb :=_gdcf .C1 ;if _dbcd {_bfgd .AddColorStop (0.0,_a .CMYK {C :uint8 (_affc [0]*255),M :uint8 (_affc [1]*255),Y :uint8 (_affc [2]*255),K :uint8 (_affc [3]*255)});};_bfgd .AddColorStop (_cbad ,_a .CMYK {C :uint8 (_dcdb [0]*255),M :uint8 (_dcdb [1]*255),Y :uint8 (_dcdb [2]*255),K :uint8 (_dcdb [3]*255)});
default:return nil ,_e .Errorf ("u\u006e\u0073\u0075\u0070\u0070\u006fr\u0074\u0065\u0064\u0020\u0063\u006f\u006c\u006f\u0072 \u0073\u0070\u0061c\u0065:\u0020\u0025\u0073",_geg .String ());};return _bfgd ,nil ;};type renderer struct{_gg float64 ;_beb map[string ]*_fe .TextFont ;
_bcd map[string ]*_fe .TextFont ;_ceaf *_bd .Finder ;};const (ShadingTypeFunctionBased PdfShadingType =1;ShadingTypeAxial PdfShadingType =2;ShadingTypeRadial PdfShadingType =3;ShadingTypeFreeForm PdfShadingType =4;ShadingTypeLatticeForm PdfShadingType =5;
ShadingTypeCoons PdfShadingType =6;ShadingTypeTensorProduct PdfShadingType =7;);func (_ddfg *renderer )processShading (_dcc _fe .Context ,_afff *_ca .PdfShading )(_fe .Gradient ,*_ccf .PdfObjectArray ,error ){_cfcf :=int64 (*_afff .ShadingType );if _cfcf ==int64 (ShadingTypeAxial ){return _ddfg .processLinearShading (_dcc ,_afff );
}else if _cfcf ==int64 (ShadingTypeRadial ){return _ddfg .processRadialShading (_dcc ,_afff );}else {_gaa .Log .Debug (_e .Sprintf ("\u0050r\u006f\u0063e\u0073\u0073\u0069n\u0067\u0020\u0067\u0072\u0061\u0064\u0069e\u006e\u0074\u0020\u0074\u0079\u0070e\u0020\u0025\u0064\u0020\u006e\u006f\u0074\u0020\u0079\u0065\u0074 \u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0065\u0064",_cfcf ));
};return nil ,nil ,nil ;};func (_dbbg *renderer )processGradient (_fbd _fe .Context ,_cfec *_bc .ContentStreamOperation ,_bgd *_ca .PdfPageResources ,_baec *_ccf .PdfObjectName )(_fe .Gradient ,error ){if _bbfd ,_dgbg :=_bgd .GetPatternByName (*_baec );
_dgbg &&_bbfd .IsShading (){_abdg :=_bbfd .GetAsShadingPattern ().Shading ;_cbb ,_ ,_eedg :=_dbbg .processShading (_fbd ,_abdg );if _eedg !=nil {return nil ,_eedg ;};return _cbb ,nil ;};return nil ,nil ;};func (_bac *renderer )processLinearShading (_cde _fe .Context ,_ccca *_ca .PdfShading )(_fe .Gradient ,*_ccf .PdfObjectArray ,error ){_afbc :=_ccca .GetContext ().(*_ca .PdfShadingType2 );
if len (_afbc .Function )==0{return nil ,nil ,_g .New ("\u006e\u006f\u0020\u0067\u0072\u0061\u0064i\u0065\u006e\u0074 \u0066\u0075\u006e\u0063t\u0069\u006f\u006e\u0020\u0066\u006f\u0075\u006e\u0064\u002c\u0020\u0073\u006b\u0069\u0070\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0073\u0069\u006f\u006e");
};_fbf ,_ddd :=_afbc .Coords .ToFloat64Array ();if _ddd !=nil {return nil ,nil ,_g .New ("\u0066\u0061\u0069l\u0065\u0064\u0020\u0067e\u0074\u0074\u0069\u006e\u0067\u0020\u0073h\u0061\u0064\u0069\u006e\u0067\u0020\u0070\u006f\u0073\u0069\u0074\u0069\u006f\u006e");
};_dbc :=_ccca .ColorSpace ;_bfcc ,_ccg :=_cde .Matrix ().Transform (_fbf [0],_fbf [1]);_aecg ,_egcg :=_cde .Matrix ().Transform (_fbf [2],_fbf [3]);_fddd :=_fa .NewLinearGradient (_bfcc ,_ccg ,_aecg ,_egcg );_ddfgd :=_ccf .MakeArrayFromFloats ([]float64 {0,0,1,1});
for _ ,_cba :=range _fbf {if _cba > 1{_ddfgd =_afbc .Coords ;break ;};};if _egff ,_cgfbb :=_afbc .Function [0].(*_ca .PdfFunctionType2 );_cgfbb {_fddd ,_ddd =_gadb (_fddd ,_egff ,_dbc ,1.0,true );}else if _gfeg ,_fbfd :=_afbc .Function [0].(*_ca .PdfFunctionType3 );
_fbfd {_fcfc :=append ([]float64 {0},_gfeg .Bounds ...);_fcfc =append (_fcfc ,1.0);_fddd ,_ddd =_cbgb (_fddd ,_gfeg ,_dbc ,_fcfc );};return _fddd ,_ddfgd ,_ddd ;};func _dff (_fdg _ccf .PdfObject ,_efac _a .Color )(_dfd .Image ,error ){_ecgc ,_fffa :=_ccf .GetStream (_fdg );
if !_fffa {return nil ,nil ;};_acba ,_bfb :=_ca .NewXObjectImageFromStream (_ecgc );if _bfb !=nil {return nil ,_bfb ;};_bed ,_bfb :=_acba .ToImage ();if _bfb !=nil {return nil ,_bfb ;};return _bebg (_bed ,_efac ),nil ;};func _cbgb (_eabf _fe .Gradient ,_ecc *_ca .PdfFunctionType3 ,_ffeg _ca .PdfColorspace ,_adcc []float64 )(_fe .Gradient ,error ){var _eaab error ;
for _aga :=0;_aga < len (_ecc .Functions );_aga ++{if _bebe ,_bdgd :=_ecc .Functions [_aga ].(*_ca .PdfFunctionType2 );_bdgd {_eabf ,_eaab =_gadb (_eabf ,_bebe ,_ffeg ,_adcc [_aga +1],_aga ==0);if _eaab !=nil {return nil ,_eaab ;};};};return _eabf ,nil ;
};

// RenderWithOpts converts the specified PDF page into an image, optionally flattens annotations and returns the result.
func (_db *ImageDevice )RenderWithOpts (page *_ca .PdfPage ,skipFlattening bool )(_dfd .Image ,error ){_be ,_eb :=page .GetMediaBox ();if _eb !=nil {return nil ,_eb ;};_be .Normalize ();_cf :=page .CropBox ;var _gfd ,_gb float64 ;if _cf !=nil {_cf .Normalize ();
_gfd ,_gb =_cf .Width (),_cf .Height ();};_ega :=page .Rotate ;_ed ,_cg ,_gbg ,_edc :=_be .Llx ,_be .Lly ,_be .Width (),_be .Height ();_bea :=_cd .IdentityMatrix ();if _ega !=nil &&*_ega %360!=0&&*_ega %90==0{_dfe :=-float64 (*_ega );_bb :=_addd (_gbg ,_edc ,_dfe );
_bea =_bea .Translate ((_bb .Width -_gbg )/2+_gbg /2,(_bb .Height -_edc )/2+_edc /2).Rotate (_dfe *_gf .Pi /180).Translate (-_gbg /2,-_edc /2);_gbg ,_edc =_bb .Width ,_bb .Height ;if _cf !=nil {_cgf :=_addd (_gfd ,_gb ,_dfe );_gfd ,_gb =_cgf .Width ,_cgf .Height ;
};};if _ed !=0||_cg !=0{_bea =_bea .Translate (-_ed ,-_cg );};_db ._gg =1.0;if _db .OutputWidth !=0{_cea :=_gbg ;if _cf !=nil {_cea =_gfd ;};_db ._gg =float64 (_db .OutputWidth )/_cea ;_gbg ,_edc ,_gfd ,_gb =_gbg *_db ._gg ,_edc *_db ._gg ,_gfd *_db ._gg ,_gb *_db ._gg ;
_bea =_cd .ScaleMatrix (_db ._gg ,_db ._gg ).Mult (_bea );};_ec :=_fa .NewContext (int (_gbg ),int (_edc ));_ec .SetInterpolator (_db ._bca );if _bba :=_db .renderPage (_ec ,page ,_bea ,skipFlattening );_bba !=nil {return nil ,_bba ;};_ff :=_ec .Image ();
if _cf !=nil {_bg ,_ab :=(_cf .Llx -_ed )*_db ._gg ,(_cf .Lly -_cg )*_db ._gg ;_bcc :=_dfd .Rect (0,0,int (_gfd ),int (_gb ));_abd :=_dfd .Pt (int (_bg ),int (_edc -_ab -_gb ));_ge :=_dfd .NewRGBA (_bcc );_b .Draw (_ge ,_bcc ,_ff ,_abd ,_b .Src );_ff =_ge ;
};return _ff ,nil ;};func _bebg (_eae *_ca .Image ,_fae _a .Color )_dfd .Image {_ced ,_daf :=int (_eae .Width ),int (_eae .Height );_agd :=_dfd .NewRGBA (_dfd .Rect (0,0,_ced ,_daf ));for _edba :=0;_edba < _daf ;_edba ++{for _fbeb :=0;_fbeb < _ced ;_fbeb ++{_gcg ,_eagg :=_eae .ColorAt (_fbeb ,_edba );
if _eagg !=nil {_gaa .Log .Debug ("\u0063o\u0075l\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069e\u0076\u0065\u0020\u0069m\u0061\u0067\u0065\u0020\u006da\u0073\u006b\u0020\u0076\u0061\u006c\u0075\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061y\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006fr\u0072\u0065\u0063\u0074\u002e",_fbeb ,_edba );
continue ;};_bcbbb ,_affb ,_cdee ,_ :=_gcg .RGBA ();var _ffg _a .Color ;if _bcbbb +_affb +_cdee ==0{_ffg =_fae ;}else {_ffg =_a .Transparent ;};_agd .Set (_fbeb ,_edba ,_ffg );};};return _agd ;};func _abgg (_dee ,_eabg _dfd .Image ,_ccfb _de .Interpolator )_dfd .Image {_eda ,_aeb :=_eabg .Bounds ().Size (),_dee .Bounds ().Size ();
_fdfg ,_cbd :=_eda .X ,_eda .Y ;if _aeb .X > _fdfg {_fdfg =_aeb .X ;};if _aeb .Y > _cbd {_cbd =_aeb .Y ;};_aada :=_dfd .Rect (0,0,_fdfg ,_cbd );if _eda .X !=_fdfg ||_eda .Y !=_cbd {_dggf :=_dfd .NewRGBA (_aada );_ccfb .Scale (_dggf ,_aada ,_eabg ,_eabg .Bounds (),_de .Over ,nil );
_eabg =_dggf ;};if _aeb .X !=_fdfg ||_aeb .Y !=_cbd {_dgcbf :=_dfd .NewRGBA (_aada );_ccfb .Scale (_dgcbf ,_aada ,_dee ,_dee .Bounds (),_de .Over ,nil );_dee =_dgcbf ;};_ggcc :=_dfd .NewRGBA (_aada );_de .DrawMask (_ggcc ,_aada ,_dee ,_dfd .Point {},_eabg ,_dfd .Point {},_de .Over );
return _ggcc ;};func _addd (_afg ,_ededc ,_eec float64 )_fg .BoundingBox {return _fg .Path {Points :[]_fg .Point {_fg .NewPoint (0,0).Rotate (_eec ),_fg .NewPoint (_afg ,0).Rotate (_eec ),_fg .NewPoint (0,_ededc ).Rotate (_eec ),_fg .NewPoint (_afg ,_ededc ).Rotate (_eec )}}.GetBoundingBox ();
};

// ImageDevice is used to render PDF pages to image targets.
type ImageDevice struct{*renderer ;

// OutputWidth represents the width of the rendered images in pixels.
// The heights of the output images are calculated based on the selected
// width and the original height of each rendered page.
OutputWidth int ;_bca _de .Interpolator ;};func _dgcb (_aaag string ,_abedd _dfd .Image ,_ead int )error {_gbbf ,_fbdb :=_cc .Create (_aaag );if _fbdb !=nil {return _fbdb ;};defer _gbbf .Close ();return _df .Encode (_gbbf ,_abedd ,&_df .Options {Quality :_ead });
};func (_fc *renderer )renderPage (_cb _fe .Context ,_cge *_ca .PdfPage ,_abf _cd .Matrix ,_def bool )error {if !_def {_feg :=_ca .FieldFlattenOpts {AnnotFilterFunc :func (_cce *_ca .PdfAnnotation )bool {switch _cce .GetContext ().(type ){case *_ca .PdfAnnotationLine :return true ;
case *_ca .PdfAnnotationSquare :return true ;case *_ca .PdfAnnotationCircle :return true ;case *_ca .PdfAnnotationPolygon :return true ;case *_ca .PdfAnnotationPolyLine :return true ;};return false ;}};_cfa :=_fge .FieldAppearance {};_ad :=_cge .FlattenFieldsWithOpts (_cfa ,&_feg );
if _ad !=nil {_gaa .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0064u\u0072\u0069n\u0067\u0020\u0061\u006e\u006e\u006f\u0074\u0061t\u0069\u006f\u006e\u0020\u0066\u006c\u0061\u0074\u0074\u0065\u006e\u0069n\u0067\u0020\u0025\u0076",_ad );};};_defg ,_gee :=_cge .GetAllContentStreams ();
if _gee !=nil {return _gee ;};if _bcac :=_abf ;!_bcac .Identity (){_defg =_e .Sprintf ("%\u002e\u0032\u0066\u0020\u0025\u002e2\u0066\u0020\u0025\u002e\u0032\u0066 \u0025\u002e\u0032\u0066\u0020\u0025\u002e2\u0066\u0020\u0025\u002e\u0032\u0066\u0020\u0063\u006d\u0020%\u0073",_bcac [0],_bcac [1],_bcac [3],_bcac [4],_bcac [6],_bcac [7],_defg );
};_cb .Translate (0,float64 (_cb .Height ()));_cb .Scale (1,-1);_cb .Push ();_cb .SetRGBA (1,1,1,1);_cb .DrawRectangle (0,0,float64 (_cb .Width ()),float64 (_cb .Height ()));_cb .Fill ();_cb .Pop ();_cb .SetLineWidth (1.0);_cb .SetRGBA (0,0,0,1);return _fc .renderContentStream (_cb ,_defg ,_cge .Resources );
};func _dcf (_gfgd *_ca .Image )_dfd .Image {_ecfd ,_dcad :=int (_gfgd .Width ),int (_gfgd .Height );if _ecfd <=0||_dcad <=0{_gaa .Log .Debug ("\u0069\u006e\u0076\u0061\u006c\u0069d\u0020\u0069\u006d\u0061\u0067\u0065\u0020\u0064\u0069\u006d\u0065\u006e\u0073i\u006f\u006e\u0073\u0020\u0028\u0025\u0064,\u0020\u0025\u0064\u0029",_ecfd ,_dcad );
return nil ;};_bbbf :=_dfd .NewRGBA (_dfd .Rect (0,0,_ecfd ,_dcad ));for _gbeg :=0;_gbeg < _dcad ;_gbeg ++{for _fed :=0;_fed < _ecfd ;_fed ++{_gfae ,_gddf :=_gfgd .ColorAt (_fed ,_gbeg );if _gddf !=nil {_gaa .Log .Debug ("\u0063o\u0075l\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069e\u0076\u0065\u0020\u0069m\u0061\u0067\u0065\u0020\u006da\u0073\u006b\u0020\u0076\u0061\u006c\u0075\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061y\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006fr\u0072\u0065\u0063\u0074\u002e",_fed ,_gbeg );
continue ;};_fab ,_gfb ,_abb ,_ :=_gfae .RGBA ();var _bfcb _a .Color ;if _fab +_gfb +_abb ==0{_bfcb =_a .Transparent ;}else {_efeg :=uint8 (_ccf .RGBToGrayscale (int (_fab >>8),int (_gfb >>8),int (_abb >>8)));_bfcb =_a .RGBA {R :255,G :255,B :255,A :_efeg };
};_bbbf .Set (_fed ,_gbeg ,_bfcb );};};return _bbbf ;};

// RenderToPath converts the specified PDF page into an image and saves the
// result at the specified location.
func (_bbc *ImageDevice )RenderToPath (page *_ca .PdfPage ,outputPath string )error {_aaf ,_ae :=_bbc .Render (page );if _ae !=nil {return _ae ;};_dbe :=_gc .ToLower (_d .Ext (outputPath ));if _dbe ==""{return _g .New ("\u0063\u006ful\u0064\u0020\u006eo\u0074\u0020\u0072\u0065cog\u006eiz\u0065\u0020\u006f\u0075\u0074\u0070\u0075t \u0066\u0069\u006c\u0065\u0020\u0074\u0079p\u0065");
};switch _dbe {case "\u002e\u0070\u006e\u0067":return _eedga (outputPath ,_aaf );case "\u002e\u006a\u0070\u0067","\u002e\u006a\u0070e\u0067":return _dgcb (outputPath ,_aaf ,100);};return _e .Errorf ("\u0075\u006e\u0072\u0065\u0063\u006fg\u006e\u0069\u007a\u0065\u0064\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020f\u0069\u006c\u0065\u0020\u0074\u0079\u0070e\u003a\u0020\u0025\u0073",_dbe );
};func (_agbd *renderer )processRadialShading (_eded _fe .Context ,_fbc *_ca .PdfShading )(_fe .Gradient ,*_ccf .PdfObjectArray ,error ){_gga :=_fbc .GetContext ().(*_ca .PdfShadingType3 );if len (_gga .Function )==0{return nil ,nil ,_g .New ("\u006e\u006f\u0020\u0067\u0072\u0061\u0064i\u0065\u006e\u0074 \u0066\u0075\u006e\u0063t\u0069\u006f\u006e\u0020\u0066\u006f\u0075\u006e\u0064\u002c\u0020\u0073\u006b\u0069\u0070\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0073\u0069\u006f\u006e");
};_ffff ,_gae :=_gga .Coords .ToFloat64Array ();if _gae !=nil {return nil ,nil ,_g .New ("\u0066\u0061\u0069l\u0065\u0064\u0020\u0067e\u0074\u0074\u0069\u006e\u0067\u0020\u0073h\u0061\u0064\u0069\u006e\u0067\u0020\u0070\u006f\u0073\u0069\u0074\u0069\u006f\u006e");
};_gfee :=_fbc .ColorSpace ;_eeag :=_ccf .MakeArrayFromFloats ([]float64 {0,0,1,1});var _gaac ,_eac ,_geed ,_cca ,_bbaf ,_feea float64 ;_gaac ,_eac =_eded .Matrix ().Transform (_ffff [0],_ffff [1]);_geed ,_cca =_eded .Matrix ().Transform (_ffff [3],_ffff [4]);
_bbaf ,_ =_eded .Matrix ().Transform (_ffff [2],0);_feea ,_ =_eded .Matrix ().Transform (_ffff [5],0);_egec ,_ :=_eded .Matrix ().Translation ();_bbaf -=_egec ;_feea -=_egec ;for _fbg ,_dab :=range _ffff {if _fbg ==2||_fbg ==5{continue ;};if _dab > 1.0{_afd :=_gf .Min (_gaac -_bbaf ,_geed -_feea );
_ccbe :=_gf .Min (_eac -_bbaf ,_cca -_feea );_adb :=_gf .Max (_gaac +_bbaf ,_geed +_feea );_agf :=_gf .Max (_eac +_bbaf ,_cca +_feea );_add :=_adb -_afd ;_ggeg :=_ccbe -_agf ;_eeag =_ccf .MakeArrayFromFloats ([]float64 {_afd ,_ccbe ,_add ,_ggeg });break ;
};};_dgae :=_fa .NewRadialGradient (_gaac ,_eac ,_bbaf ,_geed ,_cca ,_feea );if _gac ,_ageg :=_gga .Function [0].(*_ca .PdfFunctionType2 );_ageg {_dgae ,_gae =_gadb (_dgae ,_gac ,_gfee ,1.0,true );}else if _gcbf ,_ecb :=_gga .Function [0].(*_ca .PdfFunctionType3 );
_ecb {_gfa :=append ([]float64 {0},_gcbf .Bounds ...);_gfa =append (_gfa ,1.0);_dgae ,_gae =_cbgb (_dgae ,_gcbf ,_gfee ,_gfa );};if _gae !=nil {return nil ,nil ,_gae ;};return _dgae ,_eeag ,nil ;};

// Render converts the specified PDF page into an image, flattens annotations by default and returns the result.
func (_af *ImageDevice )Render (page *_ca .PdfPage )(_dfd .Image ,error ){return _af .RenderWithOpts (page ,false );};