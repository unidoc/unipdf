//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package imagerender ;import (_fc "errors";_d "fmt";_cc "github.com/unidoc/freetype/raster";_bf "github.com/unidoc/unipdf/v4/common";_g "github.com/unidoc/unipdf/v4/internal/precision";_bb "github.com/unidoc/unipdf/v4/internal/transform";_ec "github.com/unidoc/unipdf/v4/render/internal/context";
_gf "golang.org/x/image/draw";_be "golang.org/x/image/font";_aa "golang.org/x/image/math/f64";_ed "golang.org/x/image/math/fixed";_f "image";_eg "image/color";_c "image/draw";_a "math";_bc "sort";_b "strings";);func (_ffa *Context )LineWidth ()float64 {return _ffa ._agd };
func (_ecfb *Context )StrokePreserve (){var _gbd _cc .Painter ;if _ecfb ._gg ==nil {if _bgb ,_ddf :=_ecfb ._de .(*solidPattern );_ddf {_gfcf :=_cc .NewRGBAPainter (_ecfb ._bfe );_gfcf .SetColor (_bgb ._caa );_gbd =_gfcf ;};};if _gbd ==nil {_gbd =_gee (_ecfb ._bfe ,_ecfb ._gg ,_ecfb ._de );
};_ecfb .stroke (_gbd );};func _ecb (_cbf ,_dg ,_ea ,_dad ,_af ,_ccc ,_gec ,_daf float64 )[]_bb .Point {_agb :=(_a .Hypot (_ea -_cbf ,_dad -_dg )+_a .Hypot (_af -_ea ,_ccc -_dad )+_a .Hypot (_gec -_af ,_daf -_ccc ));_fbc :=int (_agb +0.5);if _fbc < 4{_fbc =4;
};_dc :=float64 (_fbc )-1;_ecf :=make ([]_bb .Point ,_fbc );for _gce :=0;_gce < _fbc ;_gce ++{_bgf :=float64 (_gce )/_dc ;_bbf ,_dcg :=_cg (_cbf ,_dg ,_ea ,_dad ,_af ,_ccc ,_gec ,_daf ,_bgf );_ecf [_gce ]=_bb .NewPoint (_bbf ,_dcg );};return _ecf ;};func (_gb *Context )SetStrokeRGBA (r ,g ,b ,a float64 ){_cccf :=_eg .NRGBA {uint8 (r *255),uint8 (g *255),uint8 (b *255),uint8 (a *255)};
_gb ._de =_fae (_cccf );};func (_egac *Context )stroke (_aee _cc .Painter ){_cdbe :=_egac ._fd ;if len (_egac ._fa )> 0{_cdbe =_febd (_cdbe ,_egac ._fa ,_egac ._cgc );}else {_cdbe =_ddcc (_gbbc (_cdbe ));};_add :=_egac ._aagg ;_add .UseNonZeroWinding =true ;
_add .Clear ();_ebg :=(_egac ._bde .ScalingFactorX ()+_egac ._bde .ScalingFactorY ())/2;_add .AddStroke (_cdbe ,_bgaa (_egac ._agd *_ebg ),_egac .capper (),_egac .joiner ());_add .Rasterize (_aee );};func (_ccb *Context )FillPattern ()_ec .Pattern {return _ccb ._ae };
func (_bed *Context )DrawEllipse (x ,y ,rx ,ry float64 ){_bed .NewSubPath ();_bed .DrawEllipticalArc (x ,y ,rx ,ry ,0,2*_a .Pi );_bed .ClosePath ();};func _fae (_ace _eg .Color )_ec .Pattern {return &solidPattern {_caa :_ace }};func NewContext (width ,height int )*Context {return NewContextForRGBA (_f .NewRGBA (_f .Rect (0,0,width ,height )));
};func (_efcb *Context )MeasureString (s string ,face _be .Face )(_aacf ,_eeg float64 ){_ecbc :=&_be .Drawer {Face :face };_ffgaa :=_ecbc .MeasureString (s );return float64 (_ffgaa >>6),_efcb ._cgf .Tf .Size ;};func (_bgd *Context )RotateAbout (angle ,x ,y float64 ){_bgd .Translate (x ,y );
_bgd .Rotate (angle );_bgd .Translate (-x ,-y );};func (_fddd *surfacePattern )ColorAt (x ,y int )_eg .Color {_dgc :=_fddd ._fgcc .Bounds ();switch _fddd ._cfeb {case _aae :if y >=_dgc .Dy (){return _eg .Transparent ;};case _ebcgc :if x >=_dgc .Dx (){return _eg .Transparent ;
};case _dgg :if x >=_dgc .Dx ()||y >=_dgc .Dy (){return _eg .Transparent ;};};x =x %_dgc .Dx ()+_dgc .Min .X ;y =y %_dgc .Dy ()+_dgc .Min .Y ;return _fddd ._fgcc .At (x ,y );};func _adg (_adaa float64 ,_fagf stops )_eg .Color {if _adaa <=0.0||len (_fagf )==1{return _fagf [0]._dce ;
};_aedc :=_fagf [len (_fagf )-1];if _adaa >=_aedc ._ead {return _aedc ._dce ;};for _ecbb ,_fdg :=range _fagf [1:]{if _adaa < _fdg ._ead {_adaa =(_adaa -_fagf [_ecbb ]._ead )/(_fdg ._ead -_fagf [_ecbb ]._ead );return _gfad (_fagf [_ecbb ]._dce ,_fdg ._dce ,_adaa );
};};return _aedc ._dce ;};func (_fec *Context )Clear (){_acg :=_f .NewUniform (_fec ._bfb );_gf .Draw (_fec ._bfe ,_fec ._bfe .Bounds (),_acg ,_f .Point {},_gf .Src );};func (_egdd stops )Less (i ,j int )bool {return _egdd [i ]._ead < _egdd [j ]._ead };
func (_fab *Context )Identity (){_fab ._bde =_bb .IdentityMatrix ()};func (_egg *Context )ClipPreserve (){_feb :=_f .NewAlpha (_f .Rect (0,0,_egg ._ddb ,_egg ._ad ));_acc :=_cc .NewAlphaOverPainter (_feb );_egg .fill (_acc );if _egg ._gg ==nil {_egg ._gg =_feb ;
}else {_abf :=_f .NewAlpha (_f .Rect (0,0,_egg ._ddb ,_egg ._ad ));_gf .DrawMask (_abf ,_abf .Bounds (),_feb ,_f .Point {},_egg ._gg ,_f .Point {},_gf .Over );_egg ._gg =_abf ;};};func (_ceb *Context )DrawRoundedRectangle (x ,y ,w ,h ,r float64 ){_agf ,_adb ,_bcc ,_gbb :=x ,x +r ,x +w -r ,x +w ;
_ggf ,_fbg ,_fbca ,_gfaf :=y ,y +r ,y +h -r ,y +h ;_ceb .NewSubPath ();_ceb .MoveTo (_adb ,_ggf );_ceb .LineTo (_bcc ,_ggf );_ceb .DrawArc (_bcc ,_fbg ,r ,_dcdg (270),_dcdg (360));_ceb .LineTo (_gbb ,_fbca );_ceb .DrawArc (_bcc ,_fbca ,r ,_dcdg (0),_dcdg (90));
_ceb .LineTo (_adb ,_gfaf );_ceb .DrawArc (_adb ,_fbca ,r ,_dcdg (90),_dcdg (180));_ceb .LineTo (_agf ,_fbg );_ceb .DrawArc (_adb ,_fbg ,r ,_dcdg (180),_dcdg (270));_ceb .ClosePath ();};func (_bbg *Context )SetMatrix (m _bb .Matrix ){_bbg ._bde =m };func _dd (_bcb ,_ga ,_df ,_ag ,_cce ,_cd ,_cdg float64 )(_ge ,_da float64 ){_fe :=1-_cdg ;
_gc :=_fe *_fe ;_fcb :=2*_fe *_cdg ;_ef :=_cdg *_cdg ;_ge =_gc *_bcb +_fcb *_df +_ef *_cce ;_da =_gc *_ga +_fcb *_ag +_ef *_cd ;return ;};func _abd (_ffbd _ed .Int26_6 )float64 {const _bee ,_egef =6,1<<6-1;if _ffbd >=0{return float64 (_ffbd >>_bee )+float64 (_ffbd &_egef )/64;
};_ffbd =-_ffbd ;if _ffbd >=0{return -(float64 (_ffbd >>_bee )+float64 (_ffbd &_egef )/64);};return 0;};func _dcdg (_acd float64 )float64 {return _acd *_a .Pi /180};func _dge (_dbfe string )(_gaca ,_ebbe ,_bgfb ,_dgbc int ){_dbfe =_b .TrimPrefix (_dbfe ,"\u0023");
_dgbc =255;if len (_dbfe )==3{_gebb :="\u00251\u0078\u0025\u0031\u0078\u0025\u0031x";_d .Sscanf (_dbfe ,_gebb ,&_gaca ,&_ebbe ,&_bgfb );_gaca |=_gaca <<4;_ebbe |=_ebbe <<4;_bgfb |=_bgfb <<4;};if len (_dbfe )==6{_afgf :="\u0025\u0030\u0032x\u0025\u0030\u0032\u0078\u0025\u0030\u0032\u0078";
_d .Sscanf (_dbfe ,_afgf ,&_gaca ,&_ebbe ,&_bgfb );};if len (_dbfe )==8{_bdca :="\u0025\u00302\u0078\u0025\u00302\u0078\u0025\u0030\u0032\u0078\u0025\u0030\u0032\u0078";_d .Sscanf (_dbfe ,_bdca ,&_gaca ,&_ebbe ,&_bgfb ,&_dgbc );};return ;};func (_eed stops )Swap (i ,j int ){_eed [i ],_eed [j ]=_eed [j ],_eed [i ]};
func (_badc *Context )Push (){_dfgc :=*_badc ;_badc ._afe =append (_badc ._afe ,&_dfgc )};func (_gbef *Context )Translate (x ,y float64 ){_gbef ._bde =_gbef ._bde .Translate (x ,y )};func (_efd *Context )joiner ()_cc .Joiner {switch _efd ._bdd {case _ec .LineJoinBevel :return _cc .BevelJoiner ;
case _ec .LineJoinRound :return _cc .RoundJoiner ;};return nil ;};func (_fdb *Context )capper ()_cc .Capper {switch _fdb ._aec {case _ec .LineCapButt :return _cc .ButtCapper ;case _ec .LineCapRound :return _cc .RoundCapper ;case _ec .LineCapSquare :return _cc .SquareCapper ;
};return nil ;};func (_efb *Context )SetRGBA (r ,g ,b ,a float64 ){_ ,_ ,_ ,_fcff :=_efb ._bfb .RGBA ();if _fcff > 0&&_fcff !=65535&&a ==1{a =float64 (_fcff )/65535;};_efb ._bfb =_eg .NRGBA {uint8 (r *255),uint8 (g *255),uint8 (b *255),uint8 (a *255)};
_efb .setFillAndStrokeColor (_efb ._bfb );};func (_ede *Context )DrawStringAnchored (s string ,face _be .Face ,x ,y ,ax ,ay float64 ){_egdf ,_efg :=_ede .MeasureString (s ,face );_ede .drawString (s ,face ,x -ax *_egdf ,y +ay *_efg );};func (_dbe *Context )drawRegularPolygon (_fbab int ,_bfaf ,_bdg ,_febg ,_gced float64 ){_cfg :=2*_a .Pi /float64 (_fbab );
_gced -=_a .Pi /2;if _fbab %2==0{_gced +=_cfg /2;};_dbe .NewSubPath ();for _cfa :=0;_cfa < _fbab ;_cfa ++{_adc :=_gced +_cfg *float64 (_cfa );_dbe .LineTo (_bfaf +_febg *_a .Cos (_adc ),_bdg +_febg *_a .Sin (_adc ));};_dbe .ClosePath ();};type stop struct{_ead float64 ;
_dce _eg .Color ;};func _ddcc (_bcg [][]_bb .Point )_cc .Path {var _baa _cc .Path ;for _ ,_ccgeg :=range _bcg {var _eaf _ed .Point26_6 ;for _bcgf ,_bgbg :=range _ccgeg {_efdd :=_dgdc (_bgbg );if _bcgf ==0{_baa .Start (_efdd );}else {_gaa :=_efdd .X -_eaf .X ;
_adda :=_efdd .Y -_eaf .Y ;if _gaa < 0{_gaa =-_gaa ;};if _adda < 0{_adda =-_adda ;};if _gaa +_adda > 8{_baa .Add1 (_efdd );};};_eaf =_efdd ;};};return _baa ;};func (_bge stops )Len ()int {return len (_bge )};func _dafaf (_dgdef [][]_bb .Point ,_gcfgg []float64 ,_aaa float64 )[][]_bb .Point {var _eade [][]_bb .Point ;
if len (_gcfgg )==0{return _dgdef ;};if len (_gcfgg )==1{_gcfgg =append (_gcfgg ,_gcfgg [0]);};for _ ,_cfe :=range _dgdef {if len (_cfe )< 2{continue ;};_agda :=_cfe [0];_bec :=1;_cbe :=0;_facg :=0.0;if _aaa !=0{var _bbgb float64 ;for _ ,_edec :=range _gcfgg {_bbgb +=_edec ;
};_aaa =_a .Mod (_aaa ,_bbgb );if _aaa < 0{_aaa +=_bbgb ;};for _dcdc ,_gdfb :=range _gcfgg {_aaa -=_gdfb ;if _aaa < 0{_cbe =_dcdc ;_facg =_gdfb +_aaa ;break ;};};};var _fbbd []_bb .Point ;_fbbd =append (_fbbd ,_agda );for _bec < len (_cfe ){_ced :=_gcfgg [_cbe ];
_fdge :=_cfe [_bec ];_beb :=_agda .Distance (_fdge );_fabe :=_ced -_facg ;if _beb > _fabe {_fbd :=_fabe /_beb ;_dba :=_agda .Interpolate (_fdge ,_fbd );_fbbd =append (_fbbd ,_dba );if _cbe %2==0&&len (_fbbd )> 1{_eade =append (_eade ,_fbbd );};_fbbd =nil ;
_fbbd =append (_fbbd ,_dba );_facg =0;_agda =_dba ;_cbe =(_cbe +1)%len (_gcfgg );}else {_fbbd =append (_fbbd ,_fdge );_agda =_fdge ;_facg +=_beb ;_bec ++;};};if _cbe %2==0&&len (_fbbd )> 1{_eade =append (_eade ,_fbbd );};};return _eade ;};var (_ca =_fae (_eg .White );
_db =_fae (_eg .Black ););func (_bcd *Context )SetColor (c _eg .Color ){_bcd .setFillAndStrokeColor (c )};type stops []stop ;func (_dfc *Context )ScaleAbout (sx ,sy ,x ,y float64 ){_dfc .Translate (x ,y );_dfc .Scale (sx ,sy );_dfc .Translate (-x ,-y );
};func (_fde *Context )SetRGBA255 (r ,g ,b ,a int ){_fde ._bfb =_eg .NRGBA {uint8 (r ),uint8 (g ),uint8 (b ),uint8 (a )};_fde .setFillAndStrokeColor (_fde ._bfb );};func (_aed *Context )DrawCircle (x ,y ,r float64 ){_aed .NewSubPath ();_aed .DrawEllipticalArc (x ,y ,r ,r ,0,2*_a .Pi );
_aed .ClosePath ();};func (_cab *Context )FillPreserve (){var _dafa _cc .Painter ;if _cab ._gg ==nil {if _afce ,_ebgg :=_cab ._ae .(*solidPattern );_ebgg {_afgd :=_cc .NewRGBAPainter (_cab ._bfe );_afgd .SetColor (_afce ._caa );_dafa =_afgd ;};};if _dafa ==nil {_dafa =_gee (_cab ._bfe ,_cab ._gg ,_cab ._ae );
};_cab .fill (_dafa );};func (_addg *Context )ShearAbout (sx ,sy ,x ,y float64 ){_addg .Translate (x ,y );_addg .Shear (sx ,sy );_addg .Translate (-x ,-y );};func (_eab *Context )SetLineJoin (lineJoin _ec .LineJoin ){_eab ._bdd =lineJoin };func (_cga *Context )Fill (){_cga .FillPreserve ();
_cga .ClearPath ()};func (_abac *Context )ClosePath (){if _abac ._afc {_fgc :=_dgdc (_abac ._bgg );_abac ._fd .Add1 (_fgc );_abac ._ff .Add1 (_fgc );_abac ._cde =_abac ._bgg ;};};type radialGradient struct{_fge ,_dede ,_eac circle ;_dege ,_gea float64 ;
_egb float64 ;_eag stops ;};func (_dgde *Context )Matrix ()_bb .Matrix {return _dgde ._bde };func (_ddfg *Context )Scale (x ,y float64 ){_ddfg ._bde =_ddfg ._bde .Scale (x ,y )};func (_gda *Context )SetStrokeStyle (pattern _ec .Pattern ){_gda ._de =pattern };
func NewContextForRGBA (im *_f .RGBA )*Context {_gfa :=im .Bounds ().Size ().X ;_dgd :=im .Bounds ().Size ().Y ;return &Context {_ddb :_gfa ,_ad :_dgd ,_aagg :_cc .NewRasterizer (_gfa ,_dgd ),_bfe :im ,_bfb :_eg .Transparent ,_ae :_ca ,_de :_db ,_agd :1,_dde :_ec .FillRuleWinding ,_bde :_bb .IdentityMatrix (),_cgf :_ec .NewTextState ()};
};func _gbbc (_ecfc _cc .Path )[][]_bb .Point {var _ecff [][]_bb .Point ;var _dfdf []_bb .Point ;var _ffaa ,_fee float64 ;for _fgee :=0;_fgee < len (_ecfc );{switch _ecfc [_fgee ]{case 0:if len (_dfdf )> 0{_ecff =append (_ecff ,_dfdf );_dfdf =nil ;};_afed :=_abd (_ecfc [_fgee +1]);
_faf :=_abd (_ecfc [_fgee +2]);_dfdf =append (_dfdf ,_bb .NewPoint (_afed ,_faf ));_ffaa ,_fee =_afed ,_faf ;_fgee +=4;case 1:_gafb :=_abd (_ecfc [_fgee +1]);_fecg :=_abd (_ecfc [_fgee +2]);_dfdf =append (_dfdf ,_bb .NewPoint (_gafb ,_fecg ));_ffaa ,_fee =_gafb ,_fecg ;
_fgee +=4;case 2:_agae :=_abd (_ecfc [_fgee +1]);_dae :=_abd (_ecfc [_fgee +2]);_gbdc :=_abd (_ecfc [_fgee +3]);_ccgg :=_abd (_ecfc [_fgee +4]);_bbe :=_bea (_ffaa ,_fee ,_agae ,_dae ,_gbdc ,_ccgg );_dfdf =append (_dfdf ,_bbe ...);_ffaa ,_fee =_gbdc ,_ccgg ;
_fgee +=6;case 3:_bdf :=_abd (_ecfc [_fgee +1]);_dfca :=_abd (_ecfc [_fgee +2]);_bdc :=_abd (_ecfc [_fgee +3]);_cbb :=_abd (_ecfc [_fgee +4]);_ebaa :=_abd (_ecfc [_fgee +5]);_bbc :=_abd (_ecfc [_fgee +6]);_ggeg :=_ecb (_ffaa ,_fee ,_bdf ,_dfca ,_bdc ,_cbb ,_ebaa ,_bbc );
_dfdf =append (_dfdf ,_ggeg ...);_ffaa ,_fee =_ebaa ,_bbc ;_fgee +=8;default:_bf .Log .Debug ("\u0057\u0041\u0052\u004e: \u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0070\u0061\u0074\u0068\u003a\u0020%\u0076",_ecfc );return _ecff ;};};if len (_dfdf )> 0{_ecff =append (_ecff ,_dfdf );
};return _ecff ;};type repeatOp int ;func (_gcede *Context )DrawImage (im _f .Image ,x ,y int ){_gcede .DrawImageAnchored (im ,x ,y ,0,0)};func _bbgg (_bgff _f .Image ,_gbcc repeatOp )_ec .Pattern {return &surfacePattern {_fgcc :_bgff ,_cfeb :_gbcc };};
func (_egdg *Context )Clip (){_egdg .ClipPreserve ();_egdg .ClearPath ()};func (_fcdg *radialGradient )ColorAt (x ,y int )_eg .Color {if len (_fcdg ._eag )==0{return _eg .Transparent ;};_gaf ,_cbfb :=float64 (x )+0.5-_fcdg ._fge ._fcag ,float64 (y )+0.5-_fcdg ._fge ._ggc ;
_bgdd :=_eabe (_gaf ,_cbfb ,_fcdg ._fge ._bdga ,_fcdg ._eac ._fcag ,_fcdg ._eac ._ggc ,_fcdg ._eac ._bdga );_caba :=_eabe (_gaf ,_cbfb ,-_fcdg ._fge ._bdga ,_gaf ,_cbfb ,_fcdg ._fge ._bdga );if _fcdg ._dege ==0{if _bgdd ==0{return _eg .Transparent ;};_acgg :=0.5*_caba /_bgdd ;
if _acgg *_fcdg ._eac ._bdga >=_fcdg ._egb {return _adg (_acgg ,_fcdg ._eag );};return _eg .Transparent ;};_eaa :=_eabe (_bgdd ,_fcdg ._dege ,0,_bgdd ,-_caba ,0);if _eaa >=0{_gafd :=_a .Sqrt (_eaa );_aca :=(_bgdd +_gafd )*_fcdg ._gea ;_cdf :=(_bgdd -_gafd )*_fcdg ._gea ;
if _aca *_fcdg ._eac ._bdga >=_fcdg ._egb {return _adg (_aca ,_fcdg ._eag );}else if _cdf *_fcdg ._eac ._bdga >=_fcdg ._egb {return _adg (_cdf ,_fcdg ._eag );};};return _eg .Transparent ;};func (_aba *Context )Height ()int {return _aba ._ad };type patternPainter struct{_eca *_f .RGBA ;
_dcee *_f .Alpha ;_cgga _ec .Pattern ;};func _gfad (_cdd ,_cgd _eg .Color ,_fbe float64 )_eg .Color {_fcg ,_dab ,_agfa ,_bade :=_cdd .RGBA ();_dbc ,_eccf ,_cbg ,_afad :=_cgd .RGBA ();return _eg .RGBA {_edff (_fcg ,_dbc ,_fbe ),_edff (_dab ,_eccf ,_fbe ),_edff (_agfa ,_cbg ,_fbe ),_edff (_bade ,_afad ,_fbe )};
};func (_cdgc *linearGradient )AddColorStop (offset float64 ,color _eg .Color ){_cdgc ._ece =append (_cdgc ._ece ,stop {_ead :offset ,_dce :color });_bc .Sort (_cdgc ._ece );};func (_gcec *Context )SetFillStyle (pattern _ec .Pattern ){if _beg ,_eabf :=pattern .(*solidPattern );
_eabf {_gcec ._bfb =_beg ._caa ;};_gcec ._ae =pattern ;};func _fdbc (_fcca _f .Image )*_f .RGBA {_cadd :=_fcca .Bounds ();_cgfe :=_f .NewRGBA (_cadd );_c .Draw (_cgfe ,_cadd ,_fcca ,_cadd .Min ,_c .Src );return _cgfe ;};func (_egcd *Context )SetRGB (r ,g ,b float64 ){_egcd .SetRGBA (r ,g ,b ,1)};
func (_efbb *Context )Pop (){_ebae :=*_efbb ;_dbea :=_efbb ._afe ;_abc :=_dbea [len (_dbea )-1];*_efbb =*_abc ;_efbb ._fd =_ebae ._fd ;_efbb ._ff =_ebae ._ff ;_efbb ._bgg =_ebae ._bgg ;_efbb ._cde =_ebae ._cde ;_efbb ._afc =_ebae ._afc ;};func (_ega *Context )SetDashOffset (offset float64 ){_ega ._cgc =offset };
type circle struct{_fcag ,_ggc ,_bdga float64 };func _bgaa (_cbef float64 )_ed .Int26_6 {_cbef =_g .RoundDefault (_cbef );return _ed .Int26_6 (_cbef *64)};type linearGradient struct{_afa ,_fcd ,_ggb ,_efdb float64 ;_ece stops ;};type surfacePattern struct{_fgcc _f .Image ;
_cfeb repeatOp ;};func (_gge *Context )Transform (x ,y float64 )(_begg ,_fbba float64 ){return _gge ._bde .Transform (x ,y )};type Context struct{_ddb int ;_ad int ;_aagg *_cc .Rasterizer ;_bfe *_f .RGBA ;_gg *_f .Alpha ;_bfb _eg .Color ;_ae _ec .Pattern ;
_de _ec .Pattern ;_fd _cc .Path ;_ff _cc .Path ;_bgg _bb .Point ;_cde _bb .Point ;_afc bool ;_fa []float64 ;_cgc float64 ;_agd float64 ;_aec _ec .LineCap ;_bdd _ec .LineJoin ;_dde _ec .FillRule ;_bde _bb .Matrix ;_cgf _ec .TextState ;_afe []*Context ;};
func _gee (_faea *_f .RGBA ,_fefe *_f .Alpha ,_cad _ec .Pattern )*patternPainter {return &patternPainter {_faea ,_fefe ,_cad };};func (_gbe *Context )LineTo (x ,y float64 ){if !_gbe ._afc {_gbe .MoveTo (x ,y );}else {x ,y =_gbe .Transform (x ,y );_ddc :=_bb .NewPoint (x ,y );
_eec :=_dgdc (_ddc );_gbe ._fd .Add1 (_eec );_gbe ._ff .Add1 (_eec );_gbe ._cde =_ddc ;};};func (_ddg *Context )DrawPoint (x ,y ,r float64 ){_ddg .Push ();_gdg ,_ffb :=_ddg .Transform (x ,y );_ddg .Identity ();_ddg .DrawCircle (_gdg ,_ffb ,r );_ddg .Pop ();
};func NewRadialGradient (x0 ,y0 ,r0 ,x1 ,y1 ,r1 float64 )_ec .Gradient {_bfcc :=circle {x0 ,y0 ,r0 };_ecc :=circle {x1 ,y1 ,r1 };_gdag :=circle {x1 -x0 ,y1 -y0 ,r1 -r0 };_aadb :=_eabe (_gdag ._fcag ,_gdag ._ggc ,-_gdag ._bdga ,_gdag ._fcag ,_gdag ._ggc ,_gdag ._bdga );
var _cee float64 ;if _aadb !=0{_cee =1.0/_aadb ;};_bgfa :=-_bfcc ._bdga ;_fdd :=&radialGradient {_fge :_bfcc ,_dede :_ecc ,_eac :_gdag ,_dege :_aadb ,_gea :_cee ,_egb :_bgfa };return _fdd ;};func (_gdd *radialGradient )AddColorStop (offset float64 ,color _eg .Color ){_gdd ._eag =append (_gdd ._eag ,stop {_ead :offset ,_dce :color });
_bc .Sort (_gdd ._eag );};func (_gbeb *linearGradient )ColorAt (x ,y int )_eg .Color {if len (_gbeb ._ece )==0{return _eg .Transparent ;};_fgcb ,_ebcg :=float64 (x ),float64 (y );_bgfd ,_egff ,_bfg ,_gcfg :=_gbeb ._afa ,_gbeb ._fcd ,_gbeb ._ggb ,_gbeb ._efdb ;
_aga ,_gbc :=_bfg -_bgfd ,_gcfg -_egff ;if _gbc ==0&&_aga !=0{return _adg ((_fgcb -_bgfd )/_aga ,_gbeb ._ece );};if _aga ==0&&_gbc !=0{return _adg ((_ebcg -_egff )/_gbc ,_gbeb ._ece );};_gdgg :=_aga *(_fgcb -_bgfd )+_gbc *(_ebcg -_egff );if _gdgg < 0{return _gbeb ._ece [0]._dce ;
};_eeb :=_a .Hypot (_aga ,_gbc );_gab :=((_fgcb -_bgfd )*-_gbc +(_ebcg -_egff )*_aga )/(_eeb *_eeb );_ceg ,_bca :=_bgfd +_gab *-_gbc ,_egff +_gab *_aga ;_fdcc :=_a .Hypot (_fgcb -_ceg ,_ebcg -_bca )/_eeb ;return _adg (_fdcc ,_gbeb ._ece );};func (_ffg *Context )setFillAndStrokeColor (_dee _eg .Color ){_ffg ._bfb =_dee ;
_ffg ._ae =_fae (_dee );_ffg ._de =_fae (_dee );};func (_gga *Context )QuadraticTo (x1 ,y1 ,x2 ,y2 float64 ){if !_gga ._afc {_gga .MoveTo (x1 ,y1 );};x1 ,y1 =_gga .Transform (x1 ,y1 );x2 ,y2 =_gga .Transform (x2 ,y2 );_fba :=_bb .NewPoint (x1 ,y1 );_ce :=_bb .NewPoint (x2 ,y2 );
_fac :=_dgdc (_fba );_ecg :=_dgdc (_ce );_gga ._fd .Add2 (_fac ,_ecg );_gga ._ff .Add2 (_fac ,_ecg );_gga ._cde =_ce ;};func NewContextForImage (im _f .Image )*Context {return NewContextForRGBA (_fdbc (im ))};const (_bfgb repeatOp =iota ;_aae ;_ebcgc ;
_dgg ;);func (_ada *Context )Width ()int {return _ada ._ddb };func (_bgc *Context )CubicTo (x1 ,y1 ,x2 ,y2 ,x3 ,y3 float64 ){if !_bgc ._afc {_bgc .MoveTo (x1 ,y1 );};_cgg ,_fag :=_bgc ._cde .X ,_bgc ._cde .Y ;x1 ,y1 =_bgc .Transform (x1 ,y1 );x2 ,y2 =_bgc .Transform (x2 ,y2 );
x3 ,y3 =_bgc .Transform (x3 ,y3 );_bga :=_ecb (_cgg ,_fag ,x1 ,y1 ,x2 ,y2 ,x3 ,y3 );_feff :=_dgdc (_bgc ._cde );for _ ,_efce :=range _bga [1:]{_egfc :=_dgdc (_efce );if _egfc ==_feff {continue ;};_feff =_egfc ;_bgc ._fd .Add1 (_egfc );_bgc ._ff .Add1 (_egfc );
_bgc ._cde =_efce ;};};func (_bdea *Context )SetLineCap (lineCap _ec .LineCap ){_bdea ._aec =lineCap };func (_eff *Context )Image ()_f .Image {return _eff ._bfe };func (_abb *Context )TextState ()*_ec .TextState {return &_abb ._cgf };func (_fbgb *Context )Shear (x ,y float64 ){_fbgb ._bde .Shear (x ,y )};
func _cg (_fea ,_ac ,_ab ,_aag ,_bd ,_cfc ,_fcfe ,_ee ,_abg float64 )(_bef ,_fed float64 ){_bfa :=1-_abg ;_aac :=_bfa *_bfa *_bfa ;_efc :=3*_bfa *_bfa *_abg ;_egd :=3*_bfa *_abg *_abg ;_gd :=_abg *_abg *_abg ;_bef =_aac *_fea +_efc *_ab +_egd *_bd +_gd *_fcfe ;
_fed =_aac *_ac +_efc *_aag +_egd *_cfc +_gd *_ee ;return ;};func (_ffga *Context )AsMask ()*_f .Alpha {_cgcf :=_f .NewAlpha (_ffga ._bfe .Bounds ());_gf .Draw (_cgcf ,_ffga ._bfe .Bounds (),_ffga ._bfe ,_f .Point {},_gf .Src );return _cgcf ;};func (_fcbf *Context )DrawImageAnchored (im _f .Image ,x ,y int ,ax ,ay float64 ){_cec :=im .Bounds ().Size ();
x -=int (ax *float64 (_cec .X ));y -=int (ay *float64 (_cec .Y ));_dff :=_gf .BiLinear ;_bad :=_fcbf ._bde .Clone ().Translate (float64 (x ),float64 (y ));_fca :=_aa .Aff3 {_bad [0],_bad [3],_bad [6],_bad [1],_bad [4],_bad [7]};if _fcbf ._gg ==nil {_dff .Transform (_fcbf ._bfe ,_fca ,im ,im .Bounds (),_gf .Over ,nil );
}else {_dff .Transform (_fcbf ._bfe ,_fca ,im ,im .Bounds (),_gf .Over ,&_gf .Options {DstMask :_fcbf ._gg ,DstMaskP :_f .Point {}});};};func _eabe (_ecgd ,_ebgf ,_aad ,_eabg ,_bdb ,_egfg float64 )float64 {return _ecgd *_eabg +_ebgf *_bdb +_aad *_egfg ;
};func (_dfdeb *Context )Rotate (angle float64 ){_dfdeb ._bde =_dfdeb ._bde .Rotate (angle )};func _dgdc (_age _bb .Point )_ed .Point26_6 {return _ed .Point26_6 {X :_bgaa (_age .X ),Y :_bgaa (_age .Y )}};func (_gebe *Context )DrawRectangle (x ,y ,w ,h float64 ){_gebe .NewSubPath ();
_gebe .MoveTo (x ,y );_gebe .LineTo (x +w ,y );_gebe .LineTo (x +w ,y +h );_gebe .LineTo (x ,y +h );_gebe .ClosePath ();};func (_bggb *Context )Stroke (){_bggb .StrokePreserve ();_bggb .ClearPath ()};func (_befe *Context )fill (_dfde _cc .Painter ){_bcba :=_befe ._ff ;
if _befe ._afc {_bcba =make (_cc .Path ,len (_befe ._ff ));copy (_bcba ,_befe ._ff );_bcba .Add1 (_dgdc (_befe ._bgg ));};_ccg :=_befe ._aagg ;_ccg .UseNonZeroWinding =_befe ._dde ==_ec .FillRuleWinding ;_ccg .Clear ();_ccg .AddPath (_bcba );_ccg .Rasterize (_dfde );
};func (_fdf *Context )DrawString (s string ,face _be .Face ,x ,y float64 ){_fdf .DrawStringAnchored (s ,face ,x ,y ,0,0);};func (_fdc *Context )SetLineWidth (lineWidth float64 ){_fdc ._agd =lineWidth };func (_cdb *Context )StrokePattern ()_ec .Pattern {return _cdb ._de };
func (_ccec *Context )SetFillRule (fillRule _ec .FillRule ){_ccec ._dde =fillRule };func (_abcc *solidPattern )ColorAt (x ,y int )_eg .Color {return _abcc ._caa };func (_bbd *Context )DrawArc (x ,y ,r ,angle1 ,angle2 float64 ){_bbd .DrawEllipticalArc (x ,y ,r ,r ,angle1 ,angle2 );
};func (_fbbc *Context )ResetClip (){_fbbc ._gg =nil };func (_cbeb *patternPainter )Paint (ss []_cc .Span ,done bool ){_gae :=_cbeb ._eca .Bounds ();for _ ,_dgb :=range ss {if _dgb .Y < _gae .Min .Y {continue ;};if _dgb .Y >=_gae .Max .Y {return ;};if _dgb .X0 < _gae .Min .X {_dgb .X0 =_gae .Min .X ;
};if _dgb .X1 > _gae .Max .X {_dgb .X1 =_gae .Max .X ;};if _dgb .X0 >=_dgb .X1 {continue ;};const _aaaa =1<<16-1;_febc :=_dgb .Y -_cbeb ._eca .Rect .Min .Y ;_edb :=_dgb .X0 -_cbeb ._eca .Rect .Min .X ;_bac :=(_dgb .Y -_cbeb ._eca .Rect .Min .Y )*_cbeb ._eca .Stride +(_dgb .X0 -_cbeb ._eca .Rect .Min .X )*4;
_addc :=_bac +(_dgb .X1 -_dgb .X0 )*4;for _cge ,_fbcag :=_bac ,_edb ;_cge < _addc ;_cge ,_fbcag =_cge +4,_fbcag +1{_ebf :=_dgb .Alpha ;if _cbeb ._dcee !=nil {_ebf =_ebf *uint32 (_cbeb ._dcee .AlphaAt (_fbcag ,_febc ).A )/255;if _ebf ==0{continue ;};};_aaab :=_cbeb ._cgga .ColorAt (_fbcag ,_febc );
_gad ,_eeba ,_dgf ,_fad :=_aaab .RGBA ();_feg :=uint32 (_cbeb ._eca .Pix [_cge +0]);_fdfa :=uint32 (_cbeb ._eca .Pix [_cge +1]);_bceb :=uint32 (_cbeb ._eca .Pix [_cge +2]);_gfb :=uint32 (_cbeb ._eca .Pix [_cge +3]);_eda :=(_aaaa -(_fad *_ebf /_aaaa ))*0x101;
_cbeb ._eca .Pix [_cge +0]=uint8 ((_feg *_eda +_gad *_ebf )/_aaaa >>8);_cbeb ._eca .Pix [_cge +1]=uint8 ((_fdfa *_eda +_eeba *_ebf )/_aaaa >>8);_cbeb ._eca .Pix [_cge +2]=uint8 ((_bceb *_eda +_dgf *_ebf )/_aaaa >>8);_cbeb ._eca .Pix [_cge +3]=uint8 ((_gfb *_eda +_fad *_ebf )/_aaaa >>8);
};};};type solidPattern struct{_caa _eg .Color };func (_dfg *Context )SetHexColor (x string ){_afcd ,_dec ,_eb ,_afd :=_dge (x );_dfg .SetRGBA255 (_afcd ,_dec ,_eb ,_afd );};func (_adf *Context )SetFillRGBA (r ,g ,b ,a float64 ){_ ,_ ,_ ,_gdf :=_adf ._bfb .RGBA ();
if _gdf > 0&&_gdf !=65535&&a ==1{a =float64 (_gdf )/65535;};_egc :=_eg .NRGBA {uint8 (r *255),uint8 (g *255),uint8 (b *255),uint8 (a *255)};_adf ._bfb =_egc ;_adf ._ae =_fae (_egc );};func (_dbg *Context )NewSubPath (){if _dbg ._afc {_dbg ._ff .Add1 (_dgdc (_dbg ._bgg ));
};_dbg ._afc =false ;};func _bea (_ege ,_bcbc ,_efa ,_dfd ,_fb ,_bba float64 )[]_bb .Point {_egf :=(_a .Hypot (_efa -_ege ,_dfd -_bcbc )+_a .Hypot (_fb -_efa ,_bba -_dfd ));_egfa :=int (_egf +0.5);if _egfa < 4{_egfa =4;};_bg :=float64 (_egfa )-1;_bcbcc :=make ([]_bb .Point ,_egfa );
for _fcf :=0;_fcf < _egfa ;_fcf ++{_gfc :=float64 (_fcf )/_bg ;_cb ,_cf :=_dd (_ege ,_bcbc ,_efa ,_dfd ,_fb ,_bba ,_gfc );_bcbcc [_fcf ]=_bb .NewPoint (_cb ,_cf );};return _bcbcc ;};func (_bff *Context )SetDash (dashes ...float64 ){_bff ._fa =dashes };
func (_dcd *Context )ClearPath (){_dcd ._fd .Clear ();_dcd ._ff .Clear ();_dcd ._afc =false };func (_ffc *Context )SetRGB255 (r ,g ,b int ){_ffc .SetRGBA255 (r ,g ,b ,255)};func (_dag *Context )DrawLine (x1 ,y1 ,x2 ,y2 float64 ){_dag .MoveTo (x1 ,y1 );
_dag .LineTo (x2 ,y2 )};func (_face *Context )DrawEllipticalArc (x ,y ,rx ,ry ,angle1 ,angle2 float64 ){const _ddfe =16;for _ffag :=0;_ffag < _ddfe ;_ffag ++{_bcbe :=float64 (_ffag +0)/_ddfe ;_afda :=float64 (_ffag +1)/_ddfe ;_acb :=angle1 +(angle2 -angle1 )*_bcbe ;
_edf :=angle1 +(angle2 -angle1 )*_afda ;_edfd :=x +rx *_a .Cos (_acb );_gcf :=y +ry *_a .Sin (_acb );_bfc :=x +rx *_a .Cos ((_acb +_edf )/2);_ebd :=y +ry *_a .Sin ((_acb +_edf )/2);_dda :=x +rx *_a .Cos (_edf );_bab :=y +ry *_a .Sin (_edf );_deg :=2*_bfc -_edfd /2-_dda /2;
_fff :=2*_ebd -_gcf /2-_bab /2;if _ffag ==0{if _face ._afc {_face .LineTo (_edfd ,_gcf );}else {_face .MoveTo (_edfd ,_gcf );};};_face .QuadraticTo (_deg ,_fff ,_dda ,_bab );};};func _febd (_aea _cc .Path ,_eae []float64 ,_bfca float64 )_cc .Path {return _ddcc (_dafaf (_gbbc (_aea ),_eae ,_bfca ));
};func (_dbf *Context )SetMask (mask *_f .Alpha )error {if mask .Bounds ().Size ()!=_dbf ._bfe .Bounds ().Size (){return _fc .New ("\u006d\u0061\u0073\u006b\u0020\u0073i\u007a\u0065\u0020\u006d\u0075\u0073\u0074\u0020\u006d\u0061\u0074\u0063\u0068 \u0063\u006f\u006e\u0074\u0065\u0078\u0074 \u0073\u0069\u007a\u0065");
};_dbf ._gg =mask ;return nil ;};func (_egaa *Context )MoveTo (x ,y float64 ){if _egaa ._afc {_egaa ._ff .Add1 (_dgdc (_egaa ._bgg ));};x ,y =_egaa .Transform (x ,y );_cccb :=_bb .NewPoint (x ,y );_fg :=_dgdc (_cccb );_egaa ._fd .Start (_fg );_egaa ._ff .Start (_fg );
_egaa ._bgg =_cccb ;_egaa ._cde =_cccb ;_egaa ._afc =true ;};func (_ba *Context )InvertMask (){if _ba ._gg ==nil {_ba ._gg =_f .NewAlpha (_ba ._bfe .Bounds ());}else {for _deb ,_geb :=range _ba ._gg .Pix {_ba ._gg .Pix [_deb ]=255-_geb ;};};};func (_fdcf *Context )drawString (_dfdd string ,_adeg _be .Face ,_adaf ,_cba float64 ){_eba :=&_be .Drawer {Src :_f .NewUniform (_fdcf ._bfb ),Face :_adeg ,Dot :_dgdc (_bb .NewPoint (_adaf ,_cba ))};
_dcc :=rune (-1);for _ ,_dac :=range _dfdd {if _dcc >=0{_eba .Dot .X +=_eba .Face .Kern (_dcc ,_dac );};_ebb ,_fcc ,_bce ,_ecbe ,_edg :=_eba .Face .Glyph (_eba .Dot ,_dac );if !_edg {continue ;};_aaca :=_ebb .Sub (_ebb .Min );_gbec :=_f .NewRGBA (_aaca );
_gf .DrawMask (_gbec ,_aaca ,_eba .Src ,_f .Point {},_fcc ,_bce ,_gf .Over );var _aff *_gf .Options ;if _fdcf ._gg !=nil {_aff =&_gf .Options {DstMask :_fdcf ._gg ,DstMaskP :_f .Point {}};};_dgdf :=_fdcf ._bde .Clone ().Translate (float64 (_ebb .Min .X ),float64 (_ebb .Min .Y ));
_bae :=_aa .Aff3 {_dgdf [0],_dgdf [3],_dgdf [6],_dgdf [1],_dgdf [4],_dgdf [7]};_gf .BiLinear .Transform (_fdcf ._bfe ,_bae ,_gbec ,_aaca ,_gf .Over ,_aff );_eba .Dot .X +=_ecbe ;_dcc =_dac ;};};func _edff (_bggg ,_egce uint32 ,_ffgb float64 )uint8 {return uint8 (int32 (float64 (_bggg )*(1.0-_ffgb )+float64 (_egce )*_ffgb )>>8);
};func NewLinearGradient (x0 ,y0 ,x1 ,y1 float64 )_ec .Gradient {_dagf :=&linearGradient {_afa :x0 ,_fcd :y0 ,_ggb :x1 ,_efdb :y1 };return _dagf ;};func (_ccge *Context )SetPixel (x ,y int ){_ccge ._bfe .Set (x ,y ,_ccge ._bfb )};