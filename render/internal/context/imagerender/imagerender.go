//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package imagerender ;import (_cfg "errors";_cc "fmt";_gc "github.com/unidoc/freetype/raster";_dc "github.com/unidoc/unipdf/v4/common";_cb "github.com/unidoc/unipdf/v4/internal/precision";_db "github.com/unidoc/unipdf/v4/internal/transform";_dcf "github.com/unidoc/unipdf/v4/render/internal/context";
_dbf "golang.org/x/image/draw";_e "golang.org/x/image/font";_ga "golang.org/x/image/math/f64";_bf "golang.org/x/image/math/fixed";_g "image";_cf "image/color";_f "image/draw";_c "math";_d "sort";_b "strings";);func (_afe *Context )capper ()_gc .Capper {switch _afe ._bag {case _dcf .LineCapButt :return _gc .ButtCapper ;
case _dcf .LineCapRound :return _gc .RoundCapper ;case _dcf .LineCapSquare :return _gc .SquareCapper ;};return nil ;};func (_egg *Context )TextState ()*_dcf .TextState {return &_egg ._efe };func (_daf *radialGradient )ColorAt (x ,y int )_cf .Color {if len (_daf ._cbc )==0{return _cf .Transparent ;
};_fcc ,_cfad :=float64 (x )+0.5-_daf ._eccg ._fge ,float64 (y )+0.5-_daf ._eccg ._cfc ;_ggga :=_geagg (_fcc ,_cfad ,_daf ._eccg ._abdf ,_daf ._agcg ._fge ,_daf ._agcg ._cfc ,_daf ._agcg ._abdf );_gcb :=_geagg (_fcc ,_cfad ,-_daf ._eccg ._abdf ,_fcc ,_cfad ,_daf ._eccg ._abdf );
if _daf ._cbga ==0{if _ggga ==0{return _cf .Transparent ;};_fecd :=0.5*_gcb /_ggga ;if _fecd *_daf ._agcg ._abdf >=_daf ._fcb {return _ebee (_fecd ,_daf ._cbc );};return _cf .Transparent ;};_ccd :=_geagg (_ggga ,_daf ._cbga ,0,_ggga ,-_gcb ,0);if _ccd >=0{_abdg :=_c .Sqrt (_ccd );
_eag :=(_ggga +_abdg )*_daf ._ddbc ;_bcfc :=(_ggga -_abdg )*_daf ._ddbc ;if _eag *_daf ._agcg ._abdf >=_daf ._fcb {return _ebee (_eag ,_daf ._cbc );}else if _bcfc *_daf ._agcg ._abdf >=_daf ._fcb {return _ebee (_bcfc ,_daf ._cbc );};};return _cf .Transparent ;
};func (_edb *Context )Transform (x ,y float64 )(_befc ,_ade float64 ){return _edb ._fa .Transform (x ,y )};func (_geag *Context )LineTo (x ,y float64 ){if !_geag ._abf {_geag .MoveTo (x ,y );}else {x ,y =_geag .Transform (x ,y );_eeff :=_db .NewPoint (x ,y );
_bdg :=_acgb (_eeff );_geag ._bcfb .Add1 (_bdg );_geag ._ddc .Add1 (_bdg );_geag ._dbe =_eeff ;};};func (_decd *Context )ScaleAbout (sx ,sy ,x ,y float64 ){_decd .Translate (x ,y );_decd .Scale (sx ,sy );_decd .Translate (-x ,-y );};func (_bfb *Context )LineWidth ()float64 {return _bfb ._cca };
func (_ecb *Context )ClipPreserve (){if _ecb ._agb ==nil ||_ecb ._agb .Bounds ().Size ()!=_g .Pt (_ecb ._df ,_ecb ._ba ){_ecb ._agb =_g .NewAlpha (_g .Rect (0,0,_ecb ._df ,_ecb ._ba ));}else {clear (_ecb ._agb .Pix );};_ace :=_gc .NewAlphaOverPainter (_ecb ._agb );
_ecb .fill (_ace );if _ecb ._bac ==nil {_egf :=_g .NewAlpha (_g .Rect (0,0,_ecb ._df ,_ecb ._ba ));copy (_egf .Pix ,_ecb ._agb .Pix );_ecb ._bac =_egf ;_ecb ._baf =true ;}else {if !_ecb ._baf {_debg :=_g .NewAlpha (_g .Rect (0,0,_ecb ._df ,_ecb ._ba ));
copy (_debg .Pix ,_ecb ._bac .Pix );_ecb ._bac =_debg ;_ecb ._baf =true ;};_dgd :=_ecb ._bac .Pix ;_fdgb :=_ecb ._agb .Pix ;for _gbe ,_gcdf :=range _fdgb {if _gcdf ==0{_dgd [_gbe ]=0;}else if _gcdf !=255{_bee :=int (_dgd [_gbe ])*int (_gcdf );_dgd [_gbe ]=uint8 (_bee /255);
};};};};func (_ebc *Context )SetRGBA255 (r ,g ,b ,a int ){_ebc ._afcd =_cf .NRGBA {uint8 (r ),uint8 (g ),uint8 (b ),uint8 (a )};_ebc .setFillAndStrokeColor (_ebc ._afcd );};func (_eed *Context )DrawArc (x ,y ,r ,angle1 ,angle2 float64 ){_eed .DrawEllipticalArc (x ,y ,r ,r ,angle1 ,angle2 );
};func (_fba *Context )Shear (x ,y float64 ){_fba ._fa .Shear (x ,y )};func (_eb *Context )Interpolator ()_dbf .Interpolator {return _eb ._adb };func (_ccae *Context )DrawLine (x1 ,y1 ,x2 ,y2 float64 ){_ccae .MoveTo (x1 ,y1 );_ccae .LineTo (x2 ,y2 )};func (_fgc stops )Less (i ,j int )bool {return _fgc [i ]._gdec < _fgc [j ]._gdec };
func (_dg *Context )SetColor (c _cf .Color ){_dg .setFillAndStrokeColor (c )};func (_bg *Context )SetInterpolator (interpolator _dbf .Interpolator ){_bg ._adb =interpolator };func (_gff *Context )CubicTo (x1 ,y1 ,x2 ,y2 ,x3 ,y3 float64 ){if !_gff ._abf {_gff .MoveTo (x1 ,y1 );
};_bgfa ,_fac :=_gff ._dbe .X ,_gff ._dbe .Y ;x1 ,y1 =_gff .Transform (x1 ,y1 );x2 ,y2 =_gff .Transform (x2 ,y2 );x3 ,y3 =_gff .Transform (x3 ,y3 );_fbfa :=_afg (_bgfa ,_fac ,x1 ,y1 ,x2 ,y2 ,x3 ,y3 );_fcd :=_acgb (_gff ._dbe );for _ ,_aeg :=range _fbfa [1:]{_aaa :=_acgb (_aeg );
if _aaa ==_fcd {continue ;};_fcd =_aaa ;_gff ._bcfb .Add1 (_aaa );_gff ._ddc .Add1 (_aaa );_gff ._dbe =_aeg ;};};func (_febb stops )Len ()int {return len (_febb )};func NewContext (width ,height int )*Context {return NewContextForRGBA (_g .NewRGBA (_g .Rect (0,0,width ,height )));
};func (_cfgc *Context )SetFillRGBA (r ,g ,b ,a float64 ){_ ,_ ,_ ,_cdc :=_cfgc ._afcd .RGBA ();if _cdc > 0&&_cdc !=65535&&a ==1{a =float64 (_cdc )/65535;};_fbd :=_cf .NRGBA {uint8 (r *255),uint8 (g *255),uint8 (b *255),uint8 (a *255)};_cfgc ._afcd =_fbd ;
_cfgc ._gdd =_aee (_fbd );};func (_abd *Context )Stroke (){_abd .StrokePreserve ();_abd .ClearPath ()};func (_feb *Context )AsMask ()*_g .Alpha {_dcg :=_g .NewAlpha (_feb ._eef .Bounds ());_dbf .Draw (_dcg ,_feb ._eef .Bounds (),_feb ._eef ,_g .Point {},_dbf .Src );
return _dcg ;};func (_eac *Context )SetFillRule (fillRule _dcf .FillRule ){_eac ._fbff =fillRule };func (_bcad stops )Swap (i ,j int ){_bcad [i ],_bcad [j ]=_bcad [j ],_bcad [i ]};func _dd (_gaf ,_gbc ,_fca ,_aag ,_ae ,_fd ,_bca ,_dcb ,_cbd float64 )(_ee ,_ab float64 ){_ef :=1-_cbd ;
_ge :=_ef *_ef *_ef ;_be :=3*_ef *_ef *_cbd ;_gec :=3*_ef *_cbd *_cbd ;_ed :=_cbd *_cbd *_cbd ;_ee =_ge *_gaf +_be *_fca +_gec *_ae +_ed *_bca ;_ab =_ge *_gbc +_be *_aag +_gec *_fd +_ed *_dcb ;return ;};func (_gbdg *linearGradient )AddColorStop (offset float64 ,color _cf .Color ){_gbdg ._gae =append (_gbdg ._gae ,stop {_gdec :offset ,_ccf :color });
_d .Sort (_gbdg ._gae );};func (_cgge *Context )Pop (){_caf :=*_cgge ;_cdg :=_cgge ._bbg ;_gda :=_cdg [len (_cdg )-1];*_cgge =*_gda ;_cgge ._bcfb =_caf ._bcfb ;_cgge ._ddc =_caf ._ddc ;_cgge ._ca =_caf ._ca ;_cgge ._dbe =_caf ._dbe ;_cgge ._abf =_caf ._abf ;
};func (_ada *Context )SetFillStyle (pattern _dcf .Pattern ){if _bgf ,_eec :=pattern .(*solidPattern );_eec {_ada ._afcd =_bgf ._eaac ;};_ada ._gdd =pattern ;};func (_caba *Context )drawRegularPolygon (_cag int ,_gfe ,_fgdc ,_geb ,_baca float64 ){_cfga :=2*_c .Pi /float64 (_cag );
_baca -=_c .Pi /2;if _cag %2==0{_baca +=_cfga /2;};_caba .NewSubPath ();for _gdg :=0;_gdg < _cag ;_gdg ++{_acc :=_baca +_cfga *float64 (_gdg );_caba .LineTo (_gfe +_geb *_c .Cos (_acc ),_fgdc +_geb *_c .Sin (_acc ));};_caba .ClosePath ();};func (_gcga *Context )Identity (){_gcga ._fa =_db .IdentityMatrix ()};
func _acgb (_bfeg _db .Point )_bf .Point26_6 {return _bf .Point26_6 {X :_abe (_bfeg .X ),Y :_abe (_bfeg .Y )}};func (_dabg *Context )DrawImage (im _g .Image ,x ,y int ){_dabg .DrawImageAnchored (im ,x ,y ,0,0)};func (_cgc *Context )SetLineJoin (lineJoin _dcf .LineJoin ){_cgc ._bcc =lineJoin };
func (_acb *Context )ResetClip (){_acb ._bac =nil };func (_cfe *Context )QuadraticTo (x1 ,y1 ,x2 ,y2 float64 ){if !_cfe ._abf {_cfe .MoveTo (x1 ,y1 );};x1 ,y1 =_cfe .Transform (x1 ,y1 );x2 ,y2 =_cfe .Transform (x2 ,y2 );_efc :=_db .NewPoint (x1 ,y1 );_cbg :=_db .NewPoint (x2 ,y2 );
_baa :=_acgb (_efc );_afgd :=_acgb (_cbg );_cfe ._bcfb .Add2 (_baa ,_afgd );_cfe ._ddc .Add2 (_baa ,_afgd );_cfe ._dbe =_cbg ;};func (_gcd *Context )Image ()_g .Image {return _gcd ._eef };func (_ebf *Context )MoveTo (x ,y float64 ){if _ebf ._abf {_ebf ._ddc .Add1 (_acgb (_ebf ._ca ));
};x ,y =_ebf .Transform (x ,y );_ffg :=_db .NewPoint (x ,y );_ecc :=_acgb (_ffg );_ebf ._bcfb .Start (_ecc );_ebf ._ddc .Start (_ecc );_ebf ._ca =_ffg ;_ebf ._dbe =_ffg ;_ebf ._abf =true ;};func (_cece *Context )RotateAbout (angle ,x ,y float64 ){_cece .Translate (x ,y );
_cece .Rotate (angle );_cece .Translate (-x ,-y );};type circle struct{_fge ,_cfc ,_abdf float64 };func (_gaab *solidPattern )ColorAt (x ,y int )_cf .Color {return _gaab ._eaac };func (_bde *Context )SetDash (dashes ...float64 ){_bde ._fbf =dashes };func _ebee (_eddg float64 ,_geg stops )_cf .Color {if _eddg <=0.0||len (_geg )==1{return _geg [0]._ccf ;
};_fegg :=_geg [len (_geg )-1];if _eddg >=_fegg ._gdec {return _fegg ._ccf ;};for _fag ,_gbbc :=range _geg [1:]{if _eddg < _gbbc ._gdec {_eddg =(_eddg -_geg [_fag ]._gdec )/(_gbbc ._gdec -_geg [_fag ]._gdec );return _dbc (_geg [_fag ]._ccf ,_gbbc ._ccf ,_eddg );
};};return _fegg ._ccf ;};func _dbdc (_fea ,_bgc uint32 ,_aegb float64 )uint8 {return uint8 (int32 (float64 (_fea )*(1.0-_aegb )+float64 (_bgc )*_aegb )>>8);};func (_gf *Context )SetRGBA (r ,g ,b ,a float64 ){_ ,_ ,_ ,_ebe :=_gf ._afcd .RGBA ();if _ebe > 0&&_ebe !=65535&&a ==1{a =float64 (_ebe )/65535;
};_gf ._afcd =_cf .NRGBA {uint8 (r *255),uint8 (g *255),uint8 (b *255),uint8 (a *255)};_gf .setFillAndStrokeColor (_gf ._afcd );};type Context struct{_df int ;_ba int ;_eg *_gc .Rasterizer ;_eef *_g .RGBA ;_bac *_g .Alpha ;_afcd _cf .Color ;_gdd _dcf .Pattern ;
_bcf _dcf .Pattern ;_bcfb _gc .Path ;_ddc _gc .Path ;_ca _db .Point ;_dbe _db .Point ;_abf bool ;_fbf []float64 ;_ce float64 ;_cca float64 ;_bag _dcf .LineCap ;_bcc _dcf .LineJoin ;_fbff _dcf .FillRule ;_fa _db .Matrix ;_efe _dcf .TextState ;_bbg []*Context ;
_baf bool ;_agb *_g .Alpha ;_adb _dbf .Interpolator ;};func (_abc *Context )ClosePath (){if _abc ._abf {_fce :=_acgb (_abc ._ca );_abc ._bcfb .Add1 (_fce );_abc ._ddc .Add1 (_fce );_abc ._dbe =_abc ._ca ;};};func (_daa *Context )Matrix ()_db .Matrix {return _daa ._fa };
func (_dee *Context )SetLineWidth (lineWidth float64 ){_dee ._cca =lineWidth };func (_ffa *Context )DrawCircle (x ,y ,r float64 ){_ffa .NewSubPath ();_ffa .DrawEllipticalArc (x ,y ,r ,r ,0,2*_c .Pi );_ffa .ClosePath ();};func (_gcg *Context )SetHexColor (x string ){_bbaf ,_gbd ,_bea ,_ege :=_cea (x );
_gcg .SetRGBA255 (_bbaf ,_gbd ,_bea ,_ege );};type surfacePattern struct{_ega _g .Image ;_ced repeatOp ;};func (_ac *Context )SetDashOffset (offset float64 ){_ac ._ce =offset };func (_dgb *Context )Clear (){_fed :=_g .NewUniform (_dgb ._afcd );_dbf .Draw (_dgb ._eef ,_dgb ._eef .Bounds (),_fed ,_g .Point {},_dbf .Src );
};func _de (_cg ,_fc ,_gd ,_fb ,_ad ,_aad float64 )[]_db .Point {_gge :=(_c .Hypot (_gd -_cg ,_fb -_fc )+_c .Hypot (_ad -_gd ,_aad -_fb ));_bc :=int (_gge +0.5);if _bc < 4{_bc =4;};_ggd :=float64 (_bc )-1;_gceg :=make ([]_db .Point ,_bc );for _bff :=0;
_bff < _bc ;_bff ++{_ffb :=float64 (_bff )/_ggd ;_bbc ,_ec :=_bb (_cg ,_fc ,_gd ,_fb ,_ad ,_aad ,_ffb );_gceg [_bff ]=_db .NewPoint (_bbc ,_ec );};return _gceg ;};func (_aea *Context )NewSubPath (){if _aea ._abf {_aea ._ddc .Add1 (_acgb (_aea ._ca ));};
_aea ._abf =false ;};func _abad (_aeag float64 )float64 {return _aeag *_c .Pi /180};func (_adf *Context )ClearPath (){_adf ._bcfb .Clear ();_adf ._ddc .Clear ();_adf ._abf =false };type radialGradient struct{_eccg ,_gaac ,_agcg circle ;_cbga ,_ddbc float64 ;
_fcb float64 ;_cbc stops ;};func (_efb *Context )joiner ()_gc .Joiner {switch _efb ._bcc {case _dcf .LineJoinBevel :return _gc .BevelJoiner ;case _dcf .LineJoinRound :return _gc .RoundJoiner ;};return nil ;};func (_cac *Context )SetRGB (r ,g ,b float64 ){_cac .SetRGBA (r ,g ,b ,1)};
func (_dbd *Context )DrawRectangle (x ,y ,w ,h float64 ){_dbd .NewSubPath ();_dbd .MoveTo (x ,y );_dbd .LineTo (x +w ,y );_dbd .LineTo (x +w ,y +h );_dbd .LineTo (x ,y +h );_dbd .ClosePath ();};func (_ggeg *Context )DrawEllipticalArc (x ,y ,rx ,ry ,angle1 ,angle2 float64 ){const _adbg =16;
for _bbb :=0;_bbb < _adbg ;_bbb ++{_cec :=float64 (_bbb +0)/_adbg ;_gfd :=float64 (_bbb +1)/_adbg ;_dadd :=angle1 +(angle2 -angle1 )*_cec ;_beaa :=angle1 +(angle2 -angle1 )*_gfd ;_dcc :=x +rx *_c .Cos (_dadd );_eea :=y +ry *_c .Sin (_dadd );_cggg :=x +rx *_c .Cos ((_dadd +_beaa )/2);
_eada :=y +ry *_c .Sin ((_dadd +_beaa )/2);_dec :=x +rx *_c .Cos (_beaa );_dgc :=y +ry *_c .Sin (_beaa );_aab :=2*_cggg -_dcc /2-_dec /2;_fdgf :=2*_eada -_eea /2-_dgc /2;if _bbb ==0{if _ggeg ._abf {_ggeg .LineTo (_dcc ,_eea );}else {_ggeg .MoveTo (_dcc ,_eea );
};};_ggeg .QuadraticTo (_aab ,_fdgf ,_dec ,_dgc );};};func (_ccaa *Context )DrawStringAnchored (s string ,face _e .Face ,x ,y ,ax ,ay float64 ){_fab ,_cabe :=_ccaa .MeasureString (s ,face );_ccaa .drawString (s ,face ,x -ax *_fab ,y +ay *_cabe );};func _def (_abb [][]_db .Point ,_fbg []float64 ,_eab float64 )[][]_db .Point {var _afb [][]_db .Point ;
if len (_fbg )==0{return _abb ;};if len (_fbg )==1{_fbg =append (_fbg ,_fbg [0]);};for _ ,_acd :=range _abb {if len (_acd )< 2{continue ;};_fdgc :=_acd [0];_gef :=1;_ecbc :=0;_fagd :=0.0;if _eab !=0{var _dbaf float64 ;for _ ,_faee :=range _fbg {_dbaf +=_faee ;
};_eab =_c .Mod (_eab ,_dbaf );if _eab < 0{_eab +=_dbaf ;};for _bbcg ,_aef :=range _fbg {_eab -=_aef ;if _eab < 0{_ecbc =_bbcg ;_fagd =_aef +_eab ;break ;};};};var _abfg []_db .Point ;_abfg =append (_abfg ,_fdgc );for _gef < len (_acd ){_eeba :=_fbg [_ecbc ];
_ddcbg :=_acd [_gef ];_dgdd :=_fdgc .Distance (_ddcbg );_dff :=_eeba -_fagd ;if _dgdd > _dff {_gggd :=_dff /_dgdd ;_cad :=_fdgc .Interpolate (_ddcbg ,_gggd );_abfg =append (_abfg ,_cad );if _ecbc %2==0&&len (_abfg )> 1{_afb =append (_afb ,_abfg );};_abfg =nil ;
_abfg =append (_abfg ,_cad );_fagd =0;_fdgc =_cad ;_ecbc =(_ecbc +1)%len (_fbg );}else {_abfg =append (_abfg ,_ddcbg );_fdgc =_ddcbg ;_fagd +=_dgdd ;_gef ++;};};if _ecbc %2==0&&len (_abfg )> 1{_afb =append (_afb ,_abfg );};};return _afb ;};func NewRadialGradient (x0 ,y0 ,r0 ,x1 ,y1 ,r1 float64 )_dcf .Gradient {_febf :=circle {x0 ,y0 ,r0 };
_fbb :=circle {x1 ,y1 ,r1 };_gbb :=circle {x1 -x0 ,y1 -y0 ,r1 -r0 };_ecbg :=_geagg (_gbb ._fge ,_gbb ._cfc ,-_gbb ._abdf ,_gbb ._fge ,_gbb ._cfc ,_gbb ._abdf );var _fcab float64 ;if _ecbg !=0{_fcab =1.0/_ecbg ;};_gfee :=-_febf ._abdf ;_edc :=&radialGradient {_eccg :_febf ,_gaac :_fbb ,_agcg :_gbb ,_cbga :_ecbg ,_ddbc :_fcab ,_fcb :_gfee };
return _edc ;};func (_dgdg *Context )SetMask (mask *_g .Alpha )error {if mask .Bounds ().Size ()!=_dgdg ._eef .Bounds ().Size (){return _cfg .New ("\u006d\u0061\u0073\u006b\u0020\u0073i\u007a\u0065\u0020\u006d\u0075\u0073\u0074\u0020\u006d\u0061\u0074\u0063\u0068 \u0063\u006f\u006e\u0074\u0065\u0078\u0074 \u0073\u0069\u007a\u0065");
};_dgdg ._bac =mask ;_dgdg ._baf =false ;return nil ;};func (_agd *Context )Width ()int {return _agd ._df };type repeatOp int ;func (_acggd *surfacePattern )ColorAt (x ,y int )_cf .Color {_fdfc :=_acggd ._ega .Bounds ();switch _acggd ._ced {case _eeaf :if y >=_fdfc .Dy (){return _cf .Transparent ;
};case _gbf :if x >=_fdfc .Dx (){return _cf .Transparent ;};case _beeb :if x >=_fdfc .Dx ()||y >=_fdfc .Dy (){return _cf .Transparent ;};};x =x %_fdfc .Dx ()+_fdfc .Min .X ;y =y %_fdfc .Dy ()+_fdfc .Min .Y ;return _acggd ._ega .At (x ,y );};func (_cgga *Context )ShearAbout (sx ,sy ,x ,y float64 ){_cgga .Translate (x ,y );
_cgga .Shear (sx ,sy );_cgga .Translate (-x ,-y );};func (_feg *Context )Translate (x ,y float64 ){_feg ._fa =_feg ._fa .Translate (x ,y )};func (_cfd *Context )Fill (){_cfd .FillPreserve ();_cfd .ClearPath ()};func (_eace *Context )Rotate (angle float64 ){_eace ._fa =_eace ._fa .Rotate (angle )};
func _ffgc (_cadb _bf .Int26_6 )float64 {const _bcd ,_eaga =6,1<<6-1;if _cadb >=0{return float64 (_cadb >>_bcd )+float64 (_cadb &_eaga )/64;};_cadb =-_cadb ;if _cadb >=0{return -(float64 (_cadb >>_bcd )+float64 (_cadb &_eaga )/64);};return 0;};func _geagg (_cfb ,_cde ,_ccff ,_afd ,_eeb ,_dgdb float64 )float64 {return _cfb *_afd +_cde *_eeb +_ccff *_dgdb ;
};func (_cdab *Context )stroke (_fgg _gc .Painter ){_cfgcd :=_cdab ._bcfb ;if len (_cdab ._fbf )> 0{_cfgcd =_cfde (_cfgcd ,_cdab ._fbf ,_cdab ._ce );}else {_cfgcd =_egfc (_daaa (_cfgcd ));};_eca :=_cdab ._eg ;_eca .UseNonZeroWinding =true ;_eca .Clear ();
_gfa :=(_cdab ._fa .ScalingFactorX ()+_cdab ._fa .ScalingFactorY ())/2;_eca .AddStroke (_cfgcd ,_abe (_cdab ._cca *_gfa ),_cdab .capper (),_cdab .joiner ());_eca .Rasterize (_fgg );};type stops []stop ;func (_adbgc *Context )drawString (_aaae string ,_bda _e .Face ,_ddcb ,_dga float64 ){_bge :=&_e .Drawer {Src :_g .NewUniform (_adbgc ._afcd ),Face :_bda ,Dot :_acgb (_db .NewPoint (_ddcb ,_dga ))};
_cgbg :=rune (-1);for _ ,_faa :=range _aaae {if _cgbg >=0{_bge .Dot .X +=_bge .Face .Kern (_cgbg ,_faa );};_gfg ,_cdfe ,_eddf ,_eefd ,_begc :=_bge .Face .Glyph (_bge .Dot ,_faa );if !_begc {continue ;};_dfg :=_gfg .Sub (_gfg .Min );_gcgb :=_g .NewRGBA (_dfg );
_dbf .DrawMask (_gcgb ,_dfg ,_bge .Src ,_g .Point {},_cdfe ,_eddf ,_dbf .Over );var _cdaa *_dbf .Options ;if _adbgc ._bac !=nil {_cdaa =&_dbf .Options {DstMask :_adbgc ._bac ,DstMaskP :_g .Point {}};};_efd :=_adbgc ._fa .Clone ().Translate (float64 (_gfg .Min .X ),float64 (_gfg .Min .Y ));
_dgae :=_ga .Aff3 {_efd [0],_efd [3],_efd [6],_efd [1],_efd [4],_efd [7]};_adbgc ._adb .Transform (_adbgc ._eef ,_dgae ,_gcgb ,_dfg ,_dbf .Over ,_cdaa );_bge .Dot .X +=_eefd ;_cgbg =_faa ;};};func _daaa (_fae _gc .Path )[][]_db .Point {var _bfba [][]_db .Point ;
var _fbc []_db .Point ;var _ccec ,_afcb float64 ;for _aeb :=0;_aeb < len (_fae );{switch _fae [_aeb ]{case 0:if len (_fbc )> 0{_bfba =append (_bfba ,_fbc );_fbc =nil ;};_gfc :=_ffgc (_fae [_aeb +1]);_gecd :=_ffgc (_fae [_aeb +2]);_fbc =append (_fbc ,_db .NewPoint (_gfc ,_gecd ));
_ccec ,_afcb =_gfc ,_gecd ;_aeb +=4;case 1:_gaga :=_ffgc (_fae [_aeb +1]);_abce :=_ffgc (_fae [_aeb +2]);_fbc =append (_fbc ,_db .NewPoint (_gaga ,_abce ));_ccec ,_afcb =_gaga ,_abce ;_aeb +=4;case 2:_aff :=_ffgc (_fae [_aeb +1]);_fdd :=_ffgc (_fae [_aeb +2]);
_cgf :=_ffgc (_fae [_aeb +3]);_gfb :=_ffgc (_fae [_aeb +4]);_ccc :=_de (_ccec ,_afcb ,_aff ,_fdd ,_cgf ,_gfb );_fbc =append (_fbc ,_ccc ...);_ccec ,_afcb =_cgf ,_gfb ;_aeb +=6;case 3:_edbd :=_ffgc (_fae [_aeb +1]);_gca :=_ffgc (_fae [_aeb +2]);_fdb :=_ffgc (_fae [_aeb +3]);
_cgfc :=_ffgc (_fae [_aeb +4]);_cddc :=_ffgc (_fae [_aeb +5]);_bfe :=_ffgc (_fae [_aeb +6]);_ddba :=_afg (_ccec ,_afcb ,_edbd ,_gca ,_fdb ,_cgfc ,_cddc ,_bfe );_fbc =append (_fbc ,_ddba ...);_ccec ,_afcb =_cddc ,_bfe ;_aeb +=8;default:_dc .Log .Debug ("\u0057\u0041\u0052\u004e: \u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0070\u0061\u0074\u0068\u003a\u0020%\u0076",_fae );
return _bfba ;};};if len (_fbc )> 0{_bfba =append (_bfba ,_fbc );};return _bfba ;};const (_afdf repeatOp =iota ;_eeaf ;_gbf ;_beeb ;);func (_ccad *Context )setFillAndStrokeColor (_fg _cf .Color ){_ccad ._afcd =_fg ;_ccad ._gdd =_aee (_fg );_ccad ._bcf =_aee (_fg );
};func (_gecf *Context )StrokePreserve (){var _ggdf _gc .Painter ;if _gecf ._bac ==nil {if _acg ,_beg :=_gecf ._bcf .(*solidPattern );_beg {_ffba :=_gc .NewRGBAPainter (_gecf ._eef );_ffba .SetColor (_acg ._eaac );_ggdf =_ffba ;};};if _ggdf ==nil {_ggdf =_dfcc (_gecf ._eef ,_gecf ._bac ,_gecf ._bcf );
};_gecf .stroke (_ggdf );};func (_eddb *Context )DrawPoint (x ,y ,r float64 ){_eddb .Push ();_ebfd ,_cab :=_eddb .Transform (x ,y );_eddb .Identity ();_eddb .DrawCircle (_ebfd ,_cab ,r );_eddb .Pop ();};func _cfde (_caff _gc .Path ,_efcb []float64 ,_aeae float64 )_gc .Path {return _egfc (_def (_daaa (_caff ),_efcb ,_aeae ));
};func _aee (_abcg _cf .Color )_dcf .Pattern {return &solidPattern {_eaac :_abcg }};func (_ecac *Context )DrawRoundedRectangle (x ,y ,w ,h ,r float64 ){_bgg ,_ecbf ,_fgdf ,_eaa :=x ,x +r ,x +w -r ,x +w ;_aca ,_bbgf ,_bagb ,_bga :=y ,y +r ,y +h -r ,y +h ;
_ecac .NewSubPath ();_ecac .MoveTo (_ecbf ,_aca );_ecac .LineTo (_fgdf ,_aca );_ecac .DrawArc (_fgdf ,_bbgf ,r ,_abad (270),_abad (360));_ecac .LineTo (_eaa ,_bagb );_ecac .DrawArc (_fgdf ,_bagb ,r ,_abad (0),_abad (90));_ecac .LineTo (_ecbf ,_bga );_ecac .DrawArc (_ecbf ,_bagb ,r ,_abad (90),_abad (180));
_ecac .LineTo (_bgg ,_bbgf );_ecac .DrawArc (_ecbf ,_bbgf ,r ,_abad (180),_abad (270));_ecac .ClosePath ();};func (_gag *Context )DrawImageAnchored (im _g .Image ,x ,y int ,ax ,ay float64 ){_caa :=im .Bounds ().Size ();x -=int (ax *float64 (_caa .X ));
y -=int (ay *float64 (_caa .Y ));_fgf :=_gag ._fa .Clone ().Translate (float64 (x ),float64 (y ));_acgg :=_ga .Aff3 {_fgf [0],_fgf [3],_fgf [6],_fgf [1],_fgf [4],_fgf [7]};if _gag ._bac ==nil {_gag ._adb .Transform (_gag ._eef ,_acgg ,im ,im .Bounds (),_dbf .Over ,nil );
}else {_gag ._adb .Transform (_gag ._eef ,_acgg ,im ,im .Bounds (),_dbf .Over ,&_dbf .Options {DstMask :_gag ._bac ,DstMaskP :_g .Point {}});};};func NewLinearGradient (x0 ,y0 ,x1 ,y1 float64 )_dcf .Gradient {_ddb :=&linearGradient {_fcf :x0 ,_gafd :y0 ,_gfea :x1 ,_dfc :y1 };
return _ddb ;};func (_agc *Context )Scale (x ,y float64 ){_agc ._fa =_agc ._fa .Scale (x ,y )};func _eggc (_gdb _g .Image ,_edf repeatOp )_dcf .Pattern {return &surfacePattern {_ega :_gdb ,_ced :_edf }};func _dbc (_bdbc ,_ggf _cf .Color ,_cdce float64 )_cf .Color {_dbcd ,_ccg ,_aec ,_ffbe :=_bdbc .RGBA ();
_faae ,_dbcde ,_fbbe ,_gddc :=_ggf .RGBA ();return _cf .RGBA {_dbdc (_dbcd ,_faae ,_cdce ),_dbdc (_ccg ,_dbcde ,_cdce ),_dbdc (_aec ,_fbbe ,_cdce ),_dbdc (_ffbe ,_gddc ,_cdce )};};func (_bfd *Context )DrawEllipse (x ,y ,rx ,ry float64 ){_bfd .NewSubPath ();
_bfd .DrawEllipticalArc (x ,y ,rx ,ry ,0,2*_c .Pi );_bfd .ClosePath ();};func (_cda *Context )FillPattern ()_dcf .Pattern {return _cda ._gdd };type patternPainter struct{_gefb *_g .RGBA ;_afeg *_g .Alpha ;_fgea _dcf .Pattern ;};func _bb (_cff ,_fe ,_gg ,_aa ,_cd ,_bbf ,_ag float64 )(_ff ,_bd float64 ){_gb :=1-_ag ;
_aae :=_gb *_gb ;_af :=2*_gb *_ag ;_gce :=_ag *_ag ;_ff =_aae *_cff +_af *_gg +_gce *_cd ;_bd =_aae *_fe +_af *_aa +_gce *_bbf ;return ;};type solidPattern struct{_eaac _cf .Color };func _afg (_bbe ,_gea ,_bdb ,_gde ,_ea ,_aga ,_da ,_dcbe float64 )[]_db .Point {_ged :=(_c .Hypot (_bdb -_bbe ,_gde -_gea )+_c .Hypot (_ea -_bdb ,_aga -_gde )+_c .Hypot (_da -_ea ,_dcbe -_aga ));
_edd :=int (_ged +0.5);if _edd < 4{_edd =4;};_fec :=float64 (_edd )-1;_afc :=make ([]_db .Point ,_edd );for _dab :=0;_dab < _edd ;_dab ++{_bba :=float64 (_dab )/_fec ;_cce ,_cdf :=_dd (_bbe ,_gea ,_bdb ,_gde ,_ea ,_aga ,_da ,_dcbe ,_bba );_afc [_dab ]=_db .NewPoint (_cce ,_cdf );
};return _afc ;};var (_eaf =_aee (_cf .White );_ffe =_aee (_cf .Black ););func (_fecb *Context )SetPixel (x ,y int ){_fecb ._eef .Set (x ,y ,_fecb ._afcd )};func (_ggb *Context )SetStrokeRGBA (r ,g ,b ,a float64 ){_agf :=_cf .NRGBA {uint8 (r *255),uint8 (g *255),uint8 (b *255),uint8 (a *255)};
_ggb ._bcf =_aee (_agf );};func (_bfbg *Context )StrokePattern ()_dcf .Pattern {return _bfbg ._bcf };func (_ggc *Context )Push (){_bgb :=*_ggc ;_ggc ._bbg =append (_ggc ._bbg ,&_bgb );_ggc ._baf =false };func (_fdg *Context )SetLineCap (lineCap _dcf .LineCap ){_fdg ._bag =lineCap };
func (_gfga *radialGradient )AddColorStop (offset float64 ,color _cf .Color ){_gfga ._cbc =append (_gfga ._cbc ,stop {_gdec :offset ,_ccf :color });_d .Sort (_gfga ._cbc );};func (_agg *Context )Clip (){_agg .ClipPreserve ();_agg .ClearPath ()};func _dfcc (_fcdd *_g .RGBA ,_cba *_g .Alpha ,_bdeg _dcf .Pattern )*patternPainter {return &patternPainter {_fcdd ,_cba ,_bdeg };
};func _abe (_geca float64 )_bf .Int26_6 {_geca =_cb .RoundDefault (_geca );return _bf .Int26_6 (_geca *64)};func (_ffc *Context )FillPreserve (){var _ead _gc .Painter ;if _ffc ._bac ==nil {if _efcf ,_fgd :=_ffc ._gdd .(*solidPattern );_fgd {_dad :=_gc .NewRGBAPainter (_ffc ._eef );
_dad .SetColor (_efcf ._eaac );_ead =_dad ;};};if _ead ==nil {_ead =_dfcc (_ffc ._eef ,_ffc ._bac ,_ffc ._gdd );};_ffc .fill (_ead );};func (_cdaf *Context )InvertMask (){if _cdaf ._bac ==nil {_cdaf ._bac =_g .NewAlpha (_cdaf ._eef .Bounds ());_cdaf ._baf =true ;
}else {if !_cdaf ._baf {_ecae :=_g .NewAlpha (_cdaf ._bac .Bounds ());copy (_ecae .Pix ,_cdaf ._bac .Pix );_cdaf ._bac =_ecae ;_cdaf ._baf =true ;};for _dba ,_gbca :=range _cdaf ._bac .Pix {_cdaf ._bac .Pix [_dba ]=255-_gbca ;};};};func (_bdbg *Context )SetMatrix (m _db .Matrix ){_bdbg ._fa =m };
func NewContextForImage (im _g .Image )*Context {return NewContextForRGBA (_fcaa (im ))};func NewContextForRGBA (im *_g .RGBA )*Context {_gaa :=im .Bounds ().Size ().X ;_cgb :=im .Bounds ().Size ().Y ;return &Context {_df :_gaa ,_ba :_cgb ,_eg :_gc .NewRasterizer (_gaa ,_cgb ),_eef :im ,_afcd :_cf .Transparent ,_gdd :_eaf ,_bcf :_ffe ,_cca :1,_fbff :_dcf .FillRuleWinding ,_fa :_db .IdentityMatrix (),_efe :_dcf .NewTextState (),_adb :_dbf .BiLinear };
};type linearGradient struct{_fcf ,_gafd ,_gfea ,_dfc float64 ;_gae stops ;};func _cea (_ggcb string )(_fbfc ,_bcb ,_bdcd ,_bgaa int ){_ggcb =_b .TrimPrefix (_ggcb ,"\u0023");_bgaa =255;if len (_ggcb )==3{_ddd :="\u00251\u0078\u0025\u0031\u0078\u0025\u0031x";
_cc .Sscanf (_ggcb ,_ddd ,&_fbfc ,&_bcb ,&_bdcd );_fbfc |=_fbfc <<4;_bcb |=_bcb <<4;_bdcd |=_bdcd <<4;};if len (_ggcb )==6{_befd :="\u0025\u0030\u0032x\u0025\u0030\u0032\u0078\u0025\u0030\u0032\u0078";_cc .Sscanf (_ggcb ,_befd ,&_fbfc ,&_bcb ,&_bdcd );
};if len (_ggcb )==8{_bbgb :="\u0025\u00302\u0078\u0025\u00302\u0078\u0025\u0030\u0032\u0078\u0025\u0030\u0032\u0078";_cc .Sscanf (_ggcb ,_bbgb ,&_fbfc ,&_bcb ,&_bdcd ,&_bgaa );};return ;};func (_dcfd *Context )DrawString (s string ,face _e .Face ,x ,y float64 ){_dcfd .DrawStringAnchored (s ,face ,x ,y ,0,0);
};type stop struct{_gdec float64 ;_ccf _cf .Color ;};func (_ccdg *patternPainter )Paint (ss []_gc .Span ,done bool ){_decg :=_ccdg ._gefb .Bounds ();for _ ,_bgfb :=range ss {if _bgfb .Y < _decg .Min .Y {continue ;};if _bgfb .Y >=_decg .Max .Y {return ;
};if _bgfb .X0 < _decg .Min .X {_bgfb .X0 =_decg .Min .X ;};if _bgfb .X1 > _decg .Max .X {_bgfb .X1 =_decg .Max .X ;};if _bgfb .X0 >=_bgfb .X1 {continue ;};const _caae =1<<16-1;_bdbf :=_bgfb .Y -_ccdg ._gefb .Rect .Min .Y ;_adc :=_bgfb .X0 -_ccdg ._gefb .Rect .Min .X ;
_aadb :=(_bgfb .Y -_ccdg ._gefb .Rect .Min .Y )*_ccdg ._gefb .Stride +(_bgfb .X0 -_ccdg ._gefb .Rect .Min .X )*4;_agab :=_aadb +(_bgfb .X1 -_bgfb .X0 )*4;for _fcbf ,_bccg :=_aadb ,_adc ;_fcbf < _agab ;_fcbf ,_bccg =_fcbf +4,_bccg +1{_fef :=_bgfb .Alpha ;
if _ccdg ._afeg !=nil {_fef =_fef *uint32 (_ccdg ._afeg .AlphaAt (_bccg ,_bdbf ).A )/255;if _fef ==0{continue ;};};_eefg :=_ccdg ._fgea .ColorAt (_bccg ,_bdbf );_fgee ,_bcfd ,_cdb ,_fgeg :=_eefg .RGBA ();_bdga :=uint32 (_ccdg ._gefb .Pix [_fcbf +0]);_gab :=uint32 (_ccdg ._gefb .Pix [_fcbf +1]);
_acge :=uint32 (_ccdg ._gefb .Pix [_fcbf +2]);_gefg :=uint32 (_ccdg ._gefb .Pix [_fcbf +3]);_fcge :=(_caae -(_fgeg *_fef /_caae ))*0x101;_ccdg ._gefb .Pix [_fcbf +0]=uint8 ((_bdga *_fcge +_fgee *_fef )/_caae >>8);_ccdg ._gefb .Pix [_fcbf +1]=uint8 ((_gab *_fcge +_bcfd *_fef )/_caae >>8);
_ccdg ._gefb .Pix [_fcbf +2]=uint8 ((_acge *_fcge +_cdb *_fef )/_caae >>8);_ccdg ._gefb .Pix [_fcbf +3]=uint8 ((_gefg *_fcge +_fgeg *_fef )/_caae >>8);};};};func (_fbe *Context )Height ()int {return _fbe ._ba };func _egfc (_bbgd [][]_db .Point )_gc .Path {var _eafd _gc .Path ;
for _ ,_faaf :=range _bbgd {var _fecc _bf .Point26_6 ;for _fcde ,_dcbd :=range _faaf {_ecf :=_acgb (_dcbd );if _fcde ==0{_eafd .Start (_ecf );}else {_dbae :=_ecf .X -_fecc .X ;_edg :=_ecf .Y -_fecc .Y ;if _dbae < 0{_dbae =-_dbae ;};if _edg < 0{_edg =-_edg ;
};if _dbae +_edg > 8{_eafd .Add1 (_ecf );};};_fecc =_ecf ;};};return _eafd ;};func (_baga *Context )SetStrokeStyle (pattern _dcf .Pattern ){_baga ._bcf =pattern };func (_ecbe *Context )MeasureString (s string ,face _e .Face )(_dgbb ,_aba float64 ){_dcfe :=&_e .Drawer {Face :face };
_egc :=_dcfe .MeasureString (s );return float64 (_egc >>6),_ecbe ._efe .Tf .Size ;};func (_cfa *Context )SetRGB255 (r ,g ,b int ){_cfa .SetRGBA255 (r ,g ,b ,255)};func _fcaa (_dfb _g .Image )*_g .RGBA {_fff :=_dfb .Bounds ();_eacg :=_g .NewRGBA (_fff );
_f .Draw (_eacg ,_fff ,_dfb ,_fff .Min ,_f .Src );return _eacg ;};func (_dbeg *Context )fill (_ebcc _gc .Painter ){_ccb :=_dbeg ._ddc ;if _dbeg ._abf {_ccb =make (_gc .Path ,len (_dbeg ._ddc ));copy (_ccb ,_dbeg ._ddc );_ccb .Add1 (_acgb (_dbeg ._ca ));
};_bdeb :=_dbeg ._eg ;_bdeb .UseNonZeroWinding =_dbeg ._fbff ==_dcf .FillRuleWinding ;_bdeb .Clear ();_bdeb .AddPath (_ccb );_bdeb .Rasterize (_ebcc );};func (_ffed *linearGradient )ColorAt (x ,y int )_cf .Color {if len (_ffed ._gae )==0{return _cf .Transparent ;
};_cee ,_cdd :=float64 (x ),float64 (y );_ggg ,_agfg ,_efed ,_gffb :=_ffed ._fcf ,_ffed ._gafd ,_ffed ._gfea ,_ffed ._dfc ;_eacd ,_bdf :=_efed -_ggg ,_gffb -_agfg ;if _bdf ==0&&_eacd !=0{return _ebee ((_cee -_ggg )/_eacd ,_ffed ._gae );};if _eacd ==0&&_bdf !=0{return _ebee ((_cdd -_agfg )/_bdf ,_ffed ._gae );
};_ggcc :=_eacd *(_cee -_ggg )+_bdf *(_cdd -_agfg );if _ggcc < 0{return _ffed ._gae [0]._ccf ;};_dde :=_c .Hypot (_eacd ,_bdf );_fdf :=((_cee -_ggg )*-_bdf +(_cdd -_agfg )*_eacd )/(_dde *_dde );_deda ,_eeg :=_ggg +_fdf *-_bdf ,_agfg +_fdf *_eacd ;_bdc :=_c .Hypot (_cee -_deda ,_cdd -_eeg )/_dde ;
return _ebee (_bdc ,_ffed ._gae );};