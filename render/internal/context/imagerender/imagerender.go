//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package imagerender ;import (_b "errors";_f "fmt";_ff "github.com/unidoc/freetype/raster";_fed "github.com/unidoc/unipdf/v4/common";_ee "github.com/unidoc/unipdf/v4/internal/precision";_fe "github.com/unidoc/unipdf/v4/internal/transform";_a "github.com/unidoc/unipdf/v4/render/internal/context";
_dge "golang.org/x/image/draw";_gd "golang.org/x/image/font";_fa "golang.org/x/image/math/f64";_ab "golang.org/x/image/math/fixed";_fb "image";_g "image/color";_de "image/draw";_ec "math";_dg "sort";_d "strings";);func _afa (_ecag [][]_fe .Point ,_bea []float64 ,_gade float64 )[][]_fe .Point {var _badc [][]_fe .Point ;
if len (_bea )==0{return _ecag ;};if len (_bea )==1{_bea =append (_bea ,_bea [0]);};for _ ,_eaag :=range _ecag {if len (_eaag )< 2{continue ;};_ada :=_eaag [0];_dcgf :=1;_cfac :=0;_gbd :=0.0;if _gade !=0{var _gefa float64 ;for _ ,_bbd :=range _bea {_gefa +=_bbd ;
};_gade =_ec .Mod (_gade ,_gefa );if _gade < 0{_gade +=_gefa ;};for _fgfa ,_ffee :=range _bea {_gade -=_ffee ;if _gade < 0{_cfac =_fgfa ;_gbd =_ffee +_gade ;break ;};};};var _eed []_fe .Point ;_eed =append (_eed ,_ada );for _dcgf < len (_eaag ){_ddd :=_bea [_cfac ];
_eef :=_eaag [_dcgf ];_gdae :=_ada .Distance (_eef );_eeg :=_ddd -_gbd ;if _gdae > _eeg {_gfgac :=_eeg /_gdae ;_cdcc :=_ada .Interpolate (_eef ,_gfgac );_eed =append (_eed ,_cdcc );if _cfac %2==0&&len (_eed )> 1{_badc =append (_badc ,_eed );};_eed =nil ;
_eed =append (_eed ,_cdcc );_gbd =0;_ada =_cdcc ;_cfac =(_cfac +1)%len (_bea );}else {_eed =append (_eed ,_eef );_ada =_eef ;_gbd +=_gdae ;_dcgf ++;};};if _cfac %2==0&&len (_eed )> 1{_badc =append (_badc ,_eed );};};return _badc ;};func (_fbf *Context )SetDash (dashes ...float64 ){_fbf ._da =dashes };
type radialGradient struct{_dbfda ,_ccea ,_geac circle ;_gfgb ,_fce float64 ;_dfbd float64 ;_bcdd stops ;};func _adc (_fece ,_cc ,_ca ,_agd ,_ac ,_fca ,_ba ,_acg ,_dfe float64 )(_gg ,_gaa float64 ){_bcd :=1-_dfe ;_ed :=_bcd *_bcd *_bcd ;_abga :=3*_bcd *_bcd *_dfe ;
_fae :=3*_bcd *_dfe *_dfe ;_abb :=_dfe *_dfe *_dfe ;_gg =_ed *_fece +_abga *_ca +_fae *_ac +_abb *_ba ;_gaa =_ed *_cc +_abga *_agd +_fae *_fca +_abb *_acg ;return ;};func (_add *Context )StrokePattern ()_a .Pattern {return _add ._gdc };func (_efb *Context )LineTo (x ,y float64 ){if !_efb ._gcd {_efb .MoveTo (x ,y );
}else {x ,y =_efb .Transform (x ,y );_geg :=_fe .NewPoint (x ,y );_cf :=_ebfa (_geg );_efb ._bcg .Add1 (_cf );_efb ._afg .Add1 (_cf );_efb ._bda =_geg ;};};func _gada (_dabf ,_gga ,_babc ,_ffad ,_gbg ,_bgbg float64 )float64 {return _dabf *_ffad +_gga *_gbg +_babc *_bgbg ;
};func (_ef *Context )SetFillStyle (pattern _a .Pattern ){if _cdf ,_dde :=pattern .(*solidPattern );_dde {_ef ._cag =_cdf ._cba ;};_ef ._dbe =pattern ;};func (_ffa *Context )SetFillRGBA (r ,g ,b ,a float64 ){_ ,_ ,_ ,_eeb :=_ffa ._cag .RGBA ();if _eeb > 0&&_eeb !=65535&&a ==1{a =float64 (_eeb )/65535;
};_gce :=_g .NRGBA {uint8 (r *255),uint8 (g *255),uint8 (b *255),uint8 (a *255)};_ffa ._cag =_gce ;_ffa ._dbe =_dbb (_gce );};func (_ebg *Context )LineWidth ()float64 {return _ebg ._cgb };func (_gfg *Context )DrawImage (im _fb .Image ,x ,y int ){_gfg .DrawImageAnchored (im ,x ,y ,0,0)};
func (_gfd *Context )DrawArc (x ,y ,r ,angle1 ,angle2 float64 ){_gfd .DrawEllipticalArc (x ,y ,r ,r ,angle1 ,angle2 );};func (_daag *Context )TextState ()*_a .TextState {return &_daag ._caf };func (_daab *Context )QuadraticTo (x1 ,y1 ,x2 ,y2 float64 ){if !_daab ._gcd {_daab .MoveTo (x1 ,y1 );
};x1 ,y1 =_daab .Transform (x1 ,y1 );x2 ,y2 =_daab .Transform (x2 ,y2 );_dcgb :=_fe .NewPoint (x1 ,y1 );_ccb :=_fe .NewPoint (x2 ,y2 );_deda :=_ebfa (_dcgb );_edea :=_ebfa (_ccb );_daab ._bcg .Add2 (_deda ,_edea );_daab ._afg .Add2 (_deda ,_edea );_daab ._bda =_ccb ;
};func (_dbfde *Context )DrawEllipticalArc (x ,y ,rx ,ry ,angle1 ,angle2 float64 ){const _dfa =16;for _ffe :=0;_ffe < _dfa ;_ffe ++{_cbda :=float64 (_ffe +0)/_dfa ;_adg :=float64 (_ffe +1)/_dfa ;_cgea :=angle1 +(angle2 -angle1 )*_cbda ;_aea :=angle1 +(angle2 -angle1 )*_adg ;
_cbc :=x +rx *_ec .Cos (_cgea );_ddg :=y +ry *_ec .Sin (_cgea );_afcg :=x +rx *_ec .Cos ((_cgea +_aea )/2);_bga :=y +ry *_ec .Sin ((_cgea +_aea )/2);_eea :=x +rx *_ec .Cos (_aea );_dagb :=y +ry *_ec .Sin (_aea );_eg :=2*_afcg -_cbc /2-_eea /2;_ccgc :=2*_bga -_ddg /2-_dagb /2;
if _ffe ==0{if _dbfde ._gcd {_dbfde .LineTo (_cbc ,_ddg );}else {_dbfde .MoveTo (_cbc ,_ddg );};};_dbfde .QuadraticTo (_eg ,_ccgc ,_eea ,_dagb );};};func (_acd *Context )fill (_gcf _ff .Painter ){_afe :=_acd ._afg ;if _acd ._gcd {_afe =make (_ff .Path ,len (_acd ._afg ));
copy (_afe ,_acd ._afg );_afe .Add1 (_ebfa (_acd ._fcg ));};_dbfd :=_acd ._gec ;_dbfd .UseNonZeroWinding =_acd ._dgc ==_a .FillRuleWinding ;_dbfd .Clear ();_dbfd .AddPath (_afe );_dbfd .Rasterize (_gcf );};func (_cdc *Context )stroke (_dbf _ff .Painter ){_bb :=_cdc ._bcg ;
if len (_cdc ._da )> 0{_bb =_cdfbg (_bb ,_cdc ._da ,_cdc ._eb );}else {_bb =_gdcg (_fgec (_bb ));};_eda :=_cdc ._gec ;_eda .UseNonZeroWinding =true ;_eda .Clear ();_bcda :=(_cdc ._bge .ScalingFactorX ()+_cdc ._bge .ScalingFactorY ())/2;_eda .AddStroke (_bb ,_agbbc (_cdc ._cgb *_bcda ),_cdc .capper (),_cdc .joiner ());
_eda .Rasterize (_dbf );};func (_agdf *Context )AsMask ()*_fb .Alpha {_edab :=_fb .NewAlpha (_agdf ._ce .Bounds ());_dge .Draw (_edab ,_agdf ._ce .Bounds (),_agdf ._ce ,_fb .Point {},_dge .Src );return _edab ;};func _dbb (_cgff _g .Color )_a .Pattern {return &solidPattern {_cba :_cgff }};
func (_baf *Context )Clip (){_baf .ClipPreserve ();_baf .ClearPath ()};func (_gda *Context )Push (){_bgad :=*_gda ;_gda ._dce =append (_gda ._dce ,&_bgad );_gda ._gaf =false };func _gdcg (_egaf [][]_fe .Point )_ff .Path {var _agb _ff .Path ;for _ ,_gbea :=range _egaf {var _afce _ab .Point26_6 ;
for _ffcb ,_bebg :=range _gbea {_bef :=_ebfa (_bebg );if _ffcb ==0{_agb .Start (_bef );}else {_gge :=_bef .X -_afce .X ;_dcge :=_bef .Y -_afce .Y ;if _gge < 0{_gge =-_gge ;};if _dcge < 0{_dcge =-_dcge ;};if _gge +_dcge > 8{_agb .Add1 (_bef );};};_afce =_bef ;
};};return _agb ;};func NewContextForRGBA (im *_fb .RGBA )*Context {_fbga :=im .Bounds ().Size ().X ;_cec :=im .Bounds ().Size ().Y ;return &Context {_bca :_fbga ,_aeg :_cec ,_gec :_ff .NewRasterizer (_fbga ,_cec ),_ce :im ,_cag :_g .Transparent ,_dbe :_afc ,_gdc :_dd ,_cgb :1,_dgc :_a .FillRuleWinding ,_bge :_fe .IdentityMatrix (),_caf :_a .NewTextState (),_fdf :_dge .BiLinear };
};func (_cad *Context )SetPixel (x ,y int ){_cad ._ce .Set (x ,y ,_cad ._cag )};func (_cdg *Context )ScaleAbout (sx ,sy ,x ,y float64 ){_cdg .Translate (x ,y );_cdg .Scale (sx ,sy );_cdg .Translate (-x ,-y );};type stops []stop ;func (_bgg *Context )Height ()int {return _bgg ._aeg };
func (_ddgf *solidPattern )ColorAt (x ,y int )_g .Color {return _ddgf ._cba };func _gb (_fbg ,_fd ,_c ,_dc ,_feg ,_ad ,_ga float64 )(_gab ,_fag float64 ){_df :=1-_ga ;_bd :=_df *_df ;_cb :=2*_df *_ga ;_ag :=_ga *_ga ;_gab =_bd *_fbg +_cb *_c +_ag *_feg ;
_fag =_bd *_fd +_cb *_dc +_ag *_ad ;return ;};func (_afed *Context )DrawLine (x1 ,y1 ,x2 ,y2 float64 ){_afed .MoveTo (x1 ,y1 );_afed .LineTo (x2 ,y2 )};func (_aegb *radialGradient )AddColorStop (offset float64 ,color _g .Color ){_aegb ._bcdd =append (_aegb ._bcdd ,stop {_abbb :offset ,_dcee :color });
_dg .Sort (_aegb ._bcdd );};func (_gde *Context )SetStrokeStyle (pattern _a .Pattern ){_gde ._gdc =pattern };var (_afc =_dbb (_g .White );_dd =_dbb (_g .Black ););func (_ded *Context )SetDashOffset (offset float64 ){_ded ._eb =offset };func _fgdc (_fgea _ab .Int26_6 )float64 {const _ebe ,_dcaa =6,1<<6-1;
if _fgea >=0{return float64 (_fgea >>_ebe )+float64 (_fgea &_dcaa )/64;};_fgea =-_fgea ;if _fgea >=0{return -(float64 (_fgea >>_ebe )+float64 (_fgea &_dcaa )/64);};return 0;};func (_acfb *Context )DrawString (s string ,face _gd .Face ,x ,y float64 ){_acfb .DrawStringAnchored (s ,face ,x ,y ,0,0);
};func _cd (_ccd ,_be ,_bf ,_gee ,_dgf ,_gc ,_dcg ,_af float64 )[]_fe .Point {_aeb :=(_ec .Hypot (_bf -_ccd ,_gee -_be )+_ec .Hypot (_dgf -_bf ,_gc -_gee )+_ec .Hypot (_dcg -_dgf ,_af -_gc ));_edc :=int (_aeb +0.5);if _edc < 4{_edc =4;};_aa :=float64 (_edc )-1;
_bg :=make ([]_fe .Point ,_edc );for _aag :=0;_aag < _edc ;_aag ++{_gdd :=float64 (_aag )/_aa ;_abc ,_ffb :=_adc (_ccd ,_be ,_bf ,_gee ,_dgf ,_gc ,_dcg ,_af ,_gdd );_bg [_aag ]=_fe .NewPoint (_abc ,_ffb );};return _bg ;};func (_dfb *Context )SetFillRule (fillRule _a .FillRule ){_dfb ._dgc =fillRule };
type surfacePattern struct{_gbad _fb .Image ;_beag repeatOp ;};func _afec (_dbfc *_fb .RGBA ,_gage *_fb .Alpha ,_debb _a .Pattern )*patternPainter {return &patternPainter {_dbfc ,_gage ,_debb };};func _dga (_cff float64 ,_bdcb stops )_g .Color {if _cff <=0.0||len (_bdcb )==1{return _bdcb [0]._dcee ;
};_eeeg :=_bdcb [len (_bdcb )-1];if _cff >=_eeeg ._abbb {return _eeeg ._dcee ;};for _gcbc ,_bdad :=range _bdcb [1:]{if _cff < _bdad ._abbb {_cff =(_cff -_bdcb [_gcbc ]._abbb )/(_bdad ._abbb -_bdcb [_gcbc ]._abbb );return _faea (_bdcb [_gcbc ]._dcee ,_bdad ._dcee ,_cff );
};};return _eeeg ._dcee ;};func (_ced *Context )ClearPath (){_ced ._bcg .Clear ();_ced ._afg .Clear ();_ced ._gcd =false };func (_ggc *Context )DrawCircle (x ,y ,r float64 ){_ggc .NewSubPath ();_ggc .DrawEllipticalArc (x ,y ,r ,r ,0,2*_ec .Pi );_ggc .ClosePath ();
};func (_adda *Context )MoveTo (x ,y float64 ){if _adda ._gcd {_adda ._afg .Add1 (_ebfa (_adda ._fcg ));};x ,y =_adda .Transform (x ,y );_dag :=_fe .NewPoint (x ,y );_acf :=_ebfa (_dag );_adda ._bcg .Start (_acf );_adda ._afg .Start (_acf );_adda ._fcg =_dag ;
_adda ._bda =_dag ;_adda ._gcd =true ;};func (_ega *Context )RotateAbout (angle ,x ,y float64 ){_ega .Translate (x ,y );_ega .Rotate (angle );_ega .Translate (-x ,-y );};func (_cdfb *Context )SetStrokeRGBA (r ,g ,b ,a float64 ){_dbd :=_g .NRGBA {uint8 (r *255),uint8 (g *255),uint8 (b *255),uint8 (a *255)};
_cdfb ._gdc =_dbb (_dbd );};func (_faf *Context )ResetClip (){_faf ._dcc =nil };func (_cef *Context )SetMatrix (m _fe .Matrix ){_cef ._bge =m };func _gfad (_agbdd string )(_cdga ,_aga ,_bfa ,_agef int ){_agbdd =_d .TrimPrefix (_agbdd ,"\u0023");_agef =255;
if len (_agbdd )==3{_gcg :="\u00251\u0078\u0025\u0031\u0078\u0025\u0031x";_f .Sscanf (_agbdd ,_gcg ,&_cdga ,&_aga ,&_bfa );_cdga |=_cdga <<4;_aga |=_aga <<4;_bfa |=_bfa <<4;};if len (_agbdd )==6{_bac :="\u0025\u0030\u0032x\u0025\u0030\u0032\u0078\u0025\u0030\u0032\u0078";
_f .Sscanf (_agbdd ,_bac ,&_cdga ,&_aga ,&_bfa );};if len (_agbdd )==8{_bde :="\u0025\u00302\u0078\u0025\u00302\u0078\u0025\u0030\u0032\u0078\u0025\u0030\u0032\u0078";_f .Sscanf (_agbdd ,_bde ,&_cdga ,&_aga ,&_bfa ,&_agef );};return ;};func (_afcd *Context )DrawPoint (x ,y ,r float64 ){_afcd .Push ();
_daabg ,_bbg :=_afcd .Transform (x ,y );_afcd .Identity ();_afcd .DrawCircle (_daabg ,_bbg ,r );_afcd .Pop ();};func (_bcf *Context )Stroke (){_bcf .StrokePreserve ();_bcf .ClearPath ()};func _fc (_fec ,_ade ,_abg ,_ge ,_bc ,_cg float64 )[]_fe .Point {_fdd :=(_ec .Hypot (_abg -_fec ,_ge -_ade )+_ec .Hypot (_bc -_abg ,_cg -_ge ));
_ae :=int (_fdd +0.5);if _ae < 4{_ae =4;};_adeg :=float64 (_ae )-1;_gf :=make ([]_fe .Point ,_ae );for _bdb :=0;_bdb < _ae ;_bdb ++{_gad :=float64 (_bdb )/_adeg ;_db ,_gag :=_gb (_fec ,_ade ,_abg ,_ge ,_bc ,_cg ,_gad );_gf [_bdb ]=_fe .NewPoint (_db ,_gag );
};return _gf ;};func (_def *Context )SetLineJoin (lineJoin _a .LineJoin ){_def ._acgg =lineJoin };func (_ccg *Context )capper ()_ff .Capper {switch _ccg ._gcb {case _a .LineCapButt :return _ff .ButtCapper ;case _a .LineCapRound :return _ff .RoundCapper ;
case _a .LineCapSquare :return _ff .SquareCapper ;};return nil ;};func _agbbc (_egag float64 )_ab .Int26_6 {_egag =_ee .RoundDefault (_egag );return _ab .Int26_6 (_egag *64);};func (_bbe *Context )Scale (x ,y float64 ){_bbe ._bge =_bbe ._bge .Scale (x ,y )};
func (_bbf *Context )ClipPreserve (){if _bbf ._gbe ==nil ||_bbf ._gbe .Bounds ().Size ()!=_fb .Pt (_bbf ._bca ,_bbf ._aeg ){_bbf ._gbe =_fb .NewAlpha (_fb .Rect (0,0,_bbf ._bca ,_bbf ._aeg ));}else {clear (_bbf ._gbe .Pix );};_adcg :=_ff .NewAlphaOverPainter (_bbf ._gbe );
_bbf .fill (_adcg );if _bbf ._dcc ==nil {_gfb :=_fb .NewAlpha (_fb .Rect (0,0,_bbf ._bca ,_bbf ._aeg ));copy (_gfb .Pix ,_bbf ._gbe .Pix );_bbf ._dcc =_gfb ;_bbf ._gaf =true ;}else {if !_bbf ._gaf {_caa :=_fb .NewAlpha (_fb .Rect (0,0,_bbf ._bca ,_bbf ._aeg ));
copy (_caa .Pix ,_bbf ._dcc .Pix );_bbf ._dcc =_caa ;_bbf ._gaf =true ;};_gae :=_bbf ._dcc .Pix ;_abgf :=_bbf ._gbe .Pix ;for _gabd ,_bbc :=range _abgf {if _bbc ==0{_gae [_gabd ]=0;}else if _bbc !=255{_baa :=int (_gae [_gabd ])*int (_bbc );_gae [_gabd ]=uint8 (_baa /255);
};};};};func (_ddf *Context )SetInterpolator (interpolator _dge .Interpolator ){_ddf ._fdf =interpolator };func (_dae *Context )SetMask (mask *_fb .Alpha )error {if mask .Bounds ().Size ()!=_dae ._ce .Bounds ().Size (){return _b .New ("\u006d\u0061\u0073\u006b\u0020\u0073i\u007a\u0065\u0020\u006d\u0075\u0073\u0074\u0020\u006d\u0061\u0074\u0063\u0068 \u0063\u006f\u006e\u0074\u0065\u0078\u0074 \u0073\u0069\u007a\u0065");
};_dae ._dcc =mask ;_dae ._gaf =false ;return nil ;};func (_ecd *surfacePattern )ColorAt (x ,y int )_g .Color {_dfda :=_ecd ._gbad .Bounds ();switch _ecd ._beag {case _dac :if y >=_dfda .Dy (){return _g .Transparent ;};case _afcb :if x >=_dfda .Dx (){return _g .Transparent ;
};case _ccee :if x >=_dfda .Dx ()||y >=_dfda .Dy (){return _g .Transparent ;};};x =x %_dfda .Dx ()+_dfda .Min .X ;y =y %_dfda .Dy ()+_dfda .Min .Y ;return _ecd ._gbad .At (x ,y );};func (_cbf *Context )ClosePath (){if _cbf ._gcd {_dfd :=_ebfa (_cbf ._fcg );
_cbf ._bcg .Add1 (_dfd );_cbf ._afg .Add1 (_dfd );_cbf ._bda =_cbf ._fcg ;};};func (_ea *Context )SetRGB (r ,g ,b float64 ){_ea .SetRGBA (r ,g ,b ,1)};func NewContext (width ,height int )*Context {return NewContextForRGBA (_fb .NewRGBA (_fb .Rect (0,0,width ,height )));
};func (_dbfdb *Context )Matrix ()_fe .Matrix {return _dbfdb ._bge };func (_fcb *Context )InvertMask (){if _fcb ._dcc ==nil {_fcb ._dcc =_fb .NewAlpha (_fcb ._ce .Bounds ());_fcb ._gaf =true ;}else {if !_fcb ._gaf {_gaed :=_fb .NewAlpha (_fcb ._dcc .Bounds ());
copy (_gaed .Pix ,_fcb ._dcc .Pix );_fcb ._dcc =_gaed ;_fcb ._gaf =true ;};for _bfg ,_cdb :=range _fcb ._dcc .Pix {_fcb ._dcc .Pix [_bfg ]=255-_cdb ;};};};func (_dab *Context )joiner ()_ff .Joiner {switch _dab ._acgg {case _a .LineJoinBevel :return _ff .BevelJoiner ;
case _a .LineJoinRound :return _ff .RoundJoiner ;};return nil ;};func (_cda *Context )MeasureString (s string ,face _gd .Face )(_gdf ,_gfga float64 ){_fde :=&_gd .Drawer {Face :face };_gbba :=_fde .MeasureString (s );return float64 (_gbba >>6),_cda ._caf .Tf .Size ;
};func (_aagg *Context )SetColor (c _g .Color ){_aagg .setFillAndStrokeColor (c )};func _fgec (_gba _ff .Path )[][]_fe .Point {var _cgdb [][]_fe .Point ;var _gced []_fe .Point ;var _aede ,_cgbd float64 ;for _dgg :=0;_dgg < len (_gba );{switch _gba [_dgg ]{case 0:if len (_gced )> 0{_cgdb =append (_cgdb ,_gced );
_gced =nil ;};_aaa :=_fgdc (_gba [_dgg +1]);_aeaf :=_fgdc (_gba [_dgg +2]);_gced =append (_gced ,_fe .NewPoint (_aaa ,_aeaf ));_aede ,_cgbd =_aaa ,_aeaf ;_dgg +=4;case 1:_ebc :=_fgdc (_gba [_dgg +1]);_cdac :=_fgdc (_gba [_dgg +2]);_gced =append (_gced ,_fe .NewPoint (_ebc ,_cdac ));
_aede ,_cgbd =_ebc ,_cdac ;_dgg +=4;case 2:_cdae :=_fgdc (_gba [_dgg +1]);_ffcg :=_fgdc (_gba [_dgg +2]);_fgd :=_fgdc (_gba [_dgg +3]);_fdef :=_fgdc (_gba [_dgg +4]);_fgda :=_fc (_aede ,_cgbd ,_cdae ,_ffcg ,_fgd ,_fdef );_gced =append (_gced ,_fgda ...);
_aede ,_cgbd =_fgd ,_fdef ;_dgg +=6;case 3:_cfde :=_fgdc (_gba [_dgg +1]);_aad :=_fgdc (_gba [_dgg +2]);_eac :=_fgdc (_gba [_dgg +3]);_cac :=_fgdc (_gba [_dgg +4]);_faedb :=_fgdc (_gba [_dgg +5]);_cdd :=_fgdc (_gba [_dgg +6]);_bged :=_cd (_aede ,_cgbd ,_cfde ,_aad ,_eac ,_cac ,_faedb ,_cdd );
_gced =append (_gced ,_bged ...);_aede ,_cgbd =_faedb ,_cdd ;_dgg +=8;default:_fed .Log .Debug ("\u0057\u0041\u0052\u004e: \u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0070\u0061\u0074\u0068\u003a\u0020%\u0076",_gba );return _cgdb ;};};if len (_gced )> 0{_cgdb =append (_cgdb ,_gced );
};return _cgdb ;};func (_aba *linearGradient )ColorAt (x ,y int )_g .Color {if len (_aba ._dagg )==0{return _g .Transparent ;};_agda ,_edd :=float64 (x ),float64 (y );_faef ,_dgcc ,_abge ,_fecb :=_aba ._ggfd ,_aba ._eee ,_aba ._cea ,_aba ._dabd ;_bdcd ,_bff :=_abge -_faef ,_fecb -_dgcc ;
if _bff ==0&&_bdcd !=0{return _dga ((_agda -_faef )/_bdcd ,_aba ._dagg );};if _bdcd ==0&&_bff !=0{return _dga ((_edd -_dgcc )/_bff ,_aba ._dagg );};_fea :=_bdcd *(_agda -_faef )+_bff *(_edd -_dgcc );if _fea < 0{return _aba ._dagg [0]._dcee ;};_cfd :=_ec .Hypot (_bdcd ,_bff );
_dabb :=((_agda -_faef )*-_bff +(_edd -_dgcc )*_bdcd )/(_cfd *_cfd );_fdcg ,_baae :=_faef +_dabb *-_bff ,_dgcc +_dabb *_bdcd ;_bbbg :=_ec .Hypot (_agda -_fdcg ,_edd -_baae )/_cfd ;return _dga (_bbbg ,_aba ._dagg );};func (_ddbe *Context )Pop (){_ebfc :=*_ddbe ;
_fcge :=_ddbe ._dce ;_eade :=_fcge [len (_fcge )-1];*_ddbe =*_eade ;_ddbe ._bcg =_ebfc ._bcg ;_ddbe ._afg =_ebfc ._afg ;_ddbe ._fcg =_ebfc ._fcg ;_ddbe ._bda =_ebfc ._bda ;_ddbe ._gcd =_ebfc ._gcd ;};type Context struct{_bca int ;_aeg int ;_gec *_ff .Rasterizer ;
_ce *_fb .RGBA ;_dcc *_fb .Alpha ;_cag _g .Color ;_dbe _a .Pattern ;_gdc _a .Pattern ;_bcg _ff .Path ;_afg _ff .Path ;_fcg _fe .Point ;_bda _fe .Point ;_gcd bool ;_da []float64 ;_eb float64 ;_cgb float64 ;_gcb _a .LineCap ;_acgg _a .LineJoin ;_dgc _a .FillRule ;
_bge _fe .Matrix ;_caf _a .TextState ;_dce []*Context ;_gaf bool ;_gbe *_fb .Alpha ;_fdf _dge .Interpolator ;};func (_ecg *Context )SetRGBA255 (r ,g ,b ,a int ){_ecg ._cag =_g .NRGBA {uint8 (r ),uint8 (g ),uint8 (b ),uint8 (a )};_ecg .setFillAndStrokeColor (_ecg ._cag );
};func _ceab (_edeaf _fb .Image )*_fb .RGBA {_eaea :=_edeaf .Bounds ();_agbd :=_fb .NewRGBA (_eaea );_de .Draw (_agbd ,_eaea ,_edeaf ,_eaea .Min ,_de .Src );return _agbd ;};func (_ffg *Context )SetRGBA (r ,g ,b ,a float64 ){_ ,_ ,_ ,_fbe :=_ffg ._cag .RGBA ();
if _fbe > 0&&_fbe !=65535&&a ==1{a =float64 (_fbe )/65535;};_ffg ._cag =_g .NRGBA {uint8 (r *255),uint8 (g *255),uint8 (b *255),uint8 (a *255)};_ffg .setFillAndStrokeColor (_ffg ._cag );};func (_dcad *Context )drawString (_bbad string ,_gbb _gd .Face ,_bfe ,_bgd float64 ){_eca :=&_gd .Drawer {Src :_fb .NewUniform (_dcad ._cag ),Face :_gbb ,Dot :_ebfa (_fe .NewPoint (_bfe ,_bgd ))};
_egc :=rune (-1);for _ ,_eab :=range _bbad {if _egc >=0{_eca .Dot .X +=_eca .Face .Kern (_egc ,_eab );};_edaa ,_abe ,_fff ,_ggfa ,_dfdd :=_eca .Face .Glyph (_eca .Dot ,_eab );if !_dfdd {continue ;};_caag :=_edaa .Sub (_edaa .Min );_afb :=_fb .NewRGBA (_caag );
_dge .DrawMask (_afb ,_caag ,_eca .Src ,_fb .Point {},_abe ,_fff ,_dge .Over );var _fcc *_dge .Options ;if _dcad ._dcc !=nil {_fcc =&_dge .Options {DstMask :_dcad ._dcc ,DstMaskP :_fb .Point {}};};_bed :=_dcad ._bge .Clone ().Translate (float64 (_edaa .Min .X ),float64 (_edaa .Min .Y ));
_bbcf :=_fa .Aff3 {_bed [0],_bed [3],_bed [6],_bed [1],_bed [4],_bed [7]};_dcad ._fdf .Transform (_dcad ._ce ,_bbcf ,_afb ,_caag ,_dge .Over ,_fcc );_eca .Dot .X +=_ggfa ;_egc =_eab ;};};func _fgdb (_gfca float64 )float64 {return _gfca *_ec .Pi /180};type patternPainter struct{_dec *_fb .RGBA ;
_fga *_fb .Alpha ;_eeec _a .Pattern ;};func _ccce (_gefg _fb .Image ,_cfb repeatOp )_a .Pattern {return &surfacePattern {_gbad :_gefg ,_beag :_cfb };};func NewLinearGradient (x0 ,y0 ,x1 ,y1 float64 )_a .Gradient {_efdg :=&linearGradient {_ggfd :x0 ,_eee :y0 ,_cea :x1 ,_dabd :y1 };
return _efdg ;};func _faea (_gegc ,_aac _g .Color ,_fdec float64 )_g .Color {_bgfg ,_ffgd ,_ffbc ,_egg :=_gegc .RGBA ();_ecga ,_ceeg ,_bgc ,_abbd :=_aac .RGBA ();return _g .RGBA {_edg (_bgfg ,_ecga ,_fdec ),_edg (_ffgd ,_ceeg ,_fdec ),_edg (_ffbc ,_bgc ,_fdec ),_edg (_egg ,_abbd ,_fdec )};
};func (_egb *radialGradient )ColorAt (x ,y int )_g .Color {if len (_egb ._bcdd )==0{return _g .Transparent ;};_ddge ,_fad :=float64 (x )+0.5-_egb ._dbfda ._dceba ,float64 (y )+0.5-_egb ._dbfda ._fdcd ;_fgg :=_gada (_ddge ,_fad ,_egb ._dbfda ._cgf ,_egb ._geac ._dceba ,_egb ._geac ._fdcd ,_egb ._geac ._cgf );
_dff :=_gada (_ddge ,_fad ,-_egb ._dbfda ._cgf ,_ddge ,_fad ,_egb ._dbfda ._cgf );if _egb ._gfgb ==0{if _fgg ==0{return _g .Transparent ;};_ccef :=0.5*_dff /_fgg ;if _ccef *_egb ._geac ._cgf >=_egb ._dfbd {return _dga (_ccef ,_egb ._bcdd );};return _g .Transparent ;
};_cee :=_gada (_fgg ,_egb ._gfgb ,0,_fgg ,-_dff ,0);if _cee >=0{_daage :=_ec .Sqrt (_cee );_beg :=(_fgg +_daage )*_egb ._fce ;_gbc :=(_fgg -_daage )*_egb ._fce ;if _beg *_egb ._geac ._cgf >=_egb ._dfbd {return _dga (_beg ,_egb ._bcdd );}else if _gbc *_egb ._geac ._cgf >=_egb ._dfbd {return _dga (_gbc ,_egb ._bcdd );
};};return _g .Transparent ;};func _cdfbg (_agbb _ff .Path ,_fdca []float64 ,_gddd float64 )_ff .Path {return _gdcg (_afa (_fgec (_agbb ),_fdca ,_gddd ));};func (_ecb *Context )SetLineWidth (lineWidth float64 ){_ecb ._cgb =lineWidth };func (_dba *Context )Clear (){_aed :=_fb .NewUniform (_dba ._cag );
_dge .Draw (_dba ._ce ,_dba ._ce .Bounds (),_aed ,_fb .Point {},_dge .Src );};type circle struct{_dceba ,_fdcd ,_cgf float64 };type solidPattern struct{_cba _g .Color };func (_gdeg *Context )Identity (){_gdeg ._bge =_fe .IdentityMatrix ()};func (_bdc stops )Len ()int {return len (_bdc )};
func (_age *patternPainter )Paint (ss []_ff .Span ,done bool ){_gbf :=_age ._dec .Bounds ();for _ ,_ceg :=range ss {if _ceg .Y < _gbf .Min .Y {continue ;};if _ceg .Y >=_gbf .Max .Y {return ;};if _ceg .X0 < _gbf .Min .X {_ceg .X0 =_gbf .Min .X ;};if _ceg .X1 > _gbf .Max .X {_ceg .X1 =_gbf .Max .X ;
};if _ceg .X0 >=_ceg .X1 {continue ;};const _cbde =1<<16-1;_dfbb :=_ceg .Y -_age ._dec .Rect .Min .Y ;_eec :=_ceg .X0 -_age ._dec .Rect .Min .X ;_aedeg :=(_ceg .Y -_age ._dec .Rect .Min .Y )*_age ._dec .Stride +(_ceg .X0 -_age ._dec .Rect .Min .X )*4;_ddea :=_aedeg +(_ceg .X1 -_ceg .X0 )*4;
for _gfc ,_bdg :=_aedeg ,_eec ;_gfc < _ddea ;_gfc ,_bdg =_gfc +4,_bdg +1{_feae :=_ceg .Alpha ;if _age ._fga !=nil {_feae =_feae *uint32 (_age ._fga .AlphaAt (_bdg ,_dfbb ).A )/255;if _feae ==0{continue ;};};_aeafd :=_age ._eeec .ColorAt (_bdg ,_dfbb );
_ebca ,_dgeg ,_ccf ,_aefc :=_aeafd .RGBA ();_gdff :=uint32 (_age ._dec .Pix [_gfc +0]);_abd :=uint32 (_age ._dec .Pix [_gfc +1]);_ecgf :=uint32 (_age ._dec .Pix [_gfc +2]);_ffff :=uint32 (_age ._dec .Pix [_gfc +3]);_gfde :=(_cbde -(_aefc *_feae /_cbde ))*0x101;
_age ._dec .Pix [_gfc +0]=uint8 ((_gdff *_gfde +_ebca *_feae )/_cbde >>8);_age ._dec .Pix [_gfc +1]=uint8 ((_abd *_gfde +_dgeg *_feae )/_cbde >>8);_age ._dec .Pix [_gfc +2]=uint8 ((_ecgf *_gfde +_ccf *_feae )/_cbde >>8);_age ._dec .Pix [_gfc +3]=uint8 ((_ffff *_gfde +_aefc *_feae )/_cbde >>8);
};};};func (_eebc stops )Less (i ,j int )bool {return _eebc [i ]._abbb < _eebc [j ]._abbb };func NewContextForImage (im _fb .Image )*Context {return NewContextForRGBA (_ceab (im ))};type repeatOp int ;func (_fecg *Context )SetHexColor (x string ){_dbc ,_daa ,_bfd ,_aebg :=_gfad (x );
_fecg .SetRGBA255 (_dbc ,_daa ,_bfd ,_aebg );};func (_caff *Context )ShearAbout (sx ,sy ,x ,y float64 ){_caff .Translate (x ,y );_caff .Shear (sx ,sy );_caff .Translate (-x ,-y );};func (_fgf *Context )Rotate (angle float64 ){_fgf ._bge =_fgf ._bge .Rotate (angle )};
func (_bgf *Context )DrawStringAnchored (s string ,face _gd .Face ,x ,y ,ax ,ay float64 ){_dgec ,_beb :=_bgf .MeasureString (s ,face );_bgf .drawString (s ,face ,x -ax *_dgec ,y +ay *_beb );};func (_ccc *Context )FillPreserve (){var _ggb _ff .Painter ;
if _ccc ._dcc ==nil {if _cge ,_faee :=_ccc ._dbe .(*solidPattern );_faee {_fba :=_ff .NewRGBAPainter (_ccc ._ce );_fba .SetColor (_cge ._cba );_ggb =_fba ;};};if _ggb ==nil {_ggb =_afec (_ccc ._ce ,_ccc ._dcc ,_ccc ._dbe );};_ccc .fill (_ggb );};func (_gedd *Context )DrawImageAnchored (im _fb .Image ,x ,y int ,ax ,ay float64 ){_bbb :=im .Bounds ().Size ();
x -=int (ax *float64 (_bbb .X ));y -=int (ay *float64 (_bbb .Y ));_cga :=_gedd ._bge .Clone ().Translate (float64 (x ),float64 (y ));_feb :=_fa .Aff3 {_cga [0],_cga [3],_cga [6],_cga [1],_cga [4],_cga [7]};if _gedd ._dcc ==nil {_gedd ._fdf .Transform (_gedd ._ce ,_feb ,im ,im .Bounds (),_dge .Over ,nil );
}else {_gedd ._fdf .Transform (_gedd ._ce ,_feb ,im ,im .Bounds (),_dge .Over ,&_dge .Options {DstMask :_gedd ._dcc ,DstMaskP :_fb .Point {}});};};func (_dedd *Context )NewSubPath (){if _dedd ._gcd {_dedd ._afg .Add1 (_ebfa (_dedd ._fcg ));};_dedd ._gcd =false ;
};func (_gfe *Context )FillPattern ()_a .Pattern {return _gfe ._dbe };func (_gdb *Context )DrawRectangle (x ,y ,w ,h float64 ){_gdb .NewSubPath ();_gdb .MoveTo (x ,y );_gdb .LineTo (x +w ,y );_gdb .LineTo (x +w ,y +h );_gdb .LineTo (x ,y +h );_gdb .ClosePath ();
};func (_faed *Context )Shear (x ,y float64 ){_faed ._bge .Shear (x ,y )};func _edg (_abgb ,_fadd uint32 ,_aef float64 )uint8 {return uint8 (int32 (float64 (_abgb )*(1.0-_aef )+float64 (_fadd )*_aef )>>8);};func _ebfa (_gcbcg _fe .Point )_ab .Point26_6 {return _ab .Point26_6 {X :_agbbc (_gcbcg .X ),Y :_agbbc (_gcbcg .Y )};
};type stop struct{_abbb float64 ;_dcee _g .Color ;};func (_dgfa *Context )Image ()_fb .Image {return _dgfa ._ce };func (_gafb *Context )Interpolator ()_dge .Interpolator {return _gafb ._fdf };func (_cfa *Context )Fill (){_cfa .FillPreserve ();_cfa .ClearPath ()};
func (_gfa *linearGradient )AddColorStop (offset float64 ,color _g .Color ){_gfa ._dagg =append (_gfa ._dagg ,stop {_abbb :offset ,_dcee :color });_dg .Sort (_gfa ._dagg );};func (_bae *Context )CubicTo (x1 ,y1 ,x2 ,y2 ,x3 ,y3 float64 ){if !_bae ._gcd {_bae .MoveTo (x1 ,y1 );
};_ead ,_cbd :=_bae ._bda .X ,_bae ._bda .Y ;x1 ,y1 =_bae .Transform (x1 ,y1 );x2 ,y2 =_bae .Transform (x2 ,y2 );x3 ,y3 =_bae .Transform (x3 ,y3 );_bfdg :=_cd (_ead ,_cbd ,x1 ,y1 ,x2 ,y2 ,x3 ,y3 );_fg :=_ebfa (_bae ._bda );for _ ,_efa :=range _bfdg [1:]{_cgd :=_ebfa (_efa );
if _cgd ==_fg {continue ;};_fg =_cgd ;_bae ._bcg .Add1 (_cgd );_bae ._afg .Add1 (_cgd );_bae ._bda =_efa ;};};func (_cccb *Context )drawRegularPolygon (_ddb int ,_bbag ,_cdef ,_efd ,_addd float64 ){_fge :=2*_ec .Pi /float64 (_ddb );_addd -=_ec .Pi /2;if _ddb %2==0{_addd +=_fge /2;
};_cccb .NewSubPath ();for _bab :=0;_bab < _ddb ;_bab ++{_gdcc :=_addd +_fge *float64 (_bab );_cccb .LineTo (_bbag +_efd *_ec .Cos (_gdcc ),_cdef +_efd *_ec .Sin (_gdcc ));};_cccb .ClosePath ();};func (_bdae *Context )DrawEllipse (x ,y ,rx ,ry float64 ){_bdae .NewSubPath ();
_bdae .DrawEllipticalArc (x ,y ,rx ,ry ,0,2*_ec .Pi );_bdae .ClosePath ();};func NewRadialGradient (x0 ,y0 ,r0 ,x1 ,y1 ,r1 float64 )_a .Gradient {_ege :=circle {x0 ,y0 ,r0 };_gagd :=circle {x1 ,y1 ,r1 };_cabg :=circle {x1 -x0 ,y1 -y0 ,r1 -r0 };_eddc :=_gada (_cabg ._dceba ,_cabg ._fdcd ,-_cabg ._cgf ,_cabg ._dceba ,_cabg ._fdcd ,_cabg ._cgf );
var _ebb float64 ;if _eddc !=0{_ebb =1.0/_eddc ;};_gceg :=-_ege ._cgf ;_edf :=&radialGradient {_dbfda :_ege ,_ccea :_gagd ,_geac :_cabg ,_gfgb :_eddc ,_fce :_ebb ,_dfbd :_gceg };return _edf ;};type linearGradient struct{_ggfd ,_eee ,_cea ,_dabd float64 ;
_dagg stops ;};func (_dceb *Context )DrawRoundedRectangle (x ,y ,w ,h ,r float64 ){_fgb ,_ggf ,_bad ,_dcd :=x ,x +r ,x +w -r ,x +w ;_gea ,_daed ,_eae ,_cae :=y ,y +r ,y +h -r ,y +h ;_dceb .NewSubPath ();_dceb .MoveTo (_ggf ,_gea );_dceb .LineTo (_bad ,_gea );
_dceb .DrawArc (_bad ,_daed ,r ,_fgdb (270),_fgdb (360));_dceb .LineTo (_dcd ,_eae );_dceb .DrawArc (_bad ,_eae ,r ,_fgdb (0),_fgdb (90));_dceb .LineTo (_ggf ,_cae );_dceb .DrawArc (_ggf ,_eae ,r ,_fgdb (90),_fgdb (180));_dceb .LineTo (_fgb ,_daed );_dceb .DrawArc (_ggf ,_daed ,r ,_fgdb (180),_fgdb (270));
_dceb .ClosePath ();};func (_deb *Context )StrokePreserve (){var _bba _ff .Painter ;if _deb ._dcc ==nil {if _cce ,_ccdb :=_deb ._gdc .(*solidPattern );_ccdb {_fbc :=_ff .NewRGBAPainter (_deb ._ce );_fbc .SetColor (_cce ._cba );_bba =_fbc ;};};if _bba ==nil {_bba =_afec (_deb ._ce ,_deb ._dcc ,_deb ._gdc );
};_deb .stroke (_bba );};func (_dfc *Context )SetRGB255 (r ,g ,b int ){_dfc .SetRGBA255 (r ,g ,b ,255)};func (_dfac stops )Swap (i ,j int ){_dfac [i ],_dfac [j ]=_dfac [j ],_dfac [i ]};func (_eaa *Context )Transform (x ,y float64 )(_bgb ,_gfbg float64 ){return _eaa ._bge .Transform (x ,y )};
func (_ffc *Context )SetLineCap (lineCap _a .LineCap ){_ffc ._gcb =lineCap };func (_cde *Context )Width ()int {return _cde ._bca };func (_ecbb *Context )setFillAndStrokeColor (_dca _g .Color ){_ecbb ._cag =_dca ;_ecbb ._dbe =_dbb (_dca );_ecbb ._gdc =_dbb (_dca );
};const (_afba repeatOp =iota ;_dac ;_afcb ;_ccee ;);func (_ebf *Context )Translate (x ,y float64 ){_ebf ._bge =_ebf ._bge .Translate (x ,y )};