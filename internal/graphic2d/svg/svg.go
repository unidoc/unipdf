//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package svg ;import (_cd "encoding/xml";_g "fmt";_cg "github.com/unidoc/unipdf/v3/common";_f "github.com/unidoc/unipdf/v3/contentstream";_ag "github.com/unidoc/unipdf/v3/contentstream/draw";_b "github.com/unidoc/unipdf/v3/internal/graphic2d";_gda "golang.org/x/net/html/charset";
_e "io";_gd "math";_ae "os";_ad "strconv";_a "strings";_d "unicode";);func _dd (_dag *GraphicSVG ,_fe *_f .ContentCreator ){_fe .Add_q ();_dag .Style .toContentStream (_fe );_cde ,_ebdb :=_bfb (_dag .Attributes ["\u0070\u006f\u0069\u006e\u0074\u0073"]);
if _ebdb !=nil {_cg .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0075\u006e\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0070\u006f\u0069\u006e\u0074\u0073\u0020\u0061\u0074\u0074\u0072i\u0062\u0075\u0074\u0065\u003a\u0020\u0025\u0076",_ebdb );
return ;};if len (_cde )%2> 0{_cg .Log .Debug ("\u0045\u0052R\u004f\u0052\u0020\u0069n\u0076\u0061l\u0069\u0064\u0020\u0070\u006f\u0069\u006e\u0074s\u0020\u0061\u0074\u0074\u0072\u0069\u0062\u0075\u0074\u0065\u0020\u006ce\u006e\u0067\u0074\u0068");return ;
};for _bca :=0;_bca < len (_cde );{if _bca ==0{_fe .Add_m (_cde [_bca ]*_dag ._ffd ,_cde [_bca +1]*_dag ._ffd );}else {_fe .Add_l (_cde [_bca ]*_dag ._ffd ,_cde [_bca +1]*_dag ._ffd );};_bca +=2;};if _dag .Style .FillColor !=""&&_dag .Style .StrokeColor !=""{_fe .Add_B ();
}else if _dag .Style .FillColor !=""{_fe .Add_f ();}else if _dag .Style .StrokeColor !=""{_fe .Add_S ();};_fe .Add_h ();_fe .Add_Q ();};var _ceac commands ;func _ebe (_cag *GraphicSVG ,_bbg *_f .ContentCreator ){_bbg .Add_q ();_cag .Style .toContentStream (_bbg );
_aga ,_aag :=_aage (_cag .Attributes ["\u0078\u0031"],64);if _aag !=nil {_cg .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0063\u0078\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_aag .Error ());
};_bac ,_aag :=_aage (_cag .Attributes ["\u0079\u0031"],64);if _aag !=nil {_cg .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0063\u0079\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_aag .Error ());
};_bcf ,_aag :=_aage (_cag .Attributes ["\u0078\u0032"],64);if _aag !=nil {_cg .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0072\u0078\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_aag .Error ());
};_fcf ,_aag :=_aage (_cag .Attributes ["\u0079\u0032"],64);if _aag !=nil {_cg .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0072\u0079\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_aag .Error ());
};_bbg .Add_m (_aga *_cag ._ffd ,_bac *_cag ._ffd );_bbg .Add_l (_bcf *_cag ._ffd ,_fcf *_cag ._ffd );if _cag .Style .FillColor !=""&&_cag .Style .StrokeColor !=""{_bbg .Add_B ();}else if _cag .Style .FillColor !=""{_bbg .Add_f ();}else if _cag .Style .StrokeColor !=""{_bbg .Add_S ();
};_bbg .Add_h ();_bbg .Add_Q ();};func _cfb (_eda string )(*Path ,error ){_ceac =_fdge ();_adec ,_eccg :=_gac (_gafd (_eda ));if _eccg !=nil {return nil ,_eccg ;};return _feb (_adec ),nil ;};func ParseFromStream (source _e .Reader )(*GraphicSVG ,error ){_bbb :=_cd .NewDecoder (source );
_bbb .CharsetReader =_gda .NewReaderLabel ;_ffbb ,_efce :=_dfc (_bbb );if _efce !=nil {return nil ,_efce ;};if _cea :=_ffbb .Decode (_bbb );_cea !=nil &&_cea !=_e .EOF {return nil ,_cea ;};return _ffbb ,nil ;};func _gfe (_cac []token ,_ggg string )([]token ,string ){if _ggg !=""{_cac =append (_cac ,token {_ggg ,false });
_ggg ="";};return _cac ,_ggg ;};func (_gcd *GraphicSVG )setDefaultScaling (_eggd float64 ){_gcd ._ffd =_eggd ;if _gcd .Style !=nil &&_gcd .Style .StrokeWidth > 0{_gcd .Style .StrokeWidth =_gcd .Style .StrokeWidth *_gcd ._ffd ;};for _ ,_bfa :=range _gcd .Children {_bfa .setDefaultScaling (_eggd );
};};type Subpath struct{Commands []*Command ;};type pathParserError struct{_feaf string };func _fdg (_ea *GraphicSVG ,_fbg *_f .ContentCreator ){_fbg .Add_q ();_ea .Style .toContentStream (_fbg );_ef ,_aaf :=_aage (_ea .Attributes ["\u0078"],64);if _aaf !=nil {_cg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020w\u0068\u0069\u006c\u0065\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020`\u0078\u0060\u0020\u0076\u0061\u006c\u0075e\u003a\u0020\u0025\u0076",_aaf .Error ());
};_ca ,_aaf :=_aage (_ea .Attributes ["\u0079"],64);if _aaf !=nil {_cg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020w\u0068\u0069\u006c\u0065\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020`\u0079\u0060\u0020\u0076\u0061\u006c\u0075e\u003a\u0020\u0025\u0076",_aaf .Error ());
};_ebd ,_aaf :=_aage (_ea .Attributes ["\u0077\u0069\u0064t\u0068"],64);if _aaf !=nil {_cg .Log .Debug ("\u0045\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0073\u0074\u0072\u006f\u006b\u0065\u0020\u0077\u0069\u0064\u0074\u0068\u0020v\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_aaf .Error ());
};_cf ,_aaf :=_aage (_ea .Attributes ["\u0068\u0065\u0069\u0067\u0068\u0074"],64);if _aaf !=nil {_cg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0077h\u0069\u006c\u0065 \u0070\u0061\u0072\u0073i\u006e\u0067\u0020\u0073\u0074\u0072\u006f\u006b\u0065\u0020\u0068\u0065\u0069\u0067\u0068\u0074\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_aaf .Error ());
};_fbg .Add_re (_ef *_ea ._ffd ,_ca *_ea ._ffd ,_ebd *_ea ._ffd ,_cf *_ea ._ffd );if _ea .Style .FillColor !=""&&_ea .Style .StrokeColor !=""{_fbg .Add_B ();}else if _ea .Style .FillColor !=""{_fbg .Add_f ();}else if _ea .Style .StrokeColor !=""{_fbg .Add_S ();
};_fbg .Add_Q ();};func (_aeb *GraphicSVG )Decode (decoder *_cd .Decoder )error {for {_afc ,_acg :=decoder .Token ();if _afc ==nil &&_acg ==_e .EOF {break ;};if _acg !=nil {return _acg ;};switch _bd :=_afc .(type ){case _cd .StartElement :_efg :=_de (_bd );
_egg :=_efg .Decode (decoder );if _egg !=nil {return _egg ;};_aeb .Children =append (_aeb .Children ,_efg );case _cd .CharData :_ffdb :=_a .TrimSpace (string (_bd ));if _ffdb !=""{_aeb .Content =string (_bd );};case _cd .EndElement :if _bd .Name .Local ==_aeb .Name {return nil ;
};};};return nil ;};func _ecb (_edb map[string ]string ,_ddda float64 )(*GraphicSVGStyle ,error ){_aegd :=_ded ();_daff ,_adaa :=_edb ["\u0066\u0069\u006c\u006c"];if _adaa {_aegd .FillColor =_daff ;if _daff =="\u006e\u006f\u006e\u0065"{_aegd .FillColor ="";
};};_baa ,_cda :=_edb ["\u0073\u0074\u0072\u006f\u006b\u0065"];if _cda {_aegd .StrokeColor =_baa ;if _baa =="\u006e\u006f\u006e\u0065"{_aegd .StrokeColor ="";};};_dagf ,_fde :=_edb ["\u0073\u0074\u0072o\u006b\u0065\u002d\u0077\u0069\u0064\u0074\u0068"];
if _fde {_ecc ,_efe :=_aage (_dagf ,64);if _efe !=nil {return nil ,_efe ;};_aegd .StrokeWidth =_ecc *_ddda ;};return _aegd ,nil ;};func (_dacg *GraphicSVG )toContentStream (_adge *_f .ContentCreator ){_bebg ,_edgf :=_ecb (_dacg .Attributes ,_dacg ._ffd );
if _edgf !=nil {_cg .Log .Debug ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073e\u0020\u0073\u0074\u0079\u006c\u0065\u0020a\u0074\u0074\u0072\u0069\u0062\u0075\u0074\u0065\u003a\u0020%\u0076",_edgf );};_dacg .Style =_bebg ;
switch _dacg .Name {case "\u0070\u0061\u0074\u0068":_bc (_dacg ,_adge );for _ ,_ada :=range _dacg .Children {_ada .toContentStream (_adge );};case "\u0072\u0065\u0063\u0074":_fdg (_dacg ,_adge );for _ ,_bad :=range _dacg .Children {_bad .toContentStream (_adge );
};case "\u0063\u0069\u0072\u0063\u006c\u0065":_fff (_dacg ,_adge );for _ ,_eec :=range _dacg .Children {_eec .toContentStream (_adge );};case "\u0065l\u006c\u0069\u0070\u0073\u0065":_ffc (_dacg ,_adge );for _ ,_bdc :=range _dacg .Children {_bdc .toContentStream (_adge );
};case "\u0070\u006f\u006c\u0079\u006c\u0069\u006e\u0065":_dd (_dacg ,_adge );for _ ,_cfd :=range _dacg .Children {_cfd .toContentStream (_adge );};case "\u0070o\u006c\u0079\u0067\u006f\u006e":_bbd (_dacg ,_adge );for _ ,_eff :=range _dacg .Children {_eff .toContentStream (_adge );
};case "\u006c\u0069\u006e\u0065":_ebe (_dacg ,_adge );for _ ,_cgg :=range _dacg .Children {_cgg .toContentStream (_adge );};case "\u0067":_fea ,_bee :=_dacg .Attributes ["\u0066\u0069\u006c\u006c"];_gdea ,_dcc :=_dacg .Attributes ["\u0073\u0074\u0072\u006f\u006b\u0065"];
_fda ,_agf :=_dacg .Attributes ["\u0073\u0074\u0072o\u006b\u0065\u002d\u0077\u0069\u0064\u0074\u0068"];for _ ,_bbe :=range _dacg .Children {if _ ,_afg :=_bbe .Attributes ["\u0066\u0069\u006c\u006c"];!_afg &&_bee {_bbe .Attributes ["\u0066\u0069\u006c\u006c"]=_fea ;
};if _ ,_acbc :=_bbe .Attributes ["\u0073\u0074\u0072\u006f\u006b\u0065"];!_acbc &&_dcc {_bbe .Attributes ["\u0073\u0074\u0072\u006f\u006b\u0065"]=_gdea ;};if _ ,_fdde :=_bbe .Attributes ["\u0073\u0074\u0072o\u006b\u0065\u002d\u0077\u0069\u0064\u0074\u0068"];
!_fdde &&_agf {_bbe .Attributes ["\u0073\u0074\u0072o\u006b\u0065\u002d\u0077\u0069\u0064\u0074\u0068"]=_fda ;};_bbe .toContentStream (_adge );};};};func _aage (_gbec string ,_ccfa int )(float64 ,error ){_gff ,_bdf :=_cgc (_gbec );_bcca ,_ddf :=_ad .ParseFloat (_gff ,_ccfa );
if _ddf !=nil {return 0,_ddf ;};if _cfg ,_acf :=_ga [_bdf ];_acf {_bcca =_bcca *_cfg ;}else {_bcca =_bcca *_ge ;};return _bcca ,nil ;};type GraphicSVGStyle struct{FillColor string ;StrokeColor string ;StrokeWidth float64 ;};func _feb (_dcfb []*Command )*Path {_deac :=&Path {};
var _gec []*Command ;for _dfb ,_bcd :=range _dcfb {switch _a .ToLower (_bcd .Symbol ){case _ceac ._ebf :if len (_gec )> 0{_deac .Subpaths =append (_deac .Subpaths ,&Subpath {_gec });};_gec =[]*Command {_bcd };case _ceac ._adbg :_gec =append (_gec ,_bcd );
_deac .Subpaths =append (_deac .Subpaths ,&Subpath {_gec });_gec =[]*Command {};default:_gec =append (_gec ,_bcd );if len (_dcfb )==_dfb +1{_deac .Subpaths =append (_deac .Subpaths ,&Subpath {_gec });};};};return _deac ;};func _bbd (_db *GraphicSVG ,_dac *_f .ContentCreator ){_dac .Add_q ();
_db .Style .toContentStream (_dac );_ccg ,_acb :=_bfb (_db .Attributes ["\u0070\u006f\u0069\u006e\u0074\u0073"]);if _acb !=nil {_cg .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0075\u006e\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0070\u006f\u0069\u006e\u0074\u0073\u0020\u0061\u0074\u0074\u0072i\u0062\u0075\u0074\u0065\u003a\u0020\u0025\u0076",_acb );
return ;};if len (_ccg )%2> 0{_cg .Log .Debug ("\u0045\u0052R\u004f\u0052\u0020\u0069n\u0076\u0061l\u0069\u0064\u0020\u0070\u006f\u0069\u006e\u0074s\u0020\u0061\u0074\u0074\u0072\u0069\u0062\u0075\u0074\u0065\u0020\u006ce\u006e\u0067\u0074\u0068");return ;
};for _fgc :=0;_fgc < len (_ccg );{if _fgc ==0{_dac .Add_m (_ccg [_fgc ]*_db ._ffd ,_ccg [_fgc +1]*_db ._ffd );}else {_dac .Add_l (_ccg [_fgc ]*_db ._ffd ,_ccg [_fgc +1]*_db ._ffd );};_fgc +=2;};_dac .Add_l (_ccg [0]*_db ._ffd ,_ccg [1]*_db ._ffd );if _db .Style .FillColor !=""&&_db .Style .StrokeColor !=""{_dac .Add_B ();
}else if _db .Style .FillColor !=""{_dac .Add_f ();}else if _db .Style .StrokeColor !=""{_dac .Add_S ();};_dac .Add_h ();_dac .Add_Q ();};func _fff (_gcb *GraphicSVG ,_gadb *_f .ContentCreator ){_gadb .Add_q ();_gcb .Style .toContentStream (_gadb );_agd ,_ege :=_aage (_gcb .Attributes ["\u0063\u0078"],64);
if _ege !=nil {_cg .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0063\u0078\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_ege .Error ());};_bgf ,_ege :=_aage (_gcb .Attributes ["\u0063\u0079"],64);
if _ege !=nil {_cg .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0063\u0079\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_ege .Error ());};_ce ,_ege :=_aage (_gcb .Attributes ["\u0072"],64);
if _ege !=nil {_cg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020w\u0068\u0069\u006c\u0065\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020`\u0072\u0060\u0020\u0076\u0061\u006c\u0075e\u003a\u0020\u0025\u0076",_ege .Error ());};_fg :=_ce *_gcb ._ffd ;
_df :=_ce *_gcb ._ffd ;_ccf :=_fg *_eb ;_cee :=_df *_eb ;_gcad :=_ag .NewCubicBezierPath ();_gcad =_gcad .AppendCurve (_ag .NewCubicBezierCurve (-_fg ,0,-_fg ,_cee ,-_ccf ,_df ,0,_df ));_gcad =_gcad .AppendCurve (_ag .NewCubicBezierCurve (0,_df ,_ccf ,_df ,_fg ,_cee ,_fg ,0));
_gcad =_gcad .AppendCurve (_ag .NewCubicBezierCurve (_fg ,0,_fg ,-_cee ,_ccf ,-_df ,0,-_df ));_gcad =_gcad .AppendCurve (_ag .NewCubicBezierCurve (0,-_df ,-_ccf ,-_df ,-_fg ,-_cee ,-_fg ,0));_gcad =_gcad .Offset (_agd *_gcb ._ffd ,_bgf *_gcb ._ffd );if _gcb .Style .StrokeWidth > 0{_gcad =_gcad .Offset (_gcb .Style .StrokeWidth /2,_gcb .Style .StrokeWidth /2);
};_ag .DrawBezierPathWithCreator (_gcad ,_gadb );if _gcb .Style .FillColor !=""&&_gcb .Style .StrokeColor !=""{_gadb .Add_B ();}else if _gcb .Style .FillColor !=""{_gadb .Add_f ();}else if _gcb .Style .StrokeColor !=""{_gadb .Add_S ();};_gadb .Add_h ();
_gadb .Add_Q ();};var (_aeg =[]string {"\u0063\u006d","\u006d\u006d","\u0070\u0078","\u0070\u0074"};_ga =map[string ]float64 {"\u0063\u006d":_fc ,"\u006d\u006d":_cdc ,"\u0070\u0078":_ge ,"\u0070\u0074":1};);func _dgc (_fdga float64 ,_efa int )float64 {_fcg :=_gd .Pow (10,float64 (_efa ));
return float64 (_gcgd (_fdga *_fcg ))/_fcg ;};func _de (_aec _cd .StartElement )*GraphicSVG {_bdcd :=&GraphicSVG {};_gdb :=make (map[string ]string );for _ ,_cdbf :=range _aec .Attr {_gdb [_cdbf .Name .Local ]=_cdbf .Value ;};_bdcd .Name =_aec .Name .Local ;
_bdcd .Attributes =_gdb ;_bdcd ._ffd =1;if _bdcd .Name =="\u0073\u0076\u0067"{_deg ,_dae :=_bfb (_gdb ["\u0076i\u0065\u0077\u0042\u006f\u0078"]);if _dae !=nil {_cg .Log .Debug ("\u0055\u006ea\u0062\u006c\u0065\u0020t\u006f\u0020p\u0061\u0072\u0073\u0065\u0020\u0076\u0069\u0065w\u0042\u006f\u0078\u0020\u0061\u0074\u0074\u0072\u0069\u0062\u0075\u0074e\u003a\u0020\u0025\u0076",_dae );
return nil ;};_bdcd .ViewBox .X =_deg [0];_bdcd .ViewBox .Y =_deg [1];_bdcd .ViewBox .W =_deg [2];_bdcd .ViewBox .H =_deg [3];_bdcd .Width =_bdcd .ViewBox .W ;_bdcd .Height =_bdcd .ViewBox .H ;if _egb ,_beeg :=_gdb ["\u0077\u0069\u0064t\u0068"];_beeg {_caf ,_afge :=_aage (_egb ,64);
if _afge !=nil {_cg .Log .Debug ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073e\u0020\u0077\u0069\u0064\u0074\u0068\u0020a\u0074\u0074\u0072\u0069\u0062\u0075\u0074\u0065\u003a\u0020%\u0076",_afge );return nil ;};_bdcd .Width =_caf ;
};if _dab ,_dea :=_gdb ["\u0068\u0065\u0069\u0067\u0068\u0074"];_dea {_daf ,_cbf :=_aage (_dab ,64);if _cbf !=nil {_cg .Log .Debug ("\u0055\u006eab\u006c\u0065\u0020t\u006f\u0020\u0070\u0061rse\u0020he\u0069\u0067\u0068\u0074\u0020\u0061\u0074tr\u0069\u0062\u0075\u0074\u0065\u003a\u0020%\u0076",_cbf );
return nil ;};_bdcd .Height =_daf ;};if _bdcd .Width > 0&&_bdcd .Height > 0{_bdcd ._ffd =_bdcd .Width /_bdcd .ViewBox .W ;};};return _bdcd ;};func (_acge *GraphicSVG )SetScaling (xFactor ,yFactor float64 ){_cef :=_acge .Width /_acge .ViewBox .W ;_dcf :=_acge .Height /_acge .ViewBox .H ;
_acge .setDefaultScaling (_gd .Max (_cef ,_dcf ));for _ ,_efc :=range _acge .Children {_efc .SetScaling (xFactor ,yFactor );};};func _agdc (_cdef []float64 )[]float64 {for _cga ,_cfdf :=0,len (_cdef )-1;_cga < _cfdf ;_cga ,_cfdf =_cga +1,_cfdf -1{_cdef [_cga ],_cdef [_cfdf ]=_cdef [_cfdf ],_cdef [_cga ];
};return _cdef ;};func _dfc (_afce *_cd .Decoder )(*GraphicSVG ,error ){for {_cbe ,_fgdc :=_afce .Token ();if _cbe ==nil &&_fgdc ==_e .EOF {break ;};if _fgdc !=nil {return nil ,_fgdc ;};switch _gcc :=_cbe .(type ){case _cd .StartElement :return _de (_gcc ),nil ;
};};return &GraphicSVG {},nil ;};func (_eed pathParserError )Error ()string {return _eed ._feaf };func _cgc (_aacb string )(_gdfa ,_ebea string ){if _aacb ==""||(_aacb [len (_aacb )-1]>='0'&&_aacb [len (_aacb )-1]<='9'){return _aacb ,"";};_gdfa =_aacb ;
for _ ,_bef :=range _aeg {if _a .Contains (_gdfa ,_bef ){_ebea =_bef ;};_gdfa =_a .TrimSuffix (_gdfa ,_bef );};return ;};func _fdge ()commands {var _gddb =map[string ]int {"\u006d":2,"\u007a":0,"\u006c":2,"\u0068":1,"\u0076":1,"\u0063":6,"\u0073":4,"\u0071":4,"\u0074":2,"\u0061":7};
var _eee []string ;for _cff :=range _gddb {_eee =append (_eee ,_cff );};return commands {_eee ,_gddb ,"\u006d","\u007a"};};func ParseFromString (svgStr string )(*GraphicSVG ,error ){return ParseFromStream (_a .NewReader (svgStr ));};func _ffc (_fca *GraphicSVG ,_gdc *_f .ContentCreator ){_gdc .Add_q ();
_fca .Style .toContentStream (_gdc );_af ,_cddb :=_aage (_fca .Attributes ["\u0063\u0078"],64);if _cddb !=nil {_cg .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0063\u0078\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_cddb .Error ());
};_beb ,_cddb :=_aage (_fca .Attributes ["\u0063\u0079"],64);if _cddb !=nil {_cg .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0063\u0079\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_cddb .Error ());
};_gdf ,_cddb :=_aage (_fca .Attributes ["\u0072\u0078"],64);if _cddb !=nil {_cg .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0072\u0078\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_cddb .Error ());
};_ac ,_cddb :=_aage (_fca .Attributes ["\u0072\u0079"],64);if _cddb !=nil {_cg .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0072\u0079\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_cddb .Error ());
};_adg :=_gdf *_fca ._ffd ;_age :=_ac *_fca ._ffd ;_edce :=_af *_fca ._ffd ;_ccfg :=_beb *_fca ._ffd ;_fdd :=_adg *_eb ;_cfe :=_age *_eb ;_fdb :=_ag .NewCubicBezierPath ();_fdb =_fdb .AppendCurve (_ag .NewCubicBezierCurve (-_adg ,0,-_adg ,_cfe ,-_fdd ,_age ,0,_age ));
_fdb =_fdb .AppendCurve (_ag .NewCubicBezierCurve (0,_age ,_fdd ,_age ,_adg ,_cfe ,_adg ,0));_fdb =_fdb .AppendCurve (_ag .NewCubicBezierCurve (_adg ,0,_adg ,-_cfe ,_fdd ,-_age ,0,-_age ));_fdb =_fdb .AppendCurve (_ag .NewCubicBezierCurve (0,-_age ,-_fdd ,-_age ,-_adg ,-_cfe ,-_adg ,0));
_fdb =_fdb .Offset (_edce ,_ccfg );if _fca .Style .StrokeWidth > 0{_fdb =_fdb .Offset (_fca .Style .StrokeWidth /2,_fca .Style .StrokeWidth /2);};_ag .DrawBezierPathWithCreator (_fdb ,_gdc );if _fca .Style .FillColor !=""&&_fca .Style .StrokeColor !=""{_gdc .Add_B ();
}else if _fca .Style .FillColor !=""{_gdc .Add_f ();}else if _fca .Style .StrokeColor !=""{_gdc .Add_S ();};_gdc .Add_h ();_gdc .Add_Q ();};func _bfb (_ccb string )([]float64 ,error ){_feg :=-1;var _eae []float64 ;_ceb :=' ';for _ace ,_bce :=range _ccb {if !_d .IsNumber (_bce )&&_bce !='.'&&!(_bce =='-'&&_ceb =='e')&&_bce !='e'{if _feg !=-1{_bdd ,_ecbe :=_eef (_ccb [_feg :_ace ]);
if _ecbe !=nil {return _eae ,_ecbe ;};_eae =append (_eae ,_bdd ...);};if _bce =='-'{_feg =_ace ;}else {_feg =-1;};}else if _feg ==-1{_feg =_ace ;};_ceb =_bce ;};if _feg !=-1&&_feg !=len (_ccb ){_gbg ,_dcfgf :=_eef (_ccb [_feg :]);if _dcfgf !=nil {return _eae ,_dcfgf ;
};_eae =append (_eae ,_gbg ...);};return _eae ,nil ;};func _gcgd (_bcce float64 )int {return int (_bcce +_gd .Copysign (0.5,_bcce ))};func _ffee (_dfbb string )(_dgd ,_gee ,_caca float64 ){if (len (_dfbb )!=4&&len (_dfbb )!=7)||_dfbb [0]!='#'{_cg .Log .Debug ("I\u006ev\u0061\u006c\u0069\u0064\u0020\u0068\u0065\u0078 \u0063\u006f\u0064\u0065: \u0025\u0073",_dfbb );
return _dgd ,_gee ,_caca ;};var _bed ,_bbeb ,_bage int ;if len (_dfbb )==4{var _fbba ,_aad ,_ggag int ;_cbeb ,_baae :=_g .Sscanf (_dfbb ,"\u0023\u0025\u0031\u0078\u0025\u0031\u0078\u0025\u0031\u0078",&_fbba ,&_aad ,&_ggag );if _baae !=nil {_cg .Log .Debug ("\u0049\u006e\u0076a\u006c\u0069\u0064\u0020h\u0065\u0078\u0020\u0063\u006f\u0064\u0065:\u0020\u0025\u0073\u002c\u0020\u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0076",_dfbb ,_baae );
return _dgd ,_gee ,_caca ;};if _cbeb !=3{_cg .Log .Debug ("I\u006ev\u0061\u006c\u0069\u0064\u0020\u0068\u0065\u0078 \u0063\u006f\u0064\u0065: \u0025\u0073",_dfbb );return _dgd ,_gee ,_caca ;};_bed =_fbba *16+_fbba ;_bbeb =_aad *16+_aad ;_bage =_ggag *16+_ggag ;
}else {_gefg ,_dfa :=_g .Sscanf (_dfbb ,"\u0023\u0025\u0032\u0078\u0025\u0032\u0078\u0025\u0032\u0078",&_bed ,&_bbeb ,&_bage );if _dfa !=nil {_cg .Log .Debug ("I\u006ev\u0061\u006c\u0069\u0064\u0020\u0068\u0065\u0078 \u0063\u006f\u0064\u0065: \u0025\u0073",_dfbb );
return _dgd ,_gee ,_caca ;};if _gefg !=3{_cg .Log .Debug ("\u0049\u006e\u0076\u0061\u006c\u0069d\u0020\u0068\u0065\u0078\u0020\u0063\u006f\u0064\u0065\u003a\u0020\u0025\u0073,\u0020\u006e\u0020\u0021\u003d\u0020\u0033 \u0028\u0025\u0064\u0029",_dfbb ,_gefg );
return _dgd ,_gee ,_caca ;};};_cbeg :=float64 (_bed )/255.0;_gccd :=float64 (_bbeb )/255.0;_fegg :=float64 (_bage )/255.0;return _cbeg ,_gccd ,_fegg ;};func (_gcg *Path )compare (_egf *Path )bool {if len (_gcg .Subpaths )!=len (_egf .Subpaths ){return false ;
};for _gfc ,_fgf :=range _gcg .Subpaths {if !_fgf .compare (_egf .Subpaths [_gfc ]){return false ;};};return true ;};func (_dfe *Command )compare (_baaf *Command )bool {if _dfe .Symbol !=_baaf .Symbol {return false ;};for _bdb ,_fbce :=range _dfe .Params {if _fbce !=_baaf .Params [_bdb ]{return false ;
};};return true ;};func _gac (_dcfg []token )([]*Command ,error ){var (_gbe []*Command ;_fbf []float64 ;);for _add :=len (_dcfg )-1;_add >=0;_add --{_fcbg :=_dcfg [_add ];if _fcbg ._ece {_faf :=_ceac ._ccac [_a .ToLower (_fcbg ._fbb )];_cgb :=len (_fbf );
if _faf ==0&&_cgb ==0{_dgfa :=&Command {Symbol :_fcbg ._fbb };_gbe =append ([]*Command {_dgfa },_gbe ...);}else if _faf !=0&&_cgb %_faf ==0{_beeb :=_cgb /_faf ;for _afgc :=0;_afgc < _beeb ;_afgc ++{_egbg :=_fcbg ._fbb ;if _egbg =="\u006d"&&_afgc < _beeb -1{_egbg ="\u006c";
};if _egbg =="\u004d"&&_afgc < _beeb -1{_egbg ="\u004c";};_gaef :=&Command {_egbg ,_agdc (_fbf [:_faf ])};_gbe =append ([]*Command {_gaef },_gbe ...);_fbf =_fbf [_faf :];};}else {_ccdb :=pathParserError {"I\u006e\u0063\u006f\u0072\u0072\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072\u0020\u006f\u0066\u0020\u0070\u0061r\u0061\u006d\u0065\u0074\u0065\u0072\u0073\u0020\u0066\u006fr\u0020"+_fcbg ._fbb };
return nil ,_ccdb ;};}else {_badb ,_fcd :=_aage (_fcbg ._fbb ,64);if _fcd !=nil {return nil ,_fcd ;};_fbf =append (_fbf ,_badb );};};return _gbe ,nil ;};type GraphicSVG struct{ViewBox struct{X ,Y ,W ,H float64 ;};Name string ;Attributes map[string ]string ;
Children []*GraphicSVG ;Content string ;Style *GraphicSVGStyle ;Width float64 ;Height float64 ;_ffd float64 ;};type Command struct{Symbol string ;Params []float64 ;};type token struct{_fbb string ;_ece bool ;};type Path struct{Subpaths []*Subpath ;};func (_ead *GraphicSVGStyle )toContentStream (_ccd *_f .ContentCreator ){if _ead ==nil {return ;
};if _ead .FillColor !=""{var _bdcg ,_ddc ,_gbc float64 ;if _fbc ,_gcf :=_b .ColorMap [_ead .FillColor ];_gcf {_ebb ,_dgb ,_bbgb ,_ :=_fbc .RGBA ();_bdcg ,_ddc ,_gbc =float64 (_ebb ),float64 (_dgb ),float64 (_bbgb );}else {_bdcg ,_ddc ,_gbc =_ffee (_ead .FillColor );
};_ccd .Add_rg (_bdcg ,_ddc ,_gbc );};if _ead .StrokeColor !=""{var _efd ,_ddd ,_aef float64 ;if _gg ,_edgfb :=_b .ColorMap [_ead .StrokeColor ];_edgfb {_feac ,_efdc ,_beg ,_ :=_gg .RGBA ();_efd ,_ddd ,_aef =float64 (_feac )/255.0,float64 (_efdc )/255.0,float64 (_beg )/255.0;
}else {_efd ,_ddd ,_aef =_ffee (_ead .StrokeColor );};_ccd .Add_RG (_efd ,_ddd ,_aef );};if _ead .StrokeWidth > 0{_ccd .Add_w (_ead .StrokeWidth );};};func _eef (_gbdf string )(_bcc []float64 ,_afa error ){var _eafc float64 ;_edgd :=0;_cbfc :=true ;for _cdab ,_bga :=range _gbdf {if _bga =='.'{if _cbfc {_cbfc =false ;
continue ;};_eafc ,_afa =_aage (_gbdf [_edgd :_cdab ],64);if _afa !=nil {return ;};_bcc =append (_bcc ,_eafc );_edgd =_cdab ;};};_eafc ,_afa =_aage (_gbdf [_edgd :],64);if _afa !=nil {return ;};_bcc =append (_bcc ,_eafc );return ;};func (_ffa *Command )isAbsolute ()bool {return _ffa .Symbol ==_a .ToUpper (_ffa .Symbol )};
func (_dga *commands )isCommand (_abac string )bool {for _ ,_aaa :=range _dga ._bfd {if _a .ToLower (_abac )==_aaa {return true ;};};return false ;};func (_gae *GraphicSVG )ToContentCreator (cc *_f .ContentCreator ,scaleX ,scaleY ,translateX ,translateY float64 )*_f .ContentCreator {if _gae .Name =="\u0073\u0076\u0067"{_gae .SetScaling (scaleX ,scaleY );
cc .Add_cm (1,0,0,1,translateX ,translateY );_gae .setDefaultScaling (_gae ._ffd );cc .Add_q ();_adf :=_gd .Max (scaleX ,scaleY );cc .Add_re (_gae .ViewBox .X *_adf ,_gae .ViewBox .Y *_adf ,_gae .ViewBox .W *_adf ,_gae .ViewBox .H *_adf );cc .Add_W ();
cc .Add_n ();for _ ,_aee :=range _gae .Children {_aee .ViewBox =_gae .ViewBox ;_aee .toContentStream (cc );};cc .Add_Q ();return cc ;};return nil ;};func _gafd (_aaaa string )[]token {var (_ecg []token ;_ade string ;);for _ ,_ggc :=range _aaaa {_gge :=string (_ggc );
switch {case _ceac .isCommand (_gge ):_ecg ,_ade =_gfe (_ecg ,_ade );_ecg =append (_ecg ,token {_gge ,true });case _gge =="\u002e":if _ade ==""{_ade ="\u0030";};if _a .Contains (_ade ,_gge ){_ecg =append (_ecg ,token {_ade ,false });_ade ="\u0030";};fallthrough;
case _gge >="\u0030"&&_gge <="\u0039"||_gge =="\u0065":_ade +=_gge ;case _gge =="\u002d":if _a .HasSuffix (_ade ,"\u0065"){_ade +=_gge ;}else {_ecg ,_ =_gfe (_ecg ,_ade );_ade =_gge ;};default:_ecg ,_ade =_gfe (_ecg ,_ade );};};_ecg ,_ =_gfe (_ecg ,_ade );
return _ecg ;};func (_cdg *Subpath )compare (_cffb *Subpath )bool {if len (_cdg .Commands )!=len (_cffb .Commands ){return false ;};for _eeb ,_ageg :=range _cdg .Commands {if !_ageg .compare (_cffb .Commands [_eeb ]){return false ;};};return true ;};type commands struct{_bfd []string ;
_ccac map[string ]int ;_ebf string ;_adbg string ;};func _ded ()*GraphicSVGStyle {return &GraphicSVGStyle {FillColor :"\u00230\u0030\u0030\u0030\u0030\u0030",StrokeColor :"",StrokeWidth :0};};func ParseFromFile (path string )(*GraphicSVG ,error ){_bfab ,_gga :=_ae .Open (path );
if _gga !=nil {return nil ,_gga ;};defer _bfab .Close ();return ParseFromStream (_bfab );};const (_ge =0.72;_fc =28.3464;_cdc =_fc /10;_eb =0.551784;);func _bc (_gaf *GraphicSVG ,_aa *_f .ContentCreator ){_aa .Add_q ();_gaf .Style .toContentStream (_aa );
_fcb ,_gc :=_cfb (_gaf .Attributes ["\u0064"]);if _gc !=nil {_cg .Log .Error ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025s",_gc .Error ());};var (_aea ,_ed =0.0,0.0;_eg ,_gf =0.0,0.0;_cb *Command ;);for _ ,_bg :=range _fcb .Subpaths {for _ ,_ab :=range _bg .Commands {switch _a .ToLower (_ab .Symbol ){case "\u006d":_eg ,_gf =_ab .Params [0]*_gaf ._ffd ,_ab .Params [1]*_gaf ._ffd ;
if !_ab .isAbsolute (){_eg ,_gf =_aea +_eg -_gaf .ViewBox .X ,_ed +_gf -_gaf .ViewBox .Y ;};_aa .Add_m (_dgc (_eg ,3),_dgc (_gf ,3));_aea ,_ed =_eg ,_gf ;case "\u0063":_aac ,_cc ,_fb ,_gb ,_abc ,_fa :=_ab .Params [0]*_gaf ._ffd ,_ab .Params [1]*_gaf ._ffd ,_ab .Params [2]*_gaf ._ffd ,_ab .Params [3]*_gaf ._ffd ,_ab .Params [4]*_gaf ._ffd ,_ab .Params [5]*_gaf ._ffd ;
if !_ab .isAbsolute (){_aac ,_cc ,_fb ,_gb ,_abc ,_fa =_aea +_aac ,_ed +_cc ,_aea +_fb ,_ed +_gb ,_aea +_abc ,_ed +_fa ;};_aa .Add_c (_dgc (_aac ,3),_dgc (_cc ,3),_dgc (_fb ,3),_dgc (_gb ,3),_dgc (_abc ,3),_dgc (_fa ,3));_aea ,_ed =_abc ,_fa ;case "\u0073":_da ,_edc ,_cdd ,_dg :=_ab .Params [0]*_gaf ._ffd ,_ab .Params [1]*_gaf ._ffd ,_ab .Params [2]*_gaf ._ffd ,_ab .Params [3]*_gaf ._ffd ;
if !_ab .isAbsolute (){_da ,_edc ,_cdd ,_dg =_aea +_da ,_ed +_edc ,_aea +_cdd ,_ed +_dg ;};_aa .Add_c (_dgc (_aea ,3),_dgc (_ed ,3),_dgc (_da ,3),_dgc (_edc ,3),_dgc (_cdd ,3),_dgc (_dg ,3));_aea ,_ed =_cdd ,_dg ;case "\u006c":_ba ,_bgb :=_ab .Params [0]*_gaf ._ffd ,_ab .Params [1]*_gaf ._ffd ;
if !_ab .isAbsolute (){_ba ,_bgb =_aea +_ba ,_ed +_bgb ;};_aa .Add_l (_dgc (_ba ,3),_dgc (_bgb ,3));_aea ,_ed =_ba ,_bgb ;case "\u0068":_gafe :=_ab .Params [0]*_gaf ._ffd ;if !_ab .isAbsolute (){_gafe =_aea +_gafe ;};_aa .Add_l (_dgc (_gafe ,3),_dgc (_ed ,3));
_aea =_gafe ;case "\u0076":_bb :=_ab .Params [0]*_gaf ._ffd ;if !_ab .isAbsolute (){_bb =_ed +_bb ;};_aa .Add_l (_dgc (_aea ,3),_dgc (_bb ,3));_ed =_bb ;case "\u0071":_be ,_ff ,_ee ,_bf :=_ab .Params [0]*_gaf ._ffd ,_ab .Params [1]*_gaf ._ffd ,_ab .Params [2]*_gaf ._ffd ,_ab .Params [3]*_gaf ._ffd ;
if !_ab .isAbsolute (){_be ,_ff ,_ee ,_bf =_aea +_be ,_ed +_ff ,_aea +_ee ,_ed +_bf ;};_edg ,_eba :=_b .QuadraticToCubicBezier (_aea ,_ed ,_be ,_ff ,_ee ,_bf );_aa .Add_c (_dgc (_edg .X ,3),_dgc (_edg .Y ,3),_dgc (_eba .X ,3),_dgc (_eba .Y ,3),_dgc (_ee ,3),_dgc (_bf ,3));
_aea ,_ed =_ee ,_bf ;case "\u0074":var _bgc ,_gca _b .Point ;_dc ,_egd :=_ab .Params [0]*_gaf ._ffd ,_ab .Params [1]*_gaf ._ffd ;if !_ab .isAbsolute (){_dc ,_egd =_aea +_dc ,_ed +_egd ;};if _cb !=nil &&_a .ToLower (_cb .Symbol )=="\u0071"{_gde :=_b .Point {X :_cb .Params [0]*_gaf ._ffd ,Y :_cb .Params [1]*_gaf ._ffd };
_cca :=_b .Point {X :_cb .Params [2]*_gaf ._ffd ,Y :_cb .Params [3]*_gaf ._ffd };_bgg :=_cca .Mul (2.0).Sub (_gde );_bgc ,_gca =_b .QuadraticToCubicBezier (_aea ,_ed ,_bgg .X ,_bgg .Y ,_dc ,_egd );};_aa .Add_c (_dgc (_bgc .X ,3),_dgc (_bgc .Y ,3),_dgc (_gca .X ,3),_dgc (_gca .Y ,3),_dgc (_dc ,3),_dgc (_egd ,3));
_aea ,_ed =_dc ,_egd ;case "\u0061":_dgf ,_gad :=_ab .Params [0]*_gaf ._ffd ,_ab .Params [1]*_gaf ._ffd ;_cce :=_ab .Params [2];_fd :=_ab .Params [3]> 0;_cdb :=_ab .Params [4]> 0;_dca ,_gefd :=_ab .Params [5]*_gaf ._ffd ,_ab .Params [6]*_gaf ._ffd ;if !_ab .isAbsolute (){_dca ,_gefd =_aea +_dca ,_ed +_gefd ;
};_ec :=_b .EllipseToCubicBeziers (_aea ,_ed ,_dgf ,_gad ,_cce ,_fd ,_cdb ,_dca ,_gefd );for _ ,_adb :=range _ec {_aa .Add_c (_dgc (_adb [1].X ,3),_dgc ((_adb [1].Y ),3),_dgc ((_adb [2].X ),3),_dgc ((_adb [2].Y ),3),_dgc ((_adb [3].X ),3),_dgc ((_adb [3].Y ),3));
};_aea ,_ed =_dca ,_gefd ;case "\u007a":_aa .Add_h ();};_cb =_ab ;};};if _gaf .Style .FillColor !=""&&_gaf .Style .StrokeColor !=""{_aa .Add_B ();}else if _gaf .Style .FillColor !=""{_aa .Add_f ();}else if _gaf .Style .StrokeColor !=""{_aa .Add_S ();};
_aa .Add_h ();_aa .Add_Q ();};