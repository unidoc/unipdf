//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package classer ;import (_c "github.com/unidoc/unipdf/v4/common";_f "github.com/unidoc/unipdf/v4/internal/jbig2/basic";_ec "github.com/unidoc/unipdf/v4/internal/jbig2/bitmap";_a "github.com/unidoc/unipdf/v4/internal/jbig2/errors";_e "image";_g "math";);
func DefaultSettings ()Settings {_gbde :=&Settings {};_gbde .SetDefault ();return *_gbde };const (MaxDiffWidth =2;MaxDiffHeight =2;);func (_dba *Classer )verifyMethod (_facd Method )error {if _facd !=RankHaus &&_facd !=Correlation {return _a .Error ("\u0076\u0065\u0072i\u0066\u0079\u004d\u0065\u0074\u0068\u006f\u0064","\u0069\u006e\u0076\u0061li\u0064\u0020\u0063\u006c\u0061\u0073\u0073\u0065\u0072\u0020\u006d\u0065\u0074\u0068o\u0064");
};return nil ;};func (_befa *Classer )classifyRankHaus (_dada *_ec .Boxes ,_ecd *_ec .Bitmaps ,_cg int )error {const _acg ="\u0063\u006ca\u0073\u0073\u0069f\u0079\u0052\u0061\u006e\u006b\u0048\u0061\u0075\u0073";if _dada ==nil {return _a .Error (_acg ,"\u0062\u006fx\u0061\u0020\u006eo\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064");
};if _ecd ==nil {return _a .Error (_acg ,"\u0070\u0069x\u0061\u0020\u006eo\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064");};_aca :=len (_ecd .Values );if _aca ==0{return _a .Error (_acg ,"e\u006dp\u0074\u0079\u0020\u006e\u0065\u0077\u0020\u0063o\u006d\u0070\u006f\u006een\u0074\u0073");
};_bca :=_ecd .CountPixels ();_ffda :=_befa .Settings .SizeHaus ;_afb :=_ec .SelCreateBrick (_ffda ,_ffda ,_ffda /2,_ffda /2,_ec .SelHit );_acb :=&_ec .Bitmaps {Values :make ([]*_ec .Bitmap ,_aca )};_cce :=&_ec .Bitmaps {Values :make ([]*_ec .Bitmap ,_aca )};
var (_eac ,_fcdd ,_bfd *_ec .Bitmap ;_dcd error ;);for _eef :=0;_eef < _aca ;_eef ++{_eac ,_dcd =_ecd .GetBitmap (_eef );if _dcd !=nil {return _a .Wrap (_dcd ,_acg ,"");};_fcdd ,_dcd =_eac .AddBorderGeneral (JbAddedPixels ,JbAddedPixels ,JbAddedPixels ,JbAddedPixels ,0);
if _dcd !=nil {return _a .Wrap (_dcd ,_acg ,"");};_bfd ,_dcd =_ec .Dilate (nil ,_fcdd ,_afb );if _dcd !=nil {return _a .Wrap (_dcd ,_acg ,"");};_acb .Values [_aca ]=_fcdd ;_cce .Values [_aca ]=_bfd ;};_dfc ,_dcd :=_ec .Centroids (_acb .Values );if _dcd !=nil {return _a .Wrap (_dcd ,_acg ,"");
};if _dcd =_dfc .Add (_befa .CentroidPoints );_dcd !=nil {_c .Log .Trace ("\u004e\u006f\u0020\u0063en\u0074\u0072\u006f\u0069\u0064\u0073\u0020\u0074\u006f\u0020\u0061\u0064\u0064");};if _befa .Settings .RankHaus ==1.0{_dcd =_befa .classifyRankHouseOne (_dada ,_ecd ,_acb ,_cce ,_dfc ,_cg );
}else {_dcd =_befa .classifyRankHouseNonOne (_dada ,_ecd ,_acb ,_cce ,_dfc ,_bca ,_cg );};if _dcd !=nil {return _a .Wrap (_dcd ,_acg ,"");};return nil ;};func Init (settings Settings )(*Classer ,error ){const _gg ="\u0063\u006c\u0061s\u0073\u0065\u0072\u002e\u0049\u006e\u0069\u0074";
_gb :=&Classer {Settings :settings ,Widths :map[int ]int {},Heights :map[int ]int {},TemplatesSize :_f .IntsMap {},TemplateAreas :&_f .IntSlice {},ComponentPageNumbers :&_f .IntSlice {},ClassIDs :&_f .IntSlice {},ComponentsNumber :&_f .IntSlice {},CentroidPoints :&_ec .Points {},CentroidPointsTemplates :&_ec .Points {},UndilatedTemplates :&_ec .Bitmaps {},DilatedTemplates :&_ec .Bitmaps {},ClassInstances :&_ec .BitmapsArray {},FgTemplates :&_f .NumSlice {}};
if _cd :=_gb .Settings .Validate ();_cd !=nil {return nil ,_a .Wrap (_cd ,_gg ,"");};return _gb ,nil ;};var _acd bool ;func (_af *Classer )classifyCorrelation (_cdce *_ec .Boxes ,_gfb *_ec .Bitmaps ,_gac int )error {const _fca ="\u0063\u006c\u0061\u0073si\u0066\u0079\u0043\u006f\u0072\u0072\u0065\u006c\u0061\u0074\u0069\u006f\u006e";
if _cdce ==nil {return _a .Error (_fca ,"\u006e\u0065\u0077\u0043\u006f\u006d\u0070\u006f\u006e\u0065\u006e\u0074\u0073\u0020\u0062\u006f\u0075\u006e\u0064\u0069\u006e\u0067\u0020\u0062o\u0078\u0065\u0073\u0020\u006eo\u0074\u0020f\u006f\u0075\u006e\u0064");
};if _gfb ==nil {return _a .Error (_fca ,"\u006e\u0065wC\u006f\u006d\u0070o\u006e\u0065\u006e\u0074s b\u0069tm\u0061\u0070\u0020\u0061\u0072\u0072\u0061y \u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064");};_dfb :=len (_gfb .Values );if _dfb ==0{_c .Log .Debug ("\u0063l\u0061\u0073s\u0069\u0066\u0079C\u006f\u0072\u0072\u0065\u006c\u0061\u0074i\u006f\u006e\u0020\u002d\u0020\u0070r\u006f\u0076\u0069\u0064\u0065\u0064\u0020\u0070\u0069\u0078\u0061s\u0020\u0069\u0073\u0020\u0065\u006d\u0070\u0074\u0079");
return nil ;};var (_cee ,_bgb *_ec .Bitmap ;_fbg error ;);_ega :=&_ec .Bitmaps {Values :make ([]*_ec .Bitmap ,_dfb )};for _dea ,_faa :=range _gfb .Values {_bgb ,_fbg =_faa .AddBorderGeneral (JbAddedPixels ,JbAddedPixels ,JbAddedPixels ,JbAddedPixels ,0);
if _fbg !=nil {return _a .Wrap (_fbg ,_fca ,"");};_ega .Values [_dea ]=_bgb ;};_dgd :=_af .FgTemplates ;_ffe :=_ec .MakePixelSumTab8 ();_eeb :=_ec .MakePixelCentroidTab8 ();_fcad :=make ([]int ,_dfb );_ddb :=make ([][]int ,_dfb );_ebf :=_ec .Points (make ([]_ec .Point ,_dfb ));
_gc :=&_ebf ;var (_ag ,_ef int ;_bd ,_ecaa ,_gad int ;_bge ,_gef int ;_fcaf byte ;);for _bdd ,_gdf :=range _ega .Values {_ddb [_bdd ]=make ([]int ,_gdf .Height );_ag =0;_ef =0;_ecaa =(_gdf .Height -1)*_gdf .RowStride ;_bd =0;for _gef =_gdf .Height -1;_gef >=0;
_gef ,_ecaa =_gef -1,_ecaa -_gdf .RowStride {_ddb [_bdd ][_gef ]=_bd ;_gad =0;for _bge =0;_bge < _gdf .RowStride ;_bge ++{_fcaf =_gdf .Data [_ecaa +_bge ];_gad +=_ffe [_fcaf ];_ag +=_eeb [_fcaf ]+_bge *8*_ffe [_fcaf ];};_bd +=_gad ;_ef +=_gad *_gef ;};
_fcad [_bdd ]=_bd ;if _bd > 0{(*_gc )[_bdd ]=_ec .Point {X :float32 (_ag )/float32 (_bd ),Y :float32 (_ef )/float32 (_bd )};}else {(*_gc )[_bdd ]=_ec .Point {X :float32 (_gdf .Width )/float32 (2),Y :float32 (_gdf .Height )/float32 (2)};};};if _fbg =_af .CentroidPoints .Add (_gc );
_fbg !=nil {return _a .Wrap (_fbg ,_fca ,"\u0063\u0065\u006et\u0072\u006f\u0069\u0064\u0020\u0061\u0064\u0064");};var (_egae ,_gbb ,_agf int ;_ceb float64 ;_dga ,_cc ,_abd ,_dcb float32 ;_cef ,_ffd _ec .Point ;_eab bool ;_ebd *similarTemplatesFinder ;_gga int ;
_baa *_ec .Bitmap ;_bb *_e .Rectangle ;_bad *_ec .Bitmaps ;);for _gga ,_bgb =range _ega .Values {_gbb =_fcad [_gga ];if _dga ,_cc ,_fbg =_gc .GetGeometry (_gga );_fbg !=nil {return _a .Wrap (_fbg ,_fca ,"\u0070t\u0061\u0020\u002d\u0020\u0069");};_eab =false ;
_cbg :=len (_af .UndilatedTemplates .Values );_ebd =_cacg (_af ,_bgb );for _cf :=_ebd .Next ();_cf > -1;{if _baa ,_fbg =_af .UndilatedTemplates .GetBitmap (_cf );_fbg !=nil {return _a .Wrap (_fbg ,_fca ,"\u0075\u006e\u0069dl\u0061\u0074\u0065\u0064\u005b\u0069\u0063\u006c\u0061\u0073\u0073\u005d\u0020\u003d\u0020\u0062\u006d\u0032");
};if _agf ,_fbg =_dgd .GetInt (_cf );_fbg !=nil {_c .Log .Trace ("\u0046\u0047\u0020T\u0065\u006d\u0070\u006ca\u0074\u0065\u0020\u005b\u0069\u0063\u006ca\u0073\u0073\u005d\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u003a\u0020\u0025\u0076",_fbg );};if _abd ,_dcb ,_fbg =_af .CentroidPointsTemplates .GetGeometry (_cf );
_fbg !=nil {return _a .Wrap (_fbg ,_fca ,"\u0043\u0065\u006e\u0074\u0072\u006f\u0069\u0064\u0050\u006f\u0069\u006e\u0074T\u0065\u006d\u0070\u006c\u0061\u0074e\u0073\u005b\u0069\u0063\u006c\u0061\u0073\u0073\u005d\u0020\u003d\u0020\u00782\u002c\u0079\u0032\u0020");
};if _af .Settings .WeightFactor > 0.0{if _egae ,_fbg =_af .TemplateAreas .Get (_cf );_fbg !=nil {_c .Log .Trace ("\u0054\u0065\u006dp\u006c\u0061\u0074\u0065A\u0072\u0065\u0061\u0073\u005b\u0069\u0063l\u0061\u0073\u0073\u005d\u0020\u003d\u0020\u0061\u0072\u0065\u0061\u0020\u0025\u0076",_fbg );
};_ceb =_af .Settings .Thresh +(1.0-_af .Settings .Thresh )*_af .Settings .WeightFactor *float64 (_agf )/float64 (_egae );}else {_ceb =_af .Settings .Thresh ;};_cab ,_ddfa :=_ec .CorrelationScoreThresholded (_bgb ,_baa ,_gbb ,_agf ,_cef .X -_ffd .X ,_cef .Y -_ffd .Y ,MaxDiffWidth ,MaxDiffHeight ,_ffe ,_ddb [_gga ],float32 (_ceb ));
if _ddfa !=nil {return _a .Wrap (_ddfa ,_fca ,"");};if _acd {var (_dcg ,_eebe float64 ;_dgf ,_aee int ;);_dcg ,_ddfa =_ec .CorrelationScore (_bgb ,_baa ,_gbb ,_agf ,_dga -_abd ,_cc -_dcb ,MaxDiffWidth ,MaxDiffHeight ,_ffe );if _ddfa !=nil {return _a .Wrap (_ddfa ,_fca ,"d\u0065\u0062\u0075\u0067Co\u0072r\u0065\u006c\u0061\u0074\u0069o\u006e\u0053\u0063\u006f\u0072\u0065");
};_eebe ,_ddfa =_ec .CorrelationScoreSimple (_bgb ,_baa ,_gbb ,_agf ,_dga -_abd ,_cc -_dcb ,MaxDiffWidth ,MaxDiffHeight ,_ffe );if _ddfa !=nil {return _a .Wrap (_ddfa ,_fca ,"d\u0065\u0062\u0075\u0067Co\u0072r\u0065\u006c\u0061\u0074\u0069o\u006e\u0053\u0063\u006f\u0072\u0065");
};_dgf =int (_g .Sqrt (_dcg *float64 (_gbb )*float64 (_agf )));_aee =int (_g .Sqrt (_eebe *float64 (_gbb )*float64 (_agf )));if (_dcg >=_ceb )!=(_eebe >=_ceb ){return _a .Errorf (_fca ,"\u0064\u0065\u0062\u0075\u0067\u0020\u0043\u006f\u0072r\u0065\u006c\u0061\u0074\u0069\u006f\u006e\u0020\u0073\u0063\u006f\u0072\u0065\u0020\u006d\u0069\u0073\u006d\u0061\u0074\u0063\u0068\u0020-\u0020\u0025d\u0028\u00250\u002e\u0034\u0066\u002c\u0020\u0025\u0076\u0029\u0020\u0076\u0073\u0020\u0025d(\u0025\u0030\u002e\u0034\u0066\u002c\u0020\u0025\u0076)\u0020\u0025\u0030\u002e\u0034\u0066",_dgf ,_dcg ,_dcg >=_ceb ,_aee ,_eebe ,_eebe >=_ceb ,_dcg -_eebe );
};if _dcg >=_ceb !=_cab {return _a .Errorf (_fca ,"\u0064\u0065\u0062\u0075\u0067\u0020\u0043o\u0072\u0072\u0065\u006c\u0061\u0074\u0069\u006f\u006e \u0073\u0063\u006f\u0072\u0065 \u004d\u0069\u0073\u006d\u0061t\u0063\u0068 \u0062\u0065\u0074w\u0065\u0065\u006e\u0020\u0063\u006frr\u0065\u006c\u0061\u0074\u0069\u006f\u006e\u0020/\u0020\u0074\u0068\u0072\u0065s\u0068\u006f\u006c\u0064\u002e\u0020\u0043\u006f\u006dpa\u0072\u0069\u0073\u006f\u006e:\u0020\u0025\u0030\u002e\u0034\u0066\u0028\u0025\u0030\u002e\u0034\u0066\u002c\u0020\u0025\u0064\u0029\u0020\u003e\u003d\u0020\u00250\u002e\u0034\u0066\u0028\u0025\u0030\u002e\u0034\u0066\u0029\u0020\u0076\u0073\u0020\u0025\u0076",_dcg ,_dcg *float64 (_gbb )*float64 (_agf ),_dgf ,_ceb ,float32 (_ceb )*float32 (_gbb )*float32 (_agf ),_cab );
};};if _cab {_eab =true ;if _ddfa =_af .ClassIDs .Add (_cf );_ddfa !=nil {return _a .Wrap (_ddfa ,_fca ,"\u006f\u0076\u0065\u0072\u0054\u0068\u0072\u0065\u0073\u0068\u006f\u006c\u0064");};if _ddfa =_af .ComponentPageNumbers .Add (_gac );_ddfa !=nil {return _a .Wrap (_ddfa ,_fca ,"\u006f\u0076\u0065\u0072\u0054\u0068\u0072\u0065\u0073\u0068\u006f\u006c\u0064");
};if _af .Settings .KeepClassInstances {if _cee ,_ddfa =_gfb .GetBitmap (_gga );_ddfa !=nil {return _a .Wrap (_ddfa ,_fca ,"\u004b\u0065\u0065\u0070Cl\u0061\u0073\u0073\u0049\u006e\u0073\u0074\u0061\u006e\u0063\u0065\u0073\u0020\u002d \u0069");};if _bad ,_ddfa =_af .ClassInstances .GetBitmaps (_cf );
_ddfa !=nil {return _a .Wrap (_ddfa ,_fca ,"K\u0065\u0065\u0070\u0043\u006c\u0061s\u0073\u0049\u006e\u0073\u0074\u0061\u006e\u0063\u0065s\u0020\u002d\u0020i\u0043l\u0061\u0073\u0073");};_bad .AddBitmap (_cee );if _bb ,_ddfa =_cdce .Get (_gga );_ddfa !=nil {return _a .Wrap (_ddfa ,_fca ,"\u004be\u0065p\u0043\u006c\u0061\u0073\u0073I\u006e\u0073t\u0061\u006e\u0063\u0065\u0073");
};_bad .AddBox (_bb );};break ;};};if !_eab {if _fbg =_af .ClassIDs .Add (_cbg );_fbg !=nil {return _a .Wrap (_fbg ,_fca ,"\u0021\u0066\u006f\u0075\u006e\u0064");};if _fbg =_af .ComponentPageNumbers .Add (_gac );_fbg !=nil {return _a .Wrap (_fbg ,_fca ,"\u0021\u0066\u006f\u0075\u006e\u0064");
};_bad =&_ec .Bitmaps {};if _cee ,_fbg =_gfb .GetBitmap (_gga );_fbg !=nil {return _a .Wrap (_fbg ,_fca ,"\u0021\u0066\u006f\u0075\u006e\u0064");};_bad .AddBitmap (_cee );_dad ,_bed :=_cee .Width ,_cee .Height ;_ace :=uint64 (_bed )*uint64 (_dad );_af .TemplatesSize .Add (_ace ,_cbg );
if _bb ,_fbg =_cdce .Get (_gga );_fbg !=nil {return _a .Wrap (_fbg ,_fca ,"\u0021\u0066\u006f\u0075\u006e\u0064");};_bad .AddBox (_bb );_af .ClassInstances .AddBitmaps (_bad );_af .CentroidPointsTemplates .AddPoint (_dga ,_cc );_af .FgTemplates .AddInt (_gbb );
_af .UndilatedTemplates .AddBitmap (_cee );_egae =(_bgb .Width -2*JbAddedPixels )*(_bgb .Height -2*JbAddedPixels );if _fbg =_af .TemplateAreas .Add (_egae );_fbg !=nil {return _a .Wrap (_fbg ,_fca ,"\u0021\u0066\u006f\u0075\u006e\u0064");};};};_af .NumberOfClasses =len (_af .UndilatedTemplates .Values );
return nil ;};const (RankHaus Method =iota ;Correlation ;);func _cacg (_cebd *Classer ,_ebg *_ec .Bitmap )*similarTemplatesFinder {return &similarTemplatesFinder {Width :_ebg .Width ,Height :_ebg .Height ,Classer :_cebd };};func (_gba *Classer )getULCorners (_ce *_ec .Bitmap ,_bg *_ec .Boxes )error {const _fcg ="\u0067\u0065\u0074U\u004c\u0043\u006f\u0072\u006e\u0065\u0072\u0073";
if _ce ==nil {return _a .Error (_fcg ,"\u006e\u0069l\u0020\u0069\u006da\u0067\u0065\u0020\u0062\u0069\u0074\u006d\u0061\u0070");};if _bg ==nil {return _a .Error (_fcg ,"\u006e\u0069\u006c\u0020\u0062\u006f\u0075\u006e\u0064\u0073");};if _gba .PtaUL ==nil {_gba .PtaUL =&_ec .Points {};
};_ba :=len (*_bg );var (_ge ,_eb ,_bc ,_bcd int ;_bef ,_df ,_dfg ,_ced float32 ;_gf error ;_gaa *_e .Rectangle ;_ca *_ec .Bitmap ;_eg _e .Point ;);for _fcf :=0;_fcf < _ba ;_fcf ++{_ge =_gba .BaseIndex +_fcf ;if _bef ,_df ,_gf =_gba .CentroidPoints .GetGeometry (_ge );
_gf !=nil {return _a .Wrap (_gf ,_fcg ,"\u0043\u0065\u006e\u0074\u0072\u006f\u0069\u0064\u0050o\u0069\u006e\u0074\u0073");};if _eb ,_gf =_gba .ClassIDs .Get (_ge );_gf !=nil {return _a .Wrap (_gf ,_fcg ,"\u0043\u006c\u0061s\u0073\u0049\u0044\u0073\u002e\u0047\u0065\u0074");
};if _dfg ,_ced ,_gf =_gba .CentroidPointsTemplates .GetGeometry (_eb );_gf !=nil {return _a .Wrap (_gf ,_fcg ,"\u0043\u0065\u006etr\u006f\u0069\u0064\u0050\u006f\u0069\u006e\u0074\u0073\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u0073");};_gaf :=_dfg -_bef ;
_fe :=_ced -_df ;if _gaf >=0{_bc =int (_gaf +0.5);}else {_bc =int (_gaf -0.5);};if _fe >=0{_bcd =int (_fe +0.5);}else {_bcd =int (_fe -0.5);};if _gaa ,_gf =_bg .Get (_fcf );_gf !=nil {return _a .Wrap (_gf ,_fcg ,"");};_abb ,_ee :=_gaa .Min .X ,_gaa .Min .Y ;
_ca ,_gf =_gba .UndilatedTemplates .GetBitmap (_eb );if _gf !=nil {return _a .Wrap (_gf ,_fcg ,"\u0055\u006e\u0064\u0069\u006c\u0061\u0074\u0065\u0064\u0054e\u006d\u0070\u006c\u0061\u0074\u0065\u0073.\u0047\u0065\u0074\u0028\u0069\u0043\u006c\u0061\u0073\u0073\u0029");
};_eg ,_gf =_fef (_ce ,_abb ,_ee ,_bc ,_bcd ,_ca );if _gf !=nil {return _a .Wrap (_gf ,_fcg ,"");};_gba .PtaUL .AddPoint (float32 (_abb -_bc +_eg .X ),float32 (_ee -_bcd +_eg .Y ));};return nil ;};func (_cdb *Classer )AddPage (inputPage *_ec .Bitmap ,pageNumber int ,method Method )(_cdc error ){const _ea ="\u0043l\u0061s\u0073\u0065\u0072\u002e\u0041\u0064\u0064\u0050\u0061\u0067\u0065";
_cdb .Widths [pageNumber ]=inputPage .Width ;_cdb .Heights [pageNumber ]=inputPage .Height ;if _cdc =_cdb .verifyMethod (method );_cdc !=nil {return _a .Wrap (_cdc ,_ea ,"");};_fa ,_fc ,_cdc :=inputPage .GetComponents (_cdb .Settings .Components ,_cdb .Settings .MaxCompWidth ,_cdb .Settings .MaxCompHeight );
if _cdc !=nil {return _a .Wrap (_cdc ,_ea ,"");};_c .Log .Debug ("\u0043\u006f\u006d\u0070\u006f\u006e\u0065\u006e\u0074s\u003a\u0020\u0025\u0076",_fa );if _cdc =_cdb .addPageComponents (inputPage ,_fc ,_fa ,pageNumber ,method );_cdc !=nil {return _a .Wrap (_cdc ,_ea ,"");
};return nil ;};func _fef (_gd *_ec .Bitmap ,_ffc ,_fgb ,_dgg ,_ae int ,_bf *_ec .Bitmap )(_fcd _e .Point ,_cdbe error ){const _bec ="\u0066i\u006e\u0061\u006c\u0041l\u0069\u0067\u006e\u006d\u0065n\u0074P\u006fs\u0069\u0074\u0069\u006f\u006e\u0069\u006eg";
if _gd ==nil {return _fcd ,_a .Error (_bec ,"\u0073\u006f\u0075\u0072ce\u0020\u006e\u006f\u0074\u0020\u0070\u0072\u006f\u0076\u0069\u0064\u0065\u0064");};if _bf ==nil {return _fcd ,_a .Error (_bec ,"t\u0065\u006d\u0070\u006cat\u0065 \u006e\u006f\u0074\u0020\u0070r\u006f\u0076\u0069\u0064\u0065\u0064");
};_ad ,_dbf :=_bf .Width ,_bf .Height ;_aeg ,_aa :=_ffc -_dgg -JbAddedPixels ,_fgb -_ae -JbAddedPixels ;_c .Log .Trace ("\u0078\u003a\u0020\u0027\u0025\u0064\u0027\u002c\u0020\u0079\u003a\u0020\u0027\u0025\u0064'\u002c\u0020\u0077\u003a\u0020\u0027\u0025\u0064\u0027\u002c\u0020\u0068\u003a \u0027\u0025\u0064\u0027\u002c\u0020\u0062\u0078\u003a\u0020\u0027\u0025d'\u002c\u0020\u0062\u0079\u003a\u0020\u0027\u0025\u0064\u0027",_ffc ,_fgb ,_ad ,_dbf ,_aeg ,_aa );
_ddf ,_cdbe :=_ec .Rect (_aeg ,_aa ,_ad ,_dbf );if _cdbe !=nil {return _fcd ,_a .Wrap (_cdbe ,_bec ,"");};_eca ,_ ,_cdbe :=_gd .ClipRectangle (_ddf );if _cdbe !=nil {_c .Log .Error ("\u0043a\u006e\u0027\u0074\u0020\u0063\u006c\u0069\u0070\u0020\u0072\u0065c\u0074\u0061\u006e\u0067\u006c\u0065\u003a\u0020\u0025\u0076",_ddf );
return _fcd ,_a .Wrap (_cdbe ,_bec ,"");};_fag :=_ec .New (_eca .Width ,_eca .Height );_aea :=_g .MaxInt32 ;var _eed ,_cac ,_dcf ,_fagc ,_gbf int ;for _eed =-1;_eed <=1;_eed ++{for _cac =-1;_cac <=1;_cac ++{if _ ,_cdbe =_ec .Copy (_fag ,_eca );_cdbe !=nil {return _fcd ,_a .Wrap (_cdbe ,_bec ,"");
};if _cdbe =_fag .RasterOperation (_cac ,_eed ,_ad ,_dbf ,_ec .PixSrcXorDst ,_bf ,0,0);_cdbe !=nil {return _fcd ,_a .Wrap (_cdbe ,_bec ,"");};_dcf =_fag .CountPixels ();if _dcf < _aea {_fagc =_cac ;_gbf =_eed ;_aea =_dcf ;};};};_fcd .X =_fagc ;_fcd .Y =_gbf ;
return _fcd ,nil ;};func (_abc *similarTemplatesFinder )Next ()int {var (_gfa ,_fab ,_feb ,_afd int ;_deg bool ;_abdb *_ec .Bitmap ;_bgga error ;);for {if _abc .Index >=25{return -1;};_fab =_abc .Width +TwoByTwoWalk [2*_abc .Index ];_gfa =_abc .Height +TwoByTwoWalk [2*_abc .Index +1];
if _gfa < 1||_fab < 1{_abc .Index ++;continue ;};if len (_abc .CurrentNumbers )==0{_abc .CurrentNumbers ,_deg =_abc .Classer .TemplatesSize .GetSlice (uint64 (_fab )*uint64 (_gfa ));if !_deg {_abc .Index ++;continue ;};_abc .N =0;};_feb =len (_abc .CurrentNumbers );
for ;_abc .N < _feb ;_abc .N ++{_afd =_abc .CurrentNumbers [_abc .N ];_abdb ,_bgga =_abc .Classer .DilatedTemplates .GetBitmap (_afd );if _bgga !=nil {_c .Log .Debug ("\u0046\u0069\u006e\u0064\u004e\u0065\u0078\u0074\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u003a\u0020\u0074\u0065\u006d\u0070\u006c\u0061t\u0065\u0020\u006e\u006f\u0074 \u0066\u006fu\u006e\u0064\u003a\u0020");
return 0;};if _abdb .Width -2*JbAddedPixels ==_fab &&_abdb .Height -2*JbAddedPixels ==_gfa {return _afd ;};};_abc .Index ++;_abc .CurrentNumbers =nil ;};};func (_cb *Classer )addPageComponents (_dd *_ec .Bitmap ,_dca *_ec .Boxes ,_ff *_ec .Bitmaps ,_fac int ,_be Method )error {const _ab ="\u0043l\u0061\u0073\u0073\u0065r\u002e\u0041\u0064\u0064\u0050a\u0067e\u0043o\u006d\u0070\u006f\u006e\u0065\u006e\u0074s";
if _dd ==nil {return _a .Error (_ab ,"\u006e\u0069\u006c\u0020\u0069\u006e\u0070\u0075\u0074 \u0070\u0061\u0067\u0065");};if _dca ==nil ||_ff ==nil ||len (*_dca )==0{_c .Log .Trace ("\u0041\u0064\u0064P\u0061\u0067\u0065\u0043\u006f\u006d\u0070\u006f\u006e\u0065\u006e\u0074\u0073\u003a\u0020\u0025\u0073\u002e\u0020\u004e\u006f\u0020\u0063\u006f\u006d\u0070\u006f\u006e\u0065n\u0074\u0073\u0020\u0066\u006f\u0075\u006e\u0064",_dd );
return nil ;};var _ecf error ;switch _be {case RankHaus :_ecf =_cb .classifyRankHaus (_dca ,_ff ,_fac );case Correlation :_ecf =_cb .classifyCorrelation (_dca ,_ff ,_fac );default:_c .Log .Debug ("\u0055\u006ek\u006e\u006f\u0077\u006e\u0020\u0063\u006c\u0061\u0073\u0073\u0069\u0066\u0079\u0020\u006d\u0065\u0074\u0068\u006f\u0064\u003a\u0020'%\u0076\u0027",_be );
return _a .Error (_ab ,"\u0075\u006e\u006bno\u0077\u006e\u0020\u0063\u006c\u0061\u0073\u0073\u0069\u0066\u0079\u0020\u006d\u0065\u0074\u0068\u006f\u0064");};if _ecf !=nil {return _a .Wrap (_ecf ,_ab ,"");};if _ecf =_cb .getULCorners (_dd ,_dca );_ecf !=nil {return _a .Wrap (_ecf ,_ab ,"");
};_fb :=len (*_dca );_cb .BaseIndex +=_fb ;if _ecf =_cb .ComponentsNumber .Add (_fb );_ecf !=nil {return _a .Wrap (_ecf ,_ab ,"");};return nil ;};func (_dcfb *Classer )classifyRankHouseOne (_efa *_ec .Boxes ,_bddd ,_ggc ,_cfb *_ec .Bitmaps ,_aeag *_ec .Points ,_cbf int )(_bff error ){const _adb ="\u0043\u006c\u0061\u0073s\u0065\u0072\u002e\u0063\u006c\u0061\u0073\u0073\u0069\u0066y\u0052a\u006e\u006b\u0048\u006f\u0075\u0073\u0065O\u006e\u0065";
var (_ccc ,_afa ,_dbc ,_adc float32 ;_gea int ;_gec ,_gdg ,_acf ,_efb ,_cea *_ec .Bitmap ;_cca ,_dec bool ;);for _cfbe :=0;_cfbe < len (_bddd .Values );_cfbe ++{_gdg =_ggc .Values [_cfbe ];_acf =_cfb .Values [_cfbe ];_ccc ,_afa ,_bff =_aeag .GetGeometry (_cfbe );
if _bff !=nil {return _a .Wrapf (_bff ,_adb ,"\u0066\u0069\u0072\u0073\u0074\u0020\u0067\u0065\u006fm\u0065\u0074\u0072\u0079");};_cced :=len (_dcfb .UndilatedTemplates .Values );_cca =false ;_ggd :=_cacg (_dcfb ,_gdg );for _gea =_ggd .Next ();_gea > -1;
{_efb ,_bff =_dcfb .UndilatedTemplates .GetBitmap (_gea );if _bff !=nil {return _a .Wrap (_bff ,_adb ,"\u0062\u006d\u0033");};_cea ,_bff =_dcfb .DilatedTemplates .GetBitmap (_gea );if _bff !=nil {return _a .Wrap (_bff ,_adb ,"\u0062\u006d\u0034");};_dbc ,_adc ,_bff =_dcfb .CentroidPointsTemplates .GetGeometry (_gea );
if _bff !=nil {return _a .Wrap (_bff ,_adb ,"\u0043\u0065\u006e\u0074\u0072\u006f\u0069\u0064\u0054\u0065\u006d\u0070l\u0061\u0074\u0065\u0073");};_dec ,_bff =_ec .HausTest (_gdg ,_acf ,_efb ,_cea ,_ccc -_dbc ,_afa -_adc ,MaxDiffWidth ,MaxDiffHeight );
if _bff !=nil {return _a .Wrap (_bff ,_adb ,"");};if _dec {_cca =true ;if _bff =_dcfb .ClassIDs .Add (_gea );_bff !=nil {return _a .Wrap (_bff ,_adb ,"");};if _bff =_dcfb .ComponentPageNumbers .Add (_cbf );_bff !=nil {return _a .Wrap (_bff ,_adb ,"");};
if _dcfb .Settings .KeepClassInstances {_agd ,_bab :=_dcfb .ClassInstances .GetBitmaps (_gea );if _bab !=nil {return _a .Wrap (_bab ,_adb ,"\u004be\u0065\u0070\u0050\u0069\u0078\u0061a");};_gec ,_bab =_bddd .GetBitmap (_cfbe );if _bab !=nil {return _a .Wrap (_bab ,_adb ,"\u004be\u0065\u0070\u0050\u0069\u0078\u0061a");
};_agd .AddBitmap (_gec );_dgaa ,_bab :=_efa .Get (_cfbe );if _bab !=nil {return _a .Wrap (_bab ,_adb ,"\u004be\u0065\u0070\u0050\u0069\u0078\u0061a");};_agd .AddBox (_dgaa );};break ;};};if !_cca {if _bff =_dcfb .ClassIDs .Add (_cced );_bff !=nil {return _a .Wrap (_bff ,_adb ,"");
};if _bff =_dcfb .ComponentPageNumbers .Add (_cbf );_bff !=nil {return _a .Wrap (_bff ,_adb ,"");};_add :=&_ec .Bitmaps {};_gec ,_bff =_bddd .GetBitmap (_cfbe );if _bff !=nil {return _a .Wrap (_bff ,_adb ,"\u0021\u0066\u006f\u0075\u006e\u0064");};_add .Values =append (_add .Values ,_gec );
_cedd ,_dfa :=_gec .Width ,_gec .Height ;_dcfb .TemplatesSize .Add (uint64 (_dfa )*uint64 (_cedd ),_cced );_ege ,_bgee :=_efa .Get (_cfbe );if _bgee !=nil {return _a .Wrap (_bgee ,_adb ,"\u0021\u0066\u006f\u0075\u006e\u0064");};_add .AddBox (_ege );_dcfb .ClassInstances .AddBitmaps (_add );
_dcfb .CentroidPointsTemplates .AddPoint (_ccc ,_afa );_dcfb .UndilatedTemplates .AddBitmap (_gdg );_dcfb .DilatedTemplates .AddBitmap (_acf );};};return nil ;};func (_deb *Classer )classifyRankHouseNonOne (_geg *_ec .Boxes ,_cabc ,_ecdb ,_dfaf *_ec .Bitmaps ,_bdg *_ec .Points ,_bdc *_f .NumSlice ,_eea int )(_aga error ){const _bcag ="\u0043\u006c\u0061\u0073s\u0065\u0072\u002e\u0063\u006c\u0061\u0073\u0073\u0069\u0066y\u0052a\u006e\u006b\u0048\u006f\u0075\u0073\u0065O\u006e\u0065";
var (_ged ,_bce ,_gfc ,_ada float32 ;_cfbd ,_ebc ,_fbb int ;_abbf ,_bbf ,_bfc ,_bcc ,_agg *_ec .Bitmap ;_egd ,_afe bool ;);_dcdc :=_ec .MakePixelSumTab8 ();for _feg :=0;_feg < len (_cabc .Values );_feg ++{if _bbf ,_aga =_ecdb .GetBitmap (_feg );_aga !=nil {return _a .Wrap (_aga ,_bcag ,"b\u006d\u0073\u0031\u002e\u0047\u0065\u0074\u0028\u0069\u0029");
};if _cfbd ,_aga =_bdc .GetInt (_feg );_aga !=nil {_c .Log .Trace ("\u0047\u0065t\u0074\u0069\u006e\u0067 \u0046\u0047T\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u0073 \u0061\u0074\u003a\u0020\u0025\u0064\u0020\u0066\u0061\u0069\u006c\u0065d\u003a\u0020\u0025\u0076",_feg ,_aga );
};if _bfc ,_aga =_dfaf .GetBitmap (_feg );_aga !=nil {return _a .Wrap (_aga ,_bcag ,"b\u006d\u0073\u0032\u002e\u0047\u0065\u0074\u0028\u0069\u0029");};if _ged ,_bce ,_aga =_bdg .GetGeometry (_feg );_aga !=nil {return _a .Wrapf (_aga ,_bcag ,"\u0070t\u0061[\u0069\u005d\u002e\u0047\u0065\u006f\u006d\u0065\u0074\u0072\u0079");
};_bgg :=len (_deb .UndilatedTemplates .Values );_egd =false ;_ffeb :=_cacg (_deb ,_bbf );for _fbb =_ffeb .Next ();_fbb > -1;{if _bcc ,_aga =_deb .UndilatedTemplates .GetBitmap (_fbb );_aga !=nil {return _a .Wrap (_aga ,_bcag ,"\u0070\u0069\u0078\u0061\u0074\u002e\u005b\u0069\u0043l\u0061\u0073\u0073\u005d");
};if _ebc ,_aga =_deb .FgTemplates .GetInt (_fbb );_aga !=nil {_c .Log .Trace ("\u0047\u0065\u0074\u0074\u0069\u006eg\u0020\u0046\u0047\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u005b\u0025d\u005d\u0020\u0066\u0061\u0069\u006c\u0065d\u003a\u0020\u0025\u0076",_fbb ,_aga );
};if _agg ,_aga =_deb .DilatedTemplates .GetBitmap (_fbb );_aga !=nil {return _a .Wrap (_aga ,_bcag ,"\u0070\u0069\u0078\u0061\u0074\u0064\u005b\u0069\u0043l\u0061\u0073\u0073\u005d");};if _gfc ,_ada ,_aga =_deb .CentroidPointsTemplates .GetGeometry (_fbb );
_aga !=nil {return _a .Wrap (_aga ,_bcag ,"\u0043\u0065\u006et\u0072\u006f\u0069\u0064P\u006f\u0069\u006e\u0074\u0073\u0054\u0065m\u0070\u006c\u0061\u0074\u0065\u0073\u005b\u0069\u0043\u006c\u0061\u0073\u0073\u005d");};_afe ,_aga =_ec .RankHausTest (_bbf ,_bfc ,_bcc ,_agg ,_ged -_gfc ,_bce -_ada ,MaxDiffWidth ,MaxDiffHeight ,_cfbd ,_ebc ,float32 (_deb .Settings .RankHaus ),_dcdc );
if _aga !=nil {return _a .Wrap (_aga ,_bcag ,"");};if _afe {_egd =true ;if _aga =_deb .ClassIDs .Add (_fbb );_aga !=nil {return _a .Wrap (_aga ,_bcag ,"");};if _aga =_deb .ComponentPageNumbers .Add (_eea );_aga !=nil {return _a .Wrap (_aga ,_bcag ,"");
};if _deb .Settings .KeepClassInstances {_cedb ,_beff :=_deb .ClassInstances .GetBitmaps (_fbb );if _beff !=nil {return _a .Wrap (_beff ,_bcag ,"\u0063\u002e\u0050\u0069\u0078\u0061\u0061\u002e\u0047\u0065\u0074B\u0069\u0074\u006d\u0061\u0070\u0073\u0028\u0069\u0043\u006ca\u0073\u0073\u0029");
};if _abbf ,_beff =_cabc .GetBitmap (_feg );_beff !=nil {return _a .Wrap (_beff ,_bcag ,"\u0070i\u0078\u0061\u005b\u0069\u005d");};_cedb .Values =append (_cedb .Values ,_abbf );_cfbc ,_beff :=_geg .Get (_feg );if _beff !=nil {return _a .Wrap (_beff ,_bcag ,"b\u006f\u0078\u0061\u002e\u0047\u0065\u0074\u0028\u0069\u0029");
};_cedb .Boxes =append (_cedb .Boxes ,_cfbc );};break ;};};if !_egd {if _aga =_deb .ClassIDs .Add (_bgg );_aga !=nil {return _a .Wrap (_aga ,_bcag ,"\u0021\u0066\u006f\u0075\u006e\u0064");};if _aga =_deb .ComponentPageNumbers .Add (_eea );_aga !=nil {return _a .Wrap (_aga ,_bcag ,"\u0021\u0066\u006f\u0075\u006e\u0064");
};_dde :=&_ec .Bitmaps {};_abbf =_cabc .Values [_feg ];_dde .AddBitmap (_abbf );_ccab ,_fad :=_abbf .Width ,_abbf .Height ;_deb .TemplatesSize .Add (uint64 (_ccab )*uint64 (_fad ),_bgg );_afef ,_gdc :=_geg .Get (_feg );if _gdc !=nil {return _a .Wrap (_gdc ,_bcag ,"\u0021\u0066\u006f\u0075\u006e\u0064");
};_dde .AddBox (_afef );_deb .ClassInstances .AddBitmaps (_dde );_deb .CentroidPointsTemplates .AddPoint (_ged ,_bce );_deb .UndilatedTemplates .AddBitmap (_bbf );_deb .DilatedTemplates .AddBitmap (_bfc );_deb .FgTemplates .AddInt (_cfbd );};};_deb .NumberOfClasses =len (_deb .UndilatedTemplates .Values );
return nil ;};type Classer struct{BaseIndex int ;Settings Settings ;ComponentsNumber *_f .IntSlice ;TemplateAreas *_f .IntSlice ;Widths map[int ]int ;Heights map[int ]int ;NumberOfClasses int ;ClassInstances *_ec .BitmapsArray ;UndilatedTemplates *_ec .Bitmaps ;
DilatedTemplates *_ec .Bitmaps ;TemplatesSize _f .IntsMap ;FgTemplates *_f .NumSlice ;CentroidPoints *_ec .Points ;CentroidPointsTemplates *_ec .Points ;ClassIDs *_f .IntSlice ;ComponentPageNumbers *_f .IntSlice ;PtaUL *_ec .Points ;PtaLL *_ec .Points ;
};const JbAddedPixels =6;const (MaxConnCompWidth =350;MaxCharCompWidth =350;MaxWordCompWidth =1000;MaxCompHeight =120;);func (_efd *Settings )SetDefault (){if _efd .MaxCompWidth ==0{switch _efd .Components {case _ec .ComponentConn :_efd .MaxCompWidth =MaxConnCompWidth ;
case _ec .ComponentCharacters :_efd .MaxCompWidth =MaxCharCompWidth ;case _ec .ComponentWords :_efd .MaxCompWidth =MaxWordCompWidth ;};};if _efd .MaxCompHeight ==0{_efd .MaxCompHeight =MaxCompHeight ;};if _efd .Thresh ==0.0{_efd .Thresh =0.9;};if _efd .WeightFactor ==0.0{_efd .WeightFactor =0.75;
};if _efd .RankHaus ==0.0{_efd .RankHaus =0.97;};if _efd .SizeHaus ==0{_efd .SizeHaus =2;};};type Settings struct{MaxCompWidth int ;MaxCompHeight int ;SizeHaus int ;RankHaus float64 ;Thresh float64 ;WeightFactor float64 ;KeepClassInstances bool ;Components _ec .Component ;
Method Method ;};type Method int ;func (_fg *Classer )ComputeLLCorners ()(_de error ){const _gbd ="\u0043l\u0061\u0073\u0073\u0065\u0072\u002e\u0043\u006f\u006d\u0070\u0075t\u0065\u004c\u004c\u0043\u006f\u0072\u006e\u0065\u0072\u0073";if _fg .PtaUL ==nil {return _a .Error (_gbd ,"\u0055\u004c\u0020\u0043or\u006e\u0065\u0072\u0073\u0020\u006e\u006f\u0074\u0020\u0064\u0065\u0066\u0069\u006ee\u0064");
};_db :=len (*_fg .PtaUL );_fg .PtaLL =&_ec .Points {};var (_b ,_dg float32 ;_ga ,_ac int ;_dc *_ec .Bitmap ;);for _da :=0;_da < _db ;_da ++{_b ,_dg ,_de =_fg .PtaUL .GetGeometry (_da );if _de !=nil {_c .Log .Debug ("\u0047e\u0074\u0074\u0069\u006e\u0067\u0020\u0050\u0074\u0061\u0055\u004c \u0066\u0061\u0069\u006c\u0065\u0064\u003a\u0020\u0025\u0076",_de );
return _a .Wrap (_de ,_gbd ,"\u0050\u0074\u0061\u0055\u004c\u0020\u0047\u0065\u006fm\u0065\u0074\u0072\u0079");};_ga ,_de =_fg .ClassIDs .Get (_da );if _de !=nil {_c .Log .Debug ("\u0047\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0043\u006c\u0061s\u0073\u0049\u0044\u0020\u0066\u0061\u0069\u006c\u0065\u0064:\u0020\u0025\u0076",_de );
return _a .Wrap (_de ,_gbd ,"\u0043l\u0061\u0073\u0073\u0049\u0044");};_dc ,_de =_fg .UndilatedTemplates .GetBitmap (_ga );if _de !=nil {_c .Log .Debug ("\u0047\u0065t\u0074\u0069\u006e\u0067 \u0055\u006ed\u0069\u006c\u0061\u0074\u0065\u0064\u0054\u0065m\u0070\u006c\u0061\u0074\u0065\u0073\u0020\u0066\u0061\u0069\u006c\u0065d\u003a\u0020\u0025\u0076",_de );
return _a .Wrap (_de ,_gbd ,"\u0055\u006e\u0064\u0069la\u0074\u0065\u0064\u0020\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u0073");};_ac =_dc .Height ;_fg .PtaLL .AddPoint (_b ,_dg +float32 (_ac ));};return nil ;};type similarTemplatesFinder struct{Classer *Classer ;
Width int ;Height int ;Index int ;CurrentNumbers []int ;N int ;};var TwoByTwoWalk =[]int {0,0,0,1,-1,0,0,-1,1,0,-1,1,1,1,-1,-1,1,-1,0,-2,2,0,0,2,-2,0,-1,-2,1,-2,2,-1,2,1,1,2,-1,2,-2,1,-2,-1,-2,-2,2,-2,2,2,-2,2};func (_dee Settings )Validate ()error {const _gbdc ="\u0053\u0065\u0074\u0074\u0069\u006e\u0067\u0073\u002e\u0056\u0061\u006ci\u0064\u0061\u0074\u0065";
if _dee .Thresh < 0.4||_dee .Thresh > 0.98{return _a .Error (_gbdc ,"\u006a\u0062i\u0067\u0032\u0020\u0065\u006e\u0063\u006f\u0064\u0065\u0072\u0020\u0074\u0068\u0072\u0065\u0073\u0068\u0020\u006e\u006f\u0074\u0020\u0069\u006e\u0020\u0072\u0061\u006e\u0067\u0065\u0020\u005b\u0030\u002e\u0034\u0020\u002d\u0020\u0030\u002e\u0039\u0038\u005d");
};if _dee .WeightFactor < 0.0||_dee .WeightFactor > 1.0{return _a .Error (_gbdc ,"\u006a\u0062i\u0067\u0032\u0020\u0065\u006ec\u006f\u0064\u0065\u0072\u0020w\u0065\u0069\u0067\u0068\u0074\u0020\u0066\u0061\u0063\u0074\u006f\u0072\u0020\u006e\u006f\u0074\u0020\u0069\u006e\u0020\u0072\u0061\u006e\u0067\u0065\u0020\u005b\u0030\u002e\u0030\u0020\u002d\u0020\u0031\u002e\u0030\u005d");
};if _dee .RankHaus < 0.5||_dee .RankHaus > 1.0{return _a .Error (_gbdc ,"\u006a\u0062\u0069\u0067\u0032\u0020\u0065\u006e\u0063\u006f\u0064\u0065\u0072\u0020\u0072a\u006e\u006b\u0020\u0068\u0061\u0075\u0073\u0020\u0076\u0061\u006c\u0075\u0065 \u006e\u006f\u0074\u0020\u0069\u006e\u0020\u0072\u0061\u006e\u0067\u0065 [\u0030\u002e\u0035\u0020\u002d\u0020\u0031\u002e\u0030\u005d");
};if _dee .SizeHaus < 1||_dee .SizeHaus > 10{return _a .Error (_gbdc ,"\u006a\u0062\u0069\u0067\u0032 \u0065\u006e\u0063\u006f\u0064\u0065\u0072\u0020\u0073\u0069\u007a\u0065\u0020h\u0061\u0075\u0073\u0020\u0076\u0061\u006c\u0075\u0065\u0020\u006e\u006f\u0074\u0020\u0069\u006e\u0020\u0072\u0061\u006e\u0067\u0065\u0020\u005b\u0031\u0020\u002d\u0020\u0031\u0030]");
};switch _dee .Components {case _ec .ComponentConn ,_ec .ComponentCharacters ,_ec .ComponentWords :default:return _a .Error (_gbdc ,"\u0069n\u0076\u0061\u006c\u0069d\u0020\u0063\u006c\u0061\u0073s\u0065r\u0020c\u006f\u006d\u0070\u006f\u006e\u0065\u006et");
};return nil ;};