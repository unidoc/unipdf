//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package segments ;import (_gdd "encoding/binary";_ac "errors";_a "fmt";_ad "github.com/unidoc/unipdf/v4/common";_cfg "github.com/unidoc/unipdf/v4/internal/bitwise";_d "github.com/unidoc/unipdf/v4/internal/jbig2/basic";_cfb "github.com/unidoc/unipdf/v4/internal/jbig2/bitmap";
_cfd "github.com/unidoc/unipdf/v4/internal/jbig2/decoder/arithmetic";_e "github.com/unidoc/unipdf/v4/internal/jbig2/decoder/huffman";_ge "github.com/unidoc/unipdf/v4/internal/jbig2/decoder/mmr";_be "github.com/unidoc/unipdf/v4/internal/jbig2/encoder/arithmetic";
_af "github.com/unidoc/unipdf/v4/internal/jbig2/errors";_cc "github.com/unidoc/unipdf/v4/internal/jbig2/internal";_f "image";_gd "io";_c "math";_cf "strings";_b "time";);func (_bfae *SymbolDictionary )encodeSymbols (_bfgeg _cfg .BinaryWriter )(_becea int ,_badb error ){const _bbee ="\u0065\u006e\u0063o\u0064\u0065\u0053\u0079\u006d\u0062\u006f\u006c";
_feaa :=_be .New ();_feaa .Init ();_bcg ,_badb :=_bfae ._geec .SelectByIndexes (_bfae ._cada );if _badb !=nil {return 0,_af .Wrap (_badb ,_bbee ,"\u0069n\u0069\u0074\u0069\u0061\u006c");};_fbefc :=map[*_cfb .Bitmap ]int {};for _dcgb ,_faebg :=range _bcg .Values {_fbefc [_faebg ]=_dcgb ;
};_bcg .SortByHeight ();var _cgee ,_bebd int ;_agged ,_badb :=_bcg .GroupByHeight ();if _badb !=nil {return 0,_af .Wrap (_badb ,_bbee ,"");};for _ ,_dadg :=range _agged .Values {_ddfgb :=_dadg .Values [0].Height ;_ccbg :=_ddfgb -_cgee ;if _badb =_feaa .EncodeInteger (_be .IADH ,_ccbg );
_badb !=nil {return 0,_af .Wrapf (_badb ,_bbee ,"\u0049\u0041\u0044\u0048\u0020\u0066\u006f\u0072\u0020\u0064\u0068\u003a \u0027\u0025\u0064\u0027",_ccbg );};_cgee =_ddfgb ;_bae ,_cbfeb :=_dadg .GroupByWidth ();if _cbfeb !=nil {return 0,_af .Wrapf (_cbfeb ,_bbee ,"\u0068\u0065\u0069g\u0068\u0074\u003a\u0020\u0027\u0025\u0064\u0027",_ddfgb );
};var _adef int ;for _ ,_afccb :=range _bae .Values {for _ ,_dgdg :=range _afccb .Values {_eede :=_dgdg .Width ;_agfg :=_eede -_adef ;if _cbfeb =_feaa .EncodeInteger (_be .IADW ,_agfg );_cbfeb !=nil {return 0,_af .Wrapf (_cbfeb ,_bbee ,"\u0049\u0041\u0044\u0057\u0020\u0066\u006f\u0072\u0020\u0064\u0077\u003a \u0027\u0025\u0064\u0027",_agfg );
};_adef +=_agfg ;if _cbfeb =_feaa .EncodeBitmap (_dgdg ,false );_cbfeb !=nil {return 0,_af .Wrapf (_cbfeb ,_bbee ,"H\u0065i\u0067\u0068\u0074\u003a\u0020\u0025\u0064\u0020W\u0069\u0064\u0074\u0068: \u0025\u0064",_ddfgb ,_eede );};_gccb :=_fbefc [_dgdg ];
_bfae ._fgdg [_gccb ]=_bebd ;_bebd ++;};};if _cbfeb =_feaa .EncodeOOB (_be .IADW );_cbfeb !=nil {return 0,_af .Wrap (_cbfeb ,_bbee ,"\u0049\u0041\u0044\u0057");};};if _badb =_feaa .EncodeInteger (_be .IAEX ,0);_badb !=nil {return 0,_af .Wrap (_badb ,_bbee ,"\u0065\u0078p\u006f\u0072\u0074e\u0064\u0020\u0073\u0079\u006d\u0062\u006f\u006c\u0073");
};if _badb =_feaa .EncodeInteger (_be .IAEX ,len (_bfae ._cada ));_badb !=nil {return 0,_af .Wrap (_badb ,_bbee ,"\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u006f\u0066\u0020\u0073\u0079m\u0062\u006f\u006c\u0073");};_feaa .Final ();_fdd ,_badb :=_feaa .WriteTo (_bfgeg );
if _badb !=nil {return 0,_af .Wrap (_badb ,_bbee ,"\u0077\u0072i\u0074\u0069\u006e\u0067 \u0065\u006ec\u006f\u0064\u0065\u0072\u0020\u0063\u006f\u006et\u0065\u0078\u0074\u0020\u0074\u006f\u0020\u0027\u0077\u0027\u0020\u0077r\u0069\u0074\u0065\u0072");};
return int (_fdd ),nil ;};func (_ege *GenericRegion )overrideAtTemplate2 (_cadc ,_bgdd ,_ggf ,_ecad ,_cced int )int {_cadc &=0x3FB;if _ege .GBAtY [0]==0&&_ege .GBAtX [0]>=-int8 (_cced ){_cadc |=(_ecad >>uint (7-(int8 (_cced )+_ege .GBAtX [0]))&0x1)<<2;
}else {_cadc |=int (_ege .getPixel (_bgdd +int (_ege .GBAtX [0]),_ggf +int (_ege .GBAtY [0])))<<2;};return _cadc ;};func (_gabe *PageInformationSegment )readIsStriped ()error {_dfde ,_caga :=_gabe ._dgbg .ReadBit ();if _caga !=nil {return _caga ;};if _dfde ==1{_gabe .IsStripe =true ;
};return nil ;};var _ templater =&template0 {};func (_gbgg *Header )readDataStartOffset (_bgabc *_cfg .Reader ,_ead OrganizationType ){if _ead ==OSequential {_gbgg .SegmentDataStartOffset =uint64 (_bgabc .AbsolutePosition ());};};func (_egag *SymbolDictionary )GetDictionary ()([]*_cfb .Bitmap ,error ){_ad .Log .Trace ("\u005b\u0053\u0059\u004d\u0042\u004f\u004c-\u0044\u0049\u0043T\u0049\u004f\u004e\u0041R\u0059\u005d\u0020\u0047\u0065\u0074\u0044\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u0062\u0065\u0067\u0069\u006e\u0073\u002e\u002e\u002e");
defer func (){_ad .Log .Trace ("\u005b\u0053\u0059M\u0042\u004f\u004c\u002d\u0044\u0049\u0043\u0054\u0049\u004f\u004e\u0041\u0052\u0059\u005d\u0020\u0047\u0065\u0074\u0044\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079 \u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064");
_ad .Log .Trace ("\u005b\u0053Y\u004d\u0042\u004f\u004c\u002dD\u0049\u0043\u0054\u0049\u004fN\u0041\u0052\u0059\u005d\u0020\u0044\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u002e\u0020\u000a\u0045\u0078\u003a\u0020\u0027\u0025\u0073\u0027\u002c\u0020\u000a\u006e\u0065\u0077\u003a\u0027\u0025\u0073\u0027",_egag ._dfa ,_egag ._ccfff );
}();if _egag ._dfa ==nil {var _bfdd error ;if _egag .UseRefinementAggregation {_egag ._ecdb =_egag .getSbSymCodeLen ();};if !_egag .IsHuffmanEncoded {if _bfdd =_egag .setCodingStatistics ();_bfdd !=nil {return nil ,_bfdd ;};};_egag ._ccfff =make ([]*_cfb .Bitmap ,_egag .NumberOfNewSymbols );
var _ffae []int ;if _egag .IsHuffmanEncoded &&!_egag .UseRefinementAggregation {_ffae =make ([]int ,_egag .NumberOfNewSymbols );};if _bfdd =_egag .setSymbolsArray ();_bfdd !=nil {return nil ,_bfdd ;};var _daccc ,_dafb int64 ;_egag ._dddb =0;for _egag ._dddb < _egag .NumberOfNewSymbols {_dafb ,_bfdd =_egag .decodeHeightClassDeltaHeight ();
if _bfdd !=nil {return nil ,_bfdd ;};_daccc +=_dafb ;var _adcb ,_acba uint32 ;_fecf :=int64 (_egag ._dddb );for {var _bgege int64 ;_bgege ,_bfdd =_egag .decodeDifferenceWidth ();if _ac .Is (_bfdd ,_cc .ErrOOB ){break ;};if _bfdd !=nil {return nil ,_bfdd ;
};if _egag ._dddb >=_egag .NumberOfNewSymbols {break ;};_adcb +=uint32 (_bgege );_acba +=_adcb ;if !_egag .IsHuffmanEncoded ||_egag .UseRefinementAggregation {if !_egag .UseRefinementAggregation {_bfdd =_egag .decodeDirectlyThroughGenericRegion (_adcb ,uint32 (_daccc ));
if _bfdd !=nil {return nil ,_bfdd ;};}else {_bfdd =_egag .decodeAggregate (_adcb ,uint32 (_daccc ));if _bfdd !=nil {return nil ,_bfdd ;};};}else if _egag .IsHuffmanEncoded &&!_egag .UseRefinementAggregation {_ffae [_egag ._dddb ]=int (_adcb );};_egag ._dddb ++;
};if _egag .IsHuffmanEncoded &&!_egag .UseRefinementAggregation {var _bdeg int64 ;if _egag .SdHuffBMSizeSelection ==0{var _gddf _e .Tabler ;_gddf ,_bfdd =_e .GetStandardTable (1);if _bfdd !=nil {return nil ,_bfdd ;};_bdeg ,_bfdd =_gddf .Decode (_egag ._cdbb );
if _bfdd !=nil {return nil ,_bfdd ;};}else {_bdeg ,_bfdd =_egag .huffDecodeBmSize ();if _bfdd !=nil {return nil ,_bfdd ;};};_egag ._cdbb .Align ();var _gbae *_cfb .Bitmap ;_gbae ,_bfdd =_egag .decodeHeightClassCollectiveBitmap (_bdeg ,uint32 (_daccc ),_acba );
if _bfdd !=nil {return nil ,_bfdd ;};_bfdd =_egag .decodeHeightClassBitmap (_gbae ,_fecf ,int (_daccc ),_ffae );if _bfdd !=nil {return nil ,_bfdd ;};};};_dga ,_bfdd :=_egag .getToExportFlags ();if _bfdd !=nil {return nil ,_bfdd ;};_egag .setExportedSymbols (_dga );
};return _egag ._dfa ,nil ;};var _ SegmentEncoder =&GenericRegion {};func (_aeae *Header )writeReferredToSegments (_eceg _cfg .BinaryWriter )(_fdae int ,_deef error ){const _aaeb ="\u0077\u0072\u0069te\u0052\u0065\u0066\u0065\u0072\u0072\u0065\u0064\u0054\u006f\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u0073";
var (_bdcf uint16 ;_ffca uint32 ;);_gbe :=_aeae .referenceSize ();_bff :=1;_cfdd :=make ([]byte ,_gbe );for _ ,_eagc :=range _aeae .RTSNumbers {switch _gbe {case 4:_ffca =uint32 (_eagc );_gdd .BigEndian .PutUint32 (_cfdd ,_ffca );_bff ,_deef =_eceg .Write (_cfdd );
if _deef !=nil {return 0,_af .Wrap (_deef ,_aaeb ,"u\u0069\u006e\u0074\u0033\u0032\u0020\u0073\u0069\u007a\u0065");};case 2:_bdcf =uint16 (_eagc );_gdd .BigEndian .PutUint16 (_cfdd ,_bdcf );_bff ,_deef =_eceg .Write (_cfdd );if _deef !=nil {return 0,_af .Wrap (_deef ,_aaeb ,"\u0075\u0069\u006e\u0074\u0031\u0036");
};default:if _deef =_eceg .WriteByte (byte (_eagc ));_deef !=nil {return 0,_af .Wrap (_deef ,_aaeb ,"\u0075\u0069\u006et\u0038");};};_fdae +=_bff ;};return _fdae ,nil ;};func (_ba *GenericRefinementRegion )decodeTypicalPredictedLineTemplate1 (_cb ,_bgb ,_bbc ,_efc ,_acbb ,_beg ,_gef ,_ecgd ,_ab int )(_fea error ){var (_faga ,_fb int ;
_agda ,_caf int ;_cfe ,_egcd int ;_acbd byte ;);if _cb > 0{_acbd ,_fea =_ba .RegionBitmap .GetByte (_gef -_bbc );if _fea !=nil {return _fea ;};_agda =int (_acbd );};if _ecgd > 0&&_ecgd <=_ba .ReferenceBitmap .Height {_acbd ,_fea =_ba .ReferenceBitmap .GetByte (_ab -_efc +_beg );
if _fea !=nil {return _fea ;};_caf =int (_acbd )<<2;};if _ecgd >=0&&_ecgd < _ba .ReferenceBitmap .Height {_acbd ,_fea =_ba .ReferenceBitmap .GetByte (_ab +_beg );if _fea !=nil {return _fea ;};_cfe =int (_acbd );};if _ecgd > -2&&_ecgd < _ba .ReferenceBitmap .Height -1{_acbd ,_fea =_ba .ReferenceBitmap .GetByte (_ab +_efc +_beg );
if _fea !=nil {return _fea ;};_egcd =int (_acbd );};_faga =((_agda >>5)&0x6)|((_egcd >>2)&0x30)|(_cfe &0xc0)|(_caf &0x200);_fb =((_egcd >>2)&0x70)|(_cfe &0xc0)|(_caf &0x700);var _bcd int ;for _gbf :=0;_gbf < _acbb ;_gbf =_bcd {var (_ebd int ;_age int ;
);_bcd =_gbf +8;if _ebd =_bgb -_gbf ;_ebd > 8{_ebd =8;};_bbd :=_bcd < _bgb ;_cgg :=_bcd < _ba .ReferenceBitmap .Width ;_bfg :=_beg +1;if _cb > 0{_acbd =0;if _bbd {_acbd ,_fea =_ba .RegionBitmap .GetByte (_gef -_bbc +1);if _fea !=nil {return _fea ;};};_agda =(_agda <<8)|int (_acbd );
};if _ecgd > 0&&_ecgd <=_ba .ReferenceBitmap .Height {var _cbc int ;if _cgg {_acbd ,_fea =_ba .ReferenceBitmap .GetByte (_ab -_efc +_bfg );if _fea !=nil {return _fea ;};_cbc =int (_acbd )<<2;};_caf =(_caf <<8)|_cbc ;};if _ecgd >=0&&_ecgd < _ba .ReferenceBitmap .Height {_acbd =0;
if _cgg {_acbd ,_fea =_ba .ReferenceBitmap .GetByte (_ab +_bfg );if _fea !=nil {return _fea ;};};_cfe =(_cfe <<8)|int (_acbd );};if _ecgd > -2&&_ecgd < (_ba .ReferenceBitmap .Height -1){_acbd =0;if _cgg {_acbd ,_fea =_ba .ReferenceBitmap .GetByte (_ab +_efc +_bfg );
if _fea !=nil {return _fea ;};};_egcd =(_egcd <<8)|int (_acbd );};for _egb :=0;_egb < _ebd ;_egb ++{var _cbg int ;_cda :=(_fb >>4)&0x1ff;switch _cda {case 0x1ff:_cbg =1;case 0x00:_cbg =0;default:_ba ._gbc .SetIndex (int32 (_faga ));_cbg ,_fea =_ba ._ca .DecodeBit (_ba ._gbc );
if _fea !=nil {return _fea ;};};_daf :=uint (7-_egb );_age |=_cbg <<_daf ;_faga =((_faga &0x0d6)<<1)|_cbg |(_agda >>_daf +5)&0x002|((_egcd >>_daf +2)&0x010)|((_cfe >>_daf )&0x040)|((_caf >>_daf )&0x200);_fb =((_fb &0xdb)<<1)|((_egcd >>_daf +2)&0x010)|((_cfe >>_daf )&0x080)|((_caf >>_daf )&0x400);
};_fea =_ba .RegionBitmap .SetByte (_gef ,byte (_age ));if _fea !=nil {return _fea ;};_gef ++;_ab ++;};return nil ;};func (_gbca *TextRegion )checkInput ()error {const _eagg ="\u0063\u0068\u0065\u0063\u006b\u0049\u006e\u0070\u0075\u0074";if !_gbca .UseRefinement {if _gbca .SbrTemplate !=0{_ad .Log .Debug ("\u0053\u0062\u0072Te\u006d\u0070\u006c\u0061\u0074\u0065\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0030");
_gbca .SbrTemplate =0;};};if _gbca .SbHuffFS ==2||_gbca .SbHuffRDWidth ==2||_gbca .SbHuffRDHeight ==2||_gbca .SbHuffRDX ==2||_gbca .SbHuffRDY ==2{return _af .Error (_eagg ,"h\u0075\u0066\u0066\u006d\u0061\u006e \u0066\u006c\u0061\u0067\u0020\u0076a\u006c\u0075\u0065\u0020\u0069\u0073\u0020n\u006f\u0074\u0020\u0070\u0065\u0072\u006d\u0069\u0074\u0074e\u0064");
};if !_gbca .UseRefinement {if _gbca .SbHuffRSize !=0{_ad .Log .Debug ("\u0053\u0062\u0048uf\u0066\u0052\u0053\u0069\u007a\u0065\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0030");_gbca .SbHuffRSize =0;};if _gbca .SbHuffRDY !=0{_ad .Log .Debug ("S\u0062\u0048\u0075\u0066fR\u0044Y\u0020\u0073\u0068\u006f\u0075l\u0064\u0020\u0062\u0065\u0020\u0030");
_gbca .SbHuffRDY =0;};if _gbca .SbHuffRDX !=0{_ad .Log .Debug ("S\u0062\u0048\u0075\u0066fR\u0044X\u0020\u0073\u0068\u006f\u0075l\u0064\u0020\u0062\u0065\u0020\u0030");_gbca .SbHuffRDX =0;};if _gbca .SbHuffRDWidth !=0{_ad .Log .Debug ("\u0053b\u0048\u0075\u0066\u0066R\u0044\u0057\u0069\u0064\u0074h\u0020s\u0068o\u0075\u006c\u0064\u0020\u0062\u0065\u00200");
_gbca .SbHuffRDWidth =0;};if _gbca .SbHuffRDHeight !=0{_ad .Log .Debug ("\u0053\u0062\u0048\u0075\u0066\u0066\u0052\u0044\u0048\u0065\u0069g\u0068\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020b\u0065\u0020\u0030");_gbca .SbHuffRDHeight =0;};};return nil ;
};func (_cfdbb *TextRegion )decodeIb (_eagac ,_egec int64 )(*_cfb .Bitmap ,error ){const _aebf ="\u0064\u0065\u0063\u006f\u0064\u0065\u0049\u0062";var (_ddfa error ;_fccee *_cfb .Bitmap ;);if _eagac ==0{if int (_egec )> len (_cfdbb .Symbols )-1{return nil ,_af .Error (_aebf ,"\u0064\u0065\u0063\u006f\u0064\u0069\u006e\u0067\u0020\u0049\u0042\u0020\u0062\u0069\u0074\u006d\u0061\u0070\u002e\u0020\u0069\u006e\u0064\u0065x\u0020\u006f\u0075\u0074\u0020o\u0066\u0020r\u0061\u006e\u0067\u0065");
};return _cfdbb .Symbols [int (_egec )],nil ;};var _ggce ,_feeda ,_bggc ,_fcgac int64 ;_ggce ,_ddfa =_cfdbb .decodeRdw ();if _ddfa !=nil {return nil ,_af .Wrap (_ddfa ,_aebf ,"");};_feeda ,_ddfa =_cfdbb .decodeRdh ();if _ddfa !=nil {return nil ,_af .Wrap (_ddfa ,_aebf ,"");
};_bggc ,_ddfa =_cfdbb .decodeRdx ();if _ddfa !=nil {return nil ,_af .Wrap (_ddfa ,_aebf ,"");};_fcgac ,_ddfa =_cfdbb .decodeRdy ();if _ddfa !=nil {return nil ,_af .Wrap (_ddfa ,_aebf ,"");};if _cfdbb .IsHuffmanEncoded {if _ ,_ddfa =_cfdbb .decodeSymInRefSize ();
_ddfa !=nil {return nil ,_af .Wrap (_ddfa ,_aebf ,"");};_cfdbb ._gabc .Align ();};_egg :=_cfdbb .Symbols [_egec ];_efdf :=uint32 (_egg .Width );_befe :=uint32 (_egg .Height );_bdgg :=int32 (uint32 (_ggce )>>1)+int32 (_bggc );_gafbe :=int32 (uint32 (_feeda )>>1)+int32 (_fcgac );
if _cfdbb ._ffde ==nil {_cfdbb ._ffde =_ddd (_cfdbb ._gabc ,nil );};_cfdbb ._ffde .setParameters (_cfdbb ._edad ,_cfdbb ._cfcgd ,_cfdbb .SbrTemplate ,_efdf +uint32 (_ggce ),_befe +uint32 (_feeda ),_egg ,_bdgg ,_gafbe ,false ,_cfdbb .SbrATX ,_cfdbb .SbrATY );
_fccee ,_ddfa =_cfdbb ._ffde .GetRegionBitmap ();if _ddfa !=nil {return nil ,_af .Wrap (_ddfa ,_aebf ,"\u0067\u0072\u0066");};if _cfdbb .IsHuffmanEncoded {_cfdbb ._gabc .Align ();};return _fccee ,nil ;};func (_dee *GenericRegion )overrideAtTemplate1 (_acdd ,_deeb ,_cgdc ,_badc ,_ccd int )int {_acdd &=0x1FF7;
if _dee .GBAtY [0]==0&&_dee .GBAtX [0]>=-int8 (_ccd ){_acdd |=(_badc >>uint (7-(int8 (_ccd )+_dee .GBAtX [0]))&0x1)<<3;}else {_acdd |=int (_dee .getPixel (_deeb +int (_dee .GBAtX [0]),_cgdc +int (_dee .GBAtY [0])))<<3;};return _acdd ;};func _fbfa (_cfdb int )int {if _cfdb ==0{return 0;
};_cfdb |=_cfdb >>1;_cfdb |=_cfdb >>2;_cfdb |=_cfdb >>4;_cfdb |=_cfdb >>8;_cfdb |=_cfdb >>16;return (_cfdb +1)>>1;};func (_ffgcb *SymbolDictionary )decodeHeightClassBitmap (_egcc *_cfb .Bitmap ,_bgbd int64 ,_bcdc int ,_edea []int )error {for _bfde :=_bgbd ;
_bfde < int64 (_ffgcb ._dddb );_bfde ++{var _beab int ;for _ebbc :=_bgbd ;_ebbc <=_bfde -1;_ebbc ++{_beab +=_edea [_ebbc ];};_dgddc :=_f .Rect (_beab ,0,_beab +_edea [_bfde ],_bcdc );_cdca ,_cace :=_cfb .Extract (_dgddc ,_egcc );if _cace !=nil {return _cace ;
};_ffgcb ._ccfff [_bfde ]=_cdca ;_ffgcb ._bceaf =append (_ffgcb ._bceaf ,_cdca );};return nil ;};func (_fbf *HalftoneRegion )renderPattern (_gadb [][]int )(_cdef error ){var _aeec ,_acaa int ;for _ccge :=0;_ccge < int (_fbf .HGridHeight );_ccge ++{for _cagb :=0;
_cagb < int (_fbf .HGridWidth );_cagb ++{_aeec =_fbf .computeX (_ccge ,_cagb );_acaa =_fbf .computeY (_ccge ,_cagb );_baad :=_fbf .Patterns [_gadb [_ccge ][_cagb ]];if _cdef =_cfb .Blit (_baad ,_fbf .HalftoneRegionBitmap ,_aeec +int (_fbf .HGridX ),_acaa +int (_fbf .HGridY ),_fbf .CombinationOperator );
_cdef !=nil {return _cdef ;};};};return nil ;};type HalftoneRegion struct{_dabd *_cfg .Reader ;_cgf *Header ;DataHeaderOffset int64 ;DataHeaderLength int64 ;DataOffset int64 ;DataLength int64 ;RegionSegment *RegionSegment ;HDefaultPixel int8 ;CombinationOperator _cfb .CombinationOperator ;
HSkipEnabled bool ;HTemplate byte ;IsMMREncoded bool ;HGridWidth uint32 ;HGridHeight uint32 ;HGridX int32 ;HGridY int32 ;HRegionX uint16 ;HRegionY uint16 ;HalftoneRegionBitmap *_cfb .Bitmap ;Patterns []*_cfb .Bitmap ;};func (_dcbd *Header )pageSize ()uint {if _dcbd .PageAssociation <=255{return 1;
};return 4;};func (_fbea *PatternDictionary )checkInput ()error {if _fbea .HdpHeight < 1||_fbea .HdpWidth < 1{return _ac .New ("in\u0076\u0061l\u0069\u0064\u0020\u0048\u0065\u0061\u0064\u0065\u0072 \u0056\u0061\u006c\u0075\u0065\u003a\u0020\u0057\u0069\u0064\u0074\u0068\u002f\u0048\u0065\u0069\u0067\u0068\u0074\u0020\u006d\u0075\u0073\u0074\u0020\u0062\u0065\u0020g\u0072e\u0061\u0074\u0065\u0072\u0020\u0074\u0068\u0061n\u0020z\u0065\u0072o");
};if _fbea .IsMMREncoded {if _fbea .HDTemplate !=0{_ad .Log .Debug ("\u0076\u0061\u0072\u0069\u0061\u0062\u006c\u0065\u0020\u0048\u0044\u0054\u0065\u006d\u0070\u006c\u0061\u0074e\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u006e\u006f\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e \u0074\u0068\u0065\u0020\u0076\u0061\u006c\u0075\u0065\u0020\u0030");
};};return nil ;};func (_cg *GenericRefinementRegion )Init (header *Header ,r *_cfg .Reader )error {_cg ._da =header ;_cg ._ag =r ;_cg .RegionInfo =NewRegionSegment (r );return _cg .parseHeader ();};type PageInformationSegment struct{_dgbg *_cfg .Reader ;
PageBMHeight int ;PageBMWidth int ;ResolutionX int ;ResolutionY int ;_fceb bool ;_fdaa _cfb .CombinationOperator ;_gbeg bool ;DefaultPixelValue uint8 ;_afe bool ;IsLossless bool ;IsStripe bool ;MaxStripeSize uint16 ;};func (_fg *GenericRefinementRegion )getGrReference ()(*_cfb .Bitmap ,error ){segments :=_fg ._da .RTSegments ;
if len (segments )==0{return nil ,_ac .New ("\u0052\u0065f\u0065\u0072\u0065\u006e\u0063\u0065\u0064\u0020\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u0020\u006e\u006f\u0074\u0020\u0065\u0078is\u0074\u0073");};_ccc ,_fcc :=segments [0].GetSegmentData ();
if _fcc !=nil {return nil ,_fcc ;};_bf ,_ebc :=_ccc .(Regioner );if !_ebc {return nil ,_a .Errorf ("\u0072\u0065\u0066\u0065\u0072r\u0065\u0064\u0020\u0074\u006f\u0020\u0053\u0065\u0067\u006d\u0065\u006e\u0074 \u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0061\u0020\u0052\u0065\u0067\u0069\u006f\u006e\u0065\u0072\u003a\u0020\u0025\u0054",_ccc );
};return _bf .GetRegionBitmap ();};func (_dcde *TableSegment )parseHeader ()error {var (_abc int ;_cbce uint64 ;_acef error ;);_abc ,_acef =_dcde ._ffag .ReadBit ();if _acef !=nil {return _acef ;};if _abc ==1{return _a .Errorf ("\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0074\u0061\u0062\u006c\u0065 \u0073\u0065\u0067\u006d\u0065\u006e\u0074\u0020\u0064e\u0066\u0069\u006e\u0069\u0074\u0069\u006f\u006e\u002e\u0020\u0042\u002e\u0032\u002e1\u0020\u0043\u006f\u0064\u0065\u0020\u0054\u0061\u0062\u006c\u0065\u0020\u0066\u006c\u0061\u0067\u0073\u003a\u0020\u0042\u0069\u0074\u0020\u0037\u0020\u006d\u0075\u0073\u0074\u0020b\u0065\u0020\u007a\u0065\u0072\u006f\u002e\u0020\u0057a\u0073\u003a \u0025\u0064",_abc );
};if _cbce ,_acef =_dcde ._ffag .ReadBits (3);_acef !=nil {return _acef ;};_dcde ._cdeda =(int32 (_cbce )+1)&0xf;if _cbce ,_acef =_dcde ._ffag .ReadBits (3);_acef !=nil {return _acef ;};_dcde ._gbff =(int32 (_cbce )+1)&0xf;if _cbce ,_acef =_dcde ._ffag .ReadBits (32);
_acef !=nil {return _acef ;};_dcde ._gadec =int32 (_cbce &_c .MaxInt32 );if _cbce ,_acef =_dcde ._ffag .ReadBits (32);_acef !=nil {return _acef ;};_dcde ._cdfc =int32 (_cbce &_c .MaxInt32 );return nil ;};type PatternDictionary struct{_caefb *_cfg .Reader ;
DataHeaderOffset int64 ;DataHeaderLength int64 ;DataOffset int64 ;DataLength int64 ;GBAtX []int8 ;GBAtY []int8 ;IsMMREncoded bool ;HDTemplate byte ;HdpWidth byte ;HdpHeight byte ;Patterns []*_cfb .Bitmap ;GrayMax uint32 ;};func (_cagcc *TextRegion )decodeDT ()(_ccedc int64 ,_edeab error ){if _cagcc .IsHuffmanEncoded {if _cagcc .SbHuffDT ==3{_ccedc ,_edeab =_cagcc ._debfb .Decode (_cagcc ._gabc );
if _edeab !=nil {return 0,_edeab ;};}else {var _gdbc _e .Tabler ;_gdbc ,_edeab =_e .GetStandardTable (11+int (_cagcc .SbHuffDT ));if _edeab !=nil {return 0,_edeab ;};_ccedc ,_edeab =_gdbc .Decode (_cagcc ._gabc );if _edeab !=nil {return 0,_edeab ;};};}else {var _dggd int32 ;
_dggd ,_edeab =_cagcc ._cfcgd .DecodeInt (_cagcc ._ceddf );if _edeab !=nil {return 0,_edeab ;};_ccedc =int64 (_dggd );};_ccedc *=int64 (_cagcc .SbStrips );return _ccedc ,nil ;};func (_acee *Header )readNumberOfReferredToSegments (_ddce *_cfg .Reader )(uint64 ,error ){const _bdb ="\u0072\u0065\u0061\u0064\u004e\u0075\u006d\u0062\u0065\u0072O\u0066\u0052\u0065\u0066\u0065\u0072\u0072e\u0064\u0054\u006f\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u0073";
_abbd ,_cgfd :=_ddce .ReadBits (3);if _cgfd !=nil {return 0,_af .Wrap (_cgfd ,_bdb ,"\u0063\u006f\u0075n\u0074\u0020\u006f\u0066\u0020\u0072\u0074\u0073");};_abbd &=0xf;var _gfed []byte ;if _abbd <=4{_gfed =make ([]byte ,5);for _ffb :=0;_ffb <=4;_ffb ++{_bag ,_dcdgb :=_ddce .ReadBit ();
if _dcdgb !=nil {return 0,_af .Wrap (_dcdgb ,_bdb ,"\u0073\u0068\u006fr\u0074\u0020\u0066\u006f\u0072\u006d\u0061\u0074");};_gfed [_ffb ]=byte (_bag );};}else {_abbd ,_cgfd =_ddce .ReadBits (29);if _cgfd !=nil {return 0,_cgfd ;};_abbd &=_c .MaxInt32 ;_cegf :=(_abbd +8)>>3;
_cegf <<=3;_gfed =make ([]byte ,_cegf );var _cdec uint64 ;for _cdec =0;_cdec < _cegf ;_cdec ++{_fgd ,_adce :=_ddce .ReadBit ();if _adce !=nil {return 0,_af .Wrap (_adce ,_bdb ,"l\u006f\u006e\u0067\u0020\u0066\u006f\u0072\u006d\u0061\u0074");};_gfed [_cdec ]=byte (_fgd );
};};return _abbd ,nil ;};func (_cdff *GenericRefinementRegion )decodeTypicalPredictedLineTemplate0 (_bfdc ,_gcd ,_acb ,_dac ,_bef ,_gbad ,_dbc ,_cde ,_ece int )error {var (_bgg ,_bcc ,_ffc ,_bcb ,_ef ,_cae int ;_add byte ;_ged error ;);if _bfdc > 0{_add ,_ged =_cdff .RegionBitmap .GetByte (_dbc -_acb );
if _ged !=nil {return _ged ;};_ffc =int (_add );};if _cde > 0&&_cde <=_cdff .ReferenceBitmap .Height {_add ,_ged =_cdff .ReferenceBitmap .GetByte (_ece -_dac +_gbad );if _ged !=nil {return _ged ;};_bcb =int (_add )<<4;};if _cde >=0&&_cde < _cdff .ReferenceBitmap .Height {_add ,_ged =_cdff .ReferenceBitmap .GetByte (_ece +_gbad );
if _ged !=nil {return _ged ;};_ef =int (_add )<<1;};if _cde > -2&&_cde < _cdff .ReferenceBitmap .Height -1{_add ,_ged =_cdff .ReferenceBitmap .GetByte (_ece +_dac +_gbad );if _ged !=nil {return _ged ;};_cae =int (_add );};_bgg =((_ffc >>5)&0x6)|((_cae >>2)&0x30)|(_ef &0x180)|(_bcb &0xc00);
var _eeg int ;for _dg :=0;_dg < _bef ;_dg =_eeg {var _ccf int ;_eeg =_dg +8;var _eg int ;if _eg =_gcd -_dg ;_eg > 8{_eg =8;};_cccb :=_eeg < _gcd ;_ce :=_eeg < _cdff .ReferenceBitmap .Width ;_gbg :=_gbad +1;if _bfdc > 0{_add =0;if _cccb {_add ,_ged =_cdff .RegionBitmap .GetByte (_dbc -_acb +1);
if _ged !=nil {return _ged ;};};_ffc =(_ffc <<8)|int (_add );};if _cde > 0&&_cde <=_cdff .ReferenceBitmap .Height {var _edb int ;if _ce {_add ,_ged =_cdff .ReferenceBitmap .GetByte (_ece -_dac +_gbg );if _ged !=nil {return _ged ;};_edb =int (_add )<<4;
};_bcb =(_bcb <<8)|_edb ;};if _cde >=0&&_cde < _cdff .ReferenceBitmap .Height {var _cef int ;if _ce {_add ,_ged =_cdff .ReferenceBitmap .GetByte (_ece +_gbg );if _ged !=nil {return _ged ;};_cef =int (_add )<<1;};_ef =(_ef <<8)|_cef ;};if _cde > -2&&_cde < (_cdff .ReferenceBitmap .Height -1){_add =0;
if _ce {_add ,_ged =_cdff .ReferenceBitmap .GetByte (_ece +_dac +_gbg );if _ged !=nil {return _ged ;};};_cae =(_cae <<8)|int (_add );};for _egf :=0;_egf < _eg ;_egf ++{var _daa int ;_gec :=false ;_adb :=(_bgg >>4)&0x1ff;if _adb ==0x1ff{_gec =true ;_daa =1;
}else if _adb ==0x00{_gec =true ;};if !_gec {if _cdff ._db {_bcc =_cdff .overrideAtTemplate0 (_bgg ,_dg +_egf ,_bfdc ,_ccf ,_egf );_cdff ._gbc .SetIndex (int32 (_bcc ));}else {_cdff ._gbc .SetIndex (int32 (_bgg ));};_daa ,_ged =_cdff ._ca .DecodeBit (_cdff ._gbc );
if _ged !=nil {return _ged ;};};_egc :=uint (7-_egf );_ccf |=_daa <<_egc ;_bgg =((_bgg &0xdb6)<<1)|_daa |(_ffc >>_egc +5)&0x002|((_cae >>_egc +2)&0x010)|((_ef >>_egc )&0x080)|((_bcb >>_egc )&0x400);};_ged =_cdff .RegionBitmap .SetByte (_dbc ,byte (_ccf ));
if _ged !=nil {return _ged ;};_dbc ++;_ece ++;};return nil ;};func (_ddcd *GenericRegion )setOverrideFlag (_bec int ){_ddcd .GBAtOverride [_bec ]=true ;_ddcd ._fda =true ;};func (_cbaf *TextRegion )decodeSymbolInstances ()error {_bbag ,_gdgff :=_cbaf .decodeStripT ();
if _gdgff !=nil {return _gdgff ;};var (_dddd int64 ;_ccbe uint32 ;);for _ccbe < _cbaf .NumberOfSymbolInstances {_ddbdfe ,_dbba :=_cbaf .decodeDT ();if _dbba !=nil {return _dbba ;};_bbag +=_ddbdfe ;var _bbef int64 ;_deaa :=true ;_cbaf ._ebcd =0;for {if _deaa {_bbef ,_dbba =_cbaf .decodeDfs ();
if _dbba !=nil {return _dbba ;};_dddd +=_bbef ;_cbaf ._ebcd =_dddd ;_deaa =false ;}else {_daac ,_bbea :=_cbaf .decodeIds ();if _ac .Is (_bbea ,_cc .ErrOOB ){break ;};if _bbea !=nil {return _bbea ;};if _ccbe >=_cbaf .NumberOfSymbolInstances {break ;};_cbaf ._ebcd +=_daac +int64 (_cbaf .SbDsOffset );
};_fdaag ,_cdece :=_cbaf .decodeCurrentT ();if _cdece !=nil {return _cdece ;};_gfad :=_bbag +_fdaag ;_dfdc ,_cdece :=_cbaf .decodeID ();if _cdece !=nil {return _cdece ;};_adfd ,_cdece :=_cbaf .decodeRI ();if _cdece !=nil {return _cdece ;};_egfae ,_cdece :=_cbaf .decodeIb (_adfd ,_dfdc );
if _cdece !=nil {return _cdece ;};if _cdece =_cbaf .blit (_egfae ,_gfad );_cdece !=nil {return _cdece ;};_ccbe ++;};};return nil ;};func (_adceg *SymbolDictionary )decodeHeightClassDeltaHeightWithHuffman ()(int64 ,error ){switch _adceg .SdHuffDecodeHeightSelection {case 0:_ebfd ,_eadd :=_e .GetStandardTable (4);
if _eadd !=nil {return 0,_eadd ;};return _ebfd .Decode (_adceg ._cdbb );case 1:_dcef ,_edaf :=_e .GetStandardTable (5);if _edaf !=nil {return 0,_edaf ;};return _dcef .Decode (_adceg ._cdbb );case 3:if _adceg ._afac ==nil {_gaca ,_ebbb :=_e .GetStandardTable (0);
if _ebbb !=nil {return 0,_ebbb ;};_adceg ._afac =_gaca ;};return _adceg ._afac .Decode (_adceg ._cdbb );};return 0,nil ;};func (_cgbe *HalftoneRegion )computeY (_gcec ,_gda int )int {return _cgbe .shiftAndFill (int (_cgbe .HGridY )+_gcec *int (_cgbe .HRegionX )-_gda *int (_cgbe .HRegionY ));
};func (_aac *GenericRefinementRegion )overrideAtTemplate0 (_egcb ,_fee ,_bbf ,_df ,_gbgd int )int {if _aac ._gg [0]{_egcb &=0xfff7;if _aac .GrAtY [0]==0&&int (_aac .GrAtX [0])>=-_gbgd {_egcb |=(_df >>uint (7-(_gbgd +int (_aac .GrAtX [0])))&0x1)<<3;}else {_egcb |=_aac .getPixel (_aac .RegionBitmap ,_fee +int (_aac .GrAtX [0]),_bbf +int (_aac .GrAtY [0]))<<3;
};};if _aac ._gg [1]{_egcb &=0xefff;if _aac .GrAtY [1]==0&&int (_aac .GrAtX [1])>=-_gbgd {_egcb |=(_df >>uint (7-(_gbgd +int (_aac .GrAtX [1])))&0x1)<<12;}else {_egcb |=_aac .getPixel (_aac .ReferenceBitmap ,_fee +int (_aac .GrAtX [1]),_bbf +int (_aac .GrAtY [1]));
};};return _egcb ;};func (_ecfc *GenericRegion )readGBAtPixels (_cecd int )error {const _cdg ="\u0072\u0065\u0061\u0064\u0047\u0042\u0041\u0074\u0050i\u0078\u0065\u006c\u0073";_ecfc .GBAtX =make ([]int8 ,_cecd );_ecfc .GBAtY =make ([]int8 ,_cecd );for _dea :=0;
_dea < _cecd ;_dea ++{_ababd ,_agf :=_ecfc ._fge .ReadByte ();if _agf !=nil {return _af .Wrapf (_agf ,_cdg ,"\u0058\u0020\u0061t\u0020\u0069\u003a\u0020\u0027\u0025\u0064\u0027",_dea );};_ecfc .GBAtX [_dea ]=int8 (_ababd );_ababd ,_agf =_ecfc ._fge .ReadByte ();
if _agf !=nil {return _af .Wrapf (_agf ,_cdg ,"\u0059\u0020\u0061t\u0020\u0069\u003a\u0020\u0027\u0025\u0064\u0027",_dea );};_ecfc .GBAtY [_dea ]=int8 (_ababd );};return nil ;};func (_dfeee *SymbolDictionary )String ()string {_cfab :=&_cf .Builder {};_cfab .WriteString ("\n\u005b\u0053\u0059\u004dBO\u004c-\u0044\u0049\u0043\u0054\u0049O\u004e\u0041\u0052\u0059\u005d\u000a");
_cfab .WriteString (_a .Sprintf ("\u0009-\u0020S\u0064\u0072\u0054\u0065\u006dp\u006c\u0061t\u0065\u0020\u0025\u0076\u000a",_dfeee .SdrTemplate ));_cfab .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u0053\u0064\u0054\u0065\u006d\u0070\u006c\u0061\u0074e\u0020\u0025\u0076\u000a",_dfeee .SdTemplate ));
_cfab .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u0069\u0073\u0043\u006f\u0064\u0069\u006eg\u0043\u006f\u006e\u0074\u0065\u0078\u0074R\u0065\u0074\u0061\u0069\u006e\u0065\u0064\u0020\u0025\u0076\u000a",_dfeee ._cffe ));_cfab .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u0069\u0073\u0043\u006f\u0064\u0069\u006e\u0067C\u006f\u006e\u0074\u0065\u0078\u0074\u0055\u0073\u0065\u0064 \u0025\u0076\u000a",_dfeee ._efde ));
_cfab .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u0053\u0064\u0048u\u0066\u0066\u0041\u0067\u0067\u0049\u006e\u0073\u0074\u0061\u006e\u0063\u0065S\u0065\u006c\u0065\u0063\u0074\u0069\u006fn\u0020\u0025\u0076\u000a",_dfeee .SdHuffAggInstanceSelection ));
_cfab .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u0053d\u0048\u0075\u0066\u0066\u0042\u004d\u0053\u0069\u007a\u0065S\u0065l\u0065\u0063\u0074\u0069\u006f\u006e\u0020%\u0076\u000a",_dfeee .SdHuffBMSizeSelection ));_cfab .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u0053\u0064\u0048u\u0066\u0066\u0044\u0065\u0063\u006f\u0064\u0065\u0057\u0069\u0064\u0074\u0068S\u0065\u006c\u0065\u0063\u0074\u0069\u006fn\u0020\u0025\u0076\u000a",_dfeee .SdHuffDecodeWidthSelection ));
_cfab .WriteString (_a .Sprintf ("\u0009\u002d\u0020Sd\u0048\u0075\u0066\u0066\u0044\u0065\u0063\u006f\u0064e\u0048e\u0069g\u0068t\u0053\u0065\u006c\u0065\u0063\u0074\u0069\u006f\u006e\u0020\u0025\u0076\u000a",_dfeee .SdHuffDecodeHeightSelection ));_cfab .WriteString (_a .Sprintf ("\u0009\u002d\u0020U\u0073\u0065\u0052\u0065f\u0069\u006e\u0065\u006d\u0065\u006e\u0074A\u0067\u0067\u0072\u0065\u0067\u0061\u0074\u0069\u006f\u006e\u0020\u0025\u0076\u000a",_dfeee .UseRefinementAggregation ));
_cfab .WriteString (_a .Sprintf ("\u0009\u002d\u0020is\u0048\u0075\u0066\u0066\u006d\u0061\u006e\u0045\u006e\u0063\u006f\u0064\u0065\u0064\u0020\u0025\u0076\u000a",_dfeee .IsHuffmanEncoded ));_cfab .WriteString (_a .Sprintf ("\u0009\u002d\u0020S\u0064\u0041\u0054\u0058\u0020\u0025\u0076\u000a",_dfeee .SdATX ));
_cfab .WriteString (_a .Sprintf ("\u0009\u002d\u0020S\u0064\u0041\u0054\u0059\u0020\u0025\u0076\u000a",_dfeee .SdATY ));_cfab .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u0053\u0064\u0072\u0041\u0054\u0058\u0020\u0025\u0076\u000a",_dfeee .SdrATX ));
_cfab .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u0053\u0064\u0072\u0041\u0054\u0059\u0020\u0025\u0076\u000a",_dfeee .SdrATY ));_cfab .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u004ff\u0045\u0078\u0070\u006f\u0072\u0074\u0065d\u0053\u0079\u006d\u0062\u006f\u006c\u0073\u0020\u0025\u0076\u000a",_dfeee .NumberOfExportedSymbols ));
_cfab .WriteString (_a .Sprintf ("\u0009-\u0020\u004e\u0075\u006db\u0065\u0072\u004f\u0066\u004ee\u0077S\u0079m\u0062\u006f\u006c\u0073\u0020\u0025\u0076\n",_dfeee .NumberOfNewSymbols ));_cfab .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u004ff\u0049\u006d\u0070\u006f\u0072\u0074\u0065d\u0053\u0079\u006d\u0062\u006f\u006c\u0073\u0020\u0025\u0076\u000a",_dfeee ._bdea ));
_cfab .WriteString (_a .Sprintf ("\u0009\u002d \u006e\u0075\u006d\u0062\u0065\u0072\u004f\u0066\u0044\u0065\u0063\u006f\u0064\u0065\u0064\u0053\u0079\u006d\u0062\u006f\u006c\u0073 %\u0076\u000a",_dfeee ._dddb ));return _cfab .String ();};func (_cdfb *HalftoneRegion )grayScaleDecoding (_ebbe int )([][]int ,error ){var (_cccg []int8 ;
_gcfc []int8 ;);if !_cdfb .IsMMREncoded {_cccg =make ([]int8 ,4);_gcfc =make ([]int8 ,4);if _cdfb .HTemplate <=1{_cccg [0]=3;}else if _cdfb .HTemplate >=2{_cccg [0]=2;};_gcfc [0]=-1;_cccg [1]=-3;_gcfc [1]=-1;_cccg [2]=2;_gcfc [2]=-2;_cccg [3]=-2;_gcfc [3]=-2;
};_fef :=make ([]*_cfb .Bitmap ,_ebbe );_cbaa :=NewGenericRegion (_cdfb ._dabd );_cbaa .setParametersMMR (_cdfb .IsMMREncoded ,_cdfb .DataOffset ,_cdfb .DataLength ,_cdfb .HGridHeight ,_cdfb .HGridWidth ,_cdfb .HTemplate ,false ,_cdfb .HSkipEnabled ,_cccg ,_gcfc );
_bggd :=_ebbe -1;var _bccd error ;_fef [_bggd ],_bccd =_cbaa .GetRegionBitmap ();if _bccd !=nil {return nil ,_bccd ;};for _bggd > 0{_bggd --;_cbaa .Bitmap =nil ;_fef [_bggd ],_bccd =_cbaa .GetRegionBitmap ();if _bccd !=nil {return nil ,_bccd ;};if _bccd =_cdfb .combineGrayscalePlanes (_fef ,_bggd );
_bccd !=nil {return nil ,_bccd ;};};return _cdfb .computeGrayScalePlanes (_fef ,_ebbe );};type OrganizationType uint8 ;var (_ Regioner =&TextRegion {};_ Segmenter =&TextRegion {};);func (_efaf *TextRegion )Init (header *Header ,r *_cfg .Reader )error {_efaf .Header =header ;
_efaf ._gabc =r ;_efaf .RegionInfo =NewRegionSegment (_efaf ._gabc );return _efaf .parseHeader ();};func (_ffgfd *HalftoneRegion )shiftAndFill (_aafe int )int {_aafe >>=8;if _aafe < 0{_fecb :=int (_c .Log (float64 (_fbfa (_aafe )))/_c .Log (2));_bfcf :=31-_fecb ;
for _ffee :=1;_ffee < _bfcf ;_ffee ++{_aafe |=1<<uint (31-_ffee );};};return _aafe ;};type Type int ;func (_adbe *TextRegion )readHuffmanFlags ()error {var (_eceef int ;_cbff uint64 ;_bfbe error ;);_ ,_bfbe =_adbe ._gabc .ReadBit ();if _bfbe !=nil {return _bfbe ;
};_eceef ,_bfbe =_adbe ._gabc .ReadBit ();if _bfbe !=nil {return _bfbe ;};_adbe .SbHuffRSize =int8 (_eceef );_cbff ,_bfbe =_adbe ._gabc .ReadBits (2);if _bfbe !=nil {return _bfbe ;};_adbe .SbHuffRDY =int8 (_cbff )&0xf;_cbff ,_bfbe =_adbe ._gabc .ReadBits (2);
if _bfbe !=nil {return _bfbe ;};_adbe .SbHuffRDX =int8 (_cbff )&0xf;_cbff ,_bfbe =_adbe ._gabc .ReadBits (2);if _bfbe !=nil {return _bfbe ;};_adbe .SbHuffRDHeight =int8 (_cbff )&0xf;_cbff ,_bfbe =_adbe ._gabc .ReadBits (2);if _bfbe !=nil {return _bfbe ;
};_adbe .SbHuffRDWidth =int8 (_cbff )&0xf;_cbff ,_bfbe =_adbe ._gabc .ReadBits (2);if _bfbe !=nil {return _bfbe ;};_adbe .SbHuffDT =int8 (_cbff )&0xf;_cbff ,_bfbe =_adbe ._gabc .ReadBits (2);if _bfbe !=nil {return _bfbe ;};_adbe .SbHuffDS =int8 (_cbff )&0xf;
_cbff ,_bfbe =_adbe ._gabc .ReadBits (2);if _bfbe !=nil {return _bfbe ;};_adbe .SbHuffFS =int8 (_cbff )&0xf;return nil ;};func (_cegc *SymbolDictionary )readRefinementAtPixels (_abgd int )error {_cegc .SdrATX =make ([]int8 ,_abgd );_cegc .SdrATY =make ([]int8 ,_abgd );
var (_fcgf byte ;_cgff error ;);for _cgc :=0;_cgc < _abgd ;_cgc ++{_fcgf ,_cgff =_cegc ._cdbb .ReadByte ();if _cgff !=nil {return _cgff ;};_cegc .SdrATX [_cgc ]=int8 (_fcgf );_fcgf ,_cgff =_cegc ._cdbb .ReadByte ();if _cgff !=nil {return _cgff ;};_cegc .SdrATY [_cgc ]=int8 (_fcgf );
};return nil ;};func (_agge *PageInformationSegment )readResolution ()error {_cdecb ,_ebec :=_agge ._dgbg .ReadBits (32);if _ebec !=nil {return _ebec ;};_agge .ResolutionX =int (_cdecb &_c .MaxInt32 );_cdecb ,_ebec =_agge ._dgbg .ReadBits (32);if _ebec !=nil {return _ebec ;
};_agge .ResolutionY =int (_cdecb &_c .MaxInt32 );return nil ;};func (_edce *Header )subInputReader ()(*_cfg .Reader ,error ){_bgec :=int (_edce .SegmentDataLength );if _edce .SegmentDataLength ==_c .MaxInt32 {_bgec =-1;};return _edce .Reader .NewPartialReader (int (_edce .SegmentDataStartOffset ),_bgec ,false );
};func (_dgde *GenericRegion )decodeLine (_dab ,_cgb ,_bddd int )error {const _afa ="\u0064\u0065\u0063\u006f\u0064\u0065\u004c\u0069\u006e\u0065";_aeb :=_dgde .Bitmap .GetByteIndex (0,_dab );_dgdd :=_aeb -_dgde .Bitmap .RowStride ;switch _dgde .GBTemplate {case 0:if !_dgde .UseExtTemplates {return _dgde .decodeTemplate0a (_dab ,_cgb ,_bddd ,_aeb ,_dgdd );
};return _dgde .decodeTemplate0b (_dab ,_cgb ,_bddd ,_aeb ,_dgdd );case 1:return _dgde .decodeTemplate1 (_dab ,_cgb ,_bddd ,_aeb ,_dgdd );case 2:return _dgde .decodeTemplate2 (_dab ,_cgb ,_bddd ,_aeb ,_dgdd );case 3:return _dgde .decodeTemplate3 (_dab ,_cgb ,_bddd ,_aeb ,_dgdd );
};return _af .Errorf (_afa ,"\u0069\u006e\u0076a\u006c\u0069\u0064\u0020G\u0042\u0054\u0065\u006d\u0070\u006c\u0061t\u0065\u0020\u0070\u0072\u006f\u0076\u0069\u0064\u0065\u0064\u003a\u0020\u0025\u0064",_dgde .GBTemplate );};func (_acgc *TextRegion )GetRegionInfo ()*RegionSegment {return _acgc .RegionInfo };
const (ORandom OrganizationType =iota ;OSequential ;);func (_gcgg *PageInformationSegment )readDefaultPixelValue ()error {_ccad ,_cedd :=_gcgg ._dgbg .ReadBit ();if _cedd !=nil {return _cedd ;};_gcgg .DefaultPixelValue =uint8 (_ccad &0xf);return nil ;};
func (_bde *GenericRefinementRegion )parseHeader ()(_fab error ){_ad .Log .Trace ("\u005b\u0047\u0045\u004e\u0045\u0052\u0049\u0043\u002d\u0052\u0045\u0046\u002d\u0052\u0045\u0047\u0049\u004f\u004e\u005d\u0020\u0070\u0061\u0072s\u0069\u006e\u0067\u0020\u0048e\u0061\u0064e\u0072\u002e\u002e\u002e");
_ffd :=_b .Now ();defer func (){if _fab ==nil {_ad .Log .Trace ("\u005b\u0047\u0045\u004e\u0045\u0052\u0049\u0043\u002d\u0052\u0045\u0046\u002d\u0052\u0045G\u0049\u004f\u004e\u005d\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020h\u0065\u0061\u0064\u0065\u0072\u0020\u0066\u0069\u006e\u0069\u0073\u0068id\u0020\u0069\u006e\u003a\u0020\u0025\u0064\u0020\u006e\u0073",_b .Since (_ffd ).Nanoseconds ());
}else {_ad .Log .Trace ("\u005b\u0047E\u004e\u0045\u0052\u0049\u0043\u002d\u0052\u0045\u0046\u002d\u0052\u0045\u0047\u0049\u004f\u004e\u005d\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0061\u0064\u0065\u0072\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u003a\u0020\u0025\u0073",_fab );
};}();if _fab =_bde .RegionInfo .parseHeader ();_fab !=nil {return _fab ;};_ ,_fab =_bde ._ag .ReadBits (6);if _fab !=nil {return _fab ;};_bde .IsTPGROn ,_fab =_bde ._ag .ReadBool ();if _fab !=nil {return _fab ;};var _fagg int ;_fagg ,_fab =_bde ._ag .ReadBit ();
if _fab !=nil {return _fab ;};_bde .TemplateID =int8 (_fagg );switch _bde .TemplateID {case 0:_bde .Template =_bde ._gf ;if _fab =_bde .readAtPixels ();_fab !=nil {return _fab ;};case 1:_bde .Template =_bde ._fca ;};return nil ;};func (_bbff *Header )writeReferredToCount (_fbfb _cfg .BinaryWriter )(_cage int ,_fagad error ){const _gbgea ="w\u0072i\u0074\u0065\u0052\u0065\u0066\u0065\u0072\u0072e\u0064\u0054\u006f\u0043ou\u006e\u0074";
_bbff .RTSNumbers =make ([]int ,len (_bbff .RTSegments ));for _cdga ,_ced :=range _bbff .RTSegments {_bbff .RTSNumbers [_cdga ]=int (_ced .SegmentNumber );};if len (_bbff .RTSNumbers )<=4{var _eecd byte ;if len (_bbff .RetainBits )>=1{_eecd =_bbff .RetainBits [0];
};_eecd |=byte (len (_bbff .RTSNumbers ))<<5;if _fagad =_fbfb .WriteByte (_eecd );_fagad !=nil {return 0,_af .Wrap (_fagad ,_gbgea ,"\u0073\u0068\u006fr\u0074\u0020\u0066\u006f\u0072\u006d\u0061\u0074");};return 1,nil ;};_befdc :=uint32 (len (_bbff .RTSNumbers ));
_bfad :=make ([]byte ,4+_d .Ceil (len (_bbff .RTSNumbers )+1,8));_befdc |=0x7<<29;_gdd .BigEndian .PutUint32 (_bfad ,_befdc );copy (_bfad [1:],_bbff .RetainBits );_cage ,_fagad =_fbfb .Write (_bfad );if _fagad !=nil {return 0,_af .Wrap (_fagad ,_gbgea ,"l\u006f\u006e\u0067\u0020\u0066\u006f\u0072\u006d\u0061\u0074");
};return _cage ,nil ;};func (_fdbg *TableSegment )Init (h *Header ,r *_cfg .Reader )error {_fdbg ._ffag =r ;return _fdbg .parseHeader ();};type Segmenter interface{Init (_egab *Header ,_bgfg *_cfg .Reader )error ;};func (_gggea *TextRegion )readAmountOfSymbolInstances ()error {_fadf ,_cfeaf :=_gggea ._gabc .ReadBits (32);
if _cfeaf !=nil {return _cfeaf ;};_gggea .NumberOfSymbolInstances =uint32 (_fadf &_c .MaxUint32 );_gaee :=_gggea .RegionInfo .BitmapWidth *_gggea .RegionInfo .BitmapHeight ;if _gaee < _gggea .NumberOfSymbolInstances {_ad .Log .Debug ("\u004c\u0069\u006d\u0069t\u0069\u006e\u0067\u0020t\u0068\u0065\u0020n\u0075\u006d\u0062\u0065\u0072\u0020o\u0066\u0020d\u0065\u0063\u006f\u0064e\u0064\u0020\u0073\u0079m\u0062\u006f\u006c\u0020\u0069n\u0073\u0074\u0061\u006e\u0063\u0065\u0073 \u0074\u006f\u0020\u006f\u006ee\u0020\u0070\u0065\u0072\u0020\u0070\u0069\u0078\u0065l\u0020\u0028\u0020\u0025\u0064\u0020\u0069\u006e\u0073\u0074\u0065\u0061\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0029",_gaee ,_gggea .NumberOfSymbolInstances );
_gggea .NumberOfSymbolInstances =_gaee ;};return nil ;};func (_aacb *SymbolDictionary )Init (h *Header ,r *_cfg .Reader )error {_aacb .Header =h ;_aacb ._cdbb =r ;return _aacb .parseHeader ();};func (_aec *GenericRegion )InitEncode (bm *_cfb .Bitmap ,xLoc ,yLoc ,template int ,duplicateLineRemoval bool )error {const _eaga ="\u0047e\u006e\u0065\u0072\u0069\u0063\u0052\u0065\u0067\u0069\u006f\u006e.\u0049\u006e\u0069\u0074\u0045\u006e\u0063\u006f\u0064\u0065";
if bm ==nil {return _af .Error (_eaga ,"\u0070\u0072\u006f\u0076id\u0065\u0064\u0020\u006e\u0069\u006c\u0020\u0062\u0069\u0074\u006d\u0061\u0070");};if xLoc < 0||yLoc < 0{return _af .Error (_eaga ,"\u0078\u0020\u0061\u006e\u0064\u0020\u0079\u0020\u006c\u006f\u0063\u0061\u0074i\u006f\u006e\u0020\u006d\u0075\u0073t\u0020\u0062\u0065\u0020\u0067\u0072\u0065\u0061\u0074\u0065\u0072\u0020\u0074h\u0061\u006e\u0020\u0030");
};_aec .Bitmap =bm ;_aec .GBTemplate =byte (template );switch _aec .GBTemplate {case 0:_aec .GBAtX =[]int8 {3,-3,2,-2};_aec .GBAtY =[]int8 {-1,-1,-2,-2};case 1:_aec .GBAtX =[]int8 {3};_aec .GBAtY =[]int8 {-1};case 2,3:_aec .GBAtX =[]int8 {2};_aec .GBAtY =[]int8 {-1};
default:return _af .Errorf (_eaga ,"\u0070\u0072o\u0076\u0069\u0064\u0065\u0064 \u0074\u0065\u006d\u0070\u006ca\u0074\u0065\u003a\u0020\u0027\u0025\u0064\u0027\u0020\u006e\u006f\u0074\u0020\u0069\u006e\u0020\u0076\u0061\u006c\u0069\u0064\u0020\u0072\u0061\u006e\u0067\u0065\u0020\u007b\u0030\u002c\u0031\u002c\u0032\u002c\u0033\u007d",template );
};_aec .RegionSegment =&RegionSegment {BitmapHeight :uint32 (bm .Height ),BitmapWidth :uint32 (bm .Width ),XLocation :uint32 (xLoc ),YLocation :uint32 (yLoc )};_aec .IsTPGDon =duplicateLineRemoval ;return nil ;};func (_cefd *PatternDictionary )readIsMMREncoded ()error {_cga ,_dfbg :=_cefd ._caefb .ReadBit ();
if _dfbg !=nil {return _dfbg ;};if _cga !=0{_cefd .IsMMREncoded =true ;};return nil ;};func NewGenericRegion (r *_cfg .Reader )*GenericRegion {return &GenericRegion {RegionSegment :NewRegionSegment (r ),_fge :r };};func (_ace *GenericRegion )GetRegionInfo ()*RegionSegment {return _ace .RegionSegment };
func (_bcec *PageInformationSegment )readCombinationOperatorOverrideAllowed ()error {_dce ,_gbbf :=_bcec ._dgbg .ReadBit ();if _gbbf !=nil {return _gbbf ;};if _dce ==1{_bcec ._fceb =true ;};return nil ;};func (_dead *TextRegion )readUseRefinement ()error {if !_dead .UseRefinement ||_dead .SbrTemplate !=0{return nil ;
};var (_dedc byte ;_gbaf error ;);_dead .SbrATX =make ([]int8 ,2);_dead .SbrATY =make ([]int8 ,2);_dedc ,_gbaf =_dead ._gabc .ReadByte ();if _gbaf !=nil {return _gbaf ;};_dead .SbrATX [0]=int8 (_dedc );_dedc ,_gbaf =_dead ._gabc .ReadByte ();if _gbaf !=nil {return _gbaf ;
};_dead .SbrATY [0]=int8 (_dedc );_dedc ,_gbaf =_dead ._gabc .ReadByte ();if _gbaf !=nil {return _gbaf ;};_dead .SbrATX [1]=int8 (_dedc );_dedc ,_gbaf =_dead ._gabc .ReadByte ();if _gbaf !=nil {return _gbaf ;};_dead .SbrATY [1]=int8 (_dedc );return nil ;
};func (_gbadf *TextRegion )decodeRdy ()(int64 ,error ){const _bffd ="\u0064e\u0063\u006f\u0064\u0065\u0052\u0064y";if _gbadf .IsHuffmanEncoded {if _gbadf .SbHuffRDY ==3{if _gbadf ._bgca ==nil {var (_abe int ;_dcgg error ;);if _gbadf .SbHuffFS ==3{_abe ++;
};if _gbadf .SbHuffDS ==3{_abe ++;};if _gbadf .SbHuffDT ==3{_abe ++;};if _gbadf .SbHuffRDWidth ==3{_abe ++;};if _gbadf .SbHuffRDHeight ==3{_abe ++;};if _gbadf .SbHuffRDX ==3{_abe ++;};_gbadf ._bgca ,_dcgg =_gbadf .getUserTable (_abe );if _dcgg !=nil {return 0,_af .Wrap (_dcgg ,_bffd ,"");
};};return _gbadf ._bgca .Decode (_gbadf ._gabc );};_befbb ,_ffea :=_e .GetStandardTable (14+int (_gbadf .SbHuffRDY ));if _ffea !=nil {return 0,_ffea ;};return _befbb .Decode (_gbadf ._gabc );};_fgfc ,_adga :=_gbadf ._cfcgd .DecodeInt (_gbadf ._dgca );
if _adga !=nil {return 0,_af .Wrap (_adga ,_bffd ,"");};return int64 (_fgfc ),nil ;};func (_dbff *SymbolDictionary )encodeNumSyms (_gfb _cfg .BinaryWriter )(_gbef int ,_ceaa error ){const _fcga ="\u0065\u006e\u0063\u006f\u0064\u0065\u004e\u0075\u006d\u0053\u0079\u006d\u0073";
_eaf :=make ([]byte ,4);_gdd .BigEndian .PutUint32 (_eaf ,_dbff .NumberOfExportedSymbols );if _gbef ,_ceaa =_gfb .Write (_eaf );_ceaa !=nil {return _gbef ,_af .Wrap (_ceaa ,_fcga ,"\u0065\u0078p\u006f\u0072\u0074e\u0064\u0020\u0073\u0079\u006d\u0062\u006f\u006c\u0073");
};_gdd .BigEndian .PutUint32 (_eaf ,_dbff .NumberOfNewSymbols );_gfac ,_ceaa :=_gfb .Write (_eaf );if _ceaa !=nil {return _gbef ,_af .Wrap (_ceaa ,_fcga ,"n\u0065\u0077\u0020\u0073\u0079\u006d\u0062\u006f\u006c\u0073");};return _gbef +_gfac ,nil ;};func (_egeb *HalftoneRegion )checkInput ()error {if _egeb .IsMMREncoded {if _egeb .HTemplate !=0{_ad .Log .Debug ("\u0048\u0054\u0065\u006d\u0070l\u0061\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0073\u0068\u006f\u0075l\u0064\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0074\u0068\u0065\u0020\u0076\u0061\u006c\u0075\u0065\u0020\u0030",_egeb .HTemplate );
};if _egeb .HSkipEnabled {_ad .Log .Debug ("\u0048\u0053\u006b\u0069\u0070\u0045\u006e\u0061\u0062\u006c\u0065\u0064\u0020\u0030\u0020\u0025\u0076\u0020(\u0073\u0068\u006f\u0075\u006c\u0064\u0020c\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0074\u0068\u0065\u0020v\u0061\u006c\u0075\u0065\u0020\u0066\u0061\u006c\u0073\u0065\u0029",_egeb .HSkipEnabled );
};};return nil ;};func (_dfcf *PatternDictionary )extractPatterns (_ecgad *_cfb .Bitmap )error {var _bfcg int ;_fabc :=make ([]*_cfb .Bitmap ,_dfcf .GrayMax +1);for _bfcg <=int (_dfcf .GrayMax ){_fcf :=int (_dfcf .HdpWidth )*_bfcg ;_dbfeg :=_f .Rect (_fcf ,0,_fcf +int (_dfcf .HdpWidth ),int (_dfcf .HdpHeight ));
_bcea ,_defg :=_cfb .Extract (_dbfeg ,_ecgad );if _defg !=nil {return _defg ;};_fabc [_bfcg ]=_bcea ;_bfcg ++;};_dfcf .Patterns =_fabc ;return nil ;};var _ _e .BasicTabler =&TableSegment {};func (_cgbf *HalftoneRegion )parseHeader ()error {if _cea :=_cgbf .RegionSegment .parseHeader ();
_cea !=nil {return _cea ;};_ega ,_edae :=_cgbf ._dabd .ReadBit ();if _edae !=nil {return _edae ;};_cgbf .HDefaultPixel =int8 (_ega );_ccff ,_edae :=_cgbf ._dabd .ReadBits (3);if _edae !=nil {return _edae ;};_cgbf .CombinationOperator =_cfb .CombinationOperator (_ccff &0xf);
_ega ,_edae =_cgbf ._dabd .ReadBit ();if _edae !=nil {return _edae ;};if _ega ==1{_cgbf .HSkipEnabled =true ;};_ccff ,_edae =_cgbf ._dabd .ReadBits (2);if _edae !=nil {return _edae ;};_cgbf .HTemplate =byte (_ccff &0xf);_ega ,_edae =_cgbf ._dabd .ReadBit ();
if _edae !=nil {return _edae ;};if _ega ==1{_cgbf .IsMMREncoded =true ;};_ccff ,_edae =_cgbf ._dabd .ReadBits (32);if _edae !=nil {return _edae ;};_cgbf .HGridWidth =uint32 (_ccff &_c .MaxUint32 );_ccff ,_edae =_cgbf ._dabd .ReadBits (32);if _edae !=nil {return _edae ;
};_cgbf .HGridHeight =uint32 (_ccff &_c .MaxUint32 );_ccff ,_edae =_cgbf ._dabd .ReadBits (32);if _edae !=nil {return _edae ;};_cgbf .HGridX =int32 (_ccff &_c .MaxInt32 );_ccff ,_edae =_cgbf ._dabd .ReadBits (32);if _edae !=nil {return _edae ;};_cgbf .HGridY =int32 (_ccff &_c .MaxInt32 );
_ccff ,_edae =_cgbf ._dabd .ReadBits (16);if _edae !=nil {return _edae ;};_cgbf .HRegionX =uint16 (_ccff &_c .MaxUint16 );_ccff ,_edae =_cgbf ._dabd .ReadBits (16);if _edae !=nil {return _edae ;};_cgbf .HRegionY =uint16 (_ccff &_c .MaxUint16 );if _edae =_cgbf .computeSegmentDataStructure ();
_edae !=nil {return _edae ;};return _cgbf .checkInput ();};func (_gbga *PageInformationSegment )readContainsRefinement ()error {_bbg ,_gff :=_gbga ._dgbg .ReadBit ();if _gff !=nil {return _gff ;};if _bbg ==1{_gbga ._afe =true ;};return nil ;};func (_gfagg *TableSegment )HtPS ()int32 {return _gfagg ._gbff };
func _dcggg (_ffdc *_cfg .Reader ,_cgdb *Header )*TextRegion {_dcbfcd :=&TextRegion {_gabc :_ffdc ,Header :_cgdb ,RegionInfo :NewRegionSegment (_ffdc )};return _dcbfcd ;};func (_cbed *PageInformationSegment )readWidthAndHeight ()error {_gafc ,_egbe :=_cbed ._dgbg .ReadBits (32);
if _egbe !=nil {return _egbe ;};_cbed .PageBMWidth =int (_gafc &_c .MaxInt32 );_gafc ,_egbe =_cbed ._dgbg .ReadBits (32);if _egbe !=nil {return _egbe ;};_cbed .PageBMHeight =int (_gafc &_c .MaxInt32 );return nil ;};func (_abbb *PatternDictionary )readTemplate ()error {_gbbfc ,_fabe :=_abbb ._caefb .ReadBits (2);
if _fabe !=nil {return _fabe ;};_abbb .HDTemplate =byte (_gbbfc );return nil ;};func (_bddb *PageInformationSegment )parseHeader ()(_gbgde error ){_ad .Log .Trace ("\u005b\u0050\u0061\u0067\u0065I\u006e\u0066\u006f\u0072\u006d\u0061\u0074\u0069\u006f\u006e\u0053\u0065\u0067m\u0065\u006e\u0074\u005d\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0048\u0065\u0061\u0064\u0065\u0072\u002e\u002e\u002e");
defer func (){var _ggee ="[\u0050\u0061\u0067\u0065\u0049\u006e\u0066\u006f\u0072m\u0061\u0074\u0069\u006f\u006e\u0053\u0065gm\u0065\u006e\u0074\u005d \u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0048\u0065ad\u0065\u0072 \u0046\u0069\u006e\u0069\u0073\u0068\u0065\u0064";
if _gbgde !=nil {_ggee +="\u0020\u0077\u0069t\u0068\u0020\u0065\u0072\u0072\u006f\u0072\u0020"+_gbgde .Error ();}else {_ggee +="\u0020\u0073\u0075\u0063\u0063\u0065\u0073\u0073\u0066\u0075\u006c\u006c\u0079";};_ad .Log .Trace (_ggee );}();if _gbgde =_bddb .readWidthAndHeight ();
_gbgde !=nil {return _gbgde ;};if _gbgde =_bddb .readResolution ();_gbgde !=nil {return _gbgde ;};_ ,_gbgde =_bddb ._dgbg .ReadBit ();if _gbgde !=nil {return _gbgde ;};if _gbgde =_bddb .readCombinationOperatorOverrideAllowed ();_gbgde !=nil {return _gbgde ;
};if _gbgde =_bddb .readRequiresAuxiliaryBuffer ();_gbgde !=nil {return _gbgde ;};if _gbgde =_bddb .readCombinationOperator ();_gbgde !=nil {return _gbgde ;};if _gbgde =_bddb .readDefaultPixelValue ();_gbgde !=nil {return _gbgde ;};if _gbgde =_bddb .readContainsRefinement ();
_gbgde !=nil {return _gbgde ;};if _gbgde =_bddb .readIsLossless ();_gbgde !=nil {return _gbgde ;};if _gbgde =_bddb .readIsStriped ();_gbgde !=nil {return _gbgde ;};if _gbgde =_bddb .readMaxStripeSize ();_gbgde !=nil {return _gbgde ;};if _gbgde =_bddb .checkInput ();
_gbgde !=nil {return _gbgde ;};_ad .Log .Trace ("\u0025\u0073",_bddb );return nil ;};func (_bfdf *GenericRegion )overrideAtTemplate0b (_gbcc ,_gfg ,_agbe ,_dgf ,_adc ,_aded int )int {if _bfdf .GBAtOverride [0]{_gbcc &=0xFFFD;if _bfdf .GBAtY [0]==0&&_bfdf .GBAtX [0]>=-int8 (_adc ){_gbcc |=(_dgf >>uint (int8 (_aded )-_bfdf .GBAtX [0]&0x1))<<1;
}else {_gbcc |=int (_bfdf .getPixel (_gfg +int (_bfdf .GBAtX [0]),_agbe +int (_bfdf .GBAtY [0])))<<1;};};if _bfdf .GBAtOverride [1]{_gbcc &=0xDFFF;if _bfdf .GBAtY [1]==0&&_bfdf .GBAtX [1]>=-int8 (_adc ){_gbcc |=(_dgf >>uint (int8 (_aded )-_bfdf .GBAtX [1]&0x1))<<13;
}else {_gbcc |=int (_bfdf .getPixel (_gfg +int (_bfdf .GBAtX [1]),_agbe +int (_bfdf .GBAtY [1])))<<13;};};if _bfdf .GBAtOverride [2]{_gbcc &=0xFDFF;if _bfdf .GBAtY [2]==0&&_bfdf .GBAtX [2]>=-int8 (_adc ){_gbcc |=(_dgf >>uint (int8 (_aded )-_bfdf .GBAtX [2]&0x1))<<9;
}else {_gbcc |=int (_bfdf .getPixel (_gfg +int (_bfdf .GBAtX [2]),_agbe +int (_bfdf .GBAtY [2])))<<9;};};if _bfdf .GBAtOverride [3]{_gbcc &=0xBFFF;if _bfdf .GBAtY [3]==0&&_bfdf .GBAtX [3]>=-int8 (_adc ){_gbcc |=(_dgf >>uint (int8 (_aded )-_bfdf .GBAtX [3]&0x1))<<14;
}else {_gbcc |=int (_bfdf .getPixel (_gfg +int (_bfdf .GBAtX [3]),_agbe +int (_bfdf .GBAtY [3])))<<14;};};if _bfdf .GBAtOverride [4]{_gbcc &=0xEFFF;if _bfdf .GBAtY [4]==0&&_bfdf .GBAtX [4]>=-int8 (_adc ){_gbcc |=(_dgf >>uint (int8 (_aded )-_bfdf .GBAtX [4]&0x1))<<12;
}else {_gbcc |=int (_bfdf .getPixel (_gfg +int (_bfdf .GBAtX [4]),_agbe +int (_bfdf .GBAtY [4])))<<12;};};if _bfdf .GBAtOverride [5]{_gbcc &=0xFFDF;if _bfdf .GBAtY [5]==0&&_bfdf .GBAtX [5]>=-int8 (_adc ){_gbcc |=(_dgf >>uint (int8 (_aded )-_bfdf .GBAtX [5]&0x1))<<5;
}else {_gbcc |=int (_bfdf .getPixel (_gfg +int (_bfdf .GBAtX [5]),_agbe +int (_bfdf .GBAtY [5])))<<5;};};if _bfdf .GBAtOverride [6]{_gbcc &=0xFFFB;if _bfdf .GBAtY [6]==0&&_bfdf .GBAtX [6]>=-int8 (_adc ){_gbcc |=(_dgf >>uint (int8 (_aded )-_bfdf .GBAtX [6]&0x1))<<2;
}else {_gbcc |=int (_bfdf .getPixel (_gfg +int (_bfdf .GBAtX [6]),_agbe +int (_bfdf .GBAtY [6])))<<2;};};if _bfdf .GBAtOverride [7]{_gbcc &=0xFFF7;if _bfdf .GBAtY [7]==0&&_bfdf .GBAtX [7]>=-int8 (_adc ){_gbcc |=(_dgf >>uint (int8 (_aded )-_bfdf .GBAtX [7]&0x1))<<3;
}else {_gbcc |=int (_bfdf .getPixel (_gfg +int (_bfdf .GBAtX [7]),_agbe +int (_bfdf .GBAtY [7])))<<3;};};if _bfdf .GBAtOverride [8]{_gbcc &=0xF7FF;if _bfdf .GBAtY [8]==0&&_bfdf .GBAtX [8]>=-int8 (_adc ){_gbcc |=(_dgf >>uint (int8 (_aded )-_bfdf .GBAtX [8]&0x1))<<11;
}else {_gbcc |=int (_bfdf .getPixel (_gfg +int (_bfdf .GBAtX [8]),_agbe +int (_bfdf .GBAtY [8])))<<11;};};if _bfdf .GBAtOverride [9]{_gbcc &=0xFFEF;if _bfdf .GBAtY [9]==0&&_bfdf .GBAtX [9]>=-int8 (_adc ){_gbcc |=(_dgf >>uint (int8 (_aded )-_bfdf .GBAtX [9]&0x1))<<4;
}else {_gbcc |=int (_bfdf .getPixel (_gfg +int (_bfdf .GBAtX [9]),_agbe +int (_bfdf .GBAtY [9])))<<4;};};if _bfdf .GBAtOverride [10]{_gbcc &=0x7FFF;if _bfdf .GBAtY [10]==0&&_bfdf .GBAtX [10]>=-int8 (_adc ){_gbcc |=(_dgf >>uint (int8 (_aded )-_bfdf .GBAtX [10]&0x1))<<15;
}else {_gbcc |=int (_bfdf .getPixel (_gfg +int (_bfdf .GBAtX [10]),_agbe +int (_bfdf .GBAtY [10])))<<15;};};if _bfdf .GBAtOverride [11]{_gbcc &=0xFDFF;if _bfdf .GBAtY [11]==0&&_bfdf .GBAtX [11]>=-int8 (_adc ){_gbcc |=(_dgf >>uint (int8 (_aded )-_bfdf .GBAtX [11]&0x1))<<10;
}else {_gbcc |=int (_bfdf .getPixel (_gfg +int (_bfdf .GBAtX [11]),_agbe +int (_bfdf .GBAtY [11])))<<10;};};return _gbcc ;};func (_fbca *Header )writeSegmentPageAssociation (_adeg _cfg .BinaryWriter )(_cdefb int ,_fccg error ){const _acdde ="w\u0072\u0069\u0074\u0065\u0053\u0065g\u006d\u0065\u006e\u0074\u0050\u0061\u0067\u0065\u0041s\u0073\u006f\u0063i\u0061t\u0069\u006f\u006e";
if _fbca .pageSize ()!=4{if _fccg =_adeg .WriteByte (byte (_fbca .PageAssociation ));_fccg !=nil {return 0,_af .Wrap (_fccg ,_acdde ,"\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065\u0020\u0021\u003d\u0020\u0034");};return 1,nil ;};_cdaf :=make ([]byte ,4);
_gdd .BigEndian .PutUint32 (_cdaf ,uint32 (_fbca .PageAssociation ));if _cdefb ,_fccg =_adeg .Write (_cdaf );_fccg !=nil {return 0,_af .Wrap (_fccg ,_acdde ,"\u0034 \u0062y\u0074\u0065\u0020\u0070\u0061g\u0065\u0020n\u0075\u006d\u0062\u0065\u0072");};return _cdefb ,nil ;
};func (_efbc *GenericRegion )computeSegmentDataStructure ()error {_efbc .DataOffset =_efbc ._fge .AbsolutePosition ();_efbc .DataHeaderLength =_efbc .DataOffset -_efbc .DataHeaderOffset ;_efbc .DataLength =int64 (_efbc ._fge .AbsoluteLength ())-_efbc .DataHeaderLength ;
return nil ;};func (_ggbef *GenericRefinementRegion )updateOverride ()error {if _ggbef .GrAtX ==nil ||_ggbef .GrAtY ==nil {return _ac .New ("\u0041\u0054\u0020\u0070\u0069\u0078\u0065\u006c\u0073\u0020\u006e\u006ft\u0020\u0073\u0065\u0074");};if len (_ggbef .GrAtX )!=len (_ggbef .GrAtY ){return _ac .New ("A\u0054\u0020\u0070\u0069xe\u006c \u0069\u006e\u0063\u006f\u006es\u0069\u0073\u0074\u0065\u006e\u0074");
};_ggbef ._gg =make ([]bool ,len (_ggbef .GrAtX ));switch _ggbef .TemplateID {case 0:if _ggbef .GrAtX [0]!=-1&&_ggbef .GrAtY [0]!=-1{_ggbef ._gg [0]=true ;_ggbef ._db =true ;};if _ggbef .GrAtX [1]!=-1&&_ggbef .GrAtY [1]!=-1{_ggbef ._gg [1]=true ;_ggbef ._db =true ;
};case 1:_ggbef ._db =false ;};return nil ;};type Pager interface{GetSegment (int )(*Header ,error );GetBitmap ()(*_cfb .Bitmap ,error );};func (_eaac *TextRegion )blit (_fbde *_cfb .Bitmap ,_gdac int64 )error {if _eaac .IsTransposed ==0&&(_eaac .ReferenceCorner ==2||_eaac .ReferenceCorner ==3){_eaac ._ebcd +=int64 (_fbde .Width -1);
}else if _eaac .IsTransposed ==1&&(_eaac .ReferenceCorner ==0||_eaac .ReferenceCorner ==2){_eaac ._ebcd +=int64 (_fbde .Height -1);};_fead :=_eaac ._ebcd ;if _eaac .IsTransposed ==1{_fead ,_gdac =_gdac ,_fead ;};switch _eaac .ReferenceCorner {case 0:_gdac -=int64 (_fbde .Height -1);
case 2:_gdac -=int64 (_fbde .Height -1);_fead -=int64 (_fbde .Width -1);case 3:_fead -=int64 (_fbde .Width -1);};_daga :=_cfb .Blit (_fbde ,_eaac .RegionBitmap ,int (_fead ),int (_gdac ),_eaac .CombinationOperator );if _daga !=nil {return _daga ;};if _eaac .IsTransposed ==0&&(_eaac .ReferenceCorner ==0||_eaac .ReferenceCorner ==1){_eaac ._ebcd +=int64 (_fbde .Width -1);
};if _eaac .IsTransposed ==1&&(_eaac .ReferenceCorner ==1||_eaac .ReferenceCorner ==3){_eaac ._ebcd +=int64 (_fbde .Height -1);};return nil ;};func (_gecg *GenericRegion )writeGBAtPixels (_bgdg _cfg .BinaryWriter )(_bcdg int ,_aecd error ){const _fde ="\u0077r\u0069t\u0065\u0047\u0042\u0041\u0074\u0050\u0069\u0078\u0065\u006c\u0073";
if _gecg .UseMMR {return 0,nil ;};_gefdd :=1;if _gecg .GBTemplate ==0{_gefdd =4;}else if _gecg .UseExtTemplates {_gefdd =12;};if len (_gecg .GBAtX )!=_gefdd {return 0,_af .Errorf (_fde ,"\u0067\u0062\u0020\u0061\u0074\u0020\u0070\u0061\u0069\u0072\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020d\u006f\u0065\u0073\u006e\u0027\u0074\u0020m\u0061\u0074\u0063\u0068\u0020\u0074\u006f\u0020\u0047\u0042\u0041t\u0058\u0020\u0073\u006c\u0069\u0063\u0065\u0020\u006c\u0065\u006e");
};if len (_gecg .GBAtY )!=_gefdd {return 0,_af .Errorf (_fde ,"\u0067\u0062\u0020\u0061\u0074\u0020\u0070\u0061\u0069\u0072\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020d\u006f\u0065\u0073\u006e\u0027\u0074\u0020m\u0061\u0074\u0063\u0068\u0020\u0074\u006f\u0020\u0047\u0042\u0041t\u0059\u0020\u0073\u006c\u0069\u0063\u0065\u0020\u006c\u0065\u006e");
};for _afc :=0;_afc < _gefdd ;_afc ++{if _aecd =_bgdg .WriteByte (byte (_gecg .GBAtX [_afc ]));_aecd !=nil {return _bcdg ,_af .Wrap (_aecd ,_fde ,"w\u0072\u0069\u0074\u0065\u0020\u0047\u0042\u0041\u0074\u0058");};_bcdg ++;if _aecd =_bgdg .WriteByte (byte (_gecg .GBAtY [_afc ]));
_aecd !=nil {return _bcdg ,_af .Wrap (_aecd ,_fde ,"w\u0072\u0069\u0074\u0065\u0020\u0047\u0042\u0041\u0074\u0059");};_bcdg ++;};return _bcdg ,nil ;};func (_eadde *SymbolDictionary )getUserTable (_abbg int )(_e .Tabler ,error ){var _cbfcg int ;for _ ,_gaa :=range _eadde .Header .RTSegments {if _gaa .Type ==53{if _cbfcg ==_abbg {_degg ,_fcgg :=_gaa .GetSegmentData ();
if _fcgg !=nil {return nil ,_fcgg ;};_ebbg :=_degg .(_e .BasicTabler );return _e .NewEncodedTable (_ebbg );};_cbfcg ++;};};return nil ,nil ;};func (_ccag *GenericRegion )setParametersWithAt (_dcg bool ,_cfce byte ,_edgf ,_egcdd bool ,_bea ,_adgc []int8 ,_fgf ,_ebf uint32 ,_cadb *_cfd .DecoderStats ,_gcb *_cfd .Decoder ){_ccag .IsMMREncoded =_dcg ;
_ccag .GBTemplate =_cfce ;_ccag .IsTPGDon =_edgf ;_ccag .GBAtX =_bea ;_ccag .GBAtY =_adgc ;_ccag .RegionSegment .BitmapHeight =_ebf ;_ccag .RegionSegment .BitmapWidth =_fgf ;_ccag ._faba =nil ;_ccag .Bitmap =nil ;if _cadb !=nil {_ccag ._dff =_cadb ;};if _gcb !=nil {_ccag ._acbbd =_gcb ;
};_ad .Log .Trace ("\u005b\u0047\u0045\u004e\u0045\u0052\u0049\u0043\u002d\u0052\u0045\u0047\u0049O\u004e\u005d\u0020\u0073\u0065\u0074P\u0061\u0072\u0061\u006d\u0065\u0074\u0065\u0072\u0073\u0020\u0053\u0044\u0041t\u003a\u0020\u0025\u0073",_ccag );};func (_gcecb *TableSegment )StreamReader ()*_cfg .Reader {return _gcecb ._ffag };
func (_ec *EndOfStripe )LineNumber ()int {return _ec ._ee };func (_cfbe *SymbolDictionary )decodeThroughTextRegion (_fbbgg ,_cgfda ,_eeed uint32 )error {if _cfbe ._defgb ==nil {_cfbe ._defgb =_dcggg (_cfbe ._cdbb ,nil );_cfbe ._defgb .setContexts (_cfbe ._cfda ,_cfd .NewStats (512,1),_cfd .NewStats (512,1),_cfd .NewStats (512,1),_cfd .NewStats (512,1),_cfbe ._afef ,_cfd .NewStats (512,1),_cfd .NewStats (512,1),_cfd .NewStats (512,1),_cfd .NewStats (512,1));
};if _efab :=_cfbe .setSymbolsArray ();_efab !=nil {return _efab ;};_cfbe ._defgb .setParameters (_cfbe ._cbgf ,_cfbe .IsHuffmanEncoded ,true ,_fbbgg ,_cgfda ,_eeed ,1,_cfbe ._bdea +_cfbe ._dddb ,0,0,0,1,0,0,0,0,0,0,0,0,0,_cfbe .SdrTemplate ,_cfbe .SdrATX ,_cfbe .SdrATY ,_cfbe ._bceaf ,_cfbe ._ecdb );
return _cfbe .addSymbol (_cfbe ._defgb );};type TableSegment struct{_ffag *_cfg .Reader ;_bdgd int32 ;_gbff int32 ;_cdeda int32 ;_gadec int32 ;_cdfc int32 ;};func (_afdg *GenericRefinementRegion )readAtPixels ()error {_afdg .GrAtX =make ([]int8 ,2);_afdg .GrAtY =make ([]int8 ,2);
_ceb ,_cba :=_afdg ._ag .ReadByte ();if _cba !=nil {return _cba ;};_afdg .GrAtX [0]=int8 (_ceb );_ceb ,_cba =_afdg ._ag .ReadByte ();if _cba !=nil {return _cba ;};_afdg .GrAtY [0]=int8 (_ceb );_ceb ,_cba =_afdg ._ag .ReadByte ();if _cba !=nil {return _cba ;
};_afdg .GrAtX [1]=int8 (_ceb );_ceb ,_cba =_afdg ._ag .ReadByte ();if _cba !=nil {return _cba ;};_afdg .GrAtY [1]=int8 (_ceb );return nil ;};var _ templater =&template1 {};func (_gdgf *PatternDictionary )readGrayMax ()error {_bgee ,_cfdfd :=_gdgf ._caefb .ReadBits (32);
if _cfdfd !=nil {return _cfdfd ;};_gdgf .GrayMax =uint32 (_bgee &_c .MaxUint32 );return nil ;};func (_fabb *SymbolDictionary )addSymbol (_daag Regioner )error {_feegc ,_adf :=_daag .GetRegionBitmap ();if _adf !=nil {return _adf ;};_fabb ._ccfff [_fabb ._dddb ]=_feegc ;
_fabb ._bceaf =append (_fabb ._bceaf ,_feegc );_ad .Log .Trace ("\u005b\u0053YM\u0042\u004f\u004c \u0044\u0049\u0043\u0054ION\u0041RY\u005d\u0020\u0041\u0064\u0064\u0065\u0064 s\u0079\u006d\u0062\u006f\u006c\u003a\u0020%\u0073",_feegc );return nil ;};func (_cded *Header )parse (_dad Documenter ,_ggebc *_cfg .Reader ,_ecab int64 ,_abg OrganizationType )(_gadd error ){const _aeaa ="\u0070\u0061\u0072s\u0065";
_ad .Log .Trace ("\u005b\u0053\u0045\u0047\u004d\u0045\u004e\u0054\u002d\u0048E\u0041\u0044\u0045\u0052\u005d\u005b\u0050A\u0052\u0053\u0045\u005d\u0020\u0042\u0065\u0067\u0069\u006e\u0073");defer func (){if _gadd !=nil {_ad .Log .Trace ("\u005b\u0053\u0045GM\u0045\u004e\u0054\u002d\u0048\u0045\u0041\u0044\u0045R\u005d[\u0050A\u0052S\u0045\u005d\u0020\u0046\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0025\u0076",_gadd );
}else {_ad .Log .Trace ("\u005b\u0053\u0045\u0047\u004d\u0045\u004e\u0054\u002d\u0048\u0045\u0041\u0044\u0045\u0052]\u005bP\u0041\u0052\u0053\u0045\u005d\u0020\u0046\u0069\u006e\u0069\u0073\u0068\u0065\u0064");};}();_ ,_gadd =_ggebc .Seek (_ecab ,_gd .SeekStart );
if _gadd !=nil {return _af .Wrap (_gadd ,_aeaa ,"\u0073\u0065\u0065\u006b\u0020\u0073\u0074\u0061\u0072\u0074");};if _gadd =_cded .readSegmentNumber (_ggebc );_gadd !=nil {return _af .Wrap (_gadd ,_aeaa ,"");};if _gadd =_cded .readHeaderFlags ();_gadd !=nil {return _af .Wrap (_gadd ,_aeaa ,"");
};var _cafa uint64 ;_cafa ,_gadd =_cded .readNumberOfReferredToSegments (_ggebc );if _gadd !=nil {return _af .Wrap (_gadd ,_aeaa ,"");};_cded .RTSNumbers ,_gadd =_cded .readReferredToSegmentNumbers (_ggebc ,int (_cafa ));if _gadd !=nil {return _af .Wrap (_gadd ,_aeaa ,"");
};_gadd =_cded .readSegmentPageAssociation (_dad ,_ggebc ,_cafa ,_cded .RTSNumbers ...);if _gadd !=nil {return _af .Wrap (_gadd ,_aeaa ,"");};if _cded .Type !=TEndOfFile {if _gadd =_cded .readSegmentDataLength (_ggebc );_gadd !=nil {return _af .Wrap (_gadd ,_aeaa ,"");
};};_cded .readDataStartOffset (_ggebc ,_abg );_cded .readHeaderLength (_ggebc ,_ecab );_ad .Log .Trace ("\u0025\u0073",_cded );return nil ;};func (_dfee *Header )writeSegmentNumber (_fbbf _cfg .BinaryWriter )(_bafc int ,_gaddb error ){_ddba :=make ([]byte ,4);
_gdd .BigEndian .PutUint32 (_ddba ,_dfee .SegmentNumber );if _bafc ,_gaddb =_fbbf .Write (_ddba );_gaddb !=nil {return 0,_af .Wrap (_gaddb ,"\u0048e\u0061\u0064\u0065\u0072.\u0077\u0072\u0069\u0074\u0065S\u0065g\u006de\u006e\u0074\u004e\u0075\u006d\u0062\u0065r","");
};return _bafc ,nil ;};type GenericRefinementRegion struct{_gf templater ;_fca templater ;_ag *_cfg .Reader ;_da *Header ;RegionInfo *RegionSegment ;IsTPGROn bool ;TemplateID int8 ;Template templater ;GrAtX []int8 ;GrAtY []int8 ;RegionBitmap *_cfb .Bitmap ;
ReferenceBitmap *_cfb .Bitmap ;ReferenceDX int32 ;ReferenceDY int32 ;_ca *_cfd .Decoder ;_gbc *_cfd .DecoderStats ;_db bool ;_gg []bool ;};type Regioner interface{GetRegionBitmap ()(*_cfb .Bitmap ,error );GetRegionInfo ()*RegionSegment ;};func (_aee *GenericRegion )decodeTemplate1 (_befd ,_dfc ,_gacc int ,_bge ,_acd int )(_gag error ){const _efba ="\u0064e\u0063o\u0064\u0065\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u0031";
var (_afba ,_ccbc int ;_efcf ,_bdad int ;_deb byte ;_bbcc ,_aae int ;);if _befd >=1{_deb ,_gag =_aee .Bitmap .GetByte (_acd );if _gag !=nil {return _af .Wrap (_gag ,_efba ,"\u006ci\u006e\u0065\u0020\u003e\u003d\u00201");};_efcf =int (_deb );};if _befd >=2{_deb ,_gag =_aee .Bitmap .GetByte (_acd -_aee .Bitmap .RowStride );
if _gag !=nil {return _af .Wrap (_gag ,_efba ,"\u006ci\u006e\u0065\u0020\u003e\u003d\u00202");};_bdad =int (_deb )<<5;};_afba =((_efcf >>1)&0x1f8)|((_bdad >>1)&0x1e00);for _aeag :=0;_aeag < _gacc ;_aeag =_bbcc {var (_acbc byte ;_fbg int ;);_bbcc =_aeag +8;
if _gggab :=_dfc -_aeag ;_gggab > 8{_fbg =8;}else {_fbg =_gggab ;};if _befd > 0{_efcf <<=8;if _bbcc < _dfc {_deb ,_gag =_aee .Bitmap .GetByte (_acd +1);if _gag !=nil {return _af .Wrap (_gag ,_efba ,"\u006c\u0069\u006e\u0065\u0020\u003e\u0020\u0030");};
_efcf |=int (_deb );};};if _befd > 1{_bdad <<=8;if _bbcc < _dfc {_deb ,_gag =_aee .Bitmap .GetByte (_acd -_aee .Bitmap .RowStride +1);if _gag !=nil {return _af .Wrap (_gag ,_efba ,"\u006c\u0069\u006e\u0065\u0020\u003e\u0020\u0031");};_bdad |=int (_deb )<<5;
};};for _edg :=0;_edg < _fbg ;_edg ++{if _aee ._fda {_ccbc =_aee .overrideAtTemplate1 (_afba ,_aeag +_edg ,_befd ,int (_acbc ),_edg );_aee ._dff .SetIndex (int32 (_ccbc ));}else {_aee ._dff .SetIndex (int32 (_afba ));};_aae ,_gag =_aee ._acbbd .DecodeBit (_aee ._dff );
if _gag !=nil {return _af .Wrap (_gag ,_efba ,"");};_acbc |=byte (_aae )<<uint (7-_edg );_begg :=uint (8-_edg );_afba =((_afba &0xefb)<<1)|_aae |((_efcf >>_begg )&0x8)|((_bdad >>_begg )&0x200);};if _aaf :=_aee .Bitmap .SetByte (_bge ,_acbc );_aaf !=nil {return _af .Wrap (_aaf ,_efba ,"");
};_bge ++;_acd ++;};return nil ;};func (_bedd *SymbolDictionary )encodeFlags (_ggac _cfg .BinaryWriter )(_bacc int ,_feff error ){const _gfbe ="e\u006e\u0063\u006f\u0064\u0065\u0046\u006c\u0061\u0067\u0073";if _feff =_ggac .SkipBits (3);_feff !=nil {return 0,_af .Wrap (_feff ,_gfbe ,"\u0065\u006d\u0070\u0074\u0079\u0020\u0062\u0069\u0074\u0073");
};var _ffgce int ;if _bedd .SdrTemplate > 0{_ffgce =1;};if _feff =_ggac .WriteBit (_ffgce );_feff !=nil {return _bacc ,_af .Wrap (_feff ,_gfbe ,"s\u0064\u0072\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065");};_ffgce =0;if _bedd .SdTemplate > 1{_ffgce =1;
};if _feff =_ggac .WriteBit (_ffgce );_feff !=nil {return _bacc ,_af .Wrap (_feff ,_gfbe ,"\u0073\u0064\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065");};_ffgce =0;if _bedd .SdTemplate ==1||_bedd .SdTemplate ==3{_ffgce =1;};if _feff =_ggac .WriteBit (_ffgce );
_feff !=nil {return _bacc ,_af .Wrap (_feff ,_gfbe ,"\u0073\u0064\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065");};_ffgce =0;if _bedd ._cffe {_ffgce =1;};if _feff =_ggac .WriteBit (_ffgce );_feff !=nil {return _bacc ,_af .Wrap (_feff ,_gfbe ,"\u0063\u006f\u0064in\u0067\u0020\u0063\u006f\u006e\u0074\u0065\u0078\u0074\u0020\u0072\u0065\u0074\u0061\u0069\u006e\u0065\u0064");
};_ffgce =0;if _bedd ._efde {_ffgce =1;};if _feff =_ggac .WriteBit (_ffgce );_feff !=nil {return _bacc ,_af .Wrap (_feff ,_gfbe ,"\u0063\u006f\u0064\u0069ng\u0020\u0063\u006f\u006e\u0074\u0065\u0078\u0074\u0020\u0075\u0073\u0065\u0064");};_ffgce =0;if _bedd .SdHuffAggInstanceSelection {_ffgce =1;
};if _feff =_ggac .WriteBit (_ffgce );_feff !=nil {return _bacc ,_af .Wrap (_feff ,_gfbe ,"\u0073\u0064\u0048\u0075\u0066\u0066\u0041\u0067\u0067\u0049\u006e\u0073\u0074");};_ffgce =int (_bedd .SdHuffBMSizeSelection );if _feff =_ggac .WriteBit (_ffgce );
_feff !=nil {return _bacc ,_af .Wrap (_feff ,_gfbe ,"\u0073\u0064\u0048u\u0066\u0066\u0042\u006d\u0053\u0069\u007a\u0065");};_ffgce =0;if _bedd .SdHuffDecodeWidthSelection > 1{_ffgce =1;};if _feff =_ggac .WriteBit (_ffgce );_feff !=nil {return _bacc ,_af .Wrap (_feff ,_gfbe ,"s\u0064\u0048\u0075\u0066\u0066\u0057\u0069\u0064\u0074\u0068");
};_ffgce =0;switch _bedd .SdHuffDecodeWidthSelection {case 1,3:_ffgce =1;};if _feff =_ggac .WriteBit (_ffgce );_feff !=nil {return _bacc ,_af .Wrap (_feff ,_gfbe ,"s\u0064\u0048\u0075\u0066\u0066\u0057\u0069\u0064\u0074\u0068");};_ffgce =0;if _bedd .SdHuffDecodeHeightSelection > 1{_ffgce =1;
};if _feff =_ggac .WriteBit (_ffgce );_feff !=nil {return _bacc ,_af .Wrap (_feff ,_gfbe ,"\u0073\u0064\u0048u\u0066\u0066\u0048\u0065\u0069\u0067\u0068\u0074");};_ffgce =0;switch _bedd .SdHuffDecodeHeightSelection {case 1,3:_ffgce =1;};if _feff =_ggac .WriteBit (_ffgce );
_feff !=nil {return _bacc ,_af .Wrap (_feff ,_gfbe ,"\u0073\u0064\u0048u\u0066\u0066\u0048\u0065\u0069\u0067\u0068\u0074");};_ffgce =0;if _bedd .UseRefinementAggregation {_ffgce =1;};if _feff =_ggac .WriteBit (_ffgce );_feff !=nil {return _bacc ,_af .Wrap (_feff ,_gfbe ,"\u0073\u0064\u0052\u0065\u0066\u0041\u0067\u0067");
};_ffgce =0;if _bedd .IsHuffmanEncoded {_ffgce =1;};if _feff =_ggac .WriteBit (_ffgce );_feff !=nil {return _bacc ,_af .Wrap (_feff ,_gfbe ,"\u0073\u0064\u0048\u0075\u0066\u0066");};return 2,nil ;};func (_edfg *TextRegion )Encode (w _cfg .BinaryWriter )(_daec int ,_effa error ){const _bdaf ="\u0054\u0065\u0078\u0074\u0052\u0065\u0067\u0069\u006f\u006e\u002e\u0045n\u0063\u006f\u0064\u0065";
if _daec ,_effa =_edfg .RegionInfo .Encode (w );_effa !=nil {return _daec ,_af .Wrap (_effa ,_bdaf ,"");};var _dbfee int ;if _dbfee ,_effa =_edfg .encodeFlags (w );_effa !=nil {return _daec ,_af .Wrap (_effa ,_bdaf ,"");};_daec +=_dbfee ;if _dbfee ,_effa =_edfg .encodeSymbols (w );
_effa !=nil {return _daec ,_af .Wrap (_effa ,_bdaf ,"");};_daec +=_dbfee ;return _daec ,nil ;};func (_fgef *GenericRegion )getPixel (_bab ,_beeb int )int8 {if _bab < 0||_bab >=_fgef .Bitmap .Width {return 0;};if _beeb < 0||_beeb >=_fgef .Bitmap .Height {return 0;
};if _fgef .Bitmap .GetPixel (_bab ,_beeb ){return 1;};return 0;};func (_dbdc *SymbolDictionary )getSbSymCodeLen ()int8 {_dabdg :=int8 (_c .Ceil (_c .Log (float64 (_dbdc ._bdea +_dbdc .NumberOfNewSymbols ))/_c .Log (2)));if _dbdc .IsHuffmanEncoded &&_dabdg < 1{return 1;
};return _dabdg ;};func (_ddge *TextRegion )decodeRdw ()(int64 ,error ){const _dcge ="\u0064e\u0063\u006f\u0064\u0065\u0052\u0064w";if _ddge .IsHuffmanEncoded {if _ddge .SbHuffRDWidth ==3{if _ddge ._bdgfe ==nil {var (_ccda int ;_cbad error ;);if _ddge .SbHuffFS ==3{_ccda ++;
};if _ddge .SbHuffDS ==3{_ccda ++;};if _ddge .SbHuffDT ==3{_ccda ++;};_ddge ._bdgfe ,_cbad =_ddge .getUserTable (_ccda );if _cbad !=nil {return 0,_af .Wrap (_cbad ,_dcge ,"");};};return _ddge ._bdgfe .Decode (_ddge ._gabc );};_fffea ,_beaa :=_e .GetStandardTable (14+int (_ddge .SbHuffRDWidth ));
if _beaa !=nil {return 0,_af .Wrap (_beaa ,_dcge ,"");};return _fffea .Decode (_ddge ._gabc );};_bebc ,_efafa :=_ddge ._cfcgd .DecodeInt (_ddge ._ceea );if _efafa !=nil {return 0,_af .Wrap (_efafa ,_dcge ,"");};return int64 (_bebc ),nil ;};func (_dcbf *PatternDictionary )readPatternWidthAndHeight ()error {_cagc ,_defb :=_dcbf ._caefb .ReadByte ();
if _defb !=nil {return _defb ;};_dcbf .HdpWidth =_cagc ;_cagc ,_defb =_dcbf ._caefb .ReadByte ();if _defb !=nil {return _defb ;};_dcbf .HdpHeight =_cagc ;return nil ;};func (_fcgag *TextRegion )getSymbols ()error {if _fcgag .Header .RTSegments !=nil {return _fcgag .initSymbols ();
};return nil ;};func (_ea *GenericRefinementRegion )GetRegionInfo ()*RegionSegment {return _ea .RegionInfo };func (_dbaf *TextRegion )symbolIDCodeLengths ()error {var (_cbcg []*_e .Code ;_addc uint64 ;_ffaf _e .Tabler ;_dfdab error ;);for _daee :=0;_daee < 35;
_daee ++{_addc ,_dfdab =_dbaf ._gabc .ReadBits (4);if _dfdab !=nil {return _dfdab ;};_ccbd :=int (_addc &0xf);if _ccbd > 0{_cbcg =append (_cbcg ,_e .NewCode (int32 (_ccbd ),0,int32 (_daee ),false ));};};_ffaf ,_dfdab =_e .NewFixedSizeTable (_cbcg );if _dfdab !=nil {return _dfdab ;
};var (_bgba int64 ;_edec uint32 ;_defc []*_e .Code ;_dgdc int64 ;);for _edec < _dbaf .NumberOfSymbols {_dgdc ,_dfdab =_ffaf .Decode (_dbaf ._gabc );if _dfdab !=nil {return _dfdab ;};if _dgdc < 32{if _dgdc > 0{_defc =append (_defc ,_e .NewCode (int32 (_dgdc ),0,int32 (_edec ),false ));
};_bgba =_dgdc ;_edec ++;}else {var _gacccf ,_fdbcc int64 ;switch _dgdc {case 32:_addc ,_dfdab =_dbaf ._gabc .ReadBits (2);if _dfdab !=nil {return _dfdab ;};_gacccf =3+int64 (_addc );if _edec > 0{_fdbcc =_bgba ;};case 33:_addc ,_dfdab =_dbaf ._gabc .ReadBits (3);
if _dfdab !=nil {return _dfdab ;};_gacccf =3+int64 (_addc );case 34:_addc ,_dfdab =_dbaf ._gabc .ReadBits (7);if _dfdab !=nil {return _dfdab ;};_gacccf =11+int64 (_addc );};for _ebecg :=0;_ebecg < int (_gacccf );_ebecg ++{if _fdbcc > 0{_defc =append (_defc ,_e .NewCode (int32 (_fdbcc ),0,int32 (_edec ),false ));
};_edec ++;};};};_dbaf ._gabc .Align ();_dbaf ._ecae ,_dfdab =_e .NewFixedSizeTable (_defc );return _dfdab ;};func (_ggba *GenericRegion )updateOverrideFlags ()error {const _cafg ="\u0075\u0070\u0064\u0061te\u004f\u0076\u0065\u0072\u0072\u0069\u0064\u0065\u0046\u006c\u0061\u0067\u0073";
if _ggba .GBAtX ==nil ||_ggba .GBAtY ==nil {return nil ;};if len (_ggba .GBAtX )!=len (_ggba .GBAtY ){return _af .Errorf (_cafg ,"i\u006eco\u0073i\u0073t\u0065\u006e\u0074\u0020\u0041T\u0020\u0070\u0069x\u0065\u006c\u002e\u0020\u0041m\u006f\u0075\u006et\u0020\u006f\u0066\u0020\u0027\u0078\u0027\u0020\u0070\u0069\u0078e\u006c\u0073\u003a %d\u002c\u0020\u0041\u006d\u006f\u0075n\u0074\u0020\u006f\u0066\u0020\u0027\u0079\u0027\u0020\u0070\u0069\u0078e\u006cs\u003a\u0020\u0025\u0064",len (_ggba .GBAtX ),len (_ggba .GBAtY ));
};_ggba .GBAtOverride =make ([]bool ,len (_ggba .GBAtX ));switch _ggba .GBTemplate {case 0:if !_ggba .UseExtTemplates {if _ggba .GBAtX [0]!=3||_ggba .GBAtY [0]!=-1{_ggba .setOverrideFlag (0);};if _ggba .GBAtX [1]!=-3||_ggba .GBAtY [1]!=-1{_ggba .setOverrideFlag (1);
};if _ggba .GBAtX [2]!=2||_ggba .GBAtY [2]!=-2{_ggba .setOverrideFlag (2);};if _ggba .GBAtX [3]!=-2||_ggba .GBAtY [3]!=-2{_ggba .setOverrideFlag (3);};}else {if _ggba .GBAtX [0]!=-2||_ggba .GBAtY [0]!=0{_ggba .setOverrideFlag (0);};if _ggba .GBAtX [1]!=0||_ggba .GBAtY [1]!=-2{_ggba .setOverrideFlag (1);
};if _ggba .GBAtX [2]!=-2||_ggba .GBAtY [2]!=-1{_ggba .setOverrideFlag (2);};if _ggba .GBAtX [3]!=-1||_ggba .GBAtY [3]!=-2{_ggba .setOverrideFlag (3);};if _ggba .GBAtX [4]!=1||_ggba .GBAtY [4]!=-2{_ggba .setOverrideFlag (4);};if _ggba .GBAtX [5]!=2||_ggba .GBAtY [5]!=-1{_ggba .setOverrideFlag (5);
};if _ggba .GBAtX [6]!=-3||_ggba .GBAtY [6]!=0{_ggba .setOverrideFlag (6);};if _ggba .GBAtX [7]!=-4||_ggba .GBAtY [7]!=0{_ggba .setOverrideFlag (7);};if _ggba .GBAtX [8]!=2||_ggba .GBAtY [8]!=-2{_ggba .setOverrideFlag (8);};if _ggba .GBAtX [9]!=3||_ggba .GBAtY [9]!=-1{_ggba .setOverrideFlag (9);
};if _ggba .GBAtX [10]!=-2||_ggba .GBAtY [10]!=-2{_ggba .setOverrideFlag (10);};if _ggba .GBAtX [11]!=-3||_ggba .GBAtY [11]!=-1{_ggba .setOverrideFlag (11);};};case 1:if _ggba .GBAtX [0]!=3||_ggba .GBAtY [0]!=-1{_ggba .setOverrideFlag (0);};case 2:if _ggba .GBAtX [0]!=2||_ggba .GBAtY [0]!=-1{_ggba .setOverrideFlag (0);
};case 3:if _ggba .GBAtX [0]!=2||_ggba .GBAtY [0]!=-1{_ggba .setOverrideFlag (0);};};return nil ;};func (_fc *EndOfStripe )Init (h *Header ,r *_cfg .Reader )error {_fc ._cfc =r ;return _fc .parseHeader ()};func (_aged *SymbolDictionary )decodeHeightClassDeltaHeight ()(int64 ,error ){if _aged .IsHuffmanEncoded {return _aged .decodeHeightClassDeltaHeightWithHuffman ();
};_ggeg ,_fdgb :=_aged ._cbgf .DecodeInt (_aged ._ebgf );if _fdgb !=nil {return 0,_fdgb ;};return int64 (_ggeg ),nil ;};func (_ecc *PatternDictionary )computeSegmentDataStructure ()error {_ecc .DataOffset =_ecc ._caefb .AbsolutePosition ();_ecc .DataHeaderLength =_ecc .DataOffset -_ecc .DataHeaderOffset ;
_ecc .DataLength =int64 (_ecc ._caefb .AbsoluteLength ())-_ecc .DataHeaderLength ;return nil ;};func (_dbfe *HalftoneRegion )combineGrayscalePlanes (_bbfe []*_cfb .Bitmap ,_dbfb int )error {_geab :=0;for _cbe :=0;_cbe < _bbfe [_dbfb ].Height ;_cbe ++{for _eef :=0;
_eef < _bbfe [_dbfb ].Width ;_eef +=8{_acaf ,_bfga :=_bbfe [_dbfb +1].GetByte (_geab );if _bfga !=nil {return _bfga ;};_ddbd ,_bfga :=_bbfe [_dbfb ].GetByte (_geab );if _bfga !=nil {return _bfga ;};_bfga =_bbfe [_dbfb ].SetByte (_geab ,_cfb .CombineBytes (_ddbd ,_acaf ,_cfb .CmbOpXor ));
if _bfga !=nil {return _bfga ;};_geab ++;};};return nil ;};func (_dcc *GenericRegion )copyLineAbove (_dcb int )error {_ffg :=_dcb *_dcc .Bitmap .RowStride ;_dbbc :=_ffg -_dcc .Bitmap .RowStride ;for _dace :=0;_dace < _dcc .Bitmap .RowStride ;_dace ++{_eda ,_ccfde :=_dcc .Bitmap .GetByte (_dbbc );
if _ccfde !=nil {return _ccfde ;};_dbbc ++;if _ccfde =_dcc .Bitmap .SetByte (_ffg ,_eda );_ccfde !=nil {return _ccfde ;};_ffg ++;};return nil ;};func (_geba *TextRegion )readRegionFlags ()error {var (_cagge int ;_agga uint64 ;_fbbfd error ;);_cagge ,_fbbfd =_geba ._gabc .ReadBit ();
if _fbbfd !=nil {return _fbbfd ;};_geba .SbrTemplate =int8 (_cagge );_agga ,_fbbfd =_geba ._gabc .ReadBits (5);if _fbbfd !=nil {return _fbbfd ;};_geba .SbDsOffset =int8 (_agga );if _geba .SbDsOffset > 0x0f{_geba .SbDsOffset -=0x20;};_cagge ,_fbbfd =_geba ._gabc .ReadBit ();
if _fbbfd !=nil {return _fbbfd ;};_geba .DefaultPixel =int8 (_cagge );_agga ,_fbbfd =_geba ._gabc .ReadBits (2);if _fbbfd !=nil {return _fbbfd ;};_geba .CombinationOperator =_cfb .CombinationOperator (int (_agga )&0x3);_cagge ,_fbbfd =_geba ._gabc .ReadBit ();
if _fbbfd !=nil {return _fbbfd ;};_geba .IsTransposed =int8 (_cagge );_agga ,_fbbfd =_geba ._gabc .ReadBits (2);if _fbbfd !=nil {return _fbbfd ;};_geba .ReferenceCorner =int16 (_agga )&0x3;_agga ,_fbbfd =_geba ._gabc .ReadBits (2);if _fbbfd !=nil {return _fbbfd ;
};_geba .LogSBStrips =int16 (_agga )&0x3;_geba .SbStrips =1<<uint (_geba .LogSBStrips );_cagge ,_fbbfd =_geba ._gabc .ReadBit ();if _fbbfd !=nil {return _fbbfd ;};if _cagge ==1{_geba .UseRefinement =true ;};_cagge ,_fbbfd =_geba ._gabc .ReadBit ();if _fbbfd !=nil {return _fbbfd ;
};if _cagge ==1{_geba .IsHuffmanEncoded =true ;};return nil ;};func (_cdda *Header )readHeaderFlags ()error {const _bddgc ="\u0072e\u0061d\u0048\u0065\u0061\u0064\u0065\u0072\u0046\u006c\u0061\u0067\u0073";_fffe ,_febag :=_cdda .Reader .ReadBit ();if _febag !=nil {return _af .Wrap (_febag ,_bddgc ,"r\u0065\u0074\u0061\u0069\u006e\u0020\u0066\u006c\u0061\u0067");
};if _fffe !=0{_cdda .RetainFlag =true ;};_fffe ,_febag =_cdda .Reader .ReadBit ();if _febag !=nil {return _af .Wrap (_febag ,_bddgc ,"\u0070\u0061g\u0065\u0020\u0061s\u0073\u006f\u0063\u0069\u0061\u0074\u0069\u006f\u006e");};if _fffe !=0{_cdda .PageAssociationFieldSize =true ;
};_baf ,_febag :=_cdda .Reader .ReadBits (6);if _febag !=nil {return _af .Wrap (_febag ,_bddgc ,"\u0073\u0065\u0067m\u0065\u006e\u0074\u0020\u0074\u0079\u0070\u0065");};_cdda .Type =Type (int (_baf ));return nil ;};func (_gbb *Header )CleanSegmentData (){if _gbb .SegmentData !=nil {_gbb .SegmentData =nil ;
};};func (_fbga *GenericRegion )decodeTemplate3 (_fcd ,_fffa ,_eega int ,_gaeg ,_ageab int )(_cbf error ){const _ebe ="\u0064e\u0063o\u0064\u0065\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u0033";var (_dbfc ,_ffge int ;_edd int ;_cfeb byte ;_eegaf ,_cgd int ;
);if _fcd >=1{_cfeb ,_cbf =_fbga .Bitmap .GetByte (_ageab );if _cbf !=nil {return _af .Wrap (_cbf ,_ebe ,"\u006ci\u006e\u0065\u0020\u003e\u003d\u00201");};_edd =int (_cfeb );};_dbfc =(_edd >>1)&0x70;for _dfd :=0;_dfd < _eega ;_dfd =_eegaf {var (_fbbc byte ;
_fccc int ;);_eegaf =_dfd +8;if _dafg :=_fffa -_dfd ;_dafg > 8{_fccc =8;}else {_fccc =_dafg ;};if _fcd >=1{_edd <<=8;if _eegaf < _fffa {_cfeb ,_cbf =_fbga .Bitmap .GetByte (_ageab +1);if _cbf !=nil {return _af .Wrap (_cbf ,_ebe ,"\u0069\u006e\u006e\u0065\u0072\u0020\u002d\u0020\u006c\u0069\u006e\u0065 \u003e\u003d\u0020\u0031");
};_edd |=int (_cfeb );};};for _abab :=0;_abab < _fccc ;_abab ++{if _fbga ._fda {_ffge =_fbga .overrideAtTemplate3 (_dbfc ,_dfd +_abab ,_fcd ,int (_fbbc ),_abab );_fbga ._dff .SetIndex (int32 (_ffge ));}else {_fbga ._dff .SetIndex (int32 (_dbfc ));};_cgd ,_cbf =_fbga ._acbbd .DecodeBit (_fbga ._dff );
if _cbf !=nil {return _af .Wrap (_cbf ,_ebe ,"");};_fbbc |=byte (_cgd )<<byte (7-_abab );_dbfc =((_dbfc &0x1f7)<<1)|_cgd |((_edd >>uint (8-_abab ))&0x010);};if _cca :=_fbga .Bitmap .SetByte (_gaeg ,_fbbc );_cca !=nil {return _af .Wrap (_cca ,_ebe ,"");
};_gaeg ++;_ageab ++;};return nil ;};func (_fgff *SymbolDictionary )retrieveImportSymbols ()error {for _ ,_egea :=range _fgff .Header .RTSegments {if _egea .Type ==0{_ggc ,_acbbf :=_egea .GetSegmentData ();if _acbbf !=nil {return _acbbf ;};_decc ,_abgg :=_ggc .(*SymbolDictionary );
if !_abgg {return _a .Errorf ("\u0070\u0072\u006f\u0076\u0069\u0064\u0065\u0064\u0020\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u0020\u0044\u0061\u0074a\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0061\u0020\u0053\u0079\u006d\u0062\u006f\u006c\u0044\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u0053\u0065\u0067m\u0065\u006e\u0074\u003a\u0020%\u0054",_ggc );
};_fdaac ,_acbbf :=_decc .GetDictionary ();if _acbbf !=nil {return _a .Errorf ("\u0072\u0065\u006c\u0061\u0074\u0065\u0064 \u0073\u0065\u0067m\u0065\u006e\u0074 \u0077\u0069t\u0068\u0020\u0069\u006e\u0064\u0065x\u003a %\u0064\u0020\u0067\u0065\u0074\u0044\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0025\u0073",_egea .SegmentNumber ,_acbbf .Error ());
};_fgff ._bbb =append (_fgff ._bbb ,_fdaac ...);_fgff ._bdea +=_decc .NumberOfExportedSymbols ;};};return nil ;};func (_dacc *GenericRegion )setParameters (_gce bool ,_gee ,_gfge int64 ,_ecfcd ,_acdg uint32 ){_dacc .IsMMREncoded =_gce ;_dacc .DataOffset =_gee ;
_dacc .DataLength =_gfge ;_dacc .RegionSegment .BitmapHeight =_ecfcd ;_dacc .RegionSegment .BitmapWidth =_acdg ;_dacc ._faba =nil ;_dacc .Bitmap =nil ;};func (_gcaa *Header )readReferredToSegmentNumbers (_acg *_cfg .Reader ,_dgee int )([]int ,error ){const _bfge ="\u0072\u0065\u0061\u0064R\u0065\u0066\u0065\u0072\u0072\u0065\u0064\u0054\u006f\u0053e\u0067m\u0065\u006e\u0074\u004e\u0075\u006d\u0062e\u0072\u0073";
_edc :=make ([]int ,_dgee );if _dgee > 0{_gcaa .RTSegments =make ([]*Header ,_dgee );var (_feea uint64 ;_acec error ;);for _edded :=0;_edded < _dgee ;_edded ++{_feea ,_acec =_acg .ReadBits (byte (_gcaa .referenceSize ())<<3);if _acec !=nil {return nil ,_af .Wrapf (_acec ,_bfge ,"\u0027\u0025\u0064\u0027 \u0072\u0065\u0066\u0065\u0072\u0072\u0065\u0064\u0020\u0073e\u0067m\u0065\u006e\u0074\u0020\u006e\u0075\u006db\u0065\u0072",_edded );
};_edc [_edded ]=int (_feea &_c .MaxInt32 );};};return _edc ,nil ;};func (_feg *TextRegion )InitEncode (globalSymbolsMap ,localSymbolsMap map[int ]int ,comps []int ,inLL *_cfb .Points ,symbols *_cfb .Bitmaps ,classIDs *_d .IntSlice ,boxes *_cfb .Boxes ,width ,height ,symBits int ){_feg .RegionInfo =&RegionSegment {BitmapWidth :uint32 (width ),BitmapHeight :uint32 (height )};
_feg ._gfce =globalSymbolsMap ;_feg ._cebg =localSymbolsMap ;_feg ._gead =comps ;_feg ._bdbg =inLL ;_feg ._acedf =symbols ;_feg ._afcdd =classIDs ;_feg ._aggeb =boxes ;_feg ._dgaa =symBits ;};func (_fafg *TableSegment )HtHigh ()int32 {return _fafg ._cdfc };
func (_ede *GenericRefinementRegion )String ()string {_dbfa :=&_cf .Builder {};_dbfa .WriteString ("\u000a[\u0047E\u004e\u0045\u0052\u0049\u0043 \u0052\u0045G\u0049\u004f\u004e\u005d\u000a");_dbfa .WriteString (_ede .RegionInfo .String ()+"\u000a");_dbfa .WriteString (_a .Sprintf ("\u0009\u002d \u0049\u0073\u0054P\u0047\u0052\u006f\u006e\u003a\u0020\u0025\u0076\u000a",_ede .IsTPGROn ));
_dbfa .WriteString (_a .Sprintf ("\u0009-\u0020T\u0065\u006d\u0070\u006c\u0061t\u0065\u0049D\u003a\u0020\u0025\u0076\u000a",_ede .TemplateID ));_dbfa .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u0047\u0072\u0041\u0074\u0058\u003a\u0020\u0025\u0076\u000a",_ede .GrAtX ));
_dbfa .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u0047\u0072\u0041\u0074\u0059\u003a\u0020\u0025\u0076\u000a",_ede .GrAtY ));_dbfa .WriteString (_a .Sprintf ("\u0009-\u0020R\u0065\u0066\u0065\u0072\u0065n\u0063\u0065D\u0058\u0020\u0025\u0076\u000a",_ede .ReferenceDX ));
_dbfa .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u0052ef\u0065\u0072\u0065\u006e\u0063\u0044\u0065\u0059\u003a\u0020\u0025\u0076\u000a",_ede .ReferenceDY ));return _dbfa .String ();};func (_cefa *SymbolDictionary )setSymbolsArray ()error {if _cefa ._bbb ==nil {if _gacg :=_cefa .retrieveImportSymbols ();
_gacg !=nil {return _gacg ;};};if _cefa ._bceaf ==nil {_cefa ._bceaf =append (_cefa ._bceaf ,_cefa ._bbb ...);};return nil ;};func (_ccaac *SymbolDictionary )decodeRefinedSymbol (_eaba ,_ddg uint32 )error {var (_baccc int ;_gdfe ,_fcec int32 ;);if _ccaac .IsHuffmanEncoded {_eebg ,_gcff :=_ccaac ._cdbb .ReadBits (byte (_ccaac ._ecdb ));
if _gcff !=nil {return _gcff ;};_baccc =int (_eebg );_fced ,_gcff :=_e .GetStandardTable (15);if _gcff !=nil {return _gcff ;};_eedc ,_gcff :=_fced .Decode (_ccaac ._cdbb );if _gcff !=nil {return _gcff ;};_gdfe =int32 (_eedc );_eedc ,_gcff =_fced .Decode (_ccaac ._cdbb );
if _gcff !=nil {return _gcff ;};_fcec =int32 (_eedc );_fced ,_gcff =_e .GetStandardTable (1);if _gcff !=nil {return _gcff ;};if _ ,_gcff =_fced .Decode (_ccaac ._cdbb );_gcff !=nil {return _gcff ;};_ccaac ._cdbb .Align ();}else {_deefc ,_bcdga :=_ccaac ._cbgf .DecodeIAID (uint64 (_ccaac ._ecdb ),_ccaac ._afef );
if _bcdga !=nil {return _bcdga ;};_baccc =int (_deefc );_gdfe ,_bcdga =_ccaac ._cbgf .DecodeInt (_ccaac ._fgeec );if _bcdga !=nil {return _bcdga ;};_fcec ,_bcdga =_ccaac ._cbgf .DecodeInt (_ccaac ._faf );if _bcdga !=nil {return _bcdga ;};};if _gcfa :=_ccaac .setSymbolsArray ();
_gcfa !=nil {return _gcfa ;};_cecdf :=_ccaac ._bceaf [_baccc ];if _eeab :=_ccaac .decodeNewSymbols (_eaba ,_ddg ,_cecdf ,_gdfe ,_fcec );_eeab !=nil {return _eeab ;};if _ccaac .IsHuffmanEncoded {_ccaac ._cdbb .Align ();};return nil ;};func (_bfdb *Header )readHeaderLength (_bece *_cfg .Reader ,_gbba int64 ){_bfdb .HeaderLength =_bece .AbsolutePosition ()-_gbba ;
};func (_deba *SymbolDictionary )setCodingStatistics ()error {if _deba ._ffeca ==nil {_deba ._ffeca =_cfd .NewStats (512,1);};if _deba ._ebgf ==nil {_deba ._ebgf =_cfd .NewStats (512,1);};if _deba ._bbcce ==nil {_deba ._bbcce =_cfd .NewStats (512,1);};
if _deba ._eedd ==nil {_deba ._eedd =_cfd .NewStats (512,1);};if _deba ._dfbb ==nil {_deba ._dfbb =_cfd .NewStats (512,1);};if _deba .UseRefinementAggregation &&_deba ._afef ==nil {_deba ._afef =_cfd .NewStats (1<<uint (_deba ._ecdb ),1);_deba ._fgeec =_cfd .NewStats (512,1);
_deba ._faf =_cfd .NewStats (512,1);};if _deba ._cfda ==nil {_deba ._cfda =_cfd .NewStats (65536,1);};if _deba ._cbgf ==nil {var _bgbf error ;_deba ._cbgf ,_bgbf =_cfd .New (_deba ._cdbb );if _bgbf !=nil {return _bgbf ;};};return nil ;};func (_cacg *PageInformationSegment )readRequiresAuxiliaryBuffer ()error {_faea ,_eaag :=_cacg ._dgbg .ReadBit ();
if _eaag !=nil {return _eaag ;};if _faea ==1{_cacg ._gbeg =true ;};return nil ;};func (_ccfe *TextRegion )decodeDfs ()(int64 ,error ){if _ccfe .IsHuffmanEncoded {if _ccfe .SbHuffFS ==3{if _ccfe ._agbf ==nil {var _eeag error ;_ccfe ._agbf ,_eeag =_ccfe .getUserTable (0);
if _eeag !=nil {return 0,_eeag ;};};return _ccfe ._agbf .Decode (_ccfe ._gabc );};_gfged ,_bcfd :=_e .GetStandardTable (6+int (_ccfe .SbHuffFS ));if _bcfd !=nil {return 0,_bcfd ;};return _gfged .Decode (_ccfe ._gabc );};_acefg ,_daad :=_ccfe ._cfcgd .DecodeInt (_ccfe ._aeeb );
if _daad !=nil {return 0,_daad ;};return int64 (_acefg ),nil ;};func (_fabcb *SymbolDictionary )readRegionFlags ()error {var (_egbb uint64 ;_eefc int ;);_ ,_aagf :=_fabcb ._cdbb .ReadBits (3);if _aagf !=nil {return _aagf ;};_eefc ,_aagf =_fabcb ._cdbb .ReadBit ();
if _aagf !=nil {return _aagf ;};_fabcb .SdrTemplate =int8 (_eefc );_egbb ,_aagf =_fabcb ._cdbb .ReadBits (2);if _aagf !=nil {return _aagf ;};_fabcb .SdTemplate =int8 (_egbb &0xf);_eefc ,_aagf =_fabcb ._cdbb .ReadBit ();if _aagf !=nil {return _aagf ;};if _eefc ==1{_fabcb ._cffe =true ;
};_eefc ,_aagf =_fabcb ._cdbb .ReadBit ();if _aagf !=nil {return _aagf ;};if _eefc ==1{_fabcb ._efde =true ;};_eefc ,_aagf =_fabcb ._cdbb .ReadBit ();if _aagf !=nil {return _aagf ;};if _eefc ==1{_fabcb .SdHuffAggInstanceSelection =true ;};_eefc ,_aagf =_fabcb ._cdbb .ReadBit ();
if _aagf !=nil {return _aagf ;};_fabcb .SdHuffBMSizeSelection =int8 (_eefc );_egbb ,_aagf =_fabcb ._cdbb .ReadBits (2);if _aagf !=nil {return _aagf ;};_fabcb .SdHuffDecodeWidthSelection =int8 (_egbb &0xf);_egbb ,_aagf =_fabcb ._cdbb .ReadBits (2);if _aagf !=nil {return _aagf ;
};_fabcb .SdHuffDecodeHeightSelection =int8 (_egbb &0xf);_eefc ,_aagf =_fabcb ._cdbb .ReadBit ();if _aagf !=nil {return _aagf ;};if _eefc ==1{_fabcb .UseRefinementAggregation =true ;};_eefc ,_aagf =_fabcb ._cdbb .ReadBit ();if _aagf !=nil {return _aagf ;
};if _eefc ==1{_fabcb .IsHuffmanEncoded =true ;};return nil ;};func (_dgb *template1 )setIndex (_ebaf *_cfd .DecoderStats ){_ebaf .SetIndex (0x080)};func (_ebbed *RegionSegment )parseHeader ()error {const _gdga ="p\u0061\u0072\u0073\u0065\u0048\u0065\u0061\u0064\u0065\u0072";
_ad .Log .Trace ("\u005b\u0052\u0045\u0047I\u004f\u004e\u005d\u005b\u0050\u0041\u0052\u0053\u0045\u002dH\u0045A\u0044\u0045\u0052\u005d\u0020\u0042\u0065g\u0069\u006e");defer func (){_ad .Log .Trace ("\u005b\u0052\u0045G\u0049\u004f\u004e\u005d[\u0050\u0041\u0052\u0053\u0045\u002d\u0048E\u0041\u0044\u0045\u0052\u005d\u0020\u0046\u0069\u006e\u0069\u0073\u0068\u0065\u0064");
}();_gdgfa ,_ffgc :=_ebbed ._afcc .ReadBits (32);if _ffgc !=nil {return _af .Wrap (_ffgc ,_gdga ,"\u0077\u0069\u0064t\u0068");};_ebbed .BitmapWidth =uint32 (_gdgfa &_c .MaxUint32 );_gdgfa ,_ffgc =_ebbed ._afcc .ReadBits (32);if _ffgc !=nil {return _af .Wrap (_ffgc ,_gdga ,"\u0068\u0065\u0069\u0067\u0068\u0074");
};_ebbed .BitmapHeight =uint32 (_gdgfa &_c .MaxUint32 );_gdgfa ,_ffgc =_ebbed ._afcc .ReadBits (32);if _ffgc !=nil {return _af .Wrap (_ffgc ,_gdga ,"\u0078\u0020\u006c\u006f\u0063\u0061\u0074\u0069\u006f\u006e");};_ebbed .XLocation =uint32 (_gdgfa &_c .MaxUint32 );
_gdgfa ,_ffgc =_ebbed ._afcc .ReadBits (32);if _ffgc !=nil {return _af .Wrap (_ffgc ,_gdga ,"\u0079\u0020\u006c\u006f\u0063\u0061\u0074\u0069\u006f\u006e");};_ebbed .YLocation =uint32 (_gdgfa &_c .MaxUint32 );if _ ,_ffgc =_ebbed ._afcc .ReadBits (5);_ffgc !=nil {return _af .Wrap (_ffgc ,_gdga ,"\u0064i\u0072\u0079\u0020\u0072\u0065\u0061d");
};if _ffgc =_ebbed .readCombinationOperator ();_ffgc !=nil {return _af .Wrap (_ffgc ,_gdga ,"c\u006fm\u0062\u0069\u006e\u0061\u0074\u0069\u006f\u006e \u006f\u0070\u0065\u0072at\u006f\u0072");};return nil ;};func (_cddaa *TextRegion )decodeRdh ()(int64 ,error ){const _cbgc ="\u0064e\u0063\u006f\u0064\u0065\u0052\u0064h";
if _cddaa .IsHuffmanEncoded {if _cddaa .SbHuffRDHeight ==3{if _cddaa ._fcef ==nil {var (_dfcc int ;_ebfb error ;);if _cddaa .SbHuffFS ==3{_dfcc ++;};if _cddaa .SbHuffDS ==3{_dfcc ++;};if _cddaa .SbHuffDT ==3{_dfcc ++;};if _cddaa .SbHuffRDWidth ==3{_dfcc ++;
};_cddaa ._fcef ,_ebfb =_cddaa .getUserTable (_dfcc );if _ebfb !=nil {return 0,_af .Wrap (_ebfb ,_cbgc ,"");};};return _cddaa ._fcef .Decode (_cddaa ._gabc );};_fba ,_fbae :=_e .GetStandardTable (14+int (_cddaa .SbHuffRDHeight ));if _fbae !=nil {return 0,_af .Wrap (_fbae ,_cbgc ,"");
};return _fba .Decode (_cddaa ._gabc );};_eceb ,_dcbff :=_cddaa ._cfcgd .DecodeInt (_cddaa ._bgegb );if _dcbff !=nil {return 0,_af .Wrap (_dcbff ,_cbgc ,"");};return int64 (_eceb ),nil ;};func (_cedg *TextRegion )decodeSymInRefSize ()(int64 ,error ){const _daeg ="\u0064e\u0063o\u0064\u0065\u0053\u0079\u006dI\u006e\u0052e\u0066\u0053\u0069\u007a\u0065";
if _cedg .SbHuffRSize ==0{_cdcaa ,_cbdb :=_e .GetStandardTable (1);if _cbdb !=nil {return 0,_af .Wrap (_cbdb ,_daeg ,"");};return _cdcaa .Decode (_cedg ._gabc );};if _cedg ._cdae ==nil {var (_bbgc int ;_dbbg error ;);if _cedg .SbHuffFS ==3{_bbgc ++;};if _cedg .SbHuffDS ==3{_bbgc ++;
};if _cedg .SbHuffDT ==3{_bbgc ++;};if _cedg .SbHuffRDWidth ==3{_bbgc ++;};if _cedg .SbHuffRDHeight ==3{_bbgc ++;};if _cedg .SbHuffRDX ==3{_bbgc ++;};if _cedg .SbHuffRDY ==3{_bbgc ++;};_cedg ._cdae ,_dbbg =_cedg .getUserTable (_bbgc );if _dbbg !=nil {return 0,_af .Wrap (_dbbg ,_daeg ,"");
};};_fgfb ,_eae :=_cedg ._cdae .Decode (_cedg ._gabc );if _eae !=nil {return 0,_af .Wrap (_eae ,_daeg ,"");};return _fgfb ,nil ;};func (_effg *Header )writeSegmentDataLength (_dage _cfg .BinaryWriter )(_aaed int ,_cbae error ){_edac :=make ([]byte ,4);
_gdd .BigEndian .PutUint32 (_edac ,uint32 (_effg .SegmentDataLength ));if _aaed ,_cbae =_dage .Write (_edac );_cbae !=nil {return 0,_af .Wrap (_cbae ,"\u0048\u0065a\u0064\u0065\u0072\u002e\u0077\u0072\u0069\u0074\u0065\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u0044\u0061\u0074\u0061\u004c\u0065ng\u0074\u0068","");
};return _aaed ,nil ;};func (_cdaa *TextRegion )decodeStripT ()(_agag int64 ,_gggfg error ){if _cdaa .IsHuffmanEncoded {if _cdaa .SbHuffDT ==3{if _cdaa ._debfb ==nil {var _bgea int ;if _cdaa .SbHuffFS ==3{_bgea ++;};if _cdaa .SbHuffDS ==3{_bgea ++;};_cdaa ._debfb ,_gggfg =_cdaa .getUserTable (_bgea );
if _gggfg !=nil {return 0,_gggfg ;};};_agag ,_gggfg =_cdaa ._debfb .Decode (_cdaa ._gabc );if _gggfg !=nil {return 0,_gggfg ;};}else {var _ffad _e .Tabler ;_ffad ,_gggfg =_e .GetStandardTable (11+int (_cdaa .SbHuffDT ));if _gggfg !=nil {return 0,_gggfg ;
};_agag ,_gggfg =_ffad .Decode (_cdaa ._gabc );if _gggfg !=nil {return 0,_gggfg ;};};}else {var _dfag int32 ;_dfag ,_gggfg =_cdaa ._cfcgd .DecodeInt (_cdaa ._ceddf );if _gggfg !=nil {return 0,_gggfg ;};_agag =int64 (_dfag );};_agag *=int64 (-_cdaa .SbStrips );
return _agag ,nil ;};func (_egbf *SymbolDictionary )readAtPixels (_aade int )error {_egbf .SdATX =make ([]int8 ,_aade );_egbf .SdATY =make ([]int8 ,_aade );var (_dfbd byte ;_baea error ;);for _gfdg :=0;_gfdg < _aade ;_gfdg ++{_dfbd ,_baea =_egbf ._cdbb .ReadByte ();
if _baea !=nil {return _baea ;};_egbf .SdATX [_gfdg ]=int8 (_dfbd );_dfbd ,_baea =_egbf ._cdbb .ReadByte ();if _baea !=nil {return _baea ;};_egbf .SdATY [_gfdg ]=int8 (_dfbd );};return nil ;};func (_ceba *PageInformationSegment )Init (h *Header ,r *_cfg .Reader )(_ceeg error ){_ceba ._dgbg =r ;
if _ceeg =_ceba .parseHeader ();_ceeg !=nil {return _af .Wrap (_ceeg ,"P\u0061\u0067\u0065\u0049\u006e\u0066o\u0072\u006d\u0061\u0074\u0069\u006f\u006e\u0053\u0065g\u006d\u0065\u006et\u002eI\u006e\u0069\u0074","");};return nil ;};func (_gcc *GenericRefinementRegion )decodeTemplate (_gedc ,_cafe ,_gac ,_gdb ,_ecf ,_ffe ,_ffec ,_aa ,_bce ,_cag int ,_dca templater )(_efa error ){var (_ada ,_edba ,_eag ,_ggb ,_efb int16 ;
_fcg ,_aga ,_gge ,_gefd int ;_ecd byte ;);if _bce >=1&&(_bce -1)< _gcc .ReferenceBitmap .Height {_ecd ,_efa =_gcc .ReferenceBitmap .GetByte (_cag -_gdb );if _efa !=nil {return _efa ;};_fcg =int (_ecd );};if _bce >=0&&(_bce )< _gcc .ReferenceBitmap .Height {_ecd ,_efa =_gcc .ReferenceBitmap .GetByte (_cag );
if _efa !=nil {return _efa ;};_aga =int (_ecd );};if _bce >=-1&&(_bce +1)< _gcc .ReferenceBitmap .Height {_ecd ,_efa =_gcc .ReferenceBitmap .GetByte (_cag +_gdb );if _efa !=nil {return _efa ;};_gge =int (_ecd );};_cag ++;if _gedc >=1{_ecd ,_efa =_gcc .RegionBitmap .GetByte (_aa -_gac );
if _efa !=nil {return _efa ;};_gefd =int (_ecd );};_aa ++;_gga :=_gcc .ReferenceDX %8;_abb :=6+_gga ;_ggbe :=_cag %_gdb ;if _abb >=0{if _abb < 8{_ada =int16 (_fcg >>uint (_abb ))&0x07;};if _abb < 8{_edba =int16 (_aga >>uint (_abb ))&0x07;};if _abb < 8{_eag =int16 (_gge >>uint (_abb ))&0x07;
};if _abb ==6&&_ggbe > 1{if _bce >=1&&(_bce -1)< _gcc .ReferenceBitmap .Height {_ecd ,_efa =_gcc .ReferenceBitmap .GetByte (_cag -_gdb -2);if _efa !=nil {return _efa ;};_ada |=int16 (_ecd <<2)&0x04;};if _bce >=0&&_bce < _gcc .ReferenceBitmap .Height {_ecd ,_efa =_gcc .ReferenceBitmap .GetByte (_cag -2);
if _efa !=nil {return _efa ;};_edba |=int16 (_ecd <<2)&0x04;};if _bce >=-1&&_bce +1< _gcc .ReferenceBitmap .Height {_ecd ,_efa =_gcc .ReferenceBitmap .GetByte (_cag +_gdb -2);if _efa !=nil {return _efa ;};_eag |=int16 (_ecd <<2)&0x04;};};if _abb ==0{_fcg =0;
_aga =0;_gge =0;if _ggbe < _gdb -1{if _bce >=1&&_bce -1< _gcc .ReferenceBitmap .Height {_ecd ,_efa =_gcc .ReferenceBitmap .GetByte (_cag -_gdb );if _efa !=nil {return _efa ;};_fcg =int (_ecd );};if _bce >=0&&_bce < _gcc .ReferenceBitmap .Height {_ecd ,_efa =_gcc .ReferenceBitmap .GetByte (_cag );
if _efa !=nil {return _efa ;};_aga =int (_ecd );};if _bce >=-1&&_bce +1< _gcc .ReferenceBitmap .Height {_ecd ,_efa =_gcc .ReferenceBitmap .GetByte (_cag +_gdb );if _efa !=nil {return _efa ;};_gge =int (_ecd );};};_cag ++;};}else {_ada =int16 (_fcg <<1)&0x07;
_edba =int16 (_aga <<1)&0x07;_eag =int16 (_gge <<1)&0x07;_fcg =0;_aga =0;_gge =0;if _ggbe < _gdb -1{if _bce >=1&&_bce -1< _gcc .ReferenceBitmap .Height {_ecd ,_efa =_gcc .ReferenceBitmap .GetByte (_cag -_gdb );if _efa !=nil {return _efa ;};_fcg =int (_ecd );
};if _bce >=0&&_bce < _gcc .ReferenceBitmap .Height {_ecd ,_efa =_gcc .ReferenceBitmap .GetByte (_cag );if _efa !=nil {return _efa ;};_aga =int (_ecd );};if _bce >=-1&&_bce +1< _gcc .ReferenceBitmap .Height {_ecd ,_efa =_gcc .ReferenceBitmap .GetByte (_cag +_gdb );
if _efa !=nil {return _efa ;};_gge =int (_ecd );};_cag ++;};_ada |=int16 ((_fcg >>7)&0x07);_edba |=int16 ((_aga >>7)&0x07);_eag |=int16 ((_gge >>7)&0x07);};_ggb =int16 (_gefd >>6);_efb =0;_cfdf :=(2-_gga )%8;_fcg <<=uint (_cfdf );_aga <<=uint (_cfdf );
_gge <<=uint (_cfdf );_gefd <<=2;var _bdd int ;for _gbfb :=0;_gbfb < _cafe ;_gbfb ++{_dgd :=_gbfb &0x07;_fdc :=_dca .form (_ada ,_edba ,_eag ,_ggb ,_efb );if _gcc ._db {_ecd ,_efa =_gcc .RegionBitmap .GetByte (_gcc .RegionBitmap .GetByteIndex (_gbfb ,_gedc ));
if _efa !=nil {return _efa ;};_gcc ._gbc .SetIndex (int32 (_gcc .overrideAtTemplate0 (int (_fdc ),_gbfb ,_gedc ,int (_ecd ),_dgd )));}else {_gcc ._gbc .SetIndex (int32 (_fdc ));};_bdd ,_efa =_gcc ._ca .DecodeBit (_gcc ._gbc );if _efa !=nil {return _efa ;
};if _efa =_gcc .RegionBitmap .SetPixel (_gbfb ,_gedc ,byte (_bdd ));_efa !=nil {return _efa ;};_ada =((_ada <<1)|0x01&int16 (_fcg >>7))&0x07;_edba =((_edba <<1)|0x01&int16 (_aga >>7))&0x07;_eag =((_eag <<1)|0x01&int16 (_gge >>7))&0x07;_ggb =((_ggb <<1)|0x01&int16 (_gefd >>7))&0x07;
_efb =int16 (_bdd );if (_gbfb -int (_gcc .ReferenceDX ))%8==5{_fcg =0;_aga =0;_gge =0;if ((_gbfb -int (_gcc .ReferenceDX ))/8)+1< _gcc .ReferenceBitmap .RowStride {if _bce >=1&&(_bce -1)< _gcc .ReferenceBitmap .Height {_ecd ,_efa =_gcc .ReferenceBitmap .GetByte (_cag -_gdb );
if _efa !=nil {return _efa ;};_fcg =int (_ecd );};if _bce >=0&&_bce < _gcc .ReferenceBitmap .Height {_ecd ,_efa =_gcc .ReferenceBitmap .GetByte (_cag );if _efa !=nil {return _efa ;};_aga =int (_ecd );};if _bce >=-1&&(_bce +1)< _gcc .ReferenceBitmap .Height {_ecd ,_efa =_gcc .ReferenceBitmap .GetByte (_cag +_gdb );
if _efa !=nil {return _efa ;};_gge =int (_ecd );};};_cag ++;}else {_fcg <<=1;_aga <<=1;_gge <<=1;};if _dgd ==5&&_gedc >=1{if ((_gbfb >>3)+1)>=_gcc .RegionBitmap .RowStride {_gefd =0;}else {_ecd ,_efa =_gcc .RegionBitmap .GetByte (_aa -_gac );if _efa !=nil {return _efa ;
};_gefd =int (_ecd );};_aa ++;}else {_gefd <<=1;};};return nil ;};type TextRegion struct{_gabc *_cfg .Reader ;RegionInfo *RegionSegment ;SbrTemplate int8 ;SbDsOffset int8 ;DefaultPixel int8 ;CombinationOperator _cfb .CombinationOperator ;IsTransposed int8 ;
ReferenceCorner int16 ;LogSBStrips int16 ;UseRefinement bool ;IsHuffmanEncoded bool ;SbHuffRSize int8 ;SbHuffRDY int8 ;SbHuffRDX int8 ;SbHuffRDHeight int8 ;SbHuffRDWidth int8 ;SbHuffDT int8 ;SbHuffDS int8 ;SbHuffFS int8 ;SbrATX []int8 ;SbrATY []int8 ;NumberOfSymbolInstances uint32 ;
_ebcd int64 ;SbStrips int8 ;NumberOfSymbols uint32 ;RegionBitmap *_cfb .Bitmap ;Symbols []*_cfb .Bitmap ;_cfcgd *_cfd .Decoder ;_ffde *GenericRefinementRegion ;_ceddf *_cfd .DecoderStats ;_aeeb *_cfd .DecoderStats ;_efcff *_cfd .DecoderStats ;_gafgc *_cfd .DecoderStats ;
_ecgc *_cfd .DecoderStats ;_ceea *_cfd .DecoderStats ;_bgegb *_cfd .DecoderStats ;_ecge *_cfd .DecoderStats ;_fafdf *_cfd .DecoderStats ;_dgca *_cfd .DecoderStats ;_edad *_cfd .DecoderStats ;_egfa int8 ;_ecae *_e .FixedSizeTable ;Header *Header ;_agbf _e .Tabler ;
_faed _e .Tabler ;_debfb _e .Tabler ;_bdgfe _e .Tabler ;_fcef _e .Tabler ;_egce _e .Tabler ;_bgca _e .Tabler ;_cdae _e .Tabler ;_gfce ,_cebg map[int ]int ;_gead []int ;_bdbg *_cfb .Points ;_acedf *_cfb .Bitmaps ;_afcdd *_d .IntSlice ;_ggag ,_dgaa int ;
_aggeb *_cfb .Boxes ;};func (_bcf *GenericRegion )Init (h *Header ,r *_cfg .Reader )error {_bcf .RegionSegment =NewRegionSegment (r );_bcf ._fge =r ;return _bcf .parseHeader ();};func (_bbae *SymbolDictionary )setRefinementAtPixels ()error {if !_bbae .UseRefinementAggregation ||_bbae .SdrTemplate !=0{return nil ;
};if _fefd :=_bbae .readRefinementAtPixels (2);_fefd !=nil {return _fefd ;};return nil ;};func (_eceeg *GenericRegion )setParametersMMR (_fbbe bool ,_cddg ,_ebae int64 ,_fdca ,_fgaf uint32 ,_gca byte ,_egcge ,_eff bool ,_bgab ,_bdgf []int8 ){_eceeg .DataOffset =_cddg ;
_eceeg .DataLength =_ebae ;_eceeg .RegionSegment =&RegionSegment {};_eceeg .RegionSegment .BitmapHeight =_fdca ;_eceeg .RegionSegment .BitmapWidth =_fgaf ;_eceeg .GBTemplate =_gca ;_eceeg .IsMMREncoded =_fbbe ;_eceeg .IsTPGDon =_egcge ;_eceeg .GBAtX =_bgab ;
_eceeg .GBAtY =_bdgf ;};type template1 struct{};func (_dfga *RegionSegment )readCombinationOperator ()error {_efbe ,_cffa :=_dfga ._afcc .ReadBits (3);if _cffa !=nil {return _cffa ;};_dfga .CombinaionOperator =_cfb .CombinationOperator (_efbe &0xF);return nil ;
};func (_dafdg *SymbolDictionary )huffDecodeRefAggNInst ()(int64 ,error ){if !_dafdg .SdHuffAggInstanceSelection {_cbca ,_baga :=_e .GetStandardTable (1);if _baga !=nil {return 0,_baga ;};return _cbca .Decode (_dafdg ._cdbb );};if _dafdg ._cdfa ==nil {var (_geccc int ;
_gafbd error ;);if _dafdg .SdHuffDecodeHeightSelection ==3{_geccc ++;};if _dafdg .SdHuffDecodeWidthSelection ==3{_geccc ++;};if _dafdg .SdHuffBMSizeSelection ==3{_geccc ++;};_dafdg ._cdfa ,_gafbd =_dafdg .getUserTable (_geccc );if _gafbd !=nil {return 0,_gafbd ;
};};return _dafdg ._cdfa .Decode (_dafdg ._cdbb );};func (_fcce *PageInformationSegment )encodeStripingInformation (_gaba _cfg .BinaryWriter )(_ddbdf int ,_bcda error ){const _bgfc ="\u0065n\u0063\u006f\u0064\u0065S\u0074\u0072\u0069\u0070\u0069n\u0067I\u006ef\u006f\u0072\u006d\u0061\u0074\u0069\u006fn";
if !_fcce .IsStripe {if _ddbdf ,_bcda =_gaba .Write ([]byte {0x00,0x00});_bcda !=nil {return 0,_af .Wrap (_bcda ,_bgfc ,"n\u006f\u0020\u0073\u0074\u0072\u0069\u0070\u0069\u006e\u0067");};return _ddbdf ,nil ;};_efe :=make ([]byte ,2);_gdd .BigEndian .PutUint16 (_efe ,_fcce .MaxStripeSize |1<<15);
if _ddbdf ,_bcda =_gaba .Write (_efe );_bcda !=nil {return 0,_af .Wrapf (_bcda ,_bgfc ,"\u0073\u0074\u0072i\u0070\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_fcce .MaxStripeSize );};return _ddbdf ,nil ;};func (_gdad *SymbolDictionary )readNumberOfExportedSymbols ()error {_cebb ,_ffff :=_gdad ._cdbb .ReadBits (32);
if _ffff !=nil {return _ffff ;};_gdad .NumberOfExportedSymbols =uint32 (_cebb &_c .MaxUint32 );return nil ;};func (_edcd *TextRegion )encodeFlags (_egfef _cfg .BinaryWriter )(_ffabb int ,_afefe error ){const _ebgg ="e\u006e\u0063\u006f\u0064\u0065\u0046\u006c\u0061\u0067\u0073";
if _afefe =_egfef .WriteBit (int (_edcd .SbrTemplate ));_afefe !=nil {return _ffabb ,_af .Wrap (_afefe ,_ebgg ,"s\u0062\u0072\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065");};if _ ,_afefe =_egfef .WriteBits (uint64 (_edcd .SbDsOffset ),5);_afefe !=nil {return _ffabb ,_af .Wrap (_afefe ,_ebgg ,"\u0073\u0062\u0044\u0073\u004f\u0066\u0066\u0073\u0065\u0074");
};if _afefe =_egfef .WriteBit (int (_edcd .DefaultPixel ));_afefe !=nil {return _ffabb ,_af .Wrap (_afefe ,_ebgg ,"\u0044\u0065\u0066a\u0075\u006c\u0074\u0050\u0069\u0078\u0065\u006c");};if _ ,_afefe =_egfef .WriteBits (uint64 (_edcd .CombinationOperator ),2);
_afefe !=nil {return _ffabb ,_af .Wrap (_afefe ,_ebgg ,"\u0043\u006f\u006d\u0062in\u0061\u0074\u0069\u006f\u006e\u004f\u0070\u0065\u0072\u0061\u0074\u006f\u0072");};if _afefe =_egfef .WriteBit (int (_edcd .IsTransposed ));_afefe !=nil {return _ffabb ,_af .Wrap (_afefe ,_ebgg ,"\u0069\u0073\u0020\u0074\u0072\u0061\u006e\u0073\u0070\u006f\u0073\u0065\u0064");
};if _ ,_afefe =_egfef .WriteBits (uint64 (_edcd .ReferenceCorner ),2);_afefe !=nil {return _ffabb ,_af .Wrap (_afefe ,_ebgg ,"\u0072\u0065f\u0065\u0072\u0065n\u0063\u0065\u0020\u0063\u006f\u0072\u006e\u0065\u0072");};if _ ,_afefe =_egfef .WriteBits (uint64 (_edcd .LogSBStrips ),2);
_afefe !=nil {return _ffabb ,_af .Wrap (_afefe ,_ebgg ,"L\u006f\u0067\u0053\u0042\u0053\u0074\u0072\u0069\u0070\u0073");};var _ecef int ;if _edcd .UseRefinement {_ecef =1;};if _afefe =_egfef .WriteBit (_ecef );_afefe !=nil {return _ffabb ,_af .Wrap (_afefe ,_ebgg ,"\u0075\u0073\u0065\u0020\u0072\u0065\u0066\u0069\u006ee\u006d\u0065\u006e\u0074");
};_ecef =0;if _edcd .IsHuffmanEncoded {_ecef =1;};if _afefe =_egfef .WriteBit (_ecef );_afefe !=nil {return _ffabb ,_af .Wrap (_afefe ,_ebgg ,"u\u0073\u0065\u0020\u0068\u0075\u0066\u0066\u006d\u0061\u006e");};_ffabb =2;return _ffabb ,nil ;};func (_bfaf *PageInformationSegment )CombinationOperatorOverrideAllowed ()bool {return _bfaf ._fceb };
func (_facd *TableSegment )HtRS ()int32 {return _facd ._cdeda };func (_gggae *HalftoneRegion )computeX (_gdbe ,_ded int )int {return _gggae .shiftAndFill (int (_gggae .HGridX )+_gdbe *int (_gggae .HRegionY )+_ded *int (_gggae .HRegionX ));};func (_ffdg *SymbolDictionary )setAtPixels ()error {if _ffdg .IsHuffmanEncoded {return nil ;
};_ecea :=1;if _ffdg .SdTemplate ==0{_ecea =4;};if _eedf :=_ffdg .readAtPixels (_ecea );_eedf !=nil {return _eedf ;};return nil ;};func (_ccga *PageInformationSegment )encodeFlags (_fdf _cfg .BinaryWriter )(_afbe error ){const _bdga ="e\u006e\u0063\u006f\u0064\u0065\u0046\u006c\u0061\u0067\u0073";
if _afbe =_fdf .SkipBits (1);_afbe !=nil {return _af .Wrap (_afbe ,_bdga ,"\u0072\u0065\u0073e\u0072\u0076\u0065\u0064\u0020\u0062\u0069\u0074");};var _cbfc int ;if _ccga .CombinationOperatorOverrideAllowed (){_cbfc =1;};if _afbe =_fdf .WriteBit (_cbfc );
_afbe !=nil {return _af .Wrap (_afbe ,_bdga ,"\u0063\u006f\u006db\u0069\u006e\u0061\u0074i\u006f\u006e\u0020\u006f\u0070\u0065\u0072a\u0074\u006f\u0072\u0020\u006f\u0076\u0065\u0072\u0072\u0069\u0064\u0064\u0065\u006e");};_cbfc =0;if _ccga ._gbeg {_cbfc =1;
};if _afbe =_fdf .WriteBit (_cbfc );_afbe !=nil {return _af .Wrap (_afbe ,_bdga ,"\u0072e\u0071\u0075\u0069\u0072e\u0073\u0020\u0061\u0075\u0078i\u006ci\u0061r\u0079\u0020\u0062\u0075\u0066\u0066\u0065r");};if _afbe =_fdf .WriteBit ((int (_ccga ._fdaa )>>1)&0x01);
_afbe !=nil {return _af .Wrap (_afbe ,_bdga ,"\u0063\u006f\u006d\u0062\u0069\u006e\u0061\u0074\u0069\u006fn\u0020\u006f\u0070\u0065\u0072\u0061\u0074o\u0072\u0020\u0066\u0069\u0072\u0073\u0074\u0020\u0062\u0069\u0074");};if _afbe =_fdf .WriteBit (int (_ccga ._fdaa )&0x01);
_afbe !=nil {return _af .Wrap (_afbe ,_bdga ,"\u0063\u006f\u006db\u0069\u006e\u0061\u0074i\u006f\u006e\u0020\u006f\u0070\u0065\u0072a\u0074\u006f\u0072\u0020\u0073\u0065\u0063\u006f\u006e\u0064\u0020\u0062\u0069\u0074");};_cbfc =int (_ccga .DefaultPixelValue );
if _afbe =_fdf .WriteBit (_cbfc );_afbe !=nil {return _af .Wrap (_afbe ,_bdga ,"\u0064e\u0066\u0061\u0075\u006c\u0074\u0020\u0070\u0061\u0067\u0065\u0020p\u0069\u0078\u0065\u006c\u0020\u0076\u0061\u006c\u0075\u0065");};_cbfc =0;if _ccga ._afe {_cbfc =1;
};if _afbe =_fdf .WriteBit (_cbfc );_afbe !=nil {return _af .Wrap (_afbe ,_bdga ,"\u0063\u006f\u006e\u0074ai\u006e\u0073\u0020\u0072\u0065\u0066\u0069\u006e\u0065\u006d\u0065\u006e\u0074");};_cbfc =0;if _ccga .IsLossless {_cbfc =1;};if _afbe =_fdf .WriteBit (_cbfc );
_afbe !=nil {return _af .Wrap (_afbe ,_bdga ,"p\u0061\u0067\u0065\u0020\u0069\u0073 \u0065\u0076\u0065\u006e\u0074\u0075\u0061\u006c\u006cy\u0020\u006c\u006fs\u0073l\u0065\u0073\u0073");};return nil ;};func (_eegc *GenericRefinementRegion )setParameters (_afg *_cfd .DecoderStats ,_fbb *_cfd .Decoder ,_adbg int8 ,_bad ,_bee uint32 ,_agae *_cfb .Bitmap ,_gdg ,_fabg int32 ,_edf bool ,_bda []int8 ,_gbfc []int8 ){_ad .Log .Trace ("\u005b\u0047\u0045NE\u0052\u0049\u0043\u002d\u0052\u0045\u0046\u002d\u0052E\u0047I\u004fN\u005d \u0073\u0065\u0074\u0050\u0061\u0072\u0061\u006d\u0065\u0074\u0065\u0072\u0073");
if _afg !=nil {_eegc ._gbc =_afg ;};if _fbb !=nil {_eegc ._ca =_fbb ;};_eegc .TemplateID =_adbg ;_eegc .RegionInfo .BitmapWidth =_bad ;_eegc .RegionInfo .BitmapHeight =_bee ;_eegc .ReferenceBitmap =_agae ;_eegc .ReferenceDX =_gdg ;_eegc .ReferenceDY =_fabg ;
_eegc .IsTPGROn =_edf ;_eegc .GrAtX =_bda ;_eegc .GrAtY =_gbfc ;_eegc .RegionBitmap =nil ;_ad .Log .Trace ("[\u0047\u0045\u004e\u0045\u0052\u0049\u0043\u002d\u0052E\u0046\u002d\u0052\u0045\u0047\u0049\u004fN]\u0020\u0073\u0065\u0074P\u0061\u0072\u0061\u006d\u0065\u0074\u0065\u0072\u0073 f\u0069\u006ei\u0073\u0068\u0065\u0064\u002e\u0020\u0025\u0073",_eegc );
};type Documenter interface{GetPage (int )(Pager ,error );GetGlobalSegment (int )(*Header ,error );};func (_bgga *TableSegment )HtLow ()int32 {return _bgga ._gadec };func (_bdaa *HalftoneRegion )GetRegionBitmap ()(*_cfb .Bitmap ,error ){if _bdaa .HalftoneRegionBitmap !=nil {return _bdaa .HalftoneRegionBitmap ,nil ;
};var _cee error ;_bdaa .HalftoneRegionBitmap =_cfb .New (int (_bdaa .RegionSegment .BitmapWidth ),int (_bdaa .RegionSegment .BitmapHeight ));if _bdaa .Patterns ==nil ||(_bdaa .Patterns !=nil &&len (_bdaa .Patterns )==0){_bdaa .Patterns ,_cee =_bdaa .GetPatterns ();
if _cee !=nil {return nil ,_cee ;};};if _bdaa .HDefaultPixel ==1{_bdaa .HalftoneRegionBitmap .SetDefaultPixel ();};_feba :=_c .Ceil (_c .Log (float64 (len (_bdaa .Patterns )))/_c .Log (2));_fabf :=int (_feba );var _gfe [][]int ;_gfe ,_cee =_bdaa .grayScaleDecoding (_fabf );
if _cee !=nil {return nil ,_cee ;};if _cee =_bdaa .renderPattern (_gfe );_cee !=nil {return nil ,_cee ;};return _bdaa .HalftoneRegionBitmap ,nil ;};func (_fgae *PatternDictionary )parseHeader ()error {_ad .Log .Trace ("\u005b\u0050\u0041\u0054\u0054\u0045\u0052\u004e\u002d\u0044\u0049\u0043\u0054I\u004f\u004e\u0041\u0052\u0059\u005d[\u0070\u0061\u0072\u0073\u0065\u0048\u0065\u0061\u0064\u0065\u0072\u005d\u0020b\u0065\u0067\u0069\u006e");
defer func (){_ad .Log .Trace ("\u005b\u0050\u0041T\u0054\u0045\u0052\u004e\u002d\u0044\u0049\u0043\u0054\u0049\u004f\u004e\u0041\u0052\u0059\u005d\u005b\u0070\u0061\u0072\u0073\u0065\u0048\u0065\u0061\u0064\u0065\u0072\u005d \u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064");
}();_ ,_degb :=_fgae ._caefb .ReadBits (5);if _degb !=nil {return _degb ;};if _degb =_fgae .readTemplate ();_degb !=nil {return _degb ;};if _degb =_fgae .readIsMMREncoded ();_degb !=nil {return _degb ;};if _degb =_fgae .readPatternWidthAndHeight ();_degb !=nil {return _degb ;
};if _degb =_fgae .readGrayMax ();_degb !=nil {return _degb ;};if _degb =_fgae .computeSegmentDataStructure ();_degb !=nil {return _degb ;};return _fgae .checkInput ();};func (_gcab *PatternDictionary )setGbAtPixels (){if _gcab .HDTemplate ==0{_gcab .GBAtX =make ([]int8 ,4);
_gcab .GBAtY =make ([]int8 ,4);_gcab .GBAtX [0]=-int8 (_gcab .HdpWidth );_gcab .GBAtY [0]=0;_gcab .GBAtX [1]=-3;_gcab .GBAtY [1]=-1;_gcab .GBAtX [2]=2;_gcab .GBAtY [2]=-2;_gcab .GBAtX [3]=-2;_gcab .GBAtY [3]=-2;}else {_gcab .GBAtX =[]int8 {-int8 (_gcab .HdpWidth )};
_gcab .GBAtY =[]int8 {0};};};type SegmentEncoder interface{Encode (_gfa _cfg .BinaryWriter )(_ggd int ,_bfgee error );};func (_deag *PatternDictionary )Init (h *Header ,r *_cfg .Reader )error {_deag ._caefb =r ;return _deag .parseHeader ();};func (_gffd *TextRegion )decodeIds ()(int64 ,error ){const _fede ="\u0064e\u0063\u006f\u0064\u0065\u0049\u0064s";
if _gffd .IsHuffmanEncoded {if _gffd .SbHuffDS ==3{if _gffd ._faed ==nil {_ebdga :=0;if _gffd .SbHuffFS ==3{_ebdga ++;};var _gabd error ;_gffd ._faed ,_gabd =_gffd .getUserTable (_ebdga );if _gabd !=nil {return 0,_af .Wrap (_gabd ,_fede ,"");};};return _gffd ._faed .Decode (_gffd ._gabc );
};_fgdc ,_faae :=_e .GetStandardTable (8+int (_gffd .SbHuffDS ));if _faae !=nil {return 0,_af .Wrap (_faae ,_fede ,"");};return _fgdc .Decode (_gffd ._gabc );};_bbbe ,_cbgfd :=_gffd ._cfcgd .DecodeInt (_gffd ._efcff );if _cbgfd !=nil {return 0,_af .Wrap (_cbgfd ,_fede ,"\u0063\u0078\u0049\u0041\u0044\u0053");
};return int64 (_bbbe ),nil ;};func (_gbfbd *HalftoneRegion )GetRegionInfo ()*RegionSegment {return _gbfbd .RegionSegment };func (_dgeb *Header )Encode (w _cfg .BinaryWriter )(_eddb int ,_ggece error ){const _bddgg ="\u0048\u0065\u0061d\u0065\u0072\u002e\u0057\u0072\u0069\u0074\u0065";
var _gbd _cfg .BinaryWriter ;_ad .Log .Trace ("\u005b\u0053\u0045G\u004d\u0045\u004e\u0054-\u0048\u0045\u0041\u0044\u0045\u0052\u005d[\u0045\u004e\u0043\u004f\u0044\u0045\u005d\u0020\u0042\u0065\u0067\u0069\u006e\u0073");defer func (){if _ggece !=nil {_ad .Log .Trace ("[\u0053\u0045\u0047\u004d\u0045\u004eT\u002d\u0048\u0045\u0041\u0044\u0045R\u005d\u005b\u0045\u004e\u0043\u004f\u0044E\u005d\u0020\u0046\u0061\u0069\u006c\u0065\u0064\u002e\u0020%\u0076",_ggece );
}else {_ad .Log .Trace ("\u005b\u0053\u0045\u0047ME\u004e\u0054\u002d\u0048\u0045\u0041\u0044\u0045\u0052\u005d\u0020\u0025\u0076",_dgeb );_ad .Log .Trace ("\u005b\u0053\u0045\u0047\u004d\u0045N\u0054\u002d\u0048\u0045\u0041\u0044\u0045\u0052\u005d\u005b\u0045\u004e\u0043O\u0044\u0045\u005d\u0020\u0046\u0069\u006ei\u0073\u0068\u0065\u0064");
};}();w .FinishByte ();if _dgeb .SegmentData !=nil {_edga ,_egfe :=_dgeb .SegmentData .(SegmentEncoder );if !_egfe {return 0,_af .Errorf (_bddgg ,"\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u003a\u0020\u0025\u0054\u0020\u0064\u006f\u0065s\u006e\u0027\u0074\u0020\u0069\u006d\u0070\u006c\u0065\u006d\u0065\u006e\u0074 \u0053\u0065\u0067\u006d\u0065\u006e\u0074\u0045\u006e\u0063\u006f\u0064er\u0020\u0069\u006e\u0074\u0065\u0072\u0066\u0061\u0063\u0065",_dgeb .SegmentData );
};_gbd =_cfg .BufferedMSB ();_eddb ,_ggece =_edga .Encode (_gbd );if _ggece !=nil {return 0,_af .Wrap (_ggece ,_bddgg ,"");};_dgeb .SegmentDataLength =uint64 (_eddb );};if _dgeb .pageSize ()==4{_dgeb .PageAssociationFieldSize =true ;};var _fgee int ;_fgee ,_ggece =_dgeb .writeSegmentNumber (w );
if _ggece !=nil {return 0,_af .Wrap (_ggece ,_bddgg ,"");};_eddb +=_fgee ;if _ggece =_dgeb .writeFlags (w );_ggece !=nil {return _eddb ,_af .Wrap (_ggece ,_bddgg ,"");};_eddb ++;_fgee ,_ggece =_dgeb .writeReferredToCount (w );if _ggece !=nil {return 0,_af .Wrap (_ggece ,_bddgg ,"");
};_eddb +=_fgee ;_fgee ,_ggece =_dgeb .writeReferredToSegments (w );if _ggece !=nil {return 0,_af .Wrap (_ggece ,_bddgg ,"");};_eddb +=_fgee ;_fgee ,_ggece =_dgeb .writeSegmentPageAssociation (w );if _ggece !=nil {return 0,_af .Wrap (_ggece ,_bddgg ,"");
};_eddb +=_fgee ;_fgee ,_ggece =_dgeb .writeSegmentDataLength (w );if _ggece !=nil {return 0,_af .Wrap (_ggece ,_bddgg ,"");};_eddb +=_fgee ;_dgeb .HeaderLength =int64 (_eddb )-int64 (_dgeb .SegmentDataLength );if _gbd !=nil {if _ ,_ggece =w .Write (_gbd .Data ());
_ggece !=nil {return _eddb ,_af .Wrap (_ggece ,_bddgg ,"\u0077r\u0069t\u0065\u0020\u0073\u0065\u0067m\u0065\u006et\u0020\u0064\u0061\u0074\u0061");};};return _eddb ,nil ;};func (_ccde *Header )String ()string {_ebga :=&_cf .Builder {};_ebga .WriteString ("\u000a[\u0053E\u0047\u004d\u0045\u004e\u0054-\u0048\u0045A\u0044\u0045\u0052\u005d\u000a");
_ebga .WriteString (_a .Sprintf ("\t\u002d\u0020\u0053\u0065gm\u0065n\u0074\u004e\u0075\u006d\u0062e\u0072\u003a\u0020\u0025\u0076\u000a",_ccde .SegmentNumber ));_ebga .WriteString (_a .Sprintf ("\u0009\u002d\u0020T\u0079\u0070\u0065\u003a\u0020\u0025\u0076\u000a",_ccde .Type ));
_ebga .WriteString (_a .Sprintf ("\u0009-\u0020R\u0065\u0074\u0061\u0069\u006eF\u006c\u0061g\u003a\u0020\u0025\u0076\u000a",_ccde .RetainFlag ));_ebga .WriteString (_a .Sprintf ("\u0009\u002d\u0020Pa\u0067\u0065\u0041\u0073\u0073\u006f\u0063\u0069\u0061\u0074\u0069\u006f\u006e\u003a\u0020\u0025\u0076\u000a",_ccde .PageAssociation ));
_ebga .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u0050\u0061\u0067\u0065\u0041\u0073\u0073\u006f\u0063\u0069\u0061\u0074i\u006fn\u0046\u0069\u0065\u006c\u0064\u0053\u0069\u007a\u0065\u003a\u0020\u0025\u0076\u000a",_ccde .PageAssociationFieldSize ));
_ebga .WriteString ("\u0009-\u0020R\u0054\u0053\u0045\u0047\u004d\u0045\u004e\u0054\u0053\u003a\u000a");for _ ,_bedb :=range _ccde .RTSNumbers {_ebga .WriteString (_a .Sprintf ("\u0009\t\u002d\u0020\u0025\u0064\u000a",_bedb ));};_ebga .WriteString (_a .Sprintf ("\t\u002d \u0048\u0065\u0061\u0064\u0065\u0072\u004c\u0065n\u0067\u0074\u0068\u003a %\u0076\u000a",_ccde .HeaderLength ));
_ebga .WriteString (_a .Sprintf ("\u0009-\u0020\u0053\u0065\u0067m\u0065\u006e\u0074\u0044\u0061t\u0061L\u0065n\u0067\u0074\u0068\u003a\u0020\u0025\u0076\n",_ccde .SegmentDataLength ));_ebga .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u0053\u0065\u0067\u006d\u0065\u006e\u0074D\u0061\u0074\u0061\u0053\u0074\u0061\u0072t\u004f\u0066\u0066\u0073\u0065\u0074\u003a\u0020\u0025\u0076\u000a",_ccde .SegmentDataStartOffset ));
return _ebga .String ();};func (_bgddb *SymbolDictionary )getToExportFlags ()([]int ,error ){var (_gagb int ;_dfda int32 ;_aadca error ;_eaddc =int32 (_bgddb ._bdea +_bgddb .NumberOfNewSymbols );_dacb =make ([]int ,_eaddc ););for _dgfc :=int32 (0);_dgfc < _eaddc ;
_dgfc +=_dfda {if _bgddb .IsHuffmanEncoded {_bafa ,_adba :=_e .GetStandardTable (1);if _adba !=nil {return nil ,_adba ;};_afefb ,_adba :=_bafa .Decode (_bgddb ._cdbb );if _adba !=nil {return nil ,_adba ;};_dfda =int32 (_afefb );}else {_dfda ,_aadca =_bgddb ._cbgf .DecodeInt (_bgddb ._dfbb );
if _aadca !=nil {return nil ,_aadca ;};};if _dfda !=0{if _dgfc +_dfda > _eaddc {return nil ,_af .Error ("\u0053\u0079\u006d\u0062\u006f\u006cD\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u002e\u0067\u0065\u0074T\u006f\u0045\u0078\u0070\u006f\u0072\u0074F\u006c\u0061\u0067\u0073","\u006d\u0061\u006c\u0066\u006f\u0072m\u0065\u0064\u0020\u0069\u006e\u0070\u0075\u0074\u0020\u0064\u0061\u0074\u0061\u0020\u0070\u0072\u006f\u0076\u0069\u0064e\u0064\u002e\u0020\u0069\u006e\u0064\u0065\u0078\u0020\u006f\u0075\u0074\u0020\u006ff\u0020r\u0061\u006e\u0067\u0065");
};for _cddac :=_dgfc ;_cddac < _dgfc +_dfda ;_cddac ++{_dacb [_cddac ]=_gagb ;};};if _gagb ==0{_gagb =1;}else {_gagb =0;};};return _dacb ,nil ;};func (_fdad *TableSegment )HtOOB ()int32 {return _fdad ._bdgd };func (_deggf *TextRegion )decodeCurrentT ()(int64 ,error ){if _deggf .SbStrips !=1{if _deggf .IsHuffmanEncoded {_dbfbb ,_gbgab :=_deggf ._gabc .ReadBits (byte (_deggf .LogSBStrips ));
return int64 (_dbfbb ),_gbgab ;};_fccec ,_aedf :=_deggf ._cfcgd .DecodeInt (_deggf ._gafgc );if _aedf !=nil {return 0,_aedf ;};return int64 (_fccec ),nil ;};return 0,nil ;};var _ SegmentEncoder =&RegionSegment {};func (_gb *EndOfStripe )parseHeader ()error {_afd ,_ed :=_gb ._cfc .ReadBits (32);
if _ed !=nil {return _ed ;};_gb ._ee =int (_afd &_c .MaxInt32 );return nil ;};func (_dec *GenericRefinementRegion )getPixel (_ceff *_cfb .Bitmap ,_fdcg ,_eba int )int {if _fdcg < 0||_fdcg >=_ceff .Width {return 0;};if _eba < 0||_eba >=_ceff .Height {return 0;
};if _ceff .GetPixel (_fdcg ,_eba ){return 1;};return 0;};func (_ffgf *GenericRegion )overrideAtTemplate0a (_efac ,_aadc ,_gecc ,_feedf ,_bege ,_bgf int )int {if _ffgf .GBAtOverride [0]{_efac &=0xFFEF;if _ffgf .GBAtY [0]==0&&_ffgf .GBAtX [0]>=-int8 (_bege ){_efac |=(_feedf >>uint (int8 (_bgf )-_ffgf .GBAtX [0]&0x1))<<4;
}else {_efac |=int (_ffgf .getPixel (_aadc +int (_ffgf .GBAtX [0]),_gecc +int (_ffgf .GBAtY [0])))<<4;};};if _ffgf .GBAtOverride [1]{_efac &=0xFBFF;if _ffgf .GBAtY [1]==0&&_ffgf .GBAtX [1]>=-int8 (_bege ){_efac |=(_feedf >>uint (int8 (_bgf )-_ffgf .GBAtX [1]&0x1))<<10;
}else {_efac |=int (_ffgf .getPixel (_aadc +int (_ffgf .GBAtX [1]),_gecc +int (_ffgf .GBAtY [1])))<<10;};};if _ffgf .GBAtOverride [2]{_efac &=0xF7FF;if _ffgf .GBAtY [2]==0&&_ffgf .GBAtX [2]>=-int8 (_bege ){_efac |=(_feedf >>uint (int8 (_bgf )-_ffgf .GBAtX [2]&0x1))<<11;
}else {_efac |=int (_ffgf .getPixel (_aadc +int (_ffgf .GBAtX [2]),_gecc +int (_ffgf .GBAtY [2])))<<11;};};if _ffgf .GBAtOverride [3]{_efac &=0x7FFF;if _ffgf .GBAtY [3]==0&&_ffgf .GBAtX [3]>=-int8 (_bege ){_efac |=(_feedf >>uint (int8 (_bgf )-_ffgf .GBAtX [3]&0x1))<<15;
}else {_efac |=int (_ffgf .getPixel (_aadc +int (_ffgf .GBAtX [3]),_gecc +int (_ffgf .GBAtY [3])))<<15;};};return _efac ;};func (_debg *TextRegion )setParameters (_gbdg *_cfd .Decoder ,_cgfba ,_ccfec bool ,_fgc ,_abdg uint32 ,_fccca uint32 ,_gdag int8 ,_aggfa uint32 ,_cddc int8 ,_ggfg _cfb .CombinationOperator ,_cgda int8 ,_ccae int16 ,_dccg ,_afdgg ,_feedb ,_ecb ,_agdcf ,_fdcad ,_edbe ,_fafc ,_gfcd ,_cbga int8 ,_fcab ,_bebdc []int8 ,_efcfd []*_cfb .Bitmap ,_feef int8 ){_debg ._cfcgd =_gbdg ;
_debg .IsHuffmanEncoded =_cgfba ;_debg .UseRefinement =_ccfec ;_debg .RegionInfo .BitmapWidth =_fgc ;_debg .RegionInfo .BitmapHeight =_abdg ;_debg .NumberOfSymbolInstances =_fccca ;_debg .SbStrips =_gdag ;_debg .NumberOfSymbols =_aggfa ;_debg .DefaultPixel =_cddc ;
_debg .CombinationOperator =_ggfg ;_debg .IsTransposed =_cgda ;_debg .ReferenceCorner =_ccae ;_debg .SbDsOffset =_dccg ;_debg .SbHuffFS =_afdgg ;_debg .SbHuffDS =_feedb ;_debg .SbHuffDT =_ecb ;_debg .SbHuffRDWidth =_agdcf ;_debg .SbHuffRDHeight =_fdcad ;
_debg .SbHuffRSize =_gfcd ;_debg .SbHuffRDX =_edbe ;_debg .SbHuffRDY =_fafc ;_debg .SbrTemplate =_cbga ;_debg .SbrATX =_fcab ;_debg .SbrATY =_bebdc ;_debg .Symbols =_efcfd ;_debg ._egfa =_feef ;};func (_afbg *Header )referenceSize ()uint {switch {case _afbg .SegmentNumber <=255:return 1;
case _afbg .SegmentNumber <=65535:return 2;default:return 4;};};func (_beff *Header )writeFlags (_fagc _cfg .BinaryWriter )(_dag error ){const _cge ="\u0048\u0065\u0061\u0064\u0065\u0072\u002e\u0077\u0072\u0069\u0074\u0065F\u006c\u0061\u0067\u0073";_bddc :=byte (_beff .Type );
if _dag =_fagc .WriteByte (_bddc );_dag !=nil {return _af .Wrap (_dag ,_cge ,"\u0077\u0072\u0069ti\u006e\u0067\u0020\u0073\u0065\u0067\u006d\u0065\u006et\u0020t\u0079p\u0065 \u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0066\u0061\u0069\u006c\u0065\u0064");
};if !_beff .RetainFlag &&!_beff .PageAssociationFieldSize {return nil ;};if _dag =_fagc .SkipBits (-8);_dag !=nil {return _af .Wrap (_dag ,_cge ,"\u0073\u006bi\u0070\u0070\u0069\u006e\u0067\u0020\u0062\u0061\u0063\u006b\u0020\u0074\u0068\u0065\u0020\u0062\u0069\u0074\u0073\u0020\u0066\u0061il\u0065\u0064");
};var _gcdf int ;if _beff .RetainFlag {_gcdf =1;};if _dag =_fagc .WriteBit (_gcdf );_dag !=nil {return _af .Wrap (_dag ,_cge ,"\u0072\u0065\u0074\u0061in\u0020\u0072\u0065\u0074\u0061\u0069\u006e\u0020\u0066\u006c\u0061\u0067\u0073");};_gcdf =0;if _beff .PageAssociationFieldSize {_gcdf =1;
};if _dag =_fagc .WriteBit (_gcdf );_dag !=nil {return _af .Wrap (_dag ,_cge ,"p\u0061\u0067\u0065\u0020as\u0073o\u0063\u0069\u0061\u0074\u0069o\u006e\u0020\u0066\u006c\u0061\u0067");};_fagc .FinishByte ();return nil ;};func (_ggfd *Header )readSegmentNumber (_aacc *_cfg .Reader )error {const _cfea ="\u0072\u0065\u0061\u0064\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u004eu\u006d\u0062\u0065\u0072";
_cdcb :=make ([]byte ,4);_ ,_cbb :=_aacc .Read (_cdcb );if _cbb !=nil {return _af .Wrap (_cbb ,_cfea ,"");};_ggfd .SegmentNumber =_gdd .BigEndian .Uint32 (_cdcb );return nil ;};func (_dacg *PageInformationSegment )String ()string {_fbd :=&_cf .Builder {};
_fbd .WriteString ("\u000a\u005b\u0050\u0041G\u0045\u002d\u0049\u004e\u0046\u004f\u0052\u004d\u0041\u0054I\u004fN\u002d\u0053\u0045\u0047\u004d\u0045\u004eT\u005d\u000a");_fbd .WriteString (_a .Sprintf ("\u0009\u002d \u0042\u004d\u0048e\u0069\u0067\u0068\u0074\u003a\u0020\u0025\u0064\u000a",_dacg .PageBMHeight ));
_fbd .WriteString (_a .Sprintf ("\u0009-\u0020B\u004d\u0057\u0069\u0064\u0074\u0068\u003a\u0020\u0025\u0064\u000a",_dacg .PageBMWidth ));_fbd .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u0052es\u006f\u006c\u0075\u0074\u0069\u006f\u006e\u0058\u003a\u0020\u0025\u0064\u000a",_dacg .ResolutionX ));
_fbd .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u0052es\u006f\u006c\u0075\u0074\u0069\u006f\u006e\u0059\u003a\u0020\u0025\u0064\u000a",_dacg .ResolutionY ));_fbd .WriteString (_a .Sprintf ("\t\u002d\u0020\u0043\u006f\u006d\u0062i\u006e\u0061\u0074\u0069\u006f\u006e\u004f\u0070\u0065r\u0061\u0074\u006fr\u003a \u0025\u0073\u000a",_dacg ._fdaa ));
_fbd .WriteString (_a .Sprintf ("\t\u002d\u0020\u0043\u006f\u006d\u0062i\u006e\u0061\u0074\u0069\u006f\u006eO\u0070\u0065\u0072\u0061\u0074\u006f\u0072O\u0076\u0065\u0072\u0072\u0069\u0064\u0065\u003a\u0020\u0025v\u000a",_dacg ._fceb ));_fbd .WriteString (_a .Sprintf ("\u0009-\u0020I\u0073\u004c\u006f\u0073\u0073l\u0065\u0073s\u003a\u0020\u0025\u0076\u000a",_dacg .IsLossless ));
_fbd .WriteString (_a .Sprintf ("\u0009\u002d\u0020R\u0065\u0071\u0075\u0069r\u0065\u0073\u0041\u0075\u0078\u0069\u006ci\u0061\u0072\u0079\u0042\u0075\u0066\u0066\u0065\u0072\u003a\u0020\u0025\u0076\u000a",_dacg ._gbeg ));_fbd .WriteString (_a .Sprintf ("\u0009\u002d\u0020M\u0069\u0067\u0068\u0074C\u006f\u006e\u0074\u0061\u0069\u006e\u0052e\u0066\u0069\u006e\u0065\u006d\u0065\u006e\u0074\u0073\u003a\u0020\u0025\u0076\u000a",_dacg ._afe ));
_fbd .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u0049\u0073\u0053\u0074\u0072\u0069\u0070\u0065\u0064:\u0020\u0025\u0076\u000a",_dacg .IsStripe ));_fbd .WriteString (_a .Sprintf ("\t\u002d\u0020\u004d\u0061xS\u0074r\u0069\u0070\u0065\u0053\u0069z\u0065\u003a\u0020\u0025\u0076\u000a",_dacg .MaxStripeSize ));
return _fbd .String ();};func (_gdf *GenericRefinementRegion )GetRegionBitmap ()(*_cfb .Bitmap ,error ){var _fe error ;_ad .Log .Trace ("\u005b\u0047E\u004e\u0045\u0052\u0049\u0043\u002d\u0052\u0045\u0046\u002d\u0052\u0045\u0047\u0049\u004f\u004e\u005d\u0020\u0047\u0065\u0074\u0052\u0065\u0067\u0069\u006f\u006e\u0042\u0069\u0074\u006d\u0061\u0070\u0020\u0062\u0065\u0067\u0069\u006e\u0073\u002e\u002e\u002e");
defer func (){if _fe !=nil {_ad .Log .Trace ("[\u0047\u0045\u004e\u0045\u0052\u0049\u0043\u002d\u0052E\u0046\u002d\u0052\u0045\u0047\u0049\u004fN]\u0020\u0047\u0065\u0074R\u0065\u0067\u0069\u006f\u006e\u0042\u0069\u0074\u006dap\u0020\u0066a\u0069\u006c\u0065\u0064\u002e\u0020\u0025\u0076",_fe );
}else {_ad .Log .Trace ("\u005b\u0047E\u004e\u0045\u0052\u0049\u0043\u002d\u0052\u0045\u0046\u002d\u0052\u0045\u0047\u0049\u004f\u004e\u005d\u0020\u0047\u0065\u0074\u0052\u0065\u0067\u0069\u006f\u006e\u0042\u0069\u0074\u006d\u0061\u0070\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
};}();if _gdf .RegionBitmap !=nil {return _gdf .RegionBitmap ,nil ;};_dd :=0;if _gdf .ReferenceBitmap ==nil {_gdf .ReferenceBitmap ,_fe =_gdf .getGrReference ();if _fe !=nil {return nil ,_fe ;};};if _gdf ._ca ==nil {_gdf ._ca ,_fe =_cfd .New (_gdf ._ag );
if _fe !=nil {return nil ,_fe ;};};if _gdf ._gbc ==nil {_gdf ._gbc =_cfd .NewStats (8192,1);};_gdf .RegionBitmap =_cfb .New (int (_gdf .RegionInfo .BitmapWidth ),int (_gdf .RegionInfo .BitmapHeight ));if _gdf .TemplateID ==0{if _fe =_gdf .updateOverride ();
_fe !=nil {return nil ,_fe ;};};_bg :=(_gdf .RegionBitmap .Width +7)&-8;var _eb int ;if _gdf .IsTPGROn {_eb =int (-_gdf .ReferenceDY )*_gdf .ReferenceBitmap .RowStride ;};_cd :=_eb +1;for _ae :=0;_ae < _gdf .RegionBitmap .Height ;_ae ++{if _gdf .IsTPGROn {_dbf ,_agd :=_gdf .decodeSLTP ();
if _agd !=nil {return nil ,_agd ;};_dd ^=_dbf ;};if _dd ==0{_fe =_gdf .decodeOptimized (_ae ,_gdf .RegionBitmap .Width ,_gdf .RegionBitmap .RowStride ,_gdf .ReferenceBitmap .RowStride ,_bg ,_eb ,_cd );if _fe !=nil {return nil ,_fe ;};}else {_fe =_gdf .decodeTypicalPredictedLine (_ae ,_gdf .RegionBitmap .Width ,_gdf .RegionBitmap .RowStride ,_gdf .ReferenceBitmap .RowStride ,_bg ,_eb );
if _fe !=nil {return nil ,_fe ;};};};return _gdf .RegionBitmap ,nil ;};func (_efda *TextRegion )computeSymbolCodeLength ()error {if _efda .IsHuffmanEncoded {return _efda .symbolIDCodeLengths ();};_efda ._egfa =int8 (_c .Ceil (_c .Log (float64 (_efda .NumberOfSymbols ))/_c .Log (2)));
return nil ;};func (_cebf *Header )GetSegmentData ()(Segmenter ,error ){var _feeg Segmenter ;if _cebf .SegmentData !=nil {_feeg =_cebf .SegmentData ;};if _feeg ==nil {_eab ,_gacce :=_dgg [_cebf .Type ];if !_gacce {return nil ,_a .Errorf ("\u0074\u0079\u0070\u0065\u003a\u0020\u0025\u0073\u002f\u0020\u0025\u0064\u0020\u0063\u0072e\u0061t\u006f\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e\u0020",_cebf .Type ,_cebf .Type );
};_feeg =_eab ();_ad .Log .Trace ("\u005b\u0053E\u0047\u004d\u0045\u004e\u0054-\u0048\u0045\u0041\u0044\u0045R\u005d\u005b\u0023\u0025\u0064\u005d\u0020\u0047\u0065\u0074\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u0044\u0061\u0074\u0061\u0020\u0061\u0074\u0020\u004f\u0066\u0066\u0073\u0065\u0074\u003a\u0020\u0025\u0030\u0034\u0058",_cebf .SegmentNumber ,_cebf .SegmentDataStartOffset );
_aggf ,_fae :=_cebf .subInputReader ();if _fae !=nil {return nil ,_fae ;};if _ccdg :=_feeg .Init (_cebf ,_aggf );_ccdg !=nil {_ad .Log .Debug ("\u0049\u006e\u0069\u0074 \u0066\u0061\u0069\u006c\u0065\u0064\u003a\u0020\u0025\u0076 \u0066o\u0072\u0020\u0074\u0079\u0070\u0065\u003a \u0025\u0054",_ccdg ,_feeg );
return nil ,_ccdg ;};_cebf .SegmentData =_feeg ;};return _feeg ,nil ;};func _ddd (_dbb *_cfg .Reader ,_cce *Header )*GenericRefinementRegion {return &GenericRefinementRegion {_ag :_dbb ,RegionInfo :NewRegionSegment (_dbb ),_da :_cce ,_gf :&template0 {},_fca :&template1 {}};
};func (_cbeg *HalftoneRegion )computeGrayScalePlanes (_beb []*_cfb .Bitmap ,_fgg int )([][]int ,error ){_efd :=make ([][]int ,_cbeg .HGridHeight );for _dcdg :=0;_dcdg < len (_efd );_dcdg ++{_efd [_dcdg ]=make ([]int ,_cbeg .HGridWidth );};for _caca :=0;
_caca < int (_cbeg .HGridHeight );_caca ++{for _bbe :=0;_bbe < int (_cbeg .HGridWidth );_bbe +=8{var _bed int ;if _adbc :=int (_cbeg .HGridWidth )-_bbe ;_adbc > 8{_bed =8;}else {_bed =_adbc ;};_ddfg :=_beb [0].GetByteIndex (_bbe ,_caca );for _bba :=0;_bba < _bed ;
_bba ++{_gbfa :=_bba +_bbe ;_efd [_caca ][_gbfa ]=0;for _gaef :=0;_gaef < _fgg ;_gaef ++{_ecdc ,_fagd :=_beb [_gaef ].GetByte (_ddfg );if _fagd !=nil {return nil ,_fagd ;};_cfge :=_ecdc >>uint (7-_gbfa &7);_gcde :=_cfge &1;_efag :=1<<uint (_gaef );_beea :=int (_gcde )*_efag ;
_efd [_caca ][_gbfa ]+=_beea ;};};};};return _efd ,nil ;};func (_gfegf *TextRegion )decodeRdx ()(int64 ,error ){const _ffab ="\u0064e\u0063\u006f\u0064\u0065\u0052\u0064x";if _gfegf .IsHuffmanEncoded {if _gfegf .SbHuffRDX ==3{if _gfegf ._egce ==nil {var (_edbba int ;
_abcg error ;);if _gfegf .SbHuffFS ==3{_edbba ++;};if _gfegf .SbHuffDS ==3{_edbba ++;};if _gfegf .SbHuffDT ==3{_edbba ++;};if _gfegf .SbHuffRDWidth ==3{_edbba ++;};if _gfegf .SbHuffRDHeight ==3{_edbba ++;};_gfegf ._egce ,_abcg =_gfegf .getUserTable (_edbba );
if _abcg !=nil {return 0,_af .Wrap (_abcg ,_ffab ,"");};};return _gfegf ._egce .Decode (_gfegf ._gabc );};_adaba ,_eafb :=_e .GetStandardTable (14+int (_gfegf .SbHuffRDX ));if _eafb !=nil {return 0,_af .Wrap (_eafb ,_ffab ,"");};return _adaba .Decode (_gfegf ._gabc );
};_dabf ,_bebce :=_gfegf ._cfcgd .DecodeInt (_gfegf ._fafdf );if _bebce !=nil {return 0,_af .Wrap (_bebce ,_ffab ,"");};return int64 (_dabf ),nil ;};func (_eed *PageInformationSegment )Size ()int {return 19};func (_eea *GenericRegion )parseHeader ()(_fbe error ){_ad .Log .Trace ("\u005b\u0047\u0045\u004e\u0045\u0052I\u0043\u002d\u0052\u0045\u0047\u0049\u004f\u004e\u005d\u0020\u0050\u0061\u0072s\u0069\u006e\u0067\u0048\u0065\u0061\u0064e\u0072\u002e\u002e\u002e");
defer func (){if _fbe !=nil {_ad .Log .Trace ("\u005b\u0047\u0045\u004e\u0045\u0052\u0049\u0043\u002d\u0052\u0045\u0047\u0049\u004f\u004e]\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0048\u0065\u0061\u0064\u0065r\u0020\u0046\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u0020\u0077\u0069th\u0020\u0065\u0072\u0072\u006f\u0072\u002e\u0020\u0025\u0076",_fbe );
}else {_ad .Log .Trace ("\u005b\u0047\u0045\u004e\u0045\u0052\u0049C\u002d\u0052\u0045G\u0049\u004f\u004e]\u0020\u0050a\u0072\u0073\u0069\u006e\u0067\u0048e\u0061de\u0072\u0020\u0046\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u0020\u0053\u0075\u0063\u0063\u0065\u0073\u0073\u0066\u0075\u006c\u006c\u0079\u002e\u002e\u002e");
};}();var (_efg int ;_cdd uint64 ;);if _fbe =_eea .RegionSegment .parseHeader ();_fbe !=nil {return _fbe ;};if _ ,_fbe =_eea ._fge .ReadBits (3);_fbe !=nil {return _fbe ;};_efg ,_fbe =_eea ._fge .ReadBit ();if _fbe !=nil {return _fbe ;};if _efg ==1{_eea .UseExtTemplates =true ;
};_efg ,_fbe =_eea ._fge .ReadBit ();if _fbe !=nil {return _fbe ;};if _efg ==1{_eea .IsTPGDon =true ;};_cdd ,_fbe =_eea ._fge .ReadBits (2);if _fbe !=nil {return _fbe ;};_eea .GBTemplate =byte (_cdd &0xf);_efg ,_fbe =_eea ._fge .ReadBit ();if _fbe !=nil {return _fbe ;
};if _efg ==1{_eea .IsMMREncoded =true ;};if !_eea .IsMMREncoded {_ade :=1;if _eea .GBTemplate ==0{_ade =4;if _eea .UseExtTemplates {_ade =12;};};if _fbe =_eea .readGBAtPixels (_ade );_fbe !=nil {return _fbe ;};};if _fbe =_eea .computeSegmentDataStructure ();
_fbe !=nil {return _fbe ;};_ad .Log .Trace ("\u0025\u0073",_eea );return nil ;};func (_ebca *template0 )form (_eec ,_fff ,_ccfd ,_daaf ,_agea int16 )int16 {return (_eec <<10)|(_fff <<7)|(_ccfd <<4)|(_daaf <<1)|_agea ;};func (_effgd *SymbolDictionary )decodeAggregate (_bddf ,_dbcg uint32 )error {var (_acdgf int64 ;
_egac error ;);if _effgd .IsHuffmanEncoded {_acdgf ,_egac =_effgd .huffDecodeRefAggNInst ();if _egac !=nil {return _egac ;};}else {_cfaa ,_bcbgf :=_effgd ._cbgf .DecodeInt (_effgd ._eedd );if _bcbgf !=nil {return _bcbgf ;};_acdgf =int64 (_cfaa );};if _acdgf > 1{return _effgd .decodeThroughTextRegion (_bddf ,_dbcg ,uint32 (_acdgf ));
}else if _acdgf ==1{return _effgd .decodeRefinedSymbol (_bddf ,_dbcg );};return nil ;};func (_gae *GenericRegion )decodeTemplate0a (_dgba ,_bcebf ,_acf int ,_bcbc ,_gafg int )(_dbcc error ){const _ebb ="\u0064\u0065c\u006f\u0064\u0065T\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u0030\u0061";
var (_cfag ,_cdc int ;_fdb ,_feed int ;_cbd byte ;_adaa int ;);if _dgba >=1{_cbd ,_dbcc =_gae .Bitmap .GetByte (_gafg );if _dbcc !=nil {return _af .Wrap (_dbcc ,_ebb ,"\u006ci\u006e\u0065\u0020\u003e\u003d\u00201");};_fdb =int (_cbd );};if _dgba >=2{_cbd ,_dbcc =_gae .Bitmap .GetByte (_gafg -_gae .Bitmap .RowStride );
if _dbcc !=nil {return _af .Wrap (_dbcc ,_ebb ,"\u006ci\u006e\u0065\u0020\u003e\u003d\u00202");};_feed =int (_cbd )<<6;};_cfag =(_fdb &0xf0)|(_feed &0x3800);for _bddde :=0;_bddde < _acf ;_bddde =_adaa {var (_ggeb byte ;_egcg int ;);_adaa =_bddde +8;if _ggg :=_bcebf -_bddde ;
_ggg > 8{_egcg =8;}else {_egcg =_ggg ;};if _dgba > 0{_fdb <<=8;if _adaa < _bcebf {_cbd ,_dbcc =_gae .Bitmap .GetByte (_gafg +1);if _dbcc !=nil {return _af .Wrap (_dbcc ,_ebb ,"\u006c\u0069\u006e\u0065\u0020\u003e\u0020\u0030");};_fdb |=int (_cbd );};};
if _dgba > 1{_gcf :=_gafg -_gae .Bitmap .RowStride +1;_feed <<=8;if _adaa < _bcebf {_cbd ,_dbcc =_gae .Bitmap .GetByte (_gcf );if _dbcc !=nil {return _af .Wrap (_dbcc ,_ebb ,"\u006c\u0069\u006e\u0065\u0020\u003e\u0020\u0031");};_feed |=int (_cbd )<<6;}else {_feed |=0;
};};for _bdee :=0;_bdee < _egcg ;_bdee ++{_fga :=uint (7-_bdee );if _gae ._fda {_cdc =_gae .overrideAtTemplate0a (_cfag ,_bddde +_bdee ,_dgba ,int (_ggeb ),_bdee ,int (_fga ));_gae ._dff .SetIndex (int32 (_cdc ));}else {_gae ._dff .SetIndex (int32 (_cfag ));
};var _adec int ;_adec ,_dbcc =_gae ._acbbd .DecodeBit (_gae ._dff );if _dbcc !=nil {return _af .Wrap (_dbcc ,_ebb ,"");};_ggeb |=byte (_adec )<<_fga ;_cfag =((_cfag &0x7bf7)<<1)|_adec |((_fdb >>_fga )&0x10)|((_feed >>_fga )&0x800);};if _bdc :=_gae .Bitmap .SetByte (_bcbc ,_ggeb );
_bdc !=nil {return _af .Wrap (_bdc ,_ebb ,"");};_bcbc ++;_gafg ++;};return nil ;};func (_afcd *HalftoneRegion )computeSegmentDataStructure ()error {_afcd .DataOffset =_afcd ._dabd .AbsolutePosition ();_afcd .DataHeaderLength =_afcd .DataOffset -_afcd .DataHeaderOffset ;
_afcd .DataLength =int64 (_afcd ._dabd .AbsoluteLength ())-_afcd .DataHeaderLength ;return nil ;};func (_gggb *RegionSegment )Encode (w _cfg .BinaryWriter )(_gfc int ,_gcbf error ){const _bgce ="R\u0065g\u0069\u006f\u006e\u0053\u0065\u0067\u006d\u0065n\u0074\u002e\u0045\u006eco\u0064\u0065";
_cebe :=make ([]byte ,4);_gdd .BigEndian .PutUint32 (_cebe ,_gggb .BitmapWidth );_gfc ,_gcbf =w .Write (_cebe );if _gcbf !=nil {return 0,_af .Wrap (_gcbf ,_bgce ,"\u0057\u0069\u0064t\u0068");};_gdd .BigEndian .PutUint32 (_cebe ,_gggb .BitmapHeight );var _eebeb int ;
_eebeb ,_gcbf =w .Write (_cebe );if _gcbf !=nil {return 0,_af .Wrap (_gcbf ,_bgce ,"\u0048\u0065\u0069\u0067\u0068\u0074");};_gfc +=_eebeb ;_gdd .BigEndian .PutUint32 (_cebe ,_gggb .XLocation );_eebeb ,_gcbf =w .Write (_cebe );if _gcbf !=nil {return 0,_af .Wrap (_gcbf ,_bgce ,"\u0058L\u006f\u0063\u0061\u0074\u0069\u006fn");
};_gfc +=_eebeb ;_gdd .BigEndian .PutUint32 (_cebe ,_gggb .YLocation );_eebeb ,_gcbf =w .Write (_cebe );if _gcbf !=nil {return 0,_af .Wrap (_gcbf ,_bgce ,"\u0059L\u006f\u0063\u0061\u0074\u0069\u006fn");};_gfc +=_eebeb ;if _gcbf =w .WriteByte (byte (_gggb .CombinaionOperator )&0x07);
_gcbf !=nil {return 0,_af .Wrap (_gcbf ,_bgce ,"c\u006fm\u0062\u0069\u006e\u0061\u0074\u0069\u006f\u006e \u006f\u0070\u0065\u0072at\u006f\u0072");};_gfc ++;return _gfc ,nil ;};func (_bfc *template1 )form (_bfe ,_cagg ,_aab ,_gea ,_cff int16 )int16 {return ((_bfe &0x02)<<8)|(_cagg <<6)|((_aab &0x03)<<4)|(_gea <<1)|_cff ;
};func (_ceda *SymbolDictionary )setExportedSymbols (_egccd []int ){for _eeee :=uint32 (0);_eeee < _ceda ._bdea +_ceda .NumberOfNewSymbols ;_eeee ++{if _egccd [_eeee ]==1{var _fed *_cfb .Bitmap ;if _eeee < _ceda ._bdea {_fed =_ceda ._bbb [_eeee ];}else {_fed =_ceda ._ccfff [_eeee -_ceda ._bdea ];
};_ad .Log .Trace ("\u005bS\u0059\u004dB\u004f\u004c\u002d\u0044I\u0043\u0054\u0049O\u004e\u0041\u0052\u0059\u005d\u0020\u0041\u0064\u0064 E\u0078\u0070\u006fr\u0074\u0065d\u0053\u0079\u006d\u0062\u006f\u006c:\u0020\u0027%\u0073\u0027",_fed );_ceda ._dfa =append (_ceda ._dfa ,_fed );
};};};func (_agg *GenericRefinementRegion )decodeSLTP ()(int ,error ){_agg .Template .setIndex (_agg ._gbc );return _agg ._ca .DecodeBit (_agg ._gbc );};func (_eecb *template0 )setIndex (_bbcb *_cfd .DecoderStats ){_bbcb .SetIndex (0x100)};func (_bcca *HalftoneRegion )Init (hd *Header ,r *_cfg .Reader )error {_bcca ._dabd =r ;
_bcca ._cgf =hd ;_bcca .RegionSegment =NewRegionSegment (r );return _bcca .parseHeader ();};func (_feaad *TextRegion )decodeID ()(int64 ,error ){if _feaad .IsHuffmanEncoded {if _feaad ._ecae ==nil {_degc ,_cbfg :=_feaad ._gabc .ReadBits (byte (_feaad ._egfa ));
return int64 (_degc ),_cbfg ;};return _feaad ._ecae .Decode (_feaad ._gabc );};return _feaad ._cfcgd .DecodeIAID (uint64 (_feaad ._egfa ),_feaad ._ecge );};var (_fdg Segmenter ;_dgg =map[Type ]func ()Segmenter {TSymbolDictionary :func ()Segmenter {return &SymbolDictionary {}},TIntermediateTextRegion :func ()Segmenter {return &TextRegion {}},TImmediateTextRegion :func ()Segmenter {return &TextRegion {}},TImmediateLosslessTextRegion :func ()Segmenter {return &TextRegion {}},TPatternDictionary :func ()Segmenter {return &PatternDictionary {}},TIntermediateHalftoneRegion :func ()Segmenter {return &HalftoneRegion {}},TImmediateHalftoneRegion :func ()Segmenter {return &HalftoneRegion {}},TImmediateLosslessHalftoneRegion :func ()Segmenter {return &HalftoneRegion {}},TIntermediateGenericRegion :func ()Segmenter {return &GenericRegion {}},TImmediateGenericRegion :func ()Segmenter {return &GenericRegion {}},TImmediateLosslessGenericRegion :func ()Segmenter {return &GenericRegion {}},TIntermediateGenericRefinementRegion :func ()Segmenter {return &GenericRefinementRegion {}},TImmediateGenericRefinementRegion :func ()Segmenter {return &GenericRefinementRegion {}},TImmediateLosslessGenericRefinementRegion :func ()Segmenter {return &GenericRefinementRegion {}},TPageInformation :func ()Segmenter {return &PageInformationSegment {}},TEndOfPage :func ()Segmenter {return _fdg },TEndOfStrip :func ()Segmenter {return &EndOfStripe {}},TEndOfFile :func ()Segmenter {return _fdg },TProfiles :func ()Segmenter {return _fdg },TTables :func ()Segmenter {return &TableSegment {}},TExtension :func ()Segmenter {return _fdg },TBitmap :func ()Segmenter {return _fdg }};
);func (_dbde *SymbolDictionary )readNumberOfNewSymbols ()error {_dcbfc ,_dbfed :=_dbde ._cdbb .ReadBits (32);if _dbfed !=nil {return _dbfed ;};_dbde .NumberOfNewSymbols =uint32 (_dcbfc &_c .MaxUint32 );return nil ;};func (_fdce *SymbolDictionary )setInSyms ()error {if _fdce .Header .RTSegments !=nil {return _fdce .retrieveImportSymbols ();
};_fdce ._bbb =make ([]*_cfb .Bitmap ,0);return nil ;};func (_cbec *TextRegion )String ()string {_fagdb :=&_cf .Builder {};_fagdb .WriteString ("\u000a[\u0054E\u0058\u0054\u0020\u0052\u0045\u0047\u0049\u004f\u004e\u005d\u000a");_fagdb .WriteString (_cbec .RegionInfo .String ()+"\u000a");
_fagdb .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u0053br\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u003a\u0020\u0025\u0076\u000a",_cbec .SbrTemplate ));_fagdb .WriteString (_a .Sprintf ("\u0009-\u0020S\u0062\u0044\u0073\u004f\u0066f\u0073\u0065t\u003a\u0020\u0025\u0076\u000a",_cbec .SbDsOffset ));
_fagdb .WriteString (_a .Sprintf ("\t\u002d \u0044\u0065\u0066\u0061\u0075\u006c\u0074\u0050i\u0078\u0065\u006c\u003a %\u0076\u000a",_cbec .DefaultPixel ));_fagdb .WriteString (_a .Sprintf ("\t\u002d\u0020\u0043\u006f\u006d\u0062i\u006e\u0061\u0074\u0069\u006f\u006e\u004f\u0070\u0065r\u0061\u0074\u006fr\u003a \u0025\u0076\u000a",_cbec .CombinationOperator ));
_fagdb .WriteString (_a .Sprintf ("\t\u002d \u0049\u0073\u0054\u0072\u0061\u006e\u0073\u0070o\u0073\u0065\u0064\u003a %\u0076\u000a",_cbec .IsTransposed ));_fagdb .WriteString (_a .Sprintf ("\u0009\u002d\u0020Re\u0066\u0065\u0072\u0065\u006e\u0063\u0065\u0043\u006f\u0072\u006e\u0065\u0072\u003a\u0020\u0025\u0076\u000a",_cbec .ReferenceCorner ));
_fagdb .WriteString (_a .Sprintf ("\t\u002d\u0020\u0055\u0073eR\u0065f\u0069\u006e\u0065\u006d\u0065n\u0074\u003a\u0020\u0025\u0076\u000a",_cbec .UseRefinement ));_fagdb .WriteString (_a .Sprintf ("\u0009-\u0020\u0049\u0073\u0048\u0075\u0066\u0066\u006d\u0061\u006e\u0045n\u0063\u006f\u0064\u0065\u0064\u003a\u0020\u0025\u0076\u000a",_cbec .IsHuffmanEncoded ));
if _cbec .IsHuffmanEncoded {_fagdb .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u0053bH\u0075\u0066\u0066\u0052\u0053\u0069\u007a\u0065\u003a\u0020\u0025\u0076\u000a",_cbec .SbHuffRSize ));_fagdb .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u0053\u0062\u0048\u0075\u0066\u0066\u0052\u0044\u0059:\u0020\u0025\u0076\u000a",_cbec .SbHuffRDY ));
_fagdb .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u0053\u0062\u0048\u0075\u0066\u0066\u0052\u0044\u0058:\u0020\u0025\u0076\u000a",_cbec .SbHuffRDX ));_fagdb .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u0053bH\u0075\u0066\u0066\u0052\u0044\u0048\u0065\u0069\u0067\u0068\u0074\u003a\u0020\u0025v\u000a",_cbec .SbHuffRDHeight ));
_fagdb .WriteString (_a .Sprintf ("\t\u002d\u0020\u0053\u0062Hu\u0066f\u0052\u0044\u0057\u0069\u0064t\u0068\u003a\u0020\u0025\u0076\u000a",_cbec .SbHuffRDWidth ));_fagdb .WriteString (_a .Sprintf ("\u0009\u002d \u0053\u0062\u0048u\u0066\u0066\u0044\u0054\u003a\u0020\u0025\u0076\u000a",_cbec .SbHuffDT ));
_fagdb .WriteString (_a .Sprintf ("\u0009\u002d \u0053\u0062\u0048u\u0066\u0066\u0044\u0053\u003a\u0020\u0025\u0076\u000a",_cbec .SbHuffDS ));_fagdb .WriteString (_a .Sprintf ("\u0009\u002d \u0053\u0062\u0048u\u0066\u0066\u0046\u0053\u003a\u0020\u0025\u0076\u000a",_cbec .SbHuffFS ));
};_fagdb .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u0053\u0062\u0072\u0041\u0054\u0058:\u0020\u0025\u0076\u000a",_cbec .SbrATX ));_fagdb .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u0053\u0062\u0072\u0041\u0054\u0059:\u0020\u0025\u0076\u000a",_cbec .SbrATY ));
_fagdb .WriteString (_a .Sprintf ("\u0009\u002d\u0020N\u0075\u006d\u0062\u0065r\u004f\u0066\u0053\u0079\u006d\u0062\u006fl\u0049\u006e\u0073\u0074\u0061\u006e\u0063\u0065\u0073\u003a\u0020\u0025\u0076\u000a",_cbec .NumberOfSymbolInstances ));_fagdb .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u0053\u0062\u0072\u0041\u0054\u0058:\u0020\u0025\u0076\u000a",_cbec .SbrATX ));
return _fagdb .String ();};func (_dfcfa *SymbolDictionary )decodeDifferenceWidth ()(int64 ,error ){if _dfcfa .IsHuffmanEncoded {switch _dfcfa .SdHuffDecodeWidthSelection {case 0:_cebfd ,_cdffbf :=_e .GetStandardTable (2);if _cdffbf !=nil {return 0,_cdffbf ;
};return _cebfd .Decode (_dfcfa ._cdbb );case 1:_geae ,_bacb :=_e .GetStandardTable (3);if _bacb !=nil {return 0,_bacb ;};return _geae .Decode (_dfcfa ._cdbb );case 3:if _dfcfa ._dece ==nil {var _ddfb int ;if _dfcfa .SdHuffDecodeHeightSelection ==3{_ddfb ++;
};_beca ,_cccdb :=_dfcfa .getUserTable (_ddfb );if _cccdb !=nil {return 0,_cccdb ;};_dfcfa ._dece =_beca ;};return _dfcfa ._dece .Decode (_dfcfa ._cdbb );};}else {_gbccb ,_bggfg :=_dfcfa ._cbgf .DecodeInt (_dfcfa ._bbcce );if _bggfg !=nil {return 0,_bggfg ;
};return int64 (_gbccb ),nil ;};return 0,nil ;};const (TSymbolDictionary Type =0;TIntermediateTextRegion Type =4;TImmediateTextRegion Type =6;TImmediateLosslessTextRegion Type =7;TPatternDictionary Type =16;TIntermediateHalftoneRegion Type =20;TImmediateHalftoneRegion Type =22;
TImmediateLosslessHalftoneRegion Type =23;TIntermediateGenericRegion Type =36;TImmediateGenericRegion Type =38;TImmediateLosslessGenericRegion Type =39;TIntermediateGenericRefinementRegion Type =40;TImmediateGenericRefinementRegion Type =42;TImmediateLosslessGenericRefinementRegion Type =43;
TPageInformation Type =48;TEndOfPage Type =49;TEndOfStrip Type =50;TEndOfFile Type =51;TProfiles Type =52;TTables Type =53;TExtension Type =62;TBitmap Type =70;);type SymbolDictionary struct{_cdbb *_cfg .Reader ;SdrTemplate int8 ;SdTemplate int8 ;_cffe bool ;
_efde bool ;SdHuffAggInstanceSelection bool ;SdHuffBMSizeSelection int8 ;SdHuffDecodeWidthSelection int8 ;SdHuffDecodeHeightSelection int8 ;UseRefinementAggregation bool ;IsHuffmanEncoded bool ;SdATX []int8 ;SdATY []int8 ;SdrATX []int8 ;SdrATY []int8 ;
NumberOfExportedSymbols uint32 ;NumberOfNewSymbols uint32 ;Header *Header ;_bdea uint32 ;_bbb []*_cfb .Bitmap ;_dddb uint32 ;_ccfff []*_cfb .Bitmap ;_afac _e .Tabler ;_dece _e .Tabler ;_gade _e .Tabler ;_cdfa _e .Tabler ;_dfa []*_cfb .Bitmap ;_bceaf []*_cfb .Bitmap ;
_cbgf *_cfd .Decoder ;_defgb *TextRegion ;_aacf *GenericRegion ;_cfcg *GenericRefinementRegion ;_cfda *_cfd .DecoderStats ;_ebgf *_cfd .DecoderStats ;_bbcce *_cfd .DecoderStats ;_eedd *_cfd .DecoderStats ;_dfbb *_cfd .DecoderStats ;_fgeec *_cfd .DecoderStats ;
_faf *_cfd .DecoderStats ;_ffeca *_cfd .DecoderStats ;_afef *_cfd .DecoderStats ;_ecdb int8 ;_geec *_cfb .Bitmaps ;_cada []int ;_fgdg map[int ]int ;_bfdg bool ;};func (_fffb Type )String ()string {switch _fffb {case TSymbolDictionary :return "\u0053\u0079\u006d\u0062\u006f\u006c\u0020\u0044\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079";
case TIntermediateTextRegion :return "\u0049n\u0074\u0065\u0072\u006d\u0065\u0064\u0069\u0061\u0074\u0065\u0020T\u0065\u0078\u0074\u0020\u0052\u0065\u0067\u0069\u006f\u006e";case TImmediateTextRegion :return "I\u006d\u006d\u0065\u0064ia\u0074e\u0020\u0054\u0065\u0078\u0074 \u0052\u0065\u0067\u0069\u006f\u006e";
case TImmediateLosslessTextRegion :return "\u0049\u006d\u006d\u0065\u0064\u0069\u0061\u0074\u0065\u0020L\u006f\u0073\u0073\u006c\u0065\u0073\u0073 \u0054\u0065\u0078\u0074\u0020\u0052\u0065\u0067\u0069\u006f\u006e";case TPatternDictionary :return "\u0050a\u0074t\u0065\u0072\u006e\u0020\u0044i\u0063\u0074i\u006f\u006e\u0061\u0072\u0079";
case TIntermediateHalftoneRegion :return "\u0049\u006e\u0074\u0065r\u006d\u0065\u0064\u0069\u0061\u0074\u0065\u0020\u0048\u0061l\u0066t\u006f\u006e\u0065\u0020\u0052\u0065\u0067i\u006f\u006e";case TImmediateHalftoneRegion :return "\u0049m\u006d\u0065\u0064\u0069a\u0074\u0065\u0020\u0048\u0061l\u0066t\u006fn\u0065\u0020\u0052\u0065\u0067\u0069\u006fn";
case TImmediateLosslessHalftoneRegion :return "\u0049\u006d\u006ded\u0069\u0061\u0074\u0065\u0020\u004c\u006f\u0073\u0073l\u0065s\u0073 \u0048a\u006c\u0066\u0074\u006f\u006e\u0065\u0020\u0052\u0065\u0067\u0069\u006f\u006e";case TIntermediateGenericRegion :return "I\u006e\u0074\u0065\u0072\u006d\u0065d\u0069\u0061\u0074\u0065\u0020\u0047\u0065\u006e\u0065r\u0069\u0063\u0020R\u0065g\u0069\u006f\u006e";
case TImmediateGenericRegion :return "\u0049m\u006d\u0065\u0064\u0069\u0061\u0074\u0065\u0020\u0047\u0065\u006ee\u0072\u0069\u0063\u0020\u0052\u0065\u0067\u0069\u006f\u006e";case TImmediateLosslessGenericRegion :return "\u0049\u006d\u006d\u0065\u0064\u0069a\u0074\u0065\u0020\u004c\u006f\u0073\u0073\u006c\u0065\u0073\u0073\u0020\u0047e\u006e\u0065\u0072\u0069\u0063\u0020\u0052e\u0067\u0069\u006f\u006e";
case TIntermediateGenericRefinementRegion :return "\u0049\u006e\u0074\u0065\u0072\u006d\u0065\u0064\u0069\u0061\u0074\u0065\u0020\u0047\u0065\u006e\u0065\u0072\u0069\u0063\u0020\u0052\u0065\u0066i\u006e\u0065\u006d\u0065\u006et\u0020\u0052e\u0067\u0069\u006f\u006e";
case TImmediateGenericRefinementRegion :return "I\u006d\u006d\u0065\u0064\u0069\u0061t\u0065\u0020\u0047\u0065\u006e\u0065r\u0069\u0063\u0020\u0052\u0065\u0066\u0069n\u0065\u006d\u0065\u006e\u0074\u0020\u0052\u0065\u0067\u0069o\u006e";case TImmediateLosslessGenericRefinementRegion :return "\u0049m\u006d\u0065d\u0069\u0061\u0074\u0065 \u004c\u006f\u0073s\u006c\u0065\u0073\u0073\u0020\u0047\u0065\u006e\u0065ri\u0063\u0020\u0052e\u0066\u0069n\u0065\u006d\u0065\u006e\u0074\u0020R\u0065\u0067i\u006f\u006e";
case TPageInformation :return "\u0050\u0061g\u0065\u0020\u0049n\u0066\u006f\u0072\u006d\u0061\u0074\u0069\u006f\u006e";case TEndOfPage :return "E\u006e\u0064\u0020\u004f\u0066\u0020\u0050\u0061\u0067\u0065";case TEndOfStrip :return "\u0045\u006e\u0064 \u004f\u0066\u0020\u0053\u0074\u0072\u0069\u0070";
case TEndOfFile :return "E\u006e\u0064\u0020\u004f\u0066\u0020\u0046\u0069\u006c\u0065";case TProfiles :return "\u0050\u0072\u006f\u0066\u0069\u006c\u0065\u0073";case TTables :return "\u0054\u0061\u0062\u006c\u0065\u0073";case TExtension :return "\u0045x\u0074\u0065\u006e\u0073\u0069\u006fn";
case TBitmap :return "\u0042\u0069\u0074\u006d\u0061\u0070";};return "I\u006ev\u0061\u006c\u0069\u0064\u0020\u0053\u0065\u0067m\u0065\u006e\u0074\u0020Ki\u006e\u0064";};func (_dbd *PatternDictionary )GetDictionary ()([]*_cfb .Bitmap ,error ){if _dbd .Patterns !=nil {return _dbd .Patterns ,nil ;
};if !_dbd .IsMMREncoded {_dbd .setGbAtPixels ();};_bebf :=NewGenericRegion (_dbd ._caefb );_bebf .setParametersMMR (_dbd .IsMMREncoded ,_dbd .DataOffset ,_dbd .DataLength ,uint32 (_dbd .HdpHeight ),(_dbd .GrayMax +1)*uint32 (_dbd .HdpWidth ),_dbd .HDTemplate ,false ,false ,_dbd .GBAtX ,_dbd .GBAtY );
_cddda ,_cadcg :=_bebf .GetRegionBitmap ();if _cadcg !=nil {return nil ,_cadcg ;};if _cadcg =_dbd .extractPatterns (_cddda );_cadcg !=nil {return nil ,_cadcg ;};return _dbd .Patterns ,nil ;};func (_bggf *GenericRegion )decodeSLTP ()(int ,error ){switch _bggf .GBTemplate {case 0:_bggf ._dff .SetIndex (0x9B25);
case 1:_bggf ._dff .SetIndex (0x795);case 2:_bggf ._dff .SetIndex (0xE5);case 3:_bggf ._dff .SetIndex (0x195);};return _bggf ._acbbd .DecodeBit (_bggf ._dff );};func (_dfe *GenericRegion )String ()string {_befb :=&_cf .Builder {};_befb .WriteString ("\u000a[\u0047E\u004e\u0045\u0052\u0049\u0043 \u0052\u0045G\u0049\u004f\u004e\u005d\u000a");
_befb .WriteString (_dfe .RegionSegment .String ()+"\u000a");_befb .WriteString (_a .Sprintf ("\u0009\u002d\u0020Us\u0065\u0045\u0078\u0074\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u0073\u003a\u0020\u0025\u0076\u000a",_dfe .UseExtTemplates ));_befb .WriteString (_a .Sprintf ("\u0009\u002d \u0049\u0073\u0054P\u0047\u0044\u006f\u006e\u003a\u0020\u0025\u0076\u000a",_dfe .IsTPGDon ));
_befb .WriteString (_a .Sprintf ("\u0009-\u0020G\u0042\u0054\u0065\u006d\u0070l\u0061\u0074e\u003a\u0020\u0025\u0064\u000a",_dfe .GBTemplate ));_befb .WriteString (_a .Sprintf ("\t\u002d \u0049\u0073\u004d\u004d\u0052\u0045\u006e\u0063o\u0064\u0065\u0064\u003a %\u0076\u000a",_dfe .IsMMREncoded ));
_befb .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u0047\u0042\u0041\u0074\u0058\u003a\u0020\u0025\u0076\u000a",_dfe .GBAtX ));_befb .WriteString (_a .Sprintf ("\u0009\u002d\u0020\u0047\u0042\u0041\u0074\u0059\u003a\u0020\u0025\u0076\u000a",_dfe .GBAtY ));
_befb .WriteString (_a .Sprintf ("\t\u002d \u0047\u0042\u0041\u0074\u004f\u0076\u0065\u0072r\u0069\u0064\u0065\u003a %\u0076\u000a",_dfe .GBAtOverride ));return _befb .String ();};func (_ageg *HalftoneRegion )GetPatterns ()([]*_cfb .Bitmap ,error ){var (_cbfe []*_cfb .Bitmap ;
_caef error ;);for _ ,_agfc :=range _ageg ._cgf .RTSegments {var _fbbg Segmenter ;_fbbg ,_caef =_agfc .GetSegmentData ();if _caef !=nil {_ad .Log .Debug ("\u0047e\u0074\u0053\u0065\u0067m\u0065\u006e\u0074\u0044\u0061t\u0061 \u0066a\u0069\u006c\u0065\u0064\u003a\u0020\u0025v",_caef );
return nil ,_caef ;};_agc ,_bgbb :=_fbbg .(*PatternDictionary );if !_bgbb {_caef =_a .Errorf ("\u0072e\u006c\u0061t\u0065\u0064\u0020\u0073e\u0067\u006d\u0065n\u0074\u0020\u006e\u006f\u0074\u0020\u0061\u0020\u0070at\u0074\u0065\u0072n\u0020\u0064i\u0063\u0074\u0069\u006f\u006e\u0061r\u0079\u003a \u0025\u0054",_fbbg );
return nil ,_caef ;};var _aca []*_cfb .Bitmap ;_aca ,_caef =_agc .GetDictionary ();if _caef !=nil {_ad .Log .Debug ("\u0070\u0061\u0074\u0074\u0065\u0072\u006e\u0020\u0047\u0065\u0074\u0044\u0069\u0063\u0074i\u006fn\u0061\u0072\u0079\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u003a\u0020\u0025\u0076",_caef );
return nil ,_caef ;};_cbfe =append (_cbfe ,_aca ...);};return _cbfe ,nil ;};func (_cgce *SymbolDictionary )setRetainedCodingContexts (_ceef *SymbolDictionary ){_cgce ._cbgf =_ceef ._cbgf ;_cgce .IsHuffmanEncoded =_ceef .IsHuffmanEncoded ;_cgce .UseRefinementAggregation =_ceef .UseRefinementAggregation ;
_cgce .SdTemplate =_ceef .SdTemplate ;_cgce .SdrTemplate =_ceef .SdrTemplate ;_cgce .SdATX =_ceef .SdATX ;_cgce .SdATY =_ceef .SdATY ;_cgce .SdrATX =_ceef .SdrATX ;_cgce .SdrATY =_ceef .SdrATY ;_cgce ._cfda =_ceef ._cfda ;};func NewRegionSegment (r *_cfg .Reader )*RegionSegment {return &RegionSegment {_afcc :r }};
func (_dgdf *TextRegion )setCodingStatistics ()error {if _dgdf ._ceddf ==nil {_dgdf ._ceddf =_cfd .NewStats (512,1);};if _dgdf ._aeeb ==nil {_dgdf ._aeeb =_cfd .NewStats (512,1);};if _dgdf ._efcff ==nil {_dgdf ._efcff =_cfd .NewStats (512,1);};if _dgdf ._gafgc ==nil {_dgdf ._gafgc =_cfd .NewStats (512,1);
};if _dgdf ._ecgc ==nil {_dgdf ._ecgc =_cfd .NewStats (512,1);};if _dgdf ._ceea ==nil {_dgdf ._ceea =_cfd .NewStats (512,1);};if _dgdf ._bgegb ==nil {_dgdf ._bgegb =_cfd .NewStats (512,1);};if _dgdf ._ecge ==nil {_dgdf ._ecge =_cfd .NewStats (1<<uint (_dgdf ._egfa ),1);
};if _dgdf ._fafdf ==nil {_dgdf ._fafdf =_cfd .NewStats (512,1);};if _dgdf ._dgca ==nil {_dgdf ._dgca =_cfd .NewStats (512,1);};if _dgdf ._cfcgd ==nil {var _dfdad error ;_dgdf ._cfcgd ,_dfdad =_cfd .New (_dgdf ._gabc );if _dfdad !=nil {return _dfdad ;};
};return nil ;};func (_aedd *TextRegion )parseHeader ()error {var _ccfc error ;_ad .Log .Trace ("\u005b\u0054E\u0058\u0054\u0020\u0052E\u0047\u0049O\u004e\u005d\u005b\u0050\u0041\u0052\u0053\u0045-\u0048\u0045\u0041\u0044\u0045\u0052\u005d\u0020\u0062\u0065\u0067\u0069n\u0073\u002e\u002e\u002e");
defer func (){if _ccfc !=nil {_ad .Log .Trace ("\u005b\u0054\u0045\u0058\u0054\u0020\u0052\u0045\u0047\u0049\u004f\u004e\u005d\u005b\u0050\u0041\u0052\u0053\u0045\u002d\u0048\u0045\u0041\u0044E\u0052\u005d\u0020\u0066\u0061i\u006c\u0065d\u002e\u0020\u0025\u0076",_ccfc );
}else {_ad .Log .Trace ("\u005b\u0054E\u0058\u0054\u0020\u0052E\u0047\u0049O\u004e\u005d\u005b\u0050\u0041\u0052\u0053\u0045-\u0048\u0045\u0041\u0044\u0045\u0052\u005d\u0020\u0066\u0069\u006e\u0069s\u0068\u0065\u0064\u002e");};}();if _ccfc =_aedd .RegionInfo .parseHeader ();
_ccfc !=nil {return _ccfc ;};if _ccfc =_aedd .readRegionFlags ();_ccfc !=nil {return _ccfc ;};if _aedd .IsHuffmanEncoded {if _ccfc =_aedd .readHuffmanFlags ();_ccfc !=nil {return _ccfc ;};};if _ccfc =_aedd .readUseRefinement ();_ccfc !=nil {return _ccfc ;
};if _ccfc =_aedd .readAmountOfSymbolInstances ();_ccfc !=nil {return _ccfc ;};if _ccfc =_aedd .getSymbols ();_ccfc !=nil {return _ccfc ;};if _ccfc =_aedd .computeSymbolCodeLength ();_ccfc !=nil {return _ccfc ;};if _ccfc =_aedd .checkInput ();_ccfc !=nil {return _ccfc ;
};_ad .Log .Trace ("\u0025\u0073",_aedd .String ());return nil ;};type templater interface{form (_bceb ,_fcb ,_ebce ,_faa ,_dge int16 )int16 ;setIndex (_fcbb *_cfd .DecoderStats );};func (_cdf *GenericRefinementRegion )decodeTypicalPredictedLine (_bb ,_ff ,_bd ,_ga ,_gba ,_gaf int )error {_cfa :=_bb -int (_cdf .ReferenceDY );
_ddc :=_cdf .ReferenceBitmap .GetByteIndex (0,_cfa );_fac :=_cdf .RegionBitmap .GetByteIndex (0,_bb );var _aff error ;switch _cdf .TemplateID {case 0:_aff =_cdf .decodeTypicalPredictedLineTemplate0 (_bb ,_ff ,_bd ,_ga ,_gba ,_gaf ,_fac ,_cfa ,_ddc );case 1:_aff =_cdf .decodeTypicalPredictedLineTemplate1 (_bb ,_ff ,_bd ,_ga ,_gba ,_gaf ,_fac ,_cfa ,_ddc );
};return _aff ;};func (_bfgg *SymbolDictionary )decodeDirectlyThroughGenericRegion (_aacd ,_cagfg uint32 )error {if _bfgg ._aacf ==nil {_bfgg ._aacf =NewGenericRegion (_bfgg ._cdbb );};_bfgg ._aacf .setParametersWithAt (false ,byte (_bfgg .SdTemplate ),false ,false ,_bfgg .SdATX ,_bfgg .SdATY ,_aacd ,_cagfg ,_bfgg ._cfda ,_bfgg ._cbgf );
return _bfgg .addSymbol (_bfgg ._aacf );};func (_acbg *PageInformationSegment )CombinationOperator ()_cfb .CombinationOperator {return _acbg ._fdaa ;};func (_cccd *GenericRegion )GetRegionBitmap ()(_bga *_cfb .Bitmap ,_bddg error ){if _cccd .Bitmap !=nil {return _cccd .Bitmap ,nil ;
};if _cccd .IsMMREncoded {if _cccd ._faba ==nil {_cccd ._faba ,_bddg =_ge .New (_cccd ._fge ,int (_cccd .RegionSegment .BitmapWidth ),int (_cccd .RegionSegment .BitmapHeight ),_cccd .DataOffset ,_cccd .DataLength );if _bddg !=nil {return nil ,_bddg ;};
};_cccd .Bitmap ,_bddg =_cccd ._faba .UncompressMMR ();return _cccd .Bitmap ,_bddg ;};if _bddg =_cccd .updateOverrideFlags ();_bddg !=nil {return nil ,_bddg ;};var _gbge int ;if _cccd ._acbbd ==nil {_cccd ._acbbd ,_bddg =_cfd .New (_cccd ._fge );if _bddg !=nil {return nil ,_bddg ;
};};if _cccd ._dff ==nil {_cccd ._dff =_cfd .NewStats (65536,1);};_cccd .Bitmap =_cfb .New (int (_cccd .RegionSegment .BitmapWidth ),int (_cccd .RegionSegment .BitmapHeight ));_aagd :=int (uint32 (_cccd .Bitmap .Width +7)&(^uint32 (7)));for _aea :=0;_aea < _cccd .Bitmap .Height ;
_aea ++{if _cccd .IsTPGDon {var _afdga int ;_afdga ,_bddg =_cccd .decodeSLTP ();if _bddg !=nil {return nil ,_bddg ;};_gbge ^=_afdga ;};if _gbge ==1{if _aea > 0{if _bddg =_cccd .copyLineAbove (_aea );_bddg !=nil {return nil ,_bddg ;};};}else {if _bddg =_cccd .decodeLine (_aea ,_cccd .Bitmap .Width ,_aagd );
_bddg !=nil {return nil ,_bddg ;};};};return _cccd .Bitmap ,nil ;};func (_efgb *TextRegion )setContexts (_aacg *_cfd .DecoderStats ,_gdea *_cfd .DecoderStats ,_fcfg *_cfd .DecoderStats ,_gcfce *_cfd .DecoderStats ,_fcdd *_cfd .DecoderStats ,_cgeg *_cfd .DecoderStats ,_cdefc *_cfd .DecoderStats ,_adgea *_cfd .DecoderStats ,_gcad *_cfd .DecoderStats ,_feec *_cfd .DecoderStats ){_efgb ._ceddf =_gdea ;
_efgb ._aeeb =_fcfg ;_efgb ._efcff =_gcfce ;_efgb ._gafgc =_fcdd ;_efgb ._ceea =_cdefc ;_efgb ._bgegb =_adgea ;_efgb ._ecge =_cgeg ;_efgb ._fafdf =_gcad ;_efgb ._dgca =_feec ;_efgb ._edad =_aacg ;};func (_gab *Header )readSegmentPageAssociation (_fdcc Documenter ,_ebbd *_cfg .Reader ,_dbbd uint64 ,_faeb ...int )(_aabc error ){const _egbg ="\u0072\u0065\u0061\u0064\u0053\u0065\u0067\u006d\u0065\u006e\u0074P\u0061\u0067\u0065\u0041\u0073\u0073\u006f\u0063\u0069\u0061t\u0069\u006f\u006e";
if !_gab .PageAssociationFieldSize {_gcecf ,_fdcac :=_ebbd .ReadBits (8);if _fdcac !=nil {return _af .Wrap (_fdcac ,_egbg ,"\u0073\u0068\u006fr\u0074\u0020\u0066\u006f\u0072\u006d\u0061\u0074");};_gab .PageAssociation =int (_gcecf &0xFF);}else {_gacf ,_eaa :=_ebbd .ReadBits (32);
if _eaa !=nil {return _af .Wrap (_eaa ,_egbg ,"l\u006f\u006e\u0067\u0020\u0066\u006f\u0072\u006d\u0061\u0074");};_gab .PageAssociation =int (_gacf &_c .MaxInt32 );};if _dbbd ==0{return nil ;};if _gab .PageAssociation !=0{_bgeg ,_ebaa :=_fdcc .GetPage (_gab .PageAssociation );
if _ebaa !=nil {return _af .Wrap (_ebaa ,_egbg ,"\u0061s\u0073\u006f\u0063\u0069a\u0074\u0065\u0064\u0020\u0070a\u0067e\u0020n\u006f\u0074\u0020\u0066\u006f\u0075\u006ed");};var _gfeb int ;for _bgfd :=uint64 (0);_bgfd < _dbbd ;_bgfd ++{_gfeb =_faeb [_bgfd ];
_gab .RTSegments [_bgfd ],_ebaa =_bgeg .GetSegment (_gfeb );if _ebaa !=nil {var _bdf error ;_gab .RTSegments [_bgfd ],_bdf =_fdcc .GetGlobalSegment (_gfeb );if _bdf !=nil {return _af .Wrapf (_ebaa ,_egbg ,"\u0072\u0065\u0066\u0065\u0072\u0065n\u0063\u0065\u0020s\u0065\u0067\u006de\u006e\u0074\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0020\u0061\u0074\u0020pa\u0067\u0065\u003a\u0020\u0027\u0025\u0064\u0027\u0020\u006e\u006f\u0072\u0020\u0069\u006e\u0020\u0067\u006c\u006f\u0062\u0061\u006c\u0073",_gab .PageAssociation );
};};};return nil ;};for _ecga :=uint64 (0);_ecga < _dbbd ;_ecga ++{_gab .RTSegments [_ecga ],_aabc =_fdcc .GetGlobalSegment (_faeb [_ecga ]);if _aabc !=nil {return _af .Wrapf (_aabc ,_egbg ,"\u0067\u006c\u006f\u0062\u0061\u006c\u0020\u0073\u0065\u0067m\u0065\u006e\u0074\u003a\u0020\u0027\u0025d\u0027\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064",_faeb [_ecga ]);
};};return nil ;};func (_dbdcf *TextRegion )decodeRI ()(int64 ,error ){if !_dbdcf .UseRefinement {return 0,nil ;};if _dbdcf .IsHuffmanEncoded {_ddbe ,_bdac :=_dbdcf ._gabc .ReadBit ();return int64 (_ddbe ),_bdac ;};_fcaf ,_fefc :=_dbdcf ._cfcgd .DecodeInt (_dbdcf ._ecgc );
return int64 (_fcaf ),_fefc ;};func (_ggbeg *PageInformationSegment )readMaxStripeSize ()error {_dagc ,_efdd :=_ggbeg ._dgbg .ReadBits (15);if _efdd !=nil {return _efdd ;};_ggbeg .MaxStripeSize =uint16 (_dagc &_c .MaxUint16 );return nil ;};func (_dcec *SymbolDictionary )encodeATFlags (_dde _cfg .BinaryWriter )(_bgeed int ,_eced error ){const _ggfa ="\u0065\u006e\u0063\u006f\u0064\u0065\u0041\u0054\u0046\u006c\u0061\u0067\u0073";
if _dcec .IsHuffmanEncoded ||_dcec .SdTemplate !=0{return 0,nil ;};_agbc :=4;if _dcec .SdTemplate !=0{_agbc =1;};for _fagb :=0;_fagb < _agbc ;_fagb ++{if _eced =_dde .WriteByte (byte (_dcec .SdATX [_fagb ]));_eced !=nil {return _bgeed ,_af .Wrapf (_eced ,_ggfa ,"\u0053d\u0041\u0054\u0058\u005b\u0025\u0064]",_fagb );
};_bgeed ++;if _eced =_dde .WriteByte (byte (_dcec .SdATY [_fagb ]));_eced !=nil {return _bgeed ,_af .Wrapf (_eced ,_ggfa ,"\u0053d\u0041\u0054\u0059\u005b\u0025\u0064]",_fagb );};_bgeed ++;};return _bgeed ,nil ;};func (_gafb *SymbolDictionary )huffDecodeBmSize ()(int64 ,error ){if _gafb ._gade ==nil {var (_fddb int ;
_aagb error ;);if _gafb .SdHuffDecodeHeightSelection ==3{_fddb ++;};if _gafb .SdHuffDecodeWidthSelection ==3{_fddb ++;};_gafb ._gade ,_aagb =_gafb .getUserTable (_fddb );if _aagb !=nil {return 0,_aagb ;};};return _gafb ._gade .Decode (_gafb ._cdbb );};
func (_cfca *PageInformationSegment )checkInput ()error {if _cfca .PageBMHeight ==_c .MaxInt32 {if !_cfca .IsStripe {_ad .Log .Debug ("P\u0061\u0067\u0065\u0049\u006e\u0066\u006f\u0072\u006da\u0074\u0069\u006f\u006e\u0053\u0065\u0067me\u006e\u0074\u002e\u0049s\u0053\u0074\u0072\u0069\u0070\u0065\u0020\u0073\u0068ou\u006c\u0064 \u0062\u0065\u0020\u0074\u0072\u0075\u0065\u002e");
};};return nil ;};func (_ccg *GenericRegion )decodeTemplate2 (_egd ,_fce ,_cdb int ,_gcg ,_cad int )(_abf error ){const _fec ="\u0064e\u0063o\u0064\u0065\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u0032";var (_ebba ,_eagb int ;_fffc ,_affb int ;_adab byte ;
_fabd ,_ggec int ;);if _egd >=1{_adab ,_abf =_ccg .Bitmap .GetByte (_cad );if _abf !=nil {return _af .Wrap (_abf ,_fec ,"\u006ci\u006ee\u004e\u0075\u006d\u0062\u0065\u0072\u0020\u003e\u003d\u0020\u0031");};_fffc =int (_adab );};if _egd >=2{_adab ,_abf =_ccg .Bitmap .GetByte (_cad -_ccg .Bitmap .RowStride );
if _abf !=nil {return _af .Wrap (_abf ,_fec ,"\u006ci\u006ee\u004e\u0075\u006d\u0062\u0065\u0072\u0020\u003e\u003d\u0020\u0032");};_affb =int (_adab )<<4;};_ebba =(_fffc >>3&0x7c)|(_affb >>3&0x380);for _cec :=0;_cec < _cdb ;_cec =_fabd {var (_bcbg byte ;
_dcd int ;);_fabd =_cec +8;if _adg :=_fce -_cec ;_adg > 8{_dcd =8;}else {_dcd =_adg ;};if _egd > 0{_fffc <<=8;if _fabd < _fce {_adab ,_abf =_ccg .Bitmap .GetByte (_cad +1);if _abf !=nil {return _af .Wrap (_abf ,_fec ,"\u006c\u0069\u006e\u0065\u004e\u0075\u006d\u0062\u0065r\u0020\u003e\u0020\u0030");
};_fffc |=int (_adab );};};if _egd > 1{_affb <<=8;if _fabd < _fce {_adab ,_abf =_ccg .Bitmap .GetByte (_cad -_ccg .Bitmap .RowStride +1);if _abf !=nil {return _af .Wrap (_abf ,_fec ,"\u006c\u0069\u006e\u0065\u004e\u0075\u006d\u0062\u0065r\u0020\u003e\u0020\u0031");
};_affb |=int (_adab )<<4;};};for _cddd :=0;_cddd < _dcd ;_cddd ++{_abd :=uint (10-_cddd );if _ccg ._fda {_eagb =_ccg .overrideAtTemplate2 (_ebba ,_cec +_cddd ,_egd ,int (_bcbg ),_cddd );_ccg ._dff .SetIndex (int32 (_eagb ));}else {_ccg ._dff .SetIndex (int32 (_ebba ));
};_ggec ,_abf =_ccg ._acbbd .DecodeBit (_ccg ._dff );if _abf !=nil {return _af .Wrap (_abf ,_fec ,"");};_bcbg |=byte (_ggec <<uint (7-_cddd ));_ebba =((_ebba &0x1bd)<<1)|_ggec |((_fffc >>_abd )&0x4)|((_affb >>_abd )&0x80);};if _cecc :=_ccg .Bitmap .SetByte (_gcg ,_bcbg );
_cecc !=nil {return _af .Wrap (_cecc ,_fec ,"");};_gcg ++;_cad ++;};return nil ;};type GenericRegion struct{_fge *_cfg .Reader ;DataHeaderOffset int64 ;DataHeaderLength int64 ;DataOffset int64 ;DataLength int64 ;RegionSegment *RegionSegment ;UseExtTemplates bool ;
IsTPGDon bool ;GBTemplate byte ;IsMMREncoded bool ;UseMMR bool ;GBAtX []int8 ;GBAtY []int8 ;GBAtOverride []bool ;_fda bool ;Bitmap *_cfb .Bitmap ;_acbbd *_cfd .Decoder ;_dff *_cfd .DecoderStats ;_faba *_ge .Decoder ;};type template0 struct{};func (_ffba *PageInformationSegment )readCombinationOperator ()error {_febd ,_fdccb :=_ffba ._dgbg .ReadBits (2);
if _fdccb !=nil {return _fdccb ;};_ffba ._fdaa =_cfb .CombinationOperator (int (_febd ));return nil ;};func (_eac *PageInformationSegment )Encode (w _cfg .BinaryWriter )(_dbe int ,_fbgd error ){const _gedd ="\u0050\u0061g\u0065\u0049\u006e\u0066\u006f\u0072\u006d\u0061\u0074\u0069\u006f\u006e\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u002e\u0045\u006eco\u0064\u0065";
_cdbd :=make ([]byte ,4);_gdd .BigEndian .PutUint32 (_cdbd ,uint32 (_eac .PageBMWidth ));_dbe ,_fbgd =w .Write (_cdbd );if _fbgd !=nil {return _dbe ,_af .Wrap (_fbgd ,_gedd ,"\u0077\u0069\u0064t\u0068");};_gdd .BigEndian .PutUint32 (_cdbd ,uint32 (_eac .PageBMHeight ));
var _eagbb int ;_eagbb ,_fbgd =w .Write (_cdbd );if _fbgd !=nil {return _eagbb +_dbe ,_af .Wrap (_fbgd ,_gedd ,"\u0068\u0065\u0069\u0067\u0068\u0074");};_dbe +=_eagbb ;_gdd .BigEndian .PutUint32 (_cdbd ,uint32 (_eac .ResolutionX ));_eagbb ,_fbgd =w .Write (_cdbd );
if _fbgd !=nil {return _eagbb +_dbe ,_af .Wrap (_fbgd ,_gedd ,"\u0078\u0020\u0072e\u0073\u006f\u006c\u0075\u0074\u0069\u006f\u006e");};_dbe +=_eagbb ;_gdd .BigEndian .PutUint32 (_cdbd ,uint32 (_eac .ResolutionY ));if _eagbb ,_fbgd =w .Write (_cdbd );_fbgd !=nil {return _eagbb +_dbe ,_af .Wrap (_fbgd ,_gedd ,"\u0079\u0020\u0072e\u0073\u006f\u006c\u0075\u0074\u0069\u006f\u006e");
};_dbe +=_eagbb ;if _fbgd =_eac .encodeFlags (w );_fbgd !=nil {return _dbe ,_af .Wrap (_fbgd ,_gedd ,"");};_dbe ++;if _eagbb ,_fbgd =_eac .encodeStripingInformation (w );_fbgd !=nil {return _dbe ,_af .Wrap (_fbgd ,_gedd ,"");};_dbe +=_eagbb ;return _dbe ,nil ;
};func (_gebc *TextRegion )createRegionBitmap ()error {_gebc .RegionBitmap =_cfb .New (int (_gebc .RegionInfo .BitmapWidth ),int (_gebc .RegionInfo .BitmapHeight ));if _gebc .DefaultPixel !=0{_gebc .RegionBitmap .SetDefaultPixel ();};return nil ;};func (_gfeg *SymbolDictionary )InitEncode (symbols *_cfb .Bitmaps ,symbolList []int ,symbolMap map[int ]int ,unborderSymbols bool )error {const _badd ="S\u0079\u006d\u0062\u006f\u006c\u0044i\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u002eI\u006e\u0069\u0074E\u006ec\u006f\u0064\u0065";
_gfeg .SdATX =[]int8 {3,-3,2,-2};_gfeg .SdATY =[]int8 {-1,-1,-2,-2};_gfeg ._geec =symbols ;_gfeg ._cada =make ([]int ,len (symbolList ));copy (_gfeg ._cada ,symbolList );if len (_gfeg ._cada )!=_gfeg ._geec .Size (){return _af .Error (_badd ,"s\u0079\u006d\u0062\u006f\u006c\u0073\u0020\u0061\u006e\u0064\u0020\u0073\u0079\u006d\u0062\u006f\u006c\u004ci\u0073\u0074\u0020\u006f\u0066\u0020\u0064\u0069\u0066\u0066er\u0065\u006e\u0074 \u0073i\u007a\u0065");
};_gfeg .NumberOfNewSymbols =uint32 (symbols .Size ());_gfeg .NumberOfExportedSymbols =uint32 (symbols .Size ());_gfeg ._fgdg =symbolMap ;_gfeg ._bfdg =unborderSymbols ;return nil ;};func (_cafb *TextRegion )initSymbols ()error {const _eacee ="i\u006e\u0069\u0074\u0053\u0079\u006d\u0062\u006f\u006c\u0073";
for _ ,_gacb :=range _cafb .Header .RTSegments {if _gacb ==nil {return _af .Error (_eacee ,"\u006e\u0069\u006c\u0020\u0073\u0065\u0067\u006de\u006e\u0074\u0020pr\u006f\u0076\u0069\u0064\u0065\u0064 \u0066\u006f\u0072\u0020\u0074\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u0072\u0065g\u0069\u006f\u006e\u0020\u0053\u0079\u006d\u0062o\u006c\u0073");
};if _gacb .Type ==0{_ecebb ,_cgde :=_gacb .GetSegmentData ();if _cgde !=nil {return _af .Wrap (_cgde ,_eacee ,"");};_fbed ,_aafb :=_ecebb .(*SymbolDictionary );if !_aafb {return _af .Error (_eacee ,"\u0072e\u0066\u0065r\u0072\u0065\u0064 \u0054\u006f\u0020\u0053\u0065\u0067\u006de\u006e\u0074\u0020\u0069\u0073\u0020n\u006f\u0074\u0020\u0061\u0020\u0053\u0079\u006d\u0062\u006f\u006cD\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_fbed ._afef =_cafb ._ecge ;_deda ,_cgde :=_fbed .GetDictionary ();if _cgde !=nil {return _af .Wrap (_cgde ,_eacee ,"");};_cafb .Symbols =append (_cafb .Symbols ,_deda ...);};};_cafb .NumberOfSymbols =uint32 (len (_cafb .Symbols ));return nil ;};func (_bfd *GenericRefinementRegion )decodeOptimized (_de ,_dc ,_ecg ,_eca ,_fa ,_eeb ,_bfa int )error {var (_fcca error ;
_fag int ;_fd int ;);_gc :=_de -int (_bfd .ReferenceDY );if _bfb :=int (-_bfd .ReferenceDX );_bfb > 0{_fag =_bfb ;};_gdde :=_bfd .ReferenceBitmap .GetByteIndex (_fag ,_gc );if _bfd .ReferenceDX > 0{_fd =int (_bfd .ReferenceDX );};_afb :=_bfd .RegionBitmap .GetByteIndex (_fd ,_de );
switch _bfd .TemplateID {case 0:_fcca =_bfd .decodeTemplate (_de ,_dc ,_ecg ,_eca ,_fa ,_eeb ,_bfa ,_afb ,_gc ,_gdde ,_bfd ._gf );case 1:_fcca =_bfd .decodeTemplate (_de ,_dc ,_ecg ,_eca ,_fa ,_eeb ,_bfa ,_afb ,_gc ,_gdde ,_bfd ._fca );};return _fcca ;
};func (_bceg *TextRegion )GetRegionBitmap ()(*_cfb .Bitmap ,error ){if _bceg .RegionBitmap !=nil {return _bceg .RegionBitmap ,nil ;};if !_bceg .IsHuffmanEncoded {if _cebc :=_bceg .setCodingStatistics ();_cebc !=nil {return nil ,_cebc ;};};if _ecdcc :=_bceg .createRegionBitmap ();
_ecdcc !=nil {return nil ,_ecdcc ;};if _bcgf :=_bceg .decodeSymbolInstances ();_bcgf !=nil {return nil ,_bcgf ;};return _bceg .RegionBitmap ,nil ;};func (_bgd *GenericRegion )Encode (w _cfg .BinaryWriter )(_gfd int ,_ebg error ){const _cac ="G\u0065n\u0065\u0072\u0069\u0063\u0052\u0065\u0067\u0069o\u006e\u002e\u0045\u006eco\u0064\u0065";
if _bgd .Bitmap ==nil {return 0,_af .Error (_cac ,"\u0070\u0072\u006f\u0076id\u0065\u0064\u0020\u006e\u0069\u006c\u0020\u0062\u0069\u0074\u006d\u0061\u0070");};_dfg ,_ebg :=_bgd .RegionSegment .Encode (w );if _ebg !=nil {return 0,_af .Wrap (_ebg ,_cac ,"\u0052\u0065\u0067\u0069\u006f\u006e\u0053\u0065\u0067\u006d\u0065\u006e\u0074");
};_gfd +=_dfg ;if _ebg =w .SkipBits (4);_ebg !=nil {return _gfd ,_af .Wrap (_ebg ,_cac ,"\u0073k\u0069p\u0020\u0072\u0065\u0073\u0065r\u0076\u0065d\u0020\u0062\u0069\u0074\u0073");};var _ebgb int ;if _bgd .IsTPGDon {_ebgb =1;};if _ebg =w .WriteBit (_ebgb );
_ebg !=nil {return _gfd ,_af .Wrap (_ebg ,_cac ,"\u0074\u0070\u0067\u0064\u006f\u006e");};_ebgb =0;if _ebg =w .WriteBit (int (_bgd .GBTemplate >>1)&0x01);_ebg !=nil {return _gfd ,_af .Wrap (_ebg ,_cac ,"f\u0069r\u0073\u0074\u0020\u0067\u0062\u0074\u0065\u006dp\u006c\u0061\u0074\u0065 b\u0069\u0074");
};if _ebg =w .WriteBit (int (_bgd .GBTemplate )&0x01);_ebg !=nil {return _gfd ,_af .Wrap (_ebg ,_cac ,"s\u0065\u0063\u006f\u006ed \u0067b\u0074\u0065\u006d\u0070\u006ca\u0074\u0065\u0020\u0062\u0069\u0074");};if _bgd .UseMMR {_ebgb =1;};if _ebg =w .WriteBit (_ebgb );
_ebg !=nil {return _gfd ,_af .Wrap (_ebg ,_cac ,"u\u0073\u0065\u0020\u004d\u004d\u0052\u0020\u0062\u0069\u0074");};_gfd ++;if _dfg ,_ebg =_bgd .writeGBAtPixels (w );_ebg !=nil {return _gfd ,_af .Wrap (_ebg ,_cac ,"");};_gfd +=_dfg ;_aag :=_be .New ();if _ebg =_aag .EncodeBitmap (_bgd .Bitmap ,_bgd .IsTPGDon );
_ebg !=nil {return _gfd ,_af .Wrap (_ebg ,_cac ,"");};_aag .Final ();var _ffdb int64 ;if _ffdb ,_ebg =_aag .WriteTo (w );_ebg !=nil {return _gfd ,_af .Wrap (_ebg ,_cac ,"");};_gfd +=int (_ffdb );return _gfd ,nil ;};func (_aecc *SymbolDictionary )encodeRefinementATFlags (_cdffb _cfg .BinaryWriter )(_cacd int ,_fad error ){const _cecca ="\u0065\u006e\u0063od\u0065\u0052\u0065\u0066\u0069\u006e\u0065\u006d\u0065\u006e\u0074\u0041\u0054\u0046\u006c\u0061\u0067\u0073";
if !_aecc .UseRefinementAggregation ||_aecc .SdrTemplate !=0{return 0,nil ;};for _edbb :=0;_edbb < 2;_edbb ++{if _fad =_cdffb .WriteByte (byte (_aecc .SdrATX [_edbb ]));_fad !=nil {return _cacd ,_af .Wrapf (_fad ,_cecca ,"\u0053\u0064\u0072\u0041\u0054\u0058\u005b\u0025\u0064\u005d",_edbb );
};_cacd ++;if _fad =_cdffb .WriteByte (byte (_aecc .SdrATY [_edbb ]));_fad !=nil {return _cacd ,_af .Wrapf (_fad ,_cecca ,"\u0053\u0064\u0072\u0041\u0054\u0059\u005b\u0025\u0064\u005d",_edbb );};_cacd ++;};return _cacd ,nil ;};func (_aad *GenericRegion )Size ()int {return _aad .RegionSegment .Size ()+1+2*len (_aad .GBAtX )};
func (_bfgaf *PageInformationSegment )readIsLossless ()error {_gde ,_adge :=_bfgaf ._dgbg .ReadBit ();if _adge !=nil {return _adge ;};if _gde ==1{_bfgaf .IsLossless =true ;};return nil ;};func (_fbef *RegionSegment )String ()string {_bgbg :=&_cf .Builder {};
_bgbg .WriteString ("\u0009[\u0052E\u0047\u0049\u004f\u004e\u0020S\u0045\u0047M\u0045\u004e\u0054\u005d\u000a");_bgbg .WriteString (_a .Sprintf ("\t\u0009\u002d\u0020\u0042\u0069\u0074m\u0061\u0070\u0020\u0028\u0077\u0069d\u0074\u0068\u002c\u0020\u0068\u0065\u0069g\u0068\u0074\u0029\u0020\u005b\u0025\u0064\u0078\u0025\u0064]\u000a",_fbef .BitmapWidth ,_fbef .BitmapHeight ));
_bgbg .WriteString (_a .Sprintf ("\u0009\u0009\u002d\u0020L\u006f\u0063\u0061\u0074\u0069\u006f\u006e\u0020\u0028\u0078,\u0079)\u003a\u0020\u005b\u0025\u0064\u002c\u0025d\u005d\u000a",_fbef .XLocation ,_fbef .YLocation ));_bgbg .WriteString (_a .Sprintf ("\t\u0009\u002d\u0020\u0043\u006f\u006db\u0069\u006e\u0061\u0074\u0069\u006f\u006e\u004f\u0070e\u0072\u0061\u0074o\u0072:\u0020\u0025\u0073",_fbef .CombinaionOperator ));
return _bgbg .String ();};func (_deg *GenericRegion )overrideAtTemplate3 (_ceg ,_ffa ,_gbgeb ,_fbc ,_dbg int )int {_ceg &=0x3EF;if _deg .GBAtY [0]==0&&_deg .GBAtX [0]>=-int8 (_dbg ){_ceg |=(_fbc >>uint (7-(int8 (_dbg )+_deg .GBAtX [0]))&0x1)<<4;}else {_ceg |=int (_deg .getPixel (_ffa +int (_deg .GBAtX [0]),_gbgeb +int (_deg .GBAtY [0])))<<4;
};return _ceg ;};type EndOfStripe struct{_cfc *_cfg .Reader ;_ee int ;};func (_adbf *SymbolDictionary )decodeHeightClassCollectiveBitmap (_dbec int64 ,_aadg ,_cfgef uint32 )(*_cfb .Bitmap ,error ){if _dbec ==0{_bgfe :=_cfb .New (int (_cfgef ),int (_aadg ));
var (_gacae byte ;_cagfc error ;);for _egbc :=0;_egbc < len (_bgfe .Data );_egbc ++{_gacae ,_cagfc =_adbf ._cdbb .ReadByte ();if _cagfc !=nil {return nil ,_cagfc ;};if _cagfc =_bgfe .SetByte (_egbc ,_gacae );_cagfc !=nil {return nil ,_cagfc ;};};return _bgfe ,nil ;
};if _adbf ._aacf ==nil {_adbf ._aacf =NewGenericRegion (_adbf ._cdbb );};_adbf ._aacf .setParameters (true ,_adbf ._cdbb .AbsolutePosition (),_dbec ,_aadg ,_cfgef );_fdde ,_cdgb :=_adbf ._aacf .GetRegionBitmap ();if _cdgb !=nil {return nil ,_cdgb ;};return _fdde ,nil ;
};func (_gbac *SymbolDictionary )checkInput ()error {if _gbac .SdHuffDecodeHeightSelection ==2{_ad .Log .Debug ("\u0053\u0079\u006d\u0062\u006fl\u0020\u0044\u0069\u0063\u0074i\u006fn\u0061\u0072\u0079\u0020\u0044\u0065\u0063\u006f\u0064\u0065\u0020\u0048\u0065\u0069\u0067\u0068\u0074\u0020\u0053e\u006c\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0025\u0064\u0020\u0076\u0061\u006c\u0075\u0065\u0020\u006e\u006f\u0074\u0020\u0070\u0065r\u006d\u0069\u0074\u0074\u0065\u0064",_gbac .SdHuffDecodeHeightSelection );
};if _gbac .SdHuffDecodeWidthSelection ==2{_ad .Log .Debug ("\u0053\u0079\u006d\u0062\u006f\u006c\u0020\u0044\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079 \u0044\u0065\u0063\u006f\u0064\u0065\u0020\u0057\u0069\u0064t\u0068\u0020\u0053\u0065\u006c\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0025\u0064\u0020\u0076\u0061l\u0075\u0065\u0020\u006e\u006f\u0074 \u0070\u0065r\u006d\u0069t\u0074e\u0064",_gbac .SdHuffDecodeWidthSelection );
};if _gbac .IsHuffmanEncoded {if _gbac .SdTemplate !=0{_ad .Log .Debug ("\u0053\u0044T\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0028\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062e \u0030\u0029",_gbac .SdTemplate );
};if !_gbac .UseRefinementAggregation {if !_gbac .UseRefinementAggregation {if _gbac ._cffe {_ad .Log .Debug ("\u0049\u0073\u0043\u006f\u0064\u0069\u006e\u0067C\u006f\u006e\u0074ex\u0074\u0052\u0065\u0074\u0061\u0069n\u0065\u0064\u0020\u003d\u0020\u0074\u0072\u0075\u0065\u0020\u0028\u0073\u0068\u006f\u0075l\u0064\u0020\u0062\u0065\u0020\u0066\u0061\u006cs\u0065\u0029");
_gbac ._cffe =false ;};if _gbac ._efde {_ad .Log .Debug ("\u0069s\u0043\u006fd\u0069\u006e\u0067\u0043o\u006e\u0074\u0065x\u0074\u0055\u0073\u0065\u0064\u0020\u003d\u0020\u0074ru\u0065\u0020\u0028s\u0068\u006fu\u006c\u0064\u0020\u0062\u0065\u0020f\u0061\u006cs\u0065\u0029");
_gbac ._efde =false ;};};};}else {if _gbac .SdHuffBMSizeSelection !=0{_ad .Log .Debug ("\u0053\u0064\u0048\u0075\u0066\u0066B\u004d\u0053\u0069\u007a\u0065\u0053\u0065\u006c\u0065\u0063\u0074\u0069\u006fn\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u0062\u0065\u0020\u0030");
_gbac .SdHuffBMSizeSelection =0;};if _gbac .SdHuffDecodeWidthSelection !=0{_ad .Log .Debug ("\u0053\u0064\u0048\u0075\u0066\u0066\u0044\u0065\u0063\u006f\u0064\u0065\u0057\u0069\u0064\u0074\u0068\u0053\u0065\u006c\u0065\u0063\u0074\u0069o\u006e\u0020\u0073\u0068\u006fu\u006c\u0064 \u0062\u0065\u0020\u0030");
_gbac .SdHuffDecodeWidthSelection =0;};if _gbac .SdHuffDecodeHeightSelection !=0{_ad .Log .Debug ("\u0053\u0064\u0048\u0075\u0066\u0066\u0044\u0065\u0063\u006f\u0064\u0065\u0048e\u0069\u0067\u0068\u0074\u0053\u0065l\u0065\u0063\u0074\u0069\u006f\u006e\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u0062\u0065\u0020\u0030");
_gbac .SdHuffDecodeHeightSelection =0;};};if !_gbac .UseRefinementAggregation {if _gbac .SdrTemplate !=0{_ad .Log .Debug ("\u0053\u0044\u0052\u0054\u0065\u006d\u0070\u006c\u0061\u0074e\u0020\u003d\u0020\u0025\u0064\u0020\u0028s\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0030\u0029",_gbac .SdrTemplate );
_gbac .SdrTemplate =0;};};if !_gbac .IsHuffmanEncoded ||!_gbac .UseRefinementAggregation {if _gbac .SdHuffAggInstanceSelection {_ad .Log .Debug ("\u0053d\u0048\u0075f\u0066\u0041\u0067g\u0049\u006e\u0073\u0074\u0061\u006e\u0063e\u0053\u0065\u006c\u0065\u0063\u0074i\u006f\u006e\u0020\u003d\u0020\u0025\u0064\u0020\u0028\u0073\u0068o\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0030\u0029",_gbac .SdHuffAggInstanceSelection );
};};return nil ;};func (_baa *GenericRegion )decodeTemplate0b (_ggaa ,_addf ,_bcfe int ,_ecee ,_dfb int )(_def error ){const _feb ="\u0064\u0065c\u006f\u0064\u0065T\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u0030\u0062";var (_cfad ,_ffdba int ;_ddb ,_bdg int ;
_ccb byte ;_bgc int ;);if _ggaa >=1{_ccb ,_def =_baa .Bitmap .GetByte (_dfb );if _def !=nil {return _af .Wrap (_def ,_feb ,"\u006ci\u006e\u0065\u0020\u003e\u003d\u00201");};_ddb =int (_ccb );};if _ggaa >=2{_ccb ,_def =_baa .Bitmap .GetByte (_dfb -_baa .Bitmap .RowStride );
if _def !=nil {return _af .Wrap (_def ,_feb ,"\u006ci\u006e\u0065\u0020\u003e\u003d\u00202");};_bdg =int (_ccb )<<6;};_cfad =(_ddb &0xf0)|(_bdg &0x3800);for _eebe :=0;_eebe < _bcfe ;_eebe =_bgc {var (_ddf byte ;_aaa int ;);_bgc =_eebe +8;if _aed :=_addf -_eebe ;
_aed > 8{_aaa =8;}else {_aaa =_aed ;};if _ggaa > 0{_ddb <<=8;if _bgc < _addf {_ccb ,_def =_baa .Bitmap .GetByte (_dfb +1);if _def !=nil {return _af .Wrap (_def ,_feb ,"\u006c\u0069\u006e\u0065\u0020\u003e\u0020\u0030");};_ddb |=int (_ccb );};};if _ggaa > 1{_bdg <<=8;
if _bgc < _addf {_ccb ,_def =_baa .Bitmap .GetByte (_dfb -_baa .Bitmap .RowStride +1);if _def !=nil {return _af .Wrap (_def ,_feb ,"\u006c\u0069\u006e\u0065\u0020\u003e\u0020\u0031");};_bdg |=int (_ccb )<<6;};};for _ggga :=0;_ggga < _aaa ;_ggga ++{_aba :=uint (7-_ggga );
if _baa ._fda {_ffdba =_baa .overrideAtTemplate0b (_cfad ,_eebe +_ggga ,_ggaa ,int (_ddf ),_ggga ,int (_aba ));_baa ._dff .SetIndex (int32 (_ffdba ));}else {_baa ._dff .SetIndex (int32 (_cfad ));};var _dccb int ;_dccb ,_def =_baa ._acbbd .DecodeBit (_baa ._dff );
if _def !=nil {return _af .Wrap (_def ,_feb ,"");};_ddf |=byte (_dccb <<_aba );_cfad =((_cfad &0x7bf7)<<1)|_dccb |((_ddb >>_aba )&0x10)|((_bdg >>_aba )&0x800);};if _dbcb :=_baa .Bitmap .SetByte (_ecee ,_ddf );_dbcb !=nil {return _af .Wrap (_dbcb ,_feb ,"");
};_ecee ++;_dfb ++;};return nil ;};func (_ccaa *Header )readSegmentDataLength (_beag *_cfg .Reader )(_bgbbb error ){_ccaa .SegmentDataLength ,_bgbbb =_beag .ReadBits (32);if _bgbbb !=nil {return _bgbbb ;};_ccaa .SegmentDataLength &=_c .MaxInt32 ;return nil ;
};func (_cgfb *TextRegion )encodeSymbols (_gbfd _cfg .BinaryWriter )(_aabb int ,_fdbc error ){const _becag ="\u0065\u006e\u0063\u006f\u0064\u0065\u0053\u0079\u006d\u0062\u006f\u006c\u0073";_efeg :=make ([]byte ,4);_gdd .BigEndian .PutUint32 (_efeg ,_cgfb .NumberOfSymbols );
if _aabb ,_fdbc =_gbfd .Write (_efeg );_fdbc !=nil {return _aabb ,_af .Wrap (_fdbc ,_becag ,"\u004e\u0075\u006dbe\u0072\u004f\u0066\u0053\u0079\u006d\u0062\u006f\u006c\u0049\u006e\u0073\u0074\u0061\u006e\u0063\u0065\u0073");};_cafac ,_fdbc :=_cfb .NewClassedPoints (_cgfb ._bdbg ,_cgfb ._gead );
if _fdbc !=nil {return 0,_af .Wrap (_fdbc ,_becag ,"");};var _deefd ,_baeg int ;_ggge :=_be .New ();_ggge .Init ();if _fdbc =_ggge .EncodeInteger (_be .IADT ,0);_fdbc !=nil {return _aabb ,_af .Wrap (_fdbc ,_becag ,"\u0069\u006e\u0069\u0074\u0069\u0061\u006c\u0020\u0044\u0054");
};_edfgc ,_fdbc :=_cafac .GroupByY ();if _fdbc !=nil {return 0,_af .Wrap (_fdbc ,_becag ,"");};for _ ,_ggbb :=range _edfgc {_ddcg :=int (_ggbb .YAtIndex (0));_abfc :=_ddcg -_deefd ;if _fdbc =_ggge .EncodeInteger (_be .IADT ,_abfc );_fdbc !=nil {return _aabb ,_af .Wrap (_fdbc ,_becag ,"");
};var _gffa int ;for _agcc ,_bddge :=range _ggbb .IntSlice {switch _agcc {case 0:_eedfc :=int (_ggbb .XAtIndex (_agcc ))-_baeg ;if _fdbc =_ggge .EncodeInteger (_be .IAFS ,_eedfc );_fdbc !=nil {return _aabb ,_af .Wrap (_fdbc ,_becag ,"");};_baeg +=_eedfc ;
_gffa =_baeg ;default:_dcca :=int (_ggbb .XAtIndex (_agcc ))-_gffa ;if _fdbc =_ggge .EncodeInteger (_be .IADS ,_dcca );_fdbc !=nil {return _aabb ,_af .Wrap (_fdbc ,_becag ,"");};_gffa +=_dcca ;};_bbfa ,_efbab :=_cgfb ._afcdd .Get (_bddge );if _efbab !=nil {return _aabb ,_af .Wrap (_efbab ,_becag ,"");
};_cafc ,_efbb :=_cgfb ._gfce [_bbfa ];if !_efbb {_cafc ,_efbb =_cgfb ._cebg [_bbfa ];if !_efbb {return _aabb ,_af .Errorf (_becag ,"\u0053\u0079\u006d\u0062\u006f\u006c:\u0020\u0027\u0025d\u0027\u0020\u0069s\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064 \u0069\u006e\u0020\u0067\u006cob\u0061\u006c\u0020\u0061\u006e\u0064\u0020\u006c\u006f\u0063\u0061\u006c\u0020\u0073\u0079\u006d\u0062\u006f\u006c\u0020\u006d\u0061\u0070",_bbfa );
};};if _efbab =_ggge .EncodeIAID (_cgfb ._dgaa ,_cafc );_efbab !=nil {return _aabb ,_af .Wrap (_efbab ,_becag ,"");};};if _fdbc =_ggge .EncodeOOB (_be .IADS );_fdbc !=nil {return _aabb ,_af .Wrap (_fdbc ,_becag ,"");};};_ggge .Final ();_fbfg ,_fdbc :=_ggge .WriteTo (_gbfd );
if _fdbc !=nil {return _aabb ,_af .Wrap (_fdbc ,_becag ,"");};_aabb +=int (_fbfg );return _aabb ,nil ;};type Header struct{SegmentNumber uint32 ;Type Type ;RetainFlag bool ;PageAssociation int ;PageAssociationFieldSize bool ;RTSegments []*Header ;HeaderLength int64 ;
SegmentDataLength uint64 ;SegmentDataStartOffset uint64 ;Reader *_cfg .Reader ;SegmentData Segmenter ;RTSNumbers []int ;RetainBits []uint8 ;};func (_ebgc *SymbolDictionary )Encode (w _cfg .BinaryWriter )(_bgcd int ,_fcgb error ){const _bbdc ="\u0053\u0079\u006dbo\u006c\u0044\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u002e\u0045\u006e\u0063\u006f\u0064\u0065";
if _ebgc ==nil {return 0,_af .Error (_bbdc ,"\u0073\u0079m\u0062\u006f\u006c\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u006e\u006f\u0074\u0020\u0064\u0065\u0066in\u0065\u0064");};if _bgcd ,_fcgb =_ebgc .encodeFlags (w );_fcgb !=nil {return _bgcd ,_af .Wrap (_fcgb ,_bbdc ,"");
};_bac ,_fcgb :=_ebgc .encodeATFlags (w );if _fcgb !=nil {return _bgcd ,_af .Wrap (_fcgb ,_bbdc ,"");};_bgcd +=_bac ;if _bac ,_fcgb =_ebgc .encodeRefinementATFlags (w );_fcgb !=nil {return _bgcd ,_af .Wrap (_fcgb ,_bbdc ,"");};_bgcd +=_bac ;if _bac ,_fcgb =_ebgc .encodeNumSyms (w );
_fcgb !=nil {return _bgcd ,_af .Wrap (_fcgb ,_bbdc ,"");};_bgcd +=_bac ;if _bac ,_fcgb =_ebgc .encodeSymbols (w );_fcgb !=nil {return _bgcd ,_af .Wrap (_fcgb ,_bbdc ,"");};_bgcd +=_bac ;return _bgcd ,nil ;};type RegionSegment struct{_afcc *_cfg .Reader ;
BitmapWidth uint32 ;BitmapHeight uint32 ;XLocation uint32 ;YLocation uint32 ;CombinaionOperator _cfb .CombinationOperator ;};func (_bfbd *SymbolDictionary )parseHeader ()(_fafd error ){_ad .Log .Trace ("\u005b\u0053\u0059\u004d\u0042\u004f\u004c \u0044\u0049\u0043T\u0049\u004f\u004e\u0041R\u0059\u005d\u005b\u0050\u0041\u0052\u0053\u0045\u002d\u0048\u0045\u0041\u0044\u0045\u0052\u005d\u0020\u0062\u0065\u0067\u0069\u006e\u0073\u002e\u002e\u002e");
defer func (){if _fafd !=nil {_ad .Log .Trace ("\u005bS\u0059\u004dB\u004f\u004c\u0020\u0044I\u0043\u0054\u0049O\u004e\u0041\u0052\u0059\u005d\u005b\u0050\u0041\u0052SE\u002d\u0048\u0045A\u0044\u0045R\u005d\u0020\u0066\u0061\u0069\u006ce\u0064\u002e \u0025\u0076",_fafd );
}else {_ad .Log .Trace ("\u005b\u0053\u0059\u004d\u0042\u004f\u004c \u0044\u0049\u0043T\u0049\u004f\u004e\u0041R\u0059\u005d\u005b\u0050\u0041\u0052\u0053\u0045\u002d\u0048\u0045\u0041\u0044\u0045\u0052\u005d\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
};}();if _fafd =_bfbd .readRegionFlags ();_fafd !=nil {return _fafd ;};if _fafd =_bfbd .setAtPixels ();_fafd !=nil {return _fafd ;};if _fafd =_bfbd .setRefinementAtPixels ();_fafd !=nil {return _fafd ;};if _fafd =_bfbd .readNumberOfExportedSymbols ();_fafd !=nil {return _fafd ;
};if _fafd =_bfbd .readNumberOfNewSymbols ();_fafd !=nil {return _fafd ;};if _fafd =_bfbd .setInSyms ();_fafd !=nil {return _fafd ;};if _bfbd ._efde {_cdgf :=_bfbd .Header .RTSegments ;for _gaaa :=len (_cdgf )-1;_gaaa >=0;_gaaa --{if _cdgf [_gaaa ].Type ==0{_caa ,_gdgaa :=_cdgf [_gaaa ].SegmentData .(*SymbolDictionary );
if !_gdgaa {_fafd =_a .Errorf ("\u0072\u0065\u006c\u0061\u0074\u0065\u0064\u0020\u0053\u0065\u0067\u006d\u0065\u006e\u0074:\u0020\u0025\u0076\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0061\u0020S\u0079\u006d\u0062\u006f\u006c\u0020\u0044\u0069\u0063\u0074\u0069\u006fna\u0072\u0079\u0020\u0053\u0065\u0067\u006d\u0065\u006e\u0074",_cdgf [_gaaa ]);
return _fafd ;};if _caa ._efde {_bfbd .setRetainedCodingContexts (_caa );};break ;};};};if _fafd =_bfbd .checkInput ();_fafd !=nil {return _fafd ;};return nil ;};func (_ebee *TextRegion )getUserTable (_abda int )(_e .Tabler ,error ){const _ggfaf ="\u0067\u0065\u0074U\u0073\u0065\u0072\u0054\u0061\u0062\u006c\u0065";
var _gaccc int ;for _ ,_becg :=range _ebee .Header .RTSegments {if _becg .Type ==53{if _gaccc ==_abda {_aaea ,_aedg :=_becg .GetSegmentData ();if _aedg !=nil {return nil ,_aedg ;};_daecf ,_dbga :=_aaea .(*TableSegment );if !_dbga {_ad .Log .Debug (_a .Sprintf ("\u0073\u0065\u0067\u006d\u0065\u006e\u0074 \u0077\u0069\u0074h\u0020\u0054\u0079p\u0065\u00205\u0033\u0020\u002d\u0020\u0061\u006ed\u0020in\u0064\u0065\u0078\u003a\u0020\u0025\u0064\u0020\u006e\u006f\u0074\u0020\u0061\u0020\u0054\u0061\u0062\u006c\u0065\u0053\u0065\u0067\u006d\u0065\u006e\u0074",_becg .SegmentNumber ));
return nil ,_af .Error (_ggfaf ,"\u0073\u0065\u0067\u006d\u0065\u006e\u0074 \u0077\u0069\u0074h\u0020\u0054\u0079\u0070e\u0020\u0035\u0033\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0061\u0020\u002a\u0054\u0061\u0062\u006c\u0065\u0053\u0065\u0067\u006d\u0065\u006e\u0074");
};return _e .NewEncodedTable (_daecf );};_gaccc ++;};};return nil ,nil ;};func (_degd *RegionSegment )Size ()int {return 17};type EncodeInitializer interface{InitEncode ();};func (_dfcb *SymbolDictionary )getSymbol (_debf int )(*_cfb .Bitmap ,error ){const _bfcd ="\u0067e\u0074\u0053\u0079\u006d\u0062\u006fl";
_gfag ,_gggf :=_dfcb ._geec .GetBitmap (_dfcb ._cada [_debf ]);if _gggf !=nil {return nil ,_af .Wrap (_gggf ,_bfcd ,"\u0063\u0061n\u0027\u0074\u0020g\u0065\u0074\u0020\u0073\u0079\u006d\u0062\u006f\u006c");};return _gfag ,nil ;};func (_afbf *SymbolDictionary )decodeNewSymbols (_gdbg ,_bfbg uint32 ,_aadcd *_cfb .Bitmap ,_dafd ,_gdfc int32 )error {if _afbf ._cfcg ==nil {_afbf ._cfcg =_ddd (_afbf ._cdbb ,nil );
if _afbf ._cbgf ==nil {var _bdcfd error ;_afbf ._cbgf ,_bdcfd =_cfd .New (_afbf ._cdbb );if _bdcfd !=nil {return _bdcfd ;};};if _afbf ._cfda ==nil {_afbf ._cfda =_cfd .NewStats (65536,1);};};_afbf ._cfcg .setParameters (_afbf ._cfda ,_afbf ._cbgf ,_afbf .SdrTemplate ,_gdbg ,_bfbg ,_aadcd ,_dafd ,_gdfc ,false ,_afbf .SdrATX ,_afbf .SdrATY );
return _afbf .addSymbol (_afbf ._cfcg );};func NewHeader (d Documenter ,r *_cfg .Reader ,offset int64 ,organizationType OrganizationType )(*Header ,error ){_gbgdd :=&Header {Reader :r };if _faaa :=_gbgdd .parse (d ,r ,offset ,organizationType );_faaa !=nil {return nil ,_af .Wrap (_faaa ,"\u004ee\u0077\u0048\u0065\u0061\u0064\u0065r","");
};return _gbgdd ,nil ;};