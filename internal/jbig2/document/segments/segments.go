//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package segments ;import (_a "encoding/binary";_eg "errors";_d "fmt";_c "github.com/unidoc/unipdf/v4/common";_db "github.com/unidoc/unipdf/v4/internal/bitwise";_fe "github.com/unidoc/unipdf/v4/internal/jbig2/basic";_ea "github.com/unidoc/unipdf/v4/internal/jbig2/bitmap";
_dbe "github.com/unidoc/unipdf/v4/internal/jbig2/decoder/arithmetic";_dbd "github.com/unidoc/unipdf/v4/internal/jbig2/decoder/huffman";_da "github.com/unidoc/unipdf/v4/internal/jbig2/decoder/mmr";_af "github.com/unidoc/unipdf/v4/internal/jbig2/encoder/arithmetic";
_df "github.com/unidoc/unipdf/v4/internal/jbig2/errors";_dd "github.com/unidoc/unipdf/v4/internal/jbig2/internal";_e "image";_fa "io";_f "math";_ab "strings";_g "time";);func (_cfac *PageInformationSegment )readDefaultPixelValue ()error {_gcbf ,_fgafg :=_cfac ._dfag .ReadBit ();
if _fgafg !=nil {return _fgafg ;};_cfac .DefaultPixelValue =uint8 (_gcbf &0xf);return nil ;};func (_efea *SymbolDictionary )encodeRefinementATFlags (_afea _db .BinaryWriter )(_cdeg int ,_gddbf error ){const _dgff ="\u0065\u006e\u0063od\u0065\u0052\u0065\u0066\u0069\u006e\u0065\u006d\u0065\u006e\u0074\u0041\u0054\u0046\u006c\u0061\u0067\u0073";
if !_efea .UseRefinementAggregation ||_efea .SdrTemplate !=0{return 0,nil ;};for _afdg :=0;_afdg < 2;_afdg ++{if _gddbf =_afea .WriteByte (byte (_efea .SdrATX [_afdg ]));_gddbf !=nil {return _cdeg ,_df .Wrapf (_gddbf ,_dgff ,"\u0053\u0064\u0072\u0041\u0054\u0058\u005b\u0025\u0064\u005d",_afdg );
};_cdeg ++;if _gddbf =_afea .WriteByte (byte (_efea .SdrATY [_afdg ]));_gddbf !=nil {return _cdeg ,_df .Wrapf (_gddbf ,_dgff ,"\u0053\u0064\u0072\u0041\u0054\u0059\u005b\u0025\u0064\u005d",_afdg );};_cdeg ++;};return _cdeg ,nil ;};func (_dgg *GenericRegion )setParameters (_facfd bool ,_affc ,_fbcc int64 ,_gaf ,_efee uint32 ){_dgg .IsMMREncoded =_facfd ;
_dgg .DataOffset =_affc ;_dgg .DataLength =_fbcc ;_dgg .RegionSegment .BitmapHeight =_gaf ;_dgg .RegionSegment .BitmapWidth =_efee ;_dgg ._gdb =nil ;_dgg .Bitmap =nil ;};func (_bgf *PageInformationSegment )readContainsRefinement ()error {_ecd ,_cfae :=_bgf ._dfag .ReadBit ();
if _cfae !=nil {return _cfae ;};if _ecd ==1{_bgf ._bagf =true ;};return nil ;};func (_feff *SymbolDictionary )parseHeader ()(_bgab error ){_c .Log .Trace ("\u005b\u0053\u0059\u004d\u0042\u004f\u004c \u0044\u0049\u0043T\u0049\u004f\u004e\u0041R\u0059\u005d\u005b\u0050\u0041\u0052\u0053\u0045\u002d\u0048\u0045\u0041\u0044\u0045\u0052\u005d\u0020\u0062\u0065\u0067\u0069\u006e\u0073\u002e\u002e\u002e");
defer func (){if _bgab !=nil {_c .Log .Trace ("\u005bS\u0059\u004dB\u004f\u004c\u0020\u0044I\u0043\u0054\u0049O\u004e\u0041\u0052\u0059\u005d\u005b\u0050\u0041\u0052SE\u002d\u0048\u0045A\u0044\u0045R\u005d\u0020\u0066\u0061\u0069\u006ce\u0064\u002e \u0025\u0076",_bgab );
}else {_c .Log .Trace ("\u005b\u0053\u0059\u004d\u0042\u004f\u004c \u0044\u0049\u0043T\u0049\u004f\u004e\u0041R\u0059\u005d\u005b\u0050\u0041\u0052\u0053\u0045\u002d\u0048\u0045\u0041\u0044\u0045\u0052\u005d\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
};}();if _bgab =_feff .readRegionFlags ();_bgab !=nil {return _bgab ;};if _bgab =_feff .setAtPixels ();_bgab !=nil {return _bgab ;};if _bgab =_feff .setRefinementAtPixels ();_bgab !=nil {return _bgab ;};if _bgab =_feff .readNumberOfExportedSymbols ();_bgab !=nil {return _bgab ;
};if _bgab =_feff .readNumberOfNewSymbols ();_bgab !=nil {return _bgab ;};if _bgab =_feff .setInSyms ();_bgab !=nil {return _bgab ;};if _feff ._gca {_ggfb :=_feff .Header .RTSegments ;for _dbb :=len (_ggfb )-1;_dbb >=0;_dbb --{if _ggfb [_dbb ].Type ==0{_gdc ,_dde :=_ggfb [_dbb ].SegmentData .(*SymbolDictionary );
if !_dde {_bgab =_d .Errorf ("\u0072\u0065\u006c\u0061\u0074\u0065\u0064\u0020\u0053\u0065\u0067\u006d\u0065\u006e\u0074:\u0020\u0025\u0076\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0061\u0020S\u0079\u006d\u0062\u006f\u006c\u0020\u0044\u0069\u0063\u0074\u0069\u006fna\u0072\u0079\u0020\u0053\u0065\u0067\u006d\u0065\u006e\u0074",_ggfb [_dbb ]);
return _bgab ;};if _gdc ._gca {_feff .setRetainedCodingContexts (_gdc );};break ;};};};if _bgab =_feff .checkInput ();_bgab !=nil {return _bgab ;};return nil ;};func (_egcd *HalftoneRegion )Init (hd *Header ,r *_db .Reader )error {_egcd ._aaae =r ;_egcd ._gacb =hd ;
_egcd .RegionSegment =NewRegionSegment (r );return _egcd .parseHeader ();};func (_gcge *Header )readHeaderFlags ()error {const _adac ="\u0072e\u0061d\u0048\u0065\u0061\u0064\u0065\u0072\u0046\u006c\u0061\u0067\u0073";_feabe ,_bbe :=_gcge .Reader .ReadBit ();
if _bbe !=nil {return _df .Wrap (_bbe ,_adac ,"r\u0065\u0074\u0061\u0069\u006e\u0020\u0066\u006c\u0061\u0067");};if _feabe !=0{_gcge .RetainFlag =true ;};_feabe ,_bbe =_gcge .Reader .ReadBit ();if _bbe !=nil {return _df .Wrap (_bbe ,_adac ,"\u0070\u0061g\u0065\u0020\u0061s\u0073\u006f\u0063\u0069\u0061\u0074\u0069\u006f\u006e");
};if _feabe !=0{_gcge .PageAssociationFieldSize =true ;};_adee ,_bbe :=_gcge .Reader .ReadBits (6);if _bbe !=nil {return _df .Wrap (_bbe ,_adac ,"\u0073\u0065\u0067m\u0065\u006e\u0074\u0020\u0074\u0079\u0070\u0065");};_gcge .Type =Type (int (_adee ));return nil ;
};func (_cba *PatternDictionary )readTemplate ()error {_bbdd ,_adfg :=_cba ._dabd .ReadBits (2);if _adfg !=nil {return _adfg ;};_cba .HDTemplate =byte (_bbdd );return nil ;};func (_eed *GenericRegion )overrideAtTemplate0a (_gcea ,_ddf ,_acbf ,_ecb ,_dace ,_gabd int )int {if _eed .GBAtOverride [0]{_gcea &=0xFFEF;
if _eed .GBAtY [0]==0&&_eed .GBAtX [0]>=-int8 (_dace ){_gcea |=(_ecb >>uint (int8 (_gabd )-_eed .GBAtX [0]&0x1))<<4;}else {_gcea |=int (_eed .getPixel (_ddf +int (_eed .GBAtX [0]),_acbf +int (_eed .GBAtY [0])))<<4;};};if _eed .GBAtOverride [1]{_gcea &=0xFBFF;
if _eed .GBAtY [1]==0&&_eed .GBAtX [1]>=-int8 (_dace ){_gcea |=(_ecb >>uint (int8 (_gabd )-_eed .GBAtX [1]&0x1))<<10;}else {_gcea |=int (_eed .getPixel (_ddf +int (_eed .GBAtX [1]),_acbf +int (_eed .GBAtY [1])))<<10;};};if _eed .GBAtOverride [2]{_gcea &=0xF7FF;
if _eed .GBAtY [2]==0&&_eed .GBAtX [2]>=-int8 (_dace ){_gcea |=(_ecb >>uint (int8 (_gabd )-_eed .GBAtX [2]&0x1))<<11;}else {_gcea |=int (_eed .getPixel (_ddf +int (_eed .GBAtX [2]),_acbf +int (_eed .GBAtY [2])))<<11;};};if _eed .GBAtOverride [3]{_gcea &=0x7FFF;
if _eed .GBAtY [3]==0&&_eed .GBAtX [3]>=-int8 (_dace ){_gcea |=(_ecb >>uint (int8 (_gabd )-_eed .GBAtX [3]&0x1))<<15;}else {_gcea |=int (_eed .getPixel (_ddf +int (_eed .GBAtX [3]),_acbf +int (_eed .GBAtY [3])))<<15;};};return _gcea ;};func (_cfcd *Header )referenceSize ()uint {switch {case _cfcd .SegmentNumber <=255:return 1;
case _cfcd .SegmentNumber <=65535:return 2;default:return 4;};};func (_bage *Header )GetSegmentData ()(Segmenter ,error ){var _beea Segmenter ;if _bage .SegmentData !=nil {_beea =_bage .SegmentData ;};if _beea ==nil {_gbf ,_ddbb :=_bad [_bage .Type ];if !_ddbb {return nil ,_d .Errorf ("\u0074\u0079\u0070\u0065\u003a\u0020\u0025\u0073\u002f\u0020\u0025\u0064\u0020\u0063\u0072e\u0061t\u006f\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e\u0020",_bage .Type ,_bage .Type );
};_beea =_gbf ();_c .Log .Trace ("\u005b\u0053E\u0047\u004d\u0045\u004e\u0054-\u0048\u0045\u0041\u0044\u0045R\u005d\u005b\u0023\u0025\u0064\u005d\u0020\u0047\u0065\u0074\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u0044\u0061\u0074\u0061\u0020\u0061\u0074\u0020\u004f\u0066\u0066\u0073\u0065\u0074\u003a\u0020\u0025\u0030\u0034\u0058",_bage .SegmentNumber ,_bage .SegmentDataStartOffset );
_agfc ,_bcde :=_bage .subInputReader ();if _bcde !=nil {return nil ,_bcde ;};if _abdb :=_beea .Init (_bage ,_agfc );_abdb !=nil {_c .Log .Debug ("\u0049\u006e\u0069\u0074 \u0066\u0061\u0069\u006c\u0065\u0064\u003a\u0020\u0025\u0076 \u0066o\u0072\u0020\u0074\u0079\u0070\u0065\u003a \u0025\u0054",_abdb ,_beea );
return nil ,_abdb ;};_bage .SegmentData =_beea ;};return _beea ,nil ;};type EndOfStripe struct{_cg *_db .Reader ;_dc int ;};func (_dbdag *PatternDictionary )parseHeader ()error {_c .Log .Trace ("\u005b\u0050\u0041\u0054\u0054\u0045\u0052\u004e\u002d\u0044\u0049\u0043\u0054I\u004f\u004e\u0041\u0052\u0059\u005d[\u0070\u0061\u0072\u0073\u0065\u0048\u0065\u0061\u0064\u0065\u0072\u005d\u0020b\u0065\u0067\u0069\u006e");
defer func (){_c .Log .Trace ("\u005b\u0050\u0041T\u0054\u0045\u0052\u004e\u002d\u0044\u0049\u0043\u0054\u0049\u004f\u004e\u0041\u0052\u0059\u005d\u005b\u0070\u0061\u0072\u0073\u0065\u0048\u0065\u0061\u0064\u0065\u0072\u005d \u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064");
}();_ ,_aag :=_dbdag ._dabd .ReadBits (5);if _aag !=nil {return _aag ;};if _aag =_dbdag .readTemplate ();_aag !=nil {return _aag ;};if _aag =_dbdag .readIsMMREncoded ();_aag !=nil {return _aag ;};if _aag =_dbdag .readPatternWidthAndHeight ();_aag !=nil {return _aag ;
};if _aag =_dbdag .readGrayMax ();_aag !=nil {return _aag ;};if _aag =_dbdag .computeSegmentDataStructure ();_aag !=nil {return _aag ;};return _dbdag .checkInput ();};func (_bbbg *PageInformationSegment )Size ()int {return 19};func (_ebgf *TableSegment )parseHeader ()error {var (_aegdd int ;
_caee uint64 ;_cga error ;);_aegdd ,_cga =_ebgf ._fcfc .ReadBit ();if _cga !=nil {return _cga ;};if _aegdd ==1{return _d .Errorf ("\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0074\u0061\u0062\u006c\u0065 \u0073\u0065\u0067\u006d\u0065\u006e\u0074\u0020\u0064e\u0066\u0069\u006e\u0069\u0074\u0069\u006f\u006e\u002e\u0020\u0042\u002e\u0032\u002e1\u0020\u0043\u006f\u0064\u0065\u0020\u0054\u0061\u0062\u006c\u0065\u0020\u0066\u006c\u0061\u0067\u0073\u003a\u0020\u0042\u0069\u0074\u0020\u0037\u0020\u006d\u0075\u0073\u0074\u0020b\u0065\u0020\u007a\u0065\u0072\u006f\u002e\u0020\u0057a\u0073\u003a \u0025\u0064",_aegdd );
};if _caee ,_cga =_ebgf ._fcfc .ReadBits (3);_cga !=nil {return _cga ;};_ebgf ._fdad =(int32 (_caee )+1)&0xf;if _caee ,_cga =_ebgf ._fcfc .ReadBits (3);_cga !=nil {return _cga ;};_ebgf ._fabeb =(int32 (_caee )+1)&0xf;if _caee ,_cga =_ebgf ._fcfc .ReadBits (32);
_cga !=nil {return _cga ;};_ebgf ._dbgg =int32 (_caee &_f .MaxInt32 );if _caee ,_cga =_ebgf ._fcfc .ReadBits (32);_cga !=nil {return _cga ;};_ebgf ._ffdf =int32 (_caee &_f .MaxInt32 );return nil ;};func (_cdc *Header )writeReferredToCount (_bcce _db .BinaryWriter )(_efgc int ,_dcff error ){const _daad ="w\u0072i\u0074\u0065\u0052\u0065\u0066\u0065\u0072\u0072e\u0064\u0054\u006f\u0043ou\u006e\u0074";
_cdc .RTSNumbers =make ([]int ,len (_cdc .RTSegments ));for _aabc ,_fada :=range _cdc .RTSegments {_cdc .RTSNumbers [_aabc ]=int (_fada .SegmentNumber );};if len (_cdc .RTSNumbers )<=4{var _faf byte ;if len (_cdc .RetainBits )>=1{_faf =_cdc .RetainBits [0];
};_faf |=byte (len (_cdc .RTSNumbers ))<<5;if _dcff =_bcce .WriteByte (_faf );_dcff !=nil {return 0,_df .Wrap (_dcff ,_daad ,"\u0073\u0068\u006fr\u0074\u0020\u0066\u006f\u0072\u006d\u0061\u0074");};return 1,nil ;};_ddff :=uint32 (len (_cdc .RTSNumbers ));
_dgfc :=make ([]byte ,4+_fe .Ceil (len (_cdc .RTSNumbers )+1,8));_ddff |=0x7<<29;_a .BigEndian .PutUint32 (_dgfc ,_ddff );copy (_dgfc [1:],_cdc .RetainBits );_efgc ,_dcff =_bcce .Write (_dgfc );if _dcff !=nil {return 0,_df .Wrap (_dcff ,_daad ,"l\u006f\u006e\u0067\u0020\u0066\u006f\u0072\u006d\u0061\u0074");
};return _efgc ,nil ;};func NewRegionSegment (r *_db .Reader )*RegionSegment {return &RegionSegment {_ebgad :r }};func (_ccddg *HalftoneRegion )GetRegionBitmap ()(*_ea .Bitmap ,error ){if _ccddg .HalftoneRegionBitmap !=nil {return _ccddg .HalftoneRegionBitmap ,nil ;
};var _fbb error ;_ccddg .HalftoneRegionBitmap =_ea .New (int (_ccddg .RegionSegment .BitmapWidth ),int (_ccddg .RegionSegment .BitmapHeight ));if _ccddg .Patterns ==nil ||(_ccddg .Patterns !=nil &&len (_ccddg .Patterns )==0){_ccddg .Patterns ,_fbb =_ccddg .GetPatterns ();
if _fbb !=nil {return nil ,_fbb ;};};if _ccddg .HDefaultPixel ==1{_ccddg .HalftoneRegionBitmap .SetDefaultPixel ();};_cbe :=_f .Ceil (_f .Log (float64 (len (_ccddg .Patterns )))/_f .Log (2));_cedc :=int (_cbe );var _cdf [][]int ;_cdf ,_fbb =_ccddg .grayScaleDecoding (_cedc );
if _fbb !=nil {return nil ,_fbb ;};if _fbb =_ccddg .renderPattern (_cdf );_fbb !=nil {return nil ,_fbb ;};return _ccddg .HalftoneRegionBitmap ,nil ;};func (_gfbe *PatternDictionary )readIsMMREncoded ()error {_fecf ,_fgee :=_gfbe ._dabd .ReadBit ();if _fgee !=nil {return _fgee ;
};if _fecf !=0{_gfbe .IsMMREncoded =true ;};return nil ;};func (_adbc *SymbolDictionary )readNumberOfExportedSymbols ()error {_dddc ,_aecb :=_adbc ._ceed .ReadBits (32);if _aecb !=nil {return _aecb ;};_adbc .NumberOfExportedSymbols =uint32 (_dddc &_f .MaxUint32 );
return nil ;};func (_dcbe *SymbolDictionary )decodeThroughTextRegion (_deeb ,_ceeb ,_egacf uint32 )error {if _dcbe ._egcc ==nil {_dcbe ._egcc =_dfbcb (_dcbe ._ceed ,nil );_dcbe ._egcc .setContexts (_dcbe ._gggf ,_dbe .NewStats (512,1),_dbe .NewStats (512,1),_dbe .NewStats (512,1),_dbe .NewStats (512,1),_dcbe ._daed ,_dbe .NewStats (512,1),_dbe .NewStats (512,1),_dbe .NewStats (512,1),_dbe .NewStats (512,1));
};if _adbf :=_dcbe .setSymbolsArray ();_adbf !=nil {return _adbf ;};_dcbe ._egcc .setParameters (_dcbe ._cgc ,_dcbe .IsHuffmanEncoded ,true ,_deeb ,_ceeb ,_egacf ,1,_dcbe ._efbd +_dcbe ._bcgc ,0,0,0,1,0,0,0,0,0,0,0,0,0,_dcbe .SdrTemplate ,_dcbe .SdrATX ,_dcbe .SdrATY ,_dcbe ._dfddc ,_dcbe ._gfegc );
return _dcbe .addSymbol (_dcbe ._egcc );};func (_gfb *Header )readDataStartOffset (_ecgg *_db .Reader ,_cadee OrganizationType ){if _cadee ==OSequential {_gfb .SegmentDataStartOffset =uint64 (_ecgg .AbsolutePosition ());};};func (_bgbd *GenericRegion )Encode (w _db .BinaryWriter )(_bccb int ,_ecc error ){const _gga ="G\u0065n\u0065\u0072\u0069\u0063\u0052\u0065\u0067\u0069o\u006e\u002e\u0045\u006eco\u0064\u0065";
if _bgbd .Bitmap ==nil {return 0,_df .Error (_gga ,"\u0070\u0072\u006f\u0076id\u0065\u0064\u0020\u006e\u0069\u006c\u0020\u0062\u0069\u0074\u006d\u0061\u0070");};_deed ,_ecc :=_bgbd .RegionSegment .Encode (w );if _ecc !=nil {return 0,_df .Wrap (_ecc ,_gga ,"\u0052\u0065\u0067\u0069\u006f\u006e\u0053\u0065\u0067\u006d\u0065\u006e\u0074");
};_bccb +=_deed ;if _ecc =w .SkipBits (4);_ecc !=nil {return _bccb ,_df .Wrap (_ecc ,_gga ,"\u0073k\u0069p\u0020\u0072\u0065\u0073\u0065r\u0076\u0065d\u0020\u0062\u0069\u0074\u0073");};var _eccb int ;if _bgbd .IsTPGDon {_eccb =1;};if _ecc =w .WriteBit (_eccb );
_ecc !=nil {return _bccb ,_df .Wrap (_ecc ,_gga ,"\u0074\u0070\u0067\u0064\u006f\u006e");};_eccb =0;if _ecc =w .WriteBit (int (_bgbd .GBTemplate >>1)&0x01);_ecc !=nil {return _bccb ,_df .Wrap (_ecc ,_gga ,"f\u0069r\u0073\u0074\u0020\u0067\u0062\u0074\u0065\u006dp\u006c\u0061\u0074\u0065 b\u0069\u0074");
};if _ecc =w .WriteBit (int (_bgbd .GBTemplate )&0x01);_ecc !=nil {return _bccb ,_df .Wrap (_ecc ,_gga ,"s\u0065\u0063\u006f\u006ed \u0067b\u0074\u0065\u006d\u0070\u006ca\u0074\u0065\u0020\u0062\u0069\u0074");};if _bgbd .UseMMR {_eccb =1;};if _ecc =w .WriteBit (_eccb );
_ecc !=nil {return _bccb ,_df .Wrap (_ecc ,_gga ,"u\u0073\u0065\u0020\u004d\u004d\u0052\u0020\u0062\u0069\u0074");};_bccb ++;if _deed ,_ecc =_bgbd .writeGBAtPixels (w );_ecc !=nil {return _bccb ,_df .Wrap (_ecc ,_gga ,"");};_bccb +=_deed ;_dcac :=_af .New ();
if _ecc =_dcac .EncodeBitmap (_bgbd .Bitmap ,_bgbd .IsTPGDon );_ecc !=nil {return _bccb ,_df .Wrap (_ecc ,_gga ,"");};_dcac .Final ();var _dabg int64 ;if _dabg ,_ecc =_dcac .WriteTo (w );_ecc !=nil {return _bccb ,_df .Wrap (_ecc ,_gga ,"");};_bccb +=int (_dabg );
return _bccb ,nil ;};func (_bgag *Header )readHeaderLength (_dgbd *_db .Reader ,_facfg int64 ){_bgag .HeaderLength =_dgbd .AbsolutePosition ()-_facfg ;};func (_agd *GenericRegion )overrideAtTemplate3 (_gggd ,_fdf ,_gdaa ,_bdgg ,_acad int )int {_gggd &=0x3EF;
if _agd .GBAtY [0]==0&&_agd .GBAtX [0]>=-int8 (_acad ){_gggd |=(_bdgg >>uint (7-(int8 (_acad )+_agd .GBAtX [0]))&0x1)<<4;}else {_gggd |=int (_agd .getPixel (_fdf +int (_agd .GBAtX [0]),_gdaa +int (_agd .GBAtY [0])))<<4;};return _gggd ;};func (_cbea *HalftoneRegion )computeX (_aebc ,_gfdg int )int {return _cbea .shiftAndFill (int (_cbea .HGridX )+_aebc *int (_cbea .HRegionY )+_gfdg *int (_cbea .HRegionX ));
};func (_efac *SymbolDictionary )readAtPixels (_egbfd int )error {_efac .SdATX =make ([]int8 ,_egbfd );_efac .SdATY =make ([]int8 ,_egbfd );var (_dcfa byte ;_deb error ;);for _gafc :=0;_gafc < _egbfd ;_gafc ++{_dcfa ,_deb =_efac ._ceed .ReadByte ();if _deb !=nil {return _deb ;
};_efac .SdATX [_gafc ]=int8 (_dcfa );_dcfa ,_deb =_efac ._ceed .ReadByte ();if _deb !=nil {return _deb ;};_efac .SdATY [_gafc ]=int8 (_dcfa );};return nil ;};var _ SegmentEncoder =&GenericRegion {};func (_edeee *SymbolDictionary )setRefinementAtPixels ()error {if !_edeee .UseRefinementAggregation ||_edeee .SdrTemplate !=0{return nil ;
};if _gfgc :=_edeee .readRefinementAtPixels (2);_gfgc !=nil {return _gfgc ;};return nil ;};func (_cadf *HalftoneRegion )checkInput ()error {if _cadf .IsMMREncoded {if _cadf .HTemplate !=0{_c .Log .Debug ("\u0048\u0054\u0065\u006d\u0070l\u0061\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0073\u0068\u006f\u0075l\u0064\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0074\u0068\u0065\u0020\u0076\u0061\u006c\u0075\u0065\u0020\u0030",_cadf .HTemplate );
};if _cadf .HSkipEnabled {_c .Log .Debug ("\u0048\u0053\u006b\u0069\u0070\u0045\u006e\u0061\u0062\u006c\u0065\u0064\u0020\u0030\u0020\u0025\u0076\u0020(\u0073\u0068\u006f\u0075\u006c\u0064\u0020c\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0074\u0068\u0065\u0020v\u0061\u006c\u0075\u0065\u0020\u0066\u0061\u006c\u0073\u0065\u0029",_cadf .HSkipEnabled );
};};return nil ;};func (_bgdb *PageInformationSegment )encodeStripingInformation (_dgea _db .BinaryWriter )(_afaa int ,_fcg error ){const _abdd ="\u0065n\u0063\u006f\u0064\u0065S\u0074\u0072\u0069\u0070\u0069n\u0067I\u006ef\u006f\u0072\u006d\u0061\u0074\u0069\u006fn";
if !_bgdb .IsStripe {if _afaa ,_fcg =_dgea .Write ([]byte {0x00,0x00});_fcg !=nil {return 0,_df .Wrap (_fcg ,_abdd ,"n\u006f\u0020\u0073\u0074\u0072\u0069\u0070\u0069\u006e\u0067");};return _afaa ,nil ;};_bfgg :=make ([]byte ,2);_a .BigEndian .PutUint16 (_bfgg ,_bgdb .MaxStripeSize |1<<15);
if _afaa ,_fcg =_dgea .Write (_bfgg );_fcg !=nil {return 0,_df .Wrapf (_fcg ,_abdd ,"\u0073\u0074\u0072i\u0070\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_bgdb .MaxStripeSize );};return _afaa ,nil ;};func (_gce *GenericRegion )getPixel (_bcb ,_gde int )int8 {if _bcb < 0||_bcb >=_gce .Bitmap .Width {return 0;
};if _gde < 0||_gde >=_gce .Bitmap .Height {return 0;};if _gce .Bitmap .GetPixel (_bcb ,_gde ){return 1;};return 0;};func (_bgagg *Header )writeSegmentNumber (_bgbdd _db .BinaryWriter )(_ccab int ,_ebge error ){_gcef :=make ([]byte ,4);_a .BigEndian .PutUint32 (_gcef ,_bgagg .SegmentNumber );
if _ccab ,_ebge =_bgbdd .Write (_gcef );_ebge !=nil {return 0,_df .Wrap (_ebge ,"\u0048e\u0061\u0064\u0065\u0072.\u0077\u0072\u0069\u0074\u0065S\u0065g\u006de\u006e\u0074\u004e\u0075\u006d\u0062\u0065r","");};return _ccab ,nil ;};func (_cfab *SymbolDictionary )InitEncode (symbols *_ea .Bitmaps ,symbolList []int ,symbolMap map[int ]int ,unborderSymbols bool )error {const _efcb ="S\u0079\u006d\u0062\u006f\u006c\u0044i\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u002eI\u006e\u0069\u0074E\u006ec\u006f\u0064\u0065";
_cfab .SdATX =[]int8 {3,-3,2,-2};_cfab .SdATY =[]int8 {-1,-1,-2,-2};_cfab ._ffab =symbols ;_cfab ._ffcde =make ([]int ,len (symbolList ));copy (_cfab ._ffcde ,symbolList );if len (_cfab ._ffcde )!=_cfab ._ffab .Size (){return _df .Error (_efcb ,"s\u0079\u006d\u0062\u006f\u006c\u0073\u0020\u0061\u006e\u0064\u0020\u0073\u0079\u006d\u0062\u006f\u006c\u004ci\u0073\u0074\u0020\u006f\u0066\u0020\u0064\u0069\u0066\u0066er\u0065\u006e\u0074 \u0073i\u007a\u0065");
};_cfab .NumberOfNewSymbols =uint32 (symbols .Size ());_cfab .NumberOfExportedSymbols =uint32 (symbols .Size ());_cfab ._afeb =symbolMap ;_cfab ._fccg =unborderSymbols ;return nil ;};func (_ebga *HalftoneRegion )grayScaleDecoding (_gcc int )([][]int ,error ){var (_ceda []int8 ;
_dcgfd []int8 ;);if !_ebga .IsMMREncoded {_ceda =make ([]int8 ,4);_dcgfd =make ([]int8 ,4);if _ebga .HTemplate <=1{_ceda [0]=3;}else if _ebga .HTemplate >=2{_ceda [0]=2;};_dcgfd [0]=-1;_ceda [1]=-3;_dcgfd [1]=-1;_ceda [2]=2;_dcgfd [2]=-2;_ceda [3]=-2;_dcgfd [3]=-2;
};_ebeb :=make ([]*_ea .Bitmap ,_gcc );_cade :=NewGenericRegion (_ebga ._aaae );_cade .setParametersMMR (_ebga .IsMMREncoded ,_ebga .DataOffset ,_ebga .DataLength ,_ebga .HGridHeight ,_ebga .HGridWidth ,_ebga .HTemplate ,false ,_ebga .HSkipEnabled ,_ceda ,_dcgfd );
_efcc :=_gcc -1;var _gdae error ;_ebeb [_efcc ],_gdae =_cade .GetRegionBitmap ();if _gdae !=nil {return nil ,_gdae ;};for _efcc > 0{_efcc --;_cade .Bitmap =nil ;_ebeb [_efcc ],_gdae =_cade .GetRegionBitmap ();if _gdae !=nil {return nil ,_gdae ;};if _gdae =_ebga .combineGrayscalePlanes (_ebeb ,_efcc );
_gdae !=nil {return nil ,_gdae ;};};return _ebga .computeGrayScalePlanes (_ebeb ,_gcc );};func (_ecef *RegionSegment )parseHeader ()error {const _afcd ="p\u0061\u0072\u0073\u0065\u0048\u0065\u0061\u0064\u0065\u0072";_c .Log .Trace ("\u005b\u0052\u0045\u0047I\u004f\u004e\u005d\u005b\u0050\u0041\u0052\u0053\u0045\u002dH\u0045A\u0044\u0045\u0052\u005d\u0020\u0042\u0065g\u0069\u006e");
defer func (){_c .Log .Trace ("\u005b\u0052\u0045G\u0049\u004f\u004e\u005d[\u0050\u0041\u0052\u0053\u0045\u002d\u0048E\u0041\u0044\u0045\u0052\u005d\u0020\u0046\u0069\u006e\u0069\u0073\u0068\u0065\u0064");}();_cdbg ,_cefd :=_ecef ._ebgad .ReadBits (32);
if _cefd !=nil {return _df .Wrap (_cefd ,_afcd ,"\u0077\u0069\u0064t\u0068");};_ecef .BitmapWidth =uint32 (_cdbg &_f .MaxUint32 );_cdbg ,_cefd =_ecef ._ebgad .ReadBits (32);if _cefd !=nil {return _df .Wrap (_cefd ,_afcd ,"\u0068\u0065\u0069\u0067\u0068\u0074");
};_ecef .BitmapHeight =uint32 (_cdbg &_f .MaxUint32 );_cdbg ,_cefd =_ecef ._ebgad .ReadBits (32);if _cefd !=nil {return _df .Wrap (_cefd ,_afcd ,"\u0078\u0020\u006c\u006f\u0063\u0061\u0074\u0069\u006f\u006e");};_ecef .XLocation =uint32 (_cdbg &_f .MaxUint32 );
_cdbg ,_cefd =_ecef ._ebgad .ReadBits (32);if _cefd !=nil {return _df .Wrap (_cefd ,_afcd ,"\u0079\u0020\u006c\u006f\u0063\u0061\u0074\u0069\u006f\u006e");};_ecef .YLocation =uint32 (_cdbg &_f .MaxUint32 );if _ ,_cefd =_ecef ._ebgad .ReadBits (5);_cefd !=nil {return _df .Wrap (_cefd ,_afcd ,"\u0064i\u0072\u0079\u0020\u0072\u0065\u0061d");
};if _cefd =_ecef .readCombinationOperator ();_cefd !=nil {return _df .Wrap (_cefd ,_afcd ,"c\u006fm\u0062\u0069\u006e\u0061\u0074\u0069\u006f\u006e \u006f\u0070\u0065\u0072at\u006f\u0072");};return nil ;};type SymbolDictionary struct{_ceed *_db .Reader ;
SdrTemplate int8 ;SdTemplate int8 ;_ebfa bool ;_gca bool ;SdHuffAggInstanceSelection bool ;SdHuffBMSizeSelection int8 ;SdHuffDecodeWidthSelection int8 ;SdHuffDecodeHeightSelection int8 ;UseRefinementAggregation bool ;IsHuffmanEncoded bool ;SdATX []int8 ;
SdATY []int8 ;SdrATX []int8 ;SdrATY []int8 ;NumberOfExportedSymbols uint32 ;NumberOfNewSymbols uint32 ;Header *Header ;_efbd uint32 ;_gffc []*_ea .Bitmap ;_bcgc uint32 ;_beee []*_ea .Bitmap ;_gfgba _dbd .Tabler ;_cabgc _dbd .Tabler ;_cdbe _dbd .Tabler ;
_afdfc _dbd .Tabler ;_aefc []*_ea .Bitmap ;_dfddc []*_ea .Bitmap ;_cgc *_dbe .Decoder ;_egcc *TextRegion ;_ded *GenericRegion ;_geaa *GenericRefinementRegion ;_gggf *_dbe .DecoderStats ;_dfcge *_dbe .DecoderStats ;_edcff *_dbe .DecoderStats ;_fcbe *_dbe .DecoderStats ;
_fee *_dbe .DecoderStats ;_efgf *_dbe .DecoderStats ;_ebef *_dbe .DecoderStats ;_gbbe *_dbe .DecoderStats ;_daed *_dbe .DecoderStats ;_gfegc int8 ;_ffab *_ea .Bitmaps ;_ffcde []int ;_afeb map[int ]int ;_fccg bool ;};func (_fdfc *Header )readSegmentNumber (_fbcg *_db .Reader )error {const _cdag ="\u0072\u0065\u0061\u0064\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u004eu\u006d\u0062\u0065\u0072";
_fdcf :=make ([]byte ,4);_ ,_dgca :=_fbcg .Read (_fdcf );if _dgca !=nil {return _df .Wrap (_dgca ,_cdag ,"");};_fdfc .SegmentNumber =_a .BigEndian .Uint32 (_fdcf );return nil ;};func (_edce *SymbolDictionary )decodeDifferenceWidth ()(int64 ,error ){if _edce .IsHuffmanEncoded {switch _edce .SdHuffDecodeWidthSelection {case 0:_ccbb ,_efae :=_dbd .GetStandardTable (2);
if _efae !=nil {return 0,_efae ;};return _ccbb .Decode (_edce ._ceed );case 1:_adeea ,_dcab :=_dbd .GetStandardTable (3);if _dcab !=nil {return 0,_dcab ;};return _adeea .Decode (_edce ._ceed );case 3:if _edce ._cabgc ==nil {var _fdbc int ;if _edce .SdHuffDecodeHeightSelection ==3{_fdbc ++;
};_ffedb ,_fbecb :=_edce .getUserTable (_fdbc );if _fbecb !=nil {return 0,_fbecb ;};_edce ._cabgc =_ffedb ;};return _edce ._cabgc .Decode (_edce ._ceed );};}else {_efdf ,_dacdd :=_edce ._cgc .DecodeInt (_edce ._edcff );if _dacdd !=nil {return 0,_dacdd ;
};return int64 (_efdf ),nil ;};return 0,nil ;};func _edcfg (_gdfg int )int {if _gdfg ==0{return 0;};_gdfg |=_gdfg >>1;_gdfg |=_gdfg >>2;_gdfg |=_gdfg >>4;_gdfg |=_gdfg >>8;_gdfg |=_gdfg >>16;return (_gdfg +1)>>1;};func (_dddd *Header )pageSize ()uint {if _dddd .PageAssociation <=255{return 1;
};return 4;};func (_ecbg *SymbolDictionary )huffDecodeRefAggNInst ()(int64 ,error ){if !_ecbg .SdHuffAggInstanceSelection {_fcfb ,_cfacf :=_dbd .GetStandardTable (1);if _cfacf !=nil {return 0,_cfacf ;};return _fcfb .Decode (_ecbg ._ceed );};if _ecbg ._afdfc ==nil {var (_gbab int ;
_bagb error ;);if _ecbg .SdHuffDecodeHeightSelection ==3{_gbab ++;};if _ecbg .SdHuffDecodeWidthSelection ==3{_gbab ++;};if _ecbg .SdHuffBMSizeSelection ==3{_gbab ++;};_ecbg ._afdfc ,_bagb =_ecbg .getUserTable (_gbab );if _bagb !=nil {return 0,_bagb ;};
};return _ecbg ._afdfc .Decode (_ecbg ._ceed );};func (_daaec *TextRegion )blit (_ddbf *_ea .Bitmap ,_gddg int64 )error {if _daaec .IsTransposed ==0&&(_daaec .ReferenceCorner ==2||_daaec .ReferenceCorner ==3){_daaec ._cfff +=int64 (_ddbf .Width -1);}else if _daaec .IsTransposed ==1&&(_daaec .ReferenceCorner ==0||_daaec .ReferenceCorner ==2){_daaec ._cfff +=int64 (_ddbf .Height -1);
};_dcea :=_daaec ._cfff ;if _daaec .IsTransposed ==1{_dcea ,_gddg =_gddg ,_dcea ;};switch _daaec .ReferenceCorner {case 0:_gddg -=int64 (_ddbf .Height -1);case 2:_gddg -=int64 (_ddbf .Height -1);_dcea -=int64 (_ddbf .Width -1);case 3:_dcea -=int64 (_ddbf .Width -1);
};_bced :=_ea .Blit (_ddbf ,_daaec .RegionBitmap ,int (_dcea ),int (_gddg ),_daaec .CombinationOperator );if _bced !=nil {return _bced ;};if _daaec .IsTransposed ==0&&(_daaec .ReferenceCorner ==0||_daaec .ReferenceCorner ==1){_daaec ._cfff +=int64 (_ddbf .Width -1);
};if _daaec .IsTransposed ==1&&(_daaec .ReferenceCorner ==1||_daaec .ReferenceCorner ==3){_daaec ._cfff +=int64 (_ddbf .Height -1);};return nil ;};type SegmentEncoder interface{Encode (_dffg _db .BinaryWriter )(_bge int ,_agab error );};func (_cdca *SymbolDictionary )readNumberOfNewSymbols ()error {_bgcc ,_beca :=_cdca ._ceed .ReadBits (32);
if _beca !=nil {return _beca ;};_cdca .NumberOfNewSymbols =uint32 (_bgcc &_f .MaxUint32 );return nil ;};func (_bfda *GenericRegion )decodeTemplate3 (_egbe ,_caaa ,_bbc int ,_ebcf ,_eafa int )(_adgg error ){const _adgf ="\u0064e\u0063o\u0064\u0065\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u0033";
var (_fbf ,_gdddg int ;_gfde int ;_fag byte ;_eggd ,_gfdeb int ;);if _egbe >=1{_fag ,_adgg =_bfda .Bitmap .GetByte (_eafa );if _adgg !=nil {return _df .Wrap (_adgg ,_adgf ,"\u006ci\u006e\u0065\u0020\u003e\u003d\u00201");};_gfde =int (_fag );};_fbf =(_gfde >>1)&0x70;
for _gfcf :=0;_gfcf < _bbc ;_gfcf =_eggd {var (_bddd byte ;_aaad int ;);_eggd =_gfcf +8;if _dff :=_caaa -_gfcf ;_dff > 8{_aaad =8;}else {_aaad =_dff ;};if _egbe >=1{_gfde <<=8;if _eggd < _caaa {_fag ,_adgg =_bfda .Bitmap .GetByte (_eafa +1);if _adgg !=nil {return _df .Wrap (_adgg ,_adgf ,"\u0069\u006e\u006e\u0065\u0072\u0020\u002d\u0020\u006c\u0069\u006e\u0065 \u003e\u003d\u0020\u0031");
};_gfde |=int (_fag );};};for _ecgd :=0;_ecgd < _aaad ;_ecgd ++{if _bfda ._agca {_gdddg =_bfda .overrideAtTemplate3 (_fbf ,_gfcf +_ecgd ,_egbe ,int (_bddd ),_ecgd );_bfda ._fdc .SetIndex (int32 (_gdddg ));}else {_bfda ._fdc .SetIndex (int32 (_fbf ));};
_gfdeb ,_adgg =_bfda ._fabe .DecodeBit (_bfda ._fdc );if _adgg !=nil {return _df .Wrap (_adgg ,_adgf ,"");};_bddd |=byte (_gfdeb )<<byte (7-_ecgd );_fbf =((_fbf &0x1f7)<<1)|_gfdeb |((_gfde >>uint (8-_ecgd ))&0x010);};if _aecd :=_bfda .Bitmap .SetByte (_ebcf ,_bddd );
_aecd !=nil {return _df .Wrap (_aecd ,_adgf ,"");};_ebcf ++;_eafa ++;};return nil ;};func (_def *RegionSegment )Encode (w _db .BinaryWriter )(_fabf int ,_fdcgc error ){const _edcd ="R\u0065g\u0069\u006f\u006e\u0053\u0065\u0067\u006d\u0065n\u0074\u002e\u0045\u006eco\u0064\u0065";
_eede :=make ([]byte ,4);_a .BigEndian .PutUint32 (_eede ,_def .BitmapWidth );_fabf ,_fdcgc =w .Write (_eede );if _fdcgc !=nil {return 0,_df .Wrap (_fdcgc ,_edcd ,"\u0057\u0069\u0064t\u0068");};_a .BigEndian .PutUint32 (_eede ,_def .BitmapHeight );var _egbfb int ;
_egbfb ,_fdcgc =w .Write (_eede );if _fdcgc !=nil {return 0,_df .Wrap (_fdcgc ,_edcd ,"\u0048\u0065\u0069\u0067\u0068\u0074");};_fabf +=_egbfb ;_a .BigEndian .PutUint32 (_eede ,_def .XLocation );_egbfb ,_fdcgc =w .Write (_eede );if _fdcgc !=nil {return 0,_df .Wrap (_fdcgc ,_edcd ,"\u0058L\u006f\u0063\u0061\u0074\u0069\u006fn");
};_fabf +=_egbfb ;_a .BigEndian .PutUint32 (_eede ,_def .YLocation );_egbfb ,_fdcgc =w .Write (_eede );if _fdcgc !=nil {return 0,_df .Wrap (_fdcgc ,_edcd ,"\u0059L\u006f\u0063\u0061\u0074\u0069\u006fn");};_fabf +=_egbfb ;if _fdcgc =w .WriteByte (byte (_def .CombinaionOperator )&0x07);
_fdcgc !=nil {return 0,_df .Wrap (_fdcgc ,_edcd ,"c\u006fm\u0062\u0069\u006e\u0061\u0074\u0069\u006f\u006e \u006f\u0070\u0065\u0072at\u006f\u0072");};_fabf ++;return _fabf ,nil ;};func (_dbeb *GenericRegion )setParametersMMR (_ecee bool ,_ace ,_cdec int64 ,_gfg ,_bfb uint32 ,_fdcb byte ,_cfdf ,_aadb bool ,_daea ,_cebe []int8 ){_dbeb .DataOffset =_ace ;
_dbeb .DataLength =_cdec ;_dbeb .RegionSegment =&RegionSegment {};_dbeb .RegionSegment .BitmapHeight =_gfg ;_dbeb .RegionSegment .BitmapWidth =_bfb ;_dbeb .GBTemplate =_fdcb ;_dbeb .IsMMREncoded =_ecee ;_dbeb .IsTPGDon =_cfdf ;_dbeb .GBAtX =_daea ;_dbeb .GBAtY =_cebe ;
};func (_bccdb *TextRegion )readUseRefinement ()error {if !_bccdb .UseRefinement ||_bccdb .SbrTemplate !=0{return nil ;};var (_eeff byte ;_egfc error ;);_bccdb .SbrATX =make ([]int8 ,2);_bccdb .SbrATY =make ([]int8 ,2);_eeff ,_egfc =_bccdb ._cfgc .ReadByte ();
if _egfc !=nil {return _egfc ;};_bccdb .SbrATX [0]=int8 (_eeff );_eeff ,_egfc =_bccdb ._cfgc .ReadByte ();if _egfc !=nil {return _egfc ;};_bccdb .SbrATY [0]=int8 (_eeff );_eeff ,_egfc =_bccdb ._cfgc .ReadByte ();if _egfc !=nil {return _egfc ;};_bccdb .SbrATX [1]=int8 (_eeff );
_eeff ,_egfc =_bccdb ._cfgc .ReadByte ();if _egfc !=nil {return _egfc ;};_bccdb .SbrATY [1]=int8 (_eeff );return nil ;};func (_feg *GenericRegion )InitEncode (bm *_ea .Bitmap ,xLoc ,yLoc ,template int ,duplicateLineRemoval bool )error {const _ccf ="\u0047e\u006e\u0065\u0072\u0069\u0063\u0052\u0065\u0067\u0069\u006f\u006e.\u0049\u006e\u0069\u0074\u0045\u006e\u0063\u006f\u0064\u0065";
if bm ==nil {return _df .Error (_ccf ,"\u0070\u0072\u006f\u0076id\u0065\u0064\u0020\u006e\u0069\u006c\u0020\u0062\u0069\u0074\u006d\u0061\u0070");};if xLoc < 0||yLoc < 0{return _df .Error (_ccf ,"\u0078\u0020\u0061\u006e\u0064\u0020\u0079\u0020\u006c\u006f\u0063\u0061\u0074i\u006f\u006e\u0020\u006d\u0075\u0073t\u0020\u0062\u0065\u0020\u0067\u0072\u0065\u0061\u0074\u0065\u0072\u0020\u0074h\u0061\u006e\u0020\u0030");
};_feg .Bitmap =bm ;_feg .GBTemplate =byte (template );switch _feg .GBTemplate {case 0:_feg .GBAtX =[]int8 {3,-3,2,-2};_feg .GBAtY =[]int8 {-1,-1,-2,-2};case 1:_feg .GBAtX =[]int8 {3};_feg .GBAtY =[]int8 {-1};case 2,3:_feg .GBAtX =[]int8 {2};_feg .GBAtY =[]int8 {-1};
default:return _df .Errorf (_ccf ,"\u0070\u0072o\u0076\u0069\u0064\u0065\u0064 \u0074\u0065\u006d\u0070\u006ca\u0074\u0065\u003a\u0020\u0027\u0025\u0064\u0027\u0020\u006e\u006f\u0074\u0020\u0069\u006e\u0020\u0076\u0061\u006c\u0069\u0064\u0020\u0072\u0061\u006e\u0067\u0065\u0020\u007b\u0030\u002c\u0031\u002c\u0032\u002c\u0033\u007d",template );
};_feg .RegionSegment =&RegionSegment {BitmapHeight :uint32 (bm .Height ),BitmapWidth :uint32 (bm .Width ),XLocation :uint32 (xLoc ),YLocation :uint32 (yLoc )};_feg .IsTPGDon =duplicateLineRemoval ;return nil ;};func (_dgcdf *TextRegion )decodeRdw ()(int64 ,error ){const _efcee ="\u0064e\u0063\u006f\u0064\u0065\u0052\u0064w";
if _dgcdf .IsHuffmanEncoded {if _dgcdf .SbHuffRDWidth ==3{if _dgcdf ._faef ==nil {var (_dfga int ;_gefg error ;);if _dgcdf .SbHuffFS ==3{_dfga ++;};if _dgcdf .SbHuffDS ==3{_dfga ++;};if _dgcdf .SbHuffDT ==3{_dfga ++;};_dgcdf ._faef ,_gefg =_dgcdf .getUserTable (_dfga );
if _gefg !=nil {return 0,_df .Wrap (_gefg ,_efcee ,"");};};return _dgcdf ._faef .Decode (_dgcdf ._cfgc );};_ebbe ,_ebcg :=_dbd .GetStandardTable (14+int (_dgcdf .SbHuffRDWidth ));if _ebcg !=nil {return 0,_df .Wrap (_ebcg ,_efcee ,"");};return _ebbe .Decode (_dgcdf ._cfgc );
};_aabb ,_ddeg :=_dgcdf ._gdfad .DecodeInt (_dgcdf ._deeef );if _ddeg !=nil {return 0,_df .Wrap (_ddeg ,_efcee ,"");};return int64 (_aabb ),nil ;};func (_efgd *HalftoneRegion )computeY (_cebd ,_fcd int )int {return _efgd .shiftAndFill (int (_efgd .HGridY )+_cebd *int (_efgd .HRegionX )-_fcd *int (_efgd .HRegionY ));
};func (_cef *GenericRegion )decodeLine (_gac ,_gddd ,_cfaf int )error {const _ccdd ="\u0064\u0065\u0063\u006f\u0064\u0065\u004c\u0069\u006e\u0065";_ebg :=_cef .Bitmap .GetByteIndex (0,_gac );_eec :=_ebg -_cef .Bitmap .RowStride ;switch _cef .GBTemplate {case 0:if !_cef .UseExtTemplates {return _cef .decodeTemplate0a (_gac ,_gddd ,_cfaf ,_ebg ,_eec );
};return _cef .decodeTemplate0b (_gac ,_gddd ,_cfaf ,_ebg ,_eec );case 1:return _cef .decodeTemplate1 (_gac ,_gddd ,_cfaf ,_ebg ,_eec );case 2:return _cef .decodeTemplate2 (_gac ,_gddd ,_cfaf ,_ebg ,_eec );case 3:return _cef .decodeTemplate3 (_gac ,_gddd ,_cfaf ,_ebg ,_eec );
};return _df .Errorf (_ccdd ,"\u0069\u006e\u0076a\u006c\u0069\u0064\u0020G\u0042\u0054\u0065\u006d\u0070\u006c\u0061t\u0065\u0020\u0070\u0072\u006f\u0076\u0069\u0064\u0065\u0064\u003a\u0020\u0025\u0064",_cef .GBTemplate );};func (_eada *SymbolDictionary )getToExportFlags ()([]int ,error ){var (_cggf int ;
_fbbb int32 ;_eggf error ;_edda =int32 (_eada ._efbd +_eada .NumberOfNewSymbols );_ccdg =make ([]int ,_edda ););for _aeeb :=int32 (0);_aeeb < _edda ;_aeeb +=_fbbb {if _eada .IsHuffmanEncoded {_fgbf ,_fddg :=_dbd .GetStandardTable (1);if _fddg !=nil {return nil ,_fddg ;
};_cdecf ,_fddg :=_fgbf .Decode (_eada ._ceed );if _fddg !=nil {return nil ,_fddg ;};_fbbb =int32 (_cdecf );}else {_fbbb ,_eggf =_eada ._cgc .DecodeInt (_eada ._fee );if _eggf !=nil {return nil ,_eggf ;};};if _fbbb !=0{if _aeeb +_fbbb > _edda {return nil ,_df .Error ("\u0053\u0079\u006d\u0062\u006f\u006cD\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u002e\u0067\u0065\u0074T\u006f\u0045\u0078\u0070\u006f\u0072\u0074F\u006c\u0061\u0067\u0073","\u006d\u0061\u006c\u0066\u006f\u0072m\u0065\u0064\u0020\u0069\u006e\u0070\u0075\u0074\u0020\u0064\u0061\u0074\u0061\u0020\u0070\u0072\u006f\u0076\u0069\u0064e\u0064\u002e\u0020\u0069\u006e\u0064\u0065\u0078\u0020\u006f\u0075\u0074\u0020\u006ff\u0020r\u0061\u006e\u0067\u0065");
};for _gebd :=_aeeb ;_gebd < _aeeb +_fbbb ;_gebd ++{_ccdg [_gebd ]=_cggf ;};};if _cggf ==0{_cggf =1;}else {_cggf =0;};};return _ccdg ,nil ;};func (_egafd Type )String ()string {switch _egafd {case TSymbolDictionary :return "\u0053\u0079\u006d\u0062\u006f\u006c\u0020\u0044\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079";
case TIntermediateTextRegion :return "\u0049n\u0074\u0065\u0072\u006d\u0065\u0064\u0069\u0061\u0074\u0065\u0020T\u0065\u0078\u0074\u0020\u0052\u0065\u0067\u0069\u006f\u006e";case TImmediateTextRegion :return "I\u006d\u006d\u0065\u0064ia\u0074e\u0020\u0054\u0065\u0078\u0074 \u0052\u0065\u0067\u0069\u006f\u006e";
case TImmediateLosslessTextRegion :return "\u0049\u006d\u006d\u0065\u0064\u0069\u0061\u0074\u0065\u0020L\u006f\u0073\u0073\u006c\u0065\u0073\u0073 \u0054\u0065\u0078\u0074\u0020\u0052\u0065\u0067\u0069\u006f\u006e";case TPatternDictionary :return "\u0050a\u0074t\u0065\u0072\u006e\u0020\u0044i\u0063\u0074i\u006f\u006e\u0061\u0072\u0079";
case TIntermediateHalftoneRegion :return "\u0049\u006e\u0074\u0065r\u006d\u0065\u0064\u0069\u0061\u0074\u0065\u0020\u0048\u0061l\u0066t\u006f\u006e\u0065\u0020\u0052\u0065\u0067i\u006f\u006e";case TImmediateHalftoneRegion :return "\u0049m\u006d\u0065\u0064\u0069a\u0074\u0065\u0020\u0048\u0061l\u0066t\u006fn\u0065\u0020\u0052\u0065\u0067\u0069\u006fn";
case TImmediateLosslessHalftoneRegion :return "\u0049\u006d\u006ded\u0069\u0061\u0074\u0065\u0020\u004c\u006f\u0073\u0073l\u0065s\u0073 \u0048a\u006c\u0066\u0074\u006f\u006e\u0065\u0020\u0052\u0065\u0067\u0069\u006f\u006e";case TIntermediateGenericRegion :return "I\u006e\u0074\u0065\u0072\u006d\u0065d\u0069\u0061\u0074\u0065\u0020\u0047\u0065\u006e\u0065r\u0069\u0063\u0020R\u0065g\u0069\u006f\u006e";
case TImmediateGenericRegion :return "\u0049m\u006d\u0065\u0064\u0069\u0061\u0074\u0065\u0020\u0047\u0065\u006ee\u0072\u0069\u0063\u0020\u0052\u0065\u0067\u0069\u006f\u006e";case TImmediateLosslessGenericRegion :return "\u0049\u006d\u006d\u0065\u0064\u0069a\u0074\u0065\u0020\u004c\u006f\u0073\u0073\u006c\u0065\u0073\u0073\u0020\u0047e\u006e\u0065\u0072\u0069\u0063\u0020\u0052e\u0067\u0069\u006f\u006e";
case TIntermediateGenericRefinementRegion :return "\u0049\u006e\u0074\u0065\u0072\u006d\u0065\u0064\u0069\u0061\u0074\u0065\u0020\u0047\u0065\u006e\u0065\u0072\u0069\u0063\u0020\u0052\u0065\u0066i\u006e\u0065\u006d\u0065\u006et\u0020\u0052e\u0067\u0069\u006f\u006e";
case TImmediateGenericRefinementRegion :return "I\u006d\u006d\u0065\u0064\u0069\u0061t\u0065\u0020\u0047\u0065\u006e\u0065r\u0069\u0063\u0020\u0052\u0065\u0066\u0069n\u0065\u006d\u0065\u006e\u0074\u0020\u0052\u0065\u0067\u0069o\u006e";case TImmediateLosslessGenericRefinementRegion :return "\u0049m\u006d\u0065d\u0069\u0061\u0074\u0065 \u004c\u006f\u0073s\u006c\u0065\u0073\u0073\u0020\u0047\u0065\u006e\u0065ri\u0063\u0020\u0052e\u0066\u0069n\u0065\u006d\u0065\u006e\u0074\u0020R\u0065\u0067i\u006f\u006e";
case TPageInformation :return "\u0050\u0061g\u0065\u0020\u0049n\u0066\u006f\u0072\u006d\u0061\u0074\u0069\u006f\u006e";case TEndOfPage :return "E\u006e\u0064\u0020\u004f\u0066\u0020\u0050\u0061\u0067\u0065";case TEndOfStrip :return "\u0045\u006e\u0064 \u004f\u0066\u0020\u0053\u0074\u0072\u0069\u0070";
case TEndOfFile :return "E\u006e\u0064\u0020\u004f\u0066\u0020\u0046\u0069\u006c\u0065";case TProfiles :return "\u0050\u0072\u006f\u0066\u0069\u006c\u0065\u0073";case TTables :return "\u0054\u0061\u0062\u006c\u0065\u0073";case TExtension :return "\u0045x\u0074\u0065\u006e\u0073\u0069\u006fn";
case TBitmap :return "\u0042\u0069\u0074\u006d\u0061\u0070";};return "I\u006ev\u0061\u006c\u0069\u0064\u0020\u0053\u0065\u0067m\u0065\u006e\u0074\u0020Ki\u006e\u0064";};func (_dbdf *Header )CleanSegmentData (){if _dbdf .SegmentData !=nil {_dbdf .SegmentData =nil ;
};};func (_dea *GenericRegion )copyLineAbove (_daa int )error {_caf :=_daa *_dea .Bitmap .RowStride ;_gebb :=_caf -_dea .Bitmap .RowStride ;for _ccd :=0;_ccd < _dea .Bitmap .RowStride ;_ccd ++{_bcg ,_fad :=_dea .Bitmap .GetByte (_gebb );if _fad !=nil {return _fad ;
};_gebb ++;if _fad =_dea .Bitmap .SetByte (_caf ,_bcg );_fad !=nil {return _fad ;};_caf ++;};return nil ;};func (_adfc *HalftoneRegion )computeGrayScalePlanes (_gfdc []*_ea .Bitmap ,_edcf int )([][]int ,error ){_afc :=make ([][]int ,_adfc .HGridHeight );
for _aeeg :=0;_aeeg < len (_afc );_aeeg ++{_afc [_aeeg ]=make ([]int ,_adfc .HGridWidth );};for _gggbd :=0;_gggbd < int (_adfc .HGridHeight );_gggbd ++{for _ddfd :=0;_ddfd < int (_adfc .HGridWidth );_ddfd +=8{var _egaf int ;if _eeefc :=int (_adfc .HGridWidth )-_ddfd ;
_eeefc > 8{_egaf =8;}else {_egaf =_eeefc ;};_dbef :=_gfdc [0].GetByteIndex (_ddfd ,_gggbd );for _agfb :=0;_agfb < _egaf ;_agfb ++{_cccb :=_agfb +_ddfd ;_afc [_gggbd ][_cccb ]=0;for _fdbdd :=0;_fdbdd < _edcf ;_fdbdd ++{_deag ,_gffd :=_gfdc [_fdbdd ].GetByte (_dbef );
if _gffd !=nil {return nil ,_gffd ;};_acc :=_deag >>uint (7-_cccb &7);_bda :=_acc &1;_agaf :=1<<uint (_fdbdd );_bacg :=int (_bda )*_agaf ;_afc [_gggbd ][_cccb ]+=_bacg ;};};};};return _afc ,nil ;};type Type int ;func (_cgg *GenericRegion )Size ()int {return _cgg .RegionSegment .Size ()+1+2*len (_cgg .GBAtX )};
func (_ecbb *PageInformationSegment )encodeFlags (_gfgb _db .BinaryWriter )(_fgfg error ){const _fcc ="e\u006e\u0063\u006f\u0064\u0065\u0046\u006c\u0061\u0067\u0073";if _fgfg =_gfgb .SkipBits (1);_fgfg !=nil {return _df .Wrap (_fgfg ,_fcc ,"\u0072\u0065\u0073e\u0072\u0076\u0065\u0064\u0020\u0062\u0069\u0074");
};var _cfb int ;if _ecbb .CombinationOperatorOverrideAllowed (){_cfb =1;};if _fgfg =_gfgb .WriteBit (_cfb );_fgfg !=nil {return _df .Wrap (_fgfg ,_fcc ,"\u0063\u006f\u006db\u0069\u006e\u0061\u0074i\u006f\u006e\u0020\u006f\u0070\u0065\u0072a\u0074\u006f\u0072\u0020\u006f\u0076\u0065\u0072\u0072\u0069\u0064\u0064\u0065\u006e");
};_cfb =0;if _ecbb ._efcd {_cfb =1;};if _fgfg =_gfgb .WriteBit (_cfb );_fgfg !=nil {return _df .Wrap (_fgfg ,_fcc ,"\u0072e\u0071\u0075\u0069\u0072e\u0073\u0020\u0061\u0075\u0078i\u006ci\u0061r\u0079\u0020\u0062\u0075\u0066\u0066\u0065r");};if _fgfg =_gfgb .WriteBit ((int (_ecbb ._beec )>>1)&0x01);
_fgfg !=nil {return _df .Wrap (_fgfg ,_fcc ,"\u0063\u006f\u006d\u0062\u0069\u006e\u0061\u0074\u0069\u006fn\u0020\u006f\u0070\u0065\u0072\u0061\u0074o\u0072\u0020\u0066\u0069\u0072\u0073\u0074\u0020\u0062\u0069\u0074");};if _fgfg =_gfgb .WriteBit (int (_ecbb ._beec )&0x01);
_fgfg !=nil {return _df .Wrap (_fgfg ,_fcc ,"\u0063\u006f\u006db\u0069\u006e\u0061\u0074i\u006f\u006e\u0020\u006f\u0070\u0065\u0072a\u0074\u006f\u0072\u0020\u0073\u0065\u0063\u006f\u006e\u0064\u0020\u0062\u0069\u0074");};_cfb =int (_ecbb .DefaultPixelValue );
if _fgfg =_gfgb .WriteBit (_cfb );_fgfg !=nil {return _df .Wrap (_fgfg ,_fcc ,"\u0064e\u0066\u0061\u0075\u006c\u0074\u0020\u0070\u0061\u0067\u0065\u0020p\u0069\u0078\u0065\u006c\u0020\u0076\u0061\u006c\u0075\u0065");};_cfb =0;if _ecbb ._bagf {_cfb =1;};
if _fgfg =_gfgb .WriteBit (_cfb );_fgfg !=nil {return _df .Wrap (_fgfg ,_fcc ,"\u0063\u006f\u006e\u0074ai\u006e\u0073\u0020\u0072\u0065\u0066\u0069\u006e\u0065\u006d\u0065\u006e\u0074");};_cfb =0;if _ecbb .IsLossless {_cfb =1;};if _fgfg =_gfgb .WriteBit (_cfb );
_fgfg !=nil {return _df .Wrap (_fgfg ,_fcc ,"p\u0061\u0067\u0065\u0020\u0069\u0073 \u0065\u0076\u0065\u006e\u0074\u0075\u0061\u006c\u006cy\u0020\u006c\u006fs\u0073l\u0065\u0073\u0073");};return nil ;};func (_fbec *Header )writeReferredToSegments (_cgga _db .BinaryWriter )(_efce int ,_gdaf error ){const _cggg ="\u0077\u0072\u0069te\u0052\u0065\u0066\u0065\u0072\u0072\u0065\u0064\u0054\u006f\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u0073";
var (_dccg uint16 ;_fbca uint32 ;);_gbda :=_fbec .referenceSize ();_acea :=1;_dfec :=make ([]byte ,_gbda );for _ ,_cfef :=range _fbec .RTSNumbers {switch _gbda {case 4:_fbca =uint32 (_cfef );_a .BigEndian .PutUint32 (_dfec ,_fbca );_acea ,_gdaf =_cgga .Write (_dfec );
if _gdaf !=nil {return 0,_df .Wrap (_gdaf ,_cggg ,"u\u0069\u006e\u0074\u0033\u0032\u0020\u0073\u0069\u007a\u0065");};case 2:_dccg =uint16 (_cfef );_a .BigEndian .PutUint16 (_dfec ,_dccg );_acea ,_gdaf =_cgga .Write (_dfec );if _gdaf !=nil {return 0,_df .Wrap (_gdaf ,_cggg ,"\u0075\u0069\u006e\u0074\u0031\u0036");
};default:if _gdaf =_cgga .WriteByte (byte (_cfef ));_gdaf !=nil {return 0,_df .Wrap (_gdaf ,_cggg ,"\u0075\u0069\u006et\u0038");};};_efce +=_acea ;};return _efce ,nil ;};func (_gbec *TextRegion )decodeRdy ()(int64 ,error ){const _geag ="\u0064e\u0063\u006f\u0064\u0065\u0052\u0064y";
if _gbec .IsHuffmanEncoded {if _gbec .SbHuffRDY ==3{if _gbec ._caeda ==nil {var (_dddfd int ;_cddd error ;);if _gbec .SbHuffFS ==3{_dddfd ++;};if _gbec .SbHuffDS ==3{_dddfd ++;};if _gbec .SbHuffDT ==3{_dddfd ++;};if _gbec .SbHuffRDWidth ==3{_dddfd ++;};
if _gbec .SbHuffRDHeight ==3{_dddfd ++;};if _gbec .SbHuffRDX ==3{_dddfd ++;};_gbec ._caeda ,_cddd =_gbec .getUserTable (_dddfd );if _cddd !=nil {return 0,_df .Wrap (_cddd ,_geag ,"");};};return _gbec ._caeda .Decode (_gbec ._cfgc );};_bdac ,_fgag :=_dbd .GetStandardTable (14+int (_gbec .SbHuffRDY ));
if _fgag !=nil {return 0,_fgag ;};return _bdac .Decode (_gbec ._cfgc );};_cbde ,_adcc :=_gbec ._gdfad .DecodeInt (_gbec ._edba );if _adcc !=nil {return 0,_df .Wrap (_adcc ,_geag ,"");};return int64 (_cbde ),nil ;};func (_cdeca *TextRegion )setParameters (_bbaceg *_dbe .Decoder ,_ddcg ,_ggdg bool ,_cegg ,_fddac uint32 ,_dggg uint32 ,_deae int8 ,_eceg uint32 ,_beff int8 ,_cgce _ea .CombinationOperator ,_ebfc int8 ,_eeab int16 ,_ebgaa ,_eddc ,_fgcc ,_gfeb ,_bgabg ,_ebfdc ,_acfc ,_beeae ,_eafae ,_faaa int8 ,_bgba ,_bbdg []int8 ,_gbdda []*_ea .Bitmap ,_aadaf int8 ){_cdeca ._gdfad =_bbaceg ;
_cdeca .IsHuffmanEncoded =_ddcg ;_cdeca .UseRefinement =_ggdg ;_cdeca .RegionInfo .BitmapWidth =_cegg ;_cdeca .RegionInfo .BitmapHeight =_fddac ;_cdeca .NumberOfSymbolInstances =_dggg ;_cdeca .SbStrips =_deae ;_cdeca .NumberOfSymbols =_eceg ;_cdeca .DefaultPixel =_beff ;
_cdeca .CombinationOperator =_cgce ;_cdeca .IsTransposed =_ebfc ;_cdeca .ReferenceCorner =_eeab ;_cdeca .SbDsOffset =_ebgaa ;_cdeca .SbHuffFS =_eddc ;_cdeca .SbHuffDS =_fgcc ;_cdeca .SbHuffDT =_gfeb ;_cdeca .SbHuffRDWidth =_bgabg ;_cdeca .SbHuffRDHeight =_ebfdc ;
_cdeca .SbHuffRSize =_eafae ;_cdeca .SbHuffRDX =_acfc ;_cdeca .SbHuffRDY =_beeae ;_cdeca .SbrTemplate =_faaa ;_cdeca .SbrATX =_bgba ;_cdeca .SbrATY =_bbdg ;_cdeca .Symbols =_gbdda ;_cdeca ._gadc =_aadaf ;};type Segmenter interface{Init (_cbc *Header ,_fgaf *_db .Reader )error ;
};func (_ebae *PageInformationSegment )Init (h *Header ,r *_db .Reader )(_gfef error ){_ebae ._dfag =r ;if _gfef =_ebae .parseHeader ();_gfef !=nil {return _df .Wrap (_gfef ,"P\u0061\u0067\u0065\u0049\u006e\u0066o\u0072\u006d\u0061\u0074\u0069\u006f\u006e\u0053\u0065g\u006d\u0065\u006et\u002eI\u006e\u0069\u0074","");
};return nil ;};func (_gbdfd *TextRegion )symbolIDCodeLengths ()error {var (_geda []*_dbd .Code ;_becgd uint64 ;_eccdf _dbd .Tabler ;_dagb error ;);for _deadg :=0;_deadg < 35;_deadg ++{_becgd ,_dagb =_gbdfd ._cfgc .ReadBits (4);if _dagb !=nil {return _dagb ;
};_deage :=int (_becgd &0xf);if _deage > 0{_geda =append (_geda ,_dbd .NewCode (int32 (_deage ),0,int32 (_deadg ),false ));};};_eccdf ,_dagb =_dbd .NewFixedSizeTable (_geda );if _dagb !=nil {return _dagb ;};var (_gfdfa int64 ;_fbage uint32 ;_bcac []*_dbd .Code ;
_baac int64 ;);for _fbage < _gbdfd .NumberOfSymbols {_baac ,_dagb =_eccdf .Decode (_gbdfd ._cfgc );if _dagb !=nil {return _dagb ;};if _baac < 32{if _baac > 0{_bcac =append (_bcac ,_dbd .NewCode (int32 (_baac ),0,int32 (_fbage ),false ));};_gfdfa =_baac ;
_fbage ++;}else {var _ddffd ,_dfdbb int64 ;switch _baac {case 32:_becgd ,_dagb =_gbdfd ._cfgc .ReadBits (2);if _dagb !=nil {return _dagb ;};_ddffd =3+int64 (_becgd );if _fbage > 0{_dfdbb =_gfdfa ;};case 33:_becgd ,_dagb =_gbdfd ._cfgc .ReadBits (3);if _dagb !=nil {return _dagb ;
};_ddffd =3+int64 (_becgd );case 34:_becgd ,_dagb =_gbdfd ._cfgc .ReadBits (7);if _dagb !=nil {return _dagb ;};_ddffd =11+int64 (_becgd );};for _abfg :=0;_abfg < int (_ddffd );_abfg ++{if _dfdbb > 0{_bcac =append (_bcac ,_dbd .NewCode (int32 (_dfdbb ),0,int32 (_fbage ),false ));
};_fbage ++;};};};_gbdfd ._cfgc .Align ();_gbdfd ._adda ,_dagb =_dbd .NewFixedSizeTable (_bcac );return _dagb ;};func (_dffgg *RegionSegment )Size ()int {return 17};func (_degg *PatternDictionary )GetDictionary ()([]*_ea .Bitmap ,error ){if _degg .Patterns !=nil {return _degg .Patterns ,nil ;
};if !_degg .IsMMREncoded {_degg .setGbAtPixels ();};_dfaf :=NewGenericRegion (_degg ._dabd );_dfaf .setParametersMMR (_degg .IsMMREncoded ,_degg .DataOffset ,_degg .DataLength ,uint32 (_degg .HdpHeight ),(_degg .GrayMax +1)*uint32 (_degg .HdpWidth ),_degg .HDTemplate ,false ,false ,_degg .GBAtX ,_degg .GBAtY );
_bcfb ,_fdff :=_dfaf .GetRegionBitmap ();if _fdff !=nil {return nil ,_fdff ;};if _fdff =_degg .extractPatterns (_bcfb );_fdff !=nil {return nil ,_fdff ;};return _degg .Patterns ,nil ;};type RegionSegment struct{_ebgad *_db .Reader ;BitmapWidth uint32 ;
BitmapHeight uint32 ;XLocation uint32 ;YLocation uint32 ;CombinaionOperator _ea .CombinationOperator ;};func (_adef *PageInformationSegment )String ()string {_fbg :=&_ab .Builder {};_fbg .WriteString ("\u000a\u005b\u0050\u0041G\u0045\u002d\u0049\u004e\u0046\u004f\u0052\u004d\u0041\u0054I\u004fN\u002d\u0053\u0045\u0047\u004d\u0045\u004eT\u005d\u000a");
_d .Fprintf (_fbg ,"\u0009\u002d \u0042\u004d\u0048e\u0069\u0067\u0068\u0074\u003a\u0020\u0025\u0064\u000a",_adef .PageBMHeight );_d .Fprintf (_fbg ,"\u0009-\u0020B\u004d\u0057\u0069\u0064\u0074\u0068\u003a\u0020\u0025\u0064\u000a",_adef .PageBMWidth );
_d .Fprintf (_fbg ,"\u0009\u002d\u0020\u0052es\u006f\u006c\u0075\u0074\u0069\u006f\u006e\u0058\u003a\u0020\u0025\u0064\u000a",_adef .ResolutionX );_d .Fprintf (_fbg ,"\u0009\u002d\u0020\u0052es\u006f\u006c\u0075\u0074\u0069\u006f\u006e\u0059\u003a\u0020\u0025\u0064\u000a",_adef .ResolutionY );
_d .Fprintf (_fbg ,"\t\u002d\u0020\u0043\u006f\u006d\u0062i\u006e\u0061\u0074\u0069\u006f\u006e\u004f\u0070\u0065r\u0061\u0074\u006fr\u003a \u0025\u0073\u000a",_adef ._beec );_d .Fprintf (_fbg ,"\t\u002d\u0020\u0043\u006f\u006d\u0062i\u006e\u0061\u0074\u0069\u006f\u006eO\u0070\u0065\u0072\u0061\u0074\u006f\u0072O\u0076\u0065\u0072\u0072\u0069\u0064\u0065\u003a\u0020\u0025v\u000a",_adef ._gbb );
_d .Fprintf (_fbg ,"\u0009-\u0020I\u0073\u004c\u006f\u0073\u0073l\u0065\u0073s\u003a\u0020\u0025\u0076\u000a",_adef .IsLossless );_d .Fprintf (_fbg ,"\u0009\u002d\u0020R\u0065\u0071\u0075\u0069r\u0065\u0073\u0041\u0075\u0078\u0069\u006ci\u0061\u0072\u0079\u0042\u0075\u0066\u0066\u0065\u0072\u003a\u0020\u0025\u0076\u000a",_adef ._efcd );
_d .Fprintf (_fbg ,"\u0009\u002d\u0020M\u0069\u0067\u0068\u0074C\u006f\u006e\u0074\u0061\u0069\u006e\u0052e\u0066\u0069\u006e\u0065\u006d\u0065\u006e\u0074\u0073\u003a\u0020\u0025\u0076\u000a",_adef ._bagf );_d .Fprintf (_fbg ,"\u0009\u002d\u0020\u0049\u0073\u0053\u0074\u0072\u0069\u0070\u0065\u0064:\u0020\u0025\u0076\u000a",_adef .IsStripe );
_d .Fprintf (_fbg ,"\t\u002d\u0020\u004d\u0061xS\u0074r\u0069\u0070\u0065\u0053\u0069z\u0065\u003a\u0020\u0025\u0076\u000a",_adef .MaxStripeSize );return _fbg .String ();};var (_ Regioner =&TextRegion {};_ Segmenter =&TextRegion {};);func (_egc *GenericRegion )String ()string {_cgf :=&_ab .Builder {};
_cgf .WriteString ("\u000a[\u0047E\u004e\u0045\u0052\u0049\u0043 \u0052\u0045G\u0049\u004f\u004e\u005d\u000a");_cgf .WriteString (_egc .RegionSegment .String ()+"\u000a");_d .Fprintf (_cgf ,"\u0009\u002d\u0020Us\u0065\u0045\u0078\u0074\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u0073\u003a\u0020\u0025\u0076\u000a",_egc .UseExtTemplates );
_d .Fprintf (_cgf ,"\u0009\u002d \u0049\u0073\u0054P\u0047\u0044\u006f\u006e\u003a\u0020\u0025\u0076\u000a",_egc .IsTPGDon );_d .Fprintf (_cgf ,"\u0009-\u0020G\u0042\u0054\u0065\u006d\u0070l\u0061\u0074e\u003a\u0020\u0025\u0064\u000a",_egc .GBTemplate );
_d .Fprintf (_cgf ,"\t\u002d \u0049\u0073\u004d\u004d\u0052\u0045\u006e\u0063o\u0064\u0065\u0064\u003a %\u0076\u000a",_egc .IsMMREncoded );_d .Fprintf (_cgf ,"\u0009\u002d\u0020\u0047\u0042\u0041\u0074\u0058\u003a\u0020\u0025\u0076\u000a",_egc .GBAtX );
_d .Fprintf (_cgf ,"\u0009\u002d\u0020\u0047\u0042\u0041\u0074\u0059\u003a\u0020\u0025\u0076\u000a",_egc .GBAtY );_d .Fprintf (_cgf ,"\t\u002d \u0047\u0042\u0041\u0074\u004f\u0076\u0065\u0072r\u0069\u0064\u0065\u003a %\u0076\u000a",_egc .GBAtOverride );
return _cgf .String ();};func (_egefc *SymbolDictionary )String ()string {_cgba :=&_ab .Builder {};_cgba .WriteString ("\n\u005b\u0053\u0059\u004dBO\u004c-\u0044\u0049\u0043\u0054\u0049O\u004e\u0041\u0052\u0059\u005d\u000a");_cgba .WriteString (_d .Sprintf ("\u0009-\u0020S\u0064\u0072\u0054\u0065\u006dp\u006c\u0061t\u0065\u0020\u0025\u0076\u000a",_egefc .SdrTemplate ));
_cgba .WriteString (_d .Sprintf ("\u0009\u002d\u0020\u0053\u0064\u0054\u0065\u006d\u0070\u006c\u0061\u0074e\u0020\u0025\u0076\u000a",_egefc .SdTemplate ));_cgba .WriteString (_d .Sprintf ("\u0009\u002d\u0020\u0069\u0073\u0043\u006f\u0064\u0069\u006eg\u0043\u006f\u006e\u0074\u0065\u0078\u0074R\u0065\u0074\u0061\u0069\u006e\u0065\u0064\u0020\u0025\u0076\u000a",_egefc ._ebfa ));
_cgba .WriteString (_d .Sprintf ("\u0009\u002d\u0020\u0069\u0073\u0043\u006f\u0064\u0069\u006e\u0067C\u006f\u006e\u0074\u0065\u0078\u0074\u0055\u0073\u0065\u0064 \u0025\u0076\u000a",_egefc ._gca ));_cgba .WriteString (_d .Sprintf ("\u0009\u002d\u0020\u0053\u0064\u0048u\u0066\u0066\u0041\u0067\u0067\u0049\u006e\u0073\u0074\u0061\u006e\u0063\u0065S\u0065\u006c\u0065\u0063\u0074\u0069\u006fn\u0020\u0025\u0076\u000a",_egefc .SdHuffAggInstanceSelection ));
_cgba .WriteString (_d .Sprintf ("\u0009\u002d\u0020\u0053d\u0048\u0075\u0066\u0066\u0042\u004d\u0053\u0069\u007a\u0065S\u0065l\u0065\u0063\u0074\u0069\u006f\u006e\u0020%\u0076\u000a",_egefc .SdHuffBMSizeSelection ));_cgba .WriteString (_d .Sprintf ("\u0009\u002d\u0020\u0053\u0064\u0048u\u0066\u0066\u0044\u0065\u0063\u006f\u0064\u0065\u0057\u0069\u0064\u0074\u0068S\u0065\u006c\u0065\u0063\u0074\u0069\u006fn\u0020\u0025\u0076\u000a",_egefc .SdHuffDecodeWidthSelection ));
_cgba .WriteString (_d .Sprintf ("\u0009\u002d\u0020Sd\u0048\u0075\u0066\u0066\u0044\u0065\u0063\u006f\u0064e\u0048e\u0069g\u0068t\u0053\u0065\u006c\u0065\u0063\u0074\u0069\u006f\u006e\u0020\u0025\u0076\u000a",_egefc .SdHuffDecodeHeightSelection ));_cgba .WriteString (_d .Sprintf ("\u0009\u002d\u0020U\u0073\u0065\u0052\u0065f\u0069\u006e\u0065\u006d\u0065\u006e\u0074A\u0067\u0067\u0072\u0065\u0067\u0061\u0074\u0069\u006f\u006e\u0020\u0025\u0076\u000a",_egefc .UseRefinementAggregation ));
_cgba .WriteString (_d .Sprintf ("\u0009\u002d\u0020is\u0048\u0075\u0066\u0066\u006d\u0061\u006e\u0045\u006e\u0063\u006f\u0064\u0065\u0064\u0020\u0025\u0076\u000a",_egefc .IsHuffmanEncoded ));_cgba .WriteString (_d .Sprintf ("\u0009\u002d\u0020S\u0064\u0041\u0054\u0058\u0020\u0025\u0076\u000a",_egefc .SdATX ));
_cgba .WriteString (_d .Sprintf ("\u0009\u002d\u0020S\u0064\u0041\u0054\u0059\u0020\u0025\u0076\u000a",_egefc .SdATY ));_cgba .WriteString (_d .Sprintf ("\u0009\u002d\u0020\u0053\u0064\u0072\u0041\u0054\u0058\u0020\u0025\u0076\u000a",_egefc .SdrATX ));
_cgba .WriteString (_d .Sprintf ("\u0009\u002d\u0020\u0053\u0064\u0072\u0041\u0054\u0059\u0020\u0025\u0076\u000a",_egefc .SdrATY ));_cgba .WriteString (_d .Sprintf ("\u0009\u002d\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u004ff\u0045\u0078\u0070\u006f\u0072\u0074\u0065d\u0053\u0079\u006d\u0062\u006f\u006c\u0073\u0020\u0025\u0076\u000a",_egefc .NumberOfExportedSymbols ));
_cgba .WriteString (_d .Sprintf ("\u0009-\u0020\u004e\u0075\u006db\u0065\u0072\u004f\u0066\u004ee\u0077S\u0079m\u0062\u006f\u006c\u0073\u0020\u0025\u0076\n",_egefc .NumberOfNewSymbols ));_cgba .WriteString (_d .Sprintf ("\u0009\u002d\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u004ff\u0049\u006d\u0070\u006f\u0072\u0074\u0065d\u0053\u0079\u006d\u0062\u006f\u006c\u0073\u0020\u0025\u0076\u000a",_egefc ._efbd ));
_cgba .WriteString (_d .Sprintf ("\u0009\u002d \u006e\u0075\u006d\u0062\u0065\u0072\u004f\u0066\u0044\u0065\u0063\u006f\u0064\u0065\u0064\u0053\u0079\u006d\u0062\u006f\u006c\u0073 %\u0076\u000a",_egefc ._bcgc ));return _cgba .String ();};func (_daag *GenericRegion )decodeTemplate2 (_aac ,_aab ,_adf int ,_ggaf ,_cad int )(_adfd error ){const _fegg ="\u0064e\u0063o\u0064\u0065\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u0032";
var (_ebc ,_bcd int ;_dadbb ,_gabe int ;_ede byte ;_cfde ,_aaca int ;);if _aac >=1{_ede ,_adfd =_daag .Bitmap .GetByte (_cad );if _adfd !=nil {return _df .Wrap (_adfd ,_fegg ,"\u006ci\u006ee\u004e\u0075\u006d\u0062\u0065\u0072\u0020\u003e\u003d\u0020\u0031");
};_dadbb =int (_ede );};if _aac >=2{_ede ,_adfd =_daag .Bitmap .GetByte (_cad -_daag .Bitmap .RowStride );if _adfd !=nil {return _df .Wrap (_adfd ,_fegg ,"\u006ci\u006ee\u004e\u0075\u006d\u0062\u0065\u0072\u0020\u003e\u003d\u0020\u0032");};_gabe =int (_ede )<<4;
};_ebc =(_dadbb >>3&0x7c)|(_gabe >>3&0x380);for _dcae :=0;_dcae < _adf ;_dcae =_cfde {var (_dced byte ;_gdf int ;);_cfde =_dcae +8;if _daee :=_aab -_dcae ;_daee > 8{_gdf =8;}else {_gdf =_daee ;};if _aac > 0{_dadbb <<=8;if _cfde < _aab {_ede ,_adfd =_daag .Bitmap .GetByte (_cad +1);
if _adfd !=nil {return _df .Wrap (_adfd ,_fegg ,"\u006c\u0069\u006e\u0065\u004e\u0075\u006d\u0062\u0065r\u0020\u003e\u0020\u0030");};_dadbb |=int (_ede );};};if _aac > 1{_gabe <<=8;if _cfde < _aab {_ede ,_adfd =_daag .Bitmap .GetByte (_cad -_daag .Bitmap .RowStride +1);
if _adfd !=nil {return _df .Wrap (_adfd ,_fegg ,"\u006c\u0069\u006e\u0065\u004e\u0075\u006d\u0062\u0065r\u0020\u003e\u0020\u0031");};_gabe |=int (_ede )<<4;};};for _cabg :=0;_cabg < _gdf ;_cabg ++{_effe :=uint (10-_cabg );if _daag ._agca {_bcd =_daag .overrideAtTemplate2 (_ebc ,_dcae +_cabg ,_aac ,int (_dced ),_cabg );
_daag ._fdc .SetIndex (int32 (_bcd ));}else {_daag ._fdc .SetIndex (int32 (_ebc ));};_aaca ,_adfd =_daag ._fabe .DecodeBit (_daag ._fdc );if _adfd !=nil {return _df .Wrap (_adfd ,_fegg ,"");};_dced |=byte (_aaca <<uint (7-_cabg ));_ebc =((_ebc &0x1bd)<<1)|_aaca |((_dadbb >>_effe )&0x4)|((_gabe >>_effe )&0x80);
};if _bcdc :=_daag .Bitmap .SetByte (_ggaf ,_dced );_bcdc !=nil {return _df .Wrap (_bcdc ,_fegg ,"");};_ggaf ++;_cad ++;};return nil ;};func (_aaeb *SymbolDictionary )setRetainedCodingContexts (_cfeff *SymbolDictionary ){_aaeb ._cgc =_cfeff ._cgc ;_aaeb .IsHuffmanEncoded =_cfeff .IsHuffmanEncoded ;
_aaeb .UseRefinementAggregation =_cfeff .UseRefinementAggregation ;_aaeb .SdTemplate =_cfeff .SdTemplate ;_aaeb .SdrTemplate =_cfeff .SdrTemplate ;_aaeb .SdATX =_cfeff .SdATX ;_aaeb .SdATY =_cfeff .SdATY ;_aaeb .SdrATX =_cfeff .SdrATX ;_aaeb .SdrATY =_cfeff .SdrATY ;
_aaeb ._gggf =_cfeff ._gggf ;};func (_gabb *GenericRegion )readGBAtPixels (_deg int )error {const _dcgf ="\u0072\u0065\u0061\u0064\u0047\u0042\u0041\u0074\u0050i\u0078\u0065\u006c\u0073";_gabb .GBAtX =make ([]int8 ,_deg );_gabb .GBAtY =make ([]int8 ,_deg );
for _fage :=0;_fage < _deg ;_fage ++{_cac ,_bcae :=_gabb ._dgc .ReadByte ();if _bcae !=nil {return _df .Wrapf (_bcae ,_dcgf ,"\u0058\u0020\u0061t\u0020\u0069\u003a\u0020\u0027\u0025\u0064\u0027",_fage );};_gabb .GBAtX [_fage ]=int8 (_cac );_cac ,_bcae =_gabb ._dgc .ReadByte ();
if _bcae !=nil {return _df .Wrapf (_bcae ,_dcgf ,"\u0059\u0020\u0061t\u0020\u0069\u003a\u0020\u0027\u0025\u0064\u0027",_fage );};_gabb .GBAtY [_fage ]=int8 (_cac );};return nil ;};func (_gbbd *RegionSegment )String ()string {_fcbc :=&_ab .Builder {};_fcbc .WriteString ("\u0009[\u0052E\u0047\u0049\u004f\u004e\u0020S\u0045\u0047M\u0045\u004e\u0054\u005d\u000a");
_fcbc .WriteString (_d .Sprintf ("\t\u0009\u002d\u0020\u0042\u0069\u0074m\u0061\u0070\u0020\u0028\u0077\u0069d\u0074\u0068\u002c\u0020\u0068\u0065\u0069g\u0068\u0074\u0029\u0020\u005b\u0025\u0064\u0078\u0025\u0064]\u000a",_gbbd .BitmapWidth ,_gbbd .BitmapHeight ));
_fcbc .WriteString (_d .Sprintf ("\u0009\u0009\u002d\u0020L\u006f\u0063\u0061\u0074\u0069\u006f\u006e\u0020\u0028\u0078,\u0079)\u003a\u0020\u005b\u0025\u0064\u002c\u0025d\u005d\u000a",_gbbd .XLocation ,_gbbd .YLocation ));_fcbc .WriteString (_d .Sprintf ("\t\u0009\u002d\u0020\u0043\u006f\u006db\u0069\u006e\u0061\u0074\u0069\u006f\u006e\u004f\u0070e\u0072\u0061\u0074o\u0072:\u0020\u0025\u0073",_gbbd .CombinaionOperator ));
return _fcbc .String ();};func (_cdfg *SymbolDictionary )setCodingStatistics ()error {if _cdfg ._gbbe ==nil {_cdfg ._gbbe =_dbe .NewStats (512,1);};if _cdfg ._dfcge ==nil {_cdfg ._dfcge =_dbe .NewStats (512,1);};if _cdfg ._edcff ==nil {_cdfg ._edcff =_dbe .NewStats (512,1);
};if _cdfg ._fcbe ==nil {_cdfg ._fcbe =_dbe .NewStats (512,1);};if _cdfg ._fee ==nil {_cdfg ._fee =_dbe .NewStats (512,1);};if _cdfg .UseRefinementAggregation &&_cdfg ._daed ==nil {_cdfg ._daed =_dbe .NewStats (1<<uint (_cdfg ._gfegc ),1);_cdfg ._efgf =_dbe .NewStats (512,1);
_cdfg ._ebef =_dbe .NewStats (512,1);};if _cdfg ._gggf ==nil {_cdfg ._gggf =_dbe .NewStats (65536,1);};if _cdfg ._cgc ==nil {var _efeae error ;_cdfg ._cgc ,_efeae =_dbe .New (_cdfg ._ceed );if _efeae !=nil {return _efeae ;};};return nil ;};func NewHeader (d Documenter ,r *_db .Reader ,offset int64 ,organizationType OrganizationType )(*Header ,error ){_ddbc :=&Header {Reader :r };
if _ggc :=_ddbc .parse (d ,r ,offset ,organizationType );_ggc !=nil {return nil ,_df .Wrap (_ggc ,"\u004ee\u0077\u0048\u0065\u0061\u0064\u0065r","");};return _ddbc ,nil ;};type PatternDictionary struct{_dabd *_db .Reader ;DataHeaderOffset int64 ;DataHeaderLength int64 ;
DataOffset int64 ;DataLength int64 ;GBAtX []int8 ;GBAtY []int8 ;IsMMREncoded bool ;HDTemplate byte ;HdpWidth byte ;HdpHeight byte ;Patterns []*_ea .Bitmap ;GrayMax uint32 ;};func (_fgef *Header )String ()string {_dgd :=&_ab .Builder {};_dgd .WriteString ("\u000a[\u0053E\u0047\u004d\u0045\u004e\u0054-\u0048\u0045A\u0044\u0045\u0052\u005d\u000a");
_d .Fprintf (_dgd ,"\t\u002d\u0020\u0053\u0065gm\u0065n\u0074\u004e\u0075\u006d\u0062e\u0072\u003a\u0020\u0025\u0076\u000a",_fgef .SegmentNumber );_d .Fprintf (_dgd ,"\u0009\u002d\u0020T\u0079\u0070\u0065\u003a\u0020\u0025\u0076\u000a",_fgef .Type );_d .Fprintf (_dgd ,"\u0009-\u0020R\u0065\u0074\u0061\u0069\u006eF\u006c\u0061g\u003a\u0020\u0025\u0076\u000a",_fgef .RetainFlag );
_d .Fprintf (_dgd ,"\u0009\u002d\u0020Pa\u0067\u0065\u0041\u0073\u0073\u006f\u0063\u0069\u0061\u0074\u0069\u006f\u006e\u003a\u0020\u0025\u0076\u000a",_fgef .PageAssociation );_d .Fprintf (_dgd ,"\u0009\u002d\u0020\u0050\u0061\u0067\u0065\u0041\u0073\u0073\u006f\u0063\u0069\u0061\u0074i\u006fn\u0046\u0069\u0065\u006c\u0064\u0053\u0069\u007a\u0065\u003a\u0020\u0025\u0076\u000a",_fgef .PageAssociationFieldSize );
_dgd .WriteString ("\u0009-\u0020R\u0054\u0053\u0045\u0047\u004d\u0045\u004e\u0054\u0053\u003a\u000a");for _ ,_acce :=range _fgef .RTSNumbers {_d .Fprintf (_dgd ,"\u0009\t\u002d\u0020\u0025\u0064\u000a",_acce );};_d .Fprintf (_dgd ,"\t\u002d \u0048\u0065\u0061\u0064\u0065\u0072\u004c\u0065n\u0067\u0074\u0068\u003a %\u0076\u000a",_fgef .HeaderLength );
_d .Fprintf (_dgd ,"\u0009-\u0020\u0053\u0065\u0067m\u0065\u006e\u0074\u0044\u0061t\u0061L\u0065n\u0067\u0074\u0068\u003a\u0020\u0025\u0076\n",_fgef .SegmentDataLength );_d .Fprintf (_dgd ,"\u0009\u002d\u0020\u0053\u0065\u0067\u006d\u0065\u006e\u0074D\u0061\u0074\u0061\u0053\u0074\u0061\u0072t\u004f\u0066\u0066\u0073\u0065\u0074\u003a\u0020\u0025\u0076\u000a",_fgef .SegmentDataStartOffset );
return _dgd .String ();};type HalftoneRegion struct{_aaae *_db .Reader ;_gacb *Header ;DataHeaderOffset int64 ;DataHeaderLength int64 ;DataOffset int64 ;DataLength int64 ;RegionSegment *RegionSegment ;HDefaultPixel int8 ;CombinationOperator _ea .CombinationOperator ;
HSkipEnabled bool ;HTemplate byte ;IsMMREncoded bool ;HGridWidth uint32 ;HGridHeight uint32 ;HGridX int32 ;HGridY int32 ;HRegionX uint16 ;HRegionY uint16 ;HalftoneRegionBitmap *_ea .Bitmap ;Patterns []*_ea .Bitmap ;};func (_bged *TextRegion )decodeRdx ()(int64 ,error ){const _ebgac ="\u0064e\u0063\u006f\u0064\u0065\u0052\u0064x";
if _bged .IsHuffmanEncoded {if _bged .SbHuffRDX ==3{if _bged ._eeba ==nil {var (_becd int ;_deced error ;);if _bged .SbHuffFS ==3{_becd ++;};if _bged .SbHuffDS ==3{_becd ++;};if _bged .SbHuffDT ==3{_becd ++;};if _bged .SbHuffRDWidth ==3{_becd ++;};if _bged .SbHuffRDHeight ==3{_becd ++;
};_bged ._eeba ,_deced =_bged .getUserTable (_becd );if _deced !=nil {return 0,_df .Wrap (_deced ,_ebgac ,"");};};return _bged ._eeba .Decode (_bged ._cfgc );};_ccfb ,_efdfd :=_dbd .GetStandardTable (14+int (_bged .SbHuffRDX ));if _efdfd !=nil {return 0,_df .Wrap (_efdfd ,_ebgac ,"");
};return _ccfb .Decode (_bged ._cfgc );};_ddcc ,_dbcb :=_bged ._gdfad .DecodeInt (_bged ._ffae );if _dbcb !=nil {return 0,_df .Wrap (_dbcb ,_ebgac ,"");};return int64 (_ddcc ),nil ;};func (_egcab *PageInformationSegment )readIsStriped ()error {_gfbf ,_feabd :=_egcab ._dfag .ReadBit ();
if _feabd !=nil {return _feabd ;};if _gfbf ==1{_egcab .IsStripe =true ;};return nil ;};func (_ed *GenericRefinementRegion )GetRegionBitmap ()(*_ea .Bitmap ,error ){var _ec error ;_c .Log .Trace ("\u005b\u0047E\u004e\u0045\u0052\u0049\u0043\u002d\u0052\u0045\u0046\u002d\u0052\u0045\u0047\u0049\u004f\u004e\u005d\u0020\u0047\u0065\u0074\u0052\u0065\u0067\u0069\u006f\u006e\u0042\u0069\u0074\u006d\u0061\u0070\u0020\u0062\u0065\u0067\u0069\u006e\u0073\u002e\u002e\u002e");
defer func (){if _ec !=nil {_c .Log .Trace ("[\u0047\u0045\u004e\u0045\u0052\u0049\u0043\u002d\u0052E\u0046\u002d\u0052\u0045\u0047\u0049\u004fN]\u0020\u0047\u0065\u0074R\u0065\u0067\u0069\u006f\u006e\u0042\u0069\u0074\u006dap\u0020\u0066a\u0069\u006c\u0065\u0064\u002e\u0020\u0025\u0076",_ec );
}else {_c .Log .Trace ("\u005b\u0047E\u004e\u0045\u0052\u0049\u0043\u002d\u0052\u0045\u0046\u002d\u0052\u0045\u0047\u0049\u004f\u004e\u005d\u0020\u0047\u0065\u0074\u0052\u0065\u0067\u0069\u006f\u006e\u0042\u0069\u0074\u006d\u0061\u0070\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
};}();if _ed .RegionBitmap !=nil {return _ed .RegionBitmap ,nil ;};_baa :=0;if _ed .ReferenceBitmap ==nil {_ed .ReferenceBitmap ,_ec =_ed .getGrReference ();if _ec !=nil {return nil ,_ec ;};};if _ed ._cc ==nil {_ed ._cc ,_ec =_dbe .New (_ed ._ega );if _ec !=nil {return nil ,_ec ;
};};if _ed ._fef ==nil {_ed ._fef =_dbe .NewStats (8192,1);};_ed .RegionBitmap =_ea .New (int (_ed .RegionInfo .BitmapWidth ),int (_ed .RegionInfo .BitmapHeight ));if _ed .TemplateID ==0{if _ec =_ed .updateOverride ();_ec !=nil {return nil ,_ec ;};};_eaa :=(_ed .RegionBitmap .Width +7)&-8;
var _dcc int ;if _ed .IsTPGROn {_dcc =int (-_ed .ReferenceDY )*_ed .ReferenceBitmap .RowStride ;};_ga :=_dcc +1;for _egb :=0;_egb < _ed .RegionBitmap .Height ;_egb ++{if _ed .IsTPGROn {_eag ,_fab :=_ed .decodeSLTP ();if _fab !=nil {return nil ,_fab ;};
_baa ^=_eag ;};if _baa ==0{_ec =_ed .decodeOptimized (_egb ,_ed .RegionBitmap .Width ,_ed .RegionBitmap .RowStride ,_ed .ReferenceBitmap .RowStride ,_eaa ,_dcc ,_ga );if _ec !=nil {return nil ,_ec ;};}else {_ec =_ed .decodeTypicalPredictedLine (_egb ,_ed .RegionBitmap .Width ,_ed .RegionBitmap .RowStride ,_ed .ReferenceBitmap .RowStride ,_eaa ,_dcc );
if _ec !=nil {return nil ,_ec ;};};};return _ed .RegionBitmap ,nil ;};func (_aecf *GenericRegion )overrideAtTemplate2 (_gabg ,_bgd ,_eafg ,_fga ,_cfc int )int {_gabg &=0x3FB;if _aecf .GBAtY [0]==0&&_aecf .GBAtX [0]>=-int8 (_cfc ){_gabg |=(_fga >>uint (7-(int8 (_cfc )+_aecf .GBAtX [0]))&0x1)<<2;
}else {_gabg |=int (_aecf .getPixel (_bgd +int (_aecf .GBAtX [0]),_eafg +int (_aecf .GBAtY [0])))<<2;};return _gabg ;};func (_dba *HalftoneRegion )computeSegmentDataStructure ()error {_dba .DataOffset =_dba ._aaae .AbsolutePosition ();_dba .DataHeaderLength =_dba .DataOffset -_dba .DataHeaderOffset ;
_dba .DataLength =int64 (_dba ._aaae .AbsoluteLength ())-_dba .DataHeaderLength ;return nil ;};func (_dbfg *template1 )form (_fge ,_eae ,_bafd ,_fgf ,_ged int16 )int16 {return ((_fge &0x02)<<8)|(_eae <<6)|((_bafd &0x03)<<4)|(_fgf <<1)|_ged ;};func (_acfd *TextRegion )InitEncode (globalSymbolsMap ,localSymbolsMap map[int ]int ,comps []int ,inLL *_ea .Points ,symbols *_ea .Bitmaps ,classIDs *_fe .IntSlice ,boxes *_ea .Boxes ,width ,height ,symBits int ){_acfd .RegionInfo =&RegionSegment {BitmapWidth :uint32 (width ),BitmapHeight :uint32 (height )};
_acfd ._daaf =globalSymbolsMap ;_acfd ._acbd =localSymbolsMap ;_acfd ._fgeef =comps ;_acfd ._agba =inLL ;_acfd ._gceg =symbols ;_acfd ._ebdc =classIDs ;_acfd ._bgdc =boxes ;_acfd ._fbcgg =symBits ;};func (_egd *EndOfStripe )LineNumber ()int {return _egd ._dc };
func (_bgage *TableSegment )HtHigh ()int32 {return _bgage ._ffdf };func (_egda *RegionSegment )readCombinationOperator ()error {_cefdg ,_eagg :=_egda ._ebgad .ReadBits (3);if _eagg !=nil {return _eagg ;};_egda .CombinaionOperator =_ea .CombinationOperator (_cefdg &0xF);
return nil ;};var _ templater =&template0 {};func (_cecc *Header )writeFlags (_gfcfa _db .BinaryWriter )(_ccfa error ){const _aafcf ="\u0048\u0065\u0061\u0064\u0065\u0072\u002e\u0077\u0072\u0069\u0074\u0065F\u006c\u0061\u0067\u0073";_gcba :=byte (_cecc .Type );
if _ccfa =_gfcfa .WriteByte (_gcba );_ccfa !=nil {return _df .Wrap (_ccfa ,_aafcf ,"\u0077\u0072\u0069ti\u006e\u0067\u0020\u0073\u0065\u0067\u006d\u0065\u006et\u0020t\u0079p\u0065 \u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0066\u0061\u0069\u006c\u0065\u0064");
};if !_cecc .RetainFlag &&!_cecc .PageAssociationFieldSize {return nil ;};if _ccfa =_gfcfa .SkipBits (-8);_ccfa !=nil {return _df .Wrap (_ccfa ,_aafcf ,"\u0073\u006bi\u0070\u0070\u0069\u006e\u0067\u0020\u0062\u0061\u0063\u006b\u0020\u0074\u0068\u0065\u0020\u0062\u0069\u0074\u0073\u0020\u0066\u0061il\u0065\u0064");
};var _fbdd int ;if _cecc .RetainFlag {_fbdd =1;};if _ccfa =_gfcfa .WriteBit (_fbdd );_ccfa !=nil {return _df .Wrap (_ccfa ,_aafcf ,"\u0072\u0065\u0074\u0061in\u0020\u0072\u0065\u0074\u0061\u0069\u006e\u0020\u0066\u006c\u0061\u0067\u0073");};_fbdd =0;if _cecc .PageAssociationFieldSize {_fbdd =1;
};if _ccfa =_gfcfa .WriteBit (_fbdd );_ccfa !=nil {return _df .Wrap (_ccfa ,_aafcf ,"p\u0061\u0067\u0065\u0020as\u0073o\u0063\u0069\u0061\u0074\u0069o\u006e\u0020\u0066\u006c\u0061\u0067");};_gfcfa .FinishByte ();return nil ;};func (_eccf *PageInformationSegment )checkInput ()error {if _eccf .PageBMHeight ==_f .MaxInt32 {if !_eccf .IsStripe {_c .Log .Debug ("P\u0061\u0067\u0065\u0049\u006e\u0066\u006f\u0072\u006da\u0074\u0069\u006f\u006e\u0053\u0065\u0067me\u006e\u0074\u002e\u0049s\u0053\u0074\u0072\u0069\u0070\u0065\u0020\u0073\u0068ou\u006c\u0064 \u0062\u0065\u0020\u0074\u0072\u0075\u0065\u002e");
};};return nil ;};func (_abf *SymbolDictionary )decodeHeightClassDeltaHeight ()(int64 ,error ){if _abf .IsHuffmanEncoded {return _abf .decodeHeightClassDeltaHeightWithHuffman ();};_caed ,_geba :=_abf ._cgc .DecodeInt (_abf ._dfcge );if _geba !=nil {return 0,_geba ;
};return int64 (_caed ),nil ;};func (_ebfd *SymbolDictionary )encodeATFlags (_ceaf _db .BinaryWriter )(_ccddgb int ,_dadbd error ){const _cfedb ="\u0065\u006e\u0063\u006f\u0064\u0065\u0041\u0054\u0046\u006c\u0061\u0067\u0073";if _ebfd .IsHuffmanEncoded ||_ebfd .SdTemplate !=0{return 0,nil ;
};_gcbfa :=4;if _ebfd .SdTemplate !=0{_gcbfa =1;};for _fbeb :=0;_fbeb < _gcbfa ;_fbeb ++{if _dadbd =_ceaf .WriteByte (byte (_ebfd .SdATX [_fbeb ]));_dadbd !=nil {return _ccddgb ,_df .Wrapf (_dadbd ,_cfedb ,"\u0053d\u0041\u0054\u0058\u005b\u0025\u0064]",_fbeb );
};_ccddgb ++;if _dadbd =_ceaf .WriteByte (byte (_ebfd .SdATY [_fbeb ]));_dadbd !=nil {return _ccddgb ,_df .Wrapf (_dadbd ,_cfedb ,"\u0053d\u0041\u0054\u0059\u005b\u0025\u0064]",_fbeb );};_ccddgb ++;};return _ccddgb ,nil ;};func (_egaa *HalftoneRegion )parseHeader ()error {if _gebbd :=_egaa .RegionSegment .parseHeader ();
_gebbd !=nil {return _gebbd ;};_dggb ,_gdfd :=_egaa ._aaae .ReadBit ();if _gdfd !=nil {return _gdfd ;};_egaa .HDefaultPixel =int8 (_dggb );_aaef ,_gdfd :=_egaa ._aaae .ReadBits (3);if _gdfd !=nil {return _gdfd ;};_egaa .CombinationOperator =_ea .CombinationOperator (_aaef &0xf);
_dggb ,_gdfd =_egaa ._aaae .ReadBit ();if _gdfd !=nil {return _gdfd ;};if _dggb ==1{_egaa .HSkipEnabled =true ;};_aaef ,_gdfd =_egaa ._aaae .ReadBits (2);if _gdfd !=nil {return _gdfd ;};_egaa .HTemplate =byte (_aaef &0xf);_dggb ,_gdfd =_egaa ._aaae .ReadBit ();
if _gdfd !=nil {return _gdfd ;};if _dggb ==1{_egaa .IsMMREncoded =true ;};_aaef ,_gdfd =_egaa ._aaae .ReadBits (32);if _gdfd !=nil {return _gdfd ;};_egaa .HGridWidth =uint32 (_aaef &_f .MaxUint32 );_aaef ,_gdfd =_egaa ._aaae .ReadBits (32);if _gdfd !=nil {return _gdfd ;
};_egaa .HGridHeight =uint32 (_aaef &_f .MaxUint32 );_aaef ,_gdfd =_egaa ._aaae .ReadBits (32);if _gdfd !=nil {return _gdfd ;};_egaa .HGridX =int32 (_aaef &_f .MaxInt32 );_aaef ,_gdfd =_egaa ._aaae .ReadBits (32);if _gdfd !=nil {return _gdfd ;};_egaa .HGridY =int32 (_aaef &_f .MaxInt32 );
_aaef ,_gdfd =_egaa ._aaae .ReadBits (16);if _gdfd !=nil {return _gdfd ;};_egaa .HRegionX =uint16 (_aaef &_f .MaxUint16 );_aaef ,_gdfd =_egaa ._aaae .ReadBits (16);if _gdfd !=nil {return _gdfd ;};_egaa .HRegionY =uint16 (_aaef &_f .MaxUint16 );if _gdfd =_egaa .computeSegmentDataStructure ();
_gdfd !=nil {return _gdfd ;};return _egaa .checkInput ();};func (_bbf *PageInformationSegment )parseHeader ()(_dabf error ){_c .Log .Trace ("\u005b\u0050\u0061\u0067\u0065I\u006e\u0066\u006f\u0072\u006d\u0061\u0074\u0069\u006f\u006e\u0053\u0065\u0067m\u0065\u006e\u0074\u005d\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0048\u0065\u0061\u0064\u0065\u0072\u002e\u002e\u002e");
defer func (){var _bce ="[\u0050\u0061\u0067\u0065\u0049\u006e\u0066\u006f\u0072m\u0061\u0074\u0069\u006f\u006e\u0053\u0065gm\u0065\u006e\u0074\u005d \u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0048\u0065ad\u0065\u0072 \u0046\u0069\u006e\u0069\u0073\u0068\u0065\u0064";
if _dabf !=nil {_bce +="\u0020\u0077\u0069t\u0068\u0020\u0065\u0072\u0072\u006f\u0072\u0020"+_dabf .Error ();}else {_bce +="\u0020\u0073\u0075\u0063\u0063\u0065\u0073\u0073\u0066\u0075\u006c\u006c\u0079";};_c .Log .Trace (_bce );}();if _dabf =_bbf .readWidthAndHeight ();
_dabf !=nil {return _dabf ;};if _dabf =_bbf .readResolution ();_dabf !=nil {return _dabf ;};_ ,_dabf =_bbf ._dfag .ReadBit ();if _dabf !=nil {return _dabf ;};if _dabf =_bbf .readCombinationOperatorOverrideAllowed ();_dabf !=nil {return _dabf ;};if _dabf =_bbf .readRequiresAuxiliaryBuffer ();
_dabf !=nil {return _dabf ;};if _dabf =_bbf .readCombinationOperator ();_dabf !=nil {return _dabf ;};if _dabf =_bbf .readDefaultPixelValue ();_dabf !=nil {return _dabf ;};if _dabf =_bbf .readContainsRefinement ();_dabf !=nil {return _dabf ;};if _dabf =_bbf .readIsLossless ();
_dabf !=nil {return _dabf ;};if _dabf =_bbf .readIsStriped ();_dabf !=nil {return _dabf ;};if _dabf =_bbf .readMaxStripeSize ();_dabf !=nil {return _dabf ;};if _dabf =_bbf .checkInput ();_dabf !=nil {return _dabf ;};_c .Log .Trace ("\u0025\u0073",_bbf );
return nil ;};func (_bdd *GenericRefinementRegion )overrideAtTemplate0 (_gc ,_edb ,_cddc ,_fce ,_aaa int )int {if _bdd ._ba [0]{_gc &=0xfff7;if _bdd .GrAtY [0]==0&&int (_bdd .GrAtX [0])>=-_aaa {_gc |=(_fce >>uint (7-(_aaa +int (_bdd .GrAtX [0])))&0x1)<<3;
}else {_gc |=_bdd .getPixel (_bdd .RegionBitmap ,_edb +int (_bdd .GrAtX [0]),_cddc +int (_bdd .GrAtY [0]))<<3;};};if _bdd ._ba [1]{_gc &=0xefff;if _bdd .GrAtY [1]==0&&int (_bdd .GrAtX [1])>=-_aaa {_gc |=(_fce >>uint (7-(_aaa +int (_bdd .GrAtX [1])))&0x1)<<12;
}else {_gc |=_bdd .getPixel (_bdd .ReferenceBitmap ,_edb +int (_bdd .GrAtX [1]),_cddc +int (_bdd .GrAtY [1]));};};return _gc ;};func (_dacea *PageInformationSegment )readCombinationOperatorOverrideAllowed ()error {_cadg ,_eaab :=_dacea ._dfag .ReadBit ();
if _eaab !=nil {return _eaab ;};if _cadg ==1{_dacea ._gbb =true ;};return nil ;};func (_fabfc *SymbolDictionary )setExportedSymbols (_bfeb []int ){for _edfd :=uint32 (0);_edfd < _fabfc ._efbd +_fabfc .NumberOfNewSymbols ;_edfd ++{if _bfeb [_edfd ]==1{var _cgfd *_ea .Bitmap ;
if _edfd < _fabfc ._efbd {_cgfd =_fabfc ._gffc [_edfd ];}else {_cgfd =_fabfc ._beee [_edfd -_fabfc ._efbd ];};_c .Log .Trace ("\u005bS\u0059\u004dB\u004f\u004c\u002d\u0044I\u0043\u0054\u0049O\u004e\u0041\u0052\u0059\u005d\u0020\u0041\u0064\u0064 E\u0078\u0070\u006fr\u0074\u0065d\u0053\u0079\u006d\u0062\u006f\u006c:\u0020\u0027%\u0073\u0027",_cgfd );
_fabfc ._aefc =append (_fabfc ._aefc ,_cgfd );};};};func (_afe *GenericRefinementRegion )String ()string {_eeef :=&_ab .Builder {};_eeef .WriteString ("\u000a[\u0047E\u004e\u0045\u0052\u0049\u0043 \u0052\u0045G\u0049\u004f\u004e\u005d\u000a");_eeef .WriteString (_afe .RegionInfo .String ()+"\u000a");
_d .Fprintf (_eeef ,"\u0009\u002d \u0049\u0073\u0054P\u0047\u0052\u006f\u006e\u003a\u0020\u0025\u0076\u000a",_afe .IsTPGROn );_d .Fprintf (_eeef ,"\u0009-\u0020T\u0065\u006d\u0070\u006c\u0061t\u0065\u0049D\u003a\u0020\u0025\u0076\u000a",_afe .TemplateID );
_d .Fprintf (_eeef ,"\u0009\u002d\u0020\u0047\u0072\u0041\u0074\u0058\u003a\u0020\u0025\u0076\u000a",_afe .GrAtX );_d .Fprintf (_eeef ,"\u0009\u002d\u0020\u0047\u0072\u0041\u0074\u0059\u003a\u0020\u0025\u0076\u000a",_afe .GrAtY );_d .Fprintf (_eeef ,"\u0009-\u0020R\u0065\u0066\u0065\u0072\u0065n\u0063\u0065D\u0058\u0020\u0025\u0076\u000a",_afe .ReferenceDX );
_d .Fprintf (_eeef ,"\u0009\u002d\u0020\u0052ef\u0065\u0072\u0065\u006e\u0063\u0044\u0065\u0059\u003a\u0020\u0025\u0076\u000a",_afe .ReferenceDY );return _eeef .String ();};type GenericRegion struct{_dgc *_db .Reader ;DataHeaderOffset int64 ;DataHeaderLength int64 ;
DataOffset int64 ;DataLength int64 ;RegionSegment *RegionSegment ;UseExtTemplates bool ;IsTPGDon bool ;GBTemplate byte ;IsMMREncoded bool ;UseMMR bool ;GBAtX []int8 ;GBAtY []int8 ;GBAtOverride []bool ;_agca bool ;Bitmap *_ea .Bitmap ;_fabe *_dbe .Decoder ;
_fdc *_dbe .DecoderStats ;_gdb *_da .Decoder ;};type Pager interface{GetSegment (int )(*Header ,error );GetBitmap ()(*_ea .Bitmap ,error );};func (_fcba *TableSegment )HtRS ()int32 {return _fcba ._fdad };type GenericRefinementRegion struct{_ad templater ;
_dbc templater ;_ega *_db .Reader ;_fd *Header ;RegionInfo *RegionSegment ;IsTPGROn bool ;TemplateID int8 ;Template templater ;GrAtX []int8 ;GrAtY []int8 ;RegionBitmap *_ea .Bitmap ;ReferenceBitmap *_ea .Bitmap ;ReferenceDX int32 ;ReferenceDY int32 ;_cc *_dbe .Decoder ;
_fef *_dbe .DecoderStats ;_dbf bool ;_ba []bool ;};func (_bag *GenericRegion )setParametersWithAt (_dgb bool ,_cdbd byte ,_agf ,_cfdc bool ,_egcag ,_daab []int8 ,_ecf ,_aeff uint32 ,_gbga *_dbe .DecoderStats ,_bgg *_dbe .Decoder ){_bag .IsMMREncoded =_dgb ;
_bag .GBTemplate =_cdbd ;_bag .IsTPGDon =_agf ;_bag .GBAtX =_egcag ;_bag .GBAtY =_daab ;_bag .RegionSegment .BitmapHeight =_aeff ;_bag .RegionSegment .BitmapWidth =_ecf ;_bag ._gdb =nil ;_bag .Bitmap =nil ;if _gbga !=nil {_bag ._fdc =_gbga ;};if _bgg !=nil {_bag ._fabe =_bgg ;
};_c .Log .Trace ("\u005b\u0047\u0045\u004e\u0045\u0052\u0049\u0043\u002d\u0052\u0045\u0047\u0049O\u004e\u005d\u0020\u0073\u0065\u0074P\u0061\u0072\u0061\u006d\u0065\u0074\u0065\u0072\u0073\u0020\u0053\u0044\u0041t\u003a\u0020\u0025\u0073",_bag );};func (_acdc *template1 )setIndex (_aecg *_dbe .DecoderStats ){_aecg .SetIndex (0x080)};
func (_afad *GenericRegion )decodeTemplate0b (_ffcd ,_dcf ,_gbgg int ,_dfeb ,_eea int )(_becb error ){const _dge ="\u0064\u0065c\u006f\u0064\u0065T\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u0030\u0062";var (_bee ,_bdg int ;_agcg ,_gebgf int ;_deaa byte ;
_daeg int ;);if _ffcd >=1{_deaa ,_becb =_afad .Bitmap .GetByte (_eea );if _becb !=nil {return _df .Wrap (_becb ,_dge ,"\u006ci\u006e\u0065\u0020\u003e\u003d\u00201");};_agcg =int (_deaa );};if _ffcd >=2{_deaa ,_becb =_afad .Bitmap .GetByte (_eea -_afad .Bitmap .RowStride );
if _becb !=nil {return _df .Wrap (_becb ,_dge ,"\u006ci\u006e\u0065\u0020\u003e\u003d\u00202");};_gebgf =int (_deaa )<<6;};_bee =(_agcg &0xf0)|(_gebgf &0x3800);for _agbc :=0;_agbc < _gbgg ;_agbc =_daeg {var (_aad byte ;_fde int ;);_daeg =_agbc +8;if _ccae :=_dcf -_agbc ;
_ccae > 8{_fde =8;}else {_fde =_ccae ;};if _ffcd > 0{_agcg <<=8;if _daeg < _dcf {_deaa ,_becb =_afad .Bitmap .GetByte (_eea +1);if _becb !=nil {return _df .Wrap (_becb ,_dge ,"\u006c\u0069\u006e\u0065\u0020\u003e\u0020\u0030");};_agcg |=int (_deaa );};
};if _ffcd > 1{_gebgf <<=8;if _daeg < _dcf {_deaa ,_becb =_afad .Bitmap .GetByte (_eea -_afad .Bitmap .RowStride +1);if _becb !=nil {return _df .Wrap (_becb ,_dge ,"\u006c\u0069\u006e\u0065\u0020\u003e\u0020\u0031");};_gebgf |=int (_deaa )<<6;};};for _fcec :=0;
_fcec < _fde ;_fcec ++{_dadb :=uint (7-_fcec );if _afad ._agca {_bdg =_afad .overrideAtTemplate0b (_bee ,_agbc +_fcec ,_ffcd ,int (_aad ),_fcec ,int (_dadb ));_afad ._fdc .SetIndex (int32 (_bdg ));}else {_afad ._fdc .SetIndex (int32 (_bee ));};var _efc int ;
_efc ,_becb =_afad ._fabe .DecodeBit (_afad ._fdc );if _becb !=nil {return _df .Wrap (_becb ,_dge ,"");};_aad |=byte (_efc <<_dadb );_bee =((_bee &0x7bf7)<<1)|_efc |((_agcg >>_dadb )&0x10)|((_gebgf >>_dadb )&0x800);};if _ffed :=_afad .Bitmap .SetByte (_dfeb ,_aad );
_ffed !=nil {return _df .Wrap (_ffed ,_dge ,"");};_dfeb ++;_eea ++;};return nil ;};func (_agfd *PageInformationSegment )readWidthAndHeight ()error {_aaeg ,_fgac :=_agfd ._dfag .ReadBits (32);if _fgac !=nil {return _fgac ;};_agfd .PageBMWidth =int (_aaeg &_f .MaxInt32 );
_aaeg ,_fgac =_agfd ._dfag .ReadBits (32);if _fgac !=nil {return _fgac ;};_agfd .PageBMHeight =int (_aaeg &_f .MaxInt32 );return nil ;};func (_be *GenericRefinementRegion )decodeSLTP ()(int ,error ){_be .Template .setIndex (_be ._fef );return _be ._cc .DecodeBit (_be ._fef );
};var (_cbb Segmenter ;_bad =map[Type ]func ()Segmenter {TSymbolDictionary :func ()Segmenter {return &SymbolDictionary {}},TIntermediateTextRegion :func ()Segmenter {return &TextRegion {}},TImmediateTextRegion :func ()Segmenter {return &TextRegion {}},TImmediateLosslessTextRegion :func ()Segmenter {return &TextRegion {}},TPatternDictionary :func ()Segmenter {return &PatternDictionary {}},TIntermediateHalftoneRegion :func ()Segmenter {return &HalftoneRegion {}},TImmediateHalftoneRegion :func ()Segmenter {return &HalftoneRegion {}},TImmediateLosslessHalftoneRegion :func ()Segmenter {return &HalftoneRegion {}},TIntermediateGenericRegion :func ()Segmenter {return &GenericRegion {}},TImmediateGenericRegion :func ()Segmenter {return &GenericRegion {}},TImmediateLosslessGenericRegion :func ()Segmenter {return &GenericRegion {}},TIntermediateGenericRefinementRegion :func ()Segmenter {return &GenericRefinementRegion {}},TImmediateGenericRefinementRegion :func ()Segmenter {return &GenericRefinementRegion {}},TImmediateLosslessGenericRefinementRegion :func ()Segmenter {return &GenericRefinementRegion {}},TPageInformation :func ()Segmenter {return &PageInformationSegment {}},TEndOfPage :func ()Segmenter {return _cbb },TEndOfStrip :func ()Segmenter {return &EndOfStripe {}},TEndOfFile :func ()Segmenter {return _cbb },TProfiles :func ()Segmenter {return _cbb },TTables :func ()Segmenter {return &TableSegment {}},TExtension :func ()Segmenter {return _cbb },TBitmap :func ()Segmenter {return _cbb }};
);func (_cfacb *SymbolDictionary )setAtPixels ()error {if _cfacb .IsHuffmanEncoded {return nil ;};_dbgb :=1;if _cfacb .SdTemplate ==0{_dbgb =4;};if _fgbe :=_cfacb .readAtPixels (_dbgb );_fgbe !=nil {return _fgbe ;};return nil ;};func (_ade *GenericRefinementRegion )GetRegionInfo ()*RegionSegment {return _ade .RegionInfo };
func NewGenericRegion (r *_db .Reader )*GenericRegion {return &GenericRegion {RegionSegment :NewRegionSegment (r ),_dgc :r };};func (_bgbb *TextRegion )Encode (w _db .BinaryWriter )(_geg int ,_ebgec error ){const _cbf ="\u0054\u0065\u0078\u0074\u0052\u0065\u0067\u0069\u006f\u006e\u002e\u0045n\u0063\u006f\u0064\u0065";
if _geg ,_ebgec =_bgbb .RegionInfo .Encode (w );_ebgec !=nil {return _geg ,_df .Wrap (_ebgec ,_cbf ,"");};var _gdgad int ;if _gdgad ,_ebgec =_bgbb .encodeFlags (w );_ebgec !=nil {return _geg ,_df .Wrap (_ebgec ,_cbf ,"");};_geg +=_gdgad ;if _gdgad ,_ebgec =_bgbb .encodeSymbols (w );
_ebgec !=nil {return _geg ,_df .Wrap (_ebgec ,_cbf ,"");};_geg +=_gdgad ;return _geg ,nil ;};func (_ffc *GenericRefinementRegion )Init (header *Header ,r *_db .Reader )error {_ffc ._fd =header ;_ffc ._ega =r ;_ffc .RegionInfo =NewRegionSegment (r );return _ffc .parseHeader ();
};func (_fade *TableSegment )HtLow ()int32 {return _fade ._dbgg };func (_ffd *GenericRefinementRegion )readAtPixels ()error {_ffd .GrAtX =make ([]int8 ,2);_ffd .GrAtY =make ([]int8 ,2);_gebg ,_beg :=_ffd ._ega .ReadByte ();if _beg !=nil {return _beg ;};
_ffd .GrAtX [0]=int8 (_gebg );_gebg ,_beg =_ffd ._ega .ReadByte ();if _beg !=nil {return _beg ;};_ffd .GrAtY [0]=int8 (_gebg );_gebg ,_beg =_ffd ._ega .ReadByte ();if _beg !=nil {return _beg ;};_ffd .GrAtX [1]=int8 (_gebg );_gebg ,_beg =_ffd ._ega .ReadByte ();
if _beg !=nil {return _beg ;};_ffd .GrAtY [1]=int8 (_gebg );return nil ;};func (_ddba *TextRegion )String ()string {_ddga :=&_ab .Builder {};_ddga .WriteString ("\u000a[\u0054E\u0058\u0054\u0020\u0052\u0045\u0047\u0049\u004f\u004e\u005d\u000a");_ddga .WriteString (_ddba .RegionInfo .String ()+"\u000a");
_ddga .WriteString (_d .Sprintf ("\u0009\u002d\u0020\u0053br\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u003a\u0020\u0025\u0076\u000a",_ddba .SbrTemplate ));_ddga .WriteString (_d .Sprintf ("\u0009-\u0020S\u0062\u0044\u0073\u004f\u0066f\u0073\u0065t\u003a\u0020\u0025\u0076\u000a",_ddba .SbDsOffset ));
_ddga .WriteString (_d .Sprintf ("\t\u002d \u0044\u0065\u0066\u0061\u0075\u006c\u0074\u0050i\u0078\u0065\u006c\u003a %\u0076\u000a",_ddba .DefaultPixel ));_ddga .WriteString (_d .Sprintf ("\t\u002d\u0020\u0043\u006f\u006d\u0062i\u006e\u0061\u0074\u0069\u006f\u006e\u004f\u0070\u0065r\u0061\u0074\u006fr\u003a \u0025\u0076\u000a",_ddba .CombinationOperator ));
_ddga .WriteString (_d .Sprintf ("\t\u002d \u0049\u0073\u0054\u0072\u0061\u006e\u0073\u0070o\u0073\u0065\u0064\u003a %\u0076\u000a",_ddba .IsTransposed ));_ddga .WriteString (_d .Sprintf ("\u0009\u002d\u0020Re\u0066\u0065\u0072\u0065\u006e\u0063\u0065\u0043\u006f\u0072\u006e\u0065\u0072\u003a\u0020\u0025\u0076\u000a",_ddba .ReferenceCorner ));
_ddga .WriteString (_d .Sprintf ("\t\u002d\u0020\u0055\u0073eR\u0065f\u0069\u006e\u0065\u006d\u0065n\u0074\u003a\u0020\u0025\u0076\u000a",_ddba .UseRefinement ));_ddga .WriteString (_d .Sprintf ("\u0009-\u0020\u0049\u0073\u0048\u0075\u0066\u0066\u006d\u0061\u006e\u0045n\u0063\u006f\u0064\u0065\u0064\u003a\u0020\u0025\u0076\u000a",_ddba .IsHuffmanEncoded ));
if _ddba .IsHuffmanEncoded {_ddga .WriteString (_d .Sprintf ("\u0009\u002d\u0020\u0053bH\u0075\u0066\u0066\u0052\u0053\u0069\u007a\u0065\u003a\u0020\u0025\u0076\u000a",_ddba .SbHuffRSize ));_ddga .WriteString (_d .Sprintf ("\u0009\u002d\u0020\u0053\u0062\u0048\u0075\u0066\u0066\u0052\u0044\u0059:\u0020\u0025\u0076\u000a",_ddba .SbHuffRDY ));
_ddga .WriteString (_d .Sprintf ("\u0009\u002d\u0020\u0053\u0062\u0048\u0075\u0066\u0066\u0052\u0044\u0058:\u0020\u0025\u0076\u000a",_ddba .SbHuffRDX ));_ddga .WriteString (_d .Sprintf ("\u0009\u002d\u0020\u0053bH\u0075\u0066\u0066\u0052\u0044\u0048\u0065\u0069\u0067\u0068\u0074\u003a\u0020\u0025v\u000a",_ddba .SbHuffRDHeight ));
_ddga .WriteString (_d .Sprintf ("\t\u002d\u0020\u0053\u0062Hu\u0066f\u0052\u0044\u0057\u0069\u0064t\u0068\u003a\u0020\u0025\u0076\u000a",_ddba .SbHuffRDWidth ));_ddga .WriteString (_d .Sprintf ("\u0009\u002d \u0053\u0062\u0048u\u0066\u0066\u0044\u0054\u003a\u0020\u0025\u0076\u000a",_ddba .SbHuffDT ));
_ddga .WriteString (_d .Sprintf ("\u0009\u002d \u0053\u0062\u0048u\u0066\u0066\u0044\u0053\u003a\u0020\u0025\u0076\u000a",_ddba .SbHuffDS ));_ddga .WriteString (_d .Sprintf ("\u0009\u002d \u0053\u0062\u0048u\u0066\u0066\u0046\u0053\u003a\u0020\u0025\u0076\u000a",_ddba .SbHuffFS ));
};_ddga .WriteString (_d .Sprintf ("\u0009\u002d\u0020\u0053\u0062\u0072\u0041\u0054\u0058:\u0020\u0025\u0076\u000a",_ddba .SbrATX ));_ddga .WriteString (_d .Sprintf ("\u0009\u002d\u0020\u0053\u0062\u0072\u0041\u0054\u0059:\u0020\u0025\u0076\u000a",_ddba .SbrATY ));
_ddga .WriteString (_d .Sprintf ("\u0009\u002d\u0020N\u0075\u006d\u0062\u0065r\u004f\u0066\u0053\u0079\u006d\u0062\u006fl\u0049\u006e\u0073\u0074\u0061\u006e\u0063\u0065\u0073\u003a\u0020\u0025\u0076\u000a",_ddba .NumberOfSymbolInstances ));_ddga .WriteString (_d .Sprintf ("\u0009\u002d\u0020\u0053\u0062\u0072\u0041\u0054\u0058:\u0020\u0025\u0076\u000a",_ddba .SbrATX ));
return _ddga .String ();};func (_gccab *SymbolDictionary )encodeSymbols (_bgfc _db .BinaryWriter )(_dacg int ,_bbddd error ){const _dgeg ="\u0065\u006e\u0063o\u0064\u0065\u0053\u0079\u006d\u0062\u006f\u006c";_egfg :=_af .New ();_egfg .Init ();_ebag ,_bbddd :=_gccab ._ffab .SelectByIndexes (_gccab ._ffcde );
if _bbddd !=nil {return 0,_df .Wrap (_bbddd ,_dgeg ,"\u0069n\u0069\u0074\u0069\u0061\u006c");};_cebea :=map[*_ea .Bitmap ]int {};for _eedg ,_daabc :=range _ebag .Values {_cebea [_daabc ]=_eedg ;};_ebag .SortByHeight ();var _dagd ,_degd int ;_gbdaa ,_bbddd :=_ebag .GroupByHeight ();
if _bbddd !=nil {return 0,_df .Wrap (_bbddd ,_dgeg ,"");};for _ ,_baba :=range _gbdaa .Values {_dgcb :=_baba .Values [0].Height ;_aaaa :=_dgcb -_dagd ;if _bbddd =_egfg .EncodeInteger (_af .IADH ,_aaaa );_bbddd !=nil {return 0,_df .Wrapf (_bbddd ,_dgeg ,"\u0049\u0041\u0044\u0048\u0020\u0066\u006f\u0072\u0020\u0064\u0068\u003a \u0027\u0025\u0064\u0027",_aaaa );
};_dagd =_dgcb ;_gfba ,_eaaa :=_baba .GroupByWidth ();if _eaaa !=nil {return 0,_df .Wrapf (_eaaa ,_dgeg ,"\u0068\u0065\u0069g\u0068\u0074\u003a\u0020\u0027\u0025\u0064\u0027",_dgcb );};var _aead int ;for _ ,_gdbc :=range _gfba .Values {for _ ,_ggdb :=range _gdbc .Values {_cggd :=_ggdb .Width ;
_beae :=_cggd -_aead ;if _eaaa =_egfg .EncodeInteger (_af .IADW ,_beae );_eaaa !=nil {return 0,_df .Wrapf (_eaaa ,_dgeg ,"\u0049\u0041\u0044\u0057\u0020\u0066\u006f\u0072\u0020\u0064\u0077\u003a \u0027\u0025\u0064\u0027",_beae );};_aead +=_beae ;if _eaaa =_egfg .EncodeBitmap (_ggdb ,false );
_eaaa !=nil {return 0,_df .Wrapf (_eaaa ,_dgeg ,"H\u0065i\u0067\u0068\u0074\u003a\u0020\u0025\u0064\u0020W\u0069\u0064\u0074\u0068: \u0025\u0064",_dgcb ,_cggd );};_fgfa :=_cebea [_ggdb ];_gccab ._afeb [_fgfa ]=_degd ;_degd ++;};};if _eaaa =_egfg .EncodeOOB (_af .IADW );
_eaaa !=nil {return 0,_df .Wrap (_eaaa ,_dgeg ,"\u0049\u0041\u0044\u0057");};};if _bbddd =_egfg .EncodeInteger (_af .IAEX ,0);_bbddd !=nil {return 0,_df .Wrap (_bbddd ,_dgeg ,"\u0065\u0078p\u006f\u0072\u0074e\u0064\u0020\u0073\u0079\u006d\u0062\u006f\u006c\u0073");
};if _bbddd =_egfg .EncodeInteger (_af .IAEX ,len (_gccab ._ffcde ));_bbddd !=nil {return 0,_df .Wrap (_bbddd ,_dgeg ,"\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u006f\u0066\u0020\u0073\u0079m\u0062\u006f\u006c\u0073");};_egfg .Final ();_cebf ,_bbddd :=_egfg .WriteTo (_bgfc );
if _bbddd !=nil {return 0,_df .Wrap (_bbddd ,_dgeg ,"\u0077\u0072i\u0074\u0069\u006e\u0067 \u0065\u006ec\u006f\u0064\u0065\u0072\u0020\u0063\u006f\u006et\u0065\u0078\u0074\u0020\u0074\u006f\u0020\u0027\u0077\u0027\u0020\u0077r\u0069\u0074\u0065\u0072");
};return int (_cebf ),nil ;};func (_bcge *PatternDictionary )Init (h *Header ,r *_db .Reader )error {_bcge ._dabd =r ;return _bcge .parseHeader ();};func (_fbcaf *TextRegion )readHuffmanFlags ()error {var (_edgf int ;_ececf uint64 ;_baaad error ;);_ ,_baaad =_fbcaf ._cfgc .ReadBit ();
if _baaad !=nil {return _baaad ;};_edgf ,_baaad =_fbcaf ._cfgc .ReadBit ();if _baaad !=nil {return _baaad ;};_fbcaf .SbHuffRSize =int8 (_edgf );_ececf ,_baaad =_fbcaf ._cfgc .ReadBits (2);if _baaad !=nil {return _baaad ;};_fbcaf .SbHuffRDY =int8 (_ececf )&0xf;
_ececf ,_baaad =_fbcaf ._cfgc .ReadBits (2);if _baaad !=nil {return _baaad ;};_fbcaf .SbHuffRDX =int8 (_ececf )&0xf;_ececf ,_baaad =_fbcaf ._cfgc .ReadBits (2);if _baaad !=nil {return _baaad ;};_fbcaf .SbHuffRDHeight =int8 (_ececf )&0xf;_ececf ,_baaad =_fbcaf ._cfgc .ReadBits (2);
if _baaad !=nil {return _baaad ;};_fbcaf .SbHuffRDWidth =int8 (_ececf )&0xf;_ececf ,_baaad =_fbcaf ._cfgc .ReadBits (2);if _baaad !=nil {return _baaad ;};_fbcaf .SbHuffDT =int8 (_ececf )&0xf;_ececf ,_baaad =_fbcaf ._cfgc .ReadBits (2);if _baaad !=nil {return _baaad ;
};_fbcaf .SbHuffDS =int8 (_ececf )&0xf;_ececf ,_baaad =_fbcaf ._cfgc .ReadBits (2);if _baaad !=nil {return _baaad ;};_fbcaf .SbHuffFS =int8 (_ececf )&0xf;return nil ;};func (_egf *EndOfStripe )parseHeader ()error {_dfd ,_ff :=_egf ._cg .ReadBits (32);if _ff !=nil {return _ff ;
};_egf ._dc =int (_dfd &_f .MaxInt32 );return nil ;};const (TSymbolDictionary Type =0;TIntermediateTextRegion Type =4;TImmediateTextRegion Type =6;TImmediateLosslessTextRegion Type =7;TPatternDictionary Type =16;TIntermediateHalftoneRegion Type =20;TImmediateHalftoneRegion Type =22;
TImmediateLosslessHalftoneRegion Type =23;TIntermediateGenericRegion Type =36;TImmediateGenericRegion Type =38;TImmediateLosslessGenericRegion Type =39;TIntermediateGenericRefinementRegion Type =40;TImmediateGenericRefinementRegion Type =42;TImmediateLosslessGenericRefinementRegion Type =43;
TPageInformation Type =48;TEndOfPage Type =49;TEndOfStrip Type =50;TEndOfFile Type =51;TProfiles Type =52;TTables Type =53;TExtension Type =62;TBitmap Type =70;);func (_bcff *GenericRegion )decodeTemplate0a (_ecg ,_bcgb ,_gbgc int ,_dddg ,_fefe int )(_aga error ){const _bdc ="\u0064\u0065c\u006f\u0064\u0065T\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u0030\u0061";
var (_aaab ,_cabc int ;_eeb ,_bca int ;_gcb byte ;_dgaf int ;);if _ecg >=1{_gcb ,_aga =_bcff .Bitmap .GetByte (_fefe );if _aga !=nil {return _df .Wrap (_aga ,_bdc ,"\u006ci\u006e\u0065\u0020\u003e\u003d\u00201");};_eeb =int (_gcb );};if _ecg >=2{_gcb ,_aga =_bcff .Bitmap .GetByte (_fefe -_bcff .Bitmap .RowStride );
if _aga !=nil {return _df .Wrap (_aga ,_bdc ,"\u006ci\u006e\u0065\u0020\u003e\u003d\u00202");};_bca =int (_gcb )<<6;};_aaab =(_eeb &0xf0)|(_bca &0x3800);for _bed :=0;_bed < _gbgc ;_bed =_dgaf {var (_bff byte ;_ggd int ;);_dgaf =_bed +8;if _ceb :=_bcgb -_bed ;
_ceb > 8{_ggd =8;}else {_ggd =_ceb ;};if _ecg > 0{_eeb <<=8;if _dgaf < _bcgb {_gcb ,_aga =_bcff .Bitmap .GetByte (_fefe +1);if _aga !=nil {return _df .Wrap (_aga ,_bdc ,"\u006c\u0069\u006e\u0065\u0020\u003e\u0020\u0030");};_eeb |=int (_gcb );};};if _ecg > 1{_dgcd :=_fefe -_bcff .Bitmap .RowStride +1;
_bca <<=8;if _dgaf < _bcgb {_gcb ,_aga =_bcff .Bitmap .GetByte (_dgcd );if _aga !=nil {return _df .Wrap (_aga ,_bdc ,"\u006c\u0069\u006e\u0065\u0020\u003e\u0020\u0031");};_bca |=int (_gcb )<<6;}else {_bca |=0;};};for _bdef :=0;_bdef < _ggd ;_bdef ++{_egga :=uint (7-_bdef );
if _bcff ._agca {_cabc =_bcff .overrideAtTemplate0a (_aaab ,_bed +_bdef ,_ecg ,int (_bff ),_bdef ,int (_egga ));_bcff ._fdc .SetIndex (int32 (_cabc ));}else {_bcff ._fdc .SetIndex (int32 (_aaab ));};var _cfg int ;_cfg ,_aga =_bcff ._fabe .DecodeBit (_bcff ._fdc );
if _aga !=nil {return _df .Wrap (_aga ,_bdc ,"");};_bff |=byte (_cfg )<<_egga ;_aaab =((_aaab &0x7bf7)<<1)|_cfg |((_eeb >>_egga )&0x10)|((_bca >>_egga )&0x800);};if _gfcd :=_bcff .Bitmap .SetByte (_dddg ,_bff );_gfcd !=nil {return _df .Wrap (_gfcd ,_bdc ,"");
};_dddg ++;_fefe ++;};return nil ;};type OrganizationType uint8 ;func (_gg *GenericRefinementRegion )decodeOptimized (_edf ,_bg ,_gd ,_eab ,_cb ,_afd ,_cf int )error {var (_de error ;_egff int ;_afdd int ;);_bec :=_edf -int (_gg .ReferenceDY );if _baf :=int (-_gg .ReferenceDX );
_baf > 0{_egff =_baf ;};_dad :=_gg .ReferenceBitmap .GetByteIndex (_egff ,_bec );if _gg .ReferenceDX > 0{_afdd =int (_gg .ReferenceDX );};_ddb :=_gg .RegionBitmap .GetByteIndex (_afdd ,_edf );switch _gg .TemplateID {case 0:_de =_gg .decodeTemplate (_edf ,_bg ,_gd ,_eab ,_cb ,_afd ,_cf ,_ddb ,_bec ,_dad ,_gg ._ad );
case 1:_de =_gg .decodeTemplate (_edf ,_bg ,_gd ,_eab ,_cb ,_afd ,_cf ,_ddb ,_bec ,_dad ,_gg ._dbc );};return _de ;};func (_gefc *TableSegment )StreamReader ()*_db .Reader {return _gefc ._fcfc };func (_gaba *HalftoneRegion )GetRegionInfo ()*RegionSegment {return _gaba .RegionSegment };
func (_begg *Header )writeSegmentDataLength (_ffcg _db .BinaryWriter )(_gddf int ,_dgfcg error ){_fdac :=make ([]byte ,4);_a .BigEndian .PutUint32 (_fdac ,uint32 (_begg .SegmentDataLength ));if _gddf ,_dgfcg =_ffcg .Write (_fdac );_dgfcg !=nil {return 0,_df .Wrap (_dgfcg ,"\u0048\u0065a\u0064\u0065\u0072\u002e\u0077\u0072\u0069\u0074\u0065\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u0044\u0061\u0074\u0061\u004c\u0065ng\u0074\u0068","");
};return _gddf ,nil ;};func (_dg *GenericRefinementRegion )decodeTypicalPredictedLineTemplate0 (_fbc ,_ac ,_abd ,_acb ,_dbfe ,_ef ,_abb ,_eb ,_ggb int )error {var (_ada ,_cd ,_fac ,_ddc ,_cce ,_cdb int ;_afa byte ;_afb error ;);if _fbc > 0{_afa ,_afb =_dg .RegionBitmap .GetByte (_abb -_abd );
if _afb !=nil {return _afb ;};_fac =int (_afa );};if _eb > 0&&_eb <=_dg .ReferenceBitmap .Height {_afa ,_afb =_dg .ReferenceBitmap .GetByte (_ggb -_acb +_ef );if _afb !=nil {return _afb ;};_ddc =int (_afa )<<4;};if _eb >=0&&_eb < _dg .ReferenceBitmap .Height {_afa ,_afb =_dg .ReferenceBitmap .GetByte (_ggb +_ef );
if _afb !=nil {return _afb ;};_cce =int (_afa )<<1;};if _eb > -2&&_eb < _dg .ReferenceBitmap .Height -1{_afa ,_afb =_dg .ReferenceBitmap .GetByte (_ggb +_acb +_ef );if _afb !=nil {return _afb ;};_cdb =int (_afa );};_ada =((_fac >>5)&0x6)|((_cdb >>2)&0x30)|(_cce &0x180)|(_ddc &0xc00);
var _adea int ;for _bae :=0;_bae < _dbfe ;_bae =_adea {var _aa int ;_adea =_bae +8;var _adb int ;if _adb =_ac -_bae ;_adb > 8{_adb =8;};_fca :=_adea < _ac ;_cdd :=_adea < _dg .ReferenceBitmap .Width ;_ag :=_ef +1;if _fbc > 0{_afa =0;if _fca {_afa ,_afb =_dg .RegionBitmap .GetByte (_abb -_abd +1);
if _afb !=nil {return _afb ;};};_fac =(_fac <<8)|int (_afa );};if _eb > 0&&_eb <=_dg .ReferenceBitmap .Height {var _dbda int ;if _cdd {_afa ,_afb =_dg .ReferenceBitmap .GetByte (_ggb -_acb +_ag );if _afb !=nil {return _afb ;};_dbda =int (_afa )<<4;};_ddc =(_ddc <<8)|_dbda ;
};if _eb >=0&&_eb < _dg .ReferenceBitmap .Height {var _agb int ;if _cdd {_afa ,_afb =_dg .ReferenceBitmap .GetByte (_ggb +_ag );if _afb !=nil {return _afb ;};_agb =int (_afa )<<1;};_cce =(_cce <<8)|_agb ;};if _eb > -2&&_eb < (_dg .ReferenceBitmap .Height -1){_afa =0;
if _cdd {_afa ,_afb =_dg .ReferenceBitmap .GetByte (_ggb +_acb +_ag );if _afb !=nil {return _afb ;};};_cdb =(_cdb <<8)|int (_afa );};for _dbea :=0;_dbea < _adb ;_dbea ++{var _abbc int ;_dac :=false ;_eee :=(_ada >>4)&0x1ff;switch _eee {case 0x1ff:_dac =true ;
_abbc =1;case 0x00:_dac =true ;};if !_dac {if _dg ._dbf {_cd =_dg .overrideAtTemplate0 (_ada ,_bae +_dbea ,_fbc ,_aa ,_dbea );_dg ._fef .SetIndex (int32 (_cd ));}else {_dg ._fef .SetIndex (int32 (_ada ));};_abbc ,_afb =_dg ._cc .DecodeBit (_dg ._fef );
if _afb !=nil {return _afb ;};};_fg :=uint (7-_dbea );_aa |=_abbc <<_fg ;_ada =((_ada &0xdb6)<<1)|_abbc |(_fac >>_fg +5)&0x002|((_cdb >>_fg +2)&0x010)|((_cce >>_fg )&0x080)|((_ddc >>_fg )&0x400);};_afb =_dg .RegionBitmap .SetByte (_abb ,byte (_aa ));if _afb !=nil {return _afb ;
};_abb ++;_ggb ++;};return nil ;};func (_fgafb *TextRegion )decodeDfs ()(int64 ,error ){if _fgafb .IsHuffmanEncoded {if _fgafb .SbHuffFS ==3{if _fgafb ._fff ==nil {var _cagc error ;_fgafb ._fff ,_cagc =_fgafb .getUserTable (0);if _cagc !=nil {return 0,_cagc ;
};};return _fgafb ._fff .Decode (_fgafb ._cfgc );};_abfc ,_gbace :=_dbd .GetStandardTable (6+int (_fgafb .SbHuffFS ));if _gbace !=nil {return 0,_gbace ;};return _abfc .Decode (_fgafb ._cfgc );};_dffa ,_eaaea :=_fgafb ._gdfad .DecodeInt (_fgafb ._cegf );
if _eaaea !=nil {return 0,_eaaea ;};return int64 (_dffa ),nil ;};func (_dfdb *PageInformationSegment )CombinationOperator ()_ea .CombinationOperator {return _dfdb ._beec ;};func (_fdbf *SymbolDictionary )huffDecodeBmSize ()(int64 ,error ){if _fdbf ._cdbe ==nil {var (_ecefdf int ;
_dbde error ;);if _fdbf .SdHuffDecodeHeightSelection ==3{_ecefdf ++;};if _fdbf .SdHuffDecodeWidthSelection ==3{_ecefdf ++;};_fdbf ._cdbe ,_dbde =_fdbf .getUserTable (_ecefdf );if _dbde !=nil {return 0,_dbde ;};};return _fdbf ._cdbe .Decode (_fdbf ._ceed );
};func (_abef *TextRegion )decodeID ()(int64 ,error ){if _abef .IsHuffmanEncoded {if _abef ._adda ==nil {_eeec ,_cabgf :=_abef ._cfgc .ReadBits (byte (_abef ._gadc ));return int64 (_eeec ),_cabgf ;};return _abef ._adda .Decode (_abef ._cfgc );};return _abef ._gdfad .DecodeIAID (uint64 (_abef ._gadc ),_abef ._cgeg );
};func (_dgbc *SymbolDictionary )Init (h *Header ,r *_db .Reader )error {_dgbc .Header =h ;_dgbc ._ceed =r ;return _dgbc .parseHeader ();};func (_eef *SymbolDictionary )decodeHeightClassCollectiveBitmap (_begb int64 ,_dcdd ,_affbb uint32 )(*_ea .Bitmap ,error ){if _begb ==0{_bbgg :=_ea .New (int (_affbb ),int (_dcdd ));
var (_gdbg byte ;_bageg error ;);for _dead :=0;_dead < len (_bbgg .Data );_dead ++{_gdbg ,_bageg =_eef ._ceed .ReadByte ();if _bageg !=nil {return nil ,_bageg ;};if _bageg =_bbgg .SetByte (_dead ,_gdbg );_bageg !=nil {return nil ,_bageg ;};};return _bbgg ,nil ;
};if _eef ._ded ==nil {_eef ._ded =NewGenericRegion (_eef ._ceed );};_eef ._ded .setParameters (true ,_eef ._ceed .AbsolutePosition (),_begb ,_dcdd ,_affbb );_bbfd ,_egbbc :=_eef ._ded .GetRegionBitmap ();if _egbbc !=nil {return nil ,_egbbc ;};return _bbfd ,nil ;
};func (_egdd *GenericRefinementRegion )decodeTemplate (_caa ,_adead ,_cea ,_bfg ,_ffg ,_dab ,_gba ,_bgc ,_fed ,_efd int ,_efe templater )(_ccc error ){var (_geb ,_ege ,_dae ,_cca ,_bbb int16 ;_dfda ,_ebabe ,_aff ,_eaae int ;_feae byte ;);if _fed >=1&&(_fed -1)< _egdd .ReferenceBitmap .Height {_feae ,_ccc =_egdd .ReferenceBitmap .GetByte (_efd -_bfg );
if _ccc !=nil {return _ccc ;};_dfda =int (_feae );};if _fed >=0&&(_fed )< _egdd .ReferenceBitmap .Height {_feae ,_ccc =_egdd .ReferenceBitmap .GetByte (_efd );if _ccc !=nil {return _ccc ;};_ebabe =int (_feae );};if _fed >=-1&&(_fed +1)< _egdd .ReferenceBitmap .Height {_feae ,_ccc =_egdd .ReferenceBitmap .GetByte (_efd +_bfg );
if _ccc !=nil {return _ccc ;};_aff =int (_feae );};_efd ++;if _caa >=1{_feae ,_ccc =_egdd .RegionBitmap .GetByte (_bgc -_cea );if _ccc !=nil {return _ccc ;};_eaae =int (_feae );};_bgc ++;_facf :=_egdd .ReferenceDX %8;_efec :=6+_facf ;_ccg :=_efd %_bfg ;
if _efec >=0{if _efec < 8{_geb =int16 (_dfda >>uint (_efec ))&0x07;};if _efec < 8{_ege =int16 (_ebabe >>uint (_efec ))&0x07;};if _efec < 8{_dae =int16 (_aff >>uint (_efec ))&0x07;};if _efec ==6&&_ccg > 1{if _fed >=1&&(_fed -1)< _egdd .ReferenceBitmap .Height {_feae ,_ccc =_egdd .ReferenceBitmap .GetByte (_efd -_bfg -2);
if _ccc !=nil {return _ccc ;};_geb |=int16 (_feae <<2)&0x04;};if _fed >=0&&_fed < _egdd .ReferenceBitmap .Height {_feae ,_ccc =_egdd .ReferenceBitmap .GetByte (_efd -2);if _ccc !=nil {return _ccc ;};_ege |=int16 (_feae <<2)&0x04;};if _fed >=-1&&_fed +1< _egdd .ReferenceBitmap .Height {_feae ,_ccc =_egdd .ReferenceBitmap .GetByte (_efd +_bfg -2);
if _ccc !=nil {return _ccc ;};_dae |=int16 (_feae <<2)&0x04;};};if _efec ==0{_dfda =0;_ebabe =0;_aff =0;if _ccg < _bfg -1{if _fed >=1&&_fed -1< _egdd .ReferenceBitmap .Height {_feae ,_ccc =_egdd .ReferenceBitmap .GetByte (_efd -_bfg );if _ccc !=nil {return _ccc ;
};_dfda =int (_feae );};if _fed >=0&&_fed < _egdd .ReferenceBitmap .Height {_feae ,_ccc =_egdd .ReferenceBitmap .GetByte (_efd );if _ccc !=nil {return _ccc ;};_ebabe =int (_feae );};if _fed >=-1&&_fed +1< _egdd .ReferenceBitmap .Height {_feae ,_ccc =_egdd .ReferenceBitmap .GetByte (_efd +_bfg );
if _ccc !=nil {return _ccc ;};_aff =int (_feae );};};_efd ++;};}else {_geb =int16 (_dfda <<1)&0x07;_ege =int16 (_ebabe <<1)&0x07;_dae =int16 (_aff <<1)&0x07;_dfda =0;_ebabe =0;_aff =0;if _ccg < _bfg -1{if _fed >=1&&_fed -1< _egdd .ReferenceBitmap .Height {_feae ,_ccc =_egdd .ReferenceBitmap .GetByte (_efd -_bfg );
if _ccc !=nil {return _ccc ;};_dfda =int (_feae );};if _fed >=0&&_fed < _egdd .ReferenceBitmap .Height {_feae ,_ccc =_egdd .ReferenceBitmap .GetByte (_efd );if _ccc !=nil {return _ccc ;};_ebabe =int (_feae );};if _fed >=-1&&_fed +1< _egdd .ReferenceBitmap .Height {_feae ,_ccc =_egdd .ReferenceBitmap .GetByte (_efd +_bfg );
if _ccc !=nil {return _ccc ;};_aff =int (_feae );};_efd ++;};_geb |=int16 ((_dfda >>7)&0x07);_ege |=int16 ((_ebabe >>7)&0x07);_dae |=int16 ((_aff >>7)&0x07);};_cca =int16 (_eaae >>6);_bbb =0;_bc :=(2-_facf )%8;_dfda <<=uint (_bc );_ebabe <<=uint (_bc );
_aff <<=uint (_bc );_eaae <<=2;var _eca int ;for _adg :=0;_adg < _adead ;_adg ++{_dcg :=_adg &0x07;_gae :=_efe .form (_geb ,_ege ,_dae ,_cca ,_bbb );if _egdd ._dbf {_feae ,_ccc =_egdd .RegionBitmap .GetByte (_egdd .RegionBitmap .GetByteIndex (_adg ,_caa ));
if _ccc !=nil {return _ccc ;};_egdd ._fef .SetIndex (int32 (_egdd .overrideAtTemplate0 (int (_gae ),_adg ,_caa ,int (_feae ),_dcg )));}else {_egdd ._fef .SetIndex (int32 (_gae ));};_eca ,_ccc =_egdd ._cc .DecodeBit (_egdd ._fef );if _ccc !=nil {return _ccc ;
};if _ccc =_egdd .RegionBitmap .SetPixel (_adg ,_caa ,byte (_eca ));_ccc !=nil {return _ccc ;};_geb =((_geb <<1)|0x01&int16 (_dfda >>7))&0x07;_ege =((_ege <<1)|0x01&int16 (_ebabe >>7))&0x07;_dae =((_dae <<1)|0x01&int16 (_aff >>7))&0x07;_cca =((_cca <<1)|0x01&int16 (_eaae >>7))&0x07;
_bbb =int16 (_eca );if (_adg -int (_egdd .ReferenceDX ))%8==5{_dfda =0;_ebabe =0;_aff =0;if ((_adg -int (_egdd .ReferenceDX ))/8)+1< _egdd .ReferenceBitmap .RowStride {if _fed >=1&&(_fed -1)< _egdd .ReferenceBitmap .Height {_feae ,_ccc =_egdd .ReferenceBitmap .GetByte (_efd -_bfg );
if _ccc !=nil {return _ccc ;};_dfda =int (_feae );};if _fed >=0&&_fed < _egdd .ReferenceBitmap .Height {_feae ,_ccc =_egdd .ReferenceBitmap .GetByte (_efd );if _ccc !=nil {return _ccc ;};_ebabe =int (_feae );};if _fed >=-1&&(_fed +1)< _egdd .ReferenceBitmap .Height {_feae ,_ccc =_egdd .ReferenceBitmap .GetByte (_efd +_bfg );
if _ccc !=nil {return _ccc ;};_aff =int (_feae );};};_efd ++;}else {_dfda <<=1;_ebabe <<=1;_aff <<=1;};if _dcg ==5&&_caa >=1{if ((_adg >>3)+1)>=_egdd .RegionBitmap .RowStride {_eaae =0;}else {_feae ,_ccc =_egdd .RegionBitmap .GetByte (_bgc -_cea );if _ccc !=nil {return _ccc ;
};_eaae =int (_feae );};_bgc ++;}else {_eaae <<=1;};};return nil ;};func (_deff *TextRegion )initSymbols ()error {const _gaca ="i\u006e\u0069\u0074\u0053\u0079\u006d\u0062\u006f\u006c\u0073";for _ ,_ecefc :=range _deff .Header .RTSegments {if _ecefc ==nil {return _df .Error (_gaca ,"\u006e\u0069\u006c\u0020\u0073\u0065\u0067\u006de\u006e\u0074\u0020pr\u006f\u0076\u0069\u0064\u0065\u0064 \u0066\u006f\u0072\u0020\u0074\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u0072\u0065g\u0069\u006f\u006e\u0020\u0053\u0079\u006d\u0062o\u006c\u0073");
};if _ecefc .Type ==0{_dcgg ,_bbbd :=_ecefc .GetSegmentData ();if _bbbd !=nil {return _df .Wrap (_bbbd ,_gaca ,"");};_cfabg ,_aeec :=_dcgg .(*SymbolDictionary );if !_aeec {return _df .Error (_gaca ,"\u0072e\u0066\u0065r\u0072\u0065\u0064 \u0054\u006f\u0020\u0053\u0065\u0067\u006de\u006e\u0074\u0020\u0069\u0073\u0020n\u006f\u0074\u0020\u0061\u0020\u0053\u0079\u006d\u0062\u006f\u006cD\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_cfabg ._daed =_deff ._cgeg ;_acdff ,_bbbd :=_cfabg .GetDictionary ();if _bbbd !=nil {return _df .Wrap (_bbbd ,_gaca ,"");};_deff .Symbols =append (_deff .Symbols ,_acdff ...);};};_deff .NumberOfSymbols =uint32 (len (_deff .Symbols ));return nil ;};func (_bfdg *GenericRegion )computeSegmentDataStructure ()error {_bfdg .DataOffset =_bfdg ._dgc .AbsolutePosition ();
_bfdg .DataHeaderLength =_bfdg .DataOffset -_bfdg .DataHeaderOffset ;_bfdg .DataLength =int64 (_bfdg ._dgc .AbsoluteLength ())-_bfdg .DataHeaderLength ;return nil ;};func (_afed *GenericRegion )decodeTemplate1 (_bbad ,_acg ,_efg int ,_gcd ,_gea int )(_addd error ){const _gcbe ="\u0064e\u0063o\u0064\u0065\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u0031";
var (_bfgb ,_bffa int ;_fcf ,_aaf int ;_aea byte ;_deca ,_bcgf int ;);if _bbad >=1{_aea ,_addd =_afed .Bitmap .GetByte (_gea );if _addd !=nil {return _df .Wrap (_addd ,_gcbe ,"\u006ci\u006e\u0065\u0020\u003e\u003d\u00201");};_fcf =int (_aea );};if _bbad >=2{_aea ,_addd =_afed .Bitmap .GetByte (_gea -_afed .Bitmap .RowStride );
if _addd !=nil {return _df .Wrap (_addd ,_gcbe ,"\u006ci\u006e\u0065\u0020\u003e\u003d\u00202");};_aaf =int (_aea )<<5;};_bfgb =((_fcf >>1)&0x1f8)|((_aaf >>1)&0x1e00);for _dacd :=0;_dacd < _efg ;_dacd =_deca {var (_fabg byte ;_cee int ;);_deca =_dacd +8;
if _gedc :=_acg -_dacd ;_gedc > 8{_cee =8;}else {_cee =_gedc ;};if _bbad > 0{_fcf <<=8;if _deca < _acg {_aea ,_addd =_afed .Bitmap .GetByte (_gea +1);if _addd !=nil {return _df .Wrap (_addd ,_gcbe ,"\u006c\u0069\u006e\u0065\u0020\u003e\u0020\u0030");};
_fcf |=int (_aea );};};if _bbad > 1{_aaf <<=8;if _deca < _acg {_aea ,_addd =_afed .Bitmap .GetByte (_gea -_afed .Bitmap .RowStride +1);if _addd !=nil {return _df .Wrap (_addd ,_gcbe ,"\u006c\u0069\u006e\u0065\u0020\u003e\u0020\u0031");};_aaf |=int (_aea )<<5;
};};for _bbbe :=0;_bbbe < _cee ;_bbbe ++{if _afed ._agca {_bffa =_afed .overrideAtTemplate1 (_bfgb ,_dacd +_bbbe ,_bbad ,int (_fabg ),_bbbe );_afed ._fdc .SetIndex (int32 (_bffa ));}else {_afed ._fdc .SetIndex (int32 (_bfgb ));};_bcgf ,_addd =_afed ._fabe .DecodeBit (_afed ._fdc );
if _addd !=nil {return _df .Wrap (_addd ,_gcbe ,"");};_fabg |=byte (_bcgf )<<uint (7-_bbbe );_feab :=uint (8-_bbbe );_bfgb =((_bfgb &0xefb)<<1)|_bcgf |((_fcf >>_feab )&0x8)|((_aaf >>_feab )&0x200);};if _cgbc :=_afed .Bitmap .SetByte (_gcd ,_fabg );_cgbc !=nil {return _df .Wrap (_cgbc ,_gcbe ,"");
};_gcd ++;_gea ++;};return nil ;};func (_ggfa *HalftoneRegion )renderPattern (_efgb [][]int )(_cgee error ){var _fedd ,_bggd int ;for _fda :=0;_fda < int (_ggfa .HGridHeight );_fda ++{for _cagg :=0;_cagg < int (_ggfa .HGridWidth );_cagg ++{_fedd =_ggfa .computeX (_fda ,_cagg );
_bggd =_ggfa .computeY (_fda ,_cagg );_edcb :=_ggfa .Patterns [_efgb [_fda ][_cagg ]];if _cgee =_ea .Blit (_edcb ,_ggfa .HalftoneRegionBitmap ,_fedd +int (_ggfa .HGridX ),_bggd +int (_ggfa .HGridY ),_ggfa .CombinationOperator );_cgee !=nil {return _cgee ;
};};};return nil ;};func (_dbaf *Header )readNumberOfReferredToSegments (_fdd *_db .Reader )(uint64 ,error ){const _cfdcf ="\u0072\u0065\u0061\u0064\u004e\u0075\u006d\u0062\u0065\u0072O\u0066\u0052\u0065\u0066\u0065\u0072\u0072e\u0064\u0054\u006f\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u0073";
_cfeg ,_bcgfc :=_fdd .ReadBits (3);if _bcgfc !=nil {return 0,_df .Wrap (_bcgfc ,_cfdcf ,"\u0063\u006f\u0075n\u0074\u0020\u006f\u0066\u0020\u0072\u0074\u0073");};_cfeg &=0xf;var _fddc []byte ;if _cfeg <=4{_fddc =make ([]byte ,5);for _fbd :=0;_fbd <=4;_fbd ++{_afdf ,_egfd :=_fdd .ReadBit ();
if _egfd !=nil {return 0,_df .Wrap (_egfd ,_cfdcf ,"\u0073\u0068\u006fr\u0074\u0020\u0066\u006f\u0072\u006d\u0061\u0074");};_fddc [_fbd ]=byte (_afdf );};}else {_cfeg ,_bcgfc =_fdd .ReadBits (29);if _bcgfc !=nil {return 0,_bcgfc ;};_cfeg &=_f .MaxInt32 ;
_fdgf :=(_cfeg +8)>>3;_fdgf <<=3;_fddc =make ([]byte ,_fdgf );var _ebfg uint64 ;for _ebfg =0;_ebfg < _fdgf ;_ebfg ++{_fcdf ,_egee :=_fdd .ReadBit ();if _egee !=nil {return 0,_df .Wrap (_egee ,_cfdcf ,"l\u006f\u006e\u0067\u0020\u0066\u006f\u0072\u006d\u0061\u0074");
};_fddc [_ebfg ]=byte (_fcdf );};};return _cfeg ,nil ;};func (_agg *GenericRefinementRegion )parseHeader ()(_cag error ){_c .Log .Trace ("\u005b\u0047\u0045\u004e\u0045\u0052\u0049\u0043\u002d\u0052\u0045\u0046\u002d\u0052\u0045\u0047\u0049\u004f\u004e\u005d\u0020\u0070\u0061\u0072s\u0069\u006e\u0067\u0020\u0048e\u0061\u0064e\u0072\u002e\u002e\u002e");
_edc :=_g .Now ();defer func (){if _cag ==nil {_c .Log .Trace ("\u005b\u0047\u0045\u004e\u0045\u0052\u0049\u0043\u002d\u0052\u0045\u0046\u002d\u0052\u0045G\u0049\u004f\u004e\u005d\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020h\u0065\u0061\u0064\u0065\u0072\u0020\u0066\u0069\u006e\u0069\u0073\u0068id\u0020\u0069\u006e\u003a\u0020\u0025\u0064\u0020\u006e\u0073",_g .Since (_edc ).Nanoseconds ());
}else {_c .Log .Trace ("\u005b\u0047E\u004e\u0045\u0052\u0049\u0043\u002d\u0052\u0045\u0046\u002d\u0052\u0045\u0047\u0049\u004f\u004e\u005d\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0061\u0064\u0065\u0072\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u003a\u0020\u0025\u0073",_cag );
};}();if _cag =_agg .RegionInfo .parseHeader ();_cag !=nil {return _cag ;};_ ,_cag =_agg ._ega .ReadBits (6);if _cag !=nil {return _cag ;};_agg .IsTPGROn ,_cag =_agg ._ega .ReadBool ();if _cag !=nil {return _cag ;};var _aba int ;_aba ,_cag =_agg ._ega .ReadBit ();
if _cag !=nil {return _cag ;};_agg .TemplateID =int8 (_aba );switch _agg .TemplateID {case 0:_agg .Template =_agg ._ad ;if _cag =_agg .readAtPixels ();_cag !=nil {return _cag ;};case 1:_agg .Template =_agg ._dbc ;};return nil ;};func (_ffeg *TextRegion )decodeRdh ()(int64 ,error ){const _eeda ="\u0064e\u0063\u006f\u0064\u0065\u0052\u0064h";
if _ffeg .IsHuffmanEncoded {if _ffeg .SbHuffRDHeight ==3{if _ffeg ._dcddc ==nil {var (_afbf int ;_ebbg error ;);if _ffeg .SbHuffFS ==3{_afbf ++;};if _ffeg .SbHuffDS ==3{_afbf ++;};if _ffeg .SbHuffDT ==3{_afbf ++;};if _ffeg .SbHuffRDWidth ==3{_afbf ++;};
_ffeg ._dcddc ,_ebbg =_ffeg .getUserTable (_afbf );if _ebbg !=nil {return 0,_df .Wrap (_ebbg ,_eeda ,"");};};return _ffeg ._dcddc .Decode (_ffeg ._cfgc );};_afbfd ,_cdaa :=_dbd .GetStandardTable (14+int (_ffeg .SbHuffRDHeight ));if _cdaa !=nil {return 0,_df .Wrap (_cdaa ,_eeda ,"");
};return _afbfd .Decode (_ffeg ._cfgc );};_cebc ,_dfdcb :=_ffeg ._gdfad .DecodeInt (_ffeg ._bgad );if _dfdcb !=nil {return 0,_df .Wrap (_dfdcb ,_eeda ,"");};return int64 (_cebc ),nil ;};func (_gdcb *SymbolDictionary )readRefinementAtPixels (_adcb int )error {_gdcb .SdrATX =make ([]int8 ,_adcb );
_gdcb .SdrATY =make ([]int8 ,_adcb );var (_cddf byte ;_gebe error ;);for _bdcf :=0;_bdcf < _adcb ;_bdcf ++{_cddf ,_gebe =_gdcb ._ceed .ReadByte ();if _gebe !=nil {return _gebe ;};_gdcb .SdrATX [_bdcf ]=int8 (_cddf );_cddf ,_gebe =_gdcb ._ceed .ReadByte ();
if _gebe !=nil {return _gebe ;};_gdcb .SdrATY [_bdcf ]=int8 (_cddf );};return nil ;};func (_cbee *Header )parse (_edbd Documenter ,_gfeg *_db .Reader ,_daae int64 ,_gcfd OrganizationType )(_cda error ){const _afec ="\u0070\u0061\u0072s\u0065";_c .Log .Trace ("\u005b\u0053\u0045\u0047\u004d\u0045\u004e\u0054\u002d\u0048E\u0041\u0044\u0045\u0052\u005d\u005b\u0050A\u0052\u0053\u0045\u005d\u0020\u0042\u0065\u0067\u0069\u006e\u0073");
defer func (){if _cda !=nil {_c .Log .Trace ("\u005b\u0053\u0045GM\u0045\u004e\u0054\u002d\u0048\u0045\u0041\u0044\u0045R\u005d[\u0050A\u0052S\u0045\u005d\u0020\u0046\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0025\u0076",_cda );}else {_c .Log .Trace ("\u005b\u0053\u0045\u0047\u004d\u0045\u004e\u0054\u002d\u0048\u0045\u0041\u0044\u0045\u0052]\u005bP\u0041\u0052\u0053\u0045\u005d\u0020\u0046\u0069\u006e\u0069\u0073\u0068\u0065\u0064");
};}();_ ,_cda =_gfeg .Seek (_daae ,_fa .SeekStart );if _cda !=nil {return _df .Wrap (_cda ,_afec ,"\u0073\u0065\u0065\u006b\u0020\u0073\u0074\u0061\u0072\u0074");};if _cda =_cbee .readSegmentNumber (_gfeg );_cda !=nil {return _df .Wrap (_cda ,_afec ,"");
};if _cda =_cbee .readHeaderFlags ();_cda !=nil {return _df .Wrap (_cda ,_afec ,"");};var _fbe uint64 ;_fbe ,_cda =_cbee .readNumberOfReferredToSegments (_gfeg );if _cda !=nil {return _df .Wrap (_cda ,_afec ,"");};_cbee .RTSNumbers ,_cda =_cbee .readReferredToSegmentNumbers (_gfeg ,int (_fbe ));
if _cda !=nil {return _df .Wrap (_cda ,_afec ,"");};_cda =_cbee .readSegmentPageAssociation (_edbd ,_gfeg ,_fbe ,_cbee .RTSNumbers ...);if _cda !=nil {return _df .Wrap (_cda ,_afec ,"");};if _cbee .Type !=TEndOfFile {if _cda =_cbee .readSegmentDataLength (_gfeg );
_cda !=nil {return _df .Wrap (_cda ,_afec ,"");};};_cbee .readDataStartOffset (_gfeg ,_gcfd );_cbee .readHeaderLength (_gfeg ,_daae );_c .Log .Trace ("\u0025\u0073",_cbee );return nil ;};func (_febd *TextRegion )readRegionFlags ()error {var (_bagd int ;
_babg uint64 ;_dgafd error ;);_bagd ,_dgafd =_febd ._cfgc .ReadBit ();if _dgafd !=nil {return _dgafd ;};_febd .SbrTemplate =int8 (_bagd );_babg ,_dgafd =_febd ._cfgc .ReadBits (5);if _dgafd !=nil {return _dgafd ;};_febd .SbDsOffset =int8 (_babg );if _febd .SbDsOffset > 0x0f{_febd .SbDsOffset -=0x20;
};_bagd ,_dgafd =_febd ._cfgc .ReadBit ();if _dgafd !=nil {return _dgafd ;};_febd .DefaultPixel =int8 (_bagd );_babg ,_dgafd =_febd ._cfgc .ReadBits (2);if _dgafd !=nil {return _dgafd ;};_febd .CombinationOperator =_ea .CombinationOperator (int (_babg )&0x3);
_bagd ,_dgafd =_febd ._cfgc .ReadBit ();if _dgafd !=nil {return _dgafd ;};_febd .IsTransposed =int8 (_bagd );_babg ,_dgafd =_febd ._cfgc .ReadBits (2);if _dgafd !=nil {return _dgafd ;};_febd .ReferenceCorner =int16 (_babg )&0x3;_babg ,_dgafd =_febd ._cfgc .ReadBits (2);
if _dgafd !=nil {return _dgafd ;};_febd .LogSBStrips =int16 (_babg )&0x3;_febd .SbStrips =1<<uint (_febd .LogSBStrips );_bagd ,_dgafd =_febd ._cfgc .ReadBit ();if _dgafd !=nil {return _dgafd ;};if _bagd ==1{_febd .UseRefinement =true ;};_bagd ,_dgafd =_febd ._cfgc .ReadBit ();
if _dgafd !=nil {return _dgafd ;};if _bagd ==1{_febd .IsHuffmanEncoded =true ;};return nil ;};func (_febb *TableSegment )Init (h *Header ,r *_db .Reader )error {_febb ._fcfc =r ;return _febb .parseHeader ();};func (_cfacd *SymbolDictionary )decodeHeightClassDeltaHeightWithHuffman ()(int64 ,error ){switch _cfacd .SdHuffDecodeHeightSelection {case 0:_gfcc ,_agabb :=_dbd .GetStandardTable (4);
if _agabb !=nil {return 0,_agabb ;};return _gfcc .Decode (_cfacd ._ceed );case 1:_dbg ,_affb :=_dbd .GetStandardTable (5);if _affb !=nil {return 0,_affb ;};return _dbg .Decode (_cfacd ._ceed );case 3:if _cfacd ._gfgba ==nil {_abab ,_beafg :=_dbd .GetStandardTable (0);
if _beafg !=nil {return 0,_beafg ;};_cfacd ._gfgba =_abab ;};return _cfacd ._gfgba .Decode (_cfacd ._ceed );};return 0,nil ;};func (_dbdc *PageInformationSegment )readMaxStripeSize ()error {_bege ,_bfef :=_dbdc ._dfag .ReadBits (15);if _bfef !=nil {return _bfef ;
};_dbdc .MaxStripeSize =uint16 (_bege &_f .MaxUint16 );return nil ;};func (_cdbb *TextRegion )decodeSymbolInstances ()error {_egcfb ,_cagf :=_cdbb .decodeStripT ();if _cagf !=nil {return _cagf ;};var (_gacc int64 ;_cdbc uint32 ;);for _cdbc < _cdbb .NumberOfSymbolInstances {_ccca ,_cfgca :=_cdbb .decodeDT ();
if _cfgca !=nil {return _cfgca ;};_egcfb +=_ccca ;var _bddcg int64 ;_geae :=true ;_cdbb ._cfff =0;for {if _geae {_bddcg ,_cfgca =_cdbb .decodeDfs ();if _cfgca !=nil {return _cfgca ;};_gacc +=_bddcg ;_cdbb ._cfff =_gacc ;_geae =false ;}else {_abbg ,_eedc :=_cdbb .decodeIds ();
if _eg .Is (_eedc ,_dd .ErrOOB ){break ;};if _eedc !=nil {return _eedc ;};if _cdbc >=_cdbb .NumberOfSymbolInstances {break ;};_cdbb ._cfff +=_abbg +int64 (_cdbb .SbDsOffset );};_ecbc ,_cabb :=_cdbb .decodeCurrentT ();if _cabb !=nil {return _cabb ;};_edbac :=_egcfb +_ecbc ;
_fege ,_cabb :=_cdbb .decodeID ();if _cabb !=nil {return _cabb ;};_dgaba ,_cabb :=_cdbb .decodeRI ();if _cabb !=nil {return _cabb ;};_gecb ,_cabb :=_cdbb .decodeIb (_dgaba ,_fege );if _cabb !=nil {return _cabb ;};if _cabb =_cdbb .blit (_gecb ,_edbac );
_cabb !=nil {return _cabb ;};_cdbc ++;};};return nil ;};func (_cege *HalftoneRegion )GetPatterns ()([]*_ea .Bitmap ,error ){var (_acec []*_ea .Bitmap ;_dged error ;);for _ ,_eeeb :=range _cege ._gacb .RTSegments {var _ecac Segmenter ;_ecac ,_dged =_eeeb .GetSegmentData ();
if _dged !=nil {_c .Log .Debug ("\u0047e\u0074\u0053\u0065\u0067m\u0065\u006e\u0074\u0044\u0061t\u0061 \u0066a\u0069\u006c\u0065\u0064\u003a\u0020\u0025v",_dged );return nil ,_dged ;};_fdcg ,_fdg :=_ecac .(*PatternDictionary );if !_fdg {_dged =_d .Errorf ("\u0072e\u006c\u0061t\u0065\u0064\u0020\u0073e\u0067\u006d\u0065n\u0074\u0020\u006e\u006f\u0074\u0020\u0061\u0020\u0070at\u0074\u0065\u0072n\u0020\u0064i\u0063\u0074\u0069\u006f\u006e\u0061r\u0079\u003a \u0025\u0054",_ecac );
return nil ,_dged ;};var _gddb []*_ea .Bitmap ;_gddb ,_dged =_fdcg .GetDictionary ();if _dged !=nil {_c .Log .Debug ("\u0070\u0061\u0074\u0074\u0065\u0072\u006e\u0020\u0047\u0065\u0074\u0044\u0069\u0063\u0074i\u006fn\u0061\u0072\u0079\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u003a\u0020\u0025\u0076",_dged );
return nil ,_dged ;};_acec =append (_acec ,_gddb ...);};return _acec ,nil ;};func (_efbb *TextRegion )Init (header *Header ,r *_db .Reader )error {_efbb .Header =header ;_efbb ._cfgc =r ;_efbb .RegionInfo =NewRegionSegment (_efbb ._cfgc );return _efbb .parseHeader ();
};func (_egef *template0 )setIndex (_gec *_dbe .DecoderStats ){_gec .SetIndex (0x100)};func (_cdad *Header )readSegmentPageAssociation (_dfcf Documenter ,_feac *_db .Reader ,_adad uint64 ,_eac ...int )(_agcb error ){const _gcca ="\u0072\u0065\u0061\u0064\u0053\u0065\u0067\u006d\u0065\u006e\u0074P\u0061\u0067\u0065\u0041\u0073\u0073\u006f\u0063\u0069\u0061t\u0069\u006f\u006e";
if !_cdad .PageAssociationFieldSize {_baaa ,_abce :=_feac .ReadBits (8);if _abce !=nil {return _df .Wrap (_abce ,_gcca ,"\u0073\u0068\u006fr\u0074\u0020\u0066\u006f\u0072\u006d\u0061\u0074");};_cdad .PageAssociation =int (_baaa &0xFF);}else {_fdbe ,_dece :=_feac .ReadBits (32);
if _dece !=nil {return _df .Wrap (_dece ,_gcca ,"l\u006f\u006e\u0067\u0020\u0066\u006f\u0072\u006d\u0061\u0074");};_cdad .PageAssociation =int (_fdbe &_f .MaxInt32 );};if _adad ==0{return nil ;};if _cdad .PageAssociation !=0{_eeg ,_cfegb :=_dfcf .GetPage (_cdad .PageAssociation );
if _cfegb !=nil {return _df .Wrap (_cfegb ,_gcca ,"\u0061s\u0073\u006f\u0063\u0069a\u0074\u0065\u0064\u0020\u0070a\u0067e\u0020n\u006f\u0074\u0020\u0066\u006f\u0075\u006ed");};var _ddbbe int ;for _fbce :=uint64 (0);_fbce < _adad ;_fbce ++{_ddbbe =_eac [_fbce ];
_cdad .RTSegments [_fbce ],_cfegb =_eeg .GetSegment (_ddbbe );if _cfegb !=nil {var _cddg error ;_cdad .RTSegments [_fbce ],_cddg =_dfcf .GetGlobalSegment (_ddbbe );if _cddg !=nil {return _df .Wrapf (_cfegb ,_gcca ,"\u0072\u0065\u0066\u0065\u0072\u0065n\u0063\u0065\u0020s\u0065\u0067\u006de\u006e\u0074\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0020\u0061\u0074\u0020pa\u0067\u0065\u003a\u0020\u0027\u0025\u0064\u0027\u0020\u006e\u006f\u0072\u0020\u0069\u006e\u0020\u0067\u006c\u006f\u0062\u0061\u006c\u0073",_cdad .PageAssociation );
};};};return nil ;};for _fgfd :=uint64 (0);_fgfd < _adad ;_fgfd ++{_cdad .RTSegments [_fgfd ],_agcb =_dfcf .GetGlobalSegment (_eac [_fgfd ]);if _agcb !=nil {return _df .Wrapf (_agcb ,_gcca ,"\u0067\u006c\u006f\u0062\u0061\u006c\u0020\u0073\u0065\u0067m\u0065\u006e\u0074\u003a\u0020\u0027\u0025d\u0027\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064",_eac [_fgfd ]);
};};return nil ;};func (_efed *TextRegion )checkInput ()error {const _cgad ="\u0063\u0068\u0065\u0063\u006b\u0049\u006e\u0070\u0075\u0074";if !_efed .UseRefinement {if _efed .SbrTemplate !=0{_c .Log .Debug ("\u0053\u0062\u0072Te\u006d\u0070\u006c\u0061\u0074\u0065\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0030");
_efed .SbrTemplate =0;};};if _efed .SbHuffFS ==2||_efed .SbHuffRDWidth ==2||_efed .SbHuffRDHeight ==2||_efed .SbHuffRDX ==2||_efed .SbHuffRDY ==2{return _df .Error (_cgad ,"h\u0075\u0066\u0066\u006d\u0061\u006e \u0066\u006c\u0061\u0067\u0020\u0076a\u006c\u0075\u0065\u0020\u0069\u0073\u0020n\u006f\u0074\u0020\u0070\u0065\u0072\u006d\u0069\u0074\u0074e\u0064");
};if !_efed .UseRefinement {if _efed .SbHuffRSize !=0{_c .Log .Debug ("\u0053\u0062\u0048uf\u0066\u0052\u0053\u0069\u007a\u0065\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0030");_efed .SbHuffRSize =0;};if _efed .SbHuffRDY !=0{_c .Log .Debug ("S\u0062\u0048\u0075\u0066fR\u0044Y\u0020\u0073\u0068\u006f\u0075l\u0064\u0020\u0062\u0065\u0020\u0030");
_efed .SbHuffRDY =0;};if _efed .SbHuffRDX !=0{_c .Log .Debug ("S\u0062\u0048\u0075\u0066fR\u0044X\u0020\u0073\u0068\u006f\u0075l\u0064\u0020\u0062\u0065\u0020\u0030");_efed .SbHuffRDX =0;};if _efed .SbHuffRDWidth !=0{_c .Log .Debug ("\u0053b\u0048\u0075\u0066\u0066R\u0044\u0057\u0069\u0064\u0074h\u0020s\u0068o\u0075\u006c\u0064\u0020\u0062\u0065\u00200");
_efed .SbHuffRDWidth =0;};if _efed .SbHuffRDHeight !=0{_c .Log .Debug ("\u0053\u0062\u0048\u0075\u0066\u0066\u0052\u0044\u0048\u0065\u0069g\u0068\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020b\u0065\u0020\u0030");_efed .SbHuffRDHeight =0;};};return nil ;
};func (_dcdf *TextRegion )decodeIds ()(int64 ,error ){const _bbee ="\u0064e\u0063\u006f\u0064\u0065\u0049\u0064s";if _dcdf .IsHuffmanEncoded {if _dcdf .SbHuffDS ==3{if _dcdf ._gfdb ==nil {_dbdadg :=0;if _dcdf .SbHuffFS ==3{_dbdadg ++;};var _afcg error ;
_dcdf ._gfdb ,_afcg =_dcdf .getUserTable (_dbdadg );if _afcg !=nil {return 0,_df .Wrap (_afcg ,_bbee ,"");};};return _dcdf ._gfdb .Decode (_dcdf ._cfgc );};_dddcf ,_cacg :=_dbd .GetStandardTable (8+int (_dcdf .SbHuffDS ));if _cacg !=nil {return 0,_df .Wrap (_cacg ,_bbee ,"");
};return _dddcf .Decode (_dcdf ._cfgc );};_debc ,_fffdd :=_dcdf ._gdfad .DecodeInt (_dcdf ._aaaaf );if _fffdd !=nil {return 0,_df .Wrap (_fffdd ,_bbee ,"\u0063\u0078\u0049\u0041\u0044\u0053");};return int64 (_debc ),nil ;};const (ORandom OrganizationType =iota ;
OSequential ;);func (_bbdf *SymbolDictionary )Encode (w _db .BinaryWriter )(_deec int ,_bccba error ){const _geaf ="\u0053\u0079\u006dbo\u006c\u0044\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u002e\u0045\u006e\u0063\u006f\u0064\u0065";if _bbdf ==nil {return 0,_df .Error (_geaf ,"\u0073\u0079m\u0062\u006f\u006c\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u006e\u006f\u0074\u0020\u0064\u0065\u0066in\u0065\u0064");
};if _deec ,_bccba =_bbdf .encodeFlags (w );_bccba !=nil {return _deec ,_df .Wrap (_bccba ,_geaf ,"");};_afag ,_bccba :=_bbdf .encodeATFlags (w );if _bccba !=nil {return _deec ,_df .Wrap (_bccba ,_geaf ,"");};_deec +=_afag ;if _afag ,_bccba =_bbdf .encodeRefinementATFlags (w );
_bccba !=nil {return _deec ,_df .Wrap (_bccba ,_geaf ,"");};_deec +=_afag ;if _afag ,_bccba =_bbdf .encodeNumSyms (w );_bccba !=nil {return _deec ,_df .Wrap (_bccba ,_geaf ,"");};_deec +=_afag ;if _afag ,_bccba =_bbdf .encodeSymbols (w );_bccba !=nil {return _deec ,_df .Wrap (_bccba ,_geaf ,"");
};_deec +=_afag ;return _deec ,nil ;};func (_ee *GenericRefinementRegion )decodeTypicalPredictedLine (_fc ,_cff ,_egbb ,_add ,_gf ,_gfd int )error {_dee :=_fc -int (_ee .ReferenceDY );_ce :=_ee .ReferenceBitmap .GetByteIndex (0,_dee );_cfe :=_ee .RegionBitmap .GetByteIndex (0,_fc );
var _bgb error ;switch _ee .TemplateID {case 0:_bgb =_ee .decodeTypicalPredictedLineTemplate0 (_fc ,_cff ,_egbb ,_add ,_gf ,_gfd ,_cfe ,_dee ,_ce );case 1:_bgb =_ee .decodeTypicalPredictedLineTemplate1 (_fc ,_cff ,_egbb ,_add ,_gf ,_gfd ,_cfe ,_dee ,_ce );
};return _bgb ;};func (_dbcc *TableSegment )HtPS ()int32 {return _dbcc ._fabeb };func (_aada *TextRegion )readAmountOfSymbolInstances ()error {_gada ,_fgaa :=_aada ._cfgc .ReadBits (32);if _fgaa !=nil {return _fgaa ;};_aada .NumberOfSymbolInstances =uint32 (_gada &_f .MaxUint32 );
_fdfdc :=_aada .RegionInfo .BitmapWidth *_aada .RegionInfo .BitmapHeight ;if _fdfdc < _aada .NumberOfSymbolInstances {_c .Log .Debug ("\u004c\u0069\u006d\u0069t\u0069\u006e\u0067\u0020t\u0068\u0065\u0020n\u0075\u006d\u0062\u0065\u0072\u0020o\u0066\u0020d\u0065\u0063\u006f\u0064e\u0064\u0020\u0073\u0079m\u0062\u006f\u006c\u0020\u0069n\u0073\u0074\u0061\u006e\u0063\u0065\u0073 \u0074\u006f\u0020\u006f\u006ee\u0020\u0070\u0065\u0072\u0020\u0070\u0069\u0078\u0065l\u0020\u0028\u0020\u0025\u0064\u0020\u0069\u006e\u0073\u0074\u0065\u0061\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0029",_fdfdc ,_aada .NumberOfSymbolInstances );
_aada .NumberOfSymbolInstances =_fdfdc ;};return nil ;};func (_cfd *GenericRefinementRegion )setParameters (_gda *_dbe .DecoderStats ,_agc *_dbe .Decoder ,_acd int8 ,_ffe ,_agga uint32 ,_ggg *_ea .Bitmap ,_dca ,_ceg int32 ,_cab bool ,_bfd []int8 ,_eff []int8 ){_c .Log .Trace ("\u005b\u0047\u0045NE\u0052\u0049\u0043\u002d\u0052\u0045\u0046\u002d\u0052E\u0047I\u004fN\u005d \u0073\u0065\u0074\u0050\u0061\u0072\u0061\u006d\u0065\u0074\u0065\u0072\u0073");
if _gda !=nil {_cfd ._fef =_gda ;};if _agc !=nil {_cfd ._cc =_agc ;};_cfd .TemplateID =_acd ;_cfd .RegionInfo .BitmapWidth =_ffe ;_cfd .RegionInfo .BitmapHeight =_agga ;_cfd .ReferenceBitmap =_ggg ;_cfd .ReferenceDX =_dca ;_cfd .ReferenceDY =_ceg ;_cfd .IsTPGROn =_cab ;
_cfd .GrAtX =_bfd ;_cfd .GrAtY =_eff ;_cfd .RegionBitmap =nil ;_c .Log .Trace ("[\u0047\u0045\u004e\u0045\u0052\u0049\u0043\u002d\u0052E\u0046\u002d\u0052\u0045\u0047\u0049\u004fN]\u0020\u0073\u0065\u0074P\u0061\u0072\u0061\u006d\u0065\u0074\u0065\u0072\u0073 f\u0069\u006ei\u0073\u0068\u0065\u0064\u002e\u0020\u0025\u0073",_cfd );
};func (_dfb *Header )readSegmentDataLength (_acag *_db .Reader )(_acaa error ){_dfb .SegmentDataLength ,_acaa =_acag .ReadBits (32);if _acaa !=nil {return _acaa ;};_dfb .SegmentDataLength &=_f .MaxInt32 ;return nil ;};func (_aef *GenericRegion )Init (h *Header ,r *_db .Reader )error {_aef .RegionSegment =NewRegionSegment (r );
_aef ._dgc =r ;return _aef .parseHeader ();};func (_fadaf *TextRegion )setContexts (_eedgd *_dbe .DecoderStats ,_cacgf *_dbe .DecoderStats ,_dbca *_dbe .DecoderStats ,_cfga *_dbe .DecoderStats ,_ecacb *_dbe .DecoderStats ,_ceag *_dbe .DecoderStats ,_gegc *_dbe .DecoderStats ,_deggd *_dbe .DecoderStats ,_bbcb *_dbe .DecoderStats ,_beac *_dbe .DecoderStats ){_fadaf ._agfaa =_cacgf ;
_fadaf ._cegf =_dbca ;_fadaf ._aaaaf =_cfga ;_fadaf ._ggbb =_ecacb ;_fadaf ._deeef =_gegc ;_fadaf ._bgad =_deggd ;_fadaf ._cgeg =_ceag ;_fadaf ._ffae =_bbcb ;_fadaf ._edba =_beac ;_fadaf ._aafg =_eedgd ;};type templater interface{form (_gcg ,_bab ,_ebb ,_adag ,_aegd int16 )int16 ;
setIndex (_aee *_dbe .DecoderStats );};func (_gbd *GenericRegion )GetRegionBitmap ()(_abda *_ea .Bitmap ,_edca error ){if _gbd .Bitmap !=nil {return _gbd .Bitmap ,nil ;};if _gbd .IsMMREncoded {if _gbd ._gdb ==nil {_gbd ._gdb ,_edca =_da .New (_gbd ._dgc ,int (_gbd .RegionSegment .BitmapWidth ),int (_gbd .RegionSegment .BitmapHeight ),_gbd .DataOffset ,_gbd .DataLength );
if _edca !=nil {return nil ,_edca ;};};_gbd .Bitmap ,_edca =_gbd ._gdb .UncompressMMR ();return _gbd .Bitmap ,_edca ;};if _edca =_gbd .updateOverrideFlags ();_edca !=nil {return nil ,_edca ;};var _dec int ;if _gbd ._fabe ==nil {_gbd ._fabe ,_edca =_dbe .New (_gbd ._dgc );
if _edca !=nil {return nil ,_edca ;};};if _gbd ._fdc ==nil {_gbd ._fdc =_dbe .NewStats (65536,1);};_gbd .Bitmap =_ea .New (int (_gbd .RegionSegment .BitmapWidth ),int (_gbd .RegionSegment .BitmapHeight ));_eabb :=int (uint32 (_gbd .Bitmap .Width +7)&(^uint32 (7)));
for _egac :=0;_egac < _gbd .Bitmap .Height ;_egac ++{if _gbd .IsTPGDon {var _ddd int ;_ddd ,_edca =_gbd .decodeSLTP ();if _edca !=nil {return nil ,_edca ;};_dec ^=_ddd ;};if _dec ==1{if _egac > 0{if _edca =_gbd .copyLineAbove (_egac );_edca !=nil {return nil ,_edca ;
};};}else {if _edca =_gbd .decodeLine (_egac ,_gbd .Bitmap .Width ,_eabb );_edca !=nil {return nil ,_edca ;};};};return _gbd .Bitmap ,nil ;};func (_egag *GenericRegion )writeGBAtPixels (_ggf _db .BinaryWriter )(_cec int ,_ggba error ){const _dcaf ="\u0077r\u0069t\u0065\u0047\u0042\u0041\u0074\u0050\u0069\u0078\u0065\u006c\u0073";
if _egag .UseMMR {return 0,nil ;};_dbec :=1;if _egag .GBTemplate ==0{_dbec =4;}else if _egag .UseExtTemplates {_dbec =12;};if len (_egag .GBAtX )!=_dbec {return 0,_df .Errorf (_dcaf ,"\u0067\u0062\u0020\u0061\u0074\u0020\u0070\u0061\u0069\u0072\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020d\u006f\u0065\u0073\u006e\u0027\u0074\u0020m\u0061\u0074\u0063\u0068\u0020\u0074\u006f\u0020\u0047\u0042\u0041t\u0058\u0020\u0073\u006c\u0069\u0063\u0065\u0020\u006c\u0065\u006e");
};if len (_egag .GBAtY )!=_dbec {return 0,_df .Errorf (_dcaf ,"\u0067\u0062\u0020\u0061\u0074\u0020\u0070\u0061\u0069\u0072\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020d\u006f\u0065\u0073\u006e\u0027\u0074\u0020m\u0061\u0074\u0063\u0068\u0020\u0074\u006f\u0020\u0047\u0042\u0041t\u0059\u0020\u0073\u006c\u0069\u0063\u0065\u0020\u006c\u0065\u006e");
};for _dfa :=0;_dfa < _dbec ;_dfa ++{if _ggba =_ggf .WriteByte (byte (_egag .GBAtX [_dfa ]));_ggba !=nil {return _cec ,_df .Wrap (_ggba ,_dcaf ,"w\u0072\u0069\u0074\u0065\u0020\u0047\u0042\u0041\u0074\u0058");};_cec ++;if _ggba =_ggf .WriteByte (byte (_egag .GBAtY [_dfa ]));
_ggba !=nil {return _cec ,_df .Wrap (_ggba ,_dcaf ,"w\u0072\u0069\u0074\u0065\u0020\u0047\u0042\u0041\u0074\u0059");};_cec ++;};return _cec ,nil ;};func (_bbbb *SymbolDictionary )decodeNewSymbols (_gecf ,_ecda uint32 ,_ecefd *_ea .Bitmap ,_deee ,_fdda int32 )error {if _bbbb ._geaa ==nil {_bbbb ._geaa =_bde (_bbbb ._ceed ,nil );
if _bbbb ._cgc ==nil {var _bddg error ;_bbbb ._cgc ,_bddg =_dbe .New (_bbbb ._ceed );if _bddg !=nil {return _bddg ;};};if _bbbb ._gggf ==nil {_bbbb ._gggf =_dbe .NewStats (65536,1);};};_bbbb ._geaa .setParameters (_bbbb ._gggf ,_bbbb ._cgc ,_bbbb .SdrTemplate ,_gecf ,_ecda ,_ecefd ,_deee ,_fdda ,false ,_bbbb .SdrATX ,_bbbb .SdrATY );
return _bbbb .addSymbol (_bbbb ._geaa );};func (_dcb *PatternDictionary )computeSegmentDataStructure ()error {_dcb .DataOffset =_dcb ._dabd .AbsolutePosition ();_dcb .DataHeaderLength =_dcb .DataOffset -_dcb .DataHeaderOffset ;_dcb .DataLength =int64 (_dcb ._dabd .AbsoluteLength ())-_dcb .DataHeaderLength ;
return nil ;};func (_eegf *PageInformationSegment )Encode (w _db .BinaryWriter )(_gbfc int ,_daba error ){const _fcdb ="\u0050\u0061g\u0065\u0049\u006e\u0066\u006f\u0072\u006d\u0061\u0074\u0069\u006f\u006e\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u002e\u0045\u006eco\u0064\u0065";
_effef :=make ([]byte ,4);_a .BigEndian .PutUint32 (_effef ,uint32 (_eegf .PageBMWidth ));_gbfc ,_daba =w .Write (_effef );if _daba !=nil {return _gbfc ,_df .Wrap (_daba ,_fcdb ,"\u0077\u0069\u0064t\u0068");};_a .BigEndian .PutUint32 (_effef ,uint32 (_eegf .PageBMHeight ));
var _faa int ;_faa ,_daba =w .Write (_effef );if _daba !=nil {return _faa +_gbfc ,_df .Wrap (_daba ,_fcdb ,"\u0068\u0065\u0069\u0067\u0068\u0074");};_gbfc +=_faa ;_a .BigEndian .PutUint32 (_effef ,uint32 (_eegf .ResolutionX ));_faa ,_daba =w .Write (_effef );
if _daba !=nil {return _faa +_gbfc ,_df .Wrap (_daba ,_fcdb ,"\u0078\u0020\u0072e\u0073\u006f\u006c\u0075\u0074\u0069\u006f\u006e");};_gbfc +=_faa ;_a .BigEndian .PutUint32 (_effef ,uint32 (_eegf .ResolutionY ));if _faa ,_daba =w .Write (_effef );_daba !=nil {return _faa +_gbfc ,_df .Wrap (_daba ,_fcdb ,"\u0079\u0020\u0072e\u0073\u006f\u006c\u0075\u0074\u0069\u006f\u006e");
};_gbfc +=_faa ;if _daba =_eegf .encodeFlags (w );_daba !=nil {return _gbfc ,_df .Wrap (_daba ,_fcdb ,"");};_gbfc ++;if _faa ,_daba =_eegf .encodeStripingInformation (w );_daba !=nil {return _gbfc ,_df .Wrap (_daba ,_fcdb ,"");};_gbfc +=_faa ;return _gbfc ,nil ;
};func (_egae *SymbolDictionary )retrieveImportSymbols ()error {for _ ,_eaagc :=range _egae .Header .RTSegments {if _eaagc .Type ==0{_gfgg ,_ecea :=_eaagc .GetSegmentData ();if _ecea !=nil {return _ecea ;};_deedb ,_deeba :=_gfgg .(*SymbolDictionary );if !_deeba {return _d .Errorf ("\u0070\u0072\u006f\u0076\u0069\u0064\u0065\u0064\u0020\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u0020\u0044\u0061\u0074a\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0061\u0020\u0053\u0079\u006d\u0062\u006f\u006c\u0044\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u0053\u0065\u0067m\u0065\u006e\u0074\u003a\u0020%\u0054",_gfgg );
};_eggdc ,_ecea :=_deedb .GetDictionary ();if _ecea !=nil {return _d .Errorf ("\u0072\u0065\u006c\u0061\u0074\u0065\u0064 \u0073\u0065\u0067m\u0065\u006e\u0074 \u0077\u0069t\u0068\u0020\u0069\u006e\u0064\u0065x\u003a %\u0064\u0020\u0067\u0065\u0074\u0044\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0025\u0073",_eaagc .SegmentNumber ,_ecea .Error ());
};_egae ._gffc =append (_egae ._gffc ,_eggdc ...);_egae ._efbd +=_deedb .NumberOfExportedSymbols ;};};return nil ;};func (_gab *GenericRegion )decodeSLTP ()(int ,error ){switch _gab .GBTemplate {case 0:_gab ._fdc .SetIndex (0x9B25);case 1:_gab ._fdc .SetIndex (0x795);
case 2:_gab ._fdc .SetIndex (0xE5);case 3:_gab ._fdc .SetIndex (0x195);};return _gab ._fabe .DecodeBit (_gab ._fdc );};func (_bbgd *TextRegion )decodeIb (_dfdc ,_cdg int64 )(*_ea .Bitmap ,error ){const _afgb ="\u0064\u0065\u0063\u006f\u0064\u0065\u0049\u0062";
var (_cdfa error ;_aceg *_ea .Bitmap ;);if _dfdc ==0{if int (_cdg )> len (_bbgd .Symbols )-1{return nil ,_df .Error (_afgb ,"\u0064\u0065\u0063\u006f\u0064\u0069\u006e\u0067\u0020\u0049\u0042\u0020\u0062\u0069\u0074\u006d\u0061\u0070\u002e\u0020\u0069\u006e\u0064\u0065x\u0020\u006f\u0075\u0074\u0020o\u0066\u0020r\u0061\u006e\u0067\u0065");
};return _bbgd .Symbols [int (_cdg )],nil ;};var _faeb ,_ccgg ,_cfcdb ,_afde int64 ;_faeb ,_cdfa =_bbgd .decodeRdw ();if _cdfa !=nil {return nil ,_df .Wrap (_cdfa ,_afgb ,"");};_ccgg ,_cdfa =_bbgd .decodeRdh ();if _cdfa !=nil {return nil ,_df .Wrap (_cdfa ,_afgb ,"");
};_cfcdb ,_cdfa =_bbgd .decodeRdx ();if _cdfa !=nil {return nil ,_df .Wrap (_cdfa ,_afgb ,"");};_afde ,_cdfa =_bbgd .decodeRdy ();if _cdfa !=nil {return nil ,_df .Wrap (_cdfa ,_afgb ,"");};if _bbgd .IsHuffmanEncoded {if _ ,_cdfa =_bbgd .decodeSymInRefSize ();
_cdfa !=nil {return nil ,_df .Wrap (_cdfa ,_afgb ,"");};_bbgd ._cfgc .Align ();};_ggbg :=_bbgd .Symbols [_cdg ];_aedc :=uint32 (_ggbg .Width );_fgg :=uint32 (_ggbg .Height );_fffd :=int32 (uint32 (_faeb )>>1)+int32 (_cfcdb );_bgbg :=int32 (uint32 (_ccgg )>>1)+int32 (_afde );
if _bbgd ._dadf ==nil {_bbgd ._dadf =_bde (_bbgd ._cfgc ,nil );};_bbgd ._dadf .setParameters (_bbgd ._aafg ,_bbgd ._gdfad ,_bbgd .SbrTemplate ,_aedc +uint32 (_faeb ),_fgg +uint32 (_ccgg ),_ggbg ,_fffd ,_bgbg ,false ,_bbgd .SbrATX ,_bbgd .SbrATY );_aceg ,_cdfa =_bbgd ._dadf .GetRegionBitmap ();
if _cdfa !=nil {return nil ,_df .Wrap (_cdfa ,_afgb ,"\u0067\u0072\u0066");};if _bbgd .IsHuffmanEncoded {_bbgd ._cfgc .Align ();};return _aceg ,nil ;};func (_ggbe *SymbolDictionary )getSbSymCodeLen ()int8 {_adbfg :=int8 (_f .Ceil (_f .Log (float64 (_ggbe ._efbd +_ggbe .NumberOfNewSymbols ))/_f .Log (2)));
if _ggbe .IsHuffmanEncoded &&_adbfg < 1{return 1;};return _adbfg ;};type Documenter interface{GetPage (int )(Pager ,error );GetGlobalSegment (int )(*Header ,error );};func (_fcb *PageInformationSegment )readIsLossless ()error {_eabf ,_ebd :=_fcb ._dfag .ReadBit ();
if _ebd !=nil {return _ebd ;};if _eabf ==1{_fcb .IsLossless =true ;};return nil ;};func (_gdfa *Header )writeSegmentPageAssociation (_edcag _db .BinaryWriter )(_faff int ,_aadd error ){const _aggab ="w\u0072\u0069\u0074\u0065\u0053\u0065g\u006d\u0065\u006e\u0074\u0050\u0061\u0067\u0065\u0041s\u0073\u006f\u0063i\u0061t\u0069\u006f\u006e";
if _gdfa .pageSize ()!=4{if _aadd =_edcag .WriteByte (byte (_gdfa .PageAssociation ));_aadd !=nil {return 0,_df .Wrap (_aadd ,_aggab ,"\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065\u0020\u0021\u003d\u0020\u0034");};return 1,nil ;};_geef :=make ([]byte ,4);
_a .BigEndian .PutUint32 (_geef ,uint32 (_gdfa .PageAssociation ));if _faff ,_aadd =_edcag .Write (_geef );_aadd !=nil {return 0,_df .Wrap (_aadd ,_aggab ,"\u0034 \u0062y\u0074\u0065\u0020\u0070\u0061g\u0065\u0020n\u0075\u006d\u0062\u0065\u0072");};return _faff ,nil ;
};func (_fafe *TextRegion )getUserTable (_dgafg int )(_dbd .Tabler ,error ){const _ddce ="\u0067\u0065\u0074U\u0073\u0065\u0072\u0054\u0061\u0062\u006c\u0065";var _cacd int ;for _ ,_aded :=range _fafe .Header .RTSegments {if _aded .Type ==53{if _cacd ==_dgafg {_efdd ,_cafd :=_aded .GetSegmentData ();
if _cafd !=nil {return nil ,_cafd ;};_abde ,_bcba :=_efdd .(*TableSegment );if !_bcba {_c .Log .Debug (_d .Sprintf ("\u0073\u0065\u0067\u006d\u0065\u006e\u0074 \u0077\u0069\u0074h\u0020\u0054\u0079p\u0065\u00205\u0033\u0020\u002d\u0020\u0061\u006ed\u0020in\u0064\u0065\u0078\u003a\u0020\u0025\u0064\u0020\u006e\u006f\u0074\u0020\u0061\u0020\u0054\u0061\u0062\u006c\u0065\u0053\u0065\u0067\u006d\u0065\u006e\u0074",_aded .SegmentNumber ));
return nil ,_df .Error (_ddce ,"\u0073\u0065\u0067\u006d\u0065\u006e\u0074 \u0077\u0069\u0074h\u0020\u0054\u0079\u0070e\u0020\u0035\u0033\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0061\u0020\u002a\u0054\u0061\u0062\u006c\u0065\u0053\u0065\u0067\u006d\u0065\u006e\u0074");
};return _dbd .NewEncodedTable (_abde );};_cacd ++;};};return nil ,nil ;};func (_adaa *HalftoneRegion )combineGrayscalePlanes (_cafc []*_ea .Bitmap ,_dbecd int )error {_ebe :=0;for _bga :=0;_bga < _cafc [_dbecd ].Height ;_bga ++{for _dddf :=0;_dddf < _cafc [_dbecd ].Width ;
_dddf +=8{_age ,_aeb :=_cafc [_dbecd +1].GetByte (_ebe );if _aeb !=nil {return _aeb ;};_bbab ,_aeb :=_cafc [_dbecd ].GetByte (_ebe );if _aeb !=nil {return _aeb ;};_aeb =_cafc [_dbecd ].SetByte (_ebe ,_ea .CombineBytes (_bbab ,_age ,_ea .CmbOpXor ));if _aeb !=nil {return _aeb ;
};_ebe ++;};};return nil ;};type Regioner interface{GetRegionBitmap ()(*_ea .Bitmap ,error );GetRegionInfo ()*RegionSegment ;};type Header struct{SegmentNumber uint32 ;Type Type ;RetainFlag bool ;PageAssociation int ;PageAssociationFieldSize bool ;RTSegments []*Header ;
HeaderLength int64 ;SegmentDataLength uint64 ;SegmentDataStartOffset uint64 ;Reader *_db .Reader ;SegmentData Segmenter ;RTSNumbers []int ;RetainBits []uint8 ;};type TextRegion struct{_cfgc *_db .Reader ;RegionInfo *RegionSegment ;SbrTemplate int8 ;SbDsOffset int8 ;
DefaultPixel int8 ;CombinationOperator _ea .CombinationOperator ;IsTransposed int8 ;ReferenceCorner int16 ;LogSBStrips int16 ;UseRefinement bool ;IsHuffmanEncoded bool ;SbHuffRSize int8 ;SbHuffRDY int8 ;SbHuffRDX int8 ;SbHuffRDHeight int8 ;SbHuffRDWidth int8 ;
SbHuffDT int8 ;SbHuffDS int8 ;SbHuffFS int8 ;SbrATX []int8 ;SbrATY []int8 ;NumberOfSymbolInstances uint32 ;_cfff int64 ;SbStrips int8 ;NumberOfSymbols uint32 ;RegionBitmap *_ea .Bitmap ;Symbols []*_ea .Bitmap ;_gdfad *_dbe .Decoder ;_dadf *GenericRefinementRegion ;
_agfaa *_dbe .DecoderStats ;_cegf *_dbe .DecoderStats ;_aaaaf *_dbe .DecoderStats ;_ggbb *_dbe .DecoderStats ;_ccba *_dbe .DecoderStats ;_deeef *_dbe .DecoderStats ;_bgad *_dbe .DecoderStats ;_cgeg *_dbe .DecoderStats ;_ffae *_dbe .DecoderStats ;_edba *_dbe .DecoderStats ;
_aafg *_dbe .DecoderStats ;_gadc int8 ;_adda *_dbd .FixedSizeTable ;Header *Header ;_fff _dbd .Tabler ;_gfdb _dbd .Tabler ;_ggga _dbd .Tabler ;_faef _dbd .Tabler ;_dcddc _dbd .Tabler ;_eeba _dbd .Tabler ;_caeda _dbd .Tabler ;_fffe _dbd .Tabler ;_daaf ,_acbd map[int ]int ;
_fgeef []int ;_agba *_ea .Points ;_gceg *_ea .Bitmaps ;_ebdc *_fe .IntSlice ;_fged ,_fbcgg int ;_bgdc *_ea .Boxes ;};func (_acf *SymbolDictionary )readRegionFlags ()error {var (_gdbb uint64 ;_faca int ;);_ ,_facd :=_acf ._ceed .ReadBits (3);if _facd !=nil {return _facd ;
};_faca ,_facd =_acf ._ceed .ReadBit ();if _facd !=nil {return _facd ;};_acf .SdrTemplate =int8 (_faca );_gdbb ,_facd =_acf ._ceed .ReadBits (2);if _facd !=nil {return _facd ;};_acf .SdTemplate =int8 (_gdbb &0xf);_faca ,_facd =_acf ._ceed .ReadBit ();if _facd !=nil {return _facd ;
};if _faca ==1{_acf ._ebfa =true ;};_faca ,_facd =_acf ._ceed .ReadBit ();if _facd !=nil {return _facd ;};if _faca ==1{_acf ._gca =true ;};_faca ,_facd =_acf ._ceed .ReadBit ();if _facd !=nil {return _facd ;};if _faca ==1{_acf .SdHuffAggInstanceSelection =true ;
};_faca ,_facd =_acf ._ceed .ReadBit ();if _facd !=nil {return _facd ;};_acf .SdHuffBMSizeSelection =int8 (_faca );_gdbb ,_facd =_acf ._ceed .ReadBits (2);if _facd !=nil {return _facd ;};_acf .SdHuffDecodeWidthSelection =int8 (_gdbb &0xf);_gdbb ,_facd =_acf ._ceed .ReadBits (2);
if _facd !=nil {return _facd ;};_acf .SdHuffDecodeHeightSelection =int8 (_gdbb &0xf);_faca ,_facd =_acf ._ceed .ReadBit ();if _facd !=nil {return _facd ;};if _faca ==1{_acf .UseRefinementAggregation =true ;};_faca ,_facd =_acf ._ceed .ReadBit ();if _facd !=nil {return _facd ;
};if _faca ==1{_acf .IsHuffmanEncoded =true ;};return nil ;};type TableSegment struct{_fcfc *_db .Reader ;_gedf int32 ;_fabeb int32 ;_fdad int32 ;_dbgg int32 ;_ffdf int32 ;};func (_bcaf *PageInformationSegment )readCombinationOperator ()error {_abcg ,_ecbe :=_bcaf ._dfag .ReadBits (2);
if _ecbe !=nil {return _ecbe ;};_bcaf ._beec =_ea .CombinationOperator (int (_abcg ));return nil ;};func (_efgg *PatternDictionary )extractPatterns (_efb *_ea .Bitmap )error {var _egcf int ;_edee :=make ([]*_ea .Bitmap ,_efgg .GrayMax +1);for _egcf <=int (_efgg .GrayMax ){_fgefb :=int (_efgg .HdpWidth )*_egcf ;
_dfff :=_e .Rect (_fgefb ,0,_fgefb +int (_efgg .HdpWidth ),int (_efgg .HdpHeight ));_aaaed ,_fgeff :=_ea .Extract (_dfff ,_efb );if _fgeff !=nil {return _fgeff ;};_edee [_egcf ]=_aaaed ;_egcf ++;};_efgg .Patterns =_edee ;return nil ;};var _ _dbd .BasicTabler =&TableSegment {};
func (_beaf *SymbolDictionary )getSymbol (_eeddf int )(*_ea .Bitmap ,error ){const _cbab ="\u0067e\u0074\u0053\u0079\u006d\u0062\u006fl";_dgdc ,_fceca :=_beaf ._ffab .GetBitmap (_beaf ._ffcde [_eeddf ]);if _fceca !=nil {return nil ,_df .Wrap (_fceca ,_cbab ,"\u0063\u0061n\u0027\u0074\u0020g\u0065\u0074\u0020\u0073\u0079\u006d\u0062\u006f\u006c");
};return _dgdc ,nil ;};var _ SegmentEncoder =&RegionSegment {};func (_eedd *Header )Encode (w _db .BinaryWriter )(_abcd int ,_dfg error ){const _efa ="\u0048\u0065\u0061d\u0065\u0072\u002e\u0057\u0072\u0069\u0074\u0065";var _dgfd _db .BinaryWriter ;_c .Log .Trace ("\u005b\u0053\u0045G\u004d\u0045\u004e\u0054-\u0048\u0045\u0041\u0044\u0045\u0052\u005d[\u0045\u004e\u0043\u004f\u0044\u0045\u005d\u0020\u0042\u0065\u0067\u0069\u006e\u0073");
defer func (){if _dfg !=nil {_c .Log .Trace ("[\u0053\u0045\u0047\u004d\u0045\u004eT\u002d\u0048\u0045\u0041\u0044\u0045R\u005d\u005b\u0045\u004e\u0043\u004f\u0044E\u005d\u0020\u0046\u0061\u0069\u006c\u0065\u0064\u002e\u0020%\u0076",_dfg );}else {_c .Log .Trace ("\u005b\u0053\u0045\u0047ME\u004e\u0054\u002d\u0048\u0045\u0041\u0044\u0045\u0052\u005d\u0020\u0025\u0076",_eedd );
_c .Log .Trace ("\u005b\u0053\u0045\u0047\u004d\u0045N\u0054\u002d\u0048\u0045\u0041\u0044\u0045\u0052\u005d\u005b\u0045\u004e\u0043O\u0044\u0045\u005d\u0020\u0046\u0069\u006ei\u0073\u0068\u0065\u0064");};}();w .FinishByte ();if _eedd .SegmentData !=nil {_ebgb ,_gfea :=_eedd .SegmentData .(SegmentEncoder );
if !_gfea {return 0,_df .Errorf (_efa ,"\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u003a\u0020\u0025\u0054\u0020\u0064\u006f\u0065s\u006e\u0027\u0074\u0020\u0069\u006d\u0070\u006c\u0065\u006d\u0065\u006e\u0074 \u0053\u0065\u0067\u006d\u0065\u006e\u0074\u0045\u006e\u0063\u006f\u0064er\u0020\u0069\u006e\u0074\u0065\u0072\u0066\u0061\u0063\u0065",_eedd .SegmentData );
};_dgfd =_db .BufferedMSB ();_abcd ,_dfg =_ebgb .Encode (_dgfd );if _dfg !=nil {return 0,_df .Wrap (_dfg ,_efa ,"");};_eedd .SegmentDataLength =uint64 (_abcd );};if _eedd .pageSize ()==4{_eedd .PageAssociationFieldSize =true ;};var _bfe int ;_bfe ,_dfg =_eedd .writeSegmentNumber (w );
if _dfg !=nil {return 0,_df .Wrap (_dfg ,_efa ,"");};_abcd +=_bfe ;if _dfg =_eedd .writeFlags (w );_dfg !=nil {return _abcd ,_df .Wrap (_dfg ,_efa ,"");};_abcd ++;_bfe ,_dfg =_eedd .writeReferredToCount (w );if _dfg !=nil {return 0,_df .Wrap (_dfg ,_efa ,"");
};_abcd +=_bfe ;_bfe ,_dfg =_eedd .writeReferredToSegments (w );if _dfg !=nil {return 0,_df .Wrap (_dfg ,_efa ,"");};_abcd +=_bfe ;_bfe ,_dfg =_eedd .writeSegmentPageAssociation (w );if _dfg !=nil {return 0,_df .Wrap (_dfg ,_efa ,"");};_abcd +=_bfe ;_bfe ,_dfg =_eedd .writeSegmentDataLength (w );
if _dfg !=nil {return 0,_df .Wrap (_dfg ,_efa ,"");};_abcd +=_bfe ;_eedd .HeaderLength =int64 (_abcd )-int64 (_eedd .SegmentDataLength );if _dgfd !=nil {if _ ,_dfg =w .Write (_dgfd .Data ());_dfg !=nil {return _abcd ,_df .Wrap (_dfg ,_efa ,"\u0077r\u0069t\u0065\u0020\u0073\u0065\u0067m\u0065\u006et\u0020\u0064\u0061\u0074\u0061");
};};return _abcd ,nil ;};func (_fcde *SymbolDictionary )getUserTable (_adeff int )(_dbd .Tabler ,error ){var _bbace int ;for _ ,_ebea :=range _fcde .Header .RTSegments {if _ebea .Type ==53{if _bbace ==_adeff {_dcffe ,_bgcd :=_ebea .GetSegmentData ();if _bgcd !=nil {return nil ,_bgcd ;
};_eaff :=_dcffe .(_dbd .BasicTabler );return _dbd .NewEncodedTable (_eaff );};_bbace ++;};};return nil ,nil ;};func _dfbcb (_ebabg *_db .Reader ,_cacgd *Header )*TextRegion {_febc :=&TextRegion {_cfgc :_ebabg ,Header :_cacgd ,RegionInfo :NewRegionSegment (_ebabg )};
return _febc ;};func (_fba *PatternDictionary )checkInput ()error {if _fba .HdpHeight < 1||_fba .HdpWidth < 1{return _eg .New ("in\u0076\u0061l\u0069\u0064\u0020\u0048\u0065\u0061\u0064\u0065\u0072 \u0056\u0061\u006c\u0075\u0065\u003a\u0020\u0057\u0069\u0064\u0074\u0068\u002f\u0048\u0065\u0069\u0067\u0068\u0074\u0020\u006d\u0075\u0073\u0074\u0020\u0062\u0065\u0020g\u0072e\u0061\u0074\u0065\u0072\u0020\u0074\u0068\u0061n\u0020z\u0065\u0072o");
};if _fba .IsMMREncoded {if _fba .HDTemplate !=0{_c .Log .Debug ("\u0076\u0061\u0072\u0069\u0061\u0062\u006c\u0065\u0020\u0048\u0044\u0054\u0065\u006d\u0070\u006c\u0061\u0074e\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u006e\u006f\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e \u0074\u0068\u0065\u0020\u0076\u0061\u006c\u0075\u0065\u0020\u0030");
};};return nil ;};func (_gfa *TextRegion )getSymbols ()error {if _gfa .Header .RTSegments !=nil {return _gfa .initSymbols ();};return nil ;};func (_eefd *TextRegion )createRegionBitmap ()error {_eefd .RegionBitmap =_ea .New (int (_eefd .RegionInfo .BitmapWidth ),int (_eefd .RegionInfo .BitmapHeight ));
if _eefd .DefaultPixel !=0{_eefd .RegionBitmap .SetDefaultPixel ();};return nil ;};func (_dede *SymbolDictionary )setSymbolsArray ()error {if _dede ._gffc ==nil {if _fbag :=_dede .retrieveImportSymbols ();_fbag !=nil {return _fbag ;};};if _dede ._dfddc ==nil {_dede ._dfddc =append (_dede ._dfddc ,_dede ._gffc ...);
};return nil ;};func (_bcf *GenericRefinementRegion )getPixel (_ece *_ea .Bitmap ,_bcc ,_gfe int )int {if _bcc < 0||_bcc >=_ece .Width {return 0;};if _gfe < 0||_gfe >=_ece .Height {return 0;};if _ece .GetPixel (_bcc ,_gfe ){return 1;};return 0;};func (_egcda *SymbolDictionary )decodeHeightClassBitmap (_efef *_ea .Bitmap ,_dccb int64 ,_abba int ,_dacgf []int )error {for _cgef :=_dccb ;
_cgef < int64 (_egcda ._bcgc );_cgef ++{var _gdga int ;for _ebce :=_dccb ;_ebce <=_cgef -1;_ebce ++{_gdga +=_dacgf [_ebce ];};_fdfd :=_e .Rect (_gdga ,0,_gdga +_dacgf [_cgef ],_abba );_cfefc ,_deab :=_ea .Extract (_fdfd ,_efef );if _deab !=nil {return _deab ;
};_egcda ._beee [_cgef ]=_cfefc ;_egcda ._dfddc =append (_egcda ._dfddc ,_cfefc );};return nil ;};func (_gcfa *TextRegion )GetRegionInfo ()*RegionSegment {return _gcfa .RegionInfo };func (_acdf *TextRegion )GetRegionBitmap ()(*_ea .Bitmap ,error ){if _acdf .RegionBitmap !=nil {return _acdf .RegionBitmap ,nil ;
};if !_acdf .IsHuffmanEncoded {if _afbd :=_acdf .setCodingStatistics ();_afbd !=nil {return nil ,_afbd ;};};if _ecec :=_acdf .createRegionBitmap ();_ecec !=nil {return nil ,_ecec ;};if _fdbg :=_acdf .decodeSymbolInstances ();_fdbg !=nil {return nil ,_fdbg ;
};return _acdf .RegionBitmap ,nil ;};func (_eeea *GenericRegion )parseHeader ()(_fdb error ){_c .Log .Trace ("\u005b\u0047\u0045\u004e\u0045\u0052I\u0043\u002d\u0052\u0045\u0047\u0049\u004f\u004e\u005d\u0020\u0050\u0061\u0072s\u0069\u006e\u0067\u0048\u0065\u0061\u0064e\u0072\u002e\u002e\u002e");
defer func (){if _fdb !=nil {_c .Log .Trace ("\u005b\u0047\u0045\u004e\u0045\u0052\u0049\u0043\u002d\u0052\u0045\u0047\u0049\u004f\u004e]\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0048\u0065\u0061\u0064\u0065r\u0020\u0046\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u0020\u0077\u0069th\u0020\u0065\u0072\u0072\u006f\u0072\u002e\u0020\u0025\u0076",_fdb );
}else {_c .Log .Trace ("\u005b\u0047\u0045\u004e\u0045\u0052\u0049C\u002d\u0052\u0045G\u0049\u004f\u004e]\u0020\u0050a\u0072\u0073\u0069\u006e\u0067\u0048e\u0061de\u0072\u0020\u0046\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u0020\u0053\u0075\u0063\u0063\u0065\u0073\u0073\u0066\u0075\u006c\u006c\u0079\u002e\u002e\u002e");
};}();var (_gbge int ;_cde uint64 ;);if _fdb =_eeea .RegionSegment .parseHeader ();_fdb !=nil {return _fdb ;};if _ ,_fdb =_eeea ._dgc .ReadBits (3);_fdb !=nil {return _fdb ;};_gbge ,_fdb =_eeea ._dgc .ReadBit ();if _fdb !=nil {return _fdb ;};if _gbge ==1{_eeea .UseExtTemplates =true ;
};_gbge ,_fdb =_eeea ._dgc .ReadBit ();if _fdb !=nil {return _fdb ;};if _gbge ==1{_eeea .IsTPGDon =true ;};_cde ,_fdb =_eeea ._dgc .ReadBits (2);if _fdb !=nil {return _fdb ;};_eeea .GBTemplate =byte (_cde &0xf);_gbge ,_fdb =_eeea ._dgc .ReadBit ();if _fdb !=nil {return _fdb ;
};if _gbge ==1{_eeea .IsMMREncoded =true ;};if !_eeea .IsMMREncoded {_gggb :=1;if _eeea .GBTemplate ==0{_gggb =4;if _eeea .UseExtTemplates {_gggb =12;};};if _fdb =_eeea .readGBAtPixels (_gggb );_fdb !=nil {return _fdb ;};};if _fdb =_eeea .computeSegmentDataStructure ();
_fdb !=nil {return _fdb ;};_c .Log .Trace ("\u0025\u0073",_eeea );return nil ;};func (_bbeb *SymbolDictionary )GetDictionary ()([]*_ea .Bitmap ,error ){_c .Log .Trace ("\u005b\u0053\u0059\u004d\u0042\u004f\u004c-\u0044\u0049\u0043T\u0049\u004f\u004e\u0041R\u0059\u005d\u0020\u0047\u0065\u0074\u0044\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u0062\u0065\u0067\u0069\u006e\u0073\u002e\u002e\u002e");
defer func (){_c .Log .Trace ("\u005b\u0053\u0059M\u0042\u004f\u004c\u002d\u0044\u0049\u0043\u0054\u0049\u004f\u004e\u0041\u0052\u0059\u005d\u0020\u0047\u0065\u0074\u0044\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079 \u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064");
_c .Log .Trace ("\u005b\u0053Y\u004d\u0042\u004f\u004c\u002dD\u0049\u0043\u0054\u0049\u004fN\u0041\u0052\u0059\u005d\u0020\u0044\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u002e\u0020\u000a\u0045\u0078\u003a\u0020\u0027\u0025\u0073\u0027\u002c\u0020\u000a\u006e\u0065\u0077\u003a\u0027\u0025\u0073\u0027",_bbeb ._aefc ,_bbeb ._beee );
}();if _bbeb ._aefc ==nil {var _gbdd error ;if _bbeb .UseRefinementAggregation {_bbeb ._gfegc =_bbeb .getSbSymCodeLen ();};if !_bbeb .IsHuffmanEncoded {if _gbdd =_bbeb .setCodingStatistics ();_gbdd !=nil {return nil ,_gbdd ;};};_bbeb ._beee =make ([]*_ea .Bitmap ,_bbeb .NumberOfNewSymbols );
var _ffgb []int ;if _bbeb .IsHuffmanEncoded &&!_bbeb .UseRefinementAggregation {_ffgb =make ([]int ,_bbeb .NumberOfNewSymbols );};if _gbdd =_bbeb .setSymbolsArray ();_gbdd !=nil {return nil ,_gbdd ;};var _ffef ,_egbd int64 ;_bbeb ._bcgc =0;for _bbeb ._bcgc < _bbeb .NumberOfNewSymbols {_egbd ,_gbdd =_bbeb .decodeHeightClassDeltaHeight ();
if _gbdd !=nil {return nil ,_gbdd ;};_ffef +=_egbd ;var _fdeb ,_aabcc uint32 ;_faga :=int64 (_bbeb ._bcgc );for {var _egcg int64 ;_egcg ,_gbdd =_bbeb .decodeDifferenceWidth ();if _eg .Is (_gbdd ,_dd .ErrOOB ){break ;};if _gbdd !=nil {return nil ,_gbdd ;
};if _bbeb ._bcgc >=_bbeb .NumberOfNewSymbols {break ;};_fdeb +=uint32 (_egcg );_aabcc +=_fdeb ;if !_bbeb .IsHuffmanEncoded ||_bbeb .UseRefinementAggregation {if !_bbeb .UseRefinementAggregation {_gbdd =_bbeb .decodeDirectlyThroughGenericRegion (_fdeb ,uint32 (_ffef ));
if _gbdd !=nil {return nil ,_gbdd ;};}else {_gbdd =_bbeb .decodeAggregate (_fdeb ,uint32 (_ffef ));if _gbdd !=nil {return nil ,_gbdd ;};};}else if _bbeb .IsHuffmanEncoded &&!_bbeb .UseRefinementAggregation {_ffgb [_bbeb ._bcgc ]=int (_fdeb );};_bbeb ._bcgc ++;
};if _bbeb .IsHuffmanEncoded &&!_bbeb .UseRefinementAggregation {var _afac int64 ;if _bbeb .SdHuffBMSizeSelection ==0{var _fgc _dbd .Tabler ;_fgc ,_gbdd =_dbd .GetStandardTable (1);if _gbdd !=nil {return nil ,_gbdd ;};_afac ,_gbdd =_fgc .Decode (_bbeb ._ceed );
if _gbdd !=nil {return nil ,_gbdd ;};}else {_afac ,_gbdd =_bbeb .huffDecodeBmSize ();if _gbdd !=nil {return nil ,_gbdd ;};};_bbeb ._ceed .Align ();var _dcgea *_ea .Bitmap ;_dcgea ,_gbdd =_bbeb .decodeHeightClassCollectiveBitmap (_afac ,uint32 (_ffef ),_aabcc );
if _gbdd !=nil {return nil ,_gbdd ;};_gbdd =_bbeb .decodeHeightClassBitmap (_dcgea ,_faga ,int (_ffef ),_ffgb );if _gbdd !=nil {return nil ,_gbdd ;};};};_ddg ,_gbdd :=_bbeb .getToExportFlags ();if _gbdd !=nil {return nil ,_gbdd ;};_bbeb .setExportedSymbols (_ddg );
};return _bbeb ._aefc ,nil ;};func (_dag *template0 )form (_dcef ,_egg ,_bba ,_abbd ,_aec int16 )int16 {return (_dcef <<10)|(_egg <<7)|(_bba <<4)|(_abbd <<1)|_aec ;};func (_bea *Header )subInputReader ()(*_db .Reader ,error ){_gabgb :=int (_bea .SegmentDataLength );
if _bea .SegmentDataLength ==_f .MaxInt32 {_gabgb =-1;};return _bea .Reader .NewPartialReader (int (_bea .SegmentDataStartOffset ),_gabgb ,false );};func (_fgb *Header )readReferredToSegmentNumbers (_gaa *_db .Reader ,_gaff int )([]int ,error ){const _bbac ="\u0072\u0065\u0061\u0064R\u0065\u0066\u0065\u0072\u0072\u0065\u0064\u0054\u006f\u0053e\u0067m\u0065\u006e\u0074\u004e\u0075\u006d\u0062e\u0072\u0073";
_fabb :=make ([]int ,_gaff );if _gaff > 0{_fgb .RTSegments =make ([]*Header ,_gaff );var (_aed uint64 ;_bdea error ;);for _dfc :=0;_dfc < _gaff ;_dfc ++{_aed ,_bdea =_gaa .ReadBits (byte (_fgb .referenceSize ())<<3);if _bdea !=nil {return nil ,_df .Wrapf (_bdea ,_bbac ,"\u0027\u0025\u0064\u0027 \u0072\u0065\u0066\u0065\u0072\u0072\u0065\u0064\u0020\u0073e\u0067m\u0065\u006e\u0074\u0020\u006e\u0075\u006db\u0065\u0072",_dfc );
};_fabb [_dfc ]=int (_aed &_f .MaxInt32 );};};return _fabb ,nil ;};func (_dfbc *TableSegment )HtOOB ()int32 {return _dfbc ._gedf };func (_dfbfc *SymbolDictionary )decodeDirectlyThroughGenericRegion (_afbb ,_gefd uint32 )error {if _dfbfc ._ded ==nil {_dfbfc ._ded =NewGenericRegion (_dfbfc ._ceed );
};_dfbfc ._ded .setParametersWithAt (false ,byte (_dfbfc .SdTemplate ),false ,false ,_dfbfc .SdATX ,_dfbfc .SdATY ,_afbb ,_gefd ,_dfbfc ._gggf ,_dfbfc ._cgc );return _dfbfc .addSymbol (_dfbfc ._ded );};func (_fbdg *TextRegion )setCodingStatistics ()error {if _fbdg ._agfaa ==nil {_fbdg ._agfaa =_dbe .NewStats (512,1);
};if _fbdg ._cegf ==nil {_fbdg ._cegf =_dbe .NewStats (512,1);};if _fbdg ._aaaaf ==nil {_fbdg ._aaaaf =_dbe .NewStats (512,1);};if _fbdg ._ggbb ==nil {_fbdg ._ggbb =_dbe .NewStats (512,1);};if _fbdg ._ccba ==nil {_fbdg ._ccba =_dbe .NewStats (512,1);};
if _fbdg ._deeef ==nil {_fbdg ._deeef =_dbe .NewStats (512,1);};if _fbdg ._bgad ==nil {_fbdg ._bgad =_dbe .NewStats (512,1);};if _fbdg ._cgeg ==nil {_fbdg ._cgeg =_dbe .NewStats (1<<uint (_fbdg ._gadc ),1);};if _fbdg ._ffae ==nil {_fbdg ._ffae =_dbe .NewStats (512,1);
};if _fbdg ._edba ==nil {_fbdg ._edba =_dbe .NewStats (512,1);};if _fbdg ._gdfad ==nil {var _ffac error ;_fbdg ._gdfad ,_ffac =_dbe .New (_fbdg ._cfgc );if _ffac !=nil {return _ffac ;};};return nil ;};func (_gbac *SymbolDictionary )encodeFlags (_bfbc _db .BinaryWriter )(_ddbg int ,_eegg error ){const _fcbd ="e\u006e\u0063\u006f\u0064\u0065\u0046\u006c\u0061\u0067\u0073";
if _eegg =_bfbc .SkipBits (3);_eegg !=nil {return 0,_df .Wrap (_eegg ,_fcbd ,"\u0065\u006d\u0070\u0074\u0079\u0020\u0062\u0069\u0074\u0073");};var _gfgbc int ;if _gbac .SdrTemplate > 0{_gfgbc =1;};if _eegg =_bfbc .WriteBit (_gfgbc );_eegg !=nil {return _ddbg ,_df .Wrap (_eegg ,_fcbd ,"s\u0064\u0072\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065");
};_gfgbc =0;if _gbac .SdTemplate > 1{_gfgbc =1;};if _eegg =_bfbc .WriteBit (_gfgbc );_eegg !=nil {return _ddbg ,_df .Wrap (_eegg ,_fcbd ,"\u0073\u0064\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065");};_gfgbc =0;if _gbac .SdTemplate ==1||_gbac .SdTemplate ==3{_gfgbc =1;
};if _eegg =_bfbc .WriteBit (_gfgbc );_eegg !=nil {return _ddbg ,_df .Wrap (_eegg ,_fcbd ,"\u0073\u0064\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065");};_gfgbc =0;if _gbac ._ebfa {_gfgbc =1;};if _eegg =_bfbc .WriteBit (_gfgbc );_eegg !=nil {return _ddbg ,_df .Wrap (_eegg ,_fcbd ,"\u0063\u006f\u0064in\u0067\u0020\u0063\u006f\u006e\u0074\u0065\u0078\u0074\u0020\u0072\u0065\u0074\u0061\u0069\u006e\u0065\u0064");
};_gfgbc =0;if _gbac ._gca {_gfgbc =1;};if _eegg =_bfbc .WriteBit (_gfgbc );_eegg !=nil {return _ddbg ,_df .Wrap (_eegg ,_fcbd ,"\u0063\u006f\u0064\u0069ng\u0020\u0063\u006f\u006e\u0074\u0065\u0078\u0074\u0020\u0075\u0073\u0065\u0064");};_gfgbc =0;if _gbac .SdHuffAggInstanceSelection {_gfgbc =1;
};if _eegg =_bfbc .WriteBit (_gfgbc );_eegg !=nil {return _ddbg ,_df .Wrap (_eegg ,_fcbd ,"\u0073\u0064\u0048\u0075\u0066\u0066\u0041\u0067\u0067\u0049\u006e\u0073\u0074");};_gfgbc =int (_gbac .SdHuffBMSizeSelection );if _eegg =_bfbc .WriteBit (_gfgbc );
_eegg !=nil {return _ddbg ,_df .Wrap (_eegg ,_fcbd ,"\u0073\u0064\u0048u\u0066\u0066\u0042\u006d\u0053\u0069\u007a\u0065");};_gfgbc =0;if _gbac .SdHuffDecodeWidthSelection > 1{_gfgbc =1;};if _eegg =_bfbc .WriteBit (_gfgbc );_eegg !=nil {return _ddbg ,_df .Wrap (_eegg ,_fcbd ,"s\u0064\u0048\u0075\u0066\u0066\u0057\u0069\u0064\u0074\u0068");
};_gfgbc =0;switch _gbac .SdHuffDecodeWidthSelection {case 1,3:_gfgbc =1;};if _eegg =_bfbc .WriteBit (_gfgbc );_eegg !=nil {return _ddbg ,_df .Wrap (_eegg ,_fcbd ,"s\u0064\u0048\u0075\u0066\u0066\u0057\u0069\u0064\u0074\u0068");};_gfgbc =0;if _gbac .SdHuffDecodeHeightSelection > 1{_gfgbc =1;
};if _eegg =_bfbc .WriteBit (_gfgbc );_eegg !=nil {return _ddbg ,_df .Wrap (_eegg ,_fcbd ,"\u0073\u0064\u0048u\u0066\u0066\u0048\u0065\u0069\u0067\u0068\u0074");};_gfgbc =0;switch _gbac .SdHuffDecodeHeightSelection {case 1,3:_gfgbc =1;};if _eegg =_bfbc .WriteBit (_gfgbc );
_eegg !=nil {return _ddbg ,_df .Wrap (_eegg ,_fcbd ,"\u0073\u0064\u0048u\u0066\u0066\u0048\u0065\u0069\u0067\u0068\u0074");};_gfgbc =0;if _gbac .UseRefinementAggregation {_gfgbc =1;};if _eegg =_bfbc .WriteBit (_gfgbc );_eegg !=nil {return _ddbg ,_df .Wrap (_eegg ,_fcbd ,"\u0073\u0064\u0052\u0065\u0066\u0041\u0067\u0067");
};_gfgbc =0;if _gbac .IsHuffmanEncoded {_gfgbc =1;};if _eegg =_bfbc .WriteBit (_gfgbc );_eegg !=nil {return _ddbg ,_df .Wrap (_eegg ,_fcbd ,"\u0073\u0064\u0048\u0075\u0066\u0066");};return 2,nil ;};type PageInformationSegment struct{_dfag *_db .Reader ;
PageBMHeight int ;PageBMWidth int ;ResolutionX int ;ResolutionY int ;_gbb bool ;_beec _ea .CombinationOperator ;_efcd bool ;DefaultPixelValue uint8 ;_bagf bool ;IsLossless bool ;IsStripe bool ;MaxStripeSize uint16 ;};var _ templater =&template1 {};func (_fega *GenericRegion )setOverrideFlag (_cge int ){_fega .GBAtOverride [_cge ]=true ;
_fega ._agca =true ;};func (_ffad *PageInformationSegment )CombinationOperatorOverrideAllowed ()bool {return _ffad ._gbb };func (_gdee *PatternDictionary )readPatternWidthAndHeight ()error {_egce ,_gdbd :=_gdee ._dabd .ReadByte ();if _gdbd !=nil {return _gdbd ;
};_gdee .HdpWidth =_egce ;_egce ,_gdbd =_gdee ._dabd .ReadByte ();if _gdbd !=nil {return _gdbd ;};_gdee .HdpHeight =_egce ;return nil ;};type template1 struct{};func (_gcdd *SymbolDictionary )addSymbol (_gefb Regioner )error {_bgec ,_adgb :=_gefb .GetRegionBitmap ();
if _adgb !=nil {return _adgb ;};_gcdd ._beee [_gcdd ._bcgc ]=_bgec ;_gcdd ._dfddc =append (_gcdd ._dfddc ,_bgec );_c .Log .Trace ("\u005b\u0053YM\u0042\u004f\u004c \u0044\u0049\u0043\u0054ION\u0041RY\u005d\u0020\u0041\u0064\u0064\u0065\u0064 s\u0079\u006d\u0062\u006f\u006c\u003a\u0020%\u0073",_bgec );
return nil ;};func (_cagd *TextRegion )encodeFlags (_eedf _db .BinaryWriter )(_cadc int ,_ffaa error ){const _bbec ="e\u006e\u0063\u006f\u0064\u0065\u0046\u006c\u0061\u0067\u0073";if _ffaa =_eedf .WriteBit (int (_cagd .SbrTemplate ));_ffaa !=nil {return _cadc ,_df .Wrap (_ffaa ,_bbec ,"s\u0062\u0072\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065");
};if _ ,_ffaa =_eedf .WriteBits (uint64 (_cagd .SbDsOffset ),5);_ffaa !=nil {return _cadc ,_df .Wrap (_ffaa ,_bbec ,"\u0073\u0062\u0044\u0073\u004f\u0066\u0066\u0073\u0065\u0074");};if _ffaa =_eedf .WriteBit (int (_cagd .DefaultPixel ));_ffaa !=nil {return _cadc ,_df .Wrap (_ffaa ,_bbec ,"\u0044\u0065\u0066a\u0075\u006c\u0074\u0050\u0069\u0078\u0065\u006c");
};if _ ,_ffaa =_eedf .WriteBits (uint64 (_cagd .CombinationOperator ),2);_ffaa !=nil {return _cadc ,_df .Wrap (_ffaa ,_bbec ,"\u0043\u006f\u006d\u0062in\u0061\u0074\u0069\u006f\u006e\u004f\u0070\u0065\u0072\u0061\u0074\u006f\u0072");};if _ffaa =_eedf .WriteBit (int (_cagd .IsTransposed ));
_ffaa !=nil {return _cadc ,_df .Wrap (_ffaa ,_bbec ,"\u0069\u0073\u0020\u0074\u0072\u0061\u006e\u0073\u0070\u006f\u0073\u0065\u0064");};if _ ,_ffaa =_eedf .WriteBits (uint64 (_cagd .ReferenceCorner ),2);_ffaa !=nil {return _cadc ,_df .Wrap (_ffaa ,_bbec ,"\u0072\u0065f\u0065\u0072\u0065n\u0063\u0065\u0020\u0063\u006f\u0072\u006e\u0065\u0072");
};if _ ,_ffaa =_eedf .WriteBits (uint64 (_cagd .LogSBStrips ),2);_ffaa !=nil {return _cadc ,_df .Wrap (_ffaa ,_bbec ,"L\u006f\u0067\u0053\u0042\u0053\u0074\u0072\u0069\u0070\u0073");};var _ddgaa int ;if _cagd .UseRefinement {_ddgaa =1;};if _ffaa =_eedf .WriteBit (_ddgaa );
_ffaa !=nil {return _cadc ,_df .Wrap (_ffaa ,_bbec ,"\u0075\u0073\u0065\u0020\u0072\u0065\u0066\u0069\u006ee\u006d\u0065\u006e\u0074");};_ddgaa =0;if _cagd .IsHuffmanEncoded {_ddgaa =1;};if _ffaa =_eedf .WriteBit (_ddgaa );_ffaa !=nil {return _cadc ,_df .Wrap (_ffaa ,_bbec ,"u\u0073\u0065\u0020\u0068\u0075\u0066\u0066\u006d\u0061\u006e");
};_cadc =2;return _cadc ,nil ;};type template0 struct{};func (_fdcd *TextRegion )parseHeader ()error {var _gbaa error ;_c .Log .Trace ("\u005b\u0054E\u0058\u0054\u0020\u0052E\u0047\u0049O\u004e\u005d\u005b\u0050\u0041\u0052\u0053\u0045-\u0048\u0045\u0041\u0044\u0045\u0052\u005d\u0020\u0062\u0065\u0067\u0069n\u0073\u002e\u002e\u002e");
defer func (){if _gbaa !=nil {_c .Log .Trace ("\u005b\u0054\u0045\u0058\u0054\u0020\u0052\u0045\u0047\u0049\u004f\u004e\u005d\u005b\u0050\u0041\u0052\u0053\u0045\u002d\u0048\u0045\u0041\u0044E\u0052\u005d\u0020\u0066\u0061i\u006c\u0065d\u002e\u0020\u0025\u0076",_gbaa );
}else {_c .Log .Trace ("\u005b\u0054E\u0058\u0054\u0020\u0052E\u0047\u0049O\u004e\u005d\u005b\u0050\u0041\u0052\u0053\u0045-\u0048\u0045\u0041\u0044\u0045\u0052\u005d\u0020\u0066\u0069\u006e\u0069s\u0068\u0065\u0064\u002e");};}();if _gbaa =_fdcd .RegionInfo .parseHeader ();
_gbaa !=nil {return _gbaa ;};if _gbaa =_fdcd .readRegionFlags ();_gbaa !=nil {return _gbaa ;};if _fdcd .IsHuffmanEncoded {if _gbaa =_fdcd .readHuffmanFlags ();_gbaa !=nil {return _gbaa ;};};if _gbaa =_fdcd .readUseRefinement ();_gbaa !=nil {return _gbaa ;
};if _gbaa =_fdcd .readAmountOfSymbolInstances ();_gbaa !=nil {return _gbaa ;};if _gbaa =_fdcd .getSymbols ();_gbaa !=nil {return _gbaa ;};if _gbaa =_fdcd .computeSymbolCodeLength ();_gbaa !=nil {return _gbaa ;};if _gbaa =_fdcd .checkInput ();_gbaa !=nil {return _gbaa ;
};_c .Log .Trace ("\u0025\u0073",_fdcd .String ());return nil ;};func (_ebfb *TextRegion )decodeDT ()(_cdbf int64 ,_fegaf error ){if _ebfb .IsHuffmanEncoded {if _ebfb .SbHuffDT ==3{_cdbf ,_fegaf =_ebfb ._ggga .Decode (_ebfb ._cfgc );if _fegaf !=nil {return 0,_fegaf ;
};}else {var _debe _dbd .Tabler ;_debe ,_fegaf =_dbd .GetStandardTable (11+int (_ebfb .SbHuffDT ));if _fegaf !=nil {return 0,_fegaf ;};_cdbf ,_fegaf =_debe .Decode (_ebfb ._cfgc );if _fegaf !=nil {return 0,_fegaf ;};};}else {var _eabg int32 ;_eabg ,_fegaf =_ebfb ._gdfad .DecodeInt (_ebfb ._agfaa );
if _fegaf !=nil {return 0,_fegaf ;};_cdbf =int64 (_eabg );};_cdbf *=int64 (_ebfb .SbStrips );return _cdbf ,nil ;};func (_deda *SymbolDictionary )decodeRefinedSymbol (_edd ,_dcaca uint32 )error {var (_adc int ;_caab ,_gbdf int32 ;);if _deda .IsHuffmanEncoded {_gccf ,_cfce :=_deda ._ceed .ReadBits (byte (_deda ._gfegc ));
if _cfce !=nil {return _cfce ;};_adc =int (_gccf );_abe ,_cfce :=_dbd .GetStandardTable (15);if _cfce !=nil {return _cfce ;};_decf ,_cfce :=_abe .Decode (_deda ._ceed );if _cfce !=nil {return _cfce ;};_caab =int32 (_decf );_decf ,_cfce =_abe .Decode (_deda ._ceed );
if _cfce !=nil {return _cfce ;};_gbdf =int32 (_decf );_abe ,_cfce =_dbd .GetStandardTable (1);if _cfce !=nil {return _cfce ;};if _ ,_cfce =_abe .Decode (_deda ._ceed );_cfce !=nil {return _cfce ;};_deda ._ceed .Align ();}else {_eegd ,_dddfe :=_deda ._cgc .DecodeIAID (uint64 (_deda ._gfegc ),_deda ._daed );
if _dddfe !=nil {return _dddfe ;};_adc =int (_eegd );_caab ,_dddfe =_deda ._cgc .DecodeInt (_deda ._efgf );if _dddfe !=nil {return _dddfe ;};_gbdf ,_dddfe =_deda ._cgc .DecodeInt (_deda ._ebef );if _dddfe !=nil {return _dddfe ;};};if _gcgc :=_deda .setSymbolsArray ();
_gcgc !=nil {return _gcgc ;};_ead :=_deda ._dfddc [_adc ];if _bef :=_deda .decodeNewSymbols (_edd ,_dcaca ,_ead ,_caab ,_gbdf );_bef !=nil {return _bef ;};if _deda .IsHuffmanEncoded {_deda ._ceed .Align ();};return nil ;};func (_gcfg *GenericRegion )overrideAtTemplate0b (_ebaa ,_eafac ,_ebf ,_ced ,_abc ,_aca int )int {if _gcfg .GBAtOverride [0]{_ebaa &=0xFFFD;
if _gcfg .GBAtY [0]==0&&_gcfg .GBAtX [0]>=-int8 (_abc ){_ebaa |=(_ced >>uint (int8 (_aca )-_gcfg .GBAtX [0]&0x1))<<1;}else {_ebaa |=int (_gcfg .getPixel (_eafac +int (_gcfg .GBAtX [0]),_ebf +int (_gcfg .GBAtY [0])))<<1;};};if _gcfg .GBAtOverride [1]{_ebaa &=0xDFFF;
if _gcfg .GBAtY [1]==0&&_gcfg .GBAtX [1]>=-int8 (_abc ){_ebaa |=(_ced >>uint (int8 (_aca )-_gcfg .GBAtX [1]&0x1))<<13;}else {_ebaa |=int (_gcfg .getPixel (_eafac +int (_gcfg .GBAtX [1]),_ebf +int (_gcfg .GBAtY [1])))<<13;};};if _gcfg .GBAtOverride [2]{_ebaa &=0xFDFF;
if _gcfg .GBAtY [2]==0&&_gcfg .GBAtX [2]>=-int8 (_abc ){_ebaa |=(_ced >>uint (int8 (_aca )-_gcfg .GBAtX [2]&0x1))<<9;}else {_ebaa |=int (_gcfg .getPixel (_eafac +int (_gcfg .GBAtX [2]),_ebf +int (_gcfg .GBAtY [2])))<<9;};};if _gcfg .GBAtOverride [3]{_ebaa &=0xBFFF;
if _gcfg .GBAtY [3]==0&&_gcfg .GBAtX [3]>=-int8 (_abc ){_ebaa |=(_ced >>uint (int8 (_aca )-_gcfg .GBAtX [3]&0x1))<<14;}else {_ebaa |=int (_gcfg .getPixel (_eafac +int (_gcfg .GBAtX [3]),_ebf +int (_gcfg .GBAtY [3])))<<14;};};if _gcfg .GBAtOverride [4]{_ebaa &=0xEFFF;
if _gcfg .GBAtY [4]==0&&_gcfg .GBAtX [4]>=-int8 (_abc ){_ebaa |=(_ced >>uint (int8 (_aca )-_gcfg .GBAtX [4]&0x1))<<12;}else {_ebaa |=int (_gcfg .getPixel (_eafac +int (_gcfg .GBAtX [4]),_ebf +int (_gcfg .GBAtY [4])))<<12;};};if _gcfg .GBAtOverride [5]{_ebaa &=0xFFDF;
if _gcfg .GBAtY [5]==0&&_gcfg .GBAtX [5]>=-int8 (_abc ){_ebaa |=(_ced >>uint (int8 (_aca )-_gcfg .GBAtX [5]&0x1))<<5;}else {_ebaa |=int (_gcfg .getPixel (_eafac +int (_gcfg .GBAtX [5]),_ebf +int (_gcfg .GBAtY [5])))<<5;};};if _gcfg .GBAtOverride [6]{_ebaa &=0xFFFB;
if _gcfg .GBAtY [6]==0&&_gcfg .GBAtX [6]>=-int8 (_abc ){_ebaa |=(_ced >>uint (int8 (_aca )-_gcfg .GBAtX [6]&0x1))<<2;}else {_ebaa |=int (_gcfg .getPixel (_eafac +int (_gcfg .GBAtX [6]),_ebf +int (_gcfg .GBAtY [6])))<<2;};};if _gcfg .GBAtOverride [7]{_ebaa &=0xFFF7;
if _gcfg .GBAtY [7]==0&&_gcfg .GBAtX [7]>=-int8 (_abc ){_ebaa |=(_ced >>uint (int8 (_aca )-_gcfg .GBAtX [7]&0x1))<<3;}else {_ebaa |=int (_gcfg .getPixel (_eafac +int (_gcfg .GBAtX [7]),_ebf +int (_gcfg .GBAtY [7])))<<3;};};if _gcfg .GBAtOverride [8]{_ebaa &=0xF7FF;
if _gcfg .GBAtY [8]==0&&_gcfg .GBAtX [8]>=-int8 (_abc ){_ebaa |=(_ced >>uint (int8 (_aca )-_gcfg .GBAtX [8]&0x1))<<11;}else {_ebaa |=int (_gcfg .getPixel (_eafac +int (_gcfg .GBAtX [8]),_ebf +int (_gcfg .GBAtY [8])))<<11;};};if _gcfg .GBAtOverride [9]{_ebaa &=0xFFEF;
if _gcfg .GBAtY [9]==0&&_gcfg .GBAtX [9]>=-int8 (_abc ){_ebaa |=(_ced >>uint (int8 (_aca )-_gcfg .GBAtX [9]&0x1))<<4;}else {_ebaa |=int (_gcfg .getPixel (_eafac +int (_gcfg .GBAtX [9]),_ebf +int (_gcfg .GBAtY [9])))<<4;};};if _gcfg .GBAtOverride [10]{_ebaa &=0x7FFF;
if _gcfg .GBAtY [10]==0&&_gcfg .GBAtX [10]>=-int8 (_abc ){_ebaa |=(_ced >>uint (int8 (_aca )-_gcfg .GBAtX [10]&0x1))<<15;}else {_ebaa |=int (_gcfg .getPixel (_eafac +int (_gcfg .GBAtX [10]),_ebf +int (_gcfg .GBAtY [10])))<<15;};};if _gcfg .GBAtOverride [11]{_ebaa &=0xFDFF;
if _gcfg .GBAtY [11]==0&&_gcfg .GBAtX [11]>=-int8 (_abc ){_ebaa |=(_ced >>uint (int8 (_aca )-_gcfg .GBAtX [11]&0x1))<<10;}else {_ebaa |=int (_gcfg .getPixel (_eafac +int (_gcfg .GBAtX [11]),_ebf +int (_gcfg .GBAtY [11])))<<10;};};return _ebaa ;};func (_gfegf *PageInformationSegment )readResolution ()error {_dfcg ,_bfc :=_gfegf ._dfag .ReadBits (32);
if _bfc !=nil {return _bfc ;};_gfegf .ResolutionX =int (_dfcg &_f .MaxInt32 );_dfcg ,_bfc =_gfegf ._dfag .ReadBits (32);if _bfc !=nil {return _bfc ;};_gfegf .ResolutionY =int (_dfcg &_f .MaxInt32 );return nil ;};func (_fdbd *GenericRegion )overrideAtTemplate1 (_egca ,_acga ,_bfdb ,_bbd ,_aafc int )int {_egca &=0x1FF7;
if _fdbd .GBAtY [0]==0&&_fdbd .GBAtX [0]>=-int8 (_aafc ){_egca |=(_bbd >>uint (7-(int8 (_aafc )+_fdbd .GBAtX [0]))&0x1)<<3;}else {_egca |=int (_fdbd .getPixel (_acga +int (_fdbd .GBAtX [0]),_bfdb +int (_fdbd .GBAtY [0])))<<3;};return _egca ;};func (_efde *SymbolDictionary )setInSyms ()error {if _efde .Header .RTSegments !=nil {return _efde .retrieveImportSymbols ();
};_efde ._gffc =make ([]*_ea .Bitmap ,0);return nil ;};func (_gcf *GenericRegion )GetRegionInfo ()*RegionSegment {return _gcf .RegionSegment };func (_cafe *SymbolDictionary )decodeAggregate (_cacb ,_fegc uint32 )error {var (_gcga int64 ;_gdge error ;);
if _cafe .IsHuffmanEncoded {_gcga ,_gdge =_cafe .huffDecodeRefAggNInst ();if _gdge !=nil {return _gdge ;};}else {_gge ,_agfa :=_cafe ._cgc .DecodeInt (_cafe ._fcbe );if _agfa !=nil {return _agfa ;};_gcga =int64 (_gge );};if _gcga > 1{return _cafe .decodeThroughTextRegion (_cacb ,_fegc ,uint32 (_gcga ));
}else if _gcga ==1{return _cafe .decodeRefinedSymbol (_cacb ,_fegc );};return nil ;};func (_edfb *TextRegion )decodeStripT ()(_dbdad int64 ,_caga error ){if _edfb .IsHuffmanEncoded {if _edfb .SbHuffDT ==3{if _edfb ._ggga ==nil {var _fded int ;if _edfb .SbHuffFS ==3{_fded ++;
};if _edfb .SbHuffDS ==3{_fded ++;};_edfb ._ggga ,_caga =_edfb .getUserTable (_fded );if _caga !=nil {return 0,_caga ;};};_dbdad ,_caga =_edfb ._ggga .Decode (_edfb ._cfgc );if _caga !=nil {return 0,_caga ;};}else {var _dgab _dbd .Tabler ;_dgab ,_caga =_dbd .GetStandardTable (11+int (_edfb .SbHuffDT ));
if _caga !=nil {return 0,_caga ;};_dbdad ,_caga =_dgab .Decode (_edfb ._cfgc );if _caga !=nil {return 0,_caga ;};};}else {var _deeg int32 ;_deeg ,_caga =_edfb ._gdfad .DecodeInt (_edfb ._agfaa );if _caga !=nil {return 0,_caga ;};_dbdad =int64 (_deeg );
};_dbdad *=int64 (-_edfb .SbStrips );return _dbdad ,nil ;};func (_feaed *GenericRefinementRegion )updateOverride ()error {if _feaed .GrAtX ==nil ||_feaed .GrAtY ==nil {return _eg .New ("\u0041\u0054\u0020\u0070\u0069\u0078\u0065\u006c\u0073\u0020\u006e\u006ft\u0020\u0073\u0065\u0074");
};if len (_feaed .GrAtX )!=len (_feaed .GrAtY ){return _eg .New ("A\u0054\u0020\u0070\u0069xe\u006c \u0069\u006e\u0063\u006f\u006es\u0069\u0073\u0074\u0065\u006e\u0074");};_feaed ._ba =make ([]bool ,len (_feaed .GrAtX ));switch _feaed .TemplateID {case 0:if _feaed .GrAtX [0]!=-1&&_feaed .GrAtY [0]!=-1{_feaed ._ba [0]=true ;
_feaed ._dbf =true ;};if _feaed .GrAtX [1]!=-1&&_feaed .GrAtY [1]!=-1{_feaed ._ba [1]=true ;_feaed ._dbf =true ;};case 1:_feaed ._dbf =false ;};return nil ;};func (_aecff *TextRegion )encodeSymbols (_gcddg _db .BinaryWriter )(_ebgff int ,_dfbce error ){const _ggcf ="\u0065\u006e\u0063\u006f\u0064\u0065\u0053\u0079\u006d\u0062\u006f\u006c\u0073";
_deege :=make ([]byte ,4);_a .BigEndian .PutUint32 (_deege ,_aecff .NumberOfSymbols );if _ebgff ,_dfbce =_gcddg .Write (_deege );_dfbce !=nil {return _ebgff ,_df .Wrap (_dfbce ,_ggcf ,"\u004e\u0075\u006dbe\u0072\u004f\u0066\u0053\u0079\u006d\u0062\u006f\u006c\u0049\u006e\u0073\u0074\u0061\u006e\u0063\u0065\u0073");
};_cggaf ,_dfbce :=_ea .NewClassedPoints (_aecff ._agba ,_aecff ._fgeef );if _dfbce !=nil {return 0,_df .Wrap (_dfbce ,_ggcf ,"");};var _babab ,_cdgg int ;_ccaa :=_af .New ();_ccaa .Init ();if _dfbce =_ccaa .EncodeInteger (_af .IADT ,0);_dfbce !=nil {return _ebgff ,_df .Wrap (_dfbce ,_ggcf ,"\u0069\u006e\u0069\u0074\u0069\u0061\u006c\u0020\u0044\u0054");
};_geefb ,_dfbce :=_cggaf .GroupByY ();if _dfbce !=nil {return 0,_df .Wrap (_dfbce ,_ggcf ,"");};for _ ,_ggeb :=range _geefb {_gbff :=int (_ggeb .YAtIndex (0));_bccd :=_gbff -_babab ;if _dfbce =_ccaa .EncodeInteger (_af .IADT ,_bccd );_dfbce !=nil {return _ebgff ,_df .Wrap (_dfbce ,_ggcf ,"");
};var _dggba int ;for _gaab ,_ecdaa :=range _ggeb .IntSlice {switch _gaab {case 0:_bffae :=int (_ggeb .XAtIndex (_gaab ))-_cdgg ;if _dfbce =_ccaa .EncodeInteger (_af .IAFS ,_bffae );_dfbce !=nil {return _ebgff ,_df .Wrap (_dfbce ,_ggcf ,"");};_cdgg +=_bffae ;
_dggba =_cdgg ;default:_geefbg :=int (_ggeb .XAtIndex (_gaab ))-_dggba ;if _dfbce =_ccaa .EncodeInteger (_af .IADS ,_geefbg );_dfbce !=nil {return _ebgff ,_df .Wrap (_dfbce ,_ggcf ,"");};_dggba +=_geefbg ;};_bgde ,_agfe :=_aecff ._ebdc .Get (_ecdaa );if _agfe !=nil {return _ebgff ,_df .Wrap (_agfe ,_ggcf ,"");
};_ebda ,_dafd :=_aecff ._daaf [_bgde ];if !_dafd {_ebda ,_dafd =_aecff ._acbd [_bgde ];if !_dafd {return _ebgff ,_df .Errorf (_ggcf ,"\u0053\u0079\u006d\u0062\u006f\u006c:\u0020\u0027\u0025d\u0027\u0020\u0069s\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064 \u0069\u006e\u0020\u0067\u006cob\u0061\u006c\u0020\u0061\u006e\u0064\u0020\u006c\u006f\u0063\u0061\u006c\u0020\u0073\u0079\u006d\u0062\u006f\u006c\u0020\u006d\u0061\u0070",_bgde );
};};if _agfe =_ccaa .EncodeIAID (_aecff ._fbcgg ,_ebda );_agfe !=nil {return _ebgff ,_df .Wrap (_agfe ,_ggcf ,"");};};if _dfbce =_ccaa .EncodeOOB (_af .IADS );_dfbce !=nil {return _ebgff ,_df .Wrap (_dfbce ,_ggcf ,"");};};_ccaa .Final ();_acdca ,_dfbce :=_ccaa .WriteTo (_gcddg );
if _dfbce !=nil {return _ebgff ,_df .Wrap (_dfbce ,_ggcf ,"");};_ebgff +=int (_acdca );return _ebgff ,nil ;};func (_gb *EndOfStripe )Init (h *Header ,r *_db .Reader )error {_gb ._cg =r ;return _gb .parseHeader ()};func (_bgff *PatternDictionary )readGrayMax ()error {_fcda ,_bcdcd :=_bgff ._dabd .ReadBits (32);
if _bcdcd !=nil {return _bcdcd ;};_bgff .GrayMax =uint32 (_fcda &_f .MaxUint32 );return nil ;};func (_gef *PatternDictionary )setGbAtPixels (){if _gef .HDTemplate ==0{_gef .GBAtX =make ([]int8 ,4);_gef .GBAtY =make ([]int8 ,4);_gef .GBAtX [0]=-int8 (_gef .HdpWidth );
_gef .GBAtY [0]=0;_gef .GBAtX [1]=-3;_gef .GBAtY [1]=-1;_gef .GBAtX [2]=2;_gef .GBAtY [2]=-2;_gef .GBAtX [3]=-2;_gef .GBAtY [3]=-2;}else {_gef .GBAtX =[]int8 {-int8 (_gef .HdpWidth )};_gef .GBAtY =[]int8 {0};};};func (_ccfaa *PageInformationSegment )readRequiresAuxiliaryBuffer ()error {_gdbf ,_ffb :=_ccfaa ._dfag .ReadBit ();
if _ffb !=nil {return _ffb ;};if _gdbf ==1{_ccfaa ._efcd =true ;};return nil ;};func (_gdg *HalftoneRegion )shiftAndFill (_fcff int )int {_fcff >>=8;if _fcff < 0{_bbadd :=int (_f .Log (float64 (_edcfg (_fcff )))/_f .Log (2));_cbdf :=31-_bbadd ;for _feb :=1;
_feb < _cbdf ;_feb ++{_fcff |=1<<uint (31-_feb );};};return _fcff ;};func (_gcbfc *TextRegion )decodeCurrentT ()(int64 ,error ){if _gcbfc .SbStrips !=1{if _gcbfc .IsHuffmanEncoded {_ebbb ,_gbgd :=_gcbfc ._cfgc .ReadBits (byte (_gcbfc .LogSBStrips ));return int64 (_ebbb ),_gbgd ;
};_ceff ,_ffeb :=_gcbfc ._gdfad .DecodeInt (_gcbfc ._ggbb );if _ffeb !=nil {return 0,_ffeb ;};return int64 (_ceff ),nil ;};return 0,nil ;};func (_dbdae *TextRegion )decodeRI ()(int64 ,error ){if !_dbdae .UseRefinement {return 0,nil ;};if _dbdae .IsHuffmanEncoded {_beb ,_adage :=_dbdae ._cfgc .ReadBit ();
return int64 (_beb ),_adage ;};_eegc ,_cgae :=_dbdae ._gdfad .DecodeInt (_dbdae ._ccba );return int64 (_eegc ),_cgae ;};func (_cdee *TextRegion )decodeSymInRefSize ()(int64 ,error ){const _abdbd ="\u0064e\u0063o\u0064\u0065\u0053\u0079\u006dI\u006e\u0052e\u0066\u0053\u0069\u007a\u0065";
if _cdee .SbHuffRSize ==0{_ddgg ,_daced :=_dbd .GetStandardTable (1);if _daced !=nil {return 0,_df .Wrap (_daced ,_abdbd ,"");};return _ddgg .Decode (_cdee ._cfgc );};if _cdee ._fffe ==nil {var (_geec int ;_aace error ;);if _cdee .SbHuffFS ==3{_geec ++;
};if _cdee .SbHuffDS ==3{_geec ++;};if _cdee .SbHuffDT ==3{_geec ++;};if _cdee .SbHuffRDWidth ==3{_geec ++;};if _cdee .SbHuffRDHeight ==3{_geec ++;};if _cdee .SbHuffRDX ==3{_geec ++;};if _cdee .SbHuffRDY ==3{_geec ++;};_cdee ._fffe ,_aace =_cdee .getUserTable (_geec );
if _aace !=nil {return 0,_df .Wrap (_aace ,_abdbd ,"");};};_gead ,_gdcc :=_cdee ._fffe .Decode (_cdee ._cfgc );if _gdcc !=nil {return 0,_df .Wrap (_gdcc ,_abdbd ,"");};return _gead ,nil ;};func (_aaff *GenericRegion )updateOverrideFlags ()error {const _dcge ="\u0075\u0070\u0064\u0061te\u004f\u0076\u0065\u0072\u0072\u0069\u0064\u0065\u0046\u006c\u0061\u0067\u0073";
if _aaff .GBAtX ==nil ||_aaff .GBAtY ==nil {return nil ;};if len (_aaff .GBAtX )!=len (_aaff .GBAtY ){return _df .Errorf (_dcge ,"i\u006eco\u0073i\u0073t\u0065\u006e\u0074\u0020\u0041T\u0020\u0070\u0069x\u0065\u006c\u002e\u0020\u0041m\u006f\u0075\u006et\u0020\u006f\u0066\u0020\u0027\u0078\u0027\u0020\u0070\u0069\u0078e\u006c\u0073\u003a %d\u002c\u0020\u0041\u006d\u006f\u0075n\u0074\u0020\u006f\u0066\u0020\u0027\u0079\u0027\u0020\u0070\u0069\u0078e\u006cs\u003a\u0020\u0025\u0064",len (_aaff .GBAtX ),len (_aaff .GBAtY ));
};_aaff .GBAtOverride =make ([]bool ,len (_aaff .GBAtX ));switch _aaff .GBTemplate {case 0:if !_aaff .UseExtTemplates {if _aaff .GBAtX [0]!=3||_aaff .GBAtY [0]!=-1{_aaff .setOverrideFlag (0);};if _aaff .GBAtX [1]!=-3||_aaff .GBAtY [1]!=-1{_aaff .setOverrideFlag (1);
};if _aaff .GBAtX [2]!=2||_aaff .GBAtY [2]!=-2{_aaff .setOverrideFlag (2);};if _aaff .GBAtX [3]!=-2||_aaff .GBAtY [3]!=-2{_aaff .setOverrideFlag (3);};}else {if _aaff .GBAtX [0]!=-2||_aaff .GBAtY [0]!=0{_aaff .setOverrideFlag (0);};if _aaff .GBAtX [1]!=0||_aaff .GBAtY [1]!=-2{_aaff .setOverrideFlag (1);
};if _aaff .GBAtX [2]!=-2||_aaff .GBAtY [2]!=-1{_aaff .setOverrideFlag (2);};if _aaff .GBAtX [3]!=-1||_aaff .GBAtY [3]!=-2{_aaff .setOverrideFlag (3);};if _aaff .GBAtX [4]!=1||_aaff .GBAtY [4]!=-2{_aaff .setOverrideFlag (4);};if _aaff .GBAtX [5]!=2||_aaff .GBAtY [5]!=-1{_aaff .setOverrideFlag (5);
};if _aaff .GBAtX [6]!=-3||_aaff .GBAtY [6]!=0{_aaff .setOverrideFlag (6);};if _aaff .GBAtX [7]!=-4||_aaff .GBAtY [7]!=0{_aaff .setOverrideFlag (7);};if _aaff .GBAtX [8]!=2||_aaff .GBAtY [8]!=-2{_aaff .setOverrideFlag (8);};if _aaff .GBAtX [9]!=3||_aaff .GBAtY [9]!=-1{_aaff .setOverrideFlag (9);
};if _aaff .GBAtX [10]!=-2||_aaff .GBAtY [10]!=-2{_aaff .setOverrideFlag (10);};if _aaff .GBAtX [11]!=-3||_aaff .GBAtY [11]!=-1{_aaff .setOverrideFlag (11);};};case 1:if _aaff .GBAtX [0]!=3||_aaff .GBAtY [0]!=-1{_aaff .setOverrideFlag (0);};case 2:if _aaff .GBAtX [0]!=2||_aaff .GBAtY [0]!=-1{_aaff .setOverrideFlag (0);
};case 3:if _aaff .GBAtX [0]!=2||_aaff .GBAtY [0]!=-1{_aaff .setOverrideFlag (0);};};return nil ;};func (_ge *GenericRefinementRegion )getGrReference ()(*_ea .Bitmap ,error ){segments :=_ge ._fd .RTSegments ;if len (segments )==0{return nil ,_eg .New ("\u0072\u0065f\u0065\u0072\u0065\u006e\u0063\u0065\u0064\u0020\u0073\u0065\u0067\u006d\u0065\u006e\u0074\u0020\u006e\u006f\u0074\u0020\u0065\u0078is\u0074\u0073");
};_dfe ,_fb :=segments [0].GetSegmentData ();if _fb !=nil {return nil ,_fb ;};_dfdd ,_ffa :=_dfe .(Regioner );if !_ffa {return nil ,_d .Errorf ("\u0072\u0065\u0066\u0065\u0072r\u0065\u0064\u0020\u0074\u006f\u0020\u0073\u0065\u0067\u006d\u0065\u006e\u0074 \u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0061\u0020\u0072\u0065\u0067\u0069\u006f\u006e\u0065\u0072\u003a\u0020\u0025\u0054",_dfe );
};return _dfdd .GetRegionBitmap ();};func _bde (_gbg *_db .Reader ,_begd *Header )*GenericRefinementRegion {return &GenericRefinementRegion {_ega :_gbg ,RegionInfo :NewRegionSegment (_gbg ),_fd :_begd ,_ad :&template0 {},_dbc :&template1 {}};};func (_gbde *SymbolDictionary )encodeNumSyms (_afecc _db .BinaryWriter )(_bacb int ,_ecfc error ){const _eeaa ="\u0065\u006e\u0063\u006f\u0064\u0065\u004e\u0075\u006d\u0053\u0079\u006d\u0073";
_acbb :=make ([]byte ,4);_a .BigEndian .PutUint32 (_acbb ,_gbde .NumberOfExportedSymbols );if _bacb ,_ecfc =_afecc .Write (_acbb );_ecfc !=nil {return _bacb ,_df .Wrap (_ecfc ,_eeaa ,"\u0065\u0078p\u006f\u0072\u0074e\u0064\u0020\u0073\u0079\u006d\u0062\u006f\u006c\u0073");
};_a .BigEndian .PutUint32 (_acbb ,_gbde .NumberOfNewSymbols );_febg ,_ecfc :=_afecc .Write (_acbb );if _ecfc !=nil {return _bacb ,_df .Wrap (_ecfc ,_eeaa ,"n\u0065\u0077\u0020\u0073\u0079\u006d\u0062\u006f\u006c\u0073");};return _bacb +_febg ,nil ;};func (_fgca *TextRegion )computeSymbolCodeLength ()error {if _fgca .IsHuffmanEncoded {return _fgca .symbolIDCodeLengths ();
};_fgca ._gadc =int8 (_f .Ceil (_f .Log (float64 (_fgca .NumberOfSymbols ))/_f .Log (2)));return nil ;};func (_ccb *SymbolDictionary )checkInput ()error {if _ccb .SdHuffDecodeHeightSelection ==2{_c .Log .Debug ("\u0053\u0079\u006d\u0062\u006fl\u0020\u0044\u0069\u0063\u0074i\u006fn\u0061\u0072\u0079\u0020\u0044\u0065\u0063\u006f\u0064\u0065\u0020\u0048\u0065\u0069\u0067\u0068\u0074\u0020\u0053e\u006c\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0025\u0064\u0020\u0076\u0061\u006c\u0075\u0065\u0020\u006e\u006f\u0074\u0020\u0070\u0065r\u006d\u0069\u0074\u0074\u0065\u0064",_ccb .SdHuffDecodeHeightSelection );
};if _ccb .SdHuffDecodeWidthSelection ==2{_c .Log .Debug ("\u0053\u0079\u006d\u0062\u006f\u006c\u0020\u0044\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079 \u0044\u0065\u0063\u006f\u0064\u0065\u0020\u0057\u0069\u0064t\u0068\u0020\u0053\u0065\u006c\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0025\u0064\u0020\u0076\u0061l\u0075\u0065\u0020\u006e\u006f\u0074 \u0070\u0065r\u006d\u0069t\u0074e\u0064",_ccb .SdHuffDecodeWidthSelection );
};if _ccb .IsHuffmanEncoded {if _ccb .SdTemplate !=0{_c .Log .Debug ("\u0053\u0044T\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0028\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062e \u0030\u0029",_ccb .SdTemplate );};
if !_ccb .UseRefinementAggregation {if !_ccb .UseRefinementAggregation {if _ccb ._ebfa {_c .Log .Debug ("\u0049\u0073\u0043\u006f\u0064\u0069\u006e\u0067C\u006f\u006e\u0074ex\u0074\u0052\u0065\u0074\u0061\u0069n\u0065\u0064\u0020\u003d\u0020\u0074\u0072\u0075\u0065\u0020\u0028\u0073\u0068\u006f\u0075l\u0064\u0020\u0062\u0065\u0020\u0066\u0061\u006cs\u0065\u0029");
_ccb ._ebfa =false ;};if _ccb ._gca {_c .Log .Debug ("\u0069s\u0043\u006fd\u0069\u006e\u0067\u0043o\u006e\u0074\u0065x\u0074\u0055\u0073\u0065\u0064\u0020\u003d\u0020\u0074ru\u0065\u0020\u0028s\u0068\u006fu\u006c\u0064\u0020\u0062\u0065\u0020f\u0061\u006cs\u0065\u0029");
_ccb ._gca =false ;};};};}else {if _ccb .SdHuffBMSizeSelection !=0{_c .Log .Debug ("\u0053\u0064\u0048\u0075\u0066\u0066B\u004d\u0053\u0069\u007a\u0065\u0053\u0065\u006c\u0065\u0063\u0074\u0069\u006fn\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u0062\u0065\u0020\u0030");
_ccb .SdHuffBMSizeSelection =0;};if _ccb .SdHuffDecodeWidthSelection !=0{_c .Log .Debug ("\u0053\u0064\u0048\u0075\u0066\u0066\u0044\u0065\u0063\u006f\u0064\u0065\u0057\u0069\u0064\u0074\u0068\u0053\u0065\u006c\u0065\u0063\u0074\u0069o\u006e\u0020\u0073\u0068\u006fu\u006c\u0064 \u0062\u0065\u0020\u0030");
_ccb .SdHuffDecodeWidthSelection =0;};if _ccb .SdHuffDecodeHeightSelection !=0{_c .Log .Debug ("\u0053\u0064\u0048\u0075\u0066\u0066\u0044\u0065\u0063\u006f\u0064\u0065\u0048e\u0069\u0067\u0068\u0074\u0053\u0065l\u0065\u0063\u0074\u0069\u006f\u006e\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u0062\u0065\u0020\u0030");
_ccb .SdHuffDecodeHeightSelection =0;};};if !_ccb .UseRefinementAggregation {if _ccb .SdrTemplate !=0{_c .Log .Debug ("\u0053\u0044\u0052\u0054\u0065\u006d\u0070\u006c\u0061\u0074e\u0020\u003d\u0020\u0025\u0064\u0020\u0028s\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0030\u0029",_ccb .SdrTemplate );
_ccb .SdrTemplate =0;};};if !_ccb .IsHuffmanEncoded ||!_ccb .UseRefinementAggregation {if _ccb .SdHuffAggInstanceSelection {_c .Log .Debug ("\u0053d\u0048\u0075f\u0066\u0041\u0067g\u0049\u006e\u0073\u0074\u0061\u006e\u0063e\u0053\u0065\u006c\u0065\u0063\u0074i\u006f\u006e\u0020\u003d\u0020\u0025\u0064\u0020\u0028\u0073\u0068o\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0030\u0029",_ccb .SdHuffAggInstanceSelection );
};};return nil ;};type EncodeInitializer interface{InitEncode ();};func (_eaf *GenericRefinementRegion )decodeTypicalPredictedLineTemplate1 (_daf ,_gee ,_ca ,_ae ,_eaag ,_fea ,_gff ,_bf ,_becg int )(_dga error ){var (_dcd ,_cgb int ;_gfc ,_afbe int ;_cae ,_dce int ;
_fefa byte ;);if _daf > 0{_fefa ,_dga =_eaf .RegionBitmap .GetByte (_gff -_ca );if _dga !=nil {return _dga ;};_gfc =int (_fefa );};if _bf > 0&&_bf <=_eaf .ReferenceBitmap .Height {_fefa ,_dga =_eaf .ReferenceBitmap .GetByte (_becg -_ae +_fea );if _dga !=nil {return _dga ;
};_afbe =int (_fefa )<<2;};if _bf >=0&&_bf < _eaf .ReferenceBitmap .Height {_fefa ,_dga =_eaf .ReferenceBitmap .GetByte (_becg +_fea );if _dga !=nil {return _dga ;};_cae =int (_fefa );};if _bf > -2&&_bf < _eaf .ReferenceBitmap .Height -1{_fefa ,_dga =_eaf .ReferenceBitmap .GetByte (_becg +_ae +_fea );
if _dga !=nil {return _dga ;};_dce =int (_fefa );};_dcd =((_gfc >>5)&0x6)|((_dce >>2)&0x30)|(_cae &0xc0)|(_afbe &0x200);_cgb =((_dce >>2)&0x70)|(_cae &0xc0)|(_afbe &0x700);var _cfed int ;for _eba :=0;_eba < _eaag ;_eba =_cfed {var (_bac int ;_fae int ;
);_cfed =_eba +8;if _bac =_gee -_eba ;_bac > 8{_bac =8;};_cfa :=_cfed < _gee ;_ebab :=_cfed < _eaf .ReferenceBitmap .Width ;_cgbg :=_fea +1;if _daf > 0{_fefa =0;if _cfa {_fefa ,_dga =_eaf .RegionBitmap .GetByte (_gff -_ca +1);if _dga !=nil {return _dga ;
};};_gfc =(_gfc <<8)|int (_fefa );};if _bf > 0&&_bf <=_eaf .ReferenceBitmap .Height {var _aeg int ;if _ebab {_fefa ,_dga =_eaf .ReferenceBitmap .GetByte (_becg -_ae +_cgbg );if _dga !=nil {return _dga ;};_aeg =int (_fefa )<<2;};_afbe =(_afbe <<8)|_aeg ;
};if _bf >=0&&_bf < _eaf .ReferenceBitmap .Height {_fefa =0;if _ebab {_fefa ,_dga =_eaf .ReferenceBitmap .GetByte (_becg +_cgbg );if _dga !=nil {return _dga ;};};_cae =(_cae <<8)|int (_fefa );};if _bf > -2&&_bf < (_eaf .ReferenceBitmap .Height -1){_fefa =0;
if _ebab {_fefa ,_dga =_eaf .ReferenceBitmap .GetByte (_becg +_ae +_cgbg );if _dga !=nil {return _dga ;};};_dce =(_dce <<8)|int (_fefa );};for _gdd :=0;_gdd < _bac ;_gdd ++{var _bd int ;_bb :=(_cgb >>4)&0x1ff;switch _bb {case 0x1ff:_bd =1;case 0x00:_bd =0;
default:_eaf ._fef .SetIndex (int32 (_dcd ));_bd ,_dga =_eaf ._cc .DecodeBit (_eaf ._fef );if _dga !=nil {return _dga ;};};_cbd :=uint (7-_gdd );_fae |=_bd <<_cbd ;_dcd =((_dcd &0x0d6)<<1)|_bd |(_gfc >>_cbd +5)&0x002|((_dce >>_cbd +2)&0x010)|((_cae >>_cbd )&0x040)|((_afbe >>_cbd )&0x200);
_cgb =((_cgb &0xdb)<<1)|((_dce >>_cbd +2)&0x010)|((_cae >>_cbd )&0x080)|((_afbe >>_cbd )&0x400);};_dga =_eaf .RegionBitmap .SetByte (_gff ,byte (_fae ));if _dga !=nil {return _dga ;};_gff ++;_becg ++;};return nil ;};