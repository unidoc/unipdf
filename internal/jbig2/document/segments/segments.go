//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package segments ;import (_d "encoding/binary";_f "errors";_bg "fmt";_eaf "github.com/unidoc/unipdf/v4/common";_ba "github.com/unidoc/unipdf/v4/internal/bitwise";_fb "github.com/unidoc/unipdf/v4/internal/jbig2/basic";_ff "github.com/unidoc/unipdf/v4/internal/jbig2/bitmap";
_ea "github.com/unidoc/unipdf/v4/internal/jbig2/decoder/arithmetic";_cg "github.com/unidoc/unipdf/v4/internal/jbig2/decoder/huffman";_ce "github.com/unidoc/unipdf/v4/internal/jbig2/decoder/mmr";_be "github.com/unidoc/unipdf/v4/internal/jbig2/encoder/arithmetic";
_ae "github.com/unidoc/unipdf/v4/internal/jbig2/errors";_db "github.com/unidoc/unipdf/v4/internal/jbig2/internal";_b "image";_a "io";_g "math";_ef "strings";_e "time";);func (_baa *GenericRefinementRegion )decodeTypicalPredictedLineTemplate0 (_gb ,_gg ,_dcd ,_bga ,_feg ,_dad ,_deg ,_ca ,_ded int )error {var (_eg ,_gac ,_fa ,_bgb ,_ced ,_bb int ;
_ega byte ;_af error ;);if _gb > 0{_ega ,_af =_baa .RegionBitmap .GetByte (_deg -_dcd );if _af !=nil {return _af ;};_fa =int (_ega );};if _ca > 0&&_ca <=_baa .ReferenceBitmap .Height {_ega ,_af =_baa .ReferenceBitmap .GetByte (_ded -_bga +_dad );if _af !=nil {return _af ;
};_bgb =int (_ega )<<4;};if _ca >=0&&_ca < _baa .ReferenceBitmap .Height {_ega ,_af =_baa .ReferenceBitmap .GetByte (_ded +_dad );if _af !=nil {return _af ;};_ced =int (_ega )<<1;};if _ca > -2&&_ca < _baa .ReferenceBitmap .Height -1{_ega ,_af =_baa .ReferenceBitmap .GetByte (_ded +_bga +_dad );
if _af !=nil {return _af ;};_bb =int (_ega );};_eg =((_fa >>5)&0x6)|((_bb >>2)&0x30)|(_ced &0x180)|(_bgb &0xc00);var _dg int ;for _dec :=0;_dec < _feg ;_dec =_dg {var _bea int ;_dg =_dec +8;var _afb int ;if _afb =_gg -_dec ;_afb > 8{_afb =8;};_df :=_dg < _gg ;
_bcdg :=_dg < _baa .ReferenceBitmap .Width ;_gaf :=_dad +1;if _gb > 0{_ega =0;if _df {_ega ,_af =_baa .RegionBitmap .GetByte (_deg -_dcd +1);if _af !=nil {return _af ;};};_fa =(_fa <<8)|int (_ega );};if _ca > 0&&_ca <=_baa .ReferenceBitmap .Height {var _cba int ;
if _bcdg {_ega ,_af =_baa .ReferenceBitmap .GetByte (_ded -_bga +_gaf );if _af !=nil {return _af ;};_cba =int (_ega )<<4;};_bgb =(_bgb <<8)|_cba ;};if _ca >=0&&_ca < _baa .ReferenceBitmap .Height {var _aag int ;if _bcdg {_ega ,_af =_baa .ReferenceBitmap .GetByte (_ded +_gaf );
if _af !=nil {return _af ;};_aag =int (_ega )<<1;};_ced =(_ced <<8)|_aag ;};if _ca > -2&&_ca < (_baa .ReferenceBitmap .Height -1){_ega =0;if _bcdg {_ega ,_af =_baa .ReferenceBitmap .GetByte (_ded +_bga +_gaf );if _af !=nil {return _af ;};};_bb =(_bb <<8)|int (_ega );
};for _cab :=0;_cab < _afb ;_cab ++{var _fgg int ;_egc :=false ;_bba :=(_eg >>4)&0x1ff;switch _bba {case 0x1ff:_egc =true ;_fgg =1;case 0x00:_egc =true ;};if !_egc {if _baa ._ed {_gac =_baa .overrideAtTemplate0 (_eg ,_dec +_cab ,_gb ,_bea ,_cab );_baa ._dcg .SetIndex (int32 (_gac ));
}else {_baa ._dcg .SetIndex (int32 (_eg ));};_fgg ,_af =_baa ._da .DecodeBit (_baa ._dcg );if _af !=nil {return _af ;};};_cef :=uint (7-_cab );_bea |=_fgg <<_cef ;_eg =((_eg &0xdb6)<<1)|_fgg |(_fa >>_cef +5)&0x002|((_bb >>_cef +2)&0x010)|((_ced >>_cef )&0x080)|((_bgb >>_cef )&0x400);
};_af =_baa .RegionBitmap .SetByte (_deg ,byte (_bea ));if _af !=nil {return _af ;};_deg ++;_ded ++;};return nil ;};func (_edg *SymbolDictionary )huffDecodeRefAggNInst ()(int64 ,error ){if !_edg .SdHuffAggInstanceSelection {_cgeb ,_edgf :=_cg .GetStandardTable (1);
if _edgf !=nil {return 0,_edgf ;};return _cgeb .Decode (_edg ._dffd );};if _edg ._gec ==nil {var (_eedd int ;_ebggfg error ;);if _edg .SdHuffDecodeHeightSelection ==3{_eedd ++;};if _edg .SdHuffDecodeWidthSelection ==3{_eedd ++;};if _edg .SdHuffBMSizeSelection ==3{_eedd ++;
};_edg ._gec ,_ebggfg =_edg .getUserTable (_eedd );if _ebggfg !=nil {return 0,_ebggfg ;};};return _edg ._gec .Decode (_edg ._dffd );};func (_cadc *TextRegion )encodeSymbols (_acfd _ba .BinaryWriter )(_fbcd int ,_dgeag error ){const _ggcec ="\u0065\u006e\u0063\u006f\u0064\u0065\u0053\u0079\u006d\u0062\u006f\u006c\u0073";
_ggbc :=make ([]byte ,4);_d .BigEndian .PutUint32 (_ggbc ,_cadc .NumberOfSymbols );if _fbcd ,_dgeag =_acfd .Write (_ggbc );_dgeag !=nil {return _fbcd ,_ae .Wrap (_dgeag ,_ggcec ,"\u004e\u0075\u006dbe\u0072\u004f\u0066\u0053\u0079\u006d\u0062\u006f\u006c\u0049\u006e\u0073\u0074\u0061\u006e\u0063\u0065\u0073");
};_acba ,_dgeag :=_ff .NewClassedPoints (_cadc ._bgce ,_cadc ._bggc );if _dgeag !=nil {return 0,_ae .Wrap (_dgeag ,_ggcec ,"");};var _aebc ,_deee int ;_egcg :=_be .New ();_egcg .Init ();if _dgeag =_egcg .EncodeInteger (_be .IADT ,0);_dgeag !=nil {return _fbcd ,_ae .Wrap (_dgeag ,_ggcec ,"\u0069\u006e\u0069\u0074\u0069\u0061\u006c\u0020\u0044\u0054");
};_bgdca ,_dgeag :=_acba .GroupByY ();if _dgeag !=nil {return 0,_ae .Wrap (_dgeag ,_ggcec ,"");};for _ ,_cggb :=range _bgdca {_gdbf :=int (_cggb .YAtIndex (0));_cfbb :=_gdbf -_aebc ;if _dgeag =_egcg .EncodeInteger (_be .IADT ,_cfbb );_dgeag !=nil {return _fbcd ,_ae .Wrap (_dgeag ,_ggcec ,"");
};var _baaf int ;for _edag ,_dgba :=range _cggb .IntSlice {switch _edag {case 0:_fefc :=int (_cggb .XAtIndex (_edag ))-_deee ;if _dgeag =_egcg .EncodeInteger (_be .IAFS ,_fefc );_dgeag !=nil {return _fbcd ,_ae .Wrap (_dgeag ,_ggcec ,"");};_deee +=_fefc ;
_baaf =_deee ;default:_ceea :=int (_cggb .XAtIndex (_edag ))-_baaf ;if _dgeag =_egcg .EncodeInteger (_be .IADS ,_ceea );_dgeag !=nil {return _fbcd ,_ae .Wrap (_dgeag ,_ggcec ,"");};_baaf +=_ceea ;};_eegb ,_ecedg :=_cadc ._dfbf .Get (_dgba );if _ecedg !=nil {return _fbcd ,_ae .Wrap (_ecedg ,_ggcec ,"");
};_ecdd ,_aeefb :=_cadc ._dagc [_eegb ];if !_aeefb {_ecdd ,_aeefb =_cadc ._addf [_eegb ];if !_aeefb {return _fbcd ,_ae .Errorf (_ggcec ,"\u0053\u0079\u006d\u0062\u006f\u006c:\u0020\u0027\u0025d\u0027\u0020\u0069s\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064 \u0069\u006e\u0020\u0067\u006cob\u0061\u006c\u0020\u0061\u006e\u0064\u0020\u006c\u006f\u0063\u0061\u006c\u0020\u0073\u0079\u006d\u0062\u006f\u006c\u0020\u006d\u0061\u0070",_eegb );
};};if _ecedg =_egcg .EncodeIAID (_cadc ._aff ,_ecdd );_ecedg !=nil {return _fbcd ,_ae .Wrap (_ecedg ,_ggcec ,"");};};if _dgeag =_egcg .EncodeOOB (_be .IADS );_dgeag !=nil {return _fbcd ,_ae .Wrap (_dgeag ,_ggcec ,"");};};_egcg .Final ();_ffbad ,_dgeag :=_egcg .WriteTo (_acfd );
if _dgeag !=nil {return _fbcd ,_ae .Wrap (_dgeag ,_ggcec ,"");};_fbcd +=int (_ffbad );return _fbcd ,nil ;};func (_dca *GenericRefinementRegion )decodeTypicalPredictedLine (_aad ,_fbec ,_aaf ,_bde ,_gca ,_gfdg int )error {_gab :=_aad -int (_dca .ReferenceDY );
_edc :=_dca .ReferenceBitmap .GetByteIndex (0,_gab );_fea :=_dca .RegionBitmap .GetByteIndex (0,_aad );var _bfaa error ;switch _dca .TemplateID {case 0:_bfaa =_dca .decodeTypicalPredictedLineTemplate0 (_aad ,_fbec ,_aaf ,_bde ,_gca ,_gfdg ,_fea ,_gab ,_edc );
case 1:_bfaa =_dca .decodeTypicalPredictedLineTemplate1 (_aad ,_fbec ,_aaf ,_bde ,_gca ,_gfdg ,_fea ,_gab ,_edc );};return _bfaa ;};func (_cbga *SymbolDictionary )getUserTable (_egcc int )(_cg .Tabler ,error ){var _adagc int ;for _ ,_deagg :=range _cbga .Header .RTSegments {if _deagg .Type ==53{if _adagc ==_egcc {_aefb ,_eea :=_deagg .GetSegmentData ();
if _eea !=nil {return nil ,_eea ;};_cdbg :=_aefb .(_cg .BasicTabler );return _cg .NewEncodedTable (_cdbg );};_adagc ++;};};return nil ,nil ;};func NewRegionSegment (r *_ba .Reader )*RegionSegment {return &RegionSegment {_gdabf :r }};func (_gged *PageInformationSegment )readWidthAndHeight ()error {_gfea ,_ecd :=_gged ._efce .ReadBits (32);
if _ecd !=nil {return _ecd ;};_gged .PageBMWidth =int (_gfea &_g .MaxInt32 );_gfea ,_ecd =_gged ._efce .ReadBits (32);if _ecd !=nil {return _ecd ;};_gged .PageBMHeight =int (_gfea &_g .MaxInt32 );return nil ;};func (_fgdc *PageInformationSegment )readCombinationOperatorOverrideAllowed ()error {_adab ,_cefg :=_fgdc ._efce .ReadBit ();
if _cefg !=nil {return _cefg ;};if _adab ==1{_fgdc ._ccef =true ;};return nil ;};func (_dce *GenericRegion )Init (h *Header ,r *_ba .Reader )error {_dce .RegionSegment =NewRegionSegment (r );_dce ._bca =r ;return _dce .parseHeader ();};func (_bfdf *SymbolDictionary )getToExportFlags ()([]int ,error ){var (_cfbg int ;
_cgce int32 ;_agdg error ;_gffc =int32 (_bfdf ._efaf +_bfdf .NumberOfNewSymbols );_cdce =make ([]int ,_gffc ););for _dagf :=int32 (0);_dagf < _gffc ;_dagf +=_cgce {if _bfdf .IsHuffmanEncoded {_dfdgb ,_dfbb :=_cg .GetStandardTable (1);if _dfbb !=nil {return nil ,_dfbb ;
};_ccee ,_dfbb :=_dfdgb .Decode (_bfdf ._dffd );if _dfbb !=nil {return nil ,_dfbb ;};_cgce =int32 (_ccee );}else {_cgce ,_agdg =_bfdf ._fcae .DecodeInt (_bfdf ._fccc );if _agdg !=nil {return nil ,_agdg ;};};if _cgce !=0{if _dagf +_cgce > _gffc {return nil ,_ae .Error ("\u0053\u0079\u006d\u0062\u006f\u006cD\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u002e\u0067\u0065\u0074T\u006f\u0045\u0078\u0070\u006f\u0072\u0074F\u006c\u0061\u0067\u0073","\u006d\u0061\u006c\u0066\u006f\u0072m\u0065\u0064\u0020\u0069\u006e\u0070\u0075\u0074\u0020\u0064\u0061\u0074\u0061\u0020\u0070\u0072\u006f\u0076\u0069\u0064e\u0064\u002e\u0020\u0069\u006e\u0064\u0065\u0078\u0020\u006f\u0075\u0074\u0020\u006ff\u0020r\u0061\u006e\u0067\u0065");
};for _aggc :=_dagf ;_aggc < _dagf +_cgce ;_aggc ++{_cdce [_aggc ]=_cfbg ;};};if _cfbg ==0{_cfbg =1;}else {_cfbg =0;};};return _cdce ,nil ;};func (_bggge *TableSegment )HtPS ()int32 {return _bggge ._dgefc };func (_cdff *PageInformationSegment )checkInput ()error {if _cdff .PageBMHeight ==_g .MaxInt32 {if !_cdff .IsStripe {_eaf .Log .Debug ("P\u0061\u0067\u0065\u0049\u006e\u0066\u006f\u0072\u006da\u0074\u0069\u006f\u006e\u0053\u0065\u0067me\u006e\u0074\u002e\u0049s\u0053\u0074\u0072\u0069\u0070\u0065\u0020\u0073\u0068ou\u006c\u0064 \u0062\u0065\u0020\u0074\u0072\u0075\u0065\u002e");
};};return nil ;};func (_agd *GenericRegion )InitEncode (bm *_ff .Bitmap ,xLoc ,yLoc ,template int ,duplicateLineRemoval bool )error {const _fabed ="\u0047e\u006e\u0065\u0072\u0069\u0063\u0052\u0065\u0067\u0069\u006f\u006e.\u0049\u006e\u0069\u0074\u0045\u006e\u0063\u006f\u0064\u0065";
if bm ==nil {return _ae .Error (_fabed ,"\u0070\u0072\u006f\u0076id\u0065\u0064\u0020\u006e\u0069\u006c\u0020\u0062\u0069\u0074\u006d\u0061\u0070");};if xLoc < 0||yLoc < 0{return _ae .Error (_fabed ,"\u0078\u0020\u0061\u006e\u0064\u0020\u0079\u0020\u006c\u006f\u0063\u0061\u0074i\u006f\u006e\u0020\u006d\u0075\u0073t\u0020\u0062\u0065\u0020\u0067\u0072\u0065\u0061\u0074\u0065\u0072\u0020\u0074h\u0061\u006e\u0020\u0030");
};_agd .Bitmap =bm ;_agd .GBTemplate =byte (template );switch _agd .GBTemplate {case 0:_agd .GBAtX =[]int8 {3,-3,2,-2};_agd .GBAtY =[]int8 {-1,-1,-2,-2};case 1:_agd .GBAtX =[]int8 {3};_agd .GBAtY =[]int8 {-1};case 2,3:_agd .GBAtX =[]int8 {2};_agd .GBAtY =[]int8 {-1};
default:return _ae .Errorf (_fabed ,"\u0070\u0072o\u0076\u0069\u0064\u0065\u0064 \u0074\u0065\u006d\u0070\u006ca\u0074\u0065\u003a\u0020\u0027\u0025\u0064\u0027\u0020\u006e\u006f\u0074\u0020\u0069\u006e\u0020\u0076\u0061\u006c\u0069\u0064\u0020\u0072\u0061\u006e\u0067\u0065\u0020\u007b\u0030\u002c\u0031\u002c\u0032\u002c\u0033\u007d",template );
};_agd .RegionSegment =&RegionSegment {BitmapHeight :uint32 (bm .Height ),BitmapWidth :uint32 (bm .Width ),XLocation :uint32 (xLoc ),YLocation :uint32 (yLoc )};_agd .IsTPGDon =duplicateLineRemoval ;return nil ;};func (_gdg *GenericRefinementRegion )readAtPixels ()error {_gdg .GrAtX =make ([]int8 ,2);
_gdg .GrAtY =make ([]int8 ,2);_ecg ,_fdc :=_gdg ._fbe .ReadByte ();if _fdc !=nil {return _fdc ;};_gdg .GrAtX [0]=int8 (_ecg );_ecg ,_fdc =_gdg ._fbe .ReadByte ();if _fdc !=nil {return _fdc ;};_gdg .GrAtY [0]=int8 (_ecg );_ecg ,_fdc =_gdg ._fbe .ReadByte ();
if _fdc !=nil {return _fdc ;};_gdg .GrAtX [1]=int8 (_ecg );_ecg ,_fdc =_gdg ._fbe .ReadByte ();if _fdc !=nil {return _fdc ;};_gdg .GrAtY [1]=int8 (_ecg );return nil ;};func (_bgad *PageInformationSegment )readIsLossless ()error {_bge ,_adcb :=_bgad ._efce .ReadBit ();
if _adcb !=nil {return _adcb ;};if _bge ==1{_bgad .IsLossless =true ;};return nil ;};type Type int ;func (_edde *SymbolDictionary )decodeAggregate (_agcb ,_agdca uint32 )error {var (_egfb int64 ;_fdeab error ;);if _edde .IsHuffmanEncoded {_egfb ,_fdeab =_edde .huffDecodeRefAggNInst ();
if _fdeab !=nil {return _fdeab ;};}else {_dcbg ,_fdge :=_edde ._fcae .DecodeInt (_edde ._eacc );if _fdge !=nil {return _fdge ;};_egfb =int64 (_dcbg );};if _egfb > 1{return _edde .decodeThroughTextRegion (_agcb ,_agdca ,uint32 (_egfb ));}else if _egfb ==1{return _edde .decodeRefinedSymbol (_agcb ,_agdca );
};return nil ;};func (_aage *GenericRegion )decodeTemplate1 (_bbdb ,_aca ,_aec int ,_dfc ,_fba int )(_dccg error ){const _efe ="\u0064e\u0063o\u0064\u0065\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u0031";var (_gef ,_cag int ;_bdag ,_cgdb int ;_fce byte ;
_agc ,_fed int ;);if _bbdb >=1{_fce ,_dccg =_aage .Bitmap .GetByte (_fba );if _dccg !=nil {return _ae .Wrap (_dccg ,_efe ,"\u006ci\u006e\u0065\u0020\u003e\u003d\u00201");};_bdag =int (_fce );};if _bbdb >=2{_fce ,_dccg =_aage .Bitmap .GetByte (_fba -_aage .Bitmap .RowStride );
if _dccg !=nil {return _ae .Wrap (_dccg ,_efe ,"\u006ci\u006e\u0065\u0020\u003e\u003d\u00202");};_cgdb =int (_fce )<<5;};_gef =((_bdag >>1)&0x1f8)|((_cgdb >>1)&0x1e00);for _adg :=0;_adg < _aec ;_adg =_agc {var (_efeb byte ;_ffcd int ;);_agc =_adg +8;if _cee :=_aca -_adg ;
_cee > 8{_ffcd =8;}else {_ffcd =_cee ;};if _bbdb > 0{_bdag <<=8;if _agc < _aca {_fce ,_dccg =_aage .Bitmap .GetByte (_fba +1);if _dccg !=nil {return _ae .Wrap (_dccg ,_efe ,"\u006c\u0069\u006e\u0065\u0020\u003e\u0020\u0030");};_bdag |=int (_fce );};};if _bbdb > 1{_cgdb <<=8;
if _agc < _aca {_fce ,_dccg =_aage .Bitmap .GetByte (_fba -_aage .Bitmap .RowStride +1);if _dccg !=nil {return _ae .Wrap (_dccg ,_efe ,"\u006c\u0069\u006e\u0065\u0020\u003e\u0020\u0031");};_cgdb |=int (_fce )<<5;};};for _cdf :=0;_cdf < _ffcd ;_cdf ++{if _aage ._abc {_cag =_aage .overrideAtTemplate1 (_gef ,_adg +_cdf ,_bbdb ,int (_efeb ),_cdf );
_aage ._agbd .SetIndex (int32 (_cag ));}else {_aage ._agbd .SetIndex (int32 (_gef ));};_fed ,_dccg =_aage ._cgab .DecodeBit (_aage ._agbd );if _dccg !=nil {return _ae .Wrap (_dccg ,_efe ,"");};_efeb |=byte (_fed )<<uint (7-_cdf );_eadf :=uint (8-_cdf );
_gef =((_gef &0xefb)<<1)|_fed |((_bdag >>_eadf )&0x8)|((_cgdb >>_eadf )&0x200);};if _gbgd :=_aage .Bitmap .SetByte (_dfc ,_efeb );_gbgd !=nil {return _ae .Wrap (_gbgd ,_efe ,"");};_dfc ++;_fba ++;};return nil ;};const (ORandom OrganizationType =iota ;OSequential ;
);func (_dfee *TableSegment )parseHeader ()error {var (_ggdc int ;_feacg uint64 ;_cbaf error ;);_ggdc ,_cbaf =_dfee ._ecbf .ReadBit ();if _cbaf !=nil {return _cbaf ;};if _ggdc ==1{return _bg .Errorf ("\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0074\u0061\u0062\u006c\u0065 \u0073\u0065\u0067\u006d\u0065\u006e\u0074\u0020\u0064e\u0066\u0069\u006e\u0069\u0074\u0069\u006f\u006e\u002e\u0020\u0042\u002e\u0032\u002e1\u0020\u0043\u006f\u0064\u0065\u0020\u0054\u0061\u0062\u006c\u0065\u0020\u0066\u006c\u0061\u0067\u0073\u003a\u0020\u0042\u0069\u0074\u0020\u0037\u0020\u006d\u0075\u0073\u0074\u0020b\u0065\u0020\u007a\u0065\u0072\u006f\u002e\u0020\u0057a\u0073\u003a \u0025\u0064",_ggdc );
};if _feacg ,_cbaf =_dfee ._ecbf .ReadBits (3);_cbaf !=nil {return _cbaf ;};_dfee ._cagcc =(int32 (_feacg )+1)&0xf;if _feacg ,_cbaf =_dfee ._ecbf .ReadBits (3);_cbaf !=nil {return _cbaf ;};_dfee ._dgefc =(int32 (_feacg )+1)&0xf;if _feacg ,_cbaf =_dfee ._ecbf .ReadBits (32);
_cbaf !=nil {return _cbaf ;};_dfee ._bacbd =int32 (_feacg &_g .MaxInt32 );if _feacg ,_cbaf =_dfee ._ecbf .ReadBits (32);_cbaf !=nil {return _cbaf ;};_dfee ._bcab =int32 (_feacg &_g .MaxInt32 );return nil ;};func (_baaeb *TextRegion )decodeSymInRefSize ()(int64 ,error ){const _eeeff ="\u0064e\u0063o\u0064\u0065\u0053\u0079\u006dI\u006e\u0052e\u0066\u0053\u0069\u007a\u0065";
if _baaeb .SbHuffRSize ==0{_dacg ,_gebc :=_cg .GetStandardTable (1);if _gebc !=nil {return 0,_ae .Wrap (_gebc ,_eeeff ,"");};return _dacg .Decode (_baaeb ._fdgb );};if _baaeb ._cedb ==nil {var (_befa int ;_cgea error ;);if _baaeb .SbHuffFS ==3{_befa ++;
};if _baaeb .SbHuffDS ==3{_befa ++;};if _baaeb .SbHuffDT ==3{_befa ++;};if _baaeb .SbHuffRDWidth ==3{_befa ++;};if _baaeb .SbHuffRDHeight ==3{_befa ++;};if _baaeb .SbHuffRDX ==3{_befa ++;};if _baaeb .SbHuffRDY ==3{_befa ++;};_baaeb ._cedb ,_cgea =_baaeb .getUserTable (_befa );
if _cgea !=nil {return 0,_ae .Wrap (_cgea ,_eeeff ,"");};};_dbce ,_edef :=_baaeb ._cedb .Decode (_baaeb ._fdgb );if _edef !=nil {return 0,_ae .Wrap (_edef ,_eeeff ,"");};return _dbce ,nil ;};func (_afc *template0 )setIndex (_aba *_ea .DecoderStats ){_aba .SetIndex (0x100)};
func (_bbcd *SymbolDictionary )setRefinementAtPixels ()error {if !_bbcd .UseRefinementAggregation ||_bbcd .SdrTemplate !=0{return nil ;};if _eceg :=_bbcd .readRefinementAtPixels (2);_eceg !=nil {return _eceg ;};return nil ;};func (_beb *GenericRefinementRegion )getPixel (_fdf *_ff .Bitmap ,_efdb ,_ade int )int {if _efdb < 0||_efdb >=_fdf .Width {return 0;
};if _ade < 0||_ade >=_fdf .Height {return 0;};if _fdf .GetPixel (_efdb ,_ade ){return 1;};return 0;};func (_eecc *GenericRegion )overrideAtTemplate3 (_fffg ,_ffee ,_ccgd ,_beccc ,_aeef int )int {_fffg &=0x3EF;if _eecc .GBAtY [0]==0&&_eecc .GBAtX [0]>=-int8 (_aeef ){_fffg |=(_beccc >>uint (7-(int8 (_aeef )+_eecc .GBAtX [0]))&0x1)<<4;
}else {_fffg |=int (_eecc .getPixel (_ffee +int (_eecc .GBAtX [0]),_ccgd +int (_eecc .GBAtY [0])))<<4;};return _fffg ;};func (_degd *PageInformationSegment )readResolution ()error {_eab ,_fbgg :=_degd ._efce .ReadBits (32);if _fbgg !=nil {return _fbgg ;
};_degd .ResolutionX =int (_eab &_g .MaxInt32 );_eab ,_fbgg =_degd ._efce .ReadBits (32);if _fbgg !=nil {return _fbgg ;};_degd .ResolutionY =int (_eab &_g .MaxInt32 );return nil ;};func (_dcbbc *TextRegion )getUserTable (_caec int )(_cg .Tabler ,error ){const _fgbc ="\u0067\u0065\u0074U\u0073\u0065\u0072\u0054\u0061\u0062\u006c\u0065";
var _babc int ;for _ ,_ebaec :=range _dcbbc .Header .RTSegments {if _ebaec .Type ==53{if _babc ==_caec {_gbaa ,_feaf :=_ebaec .GetSegmentData ();if _feaf !=nil {return nil ,_feaf ;};_gegb ,_efgb :=_gbaa .(*TableSegment );if !_efgb {_eaf .Log .Debug (_bg .Sprintf ("\u0073\u0065\u0067\u006d\u0065\u006e\u0074 \u0077\u0069\u0074h\u0020\u0054\u0079p\u0065\u00205\u0033\u0020\u002d\u0020\u0061\u006ed\u0020in\u0064\u0065\u0078\u003a\u0020\u0025\u0064\u0020\u006e\u006f\u0074\u0020\u0061\u0020\u0054\u0061\u0062\u006c\u0065\u0053\u0065\u0067\u006d\u0065\u006e\u0074",_ebaec .SegmentNumber ));
return nil ,_ae .Error (_fgbc ,"\u0073\u0065\u0067\u006d\u0065\u006e\u0074 \u0077\u0069\u0074h\u0020\u0054\u0079\u0070e\u0020\u0035\u0033\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0061\u0020\u002a\u0054\u0061\u0062\u006c\u0065\u0053\u0065\u0067\u006d\u0065\u006e\u0074");
};return _cg .NewEncodedTable (_gegb );};_babc ++;};};return nil ,nil ;};func _aaca (_ggegf int )int {if _ggegf ==0{return 0;};_ggegf |=_ggegf >>1;_ggegf |=_ggegf >>2;_ggegf |=_ggegf >>4;_ggegf |=_ggegf >>8;_ggegf |=_ggegf >>16;return (_ggegf +1)>>1;};
func (_ebgaa *TextRegion )decodeDfs ()(int64 ,error ){if _ebgaa .IsHuffmanEncoded {if _ebgaa .SbHuffFS ==3{if _ebgaa ._aedc ==nil {var _ebgab error ;_ebgaa ._aedc ,_ebgab =_ebgaa .getUserTable (0);if _ebgab !=nil {return 0,_ebgab ;};};return _ebgaa ._aedc .Decode (_ebgaa ._fdgb );
};_fgec ,_abd :=_cg .GetStandardTable (6+int (_ebgaa .SbHuffFS ));if _abd !=nil {return 0,_abd ;};return _fgec .Decode (_ebgaa ._fdgb );};_bacce ,_adfd :=_ebgaa ._febe .DecodeInt (_ebgaa ._ecfg );if _adfd !=nil {return 0,_adfd ;};return int64 (_bacce ),nil ;
};func (_ccea *PageInformationSegment )Init (h *Header ,r *_ba .Reader )(_fgddf error ){_ccea ._efce =r ;if _fgddf =_ccea .parseHeader ();_fgddf !=nil {return _ae .Wrap (_fgddf ,"P\u0061\u0067\u0065\u0049\u006e\u0066o\u0072\u006d\u0061\u0074\u0069\u006f\u006e\u0053\u0065g\u006d\u0065\u006et\u002eI\u006e\u0069\u0074","");
};return nil ;};func (_gebd *TextRegion )decodeCurrentT ()(int64 ,error ){if _gebd .SbStrips !=1{if _gebd .IsHuffmanEncoded {_cfcd ,_afad :=_gebd ._fdgb .ReadBits (byte (_gebd .LogSBStrips ));return int64 (_cfcd ),_afad ;};_dagb ,_afe :=_gebd ._febe .DecodeInt (_gebd ._afabc );
if _afe !=nil {return 0,_afe ;};return int64 (_dagb ),nil ;};return 0,nil ;};func (_ecae *SymbolDictionary )encodeSymbols (_agcd _ba .BinaryWriter )(_egef int ,_afgf error ){const _bbbd ="\u0065\u006e\u0063o\u0064\u0065\u0053\u0079\u006d\u0062\u006f\u006c";
_acgd :=_be .New ();_acgd .Init ();_fbcf ,_afgf :=_ecae ._gbfd .SelectByIndexes (_ecae ._bdeb );if _afgf !=nil {return 0,_ae .Wrap (_afgf ,_bbbd ,"\u0069n\u0069\u0074\u0069\u0061\u006c");};_aebd :=map[*_ff .Bitmap ]int {};for _ggdb ,_adde :=range _fbcf .Values {_aebd [_adde ]=_ggdb ;
};_fbcf .SortByHeight ();var _dab ,_dac int ;_beec ,_afgf :=_fbcf .GroupByHeight ();if _afgf !=nil {return 0,_ae .Wrap (_afgf ,_bbbd ,"");};for _ ,_cgdc :=range _beec .Values {_geg :=_cgdc .Values [0].Height ;_afcfg :=_geg -_dab ;if _afgf =_acgd .EncodeInteger (_be .IADH ,_afcfg );
_afgf !=nil {return 0,_ae .Wrapf (_afgf ,_bbbd ,"\u0049\u0041\u0044\u0048\u0020\u0066\u006f\u0072\u0020\u0064\u0068\u003a \u0027\u0025\u0064\u0027",_afcfg );};_dab =_geg ;_efebb ,_abe :=_cgdc .GroupByWidth ();if _abe !=nil {return 0,_ae .Wrapf (_abe ,_bbbd ,"\u0068\u0065\u0069g\u0068\u0074\u003a\u0020\u0027\u0025\u0064\u0027",_geg );
};var _dadd int ;for _ ,_gfcf :=range _efebb .Values {for _ ,_ccbgd :=range _gfcf .Values {_dgaag :=_ccbgd .Width ;_faaf :=_dgaag -_dadd ;if _abe =_acgd .EncodeInteger (_be .IADW ,_faaf );_abe !=nil {return 0,_ae .Wrapf (_abe ,_bbbd ,"\u0049\u0041\u0044\u0057\u0020\u0066\u006f\u0072\u0020\u0064\u0077\u003a \u0027\u0025\u0064\u0027",_faaf );
};_dadd +=_faaf ;if _abe =_acgd .EncodeBitmap (_ccbgd ,false );_abe !=nil {return 0,_ae .Wrapf (_abe ,_bbbd ,"H\u0065i\u0067\u0068\u0074\u003a\u0020\u0025\u0064\u0020W\u0069\u0064\u0074\u0068: \u0025\u0064",_geg ,_dgaag );};_bgbc :=_aebd [_ccbgd ];_ecae ._dfcb [_bgbc ]=_dac ;
_dac ++;};};if _abe =_acgd .EncodeOOB (_be .IADW );_abe !=nil {return 0,_ae .Wrap (_abe ,_bbbd ,"\u0049\u0041\u0044\u0057");};};if _afgf =_acgd .EncodeInteger (_be .IAEX ,0);_afgf !=nil {return 0,_ae .Wrap (_afgf ,_bbbd ,"\u0065\u0078p\u006f\u0072\u0074e\u0064\u0020\u0073\u0079\u006d\u0062\u006f\u006c\u0073");
};if _afgf =_acgd .EncodeInteger (_be .IAEX ,len (_ecae ._bdeb ));_afgf !=nil {return 0,_ae .Wrap (_afgf ,_bbbd ,"\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u006f\u0066\u0020\u0073\u0079m\u0062\u006f\u006c\u0073");};_acgd .Final ();_bcee ,_afgf :=_acgd .WriteTo (_agcd );
if _afgf !=nil {return 0,_ae .Wrap (_afgf ,_bbbd ,"\u0077\u0072i\u0074\u0069\u006e\u0067 \u0065\u006ec\u006f\u0064\u0065\u0072\u0020\u0063\u006f\u006et\u0065\u0078\u0074\u0020\u0074\u006f\u0020\u0027\u0077\u0027\u0020\u0077r\u0069\u0074\u0065\u0072");};
return int (_bcee ),nil ;};type template0 struct{};func (_agdc *HalftoneRegion )GetRegionInfo ()*RegionSegment {return _agdc .RegionSegment };func (_dcgc *HalftoneRegion )computeY (_dgfb ,_gfgb int )int {return _dcgc .shiftAndFill (int (_dcgc .HGridY )+_dgfb *int (_dcgc .HRegionX )-_gfgb *int (_dcgc .HRegionY ));
};func (_eff *template1 )form (_cdc ,_bdfd ,_ccg ,_dgcc ,_aaa int16 )int16 {return ((_cdc &0x02)<<8)|(_bdfd <<6)|((_ccg &0x03)<<4)|(_dgcc <<1)|_aaa ;};func (_afd *RegionSegment )readCombinationOperator ()error {_fcee ,_gcb :=_afd ._gdabf .ReadBits (3);
if _gcb !=nil {return _gcb ;};_afd .CombinaionOperator =_ff .CombinationOperator (_fcee &0xF);return nil ;};func NewHeader (d Documenter ,r *_ba .Reader ,offset int64 ,organizationType OrganizationType )(*Header ,error ){_afg :=&Header {Reader :r };if _efdbg :=_afg .parse (d ,r ,offset ,organizationType );
_efdbg !=nil {return nil ,_ae .Wrap (_efdbg ,"\u004ee\u0077\u0048\u0065\u0061\u0064\u0065r","");};return _afg ,nil ;};type Segmenter interface{Init (_edfc *Header ,_deaf *_ba .Reader )error ;};func (_cbbcb *RegionSegment )Size ()int {return 17};func (_bbcg *TableSegment )HtHigh ()int32 {return _bbcg ._bcab };
var _ SegmentEncoder =&GenericRegion {};func (_gfgdf *GenericRegion )Size ()int {return _gfgdf .RegionSegment .Size ()+1+2*len (_gfgdf .GBAtX )};func (_baf *template0 )form (_ggb ,_dgga ,_cgg ,_adb ,_dfa int16 )int16 {return (_ggb <<10)|(_dgga <<7)|(_cgg <<4)|(_adb <<1)|_dfa ;
};func (_eb *GenericRefinementRegion )Init (header *Header ,r *_ba .Reader )error {_eb ._cga =header ;_eb ._fbe =r ;_eb .RegionInfo =NewRegionSegment (r );return _eb .parseHeader ();};func (_bace *TextRegion )Init (header *Header ,r *_ba .Reader )error {_bace .Header =header ;
_bace ._fdgb =r ;_bace .RegionInfo =NewRegionSegment (_bace ._fdgb );return _bace .parseHeader ();};func (_cfdf *PatternDictionary )readGrayMax ()error {_cefgc ,_fead :=_cfdf ._eggc .ReadBits (32);if _fead !=nil {return _fead ;};_cfdf .GrayMax =uint32 (_cefgc &_g .MaxUint32 );
return nil ;};func (_aeed *PatternDictionary )checkInput ()error {if _aeed .HdpHeight < 1||_aeed .HdpWidth < 1{return _f .New ("in\u0076\u0061l\u0069\u0064\u0020\u0048\u0065\u0061\u0064\u0065\u0072 \u0056\u0061\u006c\u0075\u0065\u003a\u0020\u0057\u0069\u0064\u0074\u0068\u002f\u0048\u0065\u0069\u0067\u0068\u0074\u0020\u006d\u0075\u0073\u0074\u0020\u0062\u0065\u0020g\u0072e\u0061\u0074\u0065\u0072\u0020\u0074\u0068\u0061n\u0020z\u0065\u0072o");
};if _aeed .IsMMREncoded {if _aeed .HDTemplate !=0{_eaf .Log .Debug ("\u0076\u0061\u0072\u0069\u0061\u0062\u006c\u0065\u0020\u0048\u0044\u0054\u0065\u006d\u0070\u006c\u0061\u0074e\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u006e\u006f\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e \u0074\u0068\u0065\u0020\u0076\u0061\u006c\u0075\u0065\u0020\u0030");
};};return nil ;};func (_gad *GenericRegion )setOverrideFlag (_ggdg int ){_gad .GBAtOverride [_ggdg ]=true ;_gad ._abc =true ;};func (_eafgg *TextRegion )readAmountOfSymbolInstances ()error {_fffd ,_ccdb :=_eafgg ._fdgb .ReadBits (32);if _ccdb !=nil {return _ccdb ;
};_eafgg .NumberOfSymbolInstances =uint32 (_fffd &_g .MaxUint32 );_feab :=_eafgg .RegionInfo .BitmapWidth *_eafgg .RegionInfo .BitmapHeight ;if _feab < _eafgg .NumberOfSymbolInstances {_eaf .Log .Debug ("\u004c\u0069\u006d\u0069t\u0069\u006e\u0067\u0020t\u0068\u0065\u0020n\u0075\u006d\u0062\u0065\u0072\u0020o\u0066\u0020d\u0065\u0063\u006f\u0064e\u0064\u0020\u0073\u0079m\u0062\u006f\u006c\u0020\u0069n\u0073\u0074\u0061\u006e\u0063\u0065\u0073 \u0074\u006f\u0020\u006f\u006ee\u0020\u0070\u0065\u0072\u0020\u0070\u0069\u0078\u0065l\u0020\u0028\u0020\u0025\u0064\u0020\u0069\u006e\u0073\u0074\u0065\u0061\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0029",_feab ,_eafgg .NumberOfSymbolInstances );
_eafgg .NumberOfSymbolInstances =_feab ;};return nil ;};var _ templater =&template0 {};type TextRegion struct{_fdgb *_ba .Reader ;RegionInfo *RegionSegment ;SbrTemplate int8 ;SbDsOffset int8 ;DefaultPixel int8 ;CombinationOperator _ff .CombinationOperator ;
IsTransposed int8 ;ReferenceCorner int16 ;LogSBStrips int16 ;UseRefinement bool ;IsHuffmanEncoded bool ;SbHuffRSize int8 ;SbHuffRDY int8 ;SbHuffRDX int8 ;SbHuffRDHeight int8 ;SbHuffRDWidth int8 ;SbHuffDT int8 ;SbHuffDS int8 ;SbHuffFS int8 ;SbrATX []int8 ;
SbrATY []int8 ;NumberOfSymbolInstances uint32 ;_dfgg int64 ;SbStrips int8 ;NumberOfSymbols uint32 ;RegionBitmap *_ff .Bitmap ;Symbols []*_ff .Bitmap ;_febe *_ea .Decoder ;_dbgfe *GenericRefinementRegion ;_gbbg *_ea .DecoderStats ;_ecfg *_ea .DecoderStats ;
_fgege *_ea .DecoderStats ;_afabc *_ea .DecoderStats ;_edab *_ea .DecoderStats ;_ecdf *_ea .DecoderStats ;_caea *_ea .DecoderStats ;_dbaeb *_ea .DecoderStats ;_fddb *_ea .DecoderStats ;_aegf *_ea .DecoderStats ;_edgc *_ea .DecoderStats ;_gafgc int8 ;_ecad *_cg .FixedSizeTable ;
Header *Header ;_aedc _cg .Tabler ;_edbc _cg .Tabler ;_aaag _cg .Tabler ;_ddf _cg .Tabler ;_cdef _cg .Tabler ;_ggfc _cg .Tabler ;_agcga _cg .Tabler ;_cedb _cg .Tabler ;_dagc ,_addf map[int ]int ;_bggc []int ;_bgce *_ff .Points ;_fafg *_ff .Bitmaps ;_dfbf *_fb .IntSlice ;
_dcaa ,_aff int ;_cfe *_ff .Boxes ;};func (_fbbb *Header )pageSize ()uint {if _fbbb .PageAssociation <=255{return 1;};return 4;};func (_adef *PatternDictionary )extractPatterns (_fgda *_ff .Bitmap )error {var _fbda int ;_bcad :=make ([]*_ff .Bitmap ,_adef .GrayMax +1);
for _fbda <=int (_adef .GrayMax ){_dafa :=int (_adef .HdpWidth )*_fbda ;_agfc :=_b .Rect (_dafa ,0,_dafa +int (_adef .HdpWidth ),int (_adef .HdpHeight ));_bdcb ,_ebad :=_ff .Extract (_agfc ,_fgda );if _ebad !=nil {return _ebad ;};_bcad [_fbda ]=_bdcb ;
_fbda ++;};_adef .Patterns =_bcad ;return nil ;};func (_ffba *HalftoneRegion )combineGrayscalePlanes (_fddgg []*_ff .Bitmap ,_fcg int )error {_edf :=0;for _gea :=0;_gea < _fddgg [_fcg ].Height ;_gea ++{for _dgef :=0;_dgef < _fddgg [_fcg ].Width ;_dgef +=8{_ffff ,_abag :=_fddgg [_fcg +1].GetByte (_edf );
if _abag !=nil {return _abag ;};_cagc ,_abag :=_fddgg [_fcg ].GetByte (_edf );if _abag !=nil {return _abag ;};_abag =_fddgg [_fcg ].SetByte (_edf ,_ff .CombineBytes (_cagc ,_ffff ,_ff .CmbOpXor ));if _abag !=nil {return _abag ;};_edf ++;};};return nil ;
};func NewGenericRegion (r *_ba .Reader )*GenericRegion {return &GenericRegion {RegionSegment :NewRegionSegment (r ),_bca :r };};func (_fcgg *RegionSegment )String ()string {_cceb :=&_ef .Builder {};_cceb .WriteString ("\u0009[\u0052E\u0047\u0049\u004f\u004e\u0020S\u0045\u0047M\u0045\u004e\u0054\u005d\u000a");
_cceb .WriteString (_bg .Sprintf ("\t\u0009\u002d\u0020\u0042\u0069\u0074m\u0061\u0070\u0020\u0028\u0077\u0069d\u0074\u0068\u002c\u0020\u0068\u0065\u0069g\u0068\u0074\u0029\u0020\u005b\u0025\u0064\u0078\u0025\u0064]\u000a",_fcgg .BitmapWidth ,_fcgg .BitmapHeight ));
_cceb .WriteString (_bg .Sprintf ("\u0009\u0009\u002d\u0020L\u006f\u0063\u0061\u0074\u0069\u006f\u006e\u0020\u0028\u0078,\u0079)\u003a\u0020\u005b\u0025\u0064\u002c\u0025d\u005d\u000a",_fcgg .XLocation ,_fcgg .YLocation ));_cceb .WriteString (_bg .Sprintf ("\t\u0009\u002d\u0020\u0043\u006f\u006db\u0069\u006e\u0061\u0074\u0069\u006f\u006e\u004f\u0070e\u0072\u0061\u0074o\u0072:\u0020\u0025\u0073",_fcgg .CombinaionOperator ));
return _cceb .String ();};func (_cge *PageInformationSegment )readMaxStripeSize ()error {_fgcf ,_agca :=_cge ._efce .ReadBits (15);if _agca !=nil {return _agca ;};_cge .MaxStripeSize =uint16 (_fgcf &_g .MaxUint16 );return nil ;};func (_cbbe *TextRegion )decodeRdx ()(int64 ,error ){const _bebc ="\u0064e\u0063\u006f\u0064\u0065\u0052\u0064x";
if _cbbe .IsHuffmanEncoded {if _cbbe .SbHuffRDX ==3{if _cbbe ._ggfc ==nil {var (_bgde int ;_fefe error ;);if _cbbe .SbHuffFS ==3{_bgde ++;};if _cbbe .SbHuffDS ==3{_bgde ++;};if _cbbe .SbHuffDT ==3{_bgde ++;};if _cbbe .SbHuffRDWidth ==3{_bgde ++;};if _cbbe .SbHuffRDHeight ==3{_bgde ++;
};_cbbe ._ggfc ,_fefe =_cbbe .getUserTable (_bgde );if _fefe !=nil {return 0,_ae .Wrap (_fefe ,_bebc ,"");};};return _cbbe ._ggfc .Decode (_cbbe ._fdgb );};_cagce ,_gfac :=_cg .GetStandardTable (14+int (_cbbe .SbHuffRDX ));if _gfac !=nil {return 0,_ae .Wrap (_gfac ,_bebc ,"");
};return _cagce .Decode (_cbbe ._fdgb );};_cfad ,_edbcg :=_cbbe ._febe .DecodeInt (_cbbe ._fddb );if _edbcg !=nil {return 0,_ae .Wrap (_edbcg ,_bebc ,"");};return int64 (_cfad ),nil ;};type EndOfStripe struct{_aa *_ba .Reader ;_ad int ;};func (_dff *GenericRegion )overrideAtTemplate0a (_gcec ,_ceed ,_adc ,_ada ,_gddc ,_fcf int )int {if _dff .GBAtOverride [0]{_gcec &=0xFFEF;
if _dff .GBAtY [0]==0&&_dff .GBAtX [0]>=-int8 (_gddc ){_gcec |=(_ada >>uint (int8 (_fcf )-_dff .GBAtX [0]&0x1))<<4;}else {_gcec |=int (_dff .getPixel (_ceed +int (_dff .GBAtX [0]),_adc +int (_dff .GBAtY [0])))<<4;};};if _dff .GBAtOverride [1]{_gcec &=0xFBFF;
if _dff .GBAtY [1]==0&&_dff .GBAtX [1]>=-int8 (_gddc ){_gcec |=(_ada >>uint (int8 (_fcf )-_dff .GBAtX [1]&0x1))<<10;}else {_gcec |=int (_dff .getPixel (_ceed +int (_dff .GBAtX [1]),_adc +int (_dff .GBAtY [1])))<<10;};};if _dff .GBAtOverride [2]{_gcec &=0xF7FF;
if _dff .GBAtY [2]==0&&_dff .GBAtX [2]>=-int8 (_gddc ){_gcec |=(_ada >>uint (int8 (_fcf )-_dff .GBAtX [2]&0x1))<<11;}else {_gcec |=int (_dff .getPixel (_ceed +int (_dff .GBAtX [2]),_adc +int (_dff .GBAtY [2])))<<11;};};if _dff .GBAtOverride [3]{_gcec &=0x7FFF;
if _dff .GBAtY [3]==0&&_dff .GBAtX [3]>=-int8 (_gddc ){_gcec |=(_ada >>uint (int8 (_fcf )-_dff .GBAtX [3]&0x1))<<15;}else {_gcec |=int (_dff .getPixel (_ceed +int (_dff .GBAtX [3]),_adc +int (_dff .GBAtY [3])))<<15;};};return _gcec ;};func (_fcgc *PageInformationSegment )String ()string {_cgfc :=&_ef .Builder {};
_cgfc .WriteString ("\u000a\u005b\u0050\u0041G\u0045\u002d\u0049\u004e\u0046\u004f\u0052\u004d\u0041\u0054I\u004fN\u002d\u0053\u0045\u0047\u004d\u0045\u004eT\u005d\u000a");_bg .Fprintf (_cgfc ,"\u0009\u002d \u0042\u004d\u0048e\u0069\u0067\u0068\u0074\u003a\u0020\u0025\u0064\u000a",_fcgc .PageBMHeight );
_bg .Fprintf (_cgfc ,"\u0009-\u0020B\u004d\u0057\u0069\u0064\u0074\u0068\u003a\u0020\u0025\u0064\u000a",_fcgc .PageBMWidth );_bg .Fprintf (_cgfc ,"\u0009\u002d\u0020\u0052es\u006f\u006c\u0075\u0074\u0069\u006f\u006e\u0058\u003a\u0020\u0025\u0064\u000a",_fcgc .ResolutionX );
_bg .Fprintf (_cgfc ,"\u0009\u002d\u0020\u0052es\u006f\u006c\u0075\u0074\u0069\u006f\u006e\u0059\u003a\u0020\u0025\u0064\u000a",_fcgc .ResolutionY );_bg .Fprintf (_cgfc ,"\t\u002d\u0020\u0043\u006f\u006d\u0062i\u006e\u0061\u0074\u0069\u006f\u006e\u004f\u0070\u0065r\u0061\u0074\u006fr\u003a \u0025\u0073\u000a",_fcgc ._ecgc );
_bg .Fprintf (_cgfc ,"\t\u002d\u0020\u0043\u006f\u006d\u0062i\u006e\u0061\u0074\u0069\u006f\u006eO\u0070\u0065\u0072\u0061\u0074\u006f\u0072O\u0076\u0065\u0072\u0072\u0069\u0064\u0065\u003a\u0020\u0025v\u000a",_fcgc ._ccef );_bg .Fprintf (_cgfc ,"\u0009-\u0020I\u0073\u004c\u006f\u0073\u0073l\u0065\u0073s\u003a\u0020\u0025\u0076\u000a",_fcgc .IsLossless );
_bg .Fprintf (_cgfc ,"\u0009\u002d\u0020R\u0065\u0071\u0075\u0069r\u0065\u0073\u0041\u0075\u0078\u0069\u006ci\u0061\u0072\u0079\u0042\u0075\u0066\u0066\u0065\u0072\u003a\u0020\u0025\u0076\u000a",_fcgc ._degb );_bg .Fprintf (_cgfc ,"\u0009\u002d\u0020M\u0069\u0067\u0068\u0074C\u006f\u006e\u0074\u0061\u0069\u006e\u0052e\u0066\u0069\u006e\u0065\u006d\u0065\u006e\u0074\u0073\u003a\u0020\u0025\u0076\u000a",_fcgc ._caaf );
_bg .Fprintf (_cgfc ,"\u0009\u002d\u0020\u0049\u0073\u0053\u0074\u0072\u0069\u0070\u0065\u0064:\u0020\u0025\u0076\u000a",_fcgc .IsStripe );_bg .Fprintf (_cgfc ,"\t\u002d\u0020\u004d\u0061xS\u0074r\u0069\u0070\u0065\u0053\u0069z\u0065\u003a\u0020\u0025\u0076\u000a",_fcgc .MaxStripeSize );
return _cgfc .String ();};func (_fddbb *TextRegion )decodeIds ()(int64 ,error ){const _gebeb ="\u0064e\u0063\u006f\u0064\u0065\u0049\u0064s";if _fddbb .IsHuffmanEncoded {if _fddbb .SbHuffDS ==3{if _fddbb ._edbc ==nil {_cedbd :=0;if _fddbb .SbHuffFS ==3{_cedbd ++;
};var _cgcdg error ;_fddbb ._edbc ,_cgcdg =_fddbb .getUserTable (_cedbd );if _cgcdg !=nil {return 0,_ae .Wrap (_cgcdg ,_gebeb ,"");};};return _fddbb ._edbc .Decode (_fddbb ._fdgb );};_cacdg ,_bgfg :=_cg .GetStandardTable (8+int (_fddbb .SbHuffDS ));if _bgfg !=nil {return 0,_ae .Wrap (_bgfg ,_gebeb ,"");
};return _cacdg .Decode (_fddbb ._fdgb );};_ggcb ,_adbc :=_fddbb ._febe .DecodeInt (_fddbb ._fgege );if _adbc !=nil {return 0,_ae .Wrap (_adbc ,_gebeb ,"\u0063\u0078\u0049\u0041\u0044\u0053");};return int64 (_ggcb ),nil ;};func (_bbg *GenericRegion )decodeTemplate2 (_dfg ,_dbcg ,_age int ,_feb ,_egfa int )(_bff error ){const _dccd ="\u0064e\u0063o\u0064\u0065\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u0032";
var (_cfge ,_cce int ;_ecgb ,_bfg int ;_bbef byte ;_dada ,_caaa int ;);if _dfg >=1{_bbef ,_bff =_bbg .Bitmap .GetByte (_egfa );if _bff !=nil {return _ae .Wrap (_bff ,_dccd ,"\u006ci\u006ee\u004e\u0075\u006d\u0062\u0065\u0072\u0020\u003e\u003d\u0020\u0031");
};_ecgb =int (_bbef );};if _dfg >=2{_bbef ,_bff =_bbg .Bitmap .GetByte (_egfa -_bbg .Bitmap .RowStride );if _bff !=nil {return _ae .Wrap (_bff ,_dccd ,"\u006ci\u006ee\u004e\u0075\u006d\u0062\u0065\u0072\u0020\u003e\u003d\u0020\u0032");};_bfg =int (_bbef )<<4;
};_cfge =(_ecgb >>3&0x7c)|(_bfg >>3&0x380);for _dfb :=0;_dfb < _age ;_dfb =_dada {var (_eefg byte ;_bfef int ;);_dada =_dfb +8;if _eede :=_dbcg -_dfb ;_eede > 8{_bfef =8;}else {_bfef =_eede ;};if _dfg > 0{_ecgb <<=8;if _dada < _dbcg {_bbef ,_bff =_bbg .Bitmap .GetByte (_egfa +1);
if _bff !=nil {return _ae .Wrap (_bff ,_dccd ,"\u006c\u0069\u006e\u0065\u004e\u0075\u006d\u0062\u0065r\u0020\u003e\u0020\u0030");};_ecgb |=int (_bbef );};};if _dfg > 1{_bfg <<=8;if _dada < _dbcg {_bbef ,_bff =_bbg .Bitmap .GetByte (_egfa -_bbg .Bitmap .RowStride +1);
if _bff !=nil {return _ae .Wrap (_bff ,_dccd ,"\u006c\u0069\u006e\u0065\u004e\u0075\u006d\u0062\u0065r\u0020\u003e\u0020\u0031");};_bfg |=int (_bbef )<<4;};};for _dfbd :=0;_dfbd < _bfef ;_dfbd ++{_eaae :=uint (10-_dfbd );if _bbg ._abc {_cce =_bbg .overrideAtTemplate2 (_cfge ,_dfb +_dfbd ,_dfg ,int (_eefg ),_dfbd );
_bbg ._agbd .SetIndex (int32 (_cce ));}else {_bbg ._agbd .SetIndex (int32 (_cfge ));};_caaa ,_bff =_bbg ._cgab .DecodeBit (_bbg ._agbd );if _bff !=nil {return _ae .Wrap (_bff ,_dccd ,"");};_eefg |=byte (_caaa <<uint (7-_dfbd ));_cfge =((_cfge &0x1bd)<<1)|_caaa |((_ecgb >>_eaae )&0x4)|((_bfg >>_eaae )&0x80);
};if _ggf :=_bbg .Bitmap .SetByte (_feb ,_eefg );_ggf !=nil {return _ae .Wrap (_ggf ,_dccd ,"");};_feb ++;_egfa ++;};return nil ;};func (_cfcc *GenericRegion )overrideAtTemplate2 (_aee ,_cafg ,_adbe ,_ggeg ,_babb int )int {_aee &=0x3FB;if _cfcc .GBAtY [0]==0&&_cfcc .GBAtX [0]>=-int8 (_babb ){_aee |=(_ggeg >>uint (7-(int8 (_babb )+_cfcc .GBAtX [0]))&0x1)<<2;
}else {_aee |=int (_cfcc .getPixel (_cafg +int (_cfcc .GBAtX [0]),_adbe +int (_cfcc .GBAtY [0])))<<2;};return _aee ;};func (_dba *HalftoneRegion )GetRegionBitmap ()(*_ff .Bitmap ,error ){if _dba .HalftoneRegionBitmap !=nil {return _dba .HalftoneRegionBitmap ,nil ;
};var _bdg error ;_dba .HalftoneRegionBitmap =_ff .New (int (_dba .RegionSegment .BitmapWidth ),int (_dba .RegionSegment .BitmapHeight ));if _dba .Patterns ==nil ||(_dba .Patterns !=nil &&len (_dba .Patterns )==0){_dba .Patterns ,_bdg =_dba .GetPatterns ();
if _bdg !=nil {return nil ,_bdg ;};};if _dba .HDefaultPixel ==1{_dba .HalftoneRegionBitmap .SetDefaultPixel ();};_dgde :=_g .Ceil (_g .Log (float64 (len (_dba .Patterns )))/_g .Log (2));_acec :=int (_dgde );var _ebgg [][]int ;_ebgg ,_bdg =_dba .grayScaleDecoding (_acec );
if _bdg !=nil {return nil ,_bdg ;};if _bdg =_dba .renderPattern (_ebgg );_bdg !=nil {return nil ,_bdg ;};return _dba .HalftoneRegionBitmap ,nil ;};func (_fgaf *PatternDictionary )setGbAtPixels (){if _fgaf .HDTemplate ==0{_fgaf .GBAtX =make ([]int8 ,4);
_fgaf .GBAtY =make ([]int8 ,4);_fgaf .GBAtX [0]=-int8 (_fgaf .HdpWidth );_fgaf .GBAtY [0]=0;_fgaf .GBAtX [1]=-3;_fgaf .GBAtY [1]=-1;_fgaf .GBAtX [2]=2;_fgaf .GBAtY [2]=-2;_fgaf .GBAtX [3]=-2;_fgaf .GBAtY [3]=-2;}else {_fgaf .GBAtX =[]int8 {-int8 (_fgaf .HdpWidth )};
_fgaf .GBAtY =[]int8 {0};};};type SegmentEncoder interface{Encode (_dedd _ba .BinaryWriter )(_ebgf int ,_eagee error );};func (_egec *TextRegion )GetRegionInfo ()*RegionSegment {return _egec .RegionInfo };func (_gagc *TextRegion )InitEncode (globalSymbolsMap ,localSymbolsMap map[int ]int ,comps []int ,inLL *_ff .Points ,symbols *_ff .Bitmaps ,classIDs *_fb .IntSlice ,boxes *_ff .Boxes ,width ,height ,symBits int ){_gagc .RegionInfo =&RegionSegment {BitmapWidth :uint32 (width ),BitmapHeight :uint32 (height )};
_gagc ._dagc =globalSymbolsMap ;_gagc ._addf =localSymbolsMap ;_gagc ._bggc =comps ;_gagc ._bgce =inLL ;_gagc ._fafg =symbols ;_gagc ._dfbf =classIDs ;_gagc ._cfe =boxes ;_gagc ._aff =symBits ;};func (_acb *SymbolDictionary )encodeRefinementATFlags (_cffg _ba .BinaryWriter )(_ccf int ,_fgce error ){const _becg ="\u0065\u006e\u0063od\u0065\u0052\u0065\u0066\u0069\u006e\u0065\u006d\u0065\u006e\u0074\u0041\u0054\u0046\u006c\u0061\u0067\u0073";
if !_acb .UseRefinementAggregation ||_acb .SdrTemplate !=0{return 0,nil ;};for _fcag :=0;_fcag < 2;_fcag ++{if _fgce =_cffg .WriteByte (byte (_acb .SdrATX [_fcag ]));_fgce !=nil {return _ccf ,_ae .Wrapf (_fgce ,_becg ,"\u0053\u0064\u0072\u0041\u0054\u0058\u005b\u0025\u0064\u005d",_fcag );
};_ccf ++;if _fgce =_cffg .WriteByte (byte (_acb .SdrATY [_fcag ]));_fgce !=nil {return _ccf ,_ae .Wrapf (_fgce ,_becg ,"\u0053\u0064\u0072\u0041\u0054\u0059\u005b\u0025\u0064\u005d",_fcag );};_ccf ++;};return _ccf ,nil ;};func (_acdd *Header )Encode (w _ba .BinaryWriter )(_gfaf int ,_dag error ){const _badc ="\u0048\u0065\u0061d\u0065\u0072\u002e\u0057\u0072\u0069\u0074\u0065";
var _cede _ba .BinaryWriter ;_eaf .Log .Trace ("\u005b\u0053\u0045G\u004d\u0045\u004e\u0054-\u0048\u0045\u0041\u0044\u0045\u0052\u005d[\u0045\u004e\u0043\u004f\u0044\u0045\u005d\u0020\u0042\u0065\u0067\u0069\u006e\u0073");defer func (){if _dag !=nil {_eaf .Log .Trace ("[\u0053\u0045\u0047\u004d\u0045\u004eT\u002d\u0048\u0045\u0041\u0044\u0045R\u005d\u005b\u0045\u004e\u0043\u004f\u0044E\u005d\u0020\u0046\u0061\u0069\u006c\u0065\u0064\u002e\u0020%\u0076",_dag );
}else {_eaf .Log .Trace ("\u005b\u0053\u0045\u0047ME\u004e\u0054\u002d\u0048\u0045\u0041\u0044\u0045\u0052\u005d\u0020\u0025\u0076",_acdd );_eaf .Log .Trace ("\u005b\u0053\u0045\u0047\u004d\u0045N\u0054\u002d\u0048\u0045\u0041\u0044\u0045\u0052\u005d\u005b\u0045\u004e\u0043O\u0044\u0045\u005d\u0020\u0046\u0069\u006ei\u0073\u0068\u0065\u0064");
};}();w .FinishByte ();if _acdd .SegmentData !=nil {_dcbb ,_dbgf :=_acdd .SegmentData .(SegmentEncoder );if !_dbgf {return 0,_ae .Errorf (_badc ,"\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u003a\u0020\u0025\u0054\u0020\u0064\u006f\u0065s\u006e\u0027\u0074\u0020\u0069\u006d\u0070\u006c\u0065\u006d\u0065\u006e\u0074 \u0053\u0065\u0067\u006d\u0065\u006e\u0074\u0045\u006e\u0063\u006f\u0064er\u0020\u0069\u006e\u0074\u0065\u0072\u0066\u0061\u0063\u0065",_acdd .SegmentData );
};_cede =_ba .BufferedMSB ();_gfaf ,_dag =_dcbb .Encode (_cede );if _dag !=nil {return 0,_ae .Wrap (_dag ,_badc ,"");};_acdd .SegmentDataLength =uint64 (_gfaf );};if _acdd .pageSize ()==4{_acdd .PageAssociationFieldSize =true ;};var _ebb int ;_ebb ,_dag =_acdd .writeSegmentNumber (w );
if _dag !=nil {return 0,_ae .Wrap (_dag ,_badc ,"");};_gfaf +=_ebb ;if _dag =_acdd .writeFlags (w );_dag !=nil {return _gfaf ,_ae .Wrap (_dag ,_badc ,"");};_gfaf ++;_ebb ,_dag =_acdd .writeReferredToCount (w );if _dag !=nil {return 0,_ae .Wrap (_dag ,_badc ,"");
};_gfaf +=_ebb ;_ebb ,_dag =_acdd .writeReferredToSegments (w );if _dag !=nil {return 0,_ae .Wrap (_dag ,_badc ,"");};_gfaf +=_ebb ;_ebb ,_dag =_acdd .writeSegmentPageAssociation (w );if _dag !=nil {return 0,_ae .Wrap (_dag ,_badc ,"");};_gfaf +=_ebb ;
_ebb ,_dag =_acdd .writeSegmentDataLength (w );if _dag !=nil {return 0,_ae .Wrap (_dag ,_badc ,"");};_gfaf +=_ebb ;_acdd .HeaderLength =int64 (_gfaf )-int64 (_acdd .SegmentDataLength );if _cede !=nil {if _ ,_dag =w .Write (_cede .Data ());_dag !=nil {return _gfaf ,_ae .Wrap (_dag ,_badc ,"\u0077r\u0069t\u0065\u0020\u0073\u0065\u0067m\u0065\u006et\u0020\u0064\u0061\u0074\u0061");
};};return _gfaf ,nil ;};func (_dgdf *Header )readReferredToSegmentNumbers (_cacd *_ba .Reader ,_acf int )([]int ,error ){const _bcce ="\u0072\u0065\u0061\u0064R\u0065\u0066\u0065\u0072\u0072\u0065\u0064\u0054\u006f\u0053e\u0067m\u0065\u006e\u0074\u004e\u0075\u006d\u0062e\u0072\u0073";
_dbec :=make ([]int ,_acf );if _acf > 0{_dgdf .RTSegments =make ([]*Header ,_acf );var (_fbecb uint64 ;_cad error ;);for _cbcf :=0;_cbcf < _acf ;_cbcf ++{_fbecb ,_cad =_cacd .ReadBits (byte (_dgdf .referenceSize ())<<3);if _cad !=nil {return nil ,_ae .Wrapf (_cad ,_bcce ,"\u0027\u0025\u0064\u0027 \u0072\u0065\u0066\u0065\u0072\u0072\u0065\u0064\u0020\u0073e\u0067m\u0065\u006e\u0074\u0020\u006e\u0075\u006db\u0065\u0072",_cbcf );
};_dbec [_cbcf ]=int (_fbecb &_g .MaxInt32 );};};return _dbec ,nil ;};func (_aefe *Header )writeSegmentNumber (_becf _ba .BinaryWriter )(_gacb int ,_bbbe error ){_bdbe :=make ([]byte ,4);_d .BigEndian .PutUint32 (_bdbe ,_aefe .SegmentNumber );if _gacb ,_bbbe =_becf .Write (_bdbe );
_bbbe !=nil {return 0,_ae .Wrap (_bbbe ,"\u0048e\u0061\u0064\u0065\u0072.\u0077\u0072\u0069\u0074\u0065S\u0065g\u006de\u006e\u0074\u004e\u0075\u006d\u0062\u0065r","");};return _gacb ,nil ;};func (_gce *GenericRegion )Encode (w _ba .BinaryWriter )(_afa int ,_fffa error ){const _eddb ="G\u0065n\u0065\u0072\u0069\u0063\u0052\u0065\u0067\u0069o\u006e\u002e\u0045\u006eco\u0064\u0065";
if _gce .Bitmap ==nil {return 0,_ae .Error (_eddb ,"\u0070\u0072\u006f\u0076id\u0065\u0064\u0020\u006e\u0069\u006c\u0020\u0062\u0069\u0074\u006d\u0061\u0070");};_cfc ,_fffa :=_gce .RegionSegment .Encode (w );if _fffa !=nil {return 0,_ae .Wrap (_fffa ,_eddb ,"\u0052\u0065\u0067\u0069\u006f\u006e\u0053\u0065\u0067\u006d\u0065\u006e\u0074");
};_afa +=_cfc ;if _fffa =w .SkipBits (4);_fffa !=nil {return _afa ,_ae .Wrap (_fffa ,_eddb ,"\u0073k\u0069p\u0020\u0072\u0065\u0073\u0065r\u0076\u0065d\u0020\u0062\u0069\u0074\u0073");};var _fbc int ;if _gce .IsTPGDon {_fbc =1;};if _fffa =w .WriteBit (_fbc );
_fffa !=nil {return _afa ,_ae .Wrap (_fffa ,_eddb ,"\u0074\u0070\u0067\u0064\u006f\u006e");};_fbc =0;if _fffa =w .WriteBit (int (_gce .GBTemplate >>1)&0x01);_fffa !=nil {return _afa ,_ae .Wrap (_fffa ,_eddb ,"f\u0069r\u0073\u0074\u0020\u0067\u0062\u0074\u0065\u006dp\u006c\u0061\u0074\u0065 b\u0069\u0074");
};if _fffa =w .WriteBit (int (_gce .GBTemplate )&0x01);_fffa !=nil {return _afa ,_ae .Wrap (_fffa ,_eddb ,"s\u0065\u0063\u006f\u006ed \u0067b\u0074\u0065\u006d\u0070\u006ca\u0074\u0065\u0020\u0062\u0069\u0074");};if _gce .UseMMR {_fbc =1;};if _fffa =w .WriteBit (_fbc );
_fffa !=nil {return _afa ,_ae .Wrap (_fffa ,_eddb ,"u\u0073\u0065\u0020\u004d\u004d\u0052\u0020\u0062\u0069\u0074");};_afa ++;if _cfc ,_fffa =_gce .writeGBAtPixels (w );_fffa !=nil {return _afa ,_ae .Wrap (_fffa ,_eddb ,"");};_afa +=_cfc ;_bgae :=_be .New ();
if _fffa =_bgae .EncodeBitmap (_gce .Bitmap ,_gce .IsTPGDon );_fffa !=nil {return _afa ,_ae .Wrap (_fffa ,_eddb ,"");};_bgae .Final ();var _bad int64 ;if _bad ,_fffa =_bgae .WriteTo (w );_fffa !=nil {return _afa ,_ae .Wrap (_fffa ,_eddb ,"");};_afa +=int (_bad );
return _afa ,nil ;};func (_egce *HalftoneRegion )checkInput ()error {if _egce .IsMMREncoded {if _egce .HTemplate !=0{_eaf .Log .Debug ("\u0048\u0054\u0065\u006d\u0070l\u0061\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0073\u0068\u006f\u0075l\u0064\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0074\u0068\u0065\u0020\u0076\u0061\u006c\u0075\u0065\u0020\u0030",_egce .HTemplate );
};if _egce .HSkipEnabled {_eaf .Log .Debug ("\u0048\u0053\u006b\u0069\u0070\u0045\u006e\u0061\u0062\u006c\u0065\u0064\u0020\u0030\u0020\u0025\u0076\u0020(\u0073\u0068\u006f\u0075\u006c\u0064\u0020c\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0074\u0068\u0065\u0020v\u0061\u006c\u0075\u0065\u0020\u0066\u0061\u006c\u0073\u0065\u0029",_egce .HSkipEnabled );
};};return nil ;};func (_dgdb *GenericRegion )decodeTemplate3 (_fdea ,_ffa ,_eagba int ,_edec ,_cgga int )(_efdbc error ){const _fbeb ="\u0064e\u0063o\u0064\u0065\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u0033";var (_fdb ,_bdd int ;_efef int ;_ecgf byte ;
_eeg ,_ddec int ;);if _fdea >=1{_ecgf ,_efdbc =_dgdb .Bitmap .GetByte (_cgga );if _efdbc !=nil {return _ae .Wrap (_efdbc ,_fbeb ,"\u006ci\u006e\u0065\u0020\u003e\u003d\u00201");};_efef =int (_ecgf );};_fdb =(_efef >>1)&0x70;for _edb :=0;_edb < _eagba ;
_edb =_eeg {var (_cgcd byte ;_ebeg int ;);_eeg =_edb +8;if _cbe :=_ffa -_edb ;_cbe > 8{_ebeg =8;}else {_ebeg =_cbe ;};if _fdea >=1{_efef <<=8;if _eeg < _ffa {_ecgf ,_efdbc =_dgdb .Bitmap .GetByte (_cgga +1);if _efdbc !=nil {return _ae .Wrap (_efdbc ,_fbeb ,"\u0069\u006e\u006e\u0065\u0072\u0020\u002d\u0020\u006c\u0069\u006e\u0065 \u003e\u003d\u0020\u0031");
};_efef |=int (_ecgf );};};for _gcfd :=0;_gcfd < _ebeg ;_gcfd ++{if _dgdb ._abc {_bdd =_dgdb .overrideAtTemplate3 (_fdb ,_edb +_gcfd ,_fdea ,int (_cgcd ),_gcfd );_dgdb ._agbd .SetIndex (int32 (_bdd ));}else {_dgdb ._agbd .SetIndex (int32 (_fdb ));};_ddec ,_efdbc =_dgdb ._cgab .DecodeBit (_dgdb ._agbd );
if _efdbc !=nil {return _ae .Wrap (_efdbc ,_fbeb ,"");};_cgcd |=byte (_ddec )<<byte (7-_gcfd );_fdb =((_fdb &0x1f7)<<1)|_ddec |((_efef >>uint (8-_gcfd ))&0x010);};if _ddgc :=_dgdb .Bitmap .SetByte (_edec ,_cgcd );_ddgc !=nil {return _ae .Wrap (_ddgc ,_fbeb ,"");
};_edec ++;_cgga ++;};return nil ;};func (_abb *Header )readHeaderFlags ()error {const _agcg ="\u0072e\u0061d\u0048\u0065\u0061\u0064\u0065\u0072\u0046\u006c\u0061\u0067\u0073";_gfe ,_dfbe :=_abb .Reader .ReadBit ();if _dfbe !=nil {return _ae .Wrap (_dfbe ,_agcg ,"r\u0065\u0074\u0061\u0069\u006e\u0020\u0066\u006c\u0061\u0067");
};if _gfe !=0{_abb .RetainFlag =true ;};_gfe ,_dfbe =_abb .Reader .ReadBit ();if _dfbe !=nil {return _ae .Wrap (_dfbe ,_agcg ,"\u0070\u0061g\u0065\u0020\u0061s\u0073\u006f\u0063\u0069\u0061\u0074\u0069\u006f\u006e");};if _gfe !=0{_abb .PageAssociationFieldSize =true ;
};_add ,_dfbe :=_abb .Reader .ReadBits (6);if _dfbe !=nil {return _ae .Wrap (_dfbe ,_agcg ,"\u0073\u0065\u0067m\u0065\u006e\u0074\u0020\u0074\u0079\u0070\u0065");};_abb .Type =Type (int (_add ));return nil ;};type Pager interface{GetSegment (int )(*Header ,error );
GetBitmap ()(*_ff .Bitmap ,error );};func (_adcf *PageInformationSegment )CombinationOperatorOverrideAllowed ()bool {return _adcf ._ccef };func (_ebga *TextRegion )decodeDT ()(_ggbdf int64 ,_bgfe error ){if _ebga .IsHuffmanEncoded {if _ebga .SbHuffDT ==3{_ggbdf ,_bgfe =_ebga ._aaag .Decode (_ebga ._fdgb );
if _bgfe !=nil {return 0,_bgfe ;};}else {var _cccc _cg .Tabler ;_cccc ,_bgfe =_cg .GetStandardTable (11+int (_ebga .SbHuffDT ));if _bgfe !=nil {return 0,_bgfe ;};_ggbdf ,_bgfe =_cccc .Decode (_ebga ._fdgb );if _bgfe !=nil {return 0,_bgfe ;};};}else {var _ggaa int32 ;
_ggaa ,_bgfe =_ebga ._febe .DecodeInt (_ebga ._gbbg );if _bgfe !=nil {return 0,_bgfe ;};_ggbdf =int64 (_ggaa );};_ggbdf *=int64 (_ebga .SbStrips );return _ggbdf ,nil ;};func (_efcd *HalftoneRegion )renderPattern (_eeceb [][]int )(_dfca error ){var _fbba ,_aacb int ;
for _eca :=0;_eca < int (_efcd .HGridHeight );_eca ++{for _dcbc :=0;_dcbc < int (_efcd .HGridWidth );_dcbc ++{_fbba =_efcd .computeX (_eca ,_dcbc );_aacb =_efcd .computeY (_eca ,_dcbc );_cgf :=_efcd .Patterns [_eeceb [_eca ][_dcbc ]];if _dfca =_ff .Blit (_cgf ,_efcd .HalftoneRegionBitmap ,_fbba +int (_efcd .HGridX ),_aacb +int (_efcd .HGridY ),_efcd .CombinationOperator );
_dfca !=nil {return _dfca ;};};};return nil ;};func (_babe *SymbolDictionary )InitEncode (symbols *_ff .Bitmaps ,symbolList []int ,symbolMap map[int ]int ,unborderSymbols bool )error {const _eaad ="S\u0079\u006d\u0062\u006f\u006c\u0044i\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u002eI\u006e\u0069\u0074E\u006ec\u006f\u0064\u0065";
_babe .SdATX =[]int8 {3,-3,2,-2};_babe .SdATY =[]int8 {-1,-1,-2,-2};_babe ._gbfd =symbols ;_babe ._bdeb =make ([]int ,len (symbolList ));copy (_babe ._bdeb ,symbolList );if len (_babe ._bdeb )!=_babe ._gbfd .Size (){return _ae .Error (_eaad ,"s\u0079\u006d\u0062\u006f\u006c\u0073\u0020\u0061\u006e\u0064\u0020\u0073\u0079\u006d\u0062\u006f\u006c\u004ci\u0073\u0074\u0020\u006f\u0066\u0020\u0064\u0069\u0066\u0066er\u0065\u006e\u0074 \u0073i\u007a\u0065");
};_babe .NumberOfNewSymbols =uint32 (symbols .Size ());_babe .NumberOfExportedSymbols =uint32 (symbols .Size ());_babe ._dfcb =symbolMap ;_babe ._geb =unborderSymbols ;return nil ;};func (_ffde *SymbolDictionary )getSymbol (_acge int )(*_ff .Bitmap ,error ){const _fdga ="\u0067e\u0074\u0053\u0079\u006d\u0062\u006fl";
_agfg ,_ddee :=_ffde ._gbfd .GetBitmap (_ffde ._bdeb [_acge ]);if _ddee !=nil {return nil ,_ae .Wrap (_ddee ,_fdga ,"\u0063\u0061n\u0027\u0074\u0020g\u0065\u0074\u0020\u0073\u0079\u006d\u0062\u006f\u006c");};return _agfg ,nil ;};func (_cbgd *TextRegion )createRegionBitmap ()error {_cbgd .RegionBitmap =_ff .New (int (_cbgd .RegionInfo .BitmapWidth ),int (_cbgd .RegionInfo .BitmapHeight ));
if _cbgd .DefaultPixel !=0{_cbgd .RegionBitmap .SetDefaultPixel ();};return nil ;};func (_aead *TextRegion )Encode (w _ba .BinaryWriter )(_cade int ,_dbad error ){const _cggf ="\u0054\u0065\u0078\u0074\u0052\u0065\u0067\u0069\u006f\u006e\u002e\u0045n\u0063\u006f\u0064\u0065";
if _cade ,_dbad =_aead .RegionInfo .Encode (w );_dbad !=nil {return _cade ,_ae .Wrap (_dbad ,_cggf ,"");};var _dcgg int ;if _dcgg ,_dbad =_aead .encodeFlags (w );_dbad !=nil {return _cade ,_ae .Wrap (_dbad ,_cggf ,"");};_cade +=_dcgg ;if _dcgg ,_dbad =_aead .encodeSymbols (w );
_dbad !=nil {return _cade ,_ae .Wrap (_dbad ,_cggf ,"");};_cade +=_dcgg ;return _cade ,nil ;};func (_aagca *PageInformationSegment )encodeStripingInformation (_cbeg _ba .BinaryWriter )(_dbf int ,_eefc error ){const _afca ="\u0065n\u0063\u006f\u0064\u0065S\u0074\u0072\u0069\u0070\u0069n\u0067I\u006ef\u006f\u0072\u006d\u0061\u0074\u0069\u006fn";
if !_aagca .IsStripe {if _dbf ,_eefc =_cbeg .Write ([]byte {0x00,0x00});_eefc !=nil {return 0,_ae .Wrap (_eefc ,_afca ,"n\u006f\u0020\u0073\u0074\u0072\u0069\u0070\u0069\u006e\u0067");};return _dbf ,nil ;};_gfae :=make ([]byte ,2);_d .BigEndian .PutUint16 (_gfae ,_aagca .MaxStripeSize |1<<15);
if _dbf ,_eefc =_cbeg .Write (_gfae );_eefc !=nil {return 0,_ae .Wrapf (_eefc ,_afca ,"\u0073\u0074\u0072i\u0070\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_aagca .MaxStripeSize );};return _dbf ,nil ;};func (_eafdc *SymbolDictionary )String ()string {_dcfc :=&_ef .Builder {};
_dcfc .WriteString ("\n\u005b\u0053\u0059\u004dBO\u004c-\u0044\u0049\u0043\u0054\u0049O\u004e\u0041\u0052\u0059\u005d\u000a");_dcfc .WriteString (_bg .Sprintf ("\u0009-\u0020S\u0064\u0072\u0054\u0065\u006dp\u006c\u0061t\u0065\u0020\u0025\u0076\u000a",_eafdc .SdrTemplate ));
_dcfc .WriteString (_bg .Sprintf ("\u0009\u002d\u0020\u0053\u0064\u0054\u0065\u006d\u0070\u006c\u0061\u0074e\u0020\u0025\u0076\u000a",_eafdc .SdTemplate ));_dcfc .WriteString (_bg .Sprintf ("\u0009\u002d\u0020\u0069\u0073\u0043\u006f\u0064\u0069\u006eg\u0043\u006f\u006e\u0074\u0065\u0078\u0074R\u0065\u0074\u0061\u0069\u006e\u0065\u0064\u0020\u0025\u0076\u000a",_eafdc ._edecd ));
_dcfc .WriteString (_bg .Sprintf ("\u0009\u002d\u0020\u0069\u0073\u0043\u006f\u0064\u0069\u006e\u0067C\u006f\u006e\u0074\u0065\u0078\u0074\u0055\u0073\u0065\u0064 \u0025\u0076\u000a",_eafdc ._bedb ));_dcfc .WriteString (_bg .Sprintf ("\u0009\u002d\u0020\u0053\u0064\u0048u\u0066\u0066\u0041\u0067\u0067\u0049\u006e\u0073\u0074\u0061\u006e\u0063\u0065S\u0065\u006c\u0065\u0063\u0074\u0069\u006fn\u0020\u0025\u0076\u000a",_eafdc .SdHuffAggInstanceSelection ));
_dcfc .WriteString (_bg .Sprintf ("\u0009\u002d\u0020\u0053d\u0048\u0075\u0066\u0066\u0042\u004d\u0053\u0069\u007a\u0065S\u0065l\u0065\u0063\u0074\u0069\u006f\u006e\u0020%\u0076\u000a",_eafdc .SdHuffBMSizeSelection ));_dcfc .WriteString (_bg .Sprintf ("\u0009\u002d\u0020\u0053\u0064\u0048u\u0066\u0066\u0044\u0065\u0063\u006f\u0064\u0065\u0057\u0069\u0064\u0074\u0068S\u0065\u006c\u0065\u0063\u0074\u0069\u006fn\u0020\u0025\u0076\u000a",_eafdc .SdHuffDecodeWidthSelection ));
_dcfc .WriteString (_bg .Sprintf ("\u0009\u002d\u0020Sd\u0048\u0075\u0066\u0066\u0044\u0065\u0063\u006f\u0064e\u0048e\u0069g\u0068t\u0053\u0065\u006c\u0065\u0063\u0074\u0069\u006f\u006e\u0020\u0025\u0076\u000a",_eafdc .SdHuffDecodeHeightSelection ));_dcfc .WriteString (_bg .Sprintf ("\u0009\u002d\u0020U\u0073\u0065\u0052\u0065f\u0069\u006e\u0065\u006d\u0065\u006e\u0074A\u0067\u0067\u0072\u0065\u0067\u0061\u0074\u0069\u006f\u006e\u0020\u0025\u0076\u000a",_eafdc .UseRefinementAggregation ));
_dcfc .WriteString (_bg .Sprintf ("\u0009\u002d\u0020is\u0048\u0075\u0066\u0066\u006d\u0061\u006e\u0045\u006e\u0063\u006f\u0064\u0065\u0064\u0020\u0025\u0076\u000a",_eafdc .IsHuffmanEncoded ));_dcfc .WriteString (_bg .Sprintf ("\u0009\u002d\u0020S\u0064\u0041\u0054\u0058\u0020\u0025\u0076\u000a",_eafdc .SdATX ));
_dcfc .WriteString (_bg .Sprintf ("\u0009\u002d\u0020S\u0064\u0041\u0054\u0059\u0020\u0025\u0076\u000a",_eafdc .SdATY ));_dcfc .WriteString (_bg .Sprintf ("\u0009\u002d\u0020\u0053\u0064\u0072\u0041\u0054\u0058\u0020\u0025\u0076\u000a",_eafdc .SdrATX ));
_dcfc .WriteString (_bg .Sprintf ("\u0009\u002d\u0020\u0053\u0064\u0072\u0041\u0054\u0059\u0020\u0025\u0076\u000a",_eafdc .SdrATY ));_dcfc .WriteString (_bg .Sprintf ("\u0009\u002d\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u004ff\u0045\u0078\u0070\u006f\u0072\u0074\u0065d\u0053\u0079\u006d\u0062\u006f\u006c\u0073\u0020\u0025\u0076\u000a",_eafdc .NumberOfExportedSymbols ));
_dcfc .WriteString (_bg .Sprintf ("\u0009-\u0020\u004e\u0075\u006db\u0065\u0072\u004f\u0066\u004ee\u0077S\u0079m\u0062\u006f\u006c\u0073\u0020\u0025\u0076\n",_eafdc .NumberOfNewSymbols ));_dcfc .WriteString (_bg .Sprintf ("\u0009\u002d\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u004ff\u0049\u006d\u0070\u006f\u0072\u0074\u0065d\u0053\u0079\u006d\u0062\u006f\u006c\u0073\u0020\u0025\u0076\u000a",_eafdc ._efaf ));
_dcfc .WriteString (_bg .Sprintf ("\u0009\u002d \u006e\u0075\u006d\u0062\u0065\u0072\u004f\u0066\u0044\u0065\u0063\u006f\u0064\u0065\u0064\u0053\u0079\u006d\u0062\u006f\u006c\u0073 %\u0076\u000a",_eafdc ._bcgf ));return _dcfc .String ();};func (_edaa *TextRegion )decodeSymbolInstances ()error {_ccfbg ,_eaba :=_edaa .decodeStripT ();
if _eaba !=nil {return _eaba ;};var (_agdb int64 ;_cbgdd uint32 ;);for _cbgdd < _edaa .NumberOfSymbolInstances {_bbdf ,_geeg :=_edaa .decodeDT ();if _geeg !=nil {return _geeg ;};_ccfbg +=_bbdf ;var _cagcce int64 ;_dgfg :=true ;_edaa ._dfgg =0;for {if _dgfg {_cagcce ,_geeg =_edaa .decodeDfs ();
if _geeg !=nil {return _geeg ;};_agdb +=_cagcce ;_edaa ._dfgg =_agdb ;_dgfg =false ;}else {_fbaa ,_fegb :=_edaa .decodeIds ();if _f .Is (_fegb ,_db .ErrOOB ){break ;};if _fegb !=nil {return _fegb ;};if _cbgdd >=_edaa .NumberOfSymbolInstances {break ;};
_edaa ._dfgg +=_fbaa +int64 (_edaa .SbDsOffset );};_ddfa ,_ecaf :=_edaa .decodeCurrentT ();if _ecaf !=nil {return _ecaf ;};_dbbf :=_ccfbg +_ddfa ;_gcdf ,_ecaf :=_edaa .decodeID ();if _ecaf !=nil {return _ecaf ;};_gbcc ,_ecaf :=_edaa .decodeRI ();if _ecaf !=nil {return _ecaf ;
};_aegd ,_ecaf :=_edaa .decodeIb (_gbcc ,_gcdf );if _ecaf !=nil {return _ecaf ;};if _ecaf =_edaa .blit (_aegd ,_dbbf );_ecaf !=nil {return _ecaf ;};_cbgdd ++;};};return nil ;};func (_acea *GenericRegion )overrideAtTemplate1 (_adag ,_acd ,_deb ,_ecb ,_cbec int )int {_adag &=0x1FF7;
if _acea .GBAtY [0]==0&&_acea .GBAtX [0]>=-int8 (_cbec ){_adag |=(_ecb >>uint (7-(int8 (_cbec )+_acea .GBAtX [0]))&0x1)<<3;}else {_adag |=int (_acea .getPixel (_acd +int (_acea .GBAtX [0]),_deb +int (_acea .GBAtY [0])))<<3;};return _adag ;};func (_babbe *TextRegion )decodeID ()(int64 ,error ){if _babbe .IsHuffmanEncoded {if _babbe ._ecad ==nil {_befdc ,_edfa :=_babbe ._fdgb .ReadBits (byte (_babbe ._gafgc ));
return int64 (_befdc ),_edfa ;};return _babbe ._ecad .Decode (_babbe ._fdgb );};return _babbe ._febe .DecodeIAID (uint64 (_babbe ._gafgc ),_babbe ._dbaeb );};type EncodeInitializer interface{InitEncode ();};func (_fe *GenericRefinementRegion )decodeOptimized (_ffb ,_fbd ,_fc ,_bab ,_eag ,_dda ,_bd int )error {var (_cd error ;
_bcd int ;_gcc int ;);_bdf :=_ffb -int (_fe .ReferenceDY );if _gfb :=int (-_fe .ReferenceDX );_gfb > 0{_bcd =_gfb ;};_daf :=_fe .ReferenceBitmap .GetByteIndex (_bcd ,_bdf );if _fe .ReferenceDX > 0{_gcc =int (_fe .ReferenceDX );};_gd :=_fe .RegionBitmap .GetByteIndex (_gcc ,_ffb );
switch _fe .TemplateID {case 0:_cd =_fe .decodeTemplate (_ffb ,_fbd ,_fc ,_bab ,_eag ,_dda ,_bd ,_gd ,_bdf ,_daf ,_fe ._aab );case 1:_cd =_fe .decodeTemplate (_ffb ,_fbd ,_fc ,_bab ,_eag ,_dda ,_bd ,_gd ,_bdf ,_daf ,_fe ._aabc );};return _cd ;};func (_ggff *SymbolDictionary )readRefinementAtPixels (_aafa int )error {_ggff .SdrATX =make ([]int8 ,_aafa );
_ggff .SdrATY =make ([]int8 ,_aafa );var (_fgeg byte ;_ffcb error ;);for _fceg :=0;_fceg < _aafa ;_fceg ++{_fgeg ,_ffcb =_ggff ._dffd .ReadByte ();if _ffcb !=nil {return _ffcb ;};_ggff .SdrATX [_fceg ]=int8 (_fgeg );_fgeg ,_ffcb =_ggff ._dffd .ReadByte ();
if _ffcb !=nil {return _ffcb ;};_ggff .SdrATY [_fceg ]=int8 (_fgeg );};return nil ;};func (_afab *GenericRegion )decodeSLTP ()(int ,error ){switch _afab .GBTemplate {case 0:_afab ._agbd .SetIndex (0x9B25);case 1:_afab ._agbd .SetIndex (0x795);case 2:_afab ._agbd .SetIndex (0xE5);
case 3:_afab ._agbd .SetIndex (0x195);};return _afab ._cgab .DecodeBit (_afab ._agbd );};type SymbolDictionary struct{_dffd *_ba .Reader ;SdrTemplate int8 ;SdTemplate int8 ;_edecd bool ;_bedb bool ;SdHuffAggInstanceSelection bool ;SdHuffBMSizeSelection int8 ;
SdHuffDecodeWidthSelection int8 ;SdHuffDecodeHeightSelection int8 ;UseRefinementAggregation bool ;IsHuffmanEncoded bool ;SdATX []int8 ;SdATY []int8 ;SdrATX []int8 ;SdrATY []int8 ;NumberOfExportedSymbols uint32 ;NumberOfNewSymbols uint32 ;Header *Header ;
_efaf uint32 ;_bgf []*_ff .Bitmap ;_bcgf uint32 ;_cgfd []*_ff .Bitmap ;_bddd _cg .Tabler ;_fdbc _cg .Tabler ;_efg _cg .Tabler ;_gec _cg .Tabler ;_cecd []*_ff .Bitmap ;_ddecc []*_ff .Bitmap ;_fcae *_ea .Decoder ;_fdae *TextRegion ;_cdba *GenericRegion ;
_ddcc *GenericRefinementRegion ;_agcgg *_ea .DecoderStats ;_eda *_ea .DecoderStats ;_bggg *_ea .DecoderStats ;_eacc *_ea .DecoderStats ;_fccc *_ea .DecoderStats ;_bcec *_ea .DecoderStats ;_debc *_ea .DecoderStats ;_gbfa *_ea .DecoderStats ;_ffbe *_ea .DecoderStats ;
_cea int8 ;_gbfd *_ff .Bitmaps ;_bdeb []int ;_dfcb map[int ]int ;_geb bool ;};func (_gcf *GenericRegion )decodeTemplate0a (_gfdd ,_dbg ,_efc int ,_fage ,_ddg int )(_acg error ){const _ged ="\u0064\u0065c\u006f\u0064\u0065T\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u0030\u0061";
var (_ccd ,_cdga int ;_gacd ,_gdb int ;_gaa byte ;_gfa int ;);if _gfdd >=1{_gaa ,_acg =_gcf .Bitmap .GetByte (_ddg );if _acg !=nil {return _ae .Wrap (_acg ,_ged ,"\u006ci\u006e\u0065\u0020\u003e\u003d\u00201");};_gacd =int (_gaa );};if _gfdd >=2{_gaa ,_acg =_gcf .Bitmap .GetByte (_ddg -_gcf .Bitmap .RowStride );
if _acg !=nil {return _ae .Wrap (_acg ,_ged ,"\u006ci\u006e\u0065\u0020\u003e\u003d\u00202");};_gdb =int (_gaa )<<6;};_ccd =(_gacd &0xf0)|(_gdb &0x3800);for _ggd :=0;_ggd < _efc ;_ggd =_gfa {var (_cca byte ;_dfd int ;);_gfa =_ggd +8;if _aabd :=_dbg -_ggd ;
_aabd > 8{_dfd =8;}else {_dfd =_aabd ;};if _gfdd > 0{_gacd <<=8;if _gfa < _dbg {_gaa ,_acg =_gcf .Bitmap .GetByte (_ddg +1);if _acg !=nil {return _ae .Wrap (_acg ,_ged ,"\u006c\u0069\u006e\u0065\u0020\u003e\u0020\u0030");};_gacd |=int (_gaa );};};if _gfdd > 1{_aeb :=_ddg -_gcf .Bitmap .RowStride +1;
_gdb <<=8;if _gfa < _dbg {_gaa ,_acg =_gcf .Bitmap .GetByte (_aeb );if _acg !=nil {return _ae .Wrap (_acg ,_ged ,"\u006c\u0069\u006e\u0065\u0020\u003e\u0020\u0031");};_gdb |=int (_gaa )<<6;}else {_gdb |=0;};};for _bedd :=0;_bedd < _dfd ;_bedd ++{_egf :=uint (7-_bedd );
if _gcf ._abc {_cdga =_gcf .overrideAtTemplate0a (_ccd ,_ggd +_bedd ,_gfdd ,int (_cca ),_bedd ,int (_egf ));_gcf ._agbd .SetIndex (int32 (_cdga ));}else {_gcf ._agbd .SetIndex (int32 (_ccd ));};var _aefa int ;_aefa ,_acg =_gcf ._cgab .DecodeBit (_gcf ._agbd );
if _acg !=nil {return _ae .Wrap (_acg ,_ged ,"");};_cca |=byte (_aefa )<<_egf ;_ccd =((_ccd &0x7bf7)<<1)|_aefa |((_gacd >>_egf )&0x10)|((_gdb >>_egf )&0x800);};if _gga :=_gcf .Bitmap .SetByte (_fage ,_cca );_gga !=nil {return _ae .Wrap (_gga ,_ged ,"");
};_fage ++;_ddg ++;};return nil ;};func (_bdaga *PageInformationSegment )Encode (w _ba .BinaryWriter )(_ggdf int ,_eacf error ){const _bdae ="\u0050\u0061g\u0065\u0049\u006e\u0066\u006f\u0072\u006d\u0061\u0074\u0069\u006f\u006e\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u002e\u0045\u006eco\u0064\u0065";
_acc :=make ([]byte ,4);_d .BigEndian .PutUint32 (_acc ,uint32 (_bdaga .PageBMWidth ));_ggdf ,_eacf =w .Write (_acc );if _eacf !=nil {return _ggdf ,_ae .Wrap (_eacf ,_bdae ,"\u0077\u0069\u0064t\u0068");};_d .BigEndian .PutUint32 (_acc ,uint32 (_bdaga .PageBMHeight ));
var _effe int ;_effe ,_eacf =w .Write (_acc );if _eacf !=nil {return _effe +_ggdf ,_ae .Wrap (_eacf ,_bdae ,"\u0068\u0065\u0069\u0067\u0068\u0074");};_ggdf +=_effe ;_d .BigEndian .PutUint32 (_acc ,uint32 (_bdaga .ResolutionX ));_effe ,_eacf =w .Write (_acc );
if _eacf !=nil {return _effe +_ggdf ,_ae .Wrap (_eacf ,_bdae ,"\u0078\u0020\u0072e\u0073\u006f\u006c\u0075\u0074\u0069\u006f\u006e");};_ggdf +=_effe ;_d .BigEndian .PutUint32 (_acc ,uint32 (_bdaga .ResolutionY ));if _effe ,_eacf =w .Write (_acc );_eacf !=nil {return _effe +_ggdf ,_ae .Wrap (_eacf ,_bdae ,"\u0079\u0020\u0072e\u0073\u006f\u006c\u0075\u0074\u0069\u006f\u006e");
};_ggdf +=_effe ;if _eacf =_bdaga .encodeFlags (w );_eacf !=nil {return _ggdf ,_ae .Wrap (_eacf ,_bdae ,"");};_ggdf ++;if _effe ,_eacf =_bdaga .encodeStripingInformation (w );_eacf !=nil {return _ggdf ,_ae .Wrap (_eacf ,_bdae ,"");};_ggdf +=_effe ;return _ggdf ,nil ;
};func (_daae *SymbolDictionary )setSymbolsArray ()error {if _daae ._bgf ==nil {if _dfab :=_daae .retrieveImportSymbols ();_dfab !=nil {return _dfab ;};};if _daae ._ddecc ==nil {_daae ._ddecc =append (_daae ._ddecc ,_daae ._bgf ...);};return nil ;};func (_ccdd *SymbolDictionary )retrieveImportSymbols ()error {for _ ,_ggce :=range _ccdd .Header .RTSegments {if _ggce .Type ==0{_fbac ,_fddd :=_ggce .GetSegmentData ();
if _fddd !=nil {return _fddd ;};_bgbf ,_ffged :=_fbac .(*SymbolDictionary );if !_ffged {return _bg .Errorf ("\u0070\u0072\u006f\u0076\u0069\u0064\u0065\u0064\u0020\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u0020\u0044\u0061\u0074a\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0061\u0020\u0053\u0079\u006d\u0062\u006f\u006c\u0044\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u0053\u0065\u0067m\u0065\u006e\u0074\u003a\u0020%\u0054",_fbac );
};_baae ,_fddd :=_bgbf .GetDictionary ();if _fddd !=nil {return _bg .Errorf ("\u0072\u0065\u006c\u0061\u0074\u0065\u0064 \u0073\u0065\u0067m\u0065\u006e\u0074 \u0077\u0069t\u0068\u0020\u0069\u006e\u0064\u0065x\u003a %\u0064\u0020\u0067\u0065\u0074\u0044\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0025\u0073",_ggce .SegmentNumber ,_fddd .Error ());
};_ccdd ._bgf =append (_ccdd ._bgf ,_baae ...);_ccdd ._efaf +=_bgbf .NumberOfExportedSymbols ;};};return nil ;};var _ templater =&template1 {};func (_ecdfg *TextRegion )checkInput ()error {const _bedfc ="\u0063\u0068\u0065\u0063\u006b\u0049\u006e\u0070\u0075\u0074";
if !_ecdfg .UseRefinement {if _ecdfg .SbrTemplate !=0{_eaf .Log .Debug ("\u0053\u0062\u0072Te\u006d\u0070\u006c\u0061\u0074\u0065\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0030");_ecdfg .SbrTemplate =0;};};if _ecdfg .SbHuffFS ==2||_ecdfg .SbHuffRDWidth ==2||_ecdfg .SbHuffRDHeight ==2||_ecdfg .SbHuffRDX ==2||_ecdfg .SbHuffRDY ==2{return _ae .Error (_bedfc ,"h\u0075\u0066\u0066\u006d\u0061\u006e \u0066\u006c\u0061\u0067\u0020\u0076a\u006c\u0075\u0065\u0020\u0069\u0073\u0020n\u006f\u0074\u0020\u0070\u0065\u0072\u006d\u0069\u0074\u0074e\u0064");
};if !_ecdfg .UseRefinement {if _ecdfg .SbHuffRSize !=0{_eaf .Log .Debug ("\u0053\u0062\u0048uf\u0066\u0052\u0053\u0069\u007a\u0065\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0030");_ecdfg .SbHuffRSize =0;};if _ecdfg .SbHuffRDY !=0{_eaf .Log .Debug ("S\u0062\u0048\u0075\u0066fR\u0044Y\u0020\u0073\u0068\u006f\u0075l\u0064\u0020\u0062\u0065\u0020\u0030");
_ecdfg .SbHuffRDY =0;};if _ecdfg .SbHuffRDX !=0{_eaf .Log .Debug ("S\u0062\u0048\u0075\u0066fR\u0044X\u0020\u0073\u0068\u006f\u0075l\u0064\u0020\u0062\u0065\u0020\u0030");_ecdfg .SbHuffRDX =0;};if _ecdfg .SbHuffRDWidth !=0{_eaf .Log .Debug ("\u0053b\u0048\u0075\u0066\u0066R\u0044\u0057\u0069\u0064\u0074h\u0020s\u0068o\u0075\u006c\u0064\u0020\u0062\u0065\u00200");
_ecdfg .SbHuffRDWidth =0;};if _ecdfg .SbHuffRDHeight !=0{_eaf .Log .Debug ("\u0053\u0062\u0048\u0075\u0066\u0066\u0052\u0044\u0048\u0065\u0069g\u0068\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020b\u0065\u0020\u0030");_ecdfg .SbHuffRDHeight =0;};
};return nil ;};func (_edfg *TextRegion )symbolIDCodeLengths ()error {var (_abeb []*_cg .Code ;_abbb uint64 ;_dcee _cg .Tabler ;_fcccd error ;);for _gggc :=0;_gggc < 35;_gggc ++{_abbb ,_fcccd =_edfg ._fdgb .ReadBits (4);if _fcccd !=nil {return _fcccd ;
};_efafb :=int (_abbb &0xf);if _efafb > 0{_abeb =append (_abeb ,_cg .NewCode (int32 (_efafb ),0,int32 (_gggc ),false ));};};_dcee ,_fcccd =_cg .NewFixedSizeTable (_abeb );if _fcccd !=nil {return _fcccd ;};var (_bbdc int64 ;_bebbg uint32 ;_daeb []*_cg .Code ;
_caeb int64 ;);for _bebbg < _edfg .NumberOfSymbols {_caeb ,_fcccd =_dcee .Decode (_edfg ._fdgb );if _fcccd !=nil {return _fcccd ;};if _caeb < 32{if _caeb > 0{_daeb =append (_daeb ,_cg .NewCode (int32 (_caeb ),0,int32 (_bebbg ),false ));};_bbdc =_caeb ;
_bebbg ++;}else {var _bgbce ,_eaaag int64 ;switch _caeb {case 32:_abbb ,_fcccd =_edfg ._fdgb .ReadBits (2);if _fcccd !=nil {return _fcccd ;};_bgbce =3+int64 (_abbb );if _bebbg > 0{_eaaag =_bbdc ;};case 33:_abbb ,_fcccd =_edfg ._fdgb .ReadBits (3);if _fcccd !=nil {return _fcccd ;
};_bgbce =3+int64 (_abbb );case 34:_abbb ,_fcccd =_edfg ._fdgb .ReadBits (7);if _fcccd !=nil {return _fcccd ;};_bgbce =11+int64 (_abbb );};for _ggfce :=0;_ggfce < int (_bgbce );_ggfce ++{if _eaaag > 0{_daeb =append (_daeb ,_cg .NewCode (int32 (_eaaag ),0,int32 (_bebbg ),false ));
};_bebbg ++;};};};_edfg ._fdgb .Align ();_edfg ._ecad ,_fcccd =_cg .NewFixedSizeTable (_daeb );return _fcccd ;};type HalftoneRegion struct{_ddaf *_ba .Reader ;_ece *Header ;DataHeaderOffset int64 ;DataHeaderLength int64 ;DataOffset int64 ;DataLength int64 ;
RegionSegment *RegionSegment ;HDefaultPixel int8 ;CombinationOperator _ff .CombinationOperator ;HSkipEnabled bool ;HTemplate byte ;IsMMREncoded bool ;HGridWidth uint32 ;HGridHeight uint32 ;HGridX int32 ;HGridY int32 ;HRegionX uint16 ;HRegionY uint16 ;HalftoneRegionBitmap *_ff .Bitmap ;
Patterns []*_ff .Bitmap ;};func (_gbgdf *SymbolDictionary )parseHeader ()(_becca error ){_eaf .Log .Trace ("\u005b\u0053\u0059\u004d\u0042\u004f\u004c \u0044\u0049\u0043T\u0049\u004f\u004e\u0041R\u0059\u005d\u005b\u0050\u0041\u0052\u0053\u0045\u002d\u0048\u0045\u0041\u0044\u0045\u0052\u005d\u0020\u0062\u0065\u0067\u0069\u006e\u0073\u002e\u002e\u002e");
defer func (){if _becca !=nil {_eaf .Log .Trace ("\u005bS\u0059\u004dB\u004f\u004c\u0020\u0044I\u0043\u0054\u0049O\u004e\u0041\u0052\u0059\u005d\u005b\u0050\u0041\u0052SE\u002d\u0048\u0045A\u0044\u0045R\u005d\u0020\u0066\u0061\u0069\u006ce\u0064\u002e \u0025\u0076",_becca );
}else {_eaf .Log .Trace ("\u005b\u0053\u0059\u004d\u0042\u004f\u004c \u0044\u0049\u0043T\u0049\u004f\u004e\u0041R\u0059\u005d\u005b\u0050\u0041\u0052\u0053\u0045\u002d\u0048\u0045\u0041\u0044\u0045\u0052\u005d\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
};}();if _becca =_gbgdf .readRegionFlags ();_becca !=nil {return _becca ;};if _becca =_gbgdf .setAtPixels ();_becca !=nil {return _becca ;};if _becca =_gbgdf .setRefinementAtPixels ();_becca !=nil {return _becca ;};if _becca =_gbgdf .readNumberOfExportedSymbols ();
_becca !=nil {return _becca ;};if _becca =_gbgdf .readNumberOfNewSymbols ();_becca !=nil {return _becca ;};if _becca =_gbgdf .setInSyms ();_becca !=nil {return _becca ;};if _gbgdf ._bedb {_bdcgb :=_gbgdf .Header .RTSegments ;for _cagg :=len (_bdcgb )-1;
_cagg >=0;_cagg --{if _bdcgb [_cagg ].Type ==0{_bcgdd ,_cgdf :=_bdcgb [_cagg ].SegmentData .(*SymbolDictionary );if !_cgdf {_becca =_bg .Errorf ("\u0072\u0065\u006c\u0061\u0074\u0065\u0064\u0020\u0053\u0065\u0067\u006d\u0065\u006e\u0074:\u0020\u0025\u0076\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0061\u0020S\u0079\u006d\u0062\u006f\u006c\u0020\u0044\u0069\u0063\u0074\u0069\u006fna\u0072\u0079\u0020\u0053\u0065\u0067\u006d\u0065\u006e\u0074",_bdcgb [_cagg ]);
return _becca ;};if _bcgdd ._bedb {_gbgdf .setRetainedCodingContexts (_bcgdd );};break ;};};};if _becca =_gbgdf .checkInput ();_becca !=nil {return _becca ;};return nil ;};type templater interface{form (_cddd ,_ecge ,_caf ,_dgf ,_gfgd int16 )int16 ;setIndex (_fbed *_ea .DecoderStats );
};func (_bdeg *Header )readNumberOfReferredToSegments (_acag *_ba .Reader )(uint64 ,error ){const _adge ="\u0072\u0065\u0061\u0064\u004e\u0075\u006d\u0062\u0065\u0072O\u0066\u0052\u0065\u0066\u0065\u0072\u0072e\u0064\u0054\u006f\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u0073";
_bggd ,_bgdcf :=_acag .ReadBits (3);if _bgdcf !=nil {return 0,_ae .Wrap (_bgdcf ,_adge ,"\u0063\u006f\u0075n\u0074\u0020\u006f\u0066\u0020\u0072\u0074\u0073");};_bggd &=0xf;var _adgb []byte ;if _bggd <=4{_adgb =make ([]byte ,5);for _abgd :=0;_abgd <=4;
_abgd ++{_eged ,_ggc :=_acag .ReadBit ();if _ggc !=nil {return 0,_ae .Wrap (_ggc ,_adge ,"\u0073\u0068\u006fr\u0074\u0020\u0066\u006f\u0072\u006d\u0061\u0074");};_adgb [_abgd ]=byte (_eged );};}else {_bggd ,_bgdcf =_acag .ReadBits (29);if _bgdcf !=nil {return 0,_bgdcf ;
};_bggd &=_g .MaxInt32 ;_bdfdd :=(_bggd +8)>>3;_bdfdd <<=3;_adgb =make ([]byte ,_bdfdd );var _dafb uint64 ;for _dafb =0;_dafb < _bdfdd ;_dafb ++{_bbfc ,_ggcc :=_acag .ReadBit ();if _ggcc !=nil {return 0,_ae .Wrap (_ggcc ,_adge ,"l\u006f\u006e\u0067\u0020\u0066\u006f\u0072\u006d\u0061\u0074");
};_adgb [_dafb ]=byte (_bbfc );};};return _bggd ,nil ;};func (_cfbe *PageInformationSegment )readIsStriped ()error {_ccdg ,_beda :=_cfbe ._efce .ReadBit ();if _beda !=nil {return _beda ;};if _ccdg ==1{_cfbe .IsStripe =true ;};return nil ;};func (_fgdd Type )String ()string {switch _fgdd {case TSymbolDictionary :return "\u0053\u0079\u006d\u0062\u006f\u006c\u0020\u0044\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079";
case TIntermediateTextRegion :return "\u0049n\u0074\u0065\u0072\u006d\u0065\u0064\u0069\u0061\u0074\u0065\u0020T\u0065\u0078\u0074\u0020\u0052\u0065\u0067\u0069\u006f\u006e";case TImmediateTextRegion :return "I\u006d\u006d\u0065\u0064ia\u0074e\u0020\u0054\u0065\u0078\u0074 \u0052\u0065\u0067\u0069\u006f\u006e";
case TImmediateLosslessTextRegion :return "\u0049\u006d\u006d\u0065\u0064\u0069\u0061\u0074\u0065\u0020L\u006f\u0073\u0073\u006c\u0065\u0073\u0073 \u0054\u0065\u0078\u0074\u0020\u0052\u0065\u0067\u0069\u006f\u006e";case TPatternDictionary :return "\u0050a\u0074t\u0065\u0072\u006e\u0020\u0044i\u0063\u0074i\u006f\u006e\u0061\u0072\u0079";
case TIntermediateHalftoneRegion :return "\u0049\u006e\u0074\u0065r\u006d\u0065\u0064\u0069\u0061\u0074\u0065\u0020\u0048\u0061l\u0066t\u006f\u006e\u0065\u0020\u0052\u0065\u0067i\u006f\u006e";case TImmediateHalftoneRegion :return "\u0049m\u006d\u0065\u0064\u0069a\u0074\u0065\u0020\u0048\u0061l\u0066t\u006fn\u0065\u0020\u0052\u0065\u0067\u0069\u006fn";
case TImmediateLosslessHalftoneRegion :return "\u0049\u006d\u006ded\u0069\u0061\u0074\u0065\u0020\u004c\u006f\u0073\u0073l\u0065s\u0073 \u0048a\u006c\u0066\u0074\u006f\u006e\u0065\u0020\u0052\u0065\u0067\u0069\u006f\u006e";case TIntermediateGenericRegion :return "I\u006e\u0074\u0065\u0072\u006d\u0065d\u0069\u0061\u0074\u0065\u0020\u0047\u0065\u006e\u0065r\u0069\u0063\u0020R\u0065g\u0069\u006f\u006e";
case TImmediateGenericRegion :return "\u0049m\u006d\u0065\u0064\u0069\u0061\u0074\u0065\u0020\u0047\u0065\u006ee\u0072\u0069\u0063\u0020\u0052\u0065\u0067\u0069\u006f\u006e";case TImmediateLosslessGenericRegion :return "\u0049\u006d\u006d\u0065\u0064\u0069a\u0074\u0065\u0020\u004c\u006f\u0073\u0073\u006c\u0065\u0073\u0073\u0020\u0047e\u006e\u0065\u0072\u0069\u0063\u0020\u0052e\u0067\u0069\u006f\u006e";
case TIntermediateGenericRefinementRegion :return "\u0049\u006e\u0074\u0065\u0072\u006d\u0065\u0064\u0069\u0061\u0074\u0065\u0020\u0047\u0065\u006e\u0065\u0072\u0069\u0063\u0020\u0052\u0065\u0066i\u006e\u0065\u006d\u0065\u006et\u0020\u0052e\u0067\u0069\u006f\u006e";
case TImmediateGenericRefinementRegion :return "I\u006d\u006d\u0065\u0064\u0069\u0061t\u0065\u0020\u0047\u0065\u006e\u0065r\u0069\u0063\u0020\u0052\u0065\u0066\u0069n\u0065\u006d\u0065\u006e\u0074\u0020\u0052\u0065\u0067\u0069o\u006e";case TImmediateLosslessGenericRefinementRegion :return "\u0049m\u006d\u0065d\u0069\u0061\u0074\u0065 \u004c\u006f\u0073s\u006c\u0065\u0073\u0073\u0020\u0047\u0065\u006e\u0065ri\u0063\u0020\u0052e\u0066\u0069n\u0065\u006d\u0065\u006e\u0074\u0020R\u0065\u0067i\u006f\u006e";
case TPageInformation :return "\u0050\u0061g\u0065\u0020\u0049n\u0066\u006f\u0072\u006d\u0061\u0074\u0069\u006f\u006e";case TEndOfPage :return "E\u006e\u0064\u0020\u004f\u0066\u0020\u0050\u0061\u0067\u0065";case TEndOfStrip :return "\u0045\u006e\u0064 \u004f\u0066\u0020\u0053\u0074\u0072\u0069\u0070";
case TEndOfFile :return "E\u006e\u0064\u0020\u004f\u0066\u0020\u0046\u0069\u006c\u0065";case TProfiles :return "\u0050\u0072\u006f\u0066\u0069\u006c\u0065\u0073";case TTables :return "\u0054\u0061\u0062\u006c\u0065\u0073";case TExtension :return "\u0045x\u0074\u0065\u006e\u0073\u0069\u006fn";
case TBitmap :return "\u0042\u0069\u0074\u006d\u0061\u0070";};return "I\u006ev\u0061\u006c\u0069\u0064\u0020\u0053\u0065\u0067m\u0065\u006e\u0074\u0020Ki\u006e\u0064";};type PatternDictionary struct{_eggc *_ba .Reader ;DataHeaderOffset int64 ;DataHeaderLength int64 ;
DataOffset int64 ;DataLength int64 ;GBAtX []int8 ;GBAtY []int8 ;IsMMREncoded bool ;HDTemplate byte ;HdpWidth byte ;HdpHeight byte ;Patterns []*_ff .Bitmap ;GrayMax uint32 ;};func (_fae *PageInformationSegment )CombinationOperator ()_ff .CombinationOperator {return _fae ._ecgc };
func (_gceed *TableSegment )HtLow ()int32 {return _gceed ._bacbd };func (_cf *EndOfStripe )Init (h *Header ,r *_ba .Reader )error {_cf ._aa =r ;return _cf .parseHeader ()};func (_dgad *TextRegion )setContexts (_gefa *_ea .DecoderStats ,_adce *_ea .DecoderStats ,_bdfe *_ea .DecoderStats ,_bggee *_ea .DecoderStats ,_gade *_ea .DecoderStats ,_caef *_ea .DecoderStats ,_bdfa *_ea .DecoderStats ,_gdgg *_ea .DecoderStats ,_egd *_ea .DecoderStats ,_bcaf *_ea .DecoderStats ){_dgad ._gbbg =_adce ;
_dgad ._ecfg =_bdfe ;_dgad ._fgege =_bggee ;_dgad ._afabc =_gade ;_dgad ._ecdf =_bdfa ;_dgad ._caea =_gdgg ;_dgad ._dbaeb =_caef ;_dgad ._fddb =_egd ;_dgad ._aegf =_bcaf ;_dgad ._edgc =_gefa ;};func (_becc *GenericRegion )decodeTemplate0b (_dbd ,_dcb ,_eec int ,_eeb ,_bae int )(_becd error ){const _aaae ="\u0064\u0065c\u006f\u0064\u0065T\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u0030\u0062";
var (_adf ,_bgd int ;_ffe ,_bce int ;_ace byte ;_aac int ;);if _dbd >=1{_ace ,_becd =_becc .Bitmap .GetByte (_bae );if _becd !=nil {return _ae .Wrap (_becd ,_aaae ,"\u006ci\u006e\u0065\u0020\u003e\u003d\u00201");};_ffe =int (_ace );};if _dbd >=2{_ace ,_becd =_becc .Bitmap .GetByte (_bae -_becc .Bitmap .RowStride );
if _becd !=nil {return _ae .Wrap (_becd ,_aaae ,"\u006ci\u006e\u0065\u0020\u003e\u003d\u00202");};_bce =int (_ace )<<6;};_adf =(_ffe &0xf0)|(_bce &0x3800);for _dgda :=0;_dgda < _eec ;_dgda =_aac {var (_bbf byte ;_deag int ;);_aac =_dgda +8;if _ccaf :=_dcb -_dgda ;
_ccaf > 8{_deag =8;}else {_deag =_ccaf ;};if _dbd > 0{_ffe <<=8;if _aac < _dcb {_ace ,_becd =_becc .Bitmap .GetByte (_bae +1);if _becd !=nil {return _ae .Wrap (_becd ,_aaae ,"\u006c\u0069\u006e\u0065\u0020\u003e\u0020\u0030");};_ffe |=int (_ace );};};if _dbd > 1{_bce <<=8;
if _aac < _dcb {_ace ,_becd =_becc .Bitmap .GetByte (_bae -_becc .Bitmap .RowStride +1);if _becd !=nil {return _ae .Wrap (_becd ,_aaae ,"\u006c\u0069\u006e\u0065\u0020\u003e\u0020\u0031");};_bce |=int (_ace )<<6;};};for _eef :=0;_eef < _deag ;_eef ++{_daag :=uint (7-_eef );
if _becc ._abc {_bgd =_becc .overrideAtTemplate0b (_adf ,_dgda +_eef ,_dbd ,int (_bbf ),_eef ,int (_daag ));_becc ._agbd .SetIndex (int32 (_bgd ));}else {_becc ._agbd .SetIndex (int32 (_adf ));};var _caag int ;_caag ,_becd =_becc ._cgab .DecodeBit (_becc ._agbd );
if _becd !=nil {return _ae .Wrap (_becd ,_aaae ,"");};_bbf |=byte (_caag <<_daag );_adf =((_adf &0x7bf7)<<1)|_caag |((_ffe >>_daag )&0x10)|((_bce >>_daag )&0x800);};if _cabae :=_becc .Bitmap .SetByte (_eeb ,_bbf );_cabae !=nil {return _ae .Wrap (_cabae ,_aaae ,"");
};_eeb ++;_bae ++;};return nil ;};func (_edce *GenericRegion )decodeLine (_def ,_gda ,_cgd int )error {const _caba ="\u0064\u0065\u0063\u006f\u0064\u0065\u004c\u0069\u006e\u0065";_dde :=_edce .Bitmap .GetByteIndex (0,_def );_dcde :=_dde -_edce .Bitmap .RowStride ;
switch _edce .GBTemplate {case 0:if !_edce .UseExtTemplates {return _edce .decodeTemplate0a (_def ,_gda ,_cgd ,_dde ,_dcde );};return _edce .decodeTemplate0b (_def ,_gda ,_cgd ,_dde ,_dcde );case 1:return _edce .decodeTemplate1 (_def ,_gda ,_cgd ,_dde ,_dcde );
case 2:return _edce .decodeTemplate2 (_def ,_gda ,_cgd ,_dde ,_dcde );case 3:return _edce .decodeTemplate3 (_def ,_gda ,_cgd ,_dde ,_dcde );};return _ae .Errorf (_caba ,"\u0069\u006e\u0076a\u006c\u0069\u0064\u0020G\u0042\u0054\u0065\u006d\u0070\u006c\u0061t\u0065\u0020\u0070\u0072\u006f\u0076\u0069\u0064\u0065\u0064\u003a\u0020\u0025\u0064",_edce .GBTemplate );
};func (_gcdg *SymbolDictionary )addSymbol (_cafa Regioner )error {_ddeeg ,_bedf :=_cafa .GetRegionBitmap ();if _bedf !=nil {return _bedf ;};_gcdg ._cgfd [_gcdg ._bcgf ]=_ddeeg ;_gcdg ._ddecc =append (_gcdg ._ddecc ,_ddeeg );_eaf .Log .Trace ("\u005b\u0053YM\u0042\u004f\u004c \u0044\u0049\u0043\u0054ION\u0041RY\u005d\u0020\u0041\u0064\u0064\u0065\u0064 s\u0079\u006d\u0062\u006f\u006c\u003a\u0020%\u0073",_ddeeg );
return nil ;};func (_gbg *GenericRegion )GetRegionBitmap ()(_aga *_ff .Bitmap ,_eagbb error ){if _gbg .Bitmap !=nil {return _gbg .Bitmap ,nil ;};if _gbg .IsMMREncoded {if _gbg ._abcf ==nil {_gbg ._abcf ,_eagbb =_ce .New (_gbg ._bca ,int (_gbg .RegionSegment .BitmapWidth ),int (_gbg .RegionSegment .BitmapHeight ),_gbg .DataOffset ,_gbg .DataLength );
if _eagbb !=nil {return nil ,_eagbb ;};};_gbg .Bitmap ,_eagbb =_gbg ._abcf .UncompressMMR ();return _gbg .Bitmap ,_eagbb ;};if _eagbb =_gbg .updateOverrideFlags ();_eagbb !=nil {return nil ,_eagbb ;};var _fddg int ;if _gbg ._cgab ==nil {_gbg ._cgab ,_eagbb =_ea .New (_gbg ._bca );
if _eagbb !=nil {return nil ,_eagbb ;};};if _gbg ._agbd ==nil {_gbg ._agbd =_ea .NewStats (65536,1);};_gbg .Bitmap =_ff .New (int (_gbg .RegionSegment .BitmapWidth ),int (_gbg .RegionSegment .BitmapHeight ));_aefg :=int (uint32 (_gbg .Bitmap .Width +7)&(^uint32 (7)));
for _dea :=0;_dea < _gbg .Bitmap .Height ;_dea ++{if _gbg .IsTPGDon {var _fege int ;_fege ,_eagbb =_gbg .decodeSLTP ();if _eagbb !=nil {return nil ,_eagbb ;};_fddg ^=_fege ;};if _fddg ==1{if _dea > 0{if _eagbb =_gbg .copyLineAbove (_dea );_eagbb !=nil {return nil ,_eagbb ;
};};}else {if _eagbb =_gbg .decodeLine (_dea ,_gbg .Bitmap .Width ,_aefg );_eagbb !=nil {return nil ,_eagbb ;};};};return _gbg .Bitmap ,nil ;};type Header struct{SegmentNumber uint32 ;Type Type ;RetainFlag bool ;PageAssociation int ;PageAssociationFieldSize bool ;
RTSegments []*Header ;HeaderLength int64 ;SegmentDataLength uint64 ;SegmentDataStartOffset uint64 ;Reader *_ba .Reader ;SegmentData Segmenter ;RTSNumbers []int ;RetainBits []uint8 ;};const (TSymbolDictionary Type =0;TIntermediateTextRegion Type =4;TImmediateTextRegion Type =6;
TImmediateLosslessTextRegion Type =7;TPatternDictionary Type =16;TIntermediateHalftoneRegion Type =20;TImmediateHalftoneRegion Type =22;TImmediateLosslessHalftoneRegion Type =23;TIntermediateGenericRegion Type =36;TImmediateGenericRegion Type =38;TImmediateLosslessGenericRegion Type =39;
TIntermediateGenericRefinementRegion Type =40;TImmediateGenericRefinementRegion Type =42;TImmediateLosslessGenericRefinementRegion Type =43;TPageInformation Type =48;TEndOfPage Type =49;TEndOfStrip Type =50;TEndOfFile Type =51;TProfiles Type =52;TTables Type =53;
TExtension Type =62;TBitmap Type =70;);func (_fgba *PatternDictionary )readPatternWidthAndHeight ()error {_cdffd ,_bgadg :=_fgba ._eggc .ReadByte ();if _bgadg !=nil {return _bgadg ;};_fgba .HdpWidth =_cdffd ;_cdffd ,_bgadg =_fgba ._eggc .ReadByte ();if _bgadg !=nil {return _bgadg ;
};_fgba .HdpHeight =_cdffd ;return nil ;};func (_cgcg *SymbolDictionary )Encode (w _ba .BinaryWriter )(_gae int ,_gage error ){const _bacb ="\u0053\u0079\u006dbo\u006c\u0044\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u002e\u0045\u006e\u0063\u006f\u0064\u0065";
if _cgcg ==nil {return 0,_ae .Error (_bacb ,"\u0073\u0079m\u0062\u006f\u006c\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u006e\u006f\u0074\u0020\u0064\u0065\u0066in\u0065\u0064");};if _gae ,_gage =_cgcg .encodeFlags (w );_gage !=nil {return _gae ,_ae .Wrap (_gage ,_bacb ,"");
};_ebeb ,_gage :=_cgcg .encodeATFlags (w );if _gage !=nil {return _gae ,_ae .Wrap (_gage ,_bacb ,"");};_gae +=_ebeb ;if _ebeb ,_gage =_cgcg .encodeRefinementATFlags (w );_gage !=nil {return _gae ,_ae .Wrap (_gage ,_bacb ,"");};_gae +=_ebeb ;if _ebeb ,_gage =_cgcg .encodeNumSyms (w );
_gage !=nil {return _gae ,_ae .Wrap (_gage ,_bacb ,"");};_gae +=_ebeb ;if _ebeb ,_gage =_cgcg .encodeSymbols (w );_gage !=nil {return _gae ,_ae .Wrap (_gage ,_bacb ,"");};_gae +=_ebeb ;return _gae ,nil ;};func (_gdgc *RegionSegment )parseHeader ()error {const _gdeac ="p\u0061\u0072\u0073\u0065\u0048\u0065\u0061\u0064\u0065\u0072";
_eaf .Log .Trace ("\u005b\u0052\u0045\u0047I\u004f\u004e\u005d\u005b\u0050\u0041\u0052\u0053\u0045\u002dH\u0045A\u0044\u0045\u0052\u005d\u0020\u0042\u0065g\u0069\u006e");defer func (){_eaf .Log .Trace ("\u005b\u0052\u0045G\u0049\u004f\u004e\u005d[\u0050\u0041\u0052\u0053\u0045\u002d\u0048E\u0041\u0044\u0045\u0052\u005d\u0020\u0046\u0069\u006e\u0069\u0073\u0068\u0065\u0064");
}();_ffgdd ,_gcgf :=_gdgc ._gdabf .ReadBits (32);if _gcgf !=nil {return _ae .Wrap (_gcgf ,_gdeac ,"\u0077\u0069\u0064t\u0068");};_gdgc .BitmapWidth =uint32 (_ffgdd &_g .MaxUint32 );_ffgdd ,_gcgf =_gdgc ._gdabf .ReadBits (32);if _gcgf !=nil {return _ae .Wrap (_gcgf ,_gdeac ,"\u0068\u0065\u0069\u0067\u0068\u0074");
};_gdgc .BitmapHeight =uint32 (_ffgdd &_g .MaxUint32 );_ffgdd ,_gcgf =_gdgc ._gdabf .ReadBits (32);if _gcgf !=nil {return _ae .Wrap (_gcgf ,_gdeac ,"\u0078\u0020\u006c\u006f\u0063\u0061\u0074\u0069\u006f\u006e");};_gdgc .XLocation =uint32 (_ffgdd &_g .MaxUint32 );
_ffgdd ,_gcgf =_gdgc ._gdabf .ReadBits (32);if _gcgf !=nil {return _ae .Wrap (_gcgf ,_gdeac ,"\u0079\u0020\u006c\u006f\u0063\u0061\u0074\u0069\u006f\u006e");};_gdgc .YLocation =uint32 (_ffgdd &_g .MaxUint32 );if _ ,_gcgf =_gdgc ._gdabf .ReadBits (5);_gcgf !=nil {return _ae .Wrap (_gcgf ,_gdeac ,"\u0064i\u0072\u0079\u0020\u0072\u0065\u0061d");
};if _gcgf =_gdgc .readCombinationOperator ();_gcgf !=nil {return _ae .Wrap (_gcgf ,_gdeac ,"c\u006fm\u0062\u0069\u006e\u0061\u0074\u0069\u006f\u006e \u006f\u0070\u0065\u0072at\u006f\u0072");};return nil ;};func (_fcdg *HalftoneRegion )computeX (_cedg ,_bebb int )int {return _fcdg .shiftAndFill (int (_fcdg .HGridX )+_cedg *int (_fcdg .HRegionY )+_bebb *int (_fcdg .HRegionX ));
};func (_gdgd *TextRegion )GetRegionBitmap ()(*_ff .Bitmap ,error ){if _gdgd .RegionBitmap !=nil {return _gdgd .RegionBitmap ,nil ;};if !_gdgd .IsHuffmanEncoded {if _cafc :=_gdgd .setCodingStatistics ();_cafc !=nil {return nil ,_cafc ;};};if _eagc :=_gdgd .createRegionBitmap ();
_eagc !=nil {return nil ,_eagc ;};if _fgagc :=_gdgd .decodeSymbolInstances ();_fgagc !=nil {return nil ,_fgagc ;};return _gdgd .RegionBitmap ,nil ;};func (_ceedc *GenericRegion )readGBAtPixels (_dfcf int )error {const _cdfg ="\u0072\u0065\u0061\u0064\u0047\u0042\u0041\u0074\u0050i\u0078\u0065\u006c\u0073";
_ceedc .GBAtX =make ([]int8 ,_dfcf );_ceedc .GBAtY =make ([]int8 ,_dfcf );for _ebca :=0;_ebca < _dfcf ;_ebca ++{_fee ,_fffe :=_ceedc ._bca .ReadByte ();if _fffe !=nil {return _ae .Wrapf (_fffe ,_cdfg ,"\u0058\u0020\u0061t\u0020\u0069\u003a\u0020\u0027\u0025\u0064\u0027",_ebca );
};_ceedc .GBAtX [_ebca ]=int8 (_fee );_fee ,_fffe =_ceedc ._bca .ReadByte ();if _fffe !=nil {return _ae .Wrapf (_fffe ,_cdfg ,"\u0059\u0020\u0061t\u0020\u0069\u003a\u0020\u0027\u0025\u0064\u0027",_ebca );};_ceedc .GBAtY [_ebca ]=int8 (_fee );};return nil ;
};func (_eagf *GenericRegion )computeSegmentDataStructure ()error {_eagf .DataOffset =_eagf ._bca .AbsolutePosition ();_eagf .DataHeaderLength =_eagf .DataOffset -_eagf .DataHeaderOffset ;_eagf .DataLength =int64 (_eagf ._bca .AbsoluteLength ())-_eagf .DataHeaderLength ;
return nil ;};func (_dc *EndOfStripe )LineNumber ()int {return _dc ._ad };func (_geab *PatternDictionary )readTemplate ()error {_facc ,_dbae :=_geab ._eggc .ReadBits (2);if _dbae !=nil {return _dbae ;};_geab .HDTemplate =byte (_facc );return nil ;};func (_gabf *SymbolDictionary )decodeThroughTextRegion (_ccag ,_fbdaf ,_gdfg uint32 )error {if _gabf ._fdae ==nil {_gabf ._fdae =_ecec (_gabf ._dffd ,nil );
_gabf ._fdae .setContexts (_gabf ._agcgg ,_ea .NewStats (512,1),_ea .NewStats (512,1),_ea .NewStats (512,1),_ea .NewStats (512,1),_gabf ._ffbe ,_ea .NewStats (512,1),_ea .NewStats (512,1),_ea .NewStats (512,1),_ea .NewStats (512,1));};if _ggef :=_gabf .setSymbolsArray ();
_ggef !=nil {return _ggef ;};_gabf ._fdae .setParameters (_gabf ._fcae ,_gabf .IsHuffmanEncoded ,true ,_ccag ,_fbdaf ,_gdfg ,1,_gabf ._efaf +_gabf ._bcgf ,0,0,0,1,0,0,0,0,0,0,0,0,0,_gabf .SdrTemplate ,_gabf .SdrATX ,_gabf .SdrATY ,_gabf ._ddecc ,_gabf ._cea );
return _gabf .addSymbol (_gabf ._fdae );};func (_ceg *GenericRefinementRegion )decodeTypicalPredictedLineTemplate1 (_ffg ,_gcd ,_ede ,_gbd ,_aagc ,_bgg ,_ebf ,_dee ,_aef int )(_dgc error ){var (_ag ,_fggb int ;_bed ,_fdd int ;_dcc ,_fac int ;_ebe byte ;
);if _ffg > 0{_ebe ,_dgc =_ceg .RegionBitmap .GetByte (_ebf -_ede );if _dgc !=nil {return _dgc ;};_bed =int (_ebe );};if _dee > 0&&_dee <=_ceg .ReferenceBitmap .Height {_ebe ,_dgc =_ceg .ReferenceBitmap .GetByte (_aef -_gbd +_bgg );if _dgc !=nil {return _dgc ;
};_fdd =int (_ebe )<<2;};if _dee >=0&&_dee < _ceg .ReferenceBitmap .Height {_ebe ,_dgc =_ceg .ReferenceBitmap .GetByte (_aef +_bgg );if _dgc !=nil {return _dgc ;};_dcc =int (_ebe );};if _dee > -2&&_dee < _ceg .ReferenceBitmap .Height -1{_ebe ,_dgc =_ceg .ReferenceBitmap .GetByte (_aef +_gbd +_bgg );
if _dgc !=nil {return _dgc ;};_fac =int (_ebe );};_ag =((_bed >>5)&0x6)|((_fac >>2)&0x30)|(_dcc &0xc0)|(_fdd &0x200);_fggb =((_fac >>2)&0x70)|(_dcc &0xc0)|(_fdd &0x700);var _cc int ;for _cbb :=0;_cbb < _aagc ;_cbb =_cc {var (_ec int ;_dcda int ;);_cc =_cbb +8;
if _ec =_gcd -_cbb ;_ec > 8{_ec =8;};_bbe :=_cc < _gcd ;_fef :=_cc < _ceg .ReferenceBitmap .Width ;_faa :=_bgg +1;if _ffg > 0{_ebe =0;if _bbe {_ebe ,_dgc =_ceg .RegionBitmap .GetByte (_ebf -_ede +1);if _dgc !=nil {return _dgc ;};};_bed =(_bed <<8)|int (_ebe );
};if _dee > 0&&_dee <=_ceg .ReferenceBitmap .Height {var _cff int ;if _fef {_ebe ,_dgc =_ceg .ReferenceBitmap .GetByte (_aef -_gbd +_faa );if _dgc !=nil {return _dgc ;};_cff =int (_ebe )<<2;};_fdd =(_fdd <<8)|_cff ;};if _dee >=0&&_dee < _ceg .ReferenceBitmap .Height {_ebe =0;
if _fef {_ebe ,_dgc =_ceg .ReferenceBitmap .GetByte (_aef +_faa );if _dgc !=nil {return _dgc ;};};_dcc =(_dcc <<8)|int (_ebe );};if _dee > -2&&_dee < (_ceg .ReferenceBitmap .Height -1){_ebe =0;if _fef {_ebe ,_dgc =_ceg .ReferenceBitmap .GetByte (_aef +_gbd +_faa );
if _dgc !=nil {return _dgc ;};};_fac =(_fac <<8)|int (_ebe );};for _ee :=0;_ee < _ec ;_ee ++{var _fbf int ;_edd :=(_fggb >>4)&0x1ff;switch _edd {case 0x1ff:_fbf =1;case 0x00:_fbf =0;default:_ceg ._dcg .SetIndex (int32 (_ag ));_fbf ,_dgc =_ceg ._da .DecodeBit (_ceg ._dcg );
if _dgc !=nil {return _dgc ;};};_ccc :=uint (7-_ee );_dcda |=_fbf <<_ccc ;_ag =((_ag &0x0d6)<<1)|_fbf |(_bed >>_ccc +5)&0x002|((_fac >>_ccc +2)&0x010)|((_dcc >>_ccc )&0x040)|((_fdd >>_ccc )&0x200);_fggb =((_fggb &0xdb)<<1)|((_fac >>_ccc +2)&0x010)|((_dcc >>_ccc )&0x080)|((_fdd >>_ccc )&0x400);
};_dgc =_ceg .RegionBitmap .SetByte (_ebf ,byte (_dcda ));if _dgc !=nil {return _dgc ;};_ebf ++;_aef ++;};return nil ;};type PageInformationSegment struct{_efce *_ba .Reader ;PageBMHeight int ;PageBMWidth int ;ResolutionX int ;ResolutionY int ;_ccef bool ;
_ecgc _ff .CombinationOperator ;_degb bool ;DefaultPixelValue uint8 ;_caaf bool ;IsLossless bool ;IsStripe bool ;MaxStripeSize uint16 ;};func (_gafg *HalftoneRegion )Init (hd *Header ,r *_ba .Reader )error {_gafg ._ddaf =r ;_gafg ._ece =hd ;_gafg .RegionSegment =NewRegionSegment (r );
return _gafg .parseHeader ();};var _ _cg .BasicTabler =&TableSegment {};func (_aafg *TextRegion )computeSymbolCodeLength ()error {if _aafg .IsHuffmanEncoded {return _aafg .symbolIDCodeLengths ();};_aafg ._gafgc =int8 (_g .Ceil (_g .Log (float64 (_aafg .NumberOfSymbols ))/_g .Log (2)));
return nil ;};func (_ffgc *Header )writeFlags (_bcb _ba .BinaryWriter )(_dcab error ){const _cdae ="\u0048\u0065\u0061\u0064\u0065\u0072\u002e\u0077\u0072\u0069\u0074\u0065F\u006c\u0061\u0067\u0073";_afcf :=byte (_ffgc .Type );if _dcab =_bcb .WriteByte (_afcf );
_dcab !=nil {return _ae .Wrap (_dcab ,_cdae ,"\u0077\u0072\u0069ti\u006e\u0067\u0020\u0073\u0065\u0067\u006d\u0065\u006et\u0020t\u0079p\u0065 \u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0066\u0061\u0069\u006c\u0065\u0064");};if !_ffgc .RetainFlag &&!_ffgc .PageAssociationFieldSize {return nil ;
};if _dcab =_bcb .SkipBits (-8);_dcab !=nil {return _ae .Wrap (_dcab ,_cdae ,"\u0073\u006bi\u0070\u0070\u0069\u006e\u0067\u0020\u0062\u0061\u0063\u006b\u0020\u0074\u0068\u0065\u0020\u0062\u0069\u0074\u0073\u0020\u0066\u0061il\u0065\u0064");};var _edbg int ;
if _ffgc .RetainFlag {_edbg =1;};if _dcab =_bcb .WriteBit (_edbg );_dcab !=nil {return _ae .Wrap (_dcab ,_cdae ,"\u0072\u0065\u0074\u0061in\u0020\u0072\u0065\u0074\u0061\u0069\u006e\u0020\u0066\u006c\u0061\u0067\u0073");};_edbg =0;if _ffgc .PageAssociationFieldSize {_edbg =1;
};if _dcab =_bcb .WriteBit (_edbg );_dcab !=nil {return _ae .Wrap (_dcab ,_cdae ,"p\u0061\u0067\u0065\u0020as\u0073o\u0063\u0069\u0061\u0074\u0069o\u006e\u0020\u0066\u006c\u0061\u0067");};_bcb .FinishByte ();return nil ;};func (_febc *Header )readHeaderLength (_bee *_ba .Reader ,_dbge int64 ){_febc .HeaderLength =_bee .AbsolutePosition ()-_dbge ;
};func (_bgaa *GenericRegion )overrideAtTemplate0b (_fbecg ,_bdc ,_bddf ,_ceda ,_ffgd ,_ddc int )int {if _bgaa .GBAtOverride [0]{_fbecg &=0xFFFD;if _bgaa .GBAtY [0]==0&&_bgaa .GBAtX [0]>=-int8 (_ffgd ){_fbecg |=(_ceda >>uint (int8 (_ddc )-_bgaa .GBAtX [0]&0x1))<<1;
}else {_fbecg |=int (_bgaa .getPixel (_bdc +int (_bgaa .GBAtX [0]),_bddf +int (_bgaa .GBAtY [0])))<<1;};};if _bgaa .GBAtOverride [1]{_fbecg &=0xDFFF;if _bgaa .GBAtY [1]==0&&_bgaa .GBAtX [1]>=-int8 (_ffgd ){_fbecg |=(_ceda >>uint (int8 (_ddc )-_bgaa .GBAtX [1]&0x1))<<13;
}else {_fbecg |=int (_bgaa .getPixel (_bdc +int (_bgaa .GBAtX [1]),_bddf +int (_bgaa .GBAtY [1])))<<13;};};if _bgaa .GBAtOverride [2]{_fbecg &=0xFDFF;if _bgaa .GBAtY [2]==0&&_bgaa .GBAtX [2]>=-int8 (_ffgd ){_fbecg |=(_ceda >>uint (int8 (_ddc )-_bgaa .GBAtX [2]&0x1))<<9;
}else {_fbecg |=int (_bgaa .getPixel (_bdc +int (_bgaa .GBAtX [2]),_bddf +int (_bgaa .GBAtY [2])))<<9;};};if _bgaa .GBAtOverride [3]{_fbecg &=0xBFFF;if _bgaa .GBAtY [3]==0&&_bgaa .GBAtX [3]>=-int8 (_ffgd ){_fbecg |=(_ceda >>uint (int8 (_ddc )-_bgaa .GBAtX [3]&0x1))<<14;
}else {_fbecg |=int (_bgaa .getPixel (_bdc +int (_bgaa .GBAtX [3]),_bddf +int (_bgaa .GBAtY [3])))<<14;};};if _bgaa .GBAtOverride [4]{_fbecg &=0xEFFF;if _bgaa .GBAtY [4]==0&&_bgaa .GBAtX [4]>=-int8 (_ffgd ){_fbecg |=(_ceda >>uint (int8 (_ddc )-_bgaa .GBAtX [4]&0x1))<<12;
}else {_fbecg |=int (_bgaa .getPixel (_bdc +int (_bgaa .GBAtX [4]),_bddf +int (_bgaa .GBAtY [4])))<<12;};};if _bgaa .GBAtOverride [5]{_fbecg &=0xFFDF;if _bgaa .GBAtY [5]==0&&_bgaa .GBAtX [5]>=-int8 (_ffgd ){_fbecg |=(_ceda >>uint (int8 (_ddc )-_bgaa .GBAtX [5]&0x1))<<5;
}else {_fbecg |=int (_bgaa .getPixel (_bdc +int (_bgaa .GBAtX [5]),_bddf +int (_bgaa .GBAtY [5])))<<5;};};if _bgaa .GBAtOverride [6]{_fbecg &=0xFFFB;if _bgaa .GBAtY [6]==0&&_bgaa .GBAtX [6]>=-int8 (_ffgd ){_fbecg |=(_ceda >>uint (int8 (_ddc )-_bgaa .GBAtX [6]&0x1))<<2;
}else {_fbecg |=int (_bgaa .getPixel (_bdc +int (_bgaa .GBAtX [6]),_bddf +int (_bgaa .GBAtY [6])))<<2;};};if _bgaa .GBAtOverride [7]{_fbecg &=0xFFF7;if _bgaa .GBAtY [7]==0&&_bgaa .GBAtX [7]>=-int8 (_ffgd ){_fbecg |=(_ceda >>uint (int8 (_ddc )-_bgaa .GBAtX [7]&0x1))<<3;
}else {_fbecg |=int (_bgaa .getPixel (_bdc +int (_bgaa .GBAtX [7]),_bddf +int (_bgaa .GBAtY [7])))<<3;};};if _bgaa .GBAtOverride [8]{_fbecg &=0xF7FF;if _bgaa .GBAtY [8]==0&&_bgaa .GBAtX [8]>=-int8 (_ffgd ){_fbecg |=(_ceda >>uint (int8 (_ddc )-_bgaa .GBAtX [8]&0x1))<<11;
}else {_fbecg |=int (_bgaa .getPixel (_bdc +int (_bgaa .GBAtX [8]),_bddf +int (_bgaa .GBAtY [8])))<<11;};};if _bgaa .GBAtOverride [9]{_fbecg &=0xFFEF;if _bgaa .GBAtY [9]==0&&_bgaa .GBAtX [9]>=-int8 (_ffgd ){_fbecg |=(_ceda >>uint (int8 (_ddc )-_bgaa .GBAtX [9]&0x1))<<4;
}else {_fbecg |=int (_bgaa .getPixel (_bdc +int (_bgaa .GBAtX [9]),_bddf +int (_bgaa .GBAtY [9])))<<4;};};if _bgaa .GBAtOverride [10]{_fbecg &=0x7FFF;if _bgaa .GBAtY [10]==0&&_bgaa .GBAtX [10]>=-int8 (_ffgd ){_fbecg |=(_ceda >>uint (int8 (_ddc )-_bgaa .GBAtX [10]&0x1))<<15;
}else {_fbecg |=int (_bgaa .getPixel (_bdc +int (_bgaa .GBAtX [10]),_bddf +int (_bgaa .GBAtY [10])))<<15;};};if _bgaa .GBAtOverride [11]{_fbecg &=0xFDFF;if _bgaa .GBAtY [11]==0&&_bgaa .GBAtX [11]>=-int8 (_ffgd ){_fbecg |=(_ceda >>uint (int8 (_ddc )-_bgaa .GBAtX [11]&0x1))<<10;
}else {_fbecg |=int (_bgaa .getPixel (_bdc +int (_bgaa .GBAtX [11]),_bddf +int (_bgaa .GBAtY [11])))<<10;};};return _fbecg ;};func (_eafdb *SymbolDictionary )encodeNumSyms (_fbff _ba .BinaryWriter )(_cdcd int ,_dafaa error ){const _gaee ="\u0065\u006e\u0063\u006f\u0064\u0065\u004e\u0075\u006d\u0053\u0079\u006d\u0073";
_fffaf :=make ([]byte ,4);_d .BigEndian .PutUint32 (_fffaf ,_eafdb .NumberOfExportedSymbols );if _cdcd ,_dafaa =_fbff .Write (_fffaf );_dafaa !=nil {return _cdcd ,_ae .Wrap (_dafaa ,_gaee ,"\u0065\u0078p\u006f\u0072\u0074e\u0064\u0020\u0073\u0079\u006d\u0062\u006f\u006c\u0073");
};_d .BigEndian .PutUint32 (_fffaf ,_eafdb .NumberOfNewSymbols );_dbcgf ,_dafaa :=_fbff .Write (_fffaf );if _dafaa !=nil {return _cdcd ,_ae .Wrap (_dafaa ,_gaee ,"n\u0065\u0077\u0020\u0073\u0079\u006d\u0062\u006f\u006c\u0073");};return _cdcd +_dbcgf ,nil ;
};func (_feff *SymbolDictionary )encodeFlags (_acab _ba .BinaryWriter )(_dbb int ,_gdgcg error ){const _gee ="e\u006e\u0063\u006f\u0064\u0065\u0046\u006c\u0061\u0067\u0073";if _gdgcg =_acab .SkipBits (3);_gdgcg !=nil {return 0,_ae .Wrap (_gdgcg ,_gee ,"\u0065\u006d\u0070\u0074\u0079\u0020\u0062\u0069\u0074\u0073");
};var _bgbba int ;if _feff .SdrTemplate > 0{_bgbba =1;};if _gdgcg =_acab .WriteBit (_bgbba );_gdgcg !=nil {return _dbb ,_ae .Wrap (_gdgcg ,_gee ,"s\u0064\u0072\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065");};_bgbba =0;if _feff .SdTemplate > 1{_bgbba =1;
};if _gdgcg =_acab .WriteBit (_bgbba );_gdgcg !=nil {return _dbb ,_ae .Wrap (_gdgcg ,_gee ,"\u0073\u0064\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065");};_bgbba =0;if _feff .SdTemplate ==1||_feff .SdTemplate ==3{_bgbba =1;};if _gdgcg =_acab .WriteBit (_bgbba );
_gdgcg !=nil {return _dbb ,_ae .Wrap (_gdgcg ,_gee ,"\u0073\u0064\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065");};_bgbba =0;if _feff ._edecd {_bgbba =1;};if _gdgcg =_acab .WriteBit (_bgbba );_gdgcg !=nil {return _dbb ,_ae .Wrap (_gdgcg ,_gee ,"\u0063\u006f\u0064in\u0067\u0020\u0063\u006f\u006e\u0074\u0065\u0078\u0074\u0020\u0072\u0065\u0074\u0061\u0069\u006e\u0065\u0064");
};_bgbba =0;if _feff ._bedb {_bgbba =1;};if _gdgcg =_acab .WriteBit (_bgbba );_gdgcg !=nil {return _dbb ,_ae .Wrap (_gdgcg ,_gee ,"\u0063\u006f\u0064\u0069ng\u0020\u0063\u006f\u006e\u0074\u0065\u0078\u0074\u0020\u0075\u0073\u0065\u0064");};_bgbba =0;if _feff .SdHuffAggInstanceSelection {_bgbba =1;
};if _gdgcg =_acab .WriteBit (_bgbba );_gdgcg !=nil {return _dbb ,_ae .Wrap (_gdgcg ,_gee ,"\u0073\u0064\u0048\u0075\u0066\u0066\u0041\u0067\u0067\u0049\u006e\u0073\u0074");};_bgbba =int (_feff .SdHuffBMSizeSelection );if _gdgcg =_acab .WriteBit (_bgbba );
_gdgcg !=nil {return _dbb ,_ae .Wrap (_gdgcg ,_gee ,"\u0073\u0064\u0048u\u0066\u0066\u0042\u006d\u0053\u0069\u007a\u0065");};_bgbba =0;if _feff .SdHuffDecodeWidthSelection > 1{_bgbba =1;};if _gdgcg =_acab .WriteBit (_bgbba );_gdgcg !=nil {return _dbb ,_ae .Wrap (_gdgcg ,_gee ,"s\u0064\u0048\u0075\u0066\u0066\u0057\u0069\u0064\u0074\u0068");
};_bgbba =0;switch _feff .SdHuffDecodeWidthSelection {case 1,3:_bgbba =1;};if _gdgcg =_acab .WriteBit (_bgbba );_gdgcg !=nil {return _dbb ,_ae .Wrap (_gdgcg ,_gee ,"s\u0064\u0048\u0075\u0066\u0066\u0057\u0069\u0064\u0074\u0068");};_bgbba =0;if _feff .SdHuffDecodeHeightSelection > 1{_bgbba =1;
};if _gdgcg =_acab .WriteBit (_bgbba );_gdgcg !=nil {return _dbb ,_ae .Wrap (_gdgcg ,_gee ,"\u0073\u0064\u0048u\u0066\u0066\u0048\u0065\u0069\u0067\u0068\u0074");};_bgbba =0;switch _feff .SdHuffDecodeHeightSelection {case 1,3:_bgbba =1;};if _gdgcg =_acab .WriteBit (_bgbba );
_gdgcg !=nil {return _dbb ,_ae .Wrap (_gdgcg ,_gee ,"\u0073\u0064\u0048u\u0066\u0066\u0048\u0065\u0069\u0067\u0068\u0074");};_bgbba =0;if _feff .UseRefinementAggregation {_bgbba =1;};if _gdgcg =_acab .WriteBit (_bgbba );_gdgcg !=nil {return _dbb ,_ae .Wrap (_gdgcg ,_gee ,"\u0073\u0064\u0052\u0065\u0066\u0041\u0067\u0067");
};_bgbba =0;if _feff .IsHuffmanEncoded {_bgbba =1;};if _gdgcg =_acab .WriteBit (_bgbba );_gdgcg !=nil {return _dbb ,_ae .Wrap (_gdgcg ,_gee ,"\u0073\u0064\u0048\u0075\u0066\u0066");};return 2,nil ;};var (_bfaf Segmenter ;_cdfgb =map[Type ]func ()Segmenter {TSymbolDictionary :func ()Segmenter {return &SymbolDictionary {}},TIntermediateTextRegion :func ()Segmenter {return &TextRegion {}},TImmediateTextRegion :func ()Segmenter {return &TextRegion {}},TImmediateLosslessTextRegion :func ()Segmenter {return &TextRegion {}},TPatternDictionary :func ()Segmenter {return &PatternDictionary {}},TIntermediateHalftoneRegion :func ()Segmenter {return &HalftoneRegion {}},TImmediateHalftoneRegion :func ()Segmenter {return &HalftoneRegion {}},TImmediateLosslessHalftoneRegion :func ()Segmenter {return &HalftoneRegion {}},TIntermediateGenericRegion :func ()Segmenter {return &GenericRegion {}},TImmediateGenericRegion :func ()Segmenter {return &GenericRegion {}},TImmediateLosslessGenericRegion :func ()Segmenter {return &GenericRegion {}},TIntermediateGenericRefinementRegion :func ()Segmenter {return &GenericRefinementRegion {}},TImmediateGenericRefinementRegion :func ()Segmenter {return &GenericRefinementRegion {}},TImmediateLosslessGenericRefinementRegion :func ()Segmenter {return &GenericRefinementRegion {}},TPageInformation :func ()Segmenter {return &PageInformationSegment {}},TEndOfPage :func ()Segmenter {return _bfaf },TEndOfStrip :func ()Segmenter {return &EndOfStripe {}},TEndOfFile :func ()Segmenter {return _bfaf },TProfiles :func ()Segmenter {return _bfaf },TTables :func ()Segmenter {return &TableSegment {}},TExtension :func ()Segmenter {return _bfaf },TBitmap :func ()Segmenter {return _bfaf }};
);type TableSegment struct{_ecbf *_ba .Reader ;_ffec int32 ;_dgefc int32 ;_cagcc int32 ;_bacbd int32 ;_bcab int32 ;};func (_de *GenericRefinementRegion )decodeSLTP ()(int ,error ){_de .Template .setIndex (_de ._dcg );return _de ._da .DecodeBit (_de ._dcg );
};func (_ebggf *HalftoneRegion )shiftAndFill (_cafb int )int {_cafb >>=8;if _cafb < 0{_bgbb :=int (_g .Log (float64 (_aaca (_cafb )))/_g .Log (2));_gdf :=31-_bgbb ;for _adgf :=1;_adgf < _gdf ;_adgf ++{_cafb |=1<<uint (31-_adgf );};};return _cafb ;};func (_gbb *Header )readSegmentPageAssociation (_ggda Documenter ,_ccbg *_ba .Reader ,_bddfb uint64 ,_cdca ...int )(_adbbb error ){const _bbb ="\u0072\u0065\u0061\u0064\u0053\u0065\u0067\u006d\u0065\u006e\u0074P\u0061\u0067\u0065\u0041\u0073\u0073\u006f\u0063\u0069\u0061t\u0069\u006f\u006e";
if !_gbb .PageAssociationFieldSize {_gdad ,_ebbe :=_ccbg .ReadBits (8);if _ebbe !=nil {return _ae .Wrap (_ebbe ,_bbb ,"\u0073\u0068\u006fr\u0074\u0020\u0066\u006f\u0072\u006d\u0061\u0074");};_gbb .PageAssociation =int (_gdad &0xFF);}else {_cebc ,_bfgg :=_ccbg .ReadBits (32);
if _bfgg !=nil {return _ae .Wrap (_bfgg ,_bbb ,"l\u006f\u006e\u0067\u0020\u0066\u006f\u0072\u006d\u0061\u0074");};_gbb .PageAssociation =int (_cebc &_g .MaxInt32 );};if _bddfb ==0{return nil ;};if _gbb .PageAssociation !=0{_acfe ,_befb :=_ggda .GetPage (_gbb .PageAssociation );
if _befb !=nil {return _ae .Wrap (_befb ,_bbb ,"\u0061s\u0073\u006f\u0063\u0069a\u0074\u0065\u0064\u0020\u0070a\u0067e\u0020n\u006f\u0074\u0020\u0066\u006f\u0075\u006ed");};var _agbdc int ;for _fcc :=uint64 (0);_fcc < _bddfb ;_fcc ++{_agbdc =_cdca [_fcc ];
_gbb .RTSegments [_fcc ],_befb =_acfe .GetSegment (_agbdc );if _befb !=nil {var _agbda error ;_gbb .RTSegments [_fcc ],_agbda =_ggda .GetGlobalSegment (_agbdc );if _agbda !=nil {return _ae .Wrapf (_befb ,_bbb ,"\u0072\u0065\u0066\u0065\u0072\u0065n\u0063\u0065\u0020s\u0065\u0067\u006de\u006e\u0074\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0020\u0061\u0074\u0020pa\u0067\u0065\u003a\u0020\u0027\u0025\u0064\u0027\u0020\u006e\u006f\u0072\u0020\u0069\u006e\u0020\u0067\u006c\u006f\u0062\u0061\u006c\u0073",_gbb .PageAssociation );
};};};return nil ;};for _cbbc :=uint64 (0);_cbbc < _bddfb ;_cbbc ++{_gbb .RTSegments [_cbbc ],_adbbb =_ggda .GetGlobalSegment (_cdca [_cbbc ]);if _adbbb !=nil {return _ae .Wrapf (_adbbb ,_bbb ,"\u0067\u006c\u006f\u0062\u0061\u006c\u0020\u0073\u0065\u0067m\u0065\u006e\u0074\u003a\u0020\u0027\u0025d\u0027\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064",_cdca [_cbbc ]);
};};return nil ;};func (_bcga *SymbolDictionary )decodeDirectlyThroughGenericRegion (_gaac ,_faff uint32 )error {if _bcga ._cdba ==nil {_bcga ._cdba =NewGenericRegion (_bcga ._dffd );};_bcga ._cdba .setParametersWithAt (false ,byte (_bcga .SdTemplate ),false ,false ,_bcga .SdATX ,_bcga .SdATY ,_gaac ,_faff ,_bcga ._agcgg ,_bcga ._fcae );
return _bcga .addSymbol (_bcga ._cdba );};func (_bcg *GenericRefinementRegion )String ()string {_gdd :=&_ef .Builder {};_gdd .WriteString ("\u000a[\u0047E\u004e\u0045\u0052\u0049\u0043 \u0052\u0045G\u0049\u004f\u004e\u005d\u000a");_gdd .WriteString (_bcg .RegionInfo .String ()+"\u000a");
_bg .Fprintf (_gdd ,"\u0009\u002d \u0049\u0073\u0054P\u0047\u0052\u006f\u006e\u003a\u0020\u0025\u0076\u000a",_bcg .IsTPGROn );_bg .Fprintf (_gdd ,"\u0009-\u0020T\u0065\u006d\u0070\u006c\u0061t\u0065\u0049D\u003a\u0020\u0025\u0076\u000a",_bcg .TemplateID );
_bg .Fprintf (_gdd ,"\u0009\u002d\u0020\u0047\u0072\u0041\u0074\u0058\u003a\u0020\u0025\u0076\u000a",_bcg .GrAtX );_bg .Fprintf (_gdd ,"\u0009\u002d\u0020\u0047\u0072\u0041\u0074\u0059\u003a\u0020\u0025\u0076\u000a",_bcg .GrAtY );_bg .Fprintf (_gdd ,"\u0009-\u0020R\u0065\u0066\u0065\u0072\u0065n\u0063\u0065D\u0058\u0020\u0025\u0076\u000a",_bcg .ReferenceDX );
_bg .Fprintf (_gdd ,"\u0009\u002d\u0020\u0052ef\u0065\u0072\u0065\u006e\u0063\u0044\u0065\u0059\u003a\u0020\u0025\u0076\u000a",_bcg .ReferenceDY );return _gdd .String ();};func (_bcgb *HalftoneRegion )computeGrayScalePlanes (_cced []*_ff .Bitmap ,_dcbe int )([][]int ,error ){_dccbc :=make ([][]int ,_bcgb .HGridHeight );
for _bdde :=0;_bdde < len (_dccbc );_bdde ++{_dccbc [_bdde ]=make ([]int ,_bcgb .HGridWidth );};for _eac :=0;_eac < int (_bcgb .HGridHeight );_eac ++{for _deed :=0;_deed < int (_bcgb .HGridWidth );_deed +=8{var _befc int ;if _efa :=int (_bcgb .HGridWidth )-_deed ;
_efa > 8{_befc =8;}else {_befc =_efa ;};_eece :=_cced [0].GetByteIndex (_deed ,_eac );for _fca :=0;_fca < _befc ;_fca ++{_cfd :=_fca +_deed ;_dccbc [_eac ][_cfd ]=0;for _dfga :=0;_dfga < _dcbe ;_dfga ++{_bdcg ,_egeb :=_cced [_dfga ].GetByte (_eece );if _egeb !=nil {return nil ,_egeb ;
};_dafc :=_bdcg >>uint (7-_cfd &7);_bcea :=_dafc &1;_gefb :=1<<uint (_dfga );_fdda :=int (_bcea )*_gefb ;_dccbc [_eac ][_cfd ]+=_fdda ;};};};};return _dccbc ,nil ;};func (_gcae *HalftoneRegion )parseHeader ()error {if _cdb :=_gcae .RegionSegment .parseHeader ();
_cdb !=nil {return _cdb ;};_dbe ,_acdcb :=_gcae ._ddaf .ReadBit ();if _acdcb !=nil {return _acdcb ;};_gcae .HDefaultPixel =int8 (_dbe );_efde ,_acdcb :=_gcae ._ddaf .ReadBits (3);if _acdcb !=nil {return _acdcb ;};_gcae .CombinationOperator =_ff .CombinationOperator (_efde &0xf);
_dbe ,_acdcb =_gcae ._ddaf .ReadBit ();if _acdcb !=nil {return _acdcb ;};if _dbe ==1{_gcae .HSkipEnabled =true ;};_efde ,_acdcb =_gcae ._ddaf .ReadBits (2);if _acdcb !=nil {return _acdcb ;};_gcae .HTemplate =byte (_efde &0xf);_dbe ,_acdcb =_gcae ._ddaf .ReadBit ();
if _acdcb !=nil {return _acdcb ;};if _dbe ==1{_gcae .IsMMREncoded =true ;};_efde ,_acdcb =_gcae ._ddaf .ReadBits (32);if _acdcb !=nil {return _acdcb ;};_gcae .HGridWidth =uint32 (_efde &_g .MaxUint32 );_efde ,_acdcb =_gcae ._ddaf .ReadBits (32);if _acdcb !=nil {return _acdcb ;
};_gcae .HGridHeight =uint32 (_efde &_g .MaxUint32 );_efde ,_acdcb =_gcae ._ddaf .ReadBits (32);if _acdcb !=nil {return _acdcb ;};_gcae .HGridX =int32 (_efde &_g .MaxInt32 );_efde ,_acdcb =_gcae ._ddaf .ReadBits (32);if _acdcb !=nil {return _acdcb ;};_gcae .HGridY =int32 (_efde &_g .MaxInt32 );
_efde ,_acdcb =_gcae ._ddaf .ReadBits (16);if _acdcb !=nil {return _acdcb ;};_gcae .HRegionX =uint16 (_efde &_g .MaxUint16 );_efde ,_acdcb =_gcae ._ddaf .ReadBits (16);if _acdcb !=nil {return _acdcb ;};_gcae .HRegionY =uint16 (_efde &_g .MaxUint16 );if _acdcb =_gcae .computeSegmentDataStructure ();
_acdcb !=nil {return _acdcb ;};return _gcae .checkInput ();};func (_gddf *TextRegion )readHuffmanFlags ()error {var (_gfcg int ;_caaff uint64 ;_becae error ;);_ ,_becae =_gddf ._fdgb .ReadBit ();if _becae !=nil {return _becae ;};_gfcg ,_becae =_gddf ._fdgb .ReadBit ();
if _becae !=nil {return _becae ;};_gddf .SbHuffRSize =int8 (_gfcg );_caaff ,_becae =_gddf ._fdgb .ReadBits (2);if _becae !=nil {return _becae ;};_gddf .SbHuffRDY =int8 (_caaff )&0xf;_caaff ,_becae =_gddf ._fdgb .ReadBits (2);if _becae !=nil {return _becae ;
};_gddf .SbHuffRDX =int8 (_caaff )&0xf;_caaff ,_becae =_gddf ._fdgb .ReadBits (2);if _becae !=nil {return _becae ;};_gddf .SbHuffRDHeight =int8 (_caaff )&0xf;_caaff ,_becae =_gddf ._fdgb .ReadBits (2);if _becae !=nil {return _becae ;};_gddf .SbHuffRDWidth =int8 (_caaff )&0xf;
_caaff ,_becae =_gddf ._fdgb .ReadBits (2);if _becae !=nil {return _becae ;};_gddf .SbHuffDT =int8 (_caaff )&0xf;_caaff ,_becae =_gddf ._fdgb .ReadBits (2);if _becae !=nil {return _becae ;};_gddf .SbHuffDS =int8 (_caaff )&0xf;_caaff ,_becae =_gddf ._fdgb .ReadBits (2);
if _becae !=nil {return _becae ;};_gddf .SbHuffFS =int8 (_caaff )&0xf;return nil ;};func (_eadc *TextRegion )readRegionFlags ()error {var (_caee int ;_aefgc uint64 ;_dfbba error ;);_caee ,_dfbba =_eadc ._fdgb .ReadBit ();if _dfbba !=nil {return _dfbba ;
};_eadc .SbrTemplate =int8 (_caee );_aefgc ,_dfbba =_eadc ._fdgb .ReadBits (5);if _dfbba !=nil {return _dfbba ;};_eadc .SbDsOffset =int8 (_aefgc );if _eadc .SbDsOffset > 0x0f{_eadc .SbDsOffset -=0x20;};_caee ,_dfbba =_eadc ._fdgb .ReadBit ();if _dfbba !=nil {return _dfbba ;
};_eadc .DefaultPixel =int8 (_caee );_aefgc ,_dfbba =_eadc ._fdgb .ReadBits (2);if _dfbba !=nil {return _dfbba ;};_eadc .CombinationOperator =_ff .CombinationOperator (int (_aefgc )&0x3);_caee ,_dfbba =_eadc ._fdgb .ReadBit ();if _dfbba !=nil {return _dfbba ;
};_eadc .IsTransposed =int8 (_caee );_aefgc ,_dfbba =_eadc ._fdgb .ReadBits (2);if _dfbba !=nil {return _dfbba ;};_eadc .ReferenceCorner =int16 (_aefgc )&0x3;_aefgc ,_dfbba =_eadc ._fdgb .ReadBits (2);if _dfbba !=nil {return _dfbba ;};_eadc .LogSBStrips =int16 (_aefgc )&0x3;
_eadc .SbStrips =1<<uint (_eadc .LogSBStrips );_caee ,_dfbba =_eadc ._fdgb .ReadBit ();if _dfbba !=nil {return _dfbba ;};if _caee ==1{_eadc .UseRefinement =true ;};_caee ,_dfbba =_eadc ._fdgb .ReadBit ();if _dfbba !=nil {return _dfbba ;};if _caee ==1{_eadc .IsHuffmanEncoded =true ;
};return nil ;};func (_cegd *PatternDictionary )GetDictionary ()([]*_ff .Bitmap ,error ){if _cegd .Patterns !=nil {return _cegd .Patterns ,nil ;};if !_cegd .IsMMREncoded {_cegd .setGbAtPixels ();};_bade :=NewGenericRegion (_cegd ._eggc );_bade .setParametersMMR (_cegd .IsMMREncoded ,_cegd .DataOffset ,_cegd .DataLength ,uint32 (_cegd .HdpHeight ),(_cegd .GrayMax +1)*uint32 (_cegd .HdpWidth ),_cegd .HDTemplate ,false ,false ,_cegd .GBAtX ,_cegd .GBAtY );
_afbg ,_faae :=_bade .GetRegionBitmap ();if _faae !=nil {return nil ,_faae ;};if _faae =_cegd .extractPatterns (_afbg );_faae !=nil {return nil ,_faae ;};return _cegd .Patterns ,nil ;};func (_aabcg *SymbolDictionary )checkInput ()error {if _aabcg .SdHuffDecodeHeightSelection ==2{_eaf .Log .Debug ("\u0053\u0079\u006d\u0062\u006fl\u0020\u0044\u0069\u0063\u0074i\u006fn\u0061\u0072\u0079\u0020\u0044\u0065\u0063\u006f\u0064\u0065\u0020\u0048\u0065\u0069\u0067\u0068\u0074\u0020\u0053e\u006c\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0025\u0064\u0020\u0076\u0061\u006c\u0075\u0065\u0020\u006e\u006f\u0074\u0020\u0070\u0065r\u006d\u0069\u0074\u0074\u0065\u0064",_aabcg .SdHuffDecodeHeightSelection );
};if _aabcg .SdHuffDecodeWidthSelection ==2{_eaf .Log .Debug ("\u0053\u0079\u006d\u0062\u006f\u006c\u0020\u0044\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079 \u0044\u0065\u0063\u006f\u0064\u0065\u0020\u0057\u0069\u0064t\u0068\u0020\u0053\u0065\u006c\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0025\u0064\u0020\u0076\u0061l\u0075\u0065\u0020\u006e\u006f\u0074 \u0070\u0065r\u006d\u0069t\u0074e\u0064",_aabcg .SdHuffDecodeWidthSelection );
};if _aabcg .IsHuffmanEncoded {if _aabcg .SdTemplate !=0{_eaf .Log .Debug ("\u0053\u0044T\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0028\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062e \u0030\u0029",_aabcg .SdTemplate );
};if !_aabcg .UseRefinementAggregation {if !_aabcg .UseRefinementAggregation {if _aabcg ._edecd {_eaf .Log .Debug ("\u0049\u0073\u0043\u006f\u0064\u0069\u006e\u0067C\u006f\u006e\u0074ex\u0074\u0052\u0065\u0074\u0061\u0069n\u0065\u0064\u0020\u003d\u0020\u0074\u0072\u0075\u0065\u0020\u0028\u0073\u0068\u006f\u0075l\u0064\u0020\u0062\u0065\u0020\u0066\u0061\u006cs\u0065\u0029");
_aabcg ._edecd =false ;};if _aabcg ._bedb {_eaf .Log .Debug ("\u0069s\u0043\u006fd\u0069\u006e\u0067\u0043o\u006e\u0074\u0065x\u0074\u0055\u0073\u0065\u0064\u0020\u003d\u0020\u0074ru\u0065\u0020\u0028s\u0068\u006fu\u006c\u0064\u0020\u0062\u0065\u0020f\u0061\u006cs\u0065\u0029");
_aabcg ._bedb =false ;};};};}else {if _aabcg .SdHuffBMSizeSelection !=0{_eaf .Log .Debug ("\u0053\u0064\u0048\u0075\u0066\u0066B\u004d\u0053\u0069\u007a\u0065\u0053\u0065\u006c\u0065\u0063\u0074\u0069\u006fn\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u0062\u0065\u0020\u0030");
_aabcg .SdHuffBMSizeSelection =0;};if _aabcg .SdHuffDecodeWidthSelection !=0{_eaf .Log .Debug ("\u0053\u0064\u0048\u0075\u0066\u0066\u0044\u0065\u0063\u006f\u0064\u0065\u0057\u0069\u0064\u0074\u0068\u0053\u0065\u006c\u0065\u0063\u0074\u0069o\u006e\u0020\u0073\u0068\u006fu\u006c\u0064 \u0062\u0065\u0020\u0030");
_aabcg .SdHuffDecodeWidthSelection =0;};if _aabcg .SdHuffDecodeHeightSelection !=0{_eaf .Log .Debug ("\u0053\u0064\u0048\u0075\u0066\u0066\u0044\u0065\u0063\u006f\u0064\u0065\u0048e\u0069\u0067\u0068\u0074\u0053\u0065l\u0065\u0063\u0074\u0069\u006f\u006e\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u0062\u0065\u0020\u0030");
_aabcg .SdHuffDecodeHeightSelection =0;};};if !_aabcg .UseRefinementAggregation {if _aabcg .SdrTemplate !=0{_eaf .Log .Debug ("\u0053\u0044\u0052\u0054\u0065\u006d\u0070\u006c\u0061\u0074e\u0020\u003d\u0020\u0025\u0064\u0020\u0028s\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0030\u0029",_aabcg .SdrTemplate );
_aabcg .SdrTemplate =0;};};if !_aabcg .IsHuffmanEncoded ||!_aabcg .UseRefinementAggregation {if _aabcg .SdHuffAggInstanceSelection {_eaf .Log .Debug ("\u0053d\u0048\u0075f\u0066\u0041\u0067g\u0049\u006e\u0073\u0074\u0061\u006e\u0063e\u0053\u0065\u006c\u0065\u0063\u0074i\u006f\u006e\u0020\u003d\u0020\u0025\u0064\u0020\u0028\u0073\u0068o\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0030\u0029",_aabcg .SdHuffAggInstanceSelection );
};};return nil ;};type GenericRefinementRegion struct{_aab templater ;_aabc templater ;_fbe *_ba .Reader ;_cga *Header ;RegionInfo *RegionSegment ;IsTPGROn bool ;TemplateID int8 ;Template templater ;GrAtX []int8 ;GrAtY []int8 ;RegionBitmap *_ff .Bitmap ;
ReferenceBitmap *_ff .Bitmap ;ReferenceDX int32 ;ReferenceDY int32 ;_da *_ea .Decoder ;_dcg *_ea .DecoderStats ;_ed bool ;_bf []bool ;};func (_ecbb *TextRegion )readUseRefinement ()error {if !_ecbb .UseRefinement ||_ecbb .SbrTemplate !=0{return nil ;};
var (_gfcd byte ;_egge error ;);_ecbb .SbrATX =make ([]int8 ,2);_ecbb .SbrATY =make ([]int8 ,2);_gfcd ,_egge =_ecbb ._fdgb .ReadByte ();if _egge !=nil {return _egge ;};_ecbb .SbrATX [0]=int8 (_gfcd );_gfcd ,_egge =_ecbb ._fdgb .ReadByte ();if _egge !=nil {return _egge ;
};_ecbb .SbrATY [0]=int8 (_gfcd );_gfcd ,_egge =_ecbb ._fdgb .ReadByte ();if _egge !=nil {return _egge ;};_ecbb .SbrATX [1]=int8 (_gfcd );_gfcd ,_egge =_ecbb ._fdgb .ReadByte ();if _egge !=nil {return _egge ;};_ecbb .SbrATY [1]=int8 (_gfcd );return nil ;
};func (_aafc *Header )writeSegmentPageAssociation (_bbbf _ba .BinaryWriter )(_ffbc int ,_fga error ){const _acdb ="w\u0072\u0069\u0074\u0065\u0053\u0065g\u006d\u0065\u006e\u0074\u0050\u0061\u0067\u0065\u0041s\u0073\u006f\u0063i\u0061t\u0069\u006f\u006e";
if _aafc .pageSize ()!=4{if _fga =_bbbf .WriteByte (byte (_aafc .PageAssociation ));_fga !=nil {return 0,_ae .Wrap (_fga ,_acdb ,"\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065\u0020\u0021\u003d\u0020\u0034");};return 1,nil ;};_dfff :=make ([]byte ,4);
_d .BigEndian .PutUint32 (_dfff ,uint32 (_aafc .PageAssociation ));if _ffbc ,_fga =_bbbf .Write (_dfff );_fga !=nil {return 0,_ae .Wrap (_fga ,_acdb ,"\u0034 \u0062y\u0074\u0065\u0020\u0070\u0061g\u0065\u0020n\u0075\u006d\u0062\u0065\u0072");};return _ffbc ,nil ;
};func _ecec (_dcad *_ba .Reader ,_dbdg *Header )*TextRegion {_ceff :=&TextRegion {_fdgb :_dcad ,Header :_dbdg ,RegionInfo :NewRegionSegment (_dcad )};return _ceff ;};func (_cbbd *SymbolDictionary )decodeNewSymbols (_agea ,_gdbd uint32 ,_bbeb *_ff .Bitmap ,_ddd ,_eaff int32 )error {if _cbbd ._ddcc ==nil {_cbbd ._ddcc =_ge (_cbbd ._dffd ,nil );
if _cbbd ._fcae ==nil {var _cbge error ;_cbbd ._fcae ,_cbge =_ea .New (_cbbd ._dffd );if _cbge !=nil {return _cbge ;};};if _cbbd ._agcgg ==nil {_cbbd ._agcgg =_ea .NewStats (65536,1);};};_cbbd ._ddcc .setParameters (_cbbd ._agcgg ,_cbbd ._fcae ,_cbbd .SdrTemplate ,_agea ,_gdbd ,_bbeb ,_ddd ,_eaff ,false ,_cbbd .SdrATX ,_cbbd .SdrATY );
return _cbbd .addSymbol (_cbbd ._ddcc );};func (_ggbe *TableSegment )HtRS ()int32 {return _ggbe ._cagcc };func (_fec *TableSegment )HtOOB ()int32 {return _fec ._ffec };func (_aacd *Header )readDataStartOffset (_befd *_ba .Reader ,_bdfddc OrganizationType ){if _bdfddc ==OSequential {_aacd .SegmentDataStartOffset =uint64 (_befd .AbsolutePosition ());
};};func (_gfdb *PatternDictionary )computeSegmentDataStructure ()error {_gfdb .DataOffset =_gfdb ._eggc .AbsolutePosition ();_gfdb .DataHeaderLength =_gfdb .DataOffset -_gfdb .DataHeaderOffset ;_gfdb .DataLength =int64 (_gfdb ._eggc .AbsoluteLength ())-_gfdb .DataHeaderLength ;
return nil ;};func (_agb *GenericRefinementRegion )setParameters (_eaged *_ea .DecoderStats ,_dgg *_ea .Decoder ,_aea int8 ,_dccb ,_gfba uint32 ,_gfgf *_ff .Bitmap ,_dgaa ,_bcc int32 ,_eed bool ,_degf []int8 ,_cbg []int8 ){_eaf .Log .Trace ("\u005b\u0047\u0045NE\u0052\u0049\u0043\u002d\u0052\u0045\u0046\u002d\u0052E\u0047I\u004fN\u005d \u0073\u0065\u0074\u0050\u0061\u0072\u0061\u006d\u0065\u0074\u0065\u0072\u0073");
if _eaged !=nil {_agb ._dcg =_eaged ;};if _dgg !=nil {_agb ._da =_dgg ;};_agb .TemplateID =_aea ;_agb .RegionInfo .BitmapWidth =_dccb ;_agb .RegionInfo .BitmapHeight =_gfba ;_agb .ReferenceBitmap =_gfgf ;_agb .ReferenceDX =_dgaa ;_agb .ReferenceDY =_bcc ;
_agb .IsTPGROn =_eed ;_agb .GrAtX =_degf ;_agb .GrAtY =_cbg ;_agb .RegionBitmap =nil ;_eaf .Log .Trace ("[\u0047\u0045\u004e\u0045\u0052\u0049\u0043\u002d\u0052E\u0046\u002d\u0052\u0045\u0047\u0049\u004fN]\u0020\u0073\u0065\u0074P\u0061\u0072\u0061\u006d\u0065\u0074\u0065\u0072\u0073 f\u0069\u006ei\u0073\u0068\u0065\u0064\u002e\u0020\u0025\u0073",_agb );
};func (_aede *SymbolDictionary )GetDictionary ()([]*_ff .Bitmap ,error ){_eaf .Log .Trace ("\u005b\u0053\u0059\u004d\u0042\u004f\u004c-\u0044\u0049\u0043T\u0049\u004f\u004e\u0041R\u0059\u005d\u0020\u0047\u0065\u0074\u0044\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u0062\u0065\u0067\u0069\u006e\u0073\u002e\u002e\u002e");
defer func (){_eaf .Log .Trace ("\u005b\u0053\u0059M\u0042\u004f\u004c\u002d\u0044\u0049\u0043\u0054\u0049\u004f\u004e\u0041\u0052\u0059\u005d\u0020\u0047\u0065\u0074\u0044\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079 \u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064");
_eaf .Log .Trace ("\u005b\u0053Y\u004d\u0042\u004f\u004c\u002dD\u0049\u0043\u0054\u0049\u004fN\u0041\u0052\u0059\u005d\u0020\u0044\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u002e\u0020\u000a\u0045\u0078\u003a\u0020\u0027\u0025\u0073\u0027\u002c\u0020\u000a\u006e\u0065\u0077\u003a\u0027\u0025\u0073\u0027",_aede ._cecd ,_aede ._cgfd );
}();if _aede ._cecd ==nil {var _aadf error ;if _aede .UseRefinementAggregation {_aede ._cea =_aede .getSbSymCodeLen ();};if !_aede .IsHuffmanEncoded {if _aadf =_aede .setCodingStatistics ();_aadf !=nil {return nil ,_aadf ;};};_aede ._cgfd =make ([]*_ff .Bitmap ,_aede .NumberOfNewSymbols );
var _fgag []int ;if _aede .IsHuffmanEncoded &&!_aede .UseRefinementAggregation {_fgag =make ([]int ,_aede .NumberOfNewSymbols );};if _aadf =_aede .setSymbolsArray ();_aadf !=nil {return nil ,_aadf ;};var _efdff ,_badd int64 ;_aede ._bcgf =0;for _aede ._bcgf < _aede .NumberOfNewSymbols {_badd ,_aadf =_aede .decodeHeightClassDeltaHeight ();
if _aadf !=nil {return nil ,_aadf ;};_efdff +=_badd ;var _fefff ,_ecde uint32 ;_aaba :=int64 (_aede ._bcgf );for {var _geec int64 ;_geec ,_aadf =_aede .decodeDifferenceWidth ();if _f .Is (_aadf ,_db .ErrOOB ){break ;};if _aadf !=nil {return nil ,_aadf ;
};if _aede ._bcgf >=_aede .NumberOfNewSymbols {break ;};_fefff +=uint32 (_geec );_ecde +=_fefff ;if !_aede .IsHuffmanEncoded ||_aede .UseRefinementAggregation {if !_aede .UseRefinementAggregation {_aadf =_aede .decodeDirectlyThroughGenericRegion (_fefff ,uint32 (_efdff ));
if _aadf !=nil {return nil ,_aadf ;};}else {_aadf =_aede .decodeAggregate (_fefff ,uint32 (_efdff ));if _aadf !=nil {return nil ,_aadf ;};};}else if _aede .IsHuffmanEncoded &&!_aede .UseRefinementAggregation {_fgag [_aede ._bcgf ]=int (_fefff );};_aede ._bcgf ++;
};if _aede .IsHuffmanEncoded &&!_aede .UseRefinementAggregation {var _cfdc int64 ;if _aede .SdHuffBMSizeSelection ==0{var _fbdfb _cg .Tabler ;_fbdfb ,_aadf =_cg .GetStandardTable (1);if _aadf !=nil {return nil ,_aadf ;};_cfdc ,_aadf =_fbdfb .Decode (_aede ._dffd );
if _aadf !=nil {return nil ,_aadf ;};}else {_cfdc ,_aadf =_aede .huffDecodeBmSize ();if _aadf !=nil {return nil ,_aadf ;};};_aede ._dffd .Align ();var _faeb *_ff .Bitmap ;_faeb ,_aadf =_aede .decodeHeightClassCollectiveBitmap (_cfdc ,uint32 (_efdff ),_ecde );
if _aadf !=nil {return nil ,_aadf ;};_aadf =_aede .decodeHeightClassBitmap (_faeb ,_aaba ,int (_efdff ),_fgag );if _aadf !=nil {return nil ,_aadf ;};};};_bdba ,_aadf :=_aede .getToExportFlags ();if _aadf !=nil {return nil ,_aadf ;};_aede .setExportedSymbols (_bdba );
};return _aede ._cecd ,nil ;};func (_eecf *SymbolDictionary )decodeHeightClassBitmap (_aecg *_ff .Bitmap ,_cgca int64 ,_bfga int ,_defa []int )error {for _bcba :=_cgca ;_bcba < int64 (_eecf ._bcgf );_bcba ++{var _ccga int ;for _dgcf :=_cgca ;_dgcf <=_bcba -1;
_dgcf ++{_ccga +=_defa [_dgcf ];};_faec :=_b .Rect (_ccga ,0,_ccga +_defa [_bcba ],_bfga );_afaec ,_ccfb :=_ff .Extract (_faec ,_aecg );if _ccfb !=nil {return _ccfb ;};_eecf ._cgfd [_bcba ]=_afaec ;_eecf ._ddecc =append (_eecf ._ddecc ,_afaec );};return nil ;
};func (_ecf *Header )writeSegmentDataLength (_dfdg _ba .BinaryWriter )(_afbc int ,_cdfa error ){_bddb :=make ([]byte ,4);_d .BigEndian .PutUint32 (_bddb ,uint32 (_ecf .SegmentDataLength ));if _afbc ,_cdfa =_dfdg .Write (_bddb );_cdfa !=nil {return 0,_ae .Wrap (_cdfa ,"\u0048\u0065a\u0064\u0065\u0072\u002e\u0077\u0072\u0069\u0074\u0065\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u0044\u0061\u0074\u0061\u004c\u0065ng\u0074\u0068","");
};return _afbc ,nil ;};func (_adeb *GenericRegion )parseHeader ()(_bfe error ){_eaf .Log .Trace ("\u005b\u0047\u0045\u004e\u0045\u0052I\u0043\u002d\u0052\u0045\u0047\u0049\u004f\u004e\u005d\u0020\u0050\u0061\u0072s\u0069\u006e\u0067\u0048\u0065\u0061\u0064e\u0072\u002e\u002e\u002e");
defer func (){if _bfe !=nil {_eaf .Log .Trace ("\u005b\u0047\u0045\u004e\u0045\u0052\u0049\u0043\u002d\u0052\u0045\u0047\u0049\u004f\u004e]\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0048\u0065\u0061\u0064\u0065r\u0020\u0046\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u0020\u0077\u0069th\u0020\u0065\u0072\u0072\u006f\u0072\u002e\u0020\u0025\u0076",_bfe );
}else {_eaf .Log .Trace ("\u005b\u0047\u0045\u004e\u0045\u0052\u0049C\u002d\u0052\u0045G\u0049\u004f\u004e]\u0020\u0050a\u0072\u0073\u0069\u006e\u0067\u0048e\u0061de\u0072\u0020\u0046\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u0020\u0053\u0075\u0063\u0063\u0065\u0073\u0073\u0066\u0075\u006c\u006c\u0079\u002e\u002e\u002e");
};}();var (_beg int ;_agf uint64 ;);if _bfe =_adeb .RegionSegment .parseHeader ();_bfe !=nil {return _bfe ;};if _ ,_bfe =_adeb ._bca .ReadBits (3);_bfe !=nil {return _bfe ;};_beg ,_bfe =_adeb ._bca .ReadBit ();if _bfe !=nil {return _bfe ;};if _beg ==1{_adeb .UseExtTemplates =true ;
};_beg ,_bfe =_adeb ._bca .ReadBit ();if _bfe !=nil {return _bfe ;};if _beg ==1{_adeb .IsTPGDon =true ;};_agf ,_bfe =_adeb ._bca .ReadBits (2);if _bfe !=nil {return _bfe ;};_adeb .GBTemplate =byte (_agf &0xf);_beg ,_bfe =_adeb ._bca .ReadBit ();if _bfe !=nil {return _bfe ;
};if _beg ==1{_adeb .IsMMREncoded =true ;};if !_adeb .IsMMREncoded {_aabe :=1;if _adeb .GBTemplate ==0{_aabe =4;if _adeb .UseExtTemplates {_aabe =12;};};if _bfe =_adeb .readGBAtPixels (_aabe );_bfe !=nil {return _bfe ;};};if _bfe =_adeb .computeSegmentDataStructure ();
_bfe !=nil {return _bfe ;};_eaf .Log .Trace ("\u0025\u0073",_adeb );return nil ;};func (_deef *GenericRefinementRegion )updateOverride ()error {if _deef .GrAtX ==nil ||_deef .GrAtY ==nil {return _f .New ("\u0041\u0054\u0020\u0070\u0069\u0078\u0065\u006c\u0073\u0020\u006e\u006ft\u0020\u0073\u0065\u0074");
};if len (_deef .GrAtX )!=len (_deef .GrAtY ){return _f .New ("A\u0054\u0020\u0070\u0069xe\u006c \u0069\u006e\u0063\u006f\u006es\u0069\u0073\u0074\u0065\u006e\u0074");};_deef ._bf =make ([]bool ,len (_deef .GrAtX ));switch _deef .TemplateID {case 0:if _deef .GrAtX [0]!=-1&&_deef .GrAtY [0]!=-1{_deef ._bf [0]=true ;
_deef ._ed =true ;};if _deef .GrAtX [1]!=-1&&_deef .GrAtY [1]!=-1{_deef ._bf [1]=true ;_deef ._ed =true ;};case 1:_deef ._ed =false ;};return nil ;};func (_gc *GenericRefinementRegion )getGrReference ()(*_ff .Bitmap ,error ){segments :=_gc ._cga .RTSegments ;
if len (segments )==0{return nil ,_f .New ("\u0072\u0065f\u0065\u0072\u0065\u006e\u0063\u0065\u0064\u0020\u0073\u0065\u0067\u006d\u0065\u006e\u0074\u0020\u006e\u006f\u0074\u0020\u0065\u0078is\u0074\u0073");};_bc ,_bef :=segments [0].GetSegmentData ();if _bef !=nil {return nil ,_bef ;
};_bfd ,_beca :=_bc .(Regioner );if !_beca {return nil ,_bg .Errorf ("\u0072\u0065\u0066\u0065\u0072r\u0065\u0064\u0020\u0074\u006f\u0020\u0073\u0065\u0067\u006d\u0065\u006e\u0074 \u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0061\u0020\u0072\u0065\u0067\u0069\u006f\u006e\u0065\u0072\u003a\u0020\u0025\u0054",_bc );
};return _bfd .GetRegionBitmap ();};func (_deaa *TableSegment )StreamReader ()*_ba .Reader {return _deaa ._ecbf };func (_dfe *SymbolDictionary )setAtPixels ()error {if _dfe .IsHuffmanEncoded {return nil ;};_abfa :=1;if _dfe .SdTemplate ==0{_abfa =4;};if _bafb :=_dfe .readAtPixels (_abfa );
_bafb !=nil {return _bafb ;};return nil ;};func (_ebae *HalftoneRegion )GetPatterns ()([]*_ff .Bitmap ,error ){var (_dfgd []*_ff .Bitmap ;_gcfg error ;);for _ ,_aefd :=range _ebae ._ece .RTSegments {var _bgdc Segmenter ;_bgdc ,_gcfg =_aefd .GetSegmentData ();
if _gcfg !=nil {_eaf .Log .Debug ("\u0047e\u0074\u0053\u0065\u0067m\u0065\u006e\u0074\u0044\u0061t\u0061 \u0066a\u0069\u006c\u0065\u0064\u003a\u0020\u0025v",_gcfg );return nil ,_gcfg ;};_fda ,_agg :=_bgdc .(*PatternDictionary );if !_agg {_gcfg =_bg .Errorf ("\u0072e\u006c\u0061t\u0065\u0064\u0020\u0073e\u0067\u006d\u0065n\u0074\u0020\u006e\u006f\u0074\u0020\u0061\u0020\u0070at\u0074\u0065\u0072n\u0020\u0064i\u0063\u0074\u0069\u006f\u006e\u0061r\u0079\u003a \u0025\u0054",_bgdc );
return nil ,_gcfg ;};var _acdc []*_ff .Bitmap ;_acdc ,_gcfg =_fda .GetDictionary ();if _gcfg !=nil {_eaf .Log .Debug ("\u0070\u0061\u0074\u0074\u0065\u0072\u006e\u0020\u0047\u0065\u0074\u0044\u0069\u0063\u0074i\u006fn\u0061\u0072\u0079\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u003a\u0020\u0025\u0076",_gcfg );
return nil ,_gcfg ;};_dfgd =append (_dfgd ,_acdc ...);};return _dfgd ,nil ;};func (_cgb *EndOfStripe )parseHeader ()error {_ga ,_gf :=_cgb ._aa .ReadBits (32);if _gf !=nil {return _gf ;};_cgb ._ad =int (_ga &_g .MaxInt32 );return nil ;};type Regioner interface{GetRegionBitmap ()(*_ff .Bitmap ,error );
GetRegionInfo ()*RegionSegment ;};type template1 struct{};func (_bacc *SymbolDictionary )readRegionFlags ()error {var (_efag uint64 ;_dafee int ;);_ ,_cffe :=_bacc ._dffd .ReadBits (3);if _cffe !=nil {return _cffe ;};_dafee ,_cffe =_bacc ._dffd .ReadBit ();
if _cffe !=nil {return _cffe ;};_bacc .SdrTemplate =int8 (_dafee );_efag ,_cffe =_bacc ._dffd .ReadBits (2);if _cffe !=nil {return _cffe ;};_bacc .SdTemplate =int8 (_efag &0xf);_dafee ,_cffe =_bacc ._dffd .ReadBit ();if _cffe !=nil {return _cffe ;};if _dafee ==1{_bacc ._edecd =true ;
};_dafee ,_cffe =_bacc ._dffd .ReadBit ();if _cffe !=nil {return _cffe ;};if _dafee ==1{_bacc ._bedb =true ;};_dafee ,_cffe =_bacc ._dffd .ReadBit ();if _cffe !=nil {return _cffe ;};if _dafee ==1{_bacc .SdHuffAggInstanceSelection =true ;};_dafee ,_cffe =_bacc ._dffd .ReadBit ();
if _cffe !=nil {return _cffe ;};_bacc .SdHuffBMSizeSelection =int8 (_dafee );_efag ,_cffe =_bacc ._dffd .ReadBits (2);if _cffe !=nil {return _cffe ;};_bacc .SdHuffDecodeWidthSelection =int8 (_efag &0xf);_efag ,_cffe =_bacc ._dffd .ReadBits (2);if _cffe !=nil {return _cffe ;
};_bacc .SdHuffDecodeHeightSelection =int8 (_efag &0xf);_dafee ,_cffe =_bacc ._dffd .ReadBit ();if _cffe !=nil {return _cffe ;};if _dafee ==1{_bacc .UseRefinementAggregation =true ;};_dafee ,_cffe =_bacc ._dffd .ReadBit ();if _cffe !=nil {return _cffe ;
};if _dafee ==1{_bacc .IsHuffmanEncoded =true ;};return nil ;};func (_ecbd *SymbolDictionary )decodeHeightClassCollectiveBitmap (_deacf int64 ,_ebfba ,_gcecg uint32 )(*_ff .Bitmap ,error ){if _deacf ==0{_edeb :=_ff .New (int (_gcecg ),int (_ebfba ));var (_dbfa byte ;
_bfcc error ;);for _gadd :=0;_gadd < len (_edeb .Data );_gadd ++{_dbfa ,_bfcc =_ecbd ._dffd .ReadByte ();if _bfcc !=nil {return nil ,_bfcc ;};if _bfcc =_edeb .SetByte (_gadd ,_dbfa );_bfcc !=nil {return nil ,_bfcc ;};};return _edeb ,nil ;};if _ecbd ._cdba ==nil {_ecbd ._cdba =NewGenericRegion (_ecbd ._dffd );
};_ecbd ._cdba .setParameters (true ,_ecbd ._dffd .AbsolutePosition (),_deacf ,_ebfba ,_gcecg );_eaccf ,_aegc :=_ecbd ._cdba .GetRegionBitmap ();if _aegc !=nil {return nil ,_aegc ;};return _eaccf ,nil ;};func (_deefg *HalftoneRegion )grayScaleDecoding (_bcae int )([][]int ,error ){var (_adeg []int8 ;
_gbf []int8 ;);if !_deefg .IsMMREncoded {_adeg =make ([]int8 ,4);_gbf =make ([]int8 ,4);if _deefg .HTemplate <=1{_adeg [0]=3;}else if _deefg .HTemplate >=2{_adeg [0]=2;};_gbf [0]=-1;_adeg [1]=-3;_gbf [1]=-1;_adeg [2]=2;_gbf [2]=-2;_adeg [3]=-2;_gbf [3]=-2;
};_deba :=make ([]*_ff .Bitmap ,_bcae );_agff :=NewGenericRegion (_deefg ._ddaf );_agff .setParametersMMR (_deefg .IsMMREncoded ,_deefg .DataOffset ,_deefg .DataLength ,_deefg .HGridHeight ,_deefg .HGridWidth ,_deefg .HTemplate ,false ,_deefg .HSkipEnabled ,_adeg ,_gbf );
_bbc :=_bcae -1;var _ffbf error ;_deba [_bbc ],_ffbf =_agff .GetRegionBitmap ();if _ffbf !=nil {return nil ,_ffbf ;};for _bbc > 0{_bbc --;_agff .Bitmap =nil ;_deba [_bbc ],_ffbf =_agff .GetRegionBitmap ();if _ffbf !=nil {return nil ,_ffbf ;};if _ffbf =_deefg .combineGrayscalePlanes (_deba ,_bbc );
_ffbf !=nil {return nil ,_ffbf ;};};return _deefg .computeGrayScalePlanes (_deba ,_bcae );};func (_gfc *Header )String ()string {_cdge :=&_ef .Builder {};_cdge .WriteString ("\u000a[\u0053E\u0047\u004d\u0045\u004e\u0054-\u0048\u0045A\u0044\u0045\u0052\u005d\u000a");
_bg .Fprintf (_cdge ,"\t\u002d\u0020\u0053\u0065gm\u0065n\u0074\u004e\u0075\u006d\u0062e\u0072\u003a\u0020\u0025\u0076\u000a",_gfc .SegmentNumber );_bg .Fprintf (_cdge ,"\u0009\u002d\u0020T\u0079\u0070\u0065\u003a\u0020\u0025\u0076\u000a",_gfc .Type );
_bg .Fprintf (_cdge ,"\u0009-\u0020R\u0065\u0074\u0061\u0069\u006eF\u006c\u0061g\u003a\u0020\u0025\u0076\u000a",_gfc .RetainFlag );_bg .Fprintf (_cdge ,"\u0009\u002d\u0020Pa\u0067\u0065\u0041\u0073\u0073\u006f\u0063\u0069\u0061\u0074\u0069\u006f\u006e\u003a\u0020\u0025\u0076\u000a",_gfc .PageAssociation );
_bg .Fprintf (_cdge ,"\u0009\u002d\u0020\u0050\u0061\u0067\u0065\u0041\u0073\u0073\u006f\u0063\u0069\u0061\u0074i\u006fn\u0046\u0069\u0065\u006c\u0064\u0053\u0069\u007a\u0065\u003a\u0020\u0025\u0076\u000a",_gfc .PageAssociationFieldSize );_cdge .WriteString ("\u0009-\u0020R\u0054\u0053\u0045\u0047\u004d\u0045\u004e\u0054\u0053\u003a\u000a");
for _ ,_defd :=range _gfc .RTSNumbers {_bg .Fprintf (_cdge ,"\u0009\t\u002d\u0020\u0025\u0064\u000a",_defd );};_bg .Fprintf (_cdge ,"\t\u002d \u0048\u0065\u0061\u0064\u0065\u0072\u004c\u0065n\u0067\u0074\u0068\u003a %\u0076\u000a",_gfc .HeaderLength );
_bg .Fprintf (_cdge ,"\u0009-\u0020\u0053\u0065\u0067m\u0065\u006e\u0074\u0044\u0061t\u0061L\u0065n\u0067\u0074\u0068\u003a\u0020\u0025\u0076\n",_gfc .SegmentDataLength );_bg .Fprintf (_cdge ,"\u0009\u002d\u0020\u0053\u0065\u0067\u006d\u0065\u006e\u0074D\u0061\u0074\u0061\u0053\u0074\u0061\u0072t\u004f\u0066\u0066\u0073\u0065\u0074\u003a\u0020\u0025\u0076\u000a",_gfc .SegmentDataStartOffset );
return _cdge .String ();};func (_aebg *GenericRegion )updateOverrideFlags ()error {const _adbb ="\u0075\u0070\u0064\u0061te\u004f\u0076\u0065\u0072\u0072\u0069\u0064\u0065\u0046\u006c\u0061\u0067\u0073";if _aebg .GBAtX ==nil ||_aebg .GBAtY ==nil {return nil ;
};if len (_aebg .GBAtX )!=len (_aebg .GBAtY ){return _ae .Errorf (_adbb ,"i\u006eco\u0073i\u0073t\u0065\u006e\u0074\u0020\u0041T\u0020\u0070\u0069x\u0065\u006c\u002e\u0020\u0041m\u006f\u0075\u006et\u0020\u006f\u0066\u0020\u0027\u0078\u0027\u0020\u0070\u0069\u0078e\u006c\u0073\u003a %d\u002c\u0020\u0041\u006d\u006f\u0075n\u0074\u0020\u006f\u0066\u0020\u0027\u0079\u0027\u0020\u0070\u0069\u0078e\u006cs\u003a\u0020\u0025\u0064",len (_aebg .GBAtX ),len (_aebg .GBAtY ));
};_aebg .GBAtOverride =make ([]bool ,len (_aebg .GBAtX ));switch _aebg .GBTemplate {case 0:if !_aebg .UseExtTemplates {if _aebg .GBAtX [0]!=3||_aebg .GBAtY [0]!=-1{_aebg .setOverrideFlag (0);};if _aebg .GBAtX [1]!=-3||_aebg .GBAtY [1]!=-1{_aebg .setOverrideFlag (1);
};if _aebg .GBAtX [2]!=2||_aebg .GBAtY [2]!=-2{_aebg .setOverrideFlag (2);};if _aebg .GBAtX [3]!=-2||_aebg .GBAtY [3]!=-2{_aebg .setOverrideFlag (3);};}else {if _aebg .GBAtX [0]!=-2||_aebg .GBAtY [0]!=0{_aebg .setOverrideFlag (0);};if _aebg .GBAtX [1]!=0||_aebg .GBAtY [1]!=-2{_aebg .setOverrideFlag (1);
};if _aebg .GBAtX [2]!=-2||_aebg .GBAtY [2]!=-1{_aebg .setOverrideFlag (2);};if _aebg .GBAtX [3]!=-1||_aebg .GBAtY [3]!=-2{_aebg .setOverrideFlag (3);};if _aebg .GBAtX [4]!=1||_aebg .GBAtY [4]!=-2{_aebg .setOverrideFlag (4);};if _aebg .GBAtX [5]!=2||_aebg .GBAtY [5]!=-1{_aebg .setOverrideFlag (5);
};if _aebg .GBAtX [6]!=-3||_aebg .GBAtY [6]!=0{_aebg .setOverrideFlag (6);};if _aebg .GBAtX [7]!=-4||_aebg .GBAtY [7]!=0{_aebg .setOverrideFlag (7);};if _aebg .GBAtX [8]!=2||_aebg .GBAtY [8]!=-2{_aebg .setOverrideFlag (8);};if _aebg .GBAtX [9]!=3||_aebg .GBAtY [9]!=-1{_aebg .setOverrideFlag (9);
};if _aebg .GBAtX [10]!=-2||_aebg .GBAtY [10]!=-2{_aebg .setOverrideFlag (10);};if _aebg .GBAtX [11]!=-3||_aebg .GBAtY [11]!=-1{_aebg .setOverrideFlag (11);};};case 1:if _aebg .GBAtX [0]!=3||_aebg .GBAtY [0]!=-1{_aebg .setOverrideFlag (0);};case 2:if _aebg .GBAtX [0]!=2||_aebg .GBAtY [0]!=-1{_aebg .setOverrideFlag (0);
};case 3:if _aebg .GBAtX [0]!=2||_aebg .GBAtY [0]!=-1{_aebg .setOverrideFlag (0);};};return nil ;};var _ SegmentEncoder =&RegionSegment {};func (_afaa *Header )readSegmentDataLength (_aeg *_ba .Reader )(_eeba error ){_afaa .SegmentDataLength ,_eeba =_aeg .ReadBits (32);
if _eeba !=nil {return _eeba ;};_afaa .SegmentDataLength &=_g .MaxInt32 ;return nil ;};func (_cgae *TextRegion )initSymbols ()error {const _ebgfb ="i\u006e\u0069\u0074\u0053\u0079\u006d\u0062\u006f\u006c\u0073";for _ ,_beag :=range _cgae .Header .RTSegments {if _beag ==nil {return _ae .Error (_ebgfb ,"\u006e\u0069\u006c\u0020\u0073\u0065\u0067\u006de\u006e\u0074\u0020pr\u006f\u0076\u0069\u0064\u0065\u0064 \u0066\u006f\u0072\u0020\u0074\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u0072\u0065g\u0069\u006f\u006e\u0020\u0053\u0079\u006d\u0062o\u006c\u0073");
};if _beag .Type ==0{_fcb ,_faafg :=_beag .GetSegmentData ();if _faafg !=nil {return _ae .Wrap (_faafg ,_ebgfb ,"");};_fgfa ,_cabe :=_fcb .(*SymbolDictionary );if !_cabe {return _ae .Error (_ebgfb ,"\u0072e\u0066\u0065r\u0072\u0065\u0064 \u0054\u006f\u0020\u0053\u0065\u0067\u006de\u006e\u0074\u0020\u0069\u0073\u0020n\u006f\u0074\u0020\u0061\u0020\u0053\u0079\u006d\u0062\u006f\u006cD\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_fgfa ._ffbe =_cgae ._dbaeb ;_acbe ,_faafg :=_fgfa .GetDictionary ();if _faafg !=nil {return _ae .Wrap (_faafg ,_ebgfb ,"");};_cgae .Symbols =append (_cgae .Symbols ,_acbe ...);};};_cgae .NumberOfSymbols =uint32 (len (_cgae .Symbols ));return nil ;};
func (_aacbg *SymbolDictionary )readNumberOfExportedSymbols ()error {_cdaa ,_cbgg :=_aacbg ._dffd .ReadBits (32);if _cbgg !=nil {return _cbgg ;};_aacbg .NumberOfExportedSymbols =uint32 (_cdaa &_g .MaxUint32 );return nil ;};func (_aggd *Header )referenceSize ()uint {switch {case _aggd .SegmentNumber <=255:return 1;
case _aggd .SegmentNumber <=65535:return 2;default:return 4;};};func (_ffge *Header )parse (_efdf Documenter ,_adae *_ba .Reader ,_ffaa int64 ,_cdde OrganizationType )(_gff error ){const _cgfg ="\u0070\u0061\u0072s\u0065";_eaf .Log .Trace ("\u005b\u0053\u0045\u0047\u004d\u0045\u004e\u0054\u002d\u0048E\u0041\u0044\u0045\u0052\u005d\u005b\u0050A\u0052\u0053\u0045\u005d\u0020\u0042\u0065\u0067\u0069\u006e\u0073");
defer func (){if _gff !=nil {_eaf .Log .Trace ("\u005b\u0053\u0045GM\u0045\u004e\u0054\u002d\u0048\u0045\u0041\u0044\u0045R\u005d[\u0050A\u0052S\u0045\u005d\u0020\u0046\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0025\u0076",_gff );}else {_eaf .Log .Trace ("\u005b\u0053\u0045\u0047\u004d\u0045\u004e\u0054\u002d\u0048\u0045\u0041\u0044\u0045\u0052]\u005bP\u0041\u0052\u0053\u0045\u005d\u0020\u0046\u0069\u006e\u0069\u0073\u0068\u0065\u0064");
};}();_ ,_gff =_adae .Seek (_ffaa ,_a .SeekStart );if _gff !=nil {return _ae .Wrap (_gff ,_cgfg ,"\u0073\u0065\u0065\u006b\u0020\u0073\u0074\u0061\u0072\u0074");};if _gff =_ffge .readSegmentNumber (_adae );_gff !=nil {return _ae .Wrap (_gff ,_cgfg ,"");
};if _gff =_ffge .readHeaderFlags ();_gff !=nil {return _ae .Wrap (_gff ,_cgfg ,"");};var _fcfa uint64 ;_fcfa ,_gff =_ffge .readNumberOfReferredToSegments (_adae );if _gff !=nil {return _ae .Wrap (_gff ,_cgfg ,"");};_ffge .RTSNumbers ,_gff =_ffge .readReferredToSegmentNumbers (_adae ,int (_fcfa ));
if _gff !=nil {return _ae .Wrap (_gff ,_cgfg ,"");};_gff =_ffge .readSegmentPageAssociation (_efdf ,_adae ,_fcfa ,_ffge .RTSNumbers ...);if _gff !=nil {return _ae .Wrap (_gff ,_cgfg ,"");};if _ffge .Type !=TEndOfFile {if _gff =_ffge .readSegmentDataLength (_adae );
_gff !=nil {return _ae .Wrap (_gff ,_cgfg ,"");};};_ffge .readDataStartOffset (_adae ,_cdde );_ffge .readHeaderLength (_adae ,_ffaa );_eaf .Log .Trace ("\u0025\u0073",_ffge );return nil ;};func (_bebcb *TextRegion )parseHeader ()error {var _dcdb error ;
_eaf .Log .Trace ("\u005b\u0054E\u0058\u0054\u0020\u0052E\u0047\u0049O\u004e\u005d\u005b\u0050\u0041\u0052\u0053\u0045-\u0048\u0045\u0041\u0044\u0045\u0052\u005d\u0020\u0062\u0065\u0067\u0069n\u0073\u002e\u002e\u002e");defer func (){if _dcdb !=nil {_eaf .Log .Trace ("\u005b\u0054\u0045\u0058\u0054\u0020\u0052\u0045\u0047\u0049\u004f\u004e\u005d\u005b\u0050\u0041\u0052\u0053\u0045\u002d\u0048\u0045\u0041\u0044E\u0052\u005d\u0020\u0066\u0061i\u006c\u0065d\u002e\u0020\u0025\u0076",_dcdb );
}else {_eaf .Log .Trace ("\u005b\u0054E\u0058\u0054\u0020\u0052E\u0047\u0049O\u004e\u005d\u005b\u0050\u0041\u0052\u0053\u0045-\u0048\u0045\u0041\u0044\u0045\u0052\u005d\u0020\u0066\u0069\u006e\u0069s\u0068\u0065\u0064\u002e");};}();if _dcdb =_bebcb .RegionInfo .parseHeader ();
_dcdb !=nil {return _dcdb ;};if _dcdb =_bebcb .readRegionFlags ();_dcdb !=nil {return _dcdb ;};if _bebcb .IsHuffmanEncoded {if _dcdb =_bebcb .readHuffmanFlags ();_dcdb !=nil {return _dcdb ;};};if _dcdb =_bebcb .readUseRefinement ();_dcdb !=nil {return _dcdb ;
};if _dcdb =_bebcb .readAmountOfSymbolInstances ();_dcdb !=nil {return _dcdb ;};if _dcdb =_bebcb .getSymbols ();_dcdb !=nil {return _dcdb ;};if _dcdb =_bebcb .computeSymbolCodeLength ();_dcdb !=nil {return _dcdb ;};if _dcdb =_bebcb .checkInput ();_dcdb !=nil {return _dcdb ;
};_eaf .Log .Trace ("\u0025\u0073",_bebcb .String ());return nil ;};type Documenter interface{GetPage (int )(Pager ,error );GetGlobalSegment (int )(*Header ,error );};func (_agcab *SymbolDictionary )decodeHeightClassDeltaHeightWithHuffman ()(int64 ,error ){switch _agcab .SdHuffDecodeHeightSelection {case 0:_aebe ,_aabf :=_cg .GetStandardTable (4);
if _aabf !=nil {return 0,_aabf ;};return _aebe .Decode (_agcab ._dffd );case 1:_bfcd ,_ggegd :=_cg .GetStandardTable (5);if _ggegd !=nil {return 0,_ggegd ;};return _bfcd .Decode (_agcab ._dffd );case 3:if _agcab ._bddd ==nil {_abge ,_fdgeg :=_cg .GetStandardTable (0);
if _fdgeg !=nil {return 0,_fdgeg ;};_agcab ._bddd =_abge ;};return _agcab ._bddd .Decode (_agcab ._dffd );};return 0,nil ;};func (_fgb *GenericRegion )setParameters (_aceaf bool ,_ddea ,_cddc int64 ,_bggb ,_gde uint32 ){_fgb .IsMMREncoded =_aceaf ;_fgb .DataOffset =_ddea ;
_fgb .DataLength =_cddc ;_fgb .RegionSegment .BitmapHeight =_bggb ;_fgb .RegionSegment .BitmapWidth =_gde ;_fgb ._abcf =nil ;_fgb .Bitmap =nil ;};func (_dbef *Header )writeReferredToSegments (_gafe _ba .BinaryWriter )(_dcdg int ,_eaaee error ){const _cbbb ="\u0077\u0072\u0069te\u0052\u0065\u0066\u0065\u0072\u0072\u0065\u0064\u0054\u006f\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u0073";
var (_cde uint16 ;_gadc uint32 ;);_gceca :=_dbef .referenceSize ();_bccg :=1;_ggag :=make ([]byte ,_gceca );for _ ,_dcdf :=range _dbef .RTSNumbers {switch _gceca {case 4:_gadc =uint32 (_dcdf );_d .BigEndian .PutUint32 (_ggag ,_gadc );_bccg ,_eaaee =_gafe .Write (_ggag );
if _eaaee !=nil {return 0,_ae .Wrap (_eaaee ,_cbbb ,"u\u0069\u006e\u0074\u0033\u0032\u0020\u0073\u0069\u007a\u0065");};case 2:_cde =uint16 (_dcdf );_d .BigEndian .PutUint16 (_ggag ,_cde );_bccg ,_eaaee =_gafe .Write (_ggag );if _eaaee !=nil {return 0,_ae .Wrap (_eaaee ,_cbbb ,"\u0075\u0069\u006e\u0074\u0031\u0036");
};default:if _eaaee =_gafe .WriteByte (byte (_dcdf ));_eaaee !=nil {return 0,_ae .Wrap (_eaaee ,_cbbb ,"\u0075\u0069\u006et\u0038");};};_dcdg +=_bccg ;};return _dcdg ,nil ;};func (_acgc *GenericRegion )setParametersMMR (_fbfc bool ,_ebcc ,_cac int64 ,_acdg ,_dded uint32 ,_gcecf byte ,_bced ,_fbebg bool ,_bdac ,_fbeba []int8 ){_acgc .DataOffset =_ebcc ;
_acgc .DataLength =_cac ;_acgc .RegionSegment =&RegionSegment {};_acgc .RegionSegment .BitmapHeight =_acdg ;_acgc .RegionSegment .BitmapWidth =_dded ;_acgc .GBTemplate =_gcecf ;_acgc .IsMMREncoded =_fbfc ;_acgc .IsTPGDon =_bced ;_acgc .GBAtX =_bdac ;_acgc .GBAtY =_fbeba ;
};func (_abac *SymbolDictionary )readAtPixels (_ffdd int )error {_abac .SdATX =make ([]int8 ,_ffdd );_abac .SdATY =make ([]int8 ,_ffdd );var (_aacdd byte ;_cdcf error ;);for _gcba :=0;_gcba < _ffdd ;_gcba ++{_aacdd ,_cdcf =_abac ._dffd .ReadByte ();if _cdcf !=nil {return _cdcf ;
};_abac .SdATX [_gcba ]=int8 (_aacdd );_aacdd ,_cdcf =_abac ._dffd .ReadByte ();if _cdcf !=nil {return _cdcf ;};_abac .SdATY [_gcba ]=int8 (_aacdd );};return nil ;};func (_aace *TextRegion )blit (_fbef *_ff .Bitmap ,_deaac int64 )error {if _aace .IsTransposed ==0&&(_aace .ReferenceCorner ==2||_aace .ReferenceCorner ==3){_aace ._dfgg +=int64 (_fbef .Width -1);
}else if _aace .IsTransposed ==1&&(_aace .ReferenceCorner ==0||_aace .ReferenceCorner ==2){_aace ._dfgg +=int64 (_fbef .Height -1);};_bgfaa :=_aace ._dfgg ;if _aace .IsTransposed ==1{_bgfaa ,_deaac =_deaac ,_bgfaa ;};switch _aace .ReferenceCorner {case 0:_deaac -=int64 (_fbef .Height -1);
case 2:_deaac -=int64 (_fbef .Height -1);_bgfaa -=int64 (_fbef .Width -1);case 3:_bgfaa -=int64 (_fbef .Width -1);};_gdee :=_ff .Blit (_fbef ,_aace .RegionBitmap ,int (_bgfaa ),int (_deaac ),_aace .CombinationOperator );if _gdee !=nil {return _gdee ;};
if _aace .IsTransposed ==0&&(_aace .ReferenceCorner ==0||_aace .ReferenceCorner ==1){_aace ._dfgg +=int64 (_fbef .Width -1);};if _aace .IsTransposed ==1&&(_aace .ReferenceCorner ==1||_aace .ReferenceCorner ==3){_aace ._dfgg +=int64 (_fbef .Height -1);};
return nil ;};func (_bbgg *Header )CleanSegmentData (){if _bbgg .SegmentData !=nil {_bbgg .SegmentData =nil ;};};func (_gabb *SymbolDictionary )setExportedSymbols (_bgaf []int ){for _dgfa :=uint32 (0);_dgfa < _gabb ._efaf +_gabb .NumberOfNewSymbols ;_dgfa ++{if _bgaf [_dgfa ]==1{var _eddec *_ff .Bitmap ;
if _dgfa < _gabb ._efaf {_eddec =_gabb ._bgf [_dgfa ];}else {_eddec =_gabb ._cgfd [_dgfa -_gabb ._efaf ];};_eaf .Log .Trace ("\u005bS\u0059\u004dB\u004f\u004c\u002d\u0044I\u0043\u0054\u0049O\u004e\u0041\u0052\u0059\u005d\u0020\u0041\u0064\u0064 E\u0078\u0070\u006fr\u0074\u0065d\u0053\u0079\u006d\u0062\u006f\u006c:\u0020\u0027%\u0073\u0027",_eddec );
_gabb ._cecd =append (_gabb ._cecd ,_eddec );};};};func (_cbc *Header )GetSegmentData ()(Segmenter ,error ){var _fffc Segmenter ;if _cbc .SegmentData !=nil {_fffc =_cbc .SegmentData ;};if _fffc ==nil {_edca ,_eced :=_cdfgb [_cbc .Type ];if !_eced {return nil ,_bg .Errorf ("\u0074\u0079\u0070\u0065\u003a\u0020\u0025\u0073\u002f\u0020\u0025\u0064\u0020\u0063\u0072e\u0061t\u006f\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e\u0020",_cbc .Type ,_cbc .Type );
};_fffc =_edca ();_eaf .Log .Trace ("\u005b\u0053E\u0047\u004d\u0045\u004e\u0054-\u0048\u0045\u0041\u0044\u0045R\u005d\u005b\u0023\u0025\u0064\u005d\u0020\u0047\u0065\u0074\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u0044\u0061\u0074\u0061\u0020\u0061\u0074\u0020\u004f\u0066\u0066\u0073\u0065\u0074\u003a\u0020\u0025\u0030\u0034\u0058",_cbc .SegmentNumber ,_cbc .SegmentDataStartOffset );
_faca ,_eaed :=_cbc .subInputReader ();if _eaed !=nil {return nil ,_eaed ;};if _cfa :=_fffc .Init (_cbc ,_faca );_cfa !=nil {_eaf .Log .Debug ("\u0049\u006e\u0069\u0074 \u0066\u0061\u0069\u006c\u0065\u0064\u003a\u0020\u0025\u0076 \u0066o\u0072\u0020\u0074\u0079\u0070\u0065\u003a \u0025\u0054",_cfa ,_fffc );
return nil ,_cfa ;};_cbc .SegmentData =_fffc ;};return _fffc ,nil ;};func (_begfa *TableSegment )Init (h *Header ,r *_ba .Reader )error {_begfa ._ecbf =r ;return _begfa .parseHeader ();};func (_ffac *PageInformationSegment )readRequiresAuxiliaryBuffer ()error {_daef ,_cggab :=_ffac ._efce .ReadBit ();
if _cggab !=nil {return _cggab ;};if _daef ==1{_ffac ._degb =true ;};return nil ;};type OrganizationType uint8 ;func (_dbfc *PageInformationSegment )readDefaultPixelValue ()error {_badcf ,_gagg :=_dbfc ._efce .ReadBit ();if _gagg !=nil {return _gagg ;};
_dbfc .DefaultPixelValue =uint8 (_badcf &0xf);return nil ;};func (_feec *SymbolDictionary )Init (h *Header ,r *_ba .Reader )error {_feec .Header =h ;_feec ._dffd =r ;return _feec .parseHeader ();};func (_bfcb *PageInformationSegment )readCombinationOperator ()error {_faf ,_gfce :=_bfcb ._efce .ReadBits (2);
if _gfce !=nil {return _gfce ;};_bfcb ._ecgc =_ff .CombinationOperator (int (_faf ));return nil ;};func (_bagg *GenericRefinementRegion )parseHeader ()(_cdd error ){_eaf .Log .Trace ("\u005b\u0047\u0045\u004e\u0045\u0052\u0049\u0043\u002d\u0052\u0045\u0046\u002d\u0052\u0045\u0047\u0049\u004f\u004e\u005d\u0020\u0070\u0061\u0072s\u0069\u006e\u0067\u0020\u0048e\u0061\u0064e\u0072\u002e\u002e\u002e");
_ffd :=_e .Now ();defer func (){if _cdd ==nil {_eaf .Log .Trace ("\u005b\u0047\u0045\u004e\u0045\u0052\u0049\u0043\u002d\u0052\u0045\u0046\u002d\u0052\u0045G\u0049\u004f\u004e\u005d\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020h\u0065\u0061\u0064\u0065\u0072\u0020\u0066\u0069\u006e\u0069\u0073\u0068id\u0020\u0069\u006e\u003a\u0020\u0025\u0064\u0020\u006e\u0073",_e .Since (_ffd ).Nanoseconds ());
}else {_eaf .Log .Trace ("\u005b\u0047E\u004e\u0045\u0052\u0049\u0043\u002d\u0052\u0045\u0046\u002d\u0052\u0045\u0047\u0049\u004f\u004e\u005d\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0061\u0064\u0065\u0072\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u003a\u0020\u0025\u0073",_cdd );
};}();if _cdd =_bagg .RegionInfo .parseHeader ();_cdd !=nil {return _cdd ;};_ ,_cdd =_bagg ._fbe .ReadBits (6);if _cdd !=nil {return _cdd ;};_bagg .IsTPGROn ,_cdd =_bagg ._fbe .ReadBool ();if _cdd !=nil {return _cdd ;};var _cbdc int ;_cbdc ,_cdd =_bagg ._fbe .ReadBit ();
if _cdd !=nil {return _cdd ;};_bagg .TemplateID =int8 (_cbdc );switch _bagg .TemplateID {case 0:_bagg .Template =_bagg ._aab ;if _cdd =_bagg .readAtPixels ();_cdd !=nil {return _cdd ;};case 1:_bagg .Template =_bagg ._aabc ;};return nil ;};func (_bgc *HalftoneRegion )computeSegmentDataStructure ()error {_bgc .DataOffset =_bgc ._ddaf .AbsolutePosition ();
_bgc .DataHeaderLength =_bgc .DataOffset -_bgc .DataHeaderOffset ;_bgc .DataLength =int64 (_bgc ._ddaf .AbsoluteLength ())-_bgc .DataHeaderLength ;return nil ;};func (_gbag *TextRegion )getSymbols ()error {if _gbag .Header .RTSegments !=nil {return _gbag .initSymbols ();
};return nil ;};func (_caab *GenericRegion )copyLineAbove (_ebc int )error {_gaca :=_ebc *_caab .Bitmap .RowStride ;_gceg :=_gaca -_caab .Bitmap .RowStride ;for _cfg :=0;_cfg < _caab .Bitmap .RowStride ;_cfg ++{_cdg ,_agab :=_caab .Bitmap .GetByte (_gceg );
if _agab !=nil {return _agab ;};_gceg ++;if _agab =_caab .Bitmap .SetByte (_gaca ,_cdg );_agab !=nil {return _agab ;};_gaca ++;};return nil ;};func (_caa *GenericRegion )GetRegionInfo ()*RegionSegment {return _caa .RegionSegment };func (_bgaab *TextRegion )decodeRI ()(int64 ,error ){if !_bgaab .UseRefinement {return 0,nil ;
};if _bgaab .IsHuffmanEncoded {_eaece ,_gagga :=_bgaab ._fdgb .ReadBit ();return int64 (_eaece ),_gagga ;};_fddc ,_dccf :=_bgaab ._febe .DecodeInt (_bgaab ._edab );return int64 (_fddc ),_dccf ;};func (_deeg *RegionSegment )Encode (w _ba .BinaryWriter )(_ggbd int ,_ecdg error ){const _fbdf ="R\u0065g\u0069\u006f\u006e\u0053\u0065\u0067\u006d\u0065n\u0074\u002e\u0045\u006eco\u0064\u0065";
_adff :=make ([]byte ,4);_d .BigEndian .PutUint32 (_adff ,_deeg .BitmapWidth );_ggbd ,_ecdg =w .Write (_adff );if _ecdg !=nil {return 0,_ae .Wrap (_ecdg ,_fbdf ,"\u0057\u0069\u0064t\u0068");};_d .BigEndian .PutUint32 (_adff ,_deeg .BitmapHeight );var _dgea int ;
_dgea ,_ecdg =w .Write (_adff );if _ecdg !=nil {return 0,_ae .Wrap (_ecdg ,_fbdf ,"\u0048\u0065\u0069\u0067\u0068\u0074");};_ggbd +=_dgea ;_d .BigEndian .PutUint32 (_adff ,_deeg .XLocation );_dgea ,_ecdg =w .Write (_adff );if _ecdg !=nil {return 0,_ae .Wrap (_ecdg ,_fbdf ,"\u0058L\u006f\u0063\u0061\u0074\u0069\u006fn");
};_ggbd +=_dgea ;_d .BigEndian .PutUint32 (_adff ,_deeg .YLocation );_dgea ,_ecdg =w .Write (_adff );if _ecdg !=nil {return 0,_ae .Wrap (_ecdg ,_fbdf ,"\u0059L\u006f\u0063\u0061\u0074\u0069\u006fn");};_ggbd +=_dgea ;if _ecdg =w .WriteByte (byte (_deeg .CombinaionOperator )&0x07);
_ecdg !=nil {return 0,_ae .Wrap (_ecdg ,_fbdf ,"c\u006fm\u0062\u0069\u006e\u0061\u0074\u0069\u006f\u006e \u006f\u0070\u0065\u0072at\u006f\u0072");};_ggbd ++;return _ggbd ,nil ;};type RegionSegment struct{_gdabf *_ba .Reader ;BitmapWidth uint32 ;BitmapHeight uint32 ;
XLocation uint32 ;YLocation uint32 ;CombinaionOperator _ff .CombinationOperator ;};func (_bgdd *PatternDictionary )parseHeader ()error {_eaf .Log .Trace ("\u005b\u0050\u0041\u0054\u0054\u0045\u0052\u004e\u002d\u0044\u0049\u0043\u0054I\u004f\u004e\u0041\u0052\u0059\u005d[\u0070\u0061\u0072\u0073\u0065\u0048\u0065\u0061\u0064\u0065\u0072\u005d\u0020b\u0065\u0067\u0069\u006e");
defer func (){_eaf .Log .Trace ("\u005b\u0050\u0041T\u0054\u0045\u0052\u004e\u002d\u0044\u0049\u0043\u0054\u0049\u004f\u004e\u0041\u0052\u0059\u005d\u005b\u0070\u0061\u0072\u0073\u0065\u0048\u0065\u0061\u0064\u0065\u0072\u005d \u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064");
}();_ ,_dgdfc :=_bgdd ._eggc .ReadBits (5);if _dgdfc !=nil {return _dgdfc ;};if _dgdfc =_bgdd .readTemplate ();_dgdfc !=nil {return _dgdfc ;};if _dgdfc =_bgdd .readIsMMREncoded ();_dgdfc !=nil {return _dgdfc ;};if _dgdfc =_bgdd .readPatternWidthAndHeight ();
_dgdfc !=nil {return _dgdfc ;};if _dgdfc =_bgdd .readGrayMax ();_dgdfc !=nil {return _dgdfc ;};if _dgdfc =_bgdd .computeSegmentDataStructure ();_dgdfc !=nil {return _dgdfc ;};return _bgdd .checkInput ();};func (_eaa *GenericRefinementRegion )GetRegionInfo ()*RegionSegment {return _eaa .RegionInfo };
func (_ddac *GenericRegion )String ()string {_efb :=&_ef .Builder {};_efb .WriteString ("\u000a[\u0047E\u004e\u0045\u0052\u0049\u0043 \u0052\u0045G\u0049\u004f\u004e\u005d\u000a");_efb .WriteString (_ddac .RegionSegment .String ()+"\u000a");_bg .Fprintf (_efb ,"\u0009\u002d\u0020Us\u0065\u0045\u0078\u0074\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u0073\u003a\u0020\u0025\u0076\u000a",_ddac .UseExtTemplates );
_bg .Fprintf (_efb ,"\u0009\u002d \u0049\u0073\u0054P\u0047\u0044\u006f\u006e\u003a\u0020\u0025\u0076\u000a",_ddac .IsTPGDon );_bg .Fprintf (_efb ,"\u0009-\u0020G\u0042\u0054\u0065\u006d\u0070l\u0061\u0074e\u003a\u0020\u0025\u0064\u000a",_ddac .GBTemplate );
_bg .Fprintf (_efb ,"\t\u002d \u0049\u0073\u004d\u004d\u0052\u0045\u006e\u0063o\u0064\u0065\u0064\u003a %\u0076\u000a",_ddac .IsMMREncoded );_bg .Fprintf (_efb ,"\u0009\u002d\u0020\u0047\u0042\u0041\u0074\u0058\u003a\u0020\u0025\u0076\u000a",_ddac .GBAtX );
_bg .Fprintf (_efb ,"\u0009\u002d\u0020\u0047\u0042\u0041\u0074\u0059\u003a\u0020\u0025\u0076\u000a",_ddac .GBAtY );_bg .Fprintf (_efb ,"\t\u002d \u0047\u0042\u0041\u0074\u004f\u0076\u0065\u0072r\u0069\u0064\u0065\u003a %\u0076\u000a",_ddac .GBAtOverride );
return _efb .String ();};func (_dfgf *Header )subInputReader ()(*_ba .Reader ,error ){_gag :=int (_dfgf .SegmentDataLength );if _dfgf .SegmentDataLength ==_g .MaxInt32 {_gag =-1;};return _dfgf .Reader .NewPartialReader (int (_dfgf .SegmentDataStartOffset ),_gag ,false );
};func (_febca *PatternDictionary )readIsMMREncoded ()error {_agaa ,_bcbcd :=_febca ._eggc .ReadBit ();if _bcbcd !=nil {return _bcbcd ;};if _agaa !=0{_febca .IsMMREncoded =true ;};return nil ;};func (_cdad *TextRegion )String ()string {_ggbb :=&_ef .Builder {};
_ggbb .WriteString ("\u000a[\u0054E\u0058\u0054\u0020\u0052\u0045\u0047\u0049\u004f\u004e\u005d\u000a");_ggbb .WriteString (_cdad .RegionInfo .String ()+"\u000a");_ggbb .WriteString (_bg .Sprintf ("\u0009\u002d\u0020\u0053br\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065\u003a\u0020\u0025\u0076\u000a",_cdad .SbrTemplate ));
_ggbb .WriteString (_bg .Sprintf ("\u0009-\u0020S\u0062\u0044\u0073\u004f\u0066f\u0073\u0065t\u003a\u0020\u0025\u0076\u000a",_cdad .SbDsOffset ));_ggbb .WriteString (_bg .Sprintf ("\t\u002d \u0044\u0065\u0066\u0061\u0075\u006c\u0074\u0050i\u0078\u0065\u006c\u003a %\u0076\u000a",_cdad .DefaultPixel ));
_ggbb .WriteString (_bg .Sprintf ("\t\u002d\u0020\u0043\u006f\u006d\u0062i\u006e\u0061\u0074\u0069\u006f\u006e\u004f\u0070\u0065r\u0061\u0074\u006fr\u003a \u0025\u0076\u000a",_cdad .CombinationOperator ));_ggbb .WriteString (_bg .Sprintf ("\t\u002d \u0049\u0073\u0054\u0072\u0061\u006e\u0073\u0070o\u0073\u0065\u0064\u003a %\u0076\u000a",_cdad .IsTransposed ));
_ggbb .WriteString (_bg .Sprintf ("\u0009\u002d\u0020Re\u0066\u0065\u0072\u0065\u006e\u0063\u0065\u0043\u006f\u0072\u006e\u0065\u0072\u003a\u0020\u0025\u0076\u000a",_cdad .ReferenceCorner ));_ggbb .WriteString (_bg .Sprintf ("\t\u002d\u0020\u0055\u0073eR\u0065f\u0069\u006e\u0065\u006d\u0065n\u0074\u003a\u0020\u0025\u0076\u000a",_cdad .UseRefinement ));
_ggbb .WriteString (_bg .Sprintf ("\u0009-\u0020\u0049\u0073\u0048\u0075\u0066\u0066\u006d\u0061\u006e\u0045n\u0063\u006f\u0064\u0065\u0064\u003a\u0020\u0025\u0076\u000a",_cdad .IsHuffmanEncoded ));if _cdad .IsHuffmanEncoded {_ggbb .WriteString (_bg .Sprintf ("\u0009\u002d\u0020\u0053bH\u0075\u0066\u0066\u0052\u0053\u0069\u007a\u0065\u003a\u0020\u0025\u0076\u000a",_cdad .SbHuffRSize ));
_ggbb .WriteString (_bg .Sprintf ("\u0009\u002d\u0020\u0053\u0062\u0048\u0075\u0066\u0066\u0052\u0044\u0059:\u0020\u0025\u0076\u000a",_cdad .SbHuffRDY ));_ggbb .WriteString (_bg .Sprintf ("\u0009\u002d\u0020\u0053\u0062\u0048\u0075\u0066\u0066\u0052\u0044\u0058:\u0020\u0025\u0076\u000a",_cdad .SbHuffRDX ));
_ggbb .WriteString (_bg .Sprintf ("\u0009\u002d\u0020\u0053bH\u0075\u0066\u0066\u0052\u0044\u0048\u0065\u0069\u0067\u0068\u0074\u003a\u0020\u0025v\u000a",_cdad .SbHuffRDHeight ));_ggbb .WriteString (_bg .Sprintf ("\t\u002d\u0020\u0053\u0062Hu\u0066f\u0052\u0044\u0057\u0069\u0064t\u0068\u003a\u0020\u0025\u0076\u000a",_cdad .SbHuffRDWidth ));
_ggbb .WriteString (_bg .Sprintf ("\u0009\u002d \u0053\u0062\u0048u\u0066\u0066\u0044\u0054\u003a\u0020\u0025\u0076\u000a",_cdad .SbHuffDT ));_ggbb .WriteString (_bg .Sprintf ("\u0009\u002d \u0053\u0062\u0048u\u0066\u0066\u0044\u0053\u003a\u0020\u0025\u0076\u000a",_cdad .SbHuffDS ));
_ggbb .WriteString (_bg .Sprintf ("\u0009\u002d \u0053\u0062\u0048u\u0066\u0066\u0046\u0053\u003a\u0020\u0025\u0076\u000a",_cdad .SbHuffFS ));};_ggbb .WriteString (_bg .Sprintf ("\u0009\u002d\u0020\u0053\u0062\u0072\u0041\u0054\u0058:\u0020\u0025\u0076\u000a",_cdad .SbrATX ));
_ggbb .WriteString (_bg .Sprintf ("\u0009\u002d\u0020\u0053\u0062\u0072\u0041\u0054\u0059:\u0020\u0025\u0076\u000a",_cdad .SbrATY ));_ggbb .WriteString (_bg .Sprintf ("\u0009\u002d\u0020N\u0075\u006d\u0062\u0065r\u004f\u0066\u0053\u0079\u006d\u0062\u006fl\u0049\u006e\u0073\u0074\u0061\u006e\u0063\u0065\u0073\u003a\u0020\u0025\u0076\u000a",_cdad .NumberOfSymbolInstances ));
_ggbb .WriteString (_bg .Sprintf ("\u0009\u002d\u0020\u0053\u0062\u0072\u0041\u0054\u0058:\u0020\u0025\u0076\u000a",_cdad .SbrATX ));return _ggbb .String ();};func (_aaec *TextRegion )decodeStripT ()(_fcaf int64 ,_dcabg error ){if _aaec .IsHuffmanEncoded {if _aaec .SbHuffDT ==3{if _aaec ._aaag ==nil {var _feba int ;
if _aaec .SbHuffFS ==3{_feba ++;};if _aaec .SbHuffDS ==3{_feba ++;};_aaec ._aaag ,_dcabg =_aaec .getUserTable (_feba );if _dcabg !=nil {return 0,_dcabg ;};};_fcaf ,_dcabg =_aaec ._aaag .Decode (_aaec ._fdgb );if _dcabg !=nil {return 0,_dcabg ;};}else {var _adcff _cg .Tabler ;
_adcff ,_dcabg =_cg .GetStandardTable (11+int (_aaec .SbHuffDT ));if _dcabg !=nil {return 0,_dcabg ;};_fcaf ,_dcabg =_adcff .Decode (_aaec ._fdgb );if _dcabg !=nil {return 0,_dcabg ;};};}else {var _bgcb int32 ;_bgcb ,_dcabg =_aaec ._febe .DecodeInt (_aaec ._gbbg );
if _dcabg !=nil {return 0,_dcabg ;};_fcaf =int64 (_bgcb );};_fcaf *=int64 (-_aaec .SbStrips );return _fcaf ,nil ;};func (_edee *SymbolDictionary )setRetainedCodingContexts (_aced *SymbolDictionary ){_edee ._fcae =_aced ._fcae ;_edee .IsHuffmanEncoded =_aced .IsHuffmanEncoded ;
_edee .UseRefinementAggregation =_aced .UseRefinementAggregation ;_edee .SdTemplate =_aced .SdTemplate ;_edee .SdrTemplate =_aced .SdrTemplate ;_edee .SdATX =_aced .SdATX ;_edee .SdATY =_aced .SdATY ;_edee .SdrATX =_aced .SdrATX ;_edee .SdrATY =_aced .SdrATY ;
_edee ._agcgg =_aced ._agcgg ;};func (_bdee *SymbolDictionary )getSbSymCodeLen ()int8 {_baee :=int8 (_g .Ceil (_g .Log (float64 (_bdee ._efaf +_bdee .NumberOfNewSymbols ))/_g .Log (2)));if _bdee .IsHuffmanEncoded &&_baee < 1{return 1;};return _baee ;};
func (_ffbag *TextRegion )encodeFlags (_aaad _ba .BinaryWriter )(_daec int ,_bgdeg error ){const _eadd ="e\u006e\u0063\u006f\u0064\u0065\u0046\u006c\u0061\u0067\u0073";if _bgdeg =_aaad .WriteBit (int (_ffbag .SbrTemplate ));_bgdeg !=nil {return _daec ,_ae .Wrap (_bgdeg ,_eadd ,"s\u0062\u0072\u0054\u0065\u006d\u0070\u006c\u0061\u0074\u0065");
};if _ ,_bgdeg =_aaad .WriteBits (uint64 (_ffbag .SbDsOffset ),5);_bgdeg !=nil {return _daec ,_ae .Wrap (_bgdeg ,_eadd ,"\u0073\u0062\u0044\u0073\u004f\u0066\u0066\u0073\u0065\u0074");};if _bgdeg =_aaad .WriteBit (int (_ffbag .DefaultPixel ));_bgdeg !=nil {return _daec ,_ae .Wrap (_bgdeg ,_eadd ,"\u0044\u0065\u0066a\u0075\u006c\u0074\u0050\u0069\u0078\u0065\u006c");
};if _ ,_bgdeg =_aaad .WriteBits (uint64 (_ffbag .CombinationOperator ),2);_bgdeg !=nil {return _daec ,_ae .Wrap (_bgdeg ,_eadd ,"\u0043\u006f\u006d\u0062in\u0061\u0074\u0069\u006f\u006e\u004f\u0070\u0065\u0072\u0061\u0074\u006f\u0072");};if _bgdeg =_aaad .WriteBit (int (_ffbag .IsTransposed ));
_bgdeg !=nil {return _daec ,_ae .Wrap (_bgdeg ,_eadd ,"\u0069\u0073\u0020\u0074\u0072\u0061\u006e\u0073\u0070\u006f\u0073\u0065\u0064");};if _ ,_bgdeg =_aaad .WriteBits (uint64 (_ffbag .ReferenceCorner ),2);_bgdeg !=nil {return _daec ,_ae .Wrap (_bgdeg ,_eadd ,"\u0072\u0065f\u0065\u0072\u0065n\u0063\u0065\u0020\u0063\u006f\u0072\u006e\u0065\u0072");
};if _ ,_bgdeg =_aaad .WriteBits (uint64 (_ffbag .LogSBStrips ),2);_bgdeg !=nil {return _daec ,_ae .Wrap (_bgdeg ,_eadd ,"L\u006f\u0067\u0053\u0042\u0053\u0074\u0072\u0069\u0070\u0073");};var _dfeeb int ;if _ffbag .UseRefinement {_dfeeb =1;};if _bgdeg =_aaad .WriteBit (_dfeeb );
_bgdeg !=nil {return _daec ,_ae .Wrap (_bgdeg ,_eadd ,"\u0075\u0073\u0065\u0020\u0072\u0065\u0066\u0069\u006ee\u006d\u0065\u006e\u0074");};_dfeeb =0;if _ffbag .IsHuffmanEncoded {_dfeeb =1;};if _bgdeg =_aaad .WriteBit (_dfeeb );_bgdeg !=nil {return _daec ,_ae .Wrap (_bgdeg ,_eadd ,"u\u0073\u0065\u0020\u0068\u0075\u0066\u0066\u006d\u0061\u006e");
};_daec =2;return _daec ,nil ;};func (_gbda *SymbolDictionary )readNumberOfNewSymbols ()error {_ddef ,_aaaed :=_gbda ._dffd .ReadBits (32);if _aaaed !=nil {return _aaaed ;};_gbda .NumberOfNewSymbols =uint32 (_ddef &_g .MaxUint32 );return nil ;};func (_egg *Header )writeReferredToCount (_abf _ba .BinaryWriter )(_abagb int ,_bdfb error ){const _dgb ="w\u0072i\u0074\u0065\u0052\u0065\u0066\u0065\u0072\u0072e\u0064\u0054\u006f\u0043ou\u006e\u0074";
_egg .RTSNumbers =make ([]int ,len (_egg .RTSegments ));for _gbc ,_bdcga :=range _egg .RTSegments {_egg .RTSNumbers [_gbc ]=int (_bdcga .SegmentNumber );};if len (_egg .RTSNumbers )<=4{var _eaec byte ;if len (_egg .RetainBits )>=1{_eaec =_egg .RetainBits [0];
};_eaec |=byte (len (_egg .RTSNumbers ))<<5;if _bdfb =_abf .WriteByte (_eaec );_bdfb !=nil {return 0,_ae .Wrap (_bdfb ,_dgb ,"\u0073\u0068\u006fr\u0074\u0020\u0066\u006f\u0072\u006d\u0061\u0074");};return 1,nil ;};_aecd :=uint32 (len (_egg .RTSNumbers ));
_cccd :=make ([]byte ,4+_fb .Ceil (len (_egg .RTSNumbers )+1,8));_aecd |=0x7<<29;_d .BigEndian .PutUint32 (_cccd ,_aecd );copy (_cccd [1:],_egg .RetainBits );_abagb ,_bdfb =_abf .Write (_cccd );if _bdfb !=nil {return 0,_ae .Wrap (_bdfb ,_dgb ,"l\u006f\u006e\u0067\u0020\u0066\u006f\u0072\u006d\u0061\u0074");
};return _abagb ,nil ;};func (_gdeec *TextRegion )decodeIb (_egedd ,_aece int64 )(*_ff .Bitmap ,error ){const _adcbg ="\u0064\u0065\u0063\u006f\u0064\u0065\u0049\u0062";var (_bffb error ;_accf *_ff .Bitmap ;);if _egedd ==0{if int (_aece )> len (_gdeec .Symbols )-1{return nil ,_ae .Error (_adcbg ,"\u0064\u0065\u0063\u006f\u0064\u0069\u006e\u0067\u0020\u0049\u0042\u0020\u0062\u0069\u0074\u006d\u0061\u0070\u002e\u0020\u0069\u006e\u0064\u0065x\u0020\u006f\u0075\u0074\u0020o\u0066\u0020r\u0061\u006e\u0067\u0065");
};return _gdeec .Symbols [int (_aece )],nil ;};var _bfeff ,_gcac ,_ggdfe ,_febb int64 ;_bfeff ,_bffb =_gdeec .decodeRdw ();if _bffb !=nil {return nil ,_ae .Wrap (_bffb ,_adcbg ,"");};_gcac ,_bffb =_gdeec .decodeRdh ();if _bffb !=nil {return nil ,_ae .Wrap (_bffb ,_adcbg ,"");
};_ggdfe ,_bffb =_gdeec .decodeRdx ();if _bffb !=nil {return nil ,_ae .Wrap (_bffb ,_adcbg ,"");};_febb ,_bffb =_gdeec .decodeRdy ();if _bffb !=nil {return nil ,_ae .Wrap (_bffb ,_adcbg ,"");};if _gdeec .IsHuffmanEncoded {if _ ,_bffb =_gdeec .decodeSymInRefSize ();
_bffb !=nil {return nil ,_ae .Wrap (_bffb ,_adcbg ,"");};_gdeec ._fdgb .Align ();};_eaaa :=_gdeec .Symbols [_aece ];_gebe :=uint32 (_eaaa .Width );_eecec :=uint32 (_eaaa .Height );_cdgb :=int32 (uint32 (_bfeff )>>1)+int32 (_ggdfe );_cfgef :=int32 (uint32 (_gcac )>>1)+int32 (_febb );
if _gdeec ._dbgfe ==nil {_gdeec ._dbgfe =_ge (_gdeec ._fdgb ,nil );};_gdeec ._dbgfe .setParameters (_gdeec ._edgc ,_gdeec ._febe ,_gdeec .SbrTemplate ,_gebe +uint32 (_bfeff ),_eecec +uint32 (_gcac ),_eaaa ,_cdgb ,_cfgef ,false ,_gdeec .SbrATX ,_gdeec .SbrATY );
_accf ,_bffb =_gdeec ._dbgfe .GetRegionBitmap ();if _bffb !=nil {return nil ,_ae .Wrap (_bffb ,_adcbg ,"\u0067\u0072\u0066");};if _gdeec .IsHuffmanEncoded {_gdeec ._fdgb .Align ();};return _accf ,nil ;};func (_efdbe *TextRegion )setParameters (_deagf *_ea .Decoder ,_eabbc ,_gcfdf bool ,_gaeb ,_fcbb uint32 ,_efgg uint32 ,_accd int8 ,_fgbd uint32 ,_daff int8 ,_geaf _ff .CombinationOperator ,_dcabge int8 ,_dfgb int16 ,_ffae ,_edgb ,_dcdbd ,_cfcf ,_egeca ,_gbca ,_cbbg ,_ggfca ,_gbfb ,_cagga int8 ,_gbe ,_fdca []int8 ,_adea []*_ff .Bitmap ,_fcaa int8 ){_efdbe ._febe =_deagf ;
_efdbe .IsHuffmanEncoded =_eabbc ;_efdbe .UseRefinement =_gcfdf ;_efdbe .RegionInfo .BitmapWidth =_gaeb ;_efdbe .RegionInfo .BitmapHeight =_fcbb ;_efdbe .NumberOfSymbolInstances =_efgg ;_efdbe .SbStrips =_accd ;_efdbe .NumberOfSymbols =_fgbd ;_efdbe .DefaultPixel =_daff ;
_efdbe .CombinationOperator =_geaf ;_efdbe .IsTransposed =_dcabge ;_efdbe .ReferenceCorner =_dfgb ;_efdbe .SbDsOffset =_ffae ;_efdbe .SbHuffFS =_edgb ;_efdbe .SbHuffDS =_dcdbd ;_efdbe .SbHuffDT =_cfcf ;_efdbe .SbHuffRDWidth =_egeca ;_efdbe .SbHuffRDHeight =_gbca ;
_efdbe .SbHuffRSize =_gbfb ;_efdbe .SbHuffRDX =_cbbg ;_efdbe .SbHuffRDY =_ggfca ;_efdbe .SbrTemplate =_cagga ;_efdbe .SbrATX =_gbe ;_efdbe .SbrATY =_fdca ;_efdbe .Symbols =_adea ;_efdbe ._gafgc =_fcaa ;};func (_ddge *GenericRegion )setParametersWithAt (_ddb bool ,_bbeff byte ,_gcee ,_cae bool ,_eafd ,_ccb []int8 ,_ddbg ,_gfbg uint32 ,_fdg *_ea .DecoderStats ,_aae *_ea .Decoder ){_ddge .IsMMREncoded =_ddb ;
_ddge .GBTemplate =_bbeff ;_ddge .IsTPGDon =_gcee ;_ddge .GBAtX =_eafd ;_ddge .GBAtY =_ccb ;_ddge .RegionSegment .BitmapHeight =_gfbg ;_ddge .RegionSegment .BitmapWidth =_ddbg ;_ddge ._abcf =nil ;_ddge .Bitmap =nil ;if _fdg !=nil {_ddge ._agbd =_fdg ;};
if _aae !=nil {_ddge ._cgab =_aae ;};_eaf .Log .Trace ("\u005b\u0047\u0045\u004e\u0045\u0052\u0049\u0043\u002d\u0052\u0045\u0047\u0049O\u004e\u005d\u0020\u0073\u0065\u0074P\u0061\u0072\u0061\u006d\u0065\u0074\u0065\u0072\u0073\u0020\u0053\u0044\u0041t\u003a\u0020\u0025\u0073",_ddge );
};func (_ebfa *SymbolDictionary )setInSyms ()error {if _ebfa .Header .RTSegments !=nil {return _ebfa .retrieveImportSymbols ();};_ebfa ._bgf =make ([]*_ff .Bitmap ,0);return nil ;};func (_agbc *PageInformationSegment )encodeFlags (_begf _ba .BinaryWriter )(_dggf error ){const _dccdb ="e\u006e\u0063\u006f\u0064\u0065\u0046\u006c\u0061\u0067\u0073";
if _dggf =_begf .SkipBits (1);_dggf !=nil {return _ae .Wrap (_dggf ,_dccdb ,"\u0072\u0065\u0073e\u0072\u0076\u0065\u0064\u0020\u0062\u0069\u0074");};var _bac int ;if _agbc .CombinationOperatorOverrideAllowed (){_bac =1;};if _dggf =_begf .WriteBit (_bac );
_dggf !=nil {return _ae .Wrap (_dggf ,_dccdb ,"\u0063\u006f\u006db\u0069\u006e\u0061\u0074i\u006f\u006e\u0020\u006f\u0070\u0065\u0072a\u0074\u006f\u0072\u0020\u006f\u0076\u0065\u0072\u0072\u0069\u0064\u0064\u0065\u006e");};_bac =0;if _agbc ._degb {_bac =1;
};if _dggf =_begf .WriteBit (_bac );_dggf !=nil {return _ae .Wrap (_dggf ,_dccdb ,"\u0072e\u0071\u0075\u0069\u0072e\u0073\u0020\u0061\u0075\u0078i\u006ci\u0061r\u0079\u0020\u0062\u0075\u0066\u0066\u0065r");};if _dggf =_begf .WriteBit ((int (_agbc ._ecgc )>>1)&0x01);
_dggf !=nil {return _ae .Wrap (_dggf ,_dccdb ,"\u0063\u006f\u006d\u0062\u0069\u006e\u0061\u0074\u0069\u006fn\u0020\u006f\u0070\u0065\u0072\u0061\u0074o\u0072\u0020\u0066\u0069\u0072\u0073\u0074\u0020\u0062\u0069\u0074");};if _dggf =_begf .WriteBit (int (_agbc ._ecgc )&0x01);
_dggf !=nil {return _ae .Wrap (_dggf ,_dccdb ,"\u0063\u006f\u006db\u0069\u006e\u0061\u0074i\u006f\u006e\u0020\u006f\u0070\u0065\u0072a\u0074\u006f\u0072\u0020\u0073\u0065\u0063\u006f\u006e\u0064\u0020\u0062\u0069\u0074");};_bac =int (_agbc .DefaultPixelValue );
if _dggf =_begf .WriteBit (_bac );_dggf !=nil {return _ae .Wrap (_dggf ,_dccdb ,"\u0064e\u0066\u0061\u0075\u006c\u0074\u0020\u0070\u0061\u0067\u0065\u0020p\u0069\u0078\u0065\u006c\u0020\u0076\u0061\u006c\u0075\u0065");};_bac =0;if _agbc ._caaf {_bac =1;
};if _dggf =_begf .WriteBit (_bac );_dggf !=nil {return _ae .Wrap (_dggf ,_dccdb ,"\u0063\u006f\u006e\u0074ai\u006e\u0073\u0020\u0072\u0065\u0066\u0069\u006e\u0065\u006d\u0065\u006e\u0074");};_bac =0;if _agbc .IsLossless {_bac =1;};if _dggf =_begf .WriteBit (_bac );
_dggf !=nil {return _ae .Wrap (_dggf ,_dccdb ,"p\u0061\u0067\u0065\u0020\u0069\u0073 \u0065\u0076\u0065\u006e\u0074\u0075\u0061\u006c\u006cy\u0020\u006c\u006fs\u0073l\u0065\u0073\u0073");};return nil ;};func (_edcc *TextRegion )decodeRdh ()(int64 ,error ){const _ebaee ="\u0064e\u0063\u006f\u0064\u0065\u0052\u0064h";
if _edcc .IsHuffmanEncoded {if _edcc .SbHuffRDHeight ==3{if _edcc ._cdef ==nil {var (_acdce int ;_cbafd error ;);if _edcc .SbHuffFS ==3{_acdce ++;};if _edcc .SbHuffDS ==3{_acdce ++;};if _edcc .SbHuffDT ==3{_acdce ++;};if _edcc .SbHuffRDWidth ==3{_acdce ++;
};_edcc ._cdef ,_cbafd =_edcc .getUserTable (_acdce );if _cbafd !=nil {return 0,_ae .Wrap (_cbafd ,_ebaee ,"");};};return _edcc ._cdef .Decode (_edcc ._fdgb );};_bcdb ,_cffef :=_cg .GetStandardTable (14+int (_edcc .SbHuffRDHeight ));if _cffef !=nil {return 0,_ae .Wrap (_cffef ,_ebaee ,"");
};return _bcdb .Decode (_edcc ._fdgb );};_aabcb ,_gggg :=_edcc ._febe .DecodeInt (_edcc ._caea );if _gggg !=nil {return 0,_ae .Wrap (_gggg ,_ebaee ,"");};return int64 (_aabcb ),nil ;};func (_dfaef *SymbolDictionary )huffDecodeBmSize ()(int64 ,error ){if _dfaef ._efg ==nil {var (_eeef int ;
_cdbb error ;);if _dfaef .SdHuffDecodeHeightSelection ==3{_eeef ++;};if _dfaef .SdHuffDecodeWidthSelection ==3{_eeef ++;};_dfaef ._efg ,_cdbb =_dfaef .getUserTable (_eeef );if _cdbb !=nil {return 0,_cdbb ;};};return _dfaef ._efg .Decode (_dfaef ._dffd );
};type GenericRegion struct{_bca *_ba .Reader ;DataHeaderOffset int64 ;DataHeaderLength int64 ;DataOffset int64 ;DataLength int64 ;RegionSegment *RegionSegment ;UseExtTemplates bool ;IsTPGDon bool ;GBTemplate byte ;IsMMREncoded bool ;UseMMR bool ;GBAtX []int8 ;
GBAtY []int8 ;GBAtOverride []bool ;_abc bool ;Bitmap *_ff .Bitmap ;_cgab *_ea .Decoder ;_agbd *_ea .DecoderStats ;_abcf *_ce .Decoder ;};func (_gcga *PageInformationSegment )Size ()int {return 19};func (_bdb *GenericRegion )getPixel (_facd ,_dfae int )int8 {if _facd < 0||_facd >=_bdb .Bitmap .Width {return 0;
};if _dfae < 0||_dfae >=_bdb .Bitmap .Height {return 0;};if _bdb .Bitmap .GetPixel (_facd ,_dfae ){return 1;};return 0;};func (_ebg *GenericRegion )writeGBAtPixels (_bfac _ba .BinaryWriter )(_dge int ,_aeea error ){const _becb ="\u0077r\u0069t\u0065\u0047\u0042\u0041\u0074\u0050\u0069\u0078\u0065\u006c\u0073";
if _ebg .UseMMR {return 0,nil ;};_fbg :=1;if _ebg .GBTemplate ==0{_fbg =4;}else if _ebg .UseExtTemplates {_fbg =12;};if len (_ebg .GBAtX )!=_fbg {return 0,_ae .Errorf (_becb ,"\u0067\u0062\u0020\u0061\u0074\u0020\u0070\u0061\u0069\u0072\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020d\u006f\u0065\u0073\u006e\u0027\u0074\u0020m\u0061\u0074\u0063\u0068\u0020\u0074\u006f\u0020\u0047\u0042\u0041t\u0058\u0020\u0073\u006c\u0069\u0063\u0065\u0020\u006c\u0065\u006e");
};if len (_ebg .GBAtY )!=_fbg {return 0,_ae .Errorf (_becb ,"\u0067\u0062\u0020\u0061\u0074\u0020\u0070\u0061\u0069\u0072\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020d\u006f\u0065\u0073\u006e\u0027\u0074\u0020m\u0061\u0074\u0063\u0068\u0020\u0074\u006f\u0020\u0047\u0042\u0041t\u0059\u0020\u0073\u006c\u0069\u0063\u0065\u0020\u006c\u0065\u006e");
};for _deac :=0;_deac < _fbg ;_deac ++{if _aeea =_bfac .WriteByte (byte (_ebg .GBAtX [_deac ]));_aeea !=nil {return _dge ,_ae .Wrap (_aeea ,_becb ,"w\u0072\u0069\u0074\u0065\u0020\u0047\u0042\u0041\u0074\u0058");};_dge ++;if _aeea =_bfac .WriteByte (byte (_ebg .GBAtY [_deac ]));
_aeea !=nil {return _dge ,_ae .Wrap (_aeea ,_becb ,"w\u0072\u0069\u0074\u0065\u0020\u0047\u0042\u0041\u0074\u0059");};_dge ++;};return _dge ,nil ;};func (_ead *GenericRefinementRegion )GetRegionBitmap ()(*_ff .Bitmap ,error ){var _fd error ;_eaf .Log .Trace ("\u005b\u0047E\u004e\u0045\u0052\u0049\u0043\u002d\u0052\u0045\u0046\u002d\u0052\u0045\u0047\u0049\u004f\u004e\u005d\u0020\u0047\u0065\u0074\u0052\u0065\u0067\u0069\u006f\u006e\u0042\u0069\u0074\u006d\u0061\u0070\u0020\u0062\u0065\u0067\u0069\u006e\u0073\u002e\u002e\u002e");
defer func (){if _fd !=nil {_eaf .Log .Trace ("[\u0047\u0045\u004e\u0045\u0052\u0049\u0043\u002d\u0052E\u0046\u002d\u0052\u0045\u0047\u0049\u004fN]\u0020\u0047\u0065\u0074R\u0065\u0067\u0069\u006f\u006e\u0042\u0069\u0074\u006dap\u0020\u0066a\u0069\u006c\u0065\u0064\u002e\u0020\u0025\u0076",_fd );
}else {_eaf .Log .Trace ("\u005b\u0047E\u004e\u0045\u0052\u0049\u0043\u002d\u0052\u0045\u0046\u002d\u0052\u0045\u0047\u0049\u004f\u004e\u005d\u0020\u0047\u0065\u0074\u0052\u0065\u0067\u0069\u006f\u006e\u0042\u0069\u0074\u006d\u0061\u0070\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
};}();if _ead .RegionBitmap !=nil {return _ead .RegionBitmap ,nil ;};_gfd :=0;if _ead .ReferenceBitmap ==nil {_ead .ReferenceBitmap ,_fd =_ead .getGrReference ();if _fd !=nil {return nil ,_fd ;};};if _ead ._da ==nil {_ead ._da ,_fd =_ea .New (_ead ._fbe );
if _fd !=nil {return nil ,_fd ;};};if _ead ._dcg ==nil {_ead ._dcg =_ea .NewStats (8192,1);};_ead .RegionBitmap =_ff .New (int (_ead .RegionInfo .BitmapWidth ),int (_ead .RegionInfo .BitmapHeight ));if _ead .TemplateID ==0{if _fd =_ead .updateOverride ();
_fd !=nil {return nil ,_fd ;};};_fde :=(_ead .RegionBitmap .Width +7)&-8;var _fg int ;if _ead .IsTPGROn {_fg =int (-_ead .ReferenceDY )*_ead .ReferenceBitmap .RowStride ;};_bfa :=_fg +1;for _bag :=0;_bag < _ead .RegionBitmap .Height ;_bag ++{if _ead .IsTPGROn {_cb ,_dd :=_ead .decodeSLTP ();
if _dd !=nil {return nil ,_dd ;};_gfd ^=_cb ;};if _gfd ==0{_fd =_ead .decodeOptimized (_bag ,_ead .RegionBitmap .Width ,_ead .RegionBitmap .RowStride ,_ead .ReferenceBitmap .RowStride ,_fde ,_fg ,_bfa );if _fd !=nil {return nil ,_fd ;};}else {_fd =_ead .decodeTypicalPredictedLine (_bag ,_ead .RegionBitmap .Width ,_ead .RegionBitmap .RowStride ,_ead .ReferenceBitmap .RowStride ,_fde ,_fg );
if _fd !=nil {return nil ,_fd ;};};};return _ead .RegionBitmap ,nil ;};func (_gba *Header )readSegmentNumber (_afae *_ba .Reader )error {const _gdab ="\u0072\u0065\u0061\u0064\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u004eu\u006d\u0062\u0065\u0072";_gcaf :=make ([]byte ,4);
_ ,_cgdg :=_afae .Read (_gcaf );if _cgdg !=nil {return _ae .Wrap (_cgdg ,_gdab ,"");};_gba .SegmentNumber =_d .BigEndian .Uint32 (_gcaf );return nil ;};func (_ceb *template1 )setIndex (_dccad *_ea .DecoderStats ){_dccad .SetIndex (0x080)};func (_bcgd *SymbolDictionary )encodeATFlags (_bded _ba .BinaryWriter )(_eabb int ,_bfcg error ){const _eafg ="\u0065\u006e\u0063\u006f\u0064\u0065\u0041\u0054\u0046\u006c\u0061\u0067\u0073";
if _bcgd .IsHuffmanEncoded ||_bcgd .SdTemplate !=0{return 0,nil ;};_badg :=4;if _bcgd .SdTemplate !=0{_badg =1;};for _bgge :=0;_bgge < _badg ;_bgge ++{if _bfcg =_bded .WriteByte (byte (_bcgd .SdATX [_bgge ]));_bfcg !=nil {return _eabb ,_ae .Wrapf (_bfcg ,_eafg ,"\u0053d\u0041\u0054\u0058\u005b\u0025\u0064]",_bgge );
};_eabb ++;if _bfcg =_bded .WriteByte (byte (_bcgd .SdATY [_bgge ]));_bfcg !=nil {return _eabb ,_ae .Wrapf (_bfcg ,_eafg ,"\u0053d\u0041\u0054\u0059\u005b\u0025\u0064]",_bgge );};_eabb ++;};return _eabb ,nil ;};func (_egeg *SymbolDictionary )setCodingStatistics ()error {if _egeg ._gbfa ==nil {_egeg ._gbfa =_ea .NewStats (512,1);
};if _egeg ._eda ==nil {_egeg ._eda =_ea .NewStats (512,1);};if _egeg ._bggg ==nil {_egeg ._bggg =_ea .NewStats (512,1);};if _egeg ._eacc ==nil {_egeg ._eacc =_ea .NewStats (512,1);};if _egeg ._fccc ==nil {_egeg ._fccc =_ea .NewStats (512,1);};if _egeg .UseRefinementAggregation &&_egeg ._ffbe ==nil {_egeg ._ffbe =_ea .NewStats (1<<uint (_egeg ._cea ),1);
_egeg ._bcec =_ea .NewStats (512,1);_egeg ._debc =_ea .NewStats (512,1);};if _egeg ._agcgg ==nil {_egeg ._agcgg =_ea .NewStats (65536,1);};if _egeg ._fcae ==nil {var _bgfa error ;_egeg ._fcae ,_bgfa =_ea .New (_egeg ._dffd );if _bgfa !=nil {return _bgfa ;
};};return nil ;};func (_gdfe *TextRegion )decodeRdw ()(int64 ,error ){const _afda ="\u0064e\u0063\u006f\u0064\u0065\u0052\u0064w";if _gdfe .IsHuffmanEncoded {if _gdfe .SbHuffRDWidth ==3{if _gdfe ._ddf ==nil {var (_afee int ;_fbdd error ;);if _gdfe .SbHuffFS ==3{_afee ++;
};if _gdfe .SbHuffDS ==3{_afee ++;};if _gdfe .SbHuffDT ==3{_afee ++;};_gdfe ._ddf ,_fbdd =_gdfe .getUserTable (_afee );if _fbdd !=nil {return 0,_ae .Wrap (_fbdd ,_afda ,"");};};return _gdfe ._ddf .Decode (_gdfe ._fdgb );};_gcdb ,_aaeg :=_cg .GetStandardTable (14+int (_gdfe .SbHuffRDWidth ));
if _aaeg !=nil {return 0,_ae .Wrap (_aaeg ,_afda ,"");};return _gcdb .Decode (_gdfe ._fdgb );};_ffdb ,_ffcde :=_gdfe ._febe .DecodeInt (_gdfe ._ecdf );if _ffcde !=nil {return 0,_ae .Wrap (_ffcde ,_afda ,"");};return int64 (_ffdb ),nil ;};func (_fgf *GenericRefinementRegion )decodeTemplate (_ab ,_dcca ,_fff ,_bbd ,_bgba ,_ac ,_fab ,_eae ,_fgd ,_cec int ,_fbb templater )(_fcd error ){var (_cgc ,_dga ,_cfb ,_abg ,_gfg int16 ;
_aed ,_fabe ,_dbc ,_ffc int ;_ege byte ;);if _fgd >=1&&(_fgd -1)< _fgf .ReferenceBitmap .Height {_ege ,_fcd =_fgf .ReferenceBitmap .GetByte (_cec -_bbd );if _fcd !=nil {return _fcd ;};_aed =int (_ege );};if _fgd >=0&&(_fgd )< _fgf .ReferenceBitmap .Height {_ege ,_fcd =_fgf .ReferenceBitmap .GetByte (_cec );
if _fcd !=nil {return _fcd ;};_fabe =int (_ege );};if _fgd >=-1&&(_fgd +1)< _fgf .ReferenceBitmap .Height {_ege ,_fcd =_fgf .ReferenceBitmap .GetByte (_cec +_bbd );if _fcd !=nil {return _fcd ;};_dbc =int (_ege );};_cec ++;if _ab >=1{_ege ,_fcd =_fgf .RegionBitmap .GetByte (_eae -_fff );
if _fcd !=nil {return _fcd ;};_ffc =int (_ege );};_eae ++;_eee :=_fgf .ReferenceDX %8;_eba :=6+_eee ;_efd :=_cec %_bbd ;if _eba >=0{if _eba < 8{_cgc =int16 (_aed >>uint (_eba ))&0x07;};if _eba < 8{_dga =int16 (_fabe >>uint (_eba ))&0x07;};if _eba < 8{_cfb =int16 (_dbc >>uint (_eba ))&0x07;
};if _eba ==6&&_efd > 1{if _fgd >=1&&(_fgd -1)< _fgf .ReferenceBitmap .Height {_ege ,_fcd =_fgf .ReferenceBitmap .GetByte (_cec -_bbd -2);if _fcd !=nil {return _fcd ;};_cgc |=int16 (_ege <<2)&0x04;};if _fgd >=0&&_fgd < _fgf .ReferenceBitmap .Height {_ege ,_fcd =_fgf .ReferenceBitmap .GetByte (_cec -2);
if _fcd !=nil {return _fcd ;};_dga |=int16 (_ege <<2)&0x04;};if _fgd >=-1&&_fgd +1< _fgf .ReferenceBitmap .Height {_ege ,_fcd =_fgf .ReferenceBitmap .GetByte (_cec +_bbd -2);if _fcd !=nil {return _fcd ;};_cfb |=int16 (_ege <<2)&0x04;};};if _eba ==0{_aed =0;
_fabe =0;_dbc =0;if _efd < _bbd -1{if _fgd >=1&&_fgd -1< _fgf .ReferenceBitmap .Height {_ege ,_fcd =_fgf .ReferenceBitmap .GetByte (_cec -_bbd );if _fcd !=nil {return _fcd ;};_aed =int (_ege );};if _fgd >=0&&_fgd < _fgf .ReferenceBitmap .Height {_ege ,_fcd =_fgf .ReferenceBitmap .GetByte (_cec );
if _fcd !=nil {return _fcd ;};_fabe =int (_ege );};if _fgd >=-1&&_fgd +1< _fgf .ReferenceBitmap .Height {_ege ,_fcd =_fgf .ReferenceBitmap .GetByte (_cec +_bbd );if _fcd !=nil {return _fcd ;};_dbc =int (_ege );};};_cec ++;};}else {_cgc =int16 (_aed <<1)&0x07;
_dga =int16 (_fabe <<1)&0x07;_cfb =int16 (_dbc <<1)&0x07;_aed =0;_fabe =0;_dbc =0;if _efd < _bbd -1{if _fgd >=1&&_fgd -1< _fgf .ReferenceBitmap .Height {_ege ,_fcd =_fgf .ReferenceBitmap .GetByte (_cec -_bbd );if _fcd !=nil {return _fcd ;};_aed =int (_ege );
};if _fgd >=0&&_fgd < _fgf .ReferenceBitmap .Height {_ege ,_fcd =_fgf .ReferenceBitmap .GetByte (_cec );if _fcd !=nil {return _fcd ;};_fabe =int (_ege );};if _fgd >=-1&&_fgd +1< _fgf .ReferenceBitmap .Height {_ege ,_fcd =_fgf .ReferenceBitmap .GetByte (_cec +_bbd );
if _fcd !=nil {return _fcd ;};_dbc =int (_ege );};_cec ++;};_cgc |=int16 ((_aed >>7)&0x07);_dga |=int16 ((_fabe >>7)&0x07);_cfb |=int16 ((_dbc >>7)&0x07);};_abg =int16 (_ffc >>6);_gfg =0;_eage :=(2-_eee )%8;_aed <<=uint (_eage );_fabe <<=uint (_eage );
_dbc <<=uint (_eage );_ffc <<=2;var _bfc int ;for _gcg :=0;_gcg < _dcca ;_gcg ++{_bfdg :=_gcg &0x07;_gge :=_fbb .form (_cgc ,_dga ,_cfb ,_abg ,_gfg );if _fgf ._ed {_ege ,_fcd =_fgf .RegionBitmap .GetByte (_fgf .RegionBitmap .GetByteIndex (_gcg ,_ab ));
if _fcd !=nil {return _fcd ;};_fgf ._dcg .SetIndex (int32 (_fgf .overrideAtTemplate0 (int (_gge ),_gcg ,_ab ,int (_ege ),_bfdg )));}else {_fgf ._dcg .SetIndex (int32 (_gge ));};_bfc ,_fcd =_fgf ._da .DecodeBit (_fgf ._dcg );if _fcd !=nil {return _fcd ;
};if _fcd =_fgf .RegionBitmap .SetPixel (_gcg ,_ab ,byte (_bfc ));_fcd !=nil {return _fcd ;};_cgc =((_cgc <<1)|0x01&int16 (_aed >>7))&0x07;_dga =((_dga <<1)|0x01&int16 (_fabe >>7))&0x07;_cfb =((_cfb <<1)|0x01&int16 (_dbc >>7))&0x07;_abg =((_abg <<1)|0x01&int16 (_ffc >>7))&0x07;
_gfg =int16 (_bfc );if (_gcg -int (_fgf .ReferenceDX ))%8==5{_aed =0;_fabe =0;_dbc =0;if ((_gcg -int (_fgf .ReferenceDX ))/8)+1< _fgf .ReferenceBitmap .RowStride {if _fgd >=1&&(_fgd -1)< _fgf .ReferenceBitmap .Height {_ege ,_fcd =_fgf .ReferenceBitmap .GetByte (_cec -_bbd );
if _fcd !=nil {return _fcd ;};_aed =int (_ege );};if _fgd >=0&&_fgd < _fgf .ReferenceBitmap .Height {_ege ,_fcd =_fgf .ReferenceBitmap .GetByte (_cec );if _fcd !=nil {return _fcd ;};_fabe =int (_ege );};if _fgd >=-1&&(_fgd +1)< _fgf .ReferenceBitmap .Height {_ege ,_fcd =_fgf .ReferenceBitmap .GetByte (_cec +_bbd );
if _fcd !=nil {return _fcd ;};_dbc =int (_ege );};};_cec ++;}else {_aed <<=1;_fabe <<=1;_dbc <<=1;};if _bfdg ==5&&_ab >=1{if ((_gcg >>3)+1)>=_fgf .RegionBitmap .RowStride {_ffc =0;}else {_ege ,_fcd =_fgf .RegionBitmap .GetByte (_eae -_fff );if _fcd !=nil {return _fcd ;
};_ffc =int (_ege );};_eae ++;}else {_ffc <<=1;};};return nil ;};func (_dgbb *SymbolDictionary )decodeHeightClassDeltaHeight ()(int64 ,error ){if _dgbb .IsHuffmanEncoded {return _dgbb .decodeHeightClassDeltaHeightWithHuffman ();};_eecff ,_gccb :=_dgbb ._fcae .DecodeInt (_dgbb ._eda );
if _gccb !=nil {return 0,_gccb ;};return int64 (_eecff ),nil ;};var (_ Regioner =&TextRegion {};_ Segmenter =&TextRegion {};);func (_dbecf *TextRegion )setCodingStatistics ()error {if _dbecf ._gbbg ==nil {_dbecf ._gbbg =_ea .NewStats (512,1);};if _dbecf ._ecfg ==nil {_dbecf ._ecfg =_ea .NewStats (512,1);
};if _dbecf ._fgege ==nil {_dbecf ._fgege =_ea .NewStats (512,1);};if _dbecf ._afabc ==nil {_dbecf ._afabc =_ea .NewStats (512,1);};if _dbecf ._edab ==nil {_dbecf ._edab =_ea .NewStats (512,1);};if _dbecf ._ecdf ==nil {_dbecf ._ecdf =_ea .NewStats (512,1);
};if _dbecf ._caea ==nil {_dbecf ._caea =_ea .NewStats (512,1);};if _dbecf ._dbaeb ==nil {_dbecf ._dbaeb =_ea .NewStats (1<<uint (_dbecf ._gafgc ),1);};if _dbecf ._fddb ==nil {_dbecf ._fddb =_ea .NewStats (512,1);};if _dbecf ._aegf ==nil {_dbecf ._aegf =_ea .NewStats (512,1);
};if _dbecf ._febe ==nil {var _decd error ;_dbecf ._febe ,_decd =_ea .New (_dbecf ._fdgb );if _decd !=nil {return _decd ;};};return nil ;};func (_fgae *SymbolDictionary )decodeRefinedSymbol (_eefgf ,_afga uint32 )error {var (_eggd int ;_facf ,_gbbe int32 ;
);if _fgae .IsHuffmanEncoded {_edcb ,_faac :=_fgae ._dffd .ReadBits (byte (_fgae ._cea ));if _faac !=nil {return _faac ;};_eggd =int (_edcb );_fgad ,_faac :=_cg .GetStandardTable (15);if _faac !=nil {return _faac ;};_fgdg ,_faac :=_fgad .Decode (_fgae ._dffd );
if _faac !=nil {return _faac ;};_facf =int32 (_fgdg );_fgdg ,_faac =_fgad .Decode (_fgae ._dffd );if _faac !=nil {return _faac ;};_gbbe =int32 (_fgdg );_fgad ,_faac =_cg .GetStandardTable (1);if _faac !=nil {return _faac ;};if _ ,_faac =_fgad .Decode (_fgae ._dffd );
_faac !=nil {return _faac ;};_fgae ._dffd .Align ();}else {_cgcb ,_bcecg :=_fgae ._fcae .DecodeIAID (uint64 (_fgae ._cea ),_fgae ._ffbe );if _bcecg !=nil {return _bcecg ;};_eggd =int (_cgcb );_facf ,_bcecg =_fgae ._fcae .DecodeInt (_fgae ._bcec );if _bcecg !=nil {return _bcecg ;
};_gbbe ,_bcecg =_fgae ._fcae .DecodeInt (_fgae ._debc );if _bcecg !=nil {return _bcecg ;};};if _edbf :=_fgae .setSymbolsArray ();_edbf !=nil {return _edbf ;};_dafe :=_fgae ._ddecc [_eggd ];if _aggb :=_fgae .decodeNewSymbols (_eefgf ,_afga ,_dafe ,_facf ,_gbbe );
_aggb !=nil {return _aggb ;};if _fgae .IsHuffmanEncoded {_fgae ._dffd .Align ();};return nil ;};func _ge (_bda *_ba .Reader ,_dcf *Header )*GenericRefinementRegion {return &GenericRefinementRegion {_fbe :_bda ,RegionInfo :NewRegionSegment (_bda ),_cga :_dcf ,_aab :&template0 {},_aabc :&template1 {}};
};func (_dgd *GenericRefinementRegion )overrideAtTemplate0 (_egea ,_ebfb ,_abgb ,_eagb ,_daa int )int {if _dgd ._bf [0]{_egea &=0xfff7;if _dgd .GrAtY [0]==0&&int (_dgd .GrAtX [0])>=-_daa {_egea |=(_eagb >>uint (7-(_daa +int (_dgd .GrAtX [0])))&0x1)<<3;
}else {_egea |=_dgd .getPixel (_dgd .RegionBitmap ,_ebfb +int (_dgd .GrAtX [0]),_abgb +int (_dgd .GrAtY [0]))<<3;};};if _dgd ._bf [1]{_egea &=0xefff;if _dgd .GrAtY [1]==0&&int (_dgd .GrAtX [1])>=-_daa {_egea |=(_eagb >>uint (7-(_daa +int (_dgd .GrAtX [1])))&0x1)<<12;
}else {_egea |=_dgd .getPixel (_dgd .ReferenceBitmap ,_ebfb +int (_dgd .GrAtX [1]),_abgb +int (_dgd .GrAtY [1]));};};return _egea ;};func (_eaag *PatternDictionary )Init (h *Header ,r *_ba .Reader )error {_eaag ._eggc =r ;return _eaag .parseHeader ();};
func (_bbbda *SymbolDictionary )decodeDifferenceWidth ()(int64 ,error ){if _bbbda .IsHuffmanEncoded {switch _bbbda .SdHuffDecodeWidthSelection {case 0:_fefd ,_aadc :=_cg .GetStandardTable (2);if _aadc !=nil {return 0,_aadc ;};return _fefd .Decode (_bbbda ._dffd );
case 1:_aaaa ,_aecf :=_cg .GetStandardTable (3);if _aecf !=nil {return 0,_aecf ;};return _aaaa .Decode (_bbbda ._dffd );case 3:if _bbbda ._fdbc ==nil {var _ggg int ;if _bbbda .SdHuffDecodeHeightSelection ==3{_ggg ++;};_gbba ,_fdeb :=_bbbda .getUserTable (_ggg );
if _fdeb !=nil {return 0,_fdeb ;};_bbbda ._fdbc =_gbba ;};return _bbbda ._fdbc .Decode (_bbbda ._dffd );};}else {_dgdd ,_ffed :=_bbbda ._fcae .DecodeInt (_bbbda ._bggg );if _ffed !=nil {return 0,_ffed ;};return int64 (_dgdd ),nil ;};return 0,nil ;};func (_fgff *PageInformationSegment )parseHeader ()(_bcbc error ){_eaf .Log .Trace ("\u005b\u0050\u0061\u0067\u0065I\u006e\u0066\u006f\u0072\u006d\u0061\u0074\u0069\u006f\u006e\u0053\u0065\u0067m\u0065\u006e\u0074\u005d\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0048\u0065\u0061\u0064\u0065\u0072\u002e\u002e\u002e");
defer func (){var _deab ="[\u0050\u0061\u0067\u0065\u0049\u006e\u0066\u006f\u0072m\u0061\u0074\u0069\u006f\u006e\u0053\u0065gm\u0065\u006e\u0074\u005d \u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0048\u0065ad\u0065\u0072 \u0046\u0069\u006e\u0069\u0073\u0068\u0065\u0064";
if _bcbc !=nil {_deab +="\u0020\u0077\u0069t\u0068\u0020\u0065\u0072\u0072\u006f\u0072\u0020"+_bcbc .Error ();}else {_deab +="\u0020\u0073\u0075\u0063\u0063\u0065\u0073\u0073\u0066\u0075\u006c\u006c\u0079";};_eaf .Log .Trace (_deab );}();if _bcbc =_fgff .readWidthAndHeight ();
_bcbc !=nil {return _bcbc ;};if _bcbc =_fgff .readResolution ();_bcbc !=nil {return _bcbc ;};_ ,_bcbc =_fgff ._efce .ReadBit ();if _bcbc !=nil {return _bcbc ;};if _bcbc =_fgff .readCombinationOperatorOverrideAllowed ();_bcbc !=nil {return _bcbc ;};if _bcbc =_fgff .readRequiresAuxiliaryBuffer ();
_bcbc !=nil {return _bcbc ;};if _bcbc =_fgff .readCombinationOperator ();_bcbc !=nil {return _bcbc ;};if _bcbc =_fgff .readDefaultPixelValue ();_bcbc !=nil {return _bcbc ;};if _bcbc =_fgff .readContainsRefinement ();_bcbc !=nil {return _bcbc ;};if _bcbc =_fgff .readIsLossless ();
_bcbc !=nil {return _bcbc ;};if _bcbc =_fgff .readIsStriped ();_bcbc !=nil {return _bcbc ;};if _bcbc =_fgff .readMaxStripeSize ();_bcbc !=nil {return _bcbc ;};if _bcbc =_fgff .checkInput ();_bcbc !=nil {return _bcbc ;};_eaf .Log .Trace ("\u0025\u0073",_fgff );
return nil ;};func (_cbeb *PageInformationSegment )readContainsRefinement ()error {_fegd ,_fge :=_cbeb ._efce .ReadBit ();if _fge !=nil {return _fge ;};if _fegd ==1{_cbeb ._caaf =true ;};return nil ;};func (_ggggd *TextRegion )decodeRdy ()(int64 ,error ){const _aafgg ="\u0064e\u0063\u006f\u0064\u0065\u0052\u0064y";
if _ggggd .IsHuffmanEncoded {if _ggggd .SbHuffRDY ==3{if _ggggd ._agcga ==nil {var (_bcf int ;_eefb error ;);if _ggggd .SbHuffFS ==3{_bcf ++;};if _ggggd .SbHuffDS ==3{_bcf ++;};if _ggggd .SbHuffDT ==3{_bcf ++;};if _ggggd .SbHuffRDWidth ==3{_bcf ++;};if _ggggd .SbHuffRDHeight ==3{_bcf ++;
};if _ggggd .SbHuffRDX ==3{_bcf ++;};_ggggd ._agcga ,_eefb =_ggggd .getUserTable (_bcf );if _eefb !=nil {return 0,_ae .Wrap (_eefb ,_aafgg ,"");};};return _ggggd ._agcga .Decode (_ggggd ._fdgb );};_gfab ,_cdcc :=_cg .GetStandardTable (14+int (_ggggd .SbHuffRDY ));
if _cdcc !=nil {return 0,_cdcc ;};return _gfab .Decode (_ggggd ._fdgb );};_bddec ,_egb :=_ggggd ._febe .DecodeInt (_ggggd ._aegf );if _egb !=nil {return 0,_ae .Wrap (_egb ,_aafgg ,"");};return int64 (_bddec ),nil ;};