//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package unichart ;import (_e "bytes";_a "fmt";_ef "github.com/unidoc/unichart/render";_gf "github.com/unidoc/unipdf/v4/common";_eda "github.com/unidoc/unipdf/v4/contentstream";_ed "github.com/unidoc/unipdf/v4/contentstream/draw";_ae "github.com/unidoc/unipdf/v4/core";
_b "github.com/unidoc/unipdf/v4/model";_ec "image/color";_c "io";_gc "math";);func (_bce *Renderer )SetStrokeColor (color _ec .Color ){_bce ._gfc =color ;_be ,_ecb ,_bf ,_ :=_ece (color );_bce ._cf .Add_RG (_be ,_ecb ,_bf );};func (_ddf *Renderer )SetFontColor (color _ec .Color ){_ddf ._fc =color };
func (_fe *Renderer )LineTo (x ,y int ){_fe ._cf .Add_l (float64 (x ),float64 (y ))};func (_gac *Renderer )ClearTextRotation (){_gac ._bb =0};func _fde (_ebb float64 )float64 {return _ebb *_gc .Pi /180.0};func _fga (_ada string ,_acf int ,_fgg func (_ae .PdfObjectName )bool )_ae .PdfObjectName {_ebc :=_ae .PdfObjectName (_a .Sprintf ("\u0025\u0073\u0025\u0064",_ada ,_acf ));
for _cc :=_acf ;_fgg (_ebc );{_cc ++;_ebc =_ae .PdfObjectName (_a .Sprintf ("\u0025\u0073\u0025\u0064",_ada ,_cc ));};return _ebc ;};func (_ce *Renderer )Stroke (){_ce ._cf .Add_S ()};func (_ga *Renderer )Circle (radius float64 ,x ,y int ){_abg :=radius ;
if _ea :=_ga ._dd ;_ea !=0{_abg -=_ea /2;};_agd :=_abg *0.551784;_bfb :=_ed .CubicBezierPath {Curves :[]_ed .CubicBezierCurve {_ed .NewCubicBezierCurve (-_abg ,0,-_abg ,_agd ,-_agd ,_abg ,0,_abg ),_ed .NewCubicBezierCurve (0,_abg ,_agd ,_abg ,_abg ,_agd ,_abg ,0),_ed .NewCubicBezierCurve (_abg ,0,_abg ,-_agd ,_agd ,-_abg ,0,-_abg ),_ed .NewCubicBezierCurve (0,-_abg ,-_agd ,-_abg ,-_abg ,-_agd ,-_abg ,0)}};
if _cdf :=_ga ._dd ;_cdf !=0{_bfb =_bfb .Offset (_cdf /2,_cdf /2);};_bfb =_bfb .Offset (float64 (x ),float64 (y ));_ed .DrawBezierPathWithCreator (_bfb ,_ga ._cf );};func (_fd *Renderer )SetStrokeWidth (width float64 ){_fd ._dd =width ;_fd ._cf .Add_w (width )};
func (_cbd *Renderer )Save (w _c .Writer )error {if w ==nil {return nil ;};_ ,_cbf :=_c .Copy (w ,_e .NewBuffer (_cbd ._cf .Bytes ()));return _cbf ;};type Renderer struct{_bc int ;_d int ;_dg float64 ;_cf *_eda .ContentCreator ;_gb *_b .PdfPageResources ;
_ee _ec .Color ;_gfc _ec .Color ;_dd float64 ;_gd *_b .PdfFont ;_f float64 ;_fc _ec .Color ;_bb float64 ;_ag map[*_b .PdfFont ]_ae .PdfObjectName ;};func (_dafg *Renderer )getTextWidth (_ffd string )float64 {var _ffc float64 ;for _ ,_fcb :=range _ffd {_bda ,_cee :=_dafg ._gd .GetRuneMetrics (_fcb );
if !_cee {_gf .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0075\u006e\u0073\u0075\u0070\u0070\u006fr\u0074e\u0064 \u0072u\u006e\u0065\u0020\u0025\u0076\u0020\u0069\u006e\u0020\u0066\u006f\u006e\u0074",_fcb );};_ffc +=_bda .Wx ;};return _dafg ._f *_ffc /1000.0;
};func (_gba *Renderer )wrapText (_dcd string )[]string {var (_dge []string ;_cea []rune ;);for _ ,_cdeb :=range _dcd {if _cdeb =='\n'{_dge =append (_dge ,string (_cea ));_cea =[]rune {};continue ;};_cea =append (_cea ,_cdeb );};if len (_cea )> 0{_dge =append (_dge ,string (_cea ));
};return _dge ;};func (_eb *Renderer )SetFont (font _ef .Font ){_aac ,_bbe :=font .(*_b .PdfFont );if !_bbe {_gf .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061\u006c\u0069d\u0020\u0066\u006f\u006e\u0074\u0020\u0074\u0079\u0070\u0065");
return ;};_ad ,_bbe :=_eb ._ag [_aac ];if !_bbe {_ad =_fga ("\u0046\u006f\u006e\u0074",1,_eb ._gb .HasFontByName );if _bag :=_eb ._gb .SetFontByName (_ad ,_aac .ToPdfObject ());_bag !=nil {_gf .Log .Debug ("\u0045\u0052\u0052\u004f\u0052:\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0061\u0064d\u0020\u0066\u006f\u006e\u0074\u0020\u0025\u0076\u0020\u0074\u006f\u0020\u0072\u0065\u0073\u006f\u0075\u0072\u0063\u0065\u0073",_aac );
};_eb ._ag [_aac ]=_ad ;};_eb ._cf .Add_Tf (_ad ,_eb ._f );_eb ._gd =_aac ;};func (_eca *Renderer )MoveTo (x ,y int ){_eca ._cf .Add_m (float64 (x ),float64 (y ))};func (_cab *Renderer )FillStroke (){_cab ._cf .Add_B ()};func (_aa *Renderer )SetClassName (name string ){};
func (_ca *Renderer )SetDPI (dpi float64 ){_ca ._dg =dpi };func NewRenderer (cc *_eda .ContentCreator ,res *_b .PdfPageResources )func (int ,int )(_ef .Renderer ,error ){return func (_dc ,_df int )(_ef .Renderer ,error ){_da :=&Renderer {_bc :_dc ,_d :_df ,_dg :72,_cf :cc ,_gb :res ,_ag :map[*_b .PdfFont ]_ae .PdfObjectName {}};
_da .ResetStyle ();return _da ,nil ;};};func (_cd *Renderer )Close (){_cd ._cf .Add_h ()};func (_dfg *Renderer )Text (text string ,x ,y int ){_dfg ._cf .Add_q ();_dfg .SetFont (_dfg ._gd );_cde ,_bed ,_db ,_ :=_ece (_dfg ._fc );_dfg ._cf .Add_rg (_cde ,_bed ,_db );
_dfg ._cf .Translate (float64 (x ),float64 (y )).Scale (1,-1);if _bceb :=_dfg ._bb ;_bceb !=0{_dfg ._cf .RotateDeg (_bceb );};_dfg ._cf .Add_BT ().Add_TL (_dfg ._f );var (_gcg =_dfg ._gd .Encoder ();_faf =_dfg .wrapText (text );_ddg =len (_faf ););for _bfd ,_ffg :=range _faf {_dfg ._cf .Add_TJ (_ae .MakeStringFromBytes (_gcg .Encode (_ffg )));
if _bfd !=_ddg -1{_dfg ._cf .Add_Tstar ();};};_dfg ._cf .Add_ET ();_dfg ._cf .Add_Q ();};func _bdb (_bbed float64 )float64 {return _bbed *180/_gc .Pi };func (_bgf *Renderer )MeasureText (text string )_ef .Box {_gab :=_bgf ._f ;_gg ,_cabb :=_bgf ._gd .GetFontDescriptor ();
if _cabb !=nil {_gf .Log .Debug ("W\u0041\u0052\u004e\u003a\u0020\u0055n\u0061\u0062\u006c\u0065\u0020\u0074o\u0020\u0067\u0065\u0074\u0020\u0066\u006fn\u0074\u0020\u0064\u0065\u0073\u0063\u0072\u0069\u0070\u0074o\u0072");}else {_acc ,_cfa :=_gg .GetCapHeight ();
if _cfa !=nil {_gf .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0055\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0067\u0065\u0074\u0020f\u006f\u006e\u0074\u0020\u0063\u0061\u0070\u0020\u0068\u0065\u0069\u0067\u0068t\u003a\u0020\u0025\u0076",_cfa );
}else {_gab =_acc /1000.0*_bgf ._f ;};};var (_gbea =0.0;_aaff =_bgf .wrapText (text ););for _ ,_ecac :=range _aaff {if _bge :=_bgf .getTextWidth (_ecac );_bge > _gbea {_gbea =_bge ;};};_gbd :=_ef .NewBox (0,0,int (_gbea ),int (_gab ));if _cac :=_bgf ._bb ;
_cac !=0{_gbd =_gbd .Corners ().Rotate (_cac ).Box ();};return _gbd ;};func (_fa *Renderer )SetFontSize (size float64 ){_fa ._f =size };func (_ba *Renderer )GetDPI ()float64 {return _ba ._dg };func (_bd *Renderer )QuadCurveTo (cx ,cy ,x ,y int ){_bd ._cf .Add_v (float64 (x ),float64 (y ),float64 (cx ),float64 (cy ));
};func (_bcg *Renderer )ArcTo (cx ,cy int ,rx ,ry ,startAngle ,deltaAngle float64 ){startAngle =_bdb (2.0*_gc .Pi -startAngle );deltaAngle =_bdb (-deltaAngle );_dab ,_de :=deltaAngle ,1;if _gc .Abs (deltaAngle )> 90.0{_de =int (_gc .Ceil (_gc .Abs (deltaAngle )/90.0));
_dab =deltaAngle /float64 (_de );};var (_aaf =_fde (_dab /2);_ecf =_gc .Abs (4.0/3.0*(1.0-_gc .Cos (_aaf ))/_gc .Sin (_aaf ));_af =float64 (cx );_edf =float64 (cy ););for _deg :=0;_deg < _de ;_deg ++{_gbe :=_fde (startAngle +float64 (_deg )*_dab );_afg :=_fde (startAngle +float64 (_deg +1)*_dab );
_cb :=_gc .Cos (_gbe );_dgb :=_gc .Cos (_afg );_bbc :=_gc .Sin (_gbe );_edd :=_gc .Sin (_afg );var _gfff []float64 ;if _dab > 0{_gfff =[]float64 {_af +rx *_cb ,_edf -ry *_bbc ,_af +rx *(_cb -_ecf *_bbc ),_edf -ry *(_bbc +_ecf *_cb ),_af +rx *(_dgb +_ecf *_edd ),_edf -ry *(_edd -_ecf *_dgb ),_af +rx *_dgb ,_edf -ry *_edd };
}else {_gfff =[]float64 {_af +rx *_cb ,_edf -ry *_bbc ,_af +rx *(_cb +_ecf *_bbc ),_edf -ry *(_bbc -_ecf *_cb ),_af +rx *(_dgb -_ecf *_edd ),_edf -ry *(_edd +_ecf *_dgb ),_af +rx *_dgb ,_edf -ry *_edd };};if _deg ==0{_bcg ._cf .Add_l (_gfff [0],_gfff [1]);
};_bcg ._cf .Add_c (_gfff [2],_gfff [3],_gfff [4],_gfff [5],_gfff [6],_gfff [7]);};};func _ece (_gaa _ec .Color )(float64 ,float64 ,float64 ,float64 ){_eaf ,_adg ,_ecfd ,_bga :=_dag (_gaa );return float64 (_eaf )/255,float64 (_adg )/255,float64 (_ecfd )/255,float64 (_bga )/255;
};func _dag (_bad _ec .Color )(uint8 ,uint8 ,uint8 ,uint8 ){_fae ,_aacd ,_bgd ,_fab :=_bad .RGBA ();return uint8 (_fae >>8),uint8 (_aacd >>8),uint8 (_bgd >>8),uint8 (_fab >>8);};func (_cg *Renderer )Fill (){_cg ._cf .Add_f ()};func (_eea *Renderer )ResetStyle (){_eea .SetFillColor (_ec .Black );
_eea .SetStrokeColor (_ec .Transparent );_eea .SetStrokeWidth (0);_eea .SetFont (_b .DefaultFont ());_eea .SetFontColor (_ec .Black );_eea .SetFontSize (12);_eea .SetTextRotation (0);};func (_ffa *Renderer )SetTextRotation (radians float64 ){_ffa ._bb =_bdb (-radians )};
func (_bg *Renderer )SetStrokeDashArray (dashArray []float64 ){_daf :=make ([]int64 ,len (dashArray ));for _bcf ,_bae :=range dashArray {_daf [_bcf ]=int64 (_bae );};_bg ._cf .Add_d (_daf ,0);};func (_ab *Renderer )SetFillColor (color _ec .Color ){_ab ._ee =color ;
_ff ,_fg ,_gff ,_ :=_ece (color );_ab ._cf .Add_rg (_ff ,_fg ,_gff );};