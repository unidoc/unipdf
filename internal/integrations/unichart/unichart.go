//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package unichart ;import (_g "bytes";_e "fmt";_ggb "github.com/unidoc/unichart/render";_c "github.com/unidoc/unipdf/v4/common";_cg "github.com/unidoc/unipdf/v4/contentstream";_a "github.com/unidoc/unipdf/v4/contentstream/draw";_ca "github.com/unidoc/unipdf/v4/core";
_ea "github.com/unidoc/unipdf/v4/model";_gg "image/color";_f "io";_eg "math";);type Renderer struct{_fb int ;_fe int ;_cf float64 ;_ag *_cg .ContentCreator ;_fc *_ea .PdfPageResources ;_cc _gg .Color ;_fec _gg .Color ;_ee float64 ;_ad *_ea .PdfFont ;_gc float64 ;
_ade _gg .Color ;_aga float64 ;_ec map[*_ea .PdfFont ]_ca .PdfObjectName ;};func (_gdb *Renderer )ArcTo (cx ,cy int ,rx ,ry ,startAngle ,deltaAngle float64 ){startAngle =_caa (2.0*_eg .Pi -startAngle );deltaAngle =_caa (-deltaAngle );_edf ,_ce :=deltaAngle ,1;
if _eg .Abs (deltaAngle )> 90.0{_ce =int (_eg .Ceil (_eg .Abs (deltaAngle )/90.0));_edf =deltaAngle /float64 (_ce );};var (_afb =_ega (_edf /2);_fd =_eg .Abs (4.0/3.0*(1.0-_eg .Cos (_afb ))/_eg .Sin (_afb ));_gda =float64 (cx );_cac =float64 (cy ););for _dag :=0;
_dag < _ce ;_dag ++{_dc :=_ega (startAngle +float64 (_dag )*_edf );_afec :=_ega (startAngle +float64 (_dag +1)*_edf );_eee :=_eg .Cos (_dc );_egb :=_eg .Cos (_afec );_df :=_eg .Sin (_dc );_bg :=_eg .Sin (_afec );var _fgf []float64 ;if _edf > 0{_fgf =[]float64 {_gda +rx *_eee ,_cac -ry *_df ,_gda +rx *(_eee -_fd *_df ),_cac -ry *(_df +_fd *_eee ),_gda +rx *(_egb +_fd *_bg ),_cac -ry *(_bg -_fd *_egb ),_gda +rx *_egb ,_cac -ry *_bg };
}else {_fgf =[]float64 {_gda +rx *_eee ,_cac -ry *_df ,_gda +rx *(_eee +_fd *_df ),_cac -ry *(_df -_fd *_eee ),_gda +rx *(_egb -_fd *_bg ),_cac -ry *(_bg +_fd *_egb ),_gda +rx *_egb ,_cac -ry *_bg };};if _dag ==0{_gdb ._ag .Add_l (_fgf [0],_fgf [1]);};
_gdb ._ag .Add_c (_fgf [2],_fgf [3],_fgf [4],_fgf [5],_fgf [6],_fgf [7]);};};func (_gbf *Renderer )Stroke (){_gbf ._ag .Add_S ()};func (_dbg *Renderer )Close (){_dbg ._ag .Add_h ()};func (_adf *Renderer )SetClassName (name string ){};func (_bga *Renderer )SetFontColor (color _gg .Color ){_bga ._ade =color };
func _ega (_cefa float64 )float64 {return _cefa *_eg .Pi /180.0};func _efa (_acf _gg .Color )(float64 ,float64 ,float64 ,float64 ){_dae ,_adb ,_bd ,_beb :=_aff (_acf );return float64 (_dae )/255,float64 (_adb )/255,float64 (_bd )/255,float64 (_beb )/255;
};func _aa (_eaag string ,_gbgb int ,_fac func (_ca .PdfObjectName )bool )_ca .PdfObjectName {_ceae :=_ca .PdfObjectName (_e .Sprintf ("\u0025\u0073\u0025\u0064",_eaag ,_gbgb ));for _bcb :=_gbgb ;_fac (_ceae );{_bcb ++;_ceae =_ca .PdfObjectName (_e .Sprintf ("\u0025\u0073\u0025\u0064",_eaag ,_bcb ));
};return _ceae ;};func (_adfa *Renderer )MoveTo (x ,y int ){_adfa ._ag .Add_m (float64 (x ),float64 (y ))};func _caa (_ccf float64 )float64 {return _ccf *180/_eg .Pi };func (_ege *Renderer )Fill (){_ege ._ag .Add_f ()};func (_age *Renderer )SetTextRotation (radians float64 ){_age ._aga =_caa (-radians )};
func (_ae *Renderer )GetDPI ()float64 {return _ae ._cf };func (_cge *Renderer )SetFontSize (size float64 ){_cge ._gc =size };func (_ace *Renderer )Save (w _f .Writer )error {if w ==nil {return nil ;};_ ,_gfe :=_f .Copy (w ,_g .NewBuffer (_ace ._ag .Bytes ()));
return _gfe ;};func (_adee *Renderer )MeasureText (text string )_ggb .Box {_acc :=_adee ._gc ;_efe ,_gbg :=_adee ._ad .GetFontDescriptor ();if _gbg !=nil {_c .Log .Debug ("W\u0041\u0052\u004e\u003a\u0020\u0055n\u0061\u0062\u006c\u0065\u0020\u0074o\u0020\u0067\u0065\u0074\u0020\u0066\u006fn\u0074\u0020\u0064\u0065\u0073\u0063\u0072\u0069\u0070\u0074o\u0072");
}else {_dcd ,_agd :=_efe .GetCapHeight ();if _agd !=nil {_c .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0055\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0067\u0065\u0074\u0020f\u006f\u006e\u0074\u0020\u0063\u0061\u0070\u0020\u0068\u0065\u0069\u0067\u0068t\u003a\u0020\u0025\u0076",_agd );
}else {_acc =_dcd /1000.0*_adee ._gc ;};};var (_gbgd =0.0;_fcg =_adee .wrapText (text ););for _ ,_adeec :=range _fcg {if _dab :=_adee .getTextWidth (_adeec );_dab > _gbgd {_gbgd =_dab ;};};_acb :=_ggb .NewBox (0,0,int (_gbgd ),int (_acc ));if _acca :=_adee ._aga ;
_acca !=0{_acb =_acb .Corners ().Rotate (_acca ).Box ();};return _acb ;};func (_gf *Renderer )LineTo (x ,y int ){_gf ._ag .Add_l (float64 (x ),float64 (y ))};func (_de *Renderer )SetFont (font _ggb .Font ){_gge ,_fde :=font .(*_ea .PdfFont );if !_fde {_c .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061\u006c\u0069d\u0020\u0066\u006f\u006e\u0074\u0020\u0074\u0079\u0070\u0065");
return ;};_ef ,_fde :=_de ._ec [_gge ];if !_fde {_ef =_aa ("\u0046\u006f\u006e\u0074",1,_de ._fc .HasFontByName );if _fgc :=_de ._fc .SetFontByName (_ef ,_gge .ToPdfObject ());_fgc !=nil {_c .Log .Debug ("\u0045\u0052\u0052\u004f\u0052:\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0061\u0064d\u0020\u0066\u006f\u006e\u0074\u0020\u0025\u0076\u0020\u0074\u006f\u0020\u0072\u0065\u0073\u006f\u0075\u0072\u0063\u0065\u0073",_gge );
};_de ._ec [_gge ]=_ef ;};_de ._ag .Add_Tf (_ef ,_de ._gc );_de ._ad =_gge ;};func (_ddb *Renderer )SetDPI (dpi float64 ){_ddb ._cf =dpi };func (_af *Renderer )SetStrokeColor (color _gg .Color ){_af ._fec =color ;_egd ,_gb ,_aed ,_ :=_efa (color );_af ._ag .Add_RG (_egd ,_gb ,_aed );
};func (_fff *Renderer )FillStroke (){_fff ._ag .Add_B ()};func (_ff *Renderer )ResetStyle (){_ff .SetFillColor (_gg .Black );_ff .SetStrokeColor (_gg .Transparent );_ff .SetStrokeWidth (0);_ff .SetFont (_ea .DefaultFont ());_ff .SetFontColor (_gg .Black );
_ff .SetFontSize (12);_ff .SetTextRotation (0);};func (_bbb *Renderer )QuadCurveTo (cx ,cy ,x ,y int ){_bbb ._ag .Add_v (float64 (x ),float64 (y ),float64 (cx ),float64 (cy ));};func NewRenderer (cc *_cg .ContentCreator ,res *_ea .PdfPageResources )func (int ,int )(_ggb .Renderer ,error ){return func (_ac ,_ed int )(_ggb .Renderer ,error ){_dd :=&Renderer {_fb :_ac ,_fe :_ed ,_cf :72,_ag :cc ,_fc :res ,_ec :map[*_ea .PdfFont ]_ca .PdfObjectName {}};
_dd .ResetStyle ();return _dd ,nil ;};};func (_eef *Renderer )Circle (radius float64 ,x ,y int ){_fce :=radius ;if _ecf :=_eef ._ee ;_ecf !=0{_fce -=_ecf /2;};_gdc :=_fce *0.551784;_agb :=_a .CubicBezierPath {Curves :[]_a .CubicBezierCurve {_a .NewCubicBezierCurve (-_fce ,0,-_fce ,_gdc ,-_gdc ,_fce ,0,_fce ),_a .NewCubicBezierCurve (0,_fce ,_gdc ,_fce ,_fce ,_gdc ,_fce ,0),_a .NewCubicBezierCurve (_fce ,0,_fce ,-_gdc ,_gdc ,-_fce ,0,-_fce ),_a .NewCubicBezierCurve (0,-_fce ,-_gdc ,-_fce ,-_fce ,-_gdc ,-_fce ,0)}};
if _cd :=_eef ._ee ;_cd !=0{_agb =_agb .Offset (_cd /2,_cd /2);};_agb =_agb .Offset (float64 (x ),float64 (y ));_a .DrawBezierPathWithCreator (_agb ,_eef ._ag );};func (_bbbb *Renderer )Text (text string ,x ,y int ){_bbbb ._ag .Add_q ();_bbbb .SetFont (_bbbb ._ad );
_ba ,_cged ,_ceg ,_ :=_efa (_bbbb ._ade );_bbbb ._ag .Add_rg (_ba ,_cged ,_ceg );_bbbb ._ag .Translate (float64 (x ),float64 (y )).Scale (1,-1);if _gdf :=_bbbb ._aga ;_gdf !=0{_bbbb ._ag .RotateDeg (_gdf );};_bbbb ._ag .Add_BT ().Add_TL (_bbbb ._gc );var (_be =_bbbb ._ad .Encoder ();
_ddd =_bbbb .wrapText (text );_ggd =len (_ddd ););for _dce ,_eaa :=range _ddd {_bbbb ._ag .Add_TJ (_ca .MakeStringFromBytes (_be .Encode (_eaa )));if _dce !=_ggd -1{_bbbb ._ag .Add_Tstar ();};};_bbbb ._ag .Add_ET ();_bbbb ._ag .Add_Q ();};func (_gcd *Renderer )wrapText (_bf string )[]string {var (_bed []string ;
_egeb []rune ;);for _ ,_cdf :=range _bf {if _cdf =='\n'{_bed =append (_bed ,string (_egeb ));_egeb =[]rune {};continue ;};_egeb =append (_egeb ,_cdf );};if len (_egeb )> 0{_bed =append (_bed ,string (_egeb ));};return _bed ;};func (_gd *Renderer )SetFillColor (color _gg .Color ){_gd ._cc =color ;
_db ,_da ,_cab ,_ :=_efa (color );_gd ._ag .Add_rg (_db ,_da ,_cab );};func (_eae *Renderer )SetStrokeDashArray (dashArray []float64 ){_bb :=make ([]int64 ,len (dashArray ));for _afe ,_eca :=range dashArray {_bb [_afe ]=int64 (_eca );};_eae ._ag .Add_d (_bb ,0);
};func (_bc *Renderer )SetStrokeWidth (width float64 ){_bc ._ee =width ;_bc ._ag .Add_w (width )};func (_dde *Renderer )getTextWidth (_cef string )float64 {var _ge float64 ;for _ ,_agf :=range _cef {_dec ,_gbe :=_dde ._ad .GetRuneMetrics (_agf );if !_gbe {_c .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0075\u006e\u0073\u0075\u0070\u0070\u006fr\u0074e\u0064 \u0072u\u006e\u0065\u0020\u0025\u0076\u0020\u0069\u006e\u0020\u0066\u006f\u006e\u0074",_agf );
};_ge +=_dec .Wx ;};return _dde ._gc *_ge /1000.0;};func (_bbf *Renderer )ClearTextRotation (){_bbf ._aga =0};func _aff (_cea _gg .Color )(uint8 ,uint8 ,uint8 ,uint8 ){_eb ,_deca ,_eab ,_ddba :=_cea .RGBA ();return uint8 (_eb >>8),uint8 (_deca >>8),uint8 (_eab >>8),uint8 (_ddba >>8);
};