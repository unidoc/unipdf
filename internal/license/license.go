//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package license ;import (_gb "bytes";_a "compress/gzip";_g "crypto";_cg "crypto/aes";_dc "crypto/cipher";_afc "crypto/hmac";_cf "crypto/rand";_ggc "crypto/rsa";_df "crypto/sha256";_de "crypto/sha512";_gg "crypto/x509";_gc "encoding/base64";_d "encoding/hex";
_bed "encoding/json";_eb "encoding/pem";_cc "errors";_bd "fmt";_ccf "github.com/unidoc/unipdf/v4/common";_be "io";_ca "net";_cb "net/http";_c "os";_e "path/filepath";_f "sort";_fe "strings";_bf "sync";_af "time";);func Track (docKey string ,useKey string ,docName string )error {return _adf (docKey ,useKey ,docName ,!_faf ._dcb );
};func _dfaf ()([]string ,[]string ,error ){_cgbc ,_bgc :=_ca .Interfaces ();if _bgc !=nil {return nil ,nil ,_bgc ;};var _aabd []string ;var _aef []string ;for _ ,_deg :=range _cgbc {if _deg .Flags &_ca .FlagUp ==0||_gb .Equal (_deg .HardwareAddr ,nil ){continue ;
};_ccfge ,_bdbg :=_deg .Addrs ();if _bdbg !=nil {return nil ,nil ,_bdbg ;};_fbf :=0;for _ ,_fbd :=range _ccfge {var _cbfd _ca .IP ;switch _bcgc :=_fbd .(type ){case *_ca .IPNet :_cbfd =_bcgc .IP ;case *_ca .IPAddr :_cbfd =_bcgc .IP ;};if _cbfd .IsLoopback (){continue ;
};if _cbfd .To4 ()==nil {continue ;};_aef =append (_aef ,_cbfd .String ());_fbf ++;};_afdg :=_deg .HardwareAddr .String ();if _afdg !=""&&_fbf > 0{_aabd =append (_aabd ,_afdg );};};return _aabd ,_aef ,nil ;};func SetMeteredKey (apiKey string )error {if len (apiKey )==0{_ccf .Log .Error ("\u004d\u0065\u0074\u0065\u0072e\u0064\u0020\u004c\u0069\u0063\u0065\u006e\u0073\u0065\u0020\u0041\u0050\u0049 \u004b\u0065\u0079\u0020\u006d\u0075\u0073\u0074\u0020\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u0065\u006d\u0070\u0074\u0079");
_ccf .Log .Error ("\u002d\u0020\u0047\u0072\u0061\u0062\u0020\u006f\u006e\u0065\u0020\u0069\u006e\u0020\u0074h\u0065\u0020\u0046\u0072\u0065\u0065\u0020\u0054\u0069\u0065\u0072\u0020\u0061t\u0020\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0063\u006c\u006fud\u002e\u0075\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f");
return _bd .Errorf ("\u006de\u0074\u0065\u0072e\u0064\u0020\u006ci\u0063en\u0073\u0065\u0020\u0061\u0070\u0069\u0020k\u0065\u0079\u0020\u006d\u0075\u0073\u0074\u0020\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u0065\u006d\u0070\u0074\u0079\u003a\u0020\u0063\u0072\u0065\u0061\u0074\u0065 o\u006ee\u0020\u0061\u0074\u0020\u0068\u0074t\u0070\u0073\u003a\u002f\u002fc\u006c\u006f\u0075\u0064\u002e\u0075\u006e\u0069\u0064\u006f\u0063.\u0069\u006f");
};if _faf !=nil &&(_faf ._ff ||_faf .Tier !=LicenseTierUnlicensed ){_ccf .Log .Error ("\u0045\u0052\u0052\u004f\u0052:\u0020\u0043\u0061\u006e\u006eo\u0074 \u0073\u0065\u0074\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020\u006b\u0065\u0079\u0020\u0074\u0077\u0069c\u0065\u0020\u002d\u0020\u0053\u0068\u006f\u0075\u006c\u0064\u0020\u006a\u0075\u0073\u0074\u0020\u0069\u006e\u0069\u0074\u0069\u0061\u006c\u0069z\u0065\u0020\u006f\u006e\u0063\u0065");
return _cc .New ("\u006c\u0069\u0063en\u0073\u0065\u0020\u006b\u0065\u0079\u0020\u0061\u006c\u0072\u0065\u0061\u0064\u0079\u0020\u0073\u0065\u0074");};_ecb :=_eef ();_ecb ._bb =apiKey ;_eff ,_gab :=_ecb .getStatus ();if _gab !=nil {return _gab ;};if !_eff .Valid {return _cc .New ("\u006b\u0065\u0079\u0020\u006e\u006f\u0074\u0020\u0076\u0061\u006c\u0069\u0064");
};_ccee :=&LicenseKey {_ff :true ,_dba :apiKey ,_dcb :true };_faf =_ccee ;return nil ;};func (_fab *LicenseKey )IsLicensed ()bool {return _fab .Tier !=LicenseTierUnlicensed ||_fab ._ff };const _fee ="\u000a\u002d\u002d\u002d\u002d\u002d\u0042\u0045\u0047\u0049\u004e \u0050\u0055\u0042\u004c\u0049\u0043\u0020\u004b\u0045Y\u002d\u002d\u002d\u002d\u002d\u000a\u004d\u0049I\u0042\u0049\u006a\u0041NB\u0067\u006b\u0071\u0068\u006b\u0069G\u0039\u0077\u0030\u0042\u0041\u0051\u0045\u0046A\u0041\u004f\u0043\u0041\u0051\u0038\u0041\u004d\u0049\u0049\u0042\u0043\u0067\u004b\u0043\u0041\u0051\u0045A\u006dF\u0055\u0069\u0079\u0064\u0037\u0062\u0035\u0058\u006a\u0070\u006b\u0050\u0035\u0052\u0061\u0070\u0034\u0077\u000a\u0044\u0063\u0031d\u0079\u007a\u0049\u0051\u0034\u004c\u0065\u006b\u0078\u0072\u0076\u0079\u0074\u006e\u0045\u004d\u0070\u004e\u0055\u0062\u006f\u0036i\u0041\u0037\u0034\u0056\u0038\u0072\u0075\u005a\u004f\u0076\u0072\u0053\u0063\u0073\u0066\u0032\u0051\u0065\u004e9\u002f\u0071r\u0055\u0047\u0038\u0071\u0045\u0062\u0055\u0057\u0064\u006f\u0045\u0059\u0071+\u000a\u006f\u0074\u0046\u004e\u0041\u0046N\u0078\u006c\u0047\u0062\u0078\u0062\u0044\u0048\u0063\u0064\u0047\u0056\u0061\u004d\u0030\u004f\u0058\u0064\u0058g\u0044y\u004c5\u0061\u0049\u0045\u0061\u0067\u004c\u0030\u0063\u0035\u0070\u0077\u006a\u0049\u0064\u0050G\u0049\u006e\u0034\u0036\u0066\u0037\u0038\u0065\u004d\u004a\u002b\u004a\u006b\u0064\u0063\u0070\u0044\n\u0044\u004a\u0061\u0071\u0059\u0058d\u0072\u007a5\u004b\u0065\u0073\u0068\u006aS\u0069\u0049\u0061\u0061\u0037\u006d\u0065\u006e\u0042\u0049\u0041\u0058\u0053\u0034\u0055\u0046\u0078N\u0066H\u0068\u004e\u0030\u0048\u0043\u0059\u005a\u0059\u0071\u0051\u0047\u0037\u0062K+\u0073\u0035\u0072R\u0048\u006f\u006e\u0079\u0064\u004eW\u0045\u0047\u000a\u0048\u0038M\u0079\u0076\u00722\u0070\u0079\u0061\u0032K\u0072\u004d\u0075m\u0066\u006d\u0041\u0078\u0055\u0042\u0036\u0066\u0065\u006e\u0043\u002f4\u004f\u0030\u0057\u00728\u0067\u0066\u0050\u004f\u0055\u0038R\u0069\u0074\u006d\u0062\u0044\u0076\u0051\u0050\u0049\u0052\u0058\u004fL\u0034\u0076\u0054B\u0072\u0042\u0064\u0062a\u0041\u000a9\u006e\u0077\u004e\u0050\u002b\u0069\u002f\u002f\u0032\u0030\u004d\u00542\u0062\u0078\u006d\u0065\u0057\u0042\u002b\u0067\u0070\u0063\u0045\u0068G\u0070\u0058\u005a7\u0033\u0033\u0061\u007a\u0051\u0078\u0072\u0043\u0033\u004a\u0034\u0076\u0033C\u005a\u006d\u0045\u004eS\u0074\u0044\u004b\u002f\u004b\u0044\u0053\u0050\u004b\u0055\u0047\u0066\u00756\u000a\u0066\u0077I\u0044\u0041\u0051\u0041\u0042\u000a\u002d\u002d\u002d\u002d\u002dE\u004e\u0044\u0020\u0050\u0055\u0042\u004c\u0049\u0043 \u004b\u0045Y\u002d\u002d\u002d\u002d\u002d\n";
func _ee (_fcb string ,_bcd string )([]byte ,error ){var (_cad int ;_ec string ;);for _ ,_ec =range []string {"\u000a\u002b\u000a","\u000d\u000a\u002b\r\u000a","\u0020\u002b\u0020"}{if _cad =_fe .Index (_bcd ,_ec );_cad !=-1{break ;};};if _cad ==-1{return nil ,_bd .Errorf ("\u0069\u006e\u0076al\u0069\u0064\u0020\u0069\u006e\u0070\u0075\u0074\u002c \u0073i\u0067n\u0061t\u0075\u0072\u0065\u0020\u0073\u0065\u0070\u0061\u0072\u0061\u0074\u006f\u0072");
};_bda :=_bcd [:_cad ];_cac :=_cad +len (_ec );_cce :=_bcd [_cac :];if _bda ==""||_cce ==""{return nil ,_bd .Errorf ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0069n\u0070\u0075\u0074,\u0020\u006d\u0069\u0073\u0073\u0069\u006e\u0067\u0020or\u0069\u0067\u0069n\u0061\u006c \u006f\u0072\u0020\u0073\u0069\u0067n\u0061\u0074u\u0072\u0065");
};_bg ,_ef :=_gc .StdEncoding .DecodeString (_bda );if _ef !=nil {return nil ,_bd .Errorf ("\u0069\u006e\u0076\u0061li\u0064\u0020\u0069\u006e\u0070\u0075\u0074\u0020\u006f\u0072\u0069\u0067\u0069\u006ea\u006c");};_ge ,_ef :=_gc .StdEncoding .DecodeString (_cce );
if _ef !=nil {return nil ,_bd .Errorf ("\u0069\u006e\u0076al\u0069\u0064\u0020\u0069\u006e\u0070\u0075\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");};_fb ,_ :=_eb .Decode ([]byte (_fcb ));if _fb ==nil {return nil ,_bd .Errorf ("\u0050\u0075\u0062\u004b\u0065\u0079\u0020\u0066\u0061\u0069\u006c\u0065\u0064");
};_cd ,_ef :=_gg .ParsePKIXPublicKey (_fb .Bytes );if _ef !=nil {return nil ,_ef ;};_gga :=_cd .(*_ggc .PublicKey );if _gga ==nil {return nil ,_bd .Errorf ("\u0050u\u0062\u004b\u0065\u0079\u0020\u0063\u006f\u006e\u0076\u0065\u0072s\u0069\u006f\u006e\u0020\u0066\u0061\u0069\u006c\u0065\u0064");
};_fd :=_de .New ();_fd .Write (_bg );_cabe :=_fd .Sum (nil );_ef =_ggc .VerifyPKCS1v15 (_gga ,_g .SHA512 ,_cabe ,_ge );if _ef !=nil {return nil ,_ef ;};return _bg ,nil ;};func SetMeteredKeyPersistentCache (val bool ){_faf ._dcb =val };func _daa (_degc ,_edg []byte )([]byte ,error ){_bde :=make ([]byte ,_gc .URLEncoding .DecodedLen (len (_edg )));
_cdca ,_efbe :=_gc .URLEncoding .Decode (_bde ,_edg );if _efbe !=nil {return nil ,_efbe ;};_bde =_bde [:_cdca ];_gdeb ,_efbe :=_cg .NewCipher (_degc );if _efbe !=nil {return nil ,_efbe ;};if len (_bde )< _cg .BlockSize {return nil ,_cc .New ("c\u0069p\u0068\u0065\u0072\u0074\u0065\u0078\u0074\u0020t\u006f\u006f\u0020\u0073ho\u0072\u0074");
};_cbcf :=_bde [:_cg .BlockSize ];_bde =_bde [_cg .BlockSize :];_cceb :=_dc .NewCFBDecrypter (_gdeb ,_cbcf );_cceb .XORKeyStream (_bde ,_bde );return _bde ,nil ;};func _bfd ()string {_cbb :=_c .Getenv ("\u0048\u004f\u004d\u0045");if len (_cbb )==0{_cbb ,_ =_c .UserHomeDir ();
};return _cbb ;};func (_efb *LicenseKey )Validate ()error {if _efb ._ff {return nil ;};if len (_efb .LicenseId )< 10{return _bd .Errorf ("i\u006e\u0076\u0061\u006c\u0069\u0064 \u006c\u0069\u0063\u0065\u006e\u0073\u0065\u003a\u0020L\u0069\u0063\u0065n\u0073e\u0020\u0049\u0064");
};if len (_efb .CustomerId )< 10{return _bd .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065:\u0020C\u0075\u0073\u0074\u006f\u006d\u0065\u0072 \u0049\u0064");};if len (_efb .CustomerName )< 1{return _bd .Errorf ("\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006c\u0069c\u0065\u006e\u0073\u0065\u003a\u0020\u0043u\u0073\u0074\u006f\u006d\u0065\u0072\u0020\u004e\u0061\u006d\u0065");
};if _geg .After (_efb .CreatedAt ){return _bd .Errorf ("\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u003a\u0020\u0043\u0072\u0065\u0061\u0074\u0065\u0064 \u0041\u0074\u0020\u0069\u0073 \u0069\u006ev\u0061\u006c\u0069\u0064");
};if _efb .ExpiresAt ==nil {_eee :=_efb .CreatedAt .AddDate (1,0,0);if _gac .After (_eee ){_eee =_gac ;};_efb .ExpiresAt =&_eee ;};if _efb .CreatedAt .After (*_efb .ExpiresAt ){return _bd .Errorf ("i\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u003a\u0020\u0043\u0072\u0065\u0061\u0074\u0065\u0064\u0020\u0041\u0074 \u0063a\u006e\u006e\u006f\u0074 \u0062\u0065 \u0047\u0072\u0065\u0061\u0074\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0045\u0078\u0070\u0069\u0072\u0065\u0073\u0020\u0041\u0074");
};if _efb .isExpired (){_dcg :="\u0054\u0068\u0065\u0020\u006c\u0069c\u0065\u006e\u0073\u0065\u0020\u0068\u0061\u0073\u0020\u0061\u006c\u0072\u0065a\u0064\u0079\u0020\u0065\u0078\u0070\u0069r\u0065\u0064\u002e\u000a"+"\u0059o\u0075\u0020\u006d\u0061y\u0020n\u0065\u0065\u0064\u0020\u0074\u006f\u0020\u0075\u0070d\u0061\u0074\u0065\u0020\u0074\u0068\u0065\u0020l\u0069\u0063\u0065\u006e\u0073\u0065\u0020\u006b\u0065\u0079\u0020t\u006f\u0020\u0074\u0068\u0065\u0020\u006e\u0065\u0077\u0065s\u0074\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020\u006b\u0065\u0079\u0020\u0066\u006f\u0072\u0020\u0079o\u0075\u0072\u0020\u006f\u0072\u0067\u0061\u006e\u0069\u007a\u0061\u0074i\u006fn\u002e\u000a"+"\u0054o\u0020\u0066\u0069\u006ed y\u006f\u0075\u0072\u0020n\u0065\u0077\u0065\u0073\u0074\u0020\u006c\u0069\u0063\u0065n\u0073\u0065\u0020\u006b\u0065\u0079\u002c\u0020\u0067\u006f\u0020\u0074\u006f\u0020\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0063l\u006f\u0075\u0064\u002e\u0075\u006e\u0069\u0064oc\u002e\u0069\u006f \u0061\u006e\u0064\u0020\u0067o\u0020t\u006f\u0020\u0074\u0068\u0065\u0020\u006c\u0069\u0063e\u006e\u0073\u0065\u0020\u006d\u0065\u006e\u0075\u002e";
return _bd .Errorf ("\u0069\u006e\u0076\u0061li\u0064\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u003a\u0020\u0025\u0073",_dcg );};if len (_efb .CreatorName )< 1{return _bd .Errorf ("\u0069\u006ev\u0061\u006c\u0069\u0064\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u003a\u0020\u0043\u0072\u0065\u0061\u0074\u006f\u0072\u0020na\u006d\u0065");
};if len (_efb .CreatorEmail )< 1{return _bd .Errorf ("\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006c\u0069c\u0065\u006e\u0073\u0065\u003a\u0020\u0043r\u0065\u0061\u0074\u006f\u0072\u0020\u0065\u006d\u0061\u0069\u006c");};if _efb .CreatedAt .After (_db ){if !_efb .UniPDF {return _bd .Errorf ("\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065:\u0020\u0054\u0068\u0069\u0073\u0020\u0055\u006e\u0069\u0044\u006f\u0063\u0020k\u0065\u0079\u0020\u0069\u0073\u0020\u0069\u006e\u0076\u0061\u006c\u0069d \u0066\u006f\u0072\u0020\u0055\u006e\u0069\u0050\u0044\u0046");
};};return nil ;};func (_ce *meteredClient )getStatus ()(meteredStatusResp ,error ){var _edb meteredStatusResp ;_caf :=_ce ._ae +"\u002fm\u0065t\u0065\u0072\u0065\u0064\u002f\u0073\u0074\u0061\u0074\u0075\u0073";var _fabb meteredStatusForm ;_bad ,_eedg :=_bed .Marshal (_fabb );
if _eedg !=nil {return _edb ,_eedg ;};_eab ,_eedg :=_deab (_bad );if _eedg !=nil {return _edb ,_eedg ;};_cgf ,_eedg :=_cb .NewRequest ("\u0050\u004f\u0053\u0054",_caf ,_eab );if _eedg !=nil {return _edb ,_eedg ;};_cgf .Header .Add ("\u0043\u006f\u006et\u0065\u006e\u0074\u002d\u0054\u0079\u0070\u0065","\u0061\u0070p\u006c\u0069\u0063a\u0074\u0069\u006f\u006e\u002f\u006a\u0073\u006f\u006e");
_cgf .Header .Add ("\u0043\u006fn\u0074\u0065\u006et\u002d\u0045\u006e\u0063\u006f\u0064\u0069\u006e\u0067","\u0067\u007a\u0069\u0070");_cgf .Header .Add ("\u0041c\u0063e\u0070\u0074\u002d\u0045\u006e\u0063\u006f\u0064\u0069\u006e\u0067","\u0067\u007a\u0069\u0070");
_cgf .Header .Add ("\u0058-\u0041\u0050\u0049\u002d\u004b\u0045Y",_ce ._bb );_aab ,_eedg :=_ce ._eed .Do (_cgf );if _eedg !=nil {return _edb ,_eedg ;};defer _aab .Body .Close ();if _aab .StatusCode !=200{return _edb ,_bd .Errorf ("\u0066\u0061i\u006c\u0065\u0064\u0020t\u006f\u0020c\u0068\u0065\u0063\u006b\u0069\u006e\u002c\u0020s\u0074\u0061\u0074\u0075\u0073\u0020\u0063\u006f\u0064\u0065\u0020\u0069s\u003a\u0020\u0025\u0064",_aab .StatusCode );
};_bccg ,_eedg :=_dae (_aab );if _eedg !=nil {return _edb ,_eedg ;};_eedg =_bed .Unmarshal (_bccg ,&_edb );if _eedg !=nil {return _edb ,_eedg ;};return _edb ,nil ;};type LicenseKey struct{LicenseId string `json:"license_id"`;CustomerId string `json:"customer_id"`;
CustomerName string `json:"customer_name"`;Tier string `json:"tier"`;CreatedAt _af .Time `json:"-"`;CreatedAtInt int64 `json:"created_at"`;ExpiresAt *_af .Time `json:"-"`;ExpiresAtInt int64 `json:"expires_at"`;CreatedBy string `json:"created_by"`;CreatorName string `json:"creator_name"`;
CreatorEmail string `json:"creator_email"`;UniPDF bool `json:"unipdf"`;UniOffice bool `json:"unioffice"`;UniHTML bool `json:"unihtml"`;Trial bool `json:"trial"`;_ff bool ;_dba string ;_dcb bool ;_fbg bool ;};func _eef ()*meteredClient {_add :=meteredClient {_ae :"h\u0074\u0074\u0070\u0073\u003a\u002f/\u0063\u006c\u006f\u0075\u0064\u002e\u0075\u006e\u0069d\u006f\u0063\u002ei\u006f/\u0061\u0070\u0069",_eed :&_cb .Client {Timeout :30*_af .Second }};
if _bdg :=_c .Getenv ("\u0055N\u0049\u0044\u004f\u0043_\u004c\u0049\u0043\u0045\u004eS\u0045_\u0053E\u0052\u0056\u0045\u0052\u005f\u0055\u0052L");_fe .HasPrefix (_bdg ,"\u0068\u0074\u0074\u0070"){_add ._ae =_bdg ;};return &_add ;};var _bgb =&_bf .Mutex {};
func MakeUnlicensedKey ()*LicenseKey {_cdc :=LicenseKey {};_cdc .CustomerName ="\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064";_cdc .Tier =LicenseTierUnlicensed ;_cdc .CreatedAt =_af .Now ().UTC ();_cdc .CreatedAtInt =_cdc .CreatedAt .Unix ();
return &_cdc ;};func (_bfe *LicenseKey )ToString ()string {if _bfe ._ff {return "M\u0065t\u0065\u0072\u0065\u0064\u0020\u0073\u0075\u0062s\u0063\u0072\u0069\u0070ti\u006f\u006e";};_bcb :=_bd .Sprintf ("\u004ci\u0063e\u006e\u0073\u0065\u0020\u0049\u0064\u003a\u0020\u0025\u0073\u000a",_bfe .LicenseId );
_bcb +=_bd .Sprintf ("\u0043\u0075s\u0074\u006f\u006de\u0072\u0020\u0049\u0064\u003a\u0020\u0025\u0073\u000a",_bfe .CustomerId );_bcb +=_bd .Sprintf ("\u0043u\u0073t\u006f\u006d\u0065\u0072\u0020N\u0061\u006de\u003a\u0020\u0025\u0073\u000a",_bfe .CustomerName );
_bcb +=_bd .Sprintf ("\u0054i\u0065\u0072\u003a\u0020\u0025\u0073\n",_bfe .Tier );_bcb +=_bd .Sprintf ("\u0043r\u0065a\u0074\u0065\u0064\u0020\u0041\u0074\u003a\u0020\u0025\u0073\u000a",_ccf .UtcTimeFormat (_bfe .CreatedAt ));if _bfe .ExpiresAt ==nil {_bcb +="\u0045x\u0070i\u0072\u0065\u0073\u0020\u0041t\u003a\u0020N\u0065\u0076\u0065\u0072\u000a";
}else {_bcb +=_bd .Sprintf ("\u0045x\u0070i\u0072\u0065\u0073\u0020\u0041\u0074\u003a\u0020\u0025\u0073\u000a",_ccf .UtcTimeFormat (*_bfe .ExpiresAt ));};_bcb +=_bd .Sprintf ("\u0043\u0072\u0065\u0061\u0074\u006f\u0072\u003a\u0020\u0025\u0073\u0020<\u0025\u0073\u003e\u000a",_bfe .CreatorName ,_bfe .CreatorEmail );
return _bcb ;};const _gega ="U\u004eI\u0050\u0044\u0046\u005f\u0043\u0055\u0053\u0054O\u004d\u0045\u0052\u005fNA\u004d\u0045";const (_dfg ="\u002d\u002d\u002d--\u0042\u0045\u0047\u0049\u004e\u0020\u0055\u004e\u0049D\u004fC\u0020L\u0049C\u0045\u004e\u0053\u0045\u0020\u004b\u0045\u0059\u002d\u002d\u002d\u002d\u002d";
_cab ="\u002d\u002d\u002d\u002d\u002d\u0045\u004e\u0044\u0020\u0055\u004e\u0049\u0044\u004f\u0043 \u004cI\u0043\u0045\u004e\u0053\u0045\u0020\u004b\u0045\u0059\u002d\u002d\u002d\u002d\u002d";);type reportState struct{Instance string `json:"inst"`;Next string `json:"n"`;
Docs int64 `json:"d"`;NumErrors int64 `json:"e"`;LimitDocs bool `json:"ld"`;RemainingDocs int64 `json:"rd"`;LastReported _af .Time `json:"lr"`;LastWritten _af .Time `json:"lw"`;Usage map[string ]int `json:"u"`;UsageLogs []interface{}`json:"ul,omitempty"`;
};var _geg =_af .Date (2010,1,1,0,0,0,0,_af .UTC );type MeteredStatus struct{OK bool ;Credits int64 ;Used int64 ;};var _faf =MakeUnlicensedKey ();var _db =_af .Date (2019,6,6,0,0,0,0,_af .UTC );type meteredStatusForm struct{};type stateLoader interface{loadState (_deag string )(reportState ,error );
updateState (_ffc ,_ab ,_dgcg string ,_efg int ,_aaf bool ,_bgf int ,_dfc int ,_aga _af .Time ,_beg map[string ]int ,_cee ...interface{})error ;};var _gac =_af .Date (2020,1,1,0,0,0,0,_af .UTC );const _cbc ="\u0055N\u0049D\u004f\u0043\u005f\u004c\u0049C\u0045\u004eS\u0045\u005f\u0044\u0049\u0052";
type meteredClient struct{_ae string ;_bb string ;_eed *_cb .Client ;};var _bdf map[string ]struct{};func _gcb ()(_ca .IP ,error ){_dfae ,_dafg :=_ca .Dial ("\u0075\u0064\u0070","\u0038\u002e\u0038\u002e\u0038\u002e\u0038\u003a\u0038\u0030");if _dafg !=nil {return nil ,_dafg ;
};defer _dfae .Close ();_bab :=_dfae .LocalAddr ().(*_ca .UDPAddr );return _bab .IP ,nil ;};func SetLicenseKey (content string ,customerName string )error {_cecd ,_gbc :=_bedd (content );if _gbc !=nil {_ccf .Log .Error ("\u004c\u0069c\u0065\u006e\u0073\u0065\u0020\u0063\u006f\u0064\u0065\u0020\u0064\u0065\u0063\u006f\u0064\u0065\u0020\u0065\u0072\u0072\u006f\u0072: \u0025\u0076",_gbc );
return _gbc ;};if !_fe .EqualFold (_cecd .CustomerName ,customerName ){_ccf .Log .Error ("L\u0069ce\u006es\u0065 \u0063\u006f\u0064\u0065\u0020i\u0073\u0073\u0075e\u0020\u002d\u0020\u0043\u0075s\u0074\u006f\u006de\u0072\u0020\u006e\u0061\u006d\u0065\u0020\u006d\u0069\u0073\u006da\u0074\u0063\u0068, e\u0078\u0070\u0065\u0063\u0074\u0065d\u0020\u0027\u0025\u0073\u0027\u002c\u0020\u0062\u0075\u0074\u0020\u0067o\u0074 \u0027\u0025\u0073\u0027",_cecd .CustomerName ,customerName );
return _bd .Errorf ("\u0063\u0075\u0073\u0074\u006fm\u0065\u0072\u0020\u006e\u0061\u006d\u0065\u0020\u006d\u0069\u0073\u006d\u0061t\u0063\u0068\u002c\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0027\u0025\u0073\u0027\u002c\u0020\u0062\u0075\u0074\u0020\u0067\u006f\u0074\u0020\u0027\u0025\u0073'",_cecd .CustomerName ,customerName );
};_gbc =_cecd .Validate ();if _gbc !=nil {_ccf .Log .Error ("\u004c\u0069\u0063\u0065\u006e\u0073e\u0020\u0063\u006f\u0064\u0065\u0020\u0076\u0061\u006c\u0069\u0064\u0061\u0074i\u006f\u006e\u0020\u0065\u0072\u0072\u006fr\u003a\u0020\u0025\u0076",_gbc );
return _gbc ;};_faf =&_cecd ;return nil ;};func GetMeteredState ()(MeteredStatus ,error ){if _faf ==nil {return MeteredStatus {},_cc .New ("\u006c\u0069\u0063\u0065ns\u0065\u0020\u006b\u0065\u0079\u0020\u006e\u006f\u0074\u0020\u0073\u0065\u0074");};if !_faf ._ff ||len (_faf ._dba )==0{return MeteredStatus {},_cc .New ("\u0061p\u0069 \u006b\u0065\u0079\u0020\u006e\u006f\u0074\u0020\u0073\u0065\u0074");
};_cea ,_fed :=_cgc .loadState (_faf ._dba );if _fed !=nil {_ccf .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_fed );return MeteredStatus {},_fed ;};if _cea .Docs > 0{_cbfa :=_adf ("","","",true );if _cbfa !=nil {return MeteredStatus {},_cbfa ;
};};_bgb .Lock ();defer _bgb .Unlock ();_gce :=_eef ();_gce ._bb =_faf ._dba ;_ecg ,_fed :=_gce .getStatus ();if _fed !=nil {return MeteredStatus {},_fed ;};if !_ecg .Valid {return MeteredStatus {},_cc .New ("\u006b\u0065\u0079\u0020\u006e\u006f\u0074\u0020\u0076\u0061\u006c\u0069\u0064");
};_dfd :=MeteredStatus {OK :true ,Credits :_ecg .OrgCredits ,Used :_ecg .OrgUsed };return _dfd ,nil ;};func _adf (_dbd string ,_ebb string ,_acd string ,_fge bool )error {if _faf ==nil {return _cc .New ("\u006e\u006f\u0020\u006c\u0069\u0063\u0065\u006e\u0073e\u0020\u006b\u0065\u0079");
};if !_faf ._ff ||len (_faf ._dba )==0{return nil ;};if len (_dbd )==0&&!_fge {return _cc .New ("\u0064\u006f\u0063\u004b\u0065\u0079\u0020\u006e\u006ft\u0020\u0073\u0065\u0074");};_bgb .Lock ();defer _bgb .Unlock ();if _bdf ==nil {_bdf =map[string ]struct{}{};
};if _ac ==nil {_ac =map[string ]int {};};_afae :=0;if len (_dbd )> 0{_ ,_ecd :=_bdf [_dbd ];if !_ecd {_bdf [_dbd ]=struct{}{};_afae ++;};if _faf ._fbg {_bce =append (_bce ,map[string ]interface{}{"\u0074\u0069\u006d\u0065":_af .Now ().String (),"\u0066\u0075\u006e\u0063":_ebb ,"\u0072\u0065\u0066":_dbd [:8],"\u0066\u0069\u006c\u0065":_acd ,"\u0063\u006f\u0073\u0074":_afae });
if _ecd &&_afae ==0{_ccf .Log .Info ("\u0025\u0073\u0020\u0052\u0065\u0066\u003a\u0020\u0025\u0073\u0020\u007c\u0020\u0025\u0073 \u007c \u004e\u006f\u0020\u0063\u0072\u0065\u0064\u0069\u0074\u0020\u0075\u0073\u0065\u0064",_af .Now ().String (),_dbd [:8],_ebb );
};};};if _afae ==0&&!_fge {return nil ;};_ac [_ebb ]++;_ebbd :=_af .Now ();_fba ,_ace :=_cgc .loadState (_faf ._dba );if _ace !=nil {_ccf .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_ace );return _ace ;};_fba .UsageLogs =append (_fba .UsageLogs ,_bce ...);
if _fba .Usage ==nil {_fba .Usage =map[string ]int {};};for _afd ,_dbdc :=range _ac {if _afd !=""{_fba .Usage [_afd ]+=_dbdc ;};};_ac =nil ;const _gbd =24*_af .Hour ;const _bge =3*24*_af .Hour ;if len (_fba .Instance )==0||_ebbd .Sub (_fba .LastReported )> _gbd ||(_fba .LimitDocs &&_fba .RemainingDocs <=_fba .Docs +int64 (_afae ))||_fge {_cec ,_bdb :=_c .Hostname ();
if _bdb !=nil {return _bdb ;};_dgb :=_fba .Docs ;_ffcf ,_daf ,_bdb :=_dfaf ();if _bdb !=nil {_ccf .Log .Debug ("\u0055\u006e\u0061b\u006c\u0065\u0020\u0074o\u0020\u0067\u0065\u0074\u0020\u006c\u006fc\u0061\u006c\u0020\u0061\u0064\u0064\u0072\u0065\u0073\u0073\u003a\u0020\u0025\u0073",_bdb .Error ());
_ffcf =append (_ffcf ,"\u0069n\u0066\u006f\u0072\u006da\u0074\u0069\u006f\u006e\u0020n\u006ft\u0020a\u0076\u0061\u0069\u006c\u0061\u0062\u006ce");_daf =append (_daf ,"\u0069n\u0066\u006f\u0072\u006da\u0074\u0069\u006f\u006e\u0020n\u006ft\u0020a\u0076\u0061\u0069\u006c\u0061\u0062\u006ce");
}else {_f .Strings (_daf );_f .Strings (_ffcf );_debf ,_bbd :=_gcb ();if _bbd !=nil {return _bbd ;};_eeca :=false ;for _ ,_addg :=range _daf {if _addg ==_debf .String (){_eeca =true ;};};if !_eeca {_daf =append (_daf ,_debf .String ());};};_bef :=_eef ();
_bef ._bb =_faf ._dba ;_dgb +=int64 (_afae );_fbag :=meteredUsageCheckinForm {Instance :_fba .Instance ,Next :_fba .Next ,UsageNumber :int (_dgb ),NumFailed :_fba .NumErrors ,Hostname :_cec ,LocalIP :_fe .Join (_daf ,"\u002c\u0020"),MacAddress :_fe .Join (_ffcf ,"\u002c\u0020"),Package :"\u0075\u006e\u0069\u0070\u0064\u0066",PackageVersion :_ccf .Version ,Usage :_fba .Usage ,IsPersistentCache :_faf ._dcb ,Timestamp :_ebbd .Unix ()};
if len (_ffcf )==0{_fbag .MacAddress ="\u006e\u006f\u006e\u0065";};if _faf ._fbg {_fbag .UsageLogs =_fba .UsageLogs ;};_ccc :=int64 (0);_ege :=_fba .NumErrors ;_edbe :=_ebbd ;_agc :=0;_eefg :=_fba .LimitDocs ;_bcg ,_bdb :=_bef .checkinUsage (_fbag );if _bdb !=nil {if _ebbd .Sub (_fba .LastReported )> _bge {if !_bcg .Success {return _cc .New (_bcg .Message );
};return _cc .New ("\u0074\u006f\u006f\u0020\u006c\u006f\u006e\u0067\u0020\u0073\u0069\u006e\u0063\u0065\u0020\u006c\u0061\u0073\u0074\u0020\u0073\u0075\u0063\u0063e\u0073\u0073\u0066\u0075\u006c \u0063\u0068e\u0063\u006b\u0069\u006e");};_ccc =_dgb ;_ege ++;
_edbe =_fba .LastReported ;}else {_eefg =_bcg .LimitDocs ;_agc =_bcg .RemainingDocs ;_ege =0;};if len (_bcg .Instance )==0{_bcg .Instance =_fbag .Instance ;};if len (_bcg .Next )==0{_bcg .Next =_fbag .Next ;};_bdb =_cgc .updateState (_bef ._bb ,_bcg .Instance ,_bcg .Next ,int (_ccc ),_eefg ,_agc ,int (_ege ),_edbe ,nil );
if _bdb !=nil {return _bdb ;};if !_bcg .Success {return _bd .Errorf ("\u0065r\u0072\u006f\u0072\u003a\u0020\u0025s",_bcg .Message );};}else {_ace =_cgc .updateState (_faf ._dba ,_fba .Instance ,_fba .Next ,int (_fba .Docs )+_afae ,_fba .LimitDocs ,int (_fba .RemainingDocs ),int (_fba .NumErrors ),_fba .LastReported ,_fba .Usage ,_fba .UsageLogs ...);
if _ace !=nil {return _ace ;};};if _faf ._fbg &&len (_dbd )> 0{_edd :="";if _acd !=""{_edd =_bd .Sprintf ("\u0046i\u006c\u0065\u0020\u0025\u0073\u0020|",_acd );};_ccf .Log .Info ("%\u0073\u0020\u007c\u0020\u0025\u0073\u0020\u0052\u0065\u0066\u003a\u0020\u0025\u0073\u0020\u007c\u0020\u0025s\u0020\u007c\u0020\u0025\u0064\u0020\u0063\u0072\u0065\u0064it\u0028\u0073\u0029 \u0075s\u0065\u0064",_ebbd .String (),_edd ,_dbd [:8],_ebb ,_afae );
};return nil ;};var _ac map[string ]int ;func _aceg (_bfc *_cb .Response )(_be .ReadCloser ,error ){var _dbc error ;var _gaa _be .ReadCloser ;switch _fe .ToLower (_bfc .Header .Get ("\u0043\u006fn\u0074\u0065\u006et\u002d\u0045\u006e\u0063\u006f\u0064\u0069\u006e\u0067")){case "\u0067\u007a\u0069\u0070":_gaa ,_dbc =_a .NewReader (_bfc .Body );
if _dbc !=nil {return _gaa ,_dbc ;};defer _gaa .Close ();default:_gaa =_bfc .Body ;};return _gaa ,nil ;};type meteredUsageCheckinForm struct{Instance string `json:"inst"`;Next string `json:"next"`;UsageNumber int `json:"usage_number"`;NumFailed int64 `json:"num_failed"`;
Hostname string `json:"hostname"`;LocalIP string `json:"local_ip"`;MacAddress string `json:"mac_address"`;Package string `json:"package"`;PackageVersion string `json:"package_version"`;Usage map[string ]int `json:"u"`;IsPersistentCache bool `json:"is_persistent_cache"`;
Timestamp int64 `json:"timestamp"`;UsageLogs []interface{}`json:"ul,omitempty"`;};type meteredStatusResp struct{Valid bool `json:"valid"`;OrgCredits int64 `json:"org_credits"`;OrgUsed int64 `json:"org_used"`;OrgRemaining int64 `json:"org_remaining"`;};
func (_cbed defaultStateHolder )loadState (_fg string )(reportState ,error ){_ccfd ,_gbfg :=_cdef ();if _gbfg !=nil {return reportState {},_gbfg ;};_gbfg =_c .MkdirAll (_ccfd ,0777);if _gbfg !=nil {return reportState {},_gbfg ;};if len (_fg )< 20{return reportState {},_cc .New ("i\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006b\u0065\u0079");
};_bee :=[]byte (_fg );_feca :=_de .Sum512_256 (_bee [:20]);_cabb :=_d .EncodeToString (_feca [:]);_cacb :=_e .Join (_ccfd ,_cabb );_da ,_gbfg :=_c .ReadFile (_cacb );if _gbfg !=nil {if _c .IsNotExist (_gbfg ){return reportState {},nil ;};_ccf .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_gbfg );
return reportState {},_cc .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0061\u0074\u0061");};const _bdc ="\u0068\u00619\u004e\u004b\u0038]\u0052\u0062\u004c\u002a\u006d\u0034\u004c\u004b\u0057";_da ,_gbfg =_daa ([]byte (_bdc ),_da );if _gbfg !=nil {return reportState {},_gbfg ;
};var _ega reportState ;_gbfg =_bed .Unmarshal (_da ,&_ega );if _gbfg !=nil {_ccf .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0064\u0061\u0074\u0061\u003a\u0020\u0025\u0076",_gbfg );return reportState {},_cc .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0061\u0074\u0061");
};return _ega ,nil ;};func _bedd (_fec string )(LicenseKey ,error ){var _dff LicenseKey ;_ccb ,_ccfg :=_dcf (_dfg ,_cab ,_fec );if _ccfg !=nil {return _dff ,_ccfg ;};_dg ,_ccfg :=_ee (_fee ,_ccb );if _ccfg !=nil {return _dff ,_ccfg ;};_ccfg =_bed .Unmarshal (_dg ,&_dff );
if _ccfg !=nil {return _dff ,_ccfg ;};_dff .CreatedAt =_af .Unix (_dff .CreatedAtInt ,0);if _dff .ExpiresAtInt > 0{_cfg :=_af .Unix (_dff .ExpiresAtInt ,0);_dff .ExpiresAt =&_cfg ;};return _dff ,nil ;};func (_fa *LicenseKey )isExpired ()bool {return _fa .getExpiryDateToCompare ().After (*_fa .ExpiresAt )};
func TrackUse (useKey string ){if _faf ==nil {return ;};if !_faf ._ff ||len (_faf ._dba )==0{return ;};if len (useKey )==0{return ;};_bgb .Lock ();defer _bgb .Unlock ();if _ac ==nil {_ac =map[string ]int {};};_ac [useKey ]++;};type defaultStateHolder struct{};
func (_cde defaultStateHolder )updateState (_agb ,_gbf ,_gf string ,_gecg int ,_dfde bool ,_cceg int ,_cabg int ,_bbe _af .Time ,_cgb map[string ]int ,_caa ...interface{})error {_bbf ,_bfed :=_cdef ();if _bfed !=nil {return _bfed ;};if len (_agb )< 20{return _cc .New ("i\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006b\u0065\u0079");
};_eec :=[]byte (_agb );_fdb :=_de .Sum512_256 (_eec [:20]);_ead :=_d .EncodeToString (_fdb [:]);_ada :=_e .Join (_bbf ,_ead );var _bbfd reportState ;_bbfd .Docs =int64 (_gecg );_bbfd .NumErrors =int64 (_cabg );_bbfd .LimitDocs =_dfde ;_bbfd .RemainingDocs =int64 (_cceg );
_bbfd .LastWritten =_af .Now ().UTC ();_bbfd .LastReported =_bbe ;_bbfd .Instance =_gbf ;_bbfd .Next =_gf ;_bbfd .Usage =_cgb ;_bbfd .UsageLogs =_caa ;_cge ,_bfed :=_bed .Marshal (_bbfd );if _bfed !=nil {return _bfed ;};const _fcba ="\u0068\u00619\u004e\u004b\u0038]\u0052\u0062\u004c\u002a\u006d\u0034\u004c\u004b\u0057";
_cge ,_bfed =_aaba ([]byte (_fcba ),_cge );if _bfed !=nil {return _bfed ;};_bfed =_c .WriteFile (_ada ,_cge ,0600);if _bfed !=nil {return _bfed ;};return nil ;};func _deab (_gdcc []byte )(_be .Reader ,error ){_gdad :=new (_gb .Buffer );_cbg :=_a .NewWriter (_gdad );
_cbg .Write (_gdcc );_fgd :=_cbg .Close ();if _fgd !=nil {return nil ,_fgd ;};return _gdad ,nil ;};var _cgc stateLoader =defaultStateHolder {};var _bce []interface{};func SetMeteredKeyUsageLogVerboseMode (val bool ){_faf ._fbg =val };func _aaba (_gde ,_baa []byte )([]byte ,error ){_aac ,_aafg :=_cg .NewCipher (_gde );
if _aafg !=nil {return nil ,_aafg ;};_dee :=make ([]byte ,_cg .BlockSize +len (_baa ));_egg :=_dee [:_cg .BlockSize ];if _ ,_fdf :=_be .ReadFull (_cf .Reader ,_egg );_fdf !=nil {return nil ,_fdf ;};_agd :=_dc .NewCFBEncrypter (_aac ,_egg );_agd .XORKeyStream (_dee [_cg .BlockSize :],_baa );
_aec :=make ([]byte ,_gc .URLEncoding .EncodedLen (len (_dee )));_gc .URLEncoding .Encode (_aec ,_dee );return _aec ,nil ;};func _dcf (_ed string ,_dd string ,_ebf string )(string ,error ){_aa :=_fe .Index (_ebf ,_ed );if _aa ==-1{return "",_bd .Errorf ("\u0068\u0065a\u0064\u0065\u0072 \u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};_cade :=_fe .Index (_ebf ,_dd );if _cade ==-1{return "",_bd .Errorf ("\u0066\u006fo\u0074\u0065\u0072 \u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};_ba :=_aa +len (_ed )+1;return _ebf [_ba :_cade -1],nil ;};func GetLicenseKey ()*LicenseKey {if _faf ==nil {return nil ;
};_cabeg :=*_faf ;return &_cabeg ;};func (_gec *meteredClient )checkinUsage (_aaa meteredUsageCheckinForm )(meteredUsageCheckinResp ,error ){_aaa .Package ="\u0075\u006e\u0069\u0070\u0064\u0066";_aaa .PackageVersion =_ccf .Version ;var _ffg meteredUsageCheckinResp ;
_ag :=_gec ._ae +"\u002f\u006d\u0065\u0074er\u0065\u0064\u002f\u0075\u0073\u0061\u0067\u0065\u005f\u0063\u0068\u0065\u0063\u006bi\u006e";_dgc ,_addc :=_bed .Marshal (_aaa );if _addc !=nil {return _ffg ,_addc ;};_gd ,_addc :=_deab (_dgc );if _addc !=nil {return _ffg ,_addc ;
};_agg ,_addc :=_cb .NewRequest ("\u0050\u004f\u0053\u0054",_ag ,_gd );if _addc !=nil {return _ffg ,_addc ;};_agg .Header .Add ("\u0043\u006f\u006et\u0065\u006e\u0074\u002d\u0054\u0079\u0070\u0065","\u0061\u0070p\u006c\u0069\u0063a\u0074\u0069\u006f\u006e\u002f\u006a\u0073\u006f\u006e");
_agg .Header .Add ("\u0043\u006fn\u0074\u0065\u006et\u002d\u0045\u006e\u0063\u006f\u0064\u0069\u006e\u0067","\u0067\u007a\u0069\u0070");_agg .Header .Add ("\u0041c\u0063e\u0070\u0074\u002d\u0045\u006e\u0063\u006f\u0064\u0069\u006e\u0067","\u0067\u007a\u0069\u0070");
_agg .Header .Add ("\u0058-\u0041\u0050\u0049\u002d\u004b\u0045Y",_gec ._bb );_gdc ,_addc :=_gec ._eed .Do (_agg );if _addc !=nil {return _ffg ,_addc ;};defer _gdc .Body .Close ();if _gdc .StatusCode !=200{_ceg ,_efe :=_dae (_gdc );if _efe !=nil {return _ffg ,_efe ;
};_efe =_bed .Unmarshal (_ceg ,&_ffg );if _efe !=nil {return _ffg ,_efe ;};return _ffg ,_bd .Errorf ("\u0066\u0061i\u006c\u0065\u0064\u0020t\u006f\u0020c\u0068\u0065\u0063\u006b\u0069\u006e\u002c\u0020s\u0074\u0061\u0074\u0075\u0073\u0020\u0063\u006f\u0064\u0065\u0020\u0069s\u003a\u0020\u0025\u0064",_gdc .StatusCode );
};_dda :=_gdc .Header .Get ("\u0058\u002d\u0055\u0043\u002d\u0053\u0069\u0067\u006ea\u0074\u0075\u0072\u0065");_dgg :=_eada (_aaa .MacAddress ,string (_dgc ));if _dgg !=_dda {_ccf .Log .Error ("I\u006e\u0076\u0061l\u0069\u0064\u0020\u0072\u0065\u0073\u0070\u006f\u006e\u0073\u0065\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u002c\u0020\u0073\u0065t\u0020\u0074\u0068e\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020\u0073\u0065\u0072\u0076e\u0072\u0020\u0074\u006f \u0068\u0074\u0074\u0070s\u003a\u002f\u002f\u0063\u006c\u006f\u0075\u0064\u002e\u0075\u006e\u0069\u0064\u006f\u0063\u002e\u0069o\u002f\u0061\u0070\u0069");
return _ffg ,_cc .New ("\u0066\u0061\u0069l\u0065\u0064\u0020\u0074\u006f\u0020\u0063\u0068\u0065\u0063\u006b\u0069\u006e\u002c\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0073\u0065\u0072\u0076\u0065\u0072 \u0072\u0065\u0073\u0070\u006f\u006e\u0073\u0065");
};_dea ,_addc :=_dae (_gdc );if _addc !=nil {return _ffg ,_addc ;};_addc =_bed .Unmarshal (_dea ,&_ffg );if _addc !=nil {return _ffg ,_addc ;};return _ffg ,nil ;};func init (){_addga :=_c .Getenv (_gege );_gca :=_c .Getenv (_gega );if len (_addga )==0||len (_gca )==0{return ;
};_dffg ,_fdd :=_c .ReadFile (_addga );if _fdd !=nil {_ccf .Log .Error ("\u0055\u006eab\u006c\u0065\u0020t\u006f\u0020\u0072\u0065ad \u006cic\u0065\u006e\u0073\u0065\u0020\u0063\u006fde\u0020\u0066\u0069\u006c\u0065\u003a\u0020%\u0076",_fdd );return ;};
_fdd =SetLicenseKey (string (_dffg ),_gca );if _fdd !=nil {_ccf .Log .Error ("\u0055\u006e\u0061b\u006c\u0065\u0020\u0074o\u0020\u006c\u006f\u0061\u0064\u0020\u006ci\u0063\u0065\u006e\u0073\u0065\u0020\u0063\u006f\u0064\u0065\u003a\u0020\u0025\u0076",_fdd );
return ;};};func _cdef ()(string ,error ){_fgc :=_fe .TrimSpace (_c .Getenv (_cbc ));if _fgc ==""{_ccf .Log .Debug ("\u0024\u0025\u0073\u0020e\u006e\u0076\u0069\u0072\u006f\u006e\u006d\u0065\u006e\u0074\u0020\u0076\u0061\u0072\u0069\u0061\u0062l\u0065\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e\u0020\u0057\u0069\u006c\u006c\u0020\u0075\u0073\u0065\u0020\u0068\u006f\u006d\u0065\u0020\u0064\u0069\u0072\u0065\u0063\u0074\u006f\u0072\u0079\u0020\u0074\u006f\u0020s\u0074\u006f\u0072\u0065\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020in\u0066o\u0072\u006d\u0061\u0074\u0069\u006f\u006e\u002e",_cbc );
_fda :=_bfd ();if len (_fda )==0{return "",_bd .Errorf ("r\u0065\u0071\u0075\u0069\u0072\u0065\u0064\u0020\u0024\u0025\u0073\u0020\u0065\u006e\u0076\u0069\u0072\u006f\u006e\u006d\u0065\u006e\u0074\u0020\u0076\u0061r\u0069a\u0062\u006c\u0065\u0020o\u0072\u0020h\u006f\u006d\u0065\u0020\u0064\u0069\u0072\u0065\u0063\u0074\u006f\u0072\u0079\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064",_cbc );
};_fgc =_e .Join (_fda ,"\u002eu\u006e\u0069\u0064\u006f\u0063");};_cae :=_c .MkdirAll (_fgc ,0777);if _cae !=nil {return "",_cae ;};return _fgc ,nil ;};func _ea (_cbf string ,_cbe []byte )(string ,error ){_gcd ,_ :=_eb .Decode ([]byte (_cbf ));if _gcd ==nil {return "",_bd .Errorf ("\u0050\u0072\u0069\u0076\u004b\u0065\u0079\u0020\u0066a\u0069\u006c\u0065\u0064");
};_fc ,_bc :=_gg .ParsePKCS1PrivateKey (_gcd .Bytes );if _bc !=nil {return "",_bc ;};_dfa :=_de .New ();_dfa .Write (_cbe );_cgd :=_dfa .Sum (nil );_afa ,_bc :=_ggc .SignPKCS1v15 (_cf .Reader ,_fc ,_g .SHA512 ,_cgd );if _bc !=nil {return "",_bc ;};_ad :=_gc .StdEncoding .EncodeToString (_cbe );
_ad +="\u000a\u002b\u000a";_ad +=_gc .StdEncoding .EncodeToString (_afa );return _ad ,nil ;};const (LicenseTierUnlicensed ="\u0075\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064";LicenseTierCommunity ="\u0063o\u006d\u006d\u0075\u006e\u0069\u0074y";
LicenseTierIndividual ="\u0069\u006e\u0064\u0069\u0076\u0069\u0064\u0075\u0061\u006c";LicenseTierBusiness ="\u0062\u0075\u0073\u0069\u006e\u0065\u0073\u0073";);type meteredUsageCheckinResp struct{Instance string `json:"inst"`;Next string `json:"next"`;
Success bool `json:"success"`;Message string `json:"message"`;RemainingDocs int `json:"rd"`;LimitDocs bool `json:"ld"`;};func _eada (_bdbd ,_acfg string )string {_fddf :=[]byte (_bdbd );_dgd :=_afc .New (_df .New ,_fddf );_dgd .Write ([]byte (_acfg ));
return _gc .StdEncoding .EncodeToString (_dgd .Sum (nil ));};func (_eg *LicenseKey )getExpiryDateToCompare ()_af .Time {if _eg .Trial {return _af .Now ().UTC ();};return _ccf .ReleasedAt ;};func _dae (_gdg *_cb .Response )([]byte ,error ){var _edc []byte ;
_cgcf ,_ggd :=_aceg (_gdg );if _ggd !=nil {return _edc ,_ggd ;};return _be .ReadAll (_cgcf );};func (_deb *LicenseKey )TypeToString ()string {if _deb ._ff {return "M\u0065t\u0065\u0072\u0065\u0064\u0020\u0073\u0075\u0062s\u0063\u0072\u0069\u0070ti\u006f\u006e";
};if _deb .Tier ==LicenseTierUnlicensed {return "\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064";};if _deb .Tier ==LicenseTierCommunity {return "\u0041\u0047PL\u0076\u0033\u0020O\u0070\u0065\u006e\u0020Sou\u0072ce\u0020\u0043\u006f\u006d\u006d\u0075\u006eit\u0079\u0020\u004c\u0069\u0063\u0065\u006es\u0065";
};if _deb .Tier ==LicenseTierIndividual ||_deb .Tier =="\u0069\u006e\u0064i\u0065"{return "\u0043\u006f\u006dm\u0065\u0072\u0063\u0069a\u006c\u0020\u004c\u0069\u0063\u0065\u006es\u0065\u0020\u002d\u0020\u0049\u006e\u0064\u0069\u0076\u0069\u0064\u0075\u0061\u006c";
};return "\u0043\u006fm\u006d\u0065\u0072\u0063\u0069\u0061\u006c\u0020\u004c\u0069\u0063\u0065\u006e\u0073\u0065\u0020\u002d\u0020\u0042\u0075\u0073\u0069ne\u0073\u0073";};const _gege ="\u0055\u004e\u0049\u0050DF\u005f\u004c\u0049\u0043\u0045\u004e\u0053\u0045\u005f\u0050\u0041\u0054\u0048";
