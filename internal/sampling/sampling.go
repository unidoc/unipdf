//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package sampling ;import (_b "github.com/unidoc/unipdf/v4/internal/bitwise";_ag "github.com/unidoc/unipdf/v4/internal/imageutil";_e "io";);func NewReader (img _ag .ImageBase )*Reader {return &Reader {_adg :_b .NewReader (img .Data ),_g :img ,_ef :img .ColorComponents ,_gc :img .BytesPerLine *8!=img .ColorComponents *img .BitsPerComponent *img .Width };
};type SampleWriter interface{WriteSample (_db uint32 )error ;WriteSamples (_bdb []uint32 )error ;};func (_bbf *Reader )ReadSamples (samples []uint32 )(_c error ){for _gf :=0;_gf < len (samples );_gf ++{samples [_gf ],_c =_bbf .ReadSample ();if _c !=nil {return _c ;
};};return nil ;};func NewWriter (img _ag .ImageBase )*Writer {return &Writer {_gfcb :_b .NewWriterMSB (img .Data ),_ec :img ,_cd :img .ColorComponents ,_ee :img .BytesPerLine *8!=img .ColorComponents *img .BitsPerComponent *img .Width };};type SampleReader interface{ReadSample ()(uint32 ,error );
ReadSamples (_ad []uint32 )error ;};func ResampleUint32 (data []uint32 ,bitsPerInputSample int ,bitsPerOutputSample int )[]uint32 {var _dd []uint32 ;_ab :=bitsPerOutputSample ;var _agd uint32 ;var _ac uint32 ;_dac :=0;_acb :=0;_fad :=0;for _fad < len (data ){if _dac > 0{_gfc :=_dac ;
if _ab < _gfc {_gfc =_ab ;};_agd =(_agd <<uint (_gfc ))|(_ac >>uint (bitsPerInputSample -_gfc ));_dac -=_gfc ;if _dac > 0{_ac =_ac <<uint (_gfc );}else {_ac =0;};_ab -=_gfc ;if _ab ==0{_dd =append (_dd ,_agd );_ab =bitsPerOutputSample ;_agd =0;_acb ++;
};}else {_adf :=data [_fad ];_fad ++;_bf :=bitsPerInputSample ;if _ab < _bf {_bf =_ab ;};_dac =bitsPerInputSample -_bf ;_agd =(_agd <<uint (_bf ))|(_adf >>uint (_dac ));if _bf < bitsPerInputSample {_ac =_adf <<uint (_bf );};_ab -=_bf ;if _ab ==0{_dd =append (_dd ,_agd );
_ab =bitsPerOutputSample ;_agd =0;_acb ++;};};};for _dac >=bitsPerOutputSample {_gcag :=_dac ;if _ab < _gcag {_gcag =_ab ;};_agd =(_agd <<uint (_gcag ))|(_ac >>uint (bitsPerInputSample -_gcag ));_dac -=_gcag ;if _dac > 0{_ac =_ac <<uint (_gcag );}else {_ac =0;
};_ab -=_gcag ;if _ab ==0{_dd =append (_dd ,_agd );_ab =bitsPerOutputSample ;_agd =0;_acb ++;};};if _ab > 0&&_ab < bitsPerOutputSample {_agd <<=uint (_ab );_dd =append (_dd ,_agd );};return _dd ;};type Reader struct{_g _ag .ImageBase ;_adg *_b .Reader ;
_d ,_bb ,_ef int ;_gc bool ;};func (_cf *Writer )WriteSample (sample uint32 )error {if _ ,_ce :=_cf ._gfcb .WriteBits (uint64 (sample ),_cf ._ec .BitsPerComponent );_ce !=nil {return _ce ;};_cf ._cd --;if _cf ._cd ==0{_cf ._cd =_cf ._ec .ColorComponents ;
_cf ._baf ++;};if _cf ._baf ==_cf ._ec .Width {if _cf ._ee {_cf ._gfcb .FinishByte ();};_cf ._baf =0;};return nil ;};func (_abb *Writer )WriteSamples (samples []uint32 )error {for _gcc :=0;_gcc < len (samples );_gcc ++{if _bff :=_abb .WriteSample (samples [_gcc ]);
_bff !=nil {return _bff ;};};return nil ;};func ResampleBytes (data []byte ,bitsPerSample int )[]uint32 {var _gd []uint32 ;_f :=bitsPerSample ;var _cc uint32 ;var _fg byte ;_fa :=0;_ba :=0;_bd :=0;for _bd < len (data ){if _fa > 0{_gca :=_fa ;if _f < _gca {_gca =_f ;
};_cc =(_cc <<uint (_gca ))|uint32 (_fg >>uint (8-_gca ));_fa -=_gca ;if _fa > 0{_fg =_fg <<uint (_gca );}else {_fg =0;};_f -=_gca ;if _f ==0{_gd =append (_gd ,_cc );_f =bitsPerSample ;_cc =0;_ba ++;};}else {_ga :=data [_bd ];_bd ++;_be :=8;if _f < _be {_be =_f ;
};_fa =8-_be ;_cc =(_cc <<uint (_be ))|uint32 (_ga >>uint (_fa ));if _be < 8{_fg =_ga <<uint (_be );};_f -=_be ;if _f ==0{_gd =append (_gd ,_cc );_f =bitsPerSample ;_cc =0;_ba ++;};};};for _fa >=bitsPerSample {_da :=_fa ;if _f < _da {_da =_f ;};_cc =(_cc <<uint (_da ))|uint32 (_fg >>uint (8-_da ));
_fa -=_da ;if _fa > 0{_fg =_fg <<uint (_da );}else {_fg =0;};_f -=_da ;if _f ==0{_gd =append (_gd ,_cc );_f =bitsPerSample ;_cc =0;_ba ++;};};return _gd ;};type Writer struct{_ec _ag .ImageBase ;_gfcb *_b .Writer ;_baf ,_cd int ;_ee bool ;};func (_df *Reader )ReadSample ()(uint32 ,error ){if _df ._bb ==_df ._g .Height {return 0,_e .EOF ;
};_efe ,_bc :=_df ._adg .ReadBits (byte (_df ._g .BitsPerComponent ));if _bc !=nil {return 0,_bc ;};_df ._ef --;if _df ._ef ==0{_df ._ef =_df ._g .ColorComponents ;_df ._d ++;};if _df ._d ==_df ._g .Width {if _df ._gc {_df ._adg .ConsumeRemainingBits ();
};_df ._d =0;_df ._bb ++;};return uint32 (_efe ),nil ;};