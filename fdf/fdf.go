//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_b "bufio";_fe "bytes";_ad "encoding/hex";_c "errors";_fg "fmt";_d "github.com/unidoc/unipdf/v4/common";_bfc "github.com/unidoc/unipdf/v4/core";_eg "io";_bf "os";_fad "regexp";_e "sort";_fa "strconv";_f "strings";);func (_dce *fdfParser )parseBool ()(_bfc .PdfObjectBool ,error ){_gcg ,_afe :=_dce ._cec .Peek (4);
if _afe !=nil {return _bfc .PdfObjectBool (false ),_afe ;};if (len (_gcg )>=4)&&(string (_gcg [:4])=="\u0074\u0072\u0075\u0065"){_dce ._cec .Discard (4);return _bfc .PdfObjectBool (true ),nil ;};_gcg ,_afe =_dce ._cec .Peek (5);if _afe !=nil {return _bfc .PdfObjectBool (false ),_afe ;
};if (len (_gcg )>=5)&&(string (_gcg [:5])=="\u0066\u0061\u006cs\u0065"){_dce ._cec .Discard (5);return _bfc .PdfObjectBool (false ),nil ;};return _bfc .PdfObjectBool (false ),_c .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");
};func (_gfg *fdfParser )trace (_eecf _bfc .PdfObject )_bfc .PdfObject {switch _dfd :=_eecf .(type ){case *_bfc .PdfObjectReference :_bed ,_bee :=_gfg ._fbf [_dfd .ObjectNumber ].(*_bfc .PdfIndirectObject );if _bee {return _bed .PdfObject ;};_d .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
return nil ;case *_bfc .PdfIndirectObject :return _dfd .PdfObject ;};return _eecf ;};func (_ab *fdfParser )setFileOffset (_ace int64 ){_ab ._fab .Seek (_ace ,_eg .SeekStart );_ab ._cec =_b .NewReader (_ab ._fab );};func (_acg *fdfParser )parseDict ()(*_bfc .PdfObjectDictionary ,error ){_d .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");
_egg :=_bfc .MakeDict ();_cegc ,_ :=_acg ._cec .ReadByte ();if _cegc !='<'{return nil ,_c .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_cegc ,_ =_acg ._cec .ReadByte ();if _cegc !='<'{return nil ,_c .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");
};for {_acg .skipSpaces ();_acg .skipComments ();_dff ,_fgfa :=_acg ._cec .Peek (2);if _fgfa !=nil {return nil ,_fgfa ;};_d .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_dff ),string (_dff ));
if (_dff [0]=='>')&&(_dff [1]=='>'){_d .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");_acg ._cec .ReadByte ();_acg ._cec .ReadByte ();break ;};_d .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");
_afeg ,_fgfa :=_acg .parseName ();_d .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_afeg );if _fgfa !=nil {_d .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_fgfa );
return nil ,_fgfa ;};if len (_afeg )> 4&&_afeg [len (_afeg )-4:]=="\u006e\u0075\u006c\u006c"{_cbc :=_afeg [0:len (_afeg )-4];_d .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_afeg );
_d .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_cbc );_acg .skipSpaces ();_aag ,_ :=_acg ._cec .Peek (1);if _aag [0]=='/'{_egg .Set (_cbc ,_bfc .MakeNull ());continue ;};};_acg .skipSpaces ();
_feb ,_fgfa :=_acg .parseObject ();if _fgfa !=nil {return nil ,_fgfa ;};_egg .Set (_afeg ,_feb );_d .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_afeg ,_feb .String ());};_d .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");
return _egg ,nil ;};

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_bfc .PdfObject ,error ){_dcd ,_dg :=fdf .FieldDictionaries ();if _dg !=nil {return nil ,_dg ;};var _cfg []string ;for _cg :=range _dcd {_cfg =append (_cfg ,_cg );};_e .Strings (_cfg );_add :=map[string ]_bfc .PdfObject {};
for _ ,_dcc :=range _cfg {_ce :=_dcd [_dcc ];_fec :=_bfc .TraceToDirectObject (_ce .Get ("\u0056"));_add [_dcc ]=_fec ;};return _add ,nil ;};func (_edc *fdfParser )readAtLeast (_dca []byte ,_fgf int )(int ,error ){_bd :=_fgf ;_fb :=0;_cd :=0;for _bd > 0{_bg ,_fcc :=_edc ._cec .Read (_dca [_fb :]);
if _fcc !=nil {_d .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_bg ,_cd ,_fcc .Error ());return _fb ,_c .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");
};_cd ++;_fb +=_bg ;_bd -=_bg ;};return _fb ,nil ;};func (_bcb *fdfParser )parse ()error {_bcb ._fab .Seek (0,_eg .SeekStart );_bcb ._cec =_b .NewReader (_bcb ._fab );for {_bcb .skipComments ();_fdcg ,_dead :=_bcb ._cec .Peek (20);if _dead !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return _dead ;};if _f .HasPrefix (string (_fdcg ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_bcb ._cec .Discard (7);_bcb .skipSpaces ();_bcb .skipComments ();_aagb ,_ :=_bcb .parseDict ();_bcb ._bgb =_aagb ;break ;};_dfb :=_da .FindStringSubmatchIndex (string (_fdcg ));
if len (_dfb )< 6{_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_fdcg ));
return _c .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_aca ,_dead :=_bcb .parseIndirectObject ();if _dead !=nil {return _dead ;};switch _bdc :=_aca .(type ){case *_bfc .PdfIndirectObject :_bcb ._fbf [_bdc .ObjectNumber ]=_bdc ;case *_bfc .PdfObjectStream :_bcb ._fbf [_bdc .ObjectNumber ]=_bdc ;default:return _c .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};var _cga =_fad .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");func (_dbg *fdfParser )parseHexString ()(*_bfc .PdfObjectString ,error ){_dbg ._cec .ReadByte ();var _ceee _fe .Buffer ;
for {_ceg ,_fee :=_dbg ._cec .Peek (1);if _fee !=nil {return _bfc .MakeHexString (""),_fee ;};if _ceg [0]=='>'{_dbg ._cec .ReadByte ();break ;};_fag ,_ :=_dbg ._cec .ReadByte ();if !_bfc .IsWhiteSpace (_fag ){_ceee .WriteByte (_fag );};};if _ceee .Len ()%2==1{_ceee .WriteRune ('0');
};_gea ,_eaa :=_ad .DecodeString (_ceee .String ());if _eaa !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_ceee .String ());
return _bfc .MakeHexString (""),nil ;};return _bfc .MakeHexString (string (_gea )),nil ;};

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_bfc .PdfObjectDictionary ,error ){_ae :=map[string ]*_bfc .PdfObjectDictionary {};for _dd :=0;_dd < fdf ._cfa .Len ();_dd ++{_ed ,_adb :=_bfc .GetDict (fdf ._cfa .Get (_dd ));if _adb {_ba ,_ :=_bfc .GetString (_ed .Get ("\u0054"));
if _ba !=nil {_ae [_ba .Str ()]=_ed ;};};};return _ae ,nil ;};var _da =_fad .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");var _gcf =_fad .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");
func (_bbeg *fdfParser )parseArray ()(*_bfc .PdfObjectArray ,error ){_gaf :=_bfc .MakeArray ();_bbeg ._cec .ReadByte ();for {_bbeg .skipSpaces ();_agde ,_gba :=_bbeg ._cec .Peek (1);if _gba !=nil {return _gaf ,_gba ;};if _agde [0]==']'{_bbeg ._cec .ReadByte ();
break ;};_bae ,_gba :=_bbeg .parseObject ();if _gba !=nil {return _gaf ,_gba ;};_gaf .Append (_bae );};return _gaf ,nil ;};type fdfParser struct{_ee int ;_eeg int ;_fbf map[int64 ]_bfc .PdfObject ;_fab _eg .ReadSeeker ;_cec *_b .Reader ;_dcg int64 ;_bgb *_bfc .PdfObjectDictionary ;
};func (_cgb *fdfParser )readComment ()(string ,error ){var _df _fe .Buffer ;_ ,_eee :=_cgb .skipSpaces ();if _eee !=nil {return _df .String (),_eee ;};_dgc :=true ;for {_age ,_ff :=_cgb ._cec .Peek (1);if _ff !=nil {_d .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_ff .Error ());
return _df .String (),_ff ;};if _dgc &&_age [0]!='%'{return _df .String (),_c .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");};_dgc =false ;if (_age [0]!='\r')&&(_age [0]!='\n'){_bef ,_ :=_cgb ._cec .ReadByte ();
_df .WriteByte (_bef );}else {break ;};};return _df .String (),nil ;};var _cfb =_fad .MustCompile ("\u0025\u0025\u0045O\u0046");func (_fcd *fdfParser )parseString ()(*_bfc .PdfObjectString ,error ){_fcd ._cec .ReadByte ();var _aa _fe .Buffer ;_fae :=1;
for {_gd ,_fac :=_fcd ._cec .Peek (1);if _fac !=nil {return _bfc .MakeString (_aa .String ()),_fac ;};if _gd [0]=='\\'{_fcd ._cec .ReadByte ();_ddb ,_bga :=_fcd ._cec .ReadByte ();if _bga !=nil {return _bfc .MakeString (_aa .String ()),_bga ;};if _bfc .IsOctalDigit (_ddb ){_cge ,_dbfa :=_fcd ._cec .Peek (2);
if _dbfa !=nil {return _bfc .MakeString (_aa .String ()),_dbfa ;};var _bbe []byte ;_bbe =append (_bbe ,_ddb );for _ ,_cca :=range _cge {if _bfc .IsOctalDigit (_cca ){_bbe =append (_bbe ,_cca );}else {break ;};};_fcd ._cec .Discard (len (_bbe )-1);_d .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_bbe );
_faf ,_dbfa :=_fa .ParseUint (string (_bbe ),8,32);if _dbfa !=nil {return _bfc .MakeString (_aa .String ()),_dbfa ;};_aa .WriteByte (byte (_faf ));continue ;};switch _ddb {case 'n':_aa .WriteRune ('\n');case 'r':_aa .WriteRune ('\r');case 't':_aa .WriteRune ('\t');
case 'b':_aa .WriteRune ('\b');case 'f':_aa .WriteRune ('\f');case '(':_aa .WriteRune ('(');case ')':_aa .WriteRune (')');case '\\':_aa .WriteRune ('\\');};continue ;}else if _gd [0]=='('{_fae ++;}else if _gd [0]==')'{_fae --;if _fae ==0{_fcd ._cec .ReadByte ();
break ;};};_ga ,_ :=_fcd ._cec .ReadByte ();_aa .WriteByte (_ga );};return _bfc .MakeString (_aa .String ()),nil ;};func (_caa *fdfParser )skipComments ()error {if _ ,_eda :=_caa .skipSpaces ();_eda !=nil {return _eda ;};_fga :=true ;for {_eb ,_cgf :=_caa ._cec .Peek (1);
if _cgf !=nil {_d .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_cgf .Error ());return _cgf ;};if _fga &&_eb [0]!='%'{return nil ;};_fga =false ;if (_eb [0]!='\r')&&(_eb [0]!='\n'){_caa ._cec .ReadByte ();}else {break ;};};return _caa .skipComments ();
};func _bbbd (_baf string )(*fdfParser ,error ){_faed :=fdfParser {};_bdd :=[]byte (_baf );_aee :=_fe .NewReader (_bdd );_faed ._fab =_aee ;_faed ._fbf =map[int64 ]_bfc .PdfObject {};_abg :=_b .NewReader (_aee );_faed ._cec =_abg ;_faed ._dcg =int64 (len (_baf ));
return &_faed ,_faed .parse ();};func (_gg *fdfParser )parseNull ()(_bfc .PdfObjectNull ,error ){_ ,_bfe :=_gg ._cec .Discard (4);return _bfc .PdfObjectNull {},_bfe ;};func (_afc *fdfParser )parseFdfVersion ()(int ,int ,error ){_afc ._fab .Seek (0,_eg .SeekStart );
_ffc :=20;_eec :=make ([]byte ,_ffc );_afc ._fab .Read (_eec );_bbeb :=_ef .FindStringSubmatch (string (_eec ));if len (_bbeb )< 3{_eaae ,_cfgg ,_dfe :=_afc .seekFdfVersionTopDown ();if _dfe !=nil {_d .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");
return 0,0,_dfe ;};return _eaae ,_cfgg ,nil ;};_daf ,_bec :=_fa .Atoi (_bbeb [1]);if _bec !=nil {return 0,0,_bec ;};_gdd ,_bec :=_fa .Atoi (_bbeb [2]);if _bec !=nil {return 0,0,_bec ;};_d .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_daf ,_gdd );
return _daf ,_gdd ,nil ;};func (_gcc *fdfParser )parseIndirectObject ()(_bfc .PdfObject ,error ){_efg :=_bfc .PdfIndirectObject {};_d .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");_cae ,_cdff :=_gcc ._cec .Peek (20);
if _cdff !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");return &_efg ,_cdff ;};_d .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_cae ));
_aea :=_da .FindStringSubmatchIndex (string (_cae ));if len (_aea )< 6{_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_cae ));
return &_efg ,_c .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_gcc ._cec .Discard (_aea [0]);_d .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_aea );_deb :=_aea [1]-_aea [0];_ged :=make ([]byte ,_deb );_ ,_cdff =_gcc .readAtLeast (_ged ,_deb );if _cdff !=nil {_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_cdff );
return nil ,_cdff ;};_d .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_ged );_dbb :=_da .FindStringSubmatch (string (_ged ));if len (_dbb )< 3{_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_ged ));
return &_efg ,_c .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_ebb ,_ :=_fa .Atoi (_dbb [1]);_agfc ,_ :=_fa .Atoi (_dbb [2]);_efg .ObjectNumber =int64 (_ebb );_efg .GenerationNumber =int64 (_agfc );for {_bcd ,_cbd :=_gcc ._cec .Peek (2);if _cbd !=nil {return &_efg ,_cbd ;};_d .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_bcd ),string (_bcd ));
if _bfc .IsWhiteSpace (_bcd [0]){_gcc .skipSpaces ();}else if _bcd [0]=='%'{_gcc .skipComments ();}else if (_bcd [0]=='<')&&(_bcd [1]=='<'){_d .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_efg .PdfObject ,_cbd =_gcc .parseDict ();
_d .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_cbd );if _cbd !=nil {return &_efg ,_cbd ;};_d .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_bcd [0]=='/')||(_bcd [0]=='(')||(_bcd [0]=='[')||(_bcd [0]=='<'){_efg .PdfObject ,_cbd =_gcc .parseObject ();if _cbd !=nil {return &_efg ,_cbd ;};_d .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _bcd [0]=='e'{_fbab ,_deg :=_gcc .readTextLine ();if _deg !=nil {return nil ,_deg ;};if len (_fbab )>=6&&_fbab [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _bcd [0]=='s'{_bcd ,_ =_gcc ._cec .Peek (10);if string (_bcd [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_daa :=6;
if len (_bcd )> 6{if _bfc .IsWhiteSpace (_bcd [_daa ])&&_bcd [_daa ]!='\r'&&_bcd [_daa ]!='\n'{_d .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_daa ++;};switch _bcd [_daa ]{case '\r':_daa ++;if _bcd [_daa ]=='\n'{_daa ++;};case '\n':_daa ++;};};_gcc ._cec .Discard (_daa );_gf ,_adbe :=_efg .PdfObject .(*_bfc .PdfObjectDictionary );if !_adbe {return nil ,_c .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_d .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_gf );_gbb ,_gef :=_gf .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_bfc .PdfObjectInteger );if !_gef {return nil ,_c .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_cege :=*_gbb ;if _cege < 0{return nil ,_c .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_cege )> _gcc ._dcg {_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_c .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_cgg :=make ([]byte ,_cege );
_ ,_cbd =_gcc .readAtLeast (_cgg ,int (_cege ));if _cbd !=nil {_d .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_cgg ),_cgg );_d .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_cbd );
return nil ,_cbd ;};_egc :=_bfc .PdfObjectStream {};_egc .Stream =_cgg ;_egc .PdfObjectDictionary =_efg .PdfObject .(*_bfc .PdfObjectDictionary );_egc .ObjectNumber =_efg .ObjectNumber ;_egc .GenerationNumber =_efg .GenerationNumber ;_gcc .skipSpaces ();
_gcc ._cec .Discard (9);_gcc .skipSpaces ();return &_egc ,nil ;};};_efg .PdfObject ,_cbd =_gcc .parseObject ();return &_efg ,_cbd ;};};_d .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");
return &_efg ,nil ;};func (_bdab *fdfParser )parseName ()(_bfc .PdfObjectName ,error ){var _dada _fe .Buffer ;_cag :=false ;for {_agb ,_af :=_bdab ._cec .Peek (1);if _af ==_eg .EOF {break ;};if _af !=nil {return _bfc .PdfObjectName (_dada .String ()),_af ;
};if !_cag {switch _agb [0]{case '/':_cag =true ;_bdab ._cec .ReadByte ();case '%':_bdab .readComment ();_bdab .skipSpaces ();default:_d .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_agb ,_agb );
return _bfc .PdfObjectName (_dada .String ()),_fg .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_agb [0]);};}else {if _bfc .IsWhiteSpace (_agb [0]){break ;}else if (_agb [0]=='/')||(_agb [0]=='[')||(_agb [0]=='(')||(_agb [0]==']')||(_agb [0]=='<')||(_agb [0]=='>'){break ;
}else if _agb [0]=='#'{_gcb ,_cb :=_bdab ._cec .Peek (3);if _cb !=nil {return _bfc .PdfObjectName (_dada .String ()),_cb ;};_bdab ._cec .Discard (3);_fd ,_cb :=_ad .DecodeString (string (_gcb [1:3]));if _cb !=nil {return _bfc .PdfObjectName (_dada .String ()),_cb ;
};_dada .Write (_fd );}else {_aeb ,_ :=_bdab ._cec .ReadByte ();_dada .WriteByte (_aeb );};};};return _bfc .PdfObjectName (_dada .String ()),nil ;};func _bag (_bfg string )(_bfc .PdfObjectReference ,error ){_fbd :=_bfc .PdfObjectReference {};_fbe :=_cga .FindStringSubmatch (_bfg );
if len (_fbe )< 3{_d .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");return _fbd ,_c .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");
};_aac ,_fdc :=_fa .Atoi (_fbe [1]);if _fdc !=nil {_d .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_fbe [1]);
return _fbd ,nil ;};_fbd .ObjectNumber =int64 (_aac );_dbfbd ,_fdc :=_fa .Atoi (_fbe [2]);if _fdc !=nil {_d .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_fbe [2]);
return _fbd ,nil ;};_fbd .GenerationNumber =int64 (_dbfbd );return _fbd ,nil ;};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_db ,_ac :=_bf .Open (fdfPath );if _ac !=nil {return nil ,_ac ;};defer _db .Close ();return Load (_db );};func (_gde *fdfParser )parseObject ()(_bfc .PdfObject ,error ){_d .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");
_gde .skipSpaces ();for {_egd ,_caf :=_gde ._cec .Peek (2);if _caf !=nil {return nil ,_caf ;};_d .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_egd ));if _egd [0]=='/'{_cdg ,_fagb :=_gde .parseName ();
_d .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_cdg );return &_cdg ,_fagb ;}else if _egd [0]=='('{_d .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _gde .parseString ();}else if _egd [0]=='['{_d .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");
return _gde .parseArray ();}else if (_egd [0]=='<')&&(_egd [1]=='<'){_d .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _gde .parseDict ();}else if _egd [0]=='<'{_d .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");
return _gde .parseHexString ();}else if _egd [0]=='%'{_gde .readComment ();_gde .skipSpaces ();}else {_d .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_egd ,_ =_gde ._cec .Peek (15);_ffa :=string (_egd );
_d .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_ffa );if (len (_ffa )> 3)&&(_ffa [:4]=="\u006e\u0075\u006c\u006c"){_bbb ,_dcaf :=_gde .parseNull ();return &_bbb ,_dcaf ;}else if (len (_ffa )> 4)&&(_ffa [:5]=="\u0066\u0061\u006cs\u0065"){_fgc ,_efd :=_gde .parseBool ();
return &_fgc ,_efd ;}else if (len (_ffa )> 3)&&(_ffa [:4]=="\u0074\u0072\u0075\u0065"){_bfge ,_bbg :=_gde .parseBool ();return &_bfge ,_bbg ;};_aba :=_cga .FindStringSubmatch (_ffa );if len (_aba )> 1{_egd ,_ =_gde ._cec .ReadBytes ('R');_d .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_egd [:]));
_agf ,_fabb :=_bag (string (_egd ));return &_agf ,_fabb ;};_ggc :=_de .FindStringSubmatch (_ffa );if len (_ggc )> 1{_d .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _gde .parseNumber ();};_ggc =_gcf .FindStringSubmatch (_ffa );
if len (_ggc )> 1{_d .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");_d .Log .Trace ("\u0025\u0020\u0073",_ggc );return _gde .parseNumber ();};_d .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_ffa );
return nil ,_c .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};var _ef =_fad .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");func _aacc (_ceb _eg .ReadSeeker )(*fdfParser ,error ){_ffd :=&fdfParser {};_ffd ._fab =_ceb ;_ffd ._fbf =map[int64 ]_bfc .PdfObject {};
_dde ,_afg ,_dgcc :=_ffd .parseFdfVersion ();if _dgcc !=nil {_d .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_dgcc );return nil ,_dgcc ;};_ffd ._ee =_dde ;
_ffd ._eeg =_afg ;_dgcc =_ffd .parse ();return _ffd ,_dgcc ;};

// Load loads FDF form data from `r`.
func Load (r _eg .ReadSeeker )(*Data ,error ){_ca ,_dc :=_aacc (r );if _dc !=nil {return nil ,_dc ;};_bb ,_dc :=_ca .Root ();if _dc !=nil {return nil ,_dc ;};_fc ,_ag :=_bfc .GetArray (_bb .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_ag {return nil ,_c .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_cfa :_fc ,_cf :_bb },nil ;};var _de =_fad .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");func (_acd *fdfParser )seekToEOFMarker (_bcg int64 )error {_fgb :=int64 (0);_dbab :=int64 (1000);
for _fgb < _bcg {if _bcg <=(_dbab +_fgb ){_dbab =_bcg -_fgb ;};_ ,_cfbf :=_acd ._fab .Seek (-_fgb -_dbab ,_eg .SeekEnd );if _cfbf !=nil {return _cfbf ;};_fef :=make ([]byte ,_dbab );_acd ._fab .Read (_fef );_d .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_fef ));
_acb :=_cfb .FindAllStringIndex (string (_fef ),-1);if _acb !=nil {_aab :=_acb [len (_acb )-1];_d .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_acb );_acd ._fab .Seek (-_fgb -_dbab +int64 (_aab [0]),_eg .SeekEnd );return nil ;};_d .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_fgb +=_dbab ;};_d .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _c .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};func (_bda *fdfParser )readTextLine ()(string ,error ){var _ea _fe .Buffer ;for {_aed ,_dad :=_bda ._cec .Peek (1);if _dad !=nil {_d .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_dad .Error ());return _ea .String (),_dad ;};if (_aed [0]!='\r')&&(_aed [0]!='\n'){_fcg ,_ :=_bda ._cec .ReadByte ();
_ea .WriteByte (_fcg );}else {break ;};};return _ea .String (),nil ;};func (_dea *fdfParser )skipSpaces ()(int ,error ){_fbg :=0;for {_cee ,_be :=_dea ._cec .ReadByte ();if _be !=nil {return 0,_be ;};if _bfc .IsWhiteSpace (_cee ){_fbg ++;}else {_dea ._cec .UnreadByte ();
break ;};};return _fbg ,nil ;};func (_dbfb *fdfParser )parseNumber ()(_bfc .PdfObject ,error ){return _bfc .ParseNumber (_dbfb ._cec )};func (_aaf *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_aaf ._fab .Seek (0,_eg .SeekStart );_aaf ._cec =_b .NewReader (_aaf ._fab );
_agbf :=20;_dfab :=make ([]byte ,_agbf );for {_dcdb ,_ebg :=_aaf ._cec .ReadByte ();if _ebg !=nil {if _ebg ==_eg .EOF {break ;}else {return 0,0,_ebg ;};};if _bfc .IsDecimalDigit (_dcdb )&&_dfab [_agbf -1]=='.'&&_bfc .IsDecimalDigit (_dfab [_agbf -2])&&_dfab [_agbf -3]=='-'&&_dfab [_agbf -4]=='F'&&_dfab [_agbf -5]=='D'&&_dfab [_agbf -6]=='P'{_afb :=int (_dfab [_agbf -2]-'0');
_afd :=int (_dcdb -'0');return _afb ,_afd ,nil ;};_dfab =append (_dfab [1:_agbf ],_dcdb );};return 0,0,_c .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};

// Root returns the Root of the FDF document.
func (_bgc *fdfParser )Root ()(*_bfc .PdfObjectDictionary ,error ){if _bgc ._bgb !=nil {if _dfa ,_fage :=_bgc .trace (_bgc ._bgb .Get ("\u0052\u006f\u006f\u0074")).(*_bfc .PdfObjectDictionary );_fage {if _dab ,_aeeg :=_bgc .trace (_dfa .Get ("\u0046\u0044\u0046")).(*_bfc .PdfObjectDictionary );
_aeeg {return _dab ,nil ;};};};var _degd []int64 ;for _gca :=range _bgc ._fbf {_degd =append (_degd ,_gca );};_e .Slice (_degd ,func (_dafg ,_bfce int )bool {return _degd [_dafg ]< _degd [_bfce ]});for _ ,_bge :=range _degd {_dabg :=_bgc ._fbf [_bge ];
if _cce ,_aeed :=_bgc .trace (_dabg ).(*_bfc .PdfObjectDictionary );_aeed {if _adbf ,_def :=_bgc .trace (_cce .Get ("\u0046\u0044\u0046")).(*_bfc .PdfObjectDictionary );_def {return _adbf ,nil ;};};};return nil ,_c .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};func (_dcb *fdfParser )getFileOffset ()int64 {_fea ,_ :=_dcb ._fab .Seek (0,_eg .SeekCurrent );_fea -=int64 (_dcb ._cec .Buffered ());return _fea ;};

// Data represents forms data format (FDF) file data.
type Data struct{_cf *_bfc .PdfObjectDictionary ;_cfa *_bfc .PdfObjectArray ;};