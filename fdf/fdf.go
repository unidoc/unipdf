//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_ec "bufio";_g "bytes";_cd "encoding/hex";_e "errors";_c "fmt";_gd "github.com/unidoc/unipdf/v4/common";_bd "github.com/unidoc/unipdf/v4/core";_gf "io";_ae "os";_eb "regexp";_dg "sort";_d "strconv";_b "strings";);

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_bd .PdfObjectDictionary ,error ){_ee :=map[string ]*_bd .PdfObjectDictionary {};for _ac :=0;_ac < fdf ._de .Len ();_ac ++{_ebb ,_ace :=_bd .GetDict (fdf ._de .Get (_ac ));if _ace {_ed ,_ :=_bd .GetString (_ebb .Get ("\u0054"));
if _ed !=nil {_ee [_ed .Str ()]=_ebb ;};};};return _ee ,nil ;};type fdfParser struct{_ccc int ;_bcf int ;_be map[int64 ]_bd .PdfObject ;_dbbf _gf .ReadSeeker ;_abd *_ec .Reader ;_aeb int64 ;_gac *_bd .PdfObjectDictionary ;};func (_cce *fdfParser )parseArray ()(*_bd .PdfObjectArray ,error ){_dda :=_bd .MakeArray ();
_cce ._abd .ReadByte ();for {_cce .skipSpaces ();_dff ,_bfa :=_cce ._abd .Peek (1);if _bfa !=nil {return _dda ,_bfa ;};if _dff [0]==']'{_cce ._abd .ReadByte ();break ;};_eede ,_bfa :=_cce .parseObject ();if _bfa !=nil {return _dda ,_bfa ;};_dda .Append (_eede );
};return _dda ,nil ;};var _dc =_eb .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");var _ce =_eb .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");
func _acae (_fgd _gf .ReadSeeker )(*fdfParser ,error ){_fee :=&fdfParser {};_fee ._dbbf =_fgd ;_fee ._be =map[int64 ]_bd .PdfObject {};_ffd ,_fcef ,_cdf :=_fee .parseFdfVersion ();if _cdf !=nil {_gd .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_cdf );
return nil ,_cdf ;};_fee ._ccc =_ffd ;_fee ._bcf =_fcef ;_cdf =_fee .parse ();return _fee ,_cdf ;};

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_bd .PdfObject ,error ){_gdd ,_ebd :=fdf .FieldDictionaries ();if _ebd !=nil {return nil ,_ebd ;};var _db []string ;for _fce :=range _gdd {_db =append (_db ,_fce );};_dg .Strings (_db );_fd :=map[string ]_bd .PdfObject {};
for _ ,_ca :=range _db {_ebbd :=_gdd [_ca ];_ga :=_bd .TraceToDirectObject (_ebbd .Get ("\u0056"));_fd [_ca ]=_ga ;};return _fd ,nil ;};func (_eebc *fdfParser )trace (_edg _bd .PdfObject )_bd .PdfObject {switch _fed :=_edg .(type ){case *_bd .PdfObjectReference :_ddgd ,_afb :=_eebc ._be [_fed .ObjectNumber ].(*_bd .PdfIndirectObject );
if _afb {return _ddgd .PdfObject ;};_gd .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");return nil ;case *_bd .PdfIndirectObject :return _fed .PdfObject ;};return _edg ;};

// Load loads FDF form data from `r`.
func Load (r _gf .ReadSeeker )(*Data ,error ){_ba ,_aea :=_acae (r );if _aea !=nil {return nil ,_aea ;};_dee ,_aea :=_ba .Root ();if _aea !=nil {return nil ,_aea ;};_gb ,_ab :=_bd .GetArray (_dee .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_ab {return nil ,_e .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_de :_gb ,_f :_dee },nil ;};func (_gc *fdfParser )skipSpaces ()(int ,error ){_bag :=0;for {_gdf ,_egf :=_gc ._abd .ReadByte ();if _egf !=nil {return 0,_egf ;};if _bd .IsWhiteSpace (_gdf ){_bag ++;}else {_gc ._abd .UnreadByte ();break ;};
};return _bag ,nil ;};var _aeeb =_eb .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");func (_bcb *fdfParser )parseObject ()(_bd .PdfObject ,error ){_gd .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");
_bcb .skipSpaces ();for {_gad ,_age :=_bcb ._abd .Peek (2);if _age !=nil {return nil ,_age ;};_gd .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_gad ));if _gad [0]=='/'{_ceca ,_dgf :=_bcb .parseName ();
_gd .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_ceca );return &_ceca ,_dgf ;}else if _gad [0]=='('{_gd .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _bcb .parseString ();}else if _gad [0]=='['{_gd .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");
return _bcb .parseArray ();}else if (_gad [0]=='<')&&(_gad [1]=='<'){_gd .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _bcb .parseDict ();}else if _gad [0]=='<'{_gd .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");
return _bcb .parseHexString ();}else if _gad [0]=='%'{_bcb .readComment ();_bcb .skipSpaces ();}else {_gd .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_gad ,_ =_bcb ._abd .Peek (15);_fdd :=string (_gad );
_gd .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_fdd );if (len (_fdd )> 3)&&(_fdd [:4]=="\u006e\u0075\u006c\u006c"){_bfd ,_dec :=_bcb .parseNull ();return &_bfd ,_dec ;}else if (len (_fdd )> 4)&&(_fdd [:5]=="\u0066\u0061\u006cs\u0065"){_agf ,_gfb :=_bcb .parseBool ();
return &_agf ,_gfb ;}else if (len (_fdd )> 3)&&(_fdd [:4]=="\u0074\u0072\u0075\u0065"){_aced ,_fe :=_bcb .parseBool ();return &_aced ,_fe ;};_cag :=_aeeb .FindStringSubmatch (_fdd );if len (_cag )> 1{_gad ,_ =_bcb ._abd .ReadBytes ('R');_gd .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_gad [:]));
_acf ,_af :=_gcb (string (_gad ));return &_acf ,_af ;};_gbe :=_gbg .FindStringSubmatch (_fdd );if len (_gbe )> 1{_gd .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _bcb .parseNumber ();};_gbe =_abg .FindStringSubmatch (_fdd );
if len (_gbe )> 1{_gd .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");_gd .Log .Trace ("\u0025\u0020\u0073",_gbe );return _bcb .parseNumber ();};_gd .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_fdd );
return nil ,_e .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};func (_dfa *fdfParser )readTextLine ()(string ,error ){var _cf _g .Buffer ;for {_eca ,_aeg :=_dfa ._abd .Peek (1);if _aeg !=nil {_gd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_aeg .Error ());return _cf .String (),_aeg ;};if (_eca [0]!='\r')&&(_eca [0]!='\n'){_eaa ,_ :=_dfa ._abd .ReadByte ();
_cf .WriteByte (_eaa );}else {break ;};};return _cf .String (),nil ;};var _gbg =_eb .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");func (_dgac *fdfParser )parseIndirectObject ()(_bd .PdfObject ,error ){_bfde :=_bd .PdfIndirectObject {};
_gd .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");_gfd ,_faf :=_dgac ._abd .Peek (20);if _faf !=nil {_gd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return &_bfde ,_faf ;};_gd .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_gfd ));_fbgd :=_ce .FindStringSubmatchIndex (string (_gfd ));if len (_fbgd )< 6{_gd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_gfd ));
return &_bfde ,_e .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_dgac ._abd .Discard (_fbgd [0]);_gd .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_fbgd );_beb :=_fbgd [1]-_fbgd [0];_edec :=make ([]byte ,_beb );_ ,_faf =_dgac .readAtLeast (_edec ,_beb );if _faf !=nil {_gd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_faf );
return nil ,_faf ;};_gd .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_edec );_baab :=_ce .FindStringSubmatch (string (_edec ));if len (_baab )< 3{_gd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_edec ));
return &_bfde ,_e .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_ccf ,_ :=_d .Atoi (_baab [1]);_ecaa ,_ :=_d .Atoi (_baab [2]);_bfde .ObjectNumber =int64 (_ccf );_bfde .GenerationNumber =int64 (_ecaa );for {_cbg ,_dfb :=_dgac ._abd .Peek (2);if _dfb !=nil {return &_bfde ,_dfb ;};_gd .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_cbg ),string (_cbg ));
if _bd .IsWhiteSpace (_cbg [0]){_dgac .skipSpaces ();}else if _cbg [0]=='%'{_dgac .skipComments ();}else if (_cbg [0]=='<')&&(_cbg [1]=='<'){_gd .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_bfde .PdfObject ,_dfb =_dgac .parseDict ();
_gd .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_dfb );if _dfb !=nil {return &_bfde ,_dfb ;};_gd .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_cbg [0]=='/')||(_cbg [0]=='(')||(_cbg [0]=='[')||(_cbg [0]=='<'){_bfde .PdfObject ,_dfb =_dgac .parseObject ();if _dfb !=nil {return &_bfde ,_dfb ;};_gd .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _cbg [0]=='e'{_gdb ,_ddg :=_dgac .readTextLine ();if _ddg !=nil {return nil ,_ddg ;};if len (_gdb )>=6&&_gdb [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _cbg [0]=='s'{_cbg ,_ =_dgac ._abd .Peek (10);if string (_cbg [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_ageb :=6;
if len (_cbg )> 6{if _bd .IsWhiteSpace (_cbg [_ageb ])&&_cbg [_ageb ]!='\r'&&_cbg [_ageb ]!='\n'{_gd .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_ageb ++;};switch _cbg [_ageb ]{case '\r':_ageb ++;if _cbg [_ageb ]=='\n'{_ageb ++;};case '\n':_ageb ++;};};_dgac ._abd .Discard (_ageb );_fcc ,_baaf :=_bfde .PdfObject .(*_bd .PdfObjectDictionary );if !_baaf {return nil ,_e .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_gd .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_fcc );_cge ,_bae :=_fcc .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_bd .PdfObjectInteger );if !_bae {return nil ,_e .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_aca :=*_cge ;if _aca < 0{return nil ,_e .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_aca )> _dgac ._aeb {_gd .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_e .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_bg :=make ([]byte ,_aca );
_ ,_dfb =_dgac .readAtLeast (_bg ,int (_aca ));if _dfb !=nil {_gd .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_bg ),_bg );_gd .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_dfb );
return nil ,_dfb ;};_fgb :=_bd .PdfObjectStream {};_fgb .Stream =_bg ;_fgb .PdfObjectDictionary =_bfde .PdfObject .(*_bd .PdfObjectDictionary );_fgb .ObjectNumber =_bfde .ObjectNumber ;_fgb .GenerationNumber =_bfde .GenerationNumber ;_dgac .skipSpaces ();
_dgac ._abd .Discard (9);_dgac .skipSpaces ();return &_fgb ,nil ;};};_bfde .PdfObject ,_dfb =_dgac .parseObject ();return &_bfde ,_dfb ;};};_gd .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");
return &_bfde ,nil ;};func (_eec *fdfParser )seekToEOFMarker (_cbd int64 )error {_egb :=int64 (0);_dcb :=int64 (1000);for _egb < _cbd {if _cbd <=(_dcb +_egb ){_dcb =_cbd -_egb ;};_ ,_fae :=_eec ._dbbf .Seek (-_egb -_dcb ,_gf .SeekEnd );if _fae !=nil {return _fae ;
};_cdb :=make ([]byte ,_dcb );_eec ._dbbf .Read (_cdb );_gd .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_cdb ));_aba :=_eed .FindAllStringIndex (string (_cdb ),-1);
if _aba !=nil {_bb :=_aba [len (_aba )-1];_gd .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_aba );_eec ._dbbf .Seek (-_egb -_dcb +int64 (_bb [0]),_gf .SeekEnd );return nil ;};_gd .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_egb +=_dcb ;};_gd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _e .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};func (_dbb *fdfParser )getFileOffset ()int64 {_ede ,_ :=_dbb ._dbbf .Seek (0,_gf .SeekCurrent );_ede -=int64 (_dbb ._abd .Buffered ());return _ede ;};func (_dgc *fdfParser )readAtLeast (_fdc []byte ,_df int )(int ,error ){_dea :=_df ;_fb :=0;_dbg :=0;
for _dea > 0{_gdg ,_baa :=_dgc ._abd .Read (_fdc [_fb :]);if _baa !=nil {_gd .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_gdg ,_dbg ,_baa .Error ());
return _fb ,_e .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_dbg ++;_fb +=_gdg ;_dea -=_gdg ;};return _fb ,nil ;};func (_abe *fdfParser )parseNumber ()(_bd .PdfObject ,error ){return _bd .ParseNumber (_abe ._abd )};
func (_ega *fdfParser )parseHexString ()(*_bd .PdfObjectString ,error ){_ega ._abd .ReadByte ();var _ecb _g .Buffer ;for {_aeaf ,_ceg :=_ega ._abd .Peek (1);if _ceg !=nil {return _bd .MakeHexString (""),_ceg ;};if _aeaf [0]=='>'{_ega ._abd .ReadByte ();
break ;};_gfe ,_ :=_ega ._abd .ReadByte ();if !_bd .IsWhiteSpace (_gfe ){_ecb .WriteByte (_gfe );};};if _ecb .Len ()%2==1{_ecb .WriteRune ('0');};_caf ,_gafg :=_cd .DecodeString (_ecb .String ());if _gafg !=nil {_gd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_ecb .String ());
return _bd .MakeHexString (""),nil ;};return _bd .MakeHexString (string (_caf )),nil ;};func (_da *fdfParser )parseName ()(_bd .PdfObjectName ,error ){var _bf _g .Buffer ;_dfd :=false ;for {_cec ,_fg :=_da ._abd .Peek (1);if _fg ==_gf .EOF {break ;};if _fg !=nil {return _bd .PdfObjectName (_bf .String ()),_fg ;
};if !_dfd {switch _cec [0]{case '/':_dfd =true ;_da ._abd .ReadByte ();case '%':_da .readComment ();_da .skipSpaces ();default:_gd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_cec ,_cec );
return _bd .PdfObjectName (_bf .String ()),_c .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_cec [0]);};}else {if _bd .IsWhiteSpace (_cec [0]){break ;}else if (_cec [0]=='/')||(_cec [0]=='[')||(_cec [0]=='(')||(_cec [0]==']')||(_cec [0]=='<')||(_cec [0]=='>'){break ;
}else if _cec [0]=='#'{_acc ,_accg :=_da ._abd .Peek (3);if _accg !=nil {return _bd .PdfObjectName (_bf .String ()),_accg ;};_da ._abd .Discard (3);_dga ,_accg :=_cd .DecodeString (string (_acc [1:3]));if _accg !=nil {return _bd .PdfObjectName (_bf .String ()),_accg ;
};_bf .Write (_dga );}else {_fcb ,_ :=_da ._abd .ReadByte ();_bf .WriteByte (_fcb );};};};return _bd .PdfObjectName (_bf .String ()),nil ;};func _ffb (_dgbg string )(*fdfParser ,error ){_ebcf :=fdfParser {};_gbb :=[]byte (_dgbg );_bec :=_g .NewReader (_gbb );
_ebcf ._dbbf =_bec ;_ebcf ._be =map[int64 ]_bd .PdfObject {};_bce :=_ec .NewReader (_bec );_ebcf ._abd =_bce ;_ebcf ._aeb =int64 (len (_dgbg ));return &_ebcf ,_ebcf .parse ();};func (_gbga *fdfParser )parseDict ()(*_bd .PdfObjectDictionary ,error ){_gd .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");
_agd :=_bd .MakeDict ();_bfae ,_ :=_gbga ._abd .ReadByte ();if _bfae !='<'{return nil ,_e .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_bfae ,_ =_gbga ._abd .ReadByte ();if _bfae !='<'{return nil ,_e .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");
};for {_gbga .skipSpaces ();_gbga .skipComments ();_edc ,_eaf :=_gbga ._abd .Peek (2);if _eaf !=nil {return nil ,_eaf ;};_gd .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_edc ),string (_edc ));
if (_edc [0]=='>')&&(_edc [1]=='>'){_gd .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");_gbga ._abd .ReadByte ();_gbga ._abd .ReadByte ();break ;};_gd .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");
_dgb ,_eaf :=_gbga .parseName ();_gd .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_dgb );if _eaf !=nil {_gd .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_eaf );
return nil ,_eaf ;};if len (_dgb )> 4&&_dgb [len (_dgb )-4:]=="\u006e\u0075\u006c\u006c"{_gfg :=_dgb [0:len (_dgb )-4];_gd .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_dgb );
_gd .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_gfg );_gbga .skipSpaces ();_fceg ,_ :=_gbga ._abd .Peek (1);if _fceg [0]=='/'{_agd .Set (_gfg ,_bd .MakeNull ());continue ;};};
_gbga .skipSpaces ();_fga ,_eaf :=_gbga .parseObject ();if _eaf !=nil {return nil ,_eaf ;};_agd .Set (_dgb ,_fga );_gd .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_dgb ,_fga .String ());};_gd .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");
return _agd ,nil ;};func (_fbg *fdfParser )parseString ()(*_bd .PdfObjectString ,error ){_fbg ._abd .ReadByte ();var _fbff _g .Buffer ;_gddg :=1;for {_gda ,_dbc :=_fbg ._abd .Peek (1);if _dbc !=nil {return _bd .MakeString (_fbff .String ()),_dbc ;};if _gda [0]=='\\'{_fbg ._abd .ReadByte ();
_gde ,_bdb :=_fbg ._abd .ReadByte ();if _bdb !=nil {return _bd .MakeString (_fbff .String ()),_bdb ;};if _bd .IsOctalDigit (_gde ){_dba ,_dd :=_fbg ._abd .Peek (2);if _dd !=nil {return _bd .MakeString (_fbff .String ()),_dd ;};var _cfd []byte ;_cfd =append (_cfd ,_gde );
for _ ,_ddb :=range _dba {if _bd .IsOctalDigit (_ddb ){_cfd =append (_cfd ,_ddb );}else {break ;};};_fbg ._abd .Discard (len (_cfd )-1);_gd .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_cfd );
_aa ,_dd :=_d .ParseUint (string (_cfd ),8,32);if _dd !=nil {return _bd .MakeString (_fbff .String ()),_dd ;};_fbff .WriteByte (byte (_aa ));continue ;};switch _gde {case 'n':_fbff .WriteRune ('\n');case 'r':_fbff .WriteRune ('\r');case 't':_fbff .WriteRune ('\t');
case 'b':_fbff .WriteRune ('\b');case 'f':_fbff .WriteRune ('\f');case '(':_fbff .WriteRune ('(');case ')':_fbff .WriteRune (')');case '\\':_fbff .WriteRune ('\\');};continue ;}else if _gda [0]=='('{_gddg ++;}else if _gda [0]==')'{_gddg --;if _gddg ==0{_fbg ._abd .ReadByte ();
break ;};};_gcd ,_ :=_fbg ._abd .ReadByte ();_fbff .WriteByte (_gcd );};return _bd .MakeString (_fbff .String ()),nil ;};var _abg =_eb .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");
func (_ag *fdfParser )readComment ()(string ,error ){var _bca _g .Buffer ;_ ,_bac :=_ag .skipSpaces ();if _bac !=nil {return _bca .String (),_bac ;};_bcg :=true ;for {_ccd ,_gg :=_ag ._abd .Peek (1);if _gg !=nil {_gd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_gg .Error ());
return _bca .String (),_gg ;};if _bcg &&_ccd [0]!='%'{return _bca .String (),_e .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");};_bcg =false ;if (_ccd [0]!='\r')&&(_ccd [0]!='\n'){_gce ,_ :=_ag ._abd .ReadByte ();
_bca .WriteByte (_gce );}else {break ;};};return _bca .String (),nil ;};var _eed =_eb .MustCompile ("\u0025\u0025\u0045O\u0046");func (_cb *fdfParser )setFileOffset (_gag int64 ){_cb ._dbbf .Seek (_gag ,_gf .SeekStart );_cb ._abd =_ec .NewReader (_cb ._dbbf );
};func (_gee *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_gee ._dbbf .Seek (0,_gf .SeekStart );_gee ._abd =_ec .NewReader (_gee ._dbbf );_edf :=20;_bdc :=make ([]byte ,_edf );for {_ded ,_ebed :=_gee ._abd .ReadByte ();if _ebed !=nil {if _ebed ==_gf .EOF {break ;
}else {return 0,0,_ebed ;};};if _bd .IsDecimalDigit (_ded )&&_bdc [_edf -1]=='.'&&_bd .IsDecimalDigit (_bdc [_edf -2])&&_bdc [_edf -3]=='-'&&_bdc [_edf -4]=='F'&&_bdc [_edf -5]=='D'&&_bdc [_edf -6]=='P'{_abad :=int (_bdc [_edf -2]-'0');_ecc :=int (_ded -'0');
return _abad ,_ecc ,nil ;};_bdc =append (_bdc [1:_edf ],_ded );};return 0,0,_e .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};func (_ebba *fdfParser )parse ()error {_ebba ._dbbf .Seek (0,_gf .SeekStart );
_ebba ._abd =_ec .NewReader (_ebba ._dbbf );for {_ebba .skipComments ();_bed ,_cba :=_ebba ._abd .Peek (20);if _cba !=nil {_gd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return _cba ;};if _b .HasPrefix (string (_bed ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_ebba ._abd .Discard (7);_ebba .skipSpaces ();_ebba .skipComments ();_aae ,_ :=_ebba .parseDict ();_ebba ._gac =_aae ;break ;};_cecg :=_ce .FindStringSubmatchIndex (string (_bed ));
if len (_cecg )< 6{_gd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_bed ));
return _e .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_bba ,_cba :=_ebba .parseIndirectObject ();if _cba !=nil {return _cba ;};switch _deca :=_bba .(type ){case *_bd .PdfIndirectObject :_ebba ._be [_deca .ObjectNumber ]=_deca ;case *_bd .PdfObjectStream :_ebba ._be [_deca .ObjectNumber ]=_deca ;default:return _e .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};func _gcb (_ebe string )(_bd .PdfObjectReference ,error ){_ff :=_bd .PdfObjectReference {};_deg :=_aeeb .FindStringSubmatch (_ebe );if len (_deg )< 3{_gd .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");
return _ff ,_e .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");};_deb ,_egfg :=_d .Atoi (_deg [1]);if _egfg !=nil {_gd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_deg [1]);
return _ff ,nil ;};_ff .ObjectNumber =int64 (_deb );_eage ,_egfg :=_d .Atoi (_deg [2]);if _egfg !=nil {_gd .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_deg [2]);
return _ff ,nil ;};_ff .GenerationNumber =int64 (_eage );return _ff ,nil ;};func (_ecab *fdfParser )parseBool ()(_bd .PdfObjectBool ,error ){_gfeb ,_ceb :=_ecab ._abd .Peek (4);if _ceb !=nil {return _bd .PdfObjectBool (false ),_ceb ;};if (len (_gfeb )>=4)&&(string (_gfeb [:4])=="\u0074\u0072\u0075\u0065"){_ecab ._abd .Discard (4);
return _bd .PdfObjectBool (true ),nil ;};_gfeb ,_ceb =_ecab ._abd .Peek (5);if _ceb !=nil {return _bd .PdfObjectBool (false ),_ceb ;};if (len (_gfeb )>=5)&&(string (_gfeb [:5])=="\u0066\u0061\u006cs\u0065"){_ecab ._abd .Discard (5);return _bd .PdfObjectBool (false ),nil ;
};return _bd .PdfObjectBool (false ),_e .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_aee ,_dgg :=_ae .Open (fdfPath );if _dgg !=nil {return nil ,_dgg ;};defer _aee .Close ();return Load (_aee );};func (_gef *fdfParser )parseFdfVersion ()(int ,int ,error ){_gef ._dbbf .Seek (0,_gf .SeekStart );
_egc :=20;_gdfd :=make ([]byte ,_egc );_gef ._dbbf .Read (_gdfd );_cdd :=_dc .FindStringSubmatch (string (_gdfd ));if len (_cdd )< 3{_cac ,_abea ,_eee :=_gef .seekFdfVersionTopDown ();if _eee !=nil {_gd .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");
return 0,0,_eee ;};return _cac ,_abea ,nil ;};_bfad ,_geg :=_d .Atoi (_cdd [1]);if _geg !=nil {return 0,0,_geg ;};_ecee ,_geg :=_d .Atoi (_cdd [2]);if _geg !=nil {return 0,0,_geg ;};_gd .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_bfad ,_ecee );
return _bfad ,_ecee ,nil ;};func (_ef *fdfParser )skipComments ()error {if _ ,_ebc :=_ef .skipSpaces ();_ebc !=nil {return _ebc ;};_ge :=true ;for {_fa ,_cg :=_ef ._abd .Peek (1);if _cg !=nil {_gd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_cg .Error ());
return _cg ;};if _ge &&_fa [0]!='%'{return nil ;};_ge =false ;if (_fa [0]!='\r')&&(_fa [0]!='\n'){_ef ._abd .ReadByte ();}else {break ;};};return _ef .skipComments ();};func (_abgd *fdfParser )parseNull ()(_bd .PdfObjectNull ,error ){_ ,_dbcc :=_abgd ._abd .Discard (4);
return _bd .PdfObjectNull {},_dbcc ;};

// Data represents forms data format (FDF) file data.
type Data struct{_f *_bd .PdfObjectDictionary ;_de *_bd .PdfObjectArray ;};

// Root returns the Root of the FDF document.
func (_fcg *fdfParser )Root ()(*_bd .PdfObjectDictionary ,error ){if _fcg ._gac !=nil {if _efd ,_aeef :=_fcg .trace (_fcg ._gac .Get ("\u0052\u006f\u006f\u0074")).(*_bd .PdfObjectDictionary );_aeef {if _ecaac ,_fbd :=_fcg .trace (_efd .Get ("\u0046\u0044\u0046")).(*_bd .PdfObjectDictionary );
_fbd {return _ecaac ,nil ;};};};var _ad []int64 ;for _cgb :=range _fcg ._be {_ad =append (_ad ,_cgb );};_dg .Slice (_ad ,func (_cfe ,_dagc int )bool {return _ad [_cfe ]< _ad [_dagc ]});for _ ,_cgg :=range _ad {_eeb :=_fcg ._be [_cgg ];if _gafc ,_cbb :=_fcg .trace (_eeb ).(*_bd .PdfObjectDictionary );
_cbb {if _abb ,_dbf :=_fcg .trace (_gafc .Get ("\u0046\u0044\u0046")).(*_bd .PdfObjectDictionary );_dbf {return _abb ,nil ;};};};return nil ,_e .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};