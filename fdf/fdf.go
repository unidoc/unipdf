//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_eg "bufio";_ag "bytes";_gb "encoding/hex";_g "errors";_cd "fmt";_cc "github.com/unidoc/unipdf/v4/common";_b "github.com/unidoc/unipdf/v4/core";_de "io";_agg "os";_c "regexp";_d "sort";_a "strconv";_e "strings";);func (_da *fdfParser )parseString ()(*_b .PdfObjectString ,error ){_da ._cddd .ReadByte ();
var _eef _ag .Buffer ;_bda :=1;for {_ffd ,_ege :=_da ._cddd .Peek (1);if _ege !=nil {return _b .MakeString (_eef .String ()),_ege ;};if _ffd [0]=='\\'{_da ._cddd .ReadByte ();_bbg ,_dfb :=_da ._cddd .ReadByte ();if _dfb !=nil {return _b .MakeString (_eef .String ()),_dfb ;
};if _b .IsOctalDigit (_bbg ){_dea ,_ge :=_da ._cddd .Peek (2);if _ge !=nil {return _b .MakeString (_eef .String ()),_ge ;};var _bfgd []byte ;_bfgd =append (_bfgd ,_bbg );for _ ,_aga :=range _dea {if _b .IsOctalDigit (_aga ){_bfgd =append (_bfgd ,_aga );
}else {break ;};};_da ._cddd .Discard (len (_bfgd )-1);_cc .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_bfgd );_ce ,_ge :=_a .ParseUint (string (_bfgd ),8,32);if _ge !=nil {return _b .MakeString (_eef .String ()),_ge ;
};_eef .WriteByte (byte (_ce ));continue ;};switch _bbg {case 'n':_eef .WriteRune ('\n');case 'r':_eef .WriteRune ('\r');case 't':_eef .WriteRune ('\t');case 'b':_eef .WriteRune ('\b');case 'f':_eef .WriteRune ('\f');case '(':_eef .WriteRune ('(');case ')':_eef .WriteRune (')');
case '\\':_eef .WriteRune ('\\');};continue ;}else if _ffd [0]=='('{_bda ++;}else if _ffd [0]==')'{_bda --;if _bda ==0{_da ._cddd .ReadByte ();break ;};};_afc ,_ :=_da ._cddd .ReadByte ();_eef .WriteByte (_afc );};return _b .MakeString (_eef .String ()),nil ;
};func (_cfc *fdfParser )parseNull ()(_b .PdfObjectNull ,error ){_ ,_gde :=_cfc ._cddd .Discard (4);return _b .PdfObjectNull {},_gde ;};func (_agf *fdfParser )trace (_dbdg _b .PdfObject )_b .PdfObject {switch _cbd :=_dbdg .(type ){case *_b .PdfObjectReference :_bgb ,_ebd :=_agf ._bc [_cbd .ObjectNumber ].(*_b .PdfIndirectObject );
if _ebd {return _bgb .PdfObject ;};_cc .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");return nil ;case *_b .PdfIndirectObject :return _cbd .PdfObject ;};return _dbdg ;};func (_gbg *fdfParser )skipComments ()error {if _ ,_aca :=_gbg .skipSpaces ();
_aca !=nil {return _aca ;};_fc :=true ;for {_bee ,_ada :=_gbg ._cddd .Peek (1);if _ada !=nil {_cc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_ada .Error ());return _ada ;};if _fc &&_bee [0]!='%'{return nil ;};_fc =false ;if (_bee [0]!='\r')&&(_bee [0]!='\n'){_gbg ._cddd .ReadByte ();
}else {break ;};};return _gbg .skipComments ();};func (_ad *fdfParser )skipSpaces ()(int ,error ){_acg :=0;for {_egf ,_bd :=_ad ._cddd .ReadByte ();if _bd !=nil {return 0,_bd ;};if _b .IsWhiteSpace (_egf ){_acg ++;}else {_ad ._cddd .UnreadByte ();break ;
};};return _acg ,nil ;};func (_gag *fdfParser )seekToEOFMarker (_cfa int64 )error {_abe :=int64 (0);_bfcc :=int64 (1000);for _abe < _cfa {if _cfa <=(_bfcc +_abe ){_bfcc =_cfa -_abe ;};_ ,_cfad :=_gag ._dbd .Seek (-_abe -_bfcc ,_de .SeekEnd );if _cfad !=nil {return _cfad ;
};_afeg :=make ([]byte ,_bfcc );_gag ._dbd .Read (_afeg );_cc .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_afeg ));_cgb :=_egg .FindAllStringIndex (string (_afeg ),-1);
if _cgb !=nil {_fdb :=_cgb [len (_cgb )-1];_cc .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_cgb );_gag ._dbd .Seek (-_abe -_bfcc +int64 (_fdb [0]),_de .SeekEnd );return nil ;};_cc .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_abe +=_bfcc ;};_cc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _g .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};var _eeg =_c .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");type fdfParser struct{_be int ;_bec int ;_bc map[int64 ]_b .PdfObject ;
_dbd _de .ReadSeeker ;_cddd *_eg .Reader ;_gf int64 ;_ec *_b .PdfObjectDictionary ;};func (_accf *fdfParser )readAtLeast (_fg []byte ,_fe int )(int ,error ){_bb :=_fe ;_ab :=0;_af :=0;for _bb > 0{_dbf ,_gcf :=_accf ._cddd .Read (_fg [_ab :]);if _gcf !=nil {_cc .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_dbf ,_af ,_gcf .Error ());
return _ab ,_g .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_af ++;_ab +=_dbf ;_bb -=_dbf ;};return _ab ,nil ;};

// Data represents forms data format (FDF) file data.
type Data struct{_cde *_b .PdfObjectDictionary ;_gc *_b .PdfObjectArray ;};func (_gdbc *fdfParser )parseIndirectObject ()(_b .PdfObject ,error ){_gaf :=_b .PdfIndirectObject {};_cc .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");
_afbe ,_dgea :=_gdbc ._cddd .Peek (20);if _dgea !=nil {_cc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return &_gaf ,_dgea ;};_cc .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_afbe ));_fad :=_feb .FindStringSubmatchIndex (string (_afbe ));if len (_fad )< 6{_cc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_afbe ));
return &_gaf ,_g .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_gdbc ._cddd .Discard (_fad [0]);_cc .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_fad );_cfd :=_fad [1]-_fad [0];_gea :=make ([]byte ,_cfd );_ ,_dgea =_gdbc .readAtLeast (_gea ,_cfd );if _dgea !=nil {_cc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_dgea );
return nil ,_dgea ;};_cc .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_gea );_fce :=_feb .FindStringSubmatch (string (_gea ));if len (_fce )< 3{_cc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_gea ));
return &_gaf ,_g .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_bffb ,_ :=_a .Atoi (_fce [1]);_dgf ,_ :=_a .Atoi (_fce [2]);_gaf .ObjectNumber =int64 (_bffb );_gaf .GenerationNumber =int64 (_dgf );for {_bebg ,_bed :=_gdbc ._cddd .Peek (2);if _bed !=nil {return &_gaf ,_bed ;};_cc .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_bebg ),string (_bebg ));
if _b .IsWhiteSpace (_bebg [0]){_gdbc .skipSpaces ();}else if _bebg [0]=='%'{_gdbc .skipComments ();}else if (_bebg [0]=='<')&&(_bebg [1]=='<'){_cc .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_gaf .PdfObject ,_bed =_gdbc .parseDict ();
_cc .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_bed );if _bed !=nil {return &_gaf ,_bed ;};_cc .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_bebg [0]=='/')||(_bebg [0]=='(')||(_bebg [0]=='[')||(_bebg [0]=='<'){_gaf .PdfObject ,_bed =_gdbc .parseObject ();if _bed !=nil {return &_gaf ,_bed ;};_cc .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _bebg [0]=='e'{_cgga ,_fagg :=_gdbc .readTextLine ();if _fagg !=nil {return nil ,_fagg ;};if len (_cgga )>=6&&_cgga [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _bebg [0]=='s'{_bebg ,_ =_gdbc ._cddd .Peek (10);if string (_bebg [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_accd :=6;
if len (_bebg )> 6{if _b .IsWhiteSpace (_bebg [_accd ])&&_bebg [_accd ]!='\r'&&_bebg [_accd ]!='\n'{_cc .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_accd ++;};switch _bebg [_accd ]{case '\r':_accd ++;if _bebg [_accd ]=='\n'{_accd ++;};case '\n':_accd ++;};};_gdbc ._cddd .Discard (_accd );_baa ,_aaa :=_gaf .PdfObject .(*_b .PdfObjectDictionary );if !_aaa {return nil ,_g .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_cc .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_baa );_dcc ,_acdg :=_baa .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_b .PdfObjectInteger );if !_acdg {return nil ,_g .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_cfdd :=*_dcc ;if _cfdd < 0{return nil ,_g .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_cfdd )> _gdbc ._gf {_cc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_g .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_geac :=make ([]byte ,_cfdd );
_ ,_bed =_gdbc .readAtLeast (_geac ,int (_cfdd ));if _bed !=nil {_cc .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_geac ),_geac );_cc .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_bed );
return nil ,_bed ;};_fbcd :=_b .PdfObjectStream {};_fbcd .Stream =_geac ;_fbcd .PdfObjectDictionary =_gaf .PdfObject .(*_b .PdfObjectDictionary );_fbcd .ObjectNumber =_gaf .ObjectNumber ;_fbcd .GenerationNumber =_gaf .GenerationNumber ;_gdbc .skipSpaces ();
_gdbc ._cddd .Discard (9);_gdbc .skipSpaces ();return &_fbcd ,nil ;};};_gaf .PdfObject ,_bed =_gdbc .parseObject ();return &_gaf ,_bed ;};};_cc .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");
return &_gaf ,nil ;};var _egg =_c .MustCompile ("\u0025\u0025\u0045O\u0046");func (_efd *fdfParser )readTextLine ()(string ,error ){var _fba _ag .Buffer ;for {_fdf ,_gaa :=_efd ._cddd .Peek (1);if _gaa !=nil {_cc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_gaa .Error ());
return _fba .String (),_gaa ;};if (_fdf [0]!='\r')&&(_fdf [0]!='\n'){_abf ,_ :=_efd ._cddd .ReadByte ();_fba .WriteByte (_abf );}else {break ;};};return _fba .String (),nil ;};func (_dc *fdfParser )setFileOffset (_cgg int64 ){_dc ._dbd .Seek (_cgg ,_de .SeekStart );
_dc ._cddd =_eg .NewReader (_dc ._dbd );};var _fb =_c .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_b .PdfObject ,error ){_bfe ,_ef :=fdf .FieldDictionaries ();if _ef !=nil {return nil ,_ef ;};var _cfg []string ;for _eba :=range _bfe {_cfg =append (_cfg ,_eba );};_d .Strings (_cfg );_cb :=map[string ]_b .PdfObject {};
for _ ,_cag :=range _cfg {_gbc :=_bfe [_cag ];_cdd :=_b .TraceToDirectObject (_gbc .Get ("\u0056"));_cb [_cag ]=_cdd ;};return _cb ,nil ;};var _feb =_c .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");
func (_gbf *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_gbf ._dbd .Seek (0,_de .SeekStart );_gbf ._cddd =_eg .NewReader (_gbf ._dbd );_abd :=20;_baf :=make ([]byte ,_abd );for {_age ,_bgg :=_gbf ._cddd .ReadByte ();if _bgg !=nil {if _bgg ==_de .EOF {break ;
}else {return 0,0,_bgg ;};};if _b .IsDecimalDigit (_age )&&_baf [_abd -1]=='.'&&_b .IsDecimalDigit (_baf [_abd -2])&&_baf [_abd -3]=='-'&&_baf [_abd -4]=='F'&&_baf [_abd -5]=='D'&&_baf [_abd -6]=='P'{_ccc :=int (_baf [_abd -2]-'0');_dead :=int (_age -'0');
return _ccc ,_dead ,nil ;};_baf =append (_baf [1:_abd ],_age );};return 0,0,_g .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};func (_ee *fdfParser )getFileOffset ()int64 {_agd ,_ :=_ee ._dbd .Seek (0,_de .SeekCurrent );
_agd -=int64 (_ee ._cddd .Buffered ());return _agd ;};func (_dca *fdfParser )parseHexString ()(*_b .PdfObjectString ,error ){_dca ._cddd .ReadByte ();var _gbcc _ag .Buffer ;for {_ead ,_daa :=_dca ._cddd .Peek (1);if _daa !=nil {return _b .MakeHexString (""),_daa ;
};if _ead [0]=='>'{_dca ._cddd .ReadByte ();break ;};_deb ,_ :=_dca ._cddd .ReadByte ();if !_b .IsWhiteSpace (_deb ){_gbcc .WriteByte (_deb );};};if _gbcc .Len ()%2==1{_gbcc .WriteRune ('0');};_adg ,_efe :=_gb .DecodeString (_gbcc .String ());if _efe !=nil {_cc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_gbcc .String ());
return _b .MakeHexString (""),nil ;};return _b .MakeHexString (string (_adg )),nil ;};func (_bg *fdfParser )readComment ()(string ,error ){var _gg _ag .Buffer ;_ ,_gd :=_bg .skipSpaces ();if _gd !=nil {return _gg .String (),_gd ;};_aba :=true ;for {_gcb ,_ega :=_bg ._cddd .Peek (1);
if _ega !=nil {_cc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_ega .Error ());return _gg .String (),_ega ;};if _aba &&_gcb [0]!='%'{return _gg .String (),_g .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");
};_aba =false ;if (_gcb [0]!='\r')&&(_gcb [0]!='\n'){_afg ,_ :=_bg ._cddd .ReadByte ();_gg .WriteByte (_afg );}else {break ;};};return _gg .String (),nil ;};func (_dgg *fdfParser )parseArray ()(*_b .PdfObjectArray ,error ){_fgf :=_b .MakeArray ();_dgg ._cddd .ReadByte ();
for {_dgg .skipSpaces ();_dbe ,_aea :=_dgg ._cddd .Peek (1);if _aea !=nil {return _fgf ,_aea ;};if _dbe [0]==']'{_dgg ._cddd .ReadByte ();break ;};_fcb ,_aea :=_dgg .parseObject ();if _aea !=nil {return _fgf ,_aea ;};_fgf .Append (_fcb );};return _fgf ,nil ;
};func (_cge *fdfParser )parseName ()(_b .PdfObjectName ,error ){var _bfg _ag .Buffer ;_becd :=false ;for {_fda ,_gdb :=_cge ._cddd .Peek (1);if _gdb ==_de .EOF {break ;};if _gdb !=nil {return _b .PdfObjectName (_bfg .String ()),_gdb ;};if !_becd {switch _fda [0]{case '/':_becd =true ;
_cge ._cddd .ReadByte ();case '%':_cge .readComment ();_cge .skipSpaces ();default:_cc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_fda ,_fda );
return _b .PdfObjectName (_bfg .String ()),_cd .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_fda [0]);};}else {if _b .IsWhiteSpace (_fda [0]){break ;}else if (_fda [0]=='/')||(_fda [0]=='[')||(_fda [0]=='(')||(_fda [0]==']')||(_fda [0]=='<')||(_fda [0]=='>'){break ;
}else if _fda [0]=='#'{_aggf ,_afe :=_cge ._cddd .Peek (3);if _afe !=nil {return _b .PdfObjectName (_bfg .String ()),_afe ;};_cge ._cddd .Discard (3);_fbc ,_afe :=_gb .DecodeString (string (_aggf [1:3]));if _afe !=nil {return _b .PdfObjectName (_bfg .String ()),_afe ;
};_bfg .Write (_fbc );}else {_dg ,_ :=_cge ._cddd .ReadByte ();_bfg .WriteByte (_dg );};};};return _b .PdfObjectName (_bfg .String ()),nil ;};

// Root returns the Root of the FDF document.
func (_cagd *fdfParser )Root ()(*_b .PdfObjectDictionary ,error ){if _cagd ._ec !=nil {if _aadb ,_gcd :=_cagd .trace (_cagd ._ec .Get ("\u0052\u006f\u006f\u0074")).(*_b .PdfObjectDictionary );_gcd {if _dbg ,_fbb :=_cagd .trace (_aadb .Get ("\u0046\u0044\u0046")).(*_b .PdfObjectDictionary );
_fbb {return _dbg ,nil ;};};};var _fae []int64 ;for _bfcbf :=range _cagd ._bc {_fae =append (_fae ,_bfcbf );};_d .Slice (_fae ,func (_cff ,_gacc int )bool {return _fae [_cff ]< _fae [_gacc ]});for _ ,_fgfe :=range _fae {_dgd :=_cagd ._bc [_fgfe ];if _daf ,_gdbd :=_cagd .trace (_dgd ).(*_b .PdfObjectDictionary );
_gdbd {if _eabf ,_adc :=_cagd .trace (_daf .Get ("\u0046\u0044\u0046")).(*_b .PdfObjectDictionary );_adc {return _eabf ,nil ;};};};return nil ,_g .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};func _aa (_fdfd string )(_b .PdfObjectReference ,error ){_efa :=_b .PdfObjectReference {};
_dag :=_cab .FindStringSubmatch (_fdfd );if len (_dag )< 3{_cc .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");return _efa ,_g .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");
};_fcbe ,_acb :=_a .Atoi (_dag [1]);if _acb !=nil {_cc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_dag [1]);
return _efa ,nil ;};_efa .ObjectNumber =int64 (_fcbe );_adae ,_acb :=_a .Atoi (_dag [2]);if _acb !=nil {_cc .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_dag [2]);
return _efa ,nil ;};_efa .GenerationNumber =int64 (_adae );return _efa ,nil ;};func _egga (_fed string )(*fdfParser ,error ){_bbf :=fdfParser {};_aad :=[]byte (_fed );_gec :=_ag .NewReader (_aad );_bbf ._dbd =_gec ;_bbf ._bc =map[int64 ]_b .PdfObject {};
_baae :=_eg .NewReader (_gec );_bbf ._cddd =_baae ;_bbf ._gf =int64 (len (_fed ));return &_bbf ,_bbf .parse ();};func (_gbcd *fdfParser )parseFdfVersion ()(int ,int ,error ){_gbcd ._dbd .Seek (0,_de .SeekStart );_debe :=20;_cbf :=make ([]byte ,_debe );
_gbcd ._dbd .Read (_cbf );_cdc :=_ea .FindStringSubmatch (string (_cbf ));if len (_cdc )< 3{_dge ,_dde ,_bcdd :=_gbcd .seekFdfVersionTopDown ();if _bcdd !=nil {_cc .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");
return 0,0,_bcdd ;};return _dge ,_dde ,nil ;};_edg ,_gcaa :=_a .Atoi (_cdc [1]);if _gcaa !=nil {return 0,0,_gcaa ;};_beeb ,_gcaa :=_a .Atoi (_cdc [2]);if _gcaa !=nil {return 0,0,_gcaa ;};_cc .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_edg ,_beeb );
return _edg ,_beeb ,nil ;};func (_abfe *fdfParser )parseNumber ()(_b .PdfObject ,error ){return _b .ParseNumber (_abfe ._cddd )};func (_fgfea *fdfParser )parse ()error {_fgfea ._dbd .Seek (0,_de .SeekStart );_fgfea ._cddd =_eg .NewReader (_fgfea ._dbd );
for {_fgfea .skipComments ();_gcg ,_agff :=_fgfea ._cddd .Peek (20);if _agff !=nil {_cc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return _agff ;};if _e .HasPrefix (string (_gcg ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_fgfea ._cddd .Discard (7);_fgfea .skipSpaces ();_fgfea .skipComments ();_efc ,_ :=_fgfea .parseDict ();_fgfea ._ec =_efc ;break ;};_bgc :=_feb .FindStringSubmatchIndex (string (_gcg ));
if len (_bgc )< 6{_cc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_gcg ));
return _g .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_faa ,_agff :=_fgfea .parseIndirectObject ();if _agff !=nil {return _agff ;};switch _gbd :=_faa .(type ){case *_b .PdfIndirectObject :_fgfea ._bc [_gbd .ObjectNumber ]=_gbd ;case *_b .PdfObjectStream :_fgfea ._bc [_gbd .ObjectNumber ]=_gbd ;default:return _g .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};func (_bfcb *fdfParser )parseDict ()(*_b .PdfObjectDictionary ,error ){_cc .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");_bcd :=_b .MakeDict ();_ffe ,_ :=_bfcb ._cddd .ReadByte ();
if _ffe !='<'{return nil ,_g .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_ffe ,_ =_bfcb ._cddd .ReadByte ();if _ffe !='<'{return nil ,_g .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};for {_bfcb .skipSpaces ();
_bfcb .skipComments ();_dec ,_bga :=_bfcb ._cddd .Peek (2);if _bga !=nil {return nil ,_bga ;};_cc .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_dec ),string (_dec ));if (_dec [0]=='>')&&(_dec [1]=='>'){_cc .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");
_bfcb ._cddd .ReadByte ();_bfcb ._cddd .ReadByte ();break ;};_cc .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");_gac ,_bga :=_bfcb .parseName ();_cc .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_gac );
if _bga !=nil {_cc .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_bga );return nil ,_bga ;};if len (_gac )> 4&&_gac [len (_gac )-4:]=="\u006e\u0075\u006c\u006c"{_dd :=_gac [0:len (_gac )-4];
_cc .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_gac );_cc .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_dd );
_bfcb .skipSpaces ();_bcg ,_ :=_bfcb ._cddd .Peek (1);if _bcg [0]=='/'{_bcd .Set (_dd ,_b .MakeNull ());continue ;};};_bfcb .skipSpaces ();_gba ,_bga :=_bfcb .parseObject ();if _bga !=nil {return nil ,_bga ;};_bcd .Set (_gac ,_gba );_cc .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_gac ,_gba .String ());
};_cc .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");return _bcd ,nil ;};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_bf ,_db :=_agg .Open (fdfPath );if _db !=nil {return nil ,_db ;};defer _bf .Close ();return Load (_bf );};

// Load loads FDF form data from `r`.
func Load (r _de .ReadSeeker )(*Data ,error ){_eb ,_ac :=_efeb (r );if _ac !=nil {return nil ,_ac ;};_df ,_ac :=_eb .Root ();if _ac !=nil {return nil ,_ac ;};_acc ,_fd :=_b .GetArray (_df .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_fd {return nil ,_g .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_gc :_acc ,_cde :_df },nil ;};func (_bff *fdfParser )parseBool ()(_b .PdfObjectBool ,error ){_ba ,_fag :=_bff ._cddd .Peek (4);if _fag !=nil {return _b .PdfObjectBool (false ),_fag ;};if (len (_ba )>=4)&&(string (_ba [:4])=="\u0074\u0072\u0075\u0065"){_bff ._cddd .Discard (4);
return _b .PdfObjectBool (true ),nil ;};_ba ,_fag =_bff ._cddd .Peek (5);if _fag !=nil {return _b .PdfObjectBool (false ),_fag ;};if (len (_ba )>=5)&&(string (_ba [:5])=="\u0066\u0061\u006cs\u0065"){_bff ._cddd .Discard (5);return _b .PdfObjectBool (false ),nil ;
};return _b .PdfObjectBool (false ),_g .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");};var _ea =_c .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");
var _cab =_c .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");func _efeb (_eda _de .ReadSeeker )(*fdfParser ,error ){_fecb :=&fdfParser {};_fecb ._dbd =_eda ;_fecb ._bc =map[int64 ]_b .PdfObject {};
_fgfb ,_gdf ,_gge :=_fecb .parseFdfVersion ();if _gge !=nil {_cc .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_gge );return nil ,_gge ;};_fecb ._be =_fgfb ;
_fecb ._bec =_gdf ;_gge =_fecb .parse ();return _fecb ,_gge ;};func (_fec *fdfParser )parseObject ()(_b .PdfObject ,error ){_cc .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");_fec .skipSpaces ();
for {_gca ,_ffa :=_fec ._cddd .Peek (2);if _ffa !=nil {return nil ,_ffa ;};_cc .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_gca ));if _gca [0]=='/'{_eadf ,_gfe :=_fec .parseName ();_cc .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_eadf );
return &_eadf ,_gfe ;}else if _gca [0]=='('{_cc .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _fec .parseString ();}else if _gca [0]=='['{_cc .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");return _fec .parseArray ();
}else if (_gca [0]=='<')&&(_gca [1]=='<'){_cc .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _fec .parseDict ();}else if _gca [0]=='<'{_cc .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");return _fec .parseHexString ();
}else if _gca [0]=='%'{_fec .readComment ();_fec .skipSpaces ();}else {_cc .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_gca ,_ =_fec ._cddd .Peek (15);_ebag :=string (_gca );_cc .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_ebag );
if (len (_ebag )> 3)&&(_ebag [:4]=="\u006e\u0075\u006c\u006c"){_feg ,_eed :=_fec .parseNull ();return &_feg ,_eed ;}else if (len (_ebag )> 4)&&(_ebag [:5]=="\u0066\u0061\u006cs\u0065"){_bea ,_eab :=_fec .parseBool ();return &_bea ,_eab ;}else if (len (_ebag )> 3)&&(_ebag [:4]=="\u0074\u0072\u0075\u0065"){_gff ,_dce :=_fec .parseBool ();
return &_gff ,_dce ;};_ade :=_cab .FindStringSubmatch (_ebag );if len (_ade )> 1{_gca ,_ =_fec ._cddd .ReadBytes ('R');_cc .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_gca [:]));_ccb ,_ed :=_aa (string (_gca ));
return &_ccb ,_ed ;};_cfe :=_fb .FindStringSubmatch (_ebag );if len (_cfe )> 1{_cc .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _fec .parseNumber ();};_cfe =_eeg .FindStringSubmatch (_ebag );if len (_cfe )> 1{_cc .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");
_cc .Log .Trace ("\u0025\u0020\u0073",_cfe );return _fec .parseNumber ();};_cc .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_ebag );return nil ,_g .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_b .PdfObjectDictionary ,error ){_ca :=map[string ]*_b .PdfObjectDictionary {};for _fa :=0;_fa < fdf ._gc .Len ();_fa ++{_ga ,_ccf :=_b .GetDict (fdf ._gc .Get (_fa ));if _ccf {_ccd ,_ :=_b .GetString (_ga .Get ("\u0054"));
if _ccd !=nil {_ca [_ccd .Str ()]=_ga ;};};};return _ca ,nil ;};