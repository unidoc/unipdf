//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_e "bufio";_ge "bytes";_a "encoding/hex";_c "errors";_d "fmt";_ac "github.com/unidoc/unipdf/v3/common";_f "github.com/unidoc/unipdf/v3/core";_gd "io";_gcc "os";_ca "regexp";_dg "sort";_gg "strconv";_gc "strings";);

// Load loads FDF form data from `r`.
func Load (r _gd .ReadSeeker )(*Data ,error ){_af ,_fa :=_ccae (r );if _fa !=nil {return nil ,_fa ;};_gce ,_fa :=_af .Root ();if _fa !=nil {return nil ,_fa ;};_fg ,_ce :=_f .GetArray (_gce .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_ce {return nil ,_c .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_b :_fg ,_gcb :_gce },nil ;};func (_afe *fdfParser )parseNumber ()(_f .PdfObject ,error ){return _f .ParseNumber (_afe ._bd )};var _gfb =_ca .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");


// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_f .PdfObject ,error ){_gbe ,_gbc :=fdf .FieldDictionaries ();if _gbc !=nil {return nil ,_gbc ;};var _bb []string ;for _eaa :=range _gbe {_bb =append (_bb ,_eaa );};_dg .Strings (_bb );_gfd :=map[string ]_f .PdfObject {};
for _ ,_bf :=range _bb {_acf :=_gbe [_bf ];_ff :=_f .TraceToDirectObject (_acf .Get ("\u0056"));_gfd [_bf ]=_ff ;};return _gfd ,nil ;};func (_fce *fdfParser )setFileOffset (_aeg int64 ){_fce ._fcea .Seek (_aeg ,_gd .SeekStart );_fce ._bd =_e .NewReader (_fce ._fcea );
};func (_fge *fdfParser )parseObject ()(_f .PdfObject ,error ){_ac .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");_fge .skipSpaces ();for {_dgf ,_fed :=_fge ._bd .Peek (2);if _fed !=nil {return nil ,_fed ;
};_ac .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_dgf ));if _dgf [0]=='/'{_ffc ,_egg :=_fge .parseName ();_ac .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_ffc );
return &_ffc ,_egg ;}else if _dgf [0]=='('{_ac .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _fge .parseString ();}else if _dgf [0]=='['{_ac .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");return _fge .parseArray ();
}else if (_dgf [0]=='<')&&(_dgf [1]=='<'){_ac .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _fge .parseDict ();}else if _dgf [0]=='<'{_ac .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");return _fge .parseHexString ();
}else if _dgf [0]=='%'{_fge .readComment ();_fge .skipSpaces ();}else {_ac .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_dgf ,_ =_fge ._bd .Peek (15);_ffbc :=string (_dgf );_ac .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_ffbc );
if (len (_ffbc )> 3)&&(_ffbc [:4]=="\u006e\u0075\u006c\u006c"){_cefb ,_egf :=_fge .parseNull ();return &_cefb ,_egf ;}else if (len (_ffbc )> 4)&&(_ffbc [:5]=="\u0066\u0061\u006cs\u0065"){_cc ,_ggg :=_fge .parseBool ();return &_cc ,_ggg ;}else if (len (_ffbc )> 3)&&(_ffbc [:4]=="\u0074\u0072\u0075\u0065"){_egff ,_cae :=_fge .parseBool ();
return &_egff ,_cae ;};_aee :=_acfd .FindStringSubmatch (_ffbc );if len (_aee )> 1{_dgf ,_ =_fge ._bd .ReadBytes ('R');_ac .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_dgf [:]));_cbbf ,_beg :=_ddd (string (_dgf ));
return &_cbbf ,_beg ;};_fcf :=_ec .FindStringSubmatch (_ffbc );if len (_fcf )> 1{_ac .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _fge .parseNumber ();};_fcf =_gfb .FindStringSubmatch (_ffbc );if len (_fcf )> 1{_ac .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");
_ac .Log .Trace ("\u0025\u0020\u0073",_fcf );return _fge .parseNumber ();};_ac .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_ffbc );return nil ,_c .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};func (_fcg *fdfParser )parseHexString ()(*_f .PdfObjectString ,error ){_fcg ._bd .ReadByte ();var _fe _ge .Buffer ;for {_eg ,_bfc :=_fcg ._bd .Peek (1);if _bfc !=nil {return _f .MakeHexString (""),_bfc ;};if _eg [0]=='>'{_fcg ._bd .ReadByte ();break ;
};_ebf ,_ :=_fcg ._bd .ReadByte ();if !_f .IsWhiteSpace (_ebf ){_fe .WriteByte (_ebf );};};if _fe .Len ()%2==1{_fe .WriteRune ('0');};_gca ,_bfcf :=_a .DecodeString (_fe .String ());if _bfcf !=nil {_ac .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_fe .String ());
return _f .MakeHexString (""),nil ;};return _f .MakeHexString (string (_gca )),nil ;};func (_bcc *fdfParser )parseName ()(_f .PdfObjectName ,error ){var _fga _ge .Buffer ;_gaf :=false ;for {_ad ,_cef :=_bcc ._bd .Peek (1);if _cef ==_gd .EOF {break ;};if _cef !=nil {return _f .PdfObjectName (_fga .String ()),_cef ;
};if !_gaf {if _ad [0]=='/'{_gaf =true ;_bcc ._bd .ReadByte ();}else if _ad [0]=='%'{_bcc .readComment ();_bcc .skipSpaces ();}else {_ac .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_ad ,_ad );
return _f .PdfObjectName (_fga .String ()),_d .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_ad [0]);};}else {if _f .IsWhiteSpace (_ad [0]){break ;}else if (_ad [0]=='/')||(_ad [0]=='[')||(_ad [0]=='(')||(_ad [0]==']')||(_ad [0]=='<')||(_ad [0]=='>'){break ;
}else if _ad [0]=='#'{_bea ,_aa :=_bcc ._bd .Peek (3);if _aa !=nil {return _f .PdfObjectName (_fga .String ()),_aa ;};_bcc ._bd .Discard (3);_cd ,_aa :=_a .DecodeString (string (_bea [1:3]));if _aa !=nil {return _f .PdfObjectName (_fga .String ()),_aa ;
};_fga .Write (_cd );}else {_cdd ,_ :=_bcc ._bd .ReadByte ();_fga .WriteByte (_cdd );};};};return _f .PdfObjectName (_fga .String ()),nil ;};func (_bfaa *fdfParser )trace (_fb _f .PdfObject )_f .PdfObject {switch _edbd :=_fb .(type ){case *_f .PdfObjectReference :_gdf ,_deec :=_bfaa ._gde [_edbd .ObjectNumber ].(*_f .PdfIndirectObject );
if _deec {return _gdf .PdfObject ;};_ac .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");return nil ;case *_f .PdfIndirectObject :return _edbd .PdfObject ;};return _fb ;};func (_cda *fdfParser )parseArray ()(*_f .PdfObjectArray ,error ){_gafc :=_f .MakeArray ();
_cda ._bd .ReadByte ();for {_cda .skipSpaces ();_eca ,_db :=_cda ._bd .Peek (1);if _db !=nil {return _gafc ,_db ;};if _eca [0]==']'{_cda ._bd .ReadByte ();break ;};_ffe ,_db :=_cda .parseObject ();if _db !=nil {return _gafc ,_db ;};_gafc .Append (_ffe );
};return _gafc ,nil ;};func (_gcee *fdfParser )seekToEOFMarker (_efg int64 )error {_ggdc :=int64 (0);_ege :=int64 (1000);for _ggdc < _efg {if _efg <=(_ege +_ggdc ){_ege =_efg -_ggdc ;};_ ,_egeb :=_gcee ._fcea .Seek (-_ggdc -_ege ,_gd .SeekEnd );if _egeb !=nil {return _egeb ;
};_dc :=make ([]byte ,_ege );_gcee ._fcea .Read (_dc );_ac .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_dc ));_gdb :=_gbf .FindAllStringIndex (string (_dc ),-1);
if _gdb !=nil {_ddfd :=_gdb [len (_gdb )-1];_ac .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_gdb );_gcee ._fcea .Seek (-_ggdc -_ege +int64 (_ddfd [0]),_gd .SeekEnd );return nil ;};_ac .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_ggdc +=_ege ;};_ac .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _c .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};func (_gceb *fdfParser )parseDict ()(*_f .PdfObjectDictionary ,error ){_ac .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");_cgf :=_f .MakeDict ();_gdec ,_ :=_gceb ._bd .ReadByte ();if _gdec !='<'{return nil ,_c .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");
};_gdec ,_ =_gceb ._bd .ReadByte ();if _gdec !='<'{return nil ,_c .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};for {_gceb .skipSpaces ();_gceb .skipComments ();_aeea ,_ddf :=_gceb ._bd .Peek (2);if _ddf !=nil {return nil ,_ddf ;
};_ac .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_aeea ),string (_aeea ));if (_aeea [0]=='>')&&(_aeea [1]=='>'){_ac .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");
_gceb ._bd .ReadByte ();_gceb ._bd .ReadByte ();break ;};_ac .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");_caed ,_ddf :=_gceb .parseName ();_ac .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_caed );
if _ddf !=nil {_ac .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_ddf );return nil ,_ddf ;};if len (_caed )> 4&&_caed [len (_caed )-4:]=="\u006e\u0075\u006c\u006c"{_fab :=_caed [0:len (_caed )-4];
_ac .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_caed );_ac .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_fab );
_gceb .skipSpaces ();_dfc ,_ :=_gceb ._bd .Peek (1);if _dfc [0]=='/'{_cgf .Set (_fab ,_f .MakeNull ());continue ;};};_gceb .skipSpaces ();_eggc ,_ddf :=_gceb .parseObject ();if _ddf !=nil {return nil ,_ddf ;};_cgf .Set (_caed ,_eggc );_ac .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_caed ,_eggc .String ());
};_ac .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");return _cgf ,nil ;};func _fee (_dbb string )(*fdfParser ,error ){_adf :=fdfParser {};_bbc :=[]byte (_dbb );_cad :=_ge .NewReader (_bbc );
_adf ._fcea =_cad ;_adf ._gde =map[int64 ]_f .PdfObject {};_fag :=_e .NewReader (_cad );_adf ._bd =_fag ;_adf ._be =int64 (len (_dbb ));return &_adf ,_adf .parse ();};

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_f .PdfObjectDictionary ,error ){_cab :=map[string ]*_f .PdfObjectDictionary {};for _ag :=0;_ag < fdf ._b .Len ();_ag ++{_cabd ,_gf :=_f .GetDict (fdf ._b .Get (_ag ));if _gf {_ea ,_ :=_f .GetString (_cabd .Get ("\u0054"));
if _ea !=nil {_cab [_ea .Str ()]=_cabd ;};};};return _cab ,nil ;};func (_fgd *fdfParser )readTextLine ()(string ,error ){var _ffb _ge .Buffer ;for {_cee ,_dad :=_fgd ._bd .Peek (1);if _dad !=nil {_ac .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_dad .Error ());
return _ffb .String (),_dad ;};if (_cee [0]!='\r')&&(_cee [0]!='\n'){_dee ,_ :=_fgd ._bd .ReadByte ();_ffb .WriteByte (_dee );}else {break ;};};return _ffb .String (),nil ;};func _ddd (_efa string )(_f .PdfObjectReference ,error ){_bab :=_f .PdfObjectReference {};
_fgf :=_acfd .FindStringSubmatch (_efa );if len (_fgf )< 3{_ac .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");return _bab ,_c .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");
};_dde ,_df :=_gg .Atoi (_fgf [1]);if _df !=nil {_ac .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_fgf [1]);
return _bab ,nil ;};_bab .ObjectNumber =int64 (_dde );_fd ,_df :=_gg .Atoi (_fgf [2]);if _df !=nil {_ac .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_fgf [2]);
return _bab ,nil ;};_bab .GenerationNumber =int64 (_fd );return _bab ,nil ;};var _ec =_ca .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");var _ee =_ca .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");


// Data represents forms data format (FDF) file data.
type Data struct{_gcb *_f .PdfObjectDictionary ;_b *_f .PdfObjectArray ;};func (_edb *fdfParser )skipSpaces ()(int ,error ){_gbg :=0;for {_bcb ,_gbfc :=_edb ._bd .ReadByte ();if _gbfc !=nil {return 0,_gbfc ;};if _f .IsWhiteSpace (_bcb ){_gbg ++;}else {_edb ._bd .UnreadByte ();
break ;};};return _gbg ,nil ;};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_ef ,_dd :=_gcc .Open (fdfPath );if _dd !=nil {return nil ,_dd ;};defer _ef .Close ();return Load (_ef );};

// Root returns the Root of the FDF document.
func (_agg *fdfParser )Root ()(*_f .PdfObjectDictionary ,error ){if _agg ._fac !=nil {if _fef ,_bdc :=_agg .trace (_agg ._fac .Get ("\u0052\u006f\u006f\u0074")).(*_f .PdfObjectDictionary );_bdc {if _agce ,_ffbg :=_agg .trace (_fef .Get ("\u0046\u0044\u0046")).(*_f .PdfObjectDictionary );
_ffbg {return _agce ,nil ;};};};var _cfce []int64 ;for _aacc :=range _agg ._gde {_cfce =append (_cfce ,_aacc );};_dg .Slice (_cfce ,func (_dbc ,_ggcf int )bool {return _cfce [_dbc ]< _cfce [_ggcf ]});for _ ,_efd :=range _cfce {_dca :=_agg ._gde [_efd ];
if _dba ,_gcag :=_agg .trace (_dca ).(*_f .PdfObjectDictionary );_gcag {if _cga ,_cade :=_agg .trace (_dba .Get ("\u0046\u0044\u0046")).(*_f .PdfObjectDictionary );_cade {return _cga ,nil ;};};};return nil ,_c .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};func (_egea *fdfParser )parseIndirectObject ()(_f .PdfObject ,error ){_cabe :=_f .PdfIndirectObject {};_ac .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");_edf ,_ceec :=_egea ._bd .Peek (20);if _ceec !=nil {_ac .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return &_cabe ,_ceec ;};_ac .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_edf ));_bbd :=_cabg .FindStringSubmatchIndex (string (_edf ));if len (_bbd )< 6{_ac .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_edf ));
return &_cabe ,_c .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_egea ._bd .Discard (_bbd [0]);_ac .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_bbd );_gfcf :=_bbd [1]-_bbd [0];_dge :=make ([]byte ,_gfcf );_ ,_ceec =_egea .readAtLeast (_dge ,_gfcf );if _ceec !=nil {_ac .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_ceec );
return nil ,_ceec ;};_ac .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_dge );_dga :=_cabg .FindStringSubmatch (string (_dge ));if len (_dga )< 3{_ac .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_dge ));
return &_cabe ,_c .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_dff ,_ :=_gg .Atoi (_dga [1]);_eeb ,_ :=_gg .Atoi (_dga [2]);_cabe .ObjectNumber =int64 (_dff );_cabe .GenerationNumber =int64 (_eeb );for {_aac ,_ggc :=_egea ._bd .Peek (2);if _ggc !=nil {return &_cabe ,_ggc ;};_ac .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_aac ),string (_aac ));
if _f .IsWhiteSpace (_aac [0]){_egea .skipSpaces ();}else if _aac [0]=='%'{_egea .skipComments ();}else if (_aac [0]=='<')&&(_aac [1]=='<'){_ac .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_cabe .PdfObject ,_ggc =_egea .parseDict ();
_ac .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_ggc );if _ggc !=nil {return &_cabe ,_ggc ;};_ac .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_aac [0]=='/')||(_aac [0]=='(')||(_aac [0]=='[')||(_aac [0]=='<'){_cabe .PdfObject ,_ggc =_egea .parseObject ();if _ggc !=nil {return &_cabe ,_ggc ;};_ac .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _aac [0]=='e'{_fea ,_ceeg :=_egea .readTextLine ();if _ceeg !=nil {return nil ,_ceeg ;};if len (_fea )>=6&&_fea [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _aac [0]=='s'{_aac ,_ =_egea ._bd .Peek (10);if string (_aac [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_dfa :=6;
if len (_aac )> 6{if _f .IsWhiteSpace (_aac [_dfa ])&&_aac [_dfa ]!='\r'&&_aac [_dfa ]!='\n'{_ac .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_dfa ++;};if _aac [_dfa ]=='\r'{_dfa ++;if _aac [_dfa ]=='\n'{_dfa ++;};}else if _aac [_dfa ]=='\n'{_dfa ++;};};_egea ._bd .Discard (_dfa );_ceg ,_feg :=_cabe .PdfObject .(*_f .PdfObjectDictionary );if !_feg {return nil ,_c .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_ac .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_ceg );_ceee ,_agd :=_ceg .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_f .PdfObjectInteger );if !_agd {return nil ,_c .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_gfg :=*_ceee ;if _gfg < 0{return nil ,_c .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_gfg )> _egea ._be {_ac .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_c .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_afae :=make ([]byte ,_gfg );
_ ,_ggc =_egea .readAtLeast (_afae ,int (_gfg ));if _ggc !=nil {_ac .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_afae ),_afae );_ac .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_ggc );
return nil ,_ggc ;};_acb :=_f .PdfObjectStream {};_acb .Stream =_afae ;_acb .PdfObjectDictionary =_cabe .PdfObject .(*_f .PdfObjectDictionary );_acb .ObjectNumber =_cabe .ObjectNumber ;_acb .GenerationNumber =_cabe .GenerationNumber ;_egea .skipSpaces ();
_egea ._bd .Discard (9);_egea .skipSpaces ();return &_acb ,nil ;};};_cabe .PdfObject ,_ggc =_egea .parseObject ();return &_cabe ,_ggc ;};};_ac .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");
return &_cabe ,nil ;};func (_ada *fdfParser )parseNull ()(_f .PdfObjectNull ,error ){_ ,_gbce :=_ada ._bd .Discard (4);return _f .PdfObjectNull {},_gbce ;};func (_cbc *fdfParser )readComment ()(string ,error ){var _eaab _ge .Buffer ;_ ,_gcf :=_cbc .skipSpaces ();
if _gcf !=nil {return _eaab .String (),_gcf ;};_faf :=true ;for {_facc ,_bef :=_cbc ._bd .Peek (1);if _bef !=nil {_ac .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_bef .Error ());return _eaab .String (),_bef ;};if _faf &&_facc [0]!='%'{return _eaab .String (),_c .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");
};_faf =false ;if (_facc [0]!='\r')&&(_facc [0]!='\n'){_gef ,_ :=_cbc ._bd .ReadByte ();_eaab .WriteByte (_gef );}else {break ;};};return _eaab .String (),nil ;};func (_gec *fdfParser )parse ()error {_gec ._fcea .Seek (0,_gd .SeekStart );_gec ._bd =_e .NewReader (_gec ._fcea );
for {_gec .skipComments ();_gdg ,_fdd :=_gec ._bd .Peek (20);if _fdd !=nil {_ac .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return _fdd ;};if _gc .HasPrefix (string (_gdg ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_gec ._bd .Discard (7);_gec .skipSpaces ();_gec .skipComments ();_acd ,_ :=_gec .parseDict ();_gec ._fac =_acd ;break ;};_eee :=_cabg .FindStringSubmatchIndex (string (_gdg ));
if len (_eee )< 6{_ac .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_gdg ));
return _c .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_dbbc ,_fdd :=_gec .parseIndirectObject ();if _fdd !=nil {return _fdd ;};switch _gbgb :=_dbbc .(type ){case *_f .PdfIndirectObject :_gec ._gde [_gbgb .ObjectNumber ]=_gbgb ;case *_f .PdfObjectStream :_gec ._gde [_gbgb .ObjectNumber ]=_gbgb ;default:return _c .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};type fdfParser struct{_bff int ;_da int ;_gde map[int64 ]_f .PdfObject ;_fcea _gd .ReadSeeker ;_bd *_e .Reader ;_be int64 ;_fac *_f .PdfObjectDictionary ;};func _ccae (_def _gd .ReadSeeker )(*fdfParser ,error ){_cde :=&fdfParser {};_cde ._fcea =_def ;
_cde ._gde =map[int64 ]_f .PdfObject {};_bca ,_beb ,_ab :=_cde .parseFdfVersion ();if _ab !=nil {_ac .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_ab );
return nil ,_ab ;};_cde ._bff =_bca ;_cde ._da =_beb ;_ab =_cde .parse ();return _cde ,_ab ;};func (_cb *fdfParser )skipComments ()error {if _ ,_ggd :=_cb .skipSpaces ();_ggd !=nil {return _ggd ;};_gcg :=true ;for {_cfb ,_eed :=_cb ._bd .Peek (1);if _eed !=nil {_ac .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_eed .Error ());
return _eed ;};if _gcg &&_cfb [0]!='%'{return nil ;};_gcg =false ;if (_cfb [0]!='\r')&&(_cfb [0]!='\n'){_cb ._bd .ReadByte ();}else {break ;};};return _cb .skipComments ();};func (_efgd *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_efgd ._fcea .Seek (0,_gd .SeekStart );
_efgd ._bd =_e .NewReader (_efgd ._fcea );_agf :=20;_cedb :=make ([]byte ,_agf );for {_agfd ,_eeed :=_efgd ._bd .ReadByte ();if _eeed !=nil {if _eeed ==_gd .EOF {break ;}else {return 0,0,_eeed ;};};if _f .IsDecimalDigit (_agfd )&&_cedb [_agf -1]=='.'&&_f .IsDecimalDigit (_cedb [_agf -2])&&_cedb [_agf -3]=='-'&&_cedb [_agf -4]=='F'&&_cedb [_agf -5]=='D'&&_cedb [_agf -6]=='P'{_cefg :=int (_cedb [_agf -2]-'0');
_eedf :=int (_agfd -'0');return _cefg ,_eedf ,nil ;};_cedb =append (_cedb [1:_agf ],_agfd );};return 0,0,_c .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};func (_cedf *fdfParser )parseBool ()(_f .PdfObjectBool ,error ){_geg ,_adc :=_cedf ._bd .Peek (4);
if _adc !=nil {return _f .PdfObjectBool (false ),_adc ;};if (len (_geg )>=4)&&(string (_geg [:4])=="\u0074\u0072\u0075\u0065"){_cedf ._bd .Discard (4);return _f .PdfObjectBool (true ),nil ;};_geg ,_adc =_cedf ._bd .Peek (5);if _adc !=nil {return _f .PdfObjectBool (false ),_adc ;
};if (len (_geg )>=5)&&(string (_geg [:5])=="\u0066\u0061\u006cs\u0065"){_cedf ._bd .Discard (5);return _f .PdfObjectBool (false ),nil ;};return _f .PdfObjectBool (false ),_c .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");
};var _gbf =_ca .MustCompile ("\u0025\u0025\u0045O\u0046");func (_ceb *fdfParser )parseString ()(*_f .PdfObjectString ,error ){_ceb ._bd .ReadByte ();var _aed _ge .Buffer ;_bec :=1;for {_agc ,_cbb :=_ceb ._bd .Peek (1);if _cbb !=nil {return _f .MakeString (_aed .String ()),_cbb ;
};if _agc [0]=='\\'{_ceb ._bd .ReadByte ();_aae ,_gae :=_ceb ._bd .ReadByte ();if _gae !=nil {return _f .MakeString (_aed .String ()),_gae ;};if _f .IsOctalDigit (_aae ){_add ,_eedb :=_ceb ._bd .Peek (2);if _eedb !=nil {return _f .MakeString (_aed .String ()),_eedb ;
};var _aea []byte ;_aea =append (_aea ,_aae );for _ ,_ced :=range _add {if _f .IsOctalDigit (_ced ){_aea =append (_aea ,_ced );}else {break ;};};_ceb ._bd .Discard (len (_aea )-1);_ac .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_aea );
_bccc ,_eedb :=_gg .ParseUint (string (_aea ),8,32);if _eedb !=nil {return _f .MakeString (_aed .String ()),_eedb ;};_aed .WriteByte (byte (_bccc ));continue ;};switch _aae {case 'n':_aed .WriteRune ('\n');case 'r':_aed .WriteRune ('\r');case 't':_aed .WriteRune ('\t');
case 'b':_aed .WriteRune ('\b');case 'f':_aed .WriteRune ('\f');case '(':_aed .WriteRune ('(');case ')':_aed .WriteRune (')');case '\\':_aed .WriteRune ('\\');};continue ;}else if _agc [0]=='('{_bec ++;}else if _agc [0]==')'{_bec --;if _bec ==0{_ceb ._bd .ReadByte ();
break ;};};_bbb ,_ :=_ceb ._bd .ReadByte ();_aed .WriteByte (_bbb );};return _f .MakeString (_aed .String ()),nil ;};func (_adcb *fdfParser )parseFdfVersion ()(int ,int ,error ){_adcb ._fcea .Seek (0,_gd .SeekStart );_bfa :=20;_egd :=make ([]byte ,_bfa );
_adcb ._fcea .Read (_egd );_bga :=_ee .FindStringSubmatch (string (_egd ));if len (_bga )< 3{_bde ,_bbbg ,_ccag :=_adcb .seekFdfVersionTopDown ();if _ccag !=nil {_ac .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");
return 0,0,_ccag ;};return _bde ,_bbbg ,nil ;};_dbd ,_gaeb :=_gg .Atoi (_bga [1]);if _gaeb !=nil {return 0,0,_gaeb ;};_bda ,_gaeb :=_gg .Atoi (_bga [2]);if _gaeb !=nil {return 0,0,_gaeb ;};_ac .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_dbd ,_bda );
return _dbd ,_bda ,nil ;};var _acfd =_ca .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");var _cabg =_ca .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");
func (_cfc *fdfParser )getFileOffset ()int64 {_gfc ,_ :=_cfc ._fcea .Seek (0,_gd .SeekCurrent );_gfc -=int64 (_cfc ._bd .Buffered ());return _gfc ;};func (_bc *fdfParser )readAtLeast (_cf []byte ,_fc int )(int ,error ){_edd :=_fc ;_bg :=0;_eb :=0;for _edd > 0{_cfd ,_gba :=_bc ._bd .Read (_cf [_bg :]);
if _gba !=nil {_ac .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_cfd ,_eb ,_gba .Error ());return _bg ,_c .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");
};_eb ++;_bg +=_cfd ;_edd -=_cfd ;};return _bg ,nil ;};