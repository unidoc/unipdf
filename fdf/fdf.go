//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_ee "bufio";_fa "bytes";_e "encoding/hex";_g "errors";_fb "fmt";_c "github.com/unidoc/unipdf/v3/common";_b "github.com/unidoc/unipdf/v3/core";_ea "io";_ff "os";_fd "regexp";_a "sort";_gb "strconv";_f "strings";);func (_fgf *fdfParser )parseArray ()(*_b .PdfObjectArray ,error ){_cbc :=_b .MakeArray ();
_fgf ._abfb .ReadByte ();for {_fgf .skipSpaces ();_ecb ,_dac :=_fgf ._abfb .Peek (1);if _dac !=nil {return _cbc ,_dac ;};if _ecb [0]==']'{_fgf ._abfb .ReadByte ();break ;};_aee ,_dac :=_fgf .parseObject ();if _dac !=nil {return _cbc ,_dac ;};_cbc .Append (_aee );
};return _cbc ,nil ;};func (_cdf *fdfParser )parse ()error {_cdf ._ba .Seek (0,_ea .SeekStart );_cdf ._abfb =_ee .NewReader (_cdf ._ba );for {_cdf .skipComments ();_cfea ,_bbe :=_cdf ._abfb .Peek (20);if _bbe !=nil {_c .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return _bbe ;};if _f .HasPrefix (string (_cfea ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_cdf ._abfb .Discard (7);_cdf .skipSpaces ();_cdf .skipComments ();_daca ,_ :=_cdf .parseDict ();_cdf ._ffb =_daca ;break ;};_eeg :=_ebc .FindStringSubmatchIndex (string (_cfea ));
if len (_eeg )< 6{_c .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_cfea ));
return _g .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_ffa ,_bbe :=_cdf .parseIndirectObject ();if _bbe !=nil {return _bbe ;};switch _bdfc :=_ffa .(type ){case *_b .PdfIndirectObject :_cdf ._fgg [_bdfc .ObjectNumber ]=_bdfc ;case *_b .PdfObjectStream :_cdf ._fgg [_bdfc .ObjectNumber ]=_bdfc ;default:return _g .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};var _dc =_fd .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");func _ega (_dgg string )(_b .PdfObjectReference ,error ){_dbe :=_b .PdfObjectReference {};
_bdd :=_abfa .FindStringSubmatch (_dgg );if len (_bdd )< 3{_c .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");return _dbe ,_g .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");
};_bgfe ,_ef :=_gb .Atoi (_bdd [1]);if _ef !=nil {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_bdd [1]);
return _dbe ,nil ;};_dbe .ObjectNumber =int64 (_bgfe );_cebf ,_ef :=_gb .Atoi (_bdd [2]);if _ef !=nil {_c .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_bdd [2]);
return _dbe ,nil ;};_dbe .GenerationNumber =int64 (_cebf );return _dbe ,nil ;};func (_fge *fdfParser )readAtLeast (_dbb []byte ,_dge int )(int ,error ){_eaa :=_dge ;_bb :=0;_ga :=0;for _eaa > 0{_gbe ,_ebf :=_fge ._abfb .Read (_dbb [_bb :]);if _ebf !=nil {_c .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_gbe ,_ga ,_ebf .Error ());
return _bb ,_g .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_ga ++;_bb +=_gbe ;_eaa -=_gbe ;};return _bb ,nil ;};type fdfParser struct{_da int ;_eag int ;_fgg map[int64 ]_b .PdfObject ;_ba _ea .ReadSeeker ;
_abfb *_ee .Reader ;_gc int64 ;_ffb *_b .PdfObjectDictionary ;};func (_ade *fdfParser )setFileOffset (_cff int64 ){_ade ._ba .Seek (_cff ,_ea .SeekStart );_ade ._abfb =_ee .NewReader (_ade ._ba );};func (_bfgc *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_bfgc ._ba .Seek (0,_ea .SeekStart );
_bfgc ._abfb =_ee .NewReader (_bfgc ._ba );_eadg :=20;_ccc :=make ([]byte ,_eadg );for {_bfd ,_adg :=_bfgc ._abfb .ReadByte ();if _adg !=nil {if _adg ==_ea .EOF {break ;}else {return 0,0,_adg ;};};if _b .IsDecimalDigit (_bfd )&&_ccc [_eadg -1]=='.'&&_b .IsDecimalDigit (_ccc [_eadg -2])&&_ccc [_eadg -3]=='-'&&_ccc [_eadg -4]=='F'&&_ccc [_eadg -5]=='D'&&_ccc [_eadg -6]=='P'{_dffa :=int (_ccc [_eadg -2]-'0');
_cgc :=int (_bfd -'0');return _dffa ,_cgc ,nil ;};_ccc =append (_ccc [1:_eadg ],_bfd );};return 0,0,_g .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};func (_cc *fdfParser )skipComments ()error {if _ ,_eab :=_cc .skipSpaces ();
_eab !=nil {return _eab ;};_cd :=true ;for {_bad ,_bf :=_cc ._abfb .Peek (1);if _bf !=nil {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_bf .Error ());return _bf ;};if _cd &&_bad [0]!='%'{return nil ;};_cd =false ;if (_bad [0]!='\r')&&(_bad [0]!='\n'){_cc ._abfb .ReadByte ();
}else {break ;};};return _cc .skipComments ();};func (_bbg *fdfParser )parseNull ()(_b .PdfObjectNull ,error ){_ ,_ccd :=_bbg ._abfb .Discard (4);return _b .PdfObjectNull {},_ccd ;};func (_abg *fdfParser )seekToEOFMarker (_gcg int64 )error {_cga :=int64 (0);
_aec :=int64 (1000);for _cga < _gcg {if _gcg <=(_aec +_cga ){_aec =_gcg -_cga ;};_ ,_fcca :=_abg ._ba .Seek (-_cga -_aec ,_ea .SeekEnd );if _fcca !=nil {return _fcca ;};_dgc :=make ([]byte ,_aec );_abg ._ba .Read (_dgc );_c .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_dgc ));
_cgbc :=_cad .FindAllStringIndex (string (_dgc ),-1);if _cgbc !=nil {_gddc :=_cgbc [len (_cgbc )-1];_c .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_cgbc );_abg ._ba .Seek (-_cga -_aec +int64 (_gddc [0]),_ea .SeekEnd );return nil ;};
_c .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_cga +=_aec ;};_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _g .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};func (_aaf *fdfParser )parseIndirectObject ()(_b .PdfObject ,error ){_aca :=_b .PdfIndirectObject {};_c .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");_gbga ,_ffba :=_aaf ._abfb .Peek (20);if _ffba !=nil {_c .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return &_aca ,_ffba ;};_c .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_gbga ));_eed :=_ebc .FindStringSubmatchIndex (string (_gbga ));if len (_eed )< 6{_c .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_gbga ));
return &_aca ,_g .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_aaf ._abfb .Discard (_eed [0]);_c .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_eed );_gfag :=_eed [1]-_eed [0];_bff :=make ([]byte ,_gfag );_ ,_ffba =_aaf .readAtLeast (_bff ,_gfag );if _ffba !=nil {_c .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_ffba );
return nil ,_ffba ;};_c .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_bff );_efa :=_ebc .FindStringSubmatch (string (_bff ));if len (_efa )< 3{_c .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_bff ));
return &_aca ,_g .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_fbe ,_ :=_gb .Atoi (_efa [1]);_efg ,_ :=_gb .Atoi (_efa [2]);_aca .ObjectNumber =int64 (_fbe );_aca .GenerationNumber =int64 (_efg );for {_bec ,_egcg :=_aaf ._abfb .Peek (2);if _egcg !=nil {return &_aca ,_egcg ;};_c .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_bec ),string (_bec ));
if _b .IsWhiteSpace (_bec [0]){_aaf .skipSpaces ();}else if _bec [0]=='%'{_aaf .skipComments ();}else if (_bec [0]=='<')&&(_bec [1]=='<'){_c .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_aca .PdfObject ,_egcg =_aaf .parseDict ();
_c .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_egcg );if _egcg !=nil {return &_aca ,_egcg ;};_c .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_bec [0]=='/')||(_bec [0]=='(')||(_bec [0]=='[')||(_bec [0]=='<'){_aca .PdfObject ,_egcg =_aaf .parseObject ();if _egcg !=nil {return &_aca ,_egcg ;};_c .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _bec [0]=='e'{_ggd ,_ffg :=_aaf .readTextLine ();if _ffg !=nil {return nil ,_ffg ;};if len (_ggd )>=6&&_ggd [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _bec [0]=='s'{_bec ,_ =_aaf ._abfb .Peek (10);if string (_bec [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_dee :=6;
if len (_bec )> 6{if _b .IsWhiteSpace (_bec [_dee ])&&_bec [_dee ]!='\r'&&_bec [_dee ]!='\n'{_c .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_dee ++;};if _bec [_dee ]=='\r'{_dee ++;if _bec [_dee ]=='\n'{_dee ++;};}else if _bec [_dee ]=='\n'{_dee ++;};};_aaf ._abfb .Discard (_dee );_bega ,_bce :=_aca .PdfObject .(*_b .PdfObjectDictionary );if !_bce {return nil ,_g .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_c .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_bega );_fbg ,_dbfc :=_bega .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_b .PdfObjectInteger );if !_dbfc {return nil ,_g .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_aba :=*_fbg ;if _aba < 0{return nil ,_g .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_aba )> _aaf ._gc {_c .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_g .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_aaec :=make ([]byte ,_aba );
_ ,_egcg =_aaf .readAtLeast (_aaec ,int (_aba ));if _egcg !=nil {_c .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_aaec ),_aaec );_c .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_egcg );
return nil ,_egcg ;};_afc :=_b .PdfObjectStream {};_afc .Stream =_aaec ;_afc .PdfObjectDictionary =_aca .PdfObject .(*_b .PdfObjectDictionary );_afc .ObjectNumber =_aca .ObjectNumber ;_afc .GenerationNumber =_aca .GenerationNumber ;_aaf .skipSpaces ();
_aaf ._abfb .Discard (9);_aaf .skipSpaces ();return &_afc ,nil ;};};_aca .PdfObject ,_egcg =_aaf .parseObject ();return &_aca ,_egcg ;};};_c .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");
return &_aca ,nil ;};

// Root returns the Root of the FDF document.
func (_cfde *fdfParser )Root ()(*_b .PdfObjectDictionary ,error ){if _cfde ._ffb !=nil {if _fbb ,_fbgf :=_cfde .trace (_cfde ._ffb .Get ("\u0052\u006f\u006f\u0074")).(*_b .PdfObjectDictionary );_fbgf {if _gdaf ,_ecgg :=_cfde .trace (_fbb .Get ("\u0046\u0044\u0046")).(*_b .PdfObjectDictionary );
_ecgg {return _gdaf ,nil ;};};};var _dfdf []int64 ;for _dfaa :=range _cfde ._fgg {_dfdf =append (_dfdf ,_dfaa );};_a .Slice (_dfdf ,func (_fgc ,_dd int )bool {return _dfdf [_fgc ]< _dfdf [_dd ]});for _ ,_fag :=range _dfdf {_fbab :=_cfde ._fgg [_fag ];if _ggcd ,_aeec :=_cfde .trace (_fbab ).(*_b .PdfObjectDictionary );
_aeec {if _deec ,_bde :=_cfde .trace (_ggcd .Get ("\u0046\u0044\u0046")).(*_b .PdfObjectDictionary );_bde {return _deec ,nil ;};};};return nil ,_g .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};var _ebc =_fd .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");


// Data represents forms data format (FDF) file data.
type Data struct{_bg *_b .PdfObjectDictionary ;_bd *_b .PdfObjectArray ;};func (_dcfb *fdfParser )parseNumber ()(_b .PdfObject ,error ){return _b .ParseNumber (_dcfb ._abfb )};func _facg (_dag _ea .ReadSeeker )(*fdfParser ,error ){_becc :=&fdfParser {};
_becc ._ba =_dag ;_becc ._fgg =map[int64 ]_b .PdfObject {};_ebefc ,_ffec ,_egf :=_becc .parseFdfVersion ();if _egf !=nil {_c .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_egf );
return nil ,_egf ;};_becc ._da =_ebefc ;_becc ._eag =_ffec ;_egf =_becc .parse ();return _becc ,_egf ;};func (_ce *fdfParser )parseName ()(_b .PdfObjectName ,error ){var _dcf _fa .Buffer ;_cadb :=false ;for {_ecg ,_gg :=_ce ._abfb .Peek (1);if _gg ==_ea .EOF {break ;
};if _gg !=nil {return _b .PdfObjectName (_dcf .String ()),_gg ;};if !_cadb {if _ecg [0]=='/'{_cadb =true ;_ce ._abfb .ReadByte ();}else if _ecg [0]=='%'{_ce .readComment ();_ce .skipSpaces ();}else {_c .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_ecg ,_ecg );
return _b .PdfObjectName (_dcf .String ()),_fb .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_ecg [0]);};}else {if _b .IsWhiteSpace (_ecg [0]){break ;}else if (_ecg [0]=='/')||(_ecg [0]=='[')||(_ecg [0]=='(')||(_ecg [0]==']')||(_ecg [0]=='<')||(_ecg [0]=='>'){break ;
}else if _ecg [0]=='#'{_ceb ,_dga :=_ce ._abfb .Peek (3);if _dga !=nil {return _b .PdfObjectName (_dcf .String ()),_dga ;};_ce ._abfb .Discard (3);_ae ,_dga :=_e .DecodeString (string (_ceb [1:3]));if _dga !=nil {return _b .PdfObjectName (_dcf .String ()),_dga ;
};_dcf .Write (_ae );}else {_gcd ,_ :=_ce ._abfb .ReadByte ();_dcf .WriteByte (_gcd );};};};return _b .PdfObjectName (_dcf .String ()),nil ;};func (_cda *fdfParser )parseBool ()(_b .PdfObjectBool ,error ){_ed ,_bda :=_cda ._abfb .Peek (4);if _bda !=nil {return _b .PdfObjectBool (false ),_bda ;
};if (len (_ed )>=4)&&(string (_ed [:4])=="\u0074\u0072\u0075\u0065"){_cda ._abfb .Discard (4);return _b .PdfObjectBool (true ),nil ;};_ed ,_bda =_cda ._abfb .Peek (5);if _bda !=nil {return _b .PdfObjectBool (false ),_bda ;};if (len (_ed )>=5)&&(string (_ed [:5])=="\u0066\u0061\u006cs\u0065"){_cda ._abfb .Discard (5);
return _b .PdfObjectBool (false ),nil ;};return _b .PdfObjectBool (false ),_g .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");};var _bdcb =_fd .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");
func (_af *fdfParser )parseString ()(*_b .PdfObjectString ,error ){_af ._abfb .ReadByte ();var _dae _fa .Buffer ;_gf :=1;for {_bef ,_bcb :=_af ._abfb .Peek (1);if _bcb !=nil {return _b .MakeString (_dae .String ()),_bcb ;};if _bef [0]=='\\'{_af ._abfb .ReadByte ();
_fef ,_eaf :=_af ._abfb .ReadByte ();if _eaf !=nil {return _b .MakeString (_dae .String ()),_eaf ;};if _b .IsOctalDigit (_fef ){_dgb ,_fac :=_af ._abfb .Peek (2);if _fac !=nil {return _b .MakeString (_dae .String ()),_fac ;};var _gd []byte ;_gd =append (_gd ,_fef );
for _ ,_bfb :=range _dgb {if _b .IsOctalDigit (_bfb ){_gd =append (_gd ,_bfb );}else {break ;};};_af ._abfb .Discard (len (_gd )-1);_c .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_gd );
_dfd ,_fac :=_gb .ParseUint (string (_gd ),8,32);if _fac !=nil {return _b .MakeString (_dae .String ()),_fac ;};_dae .WriteByte (byte (_dfd ));continue ;};switch _fef {case 'n':_dae .WriteRune ('\n');case 'r':_dae .WriteRune ('\r');case 't':_dae .WriteRune ('\t');
case 'b':_dae .WriteRune ('\b');case 'f':_dae .WriteRune ('\f');case '(':_dae .WriteRune ('(');case ')':_dae .WriteRune (')');case '\\':_dae .WriteRune ('\\');};continue ;}else if _bef [0]=='('{_gf ++;}else if _bef [0]==')'{_gf --;if _gf ==0{_af ._abfb .ReadByte ();
break ;};};_gfa ,_ :=_af ._abfb .ReadByte ();_dae .WriteByte (_gfa );};return _b .MakeString (_dae .String ()),nil ;};var _abfa =_fd .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");


// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_b .PdfObjectDictionary ,error ){_ec :=map[string ]*_b .PdfObjectDictionary {};for _bdc :=0;_bdc < fdf ._bd .Len ();_bdc ++{_cg ,_fad :=_b .GetDict (fdf ._bd .Get (_bdc ));if _fad {_ab ,_ :=_b .GetString (_cg .Get ("\u0054"));
if _ab !=nil {_ec [_ab .Str ()]=_cg ;};};};return _ec ,nil ;};func (_dfg *fdfParser )parseObject ()(_b .PdfObject ,error ){_c .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");_dfg .skipSpaces ();for {_gfad ,_fed :=_dfg ._abfb .Peek (2);
if _fed !=nil {return nil ,_fed ;};_c .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_gfad ));if _gfad [0]=='/'{_ebef ,_ebce :=_dfg .parseName ();_c .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_ebef );
return &_ebef ,_ebce ;}else if _gfad [0]=='('{_c .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _dfg .parseString ();}else if _gfad [0]=='['{_c .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");return _dfg .parseArray ();
}else if (_gfad [0]=='<')&&(_gfad [1]=='<'){_c .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _dfg .parseDict ();}else if _gfad [0]=='<'{_c .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");return _dfg .parseHexString ();
}else if _gfad [0]=='%'{_dfg .readComment ();_dfg .skipSpaces ();}else {_c .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_gfad ,_ =_dfg ._abfb .Peek (15);_geb :=string (_gfad );_c .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_geb );
if (len (_geb )> 3)&&(_geb [:4]=="\u006e\u0075\u006c\u006c"){_aea ,_dace :=_dfg .parseNull ();return &_aea ,_dace ;}else if (len (_geb )> 4)&&(_geb [:5]=="\u0066\u0061\u006cs\u0065"){_bgb ,_ag :=_dfg .parseBool ();return &_bgb ,_ag ;}else if (len (_geb )> 3)&&(_geb [:4]=="\u0074\u0072\u0075\u0065"){_gdb ,_efc :=_dfg .parseBool ();
return &_gdb ,_efc ;};_dff :=_abfa .FindStringSubmatch (_geb );if len (_dff )> 1{_gfad ,_ =_dfg ._abfb .ReadBytes ('R');_c .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_gfad [:]));_gda ,_cfe :=_ega (string (_gfad ));
return &_gda ,_cfe ;};_gde :=_caa .FindStringSubmatch (_geb );if len (_gde )> 1{_c .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _dfg .parseNumber ();};_gde =_dc .FindStringSubmatch (_geb );if len (_gde )> 1{_c .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");
_c .Log .Trace ("\u0025\u0020\u0073",_gde );return _dfg .parseNumber ();};_c .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_geb );return nil ,_g .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};func (_baa *fdfParser )readTextLine ()(string ,error ){var _gbg _fa .Buffer ;for {_bgc ,_dcg :=_baa ._abfb .Peek (1);if _dcg !=nil {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_dcg .Error ());return _gbg .String (),_dcg ;};
if (_bgc [0]!='\r')&&(_bgc [0]!='\n'){_ebe ,_ :=_baa ._abfb .ReadByte ();_gbg .WriteByte (_ebe );}else {break ;};};return _gbg .String (),nil ;};

// Load loads FDF form data from `r`.
func Load (r _ea .ReadSeeker )(*Data ,error ){_fg ,_fae :=_facg (r );if _fae !=nil {return nil ,_fae ;};_be ,_fae :=_fg .Root ();if _fae !=nil {return nil ,_fae ;};_dg ,_cf :=_b .GetArray (_be .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_cf {return nil ,_g .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_bd :_dg ,_bg :_be },nil ;};func _caab (_bfg string )(*fdfParser ,error ){_cfc :=fdfParser {};_ece :=[]byte (_bfg );_cdc :=_fa .NewReader (_ece );_cfc ._ba =_cdc ;_cfc ._fgg =map[int64 ]_b .PdfObject {};_ggg :=_ee .NewReader (_cdc );_cfc ._abfb =_ggg ;
_cfc ._gc =int64 (len (_bfg ));return &_cfc ,_cfc .parse ();};func (_aff *fdfParser )parseFdfVersion ()(int ,int ,error ){_aff ._ba .Seek (0,_ea .SeekStart );_fggg :=20;_acf :=make ([]byte ,_fggg );_aff ._ba .Read (_acf );_ead :=_bdcb .FindStringSubmatch (string (_acf ));
if len (_ead )< 3{_ebg ,_fegg ,_dgeg :=_aff .seekFdfVersionTopDown ();if _dgeg !=nil {_c .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");
return 0,0,_dgeg ;};return _ebg ,_fegg ,nil ;};_eagg ,_cde :=_gb .Atoi (_ead [1]);if _cde !=nil {return 0,0,_cde ;};_bcg ,_cde :=_gb .Atoi (_ead [2]);if _cde !=nil {return 0,0,_cde ;};_c .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_eagg ,_bcg );
return _eagg ,_bcg ,nil ;};

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_b .PdfObject ,error ){_db ,_ebb :=fdf .FieldDictionaries ();if _ebb !=nil {return nil ,_ebb ;};var _gbc []string ;for _egg :=range _db {_gbc =append (_gbc ,_egg );};_a .Strings (_gbc );_fe :=map[string ]_b .PdfObject {};
for _ ,_cfg :=range _gbc {_abf :=_db [_cfg ];_ad :=_b .TraceToDirectObject (_abf .Get ("\u0056"));_fe [_cfg ]=_ad ;};return _fe ,nil ;};func (_egd *fdfParser )parseDict ()(*_b .PdfObjectDictionary ,error ){_c .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");
_bee :=_b .MakeDict ();_gea ,_ :=_egd ._abfb .ReadByte ();if _gea !='<'{return nil ,_g .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_gea ,_ =_egd ._abfb .ReadByte ();if _gea !='<'{return nil ,_g .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");
};for {_egd .skipSpaces ();_egd .skipComments ();_ffc ,_ggc :=_egd ._abfb .Peek (2);if _ggc !=nil {return nil ,_ggc ;};_c .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_ffc ),string (_ffc ));
if (_ffc [0]=='>')&&(_ffc [1]=='>'){_c .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");_egd ._abfb .ReadByte ();_egd ._abfb .ReadByte ();break ;};_c .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");
_ede ,_ggc :=_egd .parseName ();_c .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_ede );if _ggc !=nil {_c .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_ggc );
return nil ,_ggc ;};if len (_ede )> 4&&_ede [len (_ede )-4:]=="\u006e\u0075\u006c\u006c"{_dbf :=_ede [0:len (_ede )-4];_c .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_ede );
_c .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_dbf );_egd .skipSpaces ();_cgd ,_ :=_egd ._abfb .Peek (1);if _cgd [0]=='/'{_bee .Set (_dbf ,_b .MakeNull ());continue ;};};_egd .skipSpaces ();
_cfd ,_ggc :=_egd .parseObject ();if _ggc !=nil {return nil ,_ggc ;};_bee .Set (_ede ,_cfd );_c .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_ede ,_cfd .String ());};_c .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");
return _bee ,nil ;};var _caa =_fd .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");func (_fadb *fdfParser )getFileOffset ()int64 {_df ,_ :=_fadb ._ba .Seek (0,_ea .SeekCurrent );_df -=int64 (_fadb ._abfb .Buffered ());
return _df ;};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_bc ,_ac :=_ff .Open (fdfPath );if _ac !=nil {return nil ,_ac ;};defer _bc .Close ();return Load (_bc );};var _cad =_fd .MustCompile ("\u0025\u0025\u0045O\u0046");func (_caac *fdfParser )skipSpaces ()(int ,error ){_fc :=0;
for {_bgg ,_cb :=_caac ._abfb .ReadByte ();if _cb !=nil {return 0,_cb ;};if _b .IsWhiteSpace (_bgg ){_fc ++;}else {_caac ._abfb .UnreadByte ();break ;};};return _fc ,nil ;};func (_gcb *fdfParser )trace (_bdf _b .PdfObject )_b .PdfObject {switch _cffa :=_bdf .(type ){case *_b .PdfObjectReference :_abff ,_gdbd :=_gcb ._fgg [_cffa .ObjectNumber ].(*_b .PdfIndirectObject );
if _gdbd {return _abff .PdfObject ;};_c .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");return nil ;case *_b .PdfIndirectObject :return _cffa .PdfObject ;};return _bdf ;};func (_bgf *fdfParser )readComment ()(string ,error ){var _eeb _fa .Buffer ;
_ ,_fgb :=_bgf .skipSpaces ();if _fgb !=nil {return _eeb .String (),_fgb ;};_dfa :=true ;for {_fcc ,_beg :=_bgf ._abfb .Peek (1);if _beg !=nil {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_beg .Error ());return _eeb .String (),_beg ;
};if _dfa &&_fcc [0]!='%'{return _eeb .String (),_g .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");};_dfa =false ;if (_fcc [0]!='\r')&&(_fcc [0]!='\n'){_add ,_ :=_bgf ._abfb .ReadByte ();
_eeb .WriteByte (_add );}else {break ;};};return _eeb .String (),nil ;};func (_ecgb *fdfParser )parseHexString ()(*_b .PdfObjectString ,error ){_ecgb ._abfb .ReadByte ();var _cef _fa .Buffer ;for {_cgb ,_ge :=_ecgb ._abfb .Peek (1);if _ge !=nil {return _b .MakeHexString (""),_ge ;
};if _cgb [0]=='>'{_ecgb ._abfb .ReadByte ();break ;};_fcf ,_ :=_ecgb ._abfb .ReadByte ();if !_b .IsWhiteSpace (_fcf ){_cef .WriteByte (_fcf );};};if _cef .Len ()%2==1{_cef .WriteRune ('0');};_bae ,_aa :=_e .DecodeString (_cef .String ());if _aa !=nil {_c .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_cef .String ());
return _b .MakeHexString (""),nil ;};return _b .MakeHexString (string (_bae )),nil ;};